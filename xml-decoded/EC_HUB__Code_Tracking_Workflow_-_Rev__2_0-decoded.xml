<?xml version='1.0' encoding='UTF-8'?>
<workflow>
  <meta name="jira.description" />
  <meta name="jira.update.author.key">arianna.fabbri</meta>
  <meta name="jira.updated.date">1744644897252</meta>
  <initial-actions>
    <action id="1" name="Create">
      <validators>
        <validator name="" type="class">
          <arg name="permission">Create Issue</arg>
          <arg name="class.name">com.atlassian.jira.workflow.validator.PermissionValidator</arg>
        </validator>
        <validator name="" type="class">
          <arg name="permissionKey">ASSIGN_ISSUES</arg>
          <arg name="class.name">com.atlassian.jira.workflow.validator.PermissionValidator</arg>
        </validator>
      </validators>
      <results>
        <unconditional-result old-status="Å¾Ã©e" status="Â¢â€”Â§" step="14">
          <post-functions>
            <function type="class">
              <arg name="FIELD_SECURITY_LEVEL_ID">10200</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SetIssueSecurity</arg>
              <arg name="FIELD_CONDITION" />
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueCreateFunction</arg>
            </function>
            <function type="class">
              <arg name="FIELD_NOTES" />
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="FIELD_INLINE_SCRIPT" />
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_SCRIPT_FILE">customScripts\EC_UpdateVisibilityGroups.groovy</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">1</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
  </initial-actions>
  <common-actions>
    <action id="161" name="Back to SAP Views Waiting" view="fieldscreen">
      <meta name="jira.description" />
      <meta name="jira.fieldscreen.id">20404</meta>
      <validators>
        <validator name="" type="class">
          <arg name="contextHandling" />
          <arg name="hidFieldsList">timespent@@</arg>
          <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
          <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
          <arg name="customErrorMessage-textValue" />
        </validator>
      </validators>
      <results>
        <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="7">
          <post-functions>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
    <action id="51" name="SAP Views Update" view="fieldscreen">
      <meta name="jira.description" />
      <meta name="jira.fieldscreen.id">20404</meta>
      <restrict-to>
        <conditions type="OR">
          <condition type="class">
            <arg name="class.name">com.atlassian.jira.workflow.condition.AllowOnlyAssignee</arg>
          </condition>
          <condition type="class">
            <arg name="class.name">com.atlassian.jira.workflow.condition.UserInGroupCondition</arg>
            <arg name="group">EC-HUB-administrators</arg>
          </condition>
          <condition type="class">
            <arg name="class.name">com.atlassian.jira.workflow.condition.UserInGroupCondition</arg>
            <arg name="group">EC-HUB-team</arg>
          </condition>
        </conditions>
      </restrict-to>
      <validators>
        <validator name="" type="class">
          <arg name="contextHandling" />
          <arg name="hidFieldsList">timespent@@</arg>
          <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
          <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
          <arg name="customErrorMessage-textValue" />
        </validator>
      </validators>
      <results>
        <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="7">
          <post-functions>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="field.name">customfield_13200</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
              <arg name="field.value">%%CURRENT_DATETIME%%</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
            </function>
            <function type="class">
              <arg name="field.name">customfield_13207</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
              <arg name="field.value">%%CURRENT_DATETIME%%</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">10102</arg>
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
    <action id="101" name="&#13;Ð¹bÐ…ÐºÑ‚" view="fieldscreen">
      <meta name="jira.description" />
      <meta name="jira.fieldscreen.id">20123</meta>
      <restrict-to>
        <conditions type="AND">
          <conditions type="OR">
            <condition type="class">
              <arg name="FIELD_FUNCTION_ID">d25fa799-cc12-4388-80a8-772f33330574</arg>
              <arg name="FIELD_INVERT_CONDITION" />
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.GroupCondition</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              <arg name="FIELD_GROUP_NAMES">EC-HUB-team</arg>
            </condition>
            <condition type="class">
              <arg name="class.name">com.atlassian.jira.workflow.condition.AllowOnlyAssignee</arg>
            </condition>
          </conditions>
          <condition type="class">
            <arg name="FIELD_FUNCTION_ID">41800163-9b2d-4535-b8bd-3a7e05e01fe9</arg>
            <arg name="FIELD_NOTES">IF NOT ZALBE50 AND NOT ZFRTX AND NOT ZERSX AND NOT ZALBX</arg>
            <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
            <arg name="FIELD_CONDITION">{"script":"!(cfValues['Material Type']?.value == 'ZALB (semilavorato-phantom / semifinished-phantom)' &amp;&amp; cfValues['Procurement']?.value == 'E50 - Phantom') &amp;&amp; !(cfValues['Material Type']?.value == 'ZFRT (prodotto finito / finished product)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production') &amp;&amp; !(cfValues['Material Type']?.value == 'ZALB (semilavorato-phantom / semifinished-phantom)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production') &amp;&amp; !(cfValues['Material Type']?.value == 'ZERS (ricambio / spare part)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production')","scriptPath":null,"parameters":{}}</arg>
            <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
          </condition>
        </conditions>
      </restrict-to>
      <validators>
        <validator name="" type="class">
          <arg name="contextHandling" />
          <arg name="hidFieldsList">timespent@@</arg>
          <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
          <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
          <arg name="customErrorMessage-textValue" />
        </validator>
      </validators>
      <results>
        <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="13">
          <post-functions>
            <function type="class">
              <arg name="field.name">jÃ‹"Â‚wÂž</arg>
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
              <arg name="field.value">pietro.libro</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
            </function>
            <function type="class">
              <arg name="field.name">customfield_15400</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
              <arg name="field.value">%%CURRENT_DATETIME%%</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
            </function>
            <function type="class">
              <arg name="field.name">customfield_13200</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
              <arg name="field.value">%%CURRENT_DATETIME%%</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
    <action id="261" name="Back to Supplier Waiting" view="fieldscreen">
      <meta name="jira.description" />
      <meta name="jira.fieldscreen.id">20123</meta>
      <validators>
        <validator name="" type="class">
          <arg name="contextHandling" />
          <arg name="hidFieldsList">timespent@@</arg>
          <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
          <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
          <arg name="customErrorMessage-textValue" />
        </validator>
      </validators>
      <results>
        <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="20">
          <post-functions>
            <function type="class">
              <arg name="field.name">jÃ‹"Â‚wÂž</arg>
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
              <arg name="field.value">alberto.manfredi</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
    <action id="311" name="Back to Open">
      <meta name="jira.description" />
      <meta name="jira.fieldscreen.id" />
      <results>
        <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="14">
          <post-functions>
            <function type="class">
              <arg name="field.name">resolution</arg>
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
              <arg name="field.value" />
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
    <action id="391" name=" Å ">
      <meta name="jira.description" />
      <meta name="jira.fieldscreen.id" />
      <results>
        <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="14">
          <post-functions>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
    <action id="281" name=" Done" view="fieldscreen">
      <meta name="jira.description" />
      <meta name="jira.fieldscreen.id">20123</meta>
      <restrict-to>
        <conditions type="AND">
          <conditions type="OR">
            <condition type="class">
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.condition.UserIsInAnyGroupsCondition</arg>
              <arg name="hidGroupsList">EC-HUB-administrators@@EC-HUB-team@@</arg>
            </condition>
            <condition type="class">
              <arg name="class.name">com.atlassian.jira.workflow.condition.AllowOnlyAssignee</arg>
            </condition>
          </conditions>
          <condition type="class">
            <arg name="conditionList">3</arg>
            <arg name="comparisonType">1</arg>
            <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
            <arg name="class.name">com.googlecode.jsu.workflow.condition.ValueFieldCondition</arg>
            <arg name="fieldValue">Created</arg>
            <arg name="fieldsList">customfield_23254</arg>
          </condition>
        </conditions>
      </restrict-to>
      <validators>
        <validator name="" type="class">
          <arg name="contextHandling" />
          <arg name="hidFieldsList">timespent@@</arg>
          <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
          <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
          <arg name="customErrorMessage-textValue" />
        </validator>
      </validators>
      <results>
        <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="22">
          <post-functions>
            <function type="class">
              <arg name="field.name">jÃ‹"Â‚wÂž</arg>
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
              <arg name="field.value" />
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
            </function>
            <function type="class">
              <arg name="field.name">resolution</arg>
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
              <arg name="field.value">6</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
            </function>
            <function type="class">
              <arg name="scopeSource-linkEnd" />
              <arg name="append.value" />
              <arg name="maxAllowed-integerValue" />
              <arg name="runAsUser-user" />
              <arg name="field.value">%%CURRENT_DATETIME%%</arg>
              <arg name="field.name">customfield_13200</arg>
              <arg name="scopeType">H</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
              <arg name="scopeDestination-linkEnd" />
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="scopeDestination-jql" />
              <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
              <arg name="scopeSource-jql" />
            </function>
            <function type="class">
              <arg name="scopeSource-linkEnd" />
              <arg name="append.value" />
              <arg name="maxAllowed-integerValue" />
              <arg name="runAsUser-user" />
              <arg name="field.value">%%CURRENT_DATETIME%%</arg>
              <arg name="field.name">customfield_13201</arg>
              <arg name="scopeType">H</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
              <arg name="scopeDestination-linkEnd" />
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="scopeDestination-jql" />
              <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
              <arg name="scopeSource-jql" />
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">c28e6efd-4ece-40bf-a62c-948528b3c87b</arg>
              <arg name="FIELD_NOTES">Check if it's possible to move to "To Do" Phase in/out</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">{"script":"import com.atlassian.jira.component.ComponentAccessor;\nimport com.atlassian.jira.issue.Issue;\nimport com.atlassian.jira.bc.issue.IssueService;\nimport com.atlassian.jira.issue.IssueInputParametersImpl;\nimport org.apache.log4j.Logger;\nimport org.apache.log4j.Level;\nimport com.atlassian.jira.component.ComponentAccessor;\nimport com.atlassian.jira.event.issue.IssueEventBundle;\nimport com.atlassian.jira.event.issue.IssueEventManager;\nimport com.atlassian.jira.event.issue.IssueEventBundleFactory;\nimport com.atlassian.jira.event.issue.IssueEvent;\nimport com.opensymphony.workflow.WorkflowContext\nimport com.atlassian.jira.workflow.WorkflowTransitionUtil;\nimport com.atlassian.jira.workflow.WorkflowTransitionUtilImpl;\nimport com.atlassian.jira.util.JiraUtils;\nimport com.opensymphony.workflow.loader.StepDescriptor;\nimport com.atlassian.jira.*;\nimport com.atlassian.jira.workflow.WorkflowManager;\nimport com.atlassian.jira.workflow.JiraWorkflow;\nimport com.opensymphony.workflow.loader.ActionDescriptor;\nimport com.atlassian.jira.issue.MutableIssue\nimport com.atlassian.jira.issue.link.IssueLink\n\nlog.level = Level.DEBUG\n\nClass objectFacadeClass = ComponentAccessor.getPluginAccessor().getClassLoader().findClass(\"com.riadalabs.jira.plugins.insight.channel.external.api.facade.ObjectFacade\")\ndef objectFacade = ComponentAccessor.getOSGiComponentInstanceOfType(objectFacadeClass)\nClass iqlFacadeClass = ComponentAccessor.getPluginAccessor().getClassLoader().findClass(\"com.riadalabs.jira.plugins.insight.channel.external.api.facade.IQLFacade\")\ndef iqlFacade = ComponentAccessor.getOSGiComponentInstanceOfType(iqlFacadeClass)\ndef customFieldManager = ComponentAccessor.getCustomFieldManager()\ndef subTaskManager = ComponentAccessor.getSubTaskManager()\ndef issueManager = ComponentAccessor.getIssueManager()\ndef issueEventManager = ComponentAccessor.getIssueEventManager()\ndef user = ComponentAccessor.getJiraAuthenticationContext().getLoggedInUser()\n//Issue issue = issueManager.getIssueObject('EC-9840')\n\n//ID of \"HUB Engineering Cell\" Insight Schema\nint schemaId = 30\ndef linkedIssue\n\nList&lt;IssueLink&gt; allInIssueLink = ComponentAccessor.getIssueLinkManager().getInwardLinks(issue.getId());\nfor (Iterator&lt;IssueLink&gt; outIterator = allInIssueLink.iterator(); outIterator.hasNext();) {\n    IssueLink issueLink = (IssueLink) outIterator.next();\n    linkedIssue = issueLink.getSourceObject()\n    String type = linkedIssue.getIssueType().getName();\n\n    log.debug(linkedIssue) \n}\n\ndef parentIssue=linkedIssue\ndef subTaskIssueLinks = parentIssue.getSubTaskObjects()\ndef ecNumber = customFieldManager.getCustomFieldObjectsByName(\"EC Number\")[0]\ndef minIndex=0\ndef issueToTransition = new ArrayList()\ndef triggeredBy = null, canBeMoved=true, matWFdepending=false\ndef issueToBeCompleted = new ArrayList()\n\nList&lt;IssueLink&gt; allOutIssueLink = ComponentAccessor.getIssueLinkManager().getOutwardLinks(parentIssue.getId());\nfor (Iterator&lt;IssueLink&gt; outIterator = allOutIssueLink.iterator(); outIterator.hasNext();) {\n    IssueLink issueLink = (IssueLink) outIterator.next();\n    linkedIssue = issueLink.getDestinationObject()\n    String type = linkedIssue.getIssueType().getName();\n\n    if(type.equals(\"Involved Code\")){\n        if(linkedIssue != issue &amp;&amp; linkedIssue.resolution==null){\n            canBeMoved=false\n            log.debug \"non tutti gli involved code sono chiusi - stop\"\n        }\n    }\n}\n\nif(canBeMoved){\n    for(st in subTaskIssueLinks){\n\n        def objects = iqlFacade.findObjectsByIQLAndSchema(schemaId, \"objectType=Activities AND Name = \\\"\" + st.summary.substring(11) + \"\\\" AND MAT_WORKFLOW_COMPLETED=true\");\n        if (objects != null &amp;&amp; objects.size() &gt; 0){\n            triggeredBy = objectFacade.loadObjectAttributeBean(objects[0].getId(), \"TRIGGERED_BY\") ? objectFacade.loadObjectAttributeBean(objects[0].getId(), \"TRIGGERED_BY\").getObjectAttributeValueBeans() : null;\n            log.debug triggeredBy\n\n            for(t in triggeredBy){\n                def actObjToBeFinished = iqlFacade.findObjectsByIQLAndSchema(schemaId, \"objectType=Activities AND Key = \\\"\" +\"HUBEC-\" + t.value + \"\\\"\");\n                log.debug actObjToBeFinished\n                for(subt in subTaskIssueLinks){\n                    def currentSubTSummary = ComponentAccessor.getIssueManager().getIssueByCurrentKey(subt.toString()).getSummary()\n                    if(currentSubTSummary.equals(parentIssue.getCustomFieldValue(ecNumber).toString() + \" - \" + actObjToBeFinished[0].toString().substring(0,actObjToBeFinished[0].toString().lastIndexOf('(')-1))){\n                        if(subt.status.name!=\"Done\"){\n                            log.debug \"l'attivit\u00e0 non pu\u00f2 partire perch\u00e8 almeno una di quelle da chiudere prima \" + currentSubTSummary + \" non \u00e8 completata\"\n                            canBeMoved=false\n                        }\n                    }\n                }\n            }\n\n            if(canBeMoved){\n                issueToTransition.add(st)\n            }\n        }\n    }\n}\n\nlog.debug \"Issue to be moved: \" + issueToTransition\n\nint EVENT_ID = 51\nif(issueToTransition){\n    WorkflowTransitionUtil workflowTransitionUtil = ( WorkflowTransitionUtil ) JiraUtils.loadComponent( WorkflowTransitionUtilImpl.class );\n    for(currIssue in issueToTransition){\n        MutableIssue mi = issueManager.getIssueObject(currIssue.toString());\n        if(mi.status.name==\"Open\"){\n            workflowTransitionUtil.setIssue(mi);\n            workflowTransitionUtil.setAction(EVENT_ID);\n            workflowTransitionUtil.validate();\n            workflowTransitionUtil.progress();                          \n        }\n    }\n}\n\n    \n\n\n","scriptPath":null}</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">10104</arg>
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
    <action id="91" name="Ready for First Order" view="fieldscreen">
      <meta name="jira.description" />
      <meta name="jira.fieldscreen.id">20123</meta>
      <restrict-to>
        <conditions type="AND">
          <conditions type="OR">
            <condition type="class">
              <arg name="class.name">com.atlassian.jira.workflow.condition.UserInGroupCondition</arg>
              <arg name="group">EC-HUB-administrators</arg>
            </condition>
            <condition type="class">
              <arg name="class.name">com.atlassian.jira.workflow.condition.UserInGroupCondition</arg>
              <arg name="group">EC-HUB-team</arg>
            </condition>
            <condition type="class">
              <arg name="class.name">com.atlassian.jira.workflow.condition.AllowOnlyAssignee</arg>
            </condition>
          </conditions>
          <condition type="class">
            <arg name="FIELD_FUNCTION_ID">e3922201-1a08-409b-a090-941767e03ee9</arg>
            <arg name="FIELD_NOTES">IF NOT ZALBE50 AND NOT ZFRTX AND NOT ZERSX AND NOT ZALBX</arg>
            <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
            <arg name="FIELD_CONDITION">{"script":"!(cfValues['Material Type']?.value == 'ZALB (semilavorato-phantom / semifinished-phantom)' &amp;&amp; cfValues['Procurement']?.value == 'E50 - Phantom') &amp;&amp; !(cfValues['Material Type']?.value == 'ZFRT (prodotto finito / finished product)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production') &amp;&amp; !(cfValues['Material Type']?.value == 'ZALB (semilavorato-phantom / semifinished-phantom)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production') &amp;&amp; !(cfValues['Material Type']?.value == 'ZERS (ricambio / spare part)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production')","scriptPath":null,"parameters":{}}</arg>
            <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
            <arg name="FIELD_PREVIEW_ISSUE">EC-11226</arg>
          </condition>
        </conditions>
      </restrict-to>
      <validators>
        <validator name="" type="class">
          <arg name="contextHandling" />
          <arg name="hidFieldsList">timespent@@</arg>
          <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
          <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
          <arg name="customErrorMessage-textValue" />
        </validator>
      </validators>
      <results>
        <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="12">
          <post-functions>
            <function type="class">
              <arg name="field.name">jÃ‹"Â‚wÂž</arg>
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
              <arg name="field.value">davide.arbizzani</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="field.name">customfield_13200</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
              <arg name="field.value">%%CURRENT_DATETIME%%</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
            </function>
            <function type="class">
              <arg name="field.name">customfield_13209</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
              <arg name="field.value">%%CURRENT_DATETIME%%</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">10102</arg>
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
    <action id="141" name="Back to Offer Validated" view="fieldscreen">
      <meta name="jira.description" />
      <meta name="jira.fieldscreen.id">20123</meta>
      <restrict-to>
        <conditions>
          <condition type="class">
            <arg name="FIELD_FUNCTION_ID">076e8093-f38d-4a29-8e19-05970c6dbf08</arg>
            <arg name="FIELD_NOTES">IF NOT ZALBE50 AND NOT ZFRTX AND NOT ZERSX AND NOT ZALBX</arg>
            <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
            <arg name="FIELD_CONDITION">{"script":"!(cfValues['Material Type']?.value == 'ZALB (semilavorato-phantom / semifinished-phantom)' &amp;&amp; cfValues['Procurement']?.value == 'E50 - Phantom') &amp;&amp; !(cfValues['Material Type']?.value == 'ZFRT (prodotto finito / finished product)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production') &amp;&amp; !(cfValues['Material Type']?.value == 'ZALB (semilavorato-phantom / semifinished-phantom)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production') &amp;&amp; !(cfValues['Material Type']?.value == 'ZERS (ricambio / spare part)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production')","scriptPath":null,"parameters":{}}</arg>
            <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
          </condition>
        </conditions>
      </restrict-to>
      <validators>
        <validator name="" type="class">
          <arg name="contextHandling" />
          <arg name="hidFieldsList">timespent@@</arg>
          <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
          <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
          <arg name="customErrorMessage-textValue" />
        </validator>
      </validators>
      <results>
        <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="5">
          <post-functions>
            <function type="class">
              <arg name="field.name">jÃ‹"Â‚wÂž</arg>
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
              <arg name="field.value">alberto.manfredi</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
    <action id="61" name="â€°Ãž" view="fieldscreen">
      <meta name="jira.description" />
      <meta name="jira.fieldscreen.id">20123</meta>
      <restrict-to>
        <conditions type="AND">
          <conditions type="OR">
            <condition type="class">
              <arg name="class.name">com.atlassian.jira.workflow.condition.AllowOnlyAssignee</arg>
            </condition>
            <condition type="class">
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.condition.UserIsInAnyGroupsCondition</arg>
              <arg name="hidGroupsList">EC-HUB-administrators@@EC-HUB-team@@</arg>
            </condition>
          </conditions>
          <condition type="class">
            <arg name="FIELD_FUNCTION_ID">697a623d-abcb-45eb-a898-bcd14aaccff7</arg>
            <arg name="FIELD_NOTES">Code "Changed"</arg>
            <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
            <arg name="FIELD_CONDITION">{"script":"cfValues['Code Status']?.value == 'Changed'","scriptPath":null}</arg>
            <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
          </condition>
        </conditions>
      </restrict-to>
      <validators>
        <validator name="" type="class">
          <arg name="contextHandling" />
          <arg name="hidFieldsList">timespent@@</arg>
          <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
          <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
          <arg name="customErrorMessage-textValue" />
        </validator>
      </validators>
      <results>
        <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="21">
          <post-functions>
            <function type="class">
              <arg name="field.name">jÃ‹"Â‚wÂž</arg>
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
              <arg name="field.value" />
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="field.name">resolution</arg>
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
              <arg name="field.value">6</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
            </function>
            <function type="class">
              <arg name="field.name">customfield_13200</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
              <arg name="field.value">%%CURRENT_DATETIME%%</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
            </function>
            <function type="class">
              <arg name="field.name">customfield_13201</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
              <arg name="field.value">%%CURRENT_DATETIME%%</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
            </function>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">509306e6-2e76-47c0-bdb4-79c3cf9462db</arg>
              <arg name="FIELD_NOTES">Check if it's possible to move to "To Do" Phase in/out</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">{"script":"import com.atlassian.jira.component.ComponentAccessor;\nimport com.atlassian.jira.issue.Issue;\nimport com.atlassian.jira.bc.issue.IssueService;\nimport com.atlassian.jira.issue.IssueInputParametersImpl;\nimport org.apache.log4j.Logger;\nimport org.apache.log4j.Level;\nimport com.atlassian.jira.component.ComponentAccessor;\nimport com.atlassian.jira.event.issue.IssueEventBundle;\nimport com.atlassian.jira.event.issue.IssueEventManager;\nimport com.atlassian.jira.event.issue.IssueEventBundleFactory;\nimport com.atlassian.jira.event.issue.IssueEvent;\nimport com.opensymphony.workflow.WorkflowContext\nimport com.atlassian.jira.workflow.WorkflowTransitionUtil;\nimport com.atlassian.jira.workflow.WorkflowTransitionUtilImpl;\nimport com.atlassian.jira.util.JiraUtils;\nimport com.opensymphony.workflow.loader.StepDescriptor;\nimport com.atlassian.jira.*;\nimport com.atlassian.jira.workflow.WorkflowManager;\nimport com.atlassian.jira.workflow.JiraWorkflow;\nimport com.opensymphony.workflow.loader.ActionDescriptor;\nimport com.atlassian.jira.issue.MutableIssue\nimport com.atlassian.jira.issue.link.IssueLink\n\nlog.level = Level.DEBUG\n\nClass objectFacadeClass = ComponentAccessor.getPluginAccessor().getClassLoader().findClass(\"com.riadalabs.jira.plugins.insight.channel.external.api.facade.ObjectFacade\")\ndef objectFacade = ComponentAccessor.getOSGiComponentInstanceOfType(objectFacadeClass)\nClass iqlFacadeClass = ComponentAccessor.getPluginAccessor().getClassLoader().findClass(\"com.riadalabs.jira.plugins.insight.channel.external.api.facade.IQLFacade\")\ndef iqlFacade = ComponentAccessor.getOSGiComponentInstanceOfType(iqlFacadeClass)\ndef customFieldManager = ComponentAccessor.getCustomFieldManager()\ndef subTaskManager = ComponentAccessor.getSubTaskManager()\ndef issueManager = ComponentAccessor.getIssueManager()\ndef issueEventManager = ComponentAccessor.getIssueEventManager()\ndef user = ComponentAccessor.getJiraAuthenticationContext().getLoggedInUser()\n//Issue issue = issueManager.getIssueObject('EC-9840')\n\n//ID of \"HUB Engineering Cell\" Insight Schema\nint schemaId = 30\ndef linkedIssue\n\nList&lt;IssueLink&gt; allInIssueLink = ComponentAccessor.getIssueLinkManager().getInwardLinks(issue.getId());\nfor (Iterator&lt;IssueLink&gt; outIterator = allInIssueLink.iterator(); outIterator.hasNext();) {\n    IssueLink issueLink = (IssueLink) outIterator.next();\n    linkedIssue = issueLink.getSourceObject()\n    String type = linkedIssue.getIssueType().getName();\n\n    log.debug(linkedIssue) \n}\n\ndef parentIssue=linkedIssue\ndef subTaskIssueLinks = parentIssue.getSubTaskObjects()\ndef ecNumber = customFieldManager.getCustomFieldObjectsByName(\"EC Number\")[0]\ndef minIndex=0\ndef issueToTransition = new ArrayList()\ndef triggeredBy = null, canBeMoved=true, matWFdepending=false\ndef issueToBeCompleted = new ArrayList()\n\nList&lt;IssueLink&gt; allOutIssueLink = ComponentAccessor.getIssueLinkManager().getOutwardLinks(parentIssue.getId());\nfor (Iterator&lt;IssueLink&gt; outIterator = allOutIssueLink.iterator(); outIterator.hasNext();) {\n    IssueLink issueLink = (IssueLink) outIterator.next();\n    linkedIssue = issueLink.getDestinationObject()\n    String type = linkedIssue.getIssueType().getName();\n\n    if(type.equals(\"Involved Code\")){\n        if(linkedIssue != issue &amp;&amp; linkedIssue.resolution==null){\n            canBeMoved=false\n            log.debug \"non tutti gli involved code sono chiusi - stop\"\n        }\n    }\n}\n\nif(canBeMoved){\n    for(st in subTaskIssueLinks){\n\n        def objects = iqlFacade.findObjectsByIQLAndSchema(schemaId, \"objectType=Activities AND Name = \\\"\" + st.summary.substring(11) + \"\\\" AND MAT_WORKFLOW_COMPLETED=true\");\n        if (objects != null &amp;&amp; objects.size() &gt; 0){\n            triggeredBy = objectFacade.loadObjectAttributeBean(objects[0].getId(), \"TRIGGERED_BY\") ? objectFacade.loadObjectAttributeBean(objects[0].getId(), \"TRIGGERED_BY\").getObjectAttributeValueBeans() : null;\n            log.debug triggeredBy\n\n            for(t in triggeredBy){\n                def actObjToBeFinished = iqlFacade.findObjectsByIQLAndSchema(schemaId, \"objectType=Activities AND Key = \\\"\" +\"HUBEC-\" + t.value + \"\\\"\");\n                log.debug actObjToBeFinished\n                for(subt in subTaskIssueLinks){\n                    def currentSubTSummary = ComponentAccessor.getIssueManager().getIssueByCurrentKey(subt.toString()).getSummary()\n                    if(currentSubTSummary.equals(parentIssue.getCustomFieldValue(ecNumber).toString() + \" - \" + actObjToBeFinished[0].toString().substring(0,actObjToBeFinished[0].toString().lastIndexOf('(')-1))){\n                        if(subt.status.name!=\"Done\"){\n                            log.debug \"l'attivit\u00e0 non pu\u00f2 partire perch\u00e8 almeno una di quelle da chiudere prima \" + currentSubTSummary + \" non \u00e8 completata\"\n                            canBeMoved=false\n                        }\n                    }\n                }\n            }\n\n            if(canBeMoved){\n                issueToTransition.add(st)\n            }\n        }\n    }\n}\n\nlog.debug \"Issue to be moved: \" + issueToTransition\n\nint EVENT_ID = 51\nif(issueToTransition){\n    WorkflowTransitionUtil workflowTransitionUtil = ( WorkflowTransitionUtil ) JiraUtils.loadComponent( WorkflowTransitionUtilImpl.class );\n    for(currIssue in issueToTransition){\n        MutableIssue mi = issueManager.getIssueObject(currIssue.toString());\n        if(mi.status.name==\"Open\"){\n            workflowTransitionUtil.setIssue(mi);\n            workflowTransitionUtil.setAction(EVENT_ID);\n            workflowTransitionUtil.validate();\n            workflowTransitionUtil.progress();                          \n        }\n    }\n}\n\n    \n\n\n","scriptPath":null}</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">10104</arg>
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
    <action id="191" name="Back to Delivery Waiting" view="fieldscreen">
      <meta name="jira.description" />
      <meta name="jira.fieldscreen.id">20123</meta>
      <restrict-to>
        <conditions>
          <condition type="class">
            <arg name="FIELD_FUNCTION_ID">0b2244f6-b7cc-4eca-9012-6260d0e62bd6</arg>
            <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
            <arg name="FIELD_CONDITION">{"script":"!(((cfValues['Material Type']?.value == 'ZALB (semilavorato-phantom / semifinished-phantom)' &amp;&amp; cfValues['Procurement']?.value == 'E50 - Phantom') || (cfValues['Material Type']?.value == 'ZFRT (prodotto finito / finished product)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production') || (cfValues['Material Type']?.value == 'ZERS (ricambio / spare part)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production')) &amp;&amp; (cfValues['Costing validation required?']?.value == 'No' || cfValues['Costing validation required?']?.value == null))","scriptPath":null}</arg>
            <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
          </condition>
        </conditions>
      </restrict-to>
      <validators>
        <validator name="" type="class">
          <arg name="contextHandling" />
          <arg name="hidFieldsList">timespent@@</arg>
          <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
          <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
          <arg name="customErrorMessage-textValue" />
        </validator>
      </validators>
      <results>
        <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="13">
          <post-functions>
            <function type="class">
              <arg name="field.name">jÃ‹"Â‚wÂž</arg>
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
              <arg name="field.value">pietro.libro</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
            </function>
            <function type="class">
              <arg name="field.name">resolution</arg>
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
              <arg name="field.value" />
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
  </common-actions>
  <steps>
    <step id="4" name="Offer Validation Waiting">
      <meta name="jira.status.id">10339</meta>
      <actions>
<common-action id="261" />
        <action id="31" name="UÂ©buÂ«^" view="fieldscreen">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id">20123</meta>
          <restrict-to>
            <conditions type="OR">
              <condition type="class">
                <arg name="class.name">com.atlassian.jira.workflow.condition.UserInGroupCondition</arg>
                <arg name="group">EC-HUB-administrators</arg>
              </condition>
              <condition type="class">
                <arg name="class.name">com.atlassian.jira.workflow.condition.UserInGroupCondition</arg>
                <arg name="group">EC-HUB-team</arg>
              </condition>
              <condition type="class">
                <arg name="class.name">com.atlassian.jira.workflow.condition.AllowOnlyAssignee</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="contextHandling" />
              <arg name="hidFieldsList">timespent@@</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
              <arg name="customErrorMessage-textValue" />
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="5">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="field.name">customfield_13200</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="field.value">%%CURRENT_DATETIME%%</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                </function>
                <function type="class">
                  <arg name="field.name">customfield_13205</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="field.value">%%CURRENT_DATETIME%%</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">10105</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="121" name="Back to Offer Waiting" view="fieldscreen">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id">20123</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">4de14c27-4a69-4a8d-a202-127e9051f427</arg>
                <arg name="FIELD_NOTES">Only for Created codes</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">{"script":"cfValues['Code Status']?.value == 'Created'","scriptPath":null,"parameters":{}}</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="contextHandling" />
              <arg name="hidFieldsList">timespent@@</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
              <arg name="customErrorMessage-textValue" />
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="10">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="5" name="Offer Validated">
      <meta name="jira.status.id">10340</meta>
      <actions>
<common-action id="51" />
<common-action id="91" />
        <action id="41" name="Ask Tooling Validation" view="fieldscreen">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id">20123</meta>
          <restrict-to>
            <conditions type="OR">
              <condition type="class">
                <arg name="class.name">com.atlassian.jira.workflow.condition.AllowOnlyAssignee</arg>
              </condition>
              <condition type="class">
                <arg name="class.name">com.atlassian.jira.workflow.condition.UserInGroupCondition</arg>
                <arg name="group">EC-HUB-administrators</arg>
              </condition>
              <condition type="class">
                <arg name="class.name">com.atlassian.jira.workflow.condition.UserInGroupCondition</arg>
                <arg name="group">EC-HUB-team</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="contextHandling" />
              <arg name="hidFieldsList">timespent@@</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
              <arg name="customErrorMessage-textValue" />
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="6">
              <post-functions>
                <function type="class">
                  <arg name="field.name">jÃ‹"Â‚wÂž</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
                  <arg name="field.value">paolo.migani</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="field.name">customfield_13200</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="field.value">%%CURRENT_DATETIME%%</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                </function>
                <function type="class">
                  <arg name="field.name">customfield_13206</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="field.value">%%CURRENT_DATETIME%%</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">10103</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="131" name="Back to Offer Validation Waiting" view="fieldscreen">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id">20123</meta>
          <validators>
            <validator name="" type="class">
              <arg name="contextHandling" />
              <arg name="hidFieldsList">timespent@@</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
              <arg name="customErrorMessage-textValue" />
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="4">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="6" name="Tooling Validation Waiting">
      <meta name="jira.status.id">10341</meta>
      <actions>
<common-action id="51" />
<common-action id="141" />
<common-action id="91" />
      </actions>
    </step>
    <step id="7" name="SAP Views Waiting">
      <meta name="jira.status.id">10342</meta>
      <actions>
<common-action id="141" />
<common-action id="101" />
        <action id="81" name="Costing" view="fieldscreen">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id">20404</meta>
          <restrict-to>
            <conditions type="AND">
              <conditions type="OR">
                <condition type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.condition.AllowOnlyAssignee</arg>
                </condition>
                <condition type="class">
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.condition.UserIsInAnyGroupsCondition</arg>
                  <arg name="hidGroupsList">EC-HUB-team@@EC-HUB-administrators@@</arg>
                </condition>
                <condition type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.condition.UserInGroupCondition</arg>
                  <arg name="group">Administrators</arg>
                </condition>
              </conditions>
              <condition type="class">
                <arg name="conditionList">3</arg>
                <arg name="comparisonType">1</arg>
                <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                <arg name="class.name">com.googlecode.jsu.workflow.condition.ValueFieldCondition</arg>
                <arg name="fieldValue">Created</arg>
                <arg name="fieldsList">customfield_23254</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="contextHandling" />
              <arg name="hidFieldsList">timespent@@</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
              <arg name="customErrorMessage-textValue" />
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="11">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="field.name">customfield_13200</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="field.value">%%CURRENT_DATETIME%%</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                </function>
                <function type="class">
                  <arg name="field.name">customfield_13208</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="field.value">%%CURRENT_DATETIME%%</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">10102</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="151" name="Back to Tooling Validation Waiting" view="fieldscreen">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id">20123</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">4923e6f7-7ec6-45f2-b36a-0c2e987612c6</arg>
                <arg name="FIELD_NOTES">IF NOT ZALBE50 AND NOT ZFRTX AND NOT ZERSX AND NOT ZALBX</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">{"script":"!(cfValues['Material Type']?.value == 'ZALB (semilavorato-phantom / semifinished-phantom)' &amp;&amp; cfValues['Procurement']?.value == 'E50 - Phantom') &amp;&amp; !(cfValues['Material Type']?.value == 'ZFRT (prodotto finito / finished product)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production') &amp;&amp; !(cfValues['Material Type']?.value == 'ZALB (semilavorato-phantom / semifinished-phantom)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production') &amp;&amp; !(cfValues['Material Type']?.value == 'ZERS (ricambio / spare part)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production')","scriptPath":null,"parameters":{}}</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="contextHandling" />
              <arg name="hidFieldsList">timespent@@</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
              <arg name="customErrorMessage-textValue" />
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="6">
              <post-functions>
                <function type="class">
                  <arg name="field.name">jÃ‹"Â‚wÂž</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
                  <arg name="field.value">paolo.migani</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="9" name="Offer Request">
      <meta name="jira.status.id">10343</meta>
      <actions>
        <action id="71" name="Request Sent" view="fieldscreen">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id">20123</meta>
          <restrict-to>
            <conditions type="OR">
              <condition type="class">
                <arg name="class.name">com.atlassian.jira.workflow.condition.AllowOnlyAssignee</arg>
              </condition>
              <condition type="class">
                <arg name="class.name">com.atlassian.jira.workflow.condition.UserInGroupCondition</arg>
                <arg name="group">EC-HUB-team</arg>
              </condition>
              <condition type="class">
                <arg name="class.name">com.atlassian.jira.workflow.condition.UserInGroupCondition</arg>
                <arg name="group">EC-HUB-administrators</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="contextHandling" />
              <arg name="hidFieldsList">timespent@@</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
              <arg name="customErrorMessage-textValue" />
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="10">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="field.name">customfield_13200</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="field.value">%%CURRENT_DATETIME%%</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                </function>
                <function type="class">
                  <arg name="field.name">customfield_13202</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="field.value">%%CURRENT_DATETIME%%</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="431" name="Drawing Sent" view="fieldscreen">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id">20123</meta>
          <restrict-to>
            <conditions type="AND">
              <conditions type="OR">
                <condition type="class">
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.condition.UserIsInAnyGroupsCondition</arg>
                  <arg name="hidGroupsList">EC-HUB-administrators@@EC-HUB-team@@</arg>
                </condition>
                <condition type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.condition.AllowOnlyAssignee</arg>
                </condition>
              </conditions>
              <condition type="class">
                <arg name="conditionList">3</arg>
                <arg name="comparisonType">1</arg>
                <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                <arg name="class.name">com.googlecode.jsu.workflow.condition.ValueFieldCondition</arg>
                <arg name="fieldValue">Created</arg>
                <arg name="fieldsList">customfield_23254</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="contextHandling" />
              <arg name="hidFieldsList">timespent@@</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
              <arg name="customErrorMessage-textValue" />
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="22">
              <post-functions>
                <function type="class">
                  <arg name="field.name">jÃ‹"Â‚wÂž</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
                  <arg name="field.value" />
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
                </function>
                <function type="class">
                  <arg name="field.name">resolution</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
                  <arg name="field.value">6</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd" />
                  <arg name="append.value" />
                  <arg name="maxAllowed-integerValue" />
                  <arg name="runAsUser-user" />
                  <arg name="field.value">%%CURRENT_DATETIME%%</arg>
                  <arg name="field.name">customfield_13200</arg>
                  <arg name="scopeType">H</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="scopeDestination-linkEnd" />
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql" />
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                  <arg name="scopeSource-jql" />
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd" />
                  <arg name="append.value" />
                  <arg name="maxAllowed-integerValue" />
                  <arg name="runAsUser-user" />
                  <arg name="field.value">%%CURRENT_DATETIME%%</arg>
                  <arg name="field.name">customfield_13201</arg>
                  <arg name="scopeType">H</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="scopeDestination-linkEnd" />
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql" />
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                  <arg name="scopeSource-jql" />
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">c28e6efd-4ece-40bf-a62c-948528b3c87b</arg>
                  <arg name="FIELD_NOTES">Check if it's possible to move to "To Do" Phase in/out</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">{"script":"import com.atlassian.jira.component.ComponentAccessor;\nimport com.atlassian.jira.issue.Issue;\nimport com.atlassian.jira.bc.issue.IssueService;\nimport com.atlassian.jira.issue.IssueInputParametersImpl;\nimport org.apache.log4j.Logger;\nimport org.apache.log4j.Level;\nimport com.atlassian.jira.component.ComponentAccessor;\nimport com.atlassian.jira.event.issue.IssueEventBundle;\nimport com.atlassian.jira.event.issue.IssueEventManager;\nimport com.atlassian.jira.event.issue.IssueEventBundleFactory;\nimport com.atlassian.jira.event.issue.IssueEvent;\nimport com.opensymphony.workflow.WorkflowContext\nimport com.atlassian.jira.workflow.WorkflowTransitionUtil;\nimport com.atlassian.jira.workflow.WorkflowTransitionUtilImpl;\nimport com.atlassian.jira.util.JiraUtils;\nimport com.opensymphony.workflow.loader.StepDescriptor;\nimport com.atlassian.jira.*;\nimport com.atlassian.jira.workflow.WorkflowManager;\nimport com.atlassian.jira.workflow.JiraWorkflow;\nimport com.opensymphony.workflow.loader.ActionDescriptor;\nimport com.atlassian.jira.issue.MutableIssue\nimport com.atlassian.jira.issue.link.IssueLink\n\nlog.level = Level.DEBUG\n\nClass objectFacadeClass = ComponentAccessor.getPluginAccessor().getClassLoader().findClass(\"com.riadalabs.jira.plugins.insight.channel.external.api.facade.ObjectFacade\")\ndef objectFacade = ComponentAccessor.getOSGiComponentInstanceOfType(objectFacadeClass)\nClass iqlFacadeClass = ComponentAccessor.getPluginAccessor().getClassLoader().findClass(\"com.riadalabs.jira.plugins.insight.channel.external.api.facade.IQLFacade\")\ndef iqlFacade = ComponentAccessor.getOSGiComponentInstanceOfType(iqlFacadeClass)\ndef customFieldManager = ComponentAccessor.getCustomFieldManager()\ndef subTaskManager = ComponentAccessor.getSubTaskManager()\ndef issueManager = ComponentAccessor.getIssueManager()\ndef issueEventManager = ComponentAccessor.getIssueEventManager()\ndef user = ComponentAccessor.getJiraAuthenticationContext().getLoggedInUser()\n//Issue issue = issueManager.getIssueObject('EC-9840')\n\n//ID of \"HUB Engineering Cell\" Insight Schema\nint schemaId = 30\ndef linkedIssue\n\nList&lt;IssueLink&gt; allInIssueLink = ComponentAccessor.getIssueLinkManager().getInwardLinks(issue.getId());\nfor (Iterator&lt;IssueLink&gt; outIterator = allInIssueLink.iterator(); outIterator.hasNext();) {\n    IssueLink issueLink = (IssueLink) outIterator.next();\n    linkedIssue = issueLink.getSourceObject()\n    String type = linkedIssue.getIssueType().getName();\n\n    log.debug(linkedIssue) \n}\n\ndef parentIssue=linkedIssue\ndef subTaskIssueLinks = parentIssue.getSubTaskObjects()\ndef ecNumber = customFieldManager.getCustomFieldObjectsByName(\"EC Number\")[0]\ndef minIndex=0\ndef issueToTransition = new ArrayList()\ndef triggeredBy = null, canBeMoved=true, matWFdepending=false\ndef issueToBeCompleted = new ArrayList()\n\nList&lt;IssueLink&gt; allOutIssueLink = ComponentAccessor.getIssueLinkManager().getOutwardLinks(parentIssue.getId());\nfor (Iterator&lt;IssueLink&gt; outIterator = allOutIssueLink.iterator(); outIterator.hasNext();) {\n    IssueLink issueLink = (IssueLink) outIterator.next();\n    linkedIssue = issueLink.getDestinationObject()\n    String type = linkedIssue.getIssueType().getName();\n\n    if(type.equals(\"Involved Code\")){\n        if(linkedIssue != issue &amp;&amp; linkedIssue.resolution==null){\n            canBeMoved=false\n            log.debug \"non tutti gli involved code sono chiusi - stop\"\n        }\n    }\n}\n\nif(canBeMoved){\n    for(st in subTaskIssueLinks){\n\n        def objects = iqlFacade.findObjectsByIQLAndSchema(schemaId, \"objectType=Activities AND Name = \\\"\" + st.summary.substring(11) + \"\\\" AND MAT_WORKFLOW_COMPLETED=true\");\n        if (objects != null &amp;&amp; objects.size() &gt; 0){\n            triggeredBy = objectFacade.loadObjectAttributeBean(objects[0].getId(), \"TRIGGERED_BY\") ? objectFacade.loadObjectAttributeBean(objects[0].getId(), \"TRIGGERED_BY\").getObjectAttributeValueBeans() : null;\n            log.debug triggeredBy\n\n            for(t in triggeredBy){\n                def actObjToBeFinished = iqlFacade.findObjectsByIQLAndSchema(schemaId, \"objectType=Activities AND Key = \\\"\" +\"HUBEC-\" + t.value + \"\\\"\");\n                log.debug actObjToBeFinished\n                for(subt in subTaskIssueLinks){\n                    def currentSubTSummary = ComponentAccessor.getIssueManager().getIssueByCurrentKey(subt.toString()).getSummary()\n                    if(currentSubTSummary.equals(parentIssue.getCustomFieldValue(ecNumber).toString() + \" - \" + actObjToBeFinished[0].toString().substring(0,actObjToBeFinished[0].toString().lastIndexOf('(')-1))){\n                        if(subt.status.name!=\"Done\"){\n                            log.debug \"l'attivit\u00e0 non pu\u00f2 partire perch\u00e8 almeno una di quelle da chiudere prima \" + currentSubTSummary + \" non \u00e8 completata\"\n                            canBeMoved=false\n                        }\n                    }\n                }\n            }\n\n            if(canBeMoved){\n                issueToTransition.add(st)\n            }\n        }\n    }\n}\n\nlog.debug \"Issue to be moved: \" + issueToTransition\n\nint EVENT_ID = 51\nif(issueToTransition){\n    WorkflowTransitionUtil workflowTransitionUtil = ( WorkflowTransitionUtil ) JiraUtils.loadComponent( WorkflowTransitionUtilImpl.class );\n    for(currIssue in issueToTransition){\n        MutableIssue mi = issueManager.getIssueObject(currIssue.toString());\n        if(mi.status.name==\"Open\"){\n            workflowTransitionUtil.setIssue(mi);\n            workflowTransitionUtil.setAction(EVENT_ID);\n            workflowTransitionUtil.validate();\n            workflowTransitionUtil.progress();                          \n        }\n    }\n}\n\n    \n\n\n","scriptPath":null}</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">10104</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="10" name="Offer Waiting">
      <meta name="jira.status.id">10344</meta>
      <actions>
        <action id="21" name="Ask Buyer Validation" view="fieldscreen">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id">20123</meta>
          <restrict-to>
            <conditions type="OR">
              <condition type="class">
                <arg name="class.name">com.atlassian.jira.workflow.condition.AllowOnlyAssignee</arg>
              </condition>
              <condition type="class">
                <arg name="class.name">com.atlassian.jira.workflow.condition.UserInGroupCondition</arg>
                <arg name="group">EC-HUB-administrators</arg>
              </condition>
              <condition type="class">
                <arg name="class.name">com.atlassian.jira.workflow.condition.UserInGroupCondition</arg>
                <arg name="group">EC-HUB-team</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="contextHandling" />
              <arg name="hidFieldsList">timespent@@</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
              <arg name="customErrorMessage-textValue" />
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="4">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="field.name">customfield_13200</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="field.value">%%CURRENT_DATETIME%%</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                </function>
                <function type="class">
                  <arg name="field.name">customfield_13204</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="field.value">%%CURRENT_DATETIME%%</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">10103</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="111" name="Back to Offer Request" view="fieldscreen">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id">20123</meta>
          <validators>
            <validator name="" type="class">
              <arg name="contextHandling" />
              <arg name="hidFieldsList">timespent@@</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
              <arg name="customErrorMessage-textValue" />
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="9">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="11" name="Costing Waiting">
      <meta name="jira.status.id">10345</meta>
      <actions>
<common-action id="161" />
<common-action id="91" />
        <action id="341" name="â€°Ãž" view="fieldscreen">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id">20123</meta>
          <restrict-to>
            <conditions type="AND">
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">7a356be1-752d-4298-a27e-77dc7e705902</arg>
                <arg name="FIELD_NOTES">If ZALBE50 OR ZFRTX OR ZERSX OR ZALBX</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">{"script":"(cfValues['Material Type']?.value == 'ZALB (semilavorato-phantom / semifinished-phantom)' &amp;&amp; cfValues['Procurement']?.value == 'E50 - Phantom') || (cfValues['Material Type']?.value == 'ZFRT (prodotto finito / finished product)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production') || (cfValues['Material Type']?.value == 'ZALB (semilavorato-phantom / semifinished-phantom)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production') || (cfValues['Material Type']?.value == 'ZERS (ricambio / spare part)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production')","scriptPath":null,"parameters":{}}</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
              <condition type="class">
                <arg name="conditionList">3</arg>
                <arg name="comparisonType">1</arg>
                <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                <arg name="class.name">com.googlecode.jsu.workflow.condition.ValueFieldCondition</arg>
                <arg name="fieldValue">Created</arg>
                <arg name="fieldsList">customfield_23254</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="contextHandling" />
              <arg name="hidFieldsList">timespent@@</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
              <arg name="customErrorMessage-textValue" />
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="Not Done" status="â€°Ãž" step="22">
              <post-functions>
                <function type="class">
                  <arg name="field.name">resolution</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
                  <arg name="field.value">6</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdateissuestatus-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowcreatecomment-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowgeneratechangehistory-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowreindexissue-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="381" name="Done " view="fieldscreen">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id">20123</meta>
          <restrict-to>
            <conditions type="AND">
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">36e63c06-789a-4235-9b50-e8b018b0551f</arg>
                <arg name="FIELD_NOTES">If ZALBE50 OR ZFRTX OR ZERSX OR ZALBX</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">{"script":"(cfValues['Material Type']?.value == 'ZALB (semilavorato-phantom / semifinished-phantom)' &amp;&amp; cfValues['Procurement']?.value == 'E50 - Phantom') || (cfValues['Material Type']?.value == 'ZFRT (prodotto finito / finished product)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production') || (cfValues['Material Type']?.value == 'ZALB (semilavorato-phantom / semifinished-phantom)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production') || (cfValues['Material Type']?.value == 'ZERS (ricambio / spare part)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production')","scriptPath":null,"parameters":{}}</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
              <condition type="class">
                <arg name="conditionList">3</arg>
                <arg name="comparisonType">1</arg>
                <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                <arg name="class.name">com.googlecode.jsu.workflow.condition.ValueFieldCondition</arg>
                <arg name="fieldValue">Changed</arg>
                <arg name="fieldsList">customfield_23254</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="contextHandling" />
              <arg name="hidFieldsList">timespent@@</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
              <arg name="customErrorMessage-textValue" />
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="Not Done" status="â€°Ãž" step="21">
              <post-functions>
                <function type="class">
                  <arg name="field.name">resolution</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
                  <arg name="field.value">6</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdateissuestatus-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowcreatecomment-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowgeneratechangehistory-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowreindexissue-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="12" name="First Order Waiting">
      <meta name="jira.status.id">10346</meta>
      <actions>
<common-action id="101" />
        <action id="171" name="Back to Costing Waiting" view="fieldscreen">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id">20404</meta>
          <validators>
            <validator name="" type="class">
              <arg name="contextHandling" />
              <arg name="hidFieldsList">timespent@@</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
              <arg name="customErrorMessage-textValue" />
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="11">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="13" name="Delivery Waiting">
      <meta name="jira.status.id">11627</meta>
      <actions>
<common-action id="61" />
<common-action id="261" />
<common-action id="161" />
<common-action id="281" />
        <action id="181" name="Back to First Order Waiting" view="fieldscreen">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id">20123</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="conditionList">3</arg>
                <arg name="comparisonType">1</arg>
                <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                <arg name="class.name">com.googlecode.jsu.workflow.condition.ValueFieldCondition</arg>
                <arg name="fieldValue">Created</arg>
                <arg name="fieldsList">customfield_23254</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="contextHandling" />
              <arg name="hidFieldsList">timespent@@</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
              <arg name="customErrorMessage-textValue" />
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="12">
              <post-functions>
                <function type="class">
                  <arg name="field.name">jÃ‹"Â‚wÂž</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
                  <arg name="field.value">davide.arbizzani</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="14" name=":â€”Â§">
      <meta name="jira.status.id">1</meta>
      <actions>
        <action id="201" name="Created" view="fieldscreen">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id">16500</meta>
          <validators>
            <validator name="" type="class">
              <arg name="permissionKey">ASSIGN_ISSUES</arg>
              <arg name="class.name">com.atlassian.jira.workflow.validator.PermissionValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="contextHandling" />
              <arg name="hidFieldsList">timespent@@</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
              <arg name="customErrorMessage-textValue" />
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="23">
              <post-functions>
                <function type="class">
                  <arg name="scopeSource-linkEnd" />
                  <arg name="append.value" />
                  <arg name="maxAllowed-integerValue" />
                  <arg name="runAsUser-user" />
                  <arg name="field.value">Created</arg>
                  <arg name="field.name">customfield_23254</arg>
                  <arg name="scopeType">H</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="scopeDestination-linkEnd" />
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql" />
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                  <arg name="scopeSource-jql" />
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">4d683381-c40a-49b5-a4e5-4e9e0da009ae</arg>
                  <arg name="FIELD_ACTION">321 Created</arg>
                  <arg name="FIELD_NOTES">If NOT ZALBE50 AND NOT ZFRTX AND NOT ZERSX AND NOT ZALBF --&gt; OFFER REQUEST</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.FasttrackTransition</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.FasttrackTransition</arg>
                  <arg name="v+nWÃ¹">false</arg>
                  <arg name="FIELD_CONDITION">{"script":"!((cfValues['Material Type']?.value == 'ZALB (semilavorato-phantom / semifinished-phantom)' &amp;&amp; cfValues['Procurement']?.value == 'E50 - Phantom') || \n  \t(cfValues['Material Type']?.value == 'ZALB (semilavorato-phantom / semifinished-phantom)' &amp;&amp; cfValues['Procurement']?.value == 'F - Purchasing') || \n    (cfValues['Material Type']?.value == 'ZFRT (prodotto finito / finished product)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production') || \n    (cfValues['Material Type']?.value == 'ZERS (ricambio / spare part)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production'))","scriptPath":null,"parameters":{}}</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_TRANSITION_OPTIONS" />
                  <arg name="events" />
                  <arg name="FIELD_ADDITIONAL_SCRIPT" />
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">4d683381-c40a-49b5-a4e5-4e9e0da009ae</arg>
                  <arg name="FIELD_ACTION">331 Created ZALB ZFRT ZERS</arg>
                  <arg name="FIELD_NOTES">If ZALBE50 OR ZFRTX OR ZERSX OR ZALBF OR ZALBX --&gt; SAP VIEW WAITING</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.FasttrackTransition</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.FasttrackTransition</arg>
                  <arg name="v+nWÃ¹">false</arg>
                  <arg name="FIELD_CONDITION">{"script":"(cfValues['Material Type']?.value == 'ZALB (semilavorato-phantom / semifinished-phantom)' &amp;&amp; cfValues['Procurement']?.value == 'E50 - Phantom') || \n    (cfValues['Material Type']?.value == 'ZALB (semilavorato-phantom / semifinished-phantom)' &amp;&amp; cfValues['Procurement']?.value == 'F - Purchasing') || \n    (cfValues['Material Type']?.value == 'ZFRT (prodotto finito / finished product)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production') || \n    (cfValues['Material Type']?.value == 'ZALB (semilavorato-phantom / semifinished-phantom)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production') || \n    (cfValues['Material Type']?.value == 'ZERS (ricambio / spare part)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production')","scriptPath":null,"parameters":{}}</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_TRANSITION_OPTIONS" />
                  <arg name="events" />
                  <arg name="FIELD_ADDITIONAL_SCRIPT" />
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">4d683381-c40a-49b5-a4e5-4e9e0da009ae</arg>
                  <arg name="FIELD_ACTION">441 Created ZROH</arg>
                  <arg name="FIELD_NOTES">If ZROH --&gt; DRAWING MAILING</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.FasttrackTransition</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.FasttrackTransition</arg>
                  <arg name="v+nWÃ¹">false</arg>
                  <arg name="FIELD_CONDITION">{"script":"cfValues['Material Type']?.value == 'ZROH (materia prima / raw material)'","scriptPath":null,"parameters":{}}</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_TRANSITION_OPTIONS" />
                  <arg name="events" />
                  <arg name="FIELD_ADDITIONAL_SCRIPT" />
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="211" name="Deleted" view="fieldscreen">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id">20130</meta>
          <validators>
            <validator name="" type="class">
              <arg name="contextHandling" />
              <arg name="hidFieldsList">timespent@@</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
              <arg name="customErrorMessage-textValue" />
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="15">
              <post-functions>
                <function type="class">
                  <arg name="field.name">jÃ‹"Â‚wÂž</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
                  <arg name="field.value">davide.arbizzani</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="241" name="Changed" view="fieldscreen">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id">20129</meta>
          <validators>
            <validator name="" type="class">
              <arg name="permissionKey">ASSIGN_ISSUES</arg>
              <arg name="class.name">com.atlassian.jira.workflow.validator.PermissionValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="contextHandling" />
              <arg name="hidFieldsList">timespent@@</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
              <arg name="customErrorMessage-textValue" />
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="24">
              <post-functions>
                <function type="class">
                  <arg name="scopeSource-linkEnd" />
                  <arg name="append.value" />
                  <arg name="maxAllowed-integerValue" />
                  <arg name="runAsUser-user" />
                  <arg name="field.value">Changed</arg>
                  <arg name="field.name">customfield_23254</arg>
                  <arg name="scopeType">H</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="scopeDestination-linkEnd" />
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql" />
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                  <arg name="scopeSource-jql" />
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">228e972b-cecf-4abc-8f7e-0428743c06f8</arg>
                  <arg name="FIELD_ACTION">361 Changed ZALB ZFRT ZERS CC</arg>
                  <arg name="FIELD_NOTES">If ZALBE50 OR ZFRTX OR ZERSX OR ZALBX + CC</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.FasttrackTransition</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.FasttrackTransition</arg>
                  <arg name="FIELD_CONDITION">{"script":"((cfValues['Material Type']?.value == 'ZALB (semilavorato-phantom / semifinished-phantom)' &amp;&amp; cfValues['Procurement']?.value == 'E50 - Phantom') || (cfValues['Material Type']?.value == 'ZFRT (prodotto finito / finished product)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production') || (cfValues['Material Type']?.value == 'ZALB (semilavorato-phantom / semifinished-phantom)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production') || (cfValues['Material Type']?.value == 'ZERS (ricambio / spare part)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production')) &amp;&amp; cfValues['Costing validation required?']?.value == 'Yes'","scriptPath":null,"parameters":{}}</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_TRANSITION_OPTIONS" />
                  <arg name="events" />
                  <arg name="FIELD_ADDITIONAL_SCRIPT" />
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">228e972b-cecf-4abc-8f7e-0428743c06f8</arg>
                  <arg name="FIELD_ACTION">371 Changed ZALB ZFRT ZERS NO CC</arg>
                  <arg name="FIELD_NOTES">If ZALBE50 OR ZFRTX OR ZERSX OR ZALBX + NO CC</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.FasttrackTransition</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.FasttrackTransition</arg>
                  <arg name="FIELD_CONDITION">{"script":"((cfValues['Material Type']?.value == 'ZALB (semilavorato-phantom / semifinished-phantom)' &amp;&amp; cfValues['Procurement']?.value == 'E50 - Phantom') || (cfValues['Material Type']?.value == 'ZFRT (prodotto finito / finished product)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production') || (cfValues['Material Type']?.value == 'ZALB (semilavorato-phantom / semifinished-phantom)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production') || (cfValues['Material Type']?.value == 'ZERS (ricambio / spare part)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production')) &amp;&amp; (cfValues['Costing validation required?']?.value == 'No' || cfValues['Costing validation required?']?.value == null)","scriptPath":null,"parameters":{}}</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_TRANSITION_OPTIONS" />
                  <arg name="events" />
                  <arg name="FIELD_ADDITIONAL_SCRIPT" />
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">228e972b-cecf-4abc-8f7e-0428743c06f8</arg>
                  <arg name="FIELD_ACTION">351 Changed</arg>
                  <arg name="FIELD_NOTES">If NO ZALBE50 AND NOT ZFRTX AND NOT ZERSX</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.FasttrackTransition</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.FasttrackTransition</arg>
                  <arg name="FIELD_CONDITION">{"script":"!(cfValues['Material Type']?.value == 'ZALB (semilavorato-phantom / semifinished-phantom)' &amp;&amp; cfValues['Procurement']?.value == 'E50 - Phantom') &amp;&amp; !(cfValues['Material Type']?.value == 'ZFRT (prodotto finito / finished product)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production') &amp;&amp; !(cfValues['Material Type']?.value == 'ZERS (ricambio / spare part)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production')","scriptPath":null,"parameters":{}}</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_TRANSITION_OPTIONS" />
                  <arg name="events" />
                  <arg name="FIELD_ADDITIONAL_SCRIPT" />
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="401" name="changed - vecchio workflow">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id" />
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">d52f5e64-b090-40c8-b1d7-88cd90ce5ed8</arg>
                <arg name="FIELD_INVERT_CONDITION" />
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.UserCondition</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_USER_IDS">laura.ciccale</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="21">
              <post-functions>
                <function type="class">
                  <arg name="field.name">resolution</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
                  <arg name="field.value">6</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="411" name="created - vecchio workflow">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id" />
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">fe7039cc-c214-41b2-9e5b-21f862d67504</arg>
                <arg name="FIELD_INVERT_CONDITION" />
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.UserCondition</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_USER_IDS">laura.ciccale</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="22">
              <post-functions>
                <function type="class">
                  <arg name="field.name">resolution</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
                  <arg name="field.value">6</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="421" name="deleted - vecchio workflow">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id" />
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">8943ee96-a098-467d-b60e-d3fac4b67fd9</arg>
                <arg name="FIELD_INVERT_CONDITION" />
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.UserCondition</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_USER_IDS">laura.ciccale</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="16">
              <post-functions>
                <function type="class">
                  <arg name="field.name">resolution</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
                  <arg name="field.value">6</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="15" name="Set Purchasing Block">
      <meta name="jira.status.id">14629</meta>
      <actions>
        <action id="221" name="â€°Ãž" view="fieldscreen">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id">20123</meta>
          <validators>
            <validator name="" type="class">
              <arg name="contextHandling" />
              <arg name="hidFieldsList">timespent@@</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
              <arg name="customErrorMessage-textValue" />
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="16">
              <post-functions>
                <function type="class">
                  <arg name="field.name">jÃ‹"Â‚wÂž</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
                  <arg name="field.value" />
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd" />
                  <arg name="append.value" />
                  <arg name="maxAllowed-integerValue" />
                  <arg name="runAsUser-user" />
                  <arg name="field.value">Deleted</arg>
                  <arg name="field.name">customfield_23254</arg>
                  <arg name="scopeType">H</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="scopeDestination-linkEnd" />
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql" />
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                  <arg name="scopeSource-jql" />
                </function>
                <function type="class">
                  <arg name="field.name">resolution</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
                  <arg name="field.value">6</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">936e9652-4234-4f0b-bb7a-78fa23b20b11</arg>
                  <arg name="FIELD_NOTES">Check if it's possible to move to "To Do" Phase in/out</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">{"script":"import com.atlassian.jira.component.ComponentAccessor;\nimport com.atlassian.jira.issue.Issue;\nimport com.atlassian.jira.bc.issue.IssueService;\nimport com.atlassian.jira.issue.IssueInputParametersImpl;\nimport org.apache.log4j.Logger;\nimport org.apache.log4j.Level;\nimport com.atlassian.jira.component.ComponentAccessor;\nimport com.atlassian.jira.event.issue.IssueEventBundle;\nimport com.atlassian.jira.event.issue.IssueEventManager;\nimport com.atlassian.jira.event.issue.IssueEventBundleFactory;\nimport com.atlassian.jira.event.issue.IssueEvent;\nimport com.opensymphony.workflow.WorkflowContext\nimport com.atlassian.jira.workflow.WorkflowTransitionUtil;\nimport com.atlassian.jira.workflow.WorkflowTransitionUtilImpl;\nimport com.atlassian.jira.util.JiraUtils;\nimport com.opensymphony.workflow.loader.StepDescriptor;\nimport com.atlassian.jira.*;\nimport com.atlassian.jira.workflow.WorkflowManager;\nimport com.atlassian.jira.workflow.JiraWorkflow;\nimport com.opensymphony.workflow.loader.ActionDescriptor;\nimport com.atlassian.jira.issue.MutableIssue\nimport com.atlassian.jira.issue.link.IssueLink\n\nlog.level = Level.DEBUG\n\nClass objectFacadeClass = ComponentAccessor.getPluginAccessor().getClassLoader().findClass(\"com.riadalabs.jira.plugins.insight.channel.external.api.facade.ObjectFacade\")\ndef objectFacade = ComponentAccessor.getOSGiComponentInstanceOfType(objectFacadeClass)\nClass iqlFacadeClass = ComponentAccessor.getPluginAccessor().getClassLoader().findClass(\"com.riadalabs.jira.plugins.insight.channel.external.api.facade.IQLFacade\")\ndef iqlFacade = ComponentAccessor.getOSGiComponentInstanceOfType(iqlFacadeClass)\ndef customFieldManager = ComponentAccessor.getCustomFieldManager()\ndef subTaskManager = ComponentAccessor.getSubTaskManager()\ndef issueManager = ComponentAccessor.getIssueManager()\ndef issueEventManager = ComponentAccessor.getIssueEventManager()\ndef user = ComponentAccessor.getJiraAuthenticationContext().getLoggedInUser()\n//Issue issue = issueManager.getIssueObject('EC-9840')\n\n//ID of \"HUB Engineering Cell\" Insight Schema\nint schemaId = 30\ndef linkedIssue\n\nList&lt;IssueLink&gt; allInIssueLink = ComponentAccessor.getIssueLinkManager().getInwardLinks(issue.getId());\nfor (Iterator&lt;IssueLink&gt; outIterator = allInIssueLink.iterator(); outIterator.hasNext();) {\n    IssueLink issueLink = (IssueLink) outIterator.next();\n    linkedIssue = issueLink.getSourceObject()\n    String type = linkedIssue.getIssueType().getName();\n\n    log.debug(linkedIssue) \n}\n\ndef parentIssue=linkedIssue\ndef subTaskIssueLinks = parentIssue.getSubTaskObjects()\ndef ecNumber = customFieldManager.getCustomFieldObjectsByName(\"EC Number\")[0]\ndef minIndex=0\ndef issueToTransition = new ArrayList()\ndef triggeredBy = null, canBeMoved=true, matWFdepending=false\ndef issueToBeCompleted = new ArrayList()\n\nList&lt;IssueLink&gt; allOutIssueLink = ComponentAccessor.getIssueLinkManager().getOutwardLinks(parentIssue.getId());\nfor (Iterator&lt;IssueLink&gt; outIterator = allOutIssueLink.iterator(); outIterator.hasNext();) {\n    IssueLink issueLink = (IssueLink) outIterator.next();\n    linkedIssue = issueLink.getDestinationObject()\n    String type = linkedIssue.getIssueType().getName();\n\n    if(type.equals(\"Involved Code\")){\n        if(linkedIssue != issue &amp;&amp; linkedIssue.resolution==null){\n            canBeMoved=false\n            log.debug \"non tutti gli involved code sono chiusi - stop\"\n        }\n    }\n}\n\nif(canBeMoved){\n    for(st in subTaskIssueLinks){\n\n        def objects = iqlFacade.findObjectsByIQLAndSchema(schemaId, \"objectType=Activities AND Name = \\\"\" + st.summary.substring(11) + \"\\\" AND MAT_WORKFLOW_COMPLETED=true\");\n        if (objects != null &amp;&amp; objects.size() &gt; 0){\n            triggeredBy = objectFacade.loadObjectAttributeBean(objects[0].getId(), \"TRIGGERED_BY\") ? objectFacade.loadObjectAttributeBean(objects[0].getId(), \"TRIGGERED_BY\").getObjectAttributeValueBeans() : null;\n            log.debug triggeredBy\n\n            for(t in triggeredBy){\n                def actObjToBeFinished = iqlFacade.findObjectsByIQLAndSchema(schemaId, \"objectType=Activities AND Key = \\\"\" +\"HUBEC-\" + t.value + \"\\\"\");\n                log.debug actObjToBeFinished\n                for(subt in subTaskIssueLinks){\n                    def currentSubTSummary = ComponentAccessor.getIssueManager().getIssueByCurrentKey(subt.toString()).getSummary()\n                    if(currentSubTSummary.equals(parentIssue.getCustomFieldValue(ecNumber).toString() + \" - \" + actObjToBeFinished[0].toString().substring(0,actObjToBeFinished[0].toString().lastIndexOf('(')-1))){\n                        if(subt.status.name!=\"Done\"){\n                            log.debug \"l'attivit\u00e0 non pu\u00f2 partire perch\u00e8 almeno una di quelle da chiudere prima \" + currentSubTSummary + \" non \u00e8 completata\"\n                            canBeMoved=false\n                        }\n                    }\n                }\n            }\n\n            if(canBeMoved){\n                issueToTransition.add(st)\n            }\n        }\n    }\n}\n\nlog.debug \"Issue to be moved: \" + issueToTransition\n\nint EVENT_ID = 51\nif(issueToTransition){\n    WorkflowTransitionUtil workflowTransitionUtil = ( WorkflowTransitionUtil ) JiraUtils.loadComponent( WorkflowTransitionUtilImpl.class );\n    for(currIssue in issueToTransition){\n        MutableIssue mi = issueManager.getIssueObject(currIssue.toString());\n        if(mi.status.name==\"Open\"){\n            workflowTransitionUtil.setIssue(mi);\n            workflowTransitionUtil.setAction(EVENT_ID);\n            workflowTransitionUtil.validate();\n            workflowTransitionUtil.progress();                          \n        }\n    }\n}\n\n    \n\n\n","scriptPath":null}</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="16" name="Deleted">
      <meta name="jira.status.id">10335</meta>
      <actions>
        <action id="231" name="ReOpen" view="fieldscreen">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id">20123</meta>
          <validators>
            <validator name="" type="class">
              <arg name="contextHandling" />
              <arg name="hidFieldsList">timespent@@</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
              <arg name="customErrorMessage-textValue" />
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="14">
              <post-functions>
                <function type="class">
                  <arg name="field.name">resolution</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
                  <arg name="field.value" />
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="17" name="Not Changed">
      <meta name="jira.status.id">10934</meta>
    </step>
    <step id="18" name="X-Ref Updated">
      <meta name="jira.status.id">10935</meta>
    </step>
    <step id="19" name="Drawings Mailing">
      <meta name="jira.status.id">10337</meta>
      <actions>
<common-action id="391" />
        <action id="251" name="Drawing Sent" view="fieldscreen">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id">20123</meta>
          <restrict-to>
            <conditions type="AND">
              <conditions type="OR">
                <condition type="class">
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.condition.UserIsInAnyGroupsCondition</arg>
                  <arg name="hidGroupsList">EC-HUB-administrators@@EC-HUB-team@@</arg>
                </condition>
                <condition type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.condition.AllowOnlyAssignee</arg>
                </condition>
              </conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">781ab69b-b4ee-4473-bde5-3310586c7f93</arg>
                <arg name="FIELD_NOTES">If NOT ZROH or ZROH+F</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">{"script":"!cfValues['Material Type']?.value == 'ZROH (materia prima / raw material)' || (cfValues['Material Type']?.value == 'ZROH (materia prima / raw material)' &amp;&amp; cfValues['Procurement']?.value == 'F - Purchasing')","scriptPath":null,"parameters":{}}</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE">EC-14178</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="contextHandling" />
              <arg name="hidFieldsList">timespent@@</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
              <arg name="customErrorMessage-textValue" />
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="20">
              <post-functions>
                <function type="class">
                  <arg name="field.name">jÃ‹"Â‚wÂž</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
                  <arg name="field.value">alberto.manfredi</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd" />
                  <arg name="append.value" />
                  <arg name="maxAllowed-integerValue" />
                  <arg name="runAsUser-user" />
                  <arg name="field.value">%%CURRENT_DATETIME%%</arg>
                  <arg name="field.name">customfield_13200</arg>
                  <arg name="scopeType">H</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="scopeDestination-linkEnd" />
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql" />
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                  <arg name="scopeSource-jql" />
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd" />
                  <arg name="append.value" />
                  <arg name="maxAllowed-integerValue">50</arg>
                  <arg name="runAsUser-user" />
                  <arg name="field.value">%%CURRENT_DATETIME%%</arg>
                  <arg name="field.name">customfield_13203</arg>
                  <arg name="scopeType">H</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="scopeDestination-linkEnd" />
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql" />
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                  <arg name="scopeSource-jql" />
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="451" name="Done " view="fieldscreen">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id">20123</meta>
          <restrict-to>
            <conditions type="AND">
              <conditions type="OR">
                <condition type="class">
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.condition.UserIsInAnyGroupsCondition</arg>
                  <arg name="hidGroupsList">EC-HUB-administrators@@EC-HUB-team@@</arg>
                </condition>
                <condition type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.condition.AllowOnlyAssignee</arg>
                </condition>
              </conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">697a623d-abcb-45eb-a898-bcd14aaccff7</arg>
                <arg name="FIELD_NOTES">Code "Changed"</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">{"script":"cfValues['Code Status']?.value == 'Changed'","scriptPath":null}</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">6625e8d4-b137-4154-8838-23e305f8b4c6</arg>
                <arg name="FIELD_NOTES">If ZROH AND Procurement = "Not Managed"</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">{"script":"cfValues['Material Type']?.value == 'ZROH (materia prima / raw material)' &amp;&amp; cfValues['Procurement']?.value == 'Not Managed'","scriptPath":null,"parameters":{}}</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE">EC-14178</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="21">
              <post-functions>
                <function type="class">
                  <arg name="field.name">resolution</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
                  <arg name="field.value">6</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="461" name="Done  " view="fieldscreen">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id">20123</meta>
          <restrict-to>
            <conditions type="AND">
              <conditions type="OR">
                <condition type="class">
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.condition.UserIsInAnyGroupsCondition</arg>
                  <arg name="hidGroupsList">EC-HUB-administrators@@EC-HUB-team@@</arg>
                </condition>
                <condition type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.condition.AllowOnlyAssignee</arg>
                </condition>
              </conditions>
              <condition type="class">
                <arg name="conditionList">3</arg>
                <arg name="comparisonType">1</arg>
                <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                <arg name="class.name">com.googlecode.jsu.workflow.condition.ValueFieldCondition</arg>
                <arg name="fieldValue">Created</arg>
                <arg name="fieldsList">customfield_23254</arg>
              </condition>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">7a356be1-752d-4298-a27e-77dc7e705902</arg>
                <arg name="FIELD_NOTES">If ZROH</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">{"script":"cfValues['Material Type']?.value == 'ZROH (materia prima / raw material)'","scriptPath":null}</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="22">
              <post-functions>
                <function type="class">
                  <arg name="field.name">resolution</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
                  <arg name="field.value">6</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="20" name="Supplier Waiting">
      <meta name="jira.status.id">10338</meta>
      <actions>
        <action id="271" name="Ask Buyer Validation" view="fieldscreen">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id">20123</meta>
          <restrict-to>
            <conditions type="OR">
              <condition type="class">
                <arg name="class.name">com.atlassian.jira.workflow.condition.AllowOnlyAssignee</arg>
              </condition>
              <condition type="class">
                <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                <arg name="class.name">com.googlecode.jsu.workflow.condition.UserIsInAnyGroupsCondition</arg>
                <arg name="hidGroupsList">EC-HUB-administrators@@EC-HUB-team@@</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="contextHandling" />
              <arg name="hidFieldsList">timespent@@</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
              <arg name="customErrorMessage-textValue" />
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="4">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd" />
                  <arg name="append.value" />
                  <arg name="maxAllowed-integerValue" />
                  <arg name="runAsUser-user" />
                  <arg name="field.value">%%CURRENT_DATETIME%%</arg>
                  <arg name="field.name">customfield_13200</arg>
                  <arg name="scopeType">H</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="scopeDestination-linkEnd" />
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql" />
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                  <arg name="scopeSource-jql" />
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd" />
                  <arg name="append.value" />
                  <arg name="maxAllowed-integerValue">50</arg>
                  <arg name="runAsUser-user" />
                  <arg name="field.value">%%CURRENT_DATETIME%%</arg>
                  <arg name="field.name">customfield_13204</arg>
                  <arg name="scopeType">H</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="scopeDestination-linkEnd" />
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql" />
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                  <arg name="scopeSource-jql" />
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">10103</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="301" name="Back to Drawings Mailing" view="fieldscreen">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id">20123</meta>
          <validators>
            <validator name="" type="class">
              <arg name="contextHandling" />
              <arg name="hidFieldsList">timespent@@</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
              <arg name="customErrorMessage-textValue" />
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="19">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="21" name="Changed">
      <meta name="jira.status.id">10336</meta>
      <actions>
<common-action id="191" />
<common-action id="311" />
        <action id="291" name="Back to Supplier Waiting" view="fieldscreen">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id">20123</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">de9407e8-dd9a-4508-9269-989d798124b7</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">{"script":"!(((cfValues['Material Type']?.value == 'ZALB (semilavorato-phantom / semifinished-phantom)' &amp;&amp; cfValues['Procurement']?.value == 'E50 - Phantom') || (cfValues['Material Type']?.value == 'ZFRT (prodotto finito / finished product)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production') || (cfValues['Material Type']?.value == 'ZERS (ricambio / spare part)' &amp;&amp; cfValues['Procurement']?.value == 'X - Production')) &amp;&amp; (cfValues['Costing validation required?']?.value == 'No' || cfValues['Costing validation required?']?.value == null))","scriptPath":null}</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE">EC-10884</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="contextHandling" />
              <arg name="hidFieldsList">timespent@@</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
              <arg name="customErrorMessage-textValue" />
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="20">
              <post-functions>
                <function type="class">
                  <arg name="field.name">jÃ‹"Â‚wÂž</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
                  <arg name="field.value">alberto.manfredi</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
                </function>
                <function type="class">
                  <arg name="field.name">resolution</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
                  <arg name="field.value" />
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="22" name="Created">
      <meta name="jira.status.id">10334</meta>
      <actions>
<common-action id="191" />
<common-action id="311" />
      </actions>
    </step>
    <step id="23" name="Created - Check params">
      <meta name="jira.status.id">14728</meta>
      <actions>
<common-action id="391" />
        <action id="321" name="Created">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id" />
          <results>
            <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="9">
              <post-functions>
                <function type="class">
                  <arg name="field.name">jÃ‹"Â‚wÂž</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
                  <arg name="field.value">alberto.manfredi</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="331" name="Created ZALB ZFRT ZERS">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id" />
          <results>
            <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="7">
              <post-functions>
                <function type="class">
                  <arg name="field.name">jÃ‹"Â‚wÂž</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
                  <arg name="field.value">daniele.bertocchi</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="441" name="Created ZROH">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id" />
          <results>
            <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="19">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="24" name="Changed - Check params">
      <meta name="jira.status.id">14729</meta>
      <actions>
        <action id="351" name="Changed">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id" />
          <results>
            <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="19">
              <post-functions>
                <function type="class">
                  <arg name="field.name">jÃ‹"Â‚wÂž</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
                  <arg name="field.value">alberto.manfredi</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="361" name="Changed ZALB ZFRT ZERS CC">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id" />
          <results>
            <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="11">
              <post-functions>
                <function type="class">
                  <arg name="field.name">jÃ‹"Â‚wÂž</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
                  <arg name="field.value">daniele.bertocchi</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="371" name="Changed ZALB ZFRT ZERS NO CC">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id" />
          <results>
            <unconditional-result old-status="Å¾Ã©e" status="Å¾Ã©e" step="21">
              <post-functions>
                <function type="class">
                  <arg name="field.name">resolution</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
                  <arg name="field.value">6</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
  </steps>
</workflow>