<?xml version='1.0' encoding='UTF-8'?>
<workflow>
  <meta name="jira.description">Task Management workflow</meta>
  <meta name="jira.update.author.key">arianna.fabbri</meta>
  <meta name="jira.updated.date">1573652731905</meta>
  <initial-actions>
    <action id="1" name="Create">
      <meta name="jira.i18n.submit">common.forms.create</meta>
      <meta name="jira.i18n.title">common.forms.create</meta>
      <validators>
        <validator name="" type="class">
          <arg name="permission">Create Issue</arg>
          <arg name="class.name">com.atlassian.jira.workflow.validator.PermissionValidator</arg>
        </validator>
      </validators>
      <results>
        <unconditional-result old-status="≈æ√©e" status="¬¢‚Äî¬ß" step="4">
          <post-functions>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueCreateFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="FIELD_NOTES">Send mail to Assignee for approval</arg>
              <arg name="FIELD_DISABLE_VALIDATION" />
              <arg name="FIELD_FROM">learning&amp;development@faacgroup.com</arg>
              <arg name="FIELD_INCLUDE_ATTACHMENTS">FIELD_INCLUDE_ATTACHMENTS_NONE</arg>
              <arg name="FIELD_TO_ADDRESSES" />
              <arg name="FIELD_CC_ADDRESSES" />
              <arg name="FIELD_CC_USER_FIELDS">group:LD-HR-CC-notifications</arg>
              <arg name="FIELD_TO_USER_FIELDS">customfield_20200</arg>
              <arg name="FIELD_FUNCTION_ID">–©¬ß6–ø–ß—ú—É¬Æ;–∑—õy–±¬∑:–•–≠}q–ñ—á}—é|–øM&lt;–∑¬≠8</arg>
              <arg name="FIELD_INCLUDE_ATTACHMENTS_CALLBACK">`!`</arg>
              <arg name="FIELD_EMAIL_TEMPLATE">&lt;body style="background-color: #f5f5f5; font-size: 16px; font-family:tahoma,geneva,sans-serif;"&gt;
 &lt;center&gt;
  &lt;table id="email-wrap" valign="top" border="0" cellpadding="0" cellspacing="0" style="width: 100%; font-family:tahoma,geneva,sans-serif; background-color: #f5f5f5; font-size: 16px; font-family:tahoma,geneva,sans-serif;"&gt;
   &lt;tbody&gt;
    &lt;tr&gt;
     &lt;td align="center" id="email-wrap-cell" style="padding: 15px 10px 10px"&gt;
      &lt;table id="email-container" border="0" cellpadding="0" cellspacing="0" style="width: 100%; width: 850px; font-family:tahoma,geneva,sans-serif; line-height: 1,500"&gt;
       &lt;tbody&gt;
        &lt;tr&gt;
         &lt;td align="left"&gt;
          &lt;table border="0" cellpadding="0" cellspacing="0" style="width: 100%; font-family:tahoma,geneva,sans-serif;"&gt;
           &lt;tbody&gt;
            &lt;tr&gt;
             &lt;td class="email-header" style="padding: 10px 20px; border: solid #ddd; border-width: 1px 2px 1px 1px; border-bottom-color: #f5f5f5; background-color: #fff; font-weight: normal; line-height: 1,200"&gt;
              &lt;table border="0" style="width: 100%; font-family:tahoma,geneva,sans-serif;"&gt;
				&lt;!-- Logo FAAC Group --&gt;
                &lt;tr&gt;
				  &lt;td colspan="2" align="left"&gt;
					  &lt;img src="&lt;% out &lt;&lt; com.atlassian.jira.component.ComponentAccessor.getApplicationProperties().getString("jira.baseurl") %&gt;/images/loghi/logo_FAAC_Group.png"/&gt;
				  &lt;/td&gt;
				  &lt;!--td&gt;&amp;nbsp;&lt;/td--&gt;


				&lt;/tr&gt;
				&lt;tr&gt;
				  &lt;td colspan="2"&gt;
					&amp;nbsp;
				  &lt;/td&gt;
				&lt;/tr&gt;
				&lt;tr&gt;
				  &lt;td&gt;&amp;nbsp;&lt;/td&gt;
				  &lt;td&gt;&amp;nbsp;&lt;/td&gt;
				&lt;/tr&gt;
				&lt;!-- Department/Job Title --&gt;
				&lt;tr&gt;
				  &lt;td class="request-key" style="text-align: left; font-size: 16px; line-height: 18px; text-decoration: none"&gt;
					  &lt;b&gt;Approval for Training Attendance&lt;/b&gt;&lt;br/&gt;&lt;br/&gt;
                      &lt;span class="request-status aui-lozenge aui-lozenge-current" style="background-color: #cccccd; border: 1px solid #cccccd; border-radius: 3px; color: #333; display: inline-block; font-size: 11px; font-weight: bold; line-height: 1; padding: 2px 5px 1px 5px; text-align: center; text-decoration: none; text-transform: uppercase; background-color: #ffd351; border-color: #ffd351; color: #594300; margin-left: 5px; font-weight: bold; font-size: 14px"&gt;$issue.status.name&lt;/span&gt;
				  &lt;/td&gt;
				&lt;/tr&gt;
                &lt;tr&gt;
					&lt;td&gt;&amp;nbsp;&lt;/td&gt;
					&lt;td style="text-align: left; font-size: 14px; line-height: 20px; text-decoration: none"&gt;
					  &lt;u&gt;Training Title&lt;/u&gt;: &lt;% out &lt;&lt; issue.getCustomFieldValue(com.atlassian.jira.component.ComponentAccessor.getCustomFieldManager().getCustomFieldObjectByName("TrainingName")).toString() %&gt;
					&lt;/td&gt;
				  &lt;/tr&gt;
                  &lt;tr&gt;
					&lt;td&gt;&amp;nbsp;&lt;/td&gt;
					&lt;td style="text-align: left; font-size: 14px; line-height: 20px; text-decoration: none"&gt;
					  &lt;a href="https://teams.faacgroup.com/faac-hrportal-ui/#/hr/learning/trainings/&lt;% out &lt;&lt; issue.getCustomFieldValue(com.atlassian.jira.component.ComponentAccessor.getCustomFieldManager().getCustomFieldObjectByName("TrainingID")).toString() %&gt;/details/1"&gt;View Training Details&lt;/a&gt;
					&lt;/td&gt;
				  &lt;/tr&gt;
                  &lt;tr&gt;
					&lt;td&gt;&amp;nbsp;&lt;/td&gt;
					&lt;td style="text-align: left; font-size: 14px; line-height: 20px; text-decoration: none"&gt;
					  &lt;a href="https://teams.faacgroup.com/faac-hrportal-ui/#/hr/learning/trainings/&lt;% out &lt;&lt; issue.getCustomFieldValue(com.atlassian.jira.component.ComponentAccessor.getCustomFieldManager().getCustomFieldObjectByName("TrainingID")).toString() %&gt;/details/4/editions/&lt;% out &lt;&lt; issue.getCustomFieldValue(com.atlassian.jira.component.ComponentAccessor.getCustomFieldManager().getCustomFieldObjectByName("EditionID")).toString() %&gt;/dates"&gt;View Training Dates&lt;/a&gt;
					&lt;/td&gt;
				  &lt;/tr&gt;
                  &lt;tr&gt;
					&lt;td colspan="2"&gt;&amp;nbsp;&lt;/td&gt;
				  &lt;/tr&gt;
			  &lt;/table&gt;
             &lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
             &lt;td class="email-actions email-content-important" style="text-align: center; font-size: 14px; padding-top: 100px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; border-top-width: 0; border-bottom-width: 2px"&gt;
              &lt;p&gt;&amp;nbsp;&lt;/p&gt;
              &lt;b&gt;In order to validate your collaborator attendance to the training, please &lt;a href="https://teams.faacgroup.com/faac-hrportal-ui/#/hr/learning/trainings/&lt;% out &lt;&lt; issue.getCustomFieldValue(com.atlassian.jira.component.ComponentAccessor.getCustomFieldManager().getCustomFieldObjectByName("TrainingID")).toString() %&gt;/details/4/editions/&lt;% out &lt;&lt; issue.getCustomFieldValue(com.atlassian.jira.component.ComponentAccessor.getCustomFieldManager().getCustomFieldObjectByName("EditionID")).toString() %&gt;/attendees"&gt;click here and select "Approve"&lt;/a&gt;&lt;/b&gt;
              &lt;p&gt;&amp;nbsp;&lt;/p&gt;
             &lt;/td&gt;
            &lt;/tr&gt;
           &lt;/tbody&gt;
          &lt;/table&gt;
         &lt;/td&gt;
        &lt;/tr&gt;
       &lt;/tbody&gt;
      &lt;/table&gt;
     &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
     &lt;td id="foot-note" style="padding-top: 40px; padding-bottom: 20px; color: #707070; font-size: 12px; line-height: 1,200"&gt;
      &lt;p style="width: 600px; text-align: center; margin: 0 auto"&gt;This message is automatically generated by FAAC Group TEAMS Portal.&lt;br /&gt;&lt;/p&gt;
     &lt;/td&gt;
    &lt;/tr&gt;
   &lt;/tbody&gt;
  &lt;/table&gt;
 &lt;/center&gt;
&lt;/body&gt;</arg>
              <arg name="FIELD_EMAIL_SUBJECT_TEMPLATE">[TEAMS - Learning &amp; Development] "&lt;% out &lt;&lt; issue.getCustomFieldValue(com.atlassian.jira.component.ComponentAccessor.getCustomFieldManager().getCustomFieldObjectByName("TrainingName")).toString() %&gt;" attendance approval for &lt;% out &lt;&lt; issue.summary.toString() %&gt;</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SendCustomEmail</arg>
              <arg name="v+nW√π">false</arg>
              <arg name="FIELD_CONDITION">import com.atlassian.jira.issue.fields.CustomField
import com.atlassian.jira.component.ComponentAccessor

mail.setFrom("learning&amp;development@faacgroup.com")
cfValues['Mandatory']?.value != 'Yes'|||</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_PREVIEW_ISSUE">LD-54</arg>
              <arg name="FIELD_EMAIL_FORMAT">3</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">1</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
  </initial-actions>
  <steps>
    <step id="3" name="‚Ä∞√û">
      <meta name="jira.status.id">10007</meta>
    </step>
    <step id="4" name="Waiting for Approval">
      <meta name="jira.status.id">13527</meta>
      <actions>
        <action id="11" name="Approve old" view="fieldscreen">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id">19311</meta>
          <results>
            <unconditional-result old-status="≈æ√©e" status="≈æ√©e" step="3">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES">Send confirmation to attendee - Mandatory = "Yes", Email address == ""</arg>
                  <arg name="FIELD_DISABLE_VALIDATION" />
                  <arg name="FIELD_FROM">health&amp;safety@faacgroup.com</arg>
                  <arg name="FIELD_INCLUDE_ATTACHMENTS">FIELD_INCLUDE_ATTACHMENTS_NONE</arg>
                  <arg name="FIELD_TO_ADDRESSES" />
                  <arg name="FIELD_CC_ADDRESSES" />
                  <arg name="FIELD_CC_USER_FIELDS" />
                  <arg name="FIELD_TO_USER_FIELDS">customfield_20200</arg>
                  <arg name="FIELD_INCLUDE_ATTACHMENTS_CALLBACK" />
                  <arg name="FIELD_EMAIL_TEMPLATE">&lt;body style="background-color: #f5f5f5; font-size: 16px; font-family:tahoma,geneva,sans-serif;"&gt;
 &lt;center&gt;
  &lt;table id="email-wrap" valign="top" border="0" cellpadding="0" cellspacing="0" style="width: 100%; font-family:tahoma,geneva,sans-serif; background-color: #f5f5f5; font-size: 16px; font-family:tahoma,geneva,sans-serif;"&gt;
   &lt;tbody&gt;
    &lt;tr&gt;
     &lt;td align="center" id="email-wrap-cell" style="padding: 15px 10px 10px"&gt;
      &lt;table id="email-container" border="0" cellpadding="0" cellspacing="0" style="width: 100%; width: 850px; font-family:tahoma,geneva,sans-serif; line-height: 1,500"&gt;
       &lt;tbody&gt;
        &lt;tr&gt;
         &lt;td align="left"&gt;
          &lt;table border="0" cellpadding="0" cellspacing="0" style="width: 100%; font-family:tahoma,geneva,sans-serif;"&gt;
           &lt;tbody&gt;
            &lt;tr&gt;
             &lt;td class="email-header" style="padding: 10px 20px; border: solid #ddd; border-width: 1px 2px 1px 1px; border-bottom-color: #f5f5f5; background-color: #fff; font-weight: normal; line-height: 1,200"&gt;
              &lt;table border="0" style="width: 100%; font-family:tahoma,geneva,sans-serif;"&gt;
				&lt;!-- Logo FAAC Group --&gt;
                &lt;tr&gt;
				  &lt;td colspan="2" align="left"&gt;
					  &lt;img src="&lt;% out &lt;&lt; com.atlassian.jira.component.ComponentAccessor.getApplicationProperties().getString("jira.baseurl") %&gt;/images/loghi/logo_FAAC_Group.png"/&gt;
				  &lt;/td&gt;
				  &lt;!--td&gt;&amp;nbsp;&lt;/td--&gt;


				&lt;/tr&gt;
				&lt;tr&gt;
				  &lt;td colspan="2"&gt;
					&amp;nbsp;
				  &lt;/td&gt;
				&lt;/tr&gt;
				&lt;tr&gt;
				  &lt;td&gt;&amp;nbsp;&lt;/td&gt;
				  &lt;td&gt;&amp;nbsp;&lt;/td&gt;
				&lt;/tr&gt;
				&lt;!-- Department/Job Title --&gt;
				&lt;tr&gt;
				  &lt;td class="request-key" style="text-align: left; font-size: 16px; line-height: 18px; text-decoration: none"&gt;
					  &lt;b&gt;&lt;% out &lt;&lt; issue.getCustomFieldValue(com.atlassian.jira.component.ComponentAccessor.getCustomFieldManager().getCustomFieldObjectByName("TrainingName")).toString() %&gt;&lt;/b&gt;&lt;br/&gt;&lt;br/&gt;
				  &lt;/td&gt;
				&lt;/tr&gt;
                &lt;tr&gt;
					&lt;td&gt;&amp;nbsp;&lt;/td&gt;
					&lt;td style="text-align: left; font-size: 14px; line-height: 20px; text-decoration: none"&gt;
					  &lt;u&gt;Training Type&lt;/u&gt;: &lt;% out &lt;&lt; issue.getCustomFieldValue(com.atlassian.jira.component.ComponentAccessor.getCustomFieldManager().getCustomFieldObjectByName("HS_TRAINING_TYPE")).toString() %&gt;
					&lt;/td&gt;
				  &lt;/tr&gt;
                  &lt;tr&gt;
					&lt;td&gt;&amp;nbsp;&lt;/td&gt;
					&lt;td style="text-align: left; font-size: 14px; line-height: 20px; text-decoration: none"&gt;
					  &lt;a href="https://teams.faacgroup.com/faac-hrportal-ui/#/hr/learning/trainings/&lt;% out &lt;&lt; issue.getCustomFieldValue(com.atlassian.jira.component.ComponentAccessor.getCustomFieldManager().getCustomFieldObjectByName("TrainingID")).toString() %&gt;/details/1"&gt;View Training Details&lt;/a&gt;
					&lt;/td&gt;
				  &lt;/tr&gt;
                  &lt;tr&gt;
					&lt;td&gt;&amp;nbsp;&lt;/td&gt;
					&lt;td style="text-align: left; font-size: 14px; line-height: 20px; text-decoration: none"&gt;
					  &lt;a href="https://teams.faacgroup.com/faac-hrportal-ui/#/hr/learning/trainings/&lt;% out &lt;&lt; issue.getCustomFieldValue(com.atlassian.jira.component.ComponentAccessor.getCustomFieldManager().getCustomFieldObjectByName("TrainingID")).toString() %&gt;/details/4/editions/&lt;% out &lt;&lt; issue.getCustomFieldValue(com.atlassian.jira.component.ComponentAccessor.getCustomFieldManager().getCustomFieldObjectByName("EditionID")).toString() %&gt;/dates"&gt;View Training Dates&lt;/a&gt;
					&lt;/td&gt;
				  &lt;/tr&gt;
                  &lt;tr&gt;
					&lt;td colspan="2"&gt;&amp;nbsp;&lt;/td&gt;
				  &lt;/tr&gt;
			  &lt;/table&gt;
             &lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
             &lt;td&gt;&amp;nbsp;&lt;/td&gt;
            &lt;/tr&gt;
           &lt;/tbody&gt;
          &lt;/table&gt;
         &lt;/td&gt;
        &lt;/tr&gt;
       &lt;/tbody&gt;
      &lt;/table&gt;
     &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
     &lt;td id="foot-note" style="padding-top: 40px; padding-bottom: 20px; color: #707070; font-size: 12px; line-height: 1,200"&gt;
      &lt;p style="width: 600px; text-align: center; margin: 0 auto"&gt;This message is automatically generated by FAAC Group TEAMS Portal.&lt;br /&gt;&lt;/p&gt;
     &lt;/td&gt;
    &lt;/tr&gt;
   &lt;/tbody&gt;
  &lt;/table&gt;
 &lt;/center&gt;
&lt;/body&gt;</arg>
                  <arg name="FIELD_EMAIL_SUBJECT_TEMPLATE">[TEAMS - Health &amp; Safety] Attendance confirmation to "&lt;% out &lt;&lt; issue.getCustomFieldValue(com.atlassian.jira.component.ComponentAccessor.getCustomFieldManager().getCustomFieldObjectByName("TrainingName")).toString() %&gt;" for &lt;% out &lt;&lt; issue.summary.toString() %&gt;</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SendCustomEmail</arg>
                  <arg name="v+nW√π">false</arg>
                  <arg name="FIELD_CONDITION">mail.setFrom("health&amp;safety@faacgroup.com")

import com.atlassian.jira.issue.fields.CustomField
import com.atlassian.jira.component.ComponentAccessor
import org.apache.log4j.Category

Category log = Category.getInstance("com.onresolve.jira.groovy.CreateDependentIssue")
log.setLevel(org.apache.log4j.Level.DEBUG)

cfValues['Email address'] == null || cfValues['Email address'] == '' &amp;&amp; cfValues['Mandatory']?.value == 'Yes'|||</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_PREVIEW_ISSUE" />
                  <arg name="FIELD_EMAIL_FORMAT">3</arg>
                  <arg name="events" />
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES">Send confirmation to attendee - Mandatory = "Yes" - Email address != ""</arg>
                  <arg name="FIELD_DISABLE_VALIDATION" />
                  <arg name="FIELD_FROM">health&amp;safety@faacgroup.com</arg>
                  <arg name="FIELD_INCLUDE_ATTACHMENTS" />
                  <arg name="FIELD_TO_ADDRESSES" />
                  <arg name="FIELD_CC_ADDRESSES" />
                  <arg name="FIELD_CC_USER_FIELDS">customfield_20200</arg>
                  <arg name="FIELD_TO_USER_FIELDS">customfield_19300</arg>
                  <arg name="FIELD_FUNCTION_ID">w}–•–∂—ò–ª–ßt{–≠–∑—ót–£~¬∑u–øy–ø¬∑—ç–ª‚Ä†—äo–å—ã</arg>
                  <arg name="FIELD_INCLUDE_ATTACHMENTS_CALLBACK">`!`</arg>
                  <arg name="FIELD_EMAIL_TEMPLATE">&lt;body style="background-color: #f5f5f5; font-size: 16px; font-family:tahoma,geneva,sans-serif;"&gt;
 &lt;center&gt;
  &lt;table id="email-wrap" valign="top" border="0" cellpadding="0" cellspacing="0" style="width: 100%; font-family:tahoma,geneva,sans-serif; background-color: #f5f5f5; font-size: 16px; font-family:tahoma,geneva,sans-serif;"&gt;
   &lt;tbody&gt;
    &lt;tr&gt;
     &lt;td align="center" id="email-wrap-cell" style="padding: 15px 10px 10px"&gt;
      &lt;table id="email-container" border="0" cellpadding="0" cellspacing="0" style="width: 100%; width: 850px; font-family:tahoma,geneva,sans-serif; line-height: 1,500"&gt;
       &lt;tbody&gt;
        &lt;tr&gt;
         &lt;td align="left"&gt;
          &lt;table border="0" cellpadding="0" cellspacing="0" style="width: 100%; font-family:tahoma,geneva,sans-serif;"&gt;
           &lt;tbody&gt;
            &lt;tr&gt;
             &lt;td class="email-header" style="padding: 10px 20px; border: solid #ddd; border-width: 1px 2px 1px 1px; border-bottom-color: #f5f5f5; background-color: #fff; font-weight: normal; line-height: 1,200"&gt;
              &lt;table border="0" style="width: 100%; font-family:tahoma,geneva,sans-serif;"&gt;
				&lt;!-- Logo FAAC Group --&gt;
                &lt;tr&gt;
				  &lt;td colspan="2" align="left"&gt;
					  &lt;img src="&lt;% out &lt;&lt; com.atlassian.jira.component.ComponentAccessor.getApplicationProperties().getString("jira.baseurl") %&gt;/images/loghi/logo_FAAC_Group.png"/&gt;
				  &lt;/td&gt;
				  &lt;!--td&gt;&amp;nbsp;&lt;/td--&gt;


				&lt;/tr&gt;
				&lt;tr&gt;
				  &lt;td colspan="2"&gt;
					&amp;nbsp;
				  &lt;/td&gt;
				&lt;/tr&gt;
				&lt;tr&gt;
				  &lt;td&gt;&amp;nbsp;&lt;/td&gt;
				  &lt;td&gt;&amp;nbsp;&lt;/td&gt;
				&lt;/tr&gt;
				&lt;!-- Department/Job Title --&gt;
				&lt;tr&gt;
				  &lt;td class="request-key" style="text-align: left; font-size: 16px; line-height: 18px; text-decoration: none"&gt;
					  &lt;b&gt;&lt;% out &lt;&lt; issue.getCustomFieldValue(com.atlassian.jira.component.ComponentAccessor.getCustomFieldManager().getCustomFieldObjectByName("TrainingName")).toString() %&gt;&lt;/b&gt;&lt;br/&gt;&lt;br/&gt;
				  &lt;/td&gt;
				&lt;/tr&gt;
                &lt;tr&gt;
					&lt;td&gt;&amp;nbsp;&lt;/td&gt;
					&lt;td style="text-align: left; font-size: 14px; line-height: 20px; text-decoration: none"&gt;
					  &lt;u&gt;Training Type&lt;/u&gt;: &lt;% out &lt;&lt; issue.getCustomFieldValue(com.atlassian.jira.component.ComponentAccessor.getCustomFieldManager().getCustomFieldObjectByName("HS_TRAINING_TYPE")).toString() %&gt;
					&lt;/td&gt;
				  &lt;/tr&gt;
                  &lt;tr&gt;
					&lt;td&gt;&amp;nbsp;&lt;/td&gt;
					&lt;td style="text-align: left; font-size: 14px; line-height: 20px; text-decoration: none"&gt;
					  &lt;a href="https://teams.faacgroup.com/faac-hrportal-ui/#/hr/learning/trainings/&lt;% out &lt;&lt; issue.getCustomFieldValue(com.atlassian.jira.component.ComponentAccessor.getCustomFieldManager().getCustomFieldObjectByName("TrainingID")).toString() %&gt;/details/1"&gt;View Training Details&lt;/a&gt;
					&lt;/td&gt;
				  &lt;/tr&gt;
                  &lt;tr&gt;
					&lt;td&gt;&amp;nbsp;&lt;/td&gt;
					&lt;td style="text-align: left; font-size: 14px; line-height: 20px; text-decoration: none"&gt;
					  &lt;a href="https://teams.faacgroup.com/faac-hrportal-ui/#/hr/learning/trainings/&lt;% out &lt;&lt; issue.getCustomFieldValue(com.atlassian.jira.component.ComponentAccessor.getCustomFieldManager().getCustomFieldObjectByName("TrainingID")).toString() %&gt;/details/4/editions/&lt;% out &lt;&lt; issue.getCustomFieldValue(com.atlassian.jira.component.ComponentAccessor.getCustomFieldManager().getCustomFieldObjectByName("EditionID")).toString() %&gt;/dates"&gt;View Training Dates&lt;/a&gt;
					&lt;/td&gt;
				  &lt;/tr&gt;
                  &lt;tr&gt;
					&lt;td colspan="2"&gt;&amp;nbsp;&lt;/td&gt;
				  &lt;/tr&gt;
			  &lt;/table&gt;
             &lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
             &lt;td&gt;&amp;nbsp;&lt;/td&gt;
            &lt;/tr&gt;
           &lt;/tbody&gt;
          &lt;/table&gt;
         &lt;/td&gt;
        &lt;/tr&gt;
       &lt;/tbody&gt;
      &lt;/table&gt;
     &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
     &lt;td id="foot-note" style="padding-top: 40px; padding-bottom: 20px; color: #707070; font-size: 12px; line-height: 1,200"&gt;
      &lt;p style="width: 600px; text-align: center; margin: 0 auto"&gt;This message is automatically generated by FAAC Group TEAMS Portal.&lt;br /&gt;&lt;/p&gt;
     &lt;/td&gt;
    &lt;/tr&gt;
   &lt;/tbody&gt;
  &lt;/table&gt;
 &lt;/center&gt;
&lt;/body&gt;</arg>
                  <arg name="FIELD_EMAIL_SUBJECT_TEMPLATE">[TEAMS - Health &amp; Safety] Attendance confirmation to "&lt;% out &lt;&lt; issue.getCustomFieldValue(com.atlassian.jira.component.ComponentAccessor.getCustomFieldManager().getCustomFieldObjectByName("TrainingName")).toString() %&gt;"</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SendCustomEmail</arg>
                  <arg name="v+nW√π">false</arg>
                  <arg name="FIELD_CONDITION">mail.setFrom("health&amp;safety@faacgroup.com")

import com.atlassian.jira.issue.fields.CustomField
import com.atlassian.jira.component.ComponentAccessor
import org.apache.log4j.Category

Category log = Category.getInstance("com.onresolve.jira.groovy.CreateDependentIssue")
log.setLevel(org.apache.log4j.Level.DEBUG)

log.debug "result: " + (cfValues['Email address'] != null &amp;&amp; cfValues['Email address'] != '' &amp;&amp; cfValues['Mandatory']?.value == 'Yes')

cfValues['Email address'] != null &amp;&amp; cfValues['Email address'] != '' &amp;&amp; cfValues['Mandatory']?.value == 'Yes'|||</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_PREVIEW_ISSUE" />
                  <arg name="FIELD_EMAIL_FORMAT">3</arg>
                  <arg name="events" />
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES">Send confirmation to attendee - Mandatory != Yes</arg>
                  <arg name="FIELD_DISABLE_VALIDATION" />
                  <arg name="FIELD_FROM">learning&amp;development@faacgroup.com</arg>
                  <arg name="FIELD_INCLUDE_ATTACHMENTS">FIELD_INCLUDE_ATTACHMENTS_NONE</arg>
                  <arg name="FIELD_TO_ADDRESSES" />
                  <arg name="FIELD_CC_ADDRESSES" />
                  <arg name="FIELD_CC_USER_FIELDS">group:LD-HR-CC-notifications</arg>
                  <arg name="FIELD_TO_USER_FIELDS">customfield_19300</arg>
                  <arg name="FIELD_FUNCTION_ID">–ø‚Ä°]—Å–Ω—å–Ø–ã—âs¬≠4–≠¬ß¬µq–∂—ü—áM—î–Ω—á^{}[–≠—é;</arg>
                  <arg name="FIELD_INCLUDE_ATTACHMENTS_CALLBACK">`!`</arg>
                  <arg name="FIELD_EMAIL_TEMPLATE">&lt;body style="background-color: #f5f5f5; font-size: 16px; font-family:tahoma,geneva,sans-serif;"&gt;
 &lt;center&gt;
  &lt;table id="email-wrap" valign="top" border="0" cellpadding="0" cellspacing="0" style="width: 100%; font-family:tahoma,geneva,sans-serif; background-color: #f5f5f5; font-size: 16px; font-family:tahoma,geneva,sans-serif;"&gt;
   &lt;tbody&gt;
    &lt;tr&gt;
     &lt;td align="center" id="email-wrap-cell" style="padding: 15px 10px 10px"&gt;
      &lt;table id="email-container" border="0" cellpadding="0" cellspacing="0" style="width: 100%; width: 850px; font-family:tahoma,geneva,sans-serif; line-height: 1,500"&gt;
       &lt;tbody&gt;
        &lt;tr&gt;
         &lt;td align="left"&gt;
          &lt;table border="0" cellpadding="0" cellspacing="0" style="width: 100%; font-family:tahoma,geneva,sans-serif;"&gt;
           &lt;tbody&gt;
            &lt;tr&gt;
             &lt;td class="email-header" style="padding: 10px 20px; border: solid #ddd; border-width: 1px 2px 1px 1px; border-bottom-color: #f5f5f5; background-color: #fff; font-weight: normal; line-height: 1,200"&gt;
              &lt;table border="0" style="width: 100%; font-family:tahoma,geneva,sans-serif;"&gt;
				&lt;!-- Logo FAAC Group --&gt;
                &lt;tr&gt;
				  &lt;td colspan="2" align="left"&gt;
					  &lt;img src="&lt;% out &lt;&lt; com.atlassian.jira.component.ComponentAccessor.getApplicationProperties().getString("jira.baseurl") %&gt;/images/loghi/logo_FAAC_Group.png"/&gt;
				  &lt;/td&gt;
				  &lt;!--td&gt;&amp;nbsp;&lt;/td--&gt;


				&lt;/tr&gt;
				&lt;tr&gt;
				  &lt;td colspan="2"&gt;
					&amp;nbsp;
				  &lt;/td&gt;
				&lt;/tr&gt;
				&lt;tr&gt;
				  &lt;td&gt;&amp;nbsp;&lt;/td&gt;
				  &lt;td&gt;&amp;nbsp;&lt;/td&gt;
				&lt;/tr&gt;
				&lt;!-- Department/Job Title --&gt;
				&lt;tr&gt;
				  &lt;td class="request-key" style="text-align: left; font-size: 16px; line-height: 18px; text-decoration: none"&gt;
					  &lt;b&gt;Training Attendance APPROVED&lt;/b&gt;&lt;br/&gt;&lt;br/&gt;
				  &lt;/td&gt;
				&lt;/tr&gt;
                &lt;tr&gt;
					&lt;td&gt;&amp;nbsp;&lt;/td&gt;
					&lt;td style="text-align: left; font-size: 14px; line-height: 20px; text-decoration: none"&gt;
					  &lt;u&gt;Training Title&lt;/u&gt;: &lt;% out &lt;&lt; issue.getCustomFieldValue(com.atlassian.jira.component.ComponentAccessor.getCustomFieldManager().getCustomFieldObjectByName("TrainingName")).toString() %&gt;
					&lt;/td&gt;
				  &lt;/tr&gt;
                  &lt;tr&gt;
					&lt;td&gt;&amp;nbsp;&lt;/td&gt;
					&lt;td style="text-align: left; font-size: 14px; line-height: 20px; text-decoration: none"&gt;
					  &lt;a href="https://teams.faacgroup.com/faac-hrportal-ui/#/hr/learning/trainings/&lt;% out &lt;&lt; issue.getCustomFieldValue(com.atlassian.jira.component.ComponentAccessor.getCustomFieldManager().getCustomFieldObjectByName("TrainingID")).toString() %&gt;/details/1"&gt;View Training Details&lt;/a&gt;
					&lt;/td&gt;
				  &lt;/tr&gt;
                  &lt;tr&gt;
					&lt;td&gt;&amp;nbsp;&lt;/td&gt;
					&lt;td style="text-align: left; font-size: 14px; line-height: 20px; text-decoration: none"&gt;
					  &lt;a href="https://teams.faacgroup.com/faac-hrportal-ui/#/hr/learning/trainings/&lt;% out &lt;&lt; issue.getCustomFieldValue(com.atlassian.jira.component.ComponentAccessor.getCustomFieldManager().getCustomFieldObjectByName("TrainingID")).toString() %&gt;/details/4/editions/&lt;% out &lt;&lt; issue.getCustomFieldValue(com.atlassian.jira.component.ComponentAccessor.getCustomFieldManager().getCustomFieldObjectByName("EditionID")).toString() %&gt;/dates"&gt;View Training Dates&lt;/a&gt;
					&lt;/td&gt;
				  &lt;/tr&gt;
                  &lt;tr&gt;
					&lt;td colspan="2"&gt;&amp;nbsp;&lt;/td&gt;
				  &lt;/tr&gt;
			  &lt;/table&gt;
             &lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
             &lt;td&gt;&amp;nbsp;&lt;/td&gt;
            &lt;/tr&gt;
           &lt;/tbody&gt;
          &lt;/table&gt;
         &lt;/td&gt;
        &lt;/tr&gt;
       &lt;/tbody&gt;
      &lt;/table&gt;
     &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
     &lt;td id="foot-note" style="padding-top: 40px; padding-bottom: 20px; color: #707070; font-size: 12px; line-height: 1,200"&gt;
      &lt;p style="width: 600px; text-align: center; margin: 0 auto"&gt;This message is automatically generated by FAAC Group TEAMS Portal.&lt;br /&gt;&lt;/p&gt;
     &lt;/td&gt;
    &lt;/tr&gt;
   &lt;/tbody&gt;
  &lt;/table&gt;
 &lt;/center&gt;
&lt;/body&gt;</arg>
                  <arg name="FIELD_EMAIL_SUBJECT_TEMPLATE">[TEAMS - Learning &amp; Development] "&lt;% out &lt;&lt; issue.getCustomFieldValue(com.atlassian.jira.component.ComponentAccessor.getCustomFieldManager().getCustomFieldObjectByName("TrainingName")).toString() %&gt;" training attendance APPROVED</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SendCustomEmail</arg>
                  <arg name="v+nW√π">false</arg>
                  <arg name="FIELD_CONDITION">import com.atlassian.jira.issue.fields.CustomField
import com.atlassian.jira.component.ComponentAccessor

mail.setFrom("learning&amp;development@faacgroup.com")

cfValues['Email address'] != null &amp;&amp; cfValues['Email address'] != '' &amp;&amp; cfValues['Mandatory']?.value != 'Yes'|||</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_PREVIEW_ISSUE">LD-85</arg>
                  <arg name="FIELD_EMAIL_FORMAT">3</arg>
                  <arg name="events" />
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="21" name="Reject">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id" />
          <results>
            <unconditional-result old-status="≈æ√©e" status="≈æ√©e" step="5">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="31" name="Approve">
          <meta name="jira.description" />
          <meta name="jira.fieldscreen.id" />
          <results>
            <unconditional-result old-status="≈æ√©e" status="≈æ√©e" step="3">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES">Send confirmation to attendee</arg>
                  <arg name="FIELD_DISABLE_VALIDATION" />
                  <arg name="FIELD_FROM">learning&amp;development@faacgroup.com</arg>
                  <arg name="FIELD_INCLUDE_ATTACHMENTS" />
                  <arg name="FIELD_TO_ADDRESSES" />
                  <arg name="FIELD_CC_ADDRESSES" />
                  <arg name="FIELD_CC_USER_FIELDS">group:LD-HR-CC-notifications</arg>
                  <arg name="FIELD_TO_USER_FIELDS">customfield_19300</arg>
                  <arg name="FIELD_INCLUDE_ATTACHMENTS_CALLBACK" />
                  <arg name="FIELD_EMAIL_TEMPLATE">&lt;body style="background-color: #f5f5f5; font-size: 16px; font-family:tahoma,geneva,sans-serif;"&gt;
 &lt;center&gt;
  &lt;table id="email-wrap" valign="top" border="0" cellpadding="0" cellspacing="0" style="width: 100%; font-family:tahoma,geneva,sans-serif; background-color: #f5f5f5; font-size: 16px; font-family:tahoma,geneva,sans-serif;"&gt;
   &lt;tbody&gt;
    &lt;tr&gt;
     &lt;td align="center" id="email-wrap-cell" style="padding: 15px 10px 10px"&gt;
      &lt;table id="email-container" border="0" cellpadding="0" cellspacing="0" style="width: 100%; width: 850px; font-family:tahoma,geneva,sans-serif; line-height: 1,500"&gt;
       &lt;tbody&gt;
        &lt;tr&gt;
         &lt;td align="left"&gt;
          &lt;table border="0" cellpadding="0" cellspacing="0" style="width: 100%; font-family:tahoma,geneva,sans-serif;"&gt;
           &lt;tbody&gt;
            &lt;tr&gt;
             &lt;td class="email-header" style="padding: 10px 20px; border: solid #ddd; border-width: 1px 2px 1px 1px; border-bottom-color: #f5f5f5; background-color: #fff; font-weight: normal; line-height: 1,200"&gt;
              &lt;table border="0" style="width: 100%; font-family:tahoma,geneva,sans-serif;"&gt;
				&lt;!-- Logo FAAC Group --&gt;
                &lt;tr&gt;
				  &lt;td colspan="2" align="left"&gt;
					  &lt;img src="&lt;% out &lt;&lt; com.atlassian.jira.component.ComponentAccessor.getApplicationProperties().getString("jira.baseurl") %&gt;/images/loghi/logo_FAAC_Group.png"/&gt;
				  &lt;/td&gt;
				  &lt;!--td&gt;&amp;nbsp;&lt;/td--&gt;


				&lt;/tr&gt;
				&lt;tr&gt;
				  &lt;td colspan="2"&gt;
					&amp;nbsp;
				  &lt;/td&gt;
				&lt;/tr&gt;
				&lt;tr&gt;
				  &lt;td&gt;&amp;nbsp;&lt;/td&gt;
				  &lt;td&gt;&amp;nbsp;&lt;/td&gt;
				&lt;/tr&gt;
				&lt;!-- Department/Job Title --&gt;
				&lt;tr&gt;
				  &lt;td class="request-key" style="text-align: left; font-size: 16px; line-height: 18px; text-decoration: none"&gt;
					  &lt;b&gt;Training Attendance APPROVED&lt;/b&gt;&lt;br/&gt;&lt;br/&gt;
				  &lt;/td&gt;
				&lt;/tr&gt;
                &lt;tr&gt;
					&lt;td&gt;&amp;nbsp;&lt;/td&gt;
					&lt;td style="text-align: left; font-size: 14px; line-height: 20px; text-decoration: none"&gt;
					  &lt;u&gt;Training Title&lt;/u&gt;: &lt;% out &lt;&lt; issue.getCustomFieldValue(com.atlassian.jira.component.ComponentAccessor.getCustomFieldManager().getCustomFieldObjectByName("TrainingName")).toString() %&gt;
					&lt;/td&gt;
				  &lt;/tr&gt;
                  &lt;tr&gt;
					&lt;td&gt;&amp;nbsp;&lt;/td&gt;
					&lt;td style="text-align: left; font-size: 14px; line-height: 20px; text-decoration: none"&gt;
					  &lt;a href="https://teams.faacgroup.com/faac-hrportal-ui/#/hr/learning/trainings/&lt;% out &lt;&lt; issue.getCustomFieldValue(com.atlassian.jira.component.ComponentAccessor.getCustomFieldManager().getCustomFieldObjectByName("TrainingID")).toString() %&gt;/details/1"&gt;View Training Details&lt;/a&gt;
					&lt;/td&gt;
				  &lt;/tr&gt;
                  &lt;tr&gt;
					&lt;td&gt;&amp;nbsp;&lt;/td&gt;
					&lt;td style="text-align: left; font-size: 14px; line-height: 20px; text-decoration: none"&gt;
					  &lt;a href="https://teams.faacgroup.com/faac-hrportal-ui/#/hr/learning/trainings/&lt;% out &lt;&lt; issue.getCustomFieldValue(com.atlassian.jira.component.ComponentAccessor.getCustomFieldManager().getCustomFieldObjectByName("TrainingID")).toString() %&gt;/details/4/editions/&lt;% out &lt;&lt; issue.getCustomFieldValue(com.atlassian.jira.component.ComponentAccessor.getCustomFieldManager().getCustomFieldObjectByName("EditionID")).toString() %&gt;/dates"&gt;View Training Dates&lt;/a&gt;
					&lt;/td&gt;
				  &lt;/tr&gt;
                  &lt;tr&gt;
					&lt;td colspan="2"&gt;&amp;nbsp;&lt;/td&gt;
				  &lt;/tr&gt;
			  &lt;/table&gt;
             &lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
             &lt;td&gt;&amp;nbsp;&lt;/td&gt;
            &lt;/tr&gt;
           &lt;/tbody&gt;
          &lt;/table&gt;
         &lt;/td&gt;
        &lt;/tr&gt;
       &lt;/tbody&gt;
      &lt;/table&gt;
     &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
     &lt;td id="foot-note" style="padding-top: 40px; padding-bottom: 20px; color: #707070; font-size: 12px; line-height: 1,200"&gt;
      &lt;p style="width: 600px; text-align: center; margin: 0 auto"&gt;This message is automatically generated by FAAC Group TEAMS Portal.&lt;br /&gt;&lt;/p&gt;
     &lt;/td&gt;
    &lt;/tr&gt;
   &lt;/tbody&gt;
  &lt;/table&gt;
 &lt;/center&gt;
&lt;/body&gt;</arg>
                  <arg name="FIELD_EMAIL_SUBJECT_TEMPLATE">[TEAMS - Learning &amp; Development] "&lt;% out &lt;&lt; issue.getCustomFieldValue(com.atlassian.jira.component.ComponentAccessor.getCustomFieldManager().getCustomFieldObjectByName("TrainingName")).toString() %&gt;" training attendance APPROVED</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SendCustomEmail</arg>
                  <arg name="v+nW√π">false</arg>
                  <arg name="FIELD_CONDITION">import com.atlassian.jira.issue.fields.CustomField
import com.atlassian.jira.component.ComponentAccessor

mail.setFrom("learning&amp;development@faacgroup.com")

cfValues['Email address'] != null &amp;&amp; cfValues['Email address'] != ''|||</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_PREVIEW_ISSUE">LD-85</arg>
                  <arg name="FIELD_EMAIL_FORMAT">3</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="5" name="E√®√ûr√ó¬ù">
      <meta name="jira.status.id">11436</meta>
    </step>
  </steps>
</workflow>