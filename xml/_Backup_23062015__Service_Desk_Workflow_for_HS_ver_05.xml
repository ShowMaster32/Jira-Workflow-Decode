<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE workflow PUBLIC "-//OpenSymphony Group//DTD OSWorkflow 2.8//EN" "http://www.opensymphony.com/osworkflow/workflow_2_8.dtd">
<workflow>
  <meta name="jira.description"></meta>
  <meta name="jira.update.author.key">arianna.fabbri</meta>
  <meta name="jira.updated.date">1435066285769</meta>
  <initial-actions>
    <action id="1" name="Create">
      <validators>
        <validator name="" type="class">
          <arg name="permission">Create Issue</arg>
          <arg name="class.name">com.atlassian.jira.workflow.validator.PermissionValidator</arg>
        </validator>
        <validator name="" type="class">
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.SimpleScriptedValidator</arg>
          <arg name="FIELD_CONDITION">import com.atlassian.crowd.embedded.api.User
import com.atlassian.jira.ComponentManager
import com.atlassian.jira.component.ComponentAccessor
import com.atlassian.jira.issue.label.LabelManager

componentManager = ComponentManager.instance
userUtil = componentManager.getUserUtil()

def	indexManager = componentManager.getIndexManager()

def com.atlassian.crowd.embedded.api.User currentUser = ComponentManager.instance.jiraAuthenticationContext.getLoggedInUser()

(!userUtil.getGroupNamesForUser(currentUser.name).contains(&quot;HS-customers&quot;) &amp;&amp; issue.getProjectObject().key == 'HS' &amp;&amp;  cfValues['Backend Assignee'] != null &amp;&amp; issue.assignee != null) || userUtil.getGroupNamesForUser(currentUser.name).contains(&quot;HS-customers&quot;) || (currentUser.name == 'atlassian' &amp;&amp; issue.getProjectObject().key == 'BEHS')</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
          <arg name="FIELD_ERROR_MSG">Assignee and Backend Assignee must be completed to proceed</arg>
          <arg name="FIELD_FORM_FIELD">assignee</arg>
        </validator>
      </validators>
      <results>
        <unconditional-result old-status="null" status="open" step="1">
          <post-functions>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueCreateFunction</arg>
            </function>
            <function type="class">
              <arg name="FIELD_NOTES">Label issue as HSPortal issue</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="FIELD_INLINE_SCRIPT">import com.atlassian.crowd.embedded.api.User
import com.atlassian.jira.ComponentManager
import com.atlassian.jira.component.ComponentAccessor
import com.atlassian.jira.issue.label.LabelManager

componentManager = ComponentManager.instance
userUtil = componentManager.getUserUtil()

def	indexManager = componentManager.getIndexManager()

def com.atlassian.crowd.embedded.api.User currentUser = ComponentManager.instance.jiraAuthenticationContext.getLoggedInUser()

if (userUtil.getGroupNamesForUser(currentUser.name).contains(&quot;HS-customers&quot;)){
	LabelManager labelManager = ComponentAccessor.getComponent(LabelManager)
	def labels = labelManager.getLabels(issue.id).collect{it.getLabel()}
	labels += 'HSPortal'
	labelManager.setLabels(currentUser,issue.id,labels.toSet(),false,false)

	indexManager.reIndex(issue);
}</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </function>
            <function type="class">
              <arg name="FIELD_FROM">support@hubparking.com</arg>
              <arg name="FIELD_INCLUDE_ATTACHMENTS">FIELD_INCLUDE_ATTACHMENTS_NONE</arg>
              <arg name="FIELD_TO_ADDRESSES">Marcel.Feusi@hubparking.com, Erich.Muehlebach@hubparking.com, Erik.Steiert@hubparking.com, Peter.Keller@hubparking.com</arg>
              <arg name="FIELD_CC_ADDRESSES"></arg>
              <arg name="FIELD_CC_USER_FIELDS"></arg>
              <arg name="FIELD_TO_USER_FIELDS"></arg>
              <arg name="FIELD_INCLUDE_ATTACHMENTS_CALLBACK"></arg>
              <arg name="FIELD_EMAIL_TEMPLATE">&lt;head&gt;
	&lt;style type=&quot;text/css&quot;&gt;
		td, a, h2 {color: #003050}
		.value, .label {color: #003050}
		.request-status {color: #003050}
		.header-request-link {color: #6ba539}
	&lt;/style&gt;
&lt;/head&gt;

&lt;body style=&quot;background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
        &lt;span class=&quot;preheader&quot; style=&quot;display: none !important; font-size:1px; line-height: 1px; color: #cccccc; display: none; font-size: 1px; line-height: 1px&quot;&gt;Status of the request $issue.summary with key $issue has been changed... &lt;/span&gt;&lt;center&gt;
            &lt;table id=&quot;email-wrap&quot; valign=&quot;top&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
                &lt;tbody&gt;
                    &lt;tr&gt;
                        &lt;td align=&quot;center&quot; id=&quot;email-wrap-cell&quot; style=&quot;padding: 20px 10px 10px&quot;&gt;
                            &lt;table id=&quot;email-container&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 600px; line-height: 1,500&quot;&gt;
                                &lt;tbody&gt;
                                    &lt;tr&gt;
                                        &lt;td align=&quot;left&quot;&gt;
                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                &lt;tbody&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-header&quot; style=&quot;padding: 10px 20px; border: solid #ddd; border-width: 1px 2px 1px 1px; border-bottom-color: #f5f5f5; background-color: #fff; font-weight: normal; line-height: 1,200&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 100%&quot;&gt;
                                                                &lt;tbody&gt;
																	&lt;tr&gt;
																		&lt;td class=&quot;viewport-details&quot; style=&quot;width: 100%&quot; align=&quot;right&quot; colspan=&quot;2&quot;&gt;
																			&lt;img src=&quot;/images/loghi/HUB Logo2.jpg&quot;/&gt;
																		&lt;/td&gt;
																	&lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;viewport-details&quot; style=&quot;width: 50%&quot;&gt;
                                                                            &lt;a href=&quot;&lt;% out &lt;&lt; componentManager.getApplicationProperties().getString(&quot;jira.baseurl&quot;) %&gt;/browse/$issue&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none&quot;&gt;&lt;strong style=&quot;font-weight: bold&quot;&gt;HUB Support Portal&lt;/strong&gt; - Support Request&lt;/a&gt;
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;request-key&quot; style=&quot;width: 50%; text-align: right; font-size: 12px; line-height: 18px; text-decoration: none&quot;&gt;
                                                                            &lt;!-- &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none; color: #707070&quot;&gt;Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;[$issue]&lt;/strong&gt;&lt;/a&gt; --&gt;
																			Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;$issue&lt;/strong&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-content-important email-heading&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 10px; border-top-color: #f5f5f5&quot;&gt;
                                                            &lt;h1 style=&quot;margin: 0; line-height: 1,200; font-size: 22px; font-weight: bold; color: #111&quot;&gt;&lt;a href=&quot;&lt;% out &lt;&lt; componentManager.getApplicationProperties().getString(&quot;jira.baseurl&quot;) %&gt;/browse/$issue&quot; class=&quot;header-request-link&quot; style=&quot;text-decoration: none&quot;&gt;$issue.summary&lt;/a&gt; &lt;span class=&quot;request-status aui-lozenge aui-lozenge-current&quot; style=&quot;background-color: #cccccd; border: 1px solid #cccccd; border-radius: 3px; color: #333; display: inline-block; font-size: 11px; font-weight: bold; line-height: 1; padding: 2px 5px 1px 5px; text-align: center; text-decoration: none; text-transform: uppercase; background-color: #4A6785; border-color: #4A6785; color: #ffffff; margin-left: 5px; font-weight: bold; font-size: 14px&quot;&gt;$issue.status.name&lt;/span&gt;&lt;/h1&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-actions email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding: 20px; padding-top: 0; padding-bottom: 20px; border-top-width: 0; border-bottom-width: 2px&quot;&gt;
                                                            You can &lt;a href=&quot;&lt;% out &lt;&lt; componentManager.getApplicationProperties().getString(&quot;jira.baseurl&quot;) %&gt;/browse/$issue&quot;&gt;view the full request&lt;/a&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													&lt;tr&gt;
                                                        &lt;td class=&quot;email-details&quot; style=&quot;padding: 20px&quot;&gt;
                                                            &lt;h2 style=&quot;margin: 0 0 10px; line-height: 1,200; font-size: 16px; font-weight: bold&quot;&gt;Details&lt;/h2&gt;
                                                            &lt;table class=&quot;email-request-details&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
																	&lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0; width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Reporter
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.reporter.displayName %&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Brand
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12900&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Environment
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12901&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product Family
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12902&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12903&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Affected Version / Peripheral Serial Number
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12904&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Description
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;p&gt;$issue.description&lt;/p&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr class=&quot;last&quot;&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            What Is your installation number?
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_11002&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                &lt;/tbody&gt;
                                            &lt;/table&gt;
                                        &lt;/td&gt;
                                    &lt;/tr&gt;
                                &lt;/tbody&gt;
                            &lt;/table&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td id=&quot;foot-note&quot; style=&quot;padding-bottom: 20px;  font-size: 12px; line-height: 1,200&quot;&gt;
                            &lt;p style=&quot;width: 600px; text-align: center; margin: 0 auto&quot;&gt;This message is automatically generated by HUB Support Portal.&lt;br /&gt;&lt;/p&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
        &lt;/center&gt;
    &lt;/body&gt;</arg>
              <arg name="FIELD_EMAIL_SUBJECT_TEMPLATE">[HUB Support Portal][&lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObjectByName(&quot;HUB Brand&quot;)) %&gt;] $issue.summary [$issue]</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SendCustomEmail</arg>
              <arg name="FIELD_CONDITION">//ORION/ORION XR Agents notification
issue.projectObject.name == 'HUB Support' &amp;&amp; (cfValues['HUB Brand'] == 'ORION' || cfValues['HUB Brand'] == 'ORION XR')</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_PREVIEW_ISSUE">HS-396</arg>
              <arg name="FIELD_EMAIL_FORMAT">HTML</arg>
            </function>
            <function type="class">
              <arg name="FIELD_FROM">support@hubparking.com</arg>
              <arg name="FIELD_INCLUDE_ATTACHMENTS">FIELD_INCLUDE_ATTACHMENTS_NONE</arg>
              <arg name="FIELD_TO_ADDRESSES">alessandro.guidetti@hubparking.com</arg>
              <arg name="FIELD_CC_ADDRESSES"></arg>
              <arg name="FIELD_CC_USER_FIELDS"></arg>
              <arg name="FIELD_TO_USER_FIELDS"></arg>
              <arg name="FIELD_INCLUDE_ATTACHMENTS_CALLBACK"></arg>
              <arg name="FIELD_EMAIL_TEMPLATE">&lt;head&gt;
	&lt;style type=&quot;text/css&quot;&gt;
		td, a, h2 {color: #003050}
		.value, .label {color: #003050}
		.request-status {color: #003050}
		.header-request-link {color: #6ba539}
	&lt;/style&gt;
&lt;/head&gt;

&lt;body style=&quot;background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
        &lt;span class=&quot;preheader&quot; style=&quot;display: none !important; font-size:1px; line-height: 1px; color: #cccccc; display: none; font-size: 1px; line-height: 1px&quot;&gt;Status of the request $issue.summary with key $issue has been changed... &lt;/span&gt;&lt;center&gt;
            &lt;table id=&quot;email-wrap&quot; valign=&quot;top&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
                &lt;tbody&gt;
                    &lt;tr&gt;
                        &lt;td align=&quot;center&quot; id=&quot;email-wrap-cell&quot; style=&quot;padding: 20px 10px 10px&quot;&gt;
                            &lt;table id=&quot;email-container&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 600px; line-height: 1,500&quot;&gt;
                                &lt;tbody&gt;
                                    &lt;tr&gt;
                                        &lt;td align=&quot;left&quot;&gt;
                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                &lt;tbody&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-header&quot; style=&quot;padding: 10px 20px; border: solid #ddd; border-width: 1px 2px 1px 1px; border-bottom-color: #f5f5f5; background-color: #fff; font-weight: normal; line-height: 1,200&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 100%&quot;&gt;
                                                                &lt;tbody&gt;
																	&lt;tr&gt;
																		&lt;td class=&quot;viewport-details&quot; style=&quot;width: 100%&quot; align=&quot;right&quot; colspan=&quot;2&quot;&gt;
																			&lt;img src=&quot;/images/loghi/HUB Logo2.jpg&quot;/&gt;
																		&lt;/td&gt;
																	&lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;viewport-details&quot; style=&quot;width: 50%&quot;&gt;
                                                                            &lt;a href=&quot;&lt;% out &lt;&lt; componentManager.getApplicationProperties().getString(&quot;jira.baseurl&quot;) %&gt;/browse/$issue&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none&quot;&gt;&lt;strong style=&quot;font-weight: bold&quot;&gt;HUB Support Portal&lt;/strong&gt; - Support Request&lt;/a&gt;
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;request-key&quot; style=&quot;width: 50%; text-align: right; font-size: 12px; line-height: 18px; text-decoration: none&quot;&gt;
                                                                            &lt;!-- &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none; color: #707070&quot;&gt;Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;[$issue]&lt;/strong&gt;&lt;/a&gt; --&gt;
																			Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;$issue&lt;/strong&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-content-important email-heading&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 10px; border-top-color: #f5f5f5&quot;&gt;
                                                            &lt;h1 style=&quot;margin: 0; line-height: 1,200; font-size: 22px; font-weight: bold; color: #111&quot;&gt;&lt;a href=&quot;&lt;% out &lt;&lt; componentManager.getApplicationProperties().getString(&quot;jira.baseurl&quot;) %&gt;/browse/$issue&quot; class=&quot;header-request-link&quot; style=&quot;text-decoration: none&quot;&gt;$issue.summary&lt;/a&gt; &lt;span class=&quot;request-status aui-lozenge aui-lozenge-current&quot; style=&quot;background-color: #cccccd; border: 1px solid #cccccd; border-radius: 3px; color: #333; display: inline-block; font-size: 11px; font-weight: bold; line-height: 1; padding: 2px 5px 1px 5px; text-align: center; text-decoration: none; text-transform: uppercase; background-color: #4A6785; border-color: #4A6785; color: #ffffff; margin-left: 5px; font-weight: bold; font-size: 14px&quot;&gt;$issue.status.name&lt;/span&gt;&lt;/h1&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-actions email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding: 20px; padding-top: 0; padding-bottom: 20px; border-top-width: 0; border-bottom-width: 2px&quot;&gt;
                                                            You can &lt;a href=&quot;&lt;% out &lt;&lt; componentManager.getApplicationProperties().getString(&quot;jira.baseurl&quot;) %&gt;/browse/$issue&quot;&gt;view the full request&lt;/a&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													&lt;tr&gt;
                                                        &lt;td class=&quot;email-details&quot; style=&quot;padding: 20px&quot;&gt;
                                                            &lt;h2 style=&quot;margin: 0 0 10px; line-height: 1,200; font-size: 16px; font-weight: bold&quot;&gt;Details&lt;/h2&gt;
                                                            &lt;table class=&quot;email-request-details&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
																	&lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0; width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Reporter
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.reporter.displayName %&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Brand
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12900&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Environment
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12901&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product Family
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12902&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12903&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Affected Version / Peripheral Serial Number
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12904&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Description
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;p&gt;$issue.description&lt;/p&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr class=&quot;last&quot;&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            What Is your installation number?
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_11002&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                &lt;/tbody&gt;
                                            &lt;/table&gt;
                                        &lt;/td&gt;
                                    &lt;/tr&gt;
                                &lt;/tbody&gt;
                            &lt;/table&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td id=&quot;foot-note&quot; style=&quot;padding-bottom: 20px;  font-size: 12px; line-height: 1,200&quot;&gt;
                            &lt;p style=&quot;width: 600px; text-align: center; margin: 0 auto&quot;&gt;This message is automatically generated by HUB Support Portal.&lt;br /&gt;&lt;/p&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
        &lt;/center&gt;
    &lt;/body&gt;</arg>
              <arg name="FIELD_EMAIL_SUBJECT_TEMPLATE">[HUB Support Portal][&lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObjectByName(&quot;HUB Brand&quot;)) %&gt;] $issue.summary [$issue]</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SendCustomEmail</arg>
              <arg name="FIELD_CONDITION">//FAAC Agents notification
issue.projectObject.name == 'HUB Support' &amp;&amp; (cfValues['HUB Brand'] == 'PARAGON' || cfValues['HUB Brand'] == 'PARKPLUS' || cfValues['HUB Brand'] == 'PARQUBE' || cfValues['HUB Brand'] == 'ZEAG')
</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_PREVIEW_ISSUE">HS-396</arg>
              <arg name="FIELD_EMAIL_FORMAT">HTML</arg>
            </function>
            <function type="class">
              <arg name="FIELD_FROM">support@hubparking.com</arg>
              <arg name="FIELD_INCLUDE_ATTACHMENTS">FIELD_INCLUDE_ATTACHMENTS_NONE</arg>
              <arg name="FIELD_TO_ADDRESSES">lilia.slavova@hubparking.com, teodora.ivanova@hubparking.com</arg>
              <arg name="FIELD_CC_ADDRESSES"></arg>
              <arg name="FIELD_CC_USER_FIELDS"></arg>
              <arg name="FIELD_TO_USER_FIELDS"></arg>
              <arg name="FIELD_INCLUDE_ATTACHMENTS_CALLBACK"></arg>
              <arg name="FIELD_EMAIL_TEMPLATE">&lt;head&gt;
	&lt;style type=&quot;text/css&quot;&gt;
		td, a, h2 {color: #003050}
		.value, .label {color: #003050}
		.request-status {color: #003050}
		.header-request-link {color: #6ba539}
	&lt;/style&gt;
&lt;/head&gt;

&lt;body style=&quot;background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
        &lt;span class=&quot;preheader&quot; style=&quot;display: none !important; font-size:1px; line-height: 1px; color: #cccccc; display: none; font-size: 1px; line-height: 1px&quot;&gt;Status of the request $issue.summary with key $issue has been changed... &lt;/span&gt;&lt;center&gt;
            &lt;table id=&quot;email-wrap&quot; valign=&quot;top&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
                &lt;tbody&gt;
                    &lt;tr&gt;
                        &lt;td align=&quot;center&quot; id=&quot;email-wrap-cell&quot; style=&quot;padding: 20px 10px 10px&quot;&gt;
                            &lt;table id=&quot;email-container&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 600px; line-height: 1,500&quot;&gt;
                                &lt;tbody&gt;
                                    &lt;tr&gt;
                                        &lt;td align=&quot;left&quot;&gt;
                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                &lt;tbody&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-header&quot; style=&quot;padding: 10px 20px; border: solid #ddd; border-width: 1px 2px 1px 1px; border-bottom-color: #f5f5f5; background-color: #fff; font-weight: normal; line-height: 1,200&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 100%&quot;&gt;
                                                                &lt;tbody&gt;
																	&lt;tr&gt;
																		&lt;td class=&quot;viewport-details&quot; style=&quot;width: 100%&quot; align=&quot;right&quot; colspan=&quot;2&quot;&gt;
																			&lt;img src=&quot;/images/loghi/HUB Logo2.jpg&quot;/&gt;
																		&lt;/td&gt;
																	&lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;viewport-details&quot; style=&quot;width: 50%&quot;&gt;
                                                                            &lt;a href=&quot;&lt;% out &lt;&lt; componentManager.getApplicationProperties().getString(&quot;jira.baseurl&quot;) %&gt;/browse/$issue&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none&quot;&gt;&lt;strong style=&quot;font-weight: bold&quot;&gt;HUB Support Portal&lt;/strong&gt; - Support Request&lt;/a&gt;
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;request-key&quot; style=&quot;width: 50%; text-align: right; font-size: 12px; line-height: 18px; text-decoration: none&quot;&gt;
                                                                            &lt;!-- &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none; color: #707070&quot;&gt;Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;[$issue]&lt;/strong&gt;&lt;/a&gt; --&gt;
																			Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;$issue&lt;/strong&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-content-important email-heading&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 10px; border-top-color: #f5f5f5&quot;&gt;
                                                            &lt;h1 style=&quot;margin: 0; line-height: 1,200; font-size: 22px; font-weight: bold; color: #111&quot;&gt;&lt;a href=&quot;&lt;% out &lt;&lt; componentManager.getApplicationProperties().getString(&quot;jira.baseurl&quot;) %&gt;/browse/$issue&quot; class=&quot;header-request-link&quot; style=&quot;text-decoration: none&quot;&gt;$issue.summary&lt;/a&gt; &lt;span class=&quot;request-status aui-lozenge aui-lozenge-current&quot; style=&quot;background-color: #cccccd; border: 1px solid #cccccd; border-radius: 3px; color: #333; display: inline-block; font-size: 11px; font-weight: bold; line-height: 1; padding: 2px 5px 1px 5px; text-align: center; text-decoration: none; text-transform: uppercase; background-color: #4A6785; border-color: #4A6785; color: #ffffff; margin-left: 5px; font-weight: bold; font-size: 14px&quot;&gt;$issue.status.name&lt;/span&gt;&lt;/h1&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-actions email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding: 20px; padding-top: 0; padding-bottom: 20px; border-top-width: 0; border-bottom-width: 2px&quot;&gt;
                                                            You can &lt;a href=&quot;&lt;% out &lt;&lt; componentManager.getApplicationProperties().getString(&quot;jira.baseurl&quot;) %&gt;/browse/$issue&quot;&gt;view the full request&lt;/a&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													&lt;tr&gt;
                                                        &lt;td class=&quot;email-details&quot; style=&quot;padding: 20px&quot;&gt;
                                                            &lt;h2 style=&quot;margin: 0 0 10px; line-height: 1,200; font-size: 16px; font-weight: bold&quot;&gt;Details&lt;/h2&gt;
                                                            &lt;table class=&quot;email-request-details&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
																	&lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0; width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Reporter
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.reporter.displayName %&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Brand
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12900&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Environment
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12901&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product Family
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12902&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12903&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Affected Version / Peripheral Serial Number
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12904&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Description
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;p&gt;$issue.description&lt;/p&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr class=&quot;last&quot;&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            What Is your installation number?
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_11002&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                &lt;/tbody&gt;
                                            &lt;/table&gt;
                                        &lt;/td&gt;
                                    &lt;/tr&gt;
                                &lt;/tbody&gt;
                            &lt;/table&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td id=&quot;foot-note&quot; style=&quot;padding-bottom: 20px;  font-size: 12px; line-height: 1,200&quot;&gt;
                            &lt;p style=&quot;width: 600px; text-align: center; margin: 0 auto&quot;&gt;This message is automatically generated by HUB Support Portal.&lt;br /&gt;&lt;/p&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
        &lt;/center&gt;
    &lt;/body&gt;</arg>
              <arg name="FIELD_EMAIL_SUBJECT_TEMPLATE">[HUB Support Portal][&lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObjectByName(&quot;HUB Brand&quot;)) %&gt;] $issue.summary [$issue]</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SendCustomEmail</arg>
              <arg name="FIELD_CONDITION">//DATAPARK Agent notification
issue.projectObject.name == 'HUB Support' &amp;&amp; cfValues['HUB Brand'] == 'DATAPARK'</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_PREVIEW_ISSUE">HS-396</arg>
              <arg name="FIELD_EMAIL_FORMAT">HTML</arg>
            </function>
            <function type="class">
              <arg name="FIELD_FROM">support@hubparking.com</arg>
              <arg name="FIELD_INCLUDE_ATTACHMENTS">FIELD_INCLUDE_ATTACHMENTS_NONE</arg>
              <arg name="FIELD_TO_ADDRESSES"></arg>
              <arg name="FIELD_CC_ADDRESSES"></arg>
              <arg name="FIELD_CC_USER_FIELDS"></arg>
              <arg name="FIELD_TO_USER_FIELDS">reporter</arg>
              <arg name="FIELD_INCLUDE_ATTACHMENTS_CALLBACK"></arg>
              <arg name="FIELD_EMAIL_TEMPLATE">&lt;head&gt;
	&lt;style type=&quot;text/css&quot;&gt;
		td, a, h2 {color: #003050}
		.value, .label {color: #003050}
		.request-status {color: #003050}
		.header-request-link {color: #6ba539}
	&lt;/style&gt;
&lt;/head&gt;

&lt;body style=&quot;background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
        &lt;span class=&quot;preheader&quot; style=&quot;display: none !important; font-size:1px; line-height: 1px; color: #cccccc; display: none; font-size: 1px; line-height: 1px&quot;&gt;Status of the request $issue.summary with key $issue has been changed... &lt;/span&gt;&lt;center&gt;
            &lt;table id=&quot;email-wrap&quot; valign=&quot;top&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
                &lt;tbody&gt;
                    &lt;tr&gt;
                        &lt;td align=&quot;center&quot; id=&quot;email-wrap-cell&quot; style=&quot;padding: 20px 10px 10px&quot;&gt;
                            &lt;table id=&quot;email-container&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 600px; line-height: 1,500&quot;&gt;
                                &lt;tbody&gt;
                                    &lt;tr&gt;
                                        &lt;td align=&quot;left&quot;&gt;
                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                &lt;tbody&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-header&quot; style=&quot;padding: 10px 20px; border: solid #ddd; border-width: 1px 2px 1px 1px; border-bottom-color: #f5f5f5; background-color: #fff; font-weight: normal; line-height: 1,200&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 100%&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
																		&lt;td class=&quot;viewport-details&quot; style=&quot;width: 100%&quot; align=&quot;right&quot; colspan=&quot;2&quot;&gt;
																			&lt;img src=&quot;/images/loghi/HUB Logo2.jpg&quot;/&gt;
																		&lt;/td&gt;
																	&lt;/tr&gt;
																	&lt;tr&gt;
                                                                        &lt;td class=&quot;viewport-details&quot; style=&quot;width: 50%&quot;&gt;
																			&lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none&quot;&gt;&lt;strong style=&quot;font-weight: bold&quot;&gt;HUB Support Portal&lt;/strong&gt; - Support Request&lt;/a&gt;
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;request-key&quot; style=&quot;width: 50%; text-align: right; font-size: 12px; line-height: 18px; text-decoration: none&quot;&gt;
                                                                            &lt;!-- &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none; color: #707070&quot;&gt;Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;[$issue]&lt;/strong&gt;&lt;/a&gt; --&gt;
																			Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;$issue&lt;/strong&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-content-important email-heading&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 10px; border-top-color: #f5f5f5&quot;&gt;
															&lt;h1 style=&quot;margin: 0; line-height: 1,200; font-size: 22px; font-weight: bold&quot;&gt;&lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot; class=&quot;header-request-link&quot; style=&quot;text-decoration: none&quot;&gt;$issue.summary&lt;/a&gt; &lt;span class=&quot;request-status aui-lozenge aui-lozenge-current&quot; style=&quot;background-color: #cccccd; border: 1px solid #cccccd; border-radius: 3px; color: #333; display: inline-block; font-size: 11px; font-weight: bold; line-height: 1; padding: 2px 5px 1px 5px; text-align: center; text-decoration: none; text-transform: uppercase; background-color: #4A6785; border-color: #4A6785; color: #ffffff; margin-left: 5px; font-weight: bold; font-size: 14px&quot;&gt;$issue.status.name&lt;/span&gt;&lt;/h1&gt;
														&lt;/td&gt;
                                                    &lt;/tr&gt;
													
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-actions email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding: 20px; padding-top: 0; padding-bottom: 20px; border-top-width: 0; border-bottom-width: 2px&quot;&gt;
															You can &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot;&gt;view the full request&lt;/a&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													
													&lt;tr&gt;
                                                        &lt;td class=&quot;email-details&quot; style=&quot;padding: 20px&quot;&gt;
                                                            &lt;h2 style=&quot;margin: 0 0 10px; line-height: 1,200; font-size: 16px; font-weight: bold&quot;&gt;Details&lt;/h2&gt;
                                                            &lt;table class=&quot;email-request-details&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Brand
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12900&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Environment
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12901&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product Family
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12902&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12903&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Affected Version / Peripheral Serial Number
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12904&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Description
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;p&gt;$issue.description&lt;/p&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr class=&quot;last&quot;&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            What Is your installation number?
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_11002&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                &lt;/tbody&gt;
                                            &lt;/table&gt;
                                        &lt;/td&gt;
                                    &lt;/tr&gt;
                                &lt;/tbody&gt;
                            &lt;/table&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td id=&quot;foot-note&quot; style=&quot;padding-bottom: 20px;  font-size: 12px; line-height: 1,200&quot;&gt;
                            &lt;p style=&quot;width: 600px; text-align: center; margin: 0 auto&quot;&gt;This message is automatically generated by HUB Support Portal.&lt;br /&gt;&lt;/p&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
        &lt;/center&gt;
    &lt;/body&gt;</arg>
              <arg name="FIELD_EMAIL_SUBJECT_TEMPLATE">[HUB Support Portal] $issue.summary [$issue]</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SendCustomEmail</arg>
              <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()
issue.projectObject.name == 'HUB Support' &amp;&amp; groupManager.isUserInGroup(issue.reporter?.name, 'HS-customers')
</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_PREVIEW_ISSUE">HS-396</arg>
              <arg name="FIELD_EMAIL_FORMAT">HTML</arg>
            </function>
            <function type="class">
              <arg name="FIELD_FROM">support@hubparking.com</arg>
              <arg name="FIELD_INCLUDE_ATTACHMENTS">FIELD_INCLUDE_ATTACHMENTS_NONE</arg>
              <arg name="FIELD_TO_ADDRESSES"></arg>
              <arg name="FIELD_CC_ADDRESSES"></arg>
              <arg name="FIELD_CC_USER_FIELDS"></arg>
              <arg name="FIELD_TO_USER_FIELDS">reporter</arg>
              <arg name="FIELD_INCLUDE_ATTACHMENTS_CALLBACK"></arg>
              <arg name="FIELD_EMAIL_TEMPLATE">&lt;head&gt;
	&lt;style type=&quot;text/css&quot;&gt;
		td, a, h2 {color: #003050}
		.value, .label {color: #003050}
		.request-status {color: #003050}
		.header-request-link {color: #6ba539}
	&lt;/style&gt;
&lt;/head&gt;

&lt;body style=&quot;background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
        &lt;span class=&quot;preheader&quot; style=&quot;display: none !important; font-size:1px; line-height: 1px; color: #cccccc;; display: none; font-size: 1px; line-height: 1px&quot;&gt;Status of the request $issue.summary with key $issue has been changed... &lt;/span&gt;&lt;center&gt;
            &lt;table id=&quot;email-wrap&quot; valign=&quot;top&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
                &lt;tbody&gt;
                    &lt;tr&gt;
                        &lt;td align=&quot;center&quot; id=&quot;email-wrap-cell&quot; style=&quot;padding: 20px 10px 10px&quot;&gt;
                            &lt;table id=&quot;email-container&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 600px; line-height: 1,500&quot;&gt;
                                &lt;tbody&gt;
                                    &lt;tr&gt;
                                        &lt;td align=&quot;left&quot;&gt;
                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                &lt;tbody&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-header&quot; style=&quot;padding: 10px 20px; border: solid #ddd; border-width: 1px 2px 1px 1px; border-bottom-color: #f5f5f5; background-color: #fff; font-weight: normal; line-height: 1,200&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 100%&quot;&gt;
                                                                &lt;tbody&gt;
																	&lt;tr&gt;
																		&lt;td class=&quot;viewport-details&quot; style=&quot;width: 100%&quot; align=&quot;right&quot; colspan=&quot;2&quot;&gt;
																			&lt;img src=&quot;/images/loghi/HUB Logo2.jpg&quot;/&gt;
																		&lt;/td&gt;
																	&lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;viewport-details&quot; style=&quot;width: 50%&quot;&gt;
                                                                            &lt;a href=&quot;&lt;% out &lt;&lt; componentManager.getApplicationProperties().getString(&quot;jira.baseurl&quot;) %&gt;/browse/$issue&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none&quot;&gt;&lt;strong style=&quot;font-weight: bold&quot;&gt;HUB Support Portal&lt;/strong&gt; - Support Request&lt;/a&gt;
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;request-key&quot; style=&quot;width: 50%; text-align: right; font-size: 12px; line-height: 18px; text-decoration: none&quot;&gt;
                                                                            &lt;!-- &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none; color: #707070&quot;&gt;Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;[$issue]&lt;/strong&gt;&lt;/a&gt; --&gt;
																			Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;$issue&lt;/strong&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-content-important email-heading&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 10px; border-top-color: #f5f5f5&quot;&gt;
                                                            &lt;h1 style=&quot;margin: 0; line-height: 1,200; font-size: 22px; font-weight: bold&quot;&gt;&lt;a href=&quot;&lt;% out &lt;&lt; componentManager.getApplicationProperties().getString(&quot;jira.baseurl&quot;) %&gt;/browse/$issue&quot; class=&quot;header-request-link&quot; style=&quot;text-decoration: none&quot;&gt;$issue.summary&lt;/a&gt; &lt;span class=&quot;request-status aui-lozenge aui-lozenge-current&quot; style=&quot;background-color: #cccccd; border: 1px solid #cccccd; border-radius: 3px; color: #333; display: inline-block; font-size: 11px; font-weight: bold; line-height: 1; padding: 2px 5px 1px 5px; text-align: center; text-decoration: none; text-transform: uppercase; background-color: #4A6785; border-color: #4A6785; color: #ffffff; margin-left: 5px; font-weight: bold; font-size: 14px&quot;&gt;$issue.status.name&lt;/span&gt;&lt;/h1&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-actions email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding: 20px; padding-top: 0; padding-bottom: 20px; border-top-width: 0; border-bottom-width: 2px&quot;&gt;
                                                            You can &lt;a href=&quot;&lt;% out &lt;&lt; componentManager.getApplicationProperties().getString(&quot;jira.baseurl&quot;) %&gt;/browse/$issue&quot;&gt;view the full request&lt;/a&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													
													&lt;tr&gt;
                                                        &lt;td class=&quot;email-details&quot; style=&quot;padding: 20px&quot;&gt;
                                                            &lt;h2 style=&quot;color: #111; margin: 0 0 10px; line-height: 1,200; font-size: 16px; font-weight: bold&quot;&gt;Details&lt;/h2&gt;
                                                            &lt;table class=&quot;email-request-details&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Brand
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12900&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Environment
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12901&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product Family
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12902&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12903&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Affected Version / Peripheral Serial Number
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12904&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Description
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;p&gt;$issue.description&lt;/p&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr class=&quot;last&quot;&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            What Is your installation number?
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_11002&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                &lt;/tbody&gt;
                                            &lt;/table&gt;
                                        &lt;/td&gt;
                                    &lt;/tr&gt;
                                &lt;/tbody&gt;
                            &lt;/table&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td id=&quot;foot-note&quot; style=&quot;padding-bottom: 20px;  font-size: 12px; line-height: 1,200&quot;&gt;
                            &lt;p style=&quot;width: 600px; text-align: center; margin: 0 auto&quot;&gt;This message is automatically generated by HUB Support Portal.&lt;br /&gt;&lt;/p&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
        &lt;/center&gt;
    &lt;/body&gt;</arg>
              <arg name="FIELD_EMAIL_SUBJECT_TEMPLATE">[HS] $issue.summary [$issue]</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SendCustomEmail</arg>
              <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()
issue.projectObject.name == 'HUB Support' &amp;&amp; !groupManager.isUserInGroup(issue.reporter?.name, 'HS-customers')</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_PREVIEW_ISSUE">HS-396</arg>
              <arg name="FIELD_EMAIL_FORMAT">HTML</arg>
            </function>
            <function type="class">
              <arg name="FIELD_NOTES"></arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="FIELD_INLINE_SCRIPT"></arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_SCRIPT_FILE">customScripts\SD_UpdateRequestType.groovy</arg>
            </function>
            <function type="class">
              <arg name="FIELD_ACTION">11 AssignToTechnician</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.FasttrackTransition</arg>
              <arg name="FIELD_CONDITION">import com.atlassian.crowd.embedded.api.User
import com.atlassian.jira.user.util.UserManager
import com.atlassian.jira.util.ImportUtils
import com.atlassian.jira.ComponentManager

ComponentManager 	componentManager = 	ComponentManager.getInstance()
com.atlassian.crowd.embedded.api.User currentUser = ComponentManager.instance.jiraAuthenticationContext.getLoggedInUser()
def userUtil = componentManager.getUserUtil()

!userUtil.getGroupNamesForUser(currentUser.name).contains(&quot;HS-customers&quot;) &amp;&amp; !issue.getProjectObject().name.contains(&quot;Backend &quot;)</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_ADDITIONAL_SCRIPT"></arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">1</arg>
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
  </initial-actions>
  <common-actions>
    <action id="81" name="ReOpen">
      <meta name="jira.description">This issue needs to go back to the technical assistance</meta>
      <restrict-to>
        <conditions>
          <condition type="class">
            <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
            <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()

(currentUser.name == 'atlassian' &amp;&amp; issue.getProjectObject().key == 'BEHS') || issue.getProjectObject().key == 'HS'</arg>
            <arg name="FIELD_PREVIEW_ISSUE"></arg>
            <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
          </condition>
        </conditions>
      </restrict-to>
      <results>
        <unconditional-result old-status="null" status="null" step="1">
          <post-functions>
            <function type="class">
              <arg name="field.name">resolution</arg>
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
              <arg name="field.value"></arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="FIELD_FROM">support@hubparking.com</arg>
              <arg name="FIELD_INCLUDE_ATTACHMENTS">FIELD_INCLUDE_ATTACHMENTS_NONE</arg>
              <arg name="FIELD_TO_ADDRESSES"></arg>
              <arg name="FIELD_CC_ADDRESSES"></arg>
              <arg name="FIELD_CC_USER_FIELDS"></arg>
              <arg name="FIELD_TO_USER_FIELDS">reporter</arg>
              <arg name="FIELD_INCLUDE_ATTACHMENTS_CALLBACK"></arg>
              <arg name="FIELD_EMAIL_TEMPLATE">&lt;head&gt;
	&lt;style type=&quot;text/css&quot;&gt;
		td, a, h2 {color: #003050}
		.value, .label {color: #003050}
		.request-status {color: #003050}
		.header-request-link {color: #6ba539}
	&lt;/style&gt;
&lt;/head&gt;

&lt;body style=&quot;background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
        &lt;span class=&quot;preheader&quot; style=&quot;display: none !important; font-size:1px; line-height: 1px; display: none; font-size: 1px; line-height: 1px&quot;&gt;Status of the request $issue.summary with key $issue has been changed... &lt;/span&gt;&lt;center&gt;
            &lt;table id=&quot;email-wrap&quot; valign=&quot;top&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
                &lt;tbody&gt;
                    &lt;tr&gt;
                        &lt;td align=&quot;center&quot; id=&quot;email-wrap-cell&quot; style=&quot;padding: 20px 10px 10px&quot;&gt;
                            &lt;table id=&quot;email-container&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 600px; line-height: 1,500&quot;&gt;
                                &lt;tbody&gt;
                                    &lt;tr&gt;
                                        &lt;td align=&quot;left&quot;&gt;
                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                &lt;tbody&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-header&quot; style=&quot;padding: 10px 20px; border: solid #ddd; border-width: 1px 2px 1px 1px; border-bottom-color: #f5f5f5; background-color: #fff; font-weight: normal; line-height: 1,200&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 100%&quot;&gt;
                                                                &lt;tbody&gt;
																	&lt;tr&gt;
																		&lt;td class=&quot;viewport-details&quot; style=&quot;width: 100%&quot; align=&quot;right&quot; colspan=&quot;2&quot;&gt;
																			&lt;img src=&quot;/images/loghi/HUB Logo2.jpg&quot;/&gt;
																		&lt;/td&gt;
																	&lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;viewport-details&quot; style=&quot;width: 50%&quot;&gt;
                                                                            &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none; &quot;&gt;&lt;strong style=&quot;font-weight: bold&quot;&gt;HUB Support Portal&lt;/strong&gt; - Support Request&lt;/a&gt;
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;request-key&quot; style=&quot;width: 50%; text-align: right; font-size: 12px; line-height: 18px; text-decoration: none&quot;&gt;
                                                                            &lt;!-- &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none; color: #707070&quot;&gt;Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;[$issue]&lt;/strong&gt;&lt;/a&gt; --&gt;
																			Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;$issue&lt;/strong&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-content-important email-heading&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 10px; border-top-color: #f5f5f5&quot;&gt;
                                                            &lt;h1 style=&quot;margin: 0; line-height: 1,200; font-size: 22px; font-weight: bold;&quot;&gt;&lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot; class=&quot;header-request-link&quot; style=&quot;text-decoration: none&quot;&gt;$issue.summary&lt;/a&gt; &lt;span class=&quot;request-status aui-lozenge aui-lozenge-current&quot; style=&quot;background-color: #cccccd; border: 1px solid #cccccd; border-radius: 3px; color: #333; display: inline-block; font-size: 11px; font-weight: bold; line-height: 1; padding: 2px 5px 1px 5px; text-align: center; text-decoration: none; text-transform: uppercase; background-color: #4A6785; border-color: #4A6785; color: #ffffff; margin-left: 5px; font-weight: bold; font-size: 14px&quot;&gt;$issue.status.name&lt;/span&gt;&lt;/h1&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													&lt;tr&gt;
                                                        &lt;td class=&quot;latest-activity-container email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 0; border-top-width: 0&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;latest-activity activity-item status-update &quot; style=&quot;padding: 20px 10px; border-top: solid 1px #ccc; display: block; margin: 0; padding: 10px; border: solid 1px; border-radius: 3px; border-color: #4A6785; background-color: #fffdf6&quot;&gt;
                                                                            &lt;div class=&quot;content&quot; style=&quot;float: left; line-height: 1,600; clear: both&quot;&gt;
                                                                                Status changed to &lt;strong style=&quot;font-weight: bold&quot;&gt;$issue.status.name&lt;/strong&gt;
                                                                            &lt;/div&gt;
																			
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-actions email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding: 20px; padding-top: 0; padding-bottom: 20px; border-top-width: 0; border-bottom-width: 2px&quot;&gt;
                                                            You can &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot;&gt;view the full request&lt;/a&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													
													&lt;tr&gt;
                                                        &lt;td class=&quot;email-details&quot; style=&quot;padding: 20px&quot;&gt;
                                                            &lt;h2 style=&quot;margin: 0 0 10px; line-height: 1,200; font-size: 16px; font-weight: bold&quot;&gt;Details&lt;/h2&gt;
                                                            &lt;table class=&quot;email-request-details&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Brand
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12900&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Environment
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12901&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product Family
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12902&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12903&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Affected Version / Peripheral Serial Number
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12904&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Description
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;p&gt;$issue.description&lt;/p&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr class=&quot;last&quot;&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            What Is your installation number?
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_11002&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                &lt;/tbody&gt;
                                            &lt;/table&gt;
                                        &lt;/td&gt;
                                    &lt;/tr&gt;
                                &lt;/tbody&gt;
                            &lt;/table&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td id=&quot;foot-note&quot; style=&quot;padding-bottom: 20px;  font-size: 12px; line-height: 1,200&quot;&gt;
                            &lt;p style=&quot;width: 600px; text-align: center; margin: 0 auto&quot;&gt;This message is automatically generated by HUB Support Portal.&lt;br /&gt;&lt;/p&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
        &lt;/center&gt;
    &lt;/body&gt;</arg>
              <arg name="FIELD_EMAIL_SUBJECT_TEMPLATE">[HUB Support Portal] $issue.summary [$issue]</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SendCustomEmail</arg>
              <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()
issue.projectObject.name == 'HUB Support' &amp;&amp; groupManager.isUserInGroup(issue.reporter?.name, 'HS-customers')</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_PREVIEW_ISSUE">HS-396</arg>
              <arg name="FIELD_EMAIL_FORMAT">HTML</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="FIELD_NOTES"></arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="FIELD_INLINE_SCRIPT"></arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_SCRIPT_FILE">customScripts\SD_TransitionPostFunction.groovy</arg>
            </function>
            <function type="class">
              <arg name="FIELD_NOTES"></arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="FIELD_INLINE_SCRIPT"></arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_SCRIPT_FILE">customScripts\SD_UpdateComments.groovy</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">7</arg>
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
    <action id="21" name="Resolve" view="Resolve Issue Screen - 2">
      <meta name="jira.description">This transition state the issue is moving to a field test to verify it's resolution</meta>
      <meta name="jira.fieldscreen.id">10600</meta>
      <restrict-to>
        <conditions>
          <condition type="class">
            <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
            <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()

currentUser.name == 'atlassian' || (groupManager.isUserInGroup(currentUser.name, 'service-desk-agents') &amp;&amp; issue.getProjectObject().key == 'HS')</arg>
            <arg name="FIELD_PREVIEW_ISSUE"></arg>
            <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
          </condition>
        </conditions>
      </restrict-to>
      <results>
        <unconditional-result old-status="null" status="null" step="6">
          <post-functions>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="FIELD_FROM">support@hubparking.com</arg>
              <arg name="FIELD_INCLUDE_ATTACHMENTS">FIELD_INCLUDE_ATTACHMENTS_NONE</arg>
              <arg name="FIELD_TO_ADDRESSES"></arg>
              <arg name="FIELD_CC_ADDRESSES"></arg>
              <arg name="FIELD_CC_USER_FIELDS"></arg>
              <arg name="FIELD_TO_USER_FIELDS">reporter</arg>
              <arg name="FIELD_INCLUDE_ATTACHMENTS_CALLBACK"></arg>
              <arg name="FIELD_EMAIL_TEMPLATE">&lt;head&gt;
	&lt;style type=&quot;text/css&quot;&gt;
		td, a, h2 {color: #003050}
		.value, .label {color: #003050}
		.request-status {color: #003050}
		.header-request-link {color: #6ba539}
	&lt;/style&gt;
&lt;/head&gt;

&lt;body style=&quot;background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
        &lt;span class=&quot;preheader&quot; style=&quot;display: none !important; font-size:1px; line-height: 1px; display: none; font-size: 1px; line-height: 1px&quot;&gt;Status of the request $issue.summary with key $issue has been changed... &lt;/span&gt;&lt;center&gt;
            &lt;table id=&quot;email-wrap&quot; valign=&quot;top&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
                &lt;tbody&gt;
                    &lt;tr&gt;
                        &lt;td align=&quot;center&quot; id=&quot;email-wrap-cell&quot; style=&quot;padding: 20px 10px 10px&quot;&gt;
                            &lt;table id=&quot;email-container&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 600px; line-height: 1,500&quot;&gt;
                                &lt;tbody&gt;
                                    &lt;tr&gt;
                                        &lt;td align=&quot;left&quot;&gt;
                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                &lt;tbody&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-header&quot; style=&quot;padding: 10px 20px; border: solid #ddd; border-width: 1px 2px 1px 1px; border-bottom-color: #f5f5f5; background-color: #fff; font-weight: normal; line-height: 1,200&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 100%&quot;&gt;
                                                                &lt;tbody&gt;
																	&lt;tr&gt;
																		&lt;td class=&quot;viewport-details&quot; style=&quot;width: 100%&quot; align=&quot;right&quot; colspan=&quot;2&quot;&gt;
																			&lt;img src=&quot;/images/loghi/HUB Logo2.jpg&quot;/&gt;
																		&lt;/td&gt;
																	&lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;viewport-details&quot; style=&quot;width: 50%&quot;&gt;
                                                                            &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none&quot;&gt;&lt;strong style=&quot;font-weight: bold&quot;&gt;HUB Support Portal&lt;/strong&gt; - Support Request&lt;/a&gt;
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;request-key&quot; style=&quot;width: 50%; text-align: right; font-size: 12px; line-height: 18px; text-decoration: none&quot;&gt;
                                                                            &lt;!-- &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none; color: #707070&quot;&gt;Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;[$issue]&lt;/strong&gt;&lt;/a&gt; --&gt;
																			Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;$issue&lt;/strong&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-content-important email-heading&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 10px; border-top-color: #f5f5f5&quot;&gt;
                                                            &lt;h1 style=&quot;margin: 0; line-height: 1,200; font-size: 22px; font-weight: bold&quot;&gt;&lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot; class=&quot;header-request-link&quot; style=&quot;text-decoration: none&quot;&gt;$issue.summary&lt;/a&gt; &lt;span class=&quot;request-status aui-lozenge aui-lozenge-current&quot; style=&quot;background-color: #cccccd; border: 1px solid #cccccd; border-radius: 3px; color: #333; display: inline-block; font-size: 11px; font-weight: bold; line-height: 1; padding: 2px 5px 1px 5px; text-align: center; text-decoration: none; text-transform: uppercase; background-color: #14892C; border-color: #14892C; color: #ffffff; margin-left: 5px; font-weight: bold; font-size: 14px&quot;&gt;$issue.status.name&lt;/span&gt;&lt;/h1&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													&lt;tr&gt;
                                                        &lt;td class=&quot;latest-activity-container email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 0; border-top-width: 0&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;latest-activity activity-item status-update &quot; style=&quot;padding: 20px 10px; border-top: solid 1px #ccc; display: block; margin: 0; padding: 10px; border: solid 1px; border-radius: 3px; border-color: #14892C; background-color: #fffdf6&quot;&gt;
                                                                            &lt;div class=&quot;content&quot; style=&quot;float: left; line-height: 1,600; clear: both&quot;&gt;
                                                                                Status changed to &lt;strong style=&quot;font-weight: bold&quot;&gt;$issue.status.name&lt;/strong&gt;
                                                                            &lt;/div&gt;
																			
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-actions email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding: 20px; padding-top: 0; padding-bottom: 20px; border-top-width: 0; border-bottom-width: 2px&quot;&gt;
                                                            You can &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot;&gt;view the full request&lt;/a&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													
													&lt;tr&gt;
                                                        &lt;td class=&quot;email-details&quot; style=&quot;padding: 20px&quot;&gt;
                                                            &lt;h2 style=&quot;margin: 0 0 10px; line-height: 1,200; font-size: 16px; font-weight: bold&quot;&gt;Details&lt;/h2&gt;
                                                            &lt;table class=&quot;email-request-details&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Brand
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12900&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Environment
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12901&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product Family
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12902&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12903&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Affected Version / Peripheral Serial Number
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12904&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Description
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;p&gt;$issue.description&lt;/p&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr class=&quot;last&quot;&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            What Is your installation number?
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_11002&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                &lt;/tbody&gt;
                                            &lt;/table&gt;
                                        &lt;/td&gt;
                                    &lt;/tr&gt;
                                &lt;/tbody&gt;
                            &lt;/table&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td id=&quot;foot-note&quot; style=&quot;padding-bottom: 20px;  font-size: 12px; line-height: 1,200&quot;&gt;
                            &lt;p style=&quot;width: 600px; text-align: center; margin: 0 auto&quot;&gt;This message is automatically generated by HUB Support Portal.&lt;br /&gt;&lt;/p&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
        &lt;/center&gt;
    &lt;/body&gt;</arg>
              <arg name="FIELD_EMAIL_SUBJECT_TEMPLATE">[HUB Support Portal] $issue.summary [$issue]</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SendCustomEmail</arg>
              <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()
issue.projectObject.name == 'HUB Support' &amp;&amp; groupManager.isUserInGroup(issue.reporter?.name, 'HS-customers')</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_PREVIEW_ISSUE">HS-396</arg>
              <arg name="FIELD_EMAIL_FORMAT">HTML</arg>
            </function>
            <function type="class">
              <arg name="FIELD_FROM">support@hubparking.com</arg>
              <arg name="FIELD_INCLUDE_ATTACHMENTS">FIELD_INCLUDE_ATTACHMENTS_NONE</arg>
              <arg name="FIELD_TO_ADDRESSES"></arg>
              <arg name="FIELD_CC_ADDRESSES"></arg>
              <arg name="FIELD_CC_USER_FIELDS"></arg>
              <arg name="FIELD_TO_USER_FIELDS">reporter</arg>
              <arg name="FIELD_INCLUDE_ATTACHMENTS_CALLBACK"></arg>
              <arg name="FIELD_EMAIL_TEMPLATE">&lt;head&gt;
	&lt;style type=&quot;text/css&quot;&gt;
		td, a, h2 {color: #003050}
		.value, .label {color: #003050}
		.request-status {color: #003050}
		.header-request-link {color: #6ba539}
	&lt;/style&gt;
&lt;/head&gt;

&lt;body style=&quot;background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
        &lt;span class=&quot;preheader&quot; style=&quot;display: none !important; font-size:1px; line-height: 1px; display: none; font-size: 1px; line-height: 1px&quot;&gt;Status of the request $issue.summary with key $issue has been changed... &lt;/span&gt;&lt;center&gt;
            &lt;table id=&quot;email-wrap&quot; valign=&quot;top&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
                &lt;tbody&gt;
                    &lt;tr&gt;
                        &lt;td align=&quot;center&quot; id=&quot;email-wrap-cell&quot; style=&quot;padding: 20px 10px 10px&quot;&gt;
                            &lt;table id=&quot;email-container&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 600px; line-height: 1,500&quot;&gt;
                                &lt;tbody&gt;
                                    &lt;tr&gt;
                                        &lt;td align=&quot;left&quot;&gt;
                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                &lt;tbody&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-header&quot; style=&quot;padding: 10px 20px; border: solid #ddd; border-width: 1px 2px 1px 1px; border-bottom-color: #f5f5f5; background-color: #fff; font-weight: normal; line-height: 1,200&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 100%&quot;&gt;
                                                                &lt;tbody&gt;
																	&lt;tr&gt;
																		&lt;td class=&quot;viewport-details&quot; style=&quot;width: 100%&quot; align=&quot;right&quot; colspan=&quot;2&quot;&gt;
																			&lt;img src=&quot;/images/loghi/HUB Logo2.jpg&quot;/&gt;
																		&lt;/td&gt;
																	&lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;viewport-details&quot; style=&quot;width: 50%&quot;&gt;
                                                                            &lt;a href=&quot;&lt;% out &lt;&lt; componentManager.getApplicationProperties().getString(&quot;jira.baseurl&quot;) %&gt;/browse/$issue&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none&quot;&gt;&lt;strong style=&quot;font-weight: bold&quot;&gt;HUB Support Portal&lt;/strong&gt; - Support Request&lt;/a&gt;
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;request-key&quot; style=&quot;width: 50%; text-align: right; font-size: 12px; line-height: 18px; text-decoration: none&quot;&gt;
                                                                            &lt;!-- &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none; color: #707070&quot;&gt;Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;[$issue]&lt;/strong&gt;&lt;/a&gt; --&gt;
																			Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;$issue&lt;/strong&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-content-important email-heading&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 10px; border-top-color: #f5f5f5&quot;&gt;
                                                            &lt;h1 style=&quot;margin: 0; line-height: 1,200; font-size: 22px; font-weight: bold&quot;&gt;&lt;a href=&quot;&lt;% out &lt;&lt; componentManager.getApplicationProperties().getString(&quot;jira.baseurl&quot;) %&gt;/browse/$issue&quot; class=&quot;header-request-link&quot; style=&quot;text-decoration: none&quot;&gt;$issue.summary&lt;/a&gt; &lt;span class=&quot;request-status aui-lozenge aui-lozenge-current&quot; style=&quot;background-color: #cccccd; border: 1px solid #cccccd; border-radius: 3px; color: #333; display: inline-block; font-size: 11px; font-weight: bold; line-height: 1; padding: 2px 5px 1px 5px; text-align: center; text-decoration: none; text-transform: uppercase; background-color: #14892C; border-color: #14892C; color: #ffffff; margin-left: 5px; font-weight: bold; font-size: 14px&quot;&gt;$issue.status.name&lt;/span&gt;&lt;/h1&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													&lt;tr&gt;
                                                        &lt;td class=&quot;latest-activity-container email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 0; border-top-width: 0&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;latest-activity activity-item status-update &quot; style=&quot;padding: 20px 10px; border-top: solid 1px #ccc; display: block; margin: 0; padding: 10px; border: solid 1px; border-radius: 3px; border-color: #14892C; background-color: #fffdf6&quot;&gt;
                                                                            &lt;div class=&quot;content&quot; style=&quot;float: left; line-height: 1,600; clear: both&quot;&gt;
                                                                                Status changed to &lt;strong style=&quot;font-weight: bold&quot;&gt;$issue.status.name&lt;/strong&gt;
                                                                            &lt;/div&gt;
																			
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-actions email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding: 20px; padding-top: 0; padding-bottom: 20px; border-top-width: 0; border-bottom-width: 2px&quot;&gt;
                                                            You can &lt;a href=&quot;&lt;% out &lt;&lt; componentManager.getApplicationProperties().getString(&quot;jira.baseurl&quot;) %&gt;/browse/$issue&quot;&gt;view the full request&lt;/a&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													
													&lt;tr&gt;
                                                        &lt;td class=&quot;email-details&quot; style=&quot;padding: 20px&quot;&gt;
                                                            &lt;h2 style=&quot;margin: 0 0 10px; line-height: 1,200; font-size: 16px; font-weight: bold&quot;&gt;Details&lt;/h2&gt;
                                                            &lt;table class=&quot;email-request-details&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Brand
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12900&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Environment
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12901&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product Family
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12902&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12903&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Affected Version / Peripheral Serial Number
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12904&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Description
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;p&gt;$issue.description&lt;/p&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr class=&quot;last&quot;&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            What Is your installation number?
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_11002&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                &lt;/tbody&gt;
                                            &lt;/table&gt;
                                        &lt;/td&gt;
                                    &lt;/tr&gt;
                                &lt;/tbody&gt;
                            &lt;/table&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td id=&quot;foot-note&quot; style=&quot;padding-bottom: 20px;  font-size: 12px; line-height: 1,200&quot;&gt;
                            &lt;p style=&quot;width: 600px; text-align: center; margin: 0 auto&quot;&gt;This message is automatically generated by HUB Support Portal.&lt;br /&gt;&lt;/p&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
        &lt;/center&gt;
    &lt;/body&gt;</arg>
              <arg name="FIELD_EMAIL_SUBJECT_TEMPLATE">[HS] $issue.summary [$issue]</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SendCustomEmail</arg>
              <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()
issue.projectObject.name == 'HUB Support' &amp;&amp; !groupManager.isUserInGroup(issue.reporter?.name, 'HS-customers')</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_PREVIEW_ISSUE">HS-396</arg>
              <arg name="FIELD_EMAIL_FORMAT">HTML</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="FIELD_NOTES"></arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="FIELD_INLINE_SCRIPT"></arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_SCRIPT_FILE">customScripts\SD_TransitionPostFunction.groovy</arg>
            </function>
            <function type="class">
              <arg name="FIELD_NOTES"></arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="FIELD_INLINE_SCRIPT"></arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_SCRIPT_FILE">customScripts\SD_UpdateComments.groovy</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
    <action id="41" name="TransferToReporter" view="fieldscreen">
      <meta name="jira.description">Action used to respond to customer</meta>
      <meta name="jira.fieldscreen.id">11701</meta>
      <restrict-to>
        <conditions>
          <condition type="class">
            <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
            <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()

currentUser.name == 'atlassian' || (groupManager.isUserInGroup(currentUser.name, 'service-desk-agents') &amp;&amp; issue.getProjectObject().key == 'HS')</arg>
            <arg name="FIELD_PREVIEW_ISSUE"></arg>
            <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
          </condition>
        </conditions>
      </restrict-to>
      <results>
        <unconditional-result old-status="null" status="null" step="3">
          <post-functions>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="field.name">customfield_13616</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
              <arg name="field.value">%%CURRENT_DATETIME%%</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="FIELD_NOTES"></arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="FIELD_INLINE_SCRIPT"></arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_SCRIPT_FILE">customScripts\SD_TransitionPostFunction.groovy</arg>
            </function>
            <function type="class">
              <arg name="FIELD_NOTES"></arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="FIELD_INLINE_SCRIPT"></arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_SCRIPT_FILE">customScripts\SD_UpdateComments.groovy</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="FIELD_FROM">support@hubparking.com</arg>
              <arg name="FIELD_INCLUDE_ATTACHMENTS">FIELD_INCLUDE_ATTACHMENTS_NONE</arg>
              <arg name="FIELD_TO_ADDRESSES"></arg>
              <arg name="FIELD_CC_ADDRESSES"></arg>
              <arg name="FIELD_CC_USER_FIELDS"></arg>
              <arg name="FIELD_TO_USER_FIELDS">reporter</arg>
              <arg name="FIELD_INCLUDE_ATTACHMENTS_CALLBACK"></arg>
              <arg name="FIELD_EMAIL_TEMPLATE">&lt;head&gt;
	&lt;style type=&quot;text/css&quot;&gt;
		td, a, h2 {color: #003050}
		.value, .label {color: #003050}
		.request-status {color: #003050}
		.header-request-link {color: #6ba539}
	&lt;/style&gt;
&lt;/head&gt;

&lt;body style=&quot;background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
        &lt;span class=&quot;preheader&quot; style=&quot;display: none !important; font-size:1px; line-height: 1px; display: none; font-size: 1px; line-height: 1px&quot;&gt;Status of the request $issue.summary with key $issue has been changed... &lt;/span&gt;&lt;center&gt;
            &lt;table id=&quot;email-wrap&quot; valign=&quot;top&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
                &lt;tbody&gt;
                    &lt;tr&gt;
                        &lt;td align=&quot;center&quot; id=&quot;email-wrap-cell&quot; style=&quot;padding: 20px 10px 10px&quot;&gt;
                            &lt;table id=&quot;email-container&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 600px; line-height: 1,500&quot;&gt;
                                &lt;tbody&gt;
                                    &lt;tr&gt;
                                        &lt;td align=&quot;left&quot;&gt;
                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                &lt;tbody&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-header&quot; style=&quot;padding: 10px 20px; border: solid #ddd; border-width: 1px 2px 1px 1px; border-bottom-color: #f5f5f5; background-color: #fff; font-weight: normal; line-height: 1,200&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 100%&quot;&gt;
                                                                &lt;tbody&gt;
																	&lt;tr&gt;
																		&lt;td class=&quot;viewport-details&quot; style=&quot;width: 100%&quot; align=&quot;right&quot; colspan=&quot;2&quot;&gt;
																			&lt;img src=&quot;/images/loghi/HUB Logo2.jpg&quot;/&gt;
																		&lt;/td&gt;
																	&lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;viewport-details&quot; style=&quot;width: 50%&quot;&gt;
                                                                            &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none;&quot;&gt;&lt;strong style=&quot;font-weight: bold&quot;&gt;HUB Support Portal&lt;/strong&gt; - Support Request&lt;/a&gt;
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;request-key&quot; style=&quot;width: 50%; text-align: right; font-size: 12px; line-height: 18px; text-decoration: none&quot;&gt;
                                                                            &lt;!-- &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none; color: #707070&quot;&gt;Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;[$issue]&lt;/strong&gt;&lt;/a&gt; --&gt;
																			Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;$issue&lt;/strong&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-content-important email-heading&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 10px; border-top-color: #f5f5f5&quot;&gt;
                                                            &lt;h1 style=&quot;margin: 0; line-height: 1,200; font-size: 22px; font-weight: bold;&quot;&gt;&lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot; class=&quot;header-request-link&quot; style=&quot;text-decoration: none&quot;&gt;$issue.summary&lt;/a&gt; &lt;span class=&quot;request-status aui-lozenge aui-lozenge-current&quot; style=&quot;background-color: #cccccd; border: 1px solid #cccccd; border-radius: 3px; color: #333; display: inline-block; font-size: 11px; font-weight: bold; line-height: 1; padding: 2px 5px 1px 5px; text-align: center; text-decoration: none; text-transform: uppercase; background-color: #ffd351; border-color: #ffd351; margin-left: 5px; font-weight: bold; font-size: 14px&quot;&gt;Waiting for your feedback&lt;/span&gt;&lt;/h1&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;latest-activity-container email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 0; border-top-width: 0&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;latest-activity activity-item status-update &quot; style=&quot;padding: 20px 10px; border-top: solid 1px #ccc; display: block; margin: 0; border: solid 1px; border-radius: 3px; border-color: #ffd351; background-color: #fffdf6&quot;&gt;
                                                                            &lt;div class=&quot;content&quot; style=&quot;float: left; line-height: 1,600; clear: both&quot;&gt;
                                                                                Status changed to &lt;strong style=&quot;font-weight: bold&quot;&gt;Waiting for your feedback&lt;/strong&gt;&lt;/br&gt;
                                                                            &lt;/div&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-actions email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding: 20px; padding-top: 0; padding-bottom: 20px; border-top-width: 0; border-bottom-width: 2px&quot;&gt;
                                                            You can &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot;&gt;view the full request&lt;/a&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													&lt;tr&gt;
                                                        &lt;td class=&quot;request-activity-container&quot; style=&quot;padding: 20px 20px 0&quot;&gt;
                                                            &lt;table class=&quot;request-activity&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; border-bottom: dashed 1px #ccc&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;activity-item worker-comment &quot; style=&quot;padding: 10px 10px 10px 10px; border-top: solid 1px #ccc&quot; valign=&quot;center&quot;&gt;
                                                                            &lt;div class=&quot;header clearfix&quot;&gt;
                                                                            &lt;%def currentDate = new Date()%&gt;
                                                                            &lt;h4 style=&quot;color: #111; display: inline-block; font-size: 14px; float: left; margin: 0; line-height: 18px&quot;&gt;$currentUser.displayName&lt;/h4&gt;&lt;span class=&quot;time&quot; title=&quot;&lt;% out &lt;&lt; currentDate %&gt;&quot; style=&quot;display: inline-block; font-size: 14px; float: left; line-height: 18px;  font-size: 12px; margin-left: 10px&quot;&gt;&lt;% out &lt;&lt; currentDate %&gt;&lt;/span&gt;
                                                                            &lt;/div&gt;
                                                                            &lt;div class=&quot;content&quot; style=&quot;margin-top: 5px; line-height: 1.600; clear: both&quot;&gt;
                                                                                $lastComment
                                                                            &lt;/div&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;view-more&quot; style=&quot;padding: 20px 0; border-top: solid 1px #ccc&quot;&gt;
                                                                            &lt;p style=&quot;margin: 0; padding: 0&quot;&gt;&lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot;&gt;Older messages&lt;/a&gt;&lt;/p&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													&lt;tr&gt;
                                                        &lt;td class=&quot;email-details&quot; style=&quot;padding: 20px&quot;&gt;
                                                            &lt;h2 style=&quot;margin: 0 0 10px; line-height: 1,200; font-size: 16px; font-weight: bold&quot;&gt;Details&lt;/h2&gt;
                                                            &lt;table class=&quot;email-request-details&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Brand
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12900&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Environment
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12901&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product Family
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12902&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12903&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Affected Version / Peripheral Serial Number
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12904&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Description
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;p&gt;$issue.description&lt;/p&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr class=&quot;last&quot;&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            What Is your installation number?
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_11002&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                &lt;/tbody&gt;
                                            &lt;/table&gt;
                                        &lt;/td&gt;
                                    &lt;/tr&gt;
                                &lt;/tbody&gt;
                            &lt;/table&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td id=&quot;foot-note&quot; style=&quot;padding-bottom: 20px;  font-size: 12px; line-height: 1,200&quot;&gt;
                            &lt;p style=&quot;width: 600px; text-align: center; margin: 0 auto&quot;&gt;This message is automatically generated by HUB Support Portal.&lt;br /&gt;&lt;/p&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
        &lt;/center&gt;
    &lt;/body&gt;</arg>
              <arg name="FIELD_EMAIL_SUBJECT_TEMPLATE">[HUB Support Portal] $issue.summary [$issue]</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SendCustomEmail</arg>
              <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()
issue.projectObject.name == 'HUB Support' &amp;&amp; groupManager.isUserInGroup(issue.reporter?.name, 'HS-customers')</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_PREVIEW_ISSUE">HS-396</arg>
              <arg name="FIELD_EMAIL_FORMAT">HTML</arg>
            </function>
            <function type="class">
              <arg name="FIELD_FROM">support@hubparking.com</arg>
              <arg name="FIELD_INCLUDE_ATTACHMENTS">FIELD_INCLUDE_ATTACHMENTS_NONE</arg>
              <arg name="FIELD_TO_ADDRESSES"></arg>
              <arg name="FIELD_CC_ADDRESSES"></arg>
              <arg name="FIELD_CC_USER_FIELDS"></arg>
              <arg name="FIELD_TO_USER_FIELDS">reporter</arg>
              <arg name="FIELD_INCLUDE_ATTACHMENTS_CALLBACK"></arg>
              <arg name="FIELD_EMAIL_TEMPLATE">&lt;head&gt;
	&lt;style type=&quot;text/css&quot;&gt;
		td, a, h2 {color: #003050}
		.value, .label {color: #003050}
		.request-status {color: #003050}
		.header-request-link {color: #6ba539}
	&lt;/style&gt;
&lt;/head&gt;

&lt;body style=&quot;background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
        &lt;span class=&quot;preheader&quot; style=&quot;display: none !important; font-size:1px; line-height: 1px; display: none; font-size: 1px; line-height: 1px&quot;&gt;Status of the request $issue.summary with key $issue has been changed... &lt;/span&gt;&lt;center&gt;
            &lt;table id=&quot;email-wrap&quot; valign=&quot;top&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
                &lt;tbody&gt;
                    &lt;tr&gt;
                        &lt;td align=&quot;center&quot; id=&quot;email-wrap-cell&quot; style=&quot;padding: 20px 10px 10px&quot;&gt;
                            &lt;table id=&quot;email-container&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 600px; line-height: 1,500&quot;&gt;
                                &lt;tbody&gt;
                                    &lt;tr&gt;
                                        &lt;td align=&quot;left&quot;&gt;
                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                &lt;tbody&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-header&quot; style=&quot;padding: 10px 20px; border: solid #ddd; border-width: 1px 2px 1px 1px; border-bottom-color: #f5f5f5; background-color: #fff; font-weight: normal; line-height: 1,200&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 100%&quot;&gt;
                                                                &lt;tbody&gt;
																	&lt;tr&gt;
																		&lt;td class=&quot;viewport-details&quot; style=&quot;width: 100%&quot; align=&quot;right&quot; colspan=&quot;2&quot;&gt;
																			&lt;img src=&quot;/images/loghi/HUB Logo2.jpg&quot;/&gt;
																		&lt;/td&gt;
																	&lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;viewport-details&quot; style=&quot;width: 50%&quot;&gt;
                                                                            &lt;a href=&quot;&lt;% out &lt;&lt; componentManager.getApplicationProperties().getString(&quot;jira.baseurl&quot;) %&gt;/browse/$issue&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none; &quot;&gt;&lt;strong style=&quot;font-weight: bold&quot;&gt;HUB Support Portal&lt;/strong&gt; - Support Request&lt;/a&gt;
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;request-key&quot; style=&quot;width: 50%; text-align: right; font-size: 12px; line-height: 18px; text-decoration: none&quot;&gt;
                                                                            &lt;!-- &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none; color: #707070&quot;&gt;Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;[$issue]&lt;/strong&gt;&lt;/a&gt; --&gt;
																			Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;$issue&lt;/strong&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-content-important email-heading&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 10px; border-top-color: #f5f5f5&quot;&gt;
                                                            &lt;h1 style=&quot;margin: 0; line-height: 1,200; font-size: 22px; font-weight: bold;&quot;&gt;&lt;a href=&quot;&lt;% out &lt;&lt; componentManager.getApplicationProperties().getString(&quot;jira.baseurl&quot;) %&gt;/browse/$issue&quot; class=&quot;header-request-link&quot; style=&quot;text-decoration: none&quot;&gt;$issue.summary&lt;/a&gt; &lt;span class=&quot;request-status aui-lozenge aui-lozenge-current&quot; style=&quot;background-color: #cccccd; border: 1px solid #cccccd; border-radius: 3px; color: #333; display: inline-block; font-size: 11px; font-weight: bold; line-height: 1; padding: 2px 5px 1px 5px; text-align: center; text-decoration: none; text-transform: uppercase; background-color: #ffd351; border-color: #ffd351; margin-left: 5px; font-weight: bold; font-size: 14px&quot;&gt;Waiting for your feedback&lt;/span&gt;&lt;/h1&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;latest-activity-container email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 0; border-top-width: 0&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;latest-activity activity-item status-update &quot; style=&quot;padding: 20px 10px; border-top: solid 1px #ccc; display: block; margin: 0; border: solid 1px; border-radius: 3px; border-color: #ffd351; background-color: #fffdf6&quot;&gt;
                                                                            &lt;div class=&quot;content&quot; style=&quot;float: left; line-height: 1,600; clear: both&quot;&gt;
                                                                                Status changed to &lt;strong style=&quot;font-weight: bold&quot;&gt;Waiting for your feedback&lt;/strong&gt;&lt;/br&gt;
                                                                            &lt;/div&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-actions email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding: 20px; padding-top: 0; padding-bottom: 20px; border-top-width: 0; border-bottom-width: 2px&quot;&gt;
                                                            You can &lt;a href=&quot;&lt;% out &lt;&lt; componentManager.getApplicationProperties().getString(&quot;jira.baseurl&quot;) %&gt;/browse/$issue&quot;&gt;view the full request&lt;/a&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													&lt;tr&gt;
                                                        &lt;td class=&quot;request-activity-container&quot; style=&quot;padding: 20px 20px 0&quot;&gt;
                                                            &lt;table class=&quot;request-activity&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; border-bottom: dashed 1px #ccc&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;activity-item worker-comment &quot; style=&quot;padding: 10px 10px 10px 10px; border-top: solid 1px #ccc&quot; valign=&quot;center&quot;&gt;
                                                                            &lt;div class=&quot;header clearfix&quot;&gt;
                                                                            &lt;%def currentDate = new Date()%&gt;
                                                                            &lt;h4 style=&quot;display: inline-block; font-size: 14px; float: left; margin: 0; line-height: 18px&quot;&gt;$currentUser.displayName&lt;/h4&gt;&lt;span class=&quot;time&quot; title=&quot;&lt;% out &lt;&lt; currentDate %&gt;&quot; style=&quot;display: inline-block; font-size: 14px; float: left; line-height: 18px;  font-size: 12px; margin-left: 10px&quot;&gt;&lt;% out &lt;&lt; currentDate %&gt;&lt;/span&gt;
                                                                            &lt;/div&gt;
                                                                            &lt;div class=&quot;content&quot; style=&quot;margin-top: 5px; line-height: 1.600; clear: both&quot;&gt;
                                                                                $lastComment
                                                                            &lt;/div&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;view-more&quot; style=&quot;padding: 20px 0; border-top: solid 1px #ccc&quot;&gt;
                                                                            &lt;p style=&quot;margin: 0; padding: 0&quot;&gt;&lt;a href=&quot;&lt;% out &lt;&lt; componentManager.getApplicationProperties().getString(&quot;jira.baseurl&quot;) %&gt;/browse/$issue&quot;&gt;Older messages&lt;/a&gt;&lt;/p&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													&lt;tr&gt;
                                                        &lt;td class=&quot;email-details&quot; style=&quot;padding: 20px&quot;&gt;
                                                            &lt;h2 style=&quot;margin: 0 0 10px; line-height: 1,200; font-size: 16px; font-weight: bold&quot;&gt;Details&lt;/h2&gt;
                                                            &lt;table class=&quot;email-request-details&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Brand
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12900&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Environment
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12901&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product Family
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12902&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12903&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Affected Version / Peripheral Serial Number
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12904&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Description
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;p&gt;$issue.description&lt;/p&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr class=&quot;last&quot;&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            What Is your installation number?
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_11002&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                &lt;/tbody&gt;
                                            &lt;/table&gt;
                                        &lt;/td&gt;
                                    &lt;/tr&gt;
                                &lt;/tbody&gt;
                            &lt;/table&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td id=&quot;foot-note&quot; style=&quot;padding-bottom: 20px;  font-size: 12px; line-height: 1,200&quot;&gt;
                            &lt;p style=&quot;width: 600px; text-align: center; margin: 0 auto&quot;&gt;This message is automatically generated by HUB Support Portal.&lt;br /&gt;&lt;/p&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
        &lt;/center&gt;
    &lt;/body&gt;</arg>
              <arg name="FIELD_EMAIL_SUBJECT_TEMPLATE">[HS] $issue.summary [$issue]</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SendCustomEmail</arg>
              <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()
issue.projectObject.name == 'HUB Support' &amp;&amp; !groupManager.isUserInGroup(issue.reporter?.name, 'HS-customers')</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_PREVIEW_ISSUE">HS-396</arg>
              <arg name="FIELD_EMAIL_FORMAT">HTML</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
  </common-actions>
  <steps>
    <step id="1" name="Open">
      <meta name="jira.status.id">1</meta>
      <actions>
<common-action id="21" />
        <action id="11" name="AssignToTechnician" view="fieldscreen">
          <meta name="jira.description">The opened issue should be assigned to a technician and checked</meta>
          <meta name="jira.fieldscreen.id">11702</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()

currentUser.name == 'atlassian' || (groupManager.isUserInGroup(currentUser.name, 'service-desk-agents') &amp;&amp; issue.getProjectObject().key == 'HS')</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="hidFieldsList">assignee@@customfield_12905@@</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="2">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FROM">support@hubparking.com</arg>
                  <arg name="FIELD_INCLUDE_ATTACHMENTS">FIELD_INCLUDE_ATTACHMENTS_NONE</arg>
                  <arg name="FIELD_TO_ADDRESSES"></arg>
                  <arg name="FIELD_CC_ADDRESSES"></arg>
                  <arg name="FIELD_CC_USER_FIELDS"></arg>
                  <arg name="FIELD_TO_USER_FIELDS">reporter</arg>
                  <arg name="FIELD_INCLUDE_ATTACHMENTS_CALLBACK"></arg>
                  <arg name="FIELD_EMAIL_TEMPLATE">&lt;head&gt;
	&lt;style type=&quot;text/css&quot;&gt;
		td, a, h2 {color: #003050}
		.value, .label {color: #003050}
		.request-status {color: #003050}
		.header-request-link {color: #6ba539}
	&lt;/style&gt;
&lt;/head&gt;

&lt;body style=&quot;background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
        &lt;span class=&quot;preheader&quot; style=&quot;display: none !important; font-size:1px; line-height: 1px; display: none; font-size: 1px; line-height: 1px&quot;&gt;Status of the request $issue.summary with key $issue has been changed... &lt;/span&gt;&lt;center&gt;
            &lt;table id=&quot;email-wrap&quot; valign=&quot;top&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
                &lt;tbody&gt;
                    &lt;tr&gt;
                        &lt;td align=&quot;center&quot; id=&quot;email-wrap-cell&quot; style=&quot;padding: 20px 10px 10px&quot;&gt;
                            &lt;table id=&quot;email-container&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 600px; line-height: 1,500&quot;&gt;
                                &lt;tbody&gt;
                                    &lt;tr&gt;
                                        &lt;td align=&quot;left&quot;&gt;
                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                &lt;tbody&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-header&quot; style=&quot;padding: 10px 20px; border: solid #ddd; border-width: 1px 2px 1px 1px; border-bottom-color: #f5f5f5; background-color: #fff; font-weight: normal; line-height: 1,200&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 100%&quot;&gt;
                                                                &lt;tbody&gt;
																	&lt;tr&gt;
																		&lt;td class=&quot;viewport-details&quot; style=&quot;width: 100%&quot; align=&quot;right&quot; colspan=&quot;2&quot;&gt;
																			&lt;img src=&quot;/images/loghi/HUB Logo2.jpg&quot;/&gt;
																		&lt;/td&gt;
																	&lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;viewport-details&quot; style=&quot;width: 50%&quot;&gt;
                                                                            &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none&quot;&gt;&lt;strong style=&quot;font-weight: bold&quot;&gt;HUB Support Portal&lt;/strong&gt; - Support Request&lt;/a&gt;
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;request-key&quot; style=&quot;width: 50%; text-align: right; font-size: 12px; line-height: 18px; text-decoration: none&quot;&gt;
                                                                            &lt;!-- &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none; color: #707070&quot;&gt;Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;[$issue]&lt;/strong&gt;&lt;/a&gt; --&gt;
																			Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;$issue&lt;/strong&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-content-important email-heading&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 10px; border-top-color: #f5f5f5&quot;&gt;
                                                            &lt;h1 style=&quot;margin: 0; line-height: 1,200; font-size: 22px; font-weight: bold&quot;&gt;&lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot; class=&quot;header-request-link&quot; style=&quot;text-decoration: none&quot;&gt;$issue.summary&lt;/a&gt; &lt;span class=&quot;request-status aui-lozenge aui-lozenge-current&quot; style=&quot;background-color: #cccccd; border: 1px solid #cccccd; border-radius: 3px; color: #333; display: inline-block; font-size: 11px; font-weight: bold; line-height: 1; padding: 2px 5px 1px 5px; text-align: center; text-decoration: none; text-transform: uppercase; background-color: #ffd351; border-color: #ffd351; margin-left: 5px; font-weight: bold; font-size: 14px&quot;&gt;Issue in Charge of Support Team&lt;/span&gt;&lt;/h1&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;latest-activity-container email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 0; border-top-width: 0&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;latest-activity activity-item status-update &quot; style=&quot;padding: 20px 10px; border-top: solid 1px #ccc; display: block; margin: 0; padding: 10px; border: solid 1px; border-radius: 3px; border-color: #ffd351; background-color: #fffdf6&quot;&gt;
                                                                            &lt;div class=&quot;content&quot; style=&quot;float: left; line-height: 1,600; clear: both&quot;&gt;
                                                                                Status changed to &lt;strong style=&quot;font-weight: bold&quot;&gt;Issue in Charge of Support Team&lt;/strong&gt;
                                                                            &lt;/div&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-actions email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding: 20px; padding-top: 0; padding-bottom: 20px; border-top-width: 0; border-bottom-width: 2px&quot;&gt;
                                                            You can &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot;&gt;view the full request&lt;/a&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    
													&lt;tr&gt;
                                                        &lt;td class=&quot;email-details&quot; style=&quot;padding: 20px&quot;&gt;
                                                            &lt;h2 style=&quot;margin: 0 0 10px; line-height: 1,200; font-size: 16px; font-weight: bold&quot;&gt;Details&lt;/h2&gt;
                                                            &lt;table class=&quot;email-request-details&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Brand
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12900&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Environment
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12901&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product Family
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12902&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12903&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Affected Version / Peripheral Serial Number
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12904&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Description
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;p&gt;$issue.description&lt;/p&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr class=&quot;last&quot;&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            What Is your installation number?
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_11002&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                &lt;/tbody&gt;
                                            &lt;/table&gt;
                                        &lt;/td&gt;
                                    &lt;/tr&gt;
                                &lt;/tbody&gt;
                            &lt;/table&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td id=&quot;foot-note&quot; style=&quot;padding-bottom: 20px;  font-size: 12px; line-height: 1,200&quot;&gt;
                            &lt;p style=&quot;width: 600px; text-align: center; margin: 0 auto&quot;&gt;This message is automatically generated by HUB Support Portal.&lt;br /&gt;&lt;/p&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
        &lt;/center&gt;
    &lt;/body&gt;</arg>
                  <arg name="FIELD_EMAIL_SUBJECT_TEMPLATE">[HUB Support Portal] $issue.summary [$issue]</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SendCustomEmail</arg>
                  <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()

issue.projectObject.name == 'HUB Support' &amp;&amp; groupManager.isUserInGroup(issue.reporter?.name, 'HS-customers')</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_PREVIEW_ISSUE">HS-396</arg>
                  <arg name="FIELD_EMAIL_FORMAT">HTML</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES"></arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT"></arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE">customScripts\SD_TransitionPostFunction.groovy</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES"></arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT"></arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE">customScripts\SD_UpdateComments.groovy</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">10600</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="2" name="SupportWait">
      <meta name="jira.status.id">10026</meta>
      <actions>
        <action id="61" name="TransferToEngineering" view="fieldscreen">
          <meta name="jira.description">this issue need an Engineering Review</meta>
          <meta name="jira.fieldscreen.id">12403</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()

currentUser.name == 'atlassian' || (issue.getProjectObject().key == 'BEHS')</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="hidFieldsList">assignee@@</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="4">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES"></arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT"></arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE">customScripts\SD_TransitionPostFunction.groovy</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES"></arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT"></arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE">customScripts\SD_UpdateComments.groovy</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">3</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="141" name="TransferToOperations" view="fieldscreen">
          <meta name="jira.description">Move the issue on Purchasing, Backoffice or in Production</meta>
          <meta name="jira.fieldscreen.id">12403</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()

currentUser.name == 'atlassian' || (issue.getProjectObject().key == 'BEHS')</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="hidFieldsList">assignee@@</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="8">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES"></arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT"></arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE">customScripts\SD_TransitionPostFunction.groovy</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES"></arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT"></arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE">customScripts\SD_UpdateComments.groovy</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">3</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="161" name="FeedbackToReporter/Agent" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">11701</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()

currentUser.name == 'atlassian' || (issue.getProjectObject().key == 'BEHS')</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="9">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES"></arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT"></arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE">customScripts\SD_TransitionPostFunction.groovy</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES"></arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT"></arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE">customScripts\SD_UpdateComments.groovy</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FROM">support@hubparking.com</arg>
                  <arg name="FIELD_INCLUDE_ATTACHMENTS">FIELD_INCLUDE_ATTACHMENTS_NONE</arg>
                  <arg name="FIELD_TO_ADDRESSES"></arg>
                  <arg name="FIELD_CC_ADDRESSES"></arg>
                  <arg name="FIELD_CC_USER_FIELDS"></arg>
                  <arg name="FIELD_TO_USER_FIELDS">assignee</arg>
                  <arg name="FIELD_INCLUDE_ATTACHMENTS_CALLBACK"></arg>
                  <arg name="FIELD_EMAIL_TEMPLATE">&lt;html&gt;
&lt;body style=&quot;font-family:calibri;font-size:16px&quot;&gt;
&lt;!--div style=&quot;background: #B0E0E6;  margin: 0 auto;  padding: 50px;/* border-radius */ -webkit-border-radius: 5px; -moz-border-radius: 5px; border-radius: 5px; /* box-shadow */ -webkit-box-shadow: rgba(0,0,0,0.2) 0px 1px 3px; -moz-box-shadow: rgba(0,0,0,0.2) 0px 1px 3px; box-shadow: rgba(0,0,0,0.2) 0px 1px 3px;&quot;--&gt;
Dear &lt;% out &lt;&lt; issue.assignee?.displayName %&gt;,
&lt;/br&gt;
feedback for customer is ready on issue&lt;/br&gt;
&lt;p align=&quot;center&quot; style=&quot;font-size:16px&quot;&gt;&lt;b&gt;&lt;a href=&quot;$baseUrl/browse/$issue.key&quot;&gt;${issue.summary}&lt;/a&gt;&lt;/b&gt;&lt;/p&gt;
&lt;/br&gt;
Regards
&lt;!--/div--&gt;
&lt;/body&gt;
&lt;/html&gt;</arg>
                  <arg name="FIELD_EMAIL_SUBJECT_TEMPLATE">Feedback for customer on issue $issue</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SendCustomEmail</arg>
                  <arg name="FIELD_CONDITION">!issue.getProjectObject().name.contains(&quot;Backend &quot;)</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_PREVIEW_ISSUE"></arg>
                  <arg name="FIELD_EMAIL_FORMAT">HTML</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="3" name="ReporterWait">
      <meta name="jira.status.id">10027</meta>
      <actions>
        <action id="51" name="Expiration">
          <meta name="jira.description">too much time is passed without any answer</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()

currentUser == issue.reporter || currentUser.name == 'atlassian' || (groupManager.isUserInGroup(currentUser.name, 'service-desk-agents') &amp;&amp; issue.getProjectObject().key == 'HS')</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="7">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FROM">support@hubparking.com</arg>
                  <arg name="FIELD_INCLUDE_ATTACHMENTS">FIELD_INCLUDE_ATTACHMENTS_NONE</arg>
                  <arg name="FIELD_TO_ADDRESSES"></arg>
                  <arg name="FIELD_CC_ADDRESSES"></arg>
                  <arg name="FIELD_CC_USER_FIELDS"></arg>
                  <arg name="FIELD_TO_USER_FIELDS">reporter</arg>
                  <arg name="FIELD_INCLUDE_ATTACHMENTS_CALLBACK"></arg>
                  <arg name="FIELD_EMAIL_TEMPLATE">&lt;head&gt;
	&lt;style type=&quot;text/css&quot;&gt;
		td, a, h2 {color: #003050}
		.value, .label {color: #003050}
		.request-status {color: #003050}
		.header-request-link {color: #6ba539}
	&lt;/style&gt;
&lt;/head&gt;

&lt;body style=&quot;background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
        &lt;span class=&quot;preheader&quot; style=&quot;display: none !important; font-size:1px; line-height: 1px; display: none; font-size: 1px; line-height: 1px&quot;&gt;Status of the request $issue.summary with key $issue has been changed... &lt;/span&gt;&lt;center&gt;
            &lt;table id=&quot;email-wrap&quot; valign=&quot;top&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
                &lt;tbody&gt;
                    &lt;tr&gt;
                        &lt;td align=&quot;center&quot; id=&quot;email-wrap-cell&quot; style=&quot;padding: 20px 10px 10px&quot;&gt;
                            &lt;table id=&quot;email-container&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 600px; line-height: 1,500&quot;&gt;
                                &lt;tbody&gt;
                                    &lt;tr&gt;
                                        &lt;td align=&quot;left&quot;&gt;
                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                &lt;tbody&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-header&quot; style=&quot;padding: 10px 20px; border: solid #ddd; border-width: 1px 2px 1px 1px; border-bottom-color: #f5f5f5; background-color: #fff; font-weight: normal; line-height: 1,200&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 100%&quot;&gt;
                                                                &lt;tbody&gt;
																	&lt;tr&gt;
																		&lt;td class=&quot;viewport-details&quot; style=&quot;width: 100%&quot; align=&quot;right&quot; colspan=&quot;2&quot;&gt;
																			&lt;img src=&quot;/images/loghi/HUB Logo2.jpg&quot;/&gt;
																		&lt;/td&gt;
																	&lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;viewport-details&quot; style=&quot;width: 50%&quot;&gt;
                                                                            &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none&quot;&gt;&lt;strong style=&quot;font-weight: bold&quot;&gt;HUB Support Portal&lt;/strong&gt; - Support Request&lt;/a&gt;
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;request-key&quot; style=&quot;width: 50%; text-align: right; font-size: 12px; line-height: 18px; text-decoration: none&quot;&gt;
                                                                            &lt;!-- &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none; color: #707070&quot;&gt;Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;[$issue]&lt;/strong&gt;&lt;/a&gt; --&gt;
																			Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;$issue&lt;/strong&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-content-important email-heading&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 10px; border-top-color: #f5f5f5&quot;&gt;
                                                            &lt;h1 style=&quot;margin: 0; line-height: 1,200; font-size: 22px; font-weight: bold&quot;&gt;&lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot; class=&quot;header-request-link&quot; style=&quot;text-decoration: none&quot;&gt;$issue.summary&lt;/a&gt; &lt;span class=&quot;request-status aui-lozenge aui-lozenge-current&quot; style=&quot;background-color: #cccccd; border: 1px solid #cccccd; border-radius: 3px; color: #333; display: inline-block; font-size: 11px; font-weight: bold; line-height: 1; padding: 2px 5px 1px 5px; text-align: center; text-decoration: none; text-transform: uppercase; background-color: #ffd351; border-color: #ffd351; color: #594300; margin-left: 5px; font-weight: bold; font-size: 14px&quot;&gt;Expired - Too much time without hearing anything from you&lt;/span&gt;&lt;/h1&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													
													&lt;tr&gt;
                                                        &lt;td class=&quot;latest-activity-container email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 0; border-top-width: 0&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;latest-activity activity-item status-update &quot; style=&quot;padding: 20px 10px; border-top: solid 1px #ccc; display: block; margin: 0; padding: 10px; border: solid 1px; border-radius: 3px; border-color: #9EB6D4; background-color: #EBF2F9&quot;&gt;
                                                                            &lt;div class=&quot;content&quot; style=&quot;float: left; line-height: 1,600; clear: both&quot;&gt;
                                                                                Dear $issue.reporter.name,&lt;br/&gt;
																				We have noticed that this issue has not been updated for a period of 7 days.&lt;br/&gt;
&lt;br/&gt;We will assume that this issue is resolved and close the ticket. If you still need help, just comment on the case via the web portal and we will reopen the case.
If you've managed to resolve this issue locally, please take a moment to share your solution for future reference.&lt;br/&gt;
Kind Regards,&lt;br/&gt;
HUB Support Team

                                                                            &lt;/div&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-actions email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding: 20px; padding-top: 0; padding-bottom: 20px; border-top-width: 0; border-bottom-width: 2px&quot;&gt;
                                                            You can &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot;&gt;view the full request&lt;/a&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													&lt;tr&gt;
                                                        &lt;td class=&quot;email-details&quot; style=&quot;padding: 20px&quot;&gt;
                                                            &lt;h2 style=&quot;margin: 0 0 10px; line-height: 1,200; font-size: 16px; font-weight: bold&quot;&gt;Details&lt;/h2&gt;
                                                            &lt;table class=&quot;email-request-details&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Brand
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12900&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Environment
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12901&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product Family
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12902&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12903&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Affected Version / Peripheral Serial Number
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12904&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Description
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;p&gt;$issue.description&lt;/p&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr class=&quot;last&quot;&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            What Is your installation number?
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_11002&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                &lt;/tbody&gt;
                                            &lt;/table&gt;
                                        &lt;/td&gt;
                                    &lt;/tr&gt;
                                &lt;/tbody&gt;
                            &lt;/table&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td id=&quot;foot-note&quot; style=&quot;padding-bottom: 20px;  font-size: 12px; line-height: 1,200&quot;&gt;
                            &lt;p style=&quot;width: 600px; text-align: center; margin: 0 auto&quot;&gt;This message is automatically generated by HUB Support Portal.&lt;br /&gt;&lt;/p&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
        &lt;/center&gt;
    &lt;/body&gt;</arg>
                  <arg name="FIELD_EMAIL_SUBJECT_TEMPLATE">[HUB Support Portal] $issue.summary [$issue]</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SendCustomEmail</arg>
                  <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()
issue.projectObject.name == 'HUB Support' &amp;&amp; groupManager.isUserInGroup(issue.reporter?.name, 'HS-customers')
</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_PREVIEW_ISSUE">HS-396</arg>
                  <arg name="FIELD_EMAIL_FORMAT">HTML</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FROM">support@hubparking.com</arg>
                  <arg name="FIELD_INCLUDE_ATTACHMENTS">FIELD_INCLUDE_ATTACHMENTS_NONE</arg>
                  <arg name="FIELD_TO_ADDRESSES"></arg>
                  <arg name="FIELD_CC_ADDRESSES"></arg>
                  <arg name="FIELD_CC_USER_FIELDS"></arg>
                  <arg name="FIELD_TO_USER_FIELDS">reporter</arg>
                  <arg name="FIELD_INCLUDE_ATTACHMENTS_CALLBACK"></arg>
                  <arg name="FIELD_EMAIL_TEMPLATE">&lt;head&gt;
	&lt;style type=&quot;text/css&quot;&gt;
		td, a, h2 {color: #003050}
		.value, .label {color: #003050}
		.request-status {color: #003050}
		.header-request-link {color: #6ba539}
	&lt;/style&gt;
&lt;/head&gt;

&lt;body style=&quot;background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
        &lt;span class=&quot;preheader&quot; style=&quot;display: none !important; font-size:1px; line-height: 1px; color: #cccccc;; display: none; font-size: 1px; line-height: 1px&quot;&gt;Status of the request $issue.summary with key $issue has been changed... &lt;/span&gt;&lt;center&gt;
            &lt;table id=&quot;email-wrap&quot; valign=&quot;top&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
                &lt;tbody&gt;
                    &lt;tr&gt;
                        &lt;td align=&quot;center&quot; id=&quot;email-wrap-cell&quot; style=&quot;padding: 20px 10px 10px&quot;&gt;
                            &lt;table id=&quot;email-container&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 600px; line-height: 1,500&quot;&gt;
                                &lt;tbody&gt;
                                    &lt;tr&gt;
                                        &lt;td align=&quot;left&quot;&gt;
                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                &lt;tbody&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-header&quot; style=&quot;padding: 10px 20px; border: solid #ddd; border-width: 1px 2px 1px 1px; border-bottom-color: #f5f5f5; background-color: #fff; font-weight: normal; line-height: 1,200&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 100%&quot;&gt;
                                                                &lt;tbody&gt;
																	&lt;tr&gt;
																		&lt;td class=&quot;viewport-details&quot; style=&quot;width: 100%&quot; align=&quot;right&quot; colspan=&quot;2&quot;&gt;
																			&lt;img src=&quot;/images/loghi/HUB Logo2.jpg&quot;/&gt;
																		&lt;/td&gt;
																	&lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;viewport-details&quot; style=&quot;width: 50%&quot;&gt;
                                                                            &lt;a href=&quot;&lt;% out &lt;&lt; componentManager.getApplicationProperties().getString(&quot;jira.baseurl&quot;) %&gt;/browse/$issue&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none&quot;&gt;&lt;strong style=&quot;font-weight: bold&quot;&gt;HUB Support Portal&lt;/strong&gt; - Support Request&lt;/a&gt;
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;request-key&quot; style=&quot;width: 50%; text-align: right; font-size: 12px; line-height: 18px; text-decoration: none&quot;&gt;
                                                                            &lt;!-- &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none; color: #707070&quot;&gt;Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;[$issue]&lt;/strong&gt;&lt;/a&gt; --&gt;
																			Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;$issue&lt;/strong&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-content-important email-heading&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 10px; border-top-color: #f5f5f5&quot;&gt;
                                                            &lt;h1 style=&quot;margin: 0; line-height: 1,200; font-size: 22px; font-weight: bold&quot;&gt;&lt;a href=&quot;&lt;% out &lt;&lt; componentManager.getApplicationProperties().getString(&quot;jira.baseurl&quot;) %&gt;/browse/$issue&quot; class=&quot;header-request-link&quot; style=&quot;text-decoration: none&quot;&gt;$issue.summary&lt;/a&gt; &lt;span class=&quot;request-status aui-lozenge aui-lozenge-current&quot; style=&quot;background-color: #cccccd; border: 1px solid #cccccd; border-radius: 3px; color: #333; display: inline-block; font-size: 11px; font-weight: bold; line-height: 1; padding: 2px 5px 1px 5px; text-align: center; text-decoration: none; text-transform: uppercase; background-color: #ffd351; border-color: #ffd351; margin-left: 5px; font-weight: bold; font-size: 14px&quot;&gt;Expired - Too much time without hearing anything from you&lt;/span&gt;&lt;/h1&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													
													&lt;tr&gt;
                                                        &lt;td class=&quot;latest-activity-container email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 0; border-top-width: 0&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;latest-activity activity-item status-update &quot; style=&quot;padding: 20px 10px; border-top: solid 1px #ccc; display: block; margin: 0; padding: 10px; border: solid 1px; border-radius: 3px; border-color: #9EB6D4; background-color: #EBF2F9&quot;&gt;
                                                                            &lt;div class=&quot;content&quot; style=&quot;float: left; line-height: 1,600; clear: both&quot;&gt;
                                                                                Dear $issue.reporter.name,&lt;br/&gt;
																				We have noticed that this issue has not been updated for a period of 7 days.&lt;br/&gt;
&lt;br/&gt;We will assume that this issue is resolved and close the ticket. If you still need help, just comment on the case via the web portal and we will reopen the case.
If you've managed to resolve this issue locally, please take a moment to share your solution for future reference.&lt;br/&gt;
Kind Regards,&lt;br/&gt;
HUB Support Team

                                                                            &lt;/div&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-actions email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding: 20px; padding-top: 0; padding-bottom: 20px; border-top-width: 0; border-bottom-width: 2px&quot;&gt;
                                                            You can &lt;a href=&quot;&lt;% out &lt;&lt; componentManager.getApplicationProperties().getString(&quot;jira.baseurl&quot;) %&gt;/browse/$issue&quot;&gt;view the full request&lt;/a&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													&lt;tr&gt;
                                                        &lt;td class=&quot;email-details&quot; style=&quot;padding: 20px&quot;&gt;
                                                            &lt;h2 style=&quot;margin: 0 0 10px; line-height: 1,200; font-size: 16px; font-weight: bold&quot;&gt;Details&lt;/h2&gt;
                                                            &lt;table class=&quot;email-request-details&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Brand
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12900&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Environment
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12901&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product Family
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12902&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12903&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Affected Version / Peripheral Serial Number
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12904&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Description
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;p&gt;$issue.description&lt;/p&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr class=&quot;last&quot;&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            What Is your installation number?
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_11002&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                &lt;/tbody&gt;
                                            &lt;/table&gt;
                                        &lt;/td&gt;
                                    &lt;/tr&gt;
                                &lt;/tbody&gt;
                            &lt;/table&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td id=&quot;foot-note&quot; style=&quot;padding-bottom: 20px;  font-size: 12px; line-height: 1,200&quot;&gt;
                            &lt;p style=&quot;width: 600px; text-align: center; margin: 0 auto&quot;&gt;This message is automatically generated by HUB Support Portal.&lt;br /&gt;&lt;/p&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
        &lt;/center&gt;
    &lt;/body&gt;</arg>
                  <arg name="FIELD_EMAIL_SUBJECT_TEMPLATE">[HS] $issue.summary [$issue]</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SendCustomEmail</arg>
                  <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()
issue.projectObject.name == 'HUB Support' &amp;&amp; !groupManager.isUserInGroup(issue.reporter?.name, 'HS-customers')
</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_PREVIEW_ISSUE">HS-396</arg>
                  <arg name="FIELD_EMAIL_FORMAT">HTML</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES"></arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT"></arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE">customScripts\SD_TransitionPostFunction.groovy</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES"></arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT"></arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE">customScripts\SD_UpdateComments.groovy</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="91" name="ReporterBackToSupport">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()

(currentUser.name == 'atlassian' &amp;&amp; issue.getProjectObject().key == 'BEHS') || issue.getProjectObject().key == 'HS'</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="9">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FROM">support@hubparking.com</arg>
                  <arg name="FIELD_INCLUDE_ATTACHMENTS">FIELD_INCLUDE_ATTACHMENTS_NONE</arg>
                  <arg name="FIELD_TO_ADDRESSES"></arg>
                  <arg name="FIELD_CC_ADDRESSES"></arg>
                  <arg name="FIELD_CC_USER_FIELDS"></arg>
                  <arg name="FIELD_TO_USER_FIELDS">reporter</arg>
                  <arg name="FIELD_INCLUDE_ATTACHMENTS_CALLBACK"></arg>
                  <arg name="FIELD_EMAIL_TEMPLATE">&lt;head&gt;
	&lt;style type=&quot;text/css&quot;&gt;
		td, a, h2 {color: #003050}
		.value, .label {color: #003050}
		.request-status {color: #003050}
		.header-request-link {color: #6ba539}
	&lt;/style&gt;
&lt;/head&gt;

&lt;body style=&quot;background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
        &lt;span class=&quot;preheader&quot; style=&quot;display: none !important; font-size:1px; line-height: 1px; display: none; font-size: 1px; line-height: 1px&quot;&gt;Status of the request $issue.summary with key $issue has been changed... &lt;/span&gt;&lt;center&gt;
            &lt;table id=&quot;email-wrap&quot; valign=&quot;top&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
                &lt;tbody&gt;
                    &lt;tr&gt;
                        &lt;td align=&quot;center&quot; id=&quot;email-wrap-cell&quot; style=&quot;padding: 20px 10px 10px&quot;&gt;
                            &lt;table id=&quot;email-container&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 600px; line-height: 1,500&quot;&gt;
                                &lt;tbody&gt;
                                    &lt;tr&gt;
                                        &lt;td align=&quot;left&quot;&gt;
                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                &lt;tbody&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-header&quot; style=&quot;padding: 10px 20px; border: solid #ddd; border-width: 1px 2px 1px 1px; border-bottom-color: #f5f5f5; background-color: #fff; font-weight: normal; line-height: 1,200&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 100%&quot;&gt;
                                                                &lt;tbody&gt;
																	&lt;tr&gt;
																		&lt;td class=&quot;viewport-details&quot; style=&quot;width: 100%&quot; align=&quot;right&quot; colspan=&quot;2&quot;&gt;
																			&lt;img src=&quot;/images/loghi/HUB Logo2.jpg&quot;/&gt;
																		&lt;/td&gt;
																	&lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;viewport-details&quot; style=&quot;width: 50%&quot;&gt;
                                                                            &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none;&quot;&gt;&lt;strong style=&quot;font-weight: bold&quot;&gt;HUB Support Portal&lt;/strong&gt; - Support Request&lt;/a&gt;
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;request-key&quot; style=&quot;width: 50%; text-align: right; font-size: 12px; line-height: 18px; text-decoration: none&quot;&gt;
                                                                            &lt;!-- &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none; color: #707070&quot;&gt;Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;[$issue]&lt;/strong&gt;&lt;/a&gt; --&gt;
																			Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;$issue&lt;/strong&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-content-important email-heading&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 10px; border-top-color: #f5f5f5&quot;&gt;
                                                            &lt;h1 style=&quot;margin: 0; line-height: 1,200; font-size: 22px; font-weight: bold;&quot;&gt;&lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot; class=&quot;header-request-link&quot; style=&quot; text-decoration: none&quot;&gt;$issue.summary&lt;/a&gt; &lt;span class=&quot;request-status aui-lozenge aui-lozenge-current&quot; style=&quot;background-color: #cccccd; border: 1px solid #cccccd; border-radius: 3px; color: #333; display: inline-block; font-size: 11px; font-weight: bold; line-height: 1; padding: 2px 5px 1px 5px; text-align: center; text-decoration: none; text-transform: uppercase; background-color: #ffd351; border-color: #ffd351; margin-left: 5px; font-weight: bold; font-size: 14px&quot;&gt;Issue in Charge of Support Team&lt;/span&gt;&lt;/h1&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;latest-activity-container email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 0; border-top-width: 0&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;latest-activity activity-item status-update &quot; style=&quot;padding: 20px 10px; border-top: solid 1px #ccc; display: block; margin: 0; padding: 10px; border: solid 1px; border-radius: 3px; border-color: #ffd351; background-color: #fffdf6&quot;&gt;
                                                                            &lt;div class=&quot;content&quot; style=&quot;float: left; line-height: 1,600; clear: both&quot;&gt;
                                                                                Status changed to &lt;strong style=&quot;font-weight: bold&quot;&gt;Issue in Charge of Support Team&lt;/strong&gt;
                                                                            &lt;/div&gt;
																			
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-actions email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding: 20px; padding-top: 0; padding-bottom: 20px; border-top-width: 0; border-bottom-width: 2px&quot;&gt;
                                                            You can &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot;&gt;view the full request&lt;/a&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    
													&lt;tr&gt;
                                                        &lt;td class=&quot;email-details&quot; style=&quot;padding: 20px&quot;&gt;
                                                            &lt;h2 style=&quot;margin: 0 0 10px; line-height: 1,200; font-size: 16px; font-weight: bold&quot;&gt;Details&lt;/h2&gt;
                                                            &lt;table class=&quot;email-request-details&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Brand
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12900&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Environment
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12901&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product Family
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12902&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12903&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Affected Version / Peripheral Serial Number
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12904&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Description
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;p&gt;$issue.description&lt;/p&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr class=&quot;last&quot;&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            What Is your installation number?
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_11002&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                &lt;/tbody&gt;
                                            &lt;/table&gt;
                                        &lt;/td&gt;
                                    &lt;/tr&gt;
                                &lt;/tbody&gt;
                            &lt;/table&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td id=&quot;foot-note&quot; style=&quot;padding-bottom: 20px;  font-size: 12px; line-height: 1,200&quot;&gt;
                            &lt;p style=&quot;width: 600px; text-align: center; margin: 0 auto&quot;&gt;This message is automatically generated by HUB Support Portal.&lt;br /&gt;&lt;/p&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
        &lt;/center&gt;
    &lt;/body&gt;</arg>
                  <arg name="FIELD_EMAIL_SUBJECT_TEMPLATE">[HUB Support Portal] $issue.summary [$issue]</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SendCustomEmail</arg>
                  <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()
issue.projectObject.name == 'HUB Support' &amp;&amp; groupManager.isUserInGroup(issue.reporter?.name, 'HS-customers')
</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_PREVIEW_ISSUE">HS-396</arg>
                  <arg name="FIELD_EMAIL_FORMAT">HTML</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES"></arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT"></arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE">customScripts\SD_TransitionPostFunction.groovy</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES"></arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT"></arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE">customScripts\SD_UpdateComments.groovy</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">7</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="101" name="TimeRearm">
          <meta name="jira.description">Loop Transition fro sending warning emails</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()

currentUser.name == 'atlassian' || (groupManager.isUserInGroup(currentUser.name, 'service-desk-agents') &amp;&amp; issue.getProjectObject().key == 'HS')</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="3">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FROM">support@hubparking.com</arg>
                  <arg name="FIELD_INCLUDE_ATTACHMENTS">FIELD_INCLUDE_ATTACHMENTS_NONE</arg>
                  <arg name="FIELD_TO_ADDRESSES"></arg>
                  <arg name="FIELD_CC_ADDRESSES"></arg>
                  <arg name="FIELD_CC_USER_FIELDS"></arg>
                  <arg name="FIELD_TO_USER_FIELDS">reporter</arg>
                  <arg name="FIELD_INCLUDE_ATTACHMENTS_CALLBACK"></arg>
                  <arg name="FIELD_EMAIL_TEMPLATE">&lt;head&gt;
	&lt;style type=&quot;text/css&quot;&gt;
		td, a, h2 {color: #003050}
		.value, .label {color: #003050}
		.request-status {color: #003050}
		.header-request-link {color: #6ba539}
	&lt;/style&gt;
&lt;/head&gt;

&lt;body style=&quot;background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
        &lt;span class=&quot;preheader&quot; style=&quot;display: none !important; font-size:1px; line-height: 1px; display: none; font-size: 1px; line-height: 1px&quot;&gt;Status of the request $issue.summary with key $issue has been changed... &lt;/span&gt;&lt;center&gt;
            &lt;table id=&quot;email-wrap&quot; valign=&quot;top&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
                &lt;tbody&gt;
                    &lt;tr&gt;
                        &lt;td align=&quot;center&quot; id=&quot;email-wrap-cell&quot; style=&quot;padding: 20px 10px 10px&quot;&gt;
                            &lt;table id=&quot;email-container&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 600px; line-height: 1,500&quot;&gt;
                                &lt;tbody&gt;
                                    &lt;tr&gt;
                                        &lt;td align=&quot;left&quot;&gt;
                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                &lt;tbody&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-header&quot; style=&quot;padding: 10px 20px; border: solid #ddd; border-width: 1px 2px 1px 1px; border-bottom-color: #f5f5f5; background-color: #fff; font-weight: normal; line-height: 1,200&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 100%&quot;&gt;
                                                                &lt;tbody&gt;
																	&lt;tr&gt;
																		&lt;td class=&quot;viewport-details&quot; style=&quot;width: 100%&quot; align=&quot;right&quot; colspan=&quot;2&quot;&gt;
																			&lt;img src=&quot;/images/loghi/HUB Logo2.jpg&quot;/&gt;
																		&lt;/td&gt;
																	&lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;viewport-details&quot; style=&quot;width: 50%&quot;&gt;
                                                                            &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none; &quot;&gt;&lt;strong style=&quot;font-weight: bold&quot;&gt;HUB Support Portal&lt;/strong&gt; - Support Request&lt;/a&gt;
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;request-key&quot; style=&quot;width: 50%; text-align: right; font-size: 12px; line-height: 18px; text-decoration: none&quot;&gt;
                                                                            &lt;!-- &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none; color: #707070&quot;&gt;Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;[$issue]&lt;/strong&gt;&lt;/a&gt; --&gt;
																			Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;$issue&lt;/strong&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-content-important email-heading&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 10px; border-top-color: #f5f5f5&quot;&gt;
                                                            &lt;h1 style=&quot;margin: 0; line-height: 1,200; font-size: 22px; font-weight: bold; &quot;&gt;&lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot; class=&quot;header-request-link&quot; style=&quot; text-decoration: none&quot;&gt;$issue.summary&lt;/a&gt; &lt;span class=&quot;request-status aui-lozenge aui-lozenge-current&quot; style=&quot;background-color: #cccccd; border: 1px solid #cccccd; border-radius: 3px; color: #333; display: inline-block; font-size: 11px; font-weight: bold; line-height: 1; padding: 2px 5px 1px 5px; text-align: center; text-decoration: none; text-transform: uppercase; background-color: #ffd351; border-color: #ffd351; margin-left: 5px; font-weight: bold; font-size: 14px&quot;&gt;Waiting for your feedback - REMINDER&lt;/span&gt;&lt;/h1&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													
													&lt;tr&gt;
                                                        &lt;td class=&quot;latest-activity-container email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 0; border-top-width: 0&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;latest-activity activity-item status-update &quot; style=&quot;padding: 20px 10px; border-top: solid 1px #ccc; display: block; margin: 0; padding: 10px; border: solid 1px; border-radius: 3px; border-color: #9EB6D4; background-color: #EBF2F9&quot;&gt;
                                                                            &lt;div class=&quot;content&quot; style=&quot;float: left; line-height: 1,600; clear: both&quot;&gt;
                                                                                Dear $issue.reporter.name,&lt;br/&gt;
																				this is an automatic email to remind you that your request ($issue) is still pending and awaits your feedback.&lt;br/&gt;
																				If the request will not be updated for a period of 7 days, it will be automatically closed.&lt;br/&gt;
																				Please follow the link below to review and update your request.&lt;br/&gt;
Kind Regards,&lt;br/&gt;
HUB Support Team



                                                                            &lt;/div&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-actions email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding: 20px; padding-top: 0; padding-bottom: 20px; border-top-width: 0; border-bottom-width: 2px&quot;&gt;
                                                            You can &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot;&gt;view the full request&lt;/a&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													&lt;tr&gt;
                                                        &lt;td class=&quot;email-details&quot; style=&quot;padding: 20px&quot;&gt;
                                                            &lt;h2 style=&quot;margin: 0 0 10px; line-height: 1,200; font-size: 16px; font-weight: bold&quot;&gt;Details&lt;/h2&gt;
                                                            &lt;table class=&quot;email-request-details&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Brand
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12900&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Environment
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12901&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product Family
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12902&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12903&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Affected Version / Peripheral Serial Number
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12904&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Description
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;p&gt;$issue.description&lt;/p&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr class=&quot;last&quot;&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            What Is your installation number?
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_11002&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                &lt;/tbody&gt;
                                            &lt;/table&gt;
                                        &lt;/td&gt;
                                    &lt;/tr&gt;
                                &lt;/tbody&gt;
                            &lt;/table&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td id=&quot;foot-note&quot; style=&quot;padding-bottom: 20px;  font-size: 12px; line-height: 1,200&quot;&gt;
                            &lt;p style=&quot;width: 600px; text-align: center; margin: 0 auto&quot;&gt;This message is automatically generated by HUB Support Portal.&lt;br /&gt;&lt;/p&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
        &lt;/center&gt;
    &lt;/body&gt;</arg>
                  <arg name="FIELD_EMAIL_SUBJECT_TEMPLATE">[HUB Support Portal] $issue.summary [$issue]</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SendCustomEmail</arg>
                  <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()
issue.projectObject.name == 'HUB Support' &amp;&amp; groupManager.isUserInGroup(issue.reporter?.name, 'HS-customers')</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_PREVIEW_ISSUE">HS-396</arg>
                  <arg name="FIELD_EMAIL_FORMAT">HTML</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FROM">support@hubparking.com</arg>
                  <arg name="FIELD_INCLUDE_ATTACHMENTS">FIELD_INCLUDE_ATTACHMENTS_NONE</arg>
                  <arg name="FIELD_TO_ADDRESSES"></arg>
                  <arg name="FIELD_CC_ADDRESSES"></arg>
                  <arg name="FIELD_CC_USER_FIELDS"></arg>
                  <arg name="FIELD_TO_USER_FIELDS">reporter</arg>
                  <arg name="FIELD_INCLUDE_ATTACHMENTS_CALLBACK"></arg>
                  <arg name="FIELD_EMAIL_TEMPLATE">&lt;head&gt;
	&lt;style type=&quot;text/css&quot;&gt;
		td, a, h2 {color: #003050}
		.value, .label {color: #003050}
		.request-status {color: #003050}
		.header-request-link {color: #6ba539}
	&lt;/style&gt;
&lt;/head&gt;

&lt;body style=&quot;background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
        &lt;span class=&quot;preheader&quot; style=&quot;display: none !important; font-size:1px; line-height: 1px; display: none; font-size: 1px; line-height: 1px&quot;&gt;Status of the request $issue.summary with key $issue has been changed... &lt;/span&gt;&lt;center&gt;
            &lt;table id=&quot;email-wrap&quot; valign=&quot;top&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
                &lt;tbody&gt;
                    &lt;tr&gt;
                        &lt;td align=&quot;center&quot; id=&quot;email-wrap-cell&quot; style=&quot;padding: 20px 10px 10px&quot;&gt;
                            &lt;table id=&quot;email-container&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 600px; line-height: 1,500&quot;&gt;
                                &lt;tbody&gt;
                                    &lt;tr&gt;
                                        &lt;td align=&quot;left&quot;&gt;
                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                &lt;tbody&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-header&quot; style=&quot;padding: 10px 20px; border: solid #ddd; border-width: 1px 2px 1px 1px; border-bottom-color: #f5f5f5; background-color: #fff; font-weight: normal; line-height: 1,200&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 100%&quot;&gt;
                                                                &lt;tbody&gt;
																	&lt;tr&gt;
																		&lt;td class=&quot;viewport-details&quot; style=&quot;width: 100%&quot; align=&quot;right&quot; colspan=&quot;2&quot;&gt;
																			&lt;img src=&quot;/images/loghi/HUB Logo2.jpg&quot;/&gt;
																		&lt;/td&gt;
																	&lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;viewport-details&quot; style=&quot;width: 50%&quot;&gt;
                                                                            &lt;a href=&quot;&lt;% out &lt;&lt; componentManager.getApplicationProperties().getString(&quot;jira.baseurl&quot;) %&gt;/browse/$issue&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none;&quot;&gt;&lt;strong style=&quot;font-weight: bold&quot;&gt;HUB Support Portal&lt;/strong&gt; - Support Request&lt;/a&gt;
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;request-key&quot; style=&quot;width: 50%; text-align: right; font-size: 12px; line-height: 18px; text-decoration: none&quot;&gt;
                                                                            &lt;!-- &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none; color: #707070&quot;&gt;Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;[$issue]&lt;/strong&gt;&lt;/a&gt; --&gt;
																			Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;$issue&lt;/strong&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-content-important email-heading&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 10px; border-top-color: #f5f5f5&quot;&gt;
                                                            &lt;h1 style=&quot;margin: 0; line-height: 1,200; font-size: 22px; font-weight: bold;&quot;&gt;&lt;a href=&quot;&lt;% out &lt;&lt; componentManager.getApplicationProperties().getString(&quot;jira.baseurl&quot;) %&gt;/browse/$issue&quot; class=&quot;header-request-link&quot; style=&quot;text-decoration: none&quot;&gt;$issue.summary&lt;/a&gt; &lt;span class=&quot;request-status aui-lozenge aui-lozenge-current&quot; style=&quot;background-color: #cccccd; border: 1px solid #cccccd; border-radius: 3px; color: #333; display: inline-block; font-size: 11px; font-weight: bold; line-height: 1; padding: 2px 5px 1px 5px; text-align: center; text-decoration: none; text-transform: uppercase; background-color: #ffd351; border-color: #ffd351; margin-left: 5px; font-weight: bold; font-size: 14px&quot;&gt;Waiting for your feedback - REMINDER&lt;/span&gt;&lt;/h1&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													
													&lt;tr&gt;
                                                        &lt;td class=&quot;latest-activity-container email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 0; border-top-width: 0&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;latest-activity activity-item status-update &quot; style=&quot;padding: 20px 10px; border-top: solid 1px #ccc; display: block; margin: 0; padding: 10px; border: solid 1px; border-radius: 3px; border-color: #9EB6D4; background-color: #EBF2F9&quot;&gt;
                                                                            &lt;div class=&quot;content&quot; style=&quot;float: left; line-height: 1,600; clear: both&quot;&gt;
                                                                                Dear $issue.reporter.name,&lt;br/&gt;
																				this is an automatic email to remind you that your request ($issue) is still pending and awaits your feedback.&lt;br/&gt;
																				If the request will not be updated for a period of 7 days, it will be automatically closed.&lt;br/&gt;
																				Please follow the link below to review and update your request.&lt;br/&gt;
Kind Regards,&lt;br/&gt;
HUB Support Team



                                                                            &lt;/div&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-actions email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding: 20px; padding-top: 0; padding-bottom: 20px; border-top-width: 0; border-bottom-width: 2px&quot;&gt;
                                                            You can &lt;a href=&quot;&lt;% out &lt;&lt; componentManager.getApplicationProperties().getString(&quot;jira.baseurl&quot;) %&gt;/browse/$issue&quot;&gt;view the full request&lt;/a&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													&lt;tr&gt;
                                                        &lt;td class=&quot;email-details&quot; style=&quot;padding: 20px&quot;&gt;
                                                            &lt;h2 style=&quot;margin: 0 0 10px; line-height: 1,200; font-size: 16px; font-weight: bold&quot;&gt;Details&lt;/h2&gt;
                                                            &lt;table class=&quot;email-request-details&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Brand
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12900&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Environment
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12901&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product Family
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12902&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12903&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Affected Version / Peripheral Serial Number
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12904&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Description
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;p&gt;$issue.description&lt;/p&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr class=&quot;last&quot;&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            What Is your installation number?
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_11002&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                &lt;/tbody&gt;
                                            &lt;/table&gt;
                                        &lt;/td&gt;
                                    &lt;/tr&gt;
                                &lt;/tbody&gt;
                            &lt;/table&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td id=&quot;foot-note&quot; style=&quot;padding-bottom: 20px;  font-size: 12px; line-height: 1,200&quot;&gt;
                            &lt;p style=&quot;width: 600px; text-align: center; margin: 0 auto&quot;&gt;This message is automatically generated by HUB Support Portal.&lt;br /&gt;&lt;/p&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
        &lt;/center&gt;
    &lt;/body&gt;</arg>
                  <arg name="FIELD_EMAIL_SUBJECT_TEMPLATE">[HS] $issue.summary [$issue]</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SendCustomEmail</arg>
                  <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()
issue.projectObject.name == 'HUB Support' &amp;&amp; !groupManager.isUserInGroup(issue.reporter?.name, 'HS-customers')</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_PREVIEW_ISSUE">HS-396</arg>
                  <arg name="FIELD_EMAIL_FORMAT">HTML</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES"></arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT"></arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE">customScripts\SD_TransitionPostFunction.groovy</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES"></arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT"></arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE">customScripts\SD_UpdateComments.groovy</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="4" name="EngineeringWait">
      <meta name="jira.status.id">10028</meta>
      <actions>
        <action id="121" name="EngineeringBackToSupport" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">12403</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()
currentUser.name == 'atlassian' || (issue.getProjectObject().key == 'BEHS')</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="hidFieldsList">assignee@@</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="2">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES"></arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT"></arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE">customScripts\SD_TransitionPostFunction.groovy</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES"></arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT"></arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE">customScripts\SD_UpdateComments.groovy</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">3</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="5" name="Closed">
      <meta name="jira.status.id">6</meta>
      <actions>
        <action id="71" name="ReOpen">
          <meta name="jira.description">This issue needs to go back to the technical assistance</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()

(currentUser.name == 'atlassian' &amp;&amp; issue.getProjectObject().key == 'BEHS') || issue.getProjectObject().key == 'HS'</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="1">
              <post-functions>
                <function type="class">
                  <arg name="field.name">resolution</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
                  <arg name="field.value"></arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FROM">support@hubparking.com</arg>
                  <arg name="FIELD_INCLUDE_ATTACHMENTS">FIELD_INCLUDE_ATTACHMENTS_NONE</arg>
                  <arg name="FIELD_TO_ADDRESSES"></arg>
                  <arg name="FIELD_CC_ADDRESSES"></arg>
                  <arg name="FIELD_CC_USER_FIELDS"></arg>
                  <arg name="FIELD_TO_USER_FIELDS">reporter</arg>
                  <arg name="FIELD_INCLUDE_ATTACHMENTS_CALLBACK"></arg>
                  <arg name="FIELD_EMAIL_TEMPLATE">&lt;head&gt;
	&lt;style type=&quot;text/css&quot;&gt;
		td, a, h2 {color: #003050}
		.value, .label {color: #003050}
		.request-status {color: #003050}
		.header-request-link {color: #6ba539}
	&lt;/style&gt;
&lt;/head&gt;

&lt;body style=&quot;background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
        &lt;span class=&quot;preheader&quot; style=&quot;display: none !important; font-size:1px; line-height: 1px; display: none; font-size: 1px; line-height: 1px&quot;&gt;Status of the request $issue.summary with key $issue has been changed... &lt;/span&gt;&lt;center&gt;
            &lt;table id=&quot;email-wrap&quot; valign=&quot;top&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
                &lt;tbody&gt;
                    &lt;tr&gt;
                        &lt;td align=&quot;center&quot; id=&quot;email-wrap-cell&quot; style=&quot;padding: 20px 10px 10px&quot;&gt;
                            &lt;table id=&quot;email-container&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 600px; line-height: 1,500&quot;&gt;
                                &lt;tbody&gt;
                                    &lt;tr&gt;
                                        &lt;td align=&quot;left&quot;&gt;
                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                &lt;tbody&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-header&quot; style=&quot;padding: 10px 20px; border: solid #ddd; border-width: 1px 2px 1px 1px; border-bottom-color: #f5f5f5; background-color: #fff; font-weight: normal; line-height: 1,200&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 100%&quot;&gt;
                                                                &lt;tbody&gt;
																	&lt;tr&gt;
																		&lt;td class=&quot;viewport-details&quot; style=&quot;width: 100%&quot; align=&quot;right&quot; colspan=&quot;2&quot;&gt;
																			&lt;img src=&quot;/images/loghi/HUB Logo2.jpg&quot;/&gt;
																		&lt;/td&gt;
																	&lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;viewport-details&quot; style=&quot;width: 50%&quot;&gt;
                                                                            &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none; &quot;&gt;&lt;strong style=&quot;font-weight: bold&quot;&gt;HUB Support Portal&lt;/strong&gt; - Support Request&lt;/a&gt;
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;request-key&quot; style=&quot;width: 50%; text-align: right; font-size: 12px; line-height: 18px; text-decoration: none&quot;&gt;
                                                                            &lt;!-- &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none; color: #707070&quot;&gt;Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;[$issue]&lt;/strong&gt;&lt;/a&gt; --&gt;
																			Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;$issue&lt;/strong&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-content-important email-heading&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 10px; border-top-color: #f5f5f5&quot;&gt;
                                                            &lt;h1 style=&quot;margin: 0; line-height: 1,200; font-size: 22px; font-weight: bold;&quot;&gt;&lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot; class=&quot;header-request-link&quot; style=&quot; text-decoration: none&quot;&gt;$issue.summary&lt;/a&gt; &lt;span class=&quot;request-status aui-lozenge aui-lozenge-current&quot; style=&quot;background-color: #cccccd; border: 1px solid #cccccd; border-radius: 3px; color: #333; display: inline-block; font-size: 11px; font-weight: bold; line-height: 1; padding: 2px 5px 1px 5px; text-align: center; text-decoration: none; text-transform: uppercase; background-color: #4A6785; border-color: #4A6785; color: #ffffff; margin-left: 5px; font-weight: bold; font-size: 14px&quot;&gt;$issue.status.name&lt;/span&gt;&lt;/h1&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													&lt;tr&gt;
                                                        &lt;td class=&quot;latest-activity-container email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 0; border-top-width: 0&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;latest-activity activity-item status-update &quot; style=&quot;padding: 20px 10px; border-top: solid 1px #ccc; display: block; margin: 0; padding: 10px; border: solid 1px; border-radius: 3px; border-color: #4A6785; background-color: #fffdf6&quot;&gt;
                                                                            &lt;div class=&quot;content&quot; style=&quot;float: left; line-height: 1,600; clear: both&quot;&gt;
                                                                                Status changed to &lt;strong style=&quot;font-weight: bold&quot;&gt;$issue.status.name&lt;/strong&gt;
                                                                            &lt;/div&gt;
																			
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-actions email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding: 20px; padding-top: 0; padding-bottom: 20px; border-top-width: 0; border-bottom-width: 2px&quot;&gt;
                                                            You can &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot;&gt;view the full request&lt;/a&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													
													&lt;tr&gt;
                                                        &lt;td class=&quot;email-details&quot; style=&quot;padding: 20px&quot;&gt;
                                                            &lt;h2 style=&quot;margin: 0 0 10px; line-height: 1,200; font-size: 16px; font-weight: bold&quot;&gt;Details&lt;/h2&gt;
                                                            &lt;table class=&quot;email-request-details&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Brand
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12900&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Environment
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12901&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product Family
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12902&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12903&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Affected Version / Peripheral Serial Number
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12904&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Description
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;p&gt;$issue.description&lt;/p&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr class=&quot;last&quot;&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            What Is your installation number?
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_11002&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                &lt;/tbody&gt;
                                            &lt;/table&gt;
                                        &lt;/td&gt;
                                    &lt;/tr&gt;
                                &lt;/tbody&gt;
                            &lt;/table&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td id=&quot;foot-note&quot; style=&quot;padding-bottom: 20px;  font-size: 12px; line-height: 1,200&quot;&gt;
                            &lt;p style=&quot;width: 600px; text-align: center; margin: 0 auto&quot;&gt;This message is automatically generated by HUB Support Portal.&lt;br /&gt;&lt;/p&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
        &lt;/center&gt;
    &lt;/body&gt;</arg>
                  <arg name="FIELD_EMAIL_SUBJECT_TEMPLATE">[HUB Support Portal] $issue.summary [$issue]</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SendCustomEmail</arg>
                  <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()
issue.projectObject.name == 'HUB Support' &amp;&amp; groupManager.isUserInGroup(issue.reporter?.name, 'HS-customers')</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_PREVIEW_ISSUE">HS-396</arg>
                  <arg name="FIELD_EMAIL_FORMAT">HTML</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES"></arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT"></arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE">customScripts\SD_TransitionPostFunction.groovy</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES"></arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT"></arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE">customScripts\SD_UpdateComments.groovy</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">7</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="6" name="Resolved">
      <meta name="jira.status.id">5</meta>
      <actions>
<common-action id="81" />
        <action id="31" name="Close">
          <meta name="jira.description">This action closes the ticket assuming that the issue is validated from the field</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()

currentUser.name == 'atlassian' || (groupManager.isUserInGroup(currentUser.name, 'service-desk-agents') &amp;&amp; issue.getProjectObject().key == 'HS')</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="5">
              <post-functions>
                <function type="class">
                  <arg name="field.name">resolution</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
                  <arg name="field.value">6</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FROM">support@hubparking.com</arg>
                  <arg name="FIELD_INCLUDE_ATTACHMENTS">FIELD_INCLUDE_ATTACHMENTS_NONE</arg>
                  <arg name="FIELD_TO_ADDRESSES"></arg>
                  <arg name="FIELD_CC_ADDRESSES"></arg>
                  <arg name="FIELD_CC_USER_FIELDS"></arg>
                  <arg name="FIELD_TO_USER_FIELDS">reporter</arg>
                  <arg name="FIELD_INCLUDE_ATTACHMENTS_CALLBACK"></arg>
                  <arg name="FIELD_EMAIL_TEMPLATE">&lt;head&gt;
	&lt;style type=&quot;text/css&quot;&gt;
		td, a, h2 {color: #003050}
		.value, .label {color: #003050}
		.request-status {color: #003050}
		.header-request-link {color: #6ba539}
	&lt;/style&gt;
&lt;/head&gt;

&lt;body style=&quot;background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
        &lt;span class=&quot;preheader&quot; style=&quot;display: none !important; font-size:1px; line-height: 1px; display: none; font-size: 1px; line-height: 1px&quot;&gt;Status of the request $issue.summary with key $issue has been changed... &lt;/span&gt;&lt;center&gt;
            &lt;table id=&quot;email-wrap&quot; valign=&quot;top&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
                &lt;tbody&gt;
                    &lt;tr&gt;
                        &lt;td align=&quot;center&quot; id=&quot;email-wrap-cell&quot; style=&quot;padding: 20px 10px 10px&quot;&gt;
                            &lt;table id=&quot;email-container&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 600px; line-height: 1,500&quot;&gt;
                                &lt;tbody&gt;
                                    &lt;tr&gt;
                                        &lt;td align=&quot;left&quot;&gt;
                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                &lt;tbody&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-header&quot; style=&quot;padding: 10px 20px; border: solid #ddd; border-width: 1px 2px 1px 1px; border-bottom-color: #f5f5f5; background-color: #fff; font-weight: normal; line-height: 1,200&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 100%&quot;&gt;
                                                                &lt;tbody&gt;
																	&lt;tr&gt;
																		&lt;td class=&quot;viewport-details&quot; style=&quot;width: 100%&quot; align=&quot;right&quot; colspan=&quot;2&quot;&gt;
																			&lt;img src=&quot;/images/loghi/HUB Logo2.jpg&quot;/&gt;
																		&lt;/td&gt;
																	&lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;viewport-details&quot; style=&quot;width: 50%&quot;&gt;
                                                                            &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none; &quot;&gt;&lt;strong style=&quot;font-weight: bold&quot;&gt;HUB Support Portal&lt;/strong&gt; - Support Request&lt;/a&gt;
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;request-key&quot; style=&quot;width: 50%; text-align: right; font-size: 12px; line-height: 18px; text-decoration: none&quot;&gt;
                                                                            &lt;!-- &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none; color: #707070&quot;&gt;Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;[$issue]&lt;/strong&gt;&lt;/a&gt; --&gt;
																			Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;$issue&lt;/strong&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-content-important email-heading&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 10px; border-top-color: #f5f5f5&quot;&gt;
                                                            &lt;h1 style=&quot;margin: 0; line-height: 1,200; font-size: 22px; font-weight: bold; &quot;&gt;&lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot; class=&quot;header-request-link&quot; style=&quot;text-decoration: none&quot;&gt;$issue.summary&lt;/a&gt; &lt;span class=&quot;request-status aui-lozenge aui-lozenge-current&quot; style=&quot;background-color: #cccccd; border: 1px solid #cccccd; border-radius: 3px; color: #333; display: inline-block; font-size: 11px; font-weight: bold; line-height: 1; padding: 2px 5px 1px 5px; text-align: center; text-decoration: none; text-transform: uppercase; background-color: #14892C; border-color: #14892C; color: #ffffff; margin-left: 5px; font-weight: bold; font-size: 14px&quot;&gt;$issue.status.name&lt;/span&gt;&lt;/h1&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													&lt;tr&gt;
                                                        &lt;td class=&quot;latest-activity-container email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 0; border-top-width: 0&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;latest-activity activity-item status-update &quot; style=&quot;padding: 20px 10px; border-top: solid 1px #ccc; display: block; margin: 0; padding: 10px; border: solid 1px; border-radius: 3px; border-color: #14892C; background-color: #fffdf6&quot;&gt;
                                                                            &lt;div class=&quot;content&quot; style=&quot;float: left; line-height: 1,600; clear: both&quot;&gt;
                                                                                Status changed to &lt;strong style=&quot;font-weight: bold&quot;&gt;$issue.status.name&lt;/strong&gt;
                                                                            &lt;/div&gt;
																			
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-actions email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding: 20px; padding-top: 0; padding-bottom: 20px; border-top-width: 0; border-bottom-width: 2px&quot;&gt;
                                                            You can &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot;&gt;view the full request&lt;/a&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													
													&lt;tr&gt;
                                                        &lt;td class=&quot;email-details&quot; style=&quot;padding: 20px&quot;&gt;
                                                            &lt;h2 style=&quot;margin: 0 0 10px; line-height: 1,200; font-size: 16px; font-weight: bold&quot;&gt;Details&lt;/h2&gt;
                                                            &lt;table class=&quot;email-request-details&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Brand
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12900&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Environment
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12901&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product Family
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12902&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12903&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Affected Version / Peripheral Serial Number
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12904&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Description
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;p&gt;$issue.description&lt;/p&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr class=&quot;last&quot;&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            What Is your installation number?
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_11002&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                &lt;/tbody&gt;
                                            &lt;/table&gt;
                                        &lt;/td&gt;
                                    &lt;/tr&gt;
                                &lt;/tbody&gt;
                            &lt;/table&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td id=&quot;foot-note&quot; style=&quot;padding-bottom: 20px;  font-size: 12px; line-height: 1,200&quot;&gt;
                            &lt;p style=&quot;width: 600px; text-align: center; margin: 0 auto&quot;&gt;This message is automatically generated by HUB Support Portal.&lt;br /&gt;&lt;/p&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
        &lt;/center&gt;
    &lt;/body&gt;</arg>
                  <arg name="FIELD_EMAIL_SUBJECT_TEMPLATE">[HUB Support Portal] $issue.summary [$issue]</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SendCustomEmail</arg>
                  <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()
issue.projectObject.name == 'HUB Support' &amp;&amp; groupManager.isUserInGroup(issue.reporter?.name, 'HS-customers')</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_PREVIEW_ISSUE">HS-396</arg>
                  <arg name="FIELD_EMAIL_FORMAT">HTML</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FROM">support@hubparking.com</arg>
                  <arg name="FIELD_INCLUDE_ATTACHMENTS">FIELD_INCLUDE_ATTACHMENTS_NONE</arg>
                  <arg name="FIELD_TO_ADDRESSES"></arg>
                  <arg name="FIELD_CC_ADDRESSES"></arg>
                  <arg name="FIELD_CC_USER_FIELDS"></arg>
                  <arg name="FIELD_TO_USER_FIELDS">reporter</arg>
                  <arg name="FIELD_INCLUDE_ATTACHMENTS_CALLBACK"></arg>
                  <arg name="FIELD_EMAIL_TEMPLATE">&lt;head&gt;
	&lt;style type=&quot;text/css&quot;&gt;
		td, a, h2 {color: #003050}
		.value, .label {color: #003050}
		.request-status {color: #003050}
		.header-request-link {color: #6ba539}
	&lt;/style&gt;
&lt;/head&gt;

&lt;body style=&quot;background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
        &lt;span class=&quot;preheader&quot; style=&quot;display: none !important; font-size:1px; line-height: 1px; display: none; font-size: 1px; line-height: 1px&quot;&gt;Status of the request $issue.summary with key $issue has been changed... &lt;/span&gt;&lt;center&gt;
            &lt;table id=&quot;email-wrap&quot; valign=&quot;top&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
                &lt;tbody&gt;
                    &lt;tr&gt;
                        &lt;td align=&quot;center&quot; id=&quot;email-wrap-cell&quot; style=&quot;padding: 20px 10px 10px&quot;&gt;
                            &lt;table id=&quot;email-container&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 600px; line-height: 1,500&quot;&gt;
                                &lt;tbody&gt;
                                    &lt;tr&gt;
                                        &lt;td align=&quot;left&quot;&gt;
                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                &lt;tbody&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-header&quot; style=&quot;padding: 10px 20px; border: solid #ddd; border-width: 1px 2px 1px 1px; border-bottom-color: #f5f5f5; background-color: #fff; font-weight: normal; line-height: 1,200&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 100%&quot;&gt;
                                                                &lt;tbody&gt;
																	&lt;tr&gt;
																		&lt;td class=&quot;viewport-details&quot; style=&quot;width: 100%&quot; align=&quot;right&quot; colspan=&quot;2&quot;&gt;
																			&lt;img src=&quot;/images/loghi/HUB Logo2.jpg&quot;/&gt;
																		&lt;/td&gt;
																	&lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;viewport-details&quot; style=&quot;width: 50%&quot;&gt;
                                                                            &lt;a href=&quot;&lt;% out &lt;&lt; componentManager.getApplicationProperties().getString(&quot;jira.baseurl&quot;) %&gt;/browse/$issue&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none;&quot;&gt;&lt;strong style=&quot;font-weight: bold&quot;&gt;HUB Support Portal&lt;/strong&gt; - Support Request&lt;/a&gt;
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;request-key&quot; style=&quot;width: 50%; text-align: right; font-size: 12px; line-height: 18px; text-decoration: none&quot;&gt;
                                                                            &lt;!-- &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none; &quot;&gt;Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;[$issue]&lt;/strong&gt;&lt;/a&gt; --&gt;
																			Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;$issue&lt;/strong&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-content-important email-heading&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 10px; border-top-color: #f5f5f5&quot;&gt;
                                                            &lt;h1 style=&quot;margin: 0; line-height: 1,200; font-size: 22px; font-weight: bold;&quot;&gt;&lt;a href=&quot;&lt;% out &lt;&lt; componentManager.getApplicationProperties().getString(&quot;jira.baseurl&quot;) %&gt;/browse/$issue&quot; class=&quot;header-request-link&quot; style=&quot;text-decoration: none&quot;&gt;$issue.summary&lt;/a&gt; &lt;span class=&quot;request-status aui-lozenge aui-lozenge-current&quot; style=&quot;background-color: #cccccd; border: 1px solid #cccccd; border-radius: 3px; color: #333; display: inline-block; font-size: 11px; font-weight: bold; line-height: 1; padding: 2px 5px 1px 5px; text-align: center; text-decoration: none; text-transform: uppercase; background-color: #14892C; border-color: #14892C; color: #ffffff; margin-left: 5px; font-weight: bold; font-size: 14px&quot;&gt;$issue.status.name&lt;/span&gt;&lt;/h1&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													&lt;tr&gt;
                                                        &lt;td class=&quot;latest-activity-container email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 0; border-top-width: 0&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;latest-activity activity-item status-update &quot; style=&quot;padding: 20px 10px; border-top: solid 1px #ccc; display: block; margin: 0; padding: 10px; border: solid 1px; border-radius: 3px; border-color: #14892C; background-color: #fffdf6&quot;&gt;
                                                                            &lt;div class=&quot;content&quot; style=&quot;float: left; line-height: 1,600; clear: both&quot;&gt;
                                                                                Status changed to &lt;strong style=&quot;font-weight: bold&quot;&gt;$issue.status.name&lt;/strong&gt;
                                                                            &lt;/div&gt;
																			
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-actions email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding: 20px; padding-top: 0; padding-bottom: 20px; border-top-width: 0; border-bottom-width: 2px&quot;&gt;
                                                            You can &lt;a href=&quot;&lt;% out &lt;&lt; componentManager.getApplicationProperties().getString(&quot;jira.baseurl&quot;) %&gt;/browse/$issue&quot;&gt;view the full request&lt;/a&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													
													&lt;tr&gt;
                                                        &lt;td class=&quot;email-details&quot; style=&quot;padding: 20px&quot;&gt;
                                                            &lt;h2 style=&quot;margin: 0 0 10px; line-height: 1,200; font-size: 16px; font-weight: bold&quot;&gt;Details&lt;/h2&gt;
                                                            &lt;table class=&quot;email-request-details&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Brand
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12900&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Environment
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12901&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product Family
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12902&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12903&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Affected Version / Peripheral Serial Number
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12904&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Description
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;p&gt;$issue.description&lt;/p&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr class=&quot;last&quot;&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            What Is your installation number?
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_11002&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                &lt;/tbody&gt;
                                            &lt;/table&gt;
                                        &lt;/td&gt;
                                    &lt;/tr&gt;
                                &lt;/tbody&gt;
                            &lt;/table&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td id=&quot;foot-note&quot; style=&quot;padding-bottom: 20px;  font-size: 12px; line-height: 1,200&quot;&gt;
                            &lt;p style=&quot;width: 600px; text-align: center; margin: 0 auto&quot;&gt;This message is automatically generated by HUB Support Portal.&lt;br /&gt;&lt;/p&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
        &lt;/center&gt;
    &lt;/body&gt;</arg>
                  <arg name="FIELD_EMAIL_SUBJECT_TEMPLATE">[HS] $issue.summary [$issue]</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SendCustomEmail</arg>
                  <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()
issue.projectObject.name == 'HUB Support' &amp;&amp; !groupManager.isUserInGroup(issue.reporter?.name, 'HS-customers')</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_PREVIEW_ISSUE">HS-396</arg>
                  <arg name="FIELD_EMAIL_FORMAT">HTML</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES"></arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT"></arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE">customScripts\SD_TransitionPostFunction.groovy</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES"></arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT"></arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE">customScripts\SD_UpdateComments.groovy</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="7" name="Expired">
      <meta name="jira.status.id">10029</meta>
      <actions>
        <action id="111" name="ReOpen">
          <meta name="jira.description">This issue needs to go back to the technical assistance</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()

(currentUser.name == 'atlassian' &amp;&amp; issue.getProjectObject().key == 'BEHS') || issue.getProjectObject().key == 'HS'</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="9">
              <post-functions>
                <function type="class">
                  <arg name="field.name">resolution</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
                  <arg name="field.value"></arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FROM">support@hubparking.com</arg>
                  <arg name="FIELD_INCLUDE_ATTACHMENTS">FIELD_INCLUDE_ATTACHMENTS_NONE</arg>
                  <arg name="FIELD_TO_ADDRESSES"></arg>
                  <arg name="FIELD_CC_ADDRESSES"></arg>
                  <arg name="FIELD_CC_USER_FIELDS"></arg>
                  <arg name="FIELD_TO_USER_FIELDS">reporter</arg>
                  <arg name="FIELD_INCLUDE_ATTACHMENTS_CALLBACK"></arg>
                  <arg name="FIELD_EMAIL_TEMPLATE">&lt;head&gt;
	&lt;style type=&quot;text/css&quot;&gt;
		td, a, h2 {color: #003050}
		.value, .label {color: #003050}
		.request-status {color: #003050}
		.header-request-link {color: #6ba539}
	&lt;/style&gt;
&lt;/head&gt;

&lt;body style=&quot;background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
        &lt;span class=&quot;preheader&quot; style=&quot;display: none !important; font-size:1px; line-height: 1px; display: none; font-size: 1px; line-height: 1px&quot;&gt;Status of the request $issue.summary with key $issue has been changed... &lt;/span&gt;&lt;center&gt;
            &lt;table id=&quot;email-wrap&quot; valign=&quot;top&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; background-color: #f5f5f5; font-size: 16px; font-family: sans-serif&quot;&gt;
                &lt;tbody&gt;
                    &lt;tr&gt;
                        &lt;td align=&quot;center&quot; id=&quot;email-wrap-cell&quot; style=&quot;padding: 20px 10px 10px&quot;&gt;
                            &lt;table id=&quot;email-container&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 600px; line-height: 1,500&quot;&gt;
                                &lt;tbody&gt;
                                    &lt;tr&gt;
                                        &lt;td align=&quot;left&quot;&gt;
                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                &lt;tbody&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-header&quot; style=&quot;padding: 10px 20px; border: solid #ddd; border-width: 1px 2px 1px 1px; border-bottom-color: #f5f5f5; background-color: #fff; font-weight: normal; line-height: 1,200&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif; width: 100%&quot;&gt;
                                                                &lt;tbody&gt;
																	&lt;tr&gt;
																		&lt;td class=&quot;viewport-details&quot; style=&quot;width: 100%&quot; align=&quot;right&quot; colspan=&quot;2&quot;&gt;
																			&lt;img src=&quot;/images/loghi/HUB Logo2.jpg&quot;/&gt;
																		&lt;/td&gt;
																	&lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;viewport-details&quot; style=&quot;width: 50%&quot;&gt;
                                                                            &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none; &quot;&gt;&lt;strong style=&quot;font-weight: bold&quot;&gt;HUB Support Portal&lt;/strong&gt; - Support Request&lt;/a&gt;
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;request-key&quot; style=&quot;width: 50%; text-align: right; font-size: 12px; line-height: 18px; text-decoration: none&quot;&gt;
                                                                            &lt;!-- &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot; style=&quot;font-size: 14px; font-weight: normal; text-decoration: none; color: #707070&quot;&gt;Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;[$issue]&lt;/strong&gt;&lt;/a&gt; --&gt;
																			Reference: &lt;strong style=&quot;font-weight: bold&quot;&gt;$issue&lt;/strong&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-content-important email-heading&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 10px; border-top-color: #f5f5f5&quot;&gt;
                                                            &lt;h1 style=&quot;margin: 0; line-height: 1,200; font-size: 22px; font-weight: bold;&quot;&gt;&lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot; class=&quot;header-request-link&quot; style=&quot;text-decoration: none&quot;&gt;$issue.summary&lt;/a&gt; &lt;span class=&quot;request-status aui-lozenge aui-lozenge-current&quot; style=&quot;background-color: #cccccd; border: 1px solid #cccccd; border-radius: 3px; color: #333; display: inline-block; font-size: 11px; font-weight: bold; line-height: 1; padding: 2px 5px 1px 5px; text-align: center; text-decoration: none; text-transform: uppercase; background-color: #4A6785; border-color: #4A6785; color: #ffffff; margin-left: 5px; font-weight: bold; font-size: 14px&quot;&gt;$issue.status.name&lt;/span&gt;&lt;/h1&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													&lt;tr&gt;
                                                        &lt;td class=&quot;latest-activity-container email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding-top: 0; border-top-width: 0&quot;&gt;
                                                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;latest-activity activity-item status-update &quot; style=&quot;padding: 20px 10px; border-top: solid 1px #ccc; display: block; margin: 0; padding: 10px; border: solid 1px; border-radius: 3px; border-color: #4A6785; background-color: #fffdf6&quot;&gt;
                                                                            &lt;div class=&quot;content&quot; style=&quot;float: left; line-height: 1,600; clear: both&quot;&gt;
                                                                                Status changed to &lt;strong style=&quot;font-weight: bold&quot;&gt;$issue.status.name&lt;/strong&gt;
                                                                            &lt;/div&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                    &lt;tr&gt;
                                                        &lt;td class=&quot;email-actions email-content-important&quot; style=&quot;text-align: left; padding: 20px; border-style: solid; border-width: 0 2px 0 1px; border-color: #fff #ddd #ddd; background-color: #fff; padding: 20px; padding-top: 0; padding-bottom: 20px; border-top-width: 0; border-bottom-width: 2px&quot;&gt;
                                                            You can &lt;a href=&quot;http://support.hubparking.com/servicedesk/customer/portal/2/$issue&quot;&gt;view the full request&lt;/a&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
													
													&lt;tr&gt;
                                                        &lt;td class=&quot;email-details&quot; style=&quot;padding: 20px&quot;&gt;
                                                            &lt;h2 style=&quot;margin: 0 0 10px; line-height: 1,200; font-size: 16px; font-weight: bold&quot;&gt;Details&lt;/h2&gt;
                                                            &lt;table class=&quot;email-request-details&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%; font-family: sans-serif&quot;&gt;
                                                                &lt;tbody&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Brand
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12900&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Environment
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12901&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product Family
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12902&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Product
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12903&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Affected Version / Peripheral Serial Number
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_12904&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            Description
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;p&gt;$issue.description&lt;/p&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                    &lt;tr class=&quot;last&quot;&gt;
                                                                        &lt;td class=&quot;label&quot; style=&quot;padding: 5px 0;  width: 120px; padding-right: 10px; font-size: 14px&quot;&gt;
                                                                            What Is your installation number?
                                                                        &lt;/td&gt;
                                                                        &lt;td class=&quot;value&quot; style=&quot;padding: 5px 0&quot;&gt;
                                                                            &lt;% out &lt;&lt; issue.getCustomFieldValue(componentManager.getCustomFieldManager().getCustomFieldObject(&quot;customfield_11002&quot;))%&gt;
                                                                        &lt;/td&gt;
                                                                    &lt;/tr&gt;
                                                                &lt;/tbody&gt;
                                                            &lt;/table&gt;
                                                        &lt;/td&gt;
                                                    &lt;/tr&gt;
                                                &lt;/tbody&gt;
                                            &lt;/table&gt;
                                        &lt;/td&gt;
                                    &lt;/tr&gt;
                                &lt;/tbody&gt;
                            &lt;/table&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td id=&quot;foot-note&quot; style=&quot;padding-bottom: 20px;  font-size: 12px; line-height: 1,200&quot;&gt;
                            &lt;p style=&quot;width: 600px; text-align: center; margin: 0 auto&quot;&gt;This message is automatically generated by HUB Support Portal.&lt;br /&gt;&lt;/p&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
        &lt;/center&gt;
    &lt;/body&gt;</arg>
                  <arg name="FIELD_EMAIL_SUBJECT_TEMPLATE">[HUB Support Portal] $issue.summary [$issue]</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SendCustomEmail</arg>
                  <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()
issue.projectObject.name == 'HUB Support' &amp;&amp; groupManager.isUserInGroup(issue.reporter?.name, 'HS-customers')</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_PREVIEW_ISSUE">HS-396</arg>
                  <arg name="FIELD_EMAIL_FORMAT">HTML</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES"></arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT"></arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE">customScripts\SD_TransitionPostFunction.groovy</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES"></arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT"></arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE">customScripts\SD_UpdateComments.groovy</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="8" name="OperationsWait">
      <meta name="jira.status.id">10126</meta>
      <actions>
        <action id="151" name="OperationsBackToSupport" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">12403</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()
currentUser.name == 'atlassian' || (issue.getProjectObject().key == 'BEHS')</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="hidFieldsList">assignee@@</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.validator.FieldsRequiredValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="2">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES"></arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT"></arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE">customScripts\SD_TransitionPostFunction.groovy</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES"></arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT"></arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE">customScripts\SD_UpdateComments.groovy</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">3</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="9" name="AgentActionWait">
      <meta name="jira.status.id">10427</meta>
      <actions>
<common-action id="41" />
<common-action id="21" />
        <action id="171" name="AgentBackToSupport" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">11702</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">import com.atlassian.jira.component.ComponentAccessor

def groupManager = ComponentAccessor.getGroupManager()

currentUser.name == 'atlassian' || (groupManager.isUserInGroup(currentUser.name, 'service-desk-agents') &amp;&amp; issue.getProjectObject().key == 'HS')</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="2">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES"></arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT"></arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE">customScripts\SD_TransitionPostFunction.groovy</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES"></arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT"></arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE">customScripts\SD_UpdateComments.groovy</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">3</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
  </steps>
</workflow>
