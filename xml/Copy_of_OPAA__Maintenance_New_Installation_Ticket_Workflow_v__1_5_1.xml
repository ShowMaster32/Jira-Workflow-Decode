<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE workflow PUBLIC "-//OpenSymphony Group//DTD OSWorkflow 2.8//EN" "http://www.opensymphony.com/osworkflow/workflow_2_8.dtd">
<workflow>
  <meta name="jira.description">(This copy was automatically generated from a draft, when workflow 'OPAA: Maintenance/New Installation Ticket Workflow v. 1.5.1' was made inactive.)</meta>
  <meta name="jira.update.author.key">arianna.fabbri</meta>
  <meta name="jira.updated.date">1658677560641</meta>
  <initial-actions>
    <action id="1" name="Create">
      <validators>
        <validator name="" type="class">
          <arg name="permission">Create Issue</arg>
          <arg name="class.name">com.atlassian.jira.workflow.validator.PermissionValidator</arg>
        </validator>
      </validators>
      <results>
        <unconditional-result old-status="null" status="open" step="1">
          <post-functions>
            <function type="class">
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="append.value"></arg>
              <arg name="maxAllowed-integerValue"></arg>
              <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="field.value">NOT_CONFIRMED</arg>
              <arg name="field.name">customfield_23620</arg>
              <arg name="scopeType">SAME</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
              <arg name="scopeSource-jql"></arg>
            </function>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">f301d5d3-a896-4a2f-8b27-637ed94455fc</arg>
              <arg name="FIELD_NOTES">YCFgQ2xvbmVkIHRrdDogY3JlYXRlIGxpbmtzIHRvIGFsbCB0aGUgcmVsYXRlZCBpc3N1ZXM=</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnlcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvblxuaW1wb3J0IGphdmEudGV4dC5TaW1wbGVEYXRlRm9ybWF0XG5pbXBvcnQgamF2YS50ZXh0LlBhcnNlRXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLnNlY3VyaXR5LkppcmFBdXRoZW50aWNhdGlvbkNvbnRleHRcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuYmMuaXNzdWUuSXNzdWVTZXJ2aWNlLklzc3VlUmVzdWx0XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmpxbC5wYXJzZXIuSnFsUXVlcnlQYXJzZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuYmMuaXNzdWUuc2VhcmNoLlNlYXJjaFNlcnZpY2VcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEudXNlci51dGlsLlVzZXJVdGlsXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLndlYi5iZWFuLlBhZ2VyRmlsdGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuTGlua0NvbGxlY3Rpb25JbXBsO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGluaztcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS51dGlsLkRlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbi8qU2NyaXB0IFZhcmlhYmxlcyovXG4vL1BlciB0ZXN0IGRhIGNvbnNvbGVcbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKVxuLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy00MDE5XCIpXG5cbmRlZiB1c2VyID0gQ29tcG9uZW50QWNjZXNzb3IuamlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dC5sb2dnZWRJblVzZXJcblxuZGVmIGlzc3VlU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlU2VydmljZSgpXG5kZWYgY2xvbmVkVGt0ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmNsb25lZFRrdCddID8gcHJvcGVydGllc1snY2YuY2xvbmVkVGt0J10udG9TdHJpbmcoKSA6IFwiT1BfQ0xPTkVEX1RLVFwiKVswXVxuZGVmIGNsb25lZEJ5VGt0ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmNsb25lZEJ5VGt0J10gPyBwcm9wZXJ0aWVzWydjZi5jbG9uZWRCeVRrdCddLnRvU3RyaW5nKCkgOiBcIk9QX0NMT05FRF9CWV9JU1NVRVwiKVswXVxuXG5pZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGNsb25lZFRrdCkudG9TdHJpbmcoKS5lcXVhbHMoXCJZRVNcIikpe1xuICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKTtcbiAgICBMaXN0PElzc3VlTGluaz4gYWxsT3V0SXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldE91dHdhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKTtcbiAgICBkZWYgbGlua2VkSXNzdWVUZW1wID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY2xvbmVkQnlUa3QpLnRvU3RyaW5nKCkpLy9pc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KClcbiAgICBTdHJpbmcgdHlwZSA9IGxpbmtlZElzc3VlVGVtcC5nZXRJc3N1ZVR5cGUoKS5nZXROYW1lKCk7XG5cbiAgICBMaXN0PElzc3VlTGluaz4gYWxsT3V0U291cmNlSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldE91dHdhcmRMaW5rcygvKmlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKSovbGlua2VkSXNzdWVUZW1wLmdldElkKCkpO1xuICAgIGxvZy5kZWJ1ZyBhbGxPdXRTb3VyY2VJc3N1ZUxpbmtcbiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gc291cmNlT3V0SXRlcmF0b3IgPSBhbGxPdXRTb3VyY2VJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgc291cmNlT3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgICAgICBJc3N1ZUxpbmsgc291cmNlSXNzdWVMaW5rID0gKElzc3VlTGluaykgc291cmNlT3V0SXRlcmF0b3IubmV4dCgpO1xuICAgICAgICBkZWYgbGlua2VkSVRlbXAgPSBzb3VyY2VJc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KClcbiAgICAgICAgU3RyaW5nIHQgPSBsaW5rZWRJVGVtcC5nZXRJc3N1ZVR5cGUoKS5nZXROYW1lKCk7XG5cbiAgICAgICAgbG9nLmRlYnVnIFwiaXNzdWVsaW5rIFR5cGU6IFwiICsgc291cmNlSXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpXG4gICAgICAgIGxvZy5kZWJ1ZyBcInNvdXJjZUlzc3VlOiBcIiArIHNvdXJjZUlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKVxuICAgICAgICBsb2cuZGVidWcgXCJkZXN0aW5hdGlvbklzc3VlOiBcIiArIHNvdXJjZUlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpXG5cbiAgICAgICAgaWYoc291cmNlSXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkgJiYgc291cmNlSXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkua2V5IT1pc3N1ZS5rZXkpe1xuICAgICAgICAgICAgbG9nLmRlYnVnIFwidHJvdmF0byBvdXRXYXJkTGluayAtIHByZW5kbyBsYSBkZXN0aW5hdGlvbiBpc3N1ZSBcIiArIHNvdXJjZUlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpICsgXCIgZSBsYSBsZWdvIGFsbGEgaXNzdWUgY29ycmVudGUgc29sbyBzZSBub24gXHUwMGU4IGdpXHUwMGUwIGxpbmthdGFcIlxuICAgICAgICAgICAgZGVmIGFscmVhZHlMaW5rZWQ9ZmFsc2VcbiAgICAgICAgICAgIGZvcihsaSBpbiBhbGxJbklzc3VlTGluayl7XG4gICAgICAgICAgICAgICAgaWYoc291cmNlSXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkuZ2V0SWQoKSA9PSBsaS5nZXRTb3VyY2VPYmplY3QoKS5nZXRJZCgpIHx8IHNvdXJjZUlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpLmdldElkKCkgPT0gbGkuZ2V0RGVzdGluYXRpb25PYmplY3QoKS5nZXRJZCgpKXtcbiAgICAgICAgICAgICAgICAgICAgYWxyZWFkeUxpbmtlZD10cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yKGxpIGluIGFsbE91dElzc3VlTGluayl7XG4gICAgICAgICAgICAgICAgaWYoc291cmNlSXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkuZ2V0SWQoKSA9PSBsaS5nZXRTb3VyY2VPYmplY3QoKS5nZXRJZCgpIHx8IHNvdXJjZUlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpLmdldElkKCkgPT0gbGkuZ2V0RGVzdGluYXRpb25PYmplY3QoKS5nZXRJZCgpKXtcbiAgICAgICAgICAgICAgICAgICAgYWxyZWFkeUxpbmtlZD10cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoIWFscmVhZHlMaW5rZWQpe1xuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIm5vbiBcdTAwZTggbGlua2F0YSwgbGEgbGlua29cIlxuICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5jcmVhdGVJc3N1ZUxpbmsoc291cmNlSXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkuZ2V0SWQoKSwgaXNzdWUuZ2V0SWQoKSwgTG9uZy5wYXJzZUxvbmcocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXNJZCddLnRvU3RyaW5nKCkpLCAxLCB1c2VyKTsgICBcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImdpXHUwMGUwIGxpbmthdGEsIG5vbiBsYSBsaW5rbyBkaSBudW92b1wiXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH1cbn1cbiIsInNjcmlwdFBhdGgiOm51bGx9</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
            </function>
            <function type="class">
              <arg name="FIELD_SECURITY_LEVEL_ID">11600</arg>
              <arg name="FIELD_NOTES">YCFgU2V0ICJPcGVyYXRpb24gUG9ydGFsIC0gRkFBQyBTZXJ2aWNlIiBJc3N1ZSBTZWN1cml0eSBMZXZlbA==</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SetIssueSecurity</arg>
              <arg name="FIELD_CONDITION"></arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
            </function>
            <function type="class">
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="append.value"></arg>
              <arg name="maxAllowed-integerValue">50</arg>
              <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="field.value">%%CURRENT_DATETIME%%</arg>
              <arg name="field.name">customfield_22715</arg>
              <arg name="scopeType">SAME</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
              <arg name="scopeSource-jql"></arg>
            </function>
            <function type="class">
              <arg name="conditionList">3</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.15.1</arg>
              <arg name="comparisonType">1</arg>
              <arg name="precondition">true</arg>
              <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
              <arg name="preconditionNegateResult-booleanValue"></arg>
              <arg name="fieldValue">Maintenance Ticket</arg>
              <arg name="preconditionMode-textValue">DISCARD</arg>
              <arg name="fieldsList">issuetype</arg>
            </function>
            <function type="class">
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="append.value"></arg>
              <arg name="maxAllowed-integerValue">50</arg>
              <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="field.value">Yes</arg>
              <arg name="field.name">customfield_22620</arg>
              <arg name="scopeType">SAME</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="preconditionAwareFunctionMode-textValue">FALSE</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
              <arg name="scopeSource-jql"></arg>
            </function>
            <function type="class">
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="append.value"></arg>
              <arg name="maxAllowed-integerValue">50</arg>
              <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="field.value">New Installation Ticket</arg>
              <arg name="field.name">customfield_22716</arg>
              <arg name="scopeType">SAME</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="preconditionAwareFunctionMode-textValue">FALSE</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
              <arg name="scopeSource-jql"></arg>
            </function>
            <function type="class">
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="append.value"></arg>
              <arg name="maxAllowed-integerValue">50</arg>
              <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="field.value">Maintenance Ticket</arg>
              <arg name="field.name">customfield_22716</arg>
              <arg name="scopeType">SAME</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
              <arg name="scopeSource-jql"></arg>
            </function>
            <function type="class">
              <arg name="conditionList">3</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="comparisonType">1</arg>
              <arg name="precondition">true</arg>
              <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
              <arg name="preconditionNegateResult-booleanValue"></arg>
              <arg name="fieldValue">Planned Maintenance Ticket</arg>
              <arg name="preconditionMode-textValue">DISCARD</arg>
              <arg name="fieldsList">issuetype</arg>
            </function>
            <function type="class">
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="append.value"></arg>
              <arg name="maxAllowed-integerValue">50</arg>
              <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="field.value">Planned Maintenance Ticket</arg>
              <arg name="field.name">customfield_22716</arg>
              <arg name="scopeType">SAME</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
              <arg name="scopeSource-jql"></arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueCreateFunction</arg>
            </function>
            <function type="class">
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="append.value"></arg>
              <arg name="maxAllowed-integerValue"></arg>
              <arg name="runAsUser-user"></arg>
              <arg name="field.value">No</arg>
              <arg name="field.name">customfield_23264</arg>
              <arg name="scopeType">SAME</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
              <arg name="scopeSource-jql"></arg>
            </function>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">5e04d019-e862-4b3e-b4e6-2fe357f2f60f</arg>
              <arg name="FIELD_NOTES">YCFgQ2xlYXIgY2FjaGU=</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG4vKiBSRVNUIEFQSSBwZXIgR2VuZXJhemlvbmUgQWxsZWdhdG8gUmFwcG9ydG8gZGkgSW50ZXJ2ZW50byAqL1xucmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuLypTY3JpcHQgVmFyaWFibGVzKi9cbi8vUGVyIHRlc3QgZGEgY29uc29sZVxuLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIk9QVVQtMTQwNjJcIilcbmJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL2NsZWFyQ2FjaGUvZGF0YU9iamVjdFwiXG5kZWYgYm9keV9yZXEgPSBbXVxuVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbmNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5sb2cuZGVidWcgXCJib2R5X3JlcTogXCIgKyBib2R5X3JlcVxuY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxubG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5jb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbn0iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuV29ya2Zsb3dFeGNlcHRpb247CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7CmltcG9ydCBncm9vdnkuanNvbi5TdHJlYW1pbmdKc29uQnVpbGRlcjsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5DdXN0b21GaWVsZE1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3I7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlCmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMuY29kZWMuYmluYXJ5LkJhc2U2NDsKaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGdyb292eXgubmV0Lmh0dHAuSFRUUEJ1aWxkZXIKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXIKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsCgpQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpCkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpCnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7Cglwcm9wZXJ0aWVzLmxvYWQoaXQpCn0KQ2F0ZWdvcnkgbG9nID0gQ2F0ZWdvcnkuZ2V0SW5zdGFuY2UoImNvbS5vbnJlc29sdmUuamlyYS5ncm9vdnkuUG9zdEZ1bmN0aW9uIikKbG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpCgpJc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7CkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTsKCmRlZiByZXF1ZXN0TWV0aG9kCmRlZiBiYXNlVVJMCgpkZWYgZmlyc3RUaWNrZXQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmZpcnN0VGt0J10udG9TdHJpbmcoKSlbMF0KCmxvZy5kZWJ1ZyBpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lCmxvZy5kZWJ1ZyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGZpcnN0VGlja2V0KQoKCi8qIFJFU1QgQVBJIHBlciBJbnZpbyBOb3RpZmljYSBFbWFpbCBPTlNJVEVfUkVQT1JUICovCnJlcXVlc3RNZXRob2QgPSAiR0VUIjsKCmlmKGlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQubmV3SW5zdGFsbGF0aW9uJ10pIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZmlyc3RUaWNrZXQpIT1udWxsKXsKICAgIGRlZiBmaXJzdF90aWNrZXQ9ZmFsc2UKICAgIGRlZiB0ZW1wbGF0ZT0iIgogICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShmaXJzdFRpY2tldCkhPW51bGwpewogICAgICAgIGZpcnN0X3RpY2tldD10cnVlCiAgICAgICAgdGVtcGxhdGU9IkZJUlNUX1RJQ0tFVCU3Q01BTlVGQUNUVVJFUiIKICAgIH1lbHNlewogICAgICAgIHRlbXBsYXRlPSJORVdfSU5TVEFMTEFUSU9OX0NSRUFURV9US1QlN0NNQU5VRkFDVFVSRVIiCiAgICB9CiAgICBiYXNlVVJMID0gImh0dHA6Ly8iICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyAiL29wL3Jlc3QvYXV0b21hdGlvbi9kb2N1bWVudC9nZW5lcmF0aW9uL2NoZWNrP0lTU1VFX0tFWT0iKyBpc3N1ZS5rZXkgKyImRE9DX0NBVEVHT1JZPSIgKyB0ZW1wbGF0ZSArICImRU5BQkxFRF9GT1JfRklSU1RfVElDS0VUPSIrZmlyc3RfdGlja2V0KyImSU1QT1JUX0ZST009T1BfQVNTRVQiCiAgICBsb2cuZGVidWcgYmFzZVVSTAogICAgVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTCkKICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7CiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7CiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eSgiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL2pzb24iKTsKICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KCJBY2NlcHQiLCAiKi8qIik7CiAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpOwogICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpOwogICAgY29ubmVjdGlvbi5jb25uZWN0KCk7CgogICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKQogICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCiAgICBkZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KCkKICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KCkKCiAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoIjIwMCIpKXsKICAgICAgICBsb2cuZGVidWcgInVybDogIiArIHVybAogICAgICAgIGxvZy5kZWJ1ZyAiUmVzcG9uc2VDb2RlOiIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpCiAgICAgICAgbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKICAgICAgICBsb2cuZGVidWcgIkVycm9yU3RyZWFtOiAiICsgY29ubmVjdGlvbi5nZXRFcnJvclN0cmVhbSgpLnRvU3RyaW5nKCkKICAgICAgICBsb2cuZGVidWcgImdldEhlYWRlckZpZWxkcygpOiAiICsgY29ubmVjdGlvbi5nZXRIZWFkZXJGaWVsZHMoKQogICAgICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQKICAgICAgICBsb2cuZGVidWcgIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogIiArIG91dHB1dE1zZwoKICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKQogICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpCiAgICAgICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICAKICAgICAgICBsb2cuZGVidWcgIm1lc3NhZ2U6ICIgKyAganNvbl9vYmplY3QubWVzc2FnZQoKICAgICAgICBlTGlzdEVycm9ycy5hZGQoIkUiKQogICAgICAgIGVMaXN0RXJyb3JzLmFkZCgiT1AtRE9DUyIpCiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgIiAiICsganNvbl9vYmplY3QubWVzc2FnZSkKICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKQogICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycykKCiAgICAgICAgb3V0cHV0LmFkZChlTGlzdCkKICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJFIiwgb3V0cHV0LnRvU3RyaW5nKCkpCiAgICB9Cn0K</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </function>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">fc3fcb3a-f02f-471a-98e8-7472f7f6b0fc</arg>
              <arg name="FIELD_NOTES">YCFgTGluayBOZXcgSW5zdGFsbGF0aW9uIFRpY2tldHM=</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnlcbmltcG9ydCBncm9vdnkuanNvbi5Kc29uQnVpbGRlclxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29uZmlnLnV0aWwuSmlyYUhvbWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvblxuaW1wb3J0IGphdmEudGV4dC5TaW1wbGVEYXRlRm9ybWF0XG5pbXBvcnQgamF2YS50ZXh0LlBhcnNlRXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLnNlY3VyaXR5LkppcmFBdXRoZW50aWNhdGlvbkNvbnRleHRcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuYmMuaXNzdWUuSXNzdWVTZXJ2aWNlLklzc3VlUmVzdWx0XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmpxbC5wYXJzZXIuSnFsUXVlcnlQYXJzZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuYmMuaXNzdWUuc2VhcmNoLlNlYXJjaFNlcnZpY2VcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEudXNlci51dGlsLlVzZXJVdGlsXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLndlYi5iZWFuLlBhZ2VyRmlsdGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuTGlua0NvbGxlY3Rpb25JbXBsO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGluaztcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS51dGlsLkRlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlclxuXG5pbXBvcnQgZ3Jvb3Z5LnV0aWwubG9nZ2luZy5TbGY0alxuaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkNvbmN1cnJlbnRIYXNoTWFwXG5pbXBvcnQgamF2YXguYW5ub3RhdGlvbi5Qb3N0Q29uc3RydWN0XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5jYWNoZS5hbm5vdGF0aW9uLkNhY2hlYWJsZVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcblxuLypTY3JpcHQgVmFyaWFibGVzKi9cbi8vUGVyIFBvc3QgRnVuY3Rpb25cbmlzc3VlID0gaXNzdWVcbi8vUGVyIHRlc3QgZGEgY29uc29sZVxuLy9Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKClcbi8vaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJPUFVULTI0MVwiKVxubG9nLmRlYnVnIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEtUX0dFTkVSQVRFRF9GUk9NX1BNXCIpWzBdKVxuLypJbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzKi9cbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTsgIFxuQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XG5vYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XG5vYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuLyogR2V0IEluc2lnaHQgSVFMIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xuQ2xhc3MgaXFsRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuSVFMRmFjYWRlXCIpOyBcbmlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG5DbGFzcyBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuc2VydmljZXMubW9kZWwuZmFjdG9yeS5PYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeVwiKTtcbm9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MpO1xuLyogR2V0IEluc2lnaHQgT2JqZWN0IFR5cGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBvYmplY3RUeXBlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUZhY2FkZVwiKTsgXG5vYmplY3RUeXBlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVGYWNhZGVDbGFzcyk7XG5cbi8qQ3VzdG9tZmllbGRzKi9cbmRlZiBzdXBwbGllckluc3RhbGxhdGlvbiA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yuc3VwcGxpZXInXS50b1N0cmluZygpKVswXVxuZGVmIHdic1ByaiA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yud2JzUHJqJ10gPyBwcm9wZXJ0aWVzWydjZi53YnNQcmonXS50b1N0cmluZygpIDogXCJPUF9XQlNfUFJKXCIpWzBdXG5kZWYgc2l0ZSA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yuc2l0ZSddLnRvU3RyaW5nKCkpWzBdXG5sb2cuZGVidWcgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzdXBwbGllckluc3RhbGxhdGlvbilcblxuZGVmIHNpdGVWYWx1ZSA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2l0ZSlbMF0udG9TdHJpbmcoKVxuc2l0ZVZhbHVlID0gc2l0ZVZhbHVlLnN1YnN0cmluZyhzaXRlVmFsdWUubGFzdEluZGV4T2YoJygnKSsxLHNpdGVWYWx1ZS5sYXN0SW5kZXhPZignKScpKVxubG9nLmRlYnVnIHNpdGVWYWx1ZVxuXG5KaXJhQXV0aGVudGljYXRpb25Db250ZXh0IGF1dGhDb250ZXh0ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpXG5kZWYganFsUXVlcnlQYXJzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSnFsUXVlcnlQYXJzZXIpXG5kZWYgc2VhcmNoU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChTZWFyY2hTZXJ2aWNlKVxuVXNlclV0aWwgdXNlclV0aWwgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRVc2VyVXRpbCgpXG5kZWYgdXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQubG9nZ2VkSW5Vc2VyXG5cbmxvZy5kZWJ1ZyBcImlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc3VwcGxpZXJJbnN0YWxsYXRpb24pOiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc3VwcGxpZXJJbnN0YWxsYXRpb24pXG5cbmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc3VwcGxpZXJJbnN0YWxsYXRpb24pKXtcbiAgICBkZWYgc3VwcGxpZXIgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHN1cHBsaWVySW5zdGFsbGF0aW9uKS5maXJzdCgpLnRvU3RyaW5nKClcbiAgICBsb2cuZGVidWcgXCJzdXBwbGllcjogXCIgKyBzdXBwbGllclxuICAgIHN1cHBsaWVyID0gc3VwcGxpZXIuc3Vic3RyaW5nKDEsc3VwcGxpZXIubGFzdEluZGV4T2YoJygnKS0xKVxuXG4gICAgZGVmIGpxbFNlYXJjaCA9IFwicHJvamVjdCA9ICdcIiArIGlzc3VlLmdldFByb2plY3RPYmplY3QoKS5uYW1lICsgXCInIEFORCBpc3N1ZXR5cGUgPSAnXCIgKyBpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lICsgXCInIEFORCBrZXkgIT0gJ1wiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIicgQU5EICdcIiArIHByb3BlcnRpZXNbJ2NmLnN1cHBsaWVyJ10udG9TdHJpbmcoKSArIFwiJyBpbiBpcWxGdW5jdGlvbignb2JqZWN0U2NoZW1hID0gXFxcIk9wZXJhdGlvbiBQb3J0YWwgQUFcXFwiIEFORCBvYmplY3RUeXBlID0gU3VwcGxpZXIgQU5EIFwiICsgcHJvcGVydGllc1snaW9iai5zdXBwaW5zdC5zdXBwbGllclJlZiddLnRvU3RyaW5nKCkgKyBcIiBMSUtFIFxcXCJcIiArIHN1cHBsaWVyLnJlcGxhY2VBbGwoXCInXCIsXCJcXCdcIikgKyBcIlxcXCInKVwiICsgXCIgQU5EICdcIiArIHByb3BlcnRpZXNbJ2NmLnNpdGUnXS50b1N0cmluZygpICsgXCInIElOIGlxbEZ1bmN0aW9uKCdvYmplY3RTY2hlbWEgPSBcXFwiT3BlcmF0aW9uIFBvcnRhbCBBQVxcXCIgQU5EIG9iamVjdFR5cGUgPSBTaXRlIEFORCBLZXkgPVxcXCJcIiArIHNpdGVWYWx1ZSArIFwiXFxcIicpIEFORCBzdGF0dXMgSU4gKCdcIiArIHByb3BlcnRpZXNbJ3dmLm9wZW4nXS50b1N0cmluZygpICsgXCInKVwiXG5cdGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUod2JzUHJqKSE9bnVsbCl7XG4gICAgXHRqcWxTZWFyY2ggPSBqcWxTZWFyY2ggKyBcIiBBTkQgXCIgKyAocHJvcGVydGllc1snY2Yud2JzUHJqJ10gPyBwcm9wZXJ0aWVzWydjZi53YnNQcmonXS50b1N0cmluZygpIDogXCJPUF9XQlNfUFJKXCIpICsgXCIgPSAnXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHdic1ByaikgKyBcIidcIlxuICAgIH1cbiAgICBsb2cuZGVidWcgXCJyaWNlcmNhOiBcIiArIGpxbFNlYXJjaFxuICAgIGRlZiBxdWVyeSA9IGpxbFF1ZXJ5UGFyc2VyLnBhcnNlUXVlcnkoanFsU2VhcmNoKVxuICAgIGxvZy5kZWJ1ZyBcInF1ZXJ5OiBcIiArIHF1ZXJ5XG4gICAgZGVmIHNlYXJjaCA9IHNlYXJjaFNlcnZpY2Uuc2VhcmNoKHVzZXIsIHF1ZXJ5LCBQYWdlckZpbHRlci5nZXRVbmxpbWl0ZWRGaWx0ZXIoKSlcbiAgICBkZWYgZm91bmQ9ZmFsc2VcbiAgICBkZWYgZm91bmRPdXR3YXJkPWZhbHNlXG4gICAgZGVmIGxpbmtlZElzc3VlXG4gICAgaWYgKHNlYXJjaC5yZXN1bHRzKSB7XHRcbiAgICAgICAgZm9yIChpIGluIHNlYXJjaC5yZXN1bHRzLmZpcnN0KCkpe1xuICAgICAgICAgICAgLypQZXIgb2duaSBpc3N1ZSByZXN0aXR1aXRhIGRhbGxhIHF1ZXJ5IEpRTCB2ZXJpZmljbyBzZSBoYSBnaVx1MDBlMCBkZWkgbGluayBSZWxhdGVzIFRvKi9cbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBpLmtleVxuXG4gICAgICAgICAgICBkZWYgaXNzdWVTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVTZXJ2aWNlKClcblxuICAgICAgICAgICAgTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGkuZ2V0SWQoKSk7XG4gICAgICAgICAgICBsb2cuZGVidWcgXCJhbGxJbklzc3VlTGluazogXCIgKyBhbGxJbklzc3VlTGlua1xuICAgICAgICAgICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgICAgICAgICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG4gICAgICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlVGVtcCA9IGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKVxuICAgICAgICAgICAgICAgIFN0cmluZyB0eXBlID0gbGlua2VkSXNzdWVUZW1wLmdldElzc3VlVHlwZSgpLmdldE5hbWUoKTtcblxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImlzc3VlbGluayBUeXBlOiBcIiArIGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInNvdXJjZUlzc3VlOiBcIiArIGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImRlc3RpbmF0aW9uSXNzdWU6IFwiICsgaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KClcblxuICAgICAgICAgICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpICYmIGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKS5rZXkhPWlzc3VlLmtleSl7XG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRyb3ZhdG8gaW5XYXJkTGluayAtIHByZW5kbyBsYSBzb3VyY2UgaXNzdWUgXCIgKyBsaW5rZWRJc3N1ZVRlbXAgKyBcIiBlIGxhIGxlZ28gYWxsYSBpc3N1ZSBjb3JyZW50ZVwiXG4gICAgICAgICAgICAgICAgICAgIGZvdW5kPXRydWVcbiAgICAgICAgICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmNyZWF0ZUlzc3VlTGluayhsaW5rZWRJc3N1ZVRlbXAuZ2V0SWQoKSwgaXNzdWUuZ2V0SWQoKSwgTG9uZy5wYXJzZUxvbmcocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXNJZCddLnRvU3RyaW5nKCkpLCAxLCB1c2VyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGkuZ2V0SWQoKSk7XG4gICAgICAgICAgICBsb2cuZGVidWcgXCJhbGxPdXRJc3N1ZUxpbms6IFwiICsgYWxsT3V0SXNzdWVMaW5rXG4gICAgICAgICAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgICAgICAgICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG4gICAgICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlVGVtcCA9IGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpXG4gICAgICAgICAgICAgICAgU3RyaW5nIHR5cGUgPSBsaW5rZWRJc3N1ZVRlbXAuZ2V0SXNzdWVUeXBlKCkuZ2V0TmFtZSgpO1xuXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiaXNzdWVsaW5rIFR5cGU6IFwiICsgaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwic291cmNlSXNzdWU6IFwiICsgaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiZGVzdGluYXRpb25Jc3N1ZTogXCIgKyBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKVxuXG4gICAgICAgICAgICAgICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkgJiYgaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkua2V5IT1pc3N1ZS5rZXkpe1xuICAgICAgICAgICAgICAgICAgICBmb3VuZD10cnVlXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRyb3ZhdG8gb3V0V2FyZExpbmsgLSBwcmVuZG8gbGEgZGVzdGluYXRpb24gaXNzdWUgXCIgKyBsaW5rZWRJc3N1ZVRlbXAgKyBcIiBlIGxhIGxlZ28gYWxsYSBpc3N1ZSBjb3JyZW50ZVwiXG4gICAgICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5jcmVhdGVJc3N1ZUxpbmsoaXNzdWUuZ2V0SWQoKSwgbGlua2VkSXNzdWVUZW1wLmdldElkKCksIExvbmcucGFyc2VMb25nKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzSWQnXS50b1N0cmluZygpKSwgMSwgdXNlcik7XG4gICAgICAgICAgICAgICAgfWVsc2UgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkgJiYgaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkua2V5PT1pc3N1ZS5rZXkpe1xuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJpc3N1ZSBnaVx1MDBlMCBsaW5rYXRhXCJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIkNyZW8gbGluayB0cmEgbGEgaXNzdWUgb2dnZXR0byBkaSB0cmFuc2l0aW9uIGUgbGEgaXNzdWUgcmlzdWx0YW50ZSBkYWwgZmlsdHJvXCJcbiAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5jcmVhdGVJc3N1ZUxpbmsoaS5nZXRJZCgpLCBpc3N1ZS5nZXRJZCgpLCBMb25nLnBhcnNlTG9uZyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlc0lkJ10udG9TdHJpbmcoKSksIDEsIHVzZXIpO1xuXG4gICAgICAgIH1cblxuICAgIH0gZWxzZSB7XG4gICAgICAgIGxvZy5lcnJvcihcIkludmFsaWQgSlFMOiBcIiArIGpxbFNlYXJjaCk7XG4gICAgfSBcbn1cbiIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZQppbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb24KaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3IKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXIKaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyCmltcG9ydCBncm9vdnkuanNvbi5Kc29uU2x1cnBlcgppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb25maWcudXRpbC5KaXJhSG9tZQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvbgppbXBvcnQgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQKaW1wb3J0IGphdmEudGV4dC5QYXJzZUV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLnNlY3VyaXR5LkppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5iYy5pc3N1ZS5Jc3N1ZVNlcnZpY2UuSXNzdWVSZXN1bHQKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5qcWwucGFyc2VyLkpxbFF1ZXJ5UGFyc2VyCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuYmMuaXNzdWUuc2VhcmNoLlNlYXJjaFNlcnZpY2UKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS51c2VyLnV0aWwuVXNlclV0aWwKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS53ZWIuYmVhbi5QYWdlckZpbHRlcgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuTGlua0NvbGxlY3Rpb25JbXBsOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWUKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS51dGlsLkRlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcgoKaW1wb3J0IGdyb292eS51dGlsLmxvZ2dpbmcuU2xmNGoKaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkNvbmN1cnJlbnRIYXNoTWFwCmltcG9ydCBqYXZheC5hbm5vdGF0aW9uLlBvc3RDb25zdHJ1Y3QKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuY2FjaGUuYW5ub3RhdGlvbi5DYWNoZWFibGUKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXIKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsCgpQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpCkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpCnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7Cglwcm9wZXJ0aWVzLmxvYWQoaXQpCn0KZGVmIENhdGVnb3J5IGxvZyA9IENhdGVnb3J5LmdldEluc3RhbmNlKCJjb20ub25yZXNvbHZlLmppcmEuZ3Jvb3Z5LlBvc3RGdW5jdGlvbiIpCmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKQoKLypTY3JpcHQgVmFyaWFibGVzKi8KLy9QZXIgUG9zdCBGdW5jdGlvbgppc3N1ZSA9IGlzc3VlCi8vUGVyIHRlc3QgZGEgY29uc29sZQovL0lzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKQovL2lzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKCJPUFVULTI0MSIpCgovKkluc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHMqLwpDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZSIpOyAgCkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUiKTsKb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpOwpvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpOwovKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovCkNsYXNzIGlxbEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuSVFMRmFjYWRlIik7IAppcWxGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUoaXFsRmFjYWRlQ2xhc3MpOwpDbGFzcyBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5zZXJ2aWNlcy5tb2RlbC5mYWN0b3J5Lk9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Iik7Cm9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MpOwovKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi8KQ2xhc3Mgb2JqZWN0VHlwZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUZhY2FkZSIpOyAKb2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpOwoKLypDdXN0b21maWVsZHMqLwpkZWYgc3VwcGxpZXJJbnN0YWxsYXRpb24gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnN1cHBsaWVyTmV3SW5zdGFsbGF0aW9uJ10udG9TdHJpbmcoKSlbMF0KZGVmIHdic1ByaiA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yud2JzUHJqJ10gPyBwcm9wZXJ0aWVzWydjZi53YnNQcmonXS50b1N0cmluZygpIDogIk9QX1dCU19QUkoiKVswXQpkZWYgc2l0ZSA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yuc2l0ZSddLnRvU3RyaW5nKCkpWzBdCmxvZy5kZWJ1ZyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHN1cHBsaWVySW5zdGFsbGF0aW9uKQoKSmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCBhdXRoQ29udGV4dCA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKQpkZWYganFsUXVlcnlQYXJzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSnFsUXVlcnlQYXJzZXIpCmRlZiBzZWFyY2hTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KFNlYXJjaFNlcnZpY2UpClVzZXJVdGlsIHVzZXJVdGlsID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0VXNlclV0aWwoKQpkZWYgdXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQubG9nZ2VkSW5Vc2VyCgpkZWYgc3VwcGxpZXIgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHN1cHBsaWVySW5zdGFsbGF0aW9uKS5maXJzdCgpLnRvU3RyaW5nKCkKbG9nLmRlYnVnICJzdXBwbGllcjogIiArIHN1cHBsaWVyCnN1cHBsaWVyID0gc3VwcGxpZXIuc3Vic3RyaW5nKDEsc3VwcGxpZXIuaW5kZXhPZignKCcpLTEpCgpkZWYganFsU2VhcmNoID0gInByb2plY3QgPSAnIiArIGlzc3VlLmdldFByb2plY3RPYmplY3QoKS5uYW1lICsgIicgQU5EIGlzc3VldHlwZSA9ICciICsgaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZSArICInIEFORCBrZXkgIT0gJyIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArICInIEFORCAnIiArIHByb3BlcnRpZXNbJ2NmLnN1cHBsaWVyTmV3SW5zdGFsbGF0aW9uJ10udG9TdHJpbmcoKSArICInIGluIGlxbEZ1bmN0aW9uKCciICsgcHJvcGVydGllc1snaW9iai5zdXBwaW5zdC5zdXBwbGllclJlZiddLnRvU3RyaW5nKCkgKyAiIExJS0UgXCIiICsgc3VwcGxpZXIucmVwbGFjZUFsbCgiJyIsIlwnIikgKyAiXCInKSIgKyAiIEFORCAnIiArIHByb3BlcnRpZXNbJ2NmLnNpdGUnXS50b1N0cmluZygpICsgIicgPSAnIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2l0ZSkuZmlyc3QoKS50b1N0cmluZygpLnJlcGxhY2VBbGwoIiciLCJcJyIpICsgIicgQU5EIHN0YXR1cyBJTiAoJyIgKyBwcm9wZXJ0aWVzWyd3Zi5vcGVuJ10udG9TdHJpbmcoKSArICInKSBBTkQgIiArIChwcm9wZXJ0aWVzWydjZi53YnNQcmonXSA/IHByb3BlcnRpZXNbJ2NmLndic1ByaiddLnRvU3RyaW5nKCkgOiAiT1BfV0JTX1BSSiIpICsgIiA9ICciICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh3YnNQcmopICsgIiciCmxvZy5kZWJ1ZyAicmljZXJjYTogIiArIGpxbFNlYXJjaApkZWYgcXVlcnkgPSBqcWxRdWVyeVBhcnNlci5wYXJzZVF1ZXJ5KGpxbFNlYXJjaCkKbG9nLmRlYnVnICJxdWVyeTogIiArIHF1ZXJ5CmRlZiBzZWFyY2ggPSBzZWFyY2hTZXJ2aWNlLnNlYXJjaCh1c2VyLCBxdWVyeSwgUGFnZXJGaWx0ZXIuZ2V0VW5saW1pdGVkRmlsdGVyKCkpCmRlZiBmb3VuZD1mYWxzZQpkZWYgZm91bmRPdXR3YXJkPWZhbHNlCmRlZiBsaW5rZWRJc3N1ZQppZiAoc2VhcmNoLnJlc3VsdHMpIHsJCiAgICBmb3IgKGkgaW4gc2VhcmNoLnJlc3VsdHMuZmlyc3QoKSl7CiAgICAgICAgLypQZXIgb2duaSBpc3N1ZSByZXN0aXR1aXRhIGRhbGxhIHF1ZXJ5IEpRTCB2ZXJpZmljbyBzZSBoYSBnacOgIGRlaSBsaW5rIFJlbGF0ZXMgVG8qLwogICAgICAgIGxvZy5kZWJ1ZyBpLmtleQoKICAgICAgICBkZWYgaXNzdWVTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVTZXJ2aWNlKCkKCiAgICAgICAgTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGkuZ2V0SWQoKSk7CiAgICAgICAgbG9nLmRlYnVnICJhbGxJbklzc3VlTGluazogIiArIGFsbEluSXNzdWVMaW5rCiAgICAgICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykgewogICAgICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpOwogICAgICAgICAgICBkZWYgbGlua2VkSXNzdWVUZW1wID0gaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpCiAgICAgICAgICAgIFN0cmluZyB0eXBlID0gbGlua2VkSXNzdWVUZW1wLmdldElzc3VlVHlwZSgpLmdldE5hbWUoKTsKCiAgICAgICAgICAgIGxvZy5kZWJ1ZyAiaXNzdWVsaW5rIFR5cGU6ICIgKyBpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkKCQkJbG9nLmRlYnVnICJzb3VyY2VJc3N1ZTogIiArIGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKQogICAgICAgICAgICBsb2cuZGVidWcgImRlc3RpbmF0aW9uSXNzdWU6ICIgKyBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKQogICAgICAgICAgICAKICAgICAgICAgICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkgJiYgaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpLmtleSE9aXNzdWUua2V5KXsKICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyAidHJvdmF0byBpbldhcmRMaW5rIC0gcHJlbmRvIGxhIHNvdXJjZSBpc3N1ZSAiICsgbGlua2VkSXNzdWVUZW1wICsgIiBlIGxhIGxlZ28gYWxsYSBpc3N1ZSBjb3JyZW50ZSIKICAgICAgICAgICAgICAgIGZvdW5kPXRydWUKICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5jcmVhdGVJc3N1ZUxpbmsobGlua2VkSXNzdWVUZW1wLmdldElkKCksIGlzc3VlLmdldElkKCksIExvbmcucGFyc2VMb25nKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzSWQnXS50b1N0cmluZygpKSwgMSwgdXNlcik7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgTGlzdDxJc3N1ZUxpbms+IGFsbE91dElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaS5nZXRJZCgpKTsKICAgICAgICBsb2cuZGVidWcgImFsbE91dElzc3VlTGluazogIiArIGFsbE91dElzc3VlTGluawogICAgICAgIGZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbE91dElzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7CiAgICAgICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7CiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZVRlbXAgPSBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKQogICAgICAgICAgICBTdHJpbmcgdHlwZSA9IGxpbmtlZElzc3VlVGVtcC5nZXRJc3N1ZVR5cGUoKS5nZXROYW1lKCk7CgogICAgICAgICAgICBsb2cuZGVidWcgImlzc3VlbGluayBUeXBlOiAiICsgaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpCgkJCWxvZy5kZWJ1ZyAic291cmNlSXNzdWU6ICIgKyBpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkKICAgICAgICAgICAgbG9nLmRlYnVnICJkZXN0aW5hdGlvbklzc3VlOiAiICsgaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpICYmIGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpLmtleSE9aXNzdWUua2V5KXsKICAgICAgICAgICAgICAgIGZvdW5kPXRydWUKICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyAidHJvdmF0byBvdXRXYXJkTGluayAtIHByZW5kbyBsYSBkZXN0aW5hdGlvbiBpc3N1ZSAiICsgbGlua2VkSXNzdWVUZW1wICsgIiBlIGxhIGxlZ28gYWxsYSBpc3N1ZSBjb3JyZW50ZSIKICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5jcmVhdGVJc3N1ZUxpbmsoaXNzdWUuZ2V0SWQoKSwgbGlua2VkSXNzdWVUZW1wLmdldElkKCksIExvbmcucGFyc2VMb25nKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzSWQnXS50b1N0cmluZygpKSwgMSwgdXNlcik7CiAgICAgICAgICAgIH1lbHNlIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpICYmIGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpLmtleT09aXNzdWUua2V5KXsKICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyAiaXNzdWUgZ2nDoCBsaW5rYXRhIgogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgbG9nLmRlYnVnICJDcmVvIGxpbmsgdHJhIGxhIGlzc3VlIG9nZ2V0dG8gZGkgdHJhbnNpdGlvbiBlIGxhIGlzc3VlIHJpc3VsdGFudGUgZGFsIGZpbHRybyIKICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuY3JlYXRlSXNzdWVMaW5rKGkuZ2V0SWQoKSwgaXNzdWUuZ2V0SWQoKSwgTG9uZy5wYXJzZUxvbmcocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXNJZCddLnRvU3RyaW5nKCkpLCAxLCB1c2VyKTsKICAgICAgICAgICAgICAKICAgIH0KICAgIAp9IGVsc2UgewogICAgbG9nLmVycm9yKCJJbnZhbGlkIEpRTDogIiArIGpxbFNlYXJjaCk7Cn0g</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </function>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">a73cc7d1-9469-4cfd-a066-0850639df8f8</arg>
              <arg name="FIELD_NOTES">YCFgSW50ZXJuYWwgVGVjaG5pY2lhbnM6IGZpbGwgaW4gT1BfSU5URVJOQUxfU1VQUExJRVIgKGludGVybmFsIHN1cHBsaWVyKSB0byBiZSB1c2VkIGlmIHRoZSB0aWNrZXQgaGFzIHRvIGJlIGFzc2lnbmVkIHRvIGludGVybmFsIHRlY2hz</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uY3Jvd2QuZW1iZWRkZWQuYXBpLlVzZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLnVzZXIuVXNlclByb3BlcnR5TWFuYWdlclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS51c2VyLnV0aWwuVXNlck1hbmFnZXIgXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5ldmVudC50eXBlLkV2ZW50RGlzcGF0Y2hPcHRpb25cblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbi8qU2NyaXB0IFZhcmlhYmxlcyovXG4vL1BlciB0ZXN0IGRhIGNvbnNvbGVcbi8vZGVmIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpXG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTM3NTNcIilcblVzZXJQcm9wZXJ0eU1hbmFnZXIgdXNlclByb3BlcnR5TWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldFVzZXJQcm9wZXJ0eU1hbmFnZXIoKVxuQ2xhc3MgaXFsRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuSVFMRmFjYWRlXCIpO1xuZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG4vKiBHZXQgSW5zaWdodCBPYmplY3QgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7XG5kZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcblxuZGVmIHNjaGVtYU9QQUFpZCA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b0ludGVnZXIoKVxuZGVmIHNjaGVtYURPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8nXS50b1N0cmluZygpXG5kZWYgdmlzaWJpbGl0eSA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YudGt0VmlzaWJpbGl0eSddID8gcHJvcGVydGllc1snY2YudGt0VmlzaWJpbGl0eSddLnRvU3RyaW5nKCkgOiBcIk9QX1RLVF9WSVNJQklMSVRZX0tFWVwiKVswXVxuZGVmIGludGVybmFsU3VwcGxpZXIgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmludGVybmFsU3VwcGxpZXInXSA/IHByb3BlcnRpZXNbJ2NmLmludGVybmFsU3VwcGxpZXInXS50b1N0cmluZygpIDogXCJPUF9JTlRFUk5BTF9TVVBQTElFUlwiKVswXVxuXG5kZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcbmRlZiB2aXNpYmlsaXR5S2V5ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh2aXNpYmlsaXR5KVswXS50b1N0cmluZygpLnN1YnN0cmluZyhpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHZpc2liaWxpdHkpWzBdLnRvU3RyaW5nKCkuaW5kZXhPZignKCcpKzEsaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh2aXNpYmlsaXR5KVswXS50b1N0cmluZygpLmluZGV4T2YoJyknKSlcbi8vbG9nLmRlYnVnIHZpc2liaWxpdHlLZXlcbmRlZiBjb21wYW55UmVmID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbih2aXNpYmlsaXR5S2V5KS5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnZpc2liaWxpdHlLZXkuY29tcGFueVJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTtcbi8vbG9nLmluZm8gXCJjb21wYW55UmVmOiBcIiArIGNvbXBhbnlSZWZcbmRlZiBjb21wYW55UmVmSWQgPSBjb21wYW55UmVmLnRvU3RyaW5nKCkuc3Vic3RyaW5nKGNvbXBhbnlSZWYudG9TdHJpbmcoKS5pbmRleE9mKCcoJykrMSxjb21wYW55UmVmLnRvU3RyaW5nKCkuaW5kZXhPZignKScpKVxuZGVmIGNvbXBhbnlTdXBwbGllciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wYW55UmVmSWQudG9JbnRlZ2VyKCksIHByb3BlcnRpZXNbJ2lvYmoudmlzaWJpbGl0eUtleS5zdXBwbGllclJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTtcbi8vbG9nLmRlYnVnIGNvbXBhbnlTdXBwbGllclxuZGVmIGNvbXBhbnlTdXBwbGllcklkID0gY29tcGFueVN1cHBsaWVyLnRvU3RyaW5nKCkuc3Vic3RyaW5nKGNvbXBhbnlTdXBwbGllci50b1N0cmluZygpLmluZGV4T2YoJygnKSsxLGNvbXBhbnlTdXBwbGllci50b1N0cmluZygpLmluZGV4T2YoJyknKSlcbi8vbG9nLmRlYnVnIGNvbXBhbnlTdXBwbGllcklkXG5kZWYgb2JqZWN0cyA9IGlxbEZhY2FkZS5maW5kT2JqZWN0c0J5SVFMQW5kU2NoZW1hKHNjaGVtYU9QQUFpZCwgXCJvYmplY3RUeXBlPVN1cHBsaWVyIEFORCBTVVBQTElFUl9SRUYuS2V5ID0gXCIgKyBzY2hlbWFETytcIi1cIitjb21wYW55U3VwcGxpZXJJZClcbi8vbG9nLmRlYnVnIG9iamVjdHNcbmRlZiBvYmpLZXkgPSBvYmplY3RzWzBdLnRvU3RyaW5nKCkuc3Vic3RyaW5nKG9iamVjdHNbMF0udG9TdHJpbmcoKS5pbmRleE9mKCcoJykrMSxvYmplY3RzWzBdLnRvU3RyaW5nKCkuaW5kZXhPZignKScpKVxuLy9sb2cuZGVidWcgb2JqS2V5XG5NdXRhYmxlSXNzdWUgbWkgPSAoTXV0YWJsZUlzc3VlKSBpc3N1ZTtcbm1pLnNldEN1c3RvbUZpZWxkVmFsdWUoaW50ZXJuYWxTdXBwbGllciwgb2JqZWN0cyk7XG5Db21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7XG4iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">1</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">5e04d019-e862-4b3e-b4e6-2fe357f2f60f</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IERvYyBUZW1wbGF0ZSBnZW5lcmF0aW9uIC0gc2UgTmV3IEluc3RhbGxhdGlvbiBPUiBGaXJzdCBUaWNrZXQgPSB0cnVl</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5Xb3JrZmxvd0V4Y2VwdGlvbjtcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvblxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyO1xuaW1wb3J0IGdyb292eS5qc29uLlN0cmVhbWluZ0pzb25CdWlsZGVyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5DdXN0b21GaWVsZE1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3I7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMuY29kZWMuYmluYXJ5LkJhc2U2NDtcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5XG5pbXBvcnQgZ3Jvb3Z5eC5uZXQuaHR0cC5IVFRQQnVpbGRlclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcblxuZGVmIHJlcXVlc3RNZXRob2RcbmRlZiBiYXNlVVJMXG5cbmRlZiBmaXJzdFRpY2tldCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuZmlyc3RUa3QnXS50b1N0cmluZygpKVswXVxuZGVmIGFzc2V0ID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hc3NldCddLnRvU3RyaW5nKCkpWzBdXG5kZWYgc3VwcGxpZXIgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnN1cHBsaWVyJ10udG9TdHJpbmcoKSlbMF1cblxubG9nLmRlYnVnIGlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWVcbmxvZy5kZWJ1ZyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGZpcnN0VGlja2V0KVxuXG5cbi8qIFJFU1QgQVBJIHBlciBJbnZpbyBOb3RpZmljYSBFbWFpbCBPTlNJVEVfUkVQT1JUICovXG5yZXF1ZXN0TWV0aG9kID0gXCJHRVRcIjtcblxuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzdXBwbGllcikhPW51bGwgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldCkhPW51bGwgJiYgKGlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQubmV3SW5zdGFsbGF0aW9uJ10pIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZmlyc3RUaWNrZXQpIT1udWxsKSl7XG4gICAgZGVmIGZpcnN0X3RpY2tldD1mYWxzZVxuICAgIGRlZiB0ZW1wbGF0ZT1cIlwiXG4gICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShmaXJzdFRpY2tldCkhPW51bGwpe1xuICAgICAgICBmaXJzdF90aWNrZXQ9dHJ1ZVxuICAgICAgICB0ZW1wbGF0ZT1cIkZJUlNUX1RJQ0tFVCU3Q01BTlVGQUNUVVJFUlwiXG4gICAgfWVsc2V7XG4gICAgICAgIHRlbXBsYXRlPVwiTkVXX0lOU1RBTExBVElPTl9DUkVBVEVfVEtUJTdDTUFOVUZBQ1RVUkVSXCJcbiAgICB9XG4gICAgXG4gICAgaWYoaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5uZXdJbnN0YWxsYXRpb24nXSkpe1xuICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvYXV0b21hdGlvbi9kb2N1bWVudC9nZW5lcmF0aW9uL2NoZWNrP0lTU1VFX0tFWT1cIisgaXNzdWUua2V5ICtcIiZET0NfQ0FURUdPUlk9XCIgKyB0ZW1wbGF0ZSArIFwiJkVOQUJMRURfRk9SX0ZJUlNUX1RJQ0tFVD1cIitmaXJzdF90aWNrZXQrXCImSU1QT1JUX0ZST009XCJcbiAgICB9ZWxzZXtcbiAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vZG9jdW1lbnQvZ2VuZXJhdGlvbi9jaGVjaz9JU1NVRV9LRVk9XCIrIGlzc3VlLmtleSArXCImRE9DX0NBVEVHT1JZPVwiICsgdGVtcGxhdGUgKyBcIiZFTkFCTEVEX0ZPUl9GSVJTVF9USUNLRVQ9XCIrZmlyc3RfdGlja2V0K1wiJklNUE9SVF9GUk9NPU9QX0FTU0VUXCJcbiAgICB9XG4gICAgXG4gICAgbG9nLmRlYnVnIGJhc2VVUkxcbiAgICBVUkwgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cdGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICBcbiAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICBsb2cuZGVidWcgXCJFcnJvclN0cmVhbTogXCIgKyBjb25uZWN0aW9uLmdldEVycm9yU3RyZWFtKCkudG9TdHJpbmcoKVxuICAgICAgICBsb2cuZGVidWcgXCJnZXRIZWFkZXJGaWVsZHMoKTogXCIgKyBjb25uZWN0aW9uLmdldEhlYWRlckZpZWxkcygpXG4gICAgICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHRcbiAgICAgICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xuXG4gICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpXG4gICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgXG4gICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcblxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLURPQ1NcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5tZXNzYWdlKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIkVcIiwgb3V0cHV0LnRvU3RyaW5nKCkpXG4gICAgfVxufVxuIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuV29ya2Zsb3dFeGNlcHRpb247CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7CmltcG9ydCBncm9vdnkuanNvbi5TdHJlYW1pbmdKc29uQnVpbGRlcjsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5DdXN0b21GaWVsZE1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3I7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlCmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMuY29kZWMuYmluYXJ5LkJhc2U2NDsKaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGdyb292eXgubmV0Lmh0dHAuSFRUUEJ1aWxkZXIKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXIKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsCgpQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpCkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpCnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7Cglwcm9wZXJ0aWVzLmxvYWQoaXQpCn0KQ2F0ZWdvcnkgbG9nID0gQ2F0ZWdvcnkuZ2V0SW5zdGFuY2UoImNvbS5vbnJlc29sdmUuamlyYS5ncm9vdnkuUG9zdEZ1bmN0aW9uIikKbG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpCgpJc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7CkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTsKCmRlZiByZXF1ZXN0TWV0aG9kCmRlZiBiYXNlVVJMCgpkZWYgZmlyc3RUaWNrZXQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmZpcnN0VGt0J10udG9TdHJpbmcoKSlbMF0KCmxvZy5kZWJ1ZyBpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lCmxvZy5kZWJ1ZyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGZpcnN0VGlja2V0KQoKCi8qIFJFU1QgQVBJIHBlciBJbnZpbyBOb3RpZmljYSBFbWFpbCBPTlNJVEVfUkVQT1JUICovCnJlcXVlc3RNZXRob2QgPSAiR0VUIjsKCmlmKGlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQubmV3SW5zdGFsbGF0aW9uJ10pIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZmlyc3RUaWNrZXQpIT1udWxsKXsKICAgIGRlZiBmaXJzdF90aWNrZXQ9ZmFsc2UKICAgIGRlZiB0ZW1wbGF0ZT0iIgogICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShmaXJzdFRpY2tldCkhPW51bGwpewogICAgICAgIGZpcnN0X3RpY2tldD10cnVlCiAgICAgICAgdGVtcGxhdGU9IkZJUlNUX1RJQ0tFVCU3Q01BTlVGQUNUVVJFUiIKICAgIH1lbHNlewogICAgICAgIHRlbXBsYXRlPSJORVdfSU5TVEFMTEFUSU9OX0NSRUFURV9US1QlN0NNQU5VRkFDVFVSRVIiCiAgICB9CiAgICBiYXNlVVJMID0gImh0dHA6Ly8iICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyAiL29wL3Jlc3QvYXV0b21hdGlvbi9kb2N1bWVudC9nZW5lcmF0aW9uL2NoZWNrP0lTU1VFX0tFWT0iKyBpc3N1ZS5rZXkgKyImRE9DX0NBVEVHT1JZPSIgKyB0ZW1wbGF0ZSArICImRU5BQkxFRF9GT1JfRklSU1RfVElDS0VUPSIrZmlyc3RfdGlja2V0KyImSU1QT1JUX0ZST009T1BfQVNTRVQiCiAgICBsb2cuZGVidWcgYmFzZVVSTAogICAgVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTCkKICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7CiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7CiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eSgiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL2pzb24iKTsKICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KCJBY2NlcHQiLCAiKi8qIik7CiAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpOwogICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpOwogICAgY29ubmVjdGlvbi5jb25uZWN0KCk7CgogICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKQogICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCiAgICBkZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KCkKICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KCkKCiAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoIjIwMCIpKXsKICAgICAgICBsb2cuZGVidWcgInVybDogIiArIHVybAogICAgICAgIGxvZy5kZWJ1ZyAiUmVzcG9uc2VDb2RlOiIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpCiAgICAgICAgbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKICAgICAgICBsb2cuZGVidWcgIkVycm9yU3RyZWFtOiAiICsgY29ubmVjdGlvbi5nZXRFcnJvclN0cmVhbSgpLnRvU3RyaW5nKCkKICAgICAgICBsb2cuZGVidWcgImdldEhlYWRlckZpZWxkcygpOiAiICsgY29ubmVjdGlvbi5nZXRIZWFkZXJGaWVsZHMoKQogICAgICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQKICAgICAgICBsb2cuZGVidWcgIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogIiArIG91dHB1dE1zZwoKICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKQogICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpCiAgICAgICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICAKICAgICAgICBsb2cuZGVidWcgIm1lc3NhZ2U6ICIgKyAganNvbl9vYmplY3QubWVzc2FnZQoKICAgICAgICBlTGlzdEVycm9ycy5hZGQoIkUiKQogICAgICAgIGVMaXN0RXJyb3JzLmFkZCgiT1AtRE9DUyIpCiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgIiAiICsganNvbl9vYmplY3QubWVzc2FnZSkKICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKQogICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycykKCiAgICAgICAgb3V0cHV0LmFkZChlTGlzdCkKICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJFIiwgb3V0cHV0LnRvU3RyaW5nKCkpCiAgICB9Cn0K</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </function>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">23c263e9-c1c5-4814-9728-19694c287347</arg>
              <arg name="FIELD_NOTES">YCFgQ3JlYXRlIFNOIGlmIG5vdCBleGlzdGluZw==</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuXG5kZWYgU04gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfU0FQX1NFUlZJQ0VfTk9USUZJQ0FUSU9OXCIpWzBdXG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcblxuVVJMIHVybFxuSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvblxuXG5pZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKFNOKSA9PSBudWxsICYmIGlzc3VlLmlzc3VlVHlwZS5uYW1lICE9IFwiUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXRcIil7XG4gICAgcmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuXG4gICAgZGVmIGJvZHlfcmVxID0gW11cbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXG4gICAgICAgIFwic3RhdHVzXCI6IFwiSU5QXCJcbiAgICBdIFxuXG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL3NlcnZpY2Uvbm90aWZpY2F0aW9uXCJcblxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxuICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNOOiBcIiArIGJvZHlfcmVxXG4gICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxuICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgIFxuICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG4gICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcblxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TTi1VUERBVEVcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICB9XG59Iiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
  </initial-actions>
  <global-actions>
    <action id="351" name="Sospendi Ticket" view="fieldscreen">
      <meta name="opsbar-sequence">110</meta>
      <meta name="jira.description"></meta>
      <meta name="jira.fieldscreen.id">20200</meta>
      <restrict-to>
        <conditions>
          <condition type="class">
            <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
            <arg name="FIELD_CONDITION">YCFgIWlzc3VlLmdldFN0YXR1cygpLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscygiQ2xvc2VkIil8fHw=</arg>
            <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
            <arg name="FIELD_PREVIEW_ISSUE"></arg>
          </condition>
        </conditions>
      </restrict-to>
      <results>
        <unconditional-result old-status="null" status="null" step="16">
          <post-functions>
            <function type="class">
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="maxAllowed-integerValue">50</arg>
              <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="field">customfield_22693</arg>
              <arg name="scopeType">SAME</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="field6">customfield_22647</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
              <arg name="field3">customfield_22758</arg>
              <arg name="field2">customfield_22756</arg>
              <arg name="scopeSource-jql"></arg>
              <arg name="field5">customfield_23603</arg>
              <arg name="field4">customfield_22757</arg>
            </function>
            <function type="class">
              <arg name="field.name">resolution</arg>
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
              <arg name="field.value">10401</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
    <action id="361" name="Annulla Ticket" view="fieldscreen">
      <meta name="opsbar-sequence">120</meta>
      <meta name="jira.description"></meta>
      <meta name="jira.fieldscreen.id">20200</meta>
      <restrict-to>
        <conditions>
          <condition type="class">
            <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
            <arg name="FIELD_CONDITION">YCFgIWlzc3VlLmdldFN0YXR1cygpLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscygiQ2xvc2VkIil8fHw=</arg>
            <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
            <arg name="FIELD_PREVIEW_ISSUE"></arg>
          </condition>
        </conditions>
      </restrict-to>
      <results>
        <unconditional-result old-status="null" status="null" step="17">
          <post-functions>
            <function type="class">
              <arg name="conditionList">3</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="comparisonType">1</arg>
              <arg name="precondition">true</arg>
              <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
              <arg name="preconditionNegateResult-booleanValue"></arg>
              <arg name="fieldValue">Planned Maintenance Ticket</arg>
              <arg name="preconditionMode-textValue">DISCARD</arg>
              <arg name="fieldsList">issuetype</arg>
            </function>
            <function type="class">
              <arg name="field.copyFieldSource1"></arg>
              <arg name="textValue">10103</arg>
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="maxAllowed-integerValue">50</arg>
              <arg name="workflowName-textValue">OPAA: PM Task Workflow</arg>
              <arg name="performTransitionAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="scopeType">PARENT</arg>
              <arg name="destination-scopeTarget">SUB_TASK</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitieslinkedtransition-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="integerValue">161</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">ch.beecom.jira.jsu.workflow.function.linkedtransition.LinkedTransitionFunction</arg>
              <arg name="scopeSource-jql"></arg>
              <arg name="status"></arg>
            </function>
            <function type="class">
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="maxAllowed-integerValue">50</arg>
              <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="field">customfield_22693</arg>
              <arg name="scopeType">SAME</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="field6">customfield_22647</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
              <arg name="field3">customfield_22758</arg>
              <arg name="field2">customfield_22756</arg>
              <arg name="scopeSource-jql"></arg>
              <arg name="field5">customfield_23603</arg>
              <arg name="field4">customfield_22757</arg>
            </function>
            <function type="class">
              <arg name="field.name">resolution</arg>
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
              <arg name="field.value">10103</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
  </global-actions>
  <common-actions>
    <action id="931" name="Start Traveling">
      <meta name="jira.description"></meta>
      <meta name="jira.fieldscreen.id"></meta>
      <restrict-to>
        <conditions>
          <condition type="class">
            <arg name="FIELD_FUNCTION_ID">787fd14c-d7a6-4a78-a3cd-9488c7d37a1a</arg>
            <arg name="FIELD_INVERT_CONDITION"></arg>
            <arg name="FIELD_NOTES">YCFgRElTQUJMRUQ=</arg>
            <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.UserCondition</arg>
            <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
            <arg name="FIELD_USER_IDS">arianna.fabbri</arg>
          </condition>
        </conditions>
      </restrict-to>
      <results>
        <unconditional-result old-status="null" status="null" step="21">
          <post-functions>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
    <action id="741" name="Annulla Richiesta Preventivo">
      <meta name="jira.description"></meta>
      <meta name="jira.fieldscreen.id"></meta>
      <results>
        <unconditional-result old-status="null" status="null" step="1">
          <post-functions>
            <function type="class">
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="scopeType">SAME</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="scopeSource-jql"></arg>
              <arg name="maxAllowed-integerValue">50</arg>
              <arg name="field11">customfield_22677</arg>
              <arg name="field12">customfield_22675</arg>
              <arg name="field10">customfield_22674</arg>
              <arg name="field">customfield_22656</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="field13">customfield_22678</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="field7">customfield_22647</arg>
              <arg name="field6">customfield_23603</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="field9">customfield_22676</arg>
              <arg name="field8">customfield_22673</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
              <arg name="field3">customfield_22693</arg>
              <arg name="field2">customfield_22681</arg>
              <arg name="field5">customfield_23402</arg>
              <arg name="field4">customfield_23401</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
    <action id="101" name="Conferma senza Notifica al Cliente" view="fieldscreen">
      <meta name="opsbar-sequence">20</meta>
      <meta name="jira.description"></meta>
      <meta name="jira.fieldscreen.id">19923</meta>
      <restrict-to>
        <conditions>
          <condition type="class">
            <arg name="FIELD_FUNCTION_ID">3f2fe9ea0b98294db32d475986c17366260064ed</arg>
            <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
            <arg name="disabled">true</arg>
            <arg name="FIELD_CONDITION">YCFgaXNzdWUuaXNzdWVUeXBlLm5hbWUgPT0gJ05ldyBJbnN0YWxsYXRpb24nfHx8</arg>
            <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
            <arg name="FIELD_PREVIEW_ISSUE"></arg>
          </condition>
        </conditions>
      </restrict-to>
      <validators>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">5075c35e-1e44-4679-bd11-39d59fb7bffa</arg>
          <arg name="FIELD_NOTES">YCFgQ3JlYXRlIFNOIGZvciBvbGQgdGlja2V0cw==</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuXG5kZWYgU04gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfU0FQX1NFUlZJQ0VfTk9USUZJQ0FUSU9OXCIpWzBdXG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcblxuVVJMIHVybFxuSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvblxuXG5pZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKFNOKSA9PSBudWxsICYmIGlzc3VlLmlzc3VlVHlwZS5uYW1lICE9IFwiUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXRcIil7XG4gICAgcmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuXG4gICAgZGVmIGJvZHlfcmVxID0gW11cbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXG4gICAgICAgIFwic3RhdHVzXCI6IFwiT1BFXCJcbiAgICBdIFxuXG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL3NlcnZpY2Uvbm90aWZpY2F0aW9uXCJcblxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxuICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNOOiBcIiArIGJvZHlfcmVxXG4gICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxuICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgIFxuICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG4gICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcblxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TTi1VUERBVEVcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICB9XG59Iiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="disabled">true</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">5ee7ae0d-08e5-4368-b76a-c0a38b7b4a52</arg>
          <arg name="FIELD_NOTES">YCFgU0FQOiB1cGRhdGUgU04gc3RhdHVz</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiBhdXRvbWF0aWNhbGx5Q29uZmlybWVkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q29uZmlybWVkJ10udG9TdHJpbmcoKSlbMF1cblxuZGVmIHNhcFNOID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1NBUF9TRVJWSUNFX05PVElGSUNBVElPTlwiKVswXVxuZGVmIHNhcFNPID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1NBUF9TRVJWSUNFX09SREVSXCIpWzBdXG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcbmRlZiBzblJlc3VsdCA9IGZhbHNlXG5cblVSTCB1cmxcbkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb25cblxuXG5kZWYgdXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuZGVmIGlzc3VlU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlU2VydmljZSgpXG5cbmlmKGlzc3VlLmlzc3VlVHlwZS5uYW1lICE9IFwiUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXRcIiAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNhcFNOKSAhPSBudWxsKXtcbiAgICByZXF1ZXN0TWV0aG9kID0gXCJQT1NUXCI7XG5cbiAgICBkZWYgYm9keV9yZXEgPSBbXVxuICAgIGJvZHlfcmVxID0gW1xuICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleSxcbiAgICAgICAgXCJzdGF0dXNcIjogXCJQTEFcIlxuICAgIF0gXG5cbiAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS9hZnRlci9zYWxlcy9jcmVhdGUvc2VydmljZS9ub3RpZmljYXRpb25cIlxuXG4gICAgbG9nLmRlYnVnIFwiYmFzZVVSTCBTTjogXCIgKyBiYXNlVVJMXG4gICAgbG9nLmRlYnVnIFwiYm9keV9yZXEgU046IFwiICsgYm9keV9yZXFcbiAgICB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG4gICAgbG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG5cbiAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgXG4gICAgICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHRcbiAgICAgICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xuXG4gICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpXG4gICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgXG4gICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcbiAgICAgICAgbG9nLmRlYnVnIFwiZXJyb3JzOiBcIiArICBqc29uX29iamVjdC5lcnJvcnMudG9TdHJpbmcoKVxuXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtU0FQLVNOLVVQREFURVwiKVxuICAgICAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGpzb25fb2JqZWN0LmVycm9yc1swXS50b1N0cmluZygpKVxuICAgICAgICBcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcbiAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgIH1lbHNle1xuICAgICAgICBzblJlc3VsdCA9IHRydWVcbiAgICAgICAgXG4gICAgfVxufVxuXG5pZihpc3N1ZS5pc3N1ZVR5cGUubmFtZSAhPSBcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0XCIgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzYXBTTikgPT0gbnVsbCl7XG4gICAgLy9DcmVvIGxhIFNOIG5vbiBwcmVzZW50ZSBzdWwgdGlja2V0XG4gICAgcmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuXG4gICAgZGVmIGJvZHlfcmVxID0gW11cbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXG4gICAgICAgIFwic3RhdHVzXCI6IFwiUExBXCJcbiAgICBdIFxuXG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL3NlcnZpY2Uvbm90aWZpY2F0aW9uXCJcblxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxuICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNOOiBcIiArIGJvZHlfcmVxXG4gICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxuICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuXG4gICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAxXCIpKXtcbiAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcblxuICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG4gICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcblxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TTi1VUERBVEVcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICB9ZWxzZXtcbiAgICAgICAgc25SZXN1bHQgPSB0cnVlXG4gICAgICAgIFxuICAgIH1cbn1cblxuXG4vL1ZlcmlmaWNvIHNlIFx1MDBlOCBuZWNlc3NhcmlvIGNyZWFyZSBpbCBTT1xuaWYoaXNzdWUuaXNzdWVUeXBlLm5hbWUgIT0gXCJQbGFubmVkIE1haW50ZW5hbmNlIFRpY2tldFwiICYmIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2FwU08pID09IG51bGwgJiYgc25SZXN1bHQpe1xuICAgIC8qKiBTRVJWSUNFIE9SREVSIENSRUFUSU9OICoqL1xuICAgIGRlZiBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXlcbiAgICBdIFxuICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL2FmdGVyL3NhbGVzL2NyZWF0ZS9vci91cGRhdGUvc2VydmljZS9vcmRlclwiXG5cbiAgICBsb2cuZGVidWcgXCJiYXNlVVJMIFNPOiBcIiArIGJhc2VVUkxcbiAgICBsb2cuZGVidWcgXCJib2R5X3JlcSBTTzogXCIgKyBib2R5X3JlcVxuICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cbiAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDFcIikgJiYgIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuXG4gICAgICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHRcbiAgICAgICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xuXG4gICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpXG4gICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgXG4gICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcbiAgICAgICAgbG9nLmRlYnVnIFwiZXJyb3JzOiBcIiArICBqc29uX29iamVjdC5lcnJvcnMudG9TdHJpbmcoKVxuXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtU0FQLVNPLUNSRUFURVwiKVxuICAgICAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGpzb25fb2JqZWN0LmVycm9yc1swXSlcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcbiAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgIH1cbn1cblxuc25SZXN1bHQgPSBmYWxzZVxuXG5pZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpPT1udWxsIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCkudG9TdHJpbmcoKS5lcXVhbHMoXCJOb1wiKSl7XG4gICAgTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG4gICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgIGxvZy53YXJuIFwiSXNzdWUgY29uIHJlbGF0ZXNJbklzc3VlTGlua1wiXG4gICAgICAgICAgICAvKkVzZWd1aXJlIHRyYW5zYXppb25lIGRpIHN0YXRvIGRlbGxhIHNvdXJjZUlzc3VlKi9cbiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZSA9IGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKVxuICAgICAgICAgICAgaWYobGlua2VkSXNzdWUuaXNzdWVUeXBlLm5hbWUgIT0gXCJQbGFubmVkIE1haW50ZW5hbmNlIFRpY2tldFwiICYmIGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2FwU04pICE9IG51bGwpe1xuICAgICAgICAgICAgICAgIHJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcblxuICAgICAgICAgICAgICAgIGRlZiBib2R5X3JlcSA9IFtdXG4gICAgICAgICAgICAgICAgYm9keV9yZXEgPSBbXG4gICAgICAgICAgICAgICAgICAgIFwiaXNzdWVLZXlcIjogbGlua2VkSXNzdWUua2V5LFxuICAgICAgICAgICAgICAgICAgICBcInN0YXR1c1wiOiBcIlBMQVwiXG4gICAgICAgICAgICAgICAgXSBcblxuICAgICAgICAgICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL2FmdGVyL3NhbGVzL2NyZWF0ZS9zZXJ2aWNlL25vdGlmaWNhdGlvblwiXG5cbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJiYXNlVVJMIFNOOiBcIiArIGJhc2VVUkxcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJib2R5X3JlcSBTTjogXCIgKyBib2R5X3JlcVxuICAgICAgICAgICAgICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgICAgICAgICAgICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBkZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICAgICAgICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuXG4gICAgICAgICAgICAgICAgICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHRcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xuXG4gICAgICAgICAgICAgICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgICAgICAgICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpXG4gICAgICAgICAgICAgICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiZXJyb3JzOiBcIiArICBqc29uX29iamVjdC5lcnJvcnMudG9TdHJpbmcoKVxuXG4gICAgICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICAgICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtU0FQLVNOLVVQREFURVwiKVxuICAgICAgICAgICAgICAgICAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGpzb25fb2JqZWN0LmVycm9yc1swXS50b1N0cmluZygpKVxuXG4gICAgICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVycm9yIG9uIGxpbmtlZCBpc3N1ZTogXCIgKyBsaW5rZWRJc3N1ZSArIFwiOiBcIiArIGVycm9yTXNncylcbiAgICAgICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICBzblJlc3VsdCA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2FwU04pID09IG51bGwgJiYgbGlua2VkSXNzdWUuaXNzdWVUeXBlLm5hbWUgIT0gXCJQbGFubmVkIE1haW50ZW5hbmNlIFRpY2tldFwiKXtcbiAgICAgICAgICAgICAgICByZXF1ZXN0TWV0aG9kID0gXCJQT1NUXCI7XG5cbiAgICAgICAgICAgICAgICBkZWYgYm9keV9yZXEgPSBbXVxuICAgICAgICAgICAgICAgIGJvZHlfcmVxID0gW1xuICAgICAgICAgICAgICAgICAgICBcImlzc3VlS2V5XCI6IGxpbmtlZElzc3VlLmtleSxcbiAgICAgICAgICAgICAgICAgICAgXCJzdGF0dXNcIjogXCJQTEFcIlxuICAgICAgICAgICAgICAgIF0gXG5cbiAgICAgICAgICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS9hZnRlci9zYWxlcy9jcmVhdGUvc2VydmljZS9ub3RpZmljYXRpb25cIlxuXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiYmFzZVVSTCBTTjogXCIgKyBiYXNlVVJMXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiYm9keV9yZXEgU046IFwiICsgYm9keV9yZXFcbiAgICAgICAgICAgICAgICB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG5cbiAgICAgICAgICAgICAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG5cbiAgICAgICAgICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDFcIikpe1xuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuXG4gICAgICAgICAgICAgICAgICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHRcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xuXG4gICAgICAgICAgICAgICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgICAgICAgICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpXG4gICAgICAgICAgICAgICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiZXJyb3JzOiBcIiArICBqc29uX29iamVjdC5lcnJvcnMudG9TdHJpbmcoKVxuXG4gICAgICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICAgICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtU0FQLVNOLVVQREFURVwiKVxuICAgICAgICAgICAgICAgICAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGpzb25fb2JqZWN0LmVycm9yc1swXSlcbiAgICAgICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRXJyb3Igb24gbGlua2VkIGlzc3VlOiBcIiArIGxpbmtlZElzc3VlICsgXCI6IFwiICsgZXJyb3JNc2dzKVxuICAgICAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIHNuUmVzdWx0ID0gdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLyoqIFNFUlZJQ0UgT1JERVIgQ1JFQVRJT04gKiovXG4gICAgICAgICAgICBpZihsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNhcFNPKSA9PSBudWxsICYmIHNuUmVzdWx0KXtcbiAgICAgICAgICAgICAgICBkZWYgYm9keV9yZXEgPSBbXG4gICAgICAgICAgICAgICAgICAgIFwiaXNzdWVLZXlcIjogbGlua2VkSXNzdWUua2V5XG4gICAgICAgICAgICAgICAgXSBcbiAgICAgICAgICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS9hZnRlci9zYWxlcy9jcmVhdGUvb3IvdXBkYXRlL3NlcnZpY2Uvb3JkZXJcIlxuXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiYmFzZVVSTCBTTzogXCIgKyBiYXNlVVJMXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiYm9keV9yZXEgU086IFwiICsgYm9keV9yZXFcbiAgICAgICAgICAgICAgICB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG5cbiAgICAgICAgICAgICAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgICAgICAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAxXCIpICYmICFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcblxuICAgICAgICAgICAgICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgICAgICAgICAgICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICAgICAgICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICAgICAgICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcblxuICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TTy1DUkVBVEVcIilcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVycm9yIG9uIGxpbmtlZCBpc3N1ZTogXCIgKyBsaW5rZWRJc3N1ZSArIFwiOiBcIiArIGVycm9yTXNncylcbiAgICAgICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc25SZXN1bHQgPSBmYWxzZVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBMaXN0PElzc3VlTGluaz4gYWxsT3V0SXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldE91dHdhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKVxuICAgIGZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbE91dElzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG5cbiAgICAgICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgbG9nLndhcm4gXCJJc3N1ZSBjb24gcmVsYXRlc091dElzc3VlTGlua1wiXG4gICAgICAgICAgICAvKkVzZWd1aXJlIHRyYW5zYXppb25lIGRpIHN0YXRvIGRlbGxhIGRlc3RpbmF0aW9uSXNzdWUqL1xuICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlID0gaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KClcbiAgICAgICAgICAgIGlmKGxpbmtlZElzc3VlLmlzc3VlVHlwZS5uYW1lICE9IFwiUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXRcIiAmJiBsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNhcFNOKSAhPSBudWxsKXtcbiAgICAgICAgICAgICAgICByZXF1ZXN0TWV0aG9kID0gXCJQT1NUXCI7XG5cbiAgICAgICAgICAgICAgICBkZWYgYm9keV9yZXEgPSBbXVxuICAgICAgICAgICAgICAgIGJvZHlfcmVxID0gW1xuICAgICAgICAgICAgICAgICAgICBcImlzc3VlS2V5XCI6IGxpbmtlZElzc3VlLmtleSxcbiAgICAgICAgICAgICAgICAgICAgXCJzdGF0dXNcIjogXCJQTEFcIlxuICAgICAgICAgICAgICAgIF0gXG5cbiAgICAgICAgICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS9hZnRlci9zYWxlcy9jcmVhdGUvc2VydmljZS9ub3RpZmljYXRpb25cIlxuXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiYmFzZVVSTCBTTjogXCIgKyBiYXNlVVJMXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiYm9keV9yZXEgU046IFwiICsgYm9keV9yZXFcbiAgICAgICAgICAgICAgICB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG5cbiAgICAgICAgICAgICAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgICAgICAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcblxuICAgICAgICAgICAgICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgICAgICAgICAgICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICAgICAgICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICAgICAgICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcblxuICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TTi1VUERBVEVcIilcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0udG9TdHJpbmcoKSlcblxuICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFcnJvciBvbiBsaW5rZWQgaXNzdWU6IFwiICsgbGlua2VkSXNzdWUgKyBcIjogXCIgKyBlcnJvck1zZ3MpXG4gICAgICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgc25SZXN1bHQgPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNhcFNOKSA9PSBudWxsICYmIGxpbmtlZElzc3VlLmlzc3VlVHlwZS5uYW1lICE9IFwiUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXRcIil7XG4gICAgICAgICAgICAgICAgcmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuXG4gICAgICAgICAgICAgICAgZGVmIGJvZHlfcmVxID0gW11cbiAgICAgICAgICAgICAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgICAgICAgICAgICAgXCJpc3N1ZUtleVwiOiBsaW5rZWRJc3N1ZS5rZXksXG4gICAgICAgICAgICAgICAgICAgIFwic3RhdHVzXCI6IFwiUExBXCJcbiAgICAgICAgICAgICAgICBdIFxuXG4gICAgICAgICAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL3NlcnZpY2Uvbm90aWZpY2F0aW9uXCJcblxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNOOiBcIiArIGJvZHlfcmVxXG4gICAgICAgICAgICAgICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgICAgICAgICAgICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuXG4gICAgICAgICAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAxXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcblxuICAgICAgICAgICAgICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgICAgICAgICAgICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICAgICAgICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICAgICAgICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcblxuICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TTi1VUERBVEVcIilcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVycm9yIG9uIGxpbmtlZCBpc3N1ZTogXCIgKyBsaW5rZWRJc3N1ZSArIFwiOiBcIiArIGVycm9yTXNncylcbiAgICAgICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICBzblJlc3VsdD10cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNhcFNPKSA9PSBudWxsICYmIHNuUmVzdWx0KXtcbiAgICAgICAgICAgICAgICAvKiogU0VSVklDRSBPUkRFUiBDUkVBVElPTiAqKi9cbiAgICAgICAgICAgICAgICBkZWYgYm9keV9yZXEgPSBbXG4gICAgICAgICAgICAgICAgICAgIFwiaXNzdWVLZXlcIjogbGlua2VkSXNzdWUua2V5XG4gICAgICAgICAgICAgICAgXSBcbiAgICAgICAgICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS9hZnRlci9zYWxlcy9jcmVhdGUvb3IvdXBkYXRlL3NlcnZpY2Uvb3JkZXJcIlxuXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiYmFzZVVSTCBTTzogXCIgKyBiYXNlVVJMXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiYm9keV9yZXEgU086IFwiICsgYm9keV9yZXFcbiAgICAgICAgICAgICAgICB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG5cbiAgICAgICAgICAgICAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgICAgICAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAxXCIpICYmICFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcblxuICAgICAgICAgICAgICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgICAgICAgICAgICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICAgICAgICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICAgICAgICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcblxuICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TTy1DUkVBVEVcIilcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVycm9yIG9uIGxpbmtlZCBpc3N1ZTogXCIgKyBsaW5rZWRJc3N1ZSArIFwiOiBcIiArIGVycm9yTXNncylcbiAgICAgICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgfVxufVxuXG5cblxuICIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
      </validators>
      <results>
        <unconditional-result old-status="null" status="null" step="4">
          <post-functions>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
            <function type="class">
              <arg name="field.copyFieldSource1"></arg>
              <arg name="textValue">-1</arg>
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="maxAllowed-integerValue"></arg>
              <arg name="workflowName-textValue">OPAA: PM Task Workflow</arg>
              <arg name="performTransitionAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="scopeType">PARENT</arg>
              <arg name="destination-scopeTarget">SUB_TASK</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitieslinkedtransition-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="integerValue">31</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">ch.beecom.jira.jsu.workflow.function.linkedtransition.LinkedTransitionFunction</arg>
              <arg name="scopeSource-jql"></arg>
              <arg name="status"></arg>
            </function>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">2fd21626-8339-471c-b600-1cf830515e55</arg>
              <arg name="FIELD_NOTES">YCFgUE0gVGFzazogY2xlYXIgc3ViLXRhc2tzIGNhY2hl</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG5pc3N1ZS5nZXRTdWJUYXNrT2JqZWN0cygpLmVhY2h7XG4gICAgaSAtPiBcbiAgICAvKiBSRVNUIEFQSSBwZXIgcHVsaXppYSBjYWNoZSBpc3N1ZSBsaW5rYXRhICovXG4gICAgcmVxdWVzdE1ldGhvZCA9IFwiR0VUXCI7XG4gICAgLypTY3JpcHQgVmFyaWFibGVzKi9cbiAgICAvL1BlciB0ZXN0IGRhIGNvbnNvbGVcbiAgICAvL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTMyNTM1XCIpXG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vY2xlYXJDYWNoZS90aWNrZXRrZXkvXCIgKyBpLmtleVxuICAgIFVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgfVxufVxuIiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
            </function>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">18957343-c266-4078-a59d-eaf771da397c</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIGxpbmtlZFRpY2tldHMgJiBGYXN0LVRyYW5zYWN0IHRoZW0=</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLldBUk4pXG5cbmxvZy53YXJuIFwiJHtpc3N1ZS5rZXl9IFRyYW5zYXppb25lIENvbXBsZXRlIC0gUG9zdCBGdW5jdGlvbiBjaGVjayBsaW5rZWRJc3N1ZXNcIlxuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5kZWYgYXV0b21hdGljYWxseUNvbmZpcm1lZCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUNvbmZpcm1lZCddLnRvU3RyaW5nKCkpWzBdXG5Jc3N1ZUluZGV4aW5nU2VydmljZSBcdGlzc3VlSW5kZXhpbmdTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KElzc3VlSW5kZXhpbmdTZXJ2aWNlKVxuXG4vL1BlciB0ZXN0IGRhIGNvbnNvbGVcbi8vaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJPUFVULTI3NlwiKVxuXG4vKkRFViovXG5DT05GSVJNX1RPX0NVU1RPTUVSID0gcHJvcGVydGllc1snd2YudHIuY29uZmlybVRvQ3VzdG9tZXJOb0VtYWlsJ10gPyBwcm9wZXJ0aWVzWyd3Zi50ci5jb25maXJtVG9DdXN0b21lck5vRW1haWwnXSA6IDEwMVxuZGVmIHJlcXVlc3RNZXRob2RcbmRlZiBiYXNlVVJMXG5cbi8qUFJPRCovXG4vL0NPTkZJUk1fVE9fQ1VTVE9NRVJcblxuZGVmIHVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcbmRlZiBpc3N1ZVNlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZVNlcnZpY2UoKVxuXG4vKlNlIGVzZWd1byBsYSBjb25maXJtIHRvIGN1c3RvbWVyIHN1IHVuIHRpY2tldCBjb24gMSBvICsgdGlja2V0IGNvbGxlZ2F0aSwgdmVyaWZpY28gZSBzcG9zdG8gaW4gYXV0b21hdGljbyBnbGkgZXZlbnR1YWxpIHRpY2tldCBjb2xsZWdhdGkqL1xubG9nLndhcm4gXCJ2ZXJpZmljbyBlIHNwb3N0byBpbiBhdXRvbWF0aWNvIGdsaSBldmVudHVhbGkgdGlja2V0IGNvbGxlZ2F0aVwiXG5cbmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCk9PW51bGwgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKS50b1N0cmluZygpLmVxdWFscyhcIk5vXCIpKXtcbiAgICBMaXN0PElzc3VlTGluaz4gYWxsSW5Jc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0SW53YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxJbklzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG5cbiAgICAgICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgbG9nLndhcm4gXCJJc3N1ZSBjb24gcmVsYXRlc0luSXNzdWVMaW5rXCJcbiAgICAgICAgICAgIC8qRXNlZ3VpcmUgdHJhbnNhemlvbmUgZGkgc3RhdG8gZGVsbGEgc291cmNlSXNzdWUqL1xuICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlID0gaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpXG4gICAgICAgICAgICBkZWYgbGlua2VkSXNzdWVTdGF0dXMgPSBsaW5rZWRJc3N1ZS5nZXRTdGF0dXMoKVxuICAgICAgICAgICAgZGVmIHRyYW5zaXRpb25JZFxuICAgICAgICAgICAgaWYobGlua2VkSXNzdWVTdGF0dXMubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5hY2NlcHRlZEJ5U3VwcGxpZXInXS50b1N0cmluZygpKXtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9Q09ORklSTV9UT19DVVNUT01FUlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYodHJhbnNpdGlvbklkPT1DT05GSVJNX1RPX0NVU1RPTUVSKXtcbiAgICAgICAgICAgICAgICAvLyBQcmVwYXJlIG91ciBpbnB1dCBmb3IgdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKVxuICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGgge1xuICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2sodHJ1ZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy9kZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKVxuICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09IFwiWWVzXCIgfVxuICAgICAgICAgICAgICAgIC8vaXNzdWVJbnB1dFBhcmFtZXRlcnMuYWRkQ3VzdG9tRmllbGRWYWx1ZShmaWVsZENvbmZpZy5nZXRJZCgpLCBcIlllc1wiKSBcbiAgICAgICAgICAgICAgICAvL2xvZy53YXJuIFwiaXNzdWVJbnB1dFBhcmFtZXRlcnM6IFwiICsgaXNzdWVJbnB1dFBhcmFtZXRlcnNcbiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcbiAgICAgICAgICAgICAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBsaW5rZWRJc3N1ZVxuXG4gICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNvbmZpcm1lZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSlcbiAgICAgICAgICAgICAgICBsb2cud2FybiBcImZpZWxkQ29uZmlnOiBcIiArIGZpZWxkQ29uZmlnXG4gICAgICAgICAgICAgICAgZGVmIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gXCJZZXNcIiB9XG4gICAgICAgICAgICAgICAgYXV0b21hdGljYWxseUNvbmZpcm1lZC51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcblxuICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGxpbmtlZElzc3VlKVxuICAgICAgICAgICAgICAgIGxvZy53YXJuIFwiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGFcIlxuXG4gICAgICAgICAgICAgICAgLy9kZWYgdmFsaWRhdGlvblJlc3VsdCA9IGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpXG4gICAgICAgICAgICAgICAgaWYgKGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSB0cmFuc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpKVxuICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259XCIpXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJUcmFuc2F6aW9uZSBmYXR0YSA3OSAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c31cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFJFU1QgQVBJIHBlciBwdWxpemlhIGNhY2hlIGlzc3VlIGxpbmthdGEgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RNZXRob2QgPSBcIkdFVFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgLypTY3JpcHQgVmFyaWFibGVzKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vUGVyIHRlc3QgZGEgY29uc29sZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy0zMjUzNVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vY2xlYXJDYWNoZS90aWNrZXRrZXkvXCIgKyBsaW5rZWRJc3N1ZS5rZXlcbiAgICAgICAgICAgICAgICAgICAgICAgIFVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgICAgICAgICAgICAgICAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIkNvdWxkIG5vdCB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG4gICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsT3V0SXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHtcbiAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcblxuICAgICAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICBsb2cud2FybiBcIklzc3VlIGNvbiByZWxhdGVzT3V0SXNzdWVMaW5rXCJcbiAgICAgICAgICAgIC8qRXNlZ3VpcmUgdHJhbnNhemlvbmUgZGkgc3RhdG8gZGVsbGEgZGVzdGluYXRpb25Jc3N1ZSovXG4gICAgICAgICAgICBkZWYgbGlua2VkSXNzdWUgPSBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKVxuICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlU3RhdHVzID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzKClcbiAgICAgICAgICAgIGRlZiB0cmFuc2l0aW9uSWRcbiAgICAgICAgICAgIGxvZy53YXJuIFwibGlua2VkSXNzdWU6IFwiICsgbGlua2VkSXNzdWVcbiAgICAgICAgICAgIGxvZy53YXJuIFwibGlua2VkSXNzdWVTdGF0dXMubmFtZTogXCIgKyBsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lXG4gICAgICAgICAgICBpZihsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lID09IFwiQWNjZXB0ZWQgQnkgU3VwcGxpZXJcIil7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbklkPUNPTkZJUk1fVE9fQ1VTVE9NRVJcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYodHJhbnNpdGlvbklkPT1DT05GSVJNX1RPX0NVU1RPTUVSKXtcbiAgICAgICAgICAgICAgICAvLyBQcmVwYXJlIG91ciBpbnB1dCBmb3IgdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKVxuICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGgge1xuICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2sodHJ1ZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy9kZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKVxuICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09IFwiWWVzXCIgfVxuICAgICAgICAgICAgICAgIC8vaXNzdWVJbnB1dFBhcmFtZXRlcnMuYWRkQ3VzdG9tRmllbGRWYWx1ZShmaWVsZENvbmZpZy5nZXRJZCgpLCBcIlllc1wiKSBcblxuICAgICAgICAgICAgICAgIGRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlXG5cbiAgICAgICAgICAgICAgICBkZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLmdldFJlbGV2YW50Q29uZmlnKGxpbmtlZElzc3VlKVxuICAgICAgICAgICAgICAgIGxvZy53YXJuIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcbiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuXG4gICAgICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpXG4gICAgICAgICAgICAgICAgbG9nLndhcm4gXCJVcGRhdGVkIGN1c3RvbWZpZWxkIC0gaXNzdWUgbGlua2F0YVwiXG5cbiAgICAgICAgICAgICAgICBpZiAoaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgZGVmIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpXG4gICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJGYWlsZWQgdG8gdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn1cIilcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlRyYW5zYXppb25lIGZhdHRhIDEyMiAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c31cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFJFU1QgQVBJIHBlciBwdWxpemlhIGNhY2hlIGlzc3VlIGxpbmthdGEgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RNZXRob2QgPSBcIkdFVFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgLypTY3JpcHQgVmFyaWFibGVzKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vUGVyIHRlc3QgZGEgY29uc29sZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy0zMjUzNVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vY2xlYXJDYWNoZS90aWNrZXRrZXkvXCIgKyBsaW5rZWRJc3N1ZS5rZXlcbiAgICAgICAgICAgICAgICAgICAgICAgIFVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgICAgICAgICAgICAgICAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIkNvdWxkIG5vdCB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfVxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlCmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZQppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQpDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5XQVJOKQoKbG9nLndhcm4gIiR7aXNzdWUua2V5fSBUcmFuc2F6aW9uZSBDb21wbGV0ZSAtIFBvc3QgRnVuY3Rpb24gY2hlY2sgbGlua2VkSXNzdWVzIgoKSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpOwpDdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7CmRlZiBhdXRvbWF0aWNhbGx5Q29uZmlybWVkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q29uZmlybWVkJ10udG9TdHJpbmcoKSlbMF0KSXNzdWVJbmRleGluZ1NlcnZpY2UgCWlzc3VlSW5kZXhpbmdTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KElzc3VlSW5kZXhpbmdTZXJ2aWNlKQoKSXNzdWUgaXNzdWUgPSBpc3N1ZQovL1BlciB0ZXN0IGRhIGNvbnNvbGUKLy9pc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZSgiT1BVVC0yNzYiKQoKLypERVYqLwpDT05GSVJNX1RPX0NVU1RPTUVSID0gcHJvcGVydGllc1snd2YudHIuY29uZmlybVRvQ3VzdG9tZXJOb0VtYWlsJ10gPyBwcm9wZXJ0aWVzWyd3Zi50ci5jb25maXJtVG9DdXN0b21lck5vRW1haWwnXSA6IDEwMQoKLypQUk9EKi8KLy9DT05GSVJNX1RPX0NVU1RPTUVSCgpkZWYgdXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKQpkZWYgaXNzdWVTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVTZXJ2aWNlKCkKCi8qU2UgZXNlZ3VvIGxhIGNvbmZpcm0gdG8gY3VzdG9tZXIgc3UgdW4gdGlja2V0IGNvbiAxIG8gKyB0aWNrZXQgY29sbGVnYXRpLCB2ZXJpZmljbyBlIHNwb3N0byBpbiBhdXRvbWF0aWNvIGdsaSBldmVudHVhbGkgdGlja2V0IGNvbGxlZ2F0aSovCmxvZy53YXJuICJ2ZXJpZmljbyBlIHNwb3N0byBpbiBhdXRvbWF0aWNvIGdsaSBldmVudHVhbGkgdGlja2V0IGNvbGxlZ2F0aSIKCmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCk9PW51bGwgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKS50b1N0cmluZygpLmVxdWFscygiTm8iKSl7CiAgICBMaXN0PElzc3VlTGluaz4gYWxsSW5Jc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0SW53YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSkKICAgIGZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbEluSXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHsKICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpOwoKICAgICAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgIGxvZy53YXJuICJJc3N1ZSBjb24gcmVsYXRlc0luSXNzdWVMaW5rIgogICAgICAgICAgICAvKkVzZWd1aXJlIHRyYW5zYXppb25lIGRpIHN0YXRvIGRlbGxhIHNvdXJjZUlzc3VlKi8KICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlID0gaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpCiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZVN0YXR1cyA9IGxpbmtlZElzc3VlLmdldFN0YXR1cygpCiAgICAgICAgICAgIGRlZiB0cmFuc2l0aW9uSWQKICAgICAgICAgICAgaWYobGlua2VkSXNzdWVTdGF0dXMubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5hY2NlcHRlZEJ5U3VwcGxpZXInXS50b1N0cmluZygpKXsKICAgICAgICAgICAgICAgIHRyYW5zaXRpb25JZD1DT05GSVJNX1RPX0NVU1RPTUVSCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYodHJhbnNpdGlvbklkPT1DT05GSVJNX1RPX0NVU1RPTUVSKXsKICAgICAgICAgICAgICAgIC8vIFByZXBhcmUgb3VyIGlucHV0IGZvciB0aGUgdHJhbnNpdGlvbgogICAgICAgICAgICAgICAgZGVmIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKCkKICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGggewogICAgICAgICAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayh0cnVlKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy9kZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKQogICAgICAgICAgICAgICAgLy9Db21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gIlllcyIgfQogICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksICJZZXMiKSAKICAgICAgICAgICAgICAgIC8vbG9nLndhcm4gImlzc3VlSW5wdXRQYXJhbWV0ZXJzOiAiICsgaXNzdWVJbnB1dFBhcmFtZXRlcnMKICAgICAgICAgICAgICAgIGRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKQogICAgICAgICAgICAgICAgZGVmIG1pID0gKE11dGFibGVJc3N1ZSkgbGlua2VkSXNzdWUKCiAgICAgICAgICAgICAgICBkZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLmdldFJlbGV2YW50Q29uZmlnKGxpbmtlZElzc3VlKQogICAgICAgICAgICAgICAgbG9nLndhcm4gImZpZWxkQ29uZmlnOiAiICsgZmllbGRDb25maWcKICAgICAgICAgICAgICAgIGRlZiBjZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgIGF1dG9tYXRpY2FsbHlDb25maXJtZWQudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpCgogICAgICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpOwogICAgICAgICAgICAgICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgIGxvZy53YXJuICJVcGRhdGVkIGN1c3RvbWZpZWxkIC0gaXNzdWUgbGlua2F0YSIKCiAgICAgICAgICAgICAgICAvL2RlZiB2YWxpZGF0aW9uUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykKICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgICAgICAgICAgZGVmIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpCiAgICAgICAgICAgICAgICAgICAgaWYgKCEgaXNzdWVSZXN1bHQuaXNWYWxpZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJGYWlsZWQgdG8gdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn0iKQogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiVHJhbnNhemlvbmUgZmF0dGEgNzkgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSwgJHtsaW5rZWRJc3N1ZS5zdGF0dXN9IikKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJDb3VsZCBub3QgdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmVycm9yQ29sbGVjdGlvbn0iKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpCiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykgewogICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7CgogICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgbG9nLndhcm4gIklzc3VlIGNvbiByZWxhdGVzT3V0SXNzdWVMaW5rIgogICAgICAgICAgICAvKkVzZWd1aXJlIHRyYW5zYXppb25lIGRpIHN0YXRvIGRlbGxhIGRlc3RpbmF0aW9uSXNzdWUqLwogICAgICAgICAgICBkZWYgbGlua2VkSXNzdWUgPSBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKQogICAgICAgICAgICBkZWYgbGlua2VkSXNzdWVTdGF0dXMgPSBsaW5rZWRJc3N1ZS5nZXRTdGF0dXMoKQogICAgICAgICAgICBkZWYgdHJhbnNpdGlvbklkCiAgICAgICAgICAgIGxvZy53YXJuICJsaW5rZWRJc3N1ZTogIiArIGxpbmtlZElzc3VlCiAgICAgICAgICAgIGxvZy53YXJuICJsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lOiAiICsgbGlua2VkSXNzdWVTdGF0dXMubmFtZQogICAgICAgICAgICBpZihsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lID09ICJBY2NlcHRlZCBCeSBTdXBwbGllciIpewogICAgICAgICAgICAgICAgdHJhbnNpdGlvbklkPUNPTkZJUk1fVE9fQ1VTVE9NRVIKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYodHJhbnNpdGlvbklkPT1DT05GSVJNX1RPX0NVU1RPTUVSKXsKICAgICAgICAgICAgICAgIC8vIFByZXBhcmUgb3VyIGlucHV0IGZvciB0aGUgdHJhbnNpdGlvbgogICAgICAgICAgICAgICAgZGVmIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKCkKICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGggewogICAgICAgICAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayh0cnVlKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy9kZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKQogICAgICAgICAgICAgICAgLy9Db21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gIlllcyIgfQogICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksICJZZXMiKSAKCiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlCgogICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNvbmZpcm1lZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgIGxvZy53YXJuICJmaWVsZENvbmZpZzogIiArIGZpZWxkQ29uZmlnCiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoKICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTsKICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICBsb2cud2FybiAiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGEiCgogICAgICAgICAgICAgICAgaWYgKGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb24KICAgICAgICAgICAgICAgICAgICBkZWYgaXNzdWVSZXN1bHQgPSBpc3N1ZVNlcnZpY2UudHJhbnNpdGlvbih1c2VyLCBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKSkKICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIkZhaWxlZCB0byB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSIpCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJUcmFuc2F6aW9uZSBmYXR0YSAxMjIgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSwgJHtsaW5rZWRJc3N1ZS5zdGF0dXN9IikKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJDb3VsZCBub3QgdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmVycm9yQ29sbGVjdGlvbn0iKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgIH0KICAgIH0KfQ==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
    <action id="841" name="Chiudi Intervento da cartaceo" view="fieldscreen">
      <meta name="opsbar-sequence">10</meta>
      <meta name="jira.description"></meta>
      <meta name="jira.fieldscreen.id">20300</meta>
      <restrict-to>
        <conditions>
          <condition type="class">
            <arg name="FIELD_FUNCTION_ID">e11c2942-0754-423c-8e92-d78a6375f221</arg>
            <arg name="FIELD_NOTES">YCFgT25seSBmb3IgUE0gVGlja2V0</arg>
            <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
            <arg name="disabled">false</arg>
            <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXQnIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
            <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
          </condition>
        </conditions>
      </restrict-to>
      <validators>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">fa37467a9382f8924cd169d5ba599dcb71925405</arg>
          <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIFJlcXVpcmVkIEZpZWxkcyAtIHNvbG8gZXJyb3JzLCBubyB3YXJuaW5ncw==</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5cblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcblxuLy9Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKClcbi8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtNDE1OVwiKVxuXG5sb2cuZGVidWcgXCJUcmFuc2F6aW9uZSBDb21wbGV0ZSAtIFByaW1vIHZhbGlkYXRvclwiXG5sb2cuZGVidWcgXCJUcmFuc2F6aW9uZSBDb21wbGV0ZSAtIFByaW1vIHZhbGlkYXRvciAtIElzc3VlOiBcIiArIGlzc3VlXG5cbmRlZiBlcnJvcnMgPSBmYWxzZVxuZGVmIHdhcm5pbmdzID0gZmFsc2VcblxuZGVmIGF1dG9tYXRpY2FsbHlDbG9zZWQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlDbG9zZWQnXS50b1N0cmluZygpKVswXVxuXG5kZWYgYXNzZXQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmFzc2V0J10udG9TdHJpbmcoKSlbMF1cbmRlZiBhc3NldFN0YXR1c1ByZSA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXNzZXRTdGF0dXNQcmUnXS50b1N0cmluZygpKVswXVxuZGVmIGFzc2V0U3RhdHVzUG9zdCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXNzZXRTdGF0dXNQb3N0J10udG9TdHJpbmcoKSlbMF1cbmRlZiByaXNrID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5yaXNrT25zaXRlJ10udG9TdHJpbmcoKSlbMF1cbmRlZiByaXNrRGVzY3JpcHRpb24gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJpc2tEZXNjcmlwdGlvbiddLnRvU3RyaW5nKCkpWzBdXG5kZWYgY3VzdFNpZ25hdHVyZSA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY3VzdG9tZXJTaWduYXR1cmUnXS50b1N0cmluZygpKVswXVxuZGVmIGN1c3RSZWYgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmN1c3RDb250YWN0T25zaXRlJ10udG9TdHJpbmcoKSlbMF1cbi8vZGVmIHRlY2hTaWduYXR1cmUgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnRlY2huaWNpYW5TaWduYXR1cmUnXS50b1N0cmluZygpKVswXVxuZGVmIGttcyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yua21zJ10udG9TdHJpbmcoKSlbMF1cbmRlZiB0cmF2ZWxIID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi50cmF2ZWxIb3VycyddLnRvU3RyaW5nKCkpWzBdXG5kZWYgZXhlY3V0aW9uRGF0ZSA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuZXhlY3V0aW9uRGF0ZSddLnRvU3RyaW5nKCkpWzBdXG5kZWYgdGVjaHNPbnNpdGUgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnRlY2huaWNpYW5zT25zaXRlJ10udG9TdHJpbmcoKSlbMF1cblxuZGVmIHJlcE1hdGVyaWFscyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YucmVwbGFjZWRNYXRlcmlhbHMnXS50b1N0cmluZygpKVswXVxuZGVmIHJlcU1hdGVyaWFscyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YucmVxdWlyZWRNYXRlcmlhbHMnXS50b1N0cmluZygpKVswXVxuXG5kZWYgdHJhbnNpdGlvbkNoZWNrID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5jaGVja0FuZENvbmZpcm0nXS50b1N0cmluZygpKVswXVxuXG5kZWYgbHVtcFN1bVByaWNlID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5sdW1wU3VtUHJpY2UnXS50b1N0cmluZygpKVswXVxuXG5kZWYgZXJyb3JNYW5kYXRvcnlGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWRGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWR2c0V4ZWN1dGlvbiA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVycm9ySm9iU3RhcnRlZERhdGV2c0NvbXBsZXRlZCA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVycm9yR2xvYmFsRXhlY3V0aW9uRGF0ZSA9IGZhbHNlXG5kZWYgZXJyb3JUZWNoU2lnbmF0dXJlRmllbGRzID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgd2FybmluZ0VtcHR5RmllbGRzID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgZXJyb3JTdWJUYXNrUmVzb2x1dGlvbiA9IGZhbHNlXG5kZWYgZXJyb3JUZWNoc01pc3NpbmcgPSBmYWxzZVxuXG5kZWYgZXhlY3V0aW9uRGF0ZURhdGVcblxuLypPUC0xMDM4OiBFc2VndW8gbGEgdmVyaWZpY2EgZGVpIGNhbXBpIG9iYmxpZ2F0b3JpIHNvbG8gc2UgaWwgdGlja2V0IHN1IGN1aSBzdG8gZXNlZ3VlbmRvIGxhIHRyYW5zYXppb25lIG5vbiBcdTAwZTggc3RhdG8gY2hpdXNvIGluIGF1dG9tYXRpY28gZGFsIHNpc3RlbWEqL1xubG9nLmRlYnVnIFwiaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKTogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpXG5sb2cuZGVidWcgXCJjaGVjazogXCIgKyAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKVxuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKT09bnVsbCB8fCAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKSl7XG4gICAgLy9PUEFBX0xVTVBfU1VNX1BSSUNFXG4gICAgaWYoIWlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQucGxhbm5lZE1haW50ZW5hbmNlJ10pICYmIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1QcmljZSk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1QcmljZSkgPT0gXCJcIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1QcmljZSkudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpKXtcbiAgICAgICAgZXJyb3JzID0gdHJ1ZVxuICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YubHVtcFN1bVByaWNlJ10udG9TdHJpbmcoKSlcbiAgICB9XG5cbiAgICAvL09QQUFfUkVQTEFDRURfTUFURVJJQUxTXG4gICAgaWYoIWlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQucGxhbm5lZE1haW50ZW5hbmNlJ10pICYmIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscyk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykgPT0gXCJcIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpKXtcbiAgICAgICAgbG9nLmRlYnVnIFwid2FybmluZ3MgdHJ1ZVwiXG4gICAgICAgIHdhcm5pbmdzID0gdHJ1ZVxuICAgICAgICB3YXJuaW5nRW1wdHlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLnJlcGxhY2VkTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlcbiAgICB9XG4gICAgLy9PUEFBX1JFUVVJUkVEX01BVEVSSUFMU1xuICAgIGlmKCFpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0LnBsYW5uZWRNYWludGVuYW5jZSddKSAmJiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXFNYXRlcmlhbHMpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXFNYXRlcmlhbHMpID09IFwiXCIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXFNYXRlcmlhbHMpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcIndhcm5pbmdzIHRydWVcIlxuICAgICAgICB3YXJuaW5ncyA9IHRydWVcbiAgICAgICAgd2FybmluZ0VtcHR5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5yZXF1aXJlZE1hdGVyaWFscyddLnRvU3RyaW5nKCkpXG4gICAgfVxuXG5cbiAgICAvL09QQUFfQVNTRVRcbiAgICBpZighaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5wbGFubmVkTWFpbnRlbmFuY2UnXSkgJiYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXQpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldCkgPT0gXCJcIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0KS50b1N0cmluZygpLmVxdWFscyhcIlwiKSkpe1xuICAgICAgICBlcnJvcnMgPSB0cnVlXG4gICAgICAgIGVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5hc3NldCddLnRvU3RyaW5nKCkpXG4gICAgfVxuICAgIC8vT1BBQV9BU1NFVF9TVEFUVVNfUFJFXG4gICAgaWYoIWlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQucGxhbm5lZE1haW50ZW5hbmNlJ10pICYmIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0U3RhdHVzUHJlKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXRTdGF0dXNQcmUpID09IFwiXCIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldFN0YXR1c1ByZSkudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpKXtcbiAgICAgICAgZXJyb3JzID0gdHJ1ZVxuICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YuYXNzZXRTdGF0dXNQcmUnXS50b1N0cmluZygpKVxuICAgIH1cbiAgICAvL09QQUFfQVNTRVRfU1RBVFVTX1BPU1RcbiAgICBpZighaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5wbGFubmVkTWFpbnRlbmFuY2UnXSkgJiYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXRTdGF0dXNQb3N0KT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXRTdGF0dXNQb3N0KSA9PSBcIlwiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXRTdGF0dXNQb3N0KS50b1N0cmluZygpLmVxdWFscyhcIlwiKSkpe1xuICAgICAgICBlcnJvcnMgPSB0cnVlXG4gICAgICAgIGVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5hc3NldFN0YXR1c1Bvc3QnXS50b1N0cmluZygpKVxuICAgIH1cbiAgICAvL09QQUFfUklTS19PTlNJVEVcbiAgICBpZighaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5wbGFubmVkTWFpbnRlbmFuY2UnXSkgJiYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmlzayk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJpc2spID09IFwiXCIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyaXNrKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSkpe1xuICAgICAgICBlcnJvcnMgPSB0cnVlXG4gICAgICAgIGVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5yaXNrT25zaXRlJ10udG9TdHJpbmcoKSlcbiAgICB9XG4gICAgLy9PUEFBX1JJU0tfREVTQ1JJUFRJT05cbiAgICBpZighaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5wbGFubmVkTWFpbnRlbmFuY2UnXSkgJiYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmlzaykudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIikgJiYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmlza0Rlc2NyaXB0aW9uKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmlza0Rlc2NyaXB0aW9uKSA9PSBcIlwiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmlza0Rlc2NyaXB0aW9uKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSkpKXtcbiAgICAgICAgZXJyb3JzID0gdHJ1ZVxuICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2Yucmlza0Rlc2NyaXB0aW9uJ10udG9TdHJpbmcoKSlcbiAgICB9XG4gICAgLy9PUEFBX0NVU1RPTUVSX1NJR05BVFVSRVxuICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VzdFNpZ25hdHVyZSk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1c3RTaWduYXR1cmUpID09IFwiXCIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0U2lnbmF0dXJlKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSl7XG4gICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLmN1c3RvbWVyU2lnbmF0dXJlJ10udG9TdHJpbmcoKSlcbiAgICB9XG4gICAgLy9PUEFBX0NVU1RPTUVSX0NPTlRBQ1RfT05TSVRFXG4gICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0UmVmKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VzdFJlZikgPT0gXCJcIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1c3RSZWYpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKXtcbiAgICAgICAgZXJyb3JzID0gdHJ1ZVxuICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YuY3VzdENvbnRhY3RPbnNpdGUnXS50b1N0cmluZygpKVxuICAgIH1cbiAgICBcbiAgICAvL1BNIFRJQ0tFVCAtIGFsbCBzdWItdGFza3MgbXVzdCBiZSBDb21wbGV0ZWRcbiAgICBpZihpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0LnBsYW5uZWRNYWludGVuYW5jZSddKSl7XG4gICAgICAgIGRlZiBzdWJUYXNrcyA9IGlzc3VlLmdldFN1YlRhc2tPYmplY3RzKClcblxuICAgICAgICBpZihzdWJUYXNrcyl7XG4gICAgICAgICAgICBzdWJUYXNrcy5lYWNoIHsgLy9Mb29wIGVhY2ggc3VidGFzayBvZiBwYXJlbnQgaXNzdWVcbiAgICAgICAgICAgICAgICAvL0lmIHRoZSBzdWJ0YXNrIGlzIFwiUGxhbm5lZCBNYWludGVuYW5jZSBUYXNrXCJcbiAgICAgICAgICAgICAgICBpZiAoaXQuaXNzdWVUeXBlLm5hbWUgPT0gXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcIikge1xuICAgICAgICAgICAgICAgICAgICBpZighaXQuZ2V0UmVzb2x1dGlvbigpIHx8IGl0LmdldFJlc29sdXRpb24oKS5uYW1lICE9IFwiQ29tcGxldGVkXCIpeyBcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yU3ViVGFza1Jlc29sdXRpb24gPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vT1BBQV9URUNITklDSUFOX1NJR05BVFVSRVxuICAgIC8qXG4gICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0ZWNoU2lnbmF0dXJlKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGVjaFNpZ25hdHVyZSkgPT0gXCJcIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hTaWduYXR1cmUpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKXtcbiAgICAgICAgZXJyb3JzID0gdHJ1ZVxuICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YudGVjaG5pY2lhblNpZ25hdHVyZSddLnRvU3RyaW5nKCkpXG4gICAgfVxuICAgICovXG4gICAgLy8xNS4xMi4yMDIwIEFGIC0gdG9sdGEgb2JibGlnYXRvcmlldFx1MDBlMCBzdWkgY2FtcGkgT1BfS01TIGUgT1BfVFJBVkVMX0hPVVJTIHBvaWNoXHUwMGU4IG9yYSBsYSByaWNoaWVzdGEgdXRlbnRpIFx1MDBlOCBkaSBpbXBsZW1lbnRhcmU6XG4gICAgLy9DaW56aWEgU2FsaXR1cm86IGRvdnJlYmJlcm8gZXNzZXJlIG9iYmxpZ2F0b3JpIGxhZGRvdmUgZGEgY29udHJhdHRvIGlsIGZvcm5pdG9yZSBub24gaGEgaWwgZGlyaXR0byBmaXNzbyBkaSBjaGlhbWF0YVxuICAgIC8vT1BBQV9LTVNcbiAgICAvKmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoa21zKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoa21zKSA9PSBcIlwiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoa21zKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSl7XG4gICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLmttcyddLnRvU3RyaW5nKCkpXG4gICAgfSovXG4gICAgLy9PUEFBX1RSQVZFTF9IT1VSU1xuICAgIC8qaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmF2ZWxIKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsSCkgPT0gXCJcIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYXZlbEgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKXtcbiAgICAgICAgZXJyb3JzID0gdHJ1ZVxuICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YudHJhdmVsSG91cnMnXS50b1N0cmluZygpKVxuICAgIH0qL1xuICAgIC8vT1BBQV9FWEVDVVRJT05fREFURVxuICAgIC8qXG4gICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShleGVjdXRpb25EYXRlKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZXhlY3V0aW9uRGF0ZSkgPT0gXCJcIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGV4ZWN1dGlvbkRhdGUpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKXtcbiAgICAgICAgZXJyb3JzID0gdHJ1ZVxuICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YuZXhlY3V0aW9uRGF0ZSddLnRvU3RyaW5nKCkpXG4gICAgfWVsc2V7XG5cdFx0ZXhlY3V0aW9uRGF0ZURhdGUgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGV4ZWN1dGlvbkRhdGUpLmZvcm1hdCgnZGQvTU0veXl5eScpXG5cdH1cbiAgICAqL1xuICAgIFxuICAgIC8vSm9iIFN0YXJ0ZWQgKyBKb2IgQ29tcGxldGVkIGRpIG9nbmkgb2dnZXR0byBUZWNoX09uU2l0ZV9SZXBvcnQgYXNzb2NpYXRvIGFsIGNhbXBvIE9QQUFfVEVDSFNfT05TSVRFXG4gICAgZGVmIGdsb2JhbEV4ZWNEYXRlXG4gICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0ZWNoc09uc2l0ZSkhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hzT25zaXRlKSAhPSBcIlwiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hzT25zaXRlKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSl7XG4gICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qL1xuICAgICAgICAvL2luc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHNcbiAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyAgXG4gICAgICAgIENsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuICAgICAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xuICAgICAgICBkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcblxuICAgICAgICBkZWYgdGVjaHNPbnNpdGVGaWVsZCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGVjaHNPbnNpdGUpXG5cdFx0bG9nLmRlYnVnIFwidGVjaHNPbnNpdGVGaWVsZDogXCIgKyB0ZWNoc09uc2l0ZUZpZWxkXG4gICAgICAgIGZvcih0ZWNobmljaWFuIGluIHRlY2hzT25zaXRlRmllbGQpe1xuICAgICAgICAgICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0XG4gICAgICAgICAgICBkZWYgdGVjaE9uc2l0ZT10ZWNobmljaWFuLnRvU3RyaW5nKClcbiAgICAgICAgICAgIGRlZiB0ZWNoT25zaXRlS2V5ID0gdGVjaE9uc2l0ZS5zdWJzdHJpbmcodGVjaE9uc2l0ZS5pbmRleE9mKCcoJykrMSx0ZWNoT25zaXRlLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgIGRlZiB0ZWNoT25zaXRlT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHRlY2hPbnNpdGVLZXkpXG4gICAgICAgICAgICAvL2dldCBcIkpvYiBTdGFydGVkXCIgZm9yIHRoYXQgVGVjaG5pY2lhblxuICAgICAgICAgICAgZGVmIG9iVHJpYWdlXG4gICAgICAgICAgICBkZWYgdGVjaEpvYlN0YXJ0ZWRcbiAgICAgICAgICAgIGRlZiB0ZWNoSm9iQ29tcGxldGVkXG4gICAgICAgICAgICBkZWYgdGVjaEpvYlN0YXJ0ZWREYXRlLCB0ZWNoSm9iQ29tcGxldGVkRGF0ZVxuICAgICAgICAgICAgZGVmIHRlY2hSZWYsIHRlY2gsIHRlY2hSZWZLZXksIHRlY2hSZWZPYmplY3QsIHRlY2hSZWZOYW1lXG4gICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaE9uc2l0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2hPblNpdGUuam9iU3RhcnRlZCddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoT25zaXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoudGVjaE9uU2l0ZS5qb2JTdGFydGVkJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgdGVjaEpvYlN0YXJ0ZWQgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgdGVjaEpvYlN0YXJ0ZWREYXRlID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkuZm9ybWF0KCdkZC9NTS95eXl5JylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbG9nLmRlYnVnIFwidGVjaEpvYlN0YXJ0ZWQ6IFwiICsgdGVjaEpvYlN0YXJ0ZWREYXRlXG4gICAgICAgICAgICAvL2dldCBcIkpvYiBDb21wbGV0ZWRcIiBmb3IgdGhhdCBUZWNobmljaWFuXG4gICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaE9uc2l0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2hPblNpdGUuam9iQ29tcGxldGVkJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hPbnNpdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai50ZWNoT25TaXRlLmpvYkNvbXBsZXRlZCddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgICAgIHRlY2hKb2JDb21wbGV0ZWQgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIHRlY2hKb2JDb21wbGV0ZWREYXRlID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkuZm9ybWF0KCdkZC9NTS95eXl5JylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbG9nLmRlYnVnIFwidGVjaEpvYkNvbXBsZXRlZDogXCIgKyB0ZWNoSm9iQ29tcGxldGVkXG4gICAgICAgICAgICAvL2dldCBcIlRlY2huaWNpYW5fUkVGXCIgZm9yIHRoYXQgVGVjaG5pY2lhblxuICAgICAgICAgICAgbG9nLmRlYnVnIFwidGVjaE9uc2l0ZU9iamVjdDogXCIgKyB0ZWNoT25zaXRlT2JqZWN0XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoT25zaXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoudGVjaE9uc2l0ZS50ZWNobmljaWFuUmVmJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hPbnNpdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai50ZWNoT25zaXRlLnRlY2huaWNpYW5SZWYnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICB0ZWNoUmVmID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICB0ZWNoID0gdGVjaFJlZi50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidGVjaDogXCIgKyB0ZWNoXG4gICAgICAgICAgICAgICAgdGVjaFJlZktleSA9IHRlY2guc3Vic3RyaW5nKHRlY2guaW5kZXhPZignKCcpKzEsdGVjaC5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidGVjaFJlZktleTogXCIgKyB0ZWNoUmVmS2V5XG4gICAgICAgICAgICAgICAgdGVjaFJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihwcm9wZXJ0aWVzWydpc2NoZW1hLmFhJ10udG9TdHJpbmcoKSArIFwiLVwiICsgdGVjaFJlZktleSlcbiAgICAgICAgICAgICAgICB0ZWNoUmVmTmFtZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoudGVjaG5pY2lhbi5uYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgIFx0XHRsb2cuZGVidWcgdGVjaFJlZk5hbWVcblxuICAgICAgICAgICAgaWYoIXRlY2hKb2JTdGFydGVkIHx8ICF0ZWNoSm9iQ29tcGxldGVkKXtcbiAgICAgICAgICAgICAgICBlcnJvcnMgPSB0cnVlXG4gICAgICAgICAgICAgICAgZXJyb3JKb2JTdGFydGVkQ29tcGxldGVkRmllbGRzLmFkZCh0ZWNoUmVmTmFtZS5zdWJzdHJpbmcodGVjaFJlZk5hbWUuaW5kZXhPZignKCcpKzEsdGVjaFJlZk5hbWUuaW5kZXhPZignKScpKSlcbiAgICAgICAgICAgIH0gICAgXG4gICAgICAgICAgICBpZihpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0LnBsYW5uZWRNYWludGVuYW5jZSddKSAmJiB0ZWNoSm9iU3RhcnRlZERhdGUgIT0gdGVjaEpvYkNvbXBsZXRlZERhdGUpe1xuICAgICAgICAgICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgICAgICAgICBlcnJvckpvYlN0YXJ0ZWREYXRldnNDb21wbGV0ZWQuYWRkKHRlY2hSZWZOYW1lLnN1YnN0cmluZyh0ZWNoUmVmTmFtZS5pbmRleE9mKCcoJykrMSx0ZWNoUmVmTmFtZS5pbmRleE9mKCcpJykpKVxuICAgICAgICAgICAgfVxuXHRcdFx0aWYoIWlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQucGxhbm5lZE1haW50ZW5hbmNlJ10pICYmIGV4ZWN1dGlvbkRhdGVEYXRlICE9IG51bGwgJiYgdGVjaEpvYlN0YXJ0ZWREYXRlICE9IGV4ZWN1dGlvbkRhdGVEYXRlKXtcbiAgICAgICAgICAgICAgICBlcnJvcnMgPSB0cnVlXG4gICAgICAgICAgICAgICAgZXJyb3JKb2JTdGFydGVkQ29tcGxldGVkdnNFeGVjdXRpb24uYWRkKHRlY2hSZWZOYW1lLnN1YnN0cmluZyh0ZWNoUmVmTmFtZS5pbmRleE9mKCcoJykrMSx0ZWNoUmVmTmFtZS5pbmRleE9mKCcpJykpKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihnbG9iYWxFeGVjRGF0ZT09bnVsbCAmJiB0ZWNoSm9iU3RhcnRlZERhdGUgPT0gdGVjaEpvYkNvbXBsZXRlZERhdGUpe1xuICAgICAgICAgICAgICAgIGdsb2JhbEV4ZWNEYXRlID0gdGVjaEpvYlN0YXJ0ZWREYXRlXG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBpZihnbG9iYWxFeGVjRGF0ZSE9bnVsbCAmJiBnbG9iYWxFeGVjRGF0ZSE9dGVjaEpvYlN0YXJ0ZWREYXRlKXtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JzPXRydWVcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JHbG9iYWxFeGVjdXRpb25EYXRlID0gdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgIH0gICAgXG4gICAgfWVsc2V7XG4gICAgICAgIGlmKGlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQucGxhbm5lZE1haW50ZW5hbmNlJ10pKXtcbiAgICAgICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgICAgIGVycm9yVGVjaHNNaXNzaW5nID0gdHJ1ZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGVmIHRlY2hTaWduRm91bmQ9ZmFsc2VcbiAgICAvL0Zpcm1hIGRpIGFsbWVubyB1biBvZ2dldHRvIFRlY2hfT25TaXRlX1JlcG9ydCBhc3NvY2lhdG8gYWwgY2FtcG8gT1BBQV9URUNIU19PTlNJVEVcbiAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hzT25zaXRlKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGVjaHNPbnNpdGUpICE9IFwiXCIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGVjaHNPbnNpdGUpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKXtcbiAgICAgICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovXG4gICAgICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50c1xuICAgICAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7ICBcbiAgICAgICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XG4gICAgICAgIGRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XG4gICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4gICAgICAgIGRlZiB0ZWNoc09uc2l0ZUZpZWxkID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0ZWNoc09uc2l0ZSlcblx0XHRsb2cuZGVidWcgXCJ0ZWNoc09uc2l0ZUZpZWxkOiBcIiArIHRlY2hzT25zaXRlRmllbGRcbiAgICAgICAgZm9yKHRlY2huaWNpYW4gaW4gdGVjaHNPbnNpdGVGaWVsZCl7XG4gICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3RcbiAgICAgICAgICAgIGRlZiB0ZWNoT25zaXRlPXRlY2huaWNpYW4udG9TdHJpbmcoKVxuICAgICAgICAgICAgZGVmIHRlY2hPbnNpdGVLZXkgPSB0ZWNoT25zaXRlLnN1YnN0cmluZyh0ZWNoT25zaXRlLmluZGV4T2YoJygnKSsxLHRlY2hPbnNpdGUuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgZGVmIHRlY2hPbnNpdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4odGVjaE9uc2l0ZUtleSlcbiAgICAgICAgICAgIC8vZ2V0IFwiSm9iIFN0YXJ0ZWRcIiBmb3IgdGhhdCBUZWNobmljaWFuXG4gICAgICAgICAgICBkZWYgb2JUcmlhZ2VcbiAgICAgICAgICAgIGRlZiB0ZWNoU2lnbmF0dXJlLCB0ZWNoU2lnbmF0dXJlQXR0clxuICAgICAgICAgICAgdGVjaFNpZ25hdHVyZUF0dHIgPSBwcm9wZXJ0aWVzWydpb2JqLnRlY2hPblNpdGUuc2lnbmF0dXJlJ10gPyBwcm9wZXJ0aWVzWydpb2JqLnRlY2hPblNpdGUuc2lnbmF0dXJlJ10udG9TdHJpbmcoKSA6IFwiVEVDSE5JQ0lBTl9TSUdOQVRVUkVcIlxuICAgICAgICAgICAgZGVmIHRlY2hSZWYsIHRlY2gsIHRlY2hSZWZLZXksIHRlY2hSZWZPYmplY3QsIHRlY2hSZWZOYW1lXG4gICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaE9uc2l0ZU9iamVjdC5nZXRJZCgpLCB0ZWNoU2lnbmF0dXJlQXR0cikpe1xuICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hPbnNpdGVPYmplY3QuZ2V0SWQoKSwgdGVjaFNpZ25hdHVyZUF0dHIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgICAgIHRlY2hTaWduYXR1cmUgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJ0ZWNoU2lnbmF0dXJlOiBcIiArIHRlY2hTaWduYXR1cmUgXG5cbiAgICAgICAgICAgIC8vZ2V0IFwiVGVjaG5pY2lhbl9SRUZcIiBmb3IgdGhhdCBUZWNobmljaWFuXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJ0ZWNoT25zaXRlT2JqZWN0OiBcIiArIHRlY2hPbnNpdGVPYmplY3RcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hPbnNpdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai50ZWNoT25zaXRlLnRlY2huaWNpYW5SZWYnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaE9uc2l0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2hPbnNpdGUudGVjaG5pY2lhblJlZiddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgICAgIHRlY2hSZWYgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIHRlY2ggPSB0ZWNoUmVmLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ0ZWNoOiBcIiArIHRlY2hcbiAgICAgICAgICAgICAgICB0ZWNoUmVmS2V5ID0gdGVjaC5zdWJzdHJpbmcodGVjaC5pbmRleE9mKCcoJykrMSx0ZWNoLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ0ZWNoUmVmS2V5OiBcIiArIHRlY2hSZWZLZXlcbiAgICAgICAgICAgICAgICB0ZWNoUmVmT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEnXS50b1N0cmluZygpICsgXCItXCIgKyB0ZWNoUmVmS2V5KVxuICAgICAgICAgICAgICAgIHRlY2hSZWZOYW1lID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai50ZWNobmljaWFuLm5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgXHRcdGxvZy5kZWJ1ZyB0ZWNoUmVmTmFtZVxuXG4gICAgICAgICAgICBpZighdGVjaFNpZ25hdHVyZSAmJiAhdGVjaFNpZ25Gb3VuZCl7XG4gICAgICAgICAgICAgICAgZXJyb3JUZWNoU2lnbmF0dXJlRmllbGRzLmFkZCh0ZWNoUmVmTmFtZS5zdWJzdHJpbmcodGVjaFJlZk5hbWUuaW5kZXhPZignKCcpKzEsdGVjaFJlZk5hbWUuaW5kZXhPZignKScpKSlcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGlmKHRlY2hTaWduYXR1cmUpe1xuICAgICAgICAgICAgICAgICAgICB0ZWNoU2lnbkZvdW5kID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICBlcnJvclRlY2hTaWduYXR1cmVGaWVsZHMuY2xlYXIoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gICAgXG4gICAgICAgICB9XG4gICAgICAgIGlmKCF0ZWNoU2lnbkZvdW5kKXtcbiAgICAgICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgIGlmICghZXJyb3JzICYmICF3YXJuaW5ncyl7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfWVsc2V7XG4gICAgICAgIGlmKCFlcnJvcnMgJiYgd2FybmluZ3Mpe1xuICAgICAgICAgICAgLy9TZSBjaSBzb25vIHNvbG8gd2FybmluZ3MgdmVyaWZpY28gc2UgbCd1dGVudGUgaGEgZ2lcdTAwZTAgZGljaGlhcmF0byBkaSB2b2xlciBwcm9zZWd1aXJlIGNvbXVucXVlXG4gICAgICAgICAgICAvLyAtIHRyYW5zaXRpb24gZmllbGQgXCJPUEFBX0NIRUNLX0FORF9DT05GSVJNXCI9XCJZZXNcIlxuICAgICAgICAgICAgLy8gLSBpbiBjYXNvIGNvbnRyYXJpbyBpbnZpbyBpIHdhcm5pbmcgYSBGRVxuXG4gICAgICAgICAgICAvL2xvZy5kZWJ1ZyBcInRyYW5zaXRpb25DaGVjazogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaylcbiAgICAgICAgICAgIC8vbG9nLmRlYnVnIFwicmVzdWx0OiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKVxuICAgICAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpKXtcbiAgICAgICAgICAgICAgICAvL2xvZy5kZWJ1ZyBcInJldHVybiB0cnVlXCJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgZGVmIHdMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICAgICAgICAgICAgICBpZih3YXJuaW5nRW1wdHlGaWVsZHMuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1FbXB0eSA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQoXCJXXCIpXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChcIkNPTkZJUk1fRU1QVFlfRklFTERTXCIpXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChudWxsKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQod2FybmluZ0VtcHR5RmllbGRzKVxuXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eSlcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRocm93IGV4Y2VwdGlvbjogXCIgKyBvdXRwdXQudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIldcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgICAgICAgICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIldcIiwgb3V0cHV0LnRvU3RyaW5nKCkpICAgXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgICAgICBpZihlcnJvcnMgJiYgIXdhcm5pbmdzKXtcbiAgICAgICAgICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgICAgICAgICBpZihlcnJvck1hbmRhdG9yeUZpZWxkcy5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICBkZWYgZUxpc3RNYW5kYXRvcnkgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKFwiTUFOREFUT1JZX0ZJRUxEU1wiKVxuICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChudWxsKVxuICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChlcnJvck1hbmRhdG9yeUZpZWxkcylcbiAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RNYW5kYXRvcnkpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKGVycm9ySm9iU3RhcnRlZENvbXBsZXRlZEZpZWxkcy5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICBkZWYgZUxpc3RTdGFydEVuZCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKFwiRVwiKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKFwiTUlTU0lOR19PTlNJVEVfU1RBUlRfRU5EX0RFVEFJTFNcIilcbiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kLmFkZChudWxsKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKGVycm9ySm9iU3RhcnRlZENvbXBsZXRlZEZpZWxkcylcbiAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RTdGFydEVuZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoZXJyb3JKb2JTdGFydGVkQ29tcGxldGVkdnNFeGVjdXRpb24uc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0U3RhcnRFbmRFeGVjID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZEV4ZWMuYWRkKFwiRVwiKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmRFeGVjLmFkZChcIkVYRUNVVElPTl9EQVRFX1ZTX1RFQ0hfU1RBUlRfQ09NUExFVEVEXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZEV4ZWMuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZEV4ZWMuYWRkKGVycm9ySm9iU3RhcnRlZENvbXBsZXRlZHZzRXhlY3V0aW9uKVxuICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdFN0YXJ0RW5kRXhlYylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoZXJyb3JUZWNoU2lnbmF0dXJlRmllbGRzLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgIGRlZiBlTGlzdFRlY2hTaWduID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZUxpc3RUZWNoU2lnbi5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RUZWNoU2lnbi5hZGQoXCJNSVNTSU5HX1RFQ0hfU0lHTkFUVVJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RUZWNoU2lnbi5hZGQobnVsbClcbiAgICAgICAgICAgICAgICBlTGlzdFRlY2hTaWduLmFkZChlcnJvclRlY2hTaWduYXR1cmVGaWVsZHMpXG4gICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0VGVjaFNpZ24pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKGVycm9yU3ViVGFza1Jlc29sdXRpb24pe1xuICAgICAgICAgICAgICAgIGRlZiBlTGlzdFN1YlRhc2tDb21wbGV0ZWQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBlTGlzdFN1YlRhc2tDb21wbGV0ZWQuYWRkKFwiRVwiKVxuICAgICAgICAgICAgICAgIGVMaXN0U3ViVGFza0NvbXBsZXRlZC5hZGQoXCJTVUJUQVNLX05PVF9DT01QTEVURURcIilcbiAgICAgICAgICAgICAgICBlTGlzdFN1YlRhc2tDb21wbGV0ZWQuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgZUxpc3RTdWJUYXNrQ29tcGxldGVkLmFkZChudWxsKVxuICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdFN1YlRhc2tDb21wbGV0ZWQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKGVycm9yVGVjaHNNaXNzaW5nKXtcbiAgICAgICAgICAgICAgICBkZWYgZUxpc3RTdWJUYXNrQ29tcGxldGVkID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZUxpc3RTdWJUYXNrQ29tcGxldGVkLmFkZChcIkVcIilcbiAgICAgICAgICAgICAgICBlTGlzdFN1YlRhc2tDb21wbGV0ZWQuYWRkKFwiTUlTU0lOR19URUNITklDSUFOU1wiKVxuICAgICAgICAgICAgICAgIGVMaXN0U3ViVGFza0NvbXBsZXRlZC5hZGQobnVsbClcbiAgICAgICAgICAgICAgICBlTGlzdFN1YlRhc2tDb21wbGV0ZWQuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0U3ViVGFza0NvbXBsZXRlZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoZXJyb3JKb2JTdGFydGVkRGF0ZXZzQ29tcGxldGVkLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgIGRlZiBlTGlzdFN0YXJ0RW5kID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQoXCJURUNIX1NUQVJUX0NPTVBMRVRFRF9EQVRFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQobnVsbClcbiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kLmFkZChlcnJvckpvYlN0YXJ0ZWREYXRldnNDb21wbGV0ZWQpXG4gICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0U3RhcnRFbmQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKGVycm9yR2xvYmFsRXhlY3V0aW9uRGF0ZSl7XG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0RXhlY0RhdGUgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBlTGlzdEV4ZWNEYXRlLmFkZChcIkVcIilcbiAgICAgICAgICAgICAgICBlTGlzdEV4ZWNEYXRlLmFkZChcIkVYRUNVVElPTl9EQVRFX0FMTF9URUNIU1wiKVxuICAgICAgICAgICAgICAgIGVMaXN0RXhlY0RhdGUuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgZUxpc3RFeGVjRGF0ZS5hZGQobnVsbClcbiAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RFeGVjRGF0ZSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRocm93IGV4Y2VwdGlvbjogXCIgKyBvdXRwdXQudG9TdHJpbmcoKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJFXCIsIG91dHB1dC50b1N0cmluZygpKSAgIFxuICAgICAgICB9XG4gICAgICAgIGlmKGVycm9ycyAmJiB3YXJuaW5ncyl7XG4gICAgICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgaWYoZXJyb3JNYW5kYXRvcnlGaWVsZHMuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0TWFuZGF0b3J5ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKFwiRVwiKVxuICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChcIk1BTkRBVE9SWV9GSUVMRFNcIilcbiAgICAgICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQobnVsbClcbiAgICAgICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoZXJyb3JNYW5kYXRvcnlGaWVsZHMpXG4gICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0TWFuZGF0b3J5KVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZihlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWRGaWVsZHMuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0U3RhcnRFbmQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kLmFkZChcIkVcIilcbiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kLmFkZChcIk1JU1NJTkdfT05TSVRFX1NUQVJUX0VORF9ERVRBSUxTXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQobnVsbClcbiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kLmFkZChlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWRGaWVsZHMpXG4gICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0U3RhcnRFbmQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKGVycm9ySm9iU3RhcnRlZENvbXBsZXRlZHZzRXhlY3V0aW9uLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgIGRlZiBlTGlzdFN0YXJ0RW5kRXhlYyA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmRFeGVjLmFkZChcIkVcIilcbiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kRXhlYy5hZGQoXCJFWEVDVVRJT05fREFURV9WU19URUNIX1NUQVJUX0NPTVBMRVRFRFwiKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmRFeGVjLmFkZChudWxsKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmRFeGVjLmFkZChlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWR2c0V4ZWN1dGlvbilcbiAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RTdGFydEVuZEV4ZWMpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoZXJyb3JUZWNoU2lnbmF0dXJlRmllbGRzLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgIGRlZiBlTGlzdFRlY2hTaWduID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZUxpc3RUZWNoU2lnbi5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RUZWNoU2lnbi5hZGQoXCJNSVNTSU5HX1RFQ0hfU0lHTkFUVVJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RUZWNoU2lnbi5hZGQobnVsbClcbiAgICAgICAgICAgICAgICBlTGlzdFRlY2hTaWduLmFkZChlcnJvclRlY2hTaWduYXR1cmVGaWVsZHMpXG4gICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0VGVjaFNpZ24pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKGVycm9yU3ViVGFza1Jlc29sdXRpb24pe1xuICAgICAgICAgICAgICAgIGRlZiBlTGlzdFN1YlRhc2tDb21wbGV0ZWQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBlTGlzdFN1YlRhc2tDb21wbGV0ZWQuYWRkKFwiRVwiKVxuICAgICAgICAgICAgICAgIGVMaXN0U3ViVGFza0NvbXBsZXRlZC5hZGQoXCJTVUJUQVNLX05PVF9DT01QTEVURURcIilcbiAgICAgICAgICAgICAgICBlTGlzdFN1YlRhc2tDb21wbGV0ZWQuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgZUxpc3RTdWJUYXNrQ29tcGxldGVkLmFkZChudWxsKVxuICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdFN1YlRhc2tDb21wbGV0ZWQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKGVycm9yVGVjaHNNaXNzaW5nKXtcbiAgICAgICAgICAgICAgICBkZWYgZUxpc3RTdWJUYXNrQ29tcGxldGVkID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZUxpc3RTdWJUYXNrQ29tcGxldGVkLmFkZChcIkVcIilcbiAgICAgICAgICAgICAgICBlTGlzdFN1YlRhc2tDb21wbGV0ZWQuYWRkKFwiTUlTU0lOR19URUNITklDSUFOU1wiKVxuICAgICAgICAgICAgICAgIGVMaXN0U3ViVGFza0NvbXBsZXRlZC5hZGQobnVsbClcbiAgICAgICAgICAgICAgICBlTGlzdFN1YlRhc2tDb21wbGV0ZWQuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0U3ViVGFza0NvbXBsZXRlZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoZXJyb3JKb2JTdGFydGVkRGF0ZXZzQ29tcGxldGVkLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgIGRlZiBlTGlzdFN0YXJ0RW5kID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQoXCJURUNIX1NUQVJUX0NPTVBMRVRFRF9EQVRFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQobnVsbClcbiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kLmFkZChlcnJvckpvYlN0YXJ0ZWREYXRldnNDb21wbGV0ZWQpXG4gICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0U3RhcnRFbmQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKGVycm9yR2xvYmFsRXhlY3V0aW9uRGF0ZSl7XG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0RXhlY0RhdGUgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBlTGlzdEV4ZWNEYXRlLmFkZChcIkVcIilcbiAgICAgICAgICAgICAgICBlTGlzdEV4ZWNEYXRlLmFkZChcIkVYRUNVVElPTl9EQVRFX0FMTF9URUNIU1wiKVxuICAgICAgICAgICAgICAgIGVMaXN0RXhlY0RhdGUuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgZUxpc3RFeGVjRGF0ZS5hZGQobnVsbClcbiAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RFeGVjRGF0ZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYod2FybmluZ0VtcHR5RmllbGRzLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1FbXB0eSA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChcIldcIilcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQoXCJDT05GSVJNX0VNUFRZX0ZJRUxEU1wiKVxuICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChudWxsKVxuICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZCh3YXJuaW5nRW1wdHlGaWVsZHMpXG5cbiAgICAgICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHkpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwidGhyb3cgZXhjZXB0aW9uOiBcIiArIG91dHB1dC50b1N0cmluZygpXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJXRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJXRVwiLCBvdXRwdXQudG9TdHJpbmcoKSkgIFxuICAgICAgICB9XG4gICAgfVxufVxuIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
          <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZQppbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb24KaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3IKaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CmRlZiBDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRykKCklzc3VlIGlzc3VlID0gaXNzdWUKCmxvZy5kZWJ1ZyAiVHJhbnNhemlvbmUgQ29tcGxldGUgLSBQcmltbyB2YWxpZGF0b3IiCmxvZy5kZWJ1ZyAiVHJhbnNhemlvbmUgQ29tcGxldGUgLSBQcmltbyB2YWxpZGF0b3IgLSBJc3N1ZTogIiArIGlzc3VlCgpkZWYgZXJyb3JzID0gZmFsc2UKZGVmIHdhcm5pbmdzID0gZmFsc2UKCmRlZiBhdXRvbWF0aWNhbGx5Q2xvc2VkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q2xvc2VkJ10udG9TdHJpbmcoKSlbMF0KCmRlZiBhc3NldCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXNzZXQnXS50b1N0cmluZygpKVswXQpkZWYgYXNzZXRTdGF0dXNQcmUgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmFzc2V0U3RhdHVzUHJlJ10udG9TdHJpbmcoKSlbMF0KZGVmIGFzc2V0U3RhdHVzUG9zdCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXNzZXRTdGF0dXNQb3N0J10udG9TdHJpbmcoKSlbMF0KZGVmIHJpc2sgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJpc2tPbnNpdGUnXS50b1N0cmluZygpKVswXQpkZWYgcmlza0Rlc2NyaXB0aW9uID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5yaXNrRGVzY3JpcHRpb24nXS50b1N0cmluZygpKVswXQpkZWYgY3VzdFNpZ25hdHVyZSA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY3VzdG9tZXJTaWduYXR1cmUnXS50b1N0cmluZygpKVswXQpkZWYgY3VzdFJlZiA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY3VzdENvbnRhY3RPbnNpdGUnXS50b1N0cmluZygpKVswXQpkZWYgdGVjaFNpZ25hdHVyZSA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YudGVjaG5pY2lhblNpZ25hdHVyZSddLnRvU3RyaW5nKCkpWzBdCmRlZiBrbXMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmttcyddLnRvU3RyaW5nKCkpWzBdCmRlZiB0cmF2ZWxIID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi50cmF2ZWxIb3VycyddLnRvU3RyaW5nKCkpWzBdCmRlZiBleGVjdXRpb25EYXRlID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5leGVjdXRpb25EYXRlJ10udG9TdHJpbmcoKSlbMF0KZGVmIHRlY2hzT25zaXRlID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi50ZWNobmljaWFuc09uc2l0ZSddLnRvU3RyaW5nKCkpWzBdCgpkZWYgcmVwTWF0ZXJpYWxzID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5yZXBsYWNlZE1hdGVyaWFscyddLnRvU3RyaW5nKCkpWzBdCmRlZiByZXFNYXRlcmlhbHMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJlcXVpcmVkTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF0KCmRlZiB0cmFuc2l0aW9uQ2hlY2sgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmNoZWNrQW5kQ29uZmlybSddLnRvU3RyaW5nKCkpWzBdCgpkZWYgbHVtcFN1bVByaWNlID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5sdW1wU3VtUHJpY2UnXS50b1N0cmluZygpKVswXQoKZGVmIGVycm9yTWFuZGF0b3J5RmllbGRzID0gbmV3IEFycmF5TGlzdCgpCmRlZiBlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWRGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIHdhcm5pbmdFbXB0eUZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKQoKLypPUC0xMDM4OiBFc2VndW8gbGEgdmVyaWZpY2EgZGVpIGNhbXBpIG9iYmxpZ2F0b3JpIHNvbG8gc2UgaWwgdGlja2V0IHN1IGN1aSBzdG8gZXNlZ3VlbmRvIGxhIHRyYW5zYXppb25lIG5vbiDDqCBzdGF0byBjaGl1c28gaW4gYXV0b21hdGljbyBkYWwgc2lzdGVtYSovCmxvZy5kZWJ1ZyAiaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKTogIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkKbG9nLmRlYnVnICJjaGVjazogIiArICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKQppZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpPT1udWxsIHx8ICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKSl7CiAgICAvL09QQUFfTFVNUF9TVU1fUFJJQ0UKICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobHVtcFN1bVByaWNlKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobHVtcFN1bVByaWNlKSA9PSAiIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1QcmljZSkudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICBlcnJvcnMgPSB0cnVlCiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLmx1bXBTdW1QcmljZSddLnRvU3RyaW5nKCkpCiAgICB9CgogICAgLy9PUEFBX1JFUExBQ0VEX01BVEVSSUFMUwogICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpID09ICIiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgIGxvZy5kZWJ1ZyAid2FybmluZ3MgdHJ1ZSIKICAgICAgICB3YXJuaW5ncyA9IHRydWUKICAgICAgICB3YXJuaW5nRW1wdHlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLnJlcGxhY2VkTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSkKICAgIH0KICAgIC8vT1BBQV9SRVFVSVJFRF9NQVRFUklBTFMKICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVxTWF0ZXJpYWxzKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVxTWF0ZXJpYWxzKSA9PSAiIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcU1hdGVyaWFscykudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICBsb2cuZGVidWcgIndhcm5pbmdzIHRydWUiCiAgICAgICAgd2FybmluZ3MgPSB0cnVlCiAgICAgICAgd2FybmluZ0VtcHR5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5yZXF1aXJlZE1hdGVyaWFscyddLnRvU3RyaW5nKCkpCiAgICB9CgoKICAgIC8vT1BBQV9BU1NFVAogICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldCk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0KSA9PSAiIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0KS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgIGVycm9ycyA9IHRydWUKICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YuYXNzZXQnXS50b1N0cmluZygpKQogICAgfQogICAgLy9PUEFBX0FTU0VUX1NUQVRVU19QUkUKICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXRTdGF0dXNQcmUpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldFN0YXR1c1ByZSkgPT0gIiIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldFN0YXR1c1ByZSkudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICBlcnJvcnMgPSB0cnVlCiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLmFzc2V0U3RhdHVzUHJlJ10udG9TdHJpbmcoKSkKICAgIH0KICAgIC8vT1BBQV9BU1NFVF9TVEFUVVNfUE9TVAogICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldFN0YXR1c1Bvc3QpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldFN0YXR1c1Bvc3QpID09ICIiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXRTdGF0dXNQb3N0KS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgIGVycm9ycyA9IHRydWUKICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YuYXNzZXRTdGF0dXNQb3N0J10udG9TdHJpbmcoKSkKICAgIH0KICAgIC8vT1BBQV9SSVNLX09OU0lURQogICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyaXNrKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmlzaykgPT0gIiIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyaXNrKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgIGVycm9ycyA9IHRydWUKICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2Yucmlza09uc2l0ZSddLnRvU3RyaW5nKCkpCiAgICB9CiAgICAvL09QQUFfUklTS19ERVNDUklQVElPTgogICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyaXNrKS50b1N0cmluZygpLmVxdWFscygiWWVzIikgJiYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmlza0Rlc2NyaXB0aW9uKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmlza0Rlc2NyaXB0aW9uKSA9PSAiIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJpc2tEZXNjcmlwdGlvbikudG9TdHJpbmcoKS5lcXVhbHMoIiIpKSl7CiAgICAgICAgZXJyb3JzID0gdHJ1ZQogICAgICAgIGVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5yaXNrRGVzY3JpcHRpb24nXS50b1N0cmluZygpKQogICAgfQogICAgLy9PUEFBX0NVU1RPTUVSX1NJR05BVFVSRQogICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0U2lnbmF0dXJlKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VzdFNpZ25hdHVyZSkgPT0gIiIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0U2lnbmF0dXJlKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgIGVycm9ycyA9IHRydWUKICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YuY3VzdG9tZXJTaWduYXR1cmUnXS50b1N0cmluZygpKQogICAgfQogICAgLy9PUEFBX0NVU1RPTUVSX0NPTlRBQ1RfT05TSVRFCiAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1c3RSZWYpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0UmVmKSA9PSAiIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1c3RSZWYpLnRvU3RyaW5nKCkuZXF1YWxzKCIiKSl7CiAgICAgICAgZXJyb3JzID0gdHJ1ZQogICAgICAgIGVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5jdXN0Q29udGFjdE9uc2l0ZSddLnRvU3RyaW5nKCkpCiAgICB9CiAgICAvL09QQUFfVEVDSE5JQ0lBTl9TSUdOQVRVUkUKICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGVjaFNpZ25hdHVyZSk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hTaWduYXR1cmUpID09ICIiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGVjaFNpZ25hdHVyZSkudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICBlcnJvcnMgPSB0cnVlCiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLnRlY2huaWNpYW5TaWduYXR1cmUnXS50b1N0cmluZygpKQogICAgfQogICAgLy8xNS4xMi4yMDIwIEFGIC0gdG9sdGEgb2JibGlnYXRvcmlldMOgIHN1aSBjYW1waSBPUF9LTVMgZSBPUF9UUkFWRUxfSE9VUlMgcG9pY2jDqCBvcmEgbGEgcmljaGllc3RhIHV0ZW50aSDDqCBkaSBpbXBsZW1lbnRhcmU6CiAgICAvL0NpbnppYSBTYWxpdHVybzogZG92cmViYmVybyBlc3NlcmUgb2JibGlnYXRvcmkgbGFkZG92ZSBkYSBjb250cmF0dG8gaWwgZm9ybml0b3JlIG5vbiBoYSBpbCBkaXJpdHRvIGZpc3NvIGRpIGNoaWFtYXRhCiAgICAvL09QQUFfS01TCiAgICAvKmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoa21zKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoa21zKSA9PSAiIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGttcykudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICBlcnJvcnMgPSB0cnVlCiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLmttcyddLnRvU3RyaW5nKCkpCiAgICB9Ki8KICAgIC8vT1BBQV9UUkFWRUxfSE9VUlMKICAgIC8qaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmF2ZWxIKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsSCkgPT0gIiIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmF2ZWxIKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgIGVycm9ycyA9IHRydWUKICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YudHJhdmVsSG91cnMnXS50b1N0cmluZygpKQogICAgfSovCiAgICAvL09QQUFfRVhFQ1VUSU9OX0RBVEUKICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZXhlY3V0aW9uRGF0ZSk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGV4ZWN1dGlvbkRhdGUpID09ICIiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZXhlY3V0aW9uRGF0ZSkudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICBlcnJvcnMgPSB0cnVlCiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLmV4ZWN1dGlvbkRhdGUnXS50b1N0cmluZygpKQogICAgfQoKICAgIC8vSm9iIFN0YXJ0ZWQgKyBKb2IgQ29tcGxldGVkIGRpIG9nbmkgb2dnZXR0byBUZWNoX09uU2l0ZV9SZXBvcnQgYXNzb2NpYXRvIGFsIGNhbXBvIE9QQUFfVEVDSFNfT05TSVRFCiAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hzT25zaXRlKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGVjaHNPbnNpdGUpICE9ICIiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hzT25zaXRlKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qLwogICAgICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50cwogICAgICAgIENsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlIik7ICAKICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CiAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTsKICAgICAgICBkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTsKCiAgICAgICAgZGVmIHRlY2hzT25zaXRlRmllbGQgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hzT25zaXRlKQoJCWxvZy5kZWJ1ZyAidGVjaHNPbnNpdGVGaWVsZDogIiArIHRlY2hzT25zaXRlRmllbGQKICAgICAgICBmb3IodGVjaG5pY2lhbiBpbiB0ZWNoc09uc2l0ZUZpZWxkKXsKICAgICAgICAgICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0CiAgICAgICAgICAgIGRlZiB0ZWNoT25zaXRlPXRlY2huaWNpYW4udG9TdHJpbmcoKQogICAgICAgICAgICBkZWYgdGVjaE9uc2l0ZUtleSA9IHRlY2hPbnNpdGUuc3Vic3RyaW5nKHRlY2hPbnNpdGUuaW5kZXhPZignKCcpKzEsdGVjaE9uc2l0ZS5pbmRleE9mKCcpJykpCiAgICAgICAgICAgIGRlZiB0ZWNoT25zaXRlT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHRlY2hPbnNpdGVLZXkpCiAgICAgICAgICAgIC8vZ2V0ICJKb2IgU3RhcnRlZCIgZm9yIHRoYXQgVGVjaG5pY2lhbgogICAgICAgICAgICBkZWYgb2JUcmlhZ2UKICAgICAgICAgICAgZGVmIHRlY2hKb2JTdGFydGVkCiAgICAgICAgICAgIGRlZiB0ZWNoSm9iQ29tcGxldGVkCiAgICAgICAgICAgIGRlZiB0ZWNoUmVmLCB0ZWNoLCB0ZWNoUmVmS2V5LCB0ZWNoUmVmT2JqZWN0LCB0ZWNoUmVmTmFtZQogICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaE9uc2l0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2hPblNpdGUuam9iU3RhcnRlZCddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hPbnNpdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai50ZWNoT25TaXRlLmpvYlN0YXJ0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkKICAgICAgICAgICAgICAgIHRlY2hKb2JTdGFydGVkID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgbG9nLmRlYnVnIHRlY2hKb2JTdGFydGVkIAogICAgICAgICAgICAvL2dldCAiSm9iIENvbXBsZXRlZCIgZm9yIHRoYXQgVGVjaG5pY2lhbgogICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaE9uc2l0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2hPblNpdGUuam9iQ29tcGxldGVkJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaE9uc2l0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2hPblNpdGUuam9iQ29tcGxldGVkJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpCiAgICAgICAgICAgICAgICB0ZWNoSm9iQ29tcGxldGVkID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgbG9nLmRlYnVnIHRlY2hKb2JDb21wbGV0ZWQKICAgICAgICAgICAgLy9nZXQgIlRlY2huaWNpYW5fUkVGIiBmb3IgdGhhdCBUZWNobmljaWFuCiAgICAgICAgICAgIGxvZy5kZWJ1ZyAidGVjaE9uc2l0ZU9iamVjdDogIiArIHRlY2hPbnNpdGVPYmplY3QKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoT25zaXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoudGVjaE9uc2l0ZS50ZWNobmljaWFuUmVmJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoT25zaXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoudGVjaE9uc2l0ZS50ZWNobmljaWFuUmVmJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpCiAgICAgICAgICAgICAgICB0ZWNoUmVmID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIHRlY2ggPSB0ZWNoUmVmLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyAidGVjaDogIiArIHRlY2gKICAgICAgICAgICAgICAgIHRlY2hSZWZLZXkgPSB0ZWNoLnN1YnN0cmluZyh0ZWNoLmluZGV4T2YoJygnKSsxLHRlY2guaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgbG9nLmRlYnVnICJ0ZWNoUmVmS2V5OiAiICsgdGVjaFJlZktleQogICAgICAgICAgICAgICAgdGVjaFJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihwcm9wZXJ0aWVzWydpc2NoZW1hLmFhJ10udG9TdHJpbmcoKSArICItIiArIHRlY2hSZWZLZXkpCiAgICAgICAgICAgICAgICB0ZWNoUmVmTmFtZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoudGVjaG5pY2lhbi5uYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgIAkJbG9nLmRlYnVnIHRlY2hSZWZOYW1lCgogICAgICAgICAgICBpZighdGVjaEpvYlN0YXJ0ZWQgfHwgIXRlY2hKb2JDb21wbGV0ZWQpewogICAgICAgICAgICAgICAgZXJyb3JzID0gdHJ1ZQogICAgICAgICAgICAgICAgZXJyb3JKb2JTdGFydGVkQ29tcGxldGVkRmllbGRzLmFkZCh0ZWNoUmVmTmFtZS5zdWJzdHJpbmcodGVjaFJlZk5hbWUuaW5kZXhPZignKCcpKzEsdGVjaFJlZk5hbWUuaW5kZXhPZignKScpKSkKICAgICAgICAgICAgfSAgICAKICAgICAgICAgfSAgICAKICAgIH0KCiAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpCgogICAgaWYgKCFlcnJvcnMgJiYgIXdhcm5pbmdzKXsKICAgICAgICByZXR1cm4gdHJ1ZQogICAgfWVsc2V7CiAgICAgICAgaWYoIWVycm9ycyAmJiB3YXJuaW5ncyl7CiAgICAgICAgICAgIC8vU2UgY2kgc29ubyBzb2xvIHdhcm5pbmdzIHZlcmlmaWNvIHNlIGwndXRlbnRlIGhhIGdpw6AgZGljaGlhcmF0byBkaSB2b2xlciBwcm9zZWd1aXJlIGNvbXVucXVlCiAgICAgICAgICAgIC8vIC0gdHJhbnNpdGlvbiBmaWVsZCAiT1BBQV9DSEVDS19BTkRfQ09ORklSTSI9IlllcyIKICAgICAgICAgICAgLy8gLSBpbiBjYXNvIGNvbnRyYXJpbyBpbnZpbyBpIHdhcm5pbmcgYSBGRQoKICAgICAgICAgICAgLy9sb2cuZGVidWcgInRyYW5zaXRpb25DaGVjazogIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKQogICAgICAgICAgICAvL2xvZy5kZWJ1ZyAicmVzdWx0OiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKQogICAgICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykudG9TdHJpbmcoKS5lcXVhbHMoIlllcyIpKXsKICAgICAgICAgICAgICAgIC8vbG9nLmRlYnVnICJyZXR1cm4gdHJ1ZSIKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgZGVmIHdMaXN0ID0gbmV3IEFycmF5TGlzdCgpCgogICAgICAgICAgICAgICAgaWYod2FybmluZ0VtcHR5RmllbGRzLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1FbXB0eSA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZCgiVyIpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKCJDT05GSVJNX0VNUFRZX0ZJRUxEUyIpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKG51bGwpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKHdhcm5pbmdFbXB0eUZpZWxkcykKCiAgICAgICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5KQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIG91dHB1dC5hZGQod0xpc3QpCiAgICAgICAgICAgICAgICBsb2cuZGVidWcgInRocm93IGV4Y2VwdGlvbjogIiArIG91dHB1dC50b1N0cmluZygpCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IlciOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQogICAgICAgICAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJXIiwgb3V0cHV0LnRvU3RyaW5nKCkpICAgCiAgICAgICAgICAgIH0KCiAgICAgICAgfQogICAgICAgIGlmKGVycm9ycyAmJiAhd2FybmluZ3MpewogICAgICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KCkKCiAgICAgICAgICAgIGlmKGVycm9yTWFuZGF0b3J5RmllbGRzLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgZGVmIGVMaXN0TWFuZGF0b3J5ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoIkUiKQogICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKCJNQU5EQVRPUllfRklFTERTIikKICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChudWxsKQogICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKGVycm9yTWFuZGF0b3J5RmllbGRzKQogICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0TWFuZGF0b3J5KQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZihlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWRGaWVsZHMuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICBkZWYgZUxpc3RTdGFydEVuZCA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQoIkUiKQogICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQoIk1JU1NJTkdfT05TSVRFX1NUQVJUX0VORF9ERVRBSUxTIikKICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKG51bGwpCiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kLmFkZChlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWRGaWVsZHMpCiAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RTdGFydEVuZCkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgb3V0cHV0LmFkZChlTGlzdCkKICAgICAgICAgICAgbG9nLmRlYnVnICJ0aHJvdyBleGNlcHRpb246ICIgKyBvdXRwdXQudG9TdHJpbmcoKQogICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IkUiOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQogICAgICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oIkUiLCBvdXRwdXQudG9TdHJpbmcoKSkgICAKICAgICAgICB9CiAgICAgICAgaWYoZXJyb3JzICYmIHdhcm5pbmdzKXsKICAgICAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICBpZihlcnJvck1hbmRhdG9yeUZpZWxkcy5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgIGRlZiBlTGlzdE1hbmRhdG9yeSA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKCJFIikKICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZCgiTUFOREFUT1JZX0ZJRUxEUyIpCiAgICAgICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQobnVsbCkKICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChlcnJvck1hbmRhdG9yeUZpZWxkcykKICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdE1hbmRhdG9yeSkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYoZXJyb3JKb2JTdGFydGVkQ29tcGxldGVkRmllbGRzLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgZGVmIGVMaXN0U3RhcnRFbmQgPSBuZXcgQXJyYXlMaXN0KCkKICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKCJFIikKICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKCJNSVNTSU5HX09OU0lURV9TVEFSVF9FTkRfREVUQUlMUyIpCiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kLmFkZChudWxsKQogICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQoZXJyb3JKb2JTdGFydGVkQ29tcGxldGVkRmllbGRzKQogICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0U3RhcnRFbmQpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKHdhcm5pbmdFbXB0eUZpZWxkcy5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1FbXB0eSA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKCJXIikKICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZCgiQ09ORklSTV9FTVBUWV9GSUVMRFMiKQogICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKG51bGwpCiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQod2FybmluZ0VtcHR5RmllbGRzKQoKICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eSkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgb3V0cHV0LmFkZChlTGlzdCkKICAgICAgICAgICAgb3V0cHV0LmFkZCh3TGlzdCkKICAgICAgICAgICAgbG9nLmRlYnVnICJ0aHJvdyBleGNlcHRpb246ICIgKyBvdXRwdXQudG9TdHJpbmcoKQogICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IldFIjoiJyArIG91dHB1dC50b1N0cmluZygpICsgJyJ9JykKICAgICAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJXRSIsIG91dHB1dC50b1N0cmluZygpKSAgCiAgICAgICAgfQogICAgfQp9Cg==</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="disabled">true</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
          <arg name="FIELD_SCRIPT_FILE"></arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">9fe0fa5191d4b6a91ba7485380ff8d0a9fda8fe7</arg>
          <arg name="FIELD_NOTES">YCFgT1A6IFJFU1QgQVBJOiBPUCBnZW5lcmF6aW9uZSBSYXBwb3J0byBkaSBpbnRlcnZlbnRv</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxubG9nLmRlYnVnIFwiT25TaXRlIFJlcG9ydCBwZXIgaXNzdWU6IFwiICsgaXNzdWUua2V5XG4vKiBSRVNUIEFQSSBwZXIgR2VuZXJhemlvbmUgQWxsZWdhdG8gUmFwcG9ydG8gZGkgSW50ZXJ2ZW50byAqL1xucmVxdWVzdE1ldGhvZCA9IFwiUFVUXCI7XG4vKlNjcmlwdCBWYXJpYWJsZXMqL1xuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0xNDA2MlwiKVxuXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5cbi8qUmltb3ppb25lIGFsbGVnYXRvIHJhcHBvcnRvIGRpIGludGVydmVudG8gYXBwZW5hIGNyZWF0byovXG4vKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG5cbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTtcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcblxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcblxuQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG5kZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG5cbi8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSBcIiBhcm91bmQgdmFsdWUgKi9cbmRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5OYW1lIExJS0UgXFxcIlJhcHBvcnRvIGRpIGludGVydmVudG9cXFwiIEFORCBcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpICsgXCIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSBcIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIpXCIpOyAvLyBTZWUgdGhlIGNvbXBsZXRlIGxpc3Qgb2YgcG9zc2libGUgSVFMIG9uIHRoZSBJbnNpZ2h0IFF1ZXJ5IExhbmd1YWdlIGRvY3VtZW50YXRpb24gcGFnZVxuLyogSWYgdGhpcyBpcyBhIG1hbmRhdG9yeSBmaWVsZCB5b3Ugc2hvdWxkIGJlIGFibGUgdG8gZG8gdGhpczogKi9cbmxvZy5kZWJ1ZyBcIklRTDogXCIgKyBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5OYW1lIExJS0UgXFxcIlJhcHBvcnRvIGRpIGludGVydmVudG9cXFwiIEFORCBcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpICsgXCIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSBcIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIpXCJcblxuLyohIURhIHJpbXVvdmVyZSBhcHBlbmEgcmlzb2x0aSBpIGJ1ZyEhKi9cbmlmKChvYmplY3RzID09IG51bGwgfHwgb2JqZWN0cy5zaXplPT0wKSAmJiAhaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5wbGFubmVkTWFpbnRlbmFuY2UnXSkpe1xuICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL0FBL3RpY2tldC9cIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIvYXR0YWNobWVudC9vbnNpdGVcIlxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVcmw6IFwiICsgYmFzZVVSTFxuXG4gICAgVVJMIHVybFxuICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcblxuICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkdFTkVSQVRFLU9OU0lURVJFUE9SVFwiKVxuICAgICAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICB9XG5cbn1cbiIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
          <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeQppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQpDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRykKCklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTsKQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpOwpkZWYgcmVxdWVzdE1ldGhvZApkZWYgYmFzZVVSTApsb2cuZGVidWcgIk9uU2l0ZSBSZXBvcnQgcGVyIGlzc3VlOiAiICsgaXNzdWUua2V5Ci8qIFJFU1QgQVBJIHBlciBHZW5lcmF6aW9uZSBBbGxlZ2F0byBSYXBwb3J0byBkaSBJbnRlcnZlbnRvICovCnJlcXVlc3RNZXRob2QgPSAiUFVUIjsKCmJhc2VVUkwgPSAiaHR0cDovLyIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArICIvb3AvcmVzdC9hdXRvbWF0aW9uL0FBL3RpY2tldC8iICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyAiL2F0dGFjaG1lbnQvb25zaXRlIgpsb2cuZGVidWcgImJhc2VVcmw6ICIgKyBiYXNlVVJMCgpVUkwgdXJsCnVybCA9IG5ldyBVUkwoYmFzZVVSTCkKSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpOwpjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eSgiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL2pzb24iKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoIkFjY2VwdCIsICIqLyoiKTsKY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTsKY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpOwpjb25uZWN0aW9uLmNvbm5lY3QoKTsKbG9nLmRlYnVnICJSZXNwb25zZUNvZGU6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkKbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKCmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCmRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKQpkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpCgppZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoIjIwMCIpKXsKICAgIGxvZy5kZWJ1ZyAidXJsOiAiICsgdXJsCiAgICBsb2cuZGVidWcgIlJlc3BvbnNlQ29kZToiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKQogICAgbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKICAgIGVMaXN0RXJyb3JzLmFkZCgiRSIpCiAgICBlTGlzdEVycm9ycy5hZGQoIkdFTkVSQVRFLU9OU0lURVJFUE9SVCIpCiAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyAiICIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpKQogICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncykKICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycykKCiAgICBvdXRwdXQuYWRkKGVMaXN0KQogICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigneyJFIjoiJyArIG91dHB1dC50b1N0cmluZygpICsgJyJ9JykKICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiRSIsIG91dHB1dC50b1N0cmluZygpKQp9Cg==</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="disabled">true</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
          <arg name="FIELD_SCRIPT_FILE"></arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">b734e2c5-1436-43e7-ba9d-53f2ba06c457</arg>
          <arg name="FIELD_NOTES">YCFgQ3JlYXRlIFNOICYgU08gZm9yIG9sZCB0aWNrZXRzICsgZm9yIENvbXBsZXRlZCBkdXJpbmcgTWFpbnRlbmFuY2U=</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuXG5kZWYgU04gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfU0FQX1NFUlZJQ0VfTk9USUZJQ0FUSU9OXCIpWzBdXG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcblxuVVJMIHVybFxuSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvblxuXG5pZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKFNOKSA9PSBudWxsICYmIGlzc3VlLmlzc3VlVHlwZS5uYW1lICE9IFwiUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXRcIil7XG4gICAgcmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuXG4gICAgZGVmIGJvZHlfcmVxID0gW11cbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXG4gICAgICAgIFwic3RhdHVzXCI6IFwiSU5QXCJcbiAgICBdIFxuXG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL3NlcnZpY2Uvbm90aWZpY2F0aW9uXCJcblxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxuICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNOOiBcIiArIGJvZHlfcmVxXG4gICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxuICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgIFxuICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG4gICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcblxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TTi1VUERBVEVcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICB9ZWxzZXtcbiAgICAgICAgLyoqIFNFUlZJQ0UgT1JERVIgQ1JFQVRJT04gKiovXG4gICAgICAgIGJvZHlfcmVxID0gW1xuICAgICAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXlcbiAgICAgICAgXSBcbiAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL29yL3VwZGF0ZS9zZXJ2aWNlL29yZGVyXCJcblxuICAgICAgICBsb2cuZGVidWcgXCJiYXNlVVJMIFNPOiBcIiArIGJhc2VVUkxcbiAgICAgICAgbG9nLmRlYnVnIFwiYm9keV9yZXEgU086IFwiICsgYm9keV9yZXFcbiAgICAgICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgICAgICBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG4gICAgICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgICAgICBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAxXCIpICYmICFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxuICAgIFx0XHRsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICAgICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICBcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtU0FQLVNPLUNSRUFURVwiKVxuICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgIH1cbiAgICB9XG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="disabled">true</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">37c2d78492ac54794b8917d58342d465c219be98</arg>
          <arg name="FIELD_NOTES">YCFgT1A6IFJFU1QgQVBJOiBPUCBFbWFpbCBOb3RpZmljYXRpb246IE9OU0lURV9SRVBPUlQgLSBvbmx5IElGIE9QQUFfQVVUT01BVElDQUxMWV9DTE9TRUQhPVllcyBBTkQgc2VuZE1haWwhPU5PIE1BSUwgQU5EIGNpIHNvbm8gdGlja2V0IGNvbGxlZ2F0aS4gLS0tLT4gRElTQUJMRUQgc3UgdHJhbnNhemlvbmUgY29tcGxldGUgLSB2aWVuZSBmYXR0byBtYW51YWxtZW50ZSBkYSBTRU5EIE9OU0lURSBSRVBPUlQ=</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGlua1xuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiBhdXRvbWF0aWNhbGx5Q2xvc2VkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q2xvc2VkJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBzZW5kTWFpbFRvID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zZW5kTWFpbFRvJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBzZW5kTWFpbFRvUmVjID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zZW5kTWFpbFRvUmVjaXBpZW50cyddLnRvU3RyaW5nKCkpWzBdXG5kZWYgb25zaXRlUmVwb3J0RGF0ZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi53Zk9uc2l0ZVJlcG9ydCddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5kZWYgcmVsYXRlc0luSXNzdWVMaW5rPWZhbHNlXG5kZWYgcmVsYXRlc091dElzc3VlTGluaz1mYWxzZVxuZGVmIGxpbmtlZFRpY2tldHM9bmV3IEFycmF5TGlzdCgpXG5kZWYgYm9keV9yZXFcbmRlZiBzZW5kbWFpbD10cnVlXG5cbmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCk9PW51bGwgfHwgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIikpe1xuXG4gICAgLypPUC0xMDM4OiB2ZXJpZmljYSB0aWNrZXQgY29sbGVnYXRpKi9cbiAgICBMaXN0PElzc3VlTGluaz4gYWxsSW5Jc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0SW53YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxJbklzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG5cbiAgICAgICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgcmVsYXRlc0luSXNzdWVMaW5rPXRydWVcbiAgICAgICAgICAgIGxpbmtlZFRpY2tldHMuYWRkKGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKS50b1N0cmluZygpKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiSXNzdWUgY29uIHJlbGF0ZXNJbklzc3VlTGlua1wiXG4gICAgICAgIH1cbiAgICB9XG4gICAgTGlzdDxJc3N1ZUxpbms+IGFsbE91dElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgIHJlbGF0ZXNPdXRJc3N1ZUxpbms9dHJ1ZVxuICAgICAgICAgICAgbGlua2VkVGlja2V0cy5hZGQoaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkudG9TdHJpbmcoKSlcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIklzc3VlIGNvbiByZWxhdGVzT3V0SXNzdWVMaW5rXCJcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBsb2cuZGVidWcgXCJpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCk6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKS50b1N0cmluZygpXG4gICAgaWYoKHJlbGF0ZXNJbklzc3VlTGluayB8fCByZWxhdGVzT3V0SXNzdWVMaW5rKSAmJiAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydjZi5vcHRpb24uc2VuZE1haWxUby5ub0VtYWlsJ10udG9TdHJpbmcoKSkgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydjZi5vcHRpb24uc2VuZE1haWxUby5jdXJyZW50UmVwb3J0J10udG9TdHJpbmcoKSkpe1xuICAgICAgICAvL09QLTEwMzg6IGludmlhcmUgc29sbyBsYSBtYWlsIGNvbiBpbCByYXBwb3J0byBkaSBpbnRlcnZlbnRvIGRlbCB0aWNrZXQgY29ycmVudGVcbiAgICAgICAgYm9keV9yZXEgPSBbXG4gICAgICAgICAgICBcInRlbXBsYXRlTmFtZVwiOiBwcm9wZXJ0aWVzWyd0dC5vblNpdGVSZXBvcnQnXS50b1N0cmluZygpLFxuICAgICAgICAgICAgXCJwZWNcIjogZmFsc2UsXG4gICAgICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleSxcbiAgICAgICAgICAgIFwiYWRkaXRpb25hbFJlY2lwaWVudHNcIjogaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvUmVjKS50b1N0cmluZygpXG4gICAgICAgIF1cbiAgICAgICAgLyozMS4wNy4yMDIwIEFGOiBuZWxsYSB0cmFuc2F6aW9uZSBjb21wbGV0ZSBOT04gaW52aWFyZSBtYWlsIGxhIG1haWwgcGVyIGkgdGlja2V0IGNvbiBjb2xsZWdhdGkgLSBpbCByYXBwb3J0byBkaSBpbnRlcnZlbnRvIGRlaSB0aWNrZXQgXCJmaWdsaVwiIHZpZW5lIGdlbmVyYXRvIGRvcG8gbCdpbnZpbyBkZWxsYSBtYWlsIHN1bCBcInBhZHJlXCIgcXVpbmRpIG5vbiB2ZXJyZWJiZSBpbmNsdXNvIG5lbGxhIG1haWwqL1xuICAgICAgICAvKkwnaW52aW8gZGVsbGEgbWFpbCB2ZXJyXHUwMGUwIGZhdHRvIHN1Y2Nlc3NpdmFtZW50ZSByaXNwZXR0byBhbGxhIGNoaXVzdXJhIGNvbiBcIlNlbmQgT25TaXRlIFJlcG9ydFwiKi9cbiAgICAgICAgc2VuZG1haWw9ZmFsc2VcbiAgICB9ZWxzZSBpZigocmVsYXRlc0luSXNzdWVMaW5rIHx8IHJlbGF0ZXNPdXRJc3N1ZUxpbmspICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLm5vRW1haWwnXS50b1N0cmluZygpKSAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLmN1cnJlbnRSZXBvcnQnXS50b1N0cmluZygpKSl7XG4gICAgICAgIC8vT1AtMTAzODogaW52aWFyZSBsYSBtYWlsIGNvbiB0dXR0aSBpIHJhcHBvcnRpIGRpIGludGVydmVudG8gZGVpIHRpY2tldCBjb2xsZWdhdGlcbiAgICAgICAgYm9keV9yZXEgPSBbXG4gICAgICAgICAgICBcInRlbXBsYXRlTmFtZVwiOiBwcm9wZXJ0aWVzWyd0dC5vblNpdGVSZXBvcnQnXS50b1N0cmluZygpLFxuICAgICAgICAgICAgXCJwZWNcIjogZmFsc2UsXG4gICAgICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleSxcbiAgICAgICAgICAgIFwibGlua2VkVGlja2V0c1wiOiBsaW5rZWRUaWNrZXRzLFxuICAgICAgICAgICAgXCJhZGRpdGlvbmFsUmVjaXBpZW50c1wiOiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG9SZWMpLnRvU3RyaW5nKClcbiAgICAgICAgXVxuICAgICAgICAvKjMxLjA3LjIwMjAgQUY6IG5lbGxhIHRyYW5zYXppb25lIGNvbXBsZXRlIE5PTiBpbnZpYXJlIG1haWwgbGEgbWFpbCBwZXIgaSB0aWNrZXQgY29uIGNvbGxlZ2F0aSAtIGlsIHJhcHBvcnRvIGRpIGludGVydmVudG8gZGVpIHRpY2tldCBcImZpZ2xpXCIgdmllbmUgZ2VuZXJhdG8gZG9wbyBsJ2ludmlvIGRlbGxhIG1haWwgc3VsIFwicGFkcmVcIiBxdWluZGkgbm9uIHZlcnJlYmJlIGluY2x1c28gbmVsbGEgbWFpbCovXG4gICAgICAgIC8qTCdpbnZpbyBkZWxsYSBtYWlsIHZlcnJcdTAwZTAgZmF0dG8gc3VjY2Vzc2l2YW1lbnRlIHJpc3BldHRvIGFsbGEgY2hpdXN1cmEgY29uIFwiU2VuZCBPblNpdGUgUmVwb3J0XCIqL1xuICAgICAgICBzZW5kbWFpbD1mYWxzZVxuICAgIH1lbHNlIGlmKCFyZWxhdGVzSW5Jc3N1ZUxpbmsgJiYgIXJlbGF0ZXNPdXRJc3N1ZUxpbmspe1xuICAgICAgICAvKkFGIDIwMjAwNzI5IC0gc3UgRkFBQyBTZXJ2aWNlIGxhIG5vdGlmaWNhIGNvbiBpbCByYXBwb3J0byBkaSBpbnRlcnZlbnRvIHZpZW5lIGludmlhdGEgc29sbyBzdSBlc3BsaWNpdGEgZGVjaXNpb25lIGRlbGwndXRlbnRlIC0gY2hlIHNwaW5nZXJcdTAwZTAgU0VORCBPTlNJVEUgUkVQT1JUIGRvcG8gYXZlciBjaGl1c28gaWwgdGlja2V0LiBRdWluZGkgc2Ugbm9uIGNpIHNvbm8gdGlja2V0IGNvbGxlZ2F0aSBzZXR0aWFtbyBzZW5kbWFpbD1mYWxzZSovXG4gICAgICAgIHNlbmRtYWlsPWZhbHNlXG4gICAgICAgIGJvZHlfcmVxID0gW1xuICAgICAgICAgICAgXCJ0ZW1wbGF0ZU5hbWVcIjogcHJvcGVydGllc1sndHQub25TaXRlUmVwb3J0J10udG9TdHJpbmcoKSxcbiAgICAgICAgICAgIFwicGVjXCI6IGZhbHNlLFxuICAgICAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXG4gICAgICAgICAgICBcImFkZGl0aW9uYWxSZWNpcGllbnRzXCI6IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUb1JlYykudG9TdHJpbmcoKVxuICAgICAgICBdXG4gICAgfWVsc2V7XG4gICAgICAgIC8vT1AtMTAzODogbm9uIGludmlhcmUgbGEgbWFpbFxuICAgICAgICBzZW5kbWFpbD1mYWxzZVxuICAgIH1cbiAgICBcbiAgICBsb2cuZGVidWcgXCJzZW5kbWFpbDogXCIgKyBzZW5kbWFpbFxuICAgIGlmKHNlbmRtYWlsKXtcbiAgICAgICAgLyogUkVTVCBBUEkgcGVyIEludmlvIE5vdGlmaWNhIEVtYWlsIE9OU0lURV9SRVBPUlQgKi9cbiAgICAgICAgcmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuXG4gICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL3RyYW5zYWN0aW9uL21haWwvc2VuZFwiXG4gICAgICAgIFVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgICAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgICAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxOiBcIiArIGJvZHlfcmVxXG4gICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cbiAgICAgICAgbG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuICAgICAgICBcbiAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgIC8vbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuXG4gICAgICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcblxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG4gICAgICAgICAgICBDbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuICAgICAgICAgICAgZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG5cbiAgICAgICAgICAgIC8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbiAgICAgICAgICAgIENsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTtcbiAgICAgICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4gICAgICAgICAgICAvKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbiAgICAgICAgICAgIENsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpO1xuICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcblxuICAgICAgICAgICAgLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbiAgICAgICAgICAgIENsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcblxuICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG4gICAgICAgICAgICBkZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG5cbiAgICAgICAgICAgIC8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSBcIiBhcm91bmQgdmFsdWUgKi9cbiAgICAgICAgICAgIC8qUk9MTEJBQ0sqL1xuICAgICAgICAgICAgLypSaW1vemlvbmUgYWxsZWdhdG8gcmFwcG9ydG8gZGkgaW50ZXJ2ZW50byBhcHBlbmEgY3JlYXRvKi9cbiAgICAgICAgICAgIGRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5cXFwiTmFtZVxcXCIgPSBcXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5vYmpzLnJhcHBJbnRGQUFDJ10udG9TdHJpbmcoKSArIFwiXFxcIiBBTkQgXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSArIFwiIT10cnVlIEFORCBvYmplY3QgSEFWSU5HIGNvbm5lY3RlZFRpY2tldHMoa2V5ID0gXCIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArIFwiKVwiKTsgLy8gU2VlIHRoZSBjb21wbGV0ZSBsaXN0IG9mIHBvc3NpYmxlIElRTCBvbiB0aGUgSW5zaWdodCBRdWVyeSBMYW5ndWFnZSBkb2N1bWVudGF0aW9uIHBhZ2VcbiAgICAgICAgICAgIC8qIElmIHRoaXMgaXMgYSBtYW5kYXRvcnkgZmllbGQgeW91IHNob3VsZCBiZSBhYmxlIHRvIGRvIHRoaXM6ICovXG4gICAgICAgICAgICAvL2xvZy5pbmZvKFwiSW5zaWdodCBvYmplY3Q6IFwiICsgb2JqZWN0c1swXSk7XG5cbiAgICAgICAgICAgIGlmKG9iamVjdHNbMF0pe1xuICAgICAgICAgICAgICAgIC8qIFVQREFURSBPSkJFQ1QgREVMRVRFRCBWQUxVRSAqL1xuICAgICAgICAgICAgICAgIGRlZiBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihvYmplY3RzWzBdLmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkgIFxuICAgICAgICAgICAgICAgIGRlZiB2YWx1ZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuXG4gICAgICAgICAgICAgICAgZGVmIHZhbHVlQmVhbiA9IG9iVHJpYWdlLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpXG4gICAgICAgICAgICAgICAgdmFsdWVCZWFuLnNldFZhbHVlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlLmdldE9iamVjdFR5cGVBdHRyaWJ1dGVJZCgpKSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAvKkNsZWFuIGFjdHVhbCB2YWx1ZSovXG4gICAgICAgICAgICAgICAgdmFsdWUuY2xlYXIoKVxuICAgICAgICAgICAgICAgIHZhbHVlLmFkZCh2YWx1ZUJlYW4pO1xuICAgICAgICAgICAgICAgIG9iVHJpYWdlLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWUpXG5cbiAgICAgICAgICAgICAgICAvL1VwZGF0ZSBPSkJFQ1QgYXR0cmlidXRlIHZhbHVlXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiMS4gQ291bGQgbm90IHVwZGF0ZSBvYmplY3QgYXR0cmlidXRlIGR1ZSB0byB2YWxpZGF0aW9uIGV4Y2VwdGlvbjpcIiArIHZpZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLypSb2xsYmFjayBjb250YWJpbGl6emF6aW9uZSBpbnRlcnZlbnRvKi9cbiAgICAgICAgICAgIC8qQ2FuY2VsbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBPblNpdGVfUmF0ZV9SZXBvcnQgcmVnaXN0cmF0aSBuZWkgY2FtcGkgT1BBQV9MVU1QX1NVTV9SQVRFUywgT1BBQV9VTkFfVEFOVFVNX1JBVEVTLCBPUEFBX1RSQVZFTF9SQVRFUywgT1BBQV9MQUJPVVJfUkFURVMqL1xuICAgICAgICAgICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovXG5cbiAgICAgICAgICAgIC8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSBcIiBhcm91bmQgdmFsdWUgKi9cbiAgICAgICAgICAgIG9iamVjdHMgPSBpcWxGYWNhZGUuZmluZE9iamVjdHNCeUlRTEFuZFNjaGVtYShPUEFBLCBcIm9iamVjdFR5cGUgPSBcIiArIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydCddLnRvU3RyaW5nKCkgKyBcIiBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleT1cIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIpIEFORCBcXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyBcIlxcXCIgIT0gdHJ1ZVwiKTsgLy8gU2VlIHRoZSBjb21wbGV0ZSBsaXN0IG9mIHBvc3NpYmxlIElRTCBvbiB0aGUgSW5zaWdodCBRdWVyeSBMYW5ndWFnZSBkb2N1bWVudGF0aW9uIHBhZ2VcbiAgICAgICAgICAgIC8qIElmIHRoaXMgaXMgYSBtYW5kYXRvcnkgZmllbGQgeW91IHNob3VsZCBiZSBhYmxlIHRvIGRvIHRoaXM6ICovXG4gICAgICAgICAgICAvL2xvZy5pbmZvKFwiSW5zaWdodCBvYmplY3RzIGRhIGNhbmNlbGxhcmU6IFwiICsgb2JqZWN0cyk7XG5cbiAgICAgICAgICAgIGZvcihvYmogaW4gb2JqZWN0cyl7XG4gICAgICAgICAgICAgICAgLyogREVMRVRFIENPTk5FQ1RFRCBPQkpFQ1RTICovXG4gICAgICAgICAgICAgICAgb2JqZWN0RmFjYWRlLmRlbGV0ZU9iamVjdEJlYW4ob2JqLmdldElkKCkpOyAgXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qQ2FuY2VsbGFyZSBnbGkgaW1wb3J0aSBmb3JuaXRvcmUsIGNsaWVudGUgZSBpIHRvdGFsaSBzdSB0dXR0aSBnbGkgb2dnZXR0aSBDb21wb25lbnQgaW4gT1BBQV9SRVBMQUNFRF9NQVRFUklBTFMqL1xuICAgICAgICAgICAgZGVmIHJlcE1hdGVyaWFscyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YucmVwbGFjZWRNYXRlcmlhbHMnXS50b1N0cmluZygpKVswXVxuICAgICAgICAgICAgZGVmIHJlcE1hdExpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscylcblxuICAgICAgICAgICAgZm9yKG1hdCBpbiByZXBNYXRMaXN0KXtcbiAgICAgICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5kIGdldCBvYmplY3RcbiAgICAgICAgICAgICAgICBkZWYgY29tcG9uZW50PW1hdC50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgZGVmIGNvbXBvbmVudEtleSA9IGNvbXBvbmVudC5zdWJzdHJpbmcoY29tcG9uZW50LmluZGV4T2YoJygnKSsxLGNvbXBvbmVudC5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgZGVmIGNvbXBvbmVudE9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihjb21wb25lbnRLZXkpXG4gICAgICAgICAgICAgICAgLy9zZXQgXCJBUFBMSUVEX1RPXCIsIFwiQUNDT1VOVElOR19TVVBQTElFUl9NQVRFUklBTF9SRUZcIiwgXCJBQ0NPVU5USU5HX0NVU1RPTUVSX01BVEVSSUFMX1JFRlwiLCBcIlRPVEFMX0FNT1VOVF9TVVBQTElFUlwiLCBcIlRPVEFMX0FNT1VOVF9DVVNUT01FUlwiIHRvIG51bGwgZm9yIHRoYXQgY29tcG9uZW50XG5cbiAgICAgICAgICAgICAgICAvL0FQUExJRURfVE9cbiAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgICAgICAgICAgZGVmIG9iVHJpYWdlQXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICAgICAgZGVmIHZhbHVlQXBwbGllZFRvID0gb2JUcmlhZ2VBcHBsaWVkVG8uZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuIFwidmFsdWVBcHBsaWVkVG86IFwiICsgdmFsdWVBcHBsaWVkVG9cbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlQXBwbGllZFRvLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVBcHBsaWVkVG8uY2xlYXIoKSBcblxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZUFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5kZWxldGVPYmplY3RBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlQXBwbGllZFRvLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpeyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZXJyb3IoXCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOlwiICsgdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL0FDQ09VTlRJTkdfU1VQUExJRVJfTUFURVJJQUxfUkVGXG4gICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hY2NvdW50aW5nU3VwcE1hdGVyaWFsJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgICAgICBkZWYgb2JUcmlhZ2VNYXRTID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hY2NvdW50aW5nU3VwcE1hdGVyaWFsJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgICAgIGRlZiB2YWx1ZU1hdFMgPSBvYlRyaWFnZU1hdFMuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuIFwidmFsdWVNYXRTOiBcIiArIHZhbHVlTWF0U1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVNYXRTLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVNYXRTLmNsZWFyKCkgXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2VNYXRTID0gb2JqZWN0RmFjYWRlLmRlbGV0ZU9iamVjdEF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2VNYXRTLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpeyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZXJyb3IoXCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOlwiICsgdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL0FDQ09VTlRJTkdfQ1VTVE9NRVJfTUFURVJJQUxfUkVGXG4gICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hY2NvdW50aW5nQ3VzdE1hdGVyaWFsJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgICAgICBkZWYgb2JUcmlhZ2VNYXRDID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hY2NvdW50aW5nQ3VzdE1hdGVyaWFsJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgICAgIGRlZiB2YWx1ZU1hdEMgPSBvYlRyaWFnZU1hdEMuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuIFwidmFsdWVNYXRDOiBcIiArIHZhbHVlTWF0Q1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVNYXRDLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVNYXRDLmNsZWFyKCkgXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2VNYXRDID0gb2JqZWN0RmFjYWRlLmRlbGV0ZU9iamVjdEF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2VNYXRDLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpeyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZXJyb3IoXCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOlwiICsgdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy9UT1RBTF9BTU9VTlRfU1VQUExJRVJcbiAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdFN1cHAnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgICAgIGRlZiBvYlRyaWFnZVRvdFMgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdFN1cHAnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICAgICAgZGVmIHZhbHVlVG90UyA9IG9iVHJpYWdlVG90Uy5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4gXCJ2YWx1ZVRvdFM6IFwiICsgdmFsdWVUb3RTXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZVRvdFMuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVRvdFMuY2xlYXIoKSBcblxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZVRvdFMgPSBvYmplY3RGYWNhZGUuZGVsZXRlT2JqZWN0QXR0cmlidXRlQmVhbihvYlRyaWFnZVRvdFMuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSl7IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5lcnJvcihcIkNvdWxkIG5vdCB1cGRhdGUgb2JqZWN0IGF0dHJpYnV0ZSBkdWUgdG8gdmFsaWRhdGlvbiBleGNlcHRpb246XCIgKyB2aWUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vVE9UQUxfQU1PVU5UX0NVU1RPTUVSXG4gICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RDdXN0J10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgICAgICBkZWYgb2JUcmlhZ2VUb3RDID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RDdXN0J10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgICAgIGRlZiB2YWx1ZVRvdEMgPSBvYlRyaWFnZVRvdEMuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuIFwidmFsdWVUb3RDOiBcIiArIHZhbHVlVG90Q1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVUb3RDLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVUb3RDLmNsZWFyKCkgXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2VUb3RDID0gb2JqZWN0RmFjYWRlLmRlbGV0ZU9iamVjdEF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2VUb3RDLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpeyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZXJyb3IoXCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOlwiICsgdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ICAgIFxuXG4gICAgICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgICAgICBsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXG5cbiAgICAgICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICAgICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICBcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiU0VORE1BSUxcIilcbiAgICAgICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKSlcbiAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChqc29uX29iamVjdC5tZXNzYWdlKVxuICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgLypMJ2VtYWlsIFx1MDBlOCBzdGF0YSBpbnZpYXRhIGNvcnJldHRhbWVudGUsIGFnZ2lvcm5vIGlsIGNhbXBvIE9OU0lURV9SRVBPUlQgY29uIGxhIGRhdGEgY29ycmVudGUqL1xuXG4gICAgICAgICAgICAvLyBsb2cud2FybiBcImlzc3VlIFwiK2lzc3VlLmdldEtleSgpXG4gICAgICAgICAgICBkZWYgY2Z2ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShvbnNpdGVSZXBvcnREYXRlKVxuICAgICAgICAgICAgaWYgKCFjZnYpIHtcbiAgICAgICAgICAgICAgZGVmIHQwICA9IG5ldyBqYXZhLnNxbC5UaW1lc3RhbXAoU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkpXG4gICAgICAgICAgICAgIGxvZy53YXJuIFwiU3RhcnRUaW1lID0+ICdcIit0MC50b1N0cmluZygpK1wiJ1wiXG4gICAgICAgICAgICAgIGRlZiBtdiA9IG5ldyBNb2RpZmllZFZhbHVlKG9uc2l0ZVJlcG9ydERhdGUsIHQwKVxuICAgICAgICAgICAgICBkZWYgY2ggPSBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKClcbiAgICAgICAgICAgICAgb25zaXRlUmVwb3J0RGF0ZS51cGRhdGVWYWx1ZShudWxsLCBpc3N1ZSwgbXYsIGNoKSBcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGxvZy53YXJuIFwiU3RhcnRUaW1lID09ICdcIitjZnYudG9TdHJpbmcoKStcIidcIlxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
          <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWUKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS51dGlsLkRlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvbgppbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CkNhdGVnb3J5IGxvZyA9IENhdGVnb3J5LmdldEluc3RhbmNlKCJjb20ub25yZXNvbHZlLmppcmEuZ3Jvb3Z5LlBvc3RGdW5jdGlvbiIpCmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKQoKSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpOwpDdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7CmRlZiBhdXRvbWF0aWNhbGx5Q2xvc2VkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q2xvc2VkJ10udG9TdHJpbmcoKSlbMF0KZGVmIHNlbmRNYWlsVG8gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnNlbmRNYWlsVG8nXS50b1N0cmluZygpKVswXQpkZWYgc2VuZE1haWxUb1JlYyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yuc2VuZE1haWxUb1JlY2lwaWVudHMnXS50b1N0cmluZygpKVswXQpkZWYgb25zaXRlUmVwb3J0RGF0ZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi53Zk9uc2l0ZVJlcG9ydCddLnRvU3RyaW5nKCkpWzBdCgpkZWYgcmVxdWVzdE1ldGhvZApkZWYgYmFzZVVSTAoKaW50IE9QQUEgPSBwcm9wZXJ0aWVzWydpc2NoZW1hLmFhLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKQppbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpCmRlZiByZWxhdGVzSW5Jc3N1ZUxpbms9ZmFsc2UKZGVmIHJlbGF0ZXNPdXRJc3N1ZUxpbms9ZmFsc2UKZGVmIGxpbmtlZFRpY2tldHM9bmV3IEFycmF5TGlzdCgpCmRlZiBib2R5X3JlcQpkZWYgc2VuZG1haWw9dHJ1ZQoKaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKT09bnVsbCB8fCAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKS50b1N0cmluZygpLmVxdWFscygiWWVzIikpewoKICAgIC8qT1AtMTAzODogdmVyaWZpY2EgdGlja2V0IGNvbGxlZ2F0aSovCiAgICBMaXN0PElzc3VlTGluaz4gYWxsSW5Jc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0SW53YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSkKICAgIGZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbEluSXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHsKICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpOwoKICAgICAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgIHJlbGF0ZXNJbklzc3VlTGluaz10cnVlCiAgICAgICAgICAgIGxpbmtlZFRpY2tldHMuYWRkKGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKS50b1N0cmluZygpKQogICAgICAgICAgICBsb2cuZGVidWcgIklzc3VlIGNvbiByZWxhdGVzSW5Jc3N1ZUxpbmsiCiAgICAgICAgfQogICAgfQogICAgTGlzdDxJc3N1ZUxpbms+IGFsbE91dElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSkKICAgIGZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbE91dElzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7CiAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTsKCiAgICAgICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICByZWxhdGVzT3V0SXNzdWVMaW5rPXRydWUKICAgICAgICAgICAgbGlua2VkVGlja2V0cy5hZGQoaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkudG9TdHJpbmcoKSkKICAgICAgICAgICAgbG9nLmRlYnVnICJJc3N1ZSBjb24gcmVsYXRlc091dElzc3VlTGluayIKICAgICAgICB9CiAgICB9CiAgICAKICAgIGxvZy5kZWJ1ZyAiaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKS50b1N0cmluZygpOiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKS50b1N0cmluZygpCiAgICBpZigocmVsYXRlc0luSXNzdWVMaW5rIHx8IHJlbGF0ZXNPdXRJc3N1ZUxpbmspICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLm5vRW1haWwnXS50b1N0cmluZygpKSAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLmN1cnJlbnRSZXBvcnQnXS50b1N0cmluZygpKSl7CiAgICAgICAgLy9PUC0xMDM4OiBpbnZpYXJlIHNvbG8gbGEgbWFpbCBjb24gaWwgcmFwcG9ydG8gZGkgaW50ZXJ2ZW50byBkZWwgdGlja2V0IGNvcnJlbnRlCiAgICAgICAgYm9keV9yZXEgPSBbCiAgICAgICAgICAgICJ0ZW1wbGF0ZU5hbWUiOiBwcm9wZXJ0aWVzWyd0dC5vblNpdGVSZXBvcnQnXS50b1N0cmluZygpLAogICAgICAgICAgICAicGVjIjogZmFsc2UsCiAgICAgICAgICAgICJpc3N1ZUtleSI6IGlzc3VlLmtleSwKICAgICAgICAgICAgImFkZGl0aW9uYWxSZWNpcGllbnRzIjogaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvUmVjKS50b1N0cmluZygpCiAgICAgICAgXQogICAgICAgIC8qMzEuMDcuMjAyMCBBRjogbmVsbGEgdHJhbnNhemlvbmUgY29tcGxldGUgTk9OIGludmlhcmUgbWFpbCBsYSBtYWlsIHBlciBpIHRpY2tldCBjb24gY29sbGVnYXRpIC0gaWwgcmFwcG9ydG8gZGkgaW50ZXJ2ZW50byBkZWkgdGlja2V0ICJmaWdsaSIgdmllbmUgZ2VuZXJhdG8gZG9wbyBsJ2ludmlvIGRlbGxhIG1haWwgc3VsICJwYWRyZSIgcXVpbmRpIG5vbiB2ZXJyZWJiZSBpbmNsdXNvIG5lbGxhIG1haWwqLwogICAgICAgIC8qTCdpbnZpbyBkZWxsYSBtYWlsIHZlcnLDoCBmYXR0byBzdWNjZXNzaXZhbWVudGUgcmlzcGV0dG8gYWxsYSBjaGl1c3VyYSBjb24gIlNlbmQgT25TaXRlIFJlcG9ydCIqLwogICAgICAgIHNlbmRtYWlsPWZhbHNlCiAgICB9ZWxzZSBpZigocmVsYXRlc0luSXNzdWVMaW5rIHx8IHJlbGF0ZXNPdXRJc3N1ZUxpbmspICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLm5vRW1haWwnXS50b1N0cmluZygpKSAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLmN1cnJlbnRSZXBvcnQnXS50b1N0cmluZygpKSl7CiAgICAgICAgLy9PUC0xMDM4OiBpbnZpYXJlIGxhIG1haWwgY29uIHR1dHRpIGkgcmFwcG9ydGkgZGkgaW50ZXJ2ZW50byBkZWkgdGlja2V0IGNvbGxlZ2F0aQogICAgICAgIGJvZHlfcmVxID0gWwogICAgICAgICAgICAidGVtcGxhdGVOYW1lIjogcHJvcGVydGllc1sndHQub25TaXRlUmVwb3J0J10udG9TdHJpbmcoKSwKICAgICAgICAgICAgInBlYyI6IGZhbHNlLAogICAgICAgICAgICAiaXNzdWVLZXkiOiBpc3N1ZS5rZXksCiAgICAgICAgICAgICJsaW5rZWRUaWNrZXRzIjogbGlua2VkVGlja2V0cywKICAgICAgICAgICAgImFkZGl0aW9uYWxSZWNpcGllbnRzIjogaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvUmVjKS50b1N0cmluZygpCiAgICAgICAgXQogICAgICAgIC8qMzEuMDcuMjAyMCBBRjogbmVsbGEgdHJhbnNhemlvbmUgY29tcGxldGUgTk9OIGludmlhcmUgbWFpbCBsYSBtYWlsIHBlciBpIHRpY2tldCBjb24gY29sbGVnYXRpIC0gaWwgcmFwcG9ydG8gZGkgaW50ZXJ2ZW50byBkZWkgdGlja2V0ICJmaWdsaSIgdmllbmUgZ2VuZXJhdG8gZG9wbyBsJ2ludmlvIGRlbGxhIG1haWwgc3VsICJwYWRyZSIgcXVpbmRpIG5vbiB2ZXJyZWJiZSBpbmNsdXNvIG5lbGxhIG1haWwqLwogICAgICAgIC8qTCdpbnZpbyBkZWxsYSBtYWlsIHZlcnLDoCBmYXR0byBzdWNjZXNzaXZhbWVudGUgcmlzcGV0dG8gYWxsYSBjaGl1c3VyYSBjb24gIlNlbmQgT25TaXRlIFJlcG9ydCIqLwogICAgICAgIHNlbmRtYWlsPWZhbHNlCiAgICB9ZWxzZSBpZighcmVsYXRlc0luSXNzdWVMaW5rICYmICFyZWxhdGVzT3V0SXNzdWVMaW5rKXsKICAgICAgICAvKkFGIDIwMjAwNzI5IC0gc3UgRkFBQyBTZXJ2aWNlIGxhIG5vdGlmaWNhIGNvbiBpbCByYXBwb3J0byBkaSBpbnRlcnZlbnRvIHZpZW5lIGludmlhdGEgc29sbyBzdSBlc3BsaWNpdGEgZGVjaXNpb25lIGRlbGwndXRlbnRlIC0gY2hlIHNwaW5nZXLDoCBTRU5EIE9OU0lURSBSRVBPUlQgZG9wbyBhdmVyIGNoaXVzbyBpbCB0aWNrZXQuIFF1aW5kaSBzZSBub24gY2kgc29ubyB0aWNrZXQgY29sbGVnYXRpIHNldHRpYW1vIHNlbmRtYWlsPWZhbHNlKi8KICAgICAgICBzZW5kbWFpbD1mYWxzZQogICAgICAgIGJvZHlfcmVxID0gWwogICAgICAgICAgICAidGVtcGxhdGVOYW1lIjogcHJvcGVydGllc1sndHQub25TaXRlUmVwb3J0J10udG9TdHJpbmcoKSwKICAgICAgICAgICAgInBlYyI6IGZhbHNlLAogICAgICAgICAgICAiaXNzdWVLZXkiOiBpc3N1ZS5rZXksCiAgICAgICAgICAgICJhZGRpdGlvbmFsUmVjaXBpZW50cyI6IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUb1JlYykudG9TdHJpbmcoKQogICAgICAgIF0KICAgIH1lbHNlewogICAgICAgIC8vT1AtMTAzODogbm9uIGludmlhcmUgbGEgbWFpbAogICAgICAgIHNlbmRtYWlsPWZhbHNlCiAgICB9CiAgICAKICAgIGxvZy5kZWJ1ZyAic2VuZG1haWw6ICIgKyBzZW5kbWFpbAogICAgaWYoc2VuZG1haWwpewogICAgICAgIC8qIFJFU1QgQVBJIHBlciBJbnZpbyBOb3RpZmljYSBFbWFpbCBPTlNJVEVfUkVQT1JUICovCiAgICAgICAgcmVxdWVzdE1ldGhvZCA9ICJQT1NUIjsKCiAgICAgICAgYmFzZVVSTCA9ICJodHRwOi8vIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgIi9vcC9yZXN0L2ppcmEvQUEvdHJhbnNhY3Rpb24vbWFpbC9zZW5kIgogICAgICAgIFVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpCiAgICAgICAgSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTsKICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7CiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLTgiKTsKICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eSgiQWNjZXB0IiwgIiovKiIpOwogICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7CiAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpOwogICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtCiAgICAgICAgbG9nLmRlYnVnICJib2R5X3JlcTogIiArIGJvZHlfcmVxCiAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcigiVVRGLTgiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH0KICAgICAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0KICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTsKICAgICAgICAKICAgICAgICBsb2cuZGVidWcgInVybDogIiArIHVybAogICAgICAgIGxvZy5kZWJ1ZyAiUmVzcG9uc2VDb2RlOiIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpCiAgICAgICAgLy9sb2cuZGVidWcgIlJlc3BvbnNlTWVzc2FnZToiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKQoKICAgICAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKQoKICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoIjIwMCIpKXsKICAgICAgICAgICAgbG9nLmRlYnVnICJ1cmw6ICIgKyB1cmwKICAgICAgICAgICAgbG9nLmRlYnVnICJSZXNwb25zZUNvZGU6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkKICAgICAgICAgICAgbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKCiAgICAgICAgICAgIAogICAgICAgICAgICAvKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovCiAgICAgICAgICAgIENsYXNzIGlxbEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuSVFMRmFjYWRlIik7IAogICAgICAgICAgICBkZWYgaXFsRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKGlxbEZhY2FkZUNsYXNzKTsKCiAgICAgICAgICAgIC8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi8KICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGUiKTsKICAgICAgICAgICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7CgogICAgICAgICAgICAvKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi8KICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0VHlwZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUZhY2FkZSIpOwogICAgICAgICAgICBkZWYgb2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpOwoKICAgICAgICAgICAgLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi8KICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSIpOwogICAgICAgICAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpOwoKICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuc2VydmljZXMubW9kZWwuZmFjdG9yeS5PYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeSIpOwogICAgICAgICAgICBkZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7CgogICAgICAgICAgICAvKiBTcGVjaWZ5IHRoZSBzY2hlbWEgaWQgYXMgd2VsbCBhcyB0aGUgSVFMIHRoYXQgd2lsbCBmZXRjaCBvYmplY3RzLiBJbiB0aGlzIGNhc2UgYWxsIG9iamVjdHMgd2l0aCBOYW1lIG1hdGNoaW5nIHRoZSB2YWx1ZUNGLCBiZSBzdXJlIHRvIGluY2x1ZGUgIiBhcm91bmQgdmFsdWUgKi8KICAgICAgICAgICAgLypST0xMQkFDSyovCiAgICAgICAgICAgIC8qUmltb3ppb25lIGFsbGVnYXRvIHJhcHBvcnRvIGRpIGludGVydmVudG8gYXBwZW5hIGNyZWF0byovCiAgICAgICAgICAgIGRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCAiXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuY2F0ZWdvcnlSZWYnXS50b1N0cmluZygpICsgIlwiLlwiTmFtZVwiID0gXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkub2Jqcy5yYXBwSW50RkFBQyddLnRvU3RyaW5nKCkgKyAiXCIgQU5EICIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSArICIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSAiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyAiKSIpOyAvLyBTZWUgdGhlIGNvbXBsZXRlIGxpc3Qgb2YgcG9zc2libGUgSVFMIG9uIHRoZSBJbnNpZ2h0IFF1ZXJ5IExhbmd1YWdlIGRvY3VtZW50YXRpb24gcGFnZQogICAgICAgICAgICAvKiBJZiB0aGlzIGlzIGEgbWFuZGF0b3J5IGZpZWxkIHlvdSBzaG91bGQgYmUgYWJsZSB0byBkbyB0aGlzOiAqLwogICAgICAgICAgICAvL2xvZy5pbmZvKCJJbnNpZ2h0IG9iamVjdDogIiArIG9iamVjdHNbMF0pOwoKICAgICAgICAgICAgaWYob2JqZWN0c1swXSl7CiAgICAgICAgICAgICAgICAvKiBVUERBVEUgT0pCRUNUIERFTEVURUQgVkFMVUUgKi8KICAgICAgICAgICAgICAgIGRlZiBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihvYmplY3RzWzBdLmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkgIAogICAgICAgICAgICAgICAgZGVmIHZhbHVlID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpCgogICAgICAgICAgICAgICAgZGVmIHZhbHVlQmVhbiA9IG9iVHJpYWdlLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpCiAgICAgICAgICAgICAgICB2YWx1ZUJlYW4uc2V0VmFsdWUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2UuZ2V0T2JqZWN0VHlwZUF0dHJpYnV0ZUlkKCkpLCB0cnVlKQogICAgICAgICAgICAgICAgLypDbGVhbiBhY3R1YWwgdmFsdWUqLwogICAgICAgICAgICAgICAgdmFsdWUuY2xlYXIoKQogICAgICAgICAgICAgICAgdmFsdWUuYWRkKHZhbHVlQmVhbik7CiAgICAgICAgICAgICAgICBvYlRyaWFnZS5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKHZhbHVlKQoKICAgICAgICAgICAgICAgIC8vVXBkYXRlIE9KQkVDVCBhdHRyaWJ1dGUgdmFsdWUKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHsKICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiMS4gQ291bGQgbm90IHVwZGF0ZSBvYmplY3QgYXR0cmlidXRlIGR1ZSB0byB2YWxpZGF0aW9uIGV4Y2VwdGlvbjoiICsgdmllLmdldE1lc3NhZ2UoKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8qUm9sbGJhY2sgY29udGFiaWxpenphemlvbmUgaW50ZXJ2ZW50byovCiAgICAgICAgICAgIC8qQ2FuY2VsbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBPblNpdGVfUmF0ZV9SZXBvcnQgcmVnaXN0cmF0aSBuZWkgY2FtcGkgT1BBQV9MVU1QX1NVTV9SQVRFUywgT1BBQV9VTkFfVEFOVFVNX1JBVEVTLCBPUEFBX1RSQVZFTF9SQVRFUywgT1BBQV9MQUJPVVJfUkFURVMqLwogICAgICAgICAgICAvKkNpY2xhcmUgdHV0dGkgZ2xpIG9nZ2V0dGkgYXNzb2NpYXRpIGFsIGNhbXBvKi8KCiAgICAgICAgICAgIC8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSAiIGFyb3VuZCB2YWx1ZSAqLwogICAgICAgICAgICBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoT1BBQSwgIm9iamVjdFR5cGUgPSAiICsgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0J10udG9TdHJpbmcoKSArICIgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXk9IiArIGlzc3VlLmtleS50b1N0cmluZygpICsgIikgQU5EIFwiIiArIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSArICJcIiAhPSB0cnVlIik7IC8vIFNlZSB0aGUgY29tcGxldGUgbGlzdCBvZiBwb3NzaWJsZSBJUUwgb24gdGhlIEluc2lnaHQgUXVlcnkgTGFuZ3VhZ2UgZG9jdW1lbnRhdGlvbiBwYWdlCiAgICAgICAgICAgIC8qIElmIHRoaXMgaXMgYSBtYW5kYXRvcnkgZmllbGQgeW91IHNob3VsZCBiZSBhYmxlIHRvIGRvIHRoaXM6ICovCiAgICAgICAgICAgIC8vbG9nLmluZm8oIkluc2lnaHQgb2JqZWN0cyBkYSBjYW5jZWxsYXJlOiAiICsgb2JqZWN0cyk7CgogICAgICAgICAgICBmb3Iob2JqIGluIG9iamVjdHMpewogICAgICAgICAgICAgICAgLyogREVMRVRFIENPTk5FQ1RFRCBPQkpFQ1RTICovCiAgICAgICAgICAgICAgICBvYmplY3RGYWNhZGUuZGVsZXRlT2JqZWN0QmVhbihvYmouZ2V0SWQoKSk7ICAKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLypDYW5jZWxsYXJlIGdsaSBpbXBvcnRpIGZvcm5pdG9yZSwgY2xpZW50ZSBlIGkgdG90YWxpIHN1IHR1dHRpIGdsaSBvZ2dldHRpIENvbXBvbmVudCBpbiBPUEFBX1JFUExBQ0VEX01BVEVSSUFMUyovCiAgICAgICAgICAgIGRlZiByZXBNYXRlcmlhbHMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJlcGxhY2VkTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF0KICAgICAgICAgICAgZGVmIHJlcE1hdExpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykKCiAgICAgICAgICAgIGZvcihtYXQgaW4gcmVwTWF0TGlzdCl7CiAgICAgICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5kIGdldCBvYmplY3QKICAgICAgICAgICAgICAgIGRlZiBjb21wb25lbnQ9bWF0LnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIGRlZiBjb21wb25lbnRLZXkgPSBjb21wb25lbnQuc3Vic3RyaW5nKGNvbXBvbmVudC5pbmRleE9mKCcoJykrMSxjb21wb25lbnQuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgZGVmIGNvbXBvbmVudE9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihjb21wb25lbnRLZXkpCiAgICAgICAgICAgICAgICAvL3NldCAiQVBQTElFRF9UTyIsICJBQ0NPVU5USU5HX1NVUFBMSUVSX01BVEVSSUFMX1JFRiIsICJBQ0NPVU5USU5HX0NVU1RPTUVSX01BVEVSSUFMX1JFRiIsICJUT1RBTF9BTU9VTlRfU1VQUExJRVIiLCAiVE9UQUxfQU1PVU5UX0NVU1RPTUVSIiB0byBudWxsIGZvciB0aGF0IGNvbXBvbmVudAoKICAgICAgICAgICAgICAgIC8vQVBQTElFRF9UTwogICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hcHBsaWVkVG8nXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICAgICAgZGVmIG9iVHJpYWdlQXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkKICAgICAgICAgICAgICAgICAgICBkZWYgdmFsdWVBcHBsaWVkVG8gPSBvYlRyaWFnZUFwcGxpZWRUby5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkKICAgICAgICAgICAgICAgICAgICBsb2cud2FybiAidmFsdWVBcHBsaWVkVG86ICIgKyB2YWx1ZUFwcGxpZWRUbwogICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZUFwcGxpZWRUby5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVBcHBsaWVkVG8uY2xlYXIoKSAKCiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZUFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5kZWxldGVPYmplY3RBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlQXBwbGllZFRvLmlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSl7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmVycm9yKCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOiIgKyB2aWUuZ2V0TWVzc2FnZSgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvL0FDQ09VTlRJTkdfU1VQUExJRVJfTUFURVJJQUxfUkVGCiAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmFjY291bnRpbmdTdXBwTWF0ZXJpYWwnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICAgICAgZGVmIG9iVHJpYWdlTWF0UyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuYWNjb3VudGluZ1N1cHBNYXRlcmlhbCddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKQogICAgICAgICAgICAgICAgICAgIGRlZiB2YWx1ZU1hdFMgPSBvYlRyaWFnZU1hdFMuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpCiAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4gInZhbHVlTWF0UzogIiArIHZhbHVlTWF0UwogICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZU1hdFMuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlTWF0Uy5jbGVhcigpIAoKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iVHJpYWdlTWF0UyA9IG9iamVjdEZhY2FkZS5kZWxldGVPYmplY3RBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlTWF0Uy5pZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpeyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5lcnJvcigiQ291bGQgbm90IHVwZGF0ZSBvYmplY3QgYXR0cmlidXRlIGR1ZSB0byB2YWxpZGF0aW9uIGV4Y2VwdGlvbjoiICsgdmllLmdldE1lc3NhZ2UoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy9BQ0NPVU5USU5HX0NVU1RPTUVSX01BVEVSSUFMX1JFRgogICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hY2NvdW50aW5nQ3VzdE1hdGVyaWFsJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgICAgIGRlZiBvYlRyaWFnZU1hdEMgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmFjY291bnRpbmdDdXN0TWF0ZXJpYWwnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkKICAgICAgICAgICAgICAgICAgICBkZWYgdmFsdWVNYXRDID0gb2JUcmlhZ2VNYXRDLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQogICAgICAgICAgICAgICAgICAgIGxvZy53YXJuICJ2YWx1ZU1hdEM6ICIgKyB2YWx1ZU1hdEMKICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVNYXRDLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZU1hdEMuY2xlYXIoKSAKCiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZU1hdEMgPSBvYmplY3RGYWNhZGUuZGVsZXRlT2JqZWN0QXR0cmlidXRlQmVhbihvYlRyaWFnZU1hdEMuaWQpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKXsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZXJyb3IoIkNvdWxkIG5vdCB1cGRhdGUgb2JqZWN0IGF0dHJpYnV0ZSBkdWUgdG8gdmFsaWRhdGlvbiBleGNlcHRpb246IiArIHZpZS5nZXRNZXNzYWdlKCkpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvL1RPVEFMX0FNT1VOVF9TVVBQTElFUgogICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RTdXBwJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgICAgIGRlZiBvYlRyaWFnZVRvdFMgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdFN1cHAnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkKICAgICAgICAgICAgICAgICAgICBkZWYgdmFsdWVUb3RTID0gb2JUcmlhZ2VUb3RTLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQogICAgICAgICAgICAgICAgICAgIGxvZy53YXJuICJ2YWx1ZVRvdFM6ICIgKyB2YWx1ZVRvdFMKICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVUb3RTLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVRvdFMuY2xlYXIoKSAKCiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZVRvdFMgPSBvYmplY3RGYWNhZGUuZGVsZXRlT2JqZWN0QXR0cmlidXRlQmVhbihvYlRyaWFnZVRvdFMuaWQpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKXsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZXJyb3IoIkNvdWxkIG5vdCB1cGRhdGUgb2JqZWN0IGF0dHJpYnV0ZSBkdWUgdG8gdmFsaWRhdGlvbiBleGNlcHRpb246IiArIHZpZS5nZXRNZXNzYWdlKCkpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy9UT1RBTF9BTU9VTlRfQ1VTVE9NRVIKICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQudG90Q3VzdCddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgICAgICAgICBkZWYgb2JUcmlhZ2VUb3RDID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RDdXN0J10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpCiAgICAgICAgICAgICAgICAgICAgZGVmIHZhbHVlVG90QyA9IG9iVHJpYWdlVG90Qy5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkKICAgICAgICAgICAgICAgICAgICBsb2cud2FybiAidmFsdWVUb3RDOiAiICsgdmFsdWVUb3RDCiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlVG90Qy5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVUb3RDLmNsZWFyKCkgCgogICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2VUb3RDID0gb2JqZWN0RmFjYWRlLmRlbGV0ZU9iamVjdEF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2VUb3RDLmlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSl7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmVycm9yKCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOiIgKyB2aWUuZ2V0TWVzc2FnZSgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSAgICAKCiAgICAgICAgICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQKICAgICAgICAgICAgbG9nLmRlYnVnICIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6ICIgKyBvdXRwdXRNc2cKCiAgICAgICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpCiAgICAgICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpCiAgICAgICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgCiAgICAgICAgICAgIGxvZy5kZWJ1ZyAibWVzc2FnZTogIiArICBqc29uX29iamVjdC5tZXNzYWdlCiAgICAgICAgICAgIAogICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoIkUiKQogICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoIlNFTkRNQUlMIikKICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgIiAiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKSkKICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGpzb25fb2JqZWN0Lm1lc3NhZ2UpCiAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycykKCiAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpCiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3siRSI6IicgKyBvdXRwdXQudG9TdHJpbmcoKSArICcifScpCiAgICAgICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiRSIsIG91dHB1dC50b1N0cmluZygpKQogICAgICAgIH1lbHNlewogICAgICAgICAgICAvKkwnZW1haWwgw6ggc3RhdGEgaW52aWF0YSBjb3JyZXR0YW1lbnRlLCBhZ2dpb3JubyBpbCBjYW1wbyBPTlNJVEVfUkVQT1JUIGNvbiBsYSBkYXRhIGNvcnJlbnRlKi8KCiAgICAgICAgICAgIC8vIGxvZy53YXJuICJpc3N1ZSAiK2lzc3VlLmdldEtleSgpCiAgICAgICAgICAgIGRlZiBjZnYgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG9uc2l0ZVJlcG9ydERhdGUpCiAgICAgICAgICAgIGlmICghY2Z2KSB7CiAgICAgICAgICAgICAgZGVmIHQwICA9IG5ldyBqYXZhLnNxbC5UaW1lc3RhbXAoU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkpCiAgICAgICAgICAgICAgbG9nLndhcm4gIlN0YXJ0VGltZSA9PiAnIit0MC50b1N0cmluZygpKyInIgogICAgICAgICAgICAgIGRlZiBtdiA9IG5ldyBNb2RpZmllZFZhbHVlKG9uc2l0ZVJlcG9ydERhdGUsIHQwKQogICAgICAgICAgICAgIGRlZiBjaCA9IG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKQogICAgICAgICAgICAgIG9uc2l0ZVJlcG9ydERhdGUudXBkYXRlVmFsdWUobnVsbCwgaXNzdWUsIG12LCBjaCkgCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgbG9nLndhcm4gIlN0YXJ0VGltZSA9PSAnIitjZnYudG9TdHJpbmcoKSsiJyIKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQ==</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="disabled">true</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
          <arg name="FIELD_SCRIPT_FILE"></arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">df15a75e93b4c124a70f49e69dbcae9d48e2e8e4</arg>
          <arg name="FIELD_NOTES">YCFgT1A6IFJFU1QgQVBJOiBPUCBwZXIgY29uc3VudGl2YXppb25lIHRpY2tldA==</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5cbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5kZWYgYXV0b21hdGljYWxseUNsb3NlZCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUNsb3NlZCddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5ib29sZWFuIHVuYXRhbnR1bT10cnVlXG5cbi8qISFEYSByaW11b3ZlcmUgYXBwZW5hIHJpc29sdGkgaSBidWchISovXG4vL2lmKCFpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0LnBsYW5uZWRNYWludGVuYW5jZSddKSl7XG5cbiAgICAvKk9QLTEwMzg6IGxhIGNvbnRhYmlsaXp6YXppb25lIGRvdnJcdTAwZTAgcHJldmVkZXJlIGxlIHVuYXRhbnR1bSByYXRlcyBzb2xvIHNlIGlsIHRpY2tldCBub24gXHUwMGU4IHN0YXRvIGNoaXVzbyBpbiBhdXRvbWF0aWNvKi9cbiAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpIT1udWxsICYmIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIikpe1xuICAgICAgICB1bmF0YW50dW09ZmFsc2UgICAgXG4gICAgfVxuICAgIGxvZy5kZWJ1ZyBcIkNvbnN1bnRpdmF6aW9uZSB0aWNrZXQgXCIgKyBpc3N1ZS5rZXkgKyBcIiBjb24gdW5hdGFudHVtOiBcIiArIHVuYXRhbnR1bVxuXG4gICAgLyogUkVTVCBBUEkgcGVyIENvbnRhYmlsaXp6YXppb25lIEludGVydmVudG8gKi9cbiAgICByZXF1ZXN0TWV0aG9kID0gXCJHRVRcIjtcblxuICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9BQS90aWNrZXQvaXNzdWVLZXkvXCIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArIFwiL2Nsb3NlP3VtPVwiK3VuYXRhbnR1bS50b1N0cmluZygpXG4gICAgbG9nLmRlYnVnIFwiYmFzZVVybDogXCIgKyBiYXNlVVJMXG5cbiAgICAvKkRlZmluaXJlIHBhcmFtZXRybyBkaSBpbnB1dCB1bmF0YW50dW09dHJ1ZXxmYWxzZSBpbiBiYXNlIGFsIHZhbG9yZSBkZWxsYSB2YXJpYWJpbGUgYm9vbGVhbmEgdW5hdGFudHVtKi9cbiAgICBVUkwgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuXG4gICAgLy9Jc3N1ZUluZGV4aW5nU2VydmljZSBpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSlcbiAgICAvL2lzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgoaXNzdWVNYW5hZ2VyLmdldElzc3VlT2JqZWN0KGlzc3VlLmtleS50b1N0cmluZygpKSlcblxuICAgIC8vZGVmIHVuYVRhbnR1bVJhdGVzID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QQUFfVU5BVEFOVFVNX1JBVEVTXCIpWzBdXG4gICAgLy9sb2cud2FybiBcInVuYVRhbnR1bVJhdGVzOiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodW5hVGFudHVtUmF0ZXMpXG5cbiAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2U6IFwiICsgY29ubmVjdGlvblxuXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtVEtULUFDQ09VTlRJTkdcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgfWVsc2V7XG4gICAgICAgIC8qT1AtMTAzODogY29uc3VudGl2YXppb25lIHRlcm1pbmF0YSBjb3JyZXR0YW1lbnRlIC0gc2UgXHUwMGU4IHN0YXRhIGVzZWd1aXRhIGNvbiB1bmF0YW50dW09dHJ1ZSBzZXR0byBhIE5vIGlsIGNhbXBvIE9QQUFfQVVUT01BVElDQUxMWV9DTE9TRUQqL1xuICAgICAgICBpZih1bmF0YW50dW0pe1xuICAgICAgICAgICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXG4gICAgICAgICAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBpc3N1ZVxuXG4gICAgICAgICAgICBkZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcbiAgICAgICAgICAgIGRlZiBjZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09IFwiTm9cIiB9XG4gICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q2xvc2VkLnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuXG4gICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7XG4gICAgICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGlzc3VlKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIHByaW5jaXBhbGUgJHtpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpfVwiXG4gICAgICAgIH1cbiAgICB9XG4vL30iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
          <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlCmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2UKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXIKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsCgpQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpCkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpCnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7Cglwcm9wZXJ0aWVzLmxvYWQoaXQpCn0KQ2F0ZWdvcnkgbG9nID0gQ2F0ZWdvcnkuZ2V0SW5zdGFuY2UoImNvbS5vbnJlc29sdmUuamlyYS5ncm9vdnkuUG9zdEZ1bmN0aW9uIikKbG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpCgpJc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7CkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTsKCklzc3VlSW5kZXhpbmdTZXJ2aWNlIAlpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSkKZGVmIGF1dG9tYXRpY2FsbHlDbG9zZWQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlDbG9zZWQnXS50b1N0cmluZygpKVswXQoKZGVmIHJlcXVlc3RNZXRob2QKZGVmIGJhc2VVUkwKCmludCBPUEFBID0gcHJvcGVydGllc1snaXNjaGVtYS5hYS5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKCkKaW50IERCTyA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuZGJvLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKQpib29sZWFuIHVuYXRhbnR1bT10cnVlCgovKk9QLTEwMzg6IGxhIGNvbnRhYmlsaXp6YXppb25lIGRvdnLDoCBwcmV2ZWRlcmUgbGUgdW5hdGFudHVtIHJhdGVzIHNvbG8gc2UgaWwgdGlja2V0IG5vbiDDqCBzdGF0byBjaGl1c28gaW4gYXV0b21hdGljbyovCmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkhPW51bGwgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKS50b1N0cmluZygpLmVxdWFscygiWWVzIikpewoJdW5hdGFudHVtPWZhbHNlICAgIAp9CmxvZy5kZWJ1ZyAiQ29uc3VudGl2YXppb25lIHRpY2tldCAiICsgaXNzdWUua2V5ICsgIiBjb24gdW5hdGFudHVtOiAiICsgdW5hdGFudHVtCgovKiBSRVNUIEFQSSBwZXIgQ29udGFiaWxpenphemlvbmUgSW50ZXJ2ZW50byAqLwpyZXF1ZXN0TWV0aG9kID0gIkdFVCI7CgpiYXNlVVJMID0gImh0dHA6Ly8iICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyAiL29wL3Jlc3QvQUEvdGlja2V0L2lzc3VlS2V5LyIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArICIvY2xvc2U/dW09Iit1bmF0YW50dW0udG9TdHJpbmcoKQpsb2cuZGVidWcgImJhc2VVcmw6ICIgKyBiYXNlVVJMCgovKkRlZmluaXJlIHBhcmFtZXRybyBkaSBpbnB1dCB1bmF0YW50dW09dHJ1ZXxmYWxzZSBpbiBiYXNlIGFsIHZhbG9yZSBkZWxsYSB2YXJpYWJpbGUgYm9vbGVhbmEgdW5hdGFudHVtKi8KVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTCkKSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpOwpjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eSgiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL2pzb24iKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoIkFjY2VwdCIsICIqLyoiKTsKY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTsKY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpOwpjb25uZWN0aW9uLmNvbm5lY3QoKTsKbG9nLmRlYnVnICJSZXNwb25zZUNvZGU6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkKbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKCi8vSXNzdWVJbmRleGluZ1NlcnZpY2UgaXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpCi8vaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVPYmplY3QoaXNzdWUua2V5LnRvU3RyaW5nKCkpKQoKLy9kZWYgdW5hVGFudHVtUmF0ZXMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKCJPUEFBX1VOQVRBTlRVTV9SQVRFUyIpWzBdCi8vbG9nLndhcm4gInVuYVRhbnR1bVJhdGVzOiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcykKCmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCmRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKQpkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpCgppZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoIjIwMCIpKXsKICAgIGxvZy5kZWJ1ZyAidXJsOiAiICsgdXJsCiAgICBsb2cuZGVidWcgIlJlc3BvbnNlQ29kZToiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKQogICAgbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKICAgIGxvZy5kZWJ1ZyAiUmVzcG9uc2U6ICIgKyBjb25uZWN0aW9uCgogICAgLypST0xMQkFDSyovCiAgICAvKlJpbW96aW9uZSBhbGxlZ2F0byByYXBwb3J0byBkaSBpbnRlcnZlbnRvIGFwcGVuYSBjcmVhdG8qLwogICAgLyogR2V0IEluc2lnaHQgSVFMIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqLwogICAgQ2xhc3MgaXFsRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGUiKTsgCiAgICBkZWYgaXFsRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKGlxbEZhY2FkZUNsYXNzKTsKCiAgICAvKiBHZXQgSW5zaWdodCBPYmplY3QgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovCiAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZSIpOwogICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7CgogICAgLyogR2V0IEluc2lnaHQgT2JqZWN0IFR5cGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovCiAgICBDbGFzcyBvYmplY3RUeXBlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlIik7CiAgICBkZWYgb2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpOwoKICAgIC8qIEdldCBJbnNpZ2h0IE9iamVjdCBBdHRyaWJ1dGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovCiAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CiAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpOwoKICAgIENsYXNzIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkiKTsKICAgIGRlZiBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzKTsKCiAgICAvKiBTcGVjaWZ5IHRoZSBzY2hlbWEgaWQgYXMgd2VsbCBhcyB0aGUgSVFMIHRoYXQgd2lsbCBmZXRjaCBvYmplY3RzLiBJbiB0aGlzIGNhc2UgYWxsIG9iamVjdHMgd2l0aCBOYW1lIG1hdGNoaW5nIHRoZSB2YWx1ZUNGLCBiZSBzdXJlIHRvIGluY2x1ZGUgIiBhcm91bmQgdmFsdWUgKi8KICAgIGRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCAiXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuY2F0ZWdvcnlSZWYnXS50b1N0cmluZygpICsgIlwiLlwiIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm5hbWUnXS50b1N0cmluZygpICsgIlwiID0gXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkub2Jqcy5yYXBwSW50RkFBQyddLnRvU3RyaW5nKCkgKyAiXCIgQU5EICIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSArICIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSAiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyAiKSIpOyAvLyBTZWUgdGhlIGNvbXBsZXRlIGxpc3Qgb2YgcG9zc2libGUgSVFMIG9uIHRoZSBJbnNpZ2h0IFF1ZXJ5IExhbmd1YWdlIGRvY3VtZW50YXRpb24gcGFnZQogICAgLyogSWYgdGhpcyBpcyBhIG1hbmRhdG9yeSBmaWVsZCB5b3Ugc2hvdWxkIGJlIGFibGUgdG8gZG8gdGhpczogKi8KICAgIGxvZy5pbmZvKCJJbnNpZ2h0IG9iamVjdDogIiArIG9iamVjdHNbMF0pOwoKICAgIGlmKG9iamVjdHNbMF0pewogICAgICAgIC8qIFVQREFURSBPSkJFQ1QgREVMRVRFRCBWQUxVRSAqLwogICAgICAgIGRlZiBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihvYmplY3RzWzBdLmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkgIAogICAgICAgIGRlZiB2YWx1ZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQoKICAgICAgICBkZWYgdmFsdWVCZWFuID0gb2JUcmlhZ2UuY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCkKICAgICAgICB2YWx1ZUJlYW4uc2V0VmFsdWUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2UuZ2V0T2JqZWN0VHlwZUF0dHJpYnV0ZUlkKCkpLCB0cnVlKQogICAgICAgIC8qQ2xlYW4gYWN0dWFsIHZhbHVlKi8KICAgICAgICB2YWx1ZS5jbGVhcigpCiAgICAgICAgdmFsdWUuYWRkKHZhbHVlQmVhbik7CiAgICAgICAgb2JUcmlhZ2Uuc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyh2YWx1ZSkKCiAgICAgICAgLy9VcGRhdGUgT0pCRUNUIGF0dHJpYnV0ZSB2YWx1ZQogICAgICAgIHRyeSB7CiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLnN0b3JlT2JqZWN0QXR0cmlidXRlQmVhbihvYlRyaWFnZSk7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSkgewogICAgICAgICAgICBsb2cud2FybigiQ291bGQgbm90IHVwZGF0ZSBvYmplY3QgYXR0cmlidXRlIGR1ZSB0byB2YWxpZGF0aW9uIGV4Y2VwdGlvbjoiICsgdmllLmdldE1lc3NhZ2UoKSk7CiAgICAgICAgfQogICAgfQoKICAgIGVMaXN0RXJyb3JzLmFkZCgiRSIpCiAgICBlTGlzdEVycm9ycy5hZGQoIk9QLVRLVC1BQ0NPVU5USU5HIikKICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArICIgIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkpCiAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKQogICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKQoKICAgIG91dHB1dC5hZGQoZUxpc3QpCiAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IkUiOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQogICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJFIiwgb3V0cHV0LnRvU3RyaW5nKCkpCn1lbHNlewogICAgLypPUC0xMDM4OiBjb25zdW50aXZhemlvbmUgdGVybWluYXRhIGNvcnJldHRhbWVudGUgLSBzZSDDqCBzdGF0YSBlc2VndWl0YSBjb24gdW5hdGFudHVtPXRydWUgc2V0dG8gYSBObyBpbCBjYW1wbyBPUEFBX0FVVE9NQVRJQ0FMTFlfQ0xPU0VEKi8KICAgIGlmKHVuYXRhbnR1bSl7CiAgICAgICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpCiAgICAgICAgZGVmIG1pID0gKE11dGFibGVJc3N1ZSkgaXNzdWUKCiAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSkKICAgICAgICBsb2cuZGVidWcgImZpZWxkQ29uZmlnOiAiICsgZmllbGRDb25maWcKICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiTm8iIH0KICAgICAgICBhdXRvbWF0aWNhbGx5Q2xvc2VkLnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoKICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7CiAgICAgICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChpc3N1ZSkKICAgICAgICBsb2cuZGVidWcgIlVwZGF0ZWQgY3VzdG9tZmllbGQgLSBpc3N1ZSBwcmluY2lwYWxlICR7aXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKX0iCiAgICB9Cn0K</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
          <arg name="FIELD_SCRIPT_FILE"></arg>
        </validator>
      </validators>
      <results>
        <unconditional-result old-status="null" status="null" step="6">
          <post-functions>
            <function type="class">
              <arg name="field.copyFieldSource1"></arg>
              <arg name="textValue">6</arg>
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="maxAllowed-integerValue">50</arg>
              <arg name="workflowName-textValue">OPAA: PM Task Workflow</arg>
              <arg name="performTransitionAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="scopeType">PARENT</arg>
              <arg name="destination-scopeTarget">SUB_TASK</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitieslinkedtransition-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="integerValue">141</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">ch.beecom.jira.jsu.workflow.function.linkedtransition.LinkedTransitionFunction</arg>
              <arg name="scopeSource-jql"></arg>
              <arg name="status"></arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">81aa9673-d0a1-4cdb-9909-19371f018388</arg>
              <arg name="FIELD_NOTES">YCFgUE0gVGlja2V0IC0gVXBkYXRlIEhBUkRXQVJFLk1BSU5URU5BTkNFX05FWFRfVElDS0VUX0RBVEUgKyBIQVJEV0FSRS5NQUlOVEVOQU5DRV9MQVNUX1RJQ0tFVF9EQVRF</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS51dGlsLkRlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5ldmVudC50eXBlLkV2ZW50RGlzcGF0Y2hPcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2U7XG5pbXBvcnQgb3JnLm9mYml6LmNvcmUuZW50aXR5LkRlbGVnYXRvckludGVyZmFjZVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS51dGlsLkJ1aWxkVXRpbHNJbmZvXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmlzc3VldHlwZS5Jc3N1ZVR5cGVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpXG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTIzNjkyXCIpXG5cbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTsgIFxuQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XG5kZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xuZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XG5cbmRlZiBhc3NldCA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0FTU0VUXCIpWzBdXG5kZWYgZXhlY3V0aW9uRGF0ZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0VYRUNVVElPTl9EQVRFXCIpWzBdXG5cbmxvZy5kZWJ1ZyBcIkRhdGEgZGkgZXNlY3V6aW9uZSBpbnRlcnZlbnRvOiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZXhlY3V0aW9uRGF0ZSlcblxuaWYoaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZSA9PSBcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0XCIpe1xuICAgIGRlZiBzdWJUYXNrcyA9IGlzc3VlLmdldFN1YlRhc2tPYmplY3RzKClcbiAgICBkZWYgaXRBc3NldCBcbiAgICBEYXRlIG5ld0RhdGVcblxuICAgIHN1YlRhc2tzLmVhY2gge1xuICAgICAgICBpZiAoaXQuZ2V0SXNzdWVUeXBlKCkubmFtZSA9PSBcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1wiICYmIGl0LmdldFJlc29sdXRpb24oKSl7XG4gICAgICAgICAgICBsb2cuZGVidWcgXCJhc3NldDogXCIgKyBpdC5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0KVxuICAgICAgICAgICAgaXRBc3NldCA9IGl0LmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXQpWzBdLnRvU3RyaW5nKClcbiAgICAgICAgICAgIGl0QXNzZXRLZXkgPSBpdEFzc2V0LnN1YnN0cmluZyhpdEFzc2V0Lmxhc3RJbmRleE9mKCcoJykrMSwgaXRBc3NldC5sYXN0SW5kZXhPZignKScpKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiaXRBc3NldEtleTogXCIgKyBpdEFzc2V0S2V5XG5cbiAgICAgICAgICAgIGRlZiBvYlRyaWFnZVxuICAgICAgICAgICAgZGVmIGh3UE1udW1iZXJcbiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oaXRBc3NldEtleSkuZ2V0SWQoKSwgXCJQTEFOTkVEX01BSU5URU5BTkNFX1ZJU0lUU19OVU1cIikpe1xuICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihpdEFzc2V0S2V5KS5nZXRJZCgpLCBcIlBMQU5ORURfTUFJTlRFTkFOQ0VfVklTSVRTX05VTVwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICBod1BNbnVtYmVyID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImh3UE1udW1iZXI6IFwiICsgaHdQTW51bWJlclxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL0NoZWNrIEhBUkRXQVJFLlBMQU5ORURfTUFJTlRFTkFOQ0VfVklTSVRTX05VTVxuICAgICAgICAgICAgaWYoaHdQTW51bWJlcil7XG4gICAgICAgICAgICAgICAgbmV3RGF0ZSA9IChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGV4ZWN1dGlvbkRhdGUpICsgTWF0aC5yb3VuZCgzNjUvaHdQTW51bWJlci50b0ludGVnZXIoKSkudG9JbnRlZ2VyKCkpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwibmV3IGRhdGU6IFwiICsgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZXhlY3V0aW9uRGF0ZSkgKyBNYXRoLnJvdW5kKDM2NS9od1BNbnVtYmVyLnRvSW50ZWdlcigpKS50b0ludGVnZXIoKSlcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIC8vQ2hlY2sgSEFSRFdBUkUuQ1VTVE9NRVJfQ09OVFJBQ1RfUkVGLkNPTlRSQUNUX1RZUEVcbiAgICAgICAgICAgICAgICBkZWYgY29udHJhY3QsIGNvbnRyYWN0S2V5LCBjb250cmFjdE9iamVjdCwgY29udHJhY3RUeXBlLCBmcmVxdWVuY3ksIGZyZXFEYXlzLCBwYWNrLCBwbUluY2x1ZGVkXG4gICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihpdEFzc2V0S2V5KS5nZXRJZCgpLCBcIkNVU1RPTUVSX0NPTlRSQUNUX1JFRlwiKSl7XG4gICAgICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihpdEFzc2V0S2V5KS5nZXRJZCgpLCBcIkNVU1RPTUVSX0NPTlRSQUNUX1JFRlwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICAgICAgY29udHJhY3QgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKVxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJjb250cmFjdDogXCIgKyBjb250cmFjdFxuICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdCwgXCJDT05UUkFDVF9UWVBFXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgICAgICAgICBjb250cmFjdFR5cGUgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKVxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJjb250cmFjdFR5cGU6IFwiICsgY29udHJhY3RUeXBlXG5cbiAgICAgICAgICAgICAgICAgICAgaWYoY29udHJhY3RUeXBlLmVxdWFscyhcIk1BSU5URU5BTkNFIFRJQ0tFVCBDT05UUkFDVFwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdCwgXCJQTV9GUkVRVUVOQ1lfUkVGXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgZnJlcXVlbmN5ID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImZyZXF1ZW5jeTogXCIgKyBmcmVxdWVuY3lcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGZyZXF1ZW5jeSwgXCJEQVlTXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgZnJlcURheXMgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiZnJlcURheXM6IFwiICsgZnJlcURheXNcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0RhdGUgPSAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShleGVjdXRpb25EYXRlKSArIGZyZXFEYXlzLnRvSW50ZWdlcigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwibmV3IGRhdGU6IFwiICsgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZXhlY3V0aW9uRGF0ZSkgKyBmcmVxRGF5cy50b0ludGVnZXIoKSlcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihjb250cmFjdFR5cGUuZXF1YWxzKFwiTUFJTlRFTkFOQ0UgRkVFIENPTlRSQUNUXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdCwgXCJQQUNLQUdFX1JFRlwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWNrID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJwYWNrOiBcIiArIHBhY2tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihmcmVxdWVuY3ksIFwiUE1fSU5DTFVERURcIikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG1JbmNsdWRlZCA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwicG1JbmNsdWRlZDogXCIgKyBwbUluY2x1ZGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3RGF0ZSA9IChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGV4ZWN1dGlvbkRhdGUpICsgcG1JbmNsdWRlZC50b0ludGVnZXIoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJuZXcgZGF0ZTogXCIgKyAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShleGVjdXRpb25EYXRlKSArIHBtSW5jbHVkZWQudG9JbnRlZ2VyKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRlZiBhc3NldE9iaiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihpdEFzc2V0S2V5KSAgICAgIFxuICAgICAgICAgICAgbG9nLmRlYnVnIFwibmV3RGF0ZTogXCIgKyBuZXdEYXRlXG4gICAgICAgICAgICBkZWYgb2JqID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGFzc2V0T2JqLmdldElkKCkpO1xuICAgICAgICAgICAgLyogQ3JlYXRlIGEgbmV3IHVuc2F2ZWQgb2JqZWN0IGJlYW4gLSBNQUlOVEVOQU5DRSBORVhUIFRJQ0tFVCBEQVRFKi9cbiAgICAgICAgICAgIGRlZiBhdHRyaWJUeXBlID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oMzc3Nyk7IFxuICAgICAgICAgICAgZGVmIG5ld0F0dHJpYiA9IG9iai5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKGF0dHJpYlR5cGUpO1xuICAgICAgICAgICAgZGVmIG5ld0F0dHJpYlZhbHVlID0gbmV3QXR0cmliLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpO1xuICAgICAgICAgICAgZGVmIG9iamVjdEF0dHJpYnV0ZUJlYW5zID0gbmV3IEFycmF5TGlzdCgpO1xuXG4gICAgICAgICAgICBuZXdBdHRyaWJWYWx1ZS5zZXREYXRlVmFsdWUobmV3RGF0ZSlcbiAgICAgICAgICAgIGRlZiBhdHRyaWJWYWx1ZXMgPSBuZXdBdHRyaWIuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpO1xuICAgICAgICAgICAgYXR0cmliVmFsdWVzLmFkZChuZXdBdHRyaWJWYWx1ZSk7XG4gICAgICAgICAgICBuZXdBdHRyaWIuc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyhhdHRyaWJWYWx1ZXMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvKiBDcmVhdGUgYSBuZXcgdW5zYXZlZCBvYmplY3QgYmVhbiAtIE1BSU5URU5BTkNFIExBU1QgVElDS0VUIERBVEUgKi9cbiAgICAgICAgICAgIGF0dHJpYlR5cGUgPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbigzNzc2KTsgXG4gICAgICAgICAgICBuZXdBdHRyaWIgPSBvYmouY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihhdHRyaWJUeXBlKTtcbiAgICAgICAgICAgIG5ld0F0dHJpYlZhbHVlID0gbmV3QXR0cmliLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpO1xuICAgICAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMgPSBuZXcgQXJyYXlMaXN0KCk7XG5cbiAgICAgICAgICAgIG5ld0F0dHJpYlZhbHVlLnNldERhdGVWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGV4ZWN1dGlvbkRhdGUpKVxuICAgICAgICAgICAgYXR0cmliVmFsdWVzID0gbmV3QXR0cmliLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTtcbiAgICAgICAgICAgIGF0dHJpYlZhbHVlcy5hZGQobmV3QXR0cmliVmFsdWUpO1xuICAgICAgICAgICAgbmV3QXR0cmliLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoYXR0cmliVmFsdWVzKTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBuZXdBdHRyaWIgPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG5ld0F0dHJpYik7XG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XG4gICAgICAgICAgICAgICAgbG9nLndhcm4oXCJVbmFibGUgdG8gc2F2ZSBjaGFuZ2VzLiBFeGl0aW5nLlwiKTtcbiAgICAgICAgICAgICAgICBsb2cud2Fybih2aWUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
            </function>
            <function type="class">
              <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIGxpbmtlZFRpY2tldHMgJiBGYXN0LVRyYW5zYWN0IHRoZW0=</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlCmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZQppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQpDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5XQVJOKQoKbG9nLndhcm4gIiR7aXNzdWUua2V5fSBUcmFuc2F6aW9uZSBDb21wbGV0ZSAtIFBvc3QgRnVuY3Rpb24gY2hlY2sgbGlua2VkSXNzdWVzIgoKSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpOwpDdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7CmRlZiBhdXRvbWF0aWNhbGx5Q2xvc2VkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q2xvc2VkJ10udG9TdHJpbmcoKSlbMF0KSXNzdWVJbmRleGluZ1NlcnZpY2UgCWlzc3VlSW5kZXhpbmdTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KElzc3VlSW5kZXhpbmdTZXJ2aWNlKQoKSXNzdWUgaXNzdWUgPSBpc3N1ZQovL1BlciB0ZXN0IGRhIGNvbnNvbGUKLy9pc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZSgiT1BVVC0yNzYiKQoKU1RBUlRfUFJPR1JFU1M9cHJvcGVydGllc1snd2YudHIuc3RhcnRQcm9ncmVzcyddCkNPTVBMRVRFPXByb3BlcnRpZXNbJ3dmLnRyLmNvbXBsZXRlJ10KCmRlZiB1c2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpCmRlZiBpc3N1ZVNlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZVNlcnZpY2UoKQoKbG9nLndhcm4gImlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCk6ICIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpCgppZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpPT1udWxsIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkudG9TdHJpbmcoKS5lcXVhbHMoIk5vIikpewogICAgLypPUC0xMDM4OiBzZSBobyBlc2VndWl0byBsYSBDb21wbGV0ZSBzdWwgdGlja2V0ICJwYWRyZSIgdmVyaWZpY28gZSBzcG9zdG8gaW4gYXV0b21hdGljbyBnbGkgZXZlbnR1YWxpIHRpY2tldCBjb2xsZWdhdGkqLwogICAgCiAgICBsb2cud2FybiAidmVyaWZpY28gZSBzcG9zdG8gaW4gYXV0b21hdGljbyBnbGkgZXZlbnR1YWxpIHRpY2tldCBjb2xsZWdhdGkiCiAgICAKICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKQogICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykgewogICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7CgogICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgLypFc2VndWlyZSB0cmFuc2F6aW9uZSBkaSBzdGF0byBjb24gT1BBQV9BVVRPTUFUSUNBTExZX0NMT1NFRD1ZZXMgZGVsbGEgc291cmNlSXNzdWUqLwogICAgICAgICAgICBkZWYgbGlua2VkSXNzdWUgPSBpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkKICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlU3RhdHVzID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzKCkKICAgICAgICAgICAgbG9nLndhcm4gIklzc3VlIGNvbiByZWxhdGVzSW5Jc3N1ZUxpbmsgJHtsaW5rZWRJc3N1ZX0gY29uIHN0YXRvICR7bGlua2VkSXNzdWVTdGF0dXN9IgogICAgICAgICAgICBkZWYgdHJhbnNpdGlvbklkCiAgICAgICAgICAgIGlmKGxpbmtlZElzc3VlU3RhdHVzLm5hbWUgPT0gcHJvcGVydGllc1snd2YuY29uZmlybWVkQW5kUGxhbm5lZCddLnRvU3RyaW5nKCkpewogICAgICAgICAgICAgICAgdHJhbnNpdGlvbklkPVNUQVJUX1BST0dSRVNTCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYobGlua2VkSXNzdWVTdGF0dXMubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5pblByb2dyZXNzJ10udG9TdHJpbmcoKSl7CiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9Q09NUExFVEUKICAgICAgICAgICAgfQogICAgICAgICAgICBpZih0cmFuc2l0aW9uSWQ9PVNUQVJUX1BST0dSRVNTKXsKICAgICAgICAgICAgICAgIC8vIFByZXBhcmUgb3VyIGlucHV0IGZvciB0aGUgdHJhbnNpdGlvbgogICAgICAgICAgICAgICAgZGVmIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKCkKICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGggewogICAgICAgICAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayhmYWxzZSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSkKICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgIC8vaXNzdWVJbnB1dFBhcmFtZXRlcnMuYWRkQ3VzdG9tRmllbGRWYWx1ZShmaWVsZENvbmZpZy5nZXRJZCgpLCAiWWVzIikgCiAgICAgICAgICAgICAgICAvL2xvZy53YXJuICJpc3N1ZUlucHV0UGFyYW1ldGVyczogIiArIGlzc3VlSW5wdXRQYXJhbWV0ZXJzCiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlCgogICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgIGxvZy53YXJuICJmaWVsZENvbmZpZzogIiArIGZpZWxkQ29uZmlnCiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q2xvc2VkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoKICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTsKICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICBsb2cud2FybiAiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGEiCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vZGVmIHZhbGlkYXRpb25SZXN1bHQgPSBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKQogICAgICAgICAgICAgICAgaWYgKGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb24KICAgICAgICAgICAgICAgICAgICBkZWYgaXNzdWVSZXN1bHQgPSBpc3N1ZVNlcnZpY2UudHJhbnNpdGlvbih1c2VyLCBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKSkKICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIkZhaWxlZCB0byB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSIpCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJUcmFuc2F6aW9uZSBmYXR0YSA5NiAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c30iKQogICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9Q09NUExFVEUKICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKCkKICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2soZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy9maWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpCiAgICAgICAgICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksICJZZXMiKSAKICAgICAgICAgICAgICAgICAgICAgICAgLy92YWxpZGF0aW9uUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykKICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKICAgICAgICAgICAgICAgICAgICAgICAgbWkgPSAoTXV0YWJsZUlzc3VlKSBsaW5rZWRJc3N1ZQoKICAgICAgICAgICAgICAgICAgICAgICAgLy9maWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICAgICAgICAgIC8vbG9nLndhcm4gImZpZWxkQ29uZmlnOiAiICsgZmllbGRDb25maWcKICAgICAgICAgICAgICAgICAgICAgICAgLy9jZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy9hdXRvbWF0aWNhbGx5Q2xvc2VkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoKICAgICAgICAgICAgICAgICAgICAgICAgLy9Db21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgLy9sb2cud2FybiAiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGEiCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJUcmFuc2F6aW9uZSBmYXR0YSAxMjQgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSwgJHtsaW5rZWRJc3N1ZS5zdGF0dXN9IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJDb3VsZCBub3QgdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmVycm9yQ29sbGVjdGlvbn0iKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfWVsc2UgaWYgKHRyYW5zaXRpb25JZD09Q09NUExFVEUpewogICAgICAgICAgICAgICAgZGVmIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKCkKICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGggewogICAgICAgICAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayhmYWxzZSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSkKICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgIC8vaXNzdWVJbnB1dFBhcmFtZXRlcnMuYWRkQ3VzdG9tRmllbGRWYWx1ZShmaWVsZENvbmZpZy5nZXRJZCgpLCAiWWVzIikgCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKQogICAgICAgICAgICAgICAgZGVmIG1pID0gKE11dGFibGVJc3N1ZSkgbGlua2VkSXNzdWUKCiAgICAgICAgICAgICAgICBkZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGxpbmtlZElzc3VlKQogICAgICAgICAgICAgICAgbG9nLndhcm4gImZpZWxkQ29uZmlnOiAiICsgZmllbGRDb25maWcKICAgICAgICAgICAgICAgIGRlZiBjZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgIGF1dG9tYXRpY2FsbHlDbG9zZWQudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpCgogICAgICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpOwogICAgICAgICAgICAgICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgIGxvZy53YXJuICJVcGRhdGVkIGN1c3RvbWZpZWxkIC0gaXNzdWUgbGlua2F0YSIKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy9kZWYgdmFsaWRhdGlvblJlc3VsdCA9IGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpCiAgICAgICAgICAgICAgICBpZiAoaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuaXNWYWxpZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgdHJhbnNpdGlvbgogICAgICAgICAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpKQogICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIlRyYW5zYXppb25lIGZhdHRhIDE2MSAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c30iKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIkNvdWxkIG5vdCB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuZXJyb3JDb2xsZWN0aW9ufSIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICBMaXN0PElzc3VlTGluaz4gYWxsT3V0SXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldE91dHdhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKQogICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsT3V0SXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHsKICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpOwoKICAgICAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgIGxvZy53YXJuICJJc3N1ZSBjb24gcmVsYXRlc091dElzc3VlTGluayIKICAgICAgICAgICAgLypFc2VndWlyZSB0cmFuc2F6aW9uZSBkaSBzdGF0byBjb24gT1BBQV9BVVRPTUFUSUNBTExZX0NMT1NFRD1ZZXMgZGVsbGEgZGVzdGluYXRpb25Jc3N1ZSovCiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZSA9IGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpCiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZVN0YXR1cyA9IGxpbmtlZElzc3VlLmdldFN0YXR1cygpCiAgICAgICAgICAgIGRlZiB0cmFuc2l0aW9uSWQKICAgICAgICAgICAgbG9nLndhcm4gImxpbmtlZElzc3VlOiAiICsgbGlua2VkSXNzdWUKICAgICAgICAgICAgbG9nLndhcm4gImxpbmtlZElzc3VlU3RhdHVzLm5hbWU6ICIgKyBsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lCiAgICAgICAgICAgIGlmKGxpbmtlZElzc3VlU3RhdHVzLm5hbWUgPT0gIkNvbmZpcm1lZCBhbmQgUGxhbm5lZCIpewogICAgICAgICAgICAgICAgdHJhbnNpdGlvbklkPVNUQVJUX1BST0dSRVNTCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYobGlua2VkSXNzdWVTdGF0dXMubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5pblByb2dyZXNzJ10udG9TdHJpbmcoKSl7CiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9Q09NUExFVEUKICAgICAgICAgICAgfQogICAgICAgICAgICBsb2cud2FybiAidHJhbnNpdGlvbklkOiAiICsgdHJhbnNpdGlvbklkCiAgICAgICAgICAgIGlmKHRyYW5zaXRpb25JZD09U1RBUlRfUFJPR1JFU1MpewogICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKQogICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7CiAgICAgICAgICAgICAgICAgICAgc2V0U2tpcFNjcmVlbkNoZWNrKGZhbHNlKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy9kZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKQogICAgICAgICAgICAgICAgLy9Db21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gIlllcyIgfQogICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksICJZZXMiKSAKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpCiAgICAgICAgICAgICAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBsaW5rZWRJc3N1ZQoKICAgICAgICAgICAgICAgIGRlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICBsb2cud2FybiAiZmllbGRDb25maWc6ICIgKyBmaWVsZENvbmZpZwogICAgICAgICAgICAgICAgZGVmIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gIlllcyIgfQogICAgICAgICAgICAgICAgYXV0b21hdGljYWxseUNsb3NlZC51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSkKCiAgICAgICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7CiAgICAgICAgICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGxpbmtlZElzc3VlKQogICAgICAgICAgICAgICAgbG9nLndhcm4gIlVwZGF0ZWQgY3VzdG9tZmllbGQgLSBpc3N1ZSBsaW5rYXRhIgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvL2RlZiB2YWxpZGF0aW9uUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykKICAgICAgICAgICAgICAgIGxvZy53YXJuICJpc3N1ZUlucHV0UGFyYW1ldGVyczogIiArIGlzc3VlSW5wdXRQYXJhbWV0ZXJzCiAgICAgICAgICAgICAgICBpZiAoaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuaXNWYWxpZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgdHJhbnNpdGlvbgogICAgICAgICAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpKQogICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIlRyYW5zYXppb25lIGZhdHRhIDIxOCAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c30iKQogICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9Q09NUExFVEUKICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKCkKICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2soZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy9maWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpCiAgICAgICAgICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksICJZZXMiKSAKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpCiAgICAgICAgICAgICAgICAgICAgICAgIG1pID0gKE11dGFibGVJc3N1ZSkgbGlua2VkSXNzdWUKCiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4gImZpZWxkQ29uZmlnOiAiICsgZmllbGRDb25maWcKICAgICAgICAgICAgICAgICAgICAgICAgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9tYXRpY2FsbHlDbG9zZWQudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpCgogICAgICAgICAgICAgICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuICJVcGRhdGVkIGN1c3RvbWZpZWxkIC0gaXNzdWUgbGlua2F0YSIKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vdmFsaWRhdGlvblJlc3VsdCA9IGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJUcmFuc2F6aW9uZSBmYXR0YSAyNDggJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSwgJHtsaW5rZWRJc3N1ZS5zdGF0dXN9IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJDb3VsZCBub3QgdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmVycm9yQ29sbGVjdGlvbn0iKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICBsb2cud2FybiAiaXNzdWUgZGEgY29tcGxldGFyZSIKICAgICAgICAgICAgICAgIGRlZiBpc3N1ZUlucHV0UGFyYW1ldGVycyA9IGlzc3VlU2VydmljZS5uZXdJc3N1ZUlucHV0UGFyYW1ldGVycygpCiAgICAgICAgICAgICAgICBpc3N1ZUlucHV0UGFyYW1ldGVycy53aXRoIHsKICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2soZmFsc2UpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvL2RlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpCiAgICAgICAgICAgICAgICAvL0NvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICAvL2lzc3VlSW5wdXRQYXJhbWV0ZXJzLmFkZEN1c3RvbUZpZWxkVmFsdWUoZmllbGRDb25maWcuZ2V0SWQoKSwgIlllcyIpIAogICAgICAgICAgICAgICAgLy9sb2cud2FybiAidmFsaWRhdGVSZXN1bHQiCiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlCgogICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgIGxvZy53YXJuICJmaWVsZENvbmZpZzogIiArIGZpZWxkQ29uZmlnCiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q2xvc2VkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoKICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTsKICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICBsb2cud2FybiAiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGEiCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgICAgICAgICAgZGVmIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpCiAgICAgICAgICAgICAgICAgICAgaWYgKCEgaXNzdWVSZXN1bHQuaXNWYWxpZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJGYWlsZWQgdG8gdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn0iKQogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiVHJhbnNhemlvbmUgZmF0dGEgMjg1ICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn0sICR7bGlua2VkSXNzdWUuc3RhdHVzfSIpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCn0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </function>
            <function type="class">
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="maxAllowed-integerValue">50</arg>
              <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="field">customfield_22693</arg>
              <arg name="scopeType">SAME</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
              <arg name="scopeSource-jql"></arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
    <action id="141" name="Chiudi Rapporto di Intervento" view="fieldscreen">
      <meta name="opsbar-sequence">10</meta>
      <meta name="jira.description"></meta>
      <meta name="jira.fieldscreen.id">19910</meta>
      <restrict-to>
        <conditions type="OR">
          <condition type="class">
            <arg name="FIELD_FUNCTION_ID">e11c2942-0754-423c-8e92-d78a6375f221</arg>
            <arg name="FIELD_NOTES">YCFgTk9UIFBNIFRpY2tldA==</arg>
            <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
            <arg name="disabled">true</arg>
            <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5pc3N1ZVR5cGUubmFtZSAhPSAnUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXQnIiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
            <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
          </condition>
          <condition type="class">
            <arg name="RESOLUTION_FIELD_NAME">6</arg>
            <arg name="FIELD_FUNCTION_ID">fc8b9dd9-f011-4c94-85b2-3dad9c428711</arg>
            <arg name="FIELD_NOTES">YCFgRm9yIFBNIFRpY2tldHMgLSBhbGwgc3ViLXRhc2tzIG11c3QgYmUgcmVzb2x2ZWQ=</arg>
            <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.AllSubtasksResolvedCondition</arg>
            <arg name="disabled">true</arg>
            <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
          </condition>
        </conditions>
      </restrict-to>
      <validators>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">fa37467a9382f8924cd169d5ba599dcb71925405</arg>
          <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIFJlcXVpcmVkIEZpZWxkcyAtIHNvbG8gZXJyb3JzLCBubyB3YXJuaW5ncw==</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5cblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcblxuLy9Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKClcbi8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMjUxMTJcIilcblxubG9nLmRlYnVnIFwiVHJhbnNhemlvbmUgQ29tcGxldGUgLSBQcmltbyB2YWxpZGF0b3JcIlxubG9nLmRlYnVnIFwiVHJhbnNhemlvbmUgQ29tcGxldGUgLSBQcmltbyB2YWxpZGF0b3IgLSBJc3N1ZTogXCIgKyBpc3N1ZVxuXG5kZWYgZXJyb3JzID0gZmFsc2VcbmRlZiB3YXJuaW5ncyA9IGZhbHNlXG5cbmRlZiBhdXRvbWF0aWNhbGx5Q2xvc2VkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q2xvc2VkJ10udG9TdHJpbmcoKSlbMF1cblxuZGVmIGFzc2V0ID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hc3NldCddLnRvU3RyaW5nKCkpWzBdXG5kZWYgYXNzZXRTdGF0dXNQcmUgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmFzc2V0U3RhdHVzUHJlJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBhc3NldFN0YXR1c1Bvc3QgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmFzc2V0U3RhdHVzUG9zdCddLnRvU3RyaW5nKCkpWzBdXG5kZWYgcmlzayA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yucmlza09uc2l0ZSddLnRvU3RyaW5nKCkpWzBdXG5kZWYgcmlza0Rlc2NyaXB0aW9uID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5yaXNrRGVzY3JpcHRpb24nXS50b1N0cmluZygpKVswXVxuZGVmIGN1c3RTaWduYXR1cmUgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmN1c3RvbWVyU2lnbmF0dXJlJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBjdXN0UmVmID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5jdXN0Q29udGFjdE9uc2l0ZSddLnRvU3RyaW5nKCkpWzBdXG4vL2RlZiB0ZWNoU2lnbmF0dXJlID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi50ZWNobmljaWFuU2lnbmF0dXJlJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBrbXMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmttcyddLnRvU3RyaW5nKCkpWzBdXG5kZWYgdHJhdmVsSCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YudHJhdmVsSG91cnMnXS50b1N0cmluZygpKVswXVxuZGVmIGV4ZWN1dGlvbkRhdGUgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmV4ZWN1dGlvbkRhdGUnXS50b1N0cmluZygpKVswXVxuZGVmIHRlY2hzT25zaXRlID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi50ZWNobmljaWFuc09uc2l0ZSddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiByZXBNYXRlcmlhbHMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJlcGxhY2VkTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF1cbmRlZiByZXFNYXRlcmlhbHMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJlcXVpcmVkTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF1cblxuZGVmIHRyYW5zaXRpb25DaGVjayA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY2hlY2tBbmRDb25maXJtJ10udG9TdHJpbmcoKSlbMF1cblxuZGVmIGx1bXBTdW1QcmljZSA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YubHVtcFN1bVByaWNlJ10udG9TdHJpbmcoKSlbMF1cblxuZGVmIHRrdEZyb21QTSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1RLVF9HRU5FUkFURURfRlJPTV9QTVwiKVswXVxuXG5kZWYgZXJyb3JNYW5kYXRvcnlGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWRGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWR2c0V4ZWN1dGlvbiA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVycm9ySm9iU3RhcnRlZERhdGV2c0NvbXBsZXRlZCA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVycm9yR2xvYmFsRXhlY3V0aW9uRGF0ZSA9IGZhbHNlXG5kZWYgZXJyb3JUZWNoU2lnbmF0dXJlRmllbGRzID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgd2FybmluZ0VtcHR5RmllbGRzID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgZXJyb3JTdWJUYXNrUmVzb2x1dGlvbiA9IGZhbHNlXG5kZWYgZXJyb3JUZWNoc01pc3NpbmcgPSBmYWxzZVxuXG5kZWYgZXhlY3V0aW9uRGF0ZURhdGVcblxuLypPUC0xMDM4OiBFc2VndW8gbGEgdmVyaWZpY2EgZGVpIGNhbXBpIG9iYmxpZ2F0b3JpIHNvbG8gc2UgaWwgdGlja2V0IHN1IGN1aSBzdG8gZXNlZ3VlbmRvIGxhIHRyYW5zYXppb25lIG5vbiBcdTAwZTggc3RhdG8gY2hpdXNvIGluIGF1dG9tYXRpY28gZGFsIHNpc3RlbWEqL1xubG9nLmRlYnVnIFwiaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKTogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpXG5sb2cuZGVidWcgXCJjaGVjazogXCIgKyAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKVxuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKT09bnVsbCB8fCAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKSl7XG4gICAgLy9PUEFBX0xVTVBfU1VNX1BSSUNFXG4gICAgaWYoIWlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQucGxhbm5lZE1haW50ZW5hbmNlJ10pICYmIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1QcmljZSk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1QcmljZSkgPT0gXCJcIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1QcmljZSkudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpKXtcbiAgICAgICAgZXJyb3JzID0gdHJ1ZVxuICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YubHVtcFN1bVByaWNlJ10udG9TdHJpbmcoKSlcbiAgICB9XG5cbiAgICAvL09QQUFfUkVQTEFDRURfTUFURVJJQUxTXG4gICAgaWYoIWlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQucGxhbm5lZE1haW50ZW5hbmNlJ10pICYmIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscyk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykgPT0gXCJcIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpKXtcbiAgICAgICAgbG9nLmRlYnVnIFwid2FybmluZ3MgdHJ1ZVwiXG4gICAgICAgIHdhcm5pbmdzID0gdHJ1ZVxuICAgICAgICB3YXJuaW5nRW1wdHlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLnJlcGxhY2VkTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlcbiAgICB9XG4gICAgLy9PUEFBX1JFUVVJUkVEX01BVEVSSUFMU1xuICAgIGlmKCFpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0LnBsYW5uZWRNYWludGVuYW5jZSddKSAmJiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXFNYXRlcmlhbHMpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXFNYXRlcmlhbHMpID09IFwiXCIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXFNYXRlcmlhbHMpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcIndhcm5pbmdzIHRydWVcIlxuICAgICAgICB3YXJuaW5ncyA9IHRydWVcbiAgICAgICAgd2FybmluZ0VtcHR5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5yZXF1aXJlZE1hdGVyaWFscyddLnRvU3RyaW5nKCkpXG4gICAgfVxuXG5cbiAgICAvL09QQUFfQVNTRVRcbiAgICBpZighaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5wbGFubmVkTWFpbnRlbmFuY2UnXSkgJiYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXQpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldCkgPT0gXCJcIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0KS50b1N0cmluZygpLmVxdWFscyhcIlwiKSkpe1xuICAgICAgICBlcnJvcnMgPSB0cnVlXG4gICAgICAgIGVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5hc3NldCddLnRvU3RyaW5nKCkpXG4gICAgfVxuICAgIC8vT1BBQV9BU1NFVF9TVEFUVVNfUFJFXG4gICAgaWYoIWlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQucGxhbm5lZE1haW50ZW5hbmNlJ10pICYmIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0U3RhdHVzUHJlKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXRTdGF0dXNQcmUpID09IFwiXCIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldFN0YXR1c1ByZSkudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpKXtcbiAgICAgICAgZXJyb3JzID0gdHJ1ZVxuICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YuYXNzZXRTdGF0dXNQcmUnXS50b1N0cmluZygpKVxuICAgIH1cbiAgICAvL09QQUFfQVNTRVRfU1RBVFVTX1BPU1RcbiAgICBpZighaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5wbGFubmVkTWFpbnRlbmFuY2UnXSkgJiYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXRTdGF0dXNQb3N0KT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXRTdGF0dXNQb3N0KSA9PSBcIlwiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXRTdGF0dXNQb3N0KS50b1N0cmluZygpLmVxdWFscyhcIlwiKSkpe1xuICAgICAgICBlcnJvcnMgPSB0cnVlXG4gICAgICAgIGVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5hc3NldFN0YXR1c1Bvc3QnXS50b1N0cmluZygpKVxuICAgIH1cbiAgICAvL09QQUFfUklTS19PTlNJVEVcbiAgICBpZighaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5wbGFubmVkTWFpbnRlbmFuY2UnXSkgJiYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmlzayk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJpc2spID09IFwiXCIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyaXNrKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSkpe1xuICAgICAgICBlcnJvcnMgPSB0cnVlXG4gICAgICAgIGVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5yaXNrT25zaXRlJ10udG9TdHJpbmcoKSlcbiAgICB9XG4gICAgLy9PUEFBX1JJU0tfREVTQ1JJUFRJT05cbiAgICBpZighaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5wbGFubmVkTWFpbnRlbmFuY2UnXSkgJiYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmlzaykudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIikgJiYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmlza0Rlc2NyaXB0aW9uKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmlza0Rlc2NyaXB0aW9uKSA9PSBcIlwiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmlza0Rlc2NyaXB0aW9uKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSkpKXtcbiAgICAgICAgZXJyb3JzID0gdHJ1ZVxuICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2Yucmlza0Rlc2NyaXB0aW9uJ10udG9TdHJpbmcoKSlcbiAgICB9XG4gICAgLy9PUEFBX0NVU1RPTUVSX1NJR05BVFVSRVxuICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VzdFNpZ25hdHVyZSk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1c3RTaWduYXR1cmUpID09IFwiXCIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0U2lnbmF0dXJlKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSl7XG4gICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLmN1c3RvbWVyU2lnbmF0dXJlJ10udG9TdHJpbmcoKSlcbiAgICB9XG4gICAgLy9PUEFBX0NVU1RPTUVSX0NPTlRBQ1RfT05TSVRFXG4gICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0UmVmKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VzdFJlZikgPT0gXCJcIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1c3RSZWYpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKXtcbiAgICAgICAgZXJyb3JzID0gdHJ1ZVxuICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YuY3VzdENvbnRhY3RPbnNpdGUnXS50b1N0cmluZygpKVxuICAgIH1cbiAgICBcbiAgICAvL1BNIFRJQ0tFVCAtIGFsbCBzdWItdGFza3MgbXVzdCBiZSBDb21wbGV0ZWRcbiAgICBpZihpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0LnBsYW5uZWRNYWludGVuYW5jZSddKSl7XG4gICAgICAgIGRlZiBzdWJUYXNrcyA9IGlzc3VlLmdldFN1YlRhc2tPYmplY3RzKClcblxuICAgICAgICBpZihzdWJUYXNrcyl7XG4gICAgICAgICAgICBzdWJUYXNrcy5lYWNoIHsgLy9Mb29wIGVhY2ggc3VidGFzayBvZiBwYXJlbnQgaXNzdWVcbiAgICAgICAgICAgICAgICAvL0lmIHRoZSBzdWJ0YXNrIGlzIFwiUGxhbm5lZCBNYWludGVuYW5jZSBUYXNrXCJcbiAgICAgICAgICAgICAgICBpZiAoaXQuaXNzdWVUeXBlLm5hbWUgPT0gXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcIikge1xuICAgICAgICAgICAgICAgICAgICBpZighaXQuZ2V0UmVzb2x1dGlvbigpIHx8IGl0LmdldFJlc29sdXRpb24oKS5uYW1lICE9IFwiQ29tcGxldGVkXCIpeyBcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yU3ViVGFza1Jlc29sdXRpb24gPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vT1BBQV9URUNITklDSUFOX1NJR05BVFVSRVxuICAgIC8qXG4gICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0ZWNoU2lnbmF0dXJlKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGVjaFNpZ25hdHVyZSkgPT0gXCJcIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hTaWduYXR1cmUpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKXtcbiAgICAgICAgZXJyb3JzID0gdHJ1ZVxuICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YudGVjaG5pY2lhblNpZ25hdHVyZSddLnRvU3RyaW5nKCkpXG4gICAgfVxuICAgICovXG4gICAgLy8xNS4xMi4yMDIwIEFGIC0gdG9sdGEgb2JibGlnYXRvcmlldFx1MDBlMCBzdWkgY2FtcGkgT1BfS01TIGUgT1BfVFJBVkVMX0hPVVJTIHBvaWNoXHUwMGU4IG9yYSBsYSByaWNoaWVzdGEgdXRlbnRpIFx1MDBlOCBkaSBpbXBsZW1lbnRhcmU6XG4gICAgLy9DaW56aWEgU2FsaXR1cm86IGRvdnJlYmJlcm8gZXNzZXJlIG9iYmxpZ2F0b3JpIGxhZGRvdmUgZGEgY29udHJhdHRvIGlsIGZvcm5pdG9yZSBub24gaGEgaWwgZGlyaXR0byBmaXNzbyBkaSBjaGlhbWF0YVxuICAgIC8vT1BBQV9LTVNcbiAgICAvKmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoa21zKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoa21zKSA9PSBcIlwiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoa21zKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSl7XG4gICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLmttcyddLnRvU3RyaW5nKCkpXG4gICAgfSovXG4gICAgLy9PUEFBX1RSQVZFTF9IT1VSU1xuICAgIC8qaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmF2ZWxIKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsSCkgPT0gXCJcIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYXZlbEgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKXtcbiAgICAgICAgZXJyb3JzID0gdHJ1ZVxuICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YudHJhdmVsSG91cnMnXS50b1N0cmluZygpKVxuICAgIH0qL1xuICAgIC8vT1BBQV9FWEVDVVRJT05fREFURVxuICAgIC8qVE9ETzogZGEgY29tbWVudGFyZSBxdWFuZG8gcmltdW92ZXJlbW8gbGEgY29tcGlsYXppb25lIGRpIGV4ZWN1dGlvbiBkYXRlIGFuY2hlIHBlciByZXBhaXIqL1xuICAgIGlmKCFpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0LnBsYW5uZWRNYWludGVuYW5jZSddKSAmJiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShleGVjdXRpb25EYXRlKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZXhlY3V0aW9uRGF0ZSkgPT0gXCJcIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGV4ZWN1dGlvbkRhdGUpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKSl7XG4gICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLmV4ZWN1dGlvbkRhdGUnXS50b1N0cmluZygpKVxuICAgIH1lbHNle1xuICAgICAgICBpZighaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5wbGFubmVkTWFpbnRlbmFuY2UnXSkpe1xuICAgICAgICAgICAgZXhlY3V0aW9uRGF0ZURhdGUgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGV4ZWN1dGlvbkRhdGUpLmZvcm1hdCgnZGQvTU0veXl5eScpXG4gICAgICAgIH1cblx0fVxuICAgIFxuICAgIFxuICAgIC8vSm9iIFN0YXJ0ZWQgKyBKb2IgQ29tcGxldGVkIGRpIG9nbmkgb2dnZXR0byBUZWNoX09uU2l0ZV9SZXBvcnQgYXNzb2NpYXRvIGFsIGNhbXBvIE9QQUFfVEVDSFNfT05TSVRFXG4gICAgZGVmIGdsb2JhbEV4ZWNEYXRlXG4gICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0ZWNoc09uc2l0ZSkhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hzT25zaXRlKSAhPSBcIlwiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hzT25zaXRlKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSl7XG4gICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qL1xuICAgICAgICAvL2luc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHNcbiAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyAgXG4gICAgICAgIENsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuICAgICAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xuICAgICAgICBkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcblxuICAgICAgICBkZWYgdGVjaHNPbnNpdGVGaWVsZCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGVjaHNPbnNpdGUpXG5cdFx0bG9nLmRlYnVnIFwidGVjaHNPbnNpdGVGaWVsZDogXCIgKyB0ZWNoc09uc2l0ZUZpZWxkXG4gICAgICAgIGZvcih0ZWNobmljaWFuIGluIHRlY2hzT25zaXRlRmllbGQpe1xuICAgICAgICAgICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0XG4gICAgICAgICAgICBkZWYgdGVjaE9uc2l0ZT10ZWNobmljaWFuLnRvU3RyaW5nKClcbiAgICAgICAgICAgIGRlZiB0ZWNoT25zaXRlS2V5ID0gdGVjaE9uc2l0ZS5zdWJzdHJpbmcodGVjaE9uc2l0ZS5pbmRleE9mKCcoJykrMSx0ZWNoT25zaXRlLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgIGRlZiB0ZWNoT25zaXRlT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHRlY2hPbnNpdGVLZXkpXG4gICAgICAgICAgICAvL2dldCBcIkpvYiBTdGFydGVkXCIgZm9yIHRoYXQgVGVjaG5pY2lhblxuICAgICAgICAgICAgZGVmIG9iVHJpYWdlXG4gICAgICAgICAgICBkZWYgdGVjaEpvYlN0YXJ0ZWRcbiAgICAgICAgICAgIGRlZiB0ZWNoSm9iQ29tcGxldGVkXG4gICAgICAgICAgICBkZWYgdGVjaEpvYlN0YXJ0ZWREYXRlLCB0ZWNoSm9iQ29tcGxldGVkRGF0ZVxuICAgICAgICAgICAgZGVmIHRlY2hSZWYsIHRlY2gsIHRlY2hSZWZLZXksIHRlY2hSZWZPYmplY3QsIHRlY2hSZWZOYW1lXG4gICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaE9uc2l0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2hPblNpdGUuam9iU3RhcnRlZCddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoT25zaXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoudGVjaE9uU2l0ZS5qb2JTdGFydGVkJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgdGVjaEpvYlN0YXJ0ZWQgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgdGVjaEpvYlN0YXJ0ZWREYXRlID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkuZm9ybWF0KCdkZC9NTS95eXl5JylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbG9nLmRlYnVnIFwidGVjaEpvYlN0YXJ0ZWQ6IFwiICsgdGVjaEpvYlN0YXJ0ZWREYXRlXG4gICAgICAgICAgICAvL2dldCBcIkpvYiBDb21wbGV0ZWRcIiBmb3IgdGhhdCBUZWNobmljaWFuXG4gICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaE9uc2l0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2hPblNpdGUuam9iQ29tcGxldGVkJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hPbnNpdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai50ZWNoT25TaXRlLmpvYkNvbXBsZXRlZCddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgICAgIHRlY2hKb2JDb21wbGV0ZWQgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIHRlY2hKb2JDb21wbGV0ZWREYXRlID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkuZm9ybWF0KCdkZC9NTS95eXl5JylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbG9nLmRlYnVnIFwidGVjaEpvYkNvbXBsZXRlZDogXCIgKyB0ZWNoSm9iQ29tcGxldGVkXG4gICAgICAgICAgICAvL2dldCBcIlRlY2huaWNpYW5fUkVGXCIgZm9yIHRoYXQgVGVjaG5pY2lhblxuICAgICAgICAgICAgbG9nLmRlYnVnIFwidGVjaE9uc2l0ZU9iamVjdDogXCIgKyB0ZWNoT25zaXRlT2JqZWN0XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoT25zaXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoudGVjaE9uc2l0ZS50ZWNobmljaWFuUmVmJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hPbnNpdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai50ZWNoT25zaXRlLnRlY2huaWNpYW5SZWYnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICB0ZWNoUmVmID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICB0ZWNoID0gdGVjaFJlZi50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidGVjaDogXCIgKyB0ZWNoXG4gICAgICAgICAgICAgICAgdGVjaFJlZktleSA9IHRlY2guc3Vic3RyaW5nKHRlY2guaW5kZXhPZignKCcpKzEsdGVjaC5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidGVjaFJlZktleTogXCIgKyB0ZWNoUmVmS2V5XG4gICAgICAgICAgICAgICAgdGVjaFJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihwcm9wZXJ0aWVzWydpc2NoZW1hLmFhJ10udG9TdHJpbmcoKSArIFwiLVwiICsgdGVjaFJlZktleSlcbiAgICAgICAgICAgICAgICB0ZWNoUmVmTmFtZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoudGVjaG5pY2lhbi5uYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgIFx0XHRsb2cuZGVidWcgdGVjaFJlZk5hbWVcbiAgICAgICAgICAgIGlmKCF0ZWNoSm9iU3RhcnRlZCB8fCAhdGVjaEpvYkNvbXBsZXRlZCl7XG4gICAgICAgICAgICAgICAgZXJyb3JzID0gdHJ1ZVxuICAgICAgICAgICAgICAgIGVycm9ySm9iU3RhcnRlZENvbXBsZXRlZEZpZWxkcy5hZGQodGVjaFJlZk5hbWUuc3Vic3RyaW5nKHRlY2hSZWZOYW1lLmluZGV4T2YoJygnKSsxLHRlY2hSZWZOYW1lLmluZGV4T2YoJyknKSkpXG4gICAgICAgICAgICB9ICAgIFxuICAgICAgICAgICAgaWYoIWlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQucGxhbm5lZE1haW50ZW5hbmNlJ10pICYmIHRlY2hKb2JTdGFydGVkRGF0ZSAhPSB0ZWNoSm9iQ29tcGxldGVkRGF0ZSl7XG4gICAgICAgICAgICAgICAgZXJyb3JzID0gdHJ1ZVxuICAgICAgICAgICAgICAgIGVycm9ySm9iU3RhcnRlZERhdGV2c0NvbXBsZXRlZC5hZGQodGVjaFJlZk5hbWUuc3Vic3RyaW5nKHRlY2hSZWZOYW1lLmluZGV4T2YoJygnKSsxLHRlY2hSZWZOYW1lLmluZGV4T2YoJyknKSkpXG4gICAgICAgICAgICB9XG5cdFx0XHRpZighaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5wbGFubmVkTWFpbnRlbmFuY2UnXSkgJiYgZXhlY3V0aW9uRGF0ZURhdGUgIT0gbnVsbCAmJiB0ZWNoSm9iU3RhcnRlZERhdGUgIT0gZXhlY3V0aW9uRGF0ZURhdGUpe1xuICAgICAgICAgICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgICAgICAgICBlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWR2c0V4ZWN1dGlvbi5hZGQodGVjaFJlZk5hbWUuc3Vic3RyaW5nKHRlY2hSZWZOYW1lLmluZGV4T2YoJygnKSsxLHRlY2hSZWZOYW1lLmluZGV4T2YoJyknKSkpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKGdsb2JhbEV4ZWNEYXRlPT1udWxsICYmIHRlY2hKb2JTdGFydGVkRGF0ZSA9PSB0ZWNoSm9iQ29tcGxldGVkRGF0ZSl7XG4gICAgICAgICAgICAgICAgZ2xvYmFsRXhlY0RhdGUgPSB0ZWNoSm9iU3RhcnRlZERhdGVcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGlmKGdsb2JhbEV4ZWNEYXRlIT1udWxsICYmIGdsb2JhbEV4ZWNEYXRlIT10ZWNoSm9iU3RhcnRlZERhdGUpe1xuICAgICAgICAgICAgICAgICAgICBlcnJvcnM9dHJ1ZVxuICAgICAgICAgICAgICAgICAgICBlcnJvckdsb2JhbEV4ZWN1dGlvbkRhdGUgPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgfSAgICBcbiAgICB9ZWxzZXtcbiAgICAgICAgaWYoaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5wbGFubmVkTWFpbnRlbmFuY2UnXSkpe1xuICAgICAgICAgICAgZXJyb3JzID0gdHJ1ZVxuICAgICAgICAgICAgZXJyb3JUZWNoc01pc3NpbmcgPSB0cnVlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkZWYgdGVjaFNpZ25Gb3VuZD1mYWxzZVxuICAgIC8vRmlybWEgZGkgYWxtZW5vIHVuIG9nZ2V0dG8gVGVjaF9PblNpdGVfUmVwb3J0IGFzc29jaWF0byBhbCBjYW1wbyBPUEFBX1RFQ0hTX09OU0lURVxuICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGVjaHNPbnNpdGUpIT1udWxsICYmIChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0ZWNoc09uc2l0ZSkgIT0gXCJcIiAmJiAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0ZWNoc09uc2l0ZSkudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpe1xuICAgICAgICAvKkNpY2xhcmUgdHV0dGkgZ2xpIG9nZ2V0dGkgYXNzb2NpYXRpIGFsIGNhbXBvKi9cbiAgICAgICAgLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzXG4gICAgICAgIENsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTsgIFxuICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTtcbiAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbiAgICAgICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XG5cbiAgICAgICAgZGVmIHRlY2hzT25zaXRlRmllbGQgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hzT25zaXRlKVxuXHRcdGxvZy5kZWJ1ZyBcInRlY2hzT25zaXRlRmllbGQ6IFwiICsgdGVjaHNPbnNpdGVGaWVsZFxuICAgICAgICBmb3IodGVjaG5pY2lhbiBpbiB0ZWNoc09uc2l0ZUZpZWxkKXtcbiAgICAgICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdFxuICAgICAgICAgICAgZGVmIHRlY2hPbnNpdGU9dGVjaG5pY2lhbi50b1N0cmluZygpXG4gICAgICAgICAgICBkZWYgdGVjaE9uc2l0ZUtleSA9IHRlY2hPbnNpdGUuc3Vic3RyaW5nKHRlY2hPbnNpdGUuaW5kZXhPZignKCcpKzEsdGVjaE9uc2l0ZS5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICBkZWYgdGVjaE9uc2l0ZU9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbih0ZWNoT25zaXRlS2V5KVxuICAgICAgICAgICAgLy9nZXQgXCJKb2IgU3RhcnRlZFwiIGZvciB0aGF0IFRlY2huaWNpYW5cbiAgICAgICAgICAgIGRlZiBvYlRyaWFnZVxuICAgICAgICAgICAgZGVmIHRlY2hTaWduYXR1cmUsIHRlY2hTaWduYXR1cmVBdHRyXG4gICAgICAgICAgICB0ZWNoU2lnbmF0dXJlQXR0ciA9IHByb3BlcnRpZXNbJ2lvYmoudGVjaE9uU2l0ZS5zaWduYXR1cmUnXSA/IHByb3BlcnRpZXNbJ2lvYmoudGVjaE9uU2l0ZS5zaWduYXR1cmUnXS50b1N0cmluZygpIDogXCJURUNITklDSUFOX1NJR05BVFVSRVwiXG4gICAgICAgICAgICBkZWYgdGVjaFJlZiwgdGVjaCwgdGVjaFJlZktleSwgdGVjaFJlZk9iamVjdCwgdGVjaFJlZk5hbWVcbiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoT25zaXRlT2JqZWN0LmdldElkKCksIHRlY2hTaWduYXR1cmVBdHRyKSl7XG4gICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaE9uc2l0ZU9iamVjdC5nZXRJZCgpLCB0ZWNoU2lnbmF0dXJlQXR0cikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgdGVjaFNpZ25hdHVyZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRlY2hTaWduYXR1cmU6IFwiICsgdGVjaFNpZ25hdHVyZSBcblxuICAgICAgICAgICAgLy9nZXQgXCJUZWNobmljaWFuX1JFRlwiIGZvciB0aGF0IFRlY2huaWNpYW5cbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRlY2hPbnNpdGVPYmplY3Q6IFwiICsgdGVjaE9uc2l0ZU9iamVjdFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaE9uc2l0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2hPbnNpdGUudGVjaG5pY2lhblJlZiddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoT25zaXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoudGVjaE9uc2l0ZS50ZWNobmljaWFuUmVmJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgdGVjaFJlZiA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgdGVjaCA9IHRlY2hSZWYudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRlY2g6IFwiICsgdGVjaFxuICAgICAgICAgICAgICAgIHRlY2hSZWZLZXkgPSB0ZWNoLnN1YnN0cmluZyh0ZWNoLmluZGV4T2YoJygnKSsxLHRlY2guaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRlY2hSZWZLZXk6IFwiICsgdGVjaFJlZktleVxuICAgICAgICAgICAgICAgIHRlY2hSZWZPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4ocHJvcGVydGllc1snaXNjaGVtYS5hYSddLnRvU3RyaW5nKCkgKyBcIi1cIiArIHRlY2hSZWZLZXkpXG4gICAgICAgICAgICAgICAgdGVjaFJlZk5hbWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaFJlZk9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2huaWNpYW4ubmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICBcdFx0bG9nLmRlYnVnIHRlY2hSZWZOYW1lXG5cbiAgICAgICAgICAgIGlmKCF0ZWNoU2lnbmF0dXJlICYmICF0ZWNoU2lnbkZvdW5kKXtcbiAgICAgICAgICAgICAgICBlcnJvclRlY2hTaWduYXR1cmVGaWVsZHMuYWRkKHRlY2hSZWZOYW1lLnN1YnN0cmluZyh0ZWNoUmVmTmFtZS5pbmRleE9mKCcoJykrMSx0ZWNoUmVmTmFtZS5pbmRleE9mKCcpJykpKVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgaWYodGVjaFNpZ25hdHVyZSl7XG4gICAgICAgICAgICAgICAgICAgIHRlY2hTaWduRm91bmQgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgIGVycm9yVGVjaFNpZ25hdHVyZUZpZWxkcy5jbGVhcigpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSAgICBcbiAgICAgICAgIH1cbiAgICAgICAgaWYoIXRlY2hTaWduRm91bmQpe1xuICAgICAgICAgICAgZXJyb3JzID0gdHJ1ZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgaWYgKCghZXJyb3JzICYmICF3YXJuaW5ncykgfHwgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGt0RnJvbVBNKSE9bnVsbCAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRrdEZyb21QTSkudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIikpKXtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9ZWxzZXtcbiAgICAgICAgaWYoIWVycm9ycyAmJiB3YXJuaW5ncyl7XG4gICAgICAgICAgICAvL1NlIGNpIHNvbm8gc29sbyB3YXJuaW5ncyB2ZXJpZmljbyBzZSBsJ3V0ZW50ZSBoYSBnaVx1MDBlMCBkaWNoaWFyYXRvIGRpIHZvbGVyIHByb3NlZ3VpcmUgY29tdW5xdWVcbiAgICAgICAgICAgIC8vIC0gdHJhbnNpdGlvbiBmaWVsZCBcIk9QQUFfQ0hFQ0tfQU5EX0NPTkZJUk1cIj1cIlllc1wiXG4gICAgICAgICAgICAvLyAtIGluIGNhc28gY29udHJhcmlvIGludmlvIGkgd2FybmluZyBhIEZFXG5cbiAgICAgICAgICAgIC8vbG9nLmRlYnVnIFwidHJhbnNpdGlvbkNoZWNrOiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKVxuICAgICAgICAgICAgLy9sb2cuZGVidWcgXCJyZXN1bHQ6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpXG4gICAgICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIikpe1xuICAgICAgICAgICAgICAgIC8vbG9nLmRlYnVnIFwicmV0dXJuIHRydWVcIlxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBkZWYgd0xpc3QgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgICAgICAgICAgICAgIGlmKHdhcm5pbmdFbXB0eUZpZWxkcy5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgZGVmIHdMaXN0Q29uZmlybUVtcHR5ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChcIldcIilcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKFwiQ09ORklSTV9FTVBUWV9GSUVMRFNcIilcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZCh3YXJuaW5nRW1wdHlGaWVsZHMpXG5cbiAgICAgICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5KVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG91dHB1dC5hZGQod0xpc3QpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidGhyb3cgZXhjZXB0aW9uOiBcIiArIG91dHB1dC50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiV1wiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgICAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKFwiV1wiLCBvdXRwdXQudG9TdHJpbmcoKSkgICBcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICAgIGlmKGVycm9ycyAmJiAhd2FybmluZ3Mpe1xuICAgICAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICAgICAgICAgIGlmKGVycm9yTWFuZGF0b3J5RmllbGRzLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgIGRlZiBlTGlzdE1hbmRhdG9yeSA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChcIkVcIilcbiAgICAgICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoXCJNQU5EQVRPUllfRklFTERTXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKGVycm9yTWFuZGF0b3J5RmllbGRzKVxuICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdE1hbmRhdG9yeSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYoZXJyb3JKb2JTdGFydGVkQ29tcGxldGVkRmllbGRzLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgIGRlZiBlTGlzdFN0YXJ0RW5kID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQoXCJNSVNTSU5HX09OU0lURV9TVEFSVF9FTkRfREVUQUlMU1wiKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQoZXJyb3JKb2JTdGFydGVkQ29tcGxldGVkRmllbGRzKVxuICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdFN0YXJ0RW5kKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWR2c0V4ZWN1dGlvbi5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICBkZWYgZUxpc3RTdGFydEVuZEV4ZWMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kRXhlYy5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZEV4ZWMuYWRkKFwiRVhFQ1VUSU9OX0RBVEVfVlNfVEVDSF9TVEFSVF9DT01QTEVURURcIilcbiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kRXhlYy5hZGQobnVsbClcbiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kRXhlYy5hZGQoZXJyb3JKb2JTdGFydGVkQ29tcGxldGVkdnNFeGVjdXRpb24pXG4gICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0U3RhcnRFbmRFeGVjKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihlcnJvclRlY2hTaWduYXR1cmVGaWVsZHMuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0VGVjaFNpZ24gPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBlTGlzdFRlY2hTaWduLmFkZChcIkVcIilcbiAgICAgICAgICAgICAgICBlTGlzdFRlY2hTaWduLmFkZChcIk1JU1NJTkdfVEVDSF9TSUdOQVRVUkVcIilcbiAgICAgICAgICAgICAgICBlTGlzdFRlY2hTaWduLmFkZChudWxsKVxuICAgICAgICAgICAgICAgIGVMaXN0VGVjaFNpZ24uYWRkKGVycm9yVGVjaFNpZ25hdHVyZUZpZWxkcylcbiAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RUZWNoU2lnbilcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoZXJyb3JTdWJUYXNrUmVzb2x1dGlvbil7XG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0U3ViVGFza0NvbXBsZXRlZCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGVMaXN0U3ViVGFza0NvbXBsZXRlZC5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RTdWJUYXNrQ29tcGxldGVkLmFkZChcIlNVQlRBU0tfTk9UX0NPTVBMRVRFRFwiKVxuICAgICAgICAgICAgICAgIGVMaXN0U3ViVGFza0NvbXBsZXRlZC5hZGQobnVsbClcbiAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RTdWJUYXNrQ29tcGxldGVkKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihlcnJvclRlY2hzTWlzc2luZyl7XG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0U3ViVGFza0NvbXBsZXRlZCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGVMaXN0U3ViVGFza0NvbXBsZXRlZC5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RTdWJUYXNrQ29tcGxldGVkLmFkZChcIk1JU1NJTkdfVEVDSE5JQ0lBTlNcIilcbiAgICAgICAgICAgICAgICBlTGlzdFN1YlRhc2tDb21wbGV0ZWQuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0U3ViVGFza0NvbXBsZXRlZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoZXJyb3JKb2JTdGFydGVkRGF0ZXZzQ29tcGxldGVkLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgIGRlZiBlTGlzdFN0YXJ0RW5kID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQoXCJURUNIX1NUQVJUX0NPTVBMRVRFRF9EQVRFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQobnVsbClcbiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kLmFkZChlcnJvckpvYlN0YXJ0ZWREYXRldnNDb21wbGV0ZWQpXG4gICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0U3RhcnRFbmQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKGVycm9yR2xvYmFsRXhlY3V0aW9uRGF0ZSl7XG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0RXhlY0RhdGUgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBlTGlzdEV4ZWNEYXRlLmFkZChcIkVcIilcbiAgICAgICAgICAgICAgICBlTGlzdEV4ZWNEYXRlLmFkZChcIkVYRUNVVElPTl9EQVRFX0FMTF9URUNIU1wiKVxuICAgICAgICAgICAgICAgIGVMaXN0RXhlY0RhdGUuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXhlY0RhdGUpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJ0aHJvdyBleGNlcHRpb246IFwiICsgb3V0cHV0LnRvU3RyaW5nKClcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgICAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKFwiRVwiLCBvdXRwdXQudG9TdHJpbmcoKSkgICBcbiAgICAgICAgfVxuICAgICAgICBpZihlcnJvcnMgJiYgd2FybmluZ3Mpe1xuICAgICAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICBkZWYgd0xpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIGlmKGVycm9yTWFuZGF0b3J5RmllbGRzLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgIGRlZiBlTGlzdE1hbmRhdG9yeSA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChcIkVcIilcbiAgICAgICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoXCJNQU5EQVRPUllfRklFTERTXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKGVycm9yTWFuZGF0b3J5RmllbGRzKVxuICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdE1hbmRhdG9yeSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYoZXJyb3JKb2JTdGFydGVkQ29tcGxldGVkRmllbGRzLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgIGRlZiBlTGlzdFN0YXJ0RW5kID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQoXCJNSVNTSU5HX09OU0lURV9TVEFSVF9FTkRfREVUQUlMU1wiKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQoZXJyb3JKb2JTdGFydGVkQ29tcGxldGVkRmllbGRzKVxuICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdFN0YXJ0RW5kKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWR2c0V4ZWN1dGlvbi5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICBkZWYgZUxpc3RTdGFydEVuZEV4ZWMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kRXhlYy5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZEV4ZWMuYWRkKFwiRVhFQ1VUSU9OX0RBVEVfVlNfVEVDSF9TVEFSVF9DT01QTEVURURcIilcbiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kRXhlYy5hZGQobnVsbClcbiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kRXhlYy5hZGQoZXJyb3JKb2JTdGFydGVkQ29tcGxldGVkdnNFeGVjdXRpb24pXG4gICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0U3RhcnRFbmRFeGVjKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKGVycm9yVGVjaFNpZ25hdHVyZUZpZWxkcy5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICBkZWYgZUxpc3RUZWNoU2lnbiA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGVMaXN0VGVjaFNpZ24uYWRkKFwiRVwiKVxuICAgICAgICAgICAgICAgIGVMaXN0VGVjaFNpZ24uYWRkKFwiTUlTU0lOR19URUNIX1NJR05BVFVSRVwiKVxuICAgICAgICAgICAgICAgIGVMaXN0VGVjaFNpZ24uYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgZUxpc3RUZWNoU2lnbi5hZGQoZXJyb3JUZWNoU2lnbmF0dXJlRmllbGRzKVxuICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdFRlY2hTaWduKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihlcnJvclN1YlRhc2tSZXNvbHV0aW9uKXtcbiAgICAgICAgICAgICAgICBkZWYgZUxpc3RTdWJUYXNrQ29tcGxldGVkID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZUxpc3RTdWJUYXNrQ29tcGxldGVkLmFkZChcIkVcIilcbiAgICAgICAgICAgICAgICBlTGlzdFN1YlRhc2tDb21wbGV0ZWQuYWRkKFwiU1VCVEFTS19OT1RfQ09NUExFVEVEXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RTdWJUYXNrQ29tcGxldGVkLmFkZChudWxsKVxuICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdFN1YlRhc2tDb21wbGV0ZWQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKGVycm9yVGVjaHNNaXNzaW5nKXtcbiAgICAgICAgICAgICAgICBkZWYgZUxpc3RTdWJUYXNrQ29tcGxldGVkID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZUxpc3RTdWJUYXNrQ29tcGxldGVkLmFkZChcIkVcIilcbiAgICAgICAgICAgICAgICBlTGlzdFN1YlRhc2tDb21wbGV0ZWQuYWRkKFwiTUlTU0lOR19URUNITklDSUFOU1wiKVxuICAgICAgICAgICAgICAgIGVMaXN0U3ViVGFza0NvbXBsZXRlZC5hZGQobnVsbClcbiAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RTdWJUYXNrQ29tcGxldGVkKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihlcnJvckpvYlN0YXJ0ZWREYXRldnNDb21wbGV0ZWQuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0U3RhcnRFbmQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kLmFkZChcIkVcIilcbiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kLmFkZChcIlRFQ0hfU1RBUlRfQ09NUExFVEVEX0RBVEVcIilcbiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kLmFkZChudWxsKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKGVycm9ySm9iU3RhcnRlZERhdGV2c0NvbXBsZXRlZClcbiAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RTdGFydEVuZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoZXJyb3JHbG9iYWxFeGVjdXRpb25EYXRlKXtcbiAgICAgICAgICAgICAgICBkZWYgZUxpc3RFeGVjRGF0ZSA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGVMaXN0RXhlY0RhdGUuYWRkKFwiRVwiKVxuICAgICAgICAgICAgICAgIGVMaXN0RXhlY0RhdGUuYWRkKFwiRVhFQ1VUSU9OX0RBVEVfQUxMX1RFQ0hTXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RFeGVjRGF0ZS5hZGQobnVsbClcbiAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RFeGVjRGF0ZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYod2FybmluZ0VtcHR5RmllbGRzLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1FbXB0eSA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChcIldcIilcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQoXCJDT05GSVJNX0VNUFRZX0ZJRUxEU1wiKVxuICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChudWxsKVxuICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZCh3YXJuaW5nRW1wdHlGaWVsZHMpXG5cbiAgICAgICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHkpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwidGhyb3cgZXhjZXB0aW9uOiBcIiArIG91dHB1dC50b1N0cmluZygpXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJXRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJXRVwiLCBvdXRwdXQudG9TdHJpbmcoKSkgIFxuICAgICAgICB9XG4gICAgfVxufVxuIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
          <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZQppbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb24KaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3IKaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CmRlZiBDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRykKCklzc3VlIGlzc3VlID0gaXNzdWUKCmxvZy5kZWJ1ZyAiVHJhbnNhemlvbmUgQ29tcGxldGUgLSBQcmltbyB2YWxpZGF0b3IiCmxvZy5kZWJ1ZyAiVHJhbnNhemlvbmUgQ29tcGxldGUgLSBQcmltbyB2YWxpZGF0b3IgLSBJc3N1ZTogIiArIGlzc3VlCgpkZWYgZXJyb3JzID0gZmFsc2UKZGVmIHdhcm5pbmdzID0gZmFsc2UKCmRlZiBhdXRvbWF0aWNhbGx5Q2xvc2VkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q2xvc2VkJ10udG9TdHJpbmcoKSlbMF0KCmRlZiBhc3NldCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXNzZXQnXS50b1N0cmluZygpKVswXQpkZWYgYXNzZXRTdGF0dXNQcmUgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmFzc2V0U3RhdHVzUHJlJ10udG9TdHJpbmcoKSlbMF0KZGVmIGFzc2V0U3RhdHVzUG9zdCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXNzZXRTdGF0dXNQb3N0J10udG9TdHJpbmcoKSlbMF0KZGVmIHJpc2sgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJpc2tPbnNpdGUnXS50b1N0cmluZygpKVswXQpkZWYgcmlza0Rlc2NyaXB0aW9uID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5yaXNrRGVzY3JpcHRpb24nXS50b1N0cmluZygpKVswXQpkZWYgY3VzdFNpZ25hdHVyZSA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY3VzdG9tZXJTaWduYXR1cmUnXS50b1N0cmluZygpKVswXQpkZWYgY3VzdFJlZiA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY3VzdENvbnRhY3RPbnNpdGUnXS50b1N0cmluZygpKVswXQpkZWYgdGVjaFNpZ25hdHVyZSA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YudGVjaG5pY2lhblNpZ25hdHVyZSddLnRvU3RyaW5nKCkpWzBdCmRlZiBrbXMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmttcyddLnRvU3RyaW5nKCkpWzBdCmRlZiB0cmF2ZWxIID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi50cmF2ZWxIb3VycyddLnRvU3RyaW5nKCkpWzBdCmRlZiBleGVjdXRpb25EYXRlID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5leGVjdXRpb25EYXRlJ10udG9TdHJpbmcoKSlbMF0KZGVmIHRlY2hzT25zaXRlID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi50ZWNobmljaWFuc09uc2l0ZSddLnRvU3RyaW5nKCkpWzBdCgpkZWYgcmVwTWF0ZXJpYWxzID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5yZXBsYWNlZE1hdGVyaWFscyddLnRvU3RyaW5nKCkpWzBdCmRlZiByZXFNYXRlcmlhbHMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJlcXVpcmVkTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF0KCmRlZiB0cmFuc2l0aW9uQ2hlY2sgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmNoZWNrQW5kQ29uZmlybSddLnRvU3RyaW5nKCkpWzBdCgpkZWYgbHVtcFN1bVByaWNlID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5sdW1wU3VtUHJpY2UnXS50b1N0cmluZygpKVswXQoKZGVmIGVycm9yTWFuZGF0b3J5RmllbGRzID0gbmV3IEFycmF5TGlzdCgpCmRlZiBlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWRGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIHdhcm5pbmdFbXB0eUZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKQoKLypPUC0xMDM4OiBFc2VndW8gbGEgdmVyaWZpY2EgZGVpIGNhbXBpIG9iYmxpZ2F0b3JpIHNvbG8gc2UgaWwgdGlja2V0IHN1IGN1aSBzdG8gZXNlZ3VlbmRvIGxhIHRyYW5zYXppb25lIG5vbiDDqCBzdGF0byBjaGl1c28gaW4gYXV0b21hdGljbyBkYWwgc2lzdGVtYSovCmxvZy5kZWJ1ZyAiaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKTogIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkKbG9nLmRlYnVnICJjaGVjazogIiArICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKQppZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpPT1udWxsIHx8ICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKSl7CiAgICAvL09QQUFfTFVNUF9TVU1fUFJJQ0UKICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobHVtcFN1bVByaWNlKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobHVtcFN1bVByaWNlKSA9PSAiIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1QcmljZSkudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICBlcnJvcnMgPSB0cnVlCiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLmx1bXBTdW1QcmljZSddLnRvU3RyaW5nKCkpCiAgICB9CgogICAgLy9PUEFBX1JFUExBQ0VEX01BVEVSSUFMUwogICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpID09ICIiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgIGxvZy5kZWJ1ZyAid2FybmluZ3MgdHJ1ZSIKICAgICAgICB3YXJuaW5ncyA9IHRydWUKICAgICAgICB3YXJuaW5nRW1wdHlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLnJlcGxhY2VkTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSkKICAgIH0KICAgIC8vT1BBQV9SRVFVSVJFRF9NQVRFUklBTFMKICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVxTWF0ZXJpYWxzKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVxTWF0ZXJpYWxzKSA9PSAiIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcU1hdGVyaWFscykudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICBsb2cuZGVidWcgIndhcm5pbmdzIHRydWUiCiAgICAgICAgd2FybmluZ3MgPSB0cnVlCiAgICAgICAgd2FybmluZ0VtcHR5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5yZXF1aXJlZE1hdGVyaWFscyddLnRvU3RyaW5nKCkpCiAgICB9CgoKICAgIC8vT1BBQV9BU1NFVAogICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldCk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0KSA9PSAiIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0KS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgIGVycm9ycyA9IHRydWUKICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YuYXNzZXQnXS50b1N0cmluZygpKQogICAgfQogICAgLy9PUEFBX0FTU0VUX1NUQVRVU19QUkUKICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXRTdGF0dXNQcmUpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldFN0YXR1c1ByZSkgPT0gIiIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldFN0YXR1c1ByZSkudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICBlcnJvcnMgPSB0cnVlCiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLmFzc2V0U3RhdHVzUHJlJ10udG9TdHJpbmcoKSkKICAgIH0KICAgIC8vT1BBQV9BU1NFVF9TVEFUVVNfUE9TVAogICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldFN0YXR1c1Bvc3QpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldFN0YXR1c1Bvc3QpID09ICIiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXRTdGF0dXNQb3N0KS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgIGVycm9ycyA9IHRydWUKICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YuYXNzZXRTdGF0dXNQb3N0J10udG9TdHJpbmcoKSkKICAgIH0KICAgIC8vT1BBQV9SSVNLX09OU0lURQogICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyaXNrKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmlzaykgPT0gIiIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyaXNrKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgIGVycm9ycyA9IHRydWUKICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2Yucmlza09uc2l0ZSddLnRvU3RyaW5nKCkpCiAgICB9CiAgICAvL09QQUFfUklTS19ERVNDUklQVElPTgogICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyaXNrKS50b1N0cmluZygpLmVxdWFscygiWWVzIikgJiYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmlza0Rlc2NyaXB0aW9uKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmlza0Rlc2NyaXB0aW9uKSA9PSAiIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJpc2tEZXNjcmlwdGlvbikudG9TdHJpbmcoKS5lcXVhbHMoIiIpKSl7CiAgICAgICAgZXJyb3JzID0gdHJ1ZQogICAgICAgIGVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5yaXNrRGVzY3JpcHRpb24nXS50b1N0cmluZygpKQogICAgfQogICAgLy9PUEFBX0NVU1RPTUVSX1NJR05BVFVSRQogICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0U2lnbmF0dXJlKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VzdFNpZ25hdHVyZSkgPT0gIiIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0U2lnbmF0dXJlKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgIGVycm9ycyA9IHRydWUKICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YuY3VzdG9tZXJTaWduYXR1cmUnXS50b1N0cmluZygpKQogICAgfQogICAgLy9PUEFBX0NVU1RPTUVSX0NPTlRBQ1RfT05TSVRFCiAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1c3RSZWYpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0UmVmKSA9PSAiIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1c3RSZWYpLnRvU3RyaW5nKCkuZXF1YWxzKCIiKSl7CiAgICAgICAgZXJyb3JzID0gdHJ1ZQogICAgICAgIGVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5jdXN0Q29udGFjdE9uc2l0ZSddLnRvU3RyaW5nKCkpCiAgICB9CiAgICAvL09QQUFfVEVDSE5JQ0lBTl9TSUdOQVRVUkUKICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGVjaFNpZ25hdHVyZSk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hTaWduYXR1cmUpID09ICIiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGVjaFNpZ25hdHVyZSkudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICBlcnJvcnMgPSB0cnVlCiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLnRlY2huaWNpYW5TaWduYXR1cmUnXS50b1N0cmluZygpKQogICAgfQogICAgLy8xNS4xMi4yMDIwIEFGIC0gdG9sdGEgb2JibGlnYXRvcmlldMOgIHN1aSBjYW1waSBPUF9LTVMgZSBPUF9UUkFWRUxfSE9VUlMgcG9pY2jDqCBvcmEgbGEgcmljaGllc3RhIHV0ZW50aSDDqCBkaSBpbXBsZW1lbnRhcmU6CiAgICAvL0NpbnppYSBTYWxpdHVybzogZG92cmViYmVybyBlc3NlcmUgb2JibGlnYXRvcmkgbGFkZG92ZSBkYSBjb250cmF0dG8gaWwgZm9ybml0b3JlIG5vbiBoYSBpbCBkaXJpdHRvIGZpc3NvIGRpIGNoaWFtYXRhCiAgICAvL09QQUFfS01TCiAgICAvKmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoa21zKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoa21zKSA9PSAiIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGttcykudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICBlcnJvcnMgPSB0cnVlCiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLmttcyddLnRvU3RyaW5nKCkpCiAgICB9Ki8KICAgIC8vT1BBQV9UUkFWRUxfSE9VUlMKICAgIC8qaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmF2ZWxIKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsSCkgPT0gIiIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmF2ZWxIKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgIGVycm9ycyA9IHRydWUKICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YudHJhdmVsSG91cnMnXS50b1N0cmluZygpKQogICAgfSovCiAgICAvL09QQUFfRVhFQ1VUSU9OX0RBVEUKICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZXhlY3V0aW9uRGF0ZSk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGV4ZWN1dGlvbkRhdGUpID09ICIiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZXhlY3V0aW9uRGF0ZSkudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICBlcnJvcnMgPSB0cnVlCiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLmV4ZWN1dGlvbkRhdGUnXS50b1N0cmluZygpKQogICAgfQoKICAgIC8vSm9iIFN0YXJ0ZWQgKyBKb2IgQ29tcGxldGVkIGRpIG9nbmkgb2dnZXR0byBUZWNoX09uU2l0ZV9SZXBvcnQgYXNzb2NpYXRvIGFsIGNhbXBvIE9QQUFfVEVDSFNfT05TSVRFCiAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hzT25zaXRlKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGVjaHNPbnNpdGUpICE9ICIiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hzT25zaXRlKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qLwogICAgICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50cwogICAgICAgIENsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlIik7ICAKICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CiAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTsKICAgICAgICBkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTsKCiAgICAgICAgZGVmIHRlY2hzT25zaXRlRmllbGQgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hzT25zaXRlKQoJCWxvZy5kZWJ1ZyAidGVjaHNPbnNpdGVGaWVsZDogIiArIHRlY2hzT25zaXRlRmllbGQKICAgICAgICBmb3IodGVjaG5pY2lhbiBpbiB0ZWNoc09uc2l0ZUZpZWxkKXsKICAgICAgICAgICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0CiAgICAgICAgICAgIGRlZiB0ZWNoT25zaXRlPXRlY2huaWNpYW4udG9TdHJpbmcoKQogICAgICAgICAgICBkZWYgdGVjaE9uc2l0ZUtleSA9IHRlY2hPbnNpdGUuc3Vic3RyaW5nKHRlY2hPbnNpdGUuaW5kZXhPZignKCcpKzEsdGVjaE9uc2l0ZS5pbmRleE9mKCcpJykpCiAgICAgICAgICAgIGRlZiB0ZWNoT25zaXRlT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHRlY2hPbnNpdGVLZXkpCiAgICAgICAgICAgIC8vZ2V0ICJKb2IgU3RhcnRlZCIgZm9yIHRoYXQgVGVjaG5pY2lhbgogICAgICAgICAgICBkZWYgb2JUcmlhZ2UKICAgICAgICAgICAgZGVmIHRlY2hKb2JTdGFydGVkCiAgICAgICAgICAgIGRlZiB0ZWNoSm9iQ29tcGxldGVkCiAgICAgICAgICAgIGRlZiB0ZWNoUmVmLCB0ZWNoLCB0ZWNoUmVmS2V5LCB0ZWNoUmVmT2JqZWN0LCB0ZWNoUmVmTmFtZQogICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaE9uc2l0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2hPblNpdGUuam9iU3RhcnRlZCddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hPbnNpdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai50ZWNoT25TaXRlLmpvYlN0YXJ0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkKICAgICAgICAgICAgICAgIHRlY2hKb2JTdGFydGVkID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgbG9nLmRlYnVnIHRlY2hKb2JTdGFydGVkIAogICAgICAgICAgICAvL2dldCAiSm9iIENvbXBsZXRlZCIgZm9yIHRoYXQgVGVjaG5pY2lhbgogICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaE9uc2l0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2hPblNpdGUuam9iQ29tcGxldGVkJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaE9uc2l0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2hPblNpdGUuam9iQ29tcGxldGVkJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpCiAgICAgICAgICAgICAgICB0ZWNoSm9iQ29tcGxldGVkID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgbG9nLmRlYnVnIHRlY2hKb2JDb21wbGV0ZWQKICAgICAgICAgICAgLy9nZXQgIlRlY2huaWNpYW5fUkVGIiBmb3IgdGhhdCBUZWNobmljaWFuCiAgICAgICAgICAgIGxvZy5kZWJ1ZyAidGVjaE9uc2l0ZU9iamVjdDogIiArIHRlY2hPbnNpdGVPYmplY3QKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoT25zaXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoudGVjaE9uc2l0ZS50ZWNobmljaWFuUmVmJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoT25zaXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoudGVjaE9uc2l0ZS50ZWNobmljaWFuUmVmJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpCiAgICAgICAgICAgICAgICB0ZWNoUmVmID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIHRlY2ggPSB0ZWNoUmVmLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyAidGVjaDogIiArIHRlY2gKICAgICAgICAgICAgICAgIHRlY2hSZWZLZXkgPSB0ZWNoLnN1YnN0cmluZyh0ZWNoLmluZGV4T2YoJygnKSsxLHRlY2guaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgbG9nLmRlYnVnICJ0ZWNoUmVmS2V5OiAiICsgdGVjaFJlZktleQogICAgICAgICAgICAgICAgdGVjaFJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihwcm9wZXJ0aWVzWydpc2NoZW1hLmFhJ10udG9TdHJpbmcoKSArICItIiArIHRlY2hSZWZLZXkpCiAgICAgICAgICAgICAgICB0ZWNoUmVmTmFtZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoudGVjaG5pY2lhbi5uYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgIAkJbG9nLmRlYnVnIHRlY2hSZWZOYW1lCgogICAgICAgICAgICBpZighdGVjaEpvYlN0YXJ0ZWQgfHwgIXRlY2hKb2JDb21wbGV0ZWQpewogICAgICAgICAgICAgICAgZXJyb3JzID0gdHJ1ZQogICAgICAgICAgICAgICAgZXJyb3JKb2JTdGFydGVkQ29tcGxldGVkRmllbGRzLmFkZCh0ZWNoUmVmTmFtZS5zdWJzdHJpbmcodGVjaFJlZk5hbWUuaW5kZXhPZignKCcpKzEsdGVjaFJlZk5hbWUuaW5kZXhPZignKScpKSkKICAgICAgICAgICAgfSAgICAKICAgICAgICAgfSAgICAKICAgIH0KCiAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpCgogICAgaWYgKCFlcnJvcnMgJiYgIXdhcm5pbmdzKXsKICAgICAgICByZXR1cm4gdHJ1ZQogICAgfWVsc2V7CiAgICAgICAgaWYoIWVycm9ycyAmJiB3YXJuaW5ncyl7CiAgICAgICAgICAgIC8vU2UgY2kgc29ubyBzb2xvIHdhcm5pbmdzIHZlcmlmaWNvIHNlIGwndXRlbnRlIGhhIGdpw6AgZGljaGlhcmF0byBkaSB2b2xlciBwcm9zZWd1aXJlIGNvbXVucXVlCiAgICAgICAgICAgIC8vIC0gdHJhbnNpdGlvbiBmaWVsZCAiT1BBQV9DSEVDS19BTkRfQ09ORklSTSI9IlllcyIKICAgICAgICAgICAgLy8gLSBpbiBjYXNvIGNvbnRyYXJpbyBpbnZpbyBpIHdhcm5pbmcgYSBGRQoKICAgICAgICAgICAgLy9sb2cuZGVidWcgInRyYW5zaXRpb25DaGVjazogIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKQogICAgICAgICAgICAvL2xvZy5kZWJ1ZyAicmVzdWx0OiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKQogICAgICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykudG9TdHJpbmcoKS5lcXVhbHMoIlllcyIpKXsKICAgICAgICAgICAgICAgIC8vbG9nLmRlYnVnICJyZXR1cm4gdHJ1ZSIKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgZGVmIHdMaXN0ID0gbmV3IEFycmF5TGlzdCgpCgogICAgICAgICAgICAgICAgaWYod2FybmluZ0VtcHR5RmllbGRzLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1FbXB0eSA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZCgiVyIpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKCJDT05GSVJNX0VNUFRZX0ZJRUxEUyIpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKG51bGwpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKHdhcm5pbmdFbXB0eUZpZWxkcykKCiAgICAgICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5KQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIG91dHB1dC5hZGQod0xpc3QpCiAgICAgICAgICAgICAgICBsb2cuZGVidWcgInRocm93IGV4Y2VwdGlvbjogIiArIG91dHB1dC50b1N0cmluZygpCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IlciOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQogICAgICAgICAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJXIiwgb3V0cHV0LnRvU3RyaW5nKCkpICAgCiAgICAgICAgICAgIH0KCiAgICAgICAgfQogICAgICAgIGlmKGVycm9ycyAmJiAhd2FybmluZ3MpewogICAgICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KCkKCiAgICAgICAgICAgIGlmKGVycm9yTWFuZGF0b3J5RmllbGRzLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgZGVmIGVMaXN0TWFuZGF0b3J5ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoIkUiKQogICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKCJNQU5EQVRPUllfRklFTERTIikKICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChudWxsKQogICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKGVycm9yTWFuZGF0b3J5RmllbGRzKQogICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0TWFuZGF0b3J5KQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZihlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWRGaWVsZHMuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICBkZWYgZUxpc3RTdGFydEVuZCA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQoIkUiKQogICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQoIk1JU1NJTkdfT05TSVRFX1NUQVJUX0VORF9ERVRBSUxTIikKICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKG51bGwpCiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kLmFkZChlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWRGaWVsZHMpCiAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RTdGFydEVuZCkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgb3V0cHV0LmFkZChlTGlzdCkKICAgICAgICAgICAgbG9nLmRlYnVnICJ0aHJvdyBleGNlcHRpb246ICIgKyBvdXRwdXQudG9TdHJpbmcoKQogICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IkUiOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQogICAgICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oIkUiLCBvdXRwdXQudG9TdHJpbmcoKSkgICAKICAgICAgICB9CiAgICAgICAgaWYoZXJyb3JzICYmIHdhcm5pbmdzKXsKICAgICAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICBpZihlcnJvck1hbmRhdG9yeUZpZWxkcy5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgIGRlZiBlTGlzdE1hbmRhdG9yeSA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKCJFIikKICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZCgiTUFOREFUT1JZX0ZJRUxEUyIpCiAgICAgICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQobnVsbCkKICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChlcnJvck1hbmRhdG9yeUZpZWxkcykKICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdE1hbmRhdG9yeSkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYoZXJyb3JKb2JTdGFydGVkQ29tcGxldGVkRmllbGRzLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgZGVmIGVMaXN0U3RhcnRFbmQgPSBuZXcgQXJyYXlMaXN0KCkKICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKCJFIikKICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKCJNSVNTSU5HX09OU0lURV9TVEFSVF9FTkRfREVUQUlMUyIpCiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kLmFkZChudWxsKQogICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQoZXJyb3JKb2JTdGFydGVkQ29tcGxldGVkRmllbGRzKQogICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0U3RhcnRFbmQpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKHdhcm5pbmdFbXB0eUZpZWxkcy5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1FbXB0eSA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKCJXIikKICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZCgiQ09ORklSTV9FTVBUWV9GSUVMRFMiKQogICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKG51bGwpCiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQod2FybmluZ0VtcHR5RmllbGRzKQoKICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eSkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgb3V0cHV0LmFkZChlTGlzdCkKICAgICAgICAgICAgb3V0cHV0LmFkZCh3TGlzdCkKICAgICAgICAgICAgbG9nLmRlYnVnICJ0aHJvdyBleGNlcHRpb246ICIgKyBvdXRwdXQudG9TdHJpbmcoKQogICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IldFIjoiJyArIG91dHB1dC50b1N0cmluZygpICsgJyJ9JykKICAgICAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJXRSIsIG91dHB1dC50b1N0cmluZygpKSAgCiAgICAgICAgfQogICAgfQp9Cg==</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
          <arg name="FIELD_SCRIPT_FILE"></arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">9fe0fa5191d4b6a91ba7485380ff8d0a9fda8fe7</arg>
          <arg name="FIELD_NOTES">YCFgT1A6IFJFU1QgQVBJOiBPUCBnZW5lcmF6aW9uZSBSYXBwb3J0byBkaSBpbnRlcnZlbnRv</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxubG9nLmRlYnVnIFwiT25TaXRlIFJlcG9ydCBwZXIgaXNzdWU6IFwiICsgaXNzdWUua2V5XG4vKiBSRVNUIEFQSSBwZXIgR2VuZXJhemlvbmUgQWxsZWdhdG8gUmFwcG9ydG8gZGkgSW50ZXJ2ZW50byAqL1xucmVxdWVzdE1ldGhvZCA9IFwiUFVUXCI7XG4vKlNjcmlwdCBWYXJpYWJsZXMqL1xuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0xNDA2MlwiKVxuXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5cbi8qUmltb3ppb25lIGFsbGVnYXRvIHJhcHBvcnRvIGRpIGludGVydmVudG8gYXBwZW5hIGNyZWF0byovXG4vKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG5cbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTtcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcblxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcblxuQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG5kZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG5cbi8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSBcIiBhcm91bmQgdmFsdWUgKi9cbmRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5OYW1lIExJS0UgXFxcIlJhcHBvcnRvIGRpIGludGVydmVudG9cXFwiIEFORCBcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpICsgXCIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSBcIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIpXCIpOyAvLyBTZWUgdGhlIGNvbXBsZXRlIGxpc3Qgb2YgcG9zc2libGUgSVFMIG9uIHRoZSBJbnNpZ2h0IFF1ZXJ5IExhbmd1YWdlIGRvY3VtZW50YXRpb24gcGFnZVxuLyogSWYgdGhpcyBpcyBhIG1hbmRhdG9yeSBmaWVsZCB5b3Ugc2hvdWxkIGJlIGFibGUgdG8gZG8gdGhpczogKi9cbmxvZy5kZWJ1ZyBcIklRTDogXCIgKyBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5OYW1lIExJS0UgXFxcIlJhcHBvcnRvIGRpIGludGVydmVudG9cXFwiIEFORCBcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpICsgXCIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSBcIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIpXCJcblxuLyohIURhIHJpbXVvdmVyZSBhcHBlbmEgcmlzb2x0aSBpIGJ1ZyEhKi9cbmlmKChvYmplY3RzID09IG51bGwgfHwgb2JqZWN0cy5zaXplPT0wKSAmJiAhaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5wbGFubmVkTWFpbnRlbmFuY2UnXSkpe1xuICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL0FBL3RpY2tldC9cIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIvYXR0YWNobWVudC9vbnNpdGVcIlxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVcmw6IFwiICsgYmFzZVVSTFxuXG4gICAgVVJMIHVybFxuICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcblxuICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkdFTkVSQVRFLU9OU0lURVJFUE9SVFwiKVxuICAgICAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICB9XG5cbn1cbiIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
          <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeQppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQpDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRykKCklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTsKQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpOwpkZWYgcmVxdWVzdE1ldGhvZApkZWYgYmFzZVVSTApsb2cuZGVidWcgIk9uU2l0ZSBSZXBvcnQgcGVyIGlzc3VlOiAiICsgaXNzdWUua2V5Ci8qIFJFU1QgQVBJIHBlciBHZW5lcmF6aW9uZSBBbGxlZ2F0byBSYXBwb3J0byBkaSBJbnRlcnZlbnRvICovCnJlcXVlc3RNZXRob2QgPSAiUFVUIjsKCmJhc2VVUkwgPSAiaHR0cDovLyIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArICIvb3AvcmVzdC9hdXRvbWF0aW9uL0FBL3RpY2tldC8iICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyAiL2F0dGFjaG1lbnQvb25zaXRlIgpsb2cuZGVidWcgImJhc2VVcmw6ICIgKyBiYXNlVVJMCgpVUkwgdXJsCnVybCA9IG5ldyBVUkwoYmFzZVVSTCkKSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpOwpjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eSgiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL2pzb24iKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoIkFjY2VwdCIsICIqLyoiKTsKY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTsKY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpOwpjb25uZWN0aW9uLmNvbm5lY3QoKTsKbG9nLmRlYnVnICJSZXNwb25zZUNvZGU6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkKbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKCmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCmRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKQpkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpCgppZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoIjIwMCIpKXsKICAgIGxvZy5kZWJ1ZyAidXJsOiAiICsgdXJsCiAgICBsb2cuZGVidWcgIlJlc3BvbnNlQ29kZToiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKQogICAgbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKICAgIGVMaXN0RXJyb3JzLmFkZCgiRSIpCiAgICBlTGlzdEVycm9ycy5hZGQoIkdFTkVSQVRFLU9OU0lURVJFUE9SVCIpCiAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyAiICIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpKQogICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncykKICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycykKCiAgICBvdXRwdXQuYWRkKGVMaXN0KQogICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigneyJFIjoiJyArIG91dHB1dC50b1N0cmluZygpICsgJyJ9JykKICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiRSIsIG91dHB1dC50b1N0cmluZygpKQp9Cg==</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="disabled">true</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
          <arg name="FIELD_SCRIPT_FILE"></arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">b734e2c5-1436-43e7-ba9d-53f2ba06c457</arg>
          <arg name="FIELD_NOTES">YCFgQ3JlYXRlIFNOICYgU08gZm9yIG9sZCB0aWNrZXRzICsgZm9yIENvbXBsZXRlZCBkdXJpbmcgTWFpbnRlbmFuY2U=</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuXG5kZWYgU04gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfU0FQX1NFUlZJQ0VfTk9USUZJQ0FUSU9OXCIpWzBdXG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcblxuVVJMIHVybFxuSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvblxuXG5pZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKFNOKSA9PSBudWxsICYmIGlzc3VlLmlzc3VlVHlwZS5uYW1lICE9IFwiUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXRcIil7XG4gICAgcmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuXG4gICAgZGVmIGJvZHlfcmVxID0gW11cbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXG4gICAgICAgIFwic3RhdHVzXCI6IFwiSU5QXCJcbiAgICBdIFxuXG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL3NlcnZpY2Uvbm90aWZpY2F0aW9uXCJcblxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxuICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNOOiBcIiArIGJvZHlfcmVxXG4gICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxuICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgIFxuICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG4gICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcblxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TTi1VUERBVEVcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICB9ZWxzZXtcbiAgICAgICAgLyoqIFNFUlZJQ0UgT1JERVIgQ1JFQVRJT04gKiovXG4gICAgICAgIGJvZHlfcmVxID0gW1xuICAgICAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXlcbiAgICAgICAgXSBcbiAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL29yL3VwZGF0ZS9zZXJ2aWNlL29yZGVyXCJcblxuICAgICAgICBsb2cuZGVidWcgXCJiYXNlVVJMIFNPOiBcIiArIGJhc2VVUkxcbiAgICAgICAgbG9nLmRlYnVnIFwiYm9keV9yZXEgU086IFwiICsgYm9keV9yZXFcbiAgICAgICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgICAgICBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG4gICAgICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgICAgICBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAxXCIpICYmICFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxuICAgIFx0XHRsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICAgICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICBcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtU0FQLVNPLUNSRUFURVwiKVxuICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgIH1cbiAgICB9XG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">37c2d78492ac54794b8917d58342d465c219be98</arg>
          <arg name="FIELD_NOTES">YCFgT1A6IFJFU1QgQVBJOiBPUCBFbWFpbCBOb3RpZmljYXRpb246IE9OU0lURV9SRVBPUlQgLSBvbmx5IElGIE9QQUFfQVVUT01BVElDQUxMWV9DTE9TRUQhPVllcyBBTkQgc2VuZE1haWwhPU5PIE1BSUwgQU5EIGNpIHNvbm8gdGlja2V0IGNvbGxlZ2F0aS4gLS0tLT4gRElTQUJMRUQgc3UgdHJhbnNhemlvbmUgY29tcGxldGUgLSB2aWVuZSBmYXR0byBtYW51YWxtZW50ZSBkYSBTRU5EIE9OU0lURSBSRVBPUlQ=</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGlua1xuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiBhdXRvbWF0aWNhbGx5Q2xvc2VkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q2xvc2VkJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBzZW5kTWFpbFRvID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zZW5kTWFpbFRvJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBzZW5kTWFpbFRvUmVjID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zZW5kTWFpbFRvUmVjaXBpZW50cyddLnRvU3RyaW5nKCkpWzBdXG5kZWYgb25zaXRlUmVwb3J0RGF0ZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi53Zk9uc2l0ZVJlcG9ydCddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5kZWYgcmVsYXRlc0luSXNzdWVMaW5rPWZhbHNlXG5kZWYgcmVsYXRlc091dElzc3VlTGluaz1mYWxzZVxuZGVmIGxpbmtlZFRpY2tldHM9bmV3IEFycmF5TGlzdCgpXG5kZWYgYm9keV9yZXFcbmRlZiBzZW5kbWFpbD10cnVlXG5cbmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCk9PW51bGwgfHwgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIikpe1xuXG4gICAgLypPUC0xMDM4OiB2ZXJpZmljYSB0aWNrZXQgY29sbGVnYXRpKi9cbiAgICBMaXN0PElzc3VlTGluaz4gYWxsSW5Jc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0SW53YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxJbklzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG5cbiAgICAgICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgcmVsYXRlc0luSXNzdWVMaW5rPXRydWVcbiAgICAgICAgICAgIGxpbmtlZFRpY2tldHMuYWRkKGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKS50b1N0cmluZygpKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiSXNzdWUgY29uIHJlbGF0ZXNJbklzc3VlTGlua1wiXG4gICAgICAgIH1cbiAgICB9XG4gICAgTGlzdDxJc3N1ZUxpbms+IGFsbE91dElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgIHJlbGF0ZXNPdXRJc3N1ZUxpbms9dHJ1ZVxuICAgICAgICAgICAgbGlua2VkVGlja2V0cy5hZGQoaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkudG9TdHJpbmcoKSlcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIklzc3VlIGNvbiByZWxhdGVzT3V0SXNzdWVMaW5rXCJcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBsb2cuZGVidWcgXCJpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCk6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKS50b1N0cmluZygpXG4gICAgaWYoKHJlbGF0ZXNJbklzc3VlTGluayB8fCByZWxhdGVzT3V0SXNzdWVMaW5rKSAmJiAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydjZi5vcHRpb24uc2VuZE1haWxUby5ub0VtYWlsJ10udG9TdHJpbmcoKSkgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydjZi5vcHRpb24uc2VuZE1haWxUby5jdXJyZW50UmVwb3J0J10udG9TdHJpbmcoKSkpe1xuICAgICAgICAvL09QLTEwMzg6IGludmlhcmUgc29sbyBsYSBtYWlsIGNvbiBpbCByYXBwb3J0byBkaSBpbnRlcnZlbnRvIGRlbCB0aWNrZXQgY29ycmVudGVcbiAgICAgICAgYm9keV9yZXEgPSBbXG4gICAgICAgICAgICBcInRlbXBsYXRlTmFtZVwiOiBwcm9wZXJ0aWVzWyd0dC5vblNpdGVSZXBvcnQnXS50b1N0cmluZygpLFxuICAgICAgICAgICAgXCJwZWNcIjogZmFsc2UsXG4gICAgICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleSxcbiAgICAgICAgICAgIFwiYWRkaXRpb25hbFJlY2lwaWVudHNcIjogaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvUmVjKS50b1N0cmluZygpXG4gICAgICAgIF1cbiAgICAgICAgLyozMS4wNy4yMDIwIEFGOiBuZWxsYSB0cmFuc2F6aW9uZSBjb21wbGV0ZSBOT04gaW52aWFyZSBtYWlsIGxhIG1haWwgcGVyIGkgdGlja2V0IGNvbiBjb2xsZWdhdGkgLSBpbCByYXBwb3J0byBkaSBpbnRlcnZlbnRvIGRlaSB0aWNrZXQgXCJmaWdsaVwiIHZpZW5lIGdlbmVyYXRvIGRvcG8gbCdpbnZpbyBkZWxsYSBtYWlsIHN1bCBcInBhZHJlXCIgcXVpbmRpIG5vbiB2ZXJyZWJiZSBpbmNsdXNvIG5lbGxhIG1haWwqL1xuICAgICAgICAvKkwnaW52aW8gZGVsbGEgbWFpbCB2ZXJyXHUwMGUwIGZhdHRvIHN1Y2Nlc3NpdmFtZW50ZSByaXNwZXR0byBhbGxhIGNoaXVzdXJhIGNvbiBcIlNlbmQgT25TaXRlIFJlcG9ydFwiKi9cbiAgICAgICAgc2VuZG1haWw9ZmFsc2VcbiAgICB9ZWxzZSBpZigocmVsYXRlc0luSXNzdWVMaW5rIHx8IHJlbGF0ZXNPdXRJc3N1ZUxpbmspICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLm5vRW1haWwnXS50b1N0cmluZygpKSAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLmN1cnJlbnRSZXBvcnQnXS50b1N0cmluZygpKSl7XG4gICAgICAgIC8vT1AtMTAzODogaW52aWFyZSBsYSBtYWlsIGNvbiB0dXR0aSBpIHJhcHBvcnRpIGRpIGludGVydmVudG8gZGVpIHRpY2tldCBjb2xsZWdhdGlcbiAgICAgICAgYm9keV9yZXEgPSBbXG4gICAgICAgICAgICBcInRlbXBsYXRlTmFtZVwiOiBwcm9wZXJ0aWVzWyd0dC5vblNpdGVSZXBvcnQnXS50b1N0cmluZygpLFxuICAgICAgICAgICAgXCJwZWNcIjogZmFsc2UsXG4gICAgICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleSxcbiAgICAgICAgICAgIFwibGlua2VkVGlja2V0c1wiOiBsaW5rZWRUaWNrZXRzLFxuICAgICAgICAgICAgXCJhZGRpdGlvbmFsUmVjaXBpZW50c1wiOiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG9SZWMpLnRvU3RyaW5nKClcbiAgICAgICAgXVxuICAgICAgICAvKjMxLjA3LjIwMjAgQUY6IG5lbGxhIHRyYW5zYXppb25lIGNvbXBsZXRlIE5PTiBpbnZpYXJlIG1haWwgbGEgbWFpbCBwZXIgaSB0aWNrZXQgY29uIGNvbGxlZ2F0aSAtIGlsIHJhcHBvcnRvIGRpIGludGVydmVudG8gZGVpIHRpY2tldCBcImZpZ2xpXCIgdmllbmUgZ2VuZXJhdG8gZG9wbyBsJ2ludmlvIGRlbGxhIG1haWwgc3VsIFwicGFkcmVcIiBxdWluZGkgbm9uIHZlcnJlYmJlIGluY2x1c28gbmVsbGEgbWFpbCovXG4gICAgICAgIC8qTCdpbnZpbyBkZWxsYSBtYWlsIHZlcnJcdTAwZTAgZmF0dG8gc3VjY2Vzc2l2YW1lbnRlIHJpc3BldHRvIGFsbGEgY2hpdXN1cmEgY29uIFwiU2VuZCBPblNpdGUgUmVwb3J0XCIqL1xuICAgICAgICBzZW5kbWFpbD1mYWxzZVxuICAgIH1lbHNlIGlmKCFyZWxhdGVzSW5Jc3N1ZUxpbmsgJiYgIXJlbGF0ZXNPdXRJc3N1ZUxpbmspe1xuICAgICAgICAvKkFGIDIwMjAwNzI5IC0gc3UgRkFBQyBTZXJ2aWNlIGxhIG5vdGlmaWNhIGNvbiBpbCByYXBwb3J0byBkaSBpbnRlcnZlbnRvIHZpZW5lIGludmlhdGEgc29sbyBzdSBlc3BsaWNpdGEgZGVjaXNpb25lIGRlbGwndXRlbnRlIC0gY2hlIHNwaW5nZXJcdTAwZTAgU0VORCBPTlNJVEUgUkVQT1JUIGRvcG8gYXZlciBjaGl1c28gaWwgdGlja2V0LiBRdWluZGkgc2Ugbm9uIGNpIHNvbm8gdGlja2V0IGNvbGxlZ2F0aSBzZXR0aWFtbyBzZW5kbWFpbD1mYWxzZSovXG4gICAgICAgIHNlbmRtYWlsPWZhbHNlXG4gICAgICAgIGJvZHlfcmVxID0gW1xuICAgICAgICAgICAgXCJ0ZW1wbGF0ZU5hbWVcIjogcHJvcGVydGllc1sndHQub25TaXRlUmVwb3J0J10udG9TdHJpbmcoKSxcbiAgICAgICAgICAgIFwicGVjXCI6IGZhbHNlLFxuICAgICAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXG4gICAgICAgICAgICBcImFkZGl0aW9uYWxSZWNpcGllbnRzXCI6IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUb1JlYykudG9TdHJpbmcoKVxuICAgICAgICBdXG4gICAgfWVsc2V7XG4gICAgICAgIC8vT1AtMTAzODogbm9uIGludmlhcmUgbGEgbWFpbFxuICAgICAgICBzZW5kbWFpbD1mYWxzZVxuICAgIH1cbiAgICBcbiAgICBsb2cuZGVidWcgXCJzZW5kbWFpbDogXCIgKyBzZW5kbWFpbFxuICAgIGlmKHNlbmRtYWlsKXtcbiAgICAgICAgLyogUkVTVCBBUEkgcGVyIEludmlvIE5vdGlmaWNhIEVtYWlsIE9OU0lURV9SRVBPUlQgKi9cbiAgICAgICAgcmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuXG4gICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL3RyYW5zYWN0aW9uL21haWwvc2VuZFwiXG4gICAgICAgIFVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgICAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgICAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxOiBcIiArIGJvZHlfcmVxXG4gICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cbiAgICAgICAgbG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuICAgICAgICBcbiAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgIC8vbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuXG4gICAgICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcblxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG4gICAgICAgICAgICBDbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuICAgICAgICAgICAgZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG5cbiAgICAgICAgICAgIC8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbiAgICAgICAgICAgIENsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTtcbiAgICAgICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4gICAgICAgICAgICAvKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbiAgICAgICAgICAgIENsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpO1xuICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcblxuICAgICAgICAgICAgLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbiAgICAgICAgICAgIENsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcblxuICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG4gICAgICAgICAgICBkZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG5cbiAgICAgICAgICAgIC8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSBcIiBhcm91bmQgdmFsdWUgKi9cbiAgICAgICAgICAgIC8qUk9MTEJBQ0sqL1xuICAgICAgICAgICAgLypSaW1vemlvbmUgYWxsZWdhdG8gcmFwcG9ydG8gZGkgaW50ZXJ2ZW50byBhcHBlbmEgY3JlYXRvKi9cbiAgICAgICAgICAgIGRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5cXFwiTmFtZVxcXCIgPSBcXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5vYmpzLnJhcHBJbnRGQUFDJ10udG9TdHJpbmcoKSArIFwiXFxcIiBBTkQgXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSArIFwiIT10cnVlIEFORCBvYmplY3QgSEFWSU5HIGNvbm5lY3RlZFRpY2tldHMoa2V5ID0gXCIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArIFwiKVwiKTsgLy8gU2VlIHRoZSBjb21wbGV0ZSBsaXN0IG9mIHBvc3NpYmxlIElRTCBvbiB0aGUgSW5zaWdodCBRdWVyeSBMYW5ndWFnZSBkb2N1bWVudGF0aW9uIHBhZ2VcbiAgICAgICAgICAgIC8qIElmIHRoaXMgaXMgYSBtYW5kYXRvcnkgZmllbGQgeW91IHNob3VsZCBiZSBhYmxlIHRvIGRvIHRoaXM6ICovXG4gICAgICAgICAgICAvL2xvZy5pbmZvKFwiSW5zaWdodCBvYmplY3Q6IFwiICsgb2JqZWN0c1swXSk7XG5cbiAgICAgICAgICAgIGlmKG9iamVjdHNbMF0pe1xuICAgICAgICAgICAgICAgIC8qIFVQREFURSBPSkJFQ1QgREVMRVRFRCBWQUxVRSAqL1xuICAgICAgICAgICAgICAgIGRlZiBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihvYmplY3RzWzBdLmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkgIFxuICAgICAgICAgICAgICAgIGRlZiB2YWx1ZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuXG4gICAgICAgICAgICAgICAgZGVmIHZhbHVlQmVhbiA9IG9iVHJpYWdlLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpXG4gICAgICAgICAgICAgICAgdmFsdWVCZWFuLnNldFZhbHVlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlLmdldE9iamVjdFR5cGVBdHRyaWJ1dGVJZCgpKSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAvKkNsZWFuIGFjdHVhbCB2YWx1ZSovXG4gICAgICAgICAgICAgICAgdmFsdWUuY2xlYXIoKVxuICAgICAgICAgICAgICAgIHZhbHVlLmFkZCh2YWx1ZUJlYW4pO1xuICAgICAgICAgICAgICAgIG9iVHJpYWdlLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWUpXG5cbiAgICAgICAgICAgICAgICAvL1VwZGF0ZSBPSkJFQ1QgYXR0cmlidXRlIHZhbHVlXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiMS4gQ291bGQgbm90IHVwZGF0ZSBvYmplY3QgYXR0cmlidXRlIGR1ZSB0byB2YWxpZGF0aW9uIGV4Y2VwdGlvbjpcIiArIHZpZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLypSb2xsYmFjayBjb250YWJpbGl6emF6aW9uZSBpbnRlcnZlbnRvKi9cbiAgICAgICAgICAgIC8qQ2FuY2VsbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBPblNpdGVfUmF0ZV9SZXBvcnQgcmVnaXN0cmF0aSBuZWkgY2FtcGkgT1BBQV9MVU1QX1NVTV9SQVRFUywgT1BBQV9VTkFfVEFOVFVNX1JBVEVTLCBPUEFBX1RSQVZFTF9SQVRFUywgT1BBQV9MQUJPVVJfUkFURVMqL1xuICAgICAgICAgICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovXG5cbiAgICAgICAgICAgIC8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSBcIiBhcm91bmQgdmFsdWUgKi9cbiAgICAgICAgICAgIG9iamVjdHMgPSBpcWxGYWNhZGUuZmluZE9iamVjdHNCeUlRTEFuZFNjaGVtYShPUEFBLCBcIm9iamVjdFR5cGUgPSBcIiArIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydCddLnRvU3RyaW5nKCkgKyBcIiBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleT1cIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIpIEFORCBcXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyBcIlxcXCIgIT0gdHJ1ZVwiKTsgLy8gU2VlIHRoZSBjb21wbGV0ZSBsaXN0IG9mIHBvc3NpYmxlIElRTCBvbiB0aGUgSW5zaWdodCBRdWVyeSBMYW5ndWFnZSBkb2N1bWVudGF0aW9uIHBhZ2VcbiAgICAgICAgICAgIC8qIElmIHRoaXMgaXMgYSBtYW5kYXRvcnkgZmllbGQgeW91IHNob3VsZCBiZSBhYmxlIHRvIGRvIHRoaXM6ICovXG4gICAgICAgICAgICAvL2xvZy5pbmZvKFwiSW5zaWdodCBvYmplY3RzIGRhIGNhbmNlbGxhcmU6IFwiICsgb2JqZWN0cyk7XG5cbiAgICAgICAgICAgIGZvcihvYmogaW4gb2JqZWN0cyl7XG4gICAgICAgICAgICAgICAgLyogREVMRVRFIENPTk5FQ1RFRCBPQkpFQ1RTICovXG4gICAgICAgICAgICAgICAgb2JqZWN0RmFjYWRlLmRlbGV0ZU9iamVjdEJlYW4ob2JqLmdldElkKCkpOyAgXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qQ2FuY2VsbGFyZSBnbGkgaW1wb3J0aSBmb3JuaXRvcmUsIGNsaWVudGUgZSBpIHRvdGFsaSBzdSB0dXR0aSBnbGkgb2dnZXR0aSBDb21wb25lbnQgaW4gT1BBQV9SRVBMQUNFRF9NQVRFUklBTFMqL1xuICAgICAgICAgICAgZGVmIHJlcE1hdGVyaWFscyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YucmVwbGFjZWRNYXRlcmlhbHMnXS50b1N0cmluZygpKVswXVxuICAgICAgICAgICAgZGVmIHJlcE1hdExpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscylcblxuICAgICAgICAgICAgZm9yKG1hdCBpbiByZXBNYXRMaXN0KXtcbiAgICAgICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5kIGdldCBvYmplY3RcbiAgICAgICAgICAgICAgICBkZWYgY29tcG9uZW50PW1hdC50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgZGVmIGNvbXBvbmVudEtleSA9IGNvbXBvbmVudC5zdWJzdHJpbmcoY29tcG9uZW50LmluZGV4T2YoJygnKSsxLGNvbXBvbmVudC5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgZGVmIGNvbXBvbmVudE9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihjb21wb25lbnRLZXkpXG4gICAgICAgICAgICAgICAgLy9zZXQgXCJBUFBMSUVEX1RPXCIsIFwiQUNDT1VOVElOR19TVVBQTElFUl9NQVRFUklBTF9SRUZcIiwgXCJBQ0NPVU5USU5HX0NVU1RPTUVSX01BVEVSSUFMX1JFRlwiLCBcIlRPVEFMX0FNT1VOVF9TVVBQTElFUlwiLCBcIlRPVEFMX0FNT1VOVF9DVVNUT01FUlwiIHRvIG51bGwgZm9yIHRoYXQgY29tcG9uZW50XG5cbiAgICAgICAgICAgICAgICAvL0FQUExJRURfVE9cbiAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgICAgICAgICAgZGVmIG9iVHJpYWdlQXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICAgICAgZGVmIHZhbHVlQXBwbGllZFRvID0gb2JUcmlhZ2VBcHBsaWVkVG8uZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuIFwidmFsdWVBcHBsaWVkVG86IFwiICsgdmFsdWVBcHBsaWVkVG9cbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlQXBwbGllZFRvLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVBcHBsaWVkVG8uY2xlYXIoKSBcblxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZUFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5kZWxldGVPYmplY3RBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlQXBwbGllZFRvLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpeyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZXJyb3IoXCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOlwiICsgdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL0FDQ09VTlRJTkdfU1VQUExJRVJfTUFURVJJQUxfUkVGXG4gICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hY2NvdW50aW5nU3VwcE1hdGVyaWFsJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgICAgICBkZWYgb2JUcmlhZ2VNYXRTID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hY2NvdW50aW5nU3VwcE1hdGVyaWFsJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgICAgIGRlZiB2YWx1ZU1hdFMgPSBvYlRyaWFnZU1hdFMuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuIFwidmFsdWVNYXRTOiBcIiArIHZhbHVlTWF0U1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVNYXRTLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVNYXRTLmNsZWFyKCkgXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2VNYXRTID0gb2JqZWN0RmFjYWRlLmRlbGV0ZU9iamVjdEF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2VNYXRTLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpeyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZXJyb3IoXCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOlwiICsgdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL0FDQ09VTlRJTkdfQ1VTVE9NRVJfTUFURVJJQUxfUkVGXG4gICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hY2NvdW50aW5nQ3VzdE1hdGVyaWFsJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgICAgICBkZWYgb2JUcmlhZ2VNYXRDID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hY2NvdW50aW5nQ3VzdE1hdGVyaWFsJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgICAgIGRlZiB2YWx1ZU1hdEMgPSBvYlRyaWFnZU1hdEMuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuIFwidmFsdWVNYXRDOiBcIiArIHZhbHVlTWF0Q1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVNYXRDLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVNYXRDLmNsZWFyKCkgXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2VNYXRDID0gb2JqZWN0RmFjYWRlLmRlbGV0ZU9iamVjdEF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2VNYXRDLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpeyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZXJyb3IoXCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOlwiICsgdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy9UT1RBTF9BTU9VTlRfU1VQUExJRVJcbiAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdFN1cHAnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgICAgIGRlZiBvYlRyaWFnZVRvdFMgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdFN1cHAnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICAgICAgZGVmIHZhbHVlVG90UyA9IG9iVHJpYWdlVG90Uy5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4gXCJ2YWx1ZVRvdFM6IFwiICsgdmFsdWVUb3RTXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZVRvdFMuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVRvdFMuY2xlYXIoKSBcblxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZVRvdFMgPSBvYmplY3RGYWNhZGUuZGVsZXRlT2JqZWN0QXR0cmlidXRlQmVhbihvYlRyaWFnZVRvdFMuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSl7IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5lcnJvcihcIkNvdWxkIG5vdCB1cGRhdGUgb2JqZWN0IGF0dHJpYnV0ZSBkdWUgdG8gdmFsaWRhdGlvbiBleGNlcHRpb246XCIgKyB2aWUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vVE9UQUxfQU1PVU5UX0NVU1RPTUVSXG4gICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RDdXN0J10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgICAgICBkZWYgb2JUcmlhZ2VUb3RDID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RDdXN0J10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgICAgIGRlZiB2YWx1ZVRvdEMgPSBvYlRyaWFnZVRvdEMuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuIFwidmFsdWVUb3RDOiBcIiArIHZhbHVlVG90Q1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVUb3RDLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVUb3RDLmNsZWFyKCkgXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2VUb3RDID0gb2JqZWN0RmFjYWRlLmRlbGV0ZU9iamVjdEF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2VUb3RDLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpeyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZXJyb3IoXCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOlwiICsgdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ICAgIFxuXG4gICAgICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgICAgICBsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXG5cbiAgICAgICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICAgICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICBcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiU0VORE1BSUxcIilcbiAgICAgICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKSlcbiAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChqc29uX29iamVjdC5tZXNzYWdlKVxuICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgLypMJ2VtYWlsIFx1MDBlOCBzdGF0YSBpbnZpYXRhIGNvcnJldHRhbWVudGUsIGFnZ2lvcm5vIGlsIGNhbXBvIE9OU0lURV9SRVBPUlQgY29uIGxhIGRhdGEgY29ycmVudGUqL1xuXG4gICAgICAgICAgICAvLyBsb2cud2FybiBcImlzc3VlIFwiK2lzc3VlLmdldEtleSgpXG4gICAgICAgICAgICBkZWYgY2Z2ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShvbnNpdGVSZXBvcnREYXRlKVxuICAgICAgICAgICAgaWYgKCFjZnYpIHtcbiAgICAgICAgICAgICAgZGVmIHQwICA9IG5ldyBqYXZhLnNxbC5UaW1lc3RhbXAoU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkpXG4gICAgICAgICAgICAgIGxvZy53YXJuIFwiU3RhcnRUaW1lID0+ICdcIit0MC50b1N0cmluZygpK1wiJ1wiXG4gICAgICAgICAgICAgIGRlZiBtdiA9IG5ldyBNb2RpZmllZFZhbHVlKG9uc2l0ZVJlcG9ydERhdGUsIHQwKVxuICAgICAgICAgICAgICBkZWYgY2ggPSBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKClcbiAgICAgICAgICAgICAgb25zaXRlUmVwb3J0RGF0ZS51cGRhdGVWYWx1ZShudWxsLCBpc3N1ZSwgbXYsIGNoKSBcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGxvZy53YXJuIFwiU3RhcnRUaW1lID09ICdcIitjZnYudG9TdHJpbmcoKStcIidcIlxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
          <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWUKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS51dGlsLkRlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvbgppbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CkNhdGVnb3J5IGxvZyA9IENhdGVnb3J5LmdldEluc3RhbmNlKCJjb20ub25yZXNvbHZlLmppcmEuZ3Jvb3Z5LlBvc3RGdW5jdGlvbiIpCmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKQoKSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpOwpDdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7CmRlZiBhdXRvbWF0aWNhbGx5Q2xvc2VkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q2xvc2VkJ10udG9TdHJpbmcoKSlbMF0KZGVmIHNlbmRNYWlsVG8gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnNlbmRNYWlsVG8nXS50b1N0cmluZygpKVswXQpkZWYgc2VuZE1haWxUb1JlYyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yuc2VuZE1haWxUb1JlY2lwaWVudHMnXS50b1N0cmluZygpKVswXQpkZWYgb25zaXRlUmVwb3J0RGF0ZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi53Zk9uc2l0ZVJlcG9ydCddLnRvU3RyaW5nKCkpWzBdCgpkZWYgcmVxdWVzdE1ldGhvZApkZWYgYmFzZVVSTAoKaW50IE9QQUEgPSBwcm9wZXJ0aWVzWydpc2NoZW1hLmFhLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKQppbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpCmRlZiByZWxhdGVzSW5Jc3N1ZUxpbms9ZmFsc2UKZGVmIHJlbGF0ZXNPdXRJc3N1ZUxpbms9ZmFsc2UKZGVmIGxpbmtlZFRpY2tldHM9bmV3IEFycmF5TGlzdCgpCmRlZiBib2R5X3JlcQpkZWYgc2VuZG1haWw9dHJ1ZQoKaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKT09bnVsbCB8fCAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKS50b1N0cmluZygpLmVxdWFscygiWWVzIikpewoKICAgIC8qT1AtMTAzODogdmVyaWZpY2EgdGlja2V0IGNvbGxlZ2F0aSovCiAgICBMaXN0PElzc3VlTGluaz4gYWxsSW5Jc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0SW53YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSkKICAgIGZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbEluSXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHsKICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpOwoKICAgICAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgIHJlbGF0ZXNJbklzc3VlTGluaz10cnVlCiAgICAgICAgICAgIGxpbmtlZFRpY2tldHMuYWRkKGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKS50b1N0cmluZygpKQogICAgICAgICAgICBsb2cuZGVidWcgIklzc3VlIGNvbiByZWxhdGVzSW5Jc3N1ZUxpbmsiCiAgICAgICAgfQogICAgfQogICAgTGlzdDxJc3N1ZUxpbms+IGFsbE91dElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSkKICAgIGZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbE91dElzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7CiAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTsKCiAgICAgICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICByZWxhdGVzT3V0SXNzdWVMaW5rPXRydWUKICAgICAgICAgICAgbGlua2VkVGlja2V0cy5hZGQoaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkudG9TdHJpbmcoKSkKICAgICAgICAgICAgbG9nLmRlYnVnICJJc3N1ZSBjb24gcmVsYXRlc091dElzc3VlTGluayIKICAgICAgICB9CiAgICB9CiAgICAKICAgIGxvZy5kZWJ1ZyAiaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKS50b1N0cmluZygpOiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKS50b1N0cmluZygpCiAgICBpZigocmVsYXRlc0luSXNzdWVMaW5rIHx8IHJlbGF0ZXNPdXRJc3N1ZUxpbmspICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLm5vRW1haWwnXS50b1N0cmluZygpKSAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLmN1cnJlbnRSZXBvcnQnXS50b1N0cmluZygpKSl7CiAgICAgICAgLy9PUC0xMDM4OiBpbnZpYXJlIHNvbG8gbGEgbWFpbCBjb24gaWwgcmFwcG9ydG8gZGkgaW50ZXJ2ZW50byBkZWwgdGlja2V0IGNvcnJlbnRlCiAgICAgICAgYm9keV9yZXEgPSBbCiAgICAgICAgICAgICJ0ZW1wbGF0ZU5hbWUiOiBwcm9wZXJ0aWVzWyd0dC5vblNpdGVSZXBvcnQnXS50b1N0cmluZygpLAogICAgICAgICAgICAicGVjIjogZmFsc2UsCiAgICAgICAgICAgICJpc3N1ZUtleSI6IGlzc3VlLmtleSwKICAgICAgICAgICAgImFkZGl0aW9uYWxSZWNpcGllbnRzIjogaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvUmVjKS50b1N0cmluZygpCiAgICAgICAgXQogICAgICAgIC8qMzEuMDcuMjAyMCBBRjogbmVsbGEgdHJhbnNhemlvbmUgY29tcGxldGUgTk9OIGludmlhcmUgbWFpbCBsYSBtYWlsIHBlciBpIHRpY2tldCBjb24gY29sbGVnYXRpIC0gaWwgcmFwcG9ydG8gZGkgaW50ZXJ2ZW50byBkZWkgdGlja2V0ICJmaWdsaSIgdmllbmUgZ2VuZXJhdG8gZG9wbyBsJ2ludmlvIGRlbGxhIG1haWwgc3VsICJwYWRyZSIgcXVpbmRpIG5vbiB2ZXJyZWJiZSBpbmNsdXNvIG5lbGxhIG1haWwqLwogICAgICAgIC8qTCdpbnZpbyBkZWxsYSBtYWlsIHZlcnLDoCBmYXR0byBzdWNjZXNzaXZhbWVudGUgcmlzcGV0dG8gYWxsYSBjaGl1c3VyYSBjb24gIlNlbmQgT25TaXRlIFJlcG9ydCIqLwogICAgICAgIHNlbmRtYWlsPWZhbHNlCiAgICB9ZWxzZSBpZigocmVsYXRlc0luSXNzdWVMaW5rIHx8IHJlbGF0ZXNPdXRJc3N1ZUxpbmspICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLm5vRW1haWwnXS50b1N0cmluZygpKSAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLmN1cnJlbnRSZXBvcnQnXS50b1N0cmluZygpKSl7CiAgICAgICAgLy9PUC0xMDM4OiBpbnZpYXJlIGxhIG1haWwgY29uIHR1dHRpIGkgcmFwcG9ydGkgZGkgaW50ZXJ2ZW50byBkZWkgdGlja2V0IGNvbGxlZ2F0aQogICAgICAgIGJvZHlfcmVxID0gWwogICAgICAgICAgICAidGVtcGxhdGVOYW1lIjogcHJvcGVydGllc1sndHQub25TaXRlUmVwb3J0J10udG9TdHJpbmcoKSwKICAgICAgICAgICAgInBlYyI6IGZhbHNlLAogICAgICAgICAgICAiaXNzdWVLZXkiOiBpc3N1ZS5rZXksCiAgICAgICAgICAgICJsaW5rZWRUaWNrZXRzIjogbGlua2VkVGlja2V0cywKICAgICAgICAgICAgImFkZGl0aW9uYWxSZWNpcGllbnRzIjogaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvUmVjKS50b1N0cmluZygpCiAgICAgICAgXQogICAgICAgIC8qMzEuMDcuMjAyMCBBRjogbmVsbGEgdHJhbnNhemlvbmUgY29tcGxldGUgTk9OIGludmlhcmUgbWFpbCBsYSBtYWlsIHBlciBpIHRpY2tldCBjb24gY29sbGVnYXRpIC0gaWwgcmFwcG9ydG8gZGkgaW50ZXJ2ZW50byBkZWkgdGlja2V0ICJmaWdsaSIgdmllbmUgZ2VuZXJhdG8gZG9wbyBsJ2ludmlvIGRlbGxhIG1haWwgc3VsICJwYWRyZSIgcXVpbmRpIG5vbiB2ZXJyZWJiZSBpbmNsdXNvIG5lbGxhIG1haWwqLwogICAgICAgIC8qTCdpbnZpbyBkZWxsYSBtYWlsIHZlcnLDoCBmYXR0byBzdWNjZXNzaXZhbWVudGUgcmlzcGV0dG8gYWxsYSBjaGl1c3VyYSBjb24gIlNlbmQgT25TaXRlIFJlcG9ydCIqLwogICAgICAgIHNlbmRtYWlsPWZhbHNlCiAgICB9ZWxzZSBpZighcmVsYXRlc0luSXNzdWVMaW5rICYmICFyZWxhdGVzT3V0SXNzdWVMaW5rKXsKICAgICAgICAvKkFGIDIwMjAwNzI5IC0gc3UgRkFBQyBTZXJ2aWNlIGxhIG5vdGlmaWNhIGNvbiBpbCByYXBwb3J0byBkaSBpbnRlcnZlbnRvIHZpZW5lIGludmlhdGEgc29sbyBzdSBlc3BsaWNpdGEgZGVjaXNpb25lIGRlbGwndXRlbnRlIC0gY2hlIHNwaW5nZXLDoCBTRU5EIE9OU0lURSBSRVBPUlQgZG9wbyBhdmVyIGNoaXVzbyBpbCB0aWNrZXQuIFF1aW5kaSBzZSBub24gY2kgc29ubyB0aWNrZXQgY29sbGVnYXRpIHNldHRpYW1vIHNlbmRtYWlsPWZhbHNlKi8KICAgICAgICBzZW5kbWFpbD1mYWxzZQogICAgICAgIGJvZHlfcmVxID0gWwogICAgICAgICAgICAidGVtcGxhdGVOYW1lIjogcHJvcGVydGllc1sndHQub25TaXRlUmVwb3J0J10udG9TdHJpbmcoKSwKICAgICAgICAgICAgInBlYyI6IGZhbHNlLAogICAgICAgICAgICAiaXNzdWVLZXkiOiBpc3N1ZS5rZXksCiAgICAgICAgICAgICJhZGRpdGlvbmFsUmVjaXBpZW50cyI6IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUb1JlYykudG9TdHJpbmcoKQogICAgICAgIF0KICAgIH1lbHNlewogICAgICAgIC8vT1AtMTAzODogbm9uIGludmlhcmUgbGEgbWFpbAogICAgICAgIHNlbmRtYWlsPWZhbHNlCiAgICB9CiAgICAKICAgIGxvZy5kZWJ1ZyAic2VuZG1haWw6ICIgKyBzZW5kbWFpbAogICAgaWYoc2VuZG1haWwpewogICAgICAgIC8qIFJFU1QgQVBJIHBlciBJbnZpbyBOb3RpZmljYSBFbWFpbCBPTlNJVEVfUkVQT1JUICovCiAgICAgICAgcmVxdWVzdE1ldGhvZCA9ICJQT1NUIjsKCiAgICAgICAgYmFzZVVSTCA9ICJodHRwOi8vIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgIi9vcC9yZXN0L2ppcmEvQUEvdHJhbnNhY3Rpb24vbWFpbC9zZW5kIgogICAgICAgIFVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpCiAgICAgICAgSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTsKICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7CiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLTgiKTsKICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eSgiQWNjZXB0IiwgIiovKiIpOwogICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7CiAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpOwogICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtCiAgICAgICAgbG9nLmRlYnVnICJib2R5X3JlcTogIiArIGJvZHlfcmVxCiAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcigiVVRGLTgiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH0KICAgICAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0KICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTsKICAgICAgICAKICAgICAgICBsb2cuZGVidWcgInVybDogIiArIHVybAogICAgICAgIGxvZy5kZWJ1ZyAiUmVzcG9uc2VDb2RlOiIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpCiAgICAgICAgLy9sb2cuZGVidWcgIlJlc3BvbnNlTWVzc2FnZToiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKQoKICAgICAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKQoKICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoIjIwMCIpKXsKICAgICAgICAgICAgbG9nLmRlYnVnICJ1cmw6ICIgKyB1cmwKICAgICAgICAgICAgbG9nLmRlYnVnICJSZXNwb25zZUNvZGU6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkKICAgICAgICAgICAgbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKCiAgICAgICAgICAgIAogICAgICAgICAgICAvKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovCiAgICAgICAgICAgIENsYXNzIGlxbEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuSVFMRmFjYWRlIik7IAogICAgICAgICAgICBkZWYgaXFsRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKGlxbEZhY2FkZUNsYXNzKTsKCiAgICAgICAgICAgIC8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi8KICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGUiKTsKICAgICAgICAgICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7CgogICAgICAgICAgICAvKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi8KICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0VHlwZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUZhY2FkZSIpOwogICAgICAgICAgICBkZWYgb2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpOwoKICAgICAgICAgICAgLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi8KICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSIpOwogICAgICAgICAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpOwoKICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuc2VydmljZXMubW9kZWwuZmFjdG9yeS5PYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeSIpOwogICAgICAgICAgICBkZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7CgogICAgICAgICAgICAvKiBTcGVjaWZ5IHRoZSBzY2hlbWEgaWQgYXMgd2VsbCBhcyB0aGUgSVFMIHRoYXQgd2lsbCBmZXRjaCBvYmplY3RzLiBJbiB0aGlzIGNhc2UgYWxsIG9iamVjdHMgd2l0aCBOYW1lIG1hdGNoaW5nIHRoZSB2YWx1ZUNGLCBiZSBzdXJlIHRvIGluY2x1ZGUgIiBhcm91bmQgdmFsdWUgKi8KICAgICAgICAgICAgLypST0xMQkFDSyovCiAgICAgICAgICAgIC8qUmltb3ppb25lIGFsbGVnYXRvIHJhcHBvcnRvIGRpIGludGVydmVudG8gYXBwZW5hIGNyZWF0byovCiAgICAgICAgICAgIGRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCAiXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuY2F0ZWdvcnlSZWYnXS50b1N0cmluZygpICsgIlwiLlwiTmFtZVwiID0gXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkub2Jqcy5yYXBwSW50RkFBQyddLnRvU3RyaW5nKCkgKyAiXCIgQU5EICIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSArICIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSAiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyAiKSIpOyAvLyBTZWUgdGhlIGNvbXBsZXRlIGxpc3Qgb2YgcG9zc2libGUgSVFMIG9uIHRoZSBJbnNpZ2h0IFF1ZXJ5IExhbmd1YWdlIGRvY3VtZW50YXRpb24gcGFnZQogICAgICAgICAgICAvKiBJZiB0aGlzIGlzIGEgbWFuZGF0b3J5IGZpZWxkIHlvdSBzaG91bGQgYmUgYWJsZSB0byBkbyB0aGlzOiAqLwogICAgICAgICAgICAvL2xvZy5pbmZvKCJJbnNpZ2h0IG9iamVjdDogIiArIG9iamVjdHNbMF0pOwoKICAgICAgICAgICAgaWYob2JqZWN0c1swXSl7CiAgICAgICAgICAgICAgICAvKiBVUERBVEUgT0pCRUNUIERFTEVURUQgVkFMVUUgKi8KICAgICAgICAgICAgICAgIGRlZiBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihvYmplY3RzWzBdLmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkgIAogICAgICAgICAgICAgICAgZGVmIHZhbHVlID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpCgogICAgICAgICAgICAgICAgZGVmIHZhbHVlQmVhbiA9IG9iVHJpYWdlLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpCiAgICAgICAgICAgICAgICB2YWx1ZUJlYW4uc2V0VmFsdWUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2UuZ2V0T2JqZWN0VHlwZUF0dHJpYnV0ZUlkKCkpLCB0cnVlKQogICAgICAgICAgICAgICAgLypDbGVhbiBhY3R1YWwgdmFsdWUqLwogICAgICAgICAgICAgICAgdmFsdWUuY2xlYXIoKQogICAgICAgICAgICAgICAgdmFsdWUuYWRkKHZhbHVlQmVhbik7CiAgICAgICAgICAgICAgICBvYlRyaWFnZS5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKHZhbHVlKQoKICAgICAgICAgICAgICAgIC8vVXBkYXRlIE9KQkVDVCBhdHRyaWJ1dGUgdmFsdWUKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHsKICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiMS4gQ291bGQgbm90IHVwZGF0ZSBvYmplY3QgYXR0cmlidXRlIGR1ZSB0byB2YWxpZGF0aW9uIGV4Y2VwdGlvbjoiICsgdmllLmdldE1lc3NhZ2UoKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8qUm9sbGJhY2sgY29udGFiaWxpenphemlvbmUgaW50ZXJ2ZW50byovCiAgICAgICAgICAgIC8qQ2FuY2VsbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBPblNpdGVfUmF0ZV9SZXBvcnQgcmVnaXN0cmF0aSBuZWkgY2FtcGkgT1BBQV9MVU1QX1NVTV9SQVRFUywgT1BBQV9VTkFfVEFOVFVNX1JBVEVTLCBPUEFBX1RSQVZFTF9SQVRFUywgT1BBQV9MQUJPVVJfUkFURVMqLwogICAgICAgICAgICAvKkNpY2xhcmUgdHV0dGkgZ2xpIG9nZ2V0dGkgYXNzb2NpYXRpIGFsIGNhbXBvKi8KCiAgICAgICAgICAgIC8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSAiIGFyb3VuZCB2YWx1ZSAqLwogICAgICAgICAgICBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoT1BBQSwgIm9iamVjdFR5cGUgPSAiICsgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0J10udG9TdHJpbmcoKSArICIgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXk9IiArIGlzc3VlLmtleS50b1N0cmluZygpICsgIikgQU5EIFwiIiArIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSArICJcIiAhPSB0cnVlIik7IC8vIFNlZSB0aGUgY29tcGxldGUgbGlzdCBvZiBwb3NzaWJsZSBJUUwgb24gdGhlIEluc2lnaHQgUXVlcnkgTGFuZ3VhZ2UgZG9jdW1lbnRhdGlvbiBwYWdlCiAgICAgICAgICAgIC8qIElmIHRoaXMgaXMgYSBtYW5kYXRvcnkgZmllbGQgeW91IHNob3VsZCBiZSBhYmxlIHRvIGRvIHRoaXM6ICovCiAgICAgICAgICAgIC8vbG9nLmluZm8oIkluc2lnaHQgb2JqZWN0cyBkYSBjYW5jZWxsYXJlOiAiICsgb2JqZWN0cyk7CgogICAgICAgICAgICBmb3Iob2JqIGluIG9iamVjdHMpewogICAgICAgICAgICAgICAgLyogREVMRVRFIENPTk5FQ1RFRCBPQkpFQ1RTICovCiAgICAgICAgICAgICAgICBvYmplY3RGYWNhZGUuZGVsZXRlT2JqZWN0QmVhbihvYmouZ2V0SWQoKSk7ICAKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLypDYW5jZWxsYXJlIGdsaSBpbXBvcnRpIGZvcm5pdG9yZSwgY2xpZW50ZSBlIGkgdG90YWxpIHN1IHR1dHRpIGdsaSBvZ2dldHRpIENvbXBvbmVudCBpbiBPUEFBX1JFUExBQ0VEX01BVEVSSUFMUyovCiAgICAgICAgICAgIGRlZiByZXBNYXRlcmlhbHMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJlcGxhY2VkTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF0KICAgICAgICAgICAgZGVmIHJlcE1hdExpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykKCiAgICAgICAgICAgIGZvcihtYXQgaW4gcmVwTWF0TGlzdCl7CiAgICAgICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5kIGdldCBvYmplY3QKICAgICAgICAgICAgICAgIGRlZiBjb21wb25lbnQ9bWF0LnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIGRlZiBjb21wb25lbnRLZXkgPSBjb21wb25lbnQuc3Vic3RyaW5nKGNvbXBvbmVudC5pbmRleE9mKCcoJykrMSxjb21wb25lbnQuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgZGVmIGNvbXBvbmVudE9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihjb21wb25lbnRLZXkpCiAgICAgICAgICAgICAgICAvL3NldCAiQVBQTElFRF9UTyIsICJBQ0NPVU5USU5HX1NVUFBMSUVSX01BVEVSSUFMX1JFRiIsICJBQ0NPVU5USU5HX0NVU1RPTUVSX01BVEVSSUFMX1JFRiIsICJUT1RBTF9BTU9VTlRfU1VQUExJRVIiLCAiVE9UQUxfQU1PVU5UX0NVU1RPTUVSIiB0byBudWxsIGZvciB0aGF0IGNvbXBvbmVudAoKICAgICAgICAgICAgICAgIC8vQVBQTElFRF9UTwogICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hcHBsaWVkVG8nXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICAgICAgZGVmIG9iVHJpYWdlQXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkKICAgICAgICAgICAgICAgICAgICBkZWYgdmFsdWVBcHBsaWVkVG8gPSBvYlRyaWFnZUFwcGxpZWRUby5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkKICAgICAgICAgICAgICAgICAgICBsb2cud2FybiAidmFsdWVBcHBsaWVkVG86ICIgKyB2YWx1ZUFwcGxpZWRUbwogICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZUFwcGxpZWRUby5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVBcHBsaWVkVG8uY2xlYXIoKSAKCiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZUFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5kZWxldGVPYmplY3RBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlQXBwbGllZFRvLmlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSl7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmVycm9yKCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOiIgKyB2aWUuZ2V0TWVzc2FnZSgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvL0FDQ09VTlRJTkdfU1VQUExJRVJfTUFURVJJQUxfUkVGCiAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmFjY291bnRpbmdTdXBwTWF0ZXJpYWwnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICAgICAgZGVmIG9iVHJpYWdlTWF0UyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuYWNjb3VudGluZ1N1cHBNYXRlcmlhbCddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKQogICAgICAgICAgICAgICAgICAgIGRlZiB2YWx1ZU1hdFMgPSBvYlRyaWFnZU1hdFMuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpCiAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4gInZhbHVlTWF0UzogIiArIHZhbHVlTWF0UwogICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZU1hdFMuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlTWF0Uy5jbGVhcigpIAoKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iVHJpYWdlTWF0UyA9IG9iamVjdEZhY2FkZS5kZWxldGVPYmplY3RBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlTWF0Uy5pZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpeyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5lcnJvcigiQ291bGQgbm90IHVwZGF0ZSBvYmplY3QgYXR0cmlidXRlIGR1ZSB0byB2YWxpZGF0aW9uIGV4Y2VwdGlvbjoiICsgdmllLmdldE1lc3NhZ2UoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy9BQ0NPVU5USU5HX0NVU1RPTUVSX01BVEVSSUFMX1JFRgogICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hY2NvdW50aW5nQ3VzdE1hdGVyaWFsJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgICAgIGRlZiBvYlRyaWFnZU1hdEMgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmFjY291bnRpbmdDdXN0TWF0ZXJpYWwnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkKICAgICAgICAgICAgICAgICAgICBkZWYgdmFsdWVNYXRDID0gb2JUcmlhZ2VNYXRDLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQogICAgICAgICAgICAgICAgICAgIGxvZy53YXJuICJ2YWx1ZU1hdEM6ICIgKyB2YWx1ZU1hdEMKICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVNYXRDLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZU1hdEMuY2xlYXIoKSAKCiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZU1hdEMgPSBvYmplY3RGYWNhZGUuZGVsZXRlT2JqZWN0QXR0cmlidXRlQmVhbihvYlRyaWFnZU1hdEMuaWQpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKXsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZXJyb3IoIkNvdWxkIG5vdCB1cGRhdGUgb2JqZWN0IGF0dHJpYnV0ZSBkdWUgdG8gdmFsaWRhdGlvbiBleGNlcHRpb246IiArIHZpZS5nZXRNZXNzYWdlKCkpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvL1RPVEFMX0FNT1VOVF9TVVBQTElFUgogICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RTdXBwJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgICAgIGRlZiBvYlRyaWFnZVRvdFMgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdFN1cHAnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkKICAgICAgICAgICAgICAgICAgICBkZWYgdmFsdWVUb3RTID0gb2JUcmlhZ2VUb3RTLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQogICAgICAgICAgICAgICAgICAgIGxvZy53YXJuICJ2YWx1ZVRvdFM6ICIgKyB2YWx1ZVRvdFMKICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVUb3RTLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVRvdFMuY2xlYXIoKSAKCiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZVRvdFMgPSBvYmplY3RGYWNhZGUuZGVsZXRlT2JqZWN0QXR0cmlidXRlQmVhbihvYlRyaWFnZVRvdFMuaWQpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKXsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZXJyb3IoIkNvdWxkIG5vdCB1cGRhdGUgb2JqZWN0IGF0dHJpYnV0ZSBkdWUgdG8gdmFsaWRhdGlvbiBleGNlcHRpb246IiArIHZpZS5nZXRNZXNzYWdlKCkpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy9UT1RBTF9BTU9VTlRfQ1VTVE9NRVIKICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQudG90Q3VzdCddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgICAgICAgICBkZWYgb2JUcmlhZ2VUb3RDID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RDdXN0J10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpCiAgICAgICAgICAgICAgICAgICAgZGVmIHZhbHVlVG90QyA9IG9iVHJpYWdlVG90Qy5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkKICAgICAgICAgICAgICAgICAgICBsb2cud2FybiAidmFsdWVUb3RDOiAiICsgdmFsdWVUb3RDCiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlVG90Qy5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVUb3RDLmNsZWFyKCkgCgogICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2VUb3RDID0gb2JqZWN0RmFjYWRlLmRlbGV0ZU9iamVjdEF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2VUb3RDLmlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSl7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmVycm9yKCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOiIgKyB2aWUuZ2V0TWVzc2FnZSgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSAgICAKCiAgICAgICAgICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQKICAgICAgICAgICAgbG9nLmRlYnVnICIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6ICIgKyBvdXRwdXRNc2cKCiAgICAgICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpCiAgICAgICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpCiAgICAgICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgCiAgICAgICAgICAgIGxvZy5kZWJ1ZyAibWVzc2FnZTogIiArICBqc29uX29iamVjdC5tZXNzYWdlCiAgICAgICAgICAgIAogICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoIkUiKQogICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoIlNFTkRNQUlMIikKICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgIiAiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKSkKICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGpzb25fb2JqZWN0Lm1lc3NhZ2UpCiAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycykKCiAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpCiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3siRSI6IicgKyBvdXRwdXQudG9TdHJpbmcoKSArICcifScpCiAgICAgICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiRSIsIG91dHB1dC50b1N0cmluZygpKQogICAgICAgIH1lbHNlewogICAgICAgICAgICAvKkwnZW1haWwgw6ggc3RhdGEgaW52aWF0YSBjb3JyZXR0YW1lbnRlLCBhZ2dpb3JubyBpbCBjYW1wbyBPTlNJVEVfUkVQT1JUIGNvbiBsYSBkYXRhIGNvcnJlbnRlKi8KCiAgICAgICAgICAgIC8vIGxvZy53YXJuICJpc3N1ZSAiK2lzc3VlLmdldEtleSgpCiAgICAgICAgICAgIGRlZiBjZnYgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG9uc2l0ZVJlcG9ydERhdGUpCiAgICAgICAgICAgIGlmICghY2Z2KSB7CiAgICAgICAgICAgICAgZGVmIHQwICA9IG5ldyBqYXZhLnNxbC5UaW1lc3RhbXAoU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkpCiAgICAgICAgICAgICAgbG9nLndhcm4gIlN0YXJ0VGltZSA9PiAnIit0MC50b1N0cmluZygpKyInIgogICAgICAgICAgICAgIGRlZiBtdiA9IG5ldyBNb2RpZmllZFZhbHVlKG9uc2l0ZVJlcG9ydERhdGUsIHQwKQogICAgICAgICAgICAgIGRlZiBjaCA9IG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKQogICAgICAgICAgICAgIG9uc2l0ZVJlcG9ydERhdGUudXBkYXRlVmFsdWUobnVsbCwgaXNzdWUsIG12LCBjaCkgCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgbG9nLndhcm4gIlN0YXJ0VGltZSA9PSAnIitjZnYudG9TdHJpbmcoKSsiJyIKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQ==</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="disabled">true</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
          <arg name="FIELD_SCRIPT_FILE"></arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">df15a75e93b4c124a70f49e69dbcae9d48e2e8e4</arg>
          <arg name="FIELD_NOTES">YCFgT1A6IFJFU1QgQVBJOiBPUCBwZXIgY29uc3VudGl2YXppb25lIHRpY2tldA==</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5cbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5kZWYgYXV0b21hdGljYWxseUNsb3NlZCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUNsb3NlZCddLnRvU3RyaW5nKCkpWzBdXG5kZWYgZ2VuZXJhdGVkRnJvbVBNID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1RLVF9HRU5FUkFURURfRlJPTV9QTVwiKVswXVxuXG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcblxuaW50IE9QQUEgPSBwcm9wZXJ0aWVzWydpc2NoZW1hLmFhLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuaW50IERCTyA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuZGJvLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuYm9vbGVhbiB1bmF0YW50dW09dHJ1ZVxuXG4vKiEhRGEgcmltdW92ZXJlIGFwcGVuYSByaXNvbHRpIGkgYnVnISEqL1xuLy9pZighaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5wbGFubmVkTWFpbnRlbmFuY2UnXSkpe1xuXG4gICAgLypPUC0xMDM4OiBsYSBjb250YWJpbGl6emF6aW9uZSBkb3ZyXHUwMGUwIHByZXZlZGVyZSBsZSB1bmF0YW50dW0gcmF0ZXMgc29sbyBzZSBpbCB0aWNrZXQgbm9uIFx1MDBlOCBzdGF0byBjaGl1c28gaW4gYXV0b21hdGljbyovXG5cdC8qMDguMDMuMjAyMiBBRjogbGEgY29udGFiaWxpenphemlvbmUgZG92clx1MDBlMCBwcmVuZGVyZSBsZSB1bmF0YW50dW0gcmF0ZXMgc29sbyBzZSBpbCB0aWNrZXQgbm9uIFx1MDBlOCBzdGF0byBnZW5lcmF0byBkYSB1biBpbnRlcnZlbnRvIGRpIHByb2dyYW1tYXRhKi9cbiAgICBpZigoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKSE9bnVsbCAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpKSB8fCAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShnZW5lcmF0ZWRGcm9tUE0pIT1udWxsICYmIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZ2VuZXJhdGVkRnJvbVBNKS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKSkpe1xuICAgICAgICB1bmF0YW50dW09ZmFsc2UgICAgXG4gICAgfVxuICAgIGxvZy5kZWJ1ZyBcIkNvbnN1bnRpdmF6aW9uZSB0aWNrZXQgXCIgKyBpc3N1ZS5rZXkgKyBcIiBjb24gdW5hdGFudHVtOiBcIiArIHVuYXRhbnR1bVxuXG4gICAgLyogUkVTVCBBUEkgcGVyIENvbnRhYmlsaXp6YXppb25lIEludGVydmVudG8gKi9cbiAgICByZXF1ZXN0TWV0aG9kID0gXCJHRVRcIjtcblxuICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9BQS90aWNrZXQvaXNzdWVLZXkvXCIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArIFwiL2Nsb3NlP3VtPVwiK3VuYXRhbnR1bS50b1N0cmluZygpXG4gICAgbG9nLmRlYnVnIFwiYmFzZVVybDogXCIgKyBiYXNlVVJMXG5cbiAgICAvKkRlZmluaXJlIHBhcmFtZXRybyBkaSBpbnB1dCB1bmF0YW50dW09dHJ1ZXxmYWxzZSBpbiBiYXNlIGFsIHZhbG9yZSBkZWxsYSB2YXJpYWJpbGUgYm9vbGVhbmEgdW5hdGFudHVtKi9cbiAgICBVUkwgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuXG4gICAgLy9Jc3N1ZUluZGV4aW5nU2VydmljZSBpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSlcbiAgICAvL2lzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgoaXNzdWVNYW5hZ2VyLmdldElzc3VlT2JqZWN0KGlzc3VlLmtleS50b1N0cmluZygpKSlcblxuICAgIC8vZGVmIHVuYVRhbnR1bVJhdGVzID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QQUFfVU5BVEFOVFVNX1JBVEVTXCIpWzBdXG4gICAgLy9sb2cud2FybiBcInVuYVRhbnR1bVJhdGVzOiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodW5hVGFudHVtUmF0ZXMpXG5cbiAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2U6IFwiICsgY29ubmVjdGlvblxuXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtVEtULUFDQ09VTlRJTkdcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgfWVsc2V7XG4gICAgICAgIC8qT1AtMTAzODogY29uc3VudGl2YXppb25lIHRlcm1pbmF0YSBjb3JyZXR0YW1lbnRlIC0gc2UgXHUwMGU4IHN0YXRhIGVzZWd1aXRhIGNvbiB1bmF0YW50dW09dHJ1ZSBzZXR0byBhIE5vIGlsIGNhbXBvIE9QQUFfQVVUT01BVElDQUxMWV9DTE9TRUQqL1xuICAgICAgICBpZih1bmF0YW50dW0pe1xuICAgICAgICAgICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXG4gICAgICAgICAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBpc3N1ZVxuXG4gICAgICAgICAgICBkZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcbiAgICAgICAgICAgIGRlZiBjZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09IFwiTm9cIiB9XG4gICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q2xvc2VkLnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuXG4gICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7XG4gICAgICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGlzc3VlKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIHByaW5jaXBhbGUgJHtpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpfVwiXG4gICAgICAgIH1cbiAgICB9XG4vL30iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
          <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlCmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2UKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXIKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsCgpQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpCkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpCnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7Cglwcm9wZXJ0aWVzLmxvYWQoaXQpCn0KQ2F0ZWdvcnkgbG9nID0gQ2F0ZWdvcnkuZ2V0SW5zdGFuY2UoImNvbS5vbnJlc29sdmUuamlyYS5ncm9vdnkuUG9zdEZ1bmN0aW9uIikKbG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpCgpJc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7CkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTsKCklzc3VlSW5kZXhpbmdTZXJ2aWNlIAlpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSkKZGVmIGF1dG9tYXRpY2FsbHlDbG9zZWQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlDbG9zZWQnXS50b1N0cmluZygpKVswXQoKZGVmIHJlcXVlc3RNZXRob2QKZGVmIGJhc2VVUkwKCmludCBPUEFBID0gcHJvcGVydGllc1snaXNjaGVtYS5hYS5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKCkKaW50IERCTyA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuZGJvLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKQpib29sZWFuIHVuYXRhbnR1bT10cnVlCgovKk9QLTEwMzg6IGxhIGNvbnRhYmlsaXp6YXppb25lIGRvdnLDoCBwcmV2ZWRlcmUgbGUgdW5hdGFudHVtIHJhdGVzIHNvbG8gc2UgaWwgdGlja2V0IG5vbiDDqCBzdGF0byBjaGl1c28gaW4gYXV0b21hdGljbyovCmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkhPW51bGwgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKS50b1N0cmluZygpLmVxdWFscygiWWVzIikpewoJdW5hdGFudHVtPWZhbHNlICAgIAp9CmxvZy5kZWJ1ZyAiQ29uc3VudGl2YXppb25lIHRpY2tldCAiICsgaXNzdWUua2V5ICsgIiBjb24gdW5hdGFudHVtOiAiICsgdW5hdGFudHVtCgovKiBSRVNUIEFQSSBwZXIgQ29udGFiaWxpenphemlvbmUgSW50ZXJ2ZW50byAqLwpyZXF1ZXN0TWV0aG9kID0gIkdFVCI7CgpiYXNlVVJMID0gImh0dHA6Ly8iICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyAiL29wL3Jlc3QvQUEvdGlja2V0L2lzc3VlS2V5LyIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArICIvY2xvc2U/dW09Iit1bmF0YW50dW0udG9TdHJpbmcoKQpsb2cuZGVidWcgImJhc2VVcmw6ICIgKyBiYXNlVVJMCgovKkRlZmluaXJlIHBhcmFtZXRybyBkaSBpbnB1dCB1bmF0YW50dW09dHJ1ZXxmYWxzZSBpbiBiYXNlIGFsIHZhbG9yZSBkZWxsYSB2YXJpYWJpbGUgYm9vbGVhbmEgdW5hdGFudHVtKi8KVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTCkKSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpOwpjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eSgiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL2pzb24iKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoIkFjY2VwdCIsICIqLyoiKTsKY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTsKY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpOwpjb25uZWN0aW9uLmNvbm5lY3QoKTsKbG9nLmRlYnVnICJSZXNwb25zZUNvZGU6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkKbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKCi8vSXNzdWVJbmRleGluZ1NlcnZpY2UgaXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpCi8vaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVPYmplY3QoaXNzdWUua2V5LnRvU3RyaW5nKCkpKQoKLy9kZWYgdW5hVGFudHVtUmF0ZXMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKCJPUEFBX1VOQVRBTlRVTV9SQVRFUyIpWzBdCi8vbG9nLndhcm4gInVuYVRhbnR1bVJhdGVzOiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcykKCmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCmRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKQpkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpCgppZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoIjIwMCIpKXsKICAgIGxvZy5kZWJ1ZyAidXJsOiAiICsgdXJsCiAgICBsb2cuZGVidWcgIlJlc3BvbnNlQ29kZToiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKQogICAgbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKICAgIGxvZy5kZWJ1ZyAiUmVzcG9uc2U6ICIgKyBjb25uZWN0aW9uCgogICAgLypST0xMQkFDSyovCiAgICAvKlJpbW96aW9uZSBhbGxlZ2F0byByYXBwb3J0byBkaSBpbnRlcnZlbnRvIGFwcGVuYSBjcmVhdG8qLwogICAgLyogR2V0IEluc2lnaHQgSVFMIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqLwogICAgQ2xhc3MgaXFsRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGUiKTsgCiAgICBkZWYgaXFsRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKGlxbEZhY2FkZUNsYXNzKTsKCiAgICAvKiBHZXQgSW5zaWdodCBPYmplY3QgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovCiAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZSIpOwogICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7CgogICAgLyogR2V0IEluc2lnaHQgT2JqZWN0IFR5cGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovCiAgICBDbGFzcyBvYmplY3RUeXBlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlIik7CiAgICBkZWYgb2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpOwoKICAgIC8qIEdldCBJbnNpZ2h0IE9iamVjdCBBdHRyaWJ1dGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovCiAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CiAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpOwoKICAgIENsYXNzIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkiKTsKICAgIGRlZiBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzKTsKCiAgICAvKiBTcGVjaWZ5IHRoZSBzY2hlbWEgaWQgYXMgd2VsbCBhcyB0aGUgSVFMIHRoYXQgd2lsbCBmZXRjaCBvYmplY3RzLiBJbiB0aGlzIGNhc2UgYWxsIG9iamVjdHMgd2l0aCBOYW1lIG1hdGNoaW5nIHRoZSB2YWx1ZUNGLCBiZSBzdXJlIHRvIGluY2x1ZGUgIiBhcm91bmQgdmFsdWUgKi8KICAgIGRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCAiXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuY2F0ZWdvcnlSZWYnXS50b1N0cmluZygpICsgIlwiLlwiIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm5hbWUnXS50b1N0cmluZygpICsgIlwiID0gXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkub2Jqcy5yYXBwSW50RkFBQyddLnRvU3RyaW5nKCkgKyAiXCIgQU5EICIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSArICIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSAiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyAiKSIpOyAvLyBTZWUgdGhlIGNvbXBsZXRlIGxpc3Qgb2YgcG9zc2libGUgSVFMIG9uIHRoZSBJbnNpZ2h0IFF1ZXJ5IExhbmd1YWdlIGRvY3VtZW50YXRpb24gcGFnZQogICAgLyogSWYgdGhpcyBpcyBhIG1hbmRhdG9yeSBmaWVsZCB5b3Ugc2hvdWxkIGJlIGFibGUgdG8gZG8gdGhpczogKi8KICAgIGxvZy5pbmZvKCJJbnNpZ2h0IG9iamVjdDogIiArIG9iamVjdHNbMF0pOwoKICAgIGlmKG9iamVjdHNbMF0pewogICAgICAgIC8qIFVQREFURSBPSkJFQ1QgREVMRVRFRCBWQUxVRSAqLwogICAgICAgIGRlZiBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihvYmplY3RzWzBdLmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkgIAogICAgICAgIGRlZiB2YWx1ZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQoKICAgICAgICBkZWYgdmFsdWVCZWFuID0gb2JUcmlhZ2UuY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCkKICAgICAgICB2YWx1ZUJlYW4uc2V0VmFsdWUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2UuZ2V0T2JqZWN0VHlwZUF0dHJpYnV0ZUlkKCkpLCB0cnVlKQogICAgICAgIC8qQ2xlYW4gYWN0dWFsIHZhbHVlKi8KICAgICAgICB2YWx1ZS5jbGVhcigpCiAgICAgICAgdmFsdWUuYWRkKHZhbHVlQmVhbik7CiAgICAgICAgb2JUcmlhZ2Uuc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyh2YWx1ZSkKCiAgICAgICAgLy9VcGRhdGUgT0pCRUNUIGF0dHJpYnV0ZSB2YWx1ZQogICAgICAgIHRyeSB7CiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLnN0b3JlT2JqZWN0QXR0cmlidXRlQmVhbihvYlRyaWFnZSk7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSkgewogICAgICAgICAgICBsb2cud2FybigiQ291bGQgbm90IHVwZGF0ZSBvYmplY3QgYXR0cmlidXRlIGR1ZSB0byB2YWxpZGF0aW9uIGV4Y2VwdGlvbjoiICsgdmllLmdldE1lc3NhZ2UoKSk7CiAgICAgICAgfQogICAgfQoKICAgIGVMaXN0RXJyb3JzLmFkZCgiRSIpCiAgICBlTGlzdEVycm9ycy5hZGQoIk9QLVRLVC1BQ0NPVU5USU5HIikKICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArICIgIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkpCiAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKQogICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKQoKICAgIG91dHB1dC5hZGQoZUxpc3QpCiAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IkUiOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQogICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJFIiwgb3V0cHV0LnRvU3RyaW5nKCkpCn1lbHNlewogICAgLypPUC0xMDM4OiBjb25zdW50aXZhemlvbmUgdGVybWluYXRhIGNvcnJldHRhbWVudGUgLSBzZSDDqCBzdGF0YSBlc2VndWl0YSBjb24gdW5hdGFudHVtPXRydWUgc2V0dG8gYSBObyBpbCBjYW1wbyBPUEFBX0FVVE9NQVRJQ0FMTFlfQ0xPU0VEKi8KICAgIGlmKHVuYXRhbnR1bSl7CiAgICAgICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpCiAgICAgICAgZGVmIG1pID0gKE11dGFibGVJc3N1ZSkgaXNzdWUKCiAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSkKICAgICAgICBsb2cuZGVidWcgImZpZWxkQ29uZmlnOiAiICsgZmllbGRDb25maWcKICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiTm8iIH0KICAgICAgICBhdXRvbWF0aWNhbGx5Q2xvc2VkLnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoKICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7CiAgICAgICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChpc3N1ZSkKICAgICAgICBsb2cuZGVidWcgIlVwZGF0ZWQgY3VzdG9tZmllbGQgLSBpc3N1ZSBwcmluY2lwYWxlICR7aXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKX0iCiAgICB9Cn0K</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
          <arg name="FIELD_SCRIPT_FILE"></arg>
        </validator>
      </validators>
      <results>
        <unconditional-result old-status="null" status="null" step="6">
          <post-functions>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">81aa9673-d0a1-4cdb-9909-19371f018388</arg>
              <arg name="FIELD_NOTES">YCFgUE0gVGlja2V0IC0gVXBkYXRlIEhBUkRXQVJFLk1BSU5URU5BTkNFX05FWFRfVElDS0VUX0RBVEUgKyBIQVJEV0FSRS5NQUlOVEVOQU5DRV9MQVNUX1RJQ0tFVF9EQVRF</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS51dGlsLkRlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5ldmVudC50eXBlLkV2ZW50RGlzcGF0Y2hPcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2U7XG5pbXBvcnQgb3JnLm9mYml6LmNvcmUuZW50aXR5LkRlbGVnYXRvckludGVyZmFjZVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS51dGlsLkJ1aWxkVXRpbHNJbmZvXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmlzc3VldHlwZS5Jc3N1ZVR5cGVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpXG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTIzNjkyXCIpXG5cbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTsgIFxuQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XG5kZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xuZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XG5cbmRlZiBhc3NldCA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0FTU0VUXCIpWzBdXG5kZWYgZXhlY3V0aW9uRGF0ZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0VYRUNVVElPTl9EQVRFXCIpWzBdXG5cbmxvZy5kZWJ1ZyBcIkRhdGEgZGkgZXNlY3V6aW9uZSBpbnRlcnZlbnRvOiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZXhlY3V0aW9uRGF0ZSlcblxuaWYoaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZSA9PSBcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0XCIpe1xuICAgIGRlZiBzdWJUYXNrcyA9IGlzc3VlLmdldFN1YlRhc2tPYmplY3RzKClcbiAgICBkZWYgaXRBc3NldCBcbiAgICBEYXRlIG5ld0RhdGVcblxuICAgIHN1YlRhc2tzLmVhY2gge1xuICAgICAgICBpZiAoaXQuZ2V0SXNzdWVUeXBlKCkubmFtZSA9PSBcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1wiICYmIGl0LmdldFJlc29sdXRpb24oKSl7XG4gICAgICAgICAgICBsb2cuZGVidWcgXCJhc3NldDogXCIgKyBpdC5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0KVxuICAgICAgICAgICAgaXRBc3NldCA9IGl0LmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXQpWzBdLnRvU3RyaW5nKClcbiAgICAgICAgICAgIGl0QXNzZXRLZXkgPSBpdEFzc2V0LnN1YnN0cmluZyhpdEFzc2V0Lmxhc3RJbmRleE9mKCcoJykrMSwgaXRBc3NldC5sYXN0SW5kZXhPZignKScpKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiaXRBc3NldEtleTogXCIgKyBpdEFzc2V0S2V5XG5cbiAgICAgICAgICAgIGRlZiBvYlRyaWFnZVxuICAgICAgICAgICAgZGVmIGh3UE1udW1iZXJcbiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oaXRBc3NldEtleSkuZ2V0SWQoKSwgXCJQTEFOTkVEX01BSU5URU5BTkNFX1ZJU0lUU19OVU1cIikpe1xuICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihpdEFzc2V0S2V5KS5nZXRJZCgpLCBcIlBMQU5ORURfTUFJTlRFTkFOQ0VfVklTSVRTX05VTVwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICBod1BNbnVtYmVyID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImh3UE1udW1iZXI6IFwiICsgaHdQTW51bWJlclxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL0NoZWNrIEhBUkRXQVJFLlBMQU5ORURfTUFJTlRFTkFOQ0VfVklTSVRTX05VTVxuICAgICAgICAgICAgaWYoaHdQTW51bWJlcil7XG4gICAgICAgICAgICAgICAgbmV3RGF0ZSA9IChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGV4ZWN1dGlvbkRhdGUpICsgTWF0aC5yb3VuZCgzNjUvaHdQTW51bWJlci50b0ludGVnZXIoKSkudG9JbnRlZ2VyKCkpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwibmV3IGRhdGU6IFwiICsgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZXhlY3V0aW9uRGF0ZSkgKyBNYXRoLnJvdW5kKDM2NS9od1BNbnVtYmVyLnRvSW50ZWdlcigpKS50b0ludGVnZXIoKSlcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIC8vQ2hlY2sgSEFSRFdBUkUuQ1VTVE9NRVJfQ09OVFJBQ1RfUkVGLkNPTlRSQUNUX1RZUEVcbiAgICAgICAgICAgICAgICBkZWYgY29udHJhY3QsIGNvbnRyYWN0S2V5LCBjb250cmFjdE9iamVjdCwgY29udHJhY3RUeXBlLCBmcmVxdWVuY3ksIGZyZXFEYXlzLCBwYWNrLCBwbUluY2x1ZGVkXG4gICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihpdEFzc2V0S2V5KS5nZXRJZCgpLCBcIkNVU1RPTUVSX0NPTlRSQUNUX1JFRlwiKSl7XG4gICAgICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihpdEFzc2V0S2V5KS5nZXRJZCgpLCBcIkNVU1RPTUVSX0NPTlRSQUNUX1JFRlwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICAgICAgY29udHJhY3QgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKVxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJjb250cmFjdDogXCIgKyBjb250cmFjdFxuICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdCwgXCJDT05UUkFDVF9UWVBFXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgICAgICAgICBjb250cmFjdFR5cGUgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKVxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJjb250cmFjdFR5cGU6IFwiICsgY29udHJhY3RUeXBlXG5cbiAgICAgICAgICAgICAgICAgICAgaWYoY29udHJhY3RUeXBlLmVxdWFscyhcIk1BSU5URU5BTkNFIFRJQ0tFVCBDT05UUkFDVFwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdCwgXCJQTV9GUkVRVUVOQ1lfUkVGXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgZnJlcXVlbmN5ID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImZyZXF1ZW5jeTogXCIgKyBmcmVxdWVuY3lcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGZyZXF1ZW5jeSwgXCJEQVlTXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgZnJlcURheXMgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiZnJlcURheXM6IFwiICsgZnJlcURheXNcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0RhdGUgPSAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShleGVjdXRpb25EYXRlKSArIGZyZXFEYXlzLnRvSW50ZWdlcigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwibmV3IGRhdGU6IFwiICsgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZXhlY3V0aW9uRGF0ZSkgKyBmcmVxRGF5cy50b0ludGVnZXIoKSlcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihjb250cmFjdFR5cGUuZXF1YWxzKFwiTUFJTlRFTkFOQ0UgRkVFIENPTlRSQUNUXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdCwgXCJQQUNLQUdFX1JFRlwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWNrID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJwYWNrOiBcIiArIHBhY2tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihmcmVxdWVuY3ksIFwiUE1fSU5DTFVERURcIikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG1JbmNsdWRlZCA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwicG1JbmNsdWRlZDogXCIgKyBwbUluY2x1ZGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3RGF0ZSA9IChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGV4ZWN1dGlvbkRhdGUpICsgcG1JbmNsdWRlZC50b0ludGVnZXIoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJuZXcgZGF0ZTogXCIgKyAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShleGVjdXRpb25EYXRlKSArIHBtSW5jbHVkZWQudG9JbnRlZ2VyKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRlZiBhc3NldE9iaiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihpdEFzc2V0S2V5KSAgICAgIFxuICAgICAgICAgICAgbG9nLmRlYnVnIFwibmV3RGF0ZTogXCIgKyBuZXdEYXRlXG4gICAgICAgICAgICBkZWYgb2JqID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGFzc2V0T2JqLmdldElkKCkpO1xuICAgICAgICAgICAgLyogQ3JlYXRlIGEgbmV3IHVuc2F2ZWQgb2JqZWN0IGJlYW4gLSBNQUlOVEVOQU5DRSBORVhUIFRJQ0tFVCBEQVRFKi9cbiAgICAgICAgICAgIGRlZiBhdHRyaWJUeXBlID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oMzc3Nyk7IFxuICAgICAgICAgICAgZGVmIG5ld0F0dHJpYiA9IG9iai5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKGF0dHJpYlR5cGUpO1xuICAgICAgICAgICAgZGVmIG5ld0F0dHJpYlZhbHVlID0gbmV3QXR0cmliLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpO1xuICAgICAgICAgICAgZGVmIG9iamVjdEF0dHJpYnV0ZUJlYW5zID0gbmV3IEFycmF5TGlzdCgpO1xuXG4gICAgICAgICAgICBuZXdBdHRyaWJWYWx1ZS5zZXREYXRlVmFsdWUobmV3RGF0ZSlcbiAgICAgICAgICAgIGRlZiBhdHRyaWJWYWx1ZXMgPSBuZXdBdHRyaWIuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpO1xuICAgICAgICAgICAgYXR0cmliVmFsdWVzLmFkZChuZXdBdHRyaWJWYWx1ZSk7XG4gICAgICAgICAgICBuZXdBdHRyaWIuc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyhhdHRyaWJWYWx1ZXMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvKiBDcmVhdGUgYSBuZXcgdW5zYXZlZCBvYmplY3QgYmVhbiAtIE1BSU5URU5BTkNFIExBU1QgVElDS0VUIERBVEUgKi9cbiAgICAgICAgICAgIGF0dHJpYlR5cGUgPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbigzNzc2KTsgXG4gICAgICAgICAgICBuZXdBdHRyaWIgPSBvYmouY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihhdHRyaWJUeXBlKTtcbiAgICAgICAgICAgIG5ld0F0dHJpYlZhbHVlID0gbmV3QXR0cmliLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpO1xuICAgICAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMgPSBuZXcgQXJyYXlMaXN0KCk7XG5cbiAgICAgICAgICAgIG5ld0F0dHJpYlZhbHVlLnNldERhdGVWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGV4ZWN1dGlvbkRhdGUpKVxuICAgICAgICAgICAgYXR0cmliVmFsdWVzID0gbmV3QXR0cmliLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTtcbiAgICAgICAgICAgIGF0dHJpYlZhbHVlcy5hZGQobmV3QXR0cmliVmFsdWUpO1xuICAgICAgICAgICAgbmV3QXR0cmliLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoYXR0cmliVmFsdWVzKTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBuZXdBdHRyaWIgPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG5ld0F0dHJpYik7XG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XG4gICAgICAgICAgICAgICAgbG9nLndhcm4oXCJVbmFibGUgdG8gc2F2ZSBjaGFuZ2VzLiBFeGl0aW5nLlwiKTtcbiAgICAgICAgICAgICAgICBsb2cud2Fybih2aWUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
            </function>
            <function type="class">
              <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIGxpbmtlZFRpY2tldHMgJiBGYXN0LVRyYW5zYWN0IHRoZW0=</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlCmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZQppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQpDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5XQVJOKQoKbG9nLndhcm4gIiR7aXNzdWUua2V5fSBUcmFuc2F6aW9uZSBDb21wbGV0ZSAtIFBvc3QgRnVuY3Rpb24gY2hlY2sgbGlua2VkSXNzdWVzIgoKSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpOwpDdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7CmRlZiBhdXRvbWF0aWNhbGx5Q2xvc2VkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q2xvc2VkJ10udG9TdHJpbmcoKSlbMF0KSXNzdWVJbmRleGluZ1NlcnZpY2UgCWlzc3VlSW5kZXhpbmdTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KElzc3VlSW5kZXhpbmdTZXJ2aWNlKQoKSXNzdWUgaXNzdWUgPSBpc3N1ZQovL1BlciB0ZXN0IGRhIGNvbnNvbGUKLy9pc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZSgiT1BVVC0yNzYiKQoKU1RBUlRfUFJPR1JFU1M9cHJvcGVydGllc1snd2YudHIuc3RhcnRQcm9ncmVzcyddCkNPTVBMRVRFPXByb3BlcnRpZXNbJ3dmLnRyLmNvbXBsZXRlJ10KCmRlZiB1c2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpCmRlZiBpc3N1ZVNlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZVNlcnZpY2UoKQoKbG9nLndhcm4gImlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCk6ICIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpCgppZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpPT1udWxsIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkudG9TdHJpbmcoKS5lcXVhbHMoIk5vIikpewogICAgLypPUC0xMDM4OiBzZSBobyBlc2VndWl0byBsYSBDb21wbGV0ZSBzdWwgdGlja2V0ICJwYWRyZSIgdmVyaWZpY28gZSBzcG9zdG8gaW4gYXV0b21hdGljbyBnbGkgZXZlbnR1YWxpIHRpY2tldCBjb2xsZWdhdGkqLwogICAgCiAgICBsb2cud2FybiAidmVyaWZpY28gZSBzcG9zdG8gaW4gYXV0b21hdGljbyBnbGkgZXZlbnR1YWxpIHRpY2tldCBjb2xsZWdhdGkiCiAgICAKICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKQogICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykgewogICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7CgogICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgLypFc2VndWlyZSB0cmFuc2F6aW9uZSBkaSBzdGF0byBjb24gT1BBQV9BVVRPTUFUSUNBTExZX0NMT1NFRD1ZZXMgZGVsbGEgc291cmNlSXNzdWUqLwogICAgICAgICAgICBkZWYgbGlua2VkSXNzdWUgPSBpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkKICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlU3RhdHVzID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzKCkKICAgICAgICAgICAgbG9nLndhcm4gIklzc3VlIGNvbiByZWxhdGVzSW5Jc3N1ZUxpbmsgJHtsaW5rZWRJc3N1ZX0gY29uIHN0YXRvICR7bGlua2VkSXNzdWVTdGF0dXN9IgogICAgICAgICAgICBkZWYgdHJhbnNpdGlvbklkCiAgICAgICAgICAgIGlmKGxpbmtlZElzc3VlU3RhdHVzLm5hbWUgPT0gcHJvcGVydGllc1snd2YuY29uZmlybWVkQW5kUGxhbm5lZCddLnRvU3RyaW5nKCkpewogICAgICAgICAgICAgICAgdHJhbnNpdGlvbklkPVNUQVJUX1BST0dSRVNTCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYobGlua2VkSXNzdWVTdGF0dXMubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5pblByb2dyZXNzJ10udG9TdHJpbmcoKSl7CiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9Q09NUExFVEUKICAgICAgICAgICAgfQogICAgICAgICAgICBpZih0cmFuc2l0aW9uSWQ9PVNUQVJUX1BST0dSRVNTKXsKICAgICAgICAgICAgICAgIC8vIFByZXBhcmUgb3VyIGlucHV0IGZvciB0aGUgdHJhbnNpdGlvbgogICAgICAgICAgICAgICAgZGVmIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKCkKICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGggewogICAgICAgICAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayhmYWxzZSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSkKICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgIC8vaXNzdWVJbnB1dFBhcmFtZXRlcnMuYWRkQ3VzdG9tRmllbGRWYWx1ZShmaWVsZENvbmZpZy5nZXRJZCgpLCAiWWVzIikgCiAgICAgICAgICAgICAgICAvL2xvZy53YXJuICJpc3N1ZUlucHV0UGFyYW1ldGVyczogIiArIGlzc3VlSW5wdXRQYXJhbWV0ZXJzCiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlCgogICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgIGxvZy53YXJuICJmaWVsZENvbmZpZzogIiArIGZpZWxkQ29uZmlnCiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q2xvc2VkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoKICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTsKICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICBsb2cud2FybiAiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGEiCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vZGVmIHZhbGlkYXRpb25SZXN1bHQgPSBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKQogICAgICAgICAgICAgICAgaWYgKGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb24KICAgICAgICAgICAgICAgICAgICBkZWYgaXNzdWVSZXN1bHQgPSBpc3N1ZVNlcnZpY2UudHJhbnNpdGlvbih1c2VyLCBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKSkKICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIkZhaWxlZCB0byB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSIpCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJUcmFuc2F6aW9uZSBmYXR0YSA5NiAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c30iKQogICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9Q09NUExFVEUKICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKCkKICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2soZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy9maWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpCiAgICAgICAgICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksICJZZXMiKSAKICAgICAgICAgICAgICAgICAgICAgICAgLy92YWxpZGF0aW9uUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykKICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKICAgICAgICAgICAgICAgICAgICAgICAgbWkgPSAoTXV0YWJsZUlzc3VlKSBsaW5rZWRJc3N1ZQoKICAgICAgICAgICAgICAgICAgICAgICAgLy9maWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICAgICAgICAgIC8vbG9nLndhcm4gImZpZWxkQ29uZmlnOiAiICsgZmllbGRDb25maWcKICAgICAgICAgICAgICAgICAgICAgICAgLy9jZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy9hdXRvbWF0aWNhbGx5Q2xvc2VkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoKICAgICAgICAgICAgICAgICAgICAgICAgLy9Db21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgLy9sb2cud2FybiAiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGEiCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJUcmFuc2F6aW9uZSBmYXR0YSAxMjQgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSwgJHtsaW5rZWRJc3N1ZS5zdGF0dXN9IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJDb3VsZCBub3QgdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmVycm9yQ29sbGVjdGlvbn0iKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfWVsc2UgaWYgKHRyYW5zaXRpb25JZD09Q09NUExFVEUpewogICAgICAgICAgICAgICAgZGVmIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKCkKICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGggewogICAgICAgICAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayhmYWxzZSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSkKICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgIC8vaXNzdWVJbnB1dFBhcmFtZXRlcnMuYWRkQ3VzdG9tRmllbGRWYWx1ZShmaWVsZENvbmZpZy5nZXRJZCgpLCAiWWVzIikgCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKQogICAgICAgICAgICAgICAgZGVmIG1pID0gKE11dGFibGVJc3N1ZSkgbGlua2VkSXNzdWUKCiAgICAgICAgICAgICAgICBkZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGxpbmtlZElzc3VlKQogICAgICAgICAgICAgICAgbG9nLndhcm4gImZpZWxkQ29uZmlnOiAiICsgZmllbGRDb25maWcKICAgICAgICAgICAgICAgIGRlZiBjZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgIGF1dG9tYXRpY2FsbHlDbG9zZWQudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpCgogICAgICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpOwogICAgICAgICAgICAgICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgIGxvZy53YXJuICJVcGRhdGVkIGN1c3RvbWZpZWxkIC0gaXNzdWUgbGlua2F0YSIKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy9kZWYgdmFsaWRhdGlvblJlc3VsdCA9IGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpCiAgICAgICAgICAgICAgICBpZiAoaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuaXNWYWxpZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgdHJhbnNpdGlvbgogICAgICAgICAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpKQogICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIlRyYW5zYXppb25lIGZhdHRhIDE2MSAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c30iKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIkNvdWxkIG5vdCB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuZXJyb3JDb2xsZWN0aW9ufSIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICBMaXN0PElzc3VlTGluaz4gYWxsT3V0SXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldE91dHdhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKQogICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsT3V0SXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHsKICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpOwoKICAgICAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgIGxvZy53YXJuICJJc3N1ZSBjb24gcmVsYXRlc091dElzc3VlTGluayIKICAgICAgICAgICAgLypFc2VndWlyZSB0cmFuc2F6aW9uZSBkaSBzdGF0byBjb24gT1BBQV9BVVRPTUFUSUNBTExZX0NMT1NFRD1ZZXMgZGVsbGEgZGVzdGluYXRpb25Jc3N1ZSovCiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZSA9IGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpCiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZVN0YXR1cyA9IGxpbmtlZElzc3VlLmdldFN0YXR1cygpCiAgICAgICAgICAgIGRlZiB0cmFuc2l0aW9uSWQKICAgICAgICAgICAgbG9nLndhcm4gImxpbmtlZElzc3VlOiAiICsgbGlua2VkSXNzdWUKICAgICAgICAgICAgbG9nLndhcm4gImxpbmtlZElzc3VlU3RhdHVzLm5hbWU6ICIgKyBsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lCiAgICAgICAgICAgIGlmKGxpbmtlZElzc3VlU3RhdHVzLm5hbWUgPT0gIkNvbmZpcm1lZCBhbmQgUGxhbm5lZCIpewogICAgICAgICAgICAgICAgdHJhbnNpdGlvbklkPVNUQVJUX1BST0dSRVNTCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYobGlua2VkSXNzdWVTdGF0dXMubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5pblByb2dyZXNzJ10udG9TdHJpbmcoKSl7CiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9Q09NUExFVEUKICAgICAgICAgICAgfQogICAgICAgICAgICBsb2cud2FybiAidHJhbnNpdGlvbklkOiAiICsgdHJhbnNpdGlvbklkCiAgICAgICAgICAgIGlmKHRyYW5zaXRpb25JZD09U1RBUlRfUFJPR1JFU1MpewogICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKQogICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7CiAgICAgICAgICAgICAgICAgICAgc2V0U2tpcFNjcmVlbkNoZWNrKGZhbHNlKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy9kZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKQogICAgICAgICAgICAgICAgLy9Db21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gIlllcyIgfQogICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksICJZZXMiKSAKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpCiAgICAgICAgICAgICAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBsaW5rZWRJc3N1ZQoKICAgICAgICAgICAgICAgIGRlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICBsb2cud2FybiAiZmllbGRDb25maWc6ICIgKyBmaWVsZENvbmZpZwogICAgICAgICAgICAgICAgZGVmIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gIlllcyIgfQogICAgICAgICAgICAgICAgYXV0b21hdGljYWxseUNsb3NlZC51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSkKCiAgICAgICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7CiAgICAgICAgICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGxpbmtlZElzc3VlKQogICAgICAgICAgICAgICAgbG9nLndhcm4gIlVwZGF0ZWQgY3VzdG9tZmllbGQgLSBpc3N1ZSBsaW5rYXRhIgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvL2RlZiB2YWxpZGF0aW9uUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykKICAgICAgICAgICAgICAgIGxvZy53YXJuICJpc3N1ZUlucHV0UGFyYW1ldGVyczogIiArIGlzc3VlSW5wdXRQYXJhbWV0ZXJzCiAgICAgICAgICAgICAgICBpZiAoaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuaXNWYWxpZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgdHJhbnNpdGlvbgogICAgICAgICAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpKQogICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIlRyYW5zYXppb25lIGZhdHRhIDIxOCAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c30iKQogICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9Q09NUExFVEUKICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKCkKICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2soZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy9maWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpCiAgICAgICAgICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksICJZZXMiKSAKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpCiAgICAgICAgICAgICAgICAgICAgICAgIG1pID0gKE11dGFibGVJc3N1ZSkgbGlua2VkSXNzdWUKCiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4gImZpZWxkQ29uZmlnOiAiICsgZmllbGRDb25maWcKICAgICAgICAgICAgICAgICAgICAgICAgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9tYXRpY2FsbHlDbG9zZWQudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpCgogICAgICAgICAgICAgICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuICJVcGRhdGVkIGN1c3RvbWZpZWxkIC0gaXNzdWUgbGlua2F0YSIKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vdmFsaWRhdGlvblJlc3VsdCA9IGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJUcmFuc2F6aW9uZSBmYXR0YSAyNDggJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSwgJHtsaW5rZWRJc3N1ZS5zdGF0dXN9IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJDb3VsZCBub3QgdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmVycm9yQ29sbGVjdGlvbn0iKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICBsb2cud2FybiAiaXNzdWUgZGEgY29tcGxldGFyZSIKICAgICAgICAgICAgICAgIGRlZiBpc3N1ZUlucHV0UGFyYW1ldGVycyA9IGlzc3VlU2VydmljZS5uZXdJc3N1ZUlucHV0UGFyYW1ldGVycygpCiAgICAgICAgICAgICAgICBpc3N1ZUlucHV0UGFyYW1ldGVycy53aXRoIHsKICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2soZmFsc2UpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvL2RlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpCiAgICAgICAgICAgICAgICAvL0NvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICAvL2lzc3VlSW5wdXRQYXJhbWV0ZXJzLmFkZEN1c3RvbUZpZWxkVmFsdWUoZmllbGRDb25maWcuZ2V0SWQoKSwgIlllcyIpIAogICAgICAgICAgICAgICAgLy9sb2cud2FybiAidmFsaWRhdGVSZXN1bHQiCiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlCgogICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgIGxvZy53YXJuICJmaWVsZENvbmZpZzogIiArIGZpZWxkQ29uZmlnCiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q2xvc2VkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoKICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTsKICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICBsb2cud2FybiAiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGEiCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgICAgICAgICAgZGVmIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpCiAgICAgICAgICAgICAgICAgICAgaWYgKCEgaXNzdWVSZXN1bHQuaXNWYWxpZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJGYWlsZWQgdG8gdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn0iKQogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiVHJhbnNhemlvbmUgZmF0dGEgMjg1ICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn0sICR7bGlua2VkSXNzdWUuc3RhdHVzfSIpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCn0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </function>
            <function type="class">
              <arg name="conditionList">3</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="comparisonType">1</arg>
              <arg name="precondition">true</arg>
              <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
              <arg name="preconditionNegateResult-booleanValue"></arg>
              <arg name="fieldValue"></arg>
              <arg name="preconditionMode-textValue">DISCARD</arg>
              <arg name="fieldsList">customfield_22657</arg>
            </function>
            <function type="class">
              <arg name="field.existingAttachmentEnablingCustomFieldId">NEVER</arg>
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="targetIssueTypeDefinedByCfSelection">customfield_22716</arg>
              <arg name="issueTypeId">26</arg>
              <arg name="scopeType">ISSUE_LINKING</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="field.attachmentEnablingCustomFieldId">NEVER</arg>
              <arg name="targetIssueType">DEFINED_BY_CF_SELECTION</arg>
              <arg name="scopeSource-jql"></arg>
              <arg name="createIssueAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="field.copyTransitionComment">false</arg>
              <arg name="targetProjectType">SAME</arg>
              <arg name="maxAllowed-integerValue"></arg>
              <arg name="transitionAttachmentsOperation">copy</arg>
              <arg name="field.issueAssignTo">ASSIGN_TO_UNASSIGNED</arg>
              <arg name="targetProjectSelectedCustomField"></arg>
              <arg name="destination-scopeTarget">LINK_END</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiescreatelinkedissue-function</arg>
              <arg name="scopeDestination-linkEnd">10003:INWARD</arg>
              <arg name="field.enablingCustomFieldId">customfield_22609</arg>
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="subFunctions">[{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22609&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22658&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22600&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22600&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22822&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22822&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22601&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22601&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22602&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22602&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22813&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22813&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23235&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23235&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22651&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22651&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22700&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22700&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22607&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22607&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22814&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22814&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23203&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23203&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23401&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23237&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_21909&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21909&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22649&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22629&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23401&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21908&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22716&quot;,&quot;destinationFieldId&quot;:&quot;summary&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Yes&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22681&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22615&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22614&quot;}}]</arg>
              <arg name="class.name">ch.beecom.jira.jsu.workflow.function.createlinkedissue.CreateLinkedIssueFunction</arg>
              <arg name="projectId">11228</arg>
            </function>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">2fb89327-ada3-433c-be67-4363e745771e</arg>
              <arg name="FIELD_NOTES">YCFgRlNNOiBVcGRhdGUgc3RhdHVzIG9uIGp1c3QgY3JlYXRlZCBSZXBhaXIgUXVvdGF0aW9uIGlzc3Vl</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnlcbmltcG9ydCBncm9vdnkuanNvbi5Kc29uQnVpbGRlclxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29uZmlnLnV0aWwuSmlyYUhvbWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvblxuaW1wb3J0IGphdmEudGV4dC5TaW1wbGVEYXRlRm9ybWF0XG5pbXBvcnQgamF2YS50ZXh0LlBhcnNlRXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbmZpZy5wcm9wZXJ0aWVzLkFQS2V5c1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLkxpbmtDb2xsZWN0aW9uSW1wbDtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbms7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxubG9nLmRlYnVnIFwiUGVyY29yc28gcHJvcGVydGllczogXCIgKyBTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5cbi8qU2NyaXB0IFZhcmlhYmxlcyovXG4vL1BlciBQb3N0IEZ1bmN0aW9uXG5pc3N1ZSA9IGlzc3VlXG4vL1BlciB0ZXN0IGRhIGNvbnNvbGVcbi8vSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpXG4vL2lzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0yNTdcIilcbmxvZy5kZWJ1ZyBcIklzc3VlOiBcIiArIGlzc3VlXG5kZWYgZm91bmQ9ZmFsc2VcbmRlZiBsaW5rZWRJc3N1ZVxuZGVmIGlzc3VlU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlU2VydmljZSgpXG5cbmRlZiB0cmFuc2l0aW9uQ2hlY2sgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmNoZWNrQW5kQ29uZmlybSddLnRvU3RyaW5nKCkpWzBdXG5kZWYgb2ZmZXJGcm9tUmVwYWlyID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1RLVF9HRU5FUkFURURfRlJPTV9SRVBBSVJcIilbMF1cblxuZGVmIGdyb3VwTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEdyb3VwTWFuYWdlcigpXG5kZWYgdXNlck1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRVc2VyTWFuYWdlcigpXG5kZWYgY3VycmVudFVzZXJUcmFuc2l0aW9uID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0NVUlJFTlRfVVNFUl9HRU5FUkFURV9SRVBBSVJfUVVPVEVcIilbMF1cblN0cmluZyBzdXBwbGllckFkbSA9IFwiT1BST0xFX0FBX1NVUFBMSUVSX0FETVwiXG5TdHJpbmcgc3VwcGxpZXJUZWNoID0gXCJPUFJPTEVfQUFfU1VQUExJRVJfVEVDSFwiXG5cbkxpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKTtcbmxvZy5kZWJ1ZyBcImFsbEluSXNzdWVMaW5rOiBcIiArIGFsbEluSXNzdWVMaW5rXG5mb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxJbklzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcbiAgICBkZWYgbGlua2VkSXNzdWVUZW1wID0gaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpXG4gICAgU3RyaW5nIHR5cGUgPSBsaW5rZWRJc3N1ZVRlbXAuZ2V0SXNzdWVUeXBlKCkuZ2V0TmFtZSgpO1xuXG4gICAgbG9nLmRlYnVnKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKSkgXG4gICAgXG4gICAgaWYoaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpICE9IG51bGwgJiYgaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICBsaW5rZWRJc3N1ZT1saW5rZWRJc3N1ZVRlbXBcbiAgICAgICAgbG9nLmRlYnVnIFwibGlua2VkIGlzc3VlOiBcIiArIGxpbmtlZElzc3VlXG4gICAgICAgIC8vbG9nLmRlYnVnIFwibGlua2VkIGlzc3VlIHN0YXR1czogXCIgKyBsaW5rZWRJc3N1ZS5nZXRTdGF0dXNPYmplY3QoKS5uYW1lXG4gICAgICAgIGlmKGxpbmtlZElzc3VlLmdldFN0YXR1c09iamVjdCgpLm5hbWUgPT0gcHJvcGVydGllc1snd2Yub3BlbiddLnRvU3RyaW5nKCkpe1xuICAgICAgICAgICAgZm91bmQ9dHJ1ZVxuICAgICAgICB9XG4gICAgfVxufVxuLy9sb2cuZGVidWcgXCJmb3VuZDogXCIgKyBmb3VuZFxuXG5pZihmb3VuZCl7XG5cdGRlZiBkZXN0U3RhdHVzT2JqZWN0ID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzT2JqZWN0KClcbiAgICAvL2xvZy5kZWJ1ZyBcImRlc3RTdGF0dXNPYmplY3Q6IFwiICsgZGVzdFN0YXR1c09iamVjdFxuICAgIC8vbG9nLmRlYnVnIFwibGlua2VkSXNzdWU6IFwiICsgbGlua2VkSXNzdWVcbiAgICBkZWYgdXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuXHQvLyBJcyB0aGUgc3RhdHVzIG9mIHRoZSBsaW5rZWQgaXNzdWUgXCJJbnN0YWxsaW5nXCIgP1xuICAgIFxuICAgIGRlZiBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5jdXN0b21GaWVsZE1hbmFnZXJcbiAgICBkZWYgb2ZmZXJJc3N1ZUZpZWxkID0gY3VzdG9tRmllbGRNYW5hZ2VyLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5vZmZlckxpbmtlZElzc3VlJ10udG9TdHJpbmcoKSkuZmlyc3QoKVxuICAgIGRlZiBtYWludGVuYW5jZUlzc3VlRmllbGQgPSBjdXN0b21GaWVsZE1hbmFnZXIuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLm1haW50ZW5hbmNlTGlua2VkSXNzdWUnXSA/IHByb3BlcnRpZXNbJ2NmLm1haW50ZW5hbmNlTGlua2VkSXNzdWUnXS50b1N0cmluZygpIDogXCJPUF9NQUlOVEVOQU5DRV9MSU5LRURfSVNTVUVcIikuZmlyc3QoKVxuICAgIGRlZiBvZmZlcklzc3VlQm9vbEZpZWxkID0gY3VzdG9tRmllbGRNYW5hZ2VyLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5vZmZlclRrdCddLnRvU3RyaW5nKCkpLmZpcnN0KClcbiAgICBcbiAgICAvL1NldCBPUEFBX09GRkVSX1RLVD1ZZXMgb24ganVzdCBjcmVhdGVkIGxpbmtlZElzc3VlXG4gICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXG4gICAgZGVmIG1pID0gKE11dGFibGVJc3N1ZSkgbGlua2VkSXNzdWVcblxuICAgIGRlZiBmaWVsZENvbmZpZyA9IG9mZmVySXNzdWVCb29sRmllbGQuZ2V0UmVsZXZhbnRDb25maWcobGlua2VkSXNzdWUpXG4gICAgLy9sb2cud2FybiBcImZpZWxkQ29uZmlnOiBcIiArIGZpZWxkQ29uZmlnXG4gICAgZGVmIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gXCJZZXNcIiB9XG4gICAgbG9nLmRlYnVnIFwidHJhbnNpdGlvbiBmaWVsZCB2YWx1ZTogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1cnJlbnRVc2VyVHJhbnNpdGlvbilcbiAgICAvL2xvZy5kZWJ1ZyBcImN1cnJlbnRVc2VyVHJhbnNpdGlvbjogXCIgKyBjdXJyZW50VXNlclRyYW5zaXRpb25cbiAgICBkZWYgdXNlclRyYW5zaXRpb24gPSB1c2VyTWFuYWdlci5nZXRVc2VyQnlOYW1lKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VycmVudFVzZXJUcmFuc2l0aW9uKS50b1N0cmluZygpKVxuXHRsb2cuZGVidWcgXCJ1c2VyVHJhbnNpdGlvbjogXCIgKyB1c2VyVHJhbnNpdGlvblxuICAgIGlmICh1c2VyVHJhbnNpdGlvbiAhPSBudWxsICYmIChncm91cE1hbmFnZXIuZ2V0VXNlcnNJbkdyb3VwKHN1cHBsaWVyQWRtKS5jb250YWlucyh1c2VyVHJhbnNpdGlvbikgfHwgZ3JvdXBNYW5hZ2VyLmdldFVzZXJzSW5Hcm91cChzdXBwbGllclRlY2gpLmNvbnRhaW5zKHVzZXJUcmFuc2l0aW9uKSkpIHtcbiAgICAgICAgLy8gVHJhbnNpdGlvbiBleGVjdXRlZCBieSBleHRlcm5hbCB1c2VyIC0tPiB0byBiZSBhZGRlZCBhbHNvIGludGVybmFsIHRlY2hzIHJvbGUgZ3JvdXBzXG4gICAgICAgIC8vIEVtYWlsIGhhcyBub3QgdG8gYmUgc2VudFxuICAgICAgICAvLyBTTiB3aWxsIGJlIGNyZWF0ZWQgYXMgc29vbiBhcyB0aGUgcXVvdGF0aW9uIGhhcyBiZWVuIGNvbmZpcm1lZCAtIHRvIGJlIGNoZWNrZWQgd2hlbiB0byBjcmVhdGUgU04gaWYgbm8gcXVvdGF0aW9uIGZyb20gc3VwcGxpZXIgaXMgbmVlZGVkIC0gd2hlbiB0aGUgcXVvdGF0aW9uIGhhcyBiZWVuIHNlbnQgdG8gdGhlIGN1c3RvbWVyP1xuICAgICAgICBsb2cuZGVidWcgXCJpbiB1dGVudGUgc3VwcGxpZXJcIlxuICAgICAgICB0cmFuc2l0aW9uQ2hlY2sudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcbiAgICAgICAgb2ZmZXJGcm9tUmVwYWlyLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG9mZmVyRnJvbVJlcGFpciksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG5cdH1cbiAgICBvZmZlcklzc3VlQm9vbEZpZWxkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG9mZmVySXNzdWVCb29sRmllbGQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuXHRtYWludGVuYW5jZUlzc3VlRmllbGQudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobWFpbnRlbmFuY2VJc3N1ZUZpZWxkKSwgaXNzdWUua2V5LnRvU3RyaW5nKCkpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG4gICAgXG4gICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xuICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpICAgIFxuICAgIFxuICAgIC8vbG9nLmRlYnVnIFwib2ZmZXJJc3N1ZUZpZWxkOiBcIiArIG9mZmVySXNzdWVGaWVsZFxuICAgIC8vbG9nLmRlYnVnIFwibGlua2VkSXNzdWU6IFwiICsgbGlua2VkSXNzdWVcbiAgICBvZmZlcklzc3VlRmllbGQudXBkYXRlVmFsdWUobnVsbCwgaXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUob2ZmZXJJc3N1ZUZpZWxkKSwgbGlua2VkSXNzdWUua2V5LnRvU3RyaW5nKCkpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG4gICAgLy9sb2cuZGVidWcgXCJ1cGRhdGVkOiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUob2ZmZXJJc3N1ZUZpZWxkKVxuICAgIFxuICAgIGlmIChkZXN0U3RhdHVzT2JqZWN0Lm5hbWUgPT0gcHJvcGVydGllc1snd2Yub3BlbiddLnRvU3RyaW5nKCkpIHtcbiAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uXG4gICAgICAgIGRlZiBpc3N1ZUlucHV0UGFyYW1ldGVycyA9IGlzc3VlU2VydmljZS5uZXdJc3N1ZUlucHV0UGFyYW1ldGVycygpXG4gICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGgge1xuICAgICAgICAgICAgc2V0U2tpcFNjcmVlbkNoZWNrKHRydWUpXG4gICAgICAgIH1cbiAgICAgICAgLy8gVmFsaWRhdGUgdHJhbnNpdGlvbmluZyB0aGUgbGlua2VkIGlzc3VlIHRvIFwiU2lnbnMgTmVlZGVkXCJcbiAgICAgICAgZGVmIHZhbGlkYXRpb25SZXN1bHQgPSBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCAocHJvcGVydGllc1snd2YudHIuYXNrUXVvdGUnXSA/IHByb3BlcnRpZXNbJ3dmLnRyLmFza1F1b3RlJ10udG9JbnRlZ2VyKCkgOiAxMSksIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKVxuICAgICAgICBpZiAodmFsaWRhdGlvblJlc3VsdC5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIHZhbGlkYXRpb25SZXN1bHQpXG4gICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcoXCJGYWlsZWQgdG8gdHJhbnNpdGlvbiB0YXNrICR7ZGVzdElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259XCIpXG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcoXCJUcmFuc2F6aW9uZSBmYXR0YVwiKVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbG9nLmRlYnVnKFwiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2Rlc3RJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7dmFsaWRhdGlvblJlc3VsdC5lcnJvckNvbGxlY3Rpb259XCIpXG4gICAgICAgIH1cbiAgICB9XG4gICAgXG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
            </function>
            <function type="class">
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="maxAllowed-integerValue">50</arg>
              <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="field">customfield_22693</arg>
              <arg name="scopeType">SAME</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
              <arg name="scopeSource-jql"></arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
    <action id="751" name="Assegna a Fornitore senza notifiche" view="fieldscreen">
      <meta name="opsbar-sequence">50</meta>
      <meta name="jira.description"></meta>
      <meta name="jira.fieldscreen.id">19904</meta>
      <restrict-to>
        <conditions type="AND">
          <condition type="class">
            <arg name="FIELD_FUNCTION_ID">93d6b54e-ad03-41e6-82a8-a6d0a675107e</arg>
            <arg name="FIELD_NOTES">YCFgT1BfQVNTRVQgc2hvdWxkIGJlIGV2YWx1YXRlZA==</arg>
            <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
            <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJjZlZhbHVlc1snT1BfQVNTRVQnXSAhPSBudWxsIHx8IGlzc3VlLmlzc3VlVHlwZS5uYW1lID09ICdQbGFubmVkIE1haW50ZW5hbmNlIFRpY2tldCciLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
            <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
          </condition>
          <condition type="class">
            <arg name="FIELD_FUNCTION_ID">862e4160-0f10-49db-afe0-9dc656448701</arg>
            <arg name="FIELD_NOTES">YCFgT1BfU1VQUExJRVIgc2hvdWxkIGJlIGV2YWx1YXRlZA==</arg>
            <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
            <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5kZWYgdHJvdmF0bz1mYWxzZVxuZm9yIChzIGluIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zdXBwbGllciddLnRvU3RyaW5nKCkpKXtcbiAgICBpZiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzKSAhPSBudWxsKXtcbiAgICAgICAgdHJvdmF0bz10cnVlXG4gICAgfVxufVxucmV0dXJuIHRyb3ZhdG8iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
            <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
            <arg name="FIELD_PREVIEW_ISSUE">AAS-22767</arg>
          </condition>
        </conditions>
      </restrict-to>
      <validators>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">339d339e-1008-47f6-86fc-0fa1b991ccd2</arg>
          <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIEN1c3RvbWVyIENvbnRyYWN0ICYmIE51bWJlciBvZiB0aWNrZXRzIGluIHRoZSBsYXN0IDYwIGRheXM=</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5pbXBvcnQgamF2YS50ZXh0LkRhdGVGb3JtYXQ7XG5pbXBvcnQgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQ7XG5pbXBvcnQgamF2YS51dGlsLkRhdGU7XG5pbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmpxbC5wYXJzZXIuSnFsUXVlcnlQYXJzZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuYmMuaXNzdWUuc2VhcmNoLlNlYXJjaFNlcnZpY2VcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEudXNlci51dGlsLlVzZXJVdGlsXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLndlYi5iZWFuLlBhZ2VyRmlsdGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuVXNlclV0aWwgdXNlclV0aWwgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRVc2VyVXRpbCgpXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKClcbi8vaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtNDcyODVcIilcblxuZGVmIHdhcm5pbmdzID0gZmFsc2VcbmRlZiBtaXNzaW5nQ29udHJhY3QgPSBmYWxzZVxuZGVmIGV4cGlyZWRDb250cmFjdCA9IGZhbHNlXG5kZWYgZXJyb3JzID0gZmFsc2VcblxuZGVmIGluc3RhbGxhdGlvbiA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXNzZXQnXS50b1N0cmluZygpKVswXVxuZGVmIGF1dG9tYXRpY2FsbHlDb25maXJtZWQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlBc3NpZ25lZCddID8gcHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUFzc2lnbmVkJ10udG9TdHJpbmcoKSA6IFwiT1BfQVVUT01BVElDQUxMWV9BU1NJR05FRFwiKVswXVxuZGVmIHRyYW5zaXRpb25DaGVjayA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY2hlY2tBbmRDb25maXJtJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBleGVjdXRpb25EYXRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfRVhFQ1VUSU9OX0RBVEVcIilbMF1cblxuZGVmIHdhcm5pbmdFbXB0eUZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVycm9yTWFuZGF0b3J5RmllbGRzID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgYXNzZXQsIGFzc2V0S2V5LCBhc3NldE9iamVjdFxuXG5DbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7ICBcbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG5hc3NldCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoaW5zdGFsbGF0aW9uKVxubG9nLmRlYnVnIFwiYXNzZXQ6IFwiICsgYXNzZXRcbmFzc2V0PWFzc2V0LnRvU3RyaW5nKClcbmFzc2V0S2V5ID0gYXNzZXQuc3Vic3RyaW5nKGFzc2V0Lmxhc3RJbmRleE9mKCcoJykrMSxhc3NldC5sYXN0SW5kZXhPZignKScpKVxuYXNzZXRPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oYXNzZXRLZXkpXG5cbi8vT1BfQVNTRVRcbmlmKCFpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0LnBsYW5uZWRNYWludGVuYW5jZSddKSAmJiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKT09bnVsbCB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLnRvU3RyaW5nKCkuZXF1YWxzKFwiTm9cIikpKXtcbiAgICAvL0NoZWNrIENVU1RPTUVSX0NPTlRSQUNUX1JFRiBvbiBPUF9BU1NFVFxuICAgIFxuICAgIFxuICAgIGlmKGFzc2V0T2JqZWN0IT1udWxsKXtcbiAgICAgICAgbG9nLmRlYnVnIFwiYXNzZXRPYmplY3QuZ2V0SWQoKTogXCIgKyBhc3NldE9iamVjdC5nZXRJZCgpXG4gICAgICAgIGRlZiBvYlRyaWFnZVxuICAgICAgICBkZWYgY3VzdG9tZXJDb250cmFjdCwgY3VzdG9tZXJDb250cmFjdEF0dHJcbiAgICAgICAgY3VzdG9tZXJDb250cmFjdEF0dHIgPSBwcm9wZXJ0aWVzWydpb2JqLmhhcmR3YXJlLmNvbnRyYWN0J10gPyBwcm9wZXJ0aWVzWydpb2JqLmhhcmR3YXJlLmNvbnRyYWN0J10udG9TdHJpbmcoKSA6IFwiQ1VTVE9NRVJfQ09OVFJBQ1RfUkVGXCJcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGFzc2V0T2JqZWN0LmdldElkKCksIGN1c3RvbWVyQ29udHJhY3RBdHRyKSl7XG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihhc3NldE9iamVjdC5nZXRJZCgpLCBjdXN0b21lckNvbnRyYWN0QXR0cikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBjdXN0b21lckNvbnRyYWN0ID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuXG4gICAgICAgIGxvZy5kZWJ1ZyBcImN1c3RvbWVyQ29udHJhY3Q6IFwiICsgY3VzdG9tZXJDb250cmFjdFxuXG4gICAgICAgIGlmKGN1c3RvbWVyQ29udHJhY3QgPT0gbnVsbCl7XG4gICAgICAgICAgICB3YXJuaW5ncyA9IHRydWVcbiAgICAgICAgICAgIG1pc3NpbmdDb250cmFjdCA9IHRydWVcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAvL2dldCBcIlFUX1ZBTElEX1RcIiBmb3IgdGhhdCBUZWNobmljaWFuXG4gICAgICAgICAgICBkZWYgY29udHJhY3Q9Y3VzdG9tZXJDb250cmFjdC50b1N0cmluZygpXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJjb250cmFjdDpcIiArIGNvbnRyYWN0XG4gICAgICAgICAgICBkZWYgY29udHJhY3RJZCA9IGNvbnRyYWN0LnN1YnN0cmluZyhjb250cmFjdC5sYXN0SW5kZXhPZignKCcpKzEsY29udHJhY3QubGFzdEluZGV4T2YoJyknKSlcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImNvbnRyYWN0SWQ6XCIgKyBjb250cmFjdElkXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJwcm9wZXJ0aWVzWydpb2JqLmNvbnRyYWN0LnZhbGlkVG8nXTogXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmNvbnRyYWN0LnZhbGlkVG8nXVxuICAgICAgICAgICAgZGVmIGV4cGlyaW5nRGF0ZSwgZXhwaXJpbmdEYXRlQXR0clxuICAgICAgICAgICAgZXhwaXJpbmdEYXRlQXR0ciA9IHByb3BlcnRpZXNbJ2lvYmouY29udHJhY3QudmFsaWRUbyddID8gcHJvcGVydGllc1snaW9iai5jb250cmFjdC52YWxpZFRvJ10udG9TdHJpbmcoKSA6IFwiUVRfVkFMSURfVFwiXG5cbiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdElkLnRvSW50ZWdlcigpLCBjdXN0b21lckNvbnRyYWN0QXR0cikpe1xuICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbnRyYWN0SWQudG9JbnRlZ2VyKCksIGN1c3RvbWVyQ29udHJhY3RBdHRyKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICBjb250cmFjdFJlZiA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgY29udHJhY3RETyA9IGNvbnRyYWN0UmVmLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJjb250cmFjdERPOiBcIiArIGNvbnRyYWN0RE9cbiAgICAgICAgICAgICAgICBjb250cmFjdERPS2V5ID0gY29udHJhY3RETy5zdWJzdHJpbmcoY29udHJhY3RETy5sYXN0SW5kZXhPZignKCcpKzEsY29udHJhY3RETy5sYXN0SW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImNvbnRyYWN0RE9LZXk6IFwiICsgY29udHJhY3RET0tleVxuICAgICAgICAgICAgICAgIGNvbnRyYWN0RE9PYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4ocHJvcGVydGllc1snaXNjaGVtYS5kYm8nXS50b1N0cmluZygpICsgXCItXCIgKyBjb250cmFjdERPS2V5KVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImV4cGlyaW5nRGF0ZUF0dHI6IFwiICsgZXhwaXJpbmdEYXRlQXR0clxuICAgICAgICAgICAgICAgIGV4cGlyaW5nRGF0ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdERPS2V5LnRvSW50ZWdlcigpLCBleHBpcmluZ0RhdGVBdHRyKSA/IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdERPS2V5LnRvSW50ZWdlcigpLCBleHBpcmluZ0RhdGVBdHRyKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudmFsdWVbMF0gYXMgRGF0ZSA6IG51bGxcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZGVmIHRvZGF5c0RhdGVUaW1lID0gKG5ldyBEYXRlKCkpXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJleHBpcmluZ0RhdGU6IFwiICsgZXhwaXJpbmdEYXRlXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJ0b2RheXNEYXRlVGltZTogXCIgKyB0b2RheXNEYXRlVGltZVxuICAgICAgICAgICAgaWYoZXhwaXJpbmdEYXRlIDwgdG9kYXlzRGF0ZVRpbWUpe1xuICAgICAgICAgICAgICAgIHdhcm5pbmdzID0gdHJ1ZVxuICAgICAgICAgICAgICAgIGV4cGlyZWRDb250cmFjdCA9IHRydWVcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG5cbiAgICB9XG4gICAgICAgIFxufVxuXG5kZWYganFsUXVlcnlQYXJzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSnFsUXVlcnlQYXJzZXIpXG5kZWYganFsU2VhcmNoID0gXCJwcm9qZWN0ID0gJ1wiICsgaXNzdWUuZ2V0UHJvamVjdE9iamVjdCgpLm5hbWUgKyBcIicgQU5EIFwiICtcbiAgICBcIihpc3N1ZXR5cGUgbm90IGluIChcXFwiTmV3IEluc3RhbGxhdGlvblxcXCIsIFxcXCJQbGFubmVkIE1haW50ZW5hbmNlIFRpY2tldFxcXCIsIFxcXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcXFwiKSBPUiBpc3N1ZXR5cGUgaW4gKFxcXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcXFwiKSBBTkQgc3RhdHVzID0gRG9uZSkgXCIgK1xuICAgIFwiQU5EIE9QX0FTU0VUID0gXCIgKyBhc3NldEtleSArIFwiIEFORCAoKGlzc3VldHlwZSBub3QgaW4gKFxcXCJOZXcgSW5zdGFsbGF0aW9uXFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0XFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1xcXCIpIEFORCBPUF9FWEVDVVRJT05fREFURSBJUyBOT1QgRU1QVFkgQU5EIE9QX0VYRUNVVElPTl9EQVRFID49IC02MGQpIFwiICtcbiAgICBcIk9SIChpc3N1ZXR5cGUgaW4gKFxcXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcXFwiKSBBTkQgaXNzdWVGdW5jdGlvbiBpbiBzdWJ0YXNrc09mKFxcXCJPUF9FWEVDVVRJT05fREFURSBJUyBOT1QgRU1QVFkgQU5EIE9QX0VYRUNVVElPTl9EQVRFID49IC02MGRcXFwiKSkgT1IgKGlzc3VldHlwZSBub3QgaW4gKFxcXCJOZXcgSW5zdGFsbGF0aW9uXFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0XFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1xcXCIpIEFORCBPUF9FWEVDVVRJT05fREFURSBJUyBFTVBUWSBBTkQgT1BfUExBTk5FRF9EQVRFIElTIE5PVCBFTVBUWSBBTkQgT1BfUExBTk5FRF9EQVRFID49IC02MGQpIFwiICtcbiAgICBcIk9SIChpc3N1ZXR5cGUgaW4gKFxcXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcXFwiKSBBTkQgaXNzdWVGdW5jdGlvbiBpbiBzdWJ0YXNrc09mKFxcXCJPUF9FWEVDVVRJT05fREFURSBJUyBFTVBUWSBBTkQgT1BfUExBTk5FRF9EQVRFIElTIE5PVCBFTVBUWSBBTkQgT1BfUExBTk5FRF9EQVRFID49IC02MGRcXFwiKSkgT1IgKGlzc3VldHlwZSBub3QgaW4gKFxcXCJOZXcgSW5zdGFsbGF0aW9uXFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0XFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1xcXCIpIEFORCBPUF9FWEVDVVRJT05fREFURSBJUyBFTVBUWSBBTkQgT1BfUExBTk5FRF9EQVRFIElTIEVNUFRZIEFORCBPUF9SRVFVRVNURURfREFURSBJUyBOT1QgRU1QVFkgQU5EIE9QX1JFUVVFU1RFRF9EQVRFID49IC02MGQpIFwiICtcbiAgICBcIk9SIChpc3N1ZXR5cGUgaW4gKFxcXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcXFwiKSBBTkQgaXNzdWVGdW5jdGlvbiBpbiBzdWJ0YXNrc09mKFxcXCJPUF9FWEVDVVRJT05fREFURSBJUyBFTVBUWSBBTkQgT1BfUExBTk5FRF9EQVRFIElTIEVNUFRZIEFORCBPUF9SRVFVRVNURURfREFURSBJUyBOT1QgRU1QVFkgQU5EIE9QX1JFUVVFU1RFRF9EQVRFID49IC02MGRcXFwiKSkpXCJcblxuXG5cbmxvZy5kZWJ1ZyBqcWxTZWFyY2hcblxuZGVmIHF1ZXJ5ID0ganFsUXVlcnlQYXJzZXIucGFyc2VRdWVyeShqcWxTZWFyY2gpXG5kZWYgdXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQubG9nZ2VkSW5Vc2VyXG5kZWYgc2VhcmNoU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChTZWFyY2hTZXJ2aWNlKVxuZGVmIHNlYXJjaCA9IHNlYXJjaFNlcnZpY2Uuc2VhcmNoKHVzZXIsIHF1ZXJ5LCBQYWdlckZpbHRlci5nZXRVbmxpbWl0ZWRGaWx0ZXIoKSlcbmRlZiB0a3RMaXN0ID0gXCJcIlxuZGVmIGRhdGUgPSBuZXcgRGF0ZSgpXG5kZWYgd2FybmluZ051bVRrdCA9IGZhbHNlXG5cbmlmKHNlYXJjaC5yZXN1bHRzLnNpemUoKSA+PSAyKSB7XG4gICAgd2FybmluZ051bVRrdCA9IHRydWVcbiAgICB3YXJuaW5ncyA9IHRydWVcbiAgICAvL1ByZXBhcm8gaWwgd2FybmluZyBkYSBtb3N0cmFyZSBhbGwndXRlbnRlIGNvbiBpbCBkZXR0YWdsaW8gZGVsbGUgaXNzdWUgZ2lcdTAwZTAgZXNpc3RlbnRpXG4gICAgZm9yKGkgaW4gc2VhcmNoLnJlc3VsdHMpe1xuICAgICAgICBpZihpLnN0YXR1cy5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKFwiRG9uZVwiKSAmJiBpLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMoXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcIikpe1xuICAgICAgICAgICAgaWYodGt0TGlzdCAhPSBcIlwiKXtcbiAgICAgICAgICAgICAgICB0a3RMaXN0ID0gdGt0TGlzdCArIFwiOyBcIiArIGkuZ2V0UGFyZW50T2JqZWN0KCkua2V5LnRvU3RyaW5nKCkgKyBcIiAoXCIgKyBpLmdldFBhcmVudE9iamVjdCgpLmdldElzc3VlVHlwZSgpLm5hbWUgKyBcIikgXCIgKyBpLnN0YXR1cy5uYW1lLnRvU3RyaW5nKClcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHRrdExpc3QgPSBpLmdldFBhcmVudE9iamVjdCgpLmtleS50b1N0cmluZygpICsgXCIgKFwiICsgaS5nZXRQYXJlbnRPYmplY3QoKS5nZXRJc3N1ZVR5cGUoKS5uYW1lICsgXCIpIFwiICsgaS5zdGF0dXMubmFtZS50b1N0cmluZygpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL3RrdExpc3QgPSB0a3RMaXN0ICsgXCJcXG5cIiArIGkuZ2V0UGFyZW50T2JqZWN0KCkua2V5LnRvU3RyaW5nKCkgKyBcIiAoXCIgKyBpLmdldFBhcmVudE9iamVjdCgpLmdldElzc3VlVHlwZSgpLm5hbWUgKyBcIikgXCIgKyBpLnN0YXR1cy5uYW1lLnRvU3RyaW5nKClcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBpZihpLnN0YXR1cy5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKFwiQ2xvc2VkXCIpICYmICFpLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMoXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcIikpe1xuICAgICAgICAgICAgICAgIGlmKHRrdExpc3QgIT0gXCJcIil7XG4gICAgICAgICAgICAgICAgICAgIHRrdExpc3QgPSB0a3RMaXN0ICsgXCI7IFwiICsgaS5rZXkudG9TdHJpbmcoKSArIFwiIChcIiArIGkuZ2V0SXNzdWVUeXBlKCkubmFtZSArIFwiKSBcIiArIGkuc3RhdHVzLm5hbWUudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICB0a3RMaXN0ID0gaS5rZXkudG9TdHJpbmcoKSArIFwiIChcIiArIGkuZ2V0SXNzdWVUeXBlKCkubmFtZSArIFwiKSBcIiArIGkuc3RhdHVzLm5hbWUudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL3RrdExpc3QgPSB0a3RMaXN0ICsgXCJcXG5cIiArIGkua2V5LnRvU3RyaW5nKCkgKyBcIiAoXCIgKyBpLmdldElzc3VlVHlwZSgpLm5hbWUgKyBcIikgXCIgKyBpLnN0YXR1cy5uYW1lLnRvU3RyaW5nKClcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGlmKHRrdExpc3QgIT0gXCJcIil7XG4gICAgICAgICAgICAgICAgICAgIHRrdExpc3QgPSB0a3RMaXN0ICsgXCI7IFwiICsgaS5rZXkudG9TdHJpbmcoKSArIFwiIChcIiArIGkuZ2V0SXNzdWVUeXBlKCkubmFtZSArIFwiKSBcIiArIGkuc3RhdHVzLm5hbWUudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICB0a3RMaXN0ID0gaS5rZXkudG9TdHJpbmcoKSArIFwiIChcIiArIGkuZ2V0SXNzdWVUeXBlKCkubmFtZSArIFwiKSBcIiArIGkuc3RhdHVzLm5hbWUudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL3RrdExpc3QgPSB0a3RMaXN0ICsgXCJcXG5cIiArIGkua2V5LnRvU3RyaW5nKCkgKyBcIiAoXCIgKyBpLmdldElzc3VlVHlwZSgpLm5hbWUgKyBcIikgXCIgKyBpLnN0YXR1cy5uYW1lLnRvU3RyaW5nKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBsb2cuZGVidWcgXCJ0a3RMaXN0OiBcIiArIHRrdExpc3Rcbn1cblxuZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuXG5pZiAoIXdhcm5pbmdzKXtcbiAgICByZXR1cm4gdHJ1ZVxufWVsc2V7XG4gICAgaWYod2FybmluZ3Mpe1xuICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIikpe1xuICAgICAgICAgICAgLy9sb2cuZGVidWcgXCJyZXR1cm4gdHJ1ZVwiXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuXHRcdFx0ZGVmIHdMaXN0Q29uZmlybUVtcHR5Q29udHJhY3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1NdWx0aXBsZVRrdHMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYobWlzc2luZ0NvbnRyYWN0KXtcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eUNvbnRyYWN0LmFkZChcIldcIilcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eUNvbnRyYWN0LmFkZChcIkNVU1RPTUVSX0NPTlRSQUNUX01JU1NJTkdcIilcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eUNvbnRyYWN0LmFkZChudWxsKVxuXG4gICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5Q29udHJhY3QpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKGV4cGlyZWRDb250cmFjdCl7XG4gICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlDb250cmFjdC5hZGQoXCJXXCIpXG4gICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlDb250cmFjdC5hZGQoXCJDVVNUT01FUl9DT05UUkFDVF9FWFBJUkVEXCIpXG4gICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlDb250cmFjdC5hZGQobnVsbClcblxuICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eUNvbnRyYWN0KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZih3YXJuaW5nTnVtVGt0KXtcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1NdWx0aXBsZVRrdHMuYWRkKFwiV1wiKVxuICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybU11bHRpcGxlVGt0cy5hZGQodGt0TGlzdClcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1NdWx0aXBsZVRrdHMuYWRkKFwiTU9SRV9USEFOXzJfVEtUU19MQVNUXzYwX0RBWVNcIilcbiAgICAgICAgICAgICAgICAvL3dMaXN0Q29uZmlybU11bHRpcGxlVGt0cy5hZGQobnVsbClcblxuICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1NdWx0aXBsZVRrdHMpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiV1wiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpIFxuICAgICAgICB9XG4gICAgfVxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">6411a0f5-9ae7-4a56-a7f5-a857227a153e</arg>
          <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIFJlLVNjaGVkdWxlIEZsYWc=</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5pbXBvcnQgamF2YS50ZXh0LkRhdGVGb3JtYXQ7XG5pbXBvcnQgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQ7XG5pbXBvcnQgamF2YS51dGlsLkRhdGU7XG5pbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wXG5cblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5cbmRlZiB3YXJuaW5ncyA9IGZhbHNlXG5kZWYgbWlzc2luZ0NvbnRyYWN0ID0gZmFsc2VcbmRlZiBleHBpcmVkQ29udHJhY3QgPSBmYWxzZVxuZGVmIGVycm9ycyA9IGZhbHNlXG5cbmRlZiByZXNjaGVkdWxpbmcgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJlc2NoZWR1bGluZyddID8gcHJvcGVydGllc1snY2YucmVzY2hlZHVsaW5nJ10udG9TdHJpbmcoKSA6IFwiT1BfQ0hBTkdFX1NDSEVEVUxJTkdcIilbMF1cbmRlZiB0cmFuc2l0aW9uQ2hlY2sgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmNoZWNrQW5kQ29uZmlybTInXS50b1N0cmluZygpKVswXVxuZGVmIGZpcnN0VGlja2V0ID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5maXJzdFRrdCddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiB3YXJuaW5nRW1wdHlGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlcnJvck1hbmRhdG9yeUZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKVxuIFxuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXNjaGVkdWxpbmcpLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpICYmIChpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0Lm5ld0luc3RhbGxhdGlvbiddKSB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGZpcnN0VGlja2V0KSE9bnVsbCkpe1xuICAgIC8vQXNrIGNvbmZpcm1hdGlvbiB0byBkZWxldGUgYW5kIGNyZWF0ZSBhZ2FpbiBOZXcgSW5zdGFsbGF0aW9uIGF0dGFjaG1lbnRzXG4gICAgd2FybmluZ3MgPSB0cnVlXG59XG5cbmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcblxuaWYgKCF3YXJuaW5ncyl7XG4gICAgcmV0dXJuIHRydWVcbn1lbHNle1xuICAgIGlmKHdhcm5pbmdzKXtcbiAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpKXtcbiAgICAgICAgICAgIC8vbG9nLmRlYnVnIFwicmV0dXJuIHRydWVcIlxuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBkZWYgd0xpc3QgPSBuZXcgQXJyYXlMaXN0KClcblx0XHRcdGRlZiB3TGlzdENvbmZpcm1FbXB0eUNvbnRyYWN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5Q29udHJhY3QuYWRkKFwiV1wiKVxuICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlDb250cmFjdC5hZGQoXCJORVdfRE9DU19HRU5FUkFUSU9OXCIpXG4gICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eUNvbnRyYWN0LmFkZChudWxsKVxuXG4gICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHlDb250cmFjdClcbiAgICAgICAgXG4gICAgICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiV1wiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpIFxuICAgICAgICB9XG4gICAgfVxufSIsInNjcmlwdFBhdGgiOm51bGx9</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">136ddcac-3447-4136-8695-c845548ae5b2</arg>
          <arg name="FIELD_NOTES">YCFgRGVsZXRlIHByZXZpb3VzIGF0dGFjaG1lbnRzIHJlbGF0ZWQgdG8gTkVXIEluc3RhbGxhdGlvbiBUS1QgR2VuZXJhdGlvbg==</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5cbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5kZWYgYXV0b21hdGljYWxseUNsb3NlZCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUNsb3NlZCddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiByZXNjaGVkdWxpbmcgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJlc2NoZWR1bGluZyddID8gcHJvcGVydGllc1snY2YucmVzY2hlZHVsaW5nJ10udG9TdHJpbmcoKSA6IFwiT1BfQ0hBTkdFX1NDSEVEVUxJTkdcIilbMF1cbmRlZiB0cmFuc2l0aW9uQ2hlY2sgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmNoZWNrQW5kQ29uZmlybTInXS50b1N0cmluZygpKVswXVxuXG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcblxuLypTY3JpcHQgVmFyaWFibGVzKi9cbi8vUGVyIHRlc3QgZGEgY29uc29sZVxuLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIk9QVVQtMTQwNjJcIilcblxuaW50IE9QQUEgPSBwcm9wZXJ0aWVzWydpc2NoZW1hLmFhLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuaW50IERCTyA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuZGJvLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuXG4vKlJpbW96aW9uZSBhbGxlZ2F0byByYXBwb3J0byBkaSBpbnRlcnZlbnRvIGFwcGVuYSBjcmVhdG8qL1xuLyogR2V0IEluc2lnaHQgSVFMIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xuQ2xhc3MgaXFsRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuSVFMRmFjYWRlXCIpOyBcbmRlZiBpcWxGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUoaXFsRmFjYWRlQ2xhc3MpO1xuXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7XG5kZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcblxuLyogR2V0IEluc2lnaHQgT2JqZWN0IFR5cGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBvYmplY3RUeXBlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUZhY2FkZVwiKTtcbmRlZiBvYmplY3RUeXBlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVGYWNhZGVDbGFzcyk7XG5cbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBBdHRyaWJ1dGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTtcbmRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XG5cbkNsYXNzIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5zZXJ2aWNlcy5tb2RlbC5mYWN0b3J5Lk9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5XCIpO1xuZGVmIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MpO1xuXG5cbmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVzY2hlZHVsaW5nKS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKSAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIikpe1xuXG4gICAgLyogU3BlY2lmeSB0aGUgc2NoZW1hIGlkIGFzIHdlbGwgYXMgdGhlIElRTCB0aGF0IHdpbGwgZmV0Y2ggb2JqZWN0cy4gSW4gdGhpcyBjYXNlIGFsbCBvYmplY3RzIHdpdGggTmFtZSBtYXRjaGluZyB0aGUgdmFsdWVDRiwgYmUgc3VyZSB0byBpbmNsdWRlIFwiIGFyb3VuZCB2YWx1ZSAqL1xuICAgIGRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5cXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5uZXdJbnN0VGt0J10udG9TdHJpbmcoKSArIFwiXFxcIiA9IHRydWUgQU5EIFwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyBcIiE9dHJ1ZSBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleSA9IFwiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIilcIik7IC8vIFNlZSB0aGUgY29tcGxldGUgbGlzdCBvZiBwb3NzaWJsZSBJUUwgb24gdGhlIEluc2lnaHQgUXVlcnkgTGFuZ3VhZ2UgZG9jdW1lbnRhdGlvbiBwYWdlXG4gICAgLyogSWYgdGhpcyBpcyBhIG1hbmRhdG9yeSBmaWVsZCB5b3Ugc2hvdWxkIGJlIGFibGUgdG8gZG8gdGhpczogKi9cbiAgICBsb2cuZGVidWcgXCJJUUw6IFwiICsgXCJcXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5jYXRlZ29yeVJlZiddLnRvU3RyaW5nKCkgKyBcIlxcXCIuXFxcIlwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkubmV3SW5zdFRrdCddLnRvU3RyaW5nKCkgKyBcIlxcXCIgPSB0cnVlIEFORCBcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpICsgXCIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSBcIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIpXCJcblxuICAgIGZvcihpb2JqIGluIG9iamVjdHMpe1xuICAgICAgICAvKiBVUERBVEUgT0pCRUNUIERFTEVURUQgVkFMVUUgKi9cbiAgICAgICAgZGVmIG9iaiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihpb2JqLmdldElkKCkpO1xuXG4gICAgICAgIGludCBhdHRhY2htZW50RGVsZXRlZCA9IHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudC5kZWxldGVkLmlkJ10gPyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnQuZGVsZXRlZC5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKCkgOiAzMjY1XG5cbiAgICAgICAgYXR0cmliVHlwZSA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKGF0dGFjaG1lbnREZWxldGVkKTsgXG5cbiAgICAgICAgbmV3QXR0cmliID0gb2JqLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW4oYXR0cmliVHlwZSk7XG4gICAgICAgIGRlZiBuZXdBdHRyaWJWYWx1ZSA9IG5ld0F0dHJpYi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbmV3QXR0cmliVmFsdWUuc2V0VmFsdWUoYXR0cmliVHlwZSwgdHJ1ZSk7XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHtcbiAgICAgICAgICAgIGxvZy53YXJuKFwiU0VUSU5TSUdIVFZBTFVFOiBVbmFibGUgdG8gc2V0IGF0dHJpYnV0ZSBcIiArIGF0dHJpYlR5cGUgKyBcIiB0byBcIiArIHRvdGFsQW1vdW50U3VwcCArIFwiLiBFeGl0aW5nLlwiKTtcbiAgICAgICAgICAgIGxvZy53YXJuKFNFVElOU0lHSFRWQUxVRTogdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBkZWYgYXR0cmliVmFsdWVzID0gbmV3QXR0cmliLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTtcbiAgICAgICAgYXR0cmliVmFsdWVzLmFkZChuZXdBdHRyaWJWYWx1ZSk7XG4gICAgICAgIG5ld0F0dHJpYi5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKGF0dHJpYlZhbHVlcyk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG5ld0F0dHJpYiA9IG9iamVjdEZhY2FkZS5zdG9yZU9iamVjdEF0dHJpYnV0ZUJlYW4obmV3QXR0cmliKTtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSkge1xuICAgICAgICAgICAgbG9nLndhcm4oXCJTRVRJTlNJR0hUVkFMVUU6IFVuYWJsZSB0byBzYXZlIGNoYW5nZXMuIEV4aXRpbmcuXCIpO1xuICAgICAgICAgICAgbG9nLndhcm4oU0VUSU5TSUdIVFZBTFVFOiB2aWUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGxvZy5pbmZvKFwiU0VUSU5TSUdIVFZBTFVFOiBTdWNjZXNzZnVsbHkgc2F2ZWQgdmFsdWVcIik7XG4gICAgfVxuICAgIFxufSIsInNjcmlwdFBhdGgiOm51bGx9</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">17f1689e-675a-4677-aec8-021a2640fd0c</arg>
          <arg name="FIELD_NOTES">YCFgT1A6IERvYyBUZW1wbGF0ZSBnZW5lcmF0aW9uIC0gc2UgTmV3IEluc3RhbGxhdGlvbiBPUiBGaXJzdCBUaWNrZXQgPSB0cnVl</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5Xb3JrZmxvd0V4Y2VwdGlvbjtcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvblxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyO1xuaW1wb3J0IGdyb292eS5qc29uLlN0cmVhbWluZ0pzb25CdWlsZGVyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5DdXN0b21GaWVsZE1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3I7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMuY29kZWMuYmluYXJ5LkJhc2U2NDtcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5XG5pbXBvcnQgZ3Jvb3Z5eC5uZXQuaHR0cC5IVFRQQnVpbGRlclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcblxuZGVmIHJlcXVlc3RNZXRob2RcbmRlZiBiYXNlVVJMXG5cbmRlZiBmaXJzdFRpY2tldCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuZmlyc3RUa3QnXS50b1N0cmluZygpKVswXVxuXG5sb2cuZGVidWcgaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZVxubG9nLmRlYnVnIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZmlyc3RUaWNrZXQpXG5cblxuLyogUkVTVCBBUEkgcGVyIEludmlvIE5vdGlmaWNhIEVtYWlsIE9OU0lURV9SRVBPUlQgKi9cbnJlcXVlc3RNZXRob2QgPSBcIkdFVFwiO1xuZGVmIHJlc2NoZWR1bGluZyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YucmVzY2hlZHVsaW5nJ10gPyBwcm9wZXJ0aWVzWydjZi5yZXNjaGVkdWxpbmcnXS50b1N0cmluZygpIDogXCJPUF9DSEFOR0VfU0NIRURVTElOR1wiKVswXVxuZGVmIHRyYW5zaXRpb25DaGVjayA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY2hlY2tBbmRDb25maXJtMiddLnRvU3RyaW5nKCkpWzBdXG5cbmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVzY2hlZHVsaW5nKS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKSAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIikgJiYgKGlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQubmV3SW5zdGFsbGF0aW9uJ10pIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZmlyc3RUaWNrZXQpIT1udWxsKSl7XG4gICAgZGVmIGZpcnN0X3RpY2tldD1mYWxzZVxuICAgIGRlZiB0ZW1wbGF0ZT1cIlwiXG4gICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShmaXJzdFRpY2tldCkhPW51bGwpe1xuICAgICAgICBmaXJzdF90aWNrZXQ9dHJ1ZVxuICAgICAgICB0ZW1wbGF0ZT1cIkZJUlNUX1RJQ0tFVCU3Q01BTlVGQUNUVVJFUlwiXG4gICAgfWVsc2V7XG4gICAgICAgIHRlbXBsYXRlPVwiTkVXX0lOU1RBTExBVElPTl9DUkVBVEVfVEtUJTdDTUFOVUZBQ1RVUkVSXCJcbiAgICB9XG4gICAgXG4gICAgaWYoaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5uZXdJbnN0YWxsYXRpb24nXSkpe1xuICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvYXV0b21hdGlvbi9kb2N1bWVudC9nZW5lcmF0aW9uL2NoZWNrP0lTU1VFX0tFWT1cIisgaXNzdWUua2V5ICtcIiZET0NfQ0FURUdPUlk9XCIgKyB0ZW1wbGF0ZSArIFwiJkVOQUJMRURfRk9SX0ZJUlNUX1RJQ0tFVD1cIitmaXJzdF90aWNrZXQrXCImSU1QT1JUX0ZST009XCJcbiAgICB9ZWxzZXtcbiAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vZG9jdW1lbnQvZ2VuZXJhdGlvbi9jaGVjaz9JU1NVRV9LRVk9XCIrIGlzc3VlLmtleSArXCImRE9DX0NBVEVHT1JZPVwiICsgdGVtcGxhdGUgKyBcIiZFTkFCTEVEX0ZPUl9GSVJTVF9USUNLRVQ9XCIrZmlyc3RfdGlja2V0K1wiJklNUE9SVF9GUk9NPU9QX0FTU0VUXCJcbiAgICB9XG4gICAgXG4gICAgbG9nLmRlYnVnIGJhc2VVUkxcbiAgICBVUkwgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cdGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICBcbiAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICBsb2cuZGVidWcgXCJFcnJvclN0cmVhbTogXCIgKyBjb25uZWN0aW9uLmdldEVycm9yU3RyZWFtKCkudG9TdHJpbmcoKVxuICAgICAgICBsb2cuZGVidWcgXCJnZXRIZWFkZXJGaWVsZHMoKTogXCIgKyBjb25uZWN0aW9uLmdldEhlYWRlckZpZWxkcygpXG4gICAgICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHRcbiAgICAgICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xuXG4gICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpXG4gICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgXG4gICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcblxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLURPQ1NcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5tZXNzYWdlKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgfVxufVxuIiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">3bddafa4-9601-4ff0-9db1-83ec1b0f0850</arg>
          <arg name="FIELD_NOTES">YCFgR2VuZXJhdGUgU04gZm9yIG9sZCB0aWNrZXRz</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuXG5kZWYgU04gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfU0FQX1NFUlZJQ0VfTk9USUZJQ0FUSU9OXCIpWzBdXG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcblxuVVJMIHVybFxuSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvblxuXG5pZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKFNOKSA9PSBudWxsICYmIGlzc3VlLmlzc3VlVHlwZS5uYW1lICE9IFwiUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXRcIil7XG4gICAgcmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuXG4gICAgZGVmIGJvZHlfcmVxID0gW11cbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXG4gICAgICAgIFwic3RhdHVzXCI6IFwiT1BFXCJcbiAgICBdIFxuXG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL3NlcnZpY2Uvbm90aWZpY2F0aW9uXCJcblxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxuICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNOOiBcIiArIGJvZHlfcmVxXG4gICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxuICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgIFxuICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG4gICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcblxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TTi1VUERBVEVcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICB9XG59XG4gIiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
      </validators>
      <results>
        <unconditional-result old-status="null" status="null" step="2">
          <post-functions>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
            <function type="class">
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="append.value"></arg>
              <arg name="maxAllowed-integerValue">50</arg>
              <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="field.value">%%CURRENT_DATETIME%%</arg>
              <arg name="field.name">customfield_22639</arg>
              <arg name="scopeType">SAME</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
              <arg name="scopeSource-jql"></arg>
            </function>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">14b92cea1dc4f22ec42d0ad489a7359b4ad4a858</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IE5ldyBJbnN0YWxsYXRpb24gLSBDaGVjayBsaW5rZWRUaWNrZXRzICYgRmFzdC1UcmFuc2FjdCB0aGVt</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLldBUk4pXG5cbmxvZy53YXJuIFwiJHtpc3N1ZS5rZXl9IFRyYW5zYXppb25lIEFTU0lHTiBUTyBTVVBQTElFUiAtIFBvc3QgRnVuY3Rpb24gY2hlY2sgbGlua2VkSXNzdWVzXCJcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuZGVmIGF1dG9tYXRpY2FsbHlDb25maXJtZWQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlBc3NpZ25lZCddID8gcHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUFzc2lnbmVkJ10udG9TdHJpbmcoKSA6IFwiT1BfQVVUT01BVElDQUxMWV9BU1NJR05FRFwiKVswXVxuSXNzdWVJbmRleGluZ1NlcnZpY2UgXHRpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSlcblxuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL2lzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0yNzZcIilcblxuLypERVYqL1xuQVNTSUdOX1RPX1NVUFBMSUVSID0gcHJvcGVydGllc1snd2YudHIuYXNzaWduVG9TdXBwbGllciddID8gcHJvcGVydGllc1snd2YudHIuYXNzaWduVG9TdXBwbGllciddIDogNTFcblxuLypQUk9EKi9cbi8vQ09ORklSTV9UT19DVVNUT01FUlxuXG5kZWYgdXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuZGVmIGlzc3VlU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlU2VydmljZSgpXG5cbi8qU2UgZXNlZ3VvIGxhIGNvbmZpcm0gdG8gY3VzdG9tZXIgc3UgdW4gdGlja2V0IGNvbiAxIG8gKyB0aWNrZXQgY29sbGVnYXRpLCB2ZXJpZmljbyBlIHNwb3N0byBpbiBhdXRvbWF0aWNvIGdsaSBldmVudHVhbGkgdGlja2V0IGNvbGxlZ2F0aSovXG5sb2cud2FybiBcInZlcmlmaWNvIGUgc3Bvc3RvIGluIGF1dG9tYXRpY28gZ2xpIGV2ZW50dWFsaSB0aWNrZXQgY29sbGVnYXRpXCJcblxuaWYoaXNzdWUuZ2V0SXNzdWVUeXBlKCkuZ2V0TmFtZSgpID09IHByb3BlcnRpZXNbJ2l0Lm5ld0luc3RhbGxhdGlvbiddLnRvU3RyaW5nKCkgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKT09bnVsbCB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLnRvU3RyaW5nKCkuZXF1YWxzKFwiTm9cIikpe1xuICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKVxuICAgIGZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbEluSXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHtcbiAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcblxuICAgICAgICBpZihpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkhPSBudWxsICYmIGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgIGxvZy53YXJuIFwiSXNzdWUgY29uIHJlbGF0ZXNJbklzc3VlTGlua1wiXG4gICAgICAgICAgICAvKkVzZWd1aXJlIHRyYW5zYXppb25lIGRpIHN0YXRvIGRlbGxhIHNvdXJjZUlzc3VlKi9cbiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZSA9IGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKVxuICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlU3RhdHVzID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzKClcbiAgICAgICAgICAgIGRlZiB0cmFuc2l0aW9uSWRcbiAgICAgICAgICAgIGlmKGxpbmtlZElzc3VlU3RhdHVzLm5hbWUgPT0gcHJvcGVydGllc1snd2Yub3BlbiddLnRvU3RyaW5nKCkpe1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb25JZD1BU1NJR05fVE9fU1VQUExJRVJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHRyYW5zaXRpb25JZD09QVNTSUdOX1RPX1NVUFBMSUVSKXtcbiAgICAgICAgICAgICAgICAvLyBQcmVwYXJlIG91ciBpbnB1dCBmb3IgdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKVxuICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGgge1xuICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2sodHJ1ZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy9kZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKVxuICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09IFwiWWVzXCIgfVxuICAgICAgICAgICAgICAgIC8vaXNzdWVJbnB1dFBhcmFtZXRlcnMuYWRkQ3VzdG9tRmllbGRWYWx1ZShmaWVsZENvbmZpZy5nZXRJZCgpLCBcIlllc1wiKSBcbiAgICAgICAgICAgICAgICAvL2xvZy53YXJuIFwiaXNzdWVJbnB1dFBhcmFtZXRlcnM6IFwiICsgaXNzdWVJbnB1dFBhcmFtZXRlcnNcbiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcbiAgICAgICAgICAgICAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBsaW5rZWRJc3N1ZVxuXG4gICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNvbmZpcm1lZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSlcbiAgICAgICAgICAgICAgICBsb2cud2FybiBcImZpZWxkQ29uZmlnOiBcIiArIGZpZWxkQ29uZmlnXG4gICAgICAgICAgICAgICAgZGVmIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gXCJZZXNcIiB9XG4gICAgICAgICAgICAgICAgYXV0b21hdGljYWxseUNvbmZpcm1lZC51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcblxuICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGxpbmtlZElzc3VlKVxuICAgICAgICAgICAgICAgIGxvZy53YXJuIFwiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGFcIlxuXG4gICAgICAgICAgICAgICAgLy9kZWYgdmFsaWRhdGlvblJlc3VsdCA9IGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpXG4gICAgICAgICAgICAgICAgaWYgKGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSB0cmFuc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpKVxuICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259XCIpXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJUcmFuc2F6aW9uZSBmYXR0YSA3OSAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c31cIilcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259XCIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgTGlzdDxJc3N1ZUxpbms+IGFsbE91dElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgICAgIGlmKGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpIT0gbnVsbCAmJiBpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICBsb2cud2FybiBcIklzc3VlIGNvbiByZWxhdGVzT3V0SXNzdWVMaW5rXCJcbiAgICAgICAgICAgIC8qRXNlZ3VpcmUgdHJhbnNhemlvbmUgZGkgc3RhdG8gZGVsbGEgZGVzdGluYXRpb25Jc3N1ZSovXG4gICAgICAgICAgICBkZWYgbGlua2VkSXNzdWUgPSBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKVxuICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlU3RhdHVzID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzKClcbiAgICAgICAgICAgIGRlZiB0cmFuc2l0aW9uSWRcbiAgICAgICAgICAgIGxvZy53YXJuIFwibGlua2VkSXNzdWU6IFwiICsgbGlua2VkSXNzdWVcbiAgICAgICAgICAgIGxvZy53YXJuIFwibGlua2VkSXNzdWVTdGF0dXMubmFtZTogXCIgKyBsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lXG4gICAgICAgICAgICBpZihsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lID09IHByb3BlcnRpZXNbJ3dmLm9wZW4nXS50b1N0cmluZygpKXtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9QVNTSUdOX1RPX1NVUFBMSUVSXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKHRyYW5zaXRpb25JZD09QVNTSUdOX1RPX1NVUFBMSUVSKXtcbiAgICAgICAgICAgICAgICAvLyBQcmVwYXJlIG91ciBpbnB1dCBmb3IgdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKVxuICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGgge1xuICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2sodHJ1ZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy9kZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKVxuICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09IFwiWWVzXCIgfVxuICAgICAgICAgICAgICAgIC8vaXNzdWVJbnB1dFBhcmFtZXRlcnMuYWRkQ3VzdG9tRmllbGRWYWx1ZShmaWVsZENvbmZpZy5nZXRJZCgpLCBcIlllc1wiKSBcblxuICAgICAgICAgICAgICAgIGRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlXG5cbiAgICAgICAgICAgICAgICBkZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLmdldFJlbGV2YW50Q29uZmlnKGxpbmtlZElzc3VlKVxuICAgICAgICAgICAgICAgIGxvZy53YXJuIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcbiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuXG4gICAgICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpXG4gICAgICAgICAgICAgICAgbG9nLndhcm4gXCJVcGRhdGVkIGN1c3RvbWZpZWxkIC0gaXNzdWUgbGlua2F0YVwiXG5cbiAgICAgICAgICAgICAgICBpZiAoaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgZGVmIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpXG4gICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJGYWlsZWQgdG8gdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn1cIilcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlRyYW5zYXppb25lIGZhdHRhIDEyMiAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c31cIilcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259XCIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICB9XG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlCmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZQppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQpDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5XQVJOKQoKbG9nLndhcm4gIiR7aXNzdWUua2V5fSBUcmFuc2F6aW9uZSBBU1NJR04gVE8gU1VQUExJRVIgLSBQb3N0IEZ1bmN0aW9uIGNoZWNrIGxpbmtlZElzc3VlcyIKCklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTsKQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpOwpkZWYgYXV0b21hdGljYWxseUNvbmZpcm1lZCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUFzc2lnbmVkJ10gPyBwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5QXNzaWduZWQnXS50b1N0cmluZygpIDogIk9QX0FVVE9NQVRJQ0FMTFlfQVNTSUdORUQiKVswXQpJc3N1ZUluZGV4aW5nU2VydmljZSAJaXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpCgpJc3N1ZSBpc3N1ZSA9IGlzc3VlCi8vUGVyIHRlc3QgZGEgY29uc29sZQovL2lzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKCJPUFVULTI3NiIpCgovKkRFViovCkFTU0lHTl9UT19TVVBQTElFUiA9IHByb3BlcnRpZXNbJ3dmLnRyLmFzc2lnblRvU3VwcGxpZXInXSA/IHByb3BlcnRpZXNbJ3dmLnRyLmFzc2lnblRvU3VwcGxpZXInXSA6IDUxCgovKlBST0QqLwovL0NPTkZJUk1fVE9fQ1VTVE9NRVIKCmRlZiB1c2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpCmRlZiBpc3N1ZVNlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZVNlcnZpY2UoKQoKLypTZSBlc2VndW8gbGEgY29uZmlybSB0byBjdXN0b21lciBzdSB1biB0aWNrZXQgY29uIDEgbyArIHRpY2tldCBjb2xsZWdhdGksIHZlcmlmaWNvIGUgc3Bvc3RvIGluIGF1dG9tYXRpY28gZ2xpIGV2ZW50dWFsaSB0aWNrZXQgY29sbGVnYXRpKi8KbG9nLndhcm4gInZlcmlmaWNvIGUgc3Bvc3RvIGluIGF1dG9tYXRpY28gZ2xpIGV2ZW50dWFsaSB0aWNrZXQgY29sbGVnYXRpIgoKaWYoaXNzdWUuZ2V0SXNzdWVUeXBlKCkuZ2V0TmFtZSgpID09IHByb3BlcnRpZXNbJ2l0Lm5ld0luc3RhbGxhdGlvbiddLnRvU3RyaW5nKCkgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKT09bnVsbCB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLnRvU3RyaW5nKCkuZXF1YWxzKCJObyIpKXsKICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKQogICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykgewogICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7CgogICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgbG9nLndhcm4gIklzc3VlIGNvbiByZWxhdGVzSW5Jc3N1ZUxpbmsiCiAgICAgICAgICAgIC8qRXNlZ3VpcmUgdHJhbnNhemlvbmUgZGkgc3RhdG8gZGVsbGEgc291cmNlSXNzdWUqLwogICAgICAgICAgICBkZWYgbGlua2VkSXNzdWUgPSBpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkKICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlU3RhdHVzID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzKCkKICAgICAgICAgICAgZGVmIHRyYW5zaXRpb25JZAogICAgICAgICAgICBpZihsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lID09IHByb3BlcnRpZXNbJ3dmLm9wZW4nXS50b1N0cmluZygpKXsKICAgICAgICAgICAgICAgIHRyYW5zaXRpb25JZD1BU1NJR05fVE9fU1VQUExJRVIKICAgICAgICAgICAgfQogICAgICAgICAgICBpZih0cmFuc2l0aW9uSWQ9PUFTU0lHTl9UT19TVVBQTElFUil7CiAgICAgICAgICAgICAgICAvLyBQcmVwYXJlIG91ciBpbnB1dCBmb3IgdGhlIHRyYW5zaXRpb24KICAgICAgICAgICAgICAgIGRlZiBpc3N1ZUlucHV0UGFyYW1ldGVycyA9IGlzc3VlU2VydmljZS5uZXdJc3N1ZUlucHV0UGFyYW1ldGVycygpCiAgICAgICAgICAgICAgICBpc3N1ZUlucHV0UGFyYW1ldGVycy53aXRoIHsKICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2sodHJ1ZSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSkKICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgIC8vaXNzdWVJbnB1dFBhcmFtZXRlcnMuYWRkQ3VzdG9tRmllbGRWYWx1ZShmaWVsZENvbmZpZy5nZXRJZCgpLCAiWWVzIikgCiAgICAgICAgICAgICAgICAvL2xvZy53YXJuICJpc3N1ZUlucHV0UGFyYW1ldGVyczogIiArIGlzc3VlSW5wdXRQYXJhbWV0ZXJzCiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlCgogICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNvbmZpcm1lZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgIGxvZy53YXJuICJmaWVsZENvbmZpZzogIiArIGZpZWxkQ29uZmlnCiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoKICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTsKICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICBsb2cud2FybiAiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGEiCgogICAgICAgICAgICAgICAgLy9kZWYgdmFsaWRhdGlvblJlc3VsdCA9IGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpCiAgICAgICAgICAgICAgICBpZiAoaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuaXNWYWxpZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgdHJhbnNpdGlvbgogICAgICAgICAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpKQogICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIlRyYW5zYXppb25lIGZhdHRhIDc5ICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn0sICR7bGlua2VkSXNzdWUuc3RhdHVzfSIpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBMaXN0PElzc3VlTGluaz4gYWxsT3V0SXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldE91dHdhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKQogICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsT3V0SXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHsKICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpOwoKICAgICAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgIGxvZy53YXJuICJJc3N1ZSBjb24gcmVsYXRlc091dElzc3VlTGluayIKICAgICAgICAgICAgLypFc2VndWlyZSB0cmFuc2F6aW9uZSBkaSBzdGF0byBkZWxsYSBkZXN0aW5hdGlvbklzc3VlKi8KICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlID0gaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkKICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlU3RhdHVzID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzKCkKICAgICAgICAgICAgZGVmIHRyYW5zaXRpb25JZAogICAgICAgICAgICBsb2cud2FybiAibGlua2VkSXNzdWU6ICIgKyBsaW5rZWRJc3N1ZQogICAgICAgICAgICBsb2cud2FybiAibGlua2VkSXNzdWVTdGF0dXMubmFtZTogIiArIGxpbmtlZElzc3VlU3RhdHVzLm5hbWUKICAgICAgICAgICAgaWYobGlua2VkSXNzdWVTdGF0dXMubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5vcGVuJ10udG9TdHJpbmcoKSl7CiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9QVNTSUdOX1RPX1NVUFBMSUVSCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKHRyYW5zaXRpb25JZD09QVNTSUdOX1RPX1NVUFBMSUVSKXsKICAgICAgICAgICAgICAgIC8vIFByZXBhcmUgb3VyIGlucHV0IGZvciB0aGUgdHJhbnNpdGlvbgogICAgICAgICAgICAgICAgZGVmIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKCkKICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGggewogICAgICAgICAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayh0cnVlKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy9kZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKQogICAgICAgICAgICAgICAgLy9Db21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gIlllcyIgfQogICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksICJZZXMiKSAKCiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlCgogICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNvbmZpcm1lZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgIGxvZy53YXJuICJmaWVsZENvbmZpZzogIiArIGZpZWxkQ29uZmlnCiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoKICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTsKICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICBsb2cud2FybiAiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGEiCgogICAgICAgICAgICAgICAgaWYgKGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb24KICAgICAgICAgICAgICAgICAgICBkZWYgaXNzdWVSZXN1bHQgPSBpc3N1ZVNlcnZpY2UudHJhbnNpdGlvbih1c2VyLCBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKSkKICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIkZhaWxlZCB0byB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSIpCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJUcmFuc2F6aW9uZSBmYXR0YSAxMjIgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSwgJHtsaW5rZWRJc3N1ZS5zdGF0dXN9IikKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJDb3VsZCBub3QgdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmVycm9yQ29sbGVjdGlvbn0iKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgIH0KICAgIH0KfQ==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
    <action id="111" name="Compila Rapporto di Intervento" view="fieldscreen">
      <meta name="opsbar-sequence">10</meta>
      <meta name="jira.description"></meta>
      <meta name="jira.fieldscreen.id">19908</meta>
      <restrict-to>
        <conditions>
          <condition type="class">
            <arg name="FIELD_FUNCTION_ID">c1bea7bb-faff-4fe3-adfb-1dacc9b04219</arg>
            <arg name="FIELD_NOTES">YCFgZGlzYWJsZWQ=</arg>
            <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
            <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJ0cnVlIC8qaXNzdWUuaXNzdWVUeXBlLm5hbWUgPT0gJ01haW50ZW5hbmNlIFRpY2tldCcqLyIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
            <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
            <arg name="FIELD_PREVIEW_ISSUE"></arg>
          </condition>
        </conditions>
      </restrict-to>
      <validators>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">fdff8da8847f0cecf612f8079bbc8937a21ddfe5</arg>
          <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIFJlcXVpcmVkIEZpZWxkcyAtIHNvbG8gZXJyb3JzLCBubyB3YXJuaW5ncw==</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5cblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5kZWYgZXJyb3JzID0gZmFsc2VcbmRlZiB3YXJuaW5ncyA9IGZhbHNlXG5cbmRlZiBwbGFubmVkVGVjaHMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnRlY2huaWNpYW5zJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBhdXRvbWF0aWNhbGx5Q2xvc2VkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q2xvc2VkJ10udG9TdHJpbmcoKSlbMF1cbmRlZiB0cmFuc2l0aW9uQ2hlY2sgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmNoZWNrQW5kQ29uZmlybSddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiBlcnJvck1hbmRhdG9yeUZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIHdhcm5pbmdFbXB0eUZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKVxuIFxuLy9PUEFBX1RFQ0hOSUNJQU5TXG5pZigoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKT09bnVsbCB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLnRvU3RyaW5nKCkuZXF1YWxzKFwiTm9cIikpICYmIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBsYW5uZWRUZWNocyk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBsYW5uZWRUZWNocykgPT0gXCJcIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBsYW5uZWRUZWNocykudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpKXtcbiAgICB3YXJuaW5ncyA9IHRydWVcbiAgICB3YXJuaW5nRW1wdHlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLnRlY2huaWNpYW5zJ10udG9TdHJpbmcoKSlcbn1cblxuZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuXG5pZiAoIWVycm9ycyAmJiAhd2FybmluZ3Mpe1xuICAgIHJldHVybiB0cnVlXG59ZWxzZXtcbiAgICBpZighZXJyb3JzICYmIHdhcm5pbmdzKXtcbiAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpKXtcbiAgICAgICAgICAgIC8vbG9nLmRlYnVnIFwicmV0dXJuIHRydWVcIlxuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBkZWYgd0xpc3QgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgICAgICAgICAgaWYod2FybmluZ0VtcHR5RmllbGRzLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1FbXB0eSA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChcIldcIilcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQoXCJDT05GSVJNX0VNUFRZX0ZJRUxEU1wiKVxuICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChudWxsKVxuICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZCh3YXJuaW5nRW1wdHlGaWVsZHMpXG5cbiAgICAgICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHkpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG91dHB1dC5hZGQod0xpc3QpXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJXXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICAgICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIldcIiwgb3V0cHV0LnRvU3RyaW5nKCkpICAgXG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYoZXJyb3JzICYmICF3YXJuaW5ncyl7XG4gICAgICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICBcbiAgICAgICAgaWYoZXJyb3JNYW5kYXRvcnlGaWVsZHMuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICBkZWYgZUxpc3RNYW5kYXRvcnkgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChcIkVcIilcbiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChcIk1BTkRBVE9SWV9GSUVMRFNcIilcbiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChudWxsKVxuICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKGVycm9yTWFuZGF0b3J5RmllbGRzKVxuICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0TWFuZGF0b3J5KVxuICAgICAgICB9XG4gICAgICAgIFxuXHRcdG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJFXCIsIG91dHB1dC50b1N0cmluZygpKSAgIFxuICAgIH1cbiAgICBpZihlcnJvcnMgJiYgd2FybmluZ3Mpe1xuICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZGVmIHdMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIFxuICAgICAgICBpZihlcnJvck1hbmRhdG9yeUZpZWxkcy5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgIGRlZiBlTGlzdE1hbmRhdG9yeSA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKFwiRVwiKVxuICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKFwiTUFOREFUT1JZX0ZJRUxEU1wiKVxuICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKG51bGwpXG4gICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoZXJyb3JNYW5kYXRvcnlGaWVsZHMpXG4gICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RNYW5kYXRvcnkpXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmKHdhcm5pbmdFbXB0eUZpZWxkcy5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1FbXB0eSA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKFwiV1wiKVxuICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKFwiQ09ORklSTV9FTVBUWV9GSUVMRFNcIilcbiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChudWxsKVxuICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKHdhcm5pbmdFbXB0eUZpZWxkcylcblxuICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5KVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJXRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIldFXCIsIG91dHB1dC50b1N0cmluZygpKSAgXG4gICAgfVxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
          <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZQppbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb24KaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3IKaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CmRlZiBDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQogCklzc3VlIGlzc3VlID0gaXNzdWUKCmRlZiBlcnJvcnMgPSBmYWxzZQpkZWYgd2FybmluZ3MgPSBmYWxzZQoKZGVmIHBsYW5uZWRUZWNocyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YudGVjaG5pY2lhbnMnXS50b1N0cmluZygpKVswXQpkZWYgYXV0b21hdGljYWxseUNsb3NlZCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUNsb3NlZCddLnRvU3RyaW5nKCkpWzBdCmRlZiB0cmFuc2l0aW9uQ2hlY2sgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmNoZWNrQW5kQ29uZmlybSddLnRvU3RyaW5nKCkpWzBdCgpkZWYgZXJyb3JNYW5kYXRvcnlGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIHdhcm5pbmdFbXB0eUZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKQogCi8vT1BBQV9URUNITklDSUFOUwppZigoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKT09bnVsbCB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLnRvU3RyaW5nKCkuZXF1YWxzKCJObyIpKSAmJiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbGFubmVkVGVjaHMpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbGFubmVkVGVjaHMpID09ICIiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocGxhbm5lZFRlY2hzKS50b1N0cmluZygpLmVxdWFscygiIikpKXsKICAgIHdhcm5pbmdzID0gdHJ1ZQogICAgd2FybmluZ0VtcHR5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi50ZWNobmljaWFucyddLnRvU3RyaW5nKCkpCn0KCmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KCkKCmlmICghZXJyb3JzICYmICF3YXJuaW5ncyl7CiAgICByZXR1cm4gdHJ1ZQp9ZWxzZXsKICAgIGlmKCFlcnJvcnMgJiYgd2FybmluZ3MpewogICAgICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKS50b1N0cmluZygpLmVxdWFscygiWWVzIikpewogICAgICAgICAgICAvL2xvZy5kZWJ1ZyAicmV0dXJuIHRydWUiCiAgICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKQoKICAgICAgICAgICAgaWYod2FybmluZ0VtcHR5RmllbGRzLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgZGVmIHdMaXN0Q29uZmlybUVtcHR5ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQoIlciKQogICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKCJDT05GSVJNX0VNUFRZX0ZJRUxEUyIpCiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQobnVsbCkKICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZCh3YXJuaW5nRW1wdHlGaWVsZHMpCgogICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5KQogICAgICAgICAgICB9CgogICAgICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KQogICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IlciOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQogICAgICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oIlciLCBvdXRwdXQudG9TdHJpbmcoKSkgICAKICAgICAgICB9CiAgICB9CiAgICBpZihlcnJvcnMgJiYgIXdhcm5pbmdzKXsKICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KCkKICAgICAgICAKICAgICAgICBpZihlcnJvck1hbmRhdG9yeUZpZWxkcy5zaXplKCkgPiAwKXsKICAgICAgICAgICAgZGVmIGVMaXN0TWFuZGF0b3J5ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZCgiRSIpCiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZCgiTUFOREFUT1JZX0ZJRUxEUyIpCiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChudWxsKQogICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoZXJyb3JNYW5kYXRvcnlGaWVsZHMpCiAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdE1hbmRhdG9yeSkKICAgICAgICB9CiAgICAgICAgCgkJb3V0cHV0LmFkZChlTGlzdCkKICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IkUiOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQogICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiRSIsIG91dHB1dC50b1N0cmluZygpKSAgIAogICAgfQogICAgaWYoZXJyb3JzICYmIHdhcm5pbmdzKXsKICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KCkKICAgICAgICBkZWYgd0xpc3QgPSBuZXcgQXJyYXlMaXN0KCkKICAgICAgICAKICAgICAgICBpZihlcnJvck1hbmRhdG9yeUZpZWxkcy5zaXplKCkgPiAwKXsKICAgICAgICAgICAgZGVmIGVMaXN0TWFuZGF0b3J5ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZCgiRSIpCiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZCgiTUFOREFUT1JZX0ZJRUxEUyIpCiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChudWxsKQogICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoZXJyb3JNYW5kYXRvcnlGaWVsZHMpCiAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdE1hbmRhdG9yeSkKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaWYod2FybmluZ0VtcHR5RmllbGRzLnNpemUoKSA+IDApewogICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHkgPSBuZXcgQXJyYXlMaXN0KCkKICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKCJXIikKICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKCJDT05GSVJNX0VNUFRZX0ZJRUxEUyIpCiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChudWxsKQogICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQod2FybmluZ0VtcHR5RmllbGRzKQoKICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5KQogICAgICAgIH0KICAgICAgICAKICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KQogICAgICAgIG91dHB1dC5hZGQod0xpc3QpCiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigneyJXRSI6IicgKyBvdXRwdXQudG9TdHJpbmcoKSArICcifScpCiAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJXRSIsIG91dHB1dC50b1N0cmluZygpKSAgCiAgICB9Cn0=</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
          <arg name="FIELD_SCRIPT_FILE"></arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">2580b6a9-1e28-4b71-b42f-6b72d015b920</arg>
          <arg name="FIELD_NOTES">YCFgQ3JlYXRlIFNOICYgU08gZm9yIG9sZCB0aWNrZXRz</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuXG5kZWYgU04gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfU0FQX1NFUlZJQ0VfTk9USUZJQ0FUSU9OXCIpWzBdXG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcblxuVVJMIHVybFxuSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvblxuXG5pZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKFNOKSA9PSBudWxsICYmIGlzc3VlLmlzc3VlVHlwZS5uYW1lICE9IFwiUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXRcIil7XG4gICAgcmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuXG4gICAgZGVmIGJvZHlfcmVxID0gW11cbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXG4gICAgICAgIFwic3RhdHVzXCI6IFwiT1BFXCJcbiAgICBdIFxuXG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL3NlcnZpY2Uvbm90aWZpY2F0aW9uXCJcblxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxuICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNOOiBcIiArIGJvZHlfcmVxXG4gICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxuICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgIFxuICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG4gICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcblxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TTi1VUERBVEVcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICB9ZWxzZXtcbiAgICAgICAgLyoqIFNFUlZJQ0UgT1JERVIgQ1JFQVRJT04gKiovXG4gICAgICAgIGJvZHlfcmVxID0gW1xuICAgICAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXlcbiAgICAgICAgXSBcbiAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL29yL3VwZGF0ZS9zZXJ2aWNlL29yZGVyXCJcblxuICAgICAgICBsb2cuZGVidWcgXCJiYXNlVVJMIFNPOiBcIiArIGJhc2VVUkxcbiAgICAgICAgbG9nLmRlYnVnIFwiYm9keV9yZXEgU086IFwiICsgYm9keV9yZXFcbiAgICAgICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgICAgICBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG4gICAgICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgICAgICBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAxXCIpICYmICFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxuICAgIFx0XHRsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICAgICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICBcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtU0FQLVNPLUNSRUFURVwiKVxuICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgIH1cbiAgICB9XG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">dea2fa04-ea02-41ce-b5d3-f9f9e0a38379</arg>
          <arg name="FIELD_NOTES">YCFgU0FQOiB1cGRhdGUgU04gc3RhdHVzICYgY3JlYXRlIFNP</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcblxuZGVmIHNhcFNOID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1NBUF9TRVJWSUNFX05PVElGSUNBVElPTlwiKVswXVxuZGVmIHNhcFNPID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1NBUF9TRVJWSUNFX09SREVSXCIpWzBdXG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcblxuVVJMIHVybFxuSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvblxuXG5pZihpc3N1ZS5pc3N1ZVR5cGUubmFtZSAhPSBcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0XCIgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzYXBTTikgIT0gbnVsbCl7XG4gICAgcmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuXG4gICAgZGVmIGJvZHlfcmVxID0gW11cbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXG4gICAgICAgIFwic3RhdHVzXCI6IFwiSU5QXCJcbiAgICBdIFxuXG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL3NlcnZpY2Uvbm90aWZpY2F0aW9uXCJcblxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxuICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNOOiBcIiArIGJvZHlfcmVxXG4gICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxuICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgIFxuICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG4gICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcblxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TTi1VUERBVEVcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICB9ZWxzZXtcbiAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzYXBTTykgPT0gbnVsbCl7XG4gICAgICAgICAgICAvKiogU0VSVklDRSBPUkRFUiBDUkVBVElPTiAqKi9cbiAgICAgICAgICAgIGJvZHlfcmVxID0gW1xuICAgICAgICAgICAgICAgIFwiaXNzdWVLZXlcIjogaXNzdWUua2V5XG4gICAgICAgICAgICBdIFxuICAgICAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL29yL3VwZGF0ZS9zZXJ2aWNlL29yZGVyXCJcblxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiYmFzZVVSTCBTTzogXCIgKyBiYXNlVVJMXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJib2R5X3JlcSBTTzogXCIgKyBib2R5X3JlcVxuICAgICAgICAgICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgICAgICAgICAgY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgICAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgICAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICAgICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgICAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG5cbiAgICAgICAgICAgIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgICAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAxXCIpICYmICFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgICAgICAgICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcbiAgICAgICAgICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJlcnJvcnM6IFwiICsgIGpzb25fb2JqZWN0LmVycm9ycy50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TTy1DUkVBVEVcIilcbiAgICAgICAgICAgICAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGpzb25fb2JqZWN0LmVycm9yc1swXSlcbiAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4gIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
      </validators>
      <results>
        <unconditional-result old-status="null" status="null" step="5">
          <post-functions>
            <function type="class">
              <arg name="field.copyFieldSource1"></arg>
              <arg name="textValue">-1</arg>
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="maxAllowed-integerValue"></arg>
              <arg name="workflowName-textValue">OPAA: PM Task Workflow</arg>
              <arg name="performTransitionAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="scopeType">PARENT</arg>
              <arg name="destination-scopeTarget">SUB_TASK</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitieslinkedtransition-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="integerValue">31</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">ch.beecom.jira.jsu.workflow.function.linkedtransition.LinkedTransitionFunction</arg>
              <arg name="scopeSource-jql"></arg>
              <arg name="status"></arg>
            </function>
            <function type="class">
              <arg name="conditionList">6</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="comparisonType">1</arg>
              <arg name="precondition">true</arg>
              <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
              <arg name="preconditionNegateResult-booleanValue"></arg>
              <arg name="fieldValue">Planned Maintenance Ticket</arg>
              <arg name="preconditionMode-textValue">DISCARD</arg>
              <arg name="fieldsList">issuetype</arg>
            </function>
            <function type="class">
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="append.value"></arg>
              <arg name="maxAllowed-integerValue">50</arg>
              <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="field.value">%%CURRENT_DATETIME%%</arg>
              <arg name="field.name">customfield_22628</arg>
              <arg name="scopeType">SAME</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
              <arg name="scopeSource-jql"></arg>
            </function>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">57df5339-7590-48bb-8b3c-756aca191f01</arg>
              <arg name="FIELD_NOTES">YCFgUE0gVGFzazogY2xlYXIgc3ViLXRhc2tzIGNhY2hl</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG5pc3N1ZS5nZXRTdWJUYXNrT2JqZWN0cygpLmVhY2h7XG4gICAgaSAtPiBcbiAgICAvKiBSRVNUIEFQSSBwZXIgcHVsaXppYSBjYWNoZSBpc3N1ZSBsaW5rYXRhICovXG4gICAgcmVxdWVzdE1ldGhvZCA9IFwiR0VUXCI7XG4gICAgLypTY3JpcHQgVmFyaWFibGVzKi9cbiAgICAvL1BlciB0ZXN0IGRhIGNvbnNvbGVcbiAgICAvL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTMyNTM1XCIpXG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vY2xlYXJDYWNoZS90aWNrZXRrZXkvXCIgKyBpLmtleVxuICAgIFVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgfVxufVxuIiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="field.type">8</arg>
              <arg name="full.module.key">com.riadalabs.jira.plugins.insightinsight-post-function</arg>
              <arg name="field.groovyScript">import com.atlassian.jira.component.ComponentAccessor
import com.atlassian.jira.issue.Issue
import com.atlassian.jira.issue.MutableIssue;
import com.atlassian.jira.event.type.EventDispatchOption;
import org.apache.log4j.Level

Properties relativePath = new Properties()
File relativePathFile = new File('/var/atlassian/application-data/jira/insightPathToScript.properties')
relativePathFile.withInputStream {
	relativePath.load(it)
}

Properties properties = new Properties()
File propertiesFile = new File('/var/atlassian/application-data/shared/scripts/opproject.properties')
propertiesFile.withInputStream {
                properties.load(it)
}

/* Get Insight Object Facade from plugin accessor */
Class objectFacadeClass = ComponentAccessor.getPluginAccessor().getClassLoader().findClass(&quot;com.riadalabs.jira.plugins.insight.channel.external.api.facade.ObjectFacade&quot;); 
def objectFacade = ComponentAccessor.getOSGiComponentInstanceOfType(objectFacadeClass);
  
/* Get Insight Object Type Facade from plugin accessor */
Class objectTypeFacadeClass = ComponentAccessor.getPluginAccessor().getClassLoader().findClass(&quot;com.riadalabs.jira.plugins.insight.channel.external.api.facade.ObjectTypeFacade&quot;); 
def objectTypeFacade = ComponentAccessor.getOSGiComponentInstanceOfType(objectTypeFacadeClass);
  
/* Get Insight Object Attribute Facade from plugin accessor */
Class objectTypeAttributeFacadeClass = ComponentAccessor.getPluginAccessor().getClassLoader().findClass(&quot;com.riadalabs.jira.plugins.insight.channel.external.api.facade.ObjectTypeAttributeFacade&quot;); 
def objectTypeAttributeFacade = ComponentAccessor.getOSGiComponentInstanceOfType(objectTypeAttributeFacadeClass);
  
Class objectAttributeBeanFactoryClass = ComponentAccessor.getPluginAccessor().getClassLoader().findClass(&quot;com.riadalabs.jira.plugins.insight.services.model.factory.ObjectAttributeBeanFactory&quot;); 
def objectAttributeBeanFactory = ComponentAccessor.getOSGiComponentInstanceOfType(objectAttributeBeanFactoryClass);

Issue issue = issue

def plannedTechsField = issue.getCustomFieldValue(ComponentAccessor.getCustomFieldManager().getCustomFieldObjectByName(properties['cf.technicians'].toString()))
def onSiteTechsField = ComponentAccessor.getCustomFieldManager().getCustomFieldObjectsByName(properties['cf.techniciansOnsite'].toString())[0];
def OnSiteTechObjects = new ArrayList();

def automaticallyClosedField = issue.getCustomFieldValue(ComponentAccessor.getCustomFieldManager().getCustomFieldObjectsByName(properties['cf.automaticallyClosed'].toString()))

def ONSITE_TECH_REPORT_OBJ_TYPE=properties['iobj.onSiteTechReport'].toString().toInteger()
def ONSITE_TECH_REPORT_ATTR_NAME=properties['iobj.onSiteTechReport.name.id'].toString().toInteger()
def ONSITE_TECH_REPORT_ATTR_TECHNICIAN_REF=properties['iobj.onSiteTechReport.technicianRef.id'].toString().toInteger()
def ONSITE_TECH_REPORT_ATTR_SUPPLIER_REF=properties['iobj.onSiteTechReport.supplierRef.id'] ? properties['iobj.onSiteTechReport.supplierRef.id'].toString().toInteger() : 3073

if(automaticallyClosedField==null || automaticallyClosedField.toString().equals(&quot;No&quot;)){
    if(plannedTechsField){
        
        for(technician in plannedTechsField){
            
            //extract insight key ang get object
            def tech=technician.toString()
            def techKey = tech.substring(tech.indexOf('(')+1,tech.indexOf(')'))
            def techName = tech.substring(0,tech.indexOf('(')-1)
            def techObject = objectFacade.loadObjectBean(techKey)
            log.info &quot;techKey: &quot; + techKey
            log.info (&quot;techName: &quot; + techName)
            log.info (&quot;techObject: &quot; + techObject)
            
            def objectTypeOnSiteTechReport = objectTypeFacade.loadObjectTypeBean(ONSITE_TECH_REPORT_OBJ_TYPE);
            def newObjectBean = objectTypeOnSiteTechReport.createMutableObjectBean();
            
            def objectAttributeBeans = new ArrayList();
            def nameObjectTypeAttributeBean = objectTypeAttributeFacade.loadObjectTypeAttributeBean(ONSITE_TECH_REPORT_ATTR_NAME); 
            
            objectAttributeBeans.add(objectAttributeBeanFactory.createObjectAttributeBeanForObject(newObjectBean, nameObjectTypeAttributeBean, techName));
                    
            newObjectBean.setObjectAttributeBeans(objectAttributeBeans);
            /* Store the object into Insight. The new ObjectBean will be updated with an unique ID */
            try {
                newObjectBean = objectFacade.storeObjectBean(newObjectBean);
                log.warn(&quot;newObjectBean: &quot; + newObjectBean);
            } catch (Exception vie) {
                log.warn(&quot;Could not create issue due to validation exception:&quot; + vie.getMessage());
            }
    
            /* Update TECHNICIAN_REF on the newObject */		        
            def objectTypeAttributeBean = objectTypeAttributeFacade.loadObjectTypeAttributeBean(ONSITE_TECH_REPORT_ATTR_TECHNICIAN_REF).createMutable() //The id of the attribute

            /* Create the new attribute bean based on the value */
            def newObjectAttributeBean = objectAttributeBeanFactory.createObjectAttributeBeanForObject(newObjectBean, objectTypeAttributeBean, techKey);
            /* Load the attribute bean */
            def objectAttributeBean = objectFacade.loadObjectAttributeBean(newObjectBean.getId(), techKey);
            if (objectAttributeBean != null) {
               /* If attribute exist reuse the old id for the new attribute */
               newObjectAttributeBean.setId(objectAttributeBean.getId());
            }
            /* Store the object attribute into Insight. */
            try {
                objectTypeAttributeBean = objectFacade.storeObjectAttributeBean(newObjectAttributeBean);
            } catch (Exception vie) {
                log.warn(&quot;Could not update object attribute due to validation exception:&quot; + vie.getMessage());
            }  
            
            /* Update SUPPLIER_REF on the newObject */	
            /* Get SUPPLIER_REF from Tech */
            def obTriage = objectFacade.loadObjectAttributeBean(techObject.getId(), (properties['iobj.techOnsite.supplierRef'] ? properties['iobj.techOnsite.supplierRef'].toString() : &quot;SUPPLIER_REF&quot;)).createMutable()
            def suppRef = obTriage.getObjectAttributeValueBeans().toString()
            def supp = suppRef.toString()
            log.info &quot;supp: &quot; + supp
            suppRefId = supp.substring(supp.indexOf('(')+1,supp.indexOf(')'))
            log.info &quot;suppRefId: &quot; + suppRefId
            suppRefKey = properties['ischema.aa'].toString() + &quot;-&quot; + suppRefId
            log.info &quot;suppRefKey: &quot; + suppRefKey
            suppRefObj = objectFacade.loadObjectBean(properties['ischema.aa'].toString() + &quot;-&quot; + suppRefId)
			log.info &quot;suppRefObj: &quot; + suppRefObj
            
            def suppObjectTypeAttributeBean = objectTypeAttributeFacade.loadObjectTypeAttributeBean(ONSITE_TECH_REPORT_ATTR_SUPPLIER_REF).createMutable() //The id of the attribute
            
            /* Create the new attribute bean based on the value */
            newObjectAttributeBean = objectAttributeBeanFactory.createObjectAttributeBeanForObject(newObjectBean, suppObjectTypeAttributeBean, suppRefKey);
            /* Load the attribute bean */
            objectAttributeBean = objectFacade.loadObjectAttributeBean(newObjectBean.getId(), suppRefKey);
            if (objectAttributeBean != null) {
               /* If attribute exist reuse the old id for the new attribute */
               newObjectAttributeBean.setId(objectAttributeBean.getId());
            }
            /* Store the object attribute into Insight. */
            try {
                objectTypeAttributeBean = objectFacade.storeObjectAttributeBean(newObjectAttributeBean);
            } catch (Exception vie) {
                log.warn(&quot;Could not update object attribute due to validation exception:&quot; + vie.getMessage());
            }  
            
            OnSiteTechObjects.add(newObjectBean)
         }
    }
    log.info (&quot;OnSiteTechObjects: &quot; + OnSiteTechObjects)
    def currentUser = ComponentAccessor.getJiraAuthenticationContext().getLoggedInUser()
    
    if (!OnSiteTechObjects.isEmpty()) {
        MutableIssue mi = (MutableIssue) issue;
        mi.setCustomFieldValue(onSiteTechsField, OnSiteTechObjects);
        ComponentAccessor.getIssueManager().updateIssue(currentUser, mi, EventDispatchOption.DO_NOT_DISPATCH, false);
    }   
}            </arg>
              <arg name="field.filepath"></arg>
              <arg name="class.name">com.riadalabs.jira.plugins.insight.services.jira.postfunction.InsightPostFunction</arg>
              <arg name="field.description">OP: Create OnSite_Tech_Report objects to be associated to the issue's customfield OP_TECHNICIANS_ONSITE</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
            <function type="class">
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="maxAllowed-integerValue">50</arg>
              <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="field">customfield_22693</arg>
              <arg name="scopeType">SAME</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
              <arg name="scopeSource-jql"></arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
    <action id="81" name="Rifiuta Intervento" view="fieldscreen">
      <meta name="opsbar-sequence">20</meta>
      <meta name="jira.description"></meta>
      <meta name="jira.fieldscreen.id">19906</meta>
      <restrict-to>
        <conditions>
          <condition type="class">
            <arg name="FIELD_FUNCTION_ID">abf73c31-806e-4e97-9a9d-895cf27e5345</arg>
            <arg name="FIELD_NOTES">YCFgTm90IGF2YWlsYWJsZSBmb3IgUE0gVGlja2V0cw==</arg>
            <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
            <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5pc3N1ZVR5cGUubmFtZSAhPSAnUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXQnIiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
            <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
          </condition>
        </conditions>
      </restrict-to>
      <results>
        <unconditional-result old-status="null" status="null" step="1">
          <post-functions>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">82bbfbab-2201-4d21-a192-434ad461af50</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IE5ldyBJbnN0YWxsYXRpb24gLSBDaGVjayBsaW5rZWRUaWNrZXRzICYgRmFzdC1UcmFuc2FjdCB0aGVt</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5sb2cud2FybiBcIiR7aXNzdWUua2V5fSBUcmFuc2F6aW9uZSBSRUpFQ1QgRlJPTSBTVVBQTElFUiAtIFBvc3QgRnVuY3Rpb24gY2hlY2sgbGlua2VkSXNzdWVzXCJcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuZGVmIGF1dG9tYXRpY2FsbHlDb25maXJtZWQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlSZWplY3RlZCddID8gcHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseVJlamVjdGVkJ10udG9TdHJpbmcoKSA6IFwiT1BfQVVUT01BVElDQUxMWV9SRUpFQ1RFRFwiKVswXVxuSXNzdWVJbmRleGluZ1NlcnZpY2UgXHRpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSlcblxuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL2lzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0yNzZcIilcblxuLypERVYqL1xuUkVKRUNUID0gcHJvcGVydGllc1snd2YudHIucmVqZWN0J10gPyBwcm9wZXJ0aWVzWyd3Zi50ci5yZWplY3QnXSA6IDgxXG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcblxuLypQUk9EKi9cbi8vQ09ORklSTV9UT19DVVNUT01FUlxuXG5kZWYgdXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuZGVmIGlzc3VlU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlU2VydmljZSgpXG5cbi8qU2UgZXNlZ3VvIGxhIGNvbmZpcm0gdG8gY3VzdG9tZXIgc3UgdW4gdGlja2V0IGNvbiAxIG8gKyB0aWNrZXQgY29sbGVnYXRpLCB2ZXJpZmljbyBlIHNwb3N0byBpbiBhdXRvbWF0aWNvIGdsaSBldmVudHVhbGkgdGlja2V0IGNvbGxlZ2F0aSovXG5sb2cud2FybiBcInZlcmlmaWNvIGUgc3Bvc3RvIGluIGF1dG9tYXRpY28gZ2xpIGV2ZW50dWFsaSB0aWNrZXQgY29sbGVnYXRpXCJcblxuaWYoaXNzdWUuZ2V0SXNzdWVUeXBlKCkuZ2V0TmFtZSgpID09IHByb3BlcnRpZXNbJ2l0Lm5ld0luc3RhbGxhdGlvbiddLnRvU3RyaW5nKCkgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKT09bnVsbCB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLnRvU3RyaW5nKCkuZXF1YWxzKFwiTm9cIikpe1xuICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKVxuICAgIGZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbEluSXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHtcbiAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcblxuICAgICAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICBsb2cud2FybiBcIklzc3VlIGNvbiByZWxhdGVzSW5Jc3N1ZUxpbmtcIlxuICAgICAgICAgICAgLypFc2VndWlyZSB0cmFuc2F6aW9uZSBkaSBzdGF0byBkZWxsYSBzb3VyY2VJc3N1ZSovXG4gICAgICAgICAgICBkZWYgbGlua2VkSXNzdWUgPSBpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KClcbiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZVN0YXR1cyA9IGxpbmtlZElzc3VlLmdldFN0YXR1cygpXG4gICAgICAgICAgICBkZWYgdHJhbnNpdGlvbklkXG4gICAgICAgICAgICBpZihsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lID09IChwcm9wZXJ0aWVzWyd3Zi5hc3NpZ25lZFRvU3VwcGxpZXInXSA/IHByb3BlcnRpZXNbJ3dmLmFzc2lnbmVkVG9TdXBwbGllciddLnRvU3RyaW5nKCkgOiBcIkFzc2lnbmVkIFRvIFN1cHBsaWVyXCIpICl7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbklkPVJFSkVDVFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYodHJhbnNpdGlvbklkPT1SRUpFQ1Qpe1xuICAgICAgICAgICAgICAgIC8vIFByZXBhcmUgb3VyIGlucHV0IGZvciB0aGUgdHJhbnNpdGlvblxuICAgICAgICAgICAgICAgIGRlZiBpc3N1ZUlucHV0UGFyYW1ldGVycyA9IGlzc3VlU2VydmljZS5uZXdJc3N1ZUlucHV0UGFyYW1ldGVycygpXG4gICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7XG4gICAgICAgICAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayh0cnVlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL2RlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpXG4gICAgICAgICAgICAgICAgLy9Db21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gXCJZZXNcIiB9XG4gICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksIFwiWWVzXCIpIFxuICAgICAgICAgICAgICAgIC8vbG9nLndhcm4gXCJpc3N1ZUlucHV0UGFyYW1ldGVyczogXCIgKyBpc3N1ZUlucHV0UGFyYW1ldGVyc1xuICAgICAgICAgICAgICAgIGRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlXG5cbiAgICAgICAgICAgICAgICBkZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLmdldFJlbGV2YW50Q29uZmlnKGxpbmtlZElzc3VlKVxuICAgICAgICAgICAgICAgIGxvZy53YXJuIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcbiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuXG4gICAgICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpXG4gICAgICAgICAgICAgICAgbG9nLndhcm4gXCJVcGRhdGVkIGN1c3RvbWZpZWxkIC0gaXNzdWUgbGlua2F0YVwiXG5cbiAgICAgICAgICAgICAgICAvL2RlZiB2YWxpZGF0aW9uUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycylcbiAgICAgICAgICAgICAgICBpZiAoaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgZGVmIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpXG4gICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJGYWlsZWQgdG8gdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn1cIilcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlRyYW5zYXppb25lIGZhdHRhIDc5ICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn0sICR7bGlua2VkSXNzdWUuc3RhdHVzfVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLyogUkVTVCBBUEkgcGVyIHB1bGl6aWEgY2FjaGUgaXNzdWUgbGlua2F0YSAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdE1ldGhvZCA9IFwiR0VUXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKlNjcmlwdCBWYXJpYWJsZXMqL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTMyNTM1XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvYXV0b21hdGlvbi9jbGVhckNhY2hlL3RpY2tldGtleS9cIiArIGxpbmtlZElzc3VlLmtleVxuICAgICAgICAgICAgICAgICAgICAgICAgVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICAgICAgICAgICAgICAgICAgICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259XCIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgTGlzdDxJc3N1ZUxpbms+IGFsbE91dElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgIGxvZy53YXJuIFwiSXNzdWUgY29uIHJlbGF0ZXNPdXRJc3N1ZUxpbmtcIlxuICAgICAgICAgICAgLypFc2VndWlyZSB0cmFuc2F6aW9uZSBkaSBzdGF0byBkZWxsYSBkZXN0aW5hdGlvbklzc3VlKi9cbiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZSA9IGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpXG4gICAgICAgICAgICBkZWYgbGlua2VkSXNzdWVTdGF0dXMgPSBsaW5rZWRJc3N1ZS5nZXRTdGF0dXMoKVxuICAgICAgICAgICAgZGVmIHRyYW5zaXRpb25JZFxuICAgICAgICAgICAgbG9nLndhcm4gXCJsaW5rZWRJc3N1ZTogXCIgKyBsaW5rZWRJc3N1ZVxuICAgICAgICAgICAgbG9nLndhcm4gXCJsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lOiBcIiArIGxpbmtlZElzc3VlU3RhdHVzLm5hbWVcbiAgICAgICAgICAgIGlmKGxpbmtlZElzc3VlU3RhdHVzLm5hbWUgPT0gKHByb3BlcnRpZXNbJ3dmLmFzc2lnbmVkVG9TdXBwbGllciddID8gcHJvcGVydGllc1snd2YuYXNzaWduZWRUb1N1cHBsaWVyJ10udG9TdHJpbmcoKSA6IFwiQXNzaWduZWQgVG8gU3VwcGxpZXJcIikpe1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb25JZD1SRUpFQ1RcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYodHJhbnNpdGlvbklkPT1SRUpFQ1Qpe1xuICAgICAgICAgICAgICAgIC8vIFByZXBhcmUgb3VyIGlucHV0IGZvciB0aGUgdHJhbnNpdGlvblxuICAgICAgICAgICAgICAgIGRlZiBpc3N1ZUlucHV0UGFyYW1ldGVycyA9IGlzc3VlU2VydmljZS5uZXdJc3N1ZUlucHV0UGFyYW1ldGVycygpXG4gICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7XG4gICAgICAgICAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayh0cnVlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL2RlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpXG4gICAgICAgICAgICAgICAgLy9Db21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gXCJZZXNcIiB9XG4gICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksIFwiWWVzXCIpIFxuXG4gICAgICAgICAgICAgICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXG4gICAgICAgICAgICAgICAgZGVmIG1pID0gKE11dGFibGVJc3N1ZSkgbGlua2VkSXNzdWVcblxuICAgICAgICAgICAgICAgIGRlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDb25maXJtZWQuZ2V0UmVsZXZhbnRDb25maWcobGlua2VkSXNzdWUpXG4gICAgICAgICAgICAgICAgbG9nLndhcm4gXCJmaWVsZENvbmZpZzogXCIgKyBmaWVsZENvbmZpZ1xuICAgICAgICAgICAgICAgIGRlZiBjZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09IFwiWWVzXCIgfVxuICAgICAgICAgICAgICAgIGF1dG9tYXRpY2FsbHlDb25maXJtZWQudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG5cbiAgICAgICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChsaW5rZWRJc3N1ZSlcbiAgICAgICAgICAgICAgICBsb2cud2FybiBcIlVwZGF0ZWQgY3VzdG9tZmllbGQgLSBpc3N1ZSBsaW5rYXRhXCJcblxuICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgdHJhbnNpdGlvblxuICAgICAgICAgICAgICAgICAgICBkZWYgaXNzdWVSZXN1bHQgPSBpc3N1ZVNlcnZpY2UudHJhbnNpdGlvbih1c2VyLCBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEgaXNzdWVSZXN1bHQuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIkZhaWxlZCB0byB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiVHJhbnNhemlvbmUgZmF0dGEgMTIyICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn0sICR7bGlua2VkSXNzdWUuc3RhdHVzfVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLyogUkVTVCBBUEkgcGVyIHB1bGl6aWEgY2FjaGUgaXNzdWUgbGlua2F0YSAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdE1ldGhvZCA9IFwiR0VUXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKlNjcmlwdCBWYXJpYWJsZXMqL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTMyNTM1XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvYXV0b21hdGlvbi9jbGVhckNhY2hlL3RpY2tldGtleS9cIiArIGxpbmtlZElzc3VlLmtleVxuICAgICAgICAgICAgICAgICAgICAgICAgVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICAgICAgICAgICAgICAgICAgICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259XCIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICB9XG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlCmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZQppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQpDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5XQVJOKQoKbG9nLndhcm4gIiR7aXNzdWUua2V5fSBUcmFuc2F6aW9uZSBSRUpFQ1QgRlJPTSBTVVBQTElFUiAtIFBvc3QgRnVuY3Rpb24gY2hlY2sgbGlua2VkSXNzdWVzIgoKSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpOwpDdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7CmRlZiBhdXRvbWF0aWNhbGx5Q29uZmlybWVkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5UmVqZWN0ZWQnXSA/IHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlSZWplY3RlZCddLnRvU3RyaW5nKCkgOiAiT1BfQVVUT01BVElDQUxMWV9SRUpFQ1RFRCIpWzBdCklzc3VlSW5kZXhpbmdTZXJ2aWNlIAlpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSkKCklzc3VlIGlzc3VlID0gaXNzdWUKLy9QZXIgdGVzdCBkYSBjb25zb2xlCi8vaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoIk9QVVQtMjc2IikKCi8qREVWKi8KUkVKRUNUID0gcHJvcGVydGllc1snd2YudHIucmVqZWN0J10gPyBwcm9wZXJ0aWVzWyd3Zi50ci5yZWplY3QnXSA6IDgxCgovKlBST0QqLwovL0NPTkZJUk1fVE9fQ1VTVE9NRVIKCmRlZiB1c2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpCmRlZiBpc3N1ZVNlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZVNlcnZpY2UoKQoKLypTZSBlc2VndW8gbGEgY29uZmlybSB0byBjdXN0b21lciBzdSB1biB0aWNrZXQgY29uIDEgbyArIHRpY2tldCBjb2xsZWdhdGksIHZlcmlmaWNvIGUgc3Bvc3RvIGluIGF1dG9tYXRpY28gZ2xpIGV2ZW50dWFsaSB0aWNrZXQgY29sbGVnYXRpKi8KbG9nLndhcm4gInZlcmlmaWNvIGUgc3Bvc3RvIGluIGF1dG9tYXRpY28gZ2xpIGV2ZW50dWFsaSB0aWNrZXQgY29sbGVnYXRpIgoKaWYoaXNzdWUuZ2V0SXNzdWVUeXBlKCkuZ2V0TmFtZSgpID09IHByb3BlcnRpZXNbJ2l0Lm5ld0luc3RhbGxhdGlvbiddLnRvU3RyaW5nKCkgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKT09bnVsbCB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLnRvU3RyaW5nKCkuZXF1YWxzKCJObyIpKXsKICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKQogICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykgewogICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7CgogICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgbG9nLndhcm4gIklzc3VlIGNvbiByZWxhdGVzSW5Jc3N1ZUxpbmsiCiAgICAgICAgICAgIC8qRXNlZ3VpcmUgdHJhbnNhemlvbmUgZGkgc3RhdG8gZGVsbGEgc291cmNlSXNzdWUqLwogICAgICAgICAgICBkZWYgbGlua2VkSXNzdWUgPSBpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkKICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlU3RhdHVzID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzKCkKICAgICAgICAgICAgZGVmIHRyYW5zaXRpb25JZAogICAgICAgICAgICBpZihsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lID09IChwcm9wZXJ0aWVzWyd3Zi5hc3NpZ25lZFRvU3VwcGxpZXInXSA/IHByb3BlcnRpZXNbJ3dmLmFzc2lnbmVkVG9TdXBwbGllciddLnRvU3RyaW5nKCkgOiAiQXNzaWduZWQgVG8gU3VwcGxpZXIiKSApewogICAgICAgICAgICAgICAgdHJhbnNpdGlvbklkPVJFSkVDVAogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKHRyYW5zaXRpb25JZD09UkVKRUNUKXsKICAgICAgICAgICAgICAgIC8vIFByZXBhcmUgb3VyIGlucHV0IGZvciB0aGUgdHJhbnNpdGlvbgogICAgICAgICAgICAgICAgZGVmIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKCkKICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGggewogICAgICAgICAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayh0cnVlKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy9kZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKQogICAgICAgICAgICAgICAgLy9Db21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gIlllcyIgfQogICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksICJZZXMiKSAKICAgICAgICAgICAgICAgIC8vbG9nLndhcm4gImlzc3VlSW5wdXRQYXJhbWV0ZXJzOiAiICsgaXNzdWVJbnB1dFBhcmFtZXRlcnMKICAgICAgICAgICAgICAgIGRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKQogICAgICAgICAgICAgICAgZGVmIG1pID0gKE11dGFibGVJc3N1ZSkgbGlua2VkSXNzdWUKCiAgICAgICAgICAgICAgICBkZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLmdldFJlbGV2YW50Q29uZmlnKGxpbmtlZElzc3VlKQogICAgICAgICAgICAgICAgbG9nLndhcm4gImZpZWxkQ29uZmlnOiAiICsgZmllbGRDb25maWcKICAgICAgICAgICAgICAgIGRlZiBjZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgIGF1dG9tYXRpY2FsbHlDb25maXJtZWQudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpCgogICAgICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpOwogICAgICAgICAgICAgICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgIGxvZy53YXJuICJVcGRhdGVkIGN1c3RvbWZpZWxkIC0gaXNzdWUgbGlua2F0YSIKCiAgICAgICAgICAgICAgICAvL2RlZiB2YWxpZGF0aW9uUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykKICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgICAgICAgICAgZGVmIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpCiAgICAgICAgICAgICAgICAgICAgaWYgKCEgaXNzdWVSZXN1bHQuaXNWYWxpZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJGYWlsZWQgdG8gdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn0iKQogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiVHJhbnNhemlvbmUgZmF0dGEgNzkgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSwgJHtsaW5rZWRJc3N1ZS5zdGF0dXN9IikKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJDb3VsZCBub3QgdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmVycm9yQ29sbGVjdGlvbn0iKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpCiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykgewogICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7CgogICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgbG9nLndhcm4gIklzc3VlIGNvbiByZWxhdGVzT3V0SXNzdWVMaW5rIgogICAgICAgICAgICAvKkVzZWd1aXJlIHRyYW5zYXppb25lIGRpIHN0YXRvIGRlbGxhIGRlc3RpbmF0aW9uSXNzdWUqLwogICAgICAgICAgICBkZWYgbGlua2VkSXNzdWUgPSBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKQogICAgICAgICAgICBkZWYgbGlua2VkSXNzdWVTdGF0dXMgPSBsaW5rZWRJc3N1ZS5nZXRTdGF0dXMoKQogICAgICAgICAgICBkZWYgdHJhbnNpdGlvbklkCiAgICAgICAgICAgIGxvZy53YXJuICJsaW5rZWRJc3N1ZTogIiArIGxpbmtlZElzc3VlCiAgICAgICAgICAgIGxvZy53YXJuICJsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lOiAiICsgbGlua2VkSXNzdWVTdGF0dXMubmFtZQogICAgICAgICAgICBpZihsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lID09IChwcm9wZXJ0aWVzWyd3Zi5hc3NpZ25lZFRvU3VwcGxpZXInXSA/IHByb3BlcnRpZXNbJ3dmLmFzc2lnbmVkVG9TdXBwbGllciddLnRvU3RyaW5nKCkgOiAiQXNzaWduZWQgVG8gU3VwcGxpZXIiKSl7CiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9UkVKRUNUCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKHRyYW5zaXRpb25JZD09UkVKRUNUKXsKICAgICAgICAgICAgICAgIC8vIFByZXBhcmUgb3VyIGlucHV0IGZvciB0aGUgdHJhbnNpdGlvbgogICAgICAgICAgICAgICAgZGVmIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKCkKICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGggewogICAgICAgICAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayh0cnVlKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy9kZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKQogICAgICAgICAgICAgICAgLy9Db21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gIlllcyIgfQogICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksICJZZXMiKSAKCiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlCgogICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNvbmZpcm1lZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgIGxvZy53YXJuICJmaWVsZENvbmZpZzogIiArIGZpZWxkQ29uZmlnCiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoKICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTsKICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICBsb2cud2FybiAiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGEiCgogICAgICAgICAgICAgICAgaWYgKGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb24KICAgICAgICAgICAgICAgICAgICBkZWYgaXNzdWVSZXN1bHQgPSBpc3N1ZVNlcnZpY2UudHJhbnNpdGlvbih1c2VyLCBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKSkKICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIkZhaWxlZCB0byB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSIpCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJUcmFuc2F6aW9uZSBmYXR0YSAxMjIgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSwgJHtsaW5rZWRJc3N1ZS5zdGF0dXN9IikKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJDb3VsZCBub3QgdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmVycm9yQ29sbGVjdGlvbn0iKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgIH0KICAgIH0KfQ==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </function>
            <function type="class">
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="maxAllowed-integerValue">50</arg>
              <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="field">customfield_22756</arg>
              <arg name="scopeType">SAME</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
              <arg name="field2">customfield_22693</arg>
              <arg name="scopeSource-jql"></arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="FIELD_NOTES">YCFgT1AgRW1haWwgTm90aWZpY2F0aW9uOiBSRUpFQ1RFRF9CWV9TVVBQTElFUiAtIE1hbnRlbnV0YSBjb21lIHBvc3QgZnVuY3Rpb24gcGVyIG5vbiBnZW5lcmFyZSBibG9jY2hpIGFsIGZvcm5pdG9yZSBsZWdhdGkgYSBlcnJvcmkgZGkgaW52aW8gbWFpbCBpbnRlcm5l</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CkNhdGVnb3J5IGxvZyA9IENhdGVnb3J5LmdldEluc3RhbmNlKCJjb20ub25yZXNvbHZlLmppcmEuZ3Jvb3Z5LlBvc3RGdW5jdGlvbiIpCmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKQoKZGVmIHJlcXVlc3RNZXRob2QgPSAiUE9TVCI7CgpJc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7CkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTsKCmRlZiBib2R5X3JlcSA9IFsKCSJ0ZW1wbGF0ZU5hbWUiOiBwcm9wZXJ0aWVzWyd0dC5yZWplY3RlZEJ5U3VwcGxpZXInXS50b1N0cmluZygpLAoJInBlYyI6IGZhbHNlLAogICAgImlzc3VlS2V5IjogaXNzdWUua2V5Cl0KCmRlZiBiYXNlVVJMID0gImh0dHA6Ly8iICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyAiL29wL3Jlc3QvamlyYS9BQS90cmFuc2FjdGlvbi9tYWlsL3NlbmQiClVSTCB1cmwKdXJsID0gbmV3IFVSTChiYXNlVVJMKQoKSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpOwpjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eSgiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOCIpOwpjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eSgiQWNjZXB0IiwgIiovKiIpOwpjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpOwpjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7CmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtCmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoIlVURi04IikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9CmxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbQpjb25uZWN0aW9uLmNvbm5lY3QoKTsKCmxvZy5kZWJ1ZyAidXJsOiAiICsgdXJsCmxvZy5kZWJ1ZyAiUmVzcG9uc2VDb2RlOiIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpCmxvZy5kZWJ1ZyAiUmVzcG9uc2VNZXNzYWdlOiIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpCmxvZy5kZWJ1ZyAiZ2V0UmVzcG9uc2VNZXNzYWdlOiIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpCgo=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
    <action id="51" name="Assegna a Fornitore" view="fieldscreen">
      <meta name="opsbar-sequence">50</meta>
      <meta name="jira.description"></meta>
      <meta name="jira.fieldscreen.id">19904</meta>
      <restrict-to>
        <conditions type="AND">
          <condition type="class">
            <arg name="FIELD_FUNCTION_ID">93d6b54e-ad03-41e6-82a8-a6d0a675107e</arg>
            <arg name="FIELD_NOTES">YCFgT1BfQVNTRVQgc2hvdWxkIGJlIGV2YWx1YXRlZA==</arg>
            <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
            <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJjZlZhbHVlc1snT1BfQVNTRVQnXSAhPSBudWxsIHx8IGlzc3VlLmlzc3VlVHlwZS5uYW1lID09ICdQbGFubmVkIE1haW50ZW5hbmNlIFRpY2tldCciLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
            <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
          </condition>
          <condition type="class">
            <arg name="FIELD_FUNCTION_ID">862e4160-0f10-49db-afe0-9dc656448701</arg>
            <arg name="FIELD_NOTES">YCFgT1BfU1VQUExJRVIgc2hvdWxkIGJlIGV2YWx1YXRlZA==</arg>
            <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
            <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5kZWYgdHJvdmF0bz1mYWxzZVxuZm9yIChzIGluIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zdXBwbGllciddLnRvU3RyaW5nKCkpKXtcbiAgICBpZiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzKSAhPSBudWxsKXtcbiAgICAgICAgdHJvdmF0bz10cnVlXG4gICAgfVxufVxucmV0dXJuIHRyb3ZhdG9cbiIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
            <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
            <arg name="FIELD_PREVIEW_ISSUE">AAS-15446</arg>
          </condition>
        </conditions>
      </restrict-to>
      <validators>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">339d339e-1008-47f6-86fc-0fa1b991ccd2</arg>
          <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIEN1c3RvbWVyIENvbnRyYWN0ICYmIE51bWJlciBvZiB0aWNrZXRzIGluIHRoZSBsYXN0IDYwIGRheXM=</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5pbXBvcnQgamF2YS50ZXh0LkRhdGVGb3JtYXQ7XG5pbXBvcnQgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQ7XG5pbXBvcnQgamF2YS51dGlsLkRhdGU7XG5pbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmpxbC5wYXJzZXIuSnFsUXVlcnlQYXJzZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuYmMuaXNzdWUuc2VhcmNoLlNlYXJjaFNlcnZpY2VcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEudXNlci51dGlsLlVzZXJVdGlsXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLndlYi5iZWFuLlBhZ2VyRmlsdGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuVXNlclV0aWwgdXNlclV0aWwgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRVc2VyVXRpbCgpXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKClcbi8vaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtNDcyODVcIilcblxuZGVmIHdhcm5pbmdzID0gZmFsc2VcbmRlZiBtaXNzaW5nQ29udHJhY3QgPSBmYWxzZVxuZGVmIGV4cGlyZWRDb250cmFjdCA9IGZhbHNlXG5kZWYgZXJyb3JzID0gZmFsc2VcblxuZGVmIGluc3RhbGxhdGlvbiA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXNzZXQnXS50b1N0cmluZygpKVswXVxuZGVmIGF1dG9tYXRpY2FsbHlDb25maXJtZWQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlBc3NpZ25lZCddID8gcHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUFzc2lnbmVkJ10udG9TdHJpbmcoKSA6IFwiT1BfQVVUT01BVElDQUxMWV9BU1NJR05FRFwiKVswXVxuZGVmIHRyYW5zaXRpb25DaGVjayA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY2hlY2tBbmRDb25maXJtJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBleGVjdXRpb25EYXRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfRVhFQ1VUSU9OX0RBVEVcIilbMF1cblxuZGVmIHdhcm5pbmdFbXB0eUZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVycm9yTWFuZGF0b3J5RmllbGRzID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgYXNzZXQsIGFzc2V0S2V5LCBhc3NldE9iamVjdFxuXG5DbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7ICBcbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG5hc3NldCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoaW5zdGFsbGF0aW9uKVxubG9nLmRlYnVnIFwiYXNzZXQ6IFwiICsgYXNzZXRcbmFzc2V0PWFzc2V0LnRvU3RyaW5nKClcbmFzc2V0S2V5ID0gYXNzZXQuc3Vic3RyaW5nKGFzc2V0Lmxhc3RJbmRleE9mKCcoJykrMSxhc3NldC5sYXN0SW5kZXhPZignKScpKVxuYXNzZXRPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oYXNzZXRLZXkpXG5cbi8vT1BfQVNTRVRcbmlmKCFpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0LnBsYW5uZWRNYWludGVuYW5jZSddKSAmJiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKT09bnVsbCB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLnRvU3RyaW5nKCkuZXF1YWxzKFwiTm9cIikpKXtcbiAgICAvL0NoZWNrIENVU1RPTUVSX0NPTlRSQUNUX1JFRiBvbiBPUF9BU1NFVFxuICAgIFxuICAgIFxuICAgIGlmKGFzc2V0T2JqZWN0IT1udWxsKXtcbiAgICAgICAgbG9nLmRlYnVnIFwiYXNzZXRPYmplY3QuZ2V0SWQoKTogXCIgKyBhc3NldE9iamVjdC5nZXRJZCgpXG4gICAgICAgIGRlZiBvYlRyaWFnZVxuICAgICAgICBkZWYgY3VzdG9tZXJDb250cmFjdCwgY3VzdG9tZXJDb250cmFjdEF0dHJcbiAgICAgICAgY3VzdG9tZXJDb250cmFjdEF0dHIgPSBwcm9wZXJ0aWVzWydpb2JqLmhhcmR3YXJlLmNvbnRyYWN0J10gPyBwcm9wZXJ0aWVzWydpb2JqLmhhcmR3YXJlLmNvbnRyYWN0J10udG9TdHJpbmcoKSA6IFwiQ1VTVE9NRVJfQ09OVFJBQ1RfUkVGXCJcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGFzc2V0T2JqZWN0LmdldElkKCksIGN1c3RvbWVyQ29udHJhY3RBdHRyKSl7XG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihhc3NldE9iamVjdC5nZXRJZCgpLCBjdXN0b21lckNvbnRyYWN0QXR0cikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBjdXN0b21lckNvbnRyYWN0ID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuXG4gICAgICAgIGxvZy5kZWJ1ZyBcImN1c3RvbWVyQ29udHJhY3Q6IFwiICsgY3VzdG9tZXJDb250cmFjdFxuXG4gICAgICAgIGlmKGN1c3RvbWVyQ29udHJhY3QgPT0gbnVsbCl7XG4gICAgICAgICAgICB3YXJuaW5ncyA9IHRydWVcbiAgICAgICAgICAgIG1pc3NpbmdDb250cmFjdCA9IHRydWVcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAvL2dldCBcIlFUX1ZBTElEX1RcIiBmb3IgdGhhdCBUZWNobmljaWFuXG4gICAgICAgICAgICBkZWYgY29udHJhY3Q9Y3VzdG9tZXJDb250cmFjdC50b1N0cmluZygpXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJjb250cmFjdDpcIiArIGNvbnRyYWN0XG4gICAgICAgICAgICBkZWYgY29udHJhY3RJZCA9IGNvbnRyYWN0LnN1YnN0cmluZyhjb250cmFjdC5sYXN0SW5kZXhPZignKCcpKzEsY29udHJhY3QubGFzdEluZGV4T2YoJyknKSlcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImNvbnRyYWN0SWQ6XCIgKyBjb250cmFjdElkXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJwcm9wZXJ0aWVzWydpb2JqLmNvbnRyYWN0LnZhbGlkVG8nXTogXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmNvbnRyYWN0LnZhbGlkVG8nXVxuICAgICAgICAgICAgZGVmIGV4cGlyaW5nRGF0ZSwgZXhwaXJpbmdEYXRlQXR0clxuICAgICAgICAgICAgZXhwaXJpbmdEYXRlQXR0ciA9IHByb3BlcnRpZXNbJ2lvYmouY29udHJhY3QudmFsaWRUbyddID8gcHJvcGVydGllc1snaW9iai5jb250cmFjdC52YWxpZFRvJ10udG9TdHJpbmcoKSA6IFwiUVRfVkFMSURfVFwiXG5cbiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdElkLnRvSW50ZWdlcigpLCBjdXN0b21lckNvbnRyYWN0QXR0cikpe1xuICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbnRyYWN0SWQudG9JbnRlZ2VyKCksIGN1c3RvbWVyQ29udHJhY3RBdHRyKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICBjb250cmFjdFJlZiA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgY29udHJhY3RETyA9IGNvbnRyYWN0UmVmLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJjb250cmFjdERPOiBcIiArIGNvbnRyYWN0RE9cbiAgICAgICAgICAgICAgICBjb250cmFjdERPS2V5ID0gY29udHJhY3RETy5zdWJzdHJpbmcoY29udHJhY3RETy5sYXN0SW5kZXhPZignKCcpKzEsY29udHJhY3RETy5sYXN0SW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImNvbnRyYWN0RE9LZXk6IFwiICsgY29udHJhY3RET0tleVxuICAgICAgICAgICAgICAgIGNvbnRyYWN0RE9PYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4ocHJvcGVydGllc1snaXNjaGVtYS5kYm8nXS50b1N0cmluZygpICsgXCItXCIgKyBjb250cmFjdERPS2V5KVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImV4cGlyaW5nRGF0ZUF0dHI6IFwiICsgZXhwaXJpbmdEYXRlQXR0clxuICAgICAgICAgICAgICAgIGV4cGlyaW5nRGF0ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdERPS2V5LnRvSW50ZWdlcigpLCBleHBpcmluZ0RhdGVBdHRyKSA/IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdERPS2V5LnRvSW50ZWdlcigpLCBleHBpcmluZ0RhdGVBdHRyKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudmFsdWVbMF0gYXMgRGF0ZSA6IG51bGxcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZGVmIHRvZGF5c0RhdGVUaW1lID0gKG5ldyBEYXRlKCkpXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJleHBpcmluZ0RhdGU6IFwiICsgZXhwaXJpbmdEYXRlXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJ0b2RheXNEYXRlVGltZTogXCIgKyB0b2RheXNEYXRlVGltZVxuICAgICAgICAgICAgaWYoZXhwaXJpbmdEYXRlIDwgdG9kYXlzRGF0ZVRpbWUpe1xuICAgICAgICAgICAgICAgIHdhcm5pbmdzID0gdHJ1ZVxuICAgICAgICAgICAgICAgIGV4cGlyZWRDb250cmFjdCA9IHRydWVcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG5cbiAgICB9XG4gICAgICAgIFxufVxuXG5kZWYganFsUXVlcnlQYXJzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSnFsUXVlcnlQYXJzZXIpXG5kZWYganFsU2VhcmNoID0gXCJwcm9qZWN0ID0gJ1wiICsgaXNzdWUuZ2V0UHJvamVjdE9iamVjdCgpLm5hbWUgKyBcIicgQU5EIFwiICtcbiAgICBcIihpc3N1ZXR5cGUgbm90IGluIChcXFwiTmV3IEluc3RhbGxhdGlvblxcXCIsIFxcXCJQbGFubmVkIE1haW50ZW5hbmNlIFRpY2tldFxcXCIsIFxcXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcXFwiKSBPUiBpc3N1ZXR5cGUgaW4gKFxcXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcXFwiKSBBTkQgc3RhdHVzID0gRG9uZSkgXCIgK1xuICAgIFwiQU5EIE9QX0FTU0VUID0gXCIgKyBhc3NldEtleSArIFwiIEFORCAoKGlzc3VldHlwZSBub3QgaW4gKFxcXCJOZXcgSW5zdGFsbGF0aW9uXFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0XFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1xcXCIpIEFORCBPUF9FWEVDVVRJT05fREFURSBJUyBOT1QgRU1QVFkgQU5EIE9QX0VYRUNVVElPTl9EQVRFID49IC02MGQpIFwiICtcbiAgICBcIk9SIChpc3N1ZXR5cGUgaW4gKFxcXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcXFwiKSBBTkQgaXNzdWVGdW5jdGlvbiBpbiBzdWJ0YXNrc09mKFxcXCJPUF9FWEVDVVRJT05fREFURSBJUyBOT1QgRU1QVFkgQU5EIE9QX0VYRUNVVElPTl9EQVRFID49IC02MGRcXFwiKSkgT1IgKGlzc3VldHlwZSBub3QgaW4gKFxcXCJOZXcgSW5zdGFsbGF0aW9uXFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0XFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1xcXCIpIEFORCBPUF9FWEVDVVRJT05fREFURSBJUyBFTVBUWSBBTkQgT1BfUExBTk5FRF9EQVRFIElTIE5PVCBFTVBUWSBBTkQgT1BfUExBTk5FRF9EQVRFID49IC02MGQpIFwiICtcbiAgICBcIk9SIChpc3N1ZXR5cGUgaW4gKFxcXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcXFwiKSBBTkQgaXNzdWVGdW5jdGlvbiBpbiBzdWJ0YXNrc09mKFxcXCJPUF9FWEVDVVRJT05fREFURSBJUyBFTVBUWSBBTkQgT1BfUExBTk5FRF9EQVRFIElTIE5PVCBFTVBUWSBBTkQgT1BfUExBTk5FRF9EQVRFID49IC02MGRcXFwiKSkgT1IgKGlzc3VldHlwZSBub3QgaW4gKFxcXCJOZXcgSW5zdGFsbGF0aW9uXFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0XFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1xcXCIpIEFORCBPUF9FWEVDVVRJT05fREFURSBJUyBFTVBUWSBBTkQgT1BfUExBTk5FRF9EQVRFIElTIEVNUFRZIEFORCBPUF9SRVFVRVNURURfREFURSBJUyBOT1QgRU1QVFkgQU5EIE9QX1JFUVVFU1RFRF9EQVRFID49IC02MGQpIFwiICtcbiAgICBcIk9SIChpc3N1ZXR5cGUgaW4gKFxcXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcXFwiKSBBTkQgaXNzdWVGdW5jdGlvbiBpbiBzdWJ0YXNrc09mKFxcXCJPUF9FWEVDVVRJT05fREFURSBJUyBFTVBUWSBBTkQgT1BfUExBTk5FRF9EQVRFIElTIEVNUFRZIEFORCBPUF9SRVFVRVNURURfREFURSBJUyBOT1QgRU1QVFkgQU5EIE9QX1JFUVVFU1RFRF9EQVRFID49IC02MGRcXFwiKSkpXCJcblxuXG5cbmxvZy5kZWJ1ZyBqcWxTZWFyY2hcblxuZGVmIHF1ZXJ5ID0ganFsUXVlcnlQYXJzZXIucGFyc2VRdWVyeShqcWxTZWFyY2gpXG5kZWYgdXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQubG9nZ2VkSW5Vc2VyXG5kZWYgc2VhcmNoU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChTZWFyY2hTZXJ2aWNlKVxuZGVmIHNlYXJjaCA9IHNlYXJjaFNlcnZpY2Uuc2VhcmNoKHVzZXIsIHF1ZXJ5LCBQYWdlckZpbHRlci5nZXRVbmxpbWl0ZWRGaWx0ZXIoKSlcbmRlZiB0a3RMaXN0ID0gXCJcIlxuZGVmIGRhdGUgPSBuZXcgRGF0ZSgpXG5kZWYgd2FybmluZ051bVRrdCA9IGZhbHNlXG5cbmlmKHNlYXJjaC5yZXN1bHRzLnNpemUoKSA+PSAyKSB7XG4gICAgd2FybmluZ051bVRrdCA9IHRydWVcbiAgICB3YXJuaW5ncyA9IHRydWVcbiAgICAvL1ByZXBhcm8gaWwgd2FybmluZyBkYSBtb3N0cmFyZSBhbGwndXRlbnRlIGNvbiBpbCBkZXR0YWdsaW8gZGVsbGUgaXNzdWUgZ2lcdTAwZTAgZXNpc3RlbnRpXG4gICAgZm9yKGkgaW4gc2VhcmNoLnJlc3VsdHMpe1xuICAgICAgICBpZihpLnN0YXR1cy5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKFwiRG9uZVwiKSAmJiBpLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMoXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcIikpe1xuICAgICAgICAgICAgaWYodGt0TGlzdCAhPSBcIlwiKXtcbiAgICAgICAgICAgICAgICB0a3RMaXN0ID0gdGt0TGlzdCArIFwiOyBcIiArIGkuZ2V0UGFyZW50T2JqZWN0KCkua2V5LnRvU3RyaW5nKCkgKyBcIiAoXCIgKyBpLmdldFBhcmVudE9iamVjdCgpLmdldElzc3VlVHlwZSgpLm5hbWUgKyBcIikgXCIgKyBpLnN0YXR1cy5uYW1lLnRvU3RyaW5nKClcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHRrdExpc3QgPSBpLmdldFBhcmVudE9iamVjdCgpLmtleS50b1N0cmluZygpICsgXCIgKFwiICsgaS5nZXRQYXJlbnRPYmplY3QoKS5nZXRJc3N1ZVR5cGUoKS5uYW1lICsgXCIpIFwiICsgaS5zdGF0dXMubmFtZS50b1N0cmluZygpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL3RrdExpc3QgPSB0a3RMaXN0ICsgXCJcXG5cIiArIGkuZ2V0UGFyZW50T2JqZWN0KCkua2V5LnRvU3RyaW5nKCkgKyBcIiAoXCIgKyBpLmdldFBhcmVudE9iamVjdCgpLmdldElzc3VlVHlwZSgpLm5hbWUgKyBcIikgXCIgKyBpLnN0YXR1cy5uYW1lLnRvU3RyaW5nKClcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBpZihpLnN0YXR1cy5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKFwiQ2xvc2VkXCIpICYmICFpLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMoXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcIikpe1xuICAgICAgICAgICAgICAgIGlmKHRrdExpc3QgIT0gXCJcIil7XG4gICAgICAgICAgICAgICAgICAgIHRrdExpc3QgPSB0a3RMaXN0ICsgXCI7IFwiICsgaS5rZXkudG9TdHJpbmcoKSArIFwiIChcIiArIGkuZ2V0SXNzdWVUeXBlKCkubmFtZSArIFwiKSBcIiArIGkuc3RhdHVzLm5hbWUudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICB0a3RMaXN0ID0gaS5rZXkudG9TdHJpbmcoKSArIFwiIChcIiArIGkuZ2V0SXNzdWVUeXBlKCkubmFtZSArIFwiKSBcIiArIGkuc3RhdHVzLm5hbWUudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL3RrdExpc3QgPSB0a3RMaXN0ICsgXCJcXG5cIiArIGkua2V5LnRvU3RyaW5nKCkgKyBcIiAoXCIgKyBpLmdldElzc3VlVHlwZSgpLm5hbWUgKyBcIikgXCIgKyBpLnN0YXR1cy5uYW1lLnRvU3RyaW5nKClcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGlmKHRrdExpc3QgIT0gXCJcIil7XG4gICAgICAgICAgICAgICAgICAgIHRrdExpc3QgPSB0a3RMaXN0ICsgXCI7IFwiICsgaS5rZXkudG9TdHJpbmcoKSArIFwiIChcIiArIGkuZ2V0SXNzdWVUeXBlKCkubmFtZSArIFwiKSBcIiArIGkuc3RhdHVzLm5hbWUudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICB0a3RMaXN0ID0gaS5rZXkudG9TdHJpbmcoKSArIFwiIChcIiArIGkuZ2V0SXNzdWVUeXBlKCkubmFtZSArIFwiKSBcIiArIGkuc3RhdHVzLm5hbWUudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL3RrdExpc3QgPSB0a3RMaXN0ICsgXCJcXG5cIiArIGkua2V5LnRvU3RyaW5nKCkgKyBcIiAoXCIgKyBpLmdldElzc3VlVHlwZSgpLm5hbWUgKyBcIikgXCIgKyBpLnN0YXR1cy5uYW1lLnRvU3RyaW5nKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBsb2cuZGVidWcgXCJ0a3RMaXN0OiBcIiArIHRrdExpc3Rcbn1cblxuZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuXG5pZiAoIXdhcm5pbmdzKXtcbiAgICByZXR1cm4gdHJ1ZVxufWVsc2V7XG4gICAgaWYod2FybmluZ3Mpe1xuICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIikpe1xuICAgICAgICAgICAgLy9sb2cuZGVidWcgXCJyZXR1cm4gdHJ1ZVwiXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuXHRcdFx0ZGVmIHdMaXN0Q29uZmlybUVtcHR5Q29udHJhY3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1NdWx0aXBsZVRrdHMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYobWlzc2luZ0NvbnRyYWN0KXtcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eUNvbnRyYWN0LmFkZChcIldcIilcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eUNvbnRyYWN0LmFkZChcIkNVU1RPTUVSX0NPTlRSQUNUX01JU1NJTkdcIilcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eUNvbnRyYWN0LmFkZChudWxsKVxuXG4gICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5Q29udHJhY3QpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKGV4cGlyZWRDb250cmFjdCl7XG4gICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlDb250cmFjdC5hZGQoXCJXXCIpXG4gICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlDb250cmFjdC5hZGQoXCJDVVNUT01FUl9DT05UUkFDVF9FWFBJUkVEXCIpXG4gICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlDb250cmFjdC5hZGQobnVsbClcblxuICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eUNvbnRyYWN0KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZih3YXJuaW5nTnVtVGt0KXtcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1NdWx0aXBsZVRrdHMuYWRkKFwiV1wiKVxuICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybU11bHRpcGxlVGt0cy5hZGQodGt0TGlzdClcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1NdWx0aXBsZVRrdHMuYWRkKFwiTU9SRV9USEFOXzJfVEtUU19MQVNUXzYwX0RBWVNcIilcbiAgICAgICAgICAgICAgICAvL3dMaXN0Q29uZmlybU11bHRpcGxlVGt0cy5hZGQobnVsbClcblxuICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1NdWx0aXBsZVRrdHMpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiV1wiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpIFxuICAgICAgICB9XG4gICAgfVxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">6411a0f5-9ae7-4a56-a7f5-a857227a153e</arg>
          <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIFJlLVNjaGVkdWxlIEZsYWc=</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5pbXBvcnQgamF2YS50ZXh0LkRhdGVGb3JtYXQ7XG5pbXBvcnQgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQ7XG5pbXBvcnQgamF2YS51dGlsLkRhdGU7XG5pbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wXG5cblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5cbmRlZiB3YXJuaW5ncyA9IGZhbHNlXG5kZWYgbWlzc2luZ0NvbnRyYWN0ID0gZmFsc2VcbmRlZiBleHBpcmVkQ29udHJhY3QgPSBmYWxzZVxuZGVmIGVycm9ycyA9IGZhbHNlXG5cbmRlZiByZXNjaGVkdWxpbmcgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJlc2NoZWR1bGluZyddID8gcHJvcGVydGllc1snY2YucmVzY2hlZHVsaW5nJ10udG9TdHJpbmcoKSA6IFwiT1BfQ0hBTkdFX1NDSEVEVUxJTkdcIilbMF1cbmRlZiB0cmFuc2l0aW9uQ2hlY2sgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmNoZWNrQW5kQ29uZmlybTInXS50b1N0cmluZygpKVswXVxuZGVmIGZpcnN0VGlja2V0ID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5maXJzdFRrdCddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiB3YXJuaW5nRW1wdHlGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlcnJvck1hbmRhdG9yeUZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKVxuIFxuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXNjaGVkdWxpbmcpLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpICYmIChpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0Lm5ld0luc3RhbGxhdGlvbiddKSB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGZpcnN0VGlja2V0KSE9bnVsbCkpe1xuICAgIC8vQXNrIGNvbmZpcm1hdGlvbiB0byBkZWxldGUgYW5kIGNyZWF0ZSBhZ2FpbiBOZXcgSW5zdGFsbGF0aW9uIGF0dGFjaG1lbnRzXG4gICAgd2FybmluZ3MgPSB0cnVlXG59XG5cbmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcblxuaWYgKCF3YXJuaW5ncyl7XG4gICAgcmV0dXJuIHRydWVcbn1lbHNle1xuICAgIGlmKHdhcm5pbmdzKXtcbiAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpKXtcbiAgICAgICAgICAgIC8vbG9nLmRlYnVnIFwicmV0dXJuIHRydWVcIlxuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBkZWYgd0xpc3QgPSBuZXcgQXJyYXlMaXN0KClcblx0XHRcdGRlZiB3TGlzdENvbmZpcm1FbXB0eUNvbnRyYWN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5Q29udHJhY3QuYWRkKFwiV1wiKVxuICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlDb250cmFjdC5hZGQoXCJORVdfRE9DU19HRU5FUkFUSU9OXCIpXG4gICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eUNvbnRyYWN0LmFkZChudWxsKVxuXG4gICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHlDb250cmFjdClcbiAgICAgICAgXG4gICAgICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiV1wiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpIFxuICAgICAgICB9XG4gICAgfVxufSIsInNjcmlwdFBhdGgiOm51bGx9</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">136ddcac-3447-4136-8695-c845548ae5b2</arg>
          <arg name="FIELD_NOTES">YCFgRGVsZXRlIHByZXZpb3VzIGF0dGFjaG1lbnRzIHJlbGF0ZWQgdG8gTkVXIEluc3RhbGxhdGlvbiBUS1QgR2VuZXJhdGlvbg==</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5cbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5kZWYgYXV0b21hdGljYWxseUNsb3NlZCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUNsb3NlZCddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiByZXNjaGVkdWxpbmcgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJlc2NoZWR1bGluZyddID8gcHJvcGVydGllc1snY2YucmVzY2hlZHVsaW5nJ10udG9TdHJpbmcoKSA6IFwiT1BfQ0hBTkdFX1NDSEVEVUxJTkdcIilbMF1cbmRlZiB0cmFuc2l0aW9uQ2hlY2sgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmNoZWNrQW5kQ29uZmlybTInXS50b1N0cmluZygpKVswXVxuXG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcblxuLypTY3JpcHQgVmFyaWFibGVzKi9cbi8vUGVyIHRlc3QgZGEgY29uc29sZVxuLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIk9QVVQtMTQwNjJcIilcblxuaW50IE9QQUEgPSBwcm9wZXJ0aWVzWydpc2NoZW1hLmFhLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuaW50IERCTyA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuZGJvLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuXG4vKlJpbW96aW9uZSBhbGxlZ2F0byByYXBwb3J0byBkaSBpbnRlcnZlbnRvIGFwcGVuYSBjcmVhdG8qL1xuLyogR2V0IEluc2lnaHQgSVFMIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xuQ2xhc3MgaXFsRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuSVFMRmFjYWRlXCIpOyBcbmRlZiBpcWxGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUoaXFsRmFjYWRlQ2xhc3MpO1xuXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7XG5kZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcblxuLyogR2V0IEluc2lnaHQgT2JqZWN0IFR5cGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBvYmplY3RUeXBlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUZhY2FkZVwiKTtcbmRlZiBvYmplY3RUeXBlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVGYWNhZGVDbGFzcyk7XG5cbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBBdHRyaWJ1dGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTtcbmRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XG5cbkNsYXNzIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5zZXJ2aWNlcy5tb2RlbC5mYWN0b3J5Lk9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5XCIpO1xuZGVmIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MpO1xuXG5cbmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVzY2hlZHVsaW5nKS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKSAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIikpe1xuXG4gICAgLyogU3BlY2lmeSB0aGUgc2NoZW1hIGlkIGFzIHdlbGwgYXMgdGhlIElRTCB0aGF0IHdpbGwgZmV0Y2ggb2JqZWN0cy4gSW4gdGhpcyBjYXNlIGFsbCBvYmplY3RzIHdpdGggTmFtZSBtYXRjaGluZyB0aGUgdmFsdWVDRiwgYmUgc3VyZSB0byBpbmNsdWRlIFwiIGFyb3VuZCB2YWx1ZSAqL1xuICAgIGRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5cXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5uZXdJbnN0VGt0J10udG9TdHJpbmcoKSArIFwiXFxcIiA9IHRydWUgQU5EIFwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyBcIiE9dHJ1ZSBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleSA9IFwiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIilcIik7IC8vIFNlZSB0aGUgY29tcGxldGUgbGlzdCBvZiBwb3NzaWJsZSBJUUwgb24gdGhlIEluc2lnaHQgUXVlcnkgTGFuZ3VhZ2UgZG9jdW1lbnRhdGlvbiBwYWdlXG4gICAgLyogSWYgdGhpcyBpcyBhIG1hbmRhdG9yeSBmaWVsZCB5b3Ugc2hvdWxkIGJlIGFibGUgdG8gZG8gdGhpczogKi9cbiAgICBsb2cuZGVidWcgXCJJUUw6IFwiICsgXCJcXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5jYXRlZ29yeVJlZiddLnRvU3RyaW5nKCkgKyBcIlxcXCIuXFxcIlwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkubmV3SW5zdFRrdCddLnRvU3RyaW5nKCkgKyBcIlxcXCIgPSB0cnVlIEFORCBcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpICsgXCIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSBcIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIpXCJcblxuICAgIGZvcihpb2JqIGluIG9iamVjdHMpe1xuICAgICAgICAvKiBVUERBVEUgT0pCRUNUIERFTEVURUQgVkFMVUUgKi9cbiAgICAgICAgZGVmIG9iaiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihpb2JqLmdldElkKCkpO1xuXG4gICAgICAgIGludCBhdHRhY2htZW50RGVsZXRlZCA9IHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudC5kZWxldGVkLmlkJ10gPyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnQuZGVsZXRlZC5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKCkgOiAzMjY1XG5cbiAgICAgICAgYXR0cmliVHlwZSA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKGF0dGFjaG1lbnREZWxldGVkKTsgXG5cbiAgICAgICAgbmV3QXR0cmliID0gb2JqLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW4oYXR0cmliVHlwZSk7XG4gICAgICAgIGRlZiBuZXdBdHRyaWJWYWx1ZSA9IG5ld0F0dHJpYi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbmV3QXR0cmliVmFsdWUuc2V0VmFsdWUoYXR0cmliVHlwZSwgdHJ1ZSk7XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHtcbiAgICAgICAgICAgIGxvZy53YXJuKFwiU0VUSU5TSUdIVFZBTFVFOiBVbmFibGUgdG8gc2V0IGF0dHJpYnV0ZSBcIiArIGF0dHJpYlR5cGUgKyBcIiB0byBcIiArIHRvdGFsQW1vdW50U3VwcCArIFwiLiBFeGl0aW5nLlwiKTtcbiAgICAgICAgICAgIGxvZy53YXJuKFNFVElOU0lHSFRWQUxVRTogdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBkZWYgYXR0cmliVmFsdWVzID0gbmV3QXR0cmliLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTtcbiAgICAgICAgYXR0cmliVmFsdWVzLmFkZChuZXdBdHRyaWJWYWx1ZSk7XG4gICAgICAgIG5ld0F0dHJpYi5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKGF0dHJpYlZhbHVlcyk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG5ld0F0dHJpYiA9IG9iamVjdEZhY2FkZS5zdG9yZU9iamVjdEF0dHJpYnV0ZUJlYW4obmV3QXR0cmliKTtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSkge1xuICAgICAgICAgICAgbG9nLndhcm4oXCJTRVRJTlNJR0hUVkFMVUU6IFVuYWJsZSB0byBzYXZlIGNoYW5nZXMuIEV4aXRpbmcuXCIpO1xuICAgICAgICAgICAgbG9nLndhcm4oU0VUSU5TSUdIVFZBTFVFOiB2aWUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGxvZy5pbmZvKFwiU0VUSU5TSUdIVFZBTFVFOiBTdWNjZXNzZnVsbHkgc2F2ZWQgdmFsdWVcIik7XG4gICAgfVxuICAgIFxufSIsInNjcmlwdFBhdGgiOm51bGx9</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">17f1689e-675a-4677-aec8-021a2640fd0c</arg>
          <arg name="FIELD_NOTES">YCFgT1A6IERvYyBUZW1wbGF0ZSBnZW5lcmF0aW9uIC0gc2UgTmV3IEluc3RhbGxhdGlvbiBPUiBGaXJzdCBUaWNrZXQgPSB0cnVl</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5Xb3JrZmxvd0V4Y2VwdGlvbjtcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvblxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyO1xuaW1wb3J0IGdyb292eS5qc29uLlN0cmVhbWluZ0pzb25CdWlsZGVyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5DdXN0b21GaWVsZE1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3I7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMuY29kZWMuYmluYXJ5LkJhc2U2NDtcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5XG5pbXBvcnQgZ3Jvb3Z5eC5uZXQuaHR0cC5IVFRQQnVpbGRlclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcblxuZGVmIHJlcXVlc3RNZXRob2RcbmRlZiBiYXNlVVJMXG5cbmRlZiBmaXJzdFRpY2tldCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuZmlyc3RUa3QnXS50b1N0cmluZygpKVswXVxuXG5sb2cuZGVidWcgaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZVxubG9nLmRlYnVnIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZmlyc3RUaWNrZXQpXG5cblxuLyogUkVTVCBBUEkgcGVyIEludmlvIE5vdGlmaWNhIEVtYWlsIE9OU0lURV9SRVBPUlQgKi9cbnJlcXVlc3RNZXRob2QgPSBcIkdFVFwiO1xuZGVmIHJlc2NoZWR1bGluZyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YucmVzY2hlZHVsaW5nJ10gPyBwcm9wZXJ0aWVzWydjZi5yZXNjaGVkdWxpbmcnXS50b1N0cmluZygpIDogXCJPUF9DSEFOR0VfU0NIRURVTElOR1wiKVswXVxuZGVmIHRyYW5zaXRpb25DaGVjayA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY2hlY2tBbmRDb25maXJtJ10udG9TdHJpbmcoKSlbMF1cblxuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXNjaGVkdWxpbmcpLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpICYmIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKSAmJiAoaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5uZXdJbnN0YWxsYXRpb24nXSkgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShmaXJzdFRpY2tldCkhPW51bGwpKXtcbiAgICBkZWYgZmlyc3RfdGlja2V0PWZhbHNlXG4gICAgZGVmIHRlbXBsYXRlPVwiXCJcbiAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGZpcnN0VGlja2V0KSE9bnVsbCl7XG4gICAgICAgIGZpcnN0X3RpY2tldD10cnVlXG4gICAgICAgIHRlbXBsYXRlPVwiRklSU1RfVElDS0VUJTdDTUFOVUZBQ1RVUkVSXCJcbiAgICB9ZWxzZXtcbiAgICAgICAgdGVtcGxhdGU9XCJORVdfSU5TVEFMTEFUSU9OX0NSRUFURV9US1QlN0NNQU5VRkFDVFVSRVJcIlxuICAgIH1cbiAgICBcbiAgICBpZihpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0Lm5ld0luc3RhbGxhdGlvbiddKSl7XG4gICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL2RvY3VtZW50L2dlbmVyYXRpb24vY2hlY2s/SVNTVUVfS0VZPVwiKyBpc3N1ZS5rZXkgK1wiJkRPQ19DQVRFR09SWT1cIiArIHRlbXBsYXRlICsgXCImRU5BQkxFRF9GT1JfRklSU1RfVElDS0VUPVwiK2ZpcnN0X3RpY2tldCtcIiZJTVBPUlRfRlJPTT1cIlxuICAgIH1lbHNle1xuICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvYXV0b21hdGlvbi9kb2N1bWVudC9nZW5lcmF0aW9uL2NoZWNrP0lTU1VFX0tFWT1cIisgaXNzdWUua2V5ICtcIiZET0NfQ0FURUdPUlk9XCIgKyB0ZW1wbGF0ZSArIFwiJkVOQUJMRURfRk9SX0ZJUlNUX1RJQ0tFVD1cIitmaXJzdF90aWNrZXQrXCImSU1QT1JUX0ZST009T1BfQVNTRVRcIlxuICAgIH1cbiAgICBcbiAgICBsb2cuZGVidWcgYmFzZVVSTFxuICAgIFVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblx0bG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgIFxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgIGxvZy5kZWJ1ZyBcIkVycm9yU3RyZWFtOiBcIiArIGNvbm5lY3Rpb24uZ2V0RXJyb3JTdHJlYW0oKS50b1N0cmluZygpXG4gICAgICAgIGxvZy5kZWJ1ZyBcImdldEhlYWRlckZpZWxkcygpOiBcIiArIGNvbm5lY3Rpb24uZ2V0SGVhZGVyRmllbGRzKClcbiAgICAgICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxuICAgICAgICBsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXG5cbiAgICAgICAgZGVmIGpzb25TbHVycGVyID0gbmV3IEpzb25TbHVycGVyKClcbiAgICAgICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcbiAgICAgICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICBcbiAgICAgICAgbG9nLmRlYnVnIFwibWVzc2FnZTogXCIgKyAganNvbl9vYmplY3QubWVzc2FnZVxuXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtRE9DU1wiKVxuICAgICAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGpzb25fb2JqZWN0Lm1lc3NhZ2UpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICB9XG59XG4iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">3bddafa4-9601-4ff0-9db1-83ec1b0f0850</arg>
          <arg name="FIELD_NOTES">YCFgIEdlbmVyYXRlIFNOIGZvciBvbGQgdGlja2V0cyAmIG9mZmVyIHRrdHM=</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuXG5kZWYgU04gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfU0FQX1NFUlZJQ0VfTk9USUZJQ0FUSU9OXCIpWzBdXG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcblxuVVJMIHVybFxuSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvblxuXG5pZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKFNOKSA9PSBudWxsICYmIGlzc3VlLmlzc3VlVHlwZS5uYW1lICE9IFwiUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXRcIil7XG4gICAgcmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuXG4gICAgZGVmIGJvZHlfcmVxID0gW11cbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXG4gICAgICAgIFwic3RhdHVzXCI6IFwiT1BFXCJcbiAgICBdIFxuXG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL3NlcnZpY2Uvbm90aWZpY2F0aW9uXCJcblxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxuICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNOOiBcIiArIGJvZHlfcmVxXG4gICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxuICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgIFxuICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG4gICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcblxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TTi1VUERBVEVcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICB9XG59XG4gIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">0edcbf2c1701d9f3a9ad279bea831e613d3338a7</arg>
          <arg name="FIELD_NOTES">YCFgT1AgRW1haWwgTm90aWZpY2F0aW9uOiBBU1NJR05fVE9fU1VQUExJRVI=</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbmRlZiByZXF1ZXN0TWV0aG9kID0gXCJQT1NUXCI7XG5kZWYgcmVsYXRlc0luSXNzdWVMaW5rPWZhbHNlXG5kZWYgcmVsYXRlc091dElzc3VlTGluaz1mYWxzZVxuZGVmIGxpbmtlZFRpY2tldHM9bmV3IEFycmF5TGlzdCgpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiBhdXRvbWF0aWNhbGx5Q29uZmlybWVkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5QXNzaWduZWQnXSA/IHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlBc3NpZ25lZCddLnRvU3RyaW5nKCkgOiBcIk9QX0FVVE9NQVRJQ0FMTFlfQVNTSUdORURcIilbMF1cblxuLyp2ZXJpZmljYSB0aWNrZXQgY29sbGVnYXRpKi9cbkxpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKVxuZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG5cbiAgICBpZihpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkhPSBudWxsICYmIGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKS5nZXRJc3N1ZVR5cGUoKS5uYW1lID09IGlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUgJiYgaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkgJiYgaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpLnN0YXR1cy5uYW1lID09IFwiT3BlblwiKXtcbiAgICAgICAgcmVsYXRlc0luSXNzdWVMaW5rPXRydWVcbiAgICAgICAgbGlua2VkVGlja2V0cy5hZGQoaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpLnRvU3RyaW5nKCkpXG4gICAgICAgIGxvZy5kZWJ1ZyBcIklzc3VlIGNvbiByZWxhdGVzSW5Jc3N1ZUxpbmsgXCIgKyBpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkuZ2V0SXNzdWVUeXBlKCkubmFtZSBcbiAgICB9XG59XG5MaXN0PElzc3VlTGluaz4gYWxsT3V0SXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldE91dHdhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKVxuZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsT3V0SXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHtcbiAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgaWYoaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkhPSBudWxsICYmIGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpLmdldElzc3VlVHlwZSgpLm5hbWUgPT0gaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZSAmJiBpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSAmJiBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKS5zdGF0dXMubmFtZSA9PSBcIk9wZW5cIil7XG4gICAgICAgIHJlbGF0ZXNPdXRJc3N1ZUxpbms9dHJ1ZVxuICAgICAgICBsaW5rZWRUaWNrZXRzLmFkZChpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKS50b1N0cmluZygpKVxuICAgICAgICBsb2cuZGVidWcgXCJJc3N1ZSBjb24gcmVsYXRlc091dElzc3VlTGluayBcIiArIGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpXG4gICAgfVxufVxuXG5kZWYgYm9keV9yZXFcbmlmKHJlbGF0ZXNJbklzc3VlTGluayB8fCByZWxhdGVzT3V0SXNzdWVMaW5rKXtcbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJ0ZW1wbGF0ZU5hbWVcIjogcHJvcGVydGllc1sndHQuYXNzaWduVG9TdXBwbGllciddLnRvU3RyaW5nKCksXG4gICAgICAgIFwicGVjXCI6IGZhbHNlLFxuICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleSxcbiAgICAgICAgXCJsaW5rZWRUaWNrZXRzXCI6IGxpbmtlZFRpY2tldHNcbiAgICBdXG59ZWxzZXtcbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJ0ZW1wbGF0ZU5hbWVcIjogcHJvcGVydGllc1sndHQuYXNzaWduVG9TdXBwbGllciddLnRvU3RyaW5nKCksXG4gICAgICAgIFwicGVjXCI6IGZhbHNlLFxuICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleVxuICAgIF1cbn1cblxuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKT09bnVsbCB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLnRvU3RyaW5nKCkuZXF1YWxzKFwiTm9cIikpe1xuICAgIGRlZiBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS90cmFuc2FjdGlvbi9tYWlsL3NlbmRcIlxuICAgIFVSTCB1cmxcbiAgICB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG5cbiAgICBsb2cuZGVidWcgXCJiYXNlVVJMOiBcIiArIGJhc2VVUkxcbiAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cbiAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cdGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICBcbiAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikgJiYgIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDRcIikpe1xuICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuXG4gICAgICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHRcbiAgICAgICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xuXG4gICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpXG4gICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgXG4gICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcblxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIlNFTkRNQUlMXCIpXG4gICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsganNvbl9vYmplY3QubWVzc2FnZS50b1N0cmluZygpLnJlcGxhY2VBbGwoXCIvW15hLXpBLVogXS9nXCIsXCJcIikucmVwbGFjZUFsbCgnXCInLCcnKSlcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcbiAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgIH1cbn1cbiAiLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
          <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmsKaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXIKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsCgpQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpCkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpCnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7Cglwcm9wZXJ0aWVzLmxvYWQoaXQpCn0KQ2F0ZWdvcnkgbG9nID0gQ2F0ZWdvcnkuZ2V0SW5zdGFuY2UoImNvbS5vbnJlc29sdmUuamlyYS5ncm9vdnkuUG9zdEZ1bmN0aW9uIikKbG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpCgpkZWYgcmVxdWVzdE1ldGhvZCA9ICJQT1NUIjsKZGVmIHJlbGF0ZXNJbklzc3VlTGluaz1mYWxzZQpkZWYgcmVsYXRlc091dElzc3VlTGluaz1mYWxzZQpkZWYgbGlua2VkVGlja2V0cz1uZXcgQXJyYXlMaXN0KCkKCklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTsKQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpOwpkZWYgYXV0b21hdGljYWxseUNvbmZpcm1lZCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUFzc2lnbmVkJ10gPyBwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5QXNzaWduZWQnXS50b1N0cmluZygpIDogIk9QX0FVVE9NQVRJQ0FMTFlfQVNTSUdORUQiKVswXQoKLypPUC0xMDM4OiB2ZXJpZmljYSB0aWNrZXQgY29sbGVnYXRpKi8KTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpCmZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbEluSXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHsKICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7CgogICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpewogICAgICAgIHJlbGF0ZXNJbklzc3VlTGluaz10cnVlCiAgICAgICAgbGlua2VkVGlja2V0cy5hZGQoaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpLnRvU3RyaW5nKCkpCiAgICAgICAgbG9nLmRlYnVnICJJc3N1ZSBjb24gcmVsYXRlc0luSXNzdWVMaW5rIgogICAgfQp9Ckxpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpCmZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbE91dElzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7CiAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpOwoKICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXsKICAgICAgICByZWxhdGVzT3V0SXNzdWVMaW5rPXRydWUKICAgICAgICBsaW5rZWRUaWNrZXRzLmFkZChpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKS50b1N0cmluZygpKQogICAgICAgIGxvZy5kZWJ1ZyAiSXNzdWUgY29uIHJlbGF0ZXNPdXRJc3N1ZUxpbmsiCiAgICB9Cn0KCmRlZiBib2R5X3JlcQppZihyZWxhdGVzSW5Jc3N1ZUxpbmsgfHwgcmVsYXRlc091dElzc3VlTGluayl7CiAgICBib2R5X3JlcSA9IFsKICAgICAgICAidGVtcGxhdGVOYW1lIjogcHJvcGVydGllc1sndHQuYXNzaWduVG9TdXBwbGllciddLnRvU3RyaW5nKCksCiAgICAgICAgInBlYyI6IGZhbHNlLAogICAgICAgICJpc3N1ZUtleSI6IGlzc3VlLmtleSwKICAgICAgICAibGlua2VkVGlja2V0cyI6IGxpbmtlZFRpY2tldHMKICAgIF0KfWVsc2V7CiAgICBib2R5X3JlcSA9IFsKICAgICAgICAidGVtcGxhdGVOYW1lIjogcHJvcGVydGllc1sndHQuYXNzaWduVG9TdXBwbGllciddLnRvU3RyaW5nKCksCiAgICAgICAgInBlYyI6IGZhbHNlLAogICAgICAgICJpc3N1ZUtleSI6IGlzc3VlLmtleQogICAgXQp9CgppZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpPT1udWxsIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCkudG9TdHJpbmcoKS5lcXVhbHMoIk5vIikpewogICAgZGVmIGJhc2VVUkwgPSAiaHR0cDovLyIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArICIvb3AvcmVzdC9qaXJhL0FBL3RyYW5zYWN0aW9uL21haWwvc2VuZCIKICAgIFVSTCB1cmwKICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTCkKCiAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpOwogICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpOwogICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLTgiKTsKICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KCJBY2NlcHQiLCAiKi8qIik7CiAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpOwogICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpOwogICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0KICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoIlVURi04IikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9CiAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0KICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpOwoKICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KCkKICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKQogICAgZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpCiAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpCgogICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKCIyMDAiKSl7CiAgICAgICAgbG9nLmRlYnVnICJ1cmw6ICIgKyB1cmwKICAgICAgICBsb2cuZGVidWcgIlJlc3BvbnNlQ29kZToiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKQogICAgICAgIGxvZy5kZWJ1ZyAiUmVzcG9uc2VNZXNzYWdlOiIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpCiAgICAgICAgCiAgICAgICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dAogICAgCWxvZy5kZWJ1ZyAiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiAiICsgb3V0cHV0TXNnCiAgICAgICAgCiAgICAgICAgZGVmIGpzb25TbHVycGVyID0gbmV3IEpzb25TbHVycGVyKCkKICAgIAlkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKQogICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgCiAgICAgICAgbG9nLmRlYnVnICJtZXNzYWdlOiAiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2UKCiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKCJFIikKICAgICAgICBlTGlzdEVycm9ycy5hZGQoIlNFTkRNQUlMIikKICAgICAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyAiICIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpKQogICAgICAgIC8vZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncykKICAgICAgICBlTGlzdEVycm9ycy5hZGQoanNvbl9vYmplY3QubWVzc2FnZSkKICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpCgogICAgICAgIG91dHB1dC5hZGQoZUxpc3QpCiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigneyJFIjoiJyArIG91dHB1dC50b1N0cmluZygpICsgJyJ9JykKICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oIkUiLCBvdXRwdXQudG9TdHJpbmcoKSkKICAgIH0KfQo=</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
          <arg name="FIELD_SCRIPT_FILE"></arg>
        </validator>
      </validators>
      <results>
        <unconditional-result old-status="null" status="null" step="2">
          <post-functions>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
            <function type="class">
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="append.value"></arg>
              <arg name="maxAllowed-integerValue">50</arg>
              <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="field.value">%%CURRENT_DATETIME%%</arg>
              <arg name="field.name">customfield_22639</arg>
              <arg name="scopeType">SAME</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
              <arg name="scopeSource-jql"></arg>
            </function>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">14b92cea1dc4f22ec42d0ad489a7359b4ad4a858</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IE5ldyBJbnN0YWxsYXRpb24gLSBDaGVjayBsaW5rZWRUaWNrZXRzICYgRmFzdC1UcmFuc2FjdCB0aGVt</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5sb2cud2FybiBcIiR7aXNzdWUua2V5fSBUcmFuc2F6aW9uZSBBU1NJR04gVE8gU1VQUExJRVIgLSBQb3N0IEZ1bmN0aW9uIGNoZWNrIGxpbmtlZElzc3Vlc1wiXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiBhdXRvbWF0aWNhbGx5Q29uZmlybWVkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5QXNzaWduZWQnXSA/IHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlBc3NpZ25lZCddLnRvU3RyaW5nKCkgOiBcIk9QX0FVVE9NQVRJQ0FMTFlfQVNTSUdORURcIilbMF1cbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcblxuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL2lzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0yNzZcIilcblxuLypERVYqL1xuQVNTSUdOX1RPX1NVUFBMSUVSID0gcHJvcGVydGllc1snd2YudHIuYXNzaWduVG9TdXBwbGllciddID8gcHJvcGVydGllc1snd2YudHIuYXNzaWduVG9TdXBwbGllciddIDogNTFcblxuLypQUk9EKi9cbi8vQ09ORklSTV9UT19DVVNUT01FUlxuXG5kZWYgdXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuZGVmIGlzc3VlU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlU2VydmljZSgpXG5cbi8qU2UgZXNlZ3VvIGxhIGNvbmZpcm0gdG8gY3VzdG9tZXIgc3UgdW4gdGlja2V0IGNvbiAxIG8gKyB0aWNrZXQgY29sbGVnYXRpLCB2ZXJpZmljbyBlIHNwb3N0byBpbiBhdXRvbWF0aWNvIGdsaSBldmVudHVhbGkgdGlja2V0IGNvbGxlZ2F0aSovXG5sb2cud2FybiBcInZlcmlmaWNvIGUgc3Bvc3RvIGluIGF1dG9tYXRpY28gZ2xpIGV2ZW50dWFsaSB0aWNrZXQgY29sbGVnYXRpXCJcblxuaWYoKGlzc3VlLmdldElzc3VlVHlwZSgpLmdldE5hbWUoKSA9PSBwcm9wZXJ0aWVzWydpdC5uZXdJbnN0YWxsYXRpb24nXS50b1N0cmluZygpIHx8IGlzc3VlLmdldElzc3VlVHlwZSgpLmdldE5hbWUoKSA9PSBcIk1haW50ZW5hbmNlIFRpY2tldFwiKSAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpPT1udWxsIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCkudG9TdHJpbmcoKS5lcXVhbHMoXCJOb1wiKSl7XG4gICAgTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG4gICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgICAgIGlmKGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKSE9IG51bGwgJiYgaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgbG9nLndhcm4gXCJJc3N1ZSBjb24gcmVsYXRlc0luSXNzdWVMaW5rXCJcbiAgICAgICAgICAgIC8qRXNlZ3VpcmUgdHJhbnNhemlvbmUgZGkgc3RhdG8gZGVsbGEgc291cmNlSXNzdWUqL1xuICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlID0gaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpXG4gICAgICAgICAgICBkZWYgbGlua2VkSXNzdWVTdGF0dXMgPSBsaW5rZWRJc3N1ZS5nZXRTdGF0dXMoKVxuICAgICAgICAgICAgZGVmIHRyYW5zaXRpb25JZFxuICAgICAgICAgICAgaWYobGlua2VkSXNzdWVTdGF0dXMubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5vcGVuJ10udG9TdHJpbmcoKSl7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbklkPUFTU0lHTl9UT19TVVBQTElFUlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYodHJhbnNpdGlvbklkPT1BU1NJR05fVE9fU1VQUExJRVIpe1xuICAgICAgICAgICAgICAgIC8vIFByZXBhcmUgb3VyIGlucHV0IGZvciB0aGUgdHJhbnNpdGlvblxuICAgICAgICAgICAgICAgIGRlZiBpc3N1ZUlucHV0UGFyYW1ldGVycyA9IGlzc3VlU2VydmljZS5uZXdJc3N1ZUlucHV0UGFyYW1ldGVycygpXG4gICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7XG4gICAgICAgICAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayh0cnVlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL2RlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpXG4gICAgICAgICAgICAgICAgLy9Db21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gXCJZZXNcIiB9XG4gICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksIFwiWWVzXCIpIFxuICAgICAgICAgICAgICAgIC8vbG9nLndhcm4gXCJpc3N1ZUlucHV0UGFyYW1ldGVyczogXCIgKyBpc3N1ZUlucHV0UGFyYW1ldGVyc1xuICAgICAgICAgICAgICAgIGRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlXG5cbiAgICAgICAgICAgICAgICBkZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLmdldFJlbGV2YW50Q29uZmlnKGxpbmtlZElzc3VlKVxuICAgICAgICAgICAgICAgIGxvZy53YXJuIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcbiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuXG4gICAgICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpXG4gICAgICAgICAgICAgICAgbG9nLndhcm4gXCJVcGRhdGVkIGN1c3RvbWZpZWxkIC0gaXNzdWUgbGlua2F0YVwiXG5cbiAgICAgICAgICAgICAgICAvL2RlZiB2YWxpZGF0aW9uUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycylcbiAgICAgICAgICAgICAgICBpZiAoaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLnRvSW50ZWdlcigpLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgZGVmIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLnRvSW50ZWdlcigpLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpXG4gICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJGYWlsZWQgdG8gdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn1cIilcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlRyYW5zYXppb25lIGZhdHRhIDc5ICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn0sICR7bGlua2VkSXNzdWUuc3RhdHVzfVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLyogUkVTVCBBUEkgcGVyIHB1bGl6aWEgY2FjaGUgaXNzdWUgbGlua2F0YSAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdE1ldGhvZCA9IFwiR0VUXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKlNjcmlwdCBWYXJpYWJsZXMqL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTMyNTM1XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvYXV0b21hdGlvbi9jbGVhckNhY2hlL3RpY2tldGtleS9cIiArIGxpbmtlZElzc3VlLmtleVxuICAgICAgICAgICAgICAgICAgICAgICAgVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICAgICAgICAgICAgICAgICAgICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259XCIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgTGlzdDxJc3N1ZUxpbms+IGFsbE91dElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgICAgIGlmKGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpIT0gbnVsbCAmJiBpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICBsb2cud2FybiBcIklzc3VlIGNvbiByZWxhdGVzT3V0SXNzdWVMaW5rXCJcbiAgICAgICAgICAgIC8qRXNlZ3VpcmUgdHJhbnNhemlvbmUgZGkgc3RhdG8gZGVsbGEgZGVzdGluYXRpb25Jc3N1ZSovXG4gICAgICAgICAgICBkZWYgbGlua2VkSXNzdWUgPSBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKVxuICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlU3RhdHVzID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzKClcbiAgICAgICAgICAgIGRlZiB0cmFuc2l0aW9uSWRcbiAgICAgICAgICAgIGxvZy53YXJuIFwibGlua2VkSXNzdWU6IFwiICsgbGlua2VkSXNzdWVcbiAgICAgICAgICAgIGxvZy53YXJuIFwibGlua2VkSXNzdWVTdGF0dXMubmFtZTogXCIgKyBsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lXG4gICAgICAgICAgICBpZihsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lID09IHByb3BlcnRpZXNbJ3dmLm9wZW4nXS50b1N0cmluZygpKXtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9QVNTSUdOX1RPX1NVUFBMSUVSXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKHRyYW5zaXRpb25JZD09QVNTSUdOX1RPX1NVUFBMSUVSKXtcbiAgICAgICAgICAgICAgICAvLyBQcmVwYXJlIG91ciBpbnB1dCBmb3IgdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKVxuICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGgge1xuICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2sodHJ1ZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy9kZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKVxuICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09IFwiWWVzXCIgfVxuICAgICAgICAgICAgICAgIC8vaXNzdWVJbnB1dFBhcmFtZXRlcnMuYWRkQ3VzdG9tRmllbGRWYWx1ZShmaWVsZENvbmZpZy5nZXRJZCgpLCBcIlllc1wiKSBcblxuICAgICAgICAgICAgICAgIGRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlXG5cbiAgICAgICAgICAgICAgICBkZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLmdldFJlbGV2YW50Q29uZmlnKGxpbmtlZElzc3VlKVxuICAgICAgICAgICAgICAgIGxvZy53YXJuIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcbiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuXG4gICAgICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpXG4gICAgICAgICAgICAgICAgbG9nLndhcm4gXCJVcGRhdGVkIGN1c3RvbWZpZWxkIC0gaXNzdWUgbGlua2F0YVwiXG5cbiAgICAgICAgICAgICAgICBpZiAoaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLnRvSW50ZWdlcigpLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgZGVmIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLnRvSW50ZWdlcigpLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpXG4gICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJGYWlsZWQgdG8gdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn1cIilcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlRyYW5zYXppb25lIGZhdHRhIDEyMiAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c31cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFJFU1QgQVBJIHBlciBwdWxpemlhIGNhY2hlIGlzc3VlIGxpbmthdGEgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RNZXRob2QgPSBcIkdFVFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgLypTY3JpcHQgVmFyaWFibGVzKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vUGVyIHRlc3QgZGEgY29uc29sZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy0zMjUzNVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vY2xlYXJDYWNoZS90aWNrZXRrZXkvXCIgKyBsaW5rZWRJc3N1ZS5rZXlcbiAgICAgICAgICAgICAgICAgICAgICAgIFVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgICAgICAgICAgICAgICAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIkNvdWxkIG5vdCB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfVxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlCmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZQppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQpDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5XQVJOKQoKbG9nLndhcm4gIiR7aXNzdWUua2V5fSBUcmFuc2F6aW9uZSBBU1NJR04gVE8gU1VQUExJRVIgLSBQb3N0IEZ1bmN0aW9uIGNoZWNrIGxpbmtlZElzc3VlcyIKCklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTsKQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpOwpkZWYgYXV0b21hdGljYWxseUNvbmZpcm1lZCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUFzc2lnbmVkJ10gPyBwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5QXNzaWduZWQnXS50b1N0cmluZygpIDogIk9QX0FVVE9NQVRJQ0FMTFlfQVNTSUdORUQiKVswXQpJc3N1ZUluZGV4aW5nU2VydmljZSAJaXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpCgpJc3N1ZSBpc3N1ZSA9IGlzc3VlCi8vUGVyIHRlc3QgZGEgY29uc29sZQovL2lzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKCJPUFVULTI3NiIpCgovKkRFViovCkFTU0lHTl9UT19TVVBQTElFUiA9IHByb3BlcnRpZXNbJ3dmLnRyLmFzc2lnblRvU3VwcGxpZXInXSA/IHByb3BlcnRpZXNbJ3dmLnRyLmFzc2lnblRvU3VwcGxpZXInXSA6IDUxCgovKlBST0QqLwovL0NPTkZJUk1fVE9fQ1VTVE9NRVIKCmRlZiB1c2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpCmRlZiBpc3N1ZVNlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZVNlcnZpY2UoKQoKLypTZSBlc2VndW8gbGEgY29uZmlybSB0byBjdXN0b21lciBzdSB1biB0aWNrZXQgY29uIDEgbyArIHRpY2tldCBjb2xsZWdhdGksIHZlcmlmaWNvIGUgc3Bvc3RvIGluIGF1dG9tYXRpY28gZ2xpIGV2ZW50dWFsaSB0aWNrZXQgY29sbGVnYXRpKi8KbG9nLndhcm4gInZlcmlmaWNvIGUgc3Bvc3RvIGluIGF1dG9tYXRpY28gZ2xpIGV2ZW50dWFsaSB0aWNrZXQgY29sbGVnYXRpIgoKaWYoaXNzdWUuZ2V0SXNzdWVUeXBlKCkuZ2V0TmFtZSgpID09IHByb3BlcnRpZXNbJ2l0Lm5ld0luc3RhbGxhdGlvbiddLnRvU3RyaW5nKCkgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKT09bnVsbCB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLnRvU3RyaW5nKCkuZXF1YWxzKCJObyIpKXsKICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKQogICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykgewogICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7CgogICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgbG9nLndhcm4gIklzc3VlIGNvbiByZWxhdGVzSW5Jc3N1ZUxpbmsiCiAgICAgICAgICAgIC8qRXNlZ3VpcmUgdHJhbnNhemlvbmUgZGkgc3RhdG8gZGVsbGEgc291cmNlSXNzdWUqLwogICAgICAgICAgICBkZWYgbGlua2VkSXNzdWUgPSBpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkKICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlU3RhdHVzID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzKCkKICAgICAgICAgICAgZGVmIHRyYW5zaXRpb25JZAogICAgICAgICAgICBpZihsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lID09IHByb3BlcnRpZXNbJ3dmLm9wZW4nXS50b1N0cmluZygpKXsKICAgICAgICAgICAgICAgIHRyYW5zaXRpb25JZD1BU1NJR05fVE9fU1VQUExJRVIKICAgICAgICAgICAgfQogICAgICAgICAgICBpZih0cmFuc2l0aW9uSWQ9PUFTU0lHTl9UT19TVVBQTElFUil7CiAgICAgICAgICAgICAgICAvLyBQcmVwYXJlIG91ciBpbnB1dCBmb3IgdGhlIHRyYW5zaXRpb24KICAgICAgICAgICAgICAgIGRlZiBpc3N1ZUlucHV0UGFyYW1ldGVycyA9IGlzc3VlU2VydmljZS5uZXdJc3N1ZUlucHV0UGFyYW1ldGVycygpCiAgICAgICAgICAgICAgICBpc3N1ZUlucHV0UGFyYW1ldGVycy53aXRoIHsKICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2sodHJ1ZSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSkKICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgIC8vaXNzdWVJbnB1dFBhcmFtZXRlcnMuYWRkQ3VzdG9tRmllbGRWYWx1ZShmaWVsZENvbmZpZy5nZXRJZCgpLCAiWWVzIikgCiAgICAgICAgICAgICAgICAvL2xvZy53YXJuICJpc3N1ZUlucHV0UGFyYW1ldGVyczogIiArIGlzc3VlSW5wdXRQYXJhbWV0ZXJzCiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlCgogICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNvbmZpcm1lZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgIGxvZy53YXJuICJmaWVsZENvbmZpZzogIiArIGZpZWxkQ29uZmlnCiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoKICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTsKICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICBsb2cud2FybiAiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGEiCgogICAgICAgICAgICAgICAgLy9kZWYgdmFsaWRhdGlvblJlc3VsdCA9IGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpCiAgICAgICAgICAgICAgICBpZiAoaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuaXNWYWxpZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgdHJhbnNpdGlvbgogICAgICAgICAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpKQogICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIlRyYW5zYXppb25lIGZhdHRhIDc5ICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn0sICR7bGlua2VkSXNzdWUuc3RhdHVzfSIpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBMaXN0PElzc3VlTGluaz4gYWxsT3V0SXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldE91dHdhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKQogICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsT3V0SXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHsKICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpOwoKICAgICAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgIGxvZy53YXJuICJJc3N1ZSBjb24gcmVsYXRlc091dElzc3VlTGluayIKICAgICAgICAgICAgLypFc2VndWlyZSB0cmFuc2F6aW9uZSBkaSBzdGF0byBkZWxsYSBkZXN0aW5hdGlvbklzc3VlKi8KICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlID0gaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkKICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlU3RhdHVzID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzKCkKICAgICAgICAgICAgZGVmIHRyYW5zaXRpb25JZAogICAgICAgICAgICBsb2cud2FybiAibGlua2VkSXNzdWU6ICIgKyBsaW5rZWRJc3N1ZQogICAgICAgICAgICBsb2cud2FybiAibGlua2VkSXNzdWVTdGF0dXMubmFtZTogIiArIGxpbmtlZElzc3VlU3RhdHVzLm5hbWUKICAgICAgICAgICAgaWYobGlua2VkSXNzdWVTdGF0dXMubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5vcGVuJ10udG9TdHJpbmcoKSl7CiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9QVNTSUdOX1RPX1NVUFBMSUVSCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKHRyYW5zaXRpb25JZD09QVNTSUdOX1RPX1NVUFBMSUVSKXsKICAgICAgICAgICAgICAgIC8vIFByZXBhcmUgb3VyIGlucHV0IGZvciB0aGUgdHJhbnNpdGlvbgogICAgICAgICAgICAgICAgZGVmIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKCkKICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGggewogICAgICAgICAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayh0cnVlKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy9kZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKQogICAgICAgICAgICAgICAgLy9Db21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gIlllcyIgfQogICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksICJZZXMiKSAKCiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlCgogICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNvbmZpcm1lZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgIGxvZy53YXJuICJmaWVsZENvbmZpZzogIiArIGZpZWxkQ29uZmlnCiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoKICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTsKICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICBsb2cud2FybiAiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGEiCgogICAgICAgICAgICAgICAgaWYgKGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb24KICAgICAgICAgICAgICAgICAgICBkZWYgaXNzdWVSZXN1bHQgPSBpc3N1ZVNlcnZpY2UudHJhbnNpdGlvbih1c2VyLCBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKSkKICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIkZhaWxlZCB0byB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSIpCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJUcmFuc2F6aW9uZSBmYXR0YSAxMjIgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSwgJHtsaW5rZWRJc3N1ZS5zdGF0dXN9IikKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJDb3VsZCBub3QgdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmVycm9yQ29sbGVjdGlvbn0iKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgIH0KICAgIH0KfQ==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </function>
            <function type="class">
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="maxAllowed-integerValue"></arg>
              <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="field">customfield_22758</arg>
              <arg name="scopeType">SAME</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
              <arg name="field2">customfield_22757</arg>
              <arg name="scopeSource-jql"></arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
    <action id="371" name="Recupera Tkt">
      <meta name="opsbar-sequence">10</meta>
      <meta name="jira.description"></meta>
      <meta name="jira.fieldscreen.id"></meta>
      <results>
        <unconditional-result old-status="null" status="null" step="1">
          <post-functions>
            <function type="class">
              <arg name="field.name">resolution</arg>
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
              <arg name="field.value"></arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
    <action id="121" name="Ripianifica Tkt">
      <meta name="opsbar-sequence">30</meta>
      <meta name="jira.description"></meta>
      <meta name="jira.fieldscreen.id"></meta>
      <results>
        <unconditional-result old-status="null" status="null" step="1">
          <post-functions>
            <function type="class">
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="maxAllowed-integerValue">50</arg>
              <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="field">customfield_23245</arg>
              <arg name="scopeType">SAME</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="field7">customfield_22757</arg>
              <arg name="field6">customfield_22756</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
              <arg name="field3">customfield_22613</arg>
              <arg name="field2">customfield_22693</arg>
              <arg name="scopeSource-jql"></arg>
              <arg name="field5">customfield_22758</arg>
              <arg name="field4">customfield_22653</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
    <action id="91" name="Invia Conferma Intervento al Cliente" view="fieldscreen">
      <meta name="opsbar-sequence">10</meta>
      <meta name="jira.description"></meta>
      <meta name="jira.fieldscreen.id">19907</meta>
      <validators>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">9c15d3e06c08c288db8be2a197da43b6cfcf9624</arg>
          <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIFJlcXVpcmVkIEZpZWxkcyAtIG9ubHkgZXJyb3JzLCBubyB3YXJuaW5ncyAtIFNPTE8gU0UgT1BBQV9BVVRPTUFUSUNBTExZX0NPTkZJUk1FRD09bnVsbCBPUiAhPVllcw==</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5cblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5kZWYgQ2F0ZWdvcnkgbG9nID0gQ2F0ZWdvcnkuZ2V0SW5zdGFuY2UoXCJjb20ub25yZXNvbHZlLmppcmEuZ3Jvb3Z5LlBvc3RGdW5jdGlvblwiKVxuIFxuSXNzdWUgaXNzdWUgPSBpc3N1ZVxuXG5kZWYgZXJyb3JzID0gZmFsc2VcbmRlZiB3YXJuaW5ncyA9IGZhbHNlXG5cbmRlZiBzdXBwbGllckxhYmVsID0gcHJvcGVydGllc1snY2Yuc3VwcGxpZXInXSA/IHByb3BlcnRpZXNbJ2NmLnN1cHBsaWVyJ10udG9TdHJpbmcoKSA6IFwiT1BfU1VQUExJRVJcIlxuZGVmIHN1cHBsaWVyMSA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoc3VwcGxpZXJMYWJlbClbMF1cbmRlZiBzdXBwbGllcjIgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHN1cHBsaWVyTGFiZWwpWzFdXG5cbmRlZiBwbGFubmVkRGF0ZSA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YucGxhbm5lZERhdGUnXS50b1N0cmluZygpKVswXVxuZGVmIHBsYW5uZWRIb3VyID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5wbGFubmVkSG91ciddLnRvU3RyaW5nKCkpWzBdXG5kZWYgcGxhbm5lZFRlY2hzID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi50ZWNobmljaWFucyddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiB0cmFuc2l0aW9uQ2hlY2sgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmNoZWNrQW5kQ29uZmlybSddLnRvU3RyaW5nKCkpWzBdXG5sb2cuZGVidWcgXCJ0cmFuc2l0aW9uQ2hlY2s6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spXG5kZWYgYXV0b21hdGljYWxseUNvbmZpcm1lZCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUNvbmZpcm1lZCddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiBlcnJvck1hbmRhdG9yeUZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIHdhcm5pbmdFbXB0eUZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKVxuXG5pZigoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKT09bnVsbCB8fCAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKSkgJiYgIWlzc3VlLmdldElzc3VlVHlwZSgpLmdldE5hbWUoKS5lcXVhbHMocHJvcGVydGllc1snaXQubmV3SW5zdGFsbGF0aW9uJ10pKXtcbiAgICAvL09QX1NVUFBMSUVSXG5cdGlmKChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHN1cHBsaWVyMSk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHN1cHBsaWVyMSkgPT0gXCJcIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHN1cHBsaWVyMSkudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpICYmIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHN1cHBsaWVyMik9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHN1cHBsaWVyMikgPT0gXCJcIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHN1cHBsaWVyMikudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpKXtcblx0XHRlcnJvcnMgPSB0cnVlXG5cdFx0ZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHN1cHBsaWVyTGFiZWwpXG5cdH1cbiAgICAvL09QQUFfUExBTk5FRF9EQVRFXG4gICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbGFubmVkRGF0ZSk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBsYW5uZWREYXRlKSA9PSBcIlwiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocGxhbm5lZERhdGUpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKXtcbiAgICAgICAgZXJyb3JzID0gdHJ1ZVxuICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YucGxhbm5lZERhdGUnXS50b1N0cmluZygpKVxuICAgIH1cbiAgICAvL09QQUFfUExBTk5FRF9IT1VSXG4gICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbGFubmVkSG91cik9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBsYW5uZWRIb3VyKSA9PSBcIlwiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocGxhbm5lZEhvdXIpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKXtcbiAgICAgICAgd2FybmluZ3MgPSB0cnVlXG4gICAgICAgIHdhcm5pbmdFbXB0eUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YucGxhbm5lZEhvdXInXS50b1N0cmluZygpKVxuICAgIH1cbiAgICAvL09QQUFfVEVDSE5JQ0lBTlNcbiAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBsYW5uZWRUZWNocyk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBsYW5uZWRUZWNocykgPT0gXCJcIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBsYW5uZWRUZWNocykudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpe1xuICAgICAgICAvL2Vycm9ycyA9IHRydWVcbiAgICAgICAgd2FybmluZ3M9dHJ1ZVxuICAgICAgICAvL2Vycm9yTWFuZGF0b3J5RmllbGRzLmFkZChcIk9QQUFfVEVDSE5JQ0lBTlNcIilcbiAgICAgICAgd2FybmluZ0VtcHR5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi50ZWNobmljaWFucyddLnRvU3RyaW5nKCkpXG4gICAgfVxuXG4gICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgaWYgKCFlcnJvcnMgJiYgIXdhcm5pbmdzKXtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9ZWxzZXtcbiAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpKXtcbiAgICAgICAgICAgIC8vbG9nLmRlYnVnIFwicmV0dXJuIHRydWUgLSB0cmFuc2l0aW9uQ2hlY2sgPSBZZXNcIlxuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBpZighZXJyb3JzICYmIHdhcm5pbmdzKXtcbiAgICAgICAgICAgICAgICBkZWYgd0xpc3QgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgICAgICAgICAgICAgIGlmKHdhcm5pbmdFbXB0eUZpZWxkcy5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgZGVmIHdMaXN0Q29uZmlybUVtcHR5ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChcIldcIilcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKFwiQ09ORklSTV9FTVBUWV9GSUVMRFNcIilcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZCh3YXJuaW5nRW1wdHlGaWVsZHMpXG5cbiAgICAgICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5KVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG91dHB1dC5hZGQod0xpc3QpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiV1wiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgICAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKFwiV1wiLCBvdXRwdXQudG9TdHJpbmcoKSkgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKGVycm9ycyAmJiAhd2FybmluZ3Mpe1xuICAgICAgICAgICAgICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgICAgICAgICAgICAgaWYoZXJyb3JNYW5kYXRvcnlGaWVsZHMuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgICAgIGRlZiBlTGlzdE1hbmRhdG9yeSA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChcIk1BTkRBVE9SWV9GSUVMRFNcIilcbiAgICAgICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChlcnJvck1hbmRhdG9yeUZpZWxkcylcbiAgICAgICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0TWFuZGF0b3J5KVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgICAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKFwiRVwiLCBvdXRwdXQudG9TdHJpbmcoKSkgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKGVycm9ycyAmJiB3YXJuaW5ncyl7XG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZGVmIHdMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICAgICAgICAgICAgICBpZihlcnJvck1hbmRhdG9yeUZpZWxkcy5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgZGVmIGVMaXN0TWFuZGF0b3J5ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChcIkVcIilcbiAgICAgICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKFwiTUFOREFUT1JZX0ZJRUxEU1wiKVxuICAgICAgICAgICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQobnVsbClcbiAgICAgICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKGVycm9yTWFuZGF0b3J5RmllbGRzKVxuICAgICAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RNYW5kYXRvcnkpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYod2FybmluZ0VtcHR5RmllbGRzLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHkgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKFwiV1wiKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQoXCJDT05GSVJNX0VNUFRZX0ZJRUxEU1wiKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQobnVsbClcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKHdhcm5pbmdFbXB0eUZpZWxkcylcblxuICAgICAgICAgICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHkpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIldFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICAgICAgICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJXRVwiLCBvdXRwdXQudG9TdHJpbmcoKSkgIFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
          <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZQppbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb24KaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3IKaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CmRlZiBDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQogCklzc3VlIGlzc3VlID0gaXNzdWUKCmRlZiBlcnJvcnMgPSBmYWxzZQpkZWYgd2FybmluZ3MgPSBmYWxzZQoKZGVmIHN1cHBsaWVyTGFiZWwgPSBwcm9wZXJ0aWVzWydjZi5zdXBwbGllciddID8gcHJvcGVydGllc1snY2Yuc3VwcGxpZXInXS50b1N0cmluZygpIDogIk9QX1NVUFBMSUVSIgpkZWYgc3VwcGxpZXIgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHN1cHBsaWVyTGFiZWwpWzBdCgpkZWYgcGxhbm5lZERhdGUgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnBsYW5uZWREYXRlJ10udG9TdHJpbmcoKSlbMF0KZGVmIHBsYW5uZWRIb3VyID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5wbGFubmVkSG91ciddLnRvU3RyaW5nKCkpWzBdCmRlZiBwbGFubmVkVGVjaHMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnRlY2huaWNpYW5zJ10udG9TdHJpbmcoKSlbMF0KCmRlZiB0cmFuc2l0aW9uQ2hlY2sgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmNoZWNrQW5kQ29uZmlybSddLnRvU3RyaW5nKCkpWzBdCmxvZy5kZWJ1ZyAidHJhbnNpdGlvbkNoZWNrOiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spCmRlZiBhdXRvbWF0aWNhbGx5Q29uZmlybWVkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q29uZmlybWVkJ10udG9TdHJpbmcoKSlbMF0KCmRlZiBlcnJvck1hbmRhdG9yeUZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKQpkZWYgd2FybmluZ0VtcHR5RmllbGRzID0gbmV3IEFycmF5TGlzdCgpCgppZigoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKT09bnVsbCB8fCAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKS50b1N0cmluZygpLmVxdWFscygiWWVzIikpICYmICFpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5nZXROYW1lKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0Lm5ld0luc3RhbGxhdGlvbiddKSl7CiAgICAvL09QX1NVUFBMSUVSCiAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHN1cHBsaWVyKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc3VwcGxpZXIpID09ICIiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc3VwcGxpZXIpLnRvU3RyaW5nKCkuZXF1YWxzKCIiKSl7CgkJZXJyb3JzID0gdHJ1ZQoJCWVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChzdXBwbGllckxhYmVsKQoJfQogICAgLy9PUEFBX1BMQU5ORURfREFURQogICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbGFubmVkRGF0ZSk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBsYW5uZWREYXRlKSA9PSAiIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBsYW5uZWREYXRlKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgIGVycm9ycyA9IHRydWUKICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YucGxhbm5lZERhdGUnXS50b1N0cmluZygpKQogICAgfQogICAgLy9PUEFBX1BMQU5ORURfSE9VUgogICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbGFubmVkSG91cik9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBsYW5uZWRIb3VyKSA9PSAiIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBsYW5uZWRIb3VyKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgIGVycm9ycyA9IHRydWUKICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YucGxhbm5lZEhvdXInXS50b1N0cmluZygpKQogICAgfQogICAgLy9PUEFBX1RFQ0hOSUNJQU5TCiAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBsYW5uZWRUZWNocyk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBsYW5uZWRUZWNocykgPT0gIiIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbGFubmVkVGVjaHMpLnRvU3RyaW5nKCkuZXF1YWxzKCIiKSl7CiAgICAgICAgLy9lcnJvcnMgPSB0cnVlCiAgICAgICAgd2FybmluZ3M9dHJ1ZQogICAgICAgIC8vZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKCJPUEFBX1RFQ0hOSUNJQU5TIikKICAgICAgICB3YXJuaW5nRW1wdHlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLnRlY2huaWNpYW5zJ10udG9TdHJpbmcoKSkKICAgIH0KCiAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpCgogICAgaWYgKCFlcnJvcnMgJiYgIXdhcm5pbmdzKXsKICAgICAgICByZXR1cm4gdHJ1ZQogICAgfWVsc2V7CiAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKSl7CiAgICAgICAgICAgIC8vbG9nLmRlYnVnICJyZXR1cm4gdHJ1ZSAtIHRyYW5zaXRpb25DaGVjayA9IFllcyIKICAgICAgICAgICAgcmV0dXJuIHRydWUKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgaWYoIWVycm9ycyAmJiB3YXJuaW5ncyl7CiAgICAgICAgICAgICAgICBkZWYgd0xpc3QgPSBuZXcgQXJyYXlMaXN0KCkKCiAgICAgICAgICAgICAgICBpZih3YXJuaW5nRW1wdHlGaWVsZHMuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICAgICAgZGVmIHdMaXN0Q29uZmlybUVtcHR5ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKCJXIikKICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQoIkNPTkZJUk1fRU1QVFlfRklFTERTIikKICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQobnVsbCkKICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQod2FybmluZ0VtcHR5RmllbGRzKQoKICAgICAgICAgICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHkpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgb3V0cHV0LmFkZCh3TGlzdCkKICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3siVyI6IicgKyBvdXRwdXQudG9TdHJpbmcoKSArICcifScpCiAgICAgICAgICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oIlciLCBvdXRwdXQudG9TdHJpbmcoKSkgICAKICAgICAgICAgICAgfQogICAgICAgICAgICBpZihlcnJvcnMgJiYgIXdhcm5pbmdzKXsKICAgICAgICAgICAgICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKQoKICAgICAgICAgICAgICAgIGlmKGVycm9yTWFuZGF0b3J5RmllbGRzLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgICAgIGRlZiBlTGlzdE1hbmRhdG9yeSA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZCgiRSIpCiAgICAgICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKCJNQU5EQVRPUllfRklFTERTIikKICAgICAgICAgICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQobnVsbCkKICAgICAgICAgICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoZXJyb3JNYW5kYXRvcnlGaWVsZHMpCiAgICAgICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0TWFuZGF0b3J5KQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IkUiOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQogICAgICAgICAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJFIiwgb3V0cHV0LnRvU3RyaW5nKCkpICAgCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYoZXJyb3JzICYmIHdhcm5pbmdzKXsKICAgICAgICAgICAgICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICAgICAgZGVmIHdMaXN0ID0gbmV3IEFycmF5TGlzdCgpCgogICAgICAgICAgICAgICAgaWYoZXJyb3JNYW5kYXRvcnlGaWVsZHMuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICAgICAgZGVmIGVMaXN0TWFuZGF0b3J5ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKCJFIikKICAgICAgICAgICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoIk1BTkRBVE9SWV9GSUVMRFMiKQogICAgICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChudWxsKQogICAgICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChlcnJvck1hbmRhdG9yeUZpZWxkcykKICAgICAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RNYW5kYXRvcnkpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYod2FybmluZ0VtcHR5RmllbGRzLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1FbXB0eSA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZCgiVyIpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKCJDT05GSVJNX0VNUFRZX0ZJRUxEUyIpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKG51bGwpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKHdhcm5pbmdFbXB0eUZpZWxkcykKCiAgICAgICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5KQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpCiAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigneyJXRSI6IicgKyBvdXRwdXQudG9TdHJpbmcoKSArICcifScpCiAgICAgICAgICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oIldFIiwgb3V0cHV0LnRvU3RyaW5nKCkpICAKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQ==</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
          <arg name="FIELD_SCRIPT_FILE"></arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">981a59bf-045e-4211-92ff-363ee26d86b2</arg>
          <arg name="FIELD_NOTES">YCFgR2VuZXJhdGUgU04gZm9yIG9sZCB0aWNrZXRz</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuXG5kZWYgU04gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfU0FQX1NFUlZJQ0VfTk9USUZJQ0FUSU9OXCIpWzBdXG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcblxuVVJMIHVybFxuSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvblxuXG5pZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKFNOKSA9PSBudWxsICYmIGlzc3VlLmlzc3VlVHlwZS5uYW1lICE9IFwiUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXRcIil7XG4gICAgcmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuXG4gICAgZGVmIGJvZHlfcmVxID0gW11cbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXG4gICAgICAgIFwic3RhdHVzXCI6IFwiT1BFXCJcbiAgICBdIFxuXG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL3NlcnZpY2Uvbm90aWZpY2F0aW9uXCJcblxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxuICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNOOiBcIiArIGJvZHlfcmVxXG4gICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxuICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgIFxuICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG4gICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcblxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TTi1VUERBVEVcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICB9XG59Iiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">6d00c2e9-590a-4072-837b-afca0657f9fb</arg>
          <arg name="FIELD_NOTES">YCFgU0FQOiB1cGRhdGUgU04gc3RhdHVzICYgY3JlYXRlIFNP</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcblxuZGVmIHNhcFNOID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1NBUF9TRVJWSUNFX05PVElGSUNBVElPTlwiKVswXVxuZGVmIHJlcXVlc3RNZXRob2RcbmRlZiBiYXNlVVJMXG5cblVSTCB1cmxcbkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb25cblxuaWYoaXNzdWUuaXNzdWVUeXBlLm5hbWUgIT0gXCJQbGFubmVkIE1haW50ZW5hbmNlIFRpY2tldFwiICYmIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2FwU04pICE9IG51bGwpe1xuICAgIHJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcblxuICAgIGRlZiBib2R5X3JlcSA9IFtdXG4gICAgYm9keV9yZXEgPSBbXG4gICAgICAgIFwiaXNzdWVLZXlcIjogaXNzdWUua2V5LFxuICAgICAgICBcInN0YXR1c1wiOiBcIlBMQVwiXG4gICAgXSBcblxuICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL2FmdGVyL3NhbGVzL2NyZWF0ZS9zZXJ2aWNlL25vdGlmaWNhdGlvblwiXG5cbiAgICBsb2cuZGVidWcgXCJiYXNlVVJMIFNOOiBcIiArIGJhc2VVUkxcbiAgICBsb2cuZGVidWcgXCJib2R5X3JlcSBTTjogXCIgKyBib2R5X3JlcVxuICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cbiAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICBcbiAgICAgICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxuICAgICAgICBsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXG5cbiAgICAgICAgZGVmIGpzb25TbHVycGVyID0gbmV3IEpzb25TbHVycGVyKClcbiAgICAgICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcbiAgICAgICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICBcbiAgICAgICAgbG9nLmRlYnVnIFwibWVzc2FnZTogXCIgKyAganNvbl9vYmplY3QubWVzc2FnZVxuICAgICAgICBsb2cuZGVidWcgXCJlcnJvcnM6IFwiICsgIGpzb25fb2JqZWN0LmVycm9ycy50b1N0cmluZygpXG5cbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJPUC1TQVAtU04tVVBEQVRFXCIpXG4gICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsganNvbl9vYmplY3QuZXJyb3JzWzBdKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgfWVsc2V7XG4gICAgICAgIC8qKiBTRVJWSUNFIE9SREVSIENSRUFUSU9OICoqL1xuICAgICAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgICAgIFwiaXNzdWVLZXlcIjogaXNzdWUua2V5XG4gICAgICAgIF0gXG4gICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL2FmdGVyL3NhbGVzL2NyZWF0ZS9vci91cGRhdGUvc2VydmljZS9vcmRlclwiXG5cbiAgICAgICAgbG9nLmRlYnVnIFwiYmFzZVVSTCBTTzogXCIgKyBiYXNlVVJMXG4gICAgICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNPOiBcIiArIGJvZHlfcmVxXG4gICAgICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICAgICAgY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxuICAgICAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG5cbiAgICAgICAgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSAmJiAhY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHRcbiAgICBcdFx0bG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICAgICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcbiAgICAgICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJlcnJvcnM6IFwiICsgIGpzb25fb2JqZWN0LmVycm9ycy50b1N0cmluZygpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TTy1DUkVBVEVcIilcbiAgICAgICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsganNvbl9vYmplY3QuZXJyb3JzWzBdKVxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcbiAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgICAgICB9XG4gICAgfVxufVxuICIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">bc182ea265c648453eb3ce3ec1d06e9d7cbe1ec6</arg>
          <arg name="FIELD_NOTES">YCFgT1AgRW1haWwgTm90aWZpY2F0aW9uOiBDT05GSVJNX1RPX0NVU1RPTUVSIC0gU2UgT1BBQV9BVVRPTUFUSUNBTExZX0NPTkZJUk1FRCA9IG51bGwgT1IgIT0gWWVz</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rXG5cbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5XG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5cblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcblxuZGVmIHJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcbmRlZiByZWxhdGVzSW5Jc3N1ZUxpbms9ZmFsc2VcbmRlZiByZWxhdGVzT3V0SXNzdWVMaW5rPWZhbHNlXG5kZWYgbGlua2VkVGlja2V0cz1uZXcgQXJyYXlMaXN0KClcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuSXNzdWVJbmRleGluZ1NlcnZpY2UgXHRpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSlcblxuZGVmIGF1dG9tYXRpY2FsbHlDb25maXJtZWQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlDb25maXJtZWQnXS50b1N0cmluZygpKVswXVxuXG5sb2cuZGVidWcgXCJpc3N1ZTogXCIgKyBpc3N1ZS5rZXkgKyBcIiAtIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCk6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKVxuXG5pZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpPT1udWxsIHx8ICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpKXtcbiAgICBcbiAgICAvKk9QLTEwMzg6IHZlcmlmaWNhIHRpY2tldCBjb2xsZWdhdGkqL1xuICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKVxuICAgIGZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbEluSXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHtcbiAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcblxuICAgICAgICBpZihpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkhPSBudWxsICYmIGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpICYmIChpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkuc3RhdHVzLm5hbWUgPT0gXCJBY2NlcHRlZCBieSBTdXBwbGllclwiIHx8IGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKS5zdGF0dXMubmFtZSA9PSBcIkFjY2VwdGVkIGJ5IFRlY2huaWNpYW5cIikpe1xuICAgICAgICAgICAgcmVsYXRlc0luSXNzdWVMaW5rPXRydWVcbiAgICAgICAgICAgIGxpbmtlZFRpY2tldHMuYWRkKGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKS50b1N0cmluZygpKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiSXNzdWUgY29uIHJlbGF0ZXNJbklzc3VlTGlua1wiXG4gICAgICAgIH1cbiAgICB9XG4gICAgbG9nLmRlYnVnIGxpbmtlZFRpY2tldHNcbiAgICBMaXN0PElzc3VlTGluaz4gYWxsT3V0SXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldE91dHdhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKVxuICAgIGZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbE91dElzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG5cbiAgICAgICAgaWYoaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkhPSBudWxsICYmIGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpICYmIChpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKS5zdGF0dXMubmFtZSA9PSBcIkFjY2VwdGVkIGJ5IFN1cHBsaWVyXCIgfHwgaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkuc3RhdHVzLm5hbWUgPT0gXCJBY2NlcHRlZCBieSBUZWNobmljaWFuXCIpKXtcbiAgICAgICAgICAgIHJlbGF0ZXNPdXRJc3N1ZUxpbms9dHJ1ZVxuICAgICAgICAgICAgbGlua2VkVGlja2V0cy5hZGQoaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkudG9TdHJpbmcoKSlcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIklzc3VlIGNvbiByZWxhdGVzT3V0SXNzdWVMaW5rXCJcbiAgICAgICAgfVxuICAgIH1cbiAgICBsb2cuZGVidWcgbGlua2VkVGlja2V0c1xuICAgIFxuICAgIGRlZiBib2R5X3JlcVxuICAgIGlmKHJlbGF0ZXNJbklzc3VlTGluayB8fCByZWxhdGVzT3V0SXNzdWVMaW5rKXtcbiAgICAgICAgYm9keV9yZXEgPSBbXG4gICAgICAgIFx0XCJ0ZW1wbGF0ZU5hbWVcIjogcHJvcGVydGllc1sndHQuY29uZmlybVRvQ3VzdG9tZXInXS50b1N0cmluZygpLFxuICAgICAgICBcdFwicGVjXCI6IGZhbHNlLFxuICAgICAgICBcdFwiaXNzdWVLZXlcIjogaXNzdWUua2V5LFxuICAgICAgICAgICAgXCJsaW5rZWRUaWNrZXRzXCI6IGxpbmtlZFRpY2tldHNcbiAgICBcdF1cbiAgICB9ZWxzZXtcbiAgICAgICAgYm9keV9yZXEgPSBbXG4gICAgICAgICAgICBcInRlbXBsYXRlTmFtZVwiOiBwcm9wZXJ0aWVzWyd0dC5jb25maXJtVG9DdXN0b21lciddLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBcInBlY1wiOiBmYWxzZSxcbiAgICAgICAgICAgIFwiaXNzdWVLZXlcIjogaXNzdWUua2V5XG4gICAgICAgIF1cbiAgICB9XG4gICAgXG5cbiAgICBkZWYgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvdHJhbnNhY3Rpb24vbWFpbC9zZW5kXCJcbiAgICBVUkwgdXJsXG4gICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuXG4gICAgSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG4gICAgbG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG5cbiAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgbG9nLmRlYnVnIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKVxuICAgIFxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSAmJiAhY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwNFwiKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG5cbiAgICAgICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxuICAgICAgICBsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXG5cbiAgICAgICAgZGVmIGpzb25TbHVycGVyID0gbmV3IEpzb25TbHVycGVyKClcbiAgICAgICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcbiAgICAgICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICBcbiAgICAgICAgbG9nLmRlYnVnIFwibWVzc2FnZTogXCIgKyAganNvbl9vYmplY3QubWVzc2FnZVxuXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiU0VORE1BSUxcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoanNvbl9vYmplY3QubWVzc2FnZSlcbiAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgIH1lbHNle1xuICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcbiAgICAgICAgZGVmIG1pID0gKE11dGFibGVJc3N1ZSkgaXNzdWVcblxuICAgICAgICBkZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKVxuICAgICAgICBsb2cuZGVidWcgXCJmaWVsZENvbmZpZzogXCIgKyBmaWVsZENvbmZpZyArIFwiIGRhIGFnZ2lvcm5hcmUgc3UgaXNzdWUgJHtpc3N1ZX1cIlxuICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIk5vXCIgfVxuICAgICAgICBsb2cuZGVidWcgXCJjZk5ld1ZhbHVlOiBcIiArIGNmTmV3VmFsdWVcbiAgICAgICAgYXV0b21hdGljYWxseUNvbmZpcm1lZC51cGRhdGVWYWx1ZShudWxsLCBpc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcblxuICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7XG4gICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgoaXNzdWUpXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlVwZGF0ZWQgY3VzdG9tZmllbGQgLSBpc3N1ZSBwcmluY2lwYWxlOiAke2lzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCl9XCJcbiAgICB9XG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
          <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmsKCmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CkNhdGVnb3J5IGxvZyA9IENhdGVnb3J5LmdldEluc3RhbmNlKCJjb20ub25yZXNvbHZlLmppcmEuZ3Jvb3Z5LlBvc3RGdW5jdGlvbiIpCmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKQoKZGVmIHJlcXVlc3RNZXRob2QgPSAiUE9TVCI7CmRlZiByZWxhdGVzSW5Jc3N1ZUxpbms9ZmFsc2UKZGVmIHJlbGF0ZXNPdXRJc3N1ZUxpbms9ZmFsc2UKZGVmIGxpbmtlZFRpY2tldHM9bmV3IEFycmF5TGlzdCgpCgpJc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7CkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTsKSXNzdWVJbmRleGluZ1NlcnZpY2UgCWlzc3VlSW5kZXhpbmdTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KElzc3VlSW5kZXhpbmdTZXJ2aWNlKQoKZGVmIGF1dG9tYXRpY2FsbHlDb25maXJtZWQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlDb25maXJtZWQnXS50b1N0cmluZygpKVswXQoKbG9nLmRlYnVnICJpc3N1ZTogIiArIGlzc3VlLmtleSArICIgLSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpOiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKQoKaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKT09bnVsbCB8fCAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKS50b1N0cmluZygpLmVxdWFscygiWWVzIikpewogICAgCiAgICAvKk9QLTEwMzg6IHZlcmlmaWNhIHRpY2tldCBjb2xsZWdhdGkqLwogICAgTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpCiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxJbklzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7CiAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTsKCiAgICAgICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICByZWxhdGVzSW5Jc3N1ZUxpbms9dHJ1ZQogICAgICAgICAgICBsaW5rZWRUaWNrZXRzLmFkZChpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkudG9TdHJpbmcoKSkKICAgICAgICAgICAgbG9nLmRlYnVnICJJc3N1ZSBjb24gcmVsYXRlc0luSXNzdWVMaW5rIgogICAgICAgIH0KICAgIH0KICAgIGxvZy5kZWJ1ZyBsaW5rZWRUaWNrZXRzCiAgICBMaXN0PElzc3VlTGluaz4gYWxsT3V0SXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldE91dHdhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKQogICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsT3V0SXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHsKICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpOwoKICAgICAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgIHJlbGF0ZXNPdXRJc3N1ZUxpbms9dHJ1ZQogICAgICAgICAgICBsaW5rZWRUaWNrZXRzLmFkZChpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKS50b1N0cmluZygpKQogICAgICAgICAgICBsb2cuZGVidWcgIklzc3VlIGNvbiByZWxhdGVzT3V0SXNzdWVMaW5rIgogICAgICAgIH0KICAgIH0KICAgIGxvZy5kZWJ1ZyBsaW5rZWRUaWNrZXRzCiAgICAKICAgIGRlZiBib2R5X3JlcQogICAgaWYocmVsYXRlc0luSXNzdWVMaW5rIHx8IHJlbGF0ZXNPdXRJc3N1ZUxpbmspewogICAgICAgIGJvZHlfcmVxID0gWwogICAgICAgIAkidGVtcGxhdGVOYW1lIjogcHJvcGVydGllc1sndHQuY29uZmlybVRvQ3VzdG9tZXInXS50b1N0cmluZygpLAogICAgICAgIAkicGVjIjogZmFsc2UsCiAgICAgICAgCSJpc3N1ZUtleSI6IGlzc3VlLmtleSwKICAgICAgICAgICAgImxpbmtlZFRpY2tldHMiOiBsaW5rZWRUaWNrZXRzCiAgICAJXQogICAgfWVsc2V7CiAgICAgICAgYm9keV9yZXEgPSBbCiAgICAgICAgICAgICJ0ZW1wbGF0ZU5hbWUiOiBwcm9wZXJ0aWVzWyd0dC5jb25maXJtVG9DdXN0b21lciddLnRvU3RyaW5nKCksCiAgICAgICAgICAgICJwZWMiOiBmYWxzZSwKICAgICAgICAgICAgImlzc3VlS2V5IjogaXNzdWUua2V5CiAgICAgICAgXQogICAgfQogICAgCgogICAgZGVmIGJhc2VVUkwgPSAiaHR0cDovLyIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArICIvb3AvcmVzdC9qaXJhL0FBL3RyYW5zYWN0aW9uL21haWwvc2VuZCIKICAgIFVSTCB1cmwKICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTCkKCiAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpOwogICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpOwogICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLTgiKTsKICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KCJBY2NlcHQiLCAiKi8qIik7CiAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpOwogICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpOwogICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0KICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoIlVURi04IikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9CiAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0KICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpOwoKICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KCkKICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKQogICAgZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpCiAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpCgogICAgbG9nLmRlYnVnIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKQogICAgCiAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoIjIwMCIpKXsKICAgICAgICBsb2cuZGVidWcgInVybDogIiArIHVybAogICAgICAgIGxvZy5kZWJ1ZyAiUmVzcG9uc2VDb2RlOiIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpCiAgICAgICAgbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKCiAgICAgICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dAogICAgICAgIGxvZy5kZWJ1ZyAiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiAiICsgb3V0cHV0TXNnCgogICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpCiAgICAgICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZykKICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIAogICAgICAgIGxvZy5kZWJ1ZyAibWVzc2FnZTogIiArICBqc29uX29iamVjdC5tZXNzYWdlCgogICAgICAgIGVMaXN0RXJyb3JzLmFkZCgiRSIpCiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKCJTRU5ETUFJTCIpCiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgIiAiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKSkKICAgICAgICBlTGlzdEVycm9ycy5hZGQoanNvbl9vYmplY3QubWVzc2FnZSkKICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpCgogICAgICAgIG91dHB1dC5hZGQoZUxpc3QpCiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigneyJFIjoiJyArIG91dHB1dC50b1N0cmluZygpICsgJyJ9JykKICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oIkUiLCBvdXRwdXQudG9TdHJpbmcoKSkKICAgIH1lbHNlewogICAgICAgIGRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKQogICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGlzc3VlCgogICAgICAgIGRlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDb25maXJtZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpCiAgICAgICAgbG9nLmRlYnVnICJmaWVsZENvbmZpZzogIiArIGZpZWxkQ29uZmlnICsgIiBkYSBhZ2dpb3JuYXJlIHN1IGlzc3VlICR7aXNzdWV9IgogICAgICAgIGRlZiBjZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJObyIgfQogICAgICAgIGxvZy5kZWJ1ZyAiY2ZOZXdWYWx1ZTogIiArIGNmTmV3VmFsdWUKICAgICAgICBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoKICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7CiAgICAgICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChpc3N1ZSkKICAgICAgICBsb2cuZGVidWcgIlVwZGF0ZWQgY3VzdG9tZmllbGQgLSBpc3N1ZSBwcmluY2lwYWxlOiAke2lzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCl9IgogICAgfQp9</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
          <arg name="FIELD_SCRIPT_FILE"></arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">8bdd909f-e27d-4d09-9e29-3486f16f1d9e</arg>
          <arg name="FIELD_NOTES">YCFgT1A6IFNldCBPUEFBX0FVVE9NQVRJQ0FMTFlfQ09ORklSTUVEPU5vIGlmIE9QQUFfQVVUT01BVElDQUxMWV9DT05GSVJNRUQ9bnVsbCBPUiAhPVllcw==</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5cbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5XG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5cblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcblxuZGVmIHJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuSXNzdWVJbmRleGluZ1NlcnZpY2UgXHRpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSlcblxuZGVmIGF1dG9tYXRpY2FsbHlDb25maXJtZWQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlDb25maXJtZWQnXS50b1N0cmluZygpKVswXVxuXG5sb2cuZGVidWcgXCJpc3N1ZTogXCIgKyBpc3N1ZS5rZXkgKyBcIiAtIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCk6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKVxuXG5pZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpPT1udWxsIHx8ICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpKXtcbiAgICAgICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXG4gICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGlzc3VlXG5cbiAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNvbmZpcm1lZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSlcbiAgICAgICAgbG9nLmRlYnVnIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWcgKyBcIiBkYSBhZ2dpb3JuYXJlIHN1IGlzc3VlICR7aXNzdWV9XCJcbiAgICAgICAgZGVmIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gXCJOb1wiIH1cbiAgICAgICAgbG9nLmRlYnVnIFwiY2ZOZXdWYWx1ZTogXCIgKyBjZk5ld1ZhbHVlXG4gICAgICAgIGF1dG9tYXRpY2FsbHlDb25maXJtZWQudXBkYXRlVmFsdWUobnVsbCwgaXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG5cbiAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xuICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGlzc3VlKVxuICAgICAgICBsb2cuZGVidWcgXCJVcGRhdGVkIGN1c3RvbWZpZWxkIC0gaXNzdWUgcHJpbmNpcGFsZTogJHtpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpfVwiXG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
          <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlCgppbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeQppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQpDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRykKCmRlZiByZXF1ZXN0TWV0aG9kID0gIlBPU1QiOwoKSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpOwpDdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7Cklzc3VlSW5kZXhpbmdTZXJ2aWNlIAlpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSkKCmRlZiBhdXRvbWF0aWNhbGx5Q29uZmlybWVkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q29uZmlybWVkJ10udG9TdHJpbmcoKSlbMF0KCmxvZy5kZWJ1ZyAiaXNzdWU6ICIgKyBpc3N1ZS5rZXkgKyAiIC0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKTogIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCkKCmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCk9PW51bGwgfHwgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCkudG9TdHJpbmcoKS5lcXVhbHMoIlllcyIpKXsKICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKICAgICAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBpc3N1ZQoKICAgICAgICBkZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKQogICAgICAgIGxvZy5kZWJ1ZyAiZmllbGRDb25maWc6ICIgKyBmaWVsZENvbmZpZyArICIgZGEgYWdnaW9ybmFyZSBzdSBpc3N1ZSAke2lzc3VlfSIKICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiTm8iIH0KICAgICAgICBsb2cuZGVidWcgImNmTmV3VmFsdWU6ICIgKyBjZk5ld1ZhbHVlCiAgICAgICAgYXV0b21hdGljYWxseUNvbmZpcm1lZC51cGRhdGVWYWx1ZShudWxsLCBpc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSkKCiAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpOwogICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgoaXNzdWUpCiAgICAgICAgbG9nLmRlYnVnICJVcGRhdGVkIGN1c3RvbWZpZWxkIC0gaXNzdWUgcHJpbmNpcGFsZTogJHtpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpfSIKfQ==</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
          <arg name="FIELD_SCRIPT_FILE"></arg>
        </validator>
      </validators>
      <results>
        <unconditional-result old-status="null" status="null" step="4">
          <post-functions>
            <function type="class">
              <arg name="field.copyFieldSource1"></arg>
              <arg name="textValue">-1</arg>
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="maxAllowed-integerValue"></arg>
              <arg name="workflowName-textValue">OPAA: PM Task Workflow</arg>
              <arg name="performTransitionAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="scopeType">PARENT</arg>
              <arg name="destination-scopeTarget">SUB_TASK</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitieslinkedtransition-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="integerValue">31</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">ch.beecom.jira.jsu.workflow.function.linkedtransition.LinkedTransitionFunction</arg>
              <arg name="scopeSource-jql"></arg>
              <arg name="status"></arg>
            </function>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">ff6eab36-d82e-47e7-83be-6d09c7964b97</arg>
              <arg name="FIELD_NOTES">YCFgUE0gVGFzazogY2xlYXIgc3ViLXRhc2tzIGNhY2hl</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG5pc3N1ZS5nZXRTdWJUYXNrT2JqZWN0cygpLmVhY2h7XG4gICAgaSAtPiBcbiAgICAvKiBSRVNUIEFQSSBwZXIgcHVsaXppYSBjYWNoZSBpc3N1ZSBsaW5rYXRhICovXG4gICAgcmVxdWVzdE1ldGhvZCA9IFwiR0VUXCI7XG4gICAgLypTY3JpcHQgVmFyaWFibGVzKi9cbiAgICAvL1BlciB0ZXN0IGRhIGNvbnNvbGVcbiAgICAvL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTMyNTM1XCIpXG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vY2xlYXJDYWNoZS90aWNrZXRrZXkvXCIgKyBpLmtleVxuICAgIFVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgfVxufVxuIiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
            <function type="class">
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="append.value"></arg>
              <arg name="maxAllowed-integerValue">50</arg>
              <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="field.value">%%CURRENT_DATETIME%%</arg>
              <arg name="field.name">customfield_22640</arg>
              <arg name="scopeType">SAME</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
              <arg name="scopeSource-jql"></arg>
            </function>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">4dcfdd4f11f7d9ea3966d7c23e98027086a2ee90</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIGxpbmtlZFRpY2tldHMgJiBGYXN0LVRyYW5zYWN0IHRoZW0=</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5sb2cud2FybiBcIiR7aXNzdWUua2V5fSBUcmFuc2F6aW9uZSBDb21wbGV0ZSAtIFBvc3QgRnVuY3Rpb24gY2hlY2sgbGlua2VkSXNzdWVzXCJcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuZGVmIGF1dG9tYXRpY2FsbHlDb25maXJtZWQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlDb25maXJtZWQnXS50b1N0cmluZygpKVswXVxuSXNzdWVJbmRleGluZ1NlcnZpY2UgXHRpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSlcblxuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL2lzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0yNzZcIilcblxuLypERVYqL1xuQ09ORklSTV9UT19DVVNUT01FUj1wcm9wZXJ0aWVzWyd3Zi50ci5jb25maXJtVG9DdXN0b21lciddLnRvSW50ZWdlcigpXG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcblxuLypQUk9EKi9cbi8vQ09ORklSTV9UT19DVVNUT01FUlxuXG5kZWYgdXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuZGVmIGlzc3VlU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlU2VydmljZSgpXG5cbi8qU2UgZXNlZ3VvIGxhIGNvbmZpcm0gdG8gY3VzdG9tZXIgc3UgdW4gdGlja2V0IGNvbiAxIG8gKyB0aWNrZXQgY29sbGVnYXRpLCB2ZXJpZmljbyBlIHNwb3N0byBpbiBhdXRvbWF0aWNvIGdsaSBldmVudHVhbGkgdGlja2V0IGNvbGxlZ2F0aSovXG5sb2cud2FybiBcInZlcmlmaWNvIGUgc3Bvc3RvIGluIGF1dG9tYXRpY28gZ2xpIGV2ZW50dWFsaSB0aWNrZXQgY29sbGVnYXRpXCJcblxuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKT09bnVsbCB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLnRvU3RyaW5nKCkuZXF1YWxzKFwiTm9cIikpe1xuICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKVxuICAgIGZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbEluSXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHtcbiAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcblxuICAgICAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICBsb2cud2FybiBcIklzc3VlIGNvbiByZWxhdGVzSW5Jc3N1ZUxpbmtcIlxuICAgICAgICAgICAgLypFc2VndWlyZSB0cmFuc2F6aW9uZSBkaSBzdGF0byBkZWxsYSBzb3VyY2VJc3N1ZSovXG4gICAgICAgICAgICBkZWYgbGlua2VkSXNzdWUgPSBpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KClcbiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZVN0YXR1cyA9IGxpbmtlZElzc3VlLmdldFN0YXR1cygpXG4gICAgICAgICAgICBkZWYgdHJhbnNpdGlvbklkXG4gICAgICAgICAgICBpZihsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lID09IHByb3BlcnRpZXNbJ3dmLmFjY2VwdGVkQnlTdXBwbGllciddLnRvU3RyaW5nKCkpe1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb25JZD1DT05GSVJNX1RPX0NVU1RPTUVSXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZih0cmFuc2l0aW9uSWQ9PUNPTkZJUk1fVE9fQ1VTVE9NRVIpe1xuICAgICAgICAgICAgICAgIC8vIFByZXBhcmUgb3VyIGlucHV0IGZvciB0aGUgdHJhbnNpdGlvblxuICAgICAgICAgICAgICAgIGRlZiBpc3N1ZUlucHV0UGFyYW1ldGVycyA9IGlzc3VlU2VydmljZS5uZXdJc3N1ZUlucHV0UGFyYW1ldGVycygpXG4gICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7XG4gICAgICAgICAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayh0cnVlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL2RlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpXG4gICAgICAgICAgICAgICAgLy9Db21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gXCJZZXNcIiB9XG4gICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksIFwiWWVzXCIpIFxuICAgICAgICAgICAgICAgIC8vbG9nLndhcm4gXCJpc3N1ZUlucHV0UGFyYW1ldGVyczogXCIgKyBpc3N1ZUlucHV0UGFyYW1ldGVyc1xuICAgICAgICAgICAgICAgIGRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlXG5cbiAgICAgICAgICAgICAgICBkZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLmdldFJlbGV2YW50Q29uZmlnKGxpbmtlZElzc3VlKVxuICAgICAgICAgICAgICAgIGxvZy53YXJuIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcbiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuXG4gICAgICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpXG4gICAgICAgICAgICAgICAgbG9nLndhcm4gXCJVcGRhdGVkIGN1c3RvbWZpZWxkIC0gaXNzdWUgbGlua2F0YVwiXG5cbiAgICAgICAgICAgICAgICAvL2RlZiB2YWxpZGF0aW9uUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycylcbiAgICAgICAgICAgICAgICBpZiAoaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgZGVmIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpXG4gICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJGYWlsZWQgdG8gdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn1cIilcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlRyYW5zYXppb25lIGZhdHRhIDc5ICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn0sICR7bGlua2VkSXNzdWUuc3RhdHVzfVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLyogUkVTVCBBUEkgcGVyIHB1bGl6aWEgY2FjaGUgaXNzdWUgbGlua2F0YSAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdE1ldGhvZCA9IFwiR0VUXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKlNjcmlwdCBWYXJpYWJsZXMqL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTMyNTM1XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvYXV0b21hdGlvbi9jbGVhckNhY2hlL3RpY2tldGtleS9cIiArIGxpbmtlZElzc3VlLmtleVxuICAgICAgICAgICAgICAgICAgICAgICAgVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICAgICAgICAgICAgICAgICAgICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259XCIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgTGlzdDxJc3N1ZUxpbms+IGFsbE91dElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgIGxvZy53YXJuIFwiSXNzdWUgY29uIHJlbGF0ZXNPdXRJc3N1ZUxpbmtcIlxuICAgICAgICAgICAgLypFc2VndWlyZSB0cmFuc2F6aW9uZSBkaSBzdGF0byBkZWxsYSBkZXN0aW5hdGlvbklzc3VlKi9cbiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZSA9IGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpXG4gICAgICAgICAgICBkZWYgbGlua2VkSXNzdWVTdGF0dXMgPSBsaW5rZWRJc3N1ZS5nZXRTdGF0dXMoKVxuICAgICAgICAgICAgZGVmIHRyYW5zaXRpb25JZFxuICAgICAgICAgICAgbG9nLndhcm4gXCJsaW5rZWRJc3N1ZTogXCIgKyBsaW5rZWRJc3N1ZVxuICAgICAgICAgICAgbG9nLndhcm4gXCJsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lOiBcIiArIGxpbmtlZElzc3VlU3RhdHVzLm5hbWVcbiAgICAgICAgICAgIGlmKGxpbmtlZElzc3VlU3RhdHVzLm5hbWUgPT0gcHJvcGVydGllc1snd2YuYWNjZXB0ZWRCeVN1cHBsaWVyJ10udG9TdHJpbmcoKSl7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbklkPUNPTkZJUk1fVE9fQ1VTVE9NRVJcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYodHJhbnNpdGlvbklkPT1DT05GSVJNX1RPX0NVU1RPTUVSKXtcbiAgICAgICAgICAgICAgICAvLyBQcmVwYXJlIG91ciBpbnB1dCBmb3IgdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKVxuICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGgge1xuICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2sodHJ1ZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy9kZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKVxuICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09IFwiWWVzXCIgfVxuICAgICAgICAgICAgICAgIC8vaXNzdWVJbnB1dFBhcmFtZXRlcnMuYWRkQ3VzdG9tRmllbGRWYWx1ZShmaWVsZENvbmZpZy5nZXRJZCgpLCBcIlllc1wiKSBcblxuICAgICAgICAgICAgICAgIGRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlXG5cbiAgICAgICAgICAgICAgICBkZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLmdldFJlbGV2YW50Q29uZmlnKGxpbmtlZElzc3VlKVxuICAgICAgICAgICAgICAgIGxvZy53YXJuIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcbiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuXG4gICAgICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpXG4gICAgICAgICAgICAgICAgbG9nLndhcm4gXCJVcGRhdGVkIGN1c3RvbWZpZWxkIC0gaXNzdWUgbGlua2F0YVwiXG5cbiAgICAgICAgICAgICAgICBpZiAoaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgZGVmIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpXG4gICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJGYWlsZWQgdG8gdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn1cIilcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlRyYW5zYXppb25lIGZhdHRhIDEyMiAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c31cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFJFU1QgQVBJIHBlciBwdWxpemlhIGNhY2hlIGlzc3VlIGxpbmthdGEgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RNZXRob2QgPSBcIkdFVFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgLypTY3JpcHQgVmFyaWFibGVzKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vUGVyIHRlc3QgZGEgY29uc29sZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy0zMjUzNVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vY2xlYXJDYWNoZS90aWNrZXRrZXkvXCIgKyBsaW5rZWRJc3N1ZS5rZXlcbiAgICAgICAgICAgICAgICAgICAgICAgIFVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgICAgICAgICAgICAgICAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIkNvdWxkIG5vdCB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfVxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlCmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZQppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQpDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5XQVJOKQoKbG9nLndhcm4gIiR7aXNzdWUua2V5fSBUcmFuc2F6aW9uZSBDb21wbGV0ZSAtIFBvc3QgRnVuY3Rpb24gY2hlY2sgbGlua2VkSXNzdWVzIgoKSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpOwpDdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7CmRlZiBhdXRvbWF0aWNhbGx5Q29uZmlybWVkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q29uZmlybWVkJ10udG9TdHJpbmcoKSlbMF0KSXNzdWVJbmRleGluZ1NlcnZpY2UgCWlzc3VlSW5kZXhpbmdTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KElzc3VlSW5kZXhpbmdTZXJ2aWNlKQoKSXNzdWUgaXNzdWUgPSBpc3N1ZQovL1BlciB0ZXN0IGRhIGNvbnNvbGUKLy9pc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZSgiT1BVVC0yNzYiKQoKLypERVYqLwpDT05GSVJNX1RPX0NVU1RPTUVSPXByb3BlcnRpZXNbJ3dmLnRyLmNvbmZpcm1Ub0N1c3RvbWVyJ10udG9JbnRlZ2VyKCkKCi8qUFJPRCovCi8vQ09ORklSTV9UT19DVVNUT01FUgoKZGVmIHVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKZGVmIGlzc3VlU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlU2VydmljZSgpCgovKlNlIGVzZWd1byBsYSBjb25maXJtIHRvIGN1c3RvbWVyIHN1IHVuIHRpY2tldCBjb24gMSBvICsgdGlja2V0IGNvbGxlZ2F0aSwgdmVyaWZpY28gZSBzcG9zdG8gaW4gYXV0b21hdGljbyBnbGkgZXZlbnR1YWxpIHRpY2tldCBjb2xsZWdhdGkqLwpsb2cud2FybiAidmVyaWZpY28gZSBzcG9zdG8gaW4gYXV0b21hdGljbyBnbGkgZXZlbnR1YWxpIHRpY2tldCBjb2xsZWdhdGkiCgppZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpPT1udWxsIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCkudG9TdHJpbmcoKS5lcXVhbHMoIk5vIikpewogICAgTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpCiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxJbklzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7CiAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTsKCiAgICAgICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICBsb2cud2FybiAiSXNzdWUgY29uIHJlbGF0ZXNJbklzc3VlTGluayIKICAgICAgICAgICAgLypFc2VndWlyZSB0cmFuc2F6aW9uZSBkaSBzdGF0byBkZWxsYSBzb3VyY2VJc3N1ZSovCiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZSA9IGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKQogICAgICAgICAgICBkZWYgbGlua2VkSXNzdWVTdGF0dXMgPSBsaW5rZWRJc3N1ZS5nZXRTdGF0dXMoKQogICAgICAgICAgICBkZWYgdHJhbnNpdGlvbklkCiAgICAgICAgICAgIGlmKGxpbmtlZElzc3VlU3RhdHVzLm5hbWUgPT0gcHJvcGVydGllc1snd2YuYWNjZXB0ZWRCeVN1cHBsaWVyJ10udG9TdHJpbmcoKSl7CiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9Q09ORklSTV9UT19DVVNUT01FUgogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKHRyYW5zaXRpb25JZD09Q09ORklSTV9UT19DVVNUT01FUil7CiAgICAgICAgICAgICAgICAvLyBQcmVwYXJlIG91ciBpbnB1dCBmb3IgdGhlIHRyYW5zaXRpb24KICAgICAgICAgICAgICAgIGRlZiBpc3N1ZUlucHV0UGFyYW1ldGVycyA9IGlzc3VlU2VydmljZS5uZXdJc3N1ZUlucHV0UGFyYW1ldGVycygpCiAgICAgICAgICAgICAgICBpc3N1ZUlucHV0UGFyYW1ldGVycy53aXRoIHsKICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2sodHJ1ZSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSkKICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgIC8vaXNzdWVJbnB1dFBhcmFtZXRlcnMuYWRkQ3VzdG9tRmllbGRWYWx1ZShmaWVsZENvbmZpZy5nZXRJZCgpLCAiWWVzIikgCiAgICAgICAgICAgICAgICAvL2xvZy53YXJuICJpc3N1ZUlucHV0UGFyYW1ldGVyczogIiArIGlzc3VlSW5wdXRQYXJhbWV0ZXJzCiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlCgogICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNvbmZpcm1lZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgIGxvZy53YXJuICJmaWVsZENvbmZpZzogIiArIGZpZWxkQ29uZmlnCiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoKICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTsKICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICBsb2cud2FybiAiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGEiCgogICAgICAgICAgICAgICAgLy9kZWYgdmFsaWRhdGlvblJlc3VsdCA9IGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpCiAgICAgICAgICAgICAgICBpZiAoaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuaXNWYWxpZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgdHJhbnNpdGlvbgogICAgICAgICAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpKQogICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIlRyYW5zYXppb25lIGZhdHRhIDc5ICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn0sICR7bGlua2VkSXNzdWUuc3RhdHVzfSIpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBMaXN0PElzc3VlTGluaz4gYWxsT3V0SXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldE91dHdhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKQogICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsT3V0SXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHsKICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpOwoKICAgICAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgIGxvZy53YXJuICJJc3N1ZSBjb24gcmVsYXRlc091dElzc3VlTGluayIKICAgICAgICAgICAgLypFc2VndWlyZSB0cmFuc2F6aW9uZSBkaSBzdGF0byBkZWxsYSBkZXN0aW5hdGlvbklzc3VlKi8KICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlID0gaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkKICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlU3RhdHVzID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzKCkKICAgICAgICAgICAgZGVmIHRyYW5zaXRpb25JZAogICAgICAgICAgICBsb2cud2FybiAibGlua2VkSXNzdWU6ICIgKyBsaW5rZWRJc3N1ZQogICAgICAgICAgICBsb2cud2FybiAibGlua2VkSXNzdWVTdGF0dXMubmFtZTogIiArIGxpbmtlZElzc3VlU3RhdHVzLm5hbWUKICAgICAgICAgICAgaWYobGlua2VkSXNzdWVTdGF0dXMubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5hY2NlcHRlZEJ5U3VwcGxpZXInXS50b1N0cmluZygpKXsKICAgICAgICAgICAgICAgIHRyYW5zaXRpb25JZD1DT05GSVJNX1RPX0NVU1RPTUVSCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKHRyYW5zaXRpb25JZD09Q09ORklSTV9UT19DVVNUT01FUil7CiAgICAgICAgICAgICAgICAvLyBQcmVwYXJlIG91ciBpbnB1dCBmb3IgdGhlIHRyYW5zaXRpb24KICAgICAgICAgICAgICAgIGRlZiBpc3N1ZUlucHV0UGFyYW1ldGVycyA9IGlzc3VlU2VydmljZS5uZXdJc3N1ZUlucHV0UGFyYW1ldGVycygpCiAgICAgICAgICAgICAgICBpc3N1ZUlucHV0UGFyYW1ldGVycy53aXRoIHsKICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2sodHJ1ZSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSkKICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgIC8vaXNzdWVJbnB1dFBhcmFtZXRlcnMuYWRkQ3VzdG9tRmllbGRWYWx1ZShmaWVsZENvbmZpZy5nZXRJZCgpLCAiWWVzIikgCgogICAgICAgICAgICAgICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpCiAgICAgICAgICAgICAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBsaW5rZWRJc3N1ZQoKICAgICAgICAgICAgICAgIGRlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDb25maXJtZWQuZ2V0UmVsZXZhbnRDb25maWcobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICBsb2cud2FybiAiZmllbGRDb25maWc6ICIgKyBmaWVsZENvbmZpZwogICAgICAgICAgICAgICAgZGVmIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gIlllcyIgfQogICAgICAgICAgICAgICAgYXV0b21hdGljYWxseUNvbmZpcm1lZC51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSkKCiAgICAgICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7CiAgICAgICAgICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGxpbmtlZElzc3VlKQogICAgICAgICAgICAgICAgbG9nLndhcm4gIlVwZGF0ZWQgY3VzdG9tZmllbGQgLSBpc3N1ZSBsaW5rYXRhIgoKICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgICAgICAgICAgZGVmIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpCiAgICAgICAgICAgICAgICAgICAgaWYgKCEgaXNzdWVSZXN1bHQuaXNWYWxpZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJGYWlsZWQgdG8gdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn0iKQogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiVHJhbnNhemlvbmUgZmF0dGEgMTIyICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn0sICR7bGlua2VkSXNzdWUuc3RhdHVzfSIpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICB9CiAgICB9Cn0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </function>
            <function type="class">
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="maxAllowed-integerValue">50</arg>
              <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="field">customfield_22693</arg>
              <arg name="scopeType">SAME</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
              <arg name="scopeSource-jql"></arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
    <action id="541" name="Assegna a Fornitore e Pianifica" view="fieldscreen">
      <meta name="opsbar-sequence">50</meta>
      <meta name="jira.description"></meta>
      <meta name="jira.fieldscreen.id">20112</meta>
      <restrict-to>
        <conditions type="AND">
          <condition type="class">
            <arg name="FIELD_FUNCTION_ID">a9655845-bd3d-4171-ab08-fdb0c420b5d2</arg>
            <arg name="FIELD_NOTES">YCFgT1BfQVNTRVQgc2hvdWxkIGJlIGV2YWx1YXRlZCAmJiBJc3N1ZSB0eXBlIHNob3VsZCBiZSBOZXcgSW5zdGFsbGF0aW9u</arg>
            <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
            <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJjZlZhbHVlc1snT1BfQVNTRVQnXSAhPSBudWxsICYmIGlzc3VlLmlzc3VlVHlwZS5uYW1lID09ICdOZXcgSW5zdGFsbGF0aW9uJyIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
            <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
          </condition>
          <condition type="class">
            <arg name="FIELD_FUNCTION_ID">e335982b-f860-4bed-a8cc-028022cff1ce</arg>
            <arg name="FIELD_NOTES">YCFgT1BfU1VQUExJRVIgc2hvdWxkIGJlIG5vdCBudWxs</arg>
            <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
            <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5kZWYgdHJvdmF0bz1mYWxzZVxuZm9yIChzIGluIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zdXBwbGllciddLnRvU3RyaW5nKCkpKXtcbiAgICBpZiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzKSAhPSBudWxsKXtcbiAgICAgICAgdHJvdmF0bz10cnVlXG4gICAgfVxufVxucmV0dXJuIHRyb3ZhdG8iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
            <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
          </condition>
        </conditions>
      </restrict-to>
      <validators>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">de52ae8f-3a4f-4dd8-93de-2d990003847d</arg>
          <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIEN1c3RvbWVyIENvbnRyYWN0ICYmIE51bWJlciBvZiB0aWNrZXRzIGluIHRoZSBsYXN0IDYwIGRheXM=</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5pbXBvcnQgamF2YS50ZXh0LkRhdGVGb3JtYXQ7XG5pbXBvcnQgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQ7XG5pbXBvcnQgamF2YS51dGlsLkRhdGU7XG5pbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmpxbC5wYXJzZXIuSnFsUXVlcnlQYXJzZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuYmMuaXNzdWUuc2VhcmNoLlNlYXJjaFNlcnZpY2VcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEudXNlci51dGlsLlVzZXJVdGlsXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLndlYi5iZWFuLlBhZ2VyRmlsdGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuVXNlclV0aWwgdXNlclV0aWwgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRVc2VyVXRpbCgpXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKClcbi8vaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtNDcyODVcIilcblxuZGVmIHdhcm5pbmdzID0gZmFsc2VcbmRlZiBtaXNzaW5nQ29udHJhY3QgPSBmYWxzZVxuZGVmIGV4cGlyZWRDb250cmFjdCA9IGZhbHNlXG5kZWYgZXJyb3JzID0gZmFsc2VcblxuZGVmIGluc3RhbGxhdGlvbiA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXNzZXQnXS50b1N0cmluZygpKVswXVxuZGVmIGF1dG9tYXRpY2FsbHlDb25maXJtZWQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlBc3NpZ25lZCddID8gcHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUFzc2lnbmVkJ10udG9TdHJpbmcoKSA6IFwiT1BfQVVUT01BVElDQUxMWV9BU1NJR05FRFwiKVswXVxuZGVmIHRyYW5zaXRpb25DaGVjayA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY2hlY2tBbmRDb25maXJtJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBleGVjdXRpb25EYXRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfRVhFQ1VUSU9OX0RBVEVcIilbMF1cblxuZGVmIHdhcm5pbmdFbXB0eUZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVycm9yTWFuZGF0b3J5RmllbGRzID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgYXNzZXQsIGFzc2V0S2V5LCBhc3NldE9iamVjdFxuXG5DbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7ICBcbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG5hc3NldCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoaW5zdGFsbGF0aW9uKVxubG9nLmRlYnVnIFwiYXNzZXQ6IFwiICsgYXNzZXRcbmFzc2V0PWFzc2V0LnRvU3RyaW5nKClcbmFzc2V0S2V5ID0gYXNzZXQuc3Vic3RyaW5nKGFzc2V0Lmxhc3RJbmRleE9mKCcoJykrMSxhc3NldC5sYXN0SW5kZXhPZignKScpKVxuYXNzZXRPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oYXNzZXRLZXkpXG5cbi8vT1BfQVNTRVRcbmlmKCFpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0LnBsYW5uZWRNYWludGVuYW5jZSddKSAmJiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKT09bnVsbCB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLnRvU3RyaW5nKCkuZXF1YWxzKFwiTm9cIikpKXtcbiAgICAvL0NoZWNrIENVU1RPTUVSX0NPTlRSQUNUX1JFRiBvbiBPUF9BU1NFVFxuICAgIFxuICAgIFxuICAgIGlmKGFzc2V0T2JqZWN0IT1udWxsKXtcbiAgICAgICAgbG9nLmRlYnVnIFwiYXNzZXRPYmplY3QuZ2V0SWQoKTogXCIgKyBhc3NldE9iamVjdC5nZXRJZCgpXG4gICAgICAgIGRlZiBvYlRyaWFnZVxuICAgICAgICBkZWYgY3VzdG9tZXJDb250cmFjdCwgY3VzdG9tZXJDb250cmFjdEF0dHJcbiAgICAgICAgY3VzdG9tZXJDb250cmFjdEF0dHIgPSBwcm9wZXJ0aWVzWydpb2JqLmhhcmR3YXJlLmNvbnRyYWN0J10gPyBwcm9wZXJ0aWVzWydpb2JqLmhhcmR3YXJlLmNvbnRyYWN0J10udG9TdHJpbmcoKSA6IFwiQ1VTVE9NRVJfQ09OVFJBQ1RfUkVGXCJcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGFzc2V0T2JqZWN0LmdldElkKCksIGN1c3RvbWVyQ29udHJhY3RBdHRyKSl7XG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihhc3NldE9iamVjdC5nZXRJZCgpLCBjdXN0b21lckNvbnRyYWN0QXR0cikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBjdXN0b21lckNvbnRyYWN0ID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuXG4gICAgICAgIGxvZy5kZWJ1ZyBcImN1c3RvbWVyQ29udHJhY3Q6IFwiICsgY3VzdG9tZXJDb250cmFjdFxuXG4gICAgICAgIGlmKGN1c3RvbWVyQ29udHJhY3QgPT0gbnVsbCl7XG4gICAgICAgICAgICB3YXJuaW5ncyA9IHRydWVcbiAgICAgICAgICAgIG1pc3NpbmdDb250cmFjdCA9IHRydWVcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAvL2dldCBcIlFUX1ZBTElEX1RcIiBmb3IgdGhhdCBUZWNobmljaWFuXG4gICAgICAgICAgICBkZWYgY29udHJhY3Q9Y3VzdG9tZXJDb250cmFjdC50b1N0cmluZygpXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJjb250cmFjdDpcIiArIGNvbnRyYWN0XG4gICAgICAgICAgICBkZWYgY29udHJhY3RJZCA9IGNvbnRyYWN0LnN1YnN0cmluZyhjb250cmFjdC5sYXN0SW5kZXhPZignKCcpKzEsY29udHJhY3QubGFzdEluZGV4T2YoJyknKSlcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImNvbnRyYWN0SWQ6XCIgKyBjb250cmFjdElkXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJwcm9wZXJ0aWVzWydpb2JqLmNvbnRyYWN0LnZhbGlkVG8nXTogXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmNvbnRyYWN0LnZhbGlkVG8nXVxuICAgICAgICAgICAgZGVmIGV4cGlyaW5nRGF0ZSwgZXhwaXJpbmdEYXRlQXR0clxuICAgICAgICAgICAgZXhwaXJpbmdEYXRlQXR0ciA9IHByb3BlcnRpZXNbJ2lvYmouY29udHJhY3QudmFsaWRUbyddID8gcHJvcGVydGllc1snaW9iai5jb250cmFjdC52YWxpZFRvJ10udG9TdHJpbmcoKSA6IFwiUVRfVkFMSURfVFwiXG5cbiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdElkLnRvSW50ZWdlcigpLCBjdXN0b21lckNvbnRyYWN0QXR0cikpe1xuICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbnRyYWN0SWQudG9JbnRlZ2VyKCksIGN1c3RvbWVyQ29udHJhY3RBdHRyKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICBjb250cmFjdFJlZiA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgY29udHJhY3RETyA9IGNvbnRyYWN0UmVmLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJjb250cmFjdERPOiBcIiArIGNvbnRyYWN0RE9cbiAgICAgICAgICAgICAgICBjb250cmFjdERPS2V5ID0gY29udHJhY3RETy5zdWJzdHJpbmcoY29udHJhY3RETy5sYXN0SW5kZXhPZignKCcpKzEsY29udHJhY3RETy5sYXN0SW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImNvbnRyYWN0RE9LZXk6IFwiICsgY29udHJhY3RET0tleVxuICAgICAgICAgICAgICAgIGNvbnRyYWN0RE9PYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4ocHJvcGVydGllc1snaXNjaGVtYS5kYm8nXS50b1N0cmluZygpICsgXCItXCIgKyBjb250cmFjdERPS2V5KVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImV4cGlyaW5nRGF0ZUF0dHI6IFwiICsgZXhwaXJpbmdEYXRlQXR0clxuICAgICAgICAgICAgICAgIGV4cGlyaW5nRGF0ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdERPS2V5LnRvSW50ZWdlcigpLCBleHBpcmluZ0RhdGVBdHRyKSA/IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdERPS2V5LnRvSW50ZWdlcigpLCBleHBpcmluZ0RhdGVBdHRyKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudmFsdWVbMF0gYXMgRGF0ZSA6IG51bGxcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZGVmIHRvZGF5c0RhdGVUaW1lID0gKG5ldyBEYXRlKCkpXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJleHBpcmluZ0RhdGU6IFwiICsgZXhwaXJpbmdEYXRlXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJ0b2RheXNEYXRlVGltZTogXCIgKyB0b2RheXNEYXRlVGltZVxuICAgICAgICAgICAgaWYoZXhwaXJpbmdEYXRlIDwgdG9kYXlzRGF0ZVRpbWUpe1xuICAgICAgICAgICAgICAgIHdhcm5pbmdzID0gdHJ1ZVxuICAgICAgICAgICAgICAgIGV4cGlyZWRDb250cmFjdCA9IHRydWVcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG5cbiAgICB9XG4gICAgICAgIFxufVxuXG5kZWYganFsUXVlcnlQYXJzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSnFsUXVlcnlQYXJzZXIpXG5kZWYganFsU2VhcmNoID0gXCJwcm9qZWN0ID0gJ1wiICsgaXNzdWUuZ2V0UHJvamVjdE9iamVjdCgpLm5hbWUgKyBcIicgQU5EIFwiICtcbiAgICBcIihpc3N1ZXR5cGUgbm90IGluIChcXFwiTmV3IEluc3RhbGxhdGlvblxcXCIsIFxcXCJQbGFubmVkIE1haW50ZW5hbmNlIFRpY2tldFxcXCIsIFxcXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcXFwiKSBPUiBpc3N1ZXR5cGUgaW4gKFxcXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcXFwiKSBBTkQgc3RhdHVzID0gRG9uZSkgXCIgK1xuICAgIFwiQU5EIE9QX0FTU0VUID0gXCIgKyBhc3NldEtleSArIFwiIEFORCAoKGlzc3VldHlwZSBub3QgaW4gKFxcXCJOZXcgSW5zdGFsbGF0aW9uXFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0XFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1xcXCIpIEFORCBPUF9FWEVDVVRJT05fREFURSBJUyBOT1QgRU1QVFkgQU5EIE9QX0VYRUNVVElPTl9EQVRFID49IC02MGQpIFwiICtcbiAgICBcIk9SIChpc3N1ZXR5cGUgaW4gKFxcXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcXFwiKSBBTkQgaXNzdWVGdW5jdGlvbiBpbiBzdWJ0YXNrc09mKFxcXCJPUF9FWEVDVVRJT05fREFURSBJUyBOT1QgRU1QVFkgQU5EIE9QX0VYRUNVVElPTl9EQVRFID49IC02MGRcXFwiKSkgT1IgKGlzc3VldHlwZSBub3QgaW4gKFxcXCJOZXcgSW5zdGFsbGF0aW9uXFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0XFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1xcXCIpIEFORCBPUF9FWEVDVVRJT05fREFURSBJUyBFTVBUWSBBTkQgT1BfUExBTk5FRF9EQVRFIElTIE5PVCBFTVBUWSBBTkQgT1BfUExBTk5FRF9EQVRFID49IC02MGQpIFwiICtcbiAgICBcIk9SIChpc3N1ZXR5cGUgaW4gKFxcXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcXFwiKSBBTkQgaXNzdWVGdW5jdGlvbiBpbiBzdWJ0YXNrc09mKFxcXCJPUF9FWEVDVVRJT05fREFURSBJUyBFTVBUWSBBTkQgT1BfUExBTk5FRF9EQVRFIElTIE5PVCBFTVBUWSBBTkQgT1BfUExBTk5FRF9EQVRFID49IC02MGRcXFwiKSkgT1IgKGlzc3VldHlwZSBub3QgaW4gKFxcXCJOZXcgSW5zdGFsbGF0aW9uXFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0XFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1xcXCIpIEFORCBPUF9FWEVDVVRJT05fREFURSBJUyBFTVBUWSBBTkQgT1BfUExBTk5FRF9EQVRFIElTIEVNUFRZIEFORCBPUF9SRVFVRVNURURfREFURSBJUyBOT1QgRU1QVFkgQU5EIE9QX1JFUVVFU1RFRF9EQVRFID49IC02MGQpIFwiICtcbiAgICBcIk9SIChpc3N1ZXR5cGUgaW4gKFxcXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcXFwiKSBBTkQgaXNzdWVGdW5jdGlvbiBpbiBzdWJ0YXNrc09mKFxcXCJPUF9FWEVDVVRJT05fREFURSBJUyBFTVBUWSBBTkQgT1BfUExBTk5FRF9EQVRFIElTIEVNUFRZIEFORCBPUF9SRVFVRVNURURfREFURSBJUyBOT1QgRU1QVFkgQU5EIE9QX1JFUVVFU1RFRF9EQVRFID49IC02MGRcXFwiKSkpXCJcblxuXG5cbmxvZy5kZWJ1ZyBqcWxTZWFyY2hcblxuZGVmIHF1ZXJ5ID0ganFsUXVlcnlQYXJzZXIucGFyc2VRdWVyeShqcWxTZWFyY2gpXG5kZWYgdXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQubG9nZ2VkSW5Vc2VyXG5kZWYgc2VhcmNoU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChTZWFyY2hTZXJ2aWNlKVxuZGVmIHNlYXJjaCA9IHNlYXJjaFNlcnZpY2Uuc2VhcmNoKHVzZXIsIHF1ZXJ5LCBQYWdlckZpbHRlci5nZXRVbmxpbWl0ZWRGaWx0ZXIoKSlcbmRlZiB0a3RMaXN0ID0gXCJcIlxuZGVmIGRhdGUgPSBuZXcgRGF0ZSgpXG5kZWYgd2FybmluZ051bVRrdCA9IGZhbHNlXG5cbmlmKHNlYXJjaC5yZXN1bHRzLnNpemUoKSA+PSAyKSB7XG4gICAgd2FybmluZ051bVRrdCA9IHRydWVcbiAgICB3YXJuaW5ncyA9IHRydWVcbiAgICAvL1ByZXBhcm8gaWwgd2FybmluZyBkYSBtb3N0cmFyZSBhbGwndXRlbnRlIGNvbiBpbCBkZXR0YWdsaW8gZGVsbGUgaXNzdWUgZ2lcdTAwZTAgZXNpc3RlbnRpXG4gICAgZm9yKGkgaW4gc2VhcmNoLnJlc3VsdHMpe1xuICAgICAgICBpZihpLnN0YXR1cy5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKFwiRG9uZVwiKSAmJiBpLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMoXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcIikpe1xuICAgICAgICAgICAgaWYodGt0TGlzdCAhPSBcIlwiKXtcbiAgICAgICAgICAgICAgICB0a3RMaXN0ID0gdGt0TGlzdCArIFwiOyBcIiArIGkuZ2V0UGFyZW50T2JqZWN0KCkua2V5LnRvU3RyaW5nKCkgKyBcIiAoXCIgKyBpLmdldFBhcmVudE9iamVjdCgpLmdldElzc3VlVHlwZSgpLm5hbWUgKyBcIikgXCIgKyBpLnN0YXR1cy5uYW1lLnRvU3RyaW5nKClcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHRrdExpc3QgPSBpLmdldFBhcmVudE9iamVjdCgpLmtleS50b1N0cmluZygpICsgXCIgKFwiICsgaS5nZXRQYXJlbnRPYmplY3QoKS5nZXRJc3N1ZVR5cGUoKS5uYW1lICsgXCIpIFwiICsgaS5zdGF0dXMubmFtZS50b1N0cmluZygpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL3RrdExpc3QgPSB0a3RMaXN0ICsgXCJcXG5cIiArIGkuZ2V0UGFyZW50T2JqZWN0KCkua2V5LnRvU3RyaW5nKCkgKyBcIiAoXCIgKyBpLmdldFBhcmVudE9iamVjdCgpLmdldElzc3VlVHlwZSgpLm5hbWUgKyBcIikgXCIgKyBpLnN0YXR1cy5uYW1lLnRvU3RyaW5nKClcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBpZihpLnN0YXR1cy5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKFwiQ2xvc2VkXCIpICYmICFpLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMoXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcIikpe1xuICAgICAgICAgICAgICAgIGlmKHRrdExpc3QgIT0gXCJcIil7XG4gICAgICAgICAgICAgICAgICAgIHRrdExpc3QgPSB0a3RMaXN0ICsgXCI7IFwiICsgaS5rZXkudG9TdHJpbmcoKSArIFwiIChcIiArIGkuZ2V0SXNzdWVUeXBlKCkubmFtZSArIFwiKSBcIiArIGkuc3RhdHVzLm5hbWUudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICB0a3RMaXN0ID0gaS5rZXkudG9TdHJpbmcoKSArIFwiIChcIiArIGkuZ2V0SXNzdWVUeXBlKCkubmFtZSArIFwiKSBcIiArIGkuc3RhdHVzLm5hbWUudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL3RrdExpc3QgPSB0a3RMaXN0ICsgXCJcXG5cIiArIGkua2V5LnRvU3RyaW5nKCkgKyBcIiAoXCIgKyBpLmdldElzc3VlVHlwZSgpLm5hbWUgKyBcIikgXCIgKyBpLnN0YXR1cy5uYW1lLnRvU3RyaW5nKClcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGlmKHRrdExpc3QgIT0gXCJcIil7XG4gICAgICAgICAgICAgICAgICAgIHRrdExpc3QgPSB0a3RMaXN0ICsgXCI7IFwiICsgaS5rZXkudG9TdHJpbmcoKSArIFwiIChcIiArIGkuZ2V0SXNzdWVUeXBlKCkubmFtZSArIFwiKSBcIiArIGkuc3RhdHVzLm5hbWUudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICB0a3RMaXN0ID0gaS5rZXkudG9TdHJpbmcoKSArIFwiIChcIiArIGkuZ2V0SXNzdWVUeXBlKCkubmFtZSArIFwiKSBcIiArIGkuc3RhdHVzLm5hbWUudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL3RrdExpc3QgPSB0a3RMaXN0ICsgXCJcXG5cIiArIGkua2V5LnRvU3RyaW5nKCkgKyBcIiAoXCIgKyBpLmdldElzc3VlVHlwZSgpLm5hbWUgKyBcIikgXCIgKyBpLnN0YXR1cy5uYW1lLnRvU3RyaW5nKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBsb2cuZGVidWcgXCJ0a3RMaXN0OiBcIiArIHRrdExpc3Rcbn1cblxuZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuXG5pZiAoIXdhcm5pbmdzKXtcbiAgICByZXR1cm4gdHJ1ZVxufWVsc2V7XG4gICAgaWYod2FybmluZ3Mpe1xuICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIikpe1xuICAgICAgICAgICAgLy9sb2cuZGVidWcgXCJyZXR1cm4gdHJ1ZVwiXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuXHRcdFx0ZGVmIHdMaXN0Q29uZmlybUVtcHR5Q29udHJhY3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1NdWx0aXBsZVRrdHMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYobWlzc2luZ0NvbnRyYWN0KXtcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eUNvbnRyYWN0LmFkZChcIldcIilcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eUNvbnRyYWN0LmFkZChcIkNVU1RPTUVSX0NPTlRSQUNUX01JU1NJTkdcIilcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eUNvbnRyYWN0LmFkZChudWxsKVxuXG4gICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5Q29udHJhY3QpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKGV4cGlyZWRDb250cmFjdCl7XG4gICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlDb250cmFjdC5hZGQoXCJXXCIpXG4gICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlDb250cmFjdC5hZGQoXCJDVVNUT01FUl9DT05UUkFDVF9FWFBJUkVEXCIpXG4gICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlDb250cmFjdC5hZGQobnVsbClcblxuICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eUNvbnRyYWN0KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZih3YXJuaW5nTnVtVGt0KXtcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1NdWx0aXBsZVRrdHMuYWRkKFwiV1wiKVxuICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybU11bHRpcGxlVGt0cy5hZGQodGt0TGlzdClcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1NdWx0aXBsZVRrdHMuYWRkKFwiTU9SRV9USEFOXzJfVEtUU19MQVNUXzYwX0RBWVNcIilcbiAgICAgICAgICAgICAgICAvL3dMaXN0Q29uZmlybU11bHRpcGxlVGt0cy5hZGQobnVsbClcblxuICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1NdWx0aXBsZVRrdHMpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiV1wiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpIFxuICAgICAgICB9XG4gICAgfVxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">a80e150a-63e9-41ea-964a-c564139e7864</arg>
          <arg name="FIELD_NOTES">YCFgU0FQOiB1cGRhdGUgU04gc3RhdHVzICYgQ3JlYXRlIFNP</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcblxuZGVmIHNhcFNOID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1NBUF9TRVJWSUNFX05PVElGSUNBVElPTlwiKVswXVxuZGVmIHNhcFNPID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1NBUF9TRVJWSUNFX09SREVSXCIpWzBdXG5cbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG5VUkwgdXJsXG5IdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uXG5cbmlmKGlzc3VlLmlzc3VlVHlwZS5uYW1lICE9IFwiUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXRcIiAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNhcFNOKSAhPSBudWxsKXtcbiAgICByZXF1ZXN0TWV0aG9kID0gXCJQT1NUXCI7XG5cbiAgICBkZWYgYm9keV9yZXEgPSBbXVxuICAgIGJvZHlfcmVxID0gW1xuICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleSxcbiAgICAgICAgXCJzdGF0dXNcIjogXCJQTEFcIlxuICAgIF0gXG5cbiAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS9hZnRlci9zYWxlcy9jcmVhdGUvc2VydmljZS9ub3RpZmljYXRpb25cIlxuXG4gICAgbG9nLmRlYnVnIFwiYmFzZVVSTCBTTjogXCIgKyBiYXNlVVJMXG4gICAgbG9nLmRlYnVnIFwiYm9keV9yZXEgU046IFwiICsgYm9keV9yZXFcbiAgICB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG4gICAgbG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG5cbiAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgXG4gICAgICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHRcbiAgICAgICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xuXG4gICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpXG4gICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgXG4gICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcbiAgICAgICAgbG9nLmRlYnVnIFwiZXJyb3JzOiBcIiArICBqc29uX29iamVjdC5lcnJvcnMudG9TdHJpbmcoKVxuXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtU0FQLVNOLVVQREFURVwiKVxuICAgICAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGpzb25fb2JqZWN0LmVycm9yc1swXS50b1N0cmluZygpKVxuICAgICAgICBcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcbiAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgIH1lbHNle1xuICAgICAgICAvKiogU0VSVklDRSBPUkRFUiBDUkVBVElPTiAqKi9cbiAgICAgICAgbG9nLmRlYnVnIFwiaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzYXBTTyk6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzYXBTTylcbiAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzYXBTTykgPT0gbnVsbCl7XG4gICAgICAgICAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleVxuICAgICAgICAgICAgXSBcbiAgICAgICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL2FmdGVyL3NhbGVzL2NyZWF0ZS9vci91cGRhdGUvc2VydmljZS9vcmRlclwiXG5cbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU086IFwiICsgYmFzZVVSTFxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiYm9keV9yZXEgU086IFwiICsgYm9keV9yZXFcbiAgICAgICAgICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICAgICAgICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICAgICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG4gICAgICAgICAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICAgICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgICAgICAgICBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDFcIikgJiYgIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuXG4gICAgICAgICAgICAgICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgICAgICAgICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgICAgICAgICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcbiAgICAgICAgICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJlcnJvcnM6IFwiICsgIGpzb25fb2JqZWN0LmVycm9ycy50b1N0cmluZygpXG5cbiAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtU0FQLVNPLUNSRUFURVwiKVxuICAgICAgICAgICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsganNvbl9vYmplY3QuZXJyb3JzWzBdKVxuICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgICAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbiAiLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="disabled">false</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">5e9c9e99-6d82-4e7b-bcbd-a39b8cf84bb5</arg>
          <arg name="FIELD_NOTES">YCFgT1AgRW1haWwgTm90aWZpY2F0aW9uOiBBU1NJR05fVE9fU1VQUExJRVI=</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbmRlZiByZXF1ZXN0TWV0aG9kID0gXCJQT1NUXCI7XG5kZWYgcmVsYXRlc0luSXNzdWVMaW5rPWZhbHNlXG5kZWYgcmVsYXRlc091dElzc3VlTGluaz1mYWxzZVxuZGVmIGxpbmtlZFRpY2tldHM9bmV3IEFycmF5TGlzdCgpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiBhdXRvbWF0aWNhbGx5Q29uZmlybWVkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5QXNzaWduZWQnXSA/IHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlBc3NpZ25lZCddLnRvU3RyaW5nKCkgOiBcIk9QX0FVVE9NQVRJQ0FMTFlfQVNTSUdORURcIilbMF1cblxuLyp2ZXJpZmljYSB0aWNrZXQgY29sbGVnYXRpKi9cbkxpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKVxuZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG5cbiAgICBpZihpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkhPSBudWxsICYmIGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpICYmIChpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkuc3RhdHVzLm5hbWUgPT0gXCJPcGVuXCIgfHwgaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpLnN0YXR1cy5uYW1lID09IFwiUmVxdWlyZWRcIikpe1xuICAgICAgICByZWxhdGVzSW5Jc3N1ZUxpbms9dHJ1ZVxuICAgICAgICBsaW5rZWRUaWNrZXRzLmFkZChpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkudG9TdHJpbmcoKSlcbiAgICAgICAgbG9nLmRlYnVnIFwiSXNzdWUgY29uIHJlbGF0ZXNJbklzc3VlTGlua1wiXG4gICAgfVxufVxuTGlzdDxJc3N1ZUxpbms+IGFsbE91dElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbmZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbE91dElzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcblxuICAgIGlmKGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpIT0gbnVsbCAmJiBpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSAmJiAoaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkuc3RhdHVzLm5hbWUgPT0gXCJPcGVuXCIgfHwgaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkuc3RhdHVzLm5hbWUgPT0gXCJSZXF1aXJlZFwiKSl7XG4gICAgICAgIHJlbGF0ZXNPdXRJc3N1ZUxpbms9dHJ1ZVxuICAgICAgICBsaW5rZWRUaWNrZXRzLmFkZChpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKS50b1N0cmluZygpKVxuICAgICAgICBsb2cuZGVidWcgXCJJc3N1ZSBjb24gcmVsYXRlc091dElzc3VlTGlua1wiXG4gICAgfVxufVxuXG5kZWYgYm9keV9yZXFcbmlmKHJlbGF0ZXNJbklzc3VlTGluayB8fCByZWxhdGVzT3V0SXNzdWVMaW5rKXtcbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJ0ZW1wbGF0ZU5hbWVcIjogcHJvcGVydGllc1sndHQuYXNzaWduVG9TdXBwbGllciddLnRvU3RyaW5nKCksXG4gICAgICAgIFwicGVjXCI6IGZhbHNlLFxuICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleSxcbiAgICAgICAgXCJsaW5rZWRUaWNrZXRzXCI6IGxpbmtlZFRpY2tldHNcbiAgICBdXG59ZWxzZXtcbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJ0ZW1wbGF0ZU5hbWVcIjogcHJvcGVydGllc1sndHQuYXNzaWduVG9TdXBwbGllciddLnRvU3RyaW5nKCksXG4gICAgICAgIFwicGVjXCI6IGZhbHNlLFxuICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleVxuICAgIF1cbn1cblxuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKT09bnVsbCB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLnRvU3RyaW5nKCkuZXF1YWxzKFwiTm9cIikpe1xuICAgIGRlZiBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS90cmFuc2FjdGlvbi9tYWlsL3NlbmRcIlxuICAgIFVSTCB1cmxcbiAgICB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG5cbiAgICBsb2cuZGVidWcgXCJiYXNlVVJMOiBcIiArIGJhc2VVUkxcbiAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cbiAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cdGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICBcbiAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikgJiYgIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDRcIikpe1xuICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIlNFTkRNQUlMXCIpXG4gICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKSlcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcbiAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgIH1cbn1cbiIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="disabled">false</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
      </validators>
      <results>
        <unconditional-result old-status="null" status="null" step="4">
          <post-functions>
            <function type="class">
              <arg name="field.copyFieldSource1"></arg>
              <arg name="textValue">-1</arg>
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="maxAllowed-integerValue"></arg>
              <arg name="workflowName-textValue">OPAA: PM Task Workflow</arg>
              <arg name="performTransitionAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="scopeType">PARENT</arg>
              <arg name="destination-scopeTarget">SUB_TASK</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitieslinkedtransition-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="integerValue">31</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">ch.beecom.jira.jsu.workflow.function.linkedtransition.LinkedTransitionFunction</arg>
              <arg name="scopeSource-jql"></arg>
              <arg name="status"></arg>
            </function>
            <function type="class">
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdateissuestatus-function</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowcreatecomment-function</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowgeneratechangehistory-function</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowreindexissue-function</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
            <function type="class">
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="append.value"></arg>
              <arg name="maxAllowed-integerValue"></arg>
              <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="field.value">%%CURRENT_DATETIME%%</arg>
              <arg name="field.name">customfield_22639</arg>
              <arg name="scopeType">SAME</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
              <arg name="scopeSource-jql"></arg>
            </function>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">0db4b388-06a4-49d8-ace8-c098c9d1a5c2</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IE5ldyBJbnN0YWxsYXRpb24gLSBDaGVjayBsaW5rZWRUaWNrZXRzICYgRmFzdC1UcmFuc2FjdCB0aGVt</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5sb2cud2FybiBcIiR7aXNzdWUua2V5fSBUcmFuc2F6aW9uZSBBU1NJR04gVE8gU1VQUExJRVIgLSBQb3N0IEZ1bmN0aW9uIGNoZWNrIGxpbmtlZElzc3Vlc1wiXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiBhdXRvbWF0aWNhbGx5Q29uZmlybWVkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5QXNzaWduZWQnXSA/IHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlBc3NpZ25lZCddLnRvU3RyaW5nKCkgOiBcIk9QX0FVVE9NQVRJQ0FMTFlfQVNTSUdORURcIilbMF1cbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5cbi8vUGVyIHRlc3QgZGEgY29uc29sZVxuLy9pc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIk9QVVQtMjc2XCIpXG5cbi8qUFJPRCovXG5BU1NJR05fVE9fU1VQUExJRVIgPSBwcm9wZXJ0aWVzWyd3Zi50ci5hc3NpZ25Ub1N1cHBsaWVyQW5kU2NoZWR1bGUnXSA/IHByb3BlcnRpZXNbJ3dmLnRyLmFzc2lnblRvU3VwcGxpZXJBbmRTY2hlZHVsZSddLnRvSW50ZWdlcigpIDogNTQxXG5cbmRlZiB1c2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXG5kZWYgaXNzdWVTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVTZXJ2aWNlKClcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG4vKlNlIGVzZWd1byBsYSBjb25maXJtIHRvIGN1c3RvbWVyIHN1IHVuIHRpY2tldCBjb24gMSBvICsgdGlja2V0IGNvbGxlZ2F0aSwgdmVyaWZpY28gZSBzcG9zdG8gaW4gYXV0b21hdGljbyBnbGkgZXZlbnR1YWxpIHRpY2tldCBjb2xsZWdhdGkqL1xubG9nLndhcm4gXCJ2ZXJpZmljbyBlIHNwb3N0byBpbiBhdXRvbWF0aWNvIGdsaSBldmVudHVhbGkgdGlja2V0IGNvbGxlZ2F0aVwiXG5sb2cuZGVidWcgaXNzdWUuZ2V0SXNzdWVUeXBlKCkuZ2V0TmFtZSgpXG5sb2cuZGVidWcgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKVxuaWYoaXNzdWUuZ2V0SXNzdWVUeXBlKCkuZ2V0TmFtZSgpID09IHByb3BlcnRpZXNbJ2l0Lm5ld0luc3RhbGxhdGlvbiddLnRvU3RyaW5nKCkgJiYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCk9PW51bGwgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKS50b1N0cmluZygpLmVxdWFscyhcIk5vXCIpKSl7XG4gICAgTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG4gICAgbG9nLmRlYnVnIFwiYWxsSW5Jc3N1ZUxpbms6IFwiICsgYWxsSW5Jc3N1ZUxpbmtcbiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxJbklzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG5cbiAgICAgICAgaWYoaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpIT0gbnVsbCAmJiBpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICBsb2cud2FybiBcIklzc3VlIGNvbiByZWxhdGVzSW5Jc3N1ZUxpbmtcIlxuICAgICAgICAgICAgLypFc2VndWlyZSB0cmFuc2F6aW9uZSBkaSBzdGF0byBkZWxsYSBzb3VyY2VJc3N1ZSovXG4gICAgICAgICAgICBkZWYgbGlua2VkSXNzdWUgPSBpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KClcbiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZVN0YXR1cyA9IGxpbmtlZElzc3VlLmdldFN0YXR1cygpXG4gICAgICAgICAgICBkZWYgdHJhbnNpdGlvbklkXG4gICAgICAgICAgICBpZihsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lID09IHByb3BlcnRpZXNbJ3dmLm9wZW4nXS50b1N0cmluZygpKXtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9QVNTSUdOX1RPX1NVUFBMSUVSXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZih0cmFuc2l0aW9uSWQ9PUFTU0lHTl9UT19TVVBQTElFUil7XG4gICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uXG4gICAgICAgICAgICAgICAgZGVmIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKClcbiAgICAgICAgICAgICAgICBpc3N1ZUlucHV0UGFyYW1ldGVycy53aXRoIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0U2tpcFNjcmVlbkNoZWNrKHRydWUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSlcbiAgICAgICAgICAgICAgICAvL0NvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICAgICAgICAgICAgICAvL2lzc3VlSW5wdXRQYXJhbWV0ZXJzLmFkZEN1c3RvbUZpZWxkVmFsdWUoZmllbGRDb25maWcuZ2V0SWQoKSwgXCJZZXNcIikgXG4gICAgICAgICAgICAgICAgLy9sb2cud2FybiBcImlzc3VlSW5wdXRQYXJhbWV0ZXJzOiBcIiArIGlzc3VlSW5wdXRQYXJhbWV0ZXJzXG4gICAgICAgICAgICAgICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXG4gICAgICAgICAgICAgICAgZGVmIG1pID0gKE11dGFibGVJc3N1ZSkgbGlua2VkSXNzdWVcblxuICAgICAgICAgICAgICAgIGRlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDb25maXJtZWQuZ2V0UmVsZXZhbnRDb25maWcobGlua2VkSXNzdWUpXG4gICAgICAgICAgICAgICAgbG9nLndhcm4gXCJmaWVsZENvbmZpZzogXCIgKyBmaWVsZENvbmZpZ1xuICAgICAgICAgICAgICAgIGRlZiBjZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09IFwiWWVzXCIgfVxuICAgICAgICAgICAgICAgIGF1dG9tYXRpY2FsbHlDb25maXJtZWQudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG5cbiAgICAgICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChsaW5rZWRJc3N1ZSlcbiAgICAgICAgICAgICAgICBsb2cud2FybiBcIlVwZGF0ZWQgY3VzdG9tZmllbGQgLSBpc3N1ZSBsaW5rYXRhXCJcblxuICAgICAgICAgICAgICAgIC8vZGVmIHZhbGlkYXRpb25SZXN1bHQgPSBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKVxuICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgdHJhbnNpdGlvblxuICAgICAgICAgICAgICAgICAgICBkZWYgaXNzdWVSZXN1bHQgPSBpc3N1ZVNlcnZpY2UudHJhbnNpdGlvbih1c2VyLCBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEgaXNzdWVSZXN1bHQuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIkZhaWxlZCB0byB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiVHJhbnNhemlvbmUgZmF0dGEgJHtBU1NJR05fVE9fU1VQUExJRVJ9ICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn0sICR7bGlua2VkSXNzdWUuc3RhdHVzfVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLyogUkVTVCBBUEkgcGVyIHB1bGl6aWEgY2FjaGUgaXNzdWUgbGlua2VkICovXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0TWV0aG9kID0gXCJHRVRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qU2NyaXB0IFZhcmlhYmxlcyovXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1BlciB0ZXN0IGRhIGNvbnNvbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMzI1MzVcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL2NsZWFyQ2FjaGUvdGlja2V0a2V5L1wiICsgbGlua2VkSXNzdWUua2V5XG4gICAgICAgICAgICAgICAgICAgICAgICBVUkwgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgICAgICAgICAgICAgICAgICAgICAgSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJDb3VsZCBub3QgdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmVycm9yQ29sbGVjdGlvbn1cIilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBMaXN0PElzc3VlTGluaz4gYWxsT3V0SXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldE91dHdhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKVxuICAgIGxvZy5kZWJ1ZyBcImFsbE91dElzc3VlTGluazogXCIgKyBhbGxPdXRJc3N1ZUxpbmtcbiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgICAgIGlmKGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpIT0gbnVsbCAmJiBpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICBsb2cud2FybiBcIklzc3VlIGNvbiByZWxhdGVzT3V0SXNzdWVMaW5rXCJcbiAgICAgICAgICAgIC8qRXNlZ3VpcmUgdHJhbnNhemlvbmUgZGkgc3RhdG8gZGVsbGEgZGVzdGluYXRpb25Jc3N1ZSovXG4gICAgICAgICAgICBkZWYgbGlua2VkSXNzdWUgPSBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKVxuICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlU3RhdHVzID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzKClcbiAgICAgICAgICAgIGRlZiB0cmFuc2l0aW9uSWRcbiAgICAgICAgICAgIGxvZy53YXJuIFwibGlua2VkSXNzdWU6IFwiICsgbGlua2VkSXNzdWVcbiAgICAgICAgICAgIGxvZy53YXJuIFwibGlua2VkSXNzdWVTdGF0dXMubmFtZTogXCIgKyBsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lXG4gICAgICAgICAgICBpZihsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lID09IHByb3BlcnRpZXNbJ3dmLm9wZW4nXS50b1N0cmluZygpKXtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9QVNTSUdOX1RPX1NVUFBMSUVSXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKHRyYW5zaXRpb25JZD09QVNTSUdOX1RPX1NVUFBMSUVSKXtcbiAgICAgICAgICAgICAgICAvLyBQcmVwYXJlIG91ciBpbnB1dCBmb3IgdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKVxuICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGgge1xuICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2sodHJ1ZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy9kZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKVxuICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09IFwiWWVzXCIgfVxuICAgICAgICAgICAgICAgIC8vaXNzdWVJbnB1dFBhcmFtZXRlcnMuYWRkQ3VzdG9tRmllbGRWYWx1ZShmaWVsZENvbmZpZy5nZXRJZCgpLCBcIlllc1wiKSBcblxuICAgICAgICAgICAgICAgIGRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlXG5cbiAgICAgICAgICAgICAgICBkZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLmdldFJlbGV2YW50Q29uZmlnKGxpbmtlZElzc3VlKVxuICAgICAgICAgICAgICAgIGxvZy53YXJuIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcbiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuXG4gICAgICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpXG4gICAgICAgICAgICAgICAgbG9nLndhcm4gXCJVcGRhdGVkIGN1c3RvbWZpZWxkIC0gaXNzdWUgbGlua2F0YVwiXG5cbiAgICAgICAgICAgICAgICBpZiAoaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgZGVmIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpXG4gICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJGYWlsZWQgdG8gdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn1cIilcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlRyYW5zYXppb25lIGZhdHRhICR7QVNTSUdOX1RPX1NVUFBMSUVSfSAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c31cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFJFU1QgQVBJIHBlciBwdWxpemlhIGNhY2hlIGlzc3VlIGxpbmtlZCAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdE1ldGhvZCA9IFwiR0VUXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKlNjcmlwdCBWYXJpYWJsZXMqL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTMyNTM1XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvYXV0b21hdGlvbi9jbGVhckNhY2hlL3RpY2tldGtleS9cIiArIGxpbmtlZElzc3VlLmtleVxuICAgICAgICAgICAgICAgICAgICAgICAgVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICAgICAgICAgICAgICAgICAgICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259XCIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICB9XG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
            </function>
            <function type="class">
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="maxAllowed-integerValue"></arg>
              <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="field">customfield_22758</arg>
              <arg name="scopeType">SAME</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
              <arg name="field2">customfield_22757</arg>
              <arg name="scopeSource-jql"></arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
    <action id="861" name="Assegna a tecnici interni" view="fieldscreen">
      <meta name="opsbar-sequence">50</meta>
      <meta name="jira.description"></meta>
      <meta name="jira.fieldscreen.id">20402</meta>
      <restrict-to>
        <conditions>
          <condition type="class">
            <arg name="FIELD_FUNCTION_ID">67d21477-5b8c-45a3-88f8-a691f3cb035f</arg>
            <arg name="FIELD_NOTES">YCFgT1BfQVNTRVQgc2hvdWxkIGJlIGV2YWx1YXRlZA==</arg>
            <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
            <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJjZlZhbHVlc1snT1BfQVNTRVQnXSAhPSBudWxsIHx8IGlzc3VlLmlzc3VlVHlwZS5uYW1lID09ICdQbGFubmVkIE1haW50ZW5hbmNlIFRpY2tldCciLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
            <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
          </condition>
        </conditions>
      </restrict-to>
      <validators>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">10786a5c-e2b3-4bea-a0d1-46f9012a73e2</arg>
          <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIEN1c3RvbWVyIENvbnRyYWN0ICYmIE51bWJlciBvZiB0aWNrZXRzIGluIHRoZSBsYXN0IDYwIGRheXM=</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5pbXBvcnQgamF2YS50ZXh0LkRhdGVGb3JtYXQ7XG5pbXBvcnQgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQ7XG5pbXBvcnQgamF2YS51dGlsLkRhdGU7XG5pbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmpxbC5wYXJzZXIuSnFsUXVlcnlQYXJzZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuYmMuaXNzdWUuc2VhcmNoLlNlYXJjaFNlcnZpY2VcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEudXNlci51dGlsLlVzZXJVdGlsXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLndlYi5iZWFuLlBhZ2VyRmlsdGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuVXNlclV0aWwgdXNlclV0aWwgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRVc2VyVXRpbCgpXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKClcbi8vaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtNDcyODVcIilcblxuZGVmIHdhcm5pbmdzID0gZmFsc2VcbmRlZiBtaXNzaW5nQ29udHJhY3QgPSBmYWxzZVxuZGVmIGV4cGlyZWRDb250cmFjdCA9IGZhbHNlXG5kZWYgZXJyb3JzID0gZmFsc2VcblxuZGVmIGluc3RhbGxhdGlvbiA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXNzZXQnXS50b1N0cmluZygpKVswXVxuZGVmIGF1dG9tYXRpY2FsbHlDb25maXJtZWQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlBc3NpZ25lZCddID8gcHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUFzc2lnbmVkJ10udG9TdHJpbmcoKSA6IFwiT1BfQVVUT01BVElDQUxMWV9BU1NJR05FRFwiKVswXVxuZGVmIHRyYW5zaXRpb25DaGVjayA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY2hlY2tBbmRDb25maXJtJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBleGVjdXRpb25EYXRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfRVhFQ1VUSU9OX0RBVEVcIilbMF1cblxuZGVmIHdhcm5pbmdFbXB0eUZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVycm9yTWFuZGF0b3J5RmllbGRzID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgYXNzZXQsIGFzc2V0S2V5LCBhc3NldE9iamVjdFxuXG5DbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7ICBcbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG5hc3NldCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoaW5zdGFsbGF0aW9uKVxubG9nLmRlYnVnIFwiYXNzZXQ6IFwiICsgYXNzZXRcbmFzc2V0PWFzc2V0LnRvU3RyaW5nKClcbmFzc2V0S2V5ID0gYXNzZXQuc3Vic3RyaW5nKGFzc2V0Lmxhc3RJbmRleE9mKCcoJykrMSxhc3NldC5sYXN0SW5kZXhPZignKScpKVxuYXNzZXRPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oYXNzZXRLZXkpXG5cbi8vT1BfQVNTRVRcbmlmKCFpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0LnBsYW5uZWRNYWludGVuYW5jZSddKSAmJiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKT09bnVsbCB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLnRvU3RyaW5nKCkuZXF1YWxzKFwiTm9cIikpKXtcbiAgICAvL0NoZWNrIENVU1RPTUVSX0NPTlRSQUNUX1JFRiBvbiBPUF9BU1NFVFxuICAgIFxuICAgIFxuICAgIGlmKGFzc2V0T2JqZWN0IT1udWxsKXtcbiAgICAgICAgbG9nLmRlYnVnIFwiYXNzZXRPYmplY3QuZ2V0SWQoKTogXCIgKyBhc3NldE9iamVjdC5nZXRJZCgpXG4gICAgICAgIGRlZiBvYlRyaWFnZVxuICAgICAgICBkZWYgY3VzdG9tZXJDb250cmFjdCwgY3VzdG9tZXJDb250cmFjdEF0dHJcbiAgICAgICAgY3VzdG9tZXJDb250cmFjdEF0dHIgPSBwcm9wZXJ0aWVzWydpb2JqLmhhcmR3YXJlLmNvbnRyYWN0J10gPyBwcm9wZXJ0aWVzWydpb2JqLmhhcmR3YXJlLmNvbnRyYWN0J10udG9TdHJpbmcoKSA6IFwiQ1VTVE9NRVJfQ09OVFJBQ1RfUkVGXCJcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGFzc2V0T2JqZWN0LmdldElkKCksIGN1c3RvbWVyQ29udHJhY3RBdHRyKSl7XG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihhc3NldE9iamVjdC5nZXRJZCgpLCBjdXN0b21lckNvbnRyYWN0QXR0cikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBjdXN0b21lckNvbnRyYWN0ID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuXG4gICAgICAgIGxvZy5kZWJ1ZyBcImN1c3RvbWVyQ29udHJhY3Q6IFwiICsgY3VzdG9tZXJDb250cmFjdFxuXG4gICAgICAgIGlmKGN1c3RvbWVyQ29udHJhY3QgPT0gbnVsbCl7XG4gICAgICAgICAgICB3YXJuaW5ncyA9IHRydWVcbiAgICAgICAgICAgIG1pc3NpbmdDb250cmFjdCA9IHRydWVcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAvL2dldCBcIlFUX1ZBTElEX1RcIiBmb3IgdGhhdCBUZWNobmljaWFuXG4gICAgICAgICAgICBkZWYgY29udHJhY3Q9Y3VzdG9tZXJDb250cmFjdC50b1N0cmluZygpXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJjb250cmFjdDpcIiArIGNvbnRyYWN0XG4gICAgICAgICAgICBkZWYgY29udHJhY3RJZCA9IGNvbnRyYWN0LnN1YnN0cmluZyhjb250cmFjdC5sYXN0SW5kZXhPZignKCcpKzEsY29udHJhY3QubGFzdEluZGV4T2YoJyknKSlcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImNvbnRyYWN0SWQ6XCIgKyBjb250cmFjdElkXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJwcm9wZXJ0aWVzWydpb2JqLmNvbnRyYWN0LnZhbGlkVG8nXTogXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmNvbnRyYWN0LnZhbGlkVG8nXVxuICAgICAgICAgICAgZGVmIGV4cGlyaW5nRGF0ZSwgZXhwaXJpbmdEYXRlQXR0clxuICAgICAgICAgICAgZXhwaXJpbmdEYXRlQXR0ciA9IHByb3BlcnRpZXNbJ2lvYmouY29udHJhY3QudmFsaWRUbyddID8gcHJvcGVydGllc1snaW9iai5jb250cmFjdC52YWxpZFRvJ10udG9TdHJpbmcoKSA6IFwiUVRfVkFMSURfVFwiXG5cbiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdElkLnRvSW50ZWdlcigpLCBjdXN0b21lckNvbnRyYWN0QXR0cikpe1xuICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbnRyYWN0SWQudG9JbnRlZ2VyKCksIGN1c3RvbWVyQ29udHJhY3RBdHRyKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICBjb250cmFjdFJlZiA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgY29udHJhY3RETyA9IGNvbnRyYWN0UmVmLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJjb250cmFjdERPOiBcIiArIGNvbnRyYWN0RE9cbiAgICAgICAgICAgICAgICBjb250cmFjdERPS2V5ID0gY29udHJhY3RETy5zdWJzdHJpbmcoY29udHJhY3RETy5sYXN0SW5kZXhPZignKCcpKzEsY29udHJhY3RETy5sYXN0SW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImNvbnRyYWN0RE9LZXk6IFwiICsgY29udHJhY3RET0tleVxuICAgICAgICAgICAgICAgIGNvbnRyYWN0RE9PYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4ocHJvcGVydGllc1snaXNjaGVtYS5kYm8nXS50b1N0cmluZygpICsgXCItXCIgKyBjb250cmFjdERPS2V5KVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImV4cGlyaW5nRGF0ZUF0dHI6IFwiICsgZXhwaXJpbmdEYXRlQXR0clxuICAgICAgICAgICAgICAgIGV4cGlyaW5nRGF0ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdERPS2V5LnRvSW50ZWdlcigpLCBleHBpcmluZ0RhdGVBdHRyKSA/IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdERPS2V5LnRvSW50ZWdlcigpLCBleHBpcmluZ0RhdGVBdHRyKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudmFsdWVbMF0gYXMgRGF0ZSA6IG51bGxcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZGVmIHRvZGF5c0RhdGVUaW1lID0gKG5ldyBEYXRlKCkpXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJleHBpcmluZ0RhdGU6IFwiICsgZXhwaXJpbmdEYXRlXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJ0b2RheXNEYXRlVGltZTogXCIgKyB0b2RheXNEYXRlVGltZVxuICAgICAgICAgICAgaWYoZXhwaXJpbmdEYXRlIDwgdG9kYXlzRGF0ZVRpbWUpe1xuICAgICAgICAgICAgICAgIHdhcm5pbmdzID0gdHJ1ZVxuICAgICAgICAgICAgICAgIGV4cGlyZWRDb250cmFjdCA9IHRydWVcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG5cbiAgICB9XG4gICAgICAgIFxufVxuXG5kZWYganFsUXVlcnlQYXJzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSnFsUXVlcnlQYXJzZXIpXG5kZWYganFsU2VhcmNoID0gXCJwcm9qZWN0ID0gJ1wiICsgaXNzdWUuZ2V0UHJvamVjdE9iamVjdCgpLm5hbWUgKyBcIicgQU5EIFwiICtcbiAgICBcIihpc3N1ZXR5cGUgbm90IGluIChcXFwiTmV3IEluc3RhbGxhdGlvblxcXCIsIFxcXCJQbGFubmVkIE1haW50ZW5hbmNlIFRpY2tldFxcXCIsIFxcXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcXFwiKSBPUiBpc3N1ZXR5cGUgaW4gKFxcXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcXFwiKSBBTkQgc3RhdHVzID0gRG9uZSkgXCIgK1xuICAgIFwiQU5EIE9QX0FTU0VUID0gXCIgKyBhc3NldEtleSArIFwiIEFORCAoKGlzc3VldHlwZSBub3QgaW4gKFxcXCJOZXcgSW5zdGFsbGF0aW9uXFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0XFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1xcXCIpIEFORCBPUF9FWEVDVVRJT05fREFURSBJUyBOT1QgRU1QVFkgQU5EIE9QX0VYRUNVVElPTl9EQVRFID49IC02MGQpIFwiICtcbiAgICBcIk9SIChpc3N1ZXR5cGUgaW4gKFxcXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcXFwiKSBBTkQgaXNzdWVGdW5jdGlvbiBpbiBzdWJ0YXNrc09mKFxcXCJPUF9FWEVDVVRJT05fREFURSBJUyBOT1QgRU1QVFkgQU5EIE9QX0VYRUNVVElPTl9EQVRFID49IC02MGRcXFwiKSkgT1IgKGlzc3VldHlwZSBub3QgaW4gKFxcXCJOZXcgSW5zdGFsbGF0aW9uXFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0XFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1xcXCIpIEFORCBPUF9FWEVDVVRJT05fREFURSBJUyBFTVBUWSBBTkQgT1BfUExBTk5FRF9EQVRFIElTIE5PVCBFTVBUWSBBTkQgT1BfUExBTk5FRF9EQVRFID49IC02MGQpIFwiICtcbiAgICBcIk9SIChpc3N1ZXR5cGUgaW4gKFxcXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcXFwiKSBBTkQgaXNzdWVGdW5jdGlvbiBpbiBzdWJ0YXNrc09mKFxcXCJPUF9FWEVDVVRJT05fREFURSBJUyBFTVBUWSBBTkQgT1BfUExBTk5FRF9EQVRFIElTIE5PVCBFTVBUWSBBTkQgT1BfUExBTk5FRF9EQVRFID49IC02MGRcXFwiKSkgT1IgKGlzc3VldHlwZSBub3QgaW4gKFxcXCJOZXcgSW5zdGFsbGF0aW9uXFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0XFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1xcXCIpIEFORCBPUF9FWEVDVVRJT05fREFURSBJUyBFTVBUWSBBTkQgT1BfUExBTk5FRF9EQVRFIElTIEVNUFRZIEFORCBPUF9SRVFVRVNURURfREFURSBJUyBOT1QgRU1QVFkgQU5EIE9QX1JFUVVFU1RFRF9EQVRFID49IC02MGQpIFwiICtcbiAgICBcIk9SIChpc3N1ZXR5cGUgaW4gKFxcXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcXFwiKSBBTkQgaXNzdWVGdW5jdGlvbiBpbiBzdWJ0YXNrc09mKFxcXCJPUF9FWEVDVVRJT05fREFURSBJUyBFTVBUWSBBTkQgT1BfUExBTk5FRF9EQVRFIElTIEVNUFRZIEFORCBPUF9SRVFVRVNURURfREFURSBJUyBOT1QgRU1QVFkgQU5EIE9QX1JFUVVFU1RFRF9EQVRFID49IC02MGRcXFwiKSkpXCJcblxuXG5cbmxvZy5kZWJ1ZyBqcWxTZWFyY2hcblxuZGVmIHF1ZXJ5ID0ganFsUXVlcnlQYXJzZXIucGFyc2VRdWVyeShqcWxTZWFyY2gpXG5kZWYgdXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQubG9nZ2VkSW5Vc2VyXG5kZWYgc2VhcmNoU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChTZWFyY2hTZXJ2aWNlKVxuZGVmIHNlYXJjaCA9IHNlYXJjaFNlcnZpY2Uuc2VhcmNoKHVzZXIsIHF1ZXJ5LCBQYWdlckZpbHRlci5nZXRVbmxpbWl0ZWRGaWx0ZXIoKSlcbmRlZiB0a3RMaXN0ID0gXCJcIlxuZGVmIGRhdGUgPSBuZXcgRGF0ZSgpXG5kZWYgd2FybmluZ051bVRrdCA9IGZhbHNlXG5cbmlmKHNlYXJjaC5yZXN1bHRzLnNpemUoKSA+PSAyKSB7XG4gICAgd2FybmluZ051bVRrdCA9IHRydWVcbiAgICB3YXJuaW5ncyA9IHRydWVcbiAgICAvL1ByZXBhcm8gaWwgd2FybmluZyBkYSBtb3N0cmFyZSBhbGwndXRlbnRlIGNvbiBpbCBkZXR0YWdsaW8gZGVsbGUgaXNzdWUgZ2lcdTAwZTAgZXNpc3RlbnRpXG4gICAgZm9yKGkgaW4gc2VhcmNoLnJlc3VsdHMpe1xuICAgICAgICBpZihpLnN0YXR1cy5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKFwiRG9uZVwiKSAmJiBpLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMoXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcIikpe1xuICAgICAgICAgICAgaWYodGt0TGlzdCAhPSBcIlwiKXtcbiAgICAgICAgICAgICAgICB0a3RMaXN0ID0gdGt0TGlzdCArIFwiOyBcIiArIGkuZ2V0UGFyZW50T2JqZWN0KCkua2V5LnRvU3RyaW5nKCkgKyBcIiAoXCIgKyBpLmdldFBhcmVudE9iamVjdCgpLmdldElzc3VlVHlwZSgpLm5hbWUgKyBcIikgXCIgKyBpLnN0YXR1cy5uYW1lLnRvU3RyaW5nKClcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHRrdExpc3QgPSBpLmdldFBhcmVudE9iamVjdCgpLmtleS50b1N0cmluZygpICsgXCIgKFwiICsgaS5nZXRQYXJlbnRPYmplY3QoKS5nZXRJc3N1ZVR5cGUoKS5uYW1lICsgXCIpIFwiICsgaS5zdGF0dXMubmFtZS50b1N0cmluZygpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL3RrdExpc3QgPSB0a3RMaXN0ICsgXCJcXG5cIiArIGkuZ2V0UGFyZW50T2JqZWN0KCkua2V5LnRvU3RyaW5nKCkgKyBcIiAoXCIgKyBpLmdldFBhcmVudE9iamVjdCgpLmdldElzc3VlVHlwZSgpLm5hbWUgKyBcIikgXCIgKyBpLnN0YXR1cy5uYW1lLnRvU3RyaW5nKClcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBpZihpLnN0YXR1cy5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKFwiQ2xvc2VkXCIpICYmICFpLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMoXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcIikpe1xuICAgICAgICAgICAgICAgIGlmKHRrdExpc3QgIT0gXCJcIil7XG4gICAgICAgICAgICAgICAgICAgIHRrdExpc3QgPSB0a3RMaXN0ICsgXCI7IFwiICsgaS5rZXkudG9TdHJpbmcoKSArIFwiIChcIiArIGkuZ2V0SXNzdWVUeXBlKCkubmFtZSArIFwiKSBcIiArIGkuc3RhdHVzLm5hbWUudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICB0a3RMaXN0ID0gaS5rZXkudG9TdHJpbmcoKSArIFwiIChcIiArIGkuZ2V0SXNzdWVUeXBlKCkubmFtZSArIFwiKSBcIiArIGkuc3RhdHVzLm5hbWUudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL3RrdExpc3QgPSB0a3RMaXN0ICsgXCJcXG5cIiArIGkua2V5LnRvU3RyaW5nKCkgKyBcIiAoXCIgKyBpLmdldElzc3VlVHlwZSgpLm5hbWUgKyBcIikgXCIgKyBpLnN0YXR1cy5uYW1lLnRvU3RyaW5nKClcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGlmKHRrdExpc3QgIT0gXCJcIil7XG4gICAgICAgICAgICAgICAgICAgIHRrdExpc3QgPSB0a3RMaXN0ICsgXCI7IFwiICsgaS5rZXkudG9TdHJpbmcoKSArIFwiIChcIiArIGkuZ2V0SXNzdWVUeXBlKCkubmFtZSArIFwiKSBcIiArIGkuc3RhdHVzLm5hbWUudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICB0a3RMaXN0ID0gaS5rZXkudG9TdHJpbmcoKSArIFwiIChcIiArIGkuZ2V0SXNzdWVUeXBlKCkubmFtZSArIFwiKSBcIiArIGkuc3RhdHVzLm5hbWUudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL3RrdExpc3QgPSB0a3RMaXN0ICsgXCJcXG5cIiArIGkua2V5LnRvU3RyaW5nKCkgKyBcIiAoXCIgKyBpLmdldElzc3VlVHlwZSgpLm5hbWUgKyBcIikgXCIgKyBpLnN0YXR1cy5uYW1lLnRvU3RyaW5nKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBsb2cuZGVidWcgXCJ0a3RMaXN0OiBcIiArIHRrdExpc3Rcbn1cblxuZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuXG5pZiAoIXdhcm5pbmdzKXtcbiAgICByZXR1cm4gdHJ1ZVxufWVsc2V7XG4gICAgaWYod2FybmluZ3Mpe1xuICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIikpe1xuICAgICAgICAgICAgLy9sb2cuZGVidWcgXCJyZXR1cm4gdHJ1ZVwiXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuXHRcdFx0ZGVmIHdMaXN0Q29uZmlybUVtcHR5Q29udHJhY3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1NdWx0aXBsZVRrdHMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYobWlzc2luZ0NvbnRyYWN0KXtcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eUNvbnRyYWN0LmFkZChcIldcIilcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eUNvbnRyYWN0LmFkZChcIkNVU1RPTUVSX0NPTlRSQUNUX01JU1NJTkdcIilcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eUNvbnRyYWN0LmFkZChudWxsKVxuXG4gICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5Q29udHJhY3QpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKGV4cGlyZWRDb250cmFjdCl7XG4gICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlDb250cmFjdC5hZGQoXCJXXCIpXG4gICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlDb250cmFjdC5hZGQoXCJDVVNUT01FUl9DT05UUkFDVF9FWFBJUkVEXCIpXG4gICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlDb250cmFjdC5hZGQobnVsbClcblxuICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eUNvbnRyYWN0KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZih3YXJuaW5nTnVtVGt0KXtcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1NdWx0aXBsZVRrdHMuYWRkKFwiV1wiKVxuICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybU11bHRpcGxlVGt0cy5hZGQodGt0TGlzdClcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1NdWx0aXBsZVRrdHMuYWRkKFwiTU9SRV9USEFOXzJfVEtUU19MQVNUXzYwX0RBWVNcIilcbiAgICAgICAgICAgICAgICAvL3dMaXN0Q29uZmlybU11bHRpcGxlVGt0cy5hZGQobnVsbClcblxuICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1NdWx0aXBsZVRrdHMpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiV1wiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpIFxuICAgICAgICB9XG4gICAgfVxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">7a272e30-dcd2-4e28-bf3b-a91abc51c017</arg>
          <arg name="FIELD_NOTES">YCFgU0FQOiB1cGRhdGUgU04gc3RhdHVzICYgQ3JlYXRlIFNP</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcblxuZGVmIHNhcFNOID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1NBUF9TRVJWSUNFX05PVElGSUNBVElPTlwiKVswXVxuZGVmIHJlcXVlc3RNZXRob2RcbmRlZiBiYXNlVVJMXG5cblVSTCB1cmxcbkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb25cblxuaWYoaXNzdWUuaXNzdWVUeXBlLm5hbWUgIT0gXCJQbGFubmVkIE1haW50ZW5hbmNlIFRpY2tldFwiICYmIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2FwU04pICE9IG51bGwpe1xuICAgIHJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcblxuICAgIGRlZiBib2R5X3JlcSA9IFtdXG4gICAgYm9keV9yZXEgPSBbXG4gICAgICAgIFwiaXNzdWVLZXlcIjogaXNzdWUua2V5LFxuICAgICAgICBcInN0YXR1c1wiOiBcIlBMQVwiXG4gICAgXSBcblxuICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL2FmdGVyL3NhbGVzL2NyZWF0ZS9zZXJ2aWNlL25vdGlmaWNhdGlvblwiXG5cbiAgICBsb2cuZGVidWcgXCJiYXNlVVJMIFNOOiBcIiArIGJhc2VVUkxcbiAgICBsb2cuZGVidWcgXCJib2R5X3JlcSBTTjogXCIgKyBib2R5X3JlcVxuICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cbiAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICBcbiAgICAgICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxuICAgICAgICBsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXG5cbiAgICAgICAgZGVmIGpzb25TbHVycGVyID0gbmV3IEpzb25TbHVycGVyKClcbiAgICAgICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcbiAgICAgICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICBcbiAgICAgICAgbG9nLmRlYnVnIFwibWVzc2FnZTogXCIgKyAganNvbl9vYmplY3QubWVzc2FnZVxuICAgICAgICBsb2cuZGVidWcgXCJlcnJvcnM6IFwiICsgIGpzb25fb2JqZWN0LmVycm9ycy50b1N0cmluZygpXG5cbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJPUC1TQVAtU04tVVBEQVRFXCIpXG4gICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsganNvbl9vYmplY3QuZXJyb3JzWzBdLnRvU3RyaW5nKCkpXG4gICAgICAgIFxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgfWVsc2V7XG4gICAgICAgIC8qKiBTRVJWSUNFIE9SREVSIENSRUFUSU9OICoqL1xuICAgICAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgICAgIFwiaXNzdWVLZXlcIjogaXNzdWUua2V5XG4gICAgICAgIF0gXG4gICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL2FmdGVyL3NhbGVzL2NyZWF0ZS9vci91cGRhdGUvc2VydmljZS9vcmRlclwiXG5cbiAgICAgICAgbG9nLmRlYnVnIFwiYmFzZVVSTCBTTzogXCIgKyBiYXNlVVJMXG4gICAgICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNPOiBcIiArIGJvZHlfcmVxXG4gICAgICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICAgICAgY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxuICAgICAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG5cbiAgICAgICAgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSAmJiAhY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHRcbiAgICBcdFx0bG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICAgICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcbiAgICAgICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJlcnJvcnM6IFwiICsgIGpzb25fb2JqZWN0LmVycm9ycy50b1N0cmluZygpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TTy1DUkVBVEVcIilcbiAgICAgICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsganNvbl9vYmplY3QuZXJyb3JzWzBdKVxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcbiAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgICAgICB9XG4gICAgfVxufVxuXG5pZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNhcFNOKSA9PSBudWxsICYmIGlzc3VlLmlzc3VlVHlwZS5uYW1lICE9IFwiUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXRcIil7XG4gICAgcmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuXG4gICAgZGVmIGJvZHlfcmVxID0gW11cbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXG4gICAgICAgIFwic3RhdHVzXCI6IFwiUExBXCJcbiAgICBdIFxuXG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL3NlcnZpY2Uvbm90aWZpY2F0aW9uXCJcblxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxuICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNOOiBcIiArIGJvZHlfcmVxXG4gICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxuICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgIFxuICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG4gICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcblxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TTi1VUERBVEVcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICB9ZWxzZXtcbiAgICAgICAgLyoqIFNFUlZJQ0UgT1JERVIgQ1JFQVRJT04gKiovXG4gICAgICAgIGJvZHlfcmVxID0gW1xuICAgICAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXlcbiAgICAgICAgXSBcbiAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL29yL3VwZGF0ZS9zZXJ2aWNlL29yZGVyXCJcblxuICAgICAgICBsb2cuZGVidWcgXCJiYXNlVVJMIFNPOiBcIiArIGJhc2VVUkxcbiAgICAgICAgbG9nLmRlYnVnIFwiYm9keV9yZXEgU086IFwiICsgYm9keV9yZXFcbiAgICAgICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgICAgICBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG4gICAgICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgICAgICBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAxXCIpICYmICFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxuICAgIFx0XHRsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICAgICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICBcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtU0FQLVNPLUNSRUFURVwiKVxuICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgIH1cbiAgICB9XG59XG4gIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">583df9c7-fce8-41ca-ad87-8f516b4ff5c5</arg>
          <arg name="FIELD_NOTES">YCFgRGVsZXRlIHByZXZpb3VzIGF0dGFjaG1lbnRzIHJlbGF0ZWQgdG8gTkVXIEluc3RhbGxhdGlvbiBUS1QgR2VuZXJhdGlvbg==</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5cbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5kZWYgYXV0b21hdGljYWxseUNsb3NlZCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUNsb3NlZCddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG4vKlNjcmlwdCBWYXJpYWJsZXMqL1xuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0xNDA2MlwiKVxuXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5cbi8qUmltb3ppb25lIGFsbGVnYXRvIHJhcHBvcnRvIGRpIGludGVydmVudG8gYXBwZW5hIGNyZWF0byovXG4vKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG5cbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTtcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcblxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcblxuQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG5kZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG5cbi8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSBcIiBhcm91bmQgdmFsdWUgKi9cbmRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIm9iamVjdFR5cGU9QXR0YWNobWVudCBBTkQgXFxcIlwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuY2F0ZWdvcnlSZWYnXS50b1N0cmluZygpICsgXCJcXFwiLlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm5ld0luc3RUa3QnXS50b1N0cmluZygpICsgXCJcXFwiID0gdHJ1ZSBBTkQgXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSArIFwiIT10cnVlIEFORCBvYmplY3QgSEFWSU5HIGNvbm5lY3RlZFRpY2tldHMoa2V5ID0gXCIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArIFwiKVwiKTsgLy8gU2VlIHRoZSBjb21wbGV0ZSBsaXN0IG9mIHBvc3NpYmxlIElRTCBvbiB0aGUgSW5zaWdodCBRdWVyeSBMYW5ndWFnZSBkb2N1bWVudGF0aW9uIHBhZ2Vcbi8qIElmIHRoaXMgaXMgYSBtYW5kYXRvcnkgZmllbGQgeW91IHNob3VsZCBiZSBhYmxlIHRvIGRvIHRoaXM6ICovXG5sb2cuZGVidWcgXCJJUUw6IFwiICsgXCJvYmplY3RUeXBlPUF0dGFjaG1lbnQgQU5EIFxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5cXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5uZXdJbnN0VGt0J10udG9TdHJpbmcoKSArIFwiXFxcIiA9IHRydWUgQU5EIFwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyBcIiE9dHJ1ZSBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleSA9IFwiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIilcIlxuXG5mb3IoaW9iaiBpbiBvYmplY3RzKXtcbiAgICAvKiBVUERBVEUgT0pCRUNUIERFTEVURUQgVkFMVUUgKi9cbiAgICBkZWYgb2JqID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGlvYmouZ2V0SWQoKSk7XG4gICAgICAgIFxuICAgIGludCBhdHRhY2htZW50RGVsZXRlZCA9IHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudC5kZWxldGVkLmlkJ10gPyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnQuZGVsZXRlZC5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKCkgOiAzMjY1XG4gICAgXG4gICAgYXR0cmliVHlwZSA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKGF0dGFjaG1lbnREZWxldGVkKTsgXG5cbiAgICBuZXdBdHRyaWIgPSBvYmouY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihhdHRyaWJUeXBlKTtcbiAgICBkZWYgbmV3QXR0cmliVmFsdWUgPSBuZXdBdHRyaWIuY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7XG5cbiAgICB0cnkge1xuICAgIFx0bmV3QXR0cmliVmFsdWUuc2V0VmFsdWUoYXR0cmliVHlwZSwgdHJ1ZSk7XG4gICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSkge1xuICAgICBcdGxvZy53YXJuKFwiU0VUSU5TSUdIVFZBTFVFOiBVbmFibGUgdG8gc2V0IGF0dHJpYnV0ZSBcIiArIGF0dHJpYlR5cGUgKyBcIiB0byBcIiArIHRvdGFsQW1vdW50U3VwcCArIFwiLiBFeGl0aW5nLlwiKTtcbiAgICAgXHRsb2cud2FybihTRVRJTlNJR0hUVkFMVUU6IHZpZS5nZXRNZXNzYWdlKCkpO1xuICAgICBcdHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgZGVmIGF0dHJpYlZhbHVlcyA9IG5ld0F0dHJpYi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7XG4gICAgYXR0cmliVmFsdWVzLmFkZChuZXdBdHRyaWJWYWx1ZSk7XG4gICAgbmV3QXR0cmliLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoYXR0cmliVmFsdWVzKTtcbiAgICAgXG4gICAgdHJ5IHtcbiAgICBcdG5ld0F0dHJpYiA9IG9iamVjdEZhY2FkZS5zdG9yZU9iamVjdEF0dHJpYnV0ZUJlYW4obmV3QXR0cmliKTtcbiAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XG4gICAgXHRsb2cud2FybihcIlNFVElOU0lHSFRWQUxVRTogVW5hYmxlIHRvIHNhdmUgY2hhbmdlcy4gRXhpdGluZy5cIik7XG4gICAgIFx0bG9nLndhcm4oU0VUSU5TSUdIVFZBTFVFOiB2aWUuZ2V0TWVzc2FnZSgpKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGxvZy5pbmZvKFwiU0VUSU5TSUdIVFZBTFVFOiBTdWNjZXNzZnVsbHkgc2F2ZWQgdmFsdWVcIik7XG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">ae3f3563-1b6f-4e50-a442-a0926310744c</arg>
          <arg name="FIELD_NOTES">YCFgT1A6IERvYyBUZW1wbGF0ZSBnZW5lcmF0aW9uIC0gc2UgTmV3IEluc3RhbGxhdGlvbiBPUiBGaXJzdCBUaWNrZXQgPSB0cnVl</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5Xb3JrZmxvd0V4Y2VwdGlvbjtcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvblxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyO1xuaW1wb3J0IGdyb292eS5qc29uLlN0cmVhbWluZ0pzb25CdWlsZGVyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5DdXN0b21GaWVsZE1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3I7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMuY29kZWMuYmluYXJ5LkJhc2U2NDtcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5XG5pbXBvcnQgZ3Jvb3Z5eC5uZXQuaHR0cC5IVFRQQnVpbGRlclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcblxuZGVmIHJlcXVlc3RNZXRob2RcbmRlZiBiYXNlVVJMXG5cbmRlZiBmaXJzdFRpY2tldCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuZmlyc3RUa3QnXS50b1N0cmluZygpKVswXVxuXG5sb2cuZGVidWcgaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZVxubG9nLmRlYnVnIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZmlyc3RUaWNrZXQpXG5cblxuLyogUkVTVCBBUEkgcGVyIEludmlvIE5vdGlmaWNhIEVtYWlsIE9OU0lURV9SRVBPUlQgKi9cbnJlcXVlc3RNZXRob2QgPSBcIkdFVFwiO1xuZGVmIHJlc2NoZWR1bGluZyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YucmVzY2hlZHVsaW5nJ10gPyBwcm9wZXJ0aWVzWydjZi5yZXNjaGVkdWxpbmcnXS50b1N0cmluZygpIDogXCJPUF9DSEFOR0VfU0NIRURVTElOR1wiKVswXVxuZGVmIHRyYW5zaXRpb25DaGVjayA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY2hlY2tBbmRDb25maXJtMiddLnRvU3RyaW5nKCkpWzBdXG5cbmxvZy5kZWJ1ZyBcImlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZmlyc3RUaWNrZXQpOiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZmlyc3RUaWNrZXQpXG5kZWYgZmlyc3RfdGlja2V0PWZhbHNlXG5kZWYgdGVtcGxhdGU9XCJcIlxuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShmaXJzdFRpY2tldCkhPW51bGwpe1xuICAgIGZpcnN0X3RpY2tldD10cnVlXG4gICAgdGVtcGxhdGU9XCJGSVJTVF9USUNLRVQlN0NNQU5VRkFDVFVSRVJcIlxufWVsc2V7XG4gICAgdGVtcGxhdGU9XCJORVdfSU5TVEFMTEFUSU9OX0NSRUFURV9US1QlN0NNQU5VRkFDVFVSRVJcIlxufVxuXG5pZihpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0Lm5ld0luc3RhbGxhdGlvbiddKSl7XG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vZG9jdW1lbnQvZ2VuZXJhdGlvbi9jaGVjaz9JU1NVRV9LRVk9XCIrIGlzc3VlLmtleSArXCImRE9DX0NBVEVHT1JZPVwiICsgdGVtcGxhdGUgKyBcIiZFTkFCTEVEX0ZPUl9GSVJTVF9USUNLRVQ9XCIrZmlyc3RfdGlja2V0K1wiJklNUE9SVF9GUk9NPVwiXG59ZWxzZXtcbiAgICBpZihmaXJzdF90aWNrZXQpe1xuICAgIFx0YmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vZG9jdW1lbnQvZ2VuZXJhdGlvbi9jaGVjaz9JU1NVRV9LRVk9XCIrIGlzc3VlLmtleSArXCImRE9DX0NBVEVHT1JZPVwiICsgdGVtcGxhdGUgKyBcIiZFTkFCTEVEX0ZPUl9GSVJTVF9USUNLRVQ9XCIrZmlyc3RfdGlja2V0K1wiJklNUE9SVF9GUk9NPU9QX0FTU0VUXCJcbiAgICB9XG59XG5cbmxvZy5kZWJ1ZyBiYXNlVVJMXG5pZihiYXNlVVJMICE9IG51bGwgJiYgYmFzZVVSTCAhPSBcIlwiKXtcbiAgICBVUkwgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuXG4gICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgbG9nLmRlYnVnIFwiRXJyb3JTdHJlYW06IFwiICsgY29ubmVjdGlvbi5nZXRFcnJvclN0cmVhbSgpLnRvU3RyaW5nKClcbiAgICAgICAgbG9nLmRlYnVnIFwiZ2V0SGVhZGVyRmllbGRzKCk6IFwiICsgY29ubmVjdGlvbi5nZXRIZWFkZXJGaWVsZHMoKVxuICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG5cbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJPUC1ET0NTXCIpXG4gICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsganNvbl9vYmplY3QubWVzc2FnZSlcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcbiAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgIH1cbn1cbiIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">dd185790-4471-4435-99ff-f3aca12a451c</arg>
          <arg name="FIELD_NOTES">YCFgT1AgRW1haWwgTm90aWZpY2F0aW9uOiBBU1NJR05fVE9fSU5URVJOQUxfVEVDSFM=</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbmRlZiByZXF1ZXN0TWV0aG9kID0gXCJQT1NUXCI7XG5kZWYgcmVsYXRlc0luSXNzdWVMaW5rPWZhbHNlXG5kZWYgcmVsYXRlc091dElzc3VlTGluaz1mYWxzZVxuZGVmIGxpbmtlZFRpY2tldHM9bmV3IEFycmF5TGlzdCgpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiBhdXRvbWF0aWNhbGx5Q29uZmlybWVkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5QXNzaWduZWQnXSA/IHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlBc3NpZ25lZCddLnRvU3RyaW5nKCkgOiBcIk9QX0FVVE9NQVRJQ0FMTFlfQVNTSUdORURcIilbMF1cblxuLyp2ZXJpZmljYSB0aWNrZXQgY29sbGVnYXRpKi9cbkxpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKVxuZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG5cbiAgICBpZihpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkhPSBudWxsICYmIGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpICYmIGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKS5zdGF0dXMubmFtZSA9PSBcIk9wZW5cIil7XG4gICAgICAgIHJlbGF0ZXNJbklzc3VlTGluaz10cnVlXG4gICAgICAgIGxpbmtlZFRpY2tldHMuYWRkKGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKS50b1N0cmluZygpKVxuICAgICAgICBsb2cuZGVidWcgXCJJc3N1ZSBjb24gcmVsYXRlc0luSXNzdWVMaW5rXCJcbiAgICB9XG59XG5MaXN0PElzc3VlTGluaz4gYWxsT3V0SXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldE91dHdhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKVxuZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsT3V0SXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHtcbiAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgaWYoaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkhPSBudWxsICYmIGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpICYmIGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpLnN0YXR1cy5uYW1lID09IFwiT3BlblwiKXtcbiAgICAgICAgcmVsYXRlc091dElzc3VlTGluaz10cnVlXG4gICAgICAgIGxpbmtlZFRpY2tldHMuYWRkKGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpLnRvU3RyaW5nKCkpXG4gICAgICAgIGxvZy5kZWJ1ZyBcIklzc3VlIGNvbiByZWxhdGVzT3V0SXNzdWVMaW5rXCJcbiAgICB9XG59XG5cbmRlZiBib2R5X3JlcVxuaWYocmVsYXRlc0luSXNzdWVMaW5rIHx8IHJlbGF0ZXNPdXRJc3N1ZUxpbmspe1xuICAgIGJvZHlfcmVxID0gW1xuICAgICAgICBcInRlbXBsYXRlTmFtZVwiOiBwcm9wZXJ0aWVzWyd0dC5hc3NpZ25Ub0ludGVybmFsVGVjaHMnXS50b1N0cmluZygpLFxuICAgICAgICBcInBlY1wiOiBmYWxzZSxcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXG4gICAgICAgIFwibGlua2VkVGlja2V0c1wiOiBsaW5rZWRUaWNrZXRzXG4gICAgXVxufWVsc2V7XG4gICAgYm9keV9yZXEgPSBbXG4gICAgICAgIFwidGVtcGxhdGVOYW1lXCI6IHByb3BlcnRpZXNbJ3R0LmFzc2lnblRvSW50ZXJuYWxUZWNocyddLnRvU3RyaW5nKCksXG4gICAgICAgIFwicGVjXCI6IGZhbHNlLFxuICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleVxuICAgIF1cbn1cblxuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKT09bnVsbCB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLnRvU3RyaW5nKCkuZXF1YWxzKFwiTm9cIikpe1xuICAgIGRlZiBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS90cmFuc2FjdGlvbi9tYWlsL3NlbmRcIlxuICAgIFVSTCB1cmxcbiAgICB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG5cbiAgICBsb2cuZGVidWcgXCJiYXNlVVJMOiBcIiArIGJhc2VVUkxcbiAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cbiAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cdGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICBcbiAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikgJiYgIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDRcIikpe1xuICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIlNFTkRNQUlMXCIpXG4gICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKSlcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcbiAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgIH1cbn1cbiIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
      </validators>
      <results>
        <unconditional-result old-status="null" status="null" step="19">
          <post-functions>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">863867d4-643d-4e66-b4c9-79cdafbf758d</arg>
              <arg name="FIELD_NOTES">YCFgVXBkYXRlIE9QX1NVUFBMSUVSLCBPUF9JTlRFUk5BTF9URUNITklDSUFOUywgT1BfVEVDSE5JQ0lBTlMgb24gUE0gVGFza3M=</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS51dGlsLkRlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZVxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKClcbklzc3VlSW5kZXhpbmdTZXJ2aWNlIGlzc3VlSW5kZXhpbmdTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KElzc3VlSW5kZXhpbmdTZXJ2aWNlKVxuLy9kZWYgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMzY0NTlcIilcbmRlZiB0a3RTdXBwbGllciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1NVUFBMSUVSXCIpXG5kZWYgdGt0SW50ZXJuYWxUZWNocyA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0lOVEVSTkFMX1RFQ0hOSUNJQU5TXCIpWzBdXG5kZWYgdGt0VGVjaHMgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9URUNITklDSUFOU1wiKVswXVxuZGVmIHN1YlRhc2tPYmplY3RzID0gaXNzdWUuZ2V0U3ViVGFza09iamVjdHMoKVxuXG5kZWYgY3VycmVudFN1YlRhc2tcblxuaWYgKHN1YlRhc2tPYmplY3RzKXtcbiAgICBmb3IgKHN0IGluIHN1YlRhc2tPYmplY3RzKXtcbiAgICAgICAgaWYoc3QuaXNzdWVUeXBlLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQucGxhbm5lZE1haW50ZW5hbmNlVGFzayddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgIGZvcihzIGluIHRrdFN1cHBsaWVyKXtcbiAgICAgICAgICAgICAgICBzLnVwZGF0ZVZhbHVlKG51bGwsIHN0LCBuZXcgTW9kaWZpZWRWYWx1ZShzdC5nZXRDdXN0b21GaWVsZFZhbHVlKHMpLCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHMpKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGt0SW50ZXJuYWxUZWNocy51cGRhdGVWYWx1ZShudWxsLCBzdCwgbmV3IE1vZGlmaWVkVmFsdWUoc3QuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0a3RJbnRlcm5hbFRlY2hzKSwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0a3RJbnRlcm5hbFRlY2hzKSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcbiAgICAgICAgICAgIHRrdFRlY2hzLnVwZGF0ZVZhbHVlKG51bGwsIHN0LCBuZXcgTW9kaWZpZWRWYWx1ZShzdC5nZXRDdXN0b21GaWVsZFZhbHVlKHRrdFRlY2hzKSwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0a3RUZWNocykpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG4gICAgICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KHN0KVxuICAgICAgICB9XG4gICAgfVxufSIsInNjcmlwdFBhdGgiOm51bGx9</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
            </function>
            <function type="class">
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdateissuestatus-function</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowcreatecomment-function</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowgeneratechangehistory-function</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowreindexissue-function</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
            <function type="class">
              <arg name="field.copyFieldSource2"></arg>
              <arg name="field.copyFieldSource1">customfield_23236</arg>
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="maxAllowed-integerValue"></arg>
              <arg name="field.createTargetValue1"></arg>
              <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="field.copyFieldMode1">OVERWRITE</arg>
              <arg name="field.copyFieldDestination1">customfield_22653</arg>
              <arg name="field.copyFieldSeparator1"></arg>
              <arg name="scopeType">SAME</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiescopyValueFromOtherField-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.CopyValueFromOtherFieldPostFunction</arg>
              <arg name="scopeSource-jql"></arg>
            </function>
            <function type="class">
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="append.value"></arg>
              <arg name="maxAllowed-integerValue"></arg>
              <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="field.value">true</arg>
              <arg name="field.name">customfield_23245</arg>
              <arg name="scopeType">SAME</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
              <arg name="scopeSource-jql"></arg>
            </function>
            <function type="class">
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="append.value"></arg>
              <arg name="maxAllowed-integerValue"></arg>
              <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="field.value">%%CURRENT_DATETIME%%</arg>
              <arg name="field.name">customfield_22639</arg>
              <arg name="scopeType">SAME</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
              <arg name="scopeSource-jql"></arg>
            </function>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">fd4ea68e-d068-4020-abb9-ffd46c0dd3a2</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IE5ldyBJbnN0YWxsYXRpb24gLSBDaGVjayBsaW5rZWRUaWNrZXRzICYgRmFzdC1UcmFuc2FjdCB0aGVt</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5sb2cud2FybiBcIiR7aXNzdWUua2V5fSBUcmFuc2F6aW9uZSBBU1NJR04gVE8gSU5URVJOQUwgVEVDSFMgQU5EIFBMQU4gLSBQb3N0IEZ1bmN0aW9uIGNoZWNrIGxpbmtlZElzc3Vlc1wiXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiBhdXRvbWF0aWNhbGx5Q29uZmlybWVkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5QXNzaWduZWQnXSA/IHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlBc3NpZ25lZCddLnRvU3RyaW5nKCkgOiBcIk9QX0FVVE9NQVRJQ0FMTFlfQVNTSUdORURcIilbMF1cbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5cbi8vUGVyIHRlc3QgZGEgY29uc29sZVxuLy9pc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIk9QVVQtMjc2XCIpXG5cbi8qUFJPRCovXG5BU1NJR05fVE9fU1VQUExJRVIgPSBwcm9wZXJ0aWVzWyd3Zi50ci5hc3NpZ25Ub1RlY2hBbmRTY2hlZHVsZSddID8gcHJvcGVydGllc1snd2YudHIuYXNzaWduVG9UZWNoQW5kU2NoZWR1bGUnXS50b0ludGVnZXIoKSA6IDg2MVxuXG5kZWYgdXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuZGVmIGlzc3VlU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlU2VydmljZSgpXG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcblxuLypTZSBlc2VndW8gbGEgY29uZmlybSB0byBjdXN0b21lciBzdSB1biB0aWNrZXQgY29uIDEgbyArIHRpY2tldCBjb2xsZWdhdGksIHZlcmlmaWNvIGUgc3Bvc3RvIGluIGF1dG9tYXRpY28gZ2xpIGV2ZW50dWFsaSB0aWNrZXQgY29sbGVnYXRpKi9cbmxvZy53YXJuIFwidmVyaWZpY28gZSBzcG9zdG8gaW4gYXV0b21hdGljbyBnbGkgZXZlbnR1YWxpIHRpY2tldCBjb2xsZWdhdGlcIlxubG9nLmRlYnVnIGlzc3VlLmdldElzc3VlVHlwZSgpLmdldE5hbWUoKVxubG9nLmRlYnVnIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZClcbmlmKGlzc3VlLmdldElzc3VlVHlwZSgpLmdldE5hbWUoKSA9PSBwcm9wZXJ0aWVzWydpdC5uZXdJbnN0YWxsYXRpb24nXS50b1N0cmluZygpICYmIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpPT1udWxsIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCkudG9TdHJpbmcoKS5lcXVhbHMoXCJOb1wiKSkpe1xuICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKVxuICAgIGxvZy5kZWJ1ZyBcImFsbEluSXNzdWVMaW5rOiBcIiArIGFsbEluSXNzdWVMaW5rXG4gICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgICAgIGlmKGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKSE9IG51bGwgJiYgaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgbG9nLndhcm4gXCJJc3N1ZSBjb24gcmVsYXRlc0luSXNzdWVMaW5rXCJcbiAgICAgICAgICAgIC8qRXNlZ3VpcmUgdHJhbnNhemlvbmUgZGkgc3RhdG8gZGVsbGEgc291cmNlSXNzdWUqL1xuICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlID0gaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpXG4gICAgICAgICAgICBkZWYgbGlua2VkSXNzdWVTdGF0dXMgPSBsaW5rZWRJc3N1ZS5nZXRTdGF0dXMoKVxuICAgICAgICAgICAgZGVmIHRyYW5zaXRpb25JZFxuICAgICAgICAgICAgaWYobGlua2VkSXNzdWVTdGF0dXMubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5vcGVuJ10udG9TdHJpbmcoKSl7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbklkPUFTU0lHTl9UT19TVVBQTElFUlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYodHJhbnNpdGlvbklkPT1BU1NJR05fVE9fU1VQUExJRVIpe1xuICAgICAgICAgICAgICAgIC8vIFByZXBhcmUgb3VyIGlucHV0IGZvciB0aGUgdHJhbnNpdGlvblxuICAgICAgICAgICAgICAgIGRlZiBpc3N1ZUlucHV0UGFyYW1ldGVycyA9IGlzc3VlU2VydmljZS5uZXdJc3N1ZUlucHV0UGFyYW1ldGVycygpXG4gICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7XG4gICAgICAgICAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayh0cnVlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL2RlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpXG4gICAgICAgICAgICAgICAgLy9Db21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gXCJZZXNcIiB9XG4gICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksIFwiWWVzXCIpIFxuICAgICAgICAgICAgICAgIC8vbG9nLndhcm4gXCJpc3N1ZUlucHV0UGFyYW1ldGVyczogXCIgKyBpc3N1ZUlucHV0UGFyYW1ldGVyc1xuICAgICAgICAgICAgICAgIGRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlXG5cbiAgICAgICAgICAgICAgICBkZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLmdldFJlbGV2YW50Q29uZmlnKGxpbmtlZElzc3VlKVxuICAgICAgICAgICAgICAgIGxvZy53YXJuIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcbiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuXG4gICAgICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpXG4gICAgICAgICAgICAgICAgbG9nLndhcm4gXCJVcGRhdGVkIGN1c3RvbWZpZWxkIC0gaXNzdWUgbGlua2F0YVwiXG5cbiAgICAgICAgICAgICAgICAvL2RlZiB2YWxpZGF0aW9uUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycylcbiAgICAgICAgICAgICAgICBpZiAoaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgZGVmIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpXG4gICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJGYWlsZWQgdG8gdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn1cIilcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlRyYW5zYXppb25lIGZhdHRhICR7QVNTSUdOX1RPX1NVUFBMSUVSfSAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c31cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFJFU1QgQVBJIHBlciBwdWxpemlhIGNhY2hlIGlzc3VlIGxpbmtlZCAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdE1ldGhvZCA9IFwiR0VUXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKlNjcmlwdCBWYXJpYWJsZXMqL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTMyNTM1XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvYXV0b21hdGlvbi9jbGVhckNhY2hlL3RpY2tldGtleS9cIiArIGxpbmtlZElzc3VlLmtleVxuICAgICAgICAgICAgICAgICAgICAgICAgVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICAgICAgICAgICAgICAgICAgICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259XCIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgTGlzdDxJc3N1ZUxpbms+IGFsbE91dElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbiAgICBsb2cuZGVidWcgXCJhbGxPdXRJc3N1ZUxpbms6IFwiICsgYWxsT3V0SXNzdWVMaW5rXG4gICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsT3V0SXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHtcbiAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcblxuICAgICAgICBpZihpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKSE9IG51bGwgJiYgaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgbG9nLndhcm4gXCJJc3N1ZSBjb24gcmVsYXRlc091dElzc3VlTGlua1wiXG4gICAgICAgICAgICAvKkVzZWd1aXJlIHRyYW5zYXppb25lIGRpIHN0YXRvIGRlbGxhIGRlc3RpbmF0aW9uSXNzdWUqL1xuICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlID0gaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KClcbiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZVN0YXR1cyA9IGxpbmtlZElzc3VlLmdldFN0YXR1cygpXG4gICAgICAgICAgICBkZWYgdHJhbnNpdGlvbklkXG4gICAgICAgICAgICBsb2cud2FybiBcImxpbmtlZElzc3VlOiBcIiArIGxpbmtlZElzc3VlXG4gICAgICAgICAgICBsb2cud2FybiBcImxpbmtlZElzc3VlU3RhdHVzLm5hbWU6IFwiICsgbGlua2VkSXNzdWVTdGF0dXMubmFtZVxuICAgICAgICAgICAgaWYobGlua2VkSXNzdWVTdGF0dXMubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5vcGVuJ10udG9TdHJpbmcoKSl7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbklkPUFTU0lHTl9UT19TVVBQTElFUlxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZih0cmFuc2l0aW9uSWQ9PUFTU0lHTl9UT19TVVBQTElFUil7XG4gICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uXG4gICAgICAgICAgICAgICAgZGVmIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKClcbiAgICAgICAgICAgICAgICBpc3N1ZUlucHV0UGFyYW1ldGVycy53aXRoIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0U2tpcFNjcmVlbkNoZWNrKHRydWUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSlcbiAgICAgICAgICAgICAgICAvL0NvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICAgICAgICAgICAgICAvL2lzc3VlSW5wdXRQYXJhbWV0ZXJzLmFkZEN1c3RvbUZpZWxkVmFsdWUoZmllbGRDb25maWcuZ2V0SWQoKSwgXCJZZXNcIikgXG5cbiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcbiAgICAgICAgICAgICAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBsaW5rZWRJc3N1ZVxuXG4gICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNvbmZpcm1lZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSlcbiAgICAgICAgICAgICAgICBsb2cud2FybiBcImZpZWxkQ29uZmlnOiBcIiArIGZpZWxkQ29uZmlnXG4gICAgICAgICAgICAgICAgZGVmIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gXCJZZXNcIiB9XG4gICAgICAgICAgICAgICAgYXV0b21hdGljYWxseUNvbmZpcm1lZC51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcblxuICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGxpbmtlZElzc3VlKVxuICAgICAgICAgICAgICAgIGxvZy53YXJuIFwiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGFcIlxuXG4gICAgICAgICAgICAgICAgaWYgKGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSB0cmFuc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpKVxuICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259XCIpXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJUcmFuc2F6aW9uZSBmYXR0YSAke0FTU0lHTl9UT19TVVBQTElFUn0gJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSwgJHtsaW5rZWRJc3N1ZS5zdGF0dXN9XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBSRVNUIEFQSSBwZXIgcHVsaXppYSBjYWNoZSBpc3N1ZSBsaW5rZWQgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RNZXRob2QgPSBcIkdFVFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgLypTY3JpcHQgVmFyaWFibGVzKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vUGVyIHRlc3QgZGEgY29uc29sZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy0zMjUzNVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vY2xlYXJDYWNoZS90aWNrZXRrZXkvXCIgKyBsaW5rZWRJc3N1ZS5rZXlcbiAgICAgICAgICAgICAgICAgICAgICAgIFVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgICAgICAgICAgICAgICAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIkNvdWxkIG5vdCB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfVxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
            </function>
            <function type="class">
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="maxAllowed-integerValue">50</arg>
              <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="field">customfield_22758</arg>
              <arg name="scopeType">SAME</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
              <arg name="field3">customfield_23235</arg>
              <arg name="field2">customfield_22757</arg>
              <arg name="scopeSource-jql"></arg>
              <arg name="field4">customfield_22813</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
  </common-actions>
  <steps>
    <step id="1" name="Open">
      <meta name="jira.status.id">1</meta>
      <actions>
<common-action id="51" />
<common-action id="751" />
<common-action id="541" />
<common-action id="861" />
        <action id="11" name="Richiedi Preventivo" view="fieldscreen">
          <meta name="opsbar-sequence">40</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">20500</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">779b4faf-8820-4019-968f-077567668869</arg>
                <arg name="FIELD_NOTES">YCFgT1BfQVNTRVQgc2hvdWxkIGJlIG5vdCBudWxs</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJjZlZhbHVlc1snT1BfQVNTRVQnXSAhPSBudWxsIiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="8">
              <post-functions>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="append.value"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.value">Yes</arg>
                  <arg name="field.name">customfield_22681</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="field.type">8</arg>
                  <arg name="full.module.key">com.riadalabs.jira.plugins.insightinsight-post-function</arg>
                  <arg name="field.groovyScript">import com.atlassian.jira.component.ComponentAccessor;
import java.util.ArrayList;
import com.atlassian.jira.config.util.JiraHome
import com.atlassian.jira.issue.Issue
import com.atlassian.jira.issue.MutableIssue;
import com.atlassian.jira.event.type.EventDispatchOption;

Properties relativePath = new Properties()
File relativePathFile = new File('/var/atlassian/application-data/jira/insightPathToScript.properties')
relativePathFile.withInputStream {
	relativePath.load(it)
}
Properties properties = new Properties()
File propertiesFile = new File('/var/atlassian/application-data/shared/scripts/opproject.properties')
propertiesFile.withInputStream {
                properties.load(it)
}

/* Get Insight Object Facade from plugin accessor */
Class objectFacadeClass = ComponentAccessor.getPluginAccessor().getClassLoader().findClass(&quot;com.riadalabs.jira.plugins.insight.channel.external.api.facade.ObjectFacade&quot;); 
def objectFacade = ComponentAccessor.getOSGiComponentInstanceOfType(objectFacadeClass);
 
/* Get Insight Object Type Facade from plugin accessor */
Class objectTypeFacadeClass = ComponentAccessor.getPluginAccessor().getClassLoader().findClass(&quot;com.riadalabs.jira.plugins.insight.channel.external.api.facade.ObjectTypeFacade&quot;); 
def objectTypeFacade = ComponentAccessor.getOSGiComponentInstanceOfType(objectTypeFacadeClass);
 
/* Get Insight Object Attribute Facade from plugin accessor */
Class objectTypeAttributeFacadeClass = ComponentAccessor.getPluginAccessor().getClassLoader().findClass(&quot;com.riadalabs.jira.plugins.insight.channel.external.api.facade.ObjectTypeAttributeFacade&quot;); 
def objectTypeAttributeFacade = ComponentAccessor.getOSGiComponentInstanceOfType(objectTypeAttributeFacadeClass);

/* Get Insight IQL Facade from plugin accessor */
Class iqlFacadeClass = ComponentAccessor.getPluginAccessor().getClassLoader().findClass(&quot;com.riadalabs.jira.plugins.insight.channel.external.api.facade.IQLFacade&quot;); 
def iqlFacade = ComponentAccessor.getOSGiComponentInstanceOfType(iqlFacadeClass);

Class objectAttributeBeanFactoryClass = ComponentAccessor.getPluginAccessor().getClassLoader().findClass(&quot;com.riadalabs.jira.plugins.insight.services.model.factory.ObjectAttributeBeanFactory&quot;); 
def objectAttributeBeanFactory = ComponentAccessor.getOSGiComponentInstanceOfType(objectAttributeBeanFactoryClass);

def OPAA = properties['ischema.aa.id'].toString().toInteger()
def DO = properties['ischema.dbo.id'].toString().toInteger()
def quoteLabourRatesField = ComponentAccessor.getCustomFieldManager().getCustomFieldObjectsByName(properties['cf.quoteLabourRates'].toString())[0];
def lumpSumOfferField = ComponentAccessor.getCustomFieldManager().getCustomFieldObjectsByName(properties['cf.lumpSumOffer'].toString())[0];
def OnSiteRateObjects = new ArrayList();

def ONSITE_RATE_REPORT_OBJ_TYPE = properties['iobj.onSiteRateReport'].toString().toInteger()
def ONSITE_RATE_REPORT_ATTR_NAME = properties['iobj.onSiteRateReport.name.id'] ? properties['iobj.onSiteRateReport.name.id'].toString().toInteger() : 2766
def ONSITE_RATE_REPORT_ATTR_RATE_REF = properties['iobj.onSiteRateReport.rateRef.id'] ? properties['iobj.onSiteRateReport.rateRef.id'].toString().toInteger() : 4340
def ONSITE_RATE_REPORT_ATTR_APPLIED_TO = properties['iobj.onSiteRateReport.appliedTo.id'] ? properties['iobj.onSiteRateReport.appliedTo.id'].toString().toInteger() : 3194
def ONSITE_RATE_REPORT_ATTR_SAP = properties['iobj.onSiteRateReport.sap.id'] ? properties['iobj.onSiteRateReport.sap.id'].toString().toInteger() : 3196
def ONSITE_RATE_REPORT_ATTR_QUOTE_FROM_TKT = properties['iobj.onSiteRateReport.quoteFromTkt.id'] ? properties['iobj.onSiteRateReport.quoteFromTkt.id'].toString().toInteger() : 3203
def ONSITE_RATE_REPORT_ATTR_QUANTITY_CUSTOMER = properties['iobj.onSiteRateReport.qtyCustomer.id'] ? properties['iobj.onSiteRateReport.qtyCustomer.id'].toString().toInteger() : 3189

Issue issue = issue
log.info properties['cf.lumpSumOffer'].toString()
def lumpSum=&quot;false&quot;

if(issue.getCustomFieldValue(lumpSumOfferField) != null &amp;&amp; issue.getCustomFieldValue(lumpSumOfferField).toString().equals(&quot;Yes&quot;)){
    lumpSum=&quot;true&quot;
}else{
    lumpSum=&quot;false&quot;
}

log.info &quot;objectType=\&quot;Rates\&quot; AND \&quot;QUOTE_ENABLED\&quot; = true AND LUMPSUM_OFFER = &quot; + lumpSum
def objects = iqlFacade.findObjectsByIQLAndSchema(DO, &quot;objectType=\&quot;Rates\&quot; AND \&quot;QUOTE_ENABLED\&quot; = true AND LUMPSUM_OFFER = &quot; + lumpSum); // See the complete list of possible IQL on the Insight Query Language documentation page
for (obj in objects){
	log.info obj.toString()
    obj = obj.toString()
    def rateName = obj.substring(0,obj.indexOf('(')-1)
    def rateKey = obj.substring(obj.indexOf('(')+1,obj.indexOf(')'))
    
    /*Set Name*/
    def objectTypeOnSiteRateReport = objectTypeFacade.loadObjectTypeBean(ONSITE_RATE_REPORT_OBJ_TYPE);
    def newObjectBean = objectTypeOnSiteRateReport.createMutableObjectBean();
    
    def objectAttributeBeans = new ArrayList();
    log.info ONSITE_RATE_REPORT_ATTR_NAME.toString()
    def nameObjectTypeAttributeBean = objectTypeAttributeFacade.loadObjectTypeAttributeBean(ONSITE_RATE_REPORT_ATTR_NAME); 
    
    objectAttributeBeans.add(objectAttributeBeanFactory.createObjectAttributeBeanForObject(newObjectBean, nameObjectTypeAttributeBean, rateName));
    
    newObjectBean.setObjectAttributeBeans(objectAttributeBeans);
        
    /*Set APPLIED_TO*/
    def appliedToObjectTypeAttributeBean = objectTypeAttributeFacade.loadObjectTypeAttributeBean(ONSITE_RATE_REPORT_ATTR_APPLIED_TO); 
    
    objectAttributeBeans.add(objectAttributeBeanFactory.createObjectAttributeBeanForObject(newObjectBean, appliedToObjectTypeAttributeBean, &quot;BOTH&quot;));
    
    newObjectBean.setObjectAttributeBeans(objectAttributeBeans);
    
    /*Set SAP*/
    def sapObjectTypeAttributeBean = objectTypeAttributeFacade.loadObjectTypeAttributeBean(ONSITE_RATE_REPORT_ATTR_SAP); 
    
    objectAttributeBeans.add(objectAttributeBeanFactory.createObjectAttributeBeanForObject(newObjectBean, sapObjectTypeAttributeBean, &quot;false&quot;));
    
    newObjectBean.setObjectAttributeBeans(objectAttributeBeans);
    
    /*Set QUOTE_FROM_TKT*/
    def quoteObjectTypeAttributeBean = objectTypeAttributeFacade.loadObjectTypeAttributeBean(ONSITE_RATE_REPORT_ATTR_QUOTE_FROM_TKT); 
    
    objectAttributeBeans.add(objectAttributeBeanFactory.createObjectAttributeBeanForObject(newObjectBean, quoteObjectTypeAttributeBean, &quot;true&quot;));
    
    newObjectBean.setObjectAttributeBeans(objectAttributeBeans);
    
    /*Set QUANTITY_CUSTOMER*/
    def qtyCustomerObjectTypeAttributeBean = objectTypeAttributeFacade.loadObjectTypeAttributeBean(ONSITE_RATE_REPORT_ATTR_QUANTITY_CUSTOMER); 
    
    objectAttributeBeans.add(objectAttributeBeanFactory.createObjectAttributeBeanForObject(newObjectBean, qtyCustomerObjectTypeAttributeBean, &quot;1&quot;));
    
    newObjectBean.setObjectAttributeBeans(objectAttributeBeans);
    
    
    /* Store the object into Insight. The new ObjectBean will be updated with an unique ID */
    try {
        newObjectBean = objectFacade.storeObjectBean(newObjectBean);
        log.warn(&quot;newObjectBean: &quot; + newObjectBean);
    } catch (Exception vie) {
        log.warn(&quot;Could not create issue due to validation exception:&quot; + vie.getMessage());
    }
    
    /* Update RATE_REF on the newObject */		        
    def objectTypeAttributeBean = objectTypeAttributeFacade.loadObjectTypeAttributeBean(ONSITE_RATE_REPORT_ATTR_RATE_REF).createMutable() //The id of the attribute
    
    /* Create the new attribute bean based on the value */
    def newObjectAttributeBean = objectAttributeBeanFactory.createObjectAttributeBeanForObject(newObjectBean, objectTypeAttributeBean, rateKey);
    /* Load the attribute bean */
    def objectAttributeBean = objectFacade.loadObjectAttributeBean(newObjectBean.getId(), rateKey);
    if (objectAttributeBean != null) {
        /* If attribute exist reuse the old id for the new attribute */
        newObjectAttributeBean.setId(objectAttributeBean.getId());
    }
    /* Store the object attribute into Insight. */
    try {
        objectTypeAttributeBean = objectFacade.storeObjectAttributeBean(newObjectAttributeBean);
    } catch (Exception vie) {
        log.warn(&quot;Could not update object attribute due to validation exception:&quot; + vie.getMessage());
    }  
    
    OnSiteRateObjects.add(newObjectBean)
}
log.info (&quot;OnSiteRateObjects: &quot; + OnSiteRateObjects)
def currentUser = ComponentAccessor.getJiraAuthenticationContext().getLoggedInUser()

if (!OnSiteRateObjects.isEmpty()) {
    MutableIssue mi = (MutableIssue) issue;
    mi.setCustomFieldValue(quoteLabourRatesField, OnSiteRateObjects);
    ComponentAccessor.getIssueManager().updateIssue(currentUser, mi, EventDispatchOption.DO_NOT_DISPATCH, false);
}            </arg>
                  <arg name="field.filepath"></arg>
                  <arg name="class.name">com.riadalabs.jira.plugins.insight.services.jira.postfunction.InsightPostFunction</arg>
                  <arg name="field.description">OP: Automatically create Labour Rates for offer Tkt</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
                <function type="class">
                  <arg name="field.copyFieldSource2"></arg>
                  <arg name="field.copyFieldSource1">customfield_22603</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="field.createTargetValue1"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.copyFieldMode1">OVERWRITE</arg>
                  <arg name="field.copyFieldDestination1">customfield_22656</arg>
                  <arg name="field.copyFieldSeparator1"></arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiescopyValueFromOtherField-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.CopyValueFromOtherFieldPostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">85f36110-414c-4e65-a9e9-d180169c41b4</arg>
                  <arg name="FIELD_ACTION">251 Richiedi Preventivo a Fornitore</arg>
                  <arg name="FIELD_NOTES">YCFgRmFzdCB0cmFuc2FjdCB0byAiV2FpdGluZyBmb3IgU3VwcGxpZXIgcXVvdGUiIGlmIFN1cHBsaWVyIGlzIGV2YWx1YXRlZCBhbmQgb2ZmZXIgaGFzIGJlZW4gZ2VuZXJhdGVkIGZyb20gYSByZXBhaXIgdGlja2V0</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.FasttrackTransition</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.FasttrackTransition</arg>
                  <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbmRlZiB0cm92YXRvPWZhbHNlXG5mb3IgKHMgaW4gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnN1cHBsaWVyJ10udG9TdHJpbmcoKSkpe1xuICAgIGxvZy5kZWJ1ZyBcInM6IFwiICsgc1xuICAgIGlmIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHMpICE9IG51bGwpe1xuICAgICAgICBsb2cuZGVidWcgXCJpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHMpOiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocylcbiAgICAgICAgdHJvdmF0bz10cnVlXG4gICAgfVxufVxubG9nLmRlYnVnIFwiY2ZWYWx1ZXNbJ09QX1RLVF9HRU5FUkFURURfRlJPTV9SRVBBSVInXT8udmFsdWU6IFwiICsgY2ZWYWx1ZXNbJ09QX1RLVF9HRU5FUkFURURfRlJPTV9SRVBBSVInXT8udmFsdWVcbmlmKGNmVmFsdWVzWydPUF9US1RfR0VORVJBVEVEX0ZST01fUkVQQUlSJ10/LnZhbHVlID09ICdZZXMnICYmIHRyb3ZhdG8pe1xuICAgIHRyb3ZhdG89dHJ1ZVxufWVsc2V7XG4gICAgdHJvdmF0bz1mYWxzZVxufVxubG9nLmRlYnVnIFwidHJvdmF0bzogXCIgKyB0cm92YXRvXG5yZXR1cm4gdHJvdmF0byIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_TRANSITION_OPTIONS"></arg>
                  <arg name="events"></arg>
                  <arg name="FIELD_ADDITIONAL_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxuaW1wb3J0IGphdmEuc3FsLlRpbWVzdGFtcFxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5cbmRlZiBkYXRlQ2YgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9SRVFVRVNURURfREFURVwiKVswXVxuSXNzdWVJbmRleGluZ1NlcnZpY2UgaXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5cbmRhdGVDZi51cGRhdGVWYWx1ZShudWxsLCBpc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShkYXRlQ2YpLCBuZXcgVGltZXN0YW1wKChuZXcgRGF0ZSgpKS50aW1lKSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcbmlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgoaXNzdWUpXG5cbi8vaXNzdWUuc2V0Q3VzdG9tRmllbGRWYWx1ZShkYXRlQ2YsIG5ldyBUaW1lc3RhbXAoKG5ldyBEYXRlKCkpLnRpbWUpKSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="21" name="Tkt Risolto Telefonicamente">
          <meta name="opsbar-sequence">30</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_NOTES">YCFgT1A6IEVuYWJsZWQgb25seSBmb3IgTWFpbnRlbmFuY2UgVGlja2V0</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgaXNzdWUuaXNzdWVUeXBlLm5hbWUgPT0gJ01haW50ZW5hbmNlIFRpY2tldCd8fHw=</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="7">
              <post-functions>
                <function type="class">
                  <arg name="field.name">resolution</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
                  <arg name="field.value">1</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="31" name="Converti in Nuova Installazione">
          <meta name="opsbar-sequence">10</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">58d7281a-ca18-4098-990f-76fde0470684</arg>
                <arg name="FIELD_NOTES">YCFgQ2hhbmdlIHRvIE5ldyBJbnN0YWxsYXRpb24gaWYgaXNzdWUgdHlwZSA9IE1haW50ZW5hbmNl</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnTWFpbnRlbmFuY2UgVGlja2V0JyIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="1">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">7918c0e3-5dc6-49c1-b2dc-dac5aa760ae0</arg>
                  <arg name="FIELD_NOTES">YCFgT1A6IENoYW5nZSBpc3N1ZSB0eXBlIGZyb20gTWFpbnRlbmFuY2UgdG8gTmV3IEluc3RhbGxhdGlvbg==</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3JcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaXNzdWV0eXBlLklzc3VlVHlwZVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG4vKiBEZWZpbmUgYSBMb2dnZXIgKi9cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5kZWYgY29uc3RhbnRzTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbnN0YW50c01hbmFnZXIoKVxuXG5Jc3N1ZVR5cGUgdGFyZ2V0SXNzdWVUeXBlID0gbnVsbFxuZGVmIGlzc3VlVHlwZVxuXG5sb2cuZGVidWcgXCJJc3N1ZVR5cGUgb2xkID0gXCIgKyBpc3N1ZS5pc3N1ZVR5cGUubmFtZVxuXG5kZWYgY29sbGVjdGlvbiA9IGNvbnN0YW50c01hbmFnZXIuZ2V0QWxsSXNzdWVUeXBlT2JqZWN0cygpXG5kZWYgaXRlcmF0b3IgPSBjb2xsZWN0aW9uLml0ZXJhdG9yKClcbndoaWxlKGl0ZXJhdG9yLmhhc05leHQoKSl7XG5cdGlzc3VlVHlwZSA9IGl0ZXJhdG9yLm5leHQoKVxuXHRpZihpc3N1ZVR5cGUubmFtZSA9PSBwcm9wZXJ0aWVzWydpdC5uZXdJbnN0YWxsYXRpb24nXS50b1N0cmluZygpKXtcblx0XHR0YXJnZXRJc3N1ZVR5cGUgPSBpc3N1ZVR5cGVcblx0fVxufVxuXG5sb2cuZGVidWcgdGFyZ2V0SXNzdWVUeXBlLm5hbWVcbmlzc3VlLnNldElzc3VlVHlwZU9iamVjdCh0YXJnZXRJc3N1ZVR5cGUpXG5sb2cuZGVidWcgXCJJc3N1ZVR5cGUgbmV3ID0gXCIgKyBpc3N1ZS5pc3N1ZVR5cGUubmFtZSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3IKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaXNzdWV0eXBlLklzc3VlVHlwZQppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQoKLyogRGVmaW5lIGEgTG9nZ2VyICovCmRlZiBDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRykKCmRlZiBjb25zdGFudHNNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29uc3RhbnRzTWFuYWdlcigpCgpJc3N1ZSBpc3N1ZSA9IGlzc3VlICAvLyBUaGlzIHdoYXQgSSB3YXMgbG9va2luZyBmb3IgOi0pLiBBcyBzaW1wbGUgYXMgaXQgaXMsIGJ1dCBJIGRpZG4ndCBrbm93IHRoYXQuCgpJc3N1ZVR5cGUgdGFyZ2V0SXNzdWVUeXBlID0gbnVsbApkZWYgaXNzdWVUeXBlCgpsb2cuZGVidWcgIklzc3VlVHlwZSBvbGQgPSAiICsgaXNzdWUuaXNzdWVUeXBlLm5hbWUKCmRlZiBjb2xsZWN0aW9uID0gY29uc3RhbnRzTWFuYWdlci5nZXRBbGxJc3N1ZVR5cGVPYmplY3RzKCkKZGVmIGl0ZXJhdG9yID0gY29sbGVjdGlvbi5pdGVyYXRvcigpCndoaWxlKGl0ZXJhdG9yLmhhc05leHQoKSl7Cglpc3N1ZVR5cGUgPSBpdGVyYXRvci5uZXh0KCkKCWlmKGlzc3VlVHlwZS5uYW1lID09IHByb3BlcnRpZXNbJ2l0Lm5ld0luc3RhbGxhdGlvbiddLnRvU3RyaW5nKCkpewoJCXRhcmdldElzc3VlVHlwZSA9IGlzc3VlVHlwZQoJfQp9Cgpsb2cuZGVidWcgdGFyZ2V0SXNzdWVUeXBlLm5hbWUKaXNzdWUuc2V0SXNzdWVUeXBlT2JqZWN0KHRhcmdldElzc3VlVHlwZSkKbG9nLmRlYnVnICJJc3N1ZVR5cGUgbmV3ID0gIiArIGlzc3VlLmlzc3VlVHlwZS5uYW1l</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE"></arg>
                </function>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.15.1</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="fieldValue">New Installation</arg>
                  <arg name="preconditionMode-textValue">DISCARD</arg>
                  <arg name="fieldsList">issuetype</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="append.value"></arg>
                  <arg name="maxAllowed-integerValue">50</arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.value">New Installation Ticket</arg>
                  <arg name="field.name">summary</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="append.value"></arg>
                  <arg name="maxAllowed-integerValue">50</arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.value">New Installation Ticket</arg>
                  <arg name="field.name">customfield_22716</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="41" name="Converti in Manutenzione Riparativa">
          <meta name="opsbar-sequence">20</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_NOTES">YCFgQ2hhbmdlIHRvIE1haW50ZW5hbmNlIGlmIGlzc3VlIHR5cGUgPSBOZXcgSW5zdGFsbGF0aW9u</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgaXNzdWUuaXNzdWVUeXBlLm5hbWUgPT0gJ05ldyBJbnN0YWxsYXRpb24nfHx8</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="1">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">bee29a4ffd9e55a6f278af205f741799fc63bbef</arg>
                  <arg name="FIELD_NOTES">YCFgT1A6IENoYW5nZSBpc3N1ZSB0eXBlIGZyb20gTmV3IEluc3RhbGxhdGlvbiB0byBNYWludGVuYW5jZQ==</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3JcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaXNzdWV0eXBlLklzc3VlVHlwZVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG4vKiBEZWZpbmUgYSBMb2dnZXIgKi9cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5kZWYgY29uc3RhbnRzTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbnN0YW50c01hbmFnZXIoKVxuXG5Jc3N1ZVR5cGUgdGFyZ2V0SXNzdWVUeXBlID0gbnVsbFxuZGVmIGlzc3VlVHlwZVxuXG5sb2cuZGVidWcgXCJJc3N1ZVR5cGUgb2xkID0gXCIgKyBpc3N1ZS5pc3N1ZVR5cGUubmFtZVxubG9nLmRlYnVnIHByb3BlcnRpZXNbJ2l0Lm1haW50ZW5hbmNlJ10udG9TdHJpbmcoKVxuZGVmIGNvbGxlY3Rpb24gPSBjb25zdGFudHNNYW5hZ2VyLmdldEFsbElzc3VlVHlwZU9iamVjdHMoKVxuZGVmIGl0ZXJhdG9yID0gY29sbGVjdGlvbi5pdGVyYXRvcigpXG53aGlsZShpdGVyYXRvci5oYXNOZXh0KCkpe1xuXHRpc3N1ZVR5cGUgPSBpdGVyYXRvci5uZXh0KClcblx0aWYoaXNzdWVUeXBlLm5hbWUgPT0gKHByb3BlcnRpZXNbJ2l0Lm1haW50ZW5hbmNlJ10gPyBwcm9wZXJ0aWVzWydpdC5tYWludGVuYW5jZSddLnRvU3RyaW5nKCkgOiBcIk1haW50ZW5hbmNlIFRpY2tldFwiKSl7XG5cdFx0dGFyZ2V0SXNzdWVUeXBlID0gaXNzdWVUeXBlXG5cdH1cbn1cblxubG9nLmRlYnVnIHRhcmdldElzc3VlVHlwZS5uYW1lXG5pc3N1ZS5zZXRJc3N1ZVR5cGVPYmplY3QodGFyZ2V0SXNzdWVUeXBlKVxubG9nLmRlYnVnIFwiSXNzdWVUeXBlIG5ldyA9IFwiICsgaXNzdWUuaXNzdWVUeXBlLm5hbWUiLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3IKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaXNzdWV0eXBlLklzc3VlVHlwZQppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQoKLyogRGVmaW5lIGEgTG9nZ2VyICovCmRlZiBDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRykKCmRlZiBjb25zdGFudHNNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29uc3RhbnRzTWFuYWdlcigpCgpJc3N1ZSBpc3N1ZSA9IGlzc3VlICAvLyBUaGlzIHdoYXQgSSB3YXMgbG9va2luZyBmb3IgOi0pLiBBcyBzaW1wbGUgYXMgaXQgaXMsIGJ1dCBJIGRpZG4ndCBrbm93IHRoYXQuCgpJc3N1ZVR5cGUgdGFyZ2V0SXNzdWVUeXBlID0gbnVsbApkZWYgaXNzdWVUeXBlCgpsb2cuZGVidWcgIklzc3VlVHlwZSBvbGQgPSAiICsgaXNzdWUuaXNzdWVUeXBlLm5hbWUKbG9nLmRlYnVnIHByb3BlcnRpZXNbJ2l0Lm1haW50ZW5hbmNlJ10udG9TdHJpbmcoKQpkZWYgY29sbGVjdGlvbiA9IGNvbnN0YW50c01hbmFnZXIuZ2V0QWxsSXNzdWVUeXBlT2JqZWN0cygpCmRlZiBpdGVyYXRvciA9IGNvbGxlY3Rpb24uaXRlcmF0b3IoKQp3aGlsZShpdGVyYXRvci5oYXNOZXh0KCkpewoJaXNzdWVUeXBlID0gaXRlcmF0b3IubmV4dCgpCglpZihpc3N1ZVR5cGUubmFtZSA9PSAocHJvcGVydGllc1snaXQubWFpbnRlbmFuY2UnXSA/IHByb3BlcnRpZXNbJ2l0Lm1haW50ZW5hbmNlJ10udG9TdHJpbmcoKSA6ICJNYWludGVuYW5jZSBUaWNrZXQiKSl7CgkJdGFyZ2V0SXNzdWVUeXBlID0gaXNzdWVUeXBlCgl9Cn0KCmxvZy5kZWJ1ZyB0YXJnZXRJc3N1ZVR5cGUubmFtZQppc3N1ZS5zZXRJc3N1ZVR5cGVPYmplY3QodGFyZ2V0SXNzdWVUeXBlKQpsb2cuZGVidWcgIklzc3VlVHlwZSBuZXcgPSAiICsgaXNzdWUuaXNzdWVUeXBlLm5hbWU=</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE"></arg>
                </function>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.15.1</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="fieldValue">Maintenance Ticket</arg>
                  <arg name="preconditionMode-textValue">DISCARD</arg>
                  <arg name="fieldsList">issuetype</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="append.value"></arg>
                  <arg name="maxAllowed-integerValue">50</arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.value">Maintenance Ticket</arg>
                  <arg name="field.name">customfield_22716</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="append.value"></arg>
                  <arg name="maxAllowed-integerValue">50</arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.value">Maintenance Ticket</arg>
                  <arg name="field.name">summary</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="61" name="Chiusura Massiva FAAC Service">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <results>
            <unconditional-result old-status="null" status="null" step="7">
              <post-functions>
                <function type="class">
                  <arg name="field.name">resolution</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
                  <arg name="field.value">6</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="401" name="Clona Tkt" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">20401</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">c659704c-9678-4844-9a05-6f3497e391e7</arg>
                <arg name="FIELD_NOTES">YCFgRW5hYmxlZCBvbmx5IGZvciBSZXBhaXIgYW5kIE5ldyBJbnN0YWxsYXRpb24=</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnTWFpbnRlbmFuY2UgVGlja2V0JyB8fCAoaXNzdWUuaXNzdWVUeXBlLm5hbWUgPT0gJ05ldyBJbnN0YWxsYXRpb24nICYmIGNmVmFsdWVzWydPUF9BU1NFVCddICE9IG51bGwpIiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="1">
              <post-functions>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="fieldValue">New Installation</arg>
                  <arg name="preconditionMode-textValue">DISCARD</arg>
                  <arg name="fieldsList">issuetype</arg>
                </function>
                <function type="class">
                  <arg name="field.existingAttachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="targetIssueTypeDefinedByCfSelection"></arg>
                  <arg name="issueTypeId">12301</arg>
                  <arg name="scopeType">ISSUE_LINKING</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="field.attachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="targetIssueType">SELECTED_ISSUE_TYPE</arg>
                  <arg name="scopeSource-jql"></arg>
                  <arg name="createIssueAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.copyTransitionComment">false</arg>
                  <arg name="targetProjectType">SAME</arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="transitionAttachmentsOperation">copy</arg>
                  <arg name="field.issueAssignTo">ASSIGN_TO_UNASSIGNED</arg>
                  <arg name="targetProjectSelectedCustomField"></arg>
                  <arg name="destination-scopeTarget">LINK_END</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiescreatelinkedissue-function</arg>
                  <arg name="scopeDestination-linkEnd">10003:OUTWARD</arg>
                  <arg name="field.enablingCustomFieldId"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="subFunctions">[{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_21909&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21909&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22600&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22600&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22822&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22822&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22601&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22601&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22603&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22603&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22663&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22663&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22634&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22634&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22651&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22651&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22700&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22700&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22606&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22606&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22607&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22607&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22629&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22629&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22652&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22652&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;description&quot;,&quot;destinationFieldId&quot;:&quot;description&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22627&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22627&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22620&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22620&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22668&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22668&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23602&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23203&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22814&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22814&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23237&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23237&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;issuekey&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23243&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;YES&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23238&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22702&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22702&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22703&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22703&quot;}}]</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.createlinkedissue.CreateLinkedIssueFunction</arg>
                  <arg name="projectId">11228</arg>
                </function>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="fieldValue">Maintenance Ticket</arg>
                  <arg name="preconditionMode-textValue">DISCARD</arg>
                  <arg name="fieldsList">issuetype</arg>
                </function>
                <function type="class">
                  <arg name="field.existingAttachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="targetIssueTypeDefinedByCfSelection"></arg>
                  <arg name="issueTypeId">13001</arg>
                  <arg name="scopeType">ISSUE_LINKING</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="field.attachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="targetIssueType">SELECTED_ISSUE_TYPE</arg>
                  <arg name="scopeSource-jql"></arg>
                  <arg name="createIssueAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.copyTransitionComment">false</arg>
                  <arg name="targetProjectType">SAME</arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="transitionAttachmentsOperation">copy</arg>
                  <arg name="field.issueAssignTo">ASSIGN_TO_UNASSIGNED</arg>
                  <arg name="targetProjectSelectedCustomField"></arg>
                  <arg name="destination-scopeTarget">LINK_END</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiescreatelinkedissue-function</arg>
                  <arg name="scopeDestination-linkEnd">10003:OUTWARD</arg>
                  <arg name="field.enablingCustomFieldId"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="subFunctions">[{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_21909&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21909&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22600&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22600&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22822&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22822&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22601&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22601&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22603&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22603&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22663&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22663&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22634&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22634&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22651&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22651&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22700&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22700&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22606&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22606&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22607&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22607&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22629&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22629&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22652&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22652&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;description&quot;,&quot;destinationFieldId&quot;:&quot;description&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22627&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22627&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22620&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22620&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22668&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22668&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23602&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23203&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22814&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22814&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23237&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23237&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;issuekey&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23243&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;YES&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23238&quot;}}]</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.createlinkedissue.CreateLinkedIssueFunction</arg>
                  <arg name="projectId">11228</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_23602</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="521" name="Assegna Impianto" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">20116</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">a5619fcc-6244-4bc5-929e-51021b061c98</arg>
                <arg name="FIELD_NOTES">YCFgRW5hYmxlZCBvbmx5IGZvciBuZXcgaW5zdCB0aWNrZXRzIGluIG9yZGVyIHRvIGFzc2lnbiBBU1NFVCBhbmQgZ2VuZXJhdGUgKG9yIHJlLWdlbmVyYXRlKSBEb2Nz</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiIoaXNzdWUuaXNzdWVUeXBlLm5hbWUgPT0gJ05ldyBJbnN0YWxsYXRpb24nIHx8IGlzc3VlLmlzc3VlVHlwZS5uYW1lID09ICdNYWludGVuYW5jZSBUaWNrZXQnKSAmJiBjZlZhbHVlc1snT1BfU0FQX1NFUlZJQ0VfTk9USUZJQ0FUSU9OJ10gPT0gbnVsbCAmJiBjZlZhbHVlc1snT1BfQ0xPTkVEX1RLVCddPy52YWx1ZSA9PSAnWUVTJyIsInNjcmlwdFBhdGgiOm51bGx9</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">834be206-cd12-463a-ac63-b04b36eee40d</arg>
              <arg name="FIELD_NOTES">YCFgR2VuZXJhdGUgU04gb24gY2xvbmVkIHRrdA==</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuZGVmIFNOID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1NBUF9TRVJWSUNFX05PVElGSUNBVElPTlwiKVswXVxuZGVmIHJlcXVlc3RNZXRob2RcbmRlZiBiYXNlVVJMXG5cblVSTCB1cmxcbkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb25cblxuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShTTikgPT0gbnVsbCAmJiBpc3N1ZS5pc3N1ZVR5cGUubmFtZSAhPSBcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0XCIpe1xuICAgIHJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcblxuICAgIGRlZiBib2R5X3JlcSA9IFtdXG4gICAgYm9keV9yZXEgPSBbXG4gICAgICAgIFwiaXNzdWVLZXlcIjogaXNzdWUua2V5LFxuICAgICAgICBcInN0YXR1c1wiOiBcIk9QRVwiXG4gICAgXSBcblxuICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL2FmdGVyL3NhbGVzL2NyZWF0ZS9zZXJ2aWNlL25vdGlmaWNhdGlvblwiXG5cbiAgICBsb2cuZGVidWcgXCJiYXNlVVJMIFNOOiBcIiArIGJhc2VVUkxcbiAgICBsb2cuZGVidWcgXCJib2R5X3JlcSBTTjogXCIgKyBib2R5X3JlcVxuICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cbiAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDFcIikpe1xuICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICBcbiAgICAgICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxuICAgICAgICBsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXG5cbiAgICAgICAgZGVmIGpzb25TbHVycGVyID0gbmV3IEpzb25TbHVycGVyKClcbiAgICAgICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcbiAgICAgICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICBcbiAgICAgICAgbG9nLmRlYnVnIFwibWVzc2FnZTogXCIgKyAganNvbl9vYmplY3QubWVzc2FnZVxuICAgICAgICBsb2cuZGVidWcgXCJlcnJvcnM6IFwiICsgIGpzb25fb2JqZWN0LmVycm9ycy50b1N0cmluZygpXG5cbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJPUC1TQVAtU04tVVBEQVRFXCIpXG4gICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsganNvbl9vYmplY3QuZXJyb3JzWzBdKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgfVxufVxuICIsInNjcmlwdFBhdGgiOm51bGx9</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">7c1b64f1-5b3a-452d-974f-03139ccb89ff</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IERvYyBUZW1wbGF0ZSBnZW5lcmF0aW9uIC0gc2UgTmV3IEluc3RhbGxhdGlvbiBPUiBGaXJzdCBUaWNrZXQgPSB0cnVl</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5Xb3JrZmxvd0V4Y2VwdGlvbjtcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvblxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyO1xuaW1wb3J0IGdyb292eS5qc29uLlN0cmVhbWluZ0pzb25CdWlsZGVyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5DdXN0b21GaWVsZE1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3I7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMuY29kZWMuYmluYXJ5LkJhc2U2NDtcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5XG5pbXBvcnQgZ3Jvb3Z5eC5uZXQuaHR0cC5IVFRQQnVpbGRlclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcblxuZGVmIHJlcXVlc3RNZXRob2RcbmRlZiBiYXNlVVJMXG5cbmRlZiBmaXJzdFRpY2tldCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuZmlyc3RUa3QnXS50b1N0cmluZygpKVswXVxuXG5sb2cuZGVidWcgaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZVxubG9nLmRlYnVnIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZmlyc3RUaWNrZXQpXG5cblxuLyogUkVTVCBBUEkgcGVyIEludmlvIE5vdGlmaWNhIEVtYWlsIE9OU0lURV9SRVBPUlQgKi9cbnJlcXVlc3RNZXRob2QgPSBcIkdFVFwiO1xuXG5pZihpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0Lm5ld0luc3RhbGxhdGlvbiddKSB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGZpcnN0VGlja2V0KSE9bnVsbCl7XG4gICAgZGVmIGZpcnN0X3RpY2tldD1mYWxzZVxuICAgIGRlZiB0ZW1wbGF0ZT1cIlwiXG4gICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShmaXJzdFRpY2tldCkhPW51bGwpe1xuICAgICAgICBmaXJzdF90aWNrZXQ9dHJ1ZVxuICAgICAgICB0ZW1wbGF0ZT1cIkZJUlNUX1RJQ0tFVCU3Q01BTlVGQUNUVVJFUlwiXG4gICAgfWVsc2V7XG4gICAgICAgIHRlbXBsYXRlPVwiTkVXX0lOU1RBTExBVElPTl9DUkVBVEVfVEtUJTdDTUFOVUZBQ1RVUkVSXCJcbiAgICB9XG4gICAgXG4gICAgaWYoaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5uZXdJbnN0YWxsYXRpb24nXSkpe1xuICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvYXV0b21hdGlvbi9kb2N1bWVudC9nZW5lcmF0aW9uL2NoZWNrP0lTU1VFX0tFWT1cIisgaXNzdWUua2V5ICtcIiZET0NfQ0FURUdPUlk9XCIgKyB0ZW1wbGF0ZSArIFwiJkVOQUJMRURfRk9SX0ZJUlNUX1RJQ0tFVD1cIitmaXJzdF90aWNrZXQrXCImSU1QT1JUX0ZST009XCJcbiAgICB9ZWxzZXtcbiAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vZG9jdW1lbnQvZ2VuZXJhdGlvbi9jaGVjaz9JU1NVRV9LRVk9XCIrIGlzc3VlLmtleSArXCImRE9DX0NBVEVHT1JZPVwiICsgdGVtcGxhdGUgKyBcIiZFTkFCTEVEX0ZPUl9GSVJTVF9USUNLRVQ9XCIrZmlyc3RfdGlja2V0K1wiJklNUE9SVF9GUk9NPU9QX0FTU0VUXCJcbiAgICB9XG4gICAgXG4gICAgbG9nLmRlYnVnIGJhc2VVUkxcbiAgICBVUkwgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cdGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICBcbiAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICBsb2cuZGVidWcgXCJFcnJvclN0cmVhbTogXCIgKyBjb25uZWN0aW9uLmdldEVycm9yU3RyZWFtKCkudG9TdHJpbmcoKVxuICAgICAgICBsb2cuZGVidWcgXCJnZXRIZWFkZXJGaWVsZHMoKTogXCIgKyBjb25uZWN0aW9uLmdldEhlYWRlckZpZWxkcygpXG4gICAgICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHRcbiAgICAgICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xuXG4gICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpXG4gICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgXG4gICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcblxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLURPQ1NcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5tZXNzYWdlKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgfVxufVxuIiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="1">
              <post-functions>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdateissuestatus-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowcreatecomment-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowgeneratechangehistory-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowreindexissue-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="531" name="Modifica Impianto" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">20116</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">97dca225-7941-4128-9606-720aac90ae3d</arg>
                <arg name="FIELD_NOTES">YCFgRW5hYmxlZCBvbmx5IGZvciBuZXcgaW5zdCB0aWNrZXRzIGluIG9yZGVyIHRvIGFzc2lnbiBBU1NFVCBhbmQgZ2VuZXJhdGUgKG9yIHJlLWdlbmVyYXRlKSBEb2Nz</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiIoaXNzdWUuaXNzdWVUeXBlLm5hbWUgPT0gJ05ldyBJbnN0YWxsYXRpb24nIHx8IChpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnTWFpbnRlbmFuY2UgVGlja2V0JyAmJiBjZlZhbHVlc1snT1BfRklSU1RfVElDS0VUJ10gPT0gXCJGaXJzdCBUaWNrZXRcIikpICYmIGNmVmFsdWVzWydPUF9BU1NFVCddICE9IG51bGwiLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">14aa8006-ff99-4e5c-9191-91eeb349be66</arg>
              <arg name="FIELD_NOTES">YCFgRGVsZXRlIHByZXZpb3VzIGF0dGFjaG1lbnRzIHJlbGF0ZWQgdG8gTkVXIEluc3RhbGxhdGlvbiBUS1QgR2VuZXJhdGlvbg==</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5cbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5kZWYgYXV0b21hdGljYWxseUNsb3NlZCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUNsb3NlZCddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG4vKlNjcmlwdCBWYXJpYWJsZXMqL1xuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0xNDA2MlwiKVxuXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5cbi8qUmltb3ppb25lIGFsbGVnYXRvIHJhcHBvcnRvIGRpIGludGVydmVudG8gYXBwZW5hIGNyZWF0byovXG4vKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG5cbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTtcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcblxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcblxuQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG5kZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG5cbi8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSBcIiBhcm91bmQgdmFsdWUgKi9cbmRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5cXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5uZXdJbnN0VGt0J10udG9TdHJpbmcoKSArIFwiXFxcIiA9IHRydWUgQU5EIFwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyBcIiE9dHJ1ZSBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleSA9IFwiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIilcIik7IC8vIFNlZSB0aGUgY29tcGxldGUgbGlzdCBvZiBwb3NzaWJsZSBJUUwgb24gdGhlIEluc2lnaHQgUXVlcnkgTGFuZ3VhZ2UgZG9jdW1lbnRhdGlvbiBwYWdlXG4vKiBJZiB0aGlzIGlzIGEgbWFuZGF0b3J5IGZpZWxkIHlvdSBzaG91bGQgYmUgYWJsZSB0byBkbyB0aGlzOiAqL1xubG9nLmRlYnVnIFwiSVFMOiBcIiArIFwiXFxcIlwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuY2F0ZWdvcnlSZWYnXS50b1N0cmluZygpICsgXCJcXFwiLlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm5ld0luc3RUa3QnXS50b1N0cmluZygpICsgXCJcXFwiID0gdHJ1ZSBBTkQgXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSArIFwiIT10cnVlIEFORCBvYmplY3QgSEFWSU5HIGNvbm5lY3RlZFRpY2tldHMoa2V5ID0gXCIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArIFwiKVwiXG5cbmZvcihpb2JqIGluIG9iamVjdHMpe1xuICAgIC8qIFVQREFURSBPSkJFQ1QgREVMRVRFRCBWQUxVRSAqL1xuICAgIGRlZiBvYmogPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oaW9iai5nZXRJZCgpKTtcbiAgICAgICAgXG4gICAgaW50IGF0dGFjaG1lbnREZWxldGVkID0gcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50LmRlbGV0ZWQuaWQnXSA/IHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudC5kZWxldGVkLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKSA6IDMyNjVcbiAgICBcbiAgICBhdHRyaWJUeXBlID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oYXR0YWNobWVudERlbGV0ZWQpOyBcblxuICAgIG5ld0F0dHJpYiA9IG9iai5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKGF0dHJpYlR5cGUpO1xuICAgIGRlZiBuZXdBdHRyaWJWYWx1ZSA9IG5ld0F0dHJpYi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTtcblxuICAgIHRyeSB7XG4gICAgXHRuZXdBdHRyaWJWYWx1ZS5zZXRWYWx1ZShhdHRyaWJUeXBlLCB0cnVlKTtcbiAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XG4gICAgIFx0bG9nLndhcm4oXCJTRVRJTlNJR0hUVkFMVUU6IFVuYWJsZSB0byBzZXQgYXR0cmlidXRlIFwiICsgYXR0cmliVHlwZSArIFwiIHRvIFwiICsgdG90YWxBbW91bnRTdXBwICsgXCIuIEV4aXRpbmcuXCIpO1xuICAgICBcdGxvZy53YXJuKFNFVElOU0lHSFRWQUxVRTogdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgIFx0cmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICBkZWYgYXR0cmliVmFsdWVzID0gbmV3QXR0cmliLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTtcbiAgICBhdHRyaWJWYWx1ZXMuYWRkKG5ld0F0dHJpYlZhbHVlKTtcbiAgICBuZXdBdHRyaWIuc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyhhdHRyaWJWYWx1ZXMpO1xuICAgICBcbiAgICB0cnkge1xuICAgIFx0bmV3QXR0cmliID0gb2JqZWN0RmFjYWRlLnN0b3JlT2JqZWN0QXR0cmlidXRlQmVhbihuZXdBdHRyaWIpO1xuICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHtcbiAgICBcdGxvZy53YXJuKFwiU0VUSU5TSUdIVFZBTFVFOiBVbmFibGUgdG8gc2F2ZSBjaGFuZ2VzLiBFeGl0aW5nLlwiKTtcbiAgICAgXHRsb2cud2FybihTRVRJTlNJR0hUVkFMVUU6IHZpZS5nZXRNZXNzYWdlKCkpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgbG9nLmluZm8oXCJTRVRJTlNJR0hUVkFMVUU6IFN1Y2Nlc3NmdWxseSBzYXZlZCB2YWx1ZVwiKTtcbn0iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">a34dae8c-1a80-462f-8514-e46dbce5000f</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IERvYyBUZW1wbGF0ZSBnZW5lcmF0aW9uIC0gc2UgTmV3IEluc3RhbGxhdGlvbiBPUiBGaXJzdCBUaWNrZXQgPSB0cnVl</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5Xb3JrZmxvd0V4Y2VwdGlvbjtcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvblxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyO1xuaW1wb3J0IGdyb292eS5qc29uLlN0cmVhbWluZ0pzb25CdWlsZGVyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5DdXN0b21GaWVsZE1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3I7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMuY29kZWMuYmluYXJ5LkJhc2U2NDtcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5XG5pbXBvcnQgZ3Jvb3Z5eC5uZXQuaHR0cC5IVFRQQnVpbGRlclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcblxuZGVmIHJlcXVlc3RNZXRob2RcbmRlZiBiYXNlVVJMXG5cbmRlZiBmaXJzdFRpY2tldCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuZmlyc3RUa3QnXS50b1N0cmluZygpKVswXVxuXG5sb2cuZGVidWcgaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZVxubG9nLmRlYnVnIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZmlyc3RUaWNrZXQpXG5cblxuLyogUkVTVCBBUEkgcGVyIEludmlvIE5vdGlmaWNhIEVtYWlsIE9OU0lURV9SRVBPUlQgKi9cbnJlcXVlc3RNZXRob2QgPSBcIkdFVFwiO1xuXG5pZihpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0Lm5ld0luc3RhbGxhdGlvbiddKSB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGZpcnN0VGlja2V0KSE9bnVsbCl7XG4gICAgZGVmIGZpcnN0X3RpY2tldD1mYWxzZVxuICAgIGRlZiB0ZW1wbGF0ZT1cIlwiXG4gICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShmaXJzdFRpY2tldCkhPW51bGwpe1xuICAgICAgICBmaXJzdF90aWNrZXQ9dHJ1ZVxuICAgICAgICB0ZW1wbGF0ZT1cIkZJUlNUX1RJQ0tFVCU3Q01BTlVGQUNUVVJFUlwiXG4gICAgfWVsc2V7XG4gICAgICAgIHRlbXBsYXRlPVwiTkVXX0lOU1RBTExBVElPTl9DUkVBVEVfVEtUJTdDTUFOVUZBQ1RVUkVSXCJcbiAgICB9XG4gICAgXG4gICAgaWYoaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5uZXdJbnN0YWxsYXRpb24nXSkpe1xuICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvYXV0b21hdGlvbi9kb2N1bWVudC9nZW5lcmF0aW9uL2NoZWNrP0lTU1VFX0tFWT1cIisgaXNzdWUua2V5ICtcIiZET0NfQ0FURUdPUlk9XCIgKyB0ZW1wbGF0ZSArIFwiJkVOQUJMRURfRk9SX0ZJUlNUX1RJQ0tFVD1cIitmaXJzdF90aWNrZXQrXCImSU1QT1JUX0ZST009XCJcbiAgICB9ZWxzZXtcbiAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vZG9jdW1lbnQvZ2VuZXJhdGlvbi9jaGVjaz9JU1NVRV9LRVk9XCIrIGlzc3VlLmtleSArXCImRE9DX0NBVEVHT1JZPVwiICsgdGVtcGxhdGUgKyBcIiZFTkFCTEVEX0ZPUl9GSVJTVF9USUNLRVQ9XCIrZmlyc3RfdGlja2V0K1wiJklNUE9SVF9GUk9NPU9QX0FTU0VUXCJcbiAgICB9XG4gICAgXG4gICAgbG9nLmRlYnVnIGJhc2VVUkxcbiAgICBVUkwgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cdGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICBcbiAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICBsb2cuZGVidWcgXCJFcnJvclN0cmVhbTogXCIgKyBjb25uZWN0aW9uLmdldEVycm9yU3RyZWFtKCkudG9TdHJpbmcoKVxuICAgICAgICBsb2cuZGVidWcgXCJnZXRIZWFkZXJGaWVsZHMoKTogXCIgKyBjb25uZWN0aW9uLmdldEhlYWRlckZpZWxkcygpXG4gICAgICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHRcbiAgICAgICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xuXG4gICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpXG4gICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgXG4gICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcblxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLURPQ1NcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5tZXNzYWdlKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgfVxufVxuIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="Not Done" status="Done" step="1">
              <post-functions>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdateissuestatus-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowcreatecomment-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowgeneratechangehistory-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowreindexissue-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="381" name="Modifica Pianificazione" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">20113</meta>
          <results>
            <unconditional-result old-status="null" status="null" step="1">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="551" name="Modifica fornitore" view="fieldscreen">
          <meta name="opsbar-sequence">50</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">20112</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">a9655845-bd3d-4171-ab08-fdb0c420b5d2</arg>
                <arg name="FIELD_NOTES">YCFgT1BfQVNTRVQgc2hvdWxkIGJlIGV2YWx1YXRlZCAmJiBJc3N1ZSB0eXBlIHNob3VsZCBiZSBOZXcgSW5zdGFsbGF0aW9uIG9yIE1haW50ZW5hbmNlICsgRmlyc3QgVGlja2V0</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiIoaXNzdWUuaXNzdWVUeXBlLm5hbWUgPT0gJ05ldyBJbnN0YWxsYXRpb24nIHx8IChpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnTWFpbnRlbmFuY2UgVGlja2V0JyAmJiBjZlZhbHVlc1snT1BfRklSU1RfVElDS0VUJ10gPT0gXCJGaXJzdCBUaWNrZXRcIikpICYmIGNmVmFsdWVzWydPUF9BU1NFVCddICE9IG51bGwgfHwgaXNzdWUuaXNzdWVUeXBlLm5hbWUgPT0gJ1BsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0JyIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">61d0d786-0ab0-42de-98be-80dcfd67b97e</arg>
              <arg name="FIELD_NOTES">YCFgRGVsZXRlIHByZXZpb3VzIGF0dGFjaG1lbnRzIHJlbGF0ZWQgdG8gTkVXIEluc3RhbGxhdGlvbiBUS1QgR2VuZXJhdGlvbg==</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5cbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5kZWYgYXV0b21hdGljYWxseUNsb3NlZCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUNsb3NlZCddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG4vKlNjcmlwdCBWYXJpYWJsZXMqL1xuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0xNDA2MlwiKVxuXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5cbi8qUmltb3ppb25lIGFsbGVnYXRvIHJhcHBvcnRvIGRpIGludGVydmVudG8gYXBwZW5hIGNyZWF0byovXG4vKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG5cbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTtcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcblxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcblxuQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG5kZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG5cbmlmKGlzc3VlLmlzc3VlVHlwZS5uYW1lICE9IFwiUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXRcIil7XG4gICAgLyogU3BlY2lmeSB0aGUgc2NoZW1hIGlkIGFzIHdlbGwgYXMgdGhlIElRTCB0aGF0IHdpbGwgZmV0Y2ggb2JqZWN0cy4gSW4gdGhpcyBjYXNlIGFsbCBvYmplY3RzIHdpdGggTmFtZSBtYXRjaGluZyB0aGUgdmFsdWVDRiwgYmUgc3VyZSB0byBpbmNsdWRlIFwiIGFyb3VuZCB2YWx1ZSAqL1xuICAgIGRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5cXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5uZXdJbnN0VGt0J10udG9TdHJpbmcoKSArIFwiXFxcIiA9IHRydWUgQU5EIFwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyBcIiE9dHJ1ZSBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleSA9IFwiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIilcIik7IC8vIFNlZSB0aGUgY29tcGxldGUgbGlzdCBvZiBwb3NzaWJsZSBJUUwgb24gdGhlIEluc2lnaHQgUXVlcnkgTGFuZ3VhZ2UgZG9jdW1lbnRhdGlvbiBwYWdlXG4gICAgLyogSWYgdGhpcyBpcyBhIG1hbmRhdG9yeSBmaWVsZCB5b3Ugc2hvdWxkIGJlIGFibGUgdG8gZG8gdGhpczogKi9cbiAgICBsb2cuZGVidWcgXCJJUUw6IFwiICsgXCJcXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5jYXRlZ29yeVJlZiddLnRvU3RyaW5nKCkgKyBcIlxcXCIuXFxcIlwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkubmV3SW5zdFRrdCddLnRvU3RyaW5nKCkgKyBcIlxcXCIgPSB0cnVlIEFORCBcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpICsgXCIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSBcIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIpXCJcblxuICAgIGZvcihpb2JqIGluIG9iamVjdHMpe1xuICAgICAgICAvKiBVUERBVEUgT0pCRUNUIERFTEVURUQgVkFMVUUgKi9cbiAgICAgICAgZGVmIG9iaiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihpb2JqLmdldElkKCkpO1xuXG4gICAgICAgIGludCBhdHRhY2htZW50RGVsZXRlZCA9IHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudC5kZWxldGVkLmlkJ10gPyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnQuZGVsZXRlZC5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKCkgOiAzMjY1XG5cbiAgICAgICAgYXR0cmliVHlwZSA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKGF0dGFjaG1lbnREZWxldGVkKTsgXG5cbiAgICAgICAgbmV3QXR0cmliID0gb2JqLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW4oYXR0cmliVHlwZSk7XG4gICAgICAgIGRlZiBuZXdBdHRyaWJWYWx1ZSA9IG5ld0F0dHJpYi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbmV3QXR0cmliVmFsdWUuc2V0VmFsdWUoYXR0cmliVHlwZSwgdHJ1ZSk7XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHtcbiAgICAgICAgICAgIGxvZy53YXJuKFwiU0VUSU5TSUdIVFZBTFVFOiBVbmFibGUgdG8gc2V0IGF0dHJpYnV0ZSBcIiArIGF0dHJpYlR5cGUgKyBcIiB0byBcIiArIHRvdGFsQW1vdW50U3VwcCArIFwiLiBFeGl0aW5nLlwiKTtcbiAgICAgICAgICAgIGxvZy53YXJuKFNFVElOU0lHSFRWQUxVRTogdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBkZWYgYXR0cmliVmFsdWVzID0gbmV3QXR0cmliLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTtcbiAgICAgICAgYXR0cmliVmFsdWVzLmFkZChuZXdBdHRyaWJWYWx1ZSk7XG4gICAgICAgIG5ld0F0dHJpYi5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKGF0dHJpYlZhbHVlcyk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG5ld0F0dHJpYiA9IG9iamVjdEZhY2FkZS5zdG9yZU9iamVjdEF0dHJpYnV0ZUJlYW4obmV3QXR0cmliKTtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSkge1xuICAgICAgICAgICAgbG9nLndhcm4oXCJTRVRJTlNJR0hUVkFMVUU6IFVuYWJsZSB0byBzYXZlIGNoYW5nZXMuIEV4aXRpbmcuXCIpO1xuICAgICAgICAgICAgbG9nLndhcm4oU0VUSU5TSUdIVFZBTFVFOiB2aWUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBsb2cuaW5mbyhcIlNFVElOU0lHSFRWQUxVRTogU3VjY2Vzc2Z1bGx5IHNhdmVkIHZhbHVlXCIpO1xuICAgIH1cbn0iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">44a3bd0b-1fc7-4868-b7f5-915d55f83c97</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IERvYyBUZW1wbGF0ZSBnZW5lcmF0aW9uIC0gc2UgTmV3IEluc3RhbGxhdGlvbiBPUiBGaXJzdCBUaWNrZXQgPSB0cnVl</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5Xb3JrZmxvd0V4Y2VwdGlvbjtcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvblxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyO1xuaW1wb3J0IGdyb292eS5qc29uLlN0cmVhbWluZ0pzb25CdWlsZGVyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5DdXN0b21GaWVsZE1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3I7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMuY29kZWMuYmluYXJ5LkJhc2U2NDtcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5XG5pbXBvcnQgZ3Jvb3Z5eC5uZXQuaHR0cC5IVFRQQnVpbGRlclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcblxuZGVmIHJlcXVlc3RNZXRob2RcbmRlZiBiYXNlVVJMXG5cbmRlZiBmaXJzdFRpY2tldCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuZmlyc3RUa3QnXS50b1N0cmluZygpKVswXVxuXG5sb2cuZGVidWcgaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZVxubG9nLmRlYnVnIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZmlyc3RUaWNrZXQpXG5cbmlmKGlzc3VlLmlzc3VlVHlwZS5uYW1lICE9IFwiUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXRcIil7XG4gICAgLyogUkVTVCBBUEkgcGVyIEludmlvIE5vdGlmaWNhIEVtYWlsIE9OU0lURV9SRVBPUlQgKi9cbiAgICByZXF1ZXN0TWV0aG9kID0gXCJHRVRcIjtcbiAgICBkZWYgcmVzY2hlZHVsaW5nID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5yZXNjaGVkdWxpbmcnXSA/IHByb3BlcnRpZXNbJ2NmLnJlc2NoZWR1bGluZyddLnRvU3RyaW5nKCkgOiBcIk9QX0NIQU5HRV9TQ0hFRFVMSU5HXCIpWzBdXG4gICAgZGVmIHRyYW5zaXRpb25DaGVjayA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY2hlY2tBbmRDb25maXJtMiddLnRvU3RyaW5nKCkpWzBdXG5cblxuICAgIGRlZiBmaXJzdF90aWNrZXQ9ZmFsc2VcbiAgICBkZWYgdGVtcGxhdGU9XCJcIlxuICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZmlyc3RUaWNrZXQpIT1udWxsKXtcbiAgICAgICAgZmlyc3RfdGlja2V0PXRydWVcbiAgICAgICAgdGVtcGxhdGU9XCJGSVJTVF9USUNLRVQlN0NNQU5VRkFDVFVSRVJcIlxuICAgIH1lbHNle1xuICAgICAgICB0ZW1wbGF0ZT1cIk5FV19JTlNUQUxMQVRJT05fQ1JFQVRFX1RLVCU3Q01BTlVGQUNUVVJFUlwiXG4gICAgfVxuXG4gICAgaWYoaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5uZXdJbnN0YWxsYXRpb24nXSkpe1xuICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvYXV0b21hdGlvbi9kb2N1bWVudC9nZW5lcmF0aW9uL2NoZWNrP0lTU1VFX0tFWT1cIisgaXNzdWUua2V5ICtcIiZET0NfQ0FURUdPUlk9XCIgKyB0ZW1wbGF0ZSArIFwiJkVOQUJMRURfRk9SX0ZJUlNUX1RJQ0tFVD1cIitmaXJzdF90aWNrZXQrXCImSU1QT1JUX0ZST009XCJcbiAgICB9ZWxzZXtcbiAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vZG9jdW1lbnQvZ2VuZXJhdGlvbi9jaGVjaz9JU1NVRV9LRVk9XCIrIGlzc3VlLmtleSArXCImRE9DX0NBVEVHT1JZPVwiICsgdGVtcGxhdGUgKyBcIiZFTkFCTEVEX0ZPUl9GSVJTVF9USUNLRVQ9XCIrZmlyc3RfdGlja2V0K1wiJklNUE9SVF9GUk9NPU9QX0FTU0VUXCJcbiAgICB9XG5cbiAgICBsb2cuZGVidWcgYmFzZVVSTFxuICAgIFVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG5cbiAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICBsb2cuZGVidWcgXCJFcnJvclN0cmVhbTogXCIgKyBjb25uZWN0aW9uLmdldEVycm9yU3RyZWFtKCkudG9TdHJpbmcoKVxuICAgICAgICBsb2cuZGVidWcgXCJnZXRIZWFkZXJGaWVsZHMoKTogXCIgKyBjb25uZWN0aW9uLmdldEhlYWRlckZpZWxkcygpXG4gICAgICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHRcbiAgICAgICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xuXG4gICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpXG4gICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgXG4gICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcblxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLURPQ1NcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5tZXNzYWdlKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgfVxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="1">
              <post-functions>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdateissuestatus-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowcreatecomment-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="field.type">8</arg>
                  <arg name="full.module.key">com.riadalabs.jira.plugins.insightinsight-post-function</arg>
                  <arg name="field.groovyScript">import com.atlassian.jira.component.ComponentAccessor;
import com.atlassian.jira.issue.fields.CustomField
import com.atlassian.jira.issue.MutableIssue;
import com.atlassian.jira.event.type.EventDispatchOption;

/* Get Insight Object Facade from plugin accessor */
Class objectFacadeClass = ComponentAccessor.getPluginAccessor().getClassLoader().findClass(&quot;com.riadalabs.jira.plugins.insight.channel.external.api.facade.ObjectFacade&quot;); 
def objectFacade = ComponentAccessor.getOSGiComponentInstanceOfType(objectFacadeClass);

/* Get Insight Object Type Facade from plugin accessor */
Class objectTypeFacadeClass = ComponentAccessor.getPluginAccessor().getClassLoader().findClass(&quot;com.riadalabs.jira.plugins.insight.channel.external.api.facade.ObjectTypeFacade&quot;); 
def objectTypeFacade = ComponentAccessor.getOSGiComponentInstanceOfType(objectTypeFacadeClass);

/* Get Insight Object Attribute Facade from plugin accessor */
Class objectTypeAttributeFacadeClass = ComponentAccessor.getPluginAccessor().getClassLoader().findClass(&quot;com.riadalabs.jira.plugins.insight.channel.external.api.facade.ObjectTypeAttributeFacade&quot;); 
def objectTypeAttributeFacade = ComponentAccessor.getOSGiComponentInstanceOfType(objectTypeAttributeFacadeClass);

/* Get Insight IQL Facade from plugin accessor */
Class iqlFacadeClass = ComponentAccessor.getPluginAccessor().getClassLoader().findClass(&quot;com.riadalabs.jira.plugins.insight.channel.external.api.facade.IQLFacade&quot;); 
def iqlFacade = ComponentAccessor.getOSGiComponentInstanceOfType(iqlFacadeClass);

Class objectAttributeBeanFactoryClass = ComponentAccessor.getPluginAccessor().getClassLoader().findClass(&quot;com.riadalabs.jira.plugins.insight.services.model.factory.ObjectAttributeBeanFactory&quot;); 
def objectAttributeBeanFactory = ComponentAccessor.getOSGiComponentInstanceOfType(objectAttributeBeanFactoryClass);

/*Insight Schema IDs*/
def OPAA = &quot;OPAA-&quot;
def DO = &quot;DO-&quot;

def cfManager = ComponentAccessor.getCustomFieldManager()

if(issue.issueType.name == &quot;Planned Maintenance Ticket&quot;){
    def supplier = cfManager.getCustomFieldObjectsByName(&quot;OP_SUPPLIER&quot;)
    def asset = cfManager.getCustomFieldObjectsByName(&quot;OP_ASSET&quot;)[0]
    def site = cfManager.getCustomFieldObjectsByName(&quot;OP_SITE&quot;)[0]
    def customer = cfManager.getCustomFieldObjectsByName(&quot;OP_CUSTOMER&quot;)[0]
    def supplierInstallation = cfManager.getCustomFieldObject(&quot;22813&quot;.toLong())
    def supplierKey, supplierValue
    for (CustomField cf in supplier){
        if(issue.getCustomFieldValue(cf) != null){
            log.warn issue.getCustomFieldValue(cf).toString()

            supplierKey = issue.getCustomFieldValue(cf).toString().substring(issue.getCustomFieldValue(cf).toString().lastIndexOf('(')+1,issue.getCustomFieldValue(cf).toString().lastIndexOf(')'))
            def supplierObject = objectFacade.loadObjectBean(supplierKey)
            log.warn supplierObject.toString()
            supplierValue = objectFacade.loadObjectAttributeBean(supplierObject.getId(), &quot;Name&quot;).getObjectAttributeValueBeans()
            log.warn &quot;supplierValue: &quot; + supplierValue.toString()



        }
    }
    def currentUser = ComponentAccessor.getJiraAuthenticationContext().getLoggedInUser()

    for (subtask in issue.getSubTaskObjects()){
        log.warn subtask.getCustomFieldValue(asset).toString()
        def assetKey = subtask.getCustomFieldValue(asset).toString().substring(subtask.getCustomFieldValue(asset).toString().lastIndexOf('(')+1,subtask.getCustomFieldValue(asset).toString().lastIndexOf(')'))
        def siteKey = subtask.getCustomFieldValue(site).toString().substring(subtask.getCustomFieldValue(site).toString().lastIndexOf('(')+1,subtask.getCustomFieldValue(site).toString().lastIndexOf(')'))
        def customerKey = subtask.getCustomFieldValue(customer).toString().substring(subtask.getCustomFieldValue(customer).toString().lastIndexOf('(')+1,subtask.getCustomFieldValue(customer).toString().lastIndexOf(')'))
        log.warn &quot;supplierKey: &quot; + supplierKey.toString()
        log.warn &quot;assetKey: &quot; + assetKey.toString()
        log.warn &quot;siteKey: &quot; + siteKey.toString()
        log.warn &quot;customerKey: &quot; + customerKey.toString()
        //verifico se esiste associazione con MAINTENANCE_ENABLED = &quot;PRIMARY SUPPLIER&quot; AND HARDWARE_REF = OP_ASSET
        def objects = iqlFacade.findObjectsByIQLAndSchema(28, &quot;objectType = \&quot;Supplier_Installation\&quot; AND DELETED!=true AND DISABLED!=true AND SELECTED=true AND \&quot;HARDWARE_REF\&quot; = &quot; + assetKey.toString() + &quot; AND \&quot;SUPPLIER_REF\&quot; = &quot; + supplierKey.toString() + &quot; AND \&quot;MAINTENANCE_ENABLED\&quot; = \&quot;PRIMARY SUPPLIER\&quot;&quot;);
        if (objects.size() &gt; 0){
            //compilo sul sub-task il corretto oggetto Supplier_Installation nel campo OP_SUPPLIER
            log.warn objects[0].toString()
            suppInstKey = objects[0].toString().substring(objects[0].toString().lastIndexOf('(')+1,objects[0].toString().lastIndexOf(')'))
            log.warn &quot;suppInstKey: &quot; + suppInstKey

            mi = (MutableIssue) subtask;
            mi.setCustomFieldValue(supplierInstallation, [objectFacade.loadObjectBean(suppInstKey)]);
            ComponentAccessor.getIssueManager().updateIssue(currentUser, mi, EventDispatchOption.DO_NOT_DISPATCH, false);

        }else{
            //verifico se esiste associazione con MAINTENANCE_ENABLED = &quot;PRIMARY SUPPLIER&quot; AND SITE_ALL = true
            objects = iqlFacade.findObjectsByIQLAndSchema(28, &quot;objectType = \&quot;Supplier_Installation\&quot; AND DELETED!=true AND DISABLED!=true AND SELECTED=true AND SITE_ALL=true AND \&quot;SITE_REF\&quot; = &quot; + siteKey.toString() + &quot; AND \&quot;SUPPLIER_REF\&quot; = &quot; + supplierKey.toString() + &quot; AND \&quot;MAINTENANCE_ENABLED\&quot; = \&quot;PRIMARY SUPPLIER\&quot;&quot;);
            if (objects.size() &gt; 0){
                //compilo sul sub-task il corretto oggetto Supplier_Installation nel campo OP_SUPPLIER
                log.warn objects[0].toString()
                suppInstKey = objects[0].toString().substring(objects[0].toString().lastIndexOf('(')+1,objects[0].toString().lastIndexOf(')'))
                log.warn &quot;suppInstKey: &quot; + suppInstKey

                mi = (MutableIssue) subtask;
                mi.setCustomFieldValue(supplierInstallation, [objectFacade.loadObjectBean(suppInstKey)]);
                ComponentAccessor.getIssueManager().updateIssue(currentUser, mi, EventDispatchOption.DO_NOT_DISPATCH, false);

            }else{
                //verifico se esiste associazione con MAINTENANCE_ENABLED = &quot;PRIMARY SUPPLIER&quot; AND CUSTOMER_ALL = true
                objects = iqlFacade.findObjectsByIQLAndSchema(28, &quot;objectType = \&quot;Supplier_Installation\&quot; AND DELETED!=true AND DISABLED!=true AND SELECTED=true AND CUSTOMER_ALL=true AND \&quot;CUSTOMER_REF\&quot; = &quot; + customerKey.toString() + &quot; AND \&quot;SUPPLIER_REF\&quot; = &quot; + supplierKey.toString() + &quot; AND \&quot;MAINTENANCE_ENABLED\&quot; = \&quot;PRIMARY SUPPLIER\&quot;&quot;);
                if (objects.size() &gt; 0){
                    //compilo sul sub-task il corretto oggetto Supplier_Installation nel campo OP_SUPPLIER
                    log.warn objects[0].toString()
                    suppInstKey = objects[0].toString().substring(objects[0].toString().lastIndexOf('(')+1,objects[0].toString().lastIndexOf(')'))
                    log.warn &quot;suppInstKey: &quot; + suppInstKey

                    mi = (MutableIssue) subtask;
                    mi.setCustomFieldValue(supplierInstallation, [objectFacade.loadObjectBean(suppInstKey)]);
                    ComponentAccessor.getIssueManager().updateIssue(currentUser, mi, EventDispatchOption.DO_NOT_DISPATCH, false);

                }else{
                    //verifico se esiste associazione con MAINTENANCE_ENABLED = &quot;BACKUP SUPPLIER&quot;
                    objects = iqlFacade.findObjectsByIQLAndSchema(28, &quot;objectType = \&quot;Supplier_Installation\&quot; AND \&quot;HARDWARE_REF\&quot; = &quot; + assetKey.toString() + &quot; AND \&quot;SUPPLIER_REF\&quot; = &quot; + supplierKey.toString() + &quot; AND \&quot;MAINTENANCE_ENABLED\&quot; = \&quot;BACKUP SUPPLIER\&quot;&quot;);
                    if (objects.size() &gt; 0){
                        //compilo sul sub-task il corretto oggetto Supplier_Installation nel campo OP_SUPPLIER
                        log.warn objects[0].toString()
                        suppInstKey = objects[0].toString().substring(objects[0].toString().lastIndexOf('(')+1,objects[0].toString().lastIndexOf(')'))
                        log.warn &quot;suppInstKey: &quot; + suppInstKey

                        mi = (MutableIssue) subtask;
                        mi.setCustomFieldValue(supplierInstallation, [objectFacade.loadObjectBean(suppInstKey)]);
                        ComponentAccessor.getIssueManager().updateIssue(currentUser, mi, EventDispatchOption.DO_NOT_DISPATCH, false);

                    }else{
                        //genero l'oggetto Supplier_Installation con MAINTENANCE_ENABLED = &quot;BACKUP SUPPLIER&quot;
                        def objectTypeSupplierInstallation = objectTypeFacade.loadObjectTypeBean(298);
                        def newObjectBean = objectTypeSupplierInstallation.createMutableObjectBean();

                        def objectAttributeBeans = new ArrayList();
                        def SupplierInstallationObjects = new ArrayList();

                        //Set Name
                        def nameObjectTypeAttributeBean = objectTypeAttributeFacade.loadObjectTypeAttributeBean(2682);     
                        log.warn &quot;supplierValue: &quot; + supplierValue
                        log.warn &quot;supplierValue[0]: &quot; + supplierValue[0]
                        log.warn &quot;Name: &quot; + supplierValue[0].toString().substring(supplierValue[0].toString().lastIndexOf('(')+1,supplierValue[0].toString().lastIndexOf(')'))
                        objectAttributeBeans.add(objectAttributeBeanFactory.createObjectAttributeBeanForObject(newObjectBean, nameObjectTypeAttributeBean, supplierValue[0].toString().substring(supplierValue[0].toString().lastIndexOf('(')+1,supplierValue[0].toString().lastIndexOf(')'))));
                        newObjectBean.setObjectAttributeBeans(objectAttributeBeans);

                        /*Set MAINTENANCE_ENABLED*/
                        def maintenanceObjectTypeAttributeBean = objectTypeAttributeFacade.loadObjectTypeAttributeBean(3033); 
                        objectAttributeBeans.add(objectAttributeBeanFactory.createObjectAttributeBeanForObject(newObjectBean, maintenanceObjectTypeAttributeBean, &quot;BACKUP SUPPLIER&quot;));
                        newObjectBean.setObjectAttributeBeans(objectAttributeBeans);

                        /*Set SAP*/
                        def sapObjectTypeAttributeBean = objectTypeAttributeFacade.loadObjectTypeAttributeBean(3026); 
                        objectAttributeBeans.add(objectAttributeBeanFactory.createObjectAttributeBeanForObject(newObjectBean, sapObjectTypeAttributeBean, &quot;false&quot;));
                        newObjectBean.setObjectAttributeBeans(objectAttributeBeans);

                        /*Set SELECTED*/
                        def selectedObjectTypeAttributeBean = objectTypeAttributeFacade.loadObjectTypeAttributeBean(3040); 
                        objectAttributeBeans.add(objectAttributeBeanFactory.createObjectAttributeBeanForObject(newObjectBean, selectedObjectTypeAttributeBean, &quot;true&quot;));
                        newObjectBean.setObjectAttributeBeans(objectAttributeBeans);

                        /*Set DISABLED*/
                        def disabledObjectTypeAttributeBean = objectTypeAttributeFacade.loadObjectTypeAttributeBean(3041); 
                        objectAttributeBeans.add(objectAttributeBeanFactory.createObjectAttributeBeanForObject(newObjectBean, disabledObjectTypeAttributeBean, &quot;false&quot;));
                        newObjectBean.setObjectAttributeBeans(objectAttributeBeans);

                        /*Set DELETED*/
                        def deletedObjectTypeAttributeBean = objectTypeAttributeFacade.loadObjectTypeAttributeBean(3036); 
                        objectAttributeBeans.add(objectAttributeBeanFactory.createObjectAttributeBeanForObject(newObjectBean, deletedObjectTypeAttributeBean, &quot;false&quot;));
                        newObjectBean.setObjectAttributeBeans(objectAttributeBeans);

                        /* Store the object into Insight. The new ObjectBean will be updated with an unique ID */
                        try {
                            newObjectBean = objectFacade.storeObjectBean(newObjectBean);
                            log.warn(&quot;newObjectBean: &quot; + newObjectBean);
                        } catch (Exception vie) {
                            log.warn(&quot;Could not create issue due to validation exception:&quot; + vie.getMessage());
                        }

                        /* Update SUPPLIER_REF on the newObject */		        
                        def objectTypeAttributeBean = objectTypeAttributeFacade.loadObjectTypeAttributeBean(3027).createMutable() //The id of the attribute

                        /* Create the new attribute bean based on the value */
                        def newObjectAttributeBean = objectAttributeBeanFactory.createObjectAttributeBeanForObject(newObjectBean, objectTypeAttributeBean, supplierKey);
                        /* Load the attribute bean */
                        def objectAttributeBean = objectFacade.loadObjectAttributeBean(newObjectBean.getId(), supplierKey);
                        if (objectAttributeBean != null) {
                            /* If attribute exist reuse the old id for the new attribute */
                            newObjectAttributeBean.setId(objectAttributeBean.getId());
                        }
                        /* Store the object attribute into Insight. */
                        try {
                            objectTypeAttributeBean = objectFacade.storeObjectAttributeBean(newObjectAttributeBean);
                        } catch (Exception vie) {
                            log.warn(&quot;Could not update object attribute due to validation exception:&quot; + vie.getMessage());
                        }              

                        /* Update HARDWARE_REF on the newObject */		        
                        objectTypeAttributeBean = objectTypeAttributeFacade.loadObjectTypeAttributeBean(3028).createMutable() //The id of the attribute

                        /* Create the new attribute bean based on the value */
                        newObjectAttributeBean = objectAttributeBeanFactory.createObjectAttributeBeanForObject(newObjectBean, objectTypeAttributeBean, assetKey);
                        /* Load the attribute bean */
                        objectAttributeBean = objectFacade.loadObjectAttributeBean(newObjectBean.getId(), assetKey);
                        if (objectAttributeBean != null) {
                            /* If attribute exist reuse the old id for the new attribute */
                            newObjectAttributeBean.setId(objectAttributeBean.getId());
                        }
                        /* Store the object attribute into Insight. */
                        try {
                            objectTypeAttributeBean = objectFacade.storeObjectAttributeBean(newObjectAttributeBean);
                        } catch (Exception vie) {
                            log.warn(&quot;Could not update object attribute due to validation exception:&quot; + vie.getMessage());
                        } 

                        /* Update SITE_REF on the newObject */		        
                        objectTypeAttributeBean = objectTypeAttributeFacade.loadObjectTypeAttributeBean(3031).createMutable() //The id of the attribute

                        def assetObj = objectFacade.loadObjectBean(assetKey)
                        log.warn &quot;assetObj: &quot; + assetObj.toString()
                        siteRef = objectFacade.loadObjectAttributeBean(assetObj.getId(), &quot;SITE_REF&quot;).getObjectAttributeValueBeans()
                        log.warn &quot;siteRef: &quot; + siteRef.toString()
                        siteKey = siteRef[0].toString().substring(siteRef[0].toString().lastIndexOf('(')+1,siteRef[0].toString().lastIndexOf(')'))

                        /* Create the new attribute bean based on the value */
                        newObjectAttributeBean = objectAttributeBeanFactory.createObjectAttributeBeanForObject(newObjectBean, objectTypeAttributeBean, siteKey);
                        /* Load the attribute bean */
                        objectAttributeBean = objectFacade.loadObjectAttributeBean(newObjectBean.getId(), assetKey);
                        if (objectAttributeBean != null) {
                            /* If attribute exist reuse the old id for the new attribute */
                            newObjectAttributeBean.setId(objectAttributeBean.getId());
                        }
                        /* Store the object attribute into Insight. */
                        try {
                            objectTypeAttributeBean = objectFacade.storeObjectAttributeBean(newObjectAttributeBean);
                        } catch (Exception vie) {
                            log.warn(&quot;Could not update object attribute due to validation exception:&quot; + vie.getMessage());
                        } 

                        /* Update CUSTOMER_REF on the newObject */		        
                        objectTypeAttributeBean = objectTypeAttributeFacade.loadObjectTypeAttributeBean(3032).createMutable() //The id of the attribute

                        log.warn &quot;siteKey: &quot; + siteKey
                        def siteObj = objectFacade.loadObjectBean(&quot;OPAA-&quot; + siteKey)
                        log.warn &quot;siteObj: &quot; + siteObj.toString()
                        customerRef = objectFacade.loadObjectAttributeBean(siteObj.getId(), &quot;CUSTOMER_REF&quot;).getObjectAttributeValueBeans()
                        log.warn &quot;customerRef: &quot; + customerRef.toString()
                        customerKey = customerRef[0].toString().substring(customerRef[0].toString().lastIndexOf('(')+1,customerRef[0].toString().lastIndexOf(')'))

                        /* Create the new attribute bean based on the value */
                        newObjectAttributeBean = objectAttributeBeanFactory.createObjectAttributeBeanForObject(newObjectBean, objectTypeAttributeBean, customerKey);
                        /* Load the attribute bean */
                        objectAttributeBean = objectFacade.loadObjectAttributeBean(newObjectBean.getId(), assetKey);
                        if (objectAttributeBean != null) {
                            /* If attribute exist reuse the old id for the new attribute */
                            newObjectAttributeBean.setId(objectAttributeBean.getId());
                        }
                        /* Store the object attribute into Insight. */
                        try {
                            objectTypeAttributeBean = objectFacade.storeObjectAttributeBean(newObjectAttributeBean);
                        } catch (Exception vie) {
                            log.warn(&quot;Could not update object attribute due to validation exception:&quot; + vie.getMessage());
                        } 

                        SupplierInstallationObjects.add(newObjectBean)

                        mi = (MutableIssue) subtask;
                        mi.setCustomFieldValue(supplierInstallation, SupplierInstallationObjects);
                        ComponentAccessor.getIssueManager().updateIssue(currentUser, mi, EventDispatchOption.DO_NOT_DISPATCH, false);

                    }
                }
            }
        }
    }
}</arg>
                  <arg name="field.filepath"></arg>
                  <arg name="class.name">com.riadalabs.jira.plugins.insight.services.jira.postfunction.InsightPostFunction</arg>
                  <arg name="field.description">Check &amp; Update OP_SUPPLIER on each sub-task</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowgeneratechangehistory-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowreindexissue-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">1a43d54e-fc3e-4fbf-912e-9d93df28367a</arg>
                  <arg name="FIELD_NOTES">YCFgUmVtb3ZlIGlzc3VlIGxpbmtzIHRvIGlzc3VlcyB3aXRoIGRpZmZlcmVudCBTdXBwbGllcg==</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5kZWYgYXV0b21hdGljYWxseUNvbmZpcm1lZCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUFzc2lnbmVkJ10gPyBwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5QXNzaWduZWQnXS50b1N0cmluZygpIDogXCJPUF9BVVRPTUFUSUNBTExZX0FTU0lHTkVEXCIpWzBdXG5kZWYgc3VwcGxpZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9TVVBQTElFUlwiKVxuSXNzdWVJbmRleGluZ1NlcnZpY2UgXHRpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSlcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG4vL1BlciB0ZXN0IGRhIGNvbnNvbGVcbi8vaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJPUFVULTI3NlwiKVxuXG5kZWYgdXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuZGVmIGlzc3VlU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlU2VydmljZSgpXG5cbkxpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKVxuZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG5cbiAgICBpZihpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkhPSBudWxsICYmIGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgbG9nLndhcm4gXCJJc3N1ZSBjb24gcmVsYXRlc0luSXNzdWVMaW5rXCJcbiAgICAgICAgZGVmIGxpbmtlZElzc3VlID0gaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpXG4gICAgICAgIGRlZiBzYW1lU3VwcCA9IGZhbHNlXG5cbiAgICAgICAgZm9yIChzIGluIHN1cHBsaWVyKXtcbiAgICAgICAgICAgIGlmKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocykgIT0gbnVsbCAmJiBsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHMpLmVxdWFscyhpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHMpKSl7XG4gICAgICAgICAgICAgICAgc2FtZVN1cHAgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZihzYW1lU3VwcCA9PSBmYWxzZSl7XG4gICAgICAgICAgICAvKlJlbW92ZSBpc3N1ZSBsaW5rIFJlbGF0ZXMqL1xuXHRcdFx0Q29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLnJlbW92ZUlzc3VlTGluayhpc3N1ZUxpbmssdXNlcilcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLyogUkVTVCBBUEkgcGVyIHB1bGl6aWEgY2FjaGUgaXNzdWUgbGlua2VkICovXG4gICAgICAgICAgICByZXF1ZXN0TWV0aG9kID0gXCJHRVRcIjtcbiAgICAgICAgICAgIC8qU2NyaXB0IFZhcmlhYmxlcyovXG4gICAgICAgICAgICAvL1BlciB0ZXN0IGRhIGNvbnNvbGVcbiAgICAgICAgICAgIC8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMzI1MzVcIilcbiAgICAgICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL2NsZWFyQ2FjaGUvdGlja2V0a2V5L1wiICsgbGlua2VkSXNzdWUua2V5XG4gICAgICAgICAgICBVUkwgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgICAgICAgICAgSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgICAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgICAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5MaXN0PElzc3VlTGluaz4gYWxsT3V0SXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldE91dHdhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKVxuZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsT3V0SXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHtcbiAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgaWYoaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkhPSBudWxsICYmIGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgbG9nLndhcm4gXCJJc3N1ZSBjb24gcmVsYXRlc091dElzc3VlTGlua1wiXG4gICAgICAgIGRlZiBsaW5rZWRJc3N1ZSA9IGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpXG4gICAgICAgIGRlZiBzYW1lU3VwcCA9IGZhbHNlXG5cbiAgICAgICAgZm9yIChzIGluIHN1cHBsaWVyKXtcbiAgICAgICAgICAgIGlmKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocykgIT0gbnVsbCAmJiBsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHMpLmVxdWFscyhpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHMpKSl7XG4gICAgICAgICAgICAgICAgc2FtZVN1cHAgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZihzYW1lU3VwcCA9PSBmYWxzZSl7XG4gICAgICAgICAgICAvKlJlbW92ZSBpc3N1ZSBsaW5rIFJlbGF0ZXMqL1xuXHRcdFx0Q29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLnJlbW92ZUlzc3VlTGluayhpc3N1ZUxpbmssdXNlcilcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLyogUkVTVCBBUEkgcGVyIHB1bGl6aWEgY2FjaGUgaXNzdWUgbGlua2VkICovXG4gICAgICAgICAgICByZXF1ZXN0TWV0aG9kID0gXCJHRVRcIjtcbiAgICAgICAgICAgIC8qU2NyaXB0IFZhcmlhYmxlcyovXG4gICAgICAgICAgICAvL1BlciB0ZXN0IGRhIGNvbnNvbGVcbiAgICAgICAgICAgIC8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMzI1MzVcIilcbiAgICAgICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL2NsZWFyQ2FjaGUvdGlja2V0a2V5L1wiICsgbGlua2VkSXNzdWUua2V5XG4gICAgICAgICAgICBVUkwgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgICAgICAgICAgSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgICAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgICAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSIsInNjcmlwdFBhdGgiOm51bGx9</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">7c9fe003-2f0f-4ffb-8821-090ba6b0d811</arg>
                  <arg name="FIELD_NOTES">YCFgQ3JlYXRlIGxpbmsgd2l0aCBpc3N1ZXMgd2l0aCB0aGUgc2FtZSAobmV3KSBzdXBwbGllcg==</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnlcbmltcG9ydCBncm9vdnkuanNvbi5Kc29uQnVpbGRlclxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29uZmlnLnV0aWwuSmlyYUhvbWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvblxuaW1wb3J0IGphdmEudGV4dC5TaW1wbGVEYXRlRm9ybWF0XG5pbXBvcnQgamF2YS50ZXh0LlBhcnNlRXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLnNlY3VyaXR5LkppcmFBdXRoZW50aWNhdGlvbkNvbnRleHRcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuYmMuaXNzdWUuSXNzdWVTZXJ2aWNlLklzc3VlUmVzdWx0XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmpxbC5wYXJzZXIuSnFsUXVlcnlQYXJzZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuYmMuaXNzdWUuc2VhcmNoLlNlYXJjaFNlcnZpY2VcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEudXNlci51dGlsLlVzZXJVdGlsXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLndlYi5iZWFuLlBhZ2VyRmlsdGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuTGlua0NvbGxlY3Rpb25JbXBsO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGluaztcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS51dGlsLkRlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlclxuXG5pbXBvcnQgZ3Jvb3Z5LnV0aWwubG9nZ2luZy5TbGY0alxuaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkNvbmN1cnJlbnRIYXNoTWFwXG5pbXBvcnQgamF2YXguYW5ub3RhdGlvbi5Qb3N0Q29uc3RydWN0XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5jYWNoZS5hbm5vdGF0aW9uLkNhY2hlYWJsZVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcblxuLypTY3JpcHQgVmFyaWFibGVzKi9cbi8vUGVyIFBvc3QgRnVuY3Rpb25cbmlzc3VlID0gaXNzdWVcbi8vUGVyIHRlc3QgZGEgY29uc29sZVxuLy9Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKClcbi8vaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJPUFVULTI0MVwiKVxuXG4vKkluc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHMqL1xuQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyAgXG5DbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTtcbm9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbm9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XG4vKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuaXFsRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKGlxbEZhY2FkZUNsYXNzKTtcbkNsYXNzIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5zZXJ2aWNlcy5tb2RlbC5mYWN0b3J5Lk9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5XCIpO1xub2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpOyBcbm9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcblxuLypDdXN0b21maWVsZHMqL1xuZGVmIHN1cHBsaWVySW5zdGFsbGF0aW9uID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zdXBwbGllciddLnRvU3RyaW5nKCkpWzBdXG5kZWYgd2JzUHJqID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi53YnNQcmonXSA/IHByb3BlcnRpZXNbJ2NmLndic1ByaiddLnRvU3RyaW5nKCkgOiBcIk9QX1dCU19QUkpcIilbMF1cbmRlZiBzaXRlID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zaXRlJ10udG9TdHJpbmcoKSlbMF1cbmxvZy5kZWJ1ZyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHN1cHBsaWVySW5zdGFsbGF0aW9uKVxuXG5KaXJhQXV0aGVudGljYXRpb25Db250ZXh0IGF1dGhDb250ZXh0ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpXG5kZWYganFsUXVlcnlQYXJzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSnFsUXVlcnlQYXJzZXIpXG5kZWYgc2VhcmNoU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChTZWFyY2hTZXJ2aWNlKVxuVXNlclV0aWwgdXNlclV0aWwgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRVc2VyVXRpbCgpXG5kZWYgdXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQubG9nZ2VkSW5Vc2VyXG5cbmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc3VwcGxpZXJJbnN0YWxsYXRpb24pKXtcbiAgICBkZWYgc3VwcGxpZXIgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHN1cHBsaWVySW5zdGFsbGF0aW9uKS5maXJzdCgpLnRvU3RyaW5nKClcbiAgICBsb2cuZGVidWcgXCJzdXBwbGllcjogXCIgKyBzdXBwbGllclxuICAgIHN1cHBsaWVyID0gc3VwcGxpZXIuc3Vic3RyaW5nKDEsc3VwcGxpZXIubGFzdEluZGV4T2YoJygnKS0xKVxuXG4gICAgZGVmIGpxbFNlYXJjaCA9IFwicHJvamVjdCA9ICdcIiArIGlzc3VlLmdldFByb2plY3RPYmplY3QoKS5uYW1lICsgXCInIEFORCBpc3N1ZXR5cGUgPSAnXCIgKyBpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lICsgXCInIEFORCBrZXkgIT0gJ1wiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIicgQU5EICdcIiArIHByb3BlcnRpZXNbJ2NmLnN1cHBsaWVyJ10udG9TdHJpbmcoKSArIFwiJyBpbiBpcWxGdW5jdGlvbignXCIgKyBwcm9wZXJ0aWVzWydpb2JqLnN1cHBpbnN0LnN1cHBsaWVyUmVmJ10udG9TdHJpbmcoKSArIFwiIExJS0UgXFxcIlwiICsgc3VwcGxpZXIucmVwbGFjZUFsbChcIidcIixcIlxcJ1wiKSArIFwiXFxcIicpXCIgKyBcIiBBTkQgJ1wiICsgcHJvcGVydGllc1snY2Yuc2l0ZSddLnRvU3RyaW5nKCkgKyBcIicgPSAnXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNpdGUpLmZpcnN0KCkudG9TdHJpbmcoKS5yZXBsYWNlQWxsKFwiJ1wiLFwiXFwnXCIpICsgXCInIEFORCBzdGF0dXMgSU4gKCdcIiArIHByb3BlcnRpZXNbJ3dmLm9wZW4nXS50b1N0cmluZygpICsgXCInKSBBTkQgXCIgKyAocHJvcGVydGllc1snY2Yud2JzUHJqJ10gPyBwcm9wZXJ0aWVzWydjZi53YnNQcmonXS50b1N0cmluZygpIDogXCJPUF9XQlNfUFJKXCIpICsgXCIgPSAnXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHdic1ByaikgKyBcIidcIlxuICAgIGxvZy5kZWJ1ZyBcInJpY2VyY2E6IFwiICsganFsU2VhcmNoXG4gICAgZGVmIHF1ZXJ5ID0ganFsUXVlcnlQYXJzZXIucGFyc2VRdWVyeShqcWxTZWFyY2gpXG4gICAgbG9nLmRlYnVnIFwicXVlcnk6IFwiICsgcXVlcnlcbiAgICBkZWYgc2VhcmNoID0gc2VhcmNoU2VydmljZS5zZWFyY2godXNlciwgcXVlcnksIFBhZ2VyRmlsdGVyLmdldFVubGltaXRlZEZpbHRlcigpKVxuICAgIGRlZiBmb3VuZD1mYWxzZVxuICAgIGRlZiBmb3VuZE91dHdhcmQ9ZmFsc2VcbiAgICBkZWYgbGlua2VkSXNzdWVcbiAgICBpZiAoc2VhcmNoLnJlc3VsdHMpIHtcdFxuICAgICAgICBmb3IgKGkgaW4gc2VhcmNoLnJlc3VsdHMuZmlyc3QoKSl7XG4gICAgICAgICAgICAvKlBlciBvZ25pIGlzc3VlIHJlc3RpdHVpdGEgZGFsbGEgcXVlcnkgSlFMIHZlcmlmaWNvIHNlIGhhIGdpXHUwMGUwIGRlaSBsaW5rIFJlbGF0ZXMgVG8qL1xuICAgICAgICAgICAgbG9nLmRlYnVnIGkua2V5XG5cbiAgICAgICAgICAgIGRlZiBpc3N1ZVNlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZVNlcnZpY2UoKVxuXG4gICAgICAgICAgICBMaXN0PElzc3VlTGluaz4gYWxsSW5Jc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0SW53YXJkTGlua3MoaS5nZXRJZCgpKTtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImFsbEluSXNzdWVMaW5rOiBcIiArIGFsbEluSXNzdWVMaW5rXG4gICAgICAgICAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxJbklzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgICAgICAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgICAgICAgICBkZWYgbGlua2VkSXNzdWVUZW1wID0gaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpXG4gICAgICAgICAgICAgICAgU3RyaW5nIHR5cGUgPSBsaW5rZWRJc3N1ZVRlbXAuZ2V0SXNzdWVUeXBlKCkuZ2V0TmFtZSgpO1xuXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiaXNzdWVsaW5rIFR5cGU6IFwiICsgaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwic291cmNlSXNzdWU6IFwiICsgaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiZGVzdGluYXRpb25Jc3N1ZTogXCIgKyBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKVxuXG4gICAgICAgICAgICAgICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkgJiYgaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpLmtleSE9aXNzdWUua2V5KXtcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidHJvdmF0byBpbldhcmRMaW5rIC0gcHJlbmRvIGxhIHNvdXJjZSBpc3N1ZSBcIiArIGxpbmtlZElzc3VlVGVtcCArIFwiIGUgbGEgbGVnbyBhbGxhIGlzc3VlIGNvcnJlbnRlXCJcbiAgICAgICAgICAgICAgICAgICAgZm91bmQ9dHJ1ZVxuICAgICAgICAgICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuY3JlYXRlSXNzdWVMaW5rKGxpbmtlZElzc3VlVGVtcC5nZXRJZCgpLCBpc3N1ZS5nZXRJZCgpLCBMb25nLnBhcnNlTG9uZyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlc0lkJ10udG9TdHJpbmcoKSksIDEsIHVzZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgTGlzdDxJc3N1ZUxpbms+IGFsbE91dElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaS5nZXRJZCgpKTtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImFsbE91dElzc3VlTGluazogXCIgKyBhbGxPdXRJc3N1ZUxpbmtcbiAgICAgICAgICAgIGZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbE91dElzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgICAgICAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgICAgICAgICBkZWYgbGlua2VkSXNzdWVUZW1wID0gaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KClcbiAgICAgICAgICAgICAgICBTdHJpbmcgdHlwZSA9IGxpbmtlZElzc3VlVGVtcC5nZXRJc3N1ZVR5cGUoKS5nZXROYW1lKCk7XG5cbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJpc3N1ZWxpbmsgVHlwZTogXCIgKyBpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKClcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJzb3VyY2VJc3N1ZTogXCIgKyBpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KClcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJkZXN0aW5hdGlvbklzc3VlOiBcIiArIGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpXG5cbiAgICAgICAgICAgICAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSAmJiBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKS5rZXkhPWlzc3VlLmtleSl7XG4gICAgICAgICAgICAgICAgICAgIGZvdW5kPXRydWVcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidHJvdmF0byBvdXRXYXJkTGluayAtIHByZW5kbyBsYSBkZXN0aW5hdGlvbiBpc3N1ZSBcIiArIGxpbmtlZElzc3VlVGVtcCArIFwiIGUgbGEgbGVnbyBhbGxhIGlzc3VlIGNvcnJlbnRlXCJcbiAgICAgICAgICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmNyZWF0ZUlzc3VlTGluayhpc3N1ZS5nZXRJZCgpLCBsaW5rZWRJc3N1ZVRlbXAuZ2V0SWQoKSwgTG9uZy5wYXJzZUxvbmcocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXNJZCddLnRvU3RyaW5nKCkpLCAxLCB1c2VyKTtcbiAgICAgICAgICAgICAgICB9ZWxzZSBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSAmJiBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKS5rZXk9PWlzc3VlLmtleSl7XG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImlzc3VlIGdpXHUwMGUwIGxpbmthdGFcIlxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiQ3JlbyBsaW5rIHRyYSBsYSBpc3N1ZSBvZ2dldHRvIGRpIHRyYW5zaXRpb24gZSBsYSBpc3N1ZSByaXN1bHRhbnRlIGRhbCBmaWx0cm9cIlxuICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmNyZWF0ZUlzc3VlTGluayhpLmdldElkKCksIGlzc3VlLmdldElkKCksIExvbmcucGFyc2VMb25nKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzSWQnXS50b1N0cmluZygpKSwgMSwgdXNlcik7XG5cbiAgICAgICAgfVxuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgbG9nLmVycm9yKFwiSW52YWxpZCBKUUw6IFwiICsganFsU2VhcmNoKTtcbiAgICB9IFxufVxuIiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="561" name="Assegna a tecnici interni e Pianifica" view="fieldscreen">
          <meta name="opsbar-sequence">50</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">20117</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">67d21477-5b8c-45a3-88f8-a691f3cb035f</arg>
                <arg name="FIELD_NOTES">YCFgT1BfQVNTRVQgc2hvdWxkIGJlIGV2YWx1YXRlZA==</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJjZlZhbHVlc1snT1BfQVNTRVQnXSAhPSBudWxsIHx8IGlzc3VlLmlzc3VlVHlwZS5uYW1lID09ICdQbGFubmVkIE1haW50ZW5hbmNlIFRpY2tldCciLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">10786a5c-e2b3-4bea-a0d1-46f9012a73e2</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIEN1c3RvbWVyIENvbnRyYWN0</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5pbXBvcnQgamF2YS50ZXh0LkRhdGVGb3JtYXQ7XG5pbXBvcnQgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQ7XG5pbXBvcnQgamF2YS51dGlsLkRhdGU7XG5pbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wXG5cblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5cbmRlZiB3YXJuaW5ncyA9IGZhbHNlXG5kZWYgbWlzc2luZ0NvbnRyYWN0ID0gZmFsc2VcbmRlZiBleHBpcmVkQ29udHJhY3QgPSBmYWxzZVxuZGVmIGVycm9ycyA9IGZhbHNlXG5cbmRlZiBpbnN0YWxsYXRpb24gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmFzc2V0J10udG9TdHJpbmcoKSlbMF1cbmRlZiBhdXRvbWF0aWNhbGx5Q29uZmlybWVkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5QXNzaWduZWQnXSA/IHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlBc3NpZ25lZCddLnRvU3RyaW5nKCkgOiBcIk9QX0FVVE9NQVRJQ0FMTFlfQVNTSUdORURcIilbMF1cbmRlZiB0cmFuc2l0aW9uQ2hlY2sgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmNoZWNrQW5kQ29uZmlybSddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiB3YXJuaW5nRW1wdHlGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlcnJvck1hbmRhdG9yeUZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKVxuIFxuLy9PUF9BU1NFVFxuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKT09bnVsbCB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLnRvU3RyaW5nKCkuZXF1YWxzKFwiTm9cIikpe1xuICAgIC8vQ2hlY2sgQ1VTVE9NRVJfQ09OVFJBQ1RfUkVGIG9uIE9QX0FTU0VUXG4gICAgXG4gICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyAgXG4gICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XG4gICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbiAgICBkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcblxuICAgIGRlZiBhc3NldCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoaW5zdGFsbGF0aW9uKVxuICAgIGxvZy5kZWJ1ZyBcImFzc2V0OiBcIiArIGFzc2V0XG4gICAgYXNzZXQ9YXNzZXQudG9TdHJpbmcoKVxuICAgIGRlZiBhc3NldEtleSA9IGFzc2V0LnN1YnN0cmluZyhhc3NldC5sYXN0SW5kZXhPZignKCcpKzEsYXNzZXQubGFzdEluZGV4T2YoJyknKSlcbiAgICBkZWYgYXNzZXRPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oYXNzZXRLZXkpXG5cdGxvZy5kZWJ1ZyBcImFzc2V0T2JqZWN0LmdldElkKCk6IFwiICsgYXNzZXRPYmplY3QuZ2V0SWQoKVxuICAgIGRlZiBvYlRyaWFnZVxuICAgIGRlZiBjdXN0b21lckNvbnRyYWN0LCBjdXN0b21lckNvbnRyYWN0QXR0clxuICAgIGN1c3RvbWVyQ29udHJhY3RBdHRyID0gcHJvcGVydGllc1snaW9iai5oYXJkd2FyZS5jb250cmFjdCddID8gcHJvcGVydGllc1snaW9iai5oYXJkd2FyZS5jb250cmFjdCddLnRvU3RyaW5nKCkgOiBcIkNVU1RPTUVSX0NPTlRSQUNUX1JFRlwiXG4gICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGFzc2V0T2JqZWN0LmdldElkKCksIGN1c3RvbWVyQ29udHJhY3RBdHRyKSl7XG4gICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGFzc2V0T2JqZWN0LmdldElkKCksIGN1c3RvbWVyQ29udHJhY3RBdHRyKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgY3VzdG9tZXJDb250cmFjdCA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgfVxuXG4gICAgbG9nLmRlYnVnIFwiY3VzdG9tZXJDb250cmFjdDogXCIgKyBjdXN0b21lckNvbnRyYWN0XG4gICAgXG4gICAgaWYoY3VzdG9tZXJDb250cmFjdCA9PSBudWxsKXtcbiAgICAgICAgd2FybmluZ3MgPSB0cnVlXG4gICAgICAgIG1pc3NpbmdDb250cmFjdCA9IHRydWVcbiAgICB9ZWxzZXtcbiAgICAgICAgLy9nZXQgXCJRVF9WQUxJRF9UXCIgZm9yIHRoYXQgVGVjaG5pY2lhblxuICAgICAgICBkZWYgY29udHJhY3Q9Y3VzdG9tZXJDb250cmFjdC50b1N0cmluZygpXG4gICAgICAgIGxvZy5kZWJ1ZyBcImNvbnRyYWN0OlwiICsgY29udHJhY3RcbiAgICAgICAgZGVmIGNvbnRyYWN0SWQgPSBjb250cmFjdC5zdWJzdHJpbmcoY29udHJhY3QubGFzdEluZGV4T2YoJygnKSsxLGNvbnRyYWN0Lmxhc3RJbmRleE9mKCcpJykpXG4gICAgICAgIGxvZy5kZWJ1ZyBcImNvbnRyYWN0SWQ6XCIgKyBjb250cmFjdElkXG4gICAgICAgIGxvZy5kZWJ1ZyBcInByb3BlcnRpZXNbJ2lvYmouY29udHJhY3QudmFsaWRUbyddOiBcIiArIHByb3BlcnRpZXNbJ2lvYmouY29udHJhY3QudmFsaWRUbyddXG4gICAgICAgIGRlZiBleHBpcmluZ0RhdGUsIGV4cGlyaW5nRGF0ZUF0dHJcbiAgICAgICAgZXhwaXJpbmdEYXRlQXR0ciA9IHByb3BlcnRpZXNbJ2lvYmouY29udHJhY3QudmFsaWRUbyddID8gcHJvcGVydGllc1snaW9iai5jb250cmFjdC52YWxpZFRvJ10udG9TdHJpbmcoKSA6IFwiUVRfVkFMSURfVFwiXG4gICAgICAgIFxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29udHJhY3RJZC50b0ludGVnZXIoKSwgY3VzdG9tZXJDb250cmFjdEF0dHIpKXtcbiAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdElkLnRvSW50ZWdlcigpLCBjdXN0b21lckNvbnRyYWN0QXR0cikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgY29udHJhY3RSZWYgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIGNvbnRyYWN0RE8gPSBjb250cmFjdFJlZi50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiY29udHJhY3RETzogXCIgKyBjb250cmFjdERPXG4gICAgICAgICAgICAgICAgY29udHJhY3RET0tleSA9IGNvbnRyYWN0RE8uc3Vic3RyaW5nKGNvbnRyYWN0RE8ubGFzdEluZGV4T2YoJygnKSsxLGNvbnRyYWN0RE8ubGFzdEluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJjb250cmFjdERPS2V5OiBcIiArIGNvbnRyYWN0RE9LZXlcbiAgICAgICAgICAgICAgICBjb250cmFjdERPT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHByb3BlcnRpZXNbJ2lzY2hlbWEuZGJvJ10udG9TdHJpbmcoKSArIFwiLVwiICsgY29udHJhY3RET0tleSlcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImV4cGlyaW5nRGF0ZUF0dHI6IFwiICsgZXhwaXJpbmdEYXRlQXR0clxuICAgICAgICAgICAgICAgIGV4cGlyaW5nRGF0ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdERPS2V5LnRvSW50ZWdlcigpLCBleHBpcmluZ0RhdGVBdHRyKSA/IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdERPS2V5LnRvSW50ZWdlcigpLCBleHBpcmluZ0RhdGVBdHRyKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudmFsdWVbMF0gYXMgRGF0ZSA6IG51bGxcbiAgICAgICAgfVxuXG4gICAgICAgIGRlZiB0b2RheXNEYXRlVGltZSA9IChuZXcgRGF0ZSgpKVxuICAgICAgICBsb2cuZGVidWcgXCJleHBpcmluZ0RhdGU6IFwiICsgZXhwaXJpbmdEYXRlXG4gICAgICAgIGxvZy5kZWJ1ZyBcInRvZGF5c0RhdGVUaW1lOiBcIiArIHRvZGF5c0RhdGVUaW1lXG4gICAgICAgIGlmKGV4cGlyaW5nRGF0ZSA8IHRvZGF5c0RhdGVUaW1lKXtcbiAgICAgICAgICAgIHdhcm5pbmdzID0gdHJ1ZVxuICAgICAgICAgICAgZXhwaXJlZENvbnRyYWN0ID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbiBcbn1cblxuZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuXG5pZiAoIXdhcm5pbmdzKXtcbiAgICByZXR1cm4gdHJ1ZVxufWVsc2V7XG4gICAgaWYod2FybmluZ3Mpe1xuICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIikpe1xuICAgICAgICAgICAgLy9sb2cuZGVidWcgXCJyZXR1cm4gdHJ1ZVwiXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuXHRcdFx0ZGVmIHdMaXN0Q29uZmlybUVtcHR5Q29udHJhY3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYobWlzc2luZ0NvbnRyYWN0KXtcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eUNvbnRyYWN0LmFkZChcIldcIilcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eUNvbnRyYWN0LmFkZChcIkNVU1RPTUVSX0NPTlRSQUNUX01JU1NJTkdcIilcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eUNvbnRyYWN0LmFkZChudWxsKVxuXG4gICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5Q29udHJhY3QpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKGV4cGlyZWRDb250cmFjdCl7XG4gICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlDb250cmFjdC5hZGQoXCJXXCIpXG4gICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlDb250cmFjdC5hZGQoXCJDVVNUT01FUl9DT05UUkFDVF9FWFBJUkVEXCIpXG4gICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlDb250cmFjdC5hZGQobnVsbClcblxuICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eUNvbnRyYWN0KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3V0cHV0LmFkZCh3TGlzdClcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIldcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKSBcbiAgICAgICAgfVxuICAgIH1cbn0iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">7a272e30-dcd2-4e28-bf3b-a91abc51c017</arg>
              <arg name="FIELD_NOTES">YCFgU0FQOiB1cGRhdGUgU04gc3RhdHVzICYgQ3JlYXRlIFNP</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcblxuZGVmIHNhcFNOID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1NBUF9TRVJWSUNFX05PVElGSUNBVElPTlwiKVswXVxuXG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcblxuVVJMIHVybFxuSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvblxuXG5pZihpc3N1ZS5pc3N1ZVR5cGUubmFtZSAhPSBcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0XCIgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzYXBTTikgIT0gbnVsbCl7XG4gICAgcmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuXG4gICAgZGVmIGJvZHlfcmVxID0gW11cbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXG4gICAgICAgIFwic3RhdHVzXCI6IFwiUExBXCJcbiAgICBdIFxuXG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL3NlcnZpY2Uvbm90aWZpY2F0aW9uXCJcblxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxuICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNOOiBcIiArIGJvZHlfcmVxXG4gICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxuICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgIFxuICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG4gICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcblxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TTi1VUERBVEVcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0udG9TdHJpbmcoKSlcbiAgICAgICAgXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICB9ZWxzZXtcbiAgICAgICAgLyoqIFNFUlZJQ0UgT1JERVIgQ1JFQVRJT04gKiovXG4gICAgICAgIGJvZHlfcmVxID0gW1xuICAgICAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXlcbiAgICAgICAgXSBcbiAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL29yL3VwZGF0ZS9zZXJ2aWNlL29yZGVyXCJcblxuICAgICAgICBsb2cuZGVidWcgXCJiYXNlVVJMIFNPOiBcIiArIGJhc2VVUkxcbiAgICAgICAgbG9nLmRlYnVnIFwiYm9keV9yZXEgU086IFwiICsgYm9keV9yZXFcbiAgICAgICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgICAgICBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG4gICAgICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgICAgICBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAxXCIpICYmICFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxuICAgIFx0XHRsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICAgICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICBcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtU0FQLVNPLUNSRUFURVwiKVxuICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgIH1cbiAgICB9XG59XG4gIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">583df9c7-fce8-41ca-ad87-8f516b4ff5c5</arg>
              <arg name="FIELD_NOTES">YCFgRGVsZXRlIHByZXZpb3VzIGF0dGFjaG1lbnRzIHJlbGF0ZWQgdG8gTkVXIEluc3RhbGxhdGlvbiBUS1QgR2VuZXJhdGlvbg==</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5cbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5kZWYgYXV0b21hdGljYWxseUNsb3NlZCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUNsb3NlZCddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG4vKlNjcmlwdCBWYXJpYWJsZXMqL1xuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0xNDA2MlwiKVxuXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5cbi8qUmltb3ppb25lIGFsbGVnYXRvIHJhcHBvcnRvIGRpIGludGVydmVudG8gYXBwZW5hIGNyZWF0byovXG4vKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG5cbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTtcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcblxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcblxuQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG5kZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG5cbi8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSBcIiBhcm91bmQgdmFsdWUgKi9cbmRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5cXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5uZXdJbnN0VGt0J10udG9TdHJpbmcoKSArIFwiXFxcIiA9IHRydWUgQU5EIFwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyBcIiE9dHJ1ZSBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleSA9IFwiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIilcIik7IC8vIFNlZSB0aGUgY29tcGxldGUgbGlzdCBvZiBwb3NzaWJsZSBJUUwgb24gdGhlIEluc2lnaHQgUXVlcnkgTGFuZ3VhZ2UgZG9jdW1lbnRhdGlvbiBwYWdlXG4vKiBJZiB0aGlzIGlzIGEgbWFuZGF0b3J5IGZpZWxkIHlvdSBzaG91bGQgYmUgYWJsZSB0byBkbyB0aGlzOiAqL1xubG9nLmRlYnVnIFwiSVFMOiBcIiArIFwiXFxcIlwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuY2F0ZWdvcnlSZWYnXS50b1N0cmluZygpICsgXCJcXFwiLlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm5ld0luc3RUa3QnXS50b1N0cmluZygpICsgXCJcXFwiID0gdHJ1ZSBBTkQgXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSArIFwiIT10cnVlIEFORCBvYmplY3QgSEFWSU5HIGNvbm5lY3RlZFRpY2tldHMoa2V5ID0gXCIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArIFwiKVwiXG5cbmZvcihpb2JqIGluIG9iamVjdHMpe1xuICAgIC8qIFVQREFURSBPSkJFQ1QgREVMRVRFRCBWQUxVRSAqL1xuICAgIGRlZiBvYmogPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oaW9iai5nZXRJZCgpKTtcbiAgICAgICAgXG4gICAgaW50IGF0dGFjaG1lbnREZWxldGVkID0gcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50LmRlbGV0ZWQuaWQnXSA/IHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudC5kZWxldGVkLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKSA6IDMyNjVcbiAgICBcbiAgICBhdHRyaWJUeXBlID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oYXR0YWNobWVudERlbGV0ZWQpOyBcblxuICAgIG5ld0F0dHJpYiA9IG9iai5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKGF0dHJpYlR5cGUpO1xuICAgIGRlZiBuZXdBdHRyaWJWYWx1ZSA9IG5ld0F0dHJpYi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTtcblxuICAgIHRyeSB7XG4gICAgXHRuZXdBdHRyaWJWYWx1ZS5zZXRWYWx1ZShhdHRyaWJUeXBlLCB0cnVlKTtcbiAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XG4gICAgIFx0bG9nLndhcm4oXCJTRVRJTlNJR0hUVkFMVUU6IFVuYWJsZSB0byBzZXQgYXR0cmlidXRlIFwiICsgYXR0cmliVHlwZSArIFwiIHRvIFwiICsgdG90YWxBbW91bnRTdXBwICsgXCIuIEV4aXRpbmcuXCIpO1xuICAgICBcdGxvZy53YXJuKFNFVElOU0lHSFRWQUxVRTogdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgIFx0cmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICBkZWYgYXR0cmliVmFsdWVzID0gbmV3QXR0cmliLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTtcbiAgICBhdHRyaWJWYWx1ZXMuYWRkKG5ld0F0dHJpYlZhbHVlKTtcbiAgICBuZXdBdHRyaWIuc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyhhdHRyaWJWYWx1ZXMpO1xuICAgICBcbiAgICB0cnkge1xuICAgIFx0bmV3QXR0cmliID0gb2JqZWN0RmFjYWRlLnN0b3JlT2JqZWN0QXR0cmlidXRlQmVhbihuZXdBdHRyaWIpO1xuICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHtcbiAgICBcdGxvZy53YXJuKFwiU0VUSU5TSUdIVFZBTFVFOiBVbmFibGUgdG8gc2F2ZSBjaGFuZ2VzLiBFeGl0aW5nLlwiKTtcbiAgICAgXHRsb2cud2FybihTRVRJTlNJR0hUVkFMVUU6IHZpZS5nZXRNZXNzYWdlKCkpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgbG9nLmluZm8oXCJTRVRJTlNJR0hUVkFMVUU6IFN1Y2Nlc3NmdWxseSBzYXZlZCB2YWx1ZVwiKTtcbn0iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">ae3f3563-1b6f-4e50-a442-a0926310744c</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IERvYyBUZW1wbGF0ZSBnZW5lcmF0aW9uIC0gc2UgTmV3IEluc3RhbGxhdGlvbiBPUiBGaXJzdCBUaWNrZXQgPSB0cnVl</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5Xb3JrZmxvd0V4Y2VwdGlvbjtcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvblxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyO1xuaW1wb3J0IGdyb292eS5qc29uLlN0cmVhbWluZ0pzb25CdWlsZGVyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5DdXN0b21GaWVsZE1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3I7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMuY29kZWMuYmluYXJ5LkJhc2U2NDtcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5XG5pbXBvcnQgZ3Jvb3Z5eC5uZXQuaHR0cC5IVFRQQnVpbGRlclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcblxuZGVmIHJlcXVlc3RNZXRob2RcbmRlZiBiYXNlVVJMXG5cbmRlZiBmaXJzdFRpY2tldCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuZmlyc3RUa3QnXS50b1N0cmluZygpKVswXVxuXG5sb2cuZGVidWcgaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZVxubG9nLmRlYnVnIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZmlyc3RUaWNrZXQpXG5cblxuLyogUkVTVCBBUEkgcGVyIEludmlvIE5vdGlmaWNhIEVtYWlsIE9OU0lURV9SRVBPUlQgKi9cbnJlcXVlc3RNZXRob2QgPSBcIkdFVFwiO1xuZGVmIHJlc2NoZWR1bGluZyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YucmVzY2hlZHVsaW5nJ10gPyBwcm9wZXJ0aWVzWydjZi5yZXNjaGVkdWxpbmcnXS50b1N0cmluZygpIDogXCJPUF9DSEFOR0VfU0NIRURVTElOR1wiKVswXVxuZGVmIHRyYW5zaXRpb25DaGVjayA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY2hlY2tBbmRDb25maXJtMiddLnRvU3RyaW5nKCkpWzBdXG5cblxuZGVmIGZpcnN0X3RpY2tldD1mYWxzZVxuZGVmIHRlbXBsYXRlPVwiXCJcbmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZmlyc3RUaWNrZXQpIT1udWxsKXtcbiAgICBmaXJzdF90aWNrZXQ9dHJ1ZVxuICAgIHRlbXBsYXRlPVwiRklSU1RfVElDS0VUJTdDTUFOVUZBQ1RVUkVSXCJcbn1lbHNle1xuICAgIHRlbXBsYXRlPVwiTkVXX0lOU1RBTExBVElPTl9DUkVBVEVfVEtUJTdDTUFOVUZBQ1RVUkVSXCJcbn1cblxuaWYoaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5uZXdJbnN0YWxsYXRpb24nXSkpe1xuICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL2RvY3VtZW50L2dlbmVyYXRpb24vY2hlY2s/SVNTVUVfS0VZPVwiKyBpc3N1ZS5rZXkgK1wiJkRPQ19DQVRFR09SWT1cIiArIHRlbXBsYXRlICsgXCImRU5BQkxFRF9GT1JfRklSU1RfVElDS0VUPVwiK2ZpcnN0X3RpY2tldCtcIiZJTVBPUlRfRlJPTT1cIlxufWVsc2V7XG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vZG9jdW1lbnQvZ2VuZXJhdGlvbi9jaGVjaz9JU1NVRV9LRVk9XCIrIGlzc3VlLmtleSArXCImRE9DX0NBVEVHT1JZPVwiICsgdGVtcGxhdGUgKyBcIiZFTkFCTEVEX0ZPUl9GSVJTVF9USUNLRVQ9XCIrZmlyc3RfdGlja2V0K1wiJklNUE9SVF9GUk9NPU9QX0FTU0VUXCJcbn1cblxubG9nLmRlYnVnIGJhc2VVUkxcbmlmKGJhc2VVUkwgIT0gbnVsbCAmJiBiYXNlVVJMICE9IFwiXCIpe1xuICAgIFVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG5cbiAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICBsb2cuZGVidWcgXCJFcnJvclN0cmVhbTogXCIgKyBjb25uZWN0aW9uLmdldEVycm9yU3RyZWFtKCkudG9TdHJpbmcoKVxuICAgICAgICBsb2cuZGVidWcgXCJnZXRIZWFkZXJGaWVsZHMoKTogXCIgKyBjb25uZWN0aW9uLmdldEhlYWRlckZpZWxkcygpXG4gICAgICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHRcbiAgICAgICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xuXG4gICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpXG4gICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgXG4gICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcblxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLURPQ1NcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5tZXNzYWdlKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgfVxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">dd185790-4471-4435-99ff-f3aca12a451c</arg>
              <arg name="FIELD_NOTES">YCFgT1AgRW1haWwgTm90aWZpY2F0aW9uOiBBU1NJR05fVE9fSU5URVJOQUxfVEVDSFM=</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcblxuZGVmIHJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcbmRlZiByZWxhdGVzSW5Jc3N1ZUxpbms9ZmFsc2VcbmRlZiByZWxhdGVzT3V0SXNzdWVMaW5rPWZhbHNlXG5kZWYgbGlua2VkVGlja2V0cz1uZXcgQXJyYXlMaXN0KClcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuZGVmIGF1dG9tYXRpY2FsbHlDb25maXJtZWQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlBc3NpZ25lZCddID8gcHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUFzc2lnbmVkJ10udG9TdHJpbmcoKSA6IFwiT1BfQVVUT01BVElDQUxMWV9BU1NJR05FRFwiKVswXVxuXG4vKnZlcmlmaWNhIHRpY2tldCBjb2xsZWdhdGkqL1xuTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG5mb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxJbklzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcblxuICAgIGlmKGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKSE9IG51bGwgJiYgaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkgJiYgaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpLnN0YXR1cy5uYW1lID09IFwiT3BlblwiKXtcbiAgICAgICAgcmVsYXRlc0luSXNzdWVMaW5rPXRydWVcbiAgICAgICAgbGlua2VkVGlja2V0cy5hZGQoaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpLnRvU3RyaW5nKCkpXG4gICAgICAgIGxvZy5kZWJ1ZyBcIklzc3VlIGNvbiByZWxhdGVzSW5Jc3N1ZUxpbmtcIlxuICAgIH1cbn1cbkxpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG5mb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG5cbiAgICBpZihpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKSE9IG51bGwgJiYgaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkgJiYgaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkuc3RhdHVzLm5hbWUgPT0gXCJPcGVuXCIpe1xuICAgICAgICByZWxhdGVzT3V0SXNzdWVMaW5rPXRydWVcbiAgICAgICAgbGlua2VkVGlja2V0cy5hZGQoaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkudG9TdHJpbmcoKSlcbiAgICAgICAgbG9nLmRlYnVnIFwiSXNzdWUgY29uIHJlbGF0ZXNPdXRJc3N1ZUxpbmtcIlxuICAgIH1cbn1cblxuZGVmIGJvZHlfcmVxXG5pZihyZWxhdGVzSW5Jc3N1ZUxpbmsgfHwgcmVsYXRlc091dElzc3VlTGluayl7XG4gICAgYm9keV9yZXEgPSBbXG4gICAgICAgIFwidGVtcGxhdGVOYW1lXCI6IHByb3BlcnRpZXNbJ3R0LmFzc2lnblRvSW50ZXJuYWxUZWNocyddLnRvU3RyaW5nKCksXG4gICAgICAgIFwicGVjXCI6IGZhbHNlLFxuICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleSxcbiAgICAgICAgXCJsaW5rZWRUaWNrZXRzXCI6IGxpbmtlZFRpY2tldHNcbiAgICBdXG59ZWxzZXtcbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJ0ZW1wbGF0ZU5hbWVcIjogcHJvcGVydGllc1sndHQuYXNzaWduVG9JbnRlcm5hbFRlY2hzJ10udG9TdHJpbmcoKSxcbiAgICAgICAgXCJwZWNcIjogZmFsc2UsXG4gICAgICAgIFwiaXNzdWVLZXlcIjogaXNzdWUua2V5XG4gICAgXVxufVxuXG5pZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpPT1udWxsIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCkudG9TdHJpbmcoKS5lcXVhbHMoXCJOb1wiKSl7XG4gICAgZGVmIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL3RyYW5zYWN0aW9uL21haWwvc2VuZFwiXG4gICAgVVJMIHVybFxuICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcblxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkw6IFwiICsgYmFzZVVSTFxuICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxuICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblx0bG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgIFxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSAmJiAhY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwNFwiKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiU0VORE1BSUxcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgfVxufVxuIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="4">
              <post-functions>
                <function type="class">
                  <arg name="field.copyFieldSource1"></arg>
                  <arg name="textValue">-1</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="workflowName-textValue">OPAA: PM Task Workflow</arg>
                  <arg name="performTransitionAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="scopeType">PARENT</arg>
                  <arg name="destination-scopeTarget">SUB_TASK</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitieslinkedtransition-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="integerValue">31</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.linkedtransition.LinkedTransitionFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                  <arg name="status"></arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="append.value"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.value">true</arg>
                  <arg name="field.name">customfield_23245</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="field.copyFieldSource2"></arg>
                  <arg name="field.copyFieldSource1">customfield_23236</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="field.createTargetValue1"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.copyFieldMode1">OVERWRITE</arg>
                  <arg name="field.copyFieldDestination1">customfield_22653</arg>
                  <arg name="field.copyFieldSeparator1"></arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiescopyValueFromOtherField-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.CopyValueFromOtherFieldPostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_22813</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdateissuestatus-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowcreatecomment-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowgeneratechangehistory-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowreindexissue-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">652b3781-6f7d-418a-9e37-55121b823bd1</arg>
                  <arg name="FIELD_NOTES">YCFgVXBkYXRlIE9QX1NVUFBMSUVSLCBPUF9JTlRFUk5BTF9URUNITklDSUFOUywgT1BfVEVDSE5JQ0lBTlMgb24gUE0gVGFza3M=</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS51dGlsLkRlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZVxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKClcbklzc3VlSW5kZXhpbmdTZXJ2aWNlIGlzc3VlSW5kZXhpbmdTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KElzc3VlSW5kZXhpbmdTZXJ2aWNlKVxuLy9kZWYgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMzY0NTlcIilcbmRlZiB0a3RTdXBwbGllciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1NVUFBMSUVSXCIpXG5kZWYgdGt0SW50ZXJuYWxUZWNocyA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0lOVEVSTkFMX1RFQ0hOSUNJQU5TXCIpWzBdXG5kZWYgdGt0VGVjaHMgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9URUNITklDSUFOU1wiKVswXVxuZGVmIHN1YlRhc2tPYmplY3RzID0gaXNzdWUuZ2V0U3ViVGFza09iamVjdHMoKVxuXG5kZWYgY3VycmVudFN1YlRhc2tcblxuaWYgKHN1YlRhc2tPYmplY3RzKXtcbiAgICBmb3IgKHN0IGluIHN1YlRhc2tPYmplY3RzKXtcbiAgICAgICAgaWYoc3QuaXNzdWVUeXBlLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQucGxhbm5lZE1haW50ZW5hbmNlVGFzayddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgIGZvcihzIGluIHRrdFN1cHBsaWVyKXtcbiAgICAgICAgICAgICAgICBzLnVwZGF0ZVZhbHVlKG51bGwsIHN0LCBuZXcgTW9kaWZpZWRWYWx1ZShzdC5nZXRDdXN0b21GaWVsZFZhbHVlKHMpLCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHMpKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGt0SW50ZXJuYWxUZWNocy51cGRhdGVWYWx1ZShudWxsLCBzdCwgbmV3IE1vZGlmaWVkVmFsdWUoc3QuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0a3RJbnRlcm5hbFRlY2hzKSwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0a3RJbnRlcm5hbFRlY2hzKSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcbiAgICAgICAgICAgIHRrdFRlY2hzLnVwZGF0ZVZhbHVlKG51bGwsIHN0LCBuZXcgTW9kaWZpZWRWYWx1ZShzdC5nZXRDdXN0b21GaWVsZFZhbHVlKHRrdFRlY2hzKSwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0a3RUZWNocykpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG4gICAgICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KHN0KVxuICAgICAgICB9XG4gICAgfVxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="append.value"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.value">%%CURRENT_DATETIME%%</arg>
                  <arg name="field.name">customfield_22639</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">0ff57ef7-f8af-4689-a977-5b5f92ac4279</arg>
                  <arg name="FIELD_NOTES">YCFgT1A6IE5ldyBJbnN0YWxsYXRpb24gLSBDaGVjayBsaW5rZWRUaWNrZXRzICYgRmFzdC1UcmFuc2FjdCB0aGVt</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5sb2cud2FybiBcIiR7aXNzdWUua2V5fSBUcmFuc2F6aW9uZSBBU1NJR04gVE8gSU5URVJOQUwgVEVDSFMgQU5EIFBMQU4gLSBQb3N0IEZ1bmN0aW9uIGNoZWNrIGxpbmtlZElzc3Vlc1wiXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiBhdXRvbWF0aWNhbGx5Q29uZmlybWVkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5QXNzaWduZWQnXSA/IHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlBc3NpZ25lZCddLnRvU3RyaW5nKCkgOiBcIk9QX0FVVE9NQVRJQ0FMTFlfQVNTSUdORURcIilbMF1cbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5cbi8vUGVyIHRlc3QgZGEgY29uc29sZVxuLy9pc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIk9QVVQtMjc2XCIpXG5cbi8qUFJPRCovXG5BU1NJR05fVE9fU1VQUExJRVIgPSBwcm9wZXJ0aWVzWyd3Zi50ci5hc3NpZ25Ub1RlY2hBbmRTY2hlZHVsZSddID8gcHJvcGVydGllc1snd2YudHIuYXNzaWduVG9UZWNoQW5kU2NoZWR1bGUnXS50b0ludGVnZXIoKSA6IDU2MVxuXG5kZWYgdXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuZGVmIGlzc3VlU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlU2VydmljZSgpXG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcblxuLypTZSBlc2VndW8gbGEgY29uZmlybSB0byBjdXN0b21lciBzdSB1biB0aWNrZXQgY29uIDEgbyArIHRpY2tldCBjb2xsZWdhdGksIHZlcmlmaWNvIGUgc3Bvc3RvIGluIGF1dG9tYXRpY28gZ2xpIGV2ZW50dWFsaSB0aWNrZXQgY29sbGVnYXRpKi9cbmxvZy53YXJuIFwidmVyaWZpY28gZSBzcG9zdG8gaW4gYXV0b21hdGljbyBnbGkgZXZlbnR1YWxpIHRpY2tldCBjb2xsZWdhdGlcIlxubG9nLmRlYnVnIGlzc3VlLmdldElzc3VlVHlwZSgpLmdldE5hbWUoKVxubG9nLmRlYnVnIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZClcbmlmKGlzc3VlLmdldElzc3VlVHlwZSgpLmdldE5hbWUoKSA9PSBwcm9wZXJ0aWVzWydpdC5uZXdJbnN0YWxsYXRpb24nXS50b1N0cmluZygpICYmIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpPT1udWxsIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCkudG9TdHJpbmcoKS5lcXVhbHMoXCJOb1wiKSkpe1xuICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKVxuICAgIGxvZy5kZWJ1ZyBcImFsbEluSXNzdWVMaW5rOiBcIiArIGFsbEluSXNzdWVMaW5rXG4gICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgICAgIGlmKGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKSE9IG51bGwgJiYgaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgbG9nLndhcm4gXCJJc3N1ZSBjb24gcmVsYXRlc0luSXNzdWVMaW5rXCJcbiAgICAgICAgICAgIC8qRXNlZ3VpcmUgdHJhbnNhemlvbmUgZGkgc3RhdG8gZGVsbGEgc291cmNlSXNzdWUqL1xuICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlID0gaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpXG4gICAgICAgICAgICBkZWYgbGlua2VkSXNzdWVTdGF0dXMgPSBsaW5rZWRJc3N1ZS5nZXRTdGF0dXMoKVxuICAgICAgICAgICAgZGVmIHRyYW5zaXRpb25JZFxuICAgICAgICAgICAgaWYobGlua2VkSXNzdWVTdGF0dXMubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5vcGVuJ10udG9TdHJpbmcoKSl7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbklkPUFTU0lHTl9UT19TVVBQTElFUlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYodHJhbnNpdGlvbklkPT1BU1NJR05fVE9fU1VQUExJRVIpe1xuICAgICAgICAgICAgICAgIC8vIFByZXBhcmUgb3VyIGlucHV0IGZvciB0aGUgdHJhbnNpdGlvblxuICAgICAgICAgICAgICAgIGRlZiBpc3N1ZUlucHV0UGFyYW1ldGVycyA9IGlzc3VlU2VydmljZS5uZXdJc3N1ZUlucHV0UGFyYW1ldGVycygpXG4gICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7XG4gICAgICAgICAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayh0cnVlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL2RlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpXG4gICAgICAgICAgICAgICAgLy9Db21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gXCJZZXNcIiB9XG4gICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksIFwiWWVzXCIpIFxuICAgICAgICAgICAgICAgIC8vbG9nLndhcm4gXCJpc3N1ZUlucHV0UGFyYW1ldGVyczogXCIgKyBpc3N1ZUlucHV0UGFyYW1ldGVyc1xuICAgICAgICAgICAgICAgIGRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlXG5cbiAgICAgICAgICAgICAgICBkZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLmdldFJlbGV2YW50Q29uZmlnKGxpbmtlZElzc3VlKVxuICAgICAgICAgICAgICAgIGxvZy53YXJuIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcbiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuXG4gICAgICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpXG4gICAgICAgICAgICAgICAgbG9nLndhcm4gXCJVcGRhdGVkIGN1c3RvbWZpZWxkIC0gaXNzdWUgbGlua2F0YVwiXG5cbiAgICAgICAgICAgICAgICAvL2RlZiB2YWxpZGF0aW9uUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycylcbiAgICAgICAgICAgICAgICBpZiAoaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgZGVmIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpXG4gICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJGYWlsZWQgdG8gdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn1cIilcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlRyYW5zYXppb25lIGZhdHRhICR7QVNTSUdOX1RPX1NVUFBMSUVSfSAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c31cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFJFU1QgQVBJIHBlciBwdWxpemlhIGNhY2hlIGlzc3VlIGxpbmtlZCAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdE1ldGhvZCA9IFwiR0VUXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKlNjcmlwdCBWYXJpYWJsZXMqL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTMyNTM1XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvYXV0b21hdGlvbi9jbGVhckNhY2hlL3RpY2tldGtleS9cIiArIGxpbmtlZElzc3VlLmtleVxuICAgICAgICAgICAgICAgICAgICAgICAgVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICAgICAgICAgICAgICAgICAgICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259XCIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgTGlzdDxJc3N1ZUxpbms+IGFsbE91dElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbiAgICBsb2cuZGVidWcgXCJhbGxPdXRJc3N1ZUxpbms6IFwiICsgYWxsT3V0SXNzdWVMaW5rXG4gICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsT3V0SXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHtcbiAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcblxuICAgICAgICBpZihpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKSE9IG51bGwgJiYgaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgbG9nLndhcm4gXCJJc3N1ZSBjb24gcmVsYXRlc091dElzc3VlTGlua1wiXG4gICAgICAgICAgICAvKkVzZWd1aXJlIHRyYW5zYXppb25lIGRpIHN0YXRvIGRlbGxhIGRlc3RpbmF0aW9uSXNzdWUqL1xuICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlID0gaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KClcbiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZVN0YXR1cyA9IGxpbmtlZElzc3VlLmdldFN0YXR1cygpXG4gICAgICAgICAgICBkZWYgdHJhbnNpdGlvbklkXG4gICAgICAgICAgICBsb2cud2FybiBcImxpbmtlZElzc3VlOiBcIiArIGxpbmtlZElzc3VlXG4gICAgICAgICAgICBsb2cud2FybiBcImxpbmtlZElzc3VlU3RhdHVzLm5hbWU6IFwiICsgbGlua2VkSXNzdWVTdGF0dXMubmFtZVxuICAgICAgICAgICAgaWYobGlua2VkSXNzdWVTdGF0dXMubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5vcGVuJ10udG9TdHJpbmcoKSl7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbklkPUFTU0lHTl9UT19TVVBQTElFUlxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZih0cmFuc2l0aW9uSWQ9PUFTU0lHTl9UT19TVVBQTElFUil7XG4gICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uXG4gICAgICAgICAgICAgICAgZGVmIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKClcbiAgICAgICAgICAgICAgICBpc3N1ZUlucHV0UGFyYW1ldGVycy53aXRoIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0U2tpcFNjcmVlbkNoZWNrKHRydWUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSlcbiAgICAgICAgICAgICAgICAvL0NvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICAgICAgICAgICAgICAvL2lzc3VlSW5wdXRQYXJhbWV0ZXJzLmFkZEN1c3RvbUZpZWxkVmFsdWUoZmllbGRDb25maWcuZ2V0SWQoKSwgXCJZZXNcIikgXG5cbiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcbiAgICAgICAgICAgICAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBsaW5rZWRJc3N1ZVxuXG4gICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNvbmZpcm1lZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSlcbiAgICAgICAgICAgICAgICBsb2cud2FybiBcImZpZWxkQ29uZmlnOiBcIiArIGZpZWxkQ29uZmlnXG4gICAgICAgICAgICAgICAgZGVmIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gXCJZZXNcIiB9XG4gICAgICAgICAgICAgICAgYXV0b21hdGljYWxseUNvbmZpcm1lZC51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcblxuICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGxpbmtlZElzc3VlKVxuICAgICAgICAgICAgICAgIGxvZy53YXJuIFwiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGFcIlxuXG4gICAgICAgICAgICAgICAgaWYgKGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSB0cmFuc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpKVxuICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259XCIpXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJUcmFuc2F6aW9uZSBmYXR0YSAke0FTU0lHTl9UT19TVVBQTElFUn0gJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSwgJHtsaW5rZWRJc3N1ZS5zdGF0dXN9XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBSRVNUIEFQSSBwZXIgcHVsaXppYSBjYWNoZSBpc3N1ZSBsaW5rZWQgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RNZXRob2QgPSBcIkdFVFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgLypTY3JpcHQgVmFyaWFibGVzKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vUGVyIHRlc3QgZGEgY29uc29sZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy0zMjUzNVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vY2xlYXJDYWNoZS90aWNrZXRrZXkvXCIgKyBsaW5rZWRJc3N1ZS5rZXlcbiAgICAgICAgICAgICAgICAgICAgICAgIFVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgICAgICAgICAgICAgICAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIkNvdWxkIG5vdCB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfVxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_22758</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="field2">customfield_22757</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="691" name="Conferma e Pianifica senza notifiche" view="fieldscreen">
          <meta name="opsbar-sequence">50</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">20112</meta>
          <restrict-to>
            <conditions type="AND">
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">a9655845-bd3d-4171-ab08-fdb0c420b5d2</arg>
                <arg name="FIELD_NOTES">YCFgT1BfQVNTRVQgc2hvdWxkIGJlIGV2YWx1YXRlZCAmJiBJc3N1ZSB0eXBlIHNob3VsZCBiZSBOZXcgSW5zdGFsbGF0aW9u</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJjZlZhbHVlc1snT1BfQVNTRVQnXSAhPSBudWxsIHx8IGlzc3VlLmlzc3VlVHlwZS5uYW1lID09ICdQbGFubmVkIE1haW50ZW5hbmNlIFRpY2tldCciLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">e335982b-f860-4bed-a8cc-028022cff1ce</arg>
                <arg name="FIELD_NOTES">YCFgT1BfU1VQUExJRVIgc2hvdWxkIGJlIG5vdCBudWxs</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5kZWYgdHJvdmF0bz1mYWxzZVxuZm9yIChzIGluIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zdXBwbGllciddLnRvU3RyaW5nKCkpKXtcbiAgICBpZiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzKSAhPSBudWxsKXtcbiAgICAgICAgdHJvdmF0bz10cnVlXG4gICAgfVxufVxucmV0dXJuIHRyb3ZhdG8iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">de52ae8f-3a4f-4dd8-93de-2d990003847d</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIEN1c3RvbWVyIENvbnRyYWN0ICYmIE51bWJlciBvZiB0aWNrZXRzIGluIHRoZSBsYXN0IDYwIGRheXM=</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5pbXBvcnQgamF2YS50ZXh0LkRhdGVGb3JtYXQ7XG5pbXBvcnQgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQ7XG5pbXBvcnQgamF2YS51dGlsLkRhdGU7XG5pbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmpxbC5wYXJzZXIuSnFsUXVlcnlQYXJzZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuYmMuaXNzdWUuc2VhcmNoLlNlYXJjaFNlcnZpY2VcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEudXNlci51dGlsLlVzZXJVdGlsXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLndlYi5iZWFuLlBhZ2VyRmlsdGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuVXNlclV0aWwgdXNlclV0aWwgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRVc2VyVXRpbCgpXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKClcbi8vaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtNDcyODVcIilcblxuZGVmIHdhcm5pbmdzID0gZmFsc2VcbmRlZiBtaXNzaW5nQ29udHJhY3QgPSBmYWxzZVxuZGVmIGV4cGlyZWRDb250cmFjdCA9IGZhbHNlXG5kZWYgZXJyb3JzID0gZmFsc2VcblxuZGVmIGluc3RhbGxhdGlvbiA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXNzZXQnXS50b1N0cmluZygpKVswXVxuZGVmIGF1dG9tYXRpY2FsbHlDb25maXJtZWQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlBc3NpZ25lZCddID8gcHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUFzc2lnbmVkJ10udG9TdHJpbmcoKSA6IFwiT1BfQVVUT01BVElDQUxMWV9BU1NJR05FRFwiKVswXVxuZGVmIHRyYW5zaXRpb25DaGVjayA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY2hlY2tBbmRDb25maXJtJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBleGVjdXRpb25EYXRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfRVhFQ1VUSU9OX0RBVEVcIilbMF1cblxuZGVmIHdhcm5pbmdFbXB0eUZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVycm9yTWFuZGF0b3J5RmllbGRzID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgYXNzZXQsIGFzc2V0S2V5LCBhc3NldE9iamVjdFxuXG5DbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7ICBcbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG5hc3NldCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoaW5zdGFsbGF0aW9uKVxubG9nLmRlYnVnIFwiYXNzZXQ6IFwiICsgYXNzZXRcbmFzc2V0PWFzc2V0LnRvU3RyaW5nKClcbmFzc2V0S2V5ID0gYXNzZXQuc3Vic3RyaW5nKGFzc2V0Lmxhc3RJbmRleE9mKCcoJykrMSxhc3NldC5sYXN0SW5kZXhPZignKScpKVxuYXNzZXRPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oYXNzZXRLZXkpXG5cbi8vT1BfQVNTRVRcbmlmKCFpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0LnBsYW5uZWRNYWludGVuYW5jZSddKSAmJiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKT09bnVsbCB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLnRvU3RyaW5nKCkuZXF1YWxzKFwiTm9cIikpKXtcbiAgICAvL0NoZWNrIENVU1RPTUVSX0NPTlRSQUNUX1JFRiBvbiBPUF9BU1NFVFxuICAgIFxuICAgIFxuICAgIGlmKGFzc2V0T2JqZWN0IT1udWxsKXtcbiAgICAgICAgbG9nLmRlYnVnIFwiYXNzZXRPYmplY3QuZ2V0SWQoKTogXCIgKyBhc3NldE9iamVjdC5nZXRJZCgpXG4gICAgICAgIGRlZiBvYlRyaWFnZVxuICAgICAgICBkZWYgY3VzdG9tZXJDb250cmFjdCwgY3VzdG9tZXJDb250cmFjdEF0dHJcbiAgICAgICAgY3VzdG9tZXJDb250cmFjdEF0dHIgPSBwcm9wZXJ0aWVzWydpb2JqLmhhcmR3YXJlLmNvbnRyYWN0J10gPyBwcm9wZXJ0aWVzWydpb2JqLmhhcmR3YXJlLmNvbnRyYWN0J10udG9TdHJpbmcoKSA6IFwiQ1VTVE9NRVJfQ09OVFJBQ1RfUkVGXCJcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGFzc2V0T2JqZWN0LmdldElkKCksIGN1c3RvbWVyQ29udHJhY3RBdHRyKSl7XG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihhc3NldE9iamVjdC5nZXRJZCgpLCBjdXN0b21lckNvbnRyYWN0QXR0cikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBjdXN0b21lckNvbnRyYWN0ID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuXG4gICAgICAgIGxvZy5kZWJ1ZyBcImN1c3RvbWVyQ29udHJhY3Q6IFwiICsgY3VzdG9tZXJDb250cmFjdFxuXG4gICAgICAgIGlmKGN1c3RvbWVyQ29udHJhY3QgPT0gbnVsbCl7XG4gICAgICAgICAgICB3YXJuaW5ncyA9IHRydWVcbiAgICAgICAgICAgIG1pc3NpbmdDb250cmFjdCA9IHRydWVcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAvL2dldCBcIlFUX1ZBTElEX1RcIiBmb3IgdGhhdCBUZWNobmljaWFuXG4gICAgICAgICAgICBkZWYgY29udHJhY3Q9Y3VzdG9tZXJDb250cmFjdC50b1N0cmluZygpXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJjb250cmFjdDpcIiArIGNvbnRyYWN0XG4gICAgICAgICAgICBkZWYgY29udHJhY3RJZCA9IGNvbnRyYWN0LnN1YnN0cmluZyhjb250cmFjdC5sYXN0SW5kZXhPZignKCcpKzEsY29udHJhY3QubGFzdEluZGV4T2YoJyknKSlcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImNvbnRyYWN0SWQ6XCIgKyBjb250cmFjdElkXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJwcm9wZXJ0aWVzWydpb2JqLmNvbnRyYWN0LnZhbGlkVG8nXTogXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmNvbnRyYWN0LnZhbGlkVG8nXVxuICAgICAgICAgICAgZGVmIGV4cGlyaW5nRGF0ZSwgZXhwaXJpbmdEYXRlQXR0clxuICAgICAgICAgICAgZXhwaXJpbmdEYXRlQXR0ciA9IHByb3BlcnRpZXNbJ2lvYmouY29udHJhY3QudmFsaWRUbyddID8gcHJvcGVydGllc1snaW9iai5jb250cmFjdC52YWxpZFRvJ10udG9TdHJpbmcoKSA6IFwiUVRfVkFMSURfVFwiXG5cbiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdElkLnRvSW50ZWdlcigpLCBjdXN0b21lckNvbnRyYWN0QXR0cikpe1xuICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbnRyYWN0SWQudG9JbnRlZ2VyKCksIGN1c3RvbWVyQ29udHJhY3RBdHRyKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICBjb250cmFjdFJlZiA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgY29udHJhY3RETyA9IGNvbnRyYWN0UmVmLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJjb250cmFjdERPOiBcIiArIGNvbnRyYWN0RE9cbiAgICAgICAgICAgICAgICBjb250cmFjdERPS2V5ID0gY29udHJhY3RETy5zdWJzdHJpbmcoY29udHJhY3RETy5sYXN0SW5kZXhPZignKCcpKzEsY29udHJhY3RETy5sYXN0SW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImNvbnRyYWN0RE9LZXk6IFwiICsgY29udHJhY3RET0tleVxuICAgICAgICAgICAgICAgIGNvbnRyYWN0RE9PYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4ocHJvcGVydGllc1snaXNjaGVtYS5kYm8nXS50b1N0cmluZygpICsgXCItXCIgKyBjb250cmFjdERPS2V5KVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImV4cGlyaW5nRGF0ZUF0dHI6IFwiICsgZXhwaXJpbmdEYXRlQXR0clxuICAgICAgICAgICAgICAgIGV4cGlyaW5nRGF0ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdERPS2V5LnRvSW50ZWdlcigpLCBleHBpcmluZ0RhdGVBdHRyKSA/IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdERPS2V5LnRvSW50ZWdlcigpLCBleHBpcmluZ0RhdGVBdHRyKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudmFsdWVbMF0gYXMgRGF0ZSA6IG51bGxcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZGVmIHRvZGF5c0RhdGVUaW1lID0gKG5ldyBEYXRlKCkpXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJleHBpcmluZ0RhdGU6IFwiICsgZXhwaXJpbmdEYXRlXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJ0b2RheXNEYXRlVGltZTogXCIgKyB0b2RheXNEYXRlVGltZVxuICAgICAgICAgICAgaWYoZXhwaXJpbmdEYXRlIDwgdG9kYXlzRGF0ZVRpbWUpe1xuICAgICAgICAgICAgICAgIHdhcm5pbmdzID0gdHJ1ZVxuICAgICAgICAgICAgICAgIGV4cGlyZWRDb250cmFjdCA9IHRydWVcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG5cbiAgICB9XG4gICAgICAgIFxufVxuXG5kZWYganFsUXVlcnlQYXJzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSnFsUXVlcnlQYXJzZXIpXG5kZWYganFsU2VhcmNoID0gXCJwcm9qZWN0ID0gJ1wiICsgaXNzdWUuZ2V0UHJvamVjdE9iamVjdCgpLm5hbWUgKyBcIicgQU5EIFwiICtcbiAgICBcIihpc3N1ZXR5cGUgbm90IGluIChcXFwiTmV3IEluc3RhbGxhdGlvblxcXCIsIFxcXCJQbGFubmVkIE1haW50ZW5hbmNlIFRpY2tldFxcXCIsIFxcXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcXFwiKSBPUiBpc3N1ZXR5cGUgaW4gKFxcXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcXFwiKSBBTkQgc3RhdHVzID0gRG9uZSkgXCIgK1xuICAgIFwiQU5EIE9QX0FTU0VUID0gXCIgKyBhc3NldEtleSArIFwiIEFORCAoKGlzc3VldHlwZSBub3QgaW4gKFxcXCJOZXcgSW5zdGFsbGF0aW9uXFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0XFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1xcXCIpIEFORCBPUF9FWEVDVVRJT05fREFURSBJUyBOT1QgRU1QVFkgQU5EIE9QX0VYRUNVVElPTl9EQVRFID49IC02MGQpIFwiICtcbiAgICBcIk9SIChpc3N1ZXR5cGUgaW4gKFxcXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcXFwiKSBBTkQgaXNzdWVGdW5jdGlvbiBpbiBzdWJ0YXNrc09mKFxcXCJPUF9FWEVDVVRJT05fREFURSBJUyBOT1QgRU1QVFkgQU5EIE9QX0VYRUNVVElPTl9EQVRFID49IC02MGRcXFwiKSkgT1IgKGlzc3VldHlwZSBub3QgaW4gKFxcXCJOZXcgSW5zdGFsbGF0aW9uXFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0XFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1xcXCIpIEFORCBPUF9FWEVDVVRJT05fREFURSBJUyBFTVBUWSBBTkQgT1BfUExBTk5FRF9EQVRFIElTIE5PVCBFTVBUWSBBTkQgT1BfUExBTk5FRF9EQVRFID49IC02MGQpIFwiICtcbiAgICBcIk9SIChpc3N1ZXR5cGUgaW4gKFxcXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcXFwiKSBBTkQgaXNzdWVGdW5jdGlvbiBpbiBzdWJ0YXNrc09mKFxcXCJPUF9FWEVDVVRJT05fREFURSBJUyBFTVBUWSBBTkQgT1BfUExBTk5FRF9EQVRFIElTIE5PVCBFTVBUWSBBTkQgT1BfUExBTk5FRF9EQVRFID49IC02MGRcXFwiKSkgT1IgKGlzc3VldHlwZSBub3QgaW4gKFxcXCJOZXcgSW5zdGFsbGF0aW9uXFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0XFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1xcXCIpIEFORCBPUF9FWEVDVVRJT05fREFURSBJUyBFTVBUWSBBTkQgT1BfUExBTk5FRF9EQVRFIElTIEVNUFRZIEFORCBPUF9SRVFVRVNURURfREFURSBJUyBOT1QgRU1QVFkgQU5EIE9QX1JFUVVFU1RFRF9EQVRFID49IC02MGQpIFwiICtcbiAgICBcIk9SIChpc3N1ZXR5cGUgaW4gKFxcXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcXFwiKSBBTkQgaXNzdWVGdW5jdGlvbiBpbiBzdWJ0YXNrc09mKFxcXCJPUF9FWEVDVVRJT05fREFURSBJUyBFTVBUWSBBTkQgT1BfUExBTk5FRF9EQVRFIElTIEVNUFRZIEFORCBPUF9SRVFVRVNURURfREFURSBJUyBOT1QgRU1QVFkgQU5EIE9QX1JFUVVFU1RFRF9EQVRFID49IC02MGRcXFwiKSkpXCJcblxuXG5cbmxvZy5kZWJ1ZyBqcWxTZWFyY2hcblxuZGVmIHF1ZXJ5ID0ganFsUXVlcnlQYXJzZXIucGFyc2VRdWVyeShqcWxTZWFyY2gpXG5kZWYgdXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQubG9nZ2VkSW5Vc2VyXG5kZWYgc2VhcmNoU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChTZWFyY2hTZXJ2aWNlKVxuZGVmIHNlYXJjaCA9IHNlYXJjaFNlcnZpY2Uuc2VhcmNoKHVzZXIsIHF1ZXJ5LCBQYWdlckZpbHRlci5nZXRVbmxpbWl0ZWRGaWx0ZXIoKSlcbmRlZiB0a3RMaXN0ID0gXCJcIlxuZGVmIGRhdGUgPSBuZXcgRGF0ZSgpXG5kZWYgd2FybmluZ051bVRrdCA9IGZhbHNlXG5cbmlmKHNlYXJjaC5yZXN1bHRzLnNpemUoKSA+PSAyKSB7XG4gICAgd2FybmluZ051bVRrdCA9IHRydWVcbiAgICB3YXJuaW5ncyA9IHRydWVcbiAgICAvL1ByZXBhcm8gaWwgd2FybmluZyBkYSBtb3N0cmFyZSBhbGwndXRlbnRlIGNvbiBpbCBkZXR0YWdsaW8gZGVsbGUgaXNzdWUgZ2lcdTAwZTAgZXNpc3RlbnRpXG4gICAgZm9yKGkgaW4gc2VhcmNoLnJlc3VsdHMpe1xuICAgICAgICBpZihpLnN0YXR1cy5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKFwiRG9uZVwiKSAmJiBpLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMoXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcIikpe1xuICAgICAgICAgICAgaWYodGt0TGlzdCAhPSBcIlwiKXtcbiAgICAgICAgICAgICAgICB0a3RMaXN0ID0gdGt0TGlzdCArIFwiOyBcIiArIGkuZ2V0UGFyZW50T2JqZWN0KCkua2V5LnRvU3RyaW5nKCkgKyBcIiAoXCIgKyBpLmdldFBhcmVudE9iamVjdCgpLmdldElzc3VlVHlwZSgpLm5hbWUgKyBcIikgXCIgKyBpLnN0YXR1cy5uYW1lLnRvU3RyaW5nKClcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHRrdExpc3QgPSBpLmdldFBhcmVudE9iamVjdCgpLmtleS50b1N0cmluZygpICsgXCIgKFwiICsgaS5nZXRQYXJlbnRPYmplY3QoKS5nZXRJc3N1ZVR5cGUoKS5uYW1lICsgXCIpIFwiICsgaS5zdGF0dXMubmFtZS50b1N0cmluZygpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL3RrdExpc3QgPSB0a3RMaXN0ICsgXCJcXG5cIiArIGkuZ2V0UGFyZW50T2JqZWN0KCkua2V5LnRvU3RyaW5nKCkgKyBcIiAoXCIgKyBpLmdldFBhcmVudE9iamVjdCgpLmdldElzc3VlVHlwZSgpLm5hbWUgKyBcIikgXCIgKyBpLnN0YXR1cy5uYW1lLnRvU3RyaW5nKClcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBpZihpLnN0YXR1cy5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKFwiQ2xvc2VkXCIpICYmICFpLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMoXCJQbGFubmVkIE1haW50ZW5hbmNlIFRhc2tcIikpe1xuICAgICAgICAgICAgICAgIGlmKHRrdExpc3QgIT0gXCJcIil7XG4gICAgICAgICAgICAgICAgICAgIHRrdExpc3QgPSB0a3RMaXN0ICsgXCI7IFwiICsgaS5rZXkudG9TdHJpbmcoKSArIFwiIChcIiArIGkuZ2V0SXNzdWVUeXBlKCkubmFtZSArIFwiKSBcIiArIGkuc3RhdHVzLm5hbWUudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICB0a3RMaXN0ID0gaS5rZXkudG9TdHJpbmcoKSArIFwiIChcIiArIGkuZ2V0SXNzdWVUeXBlKCkubmFtZSArIFwiKSBcIiArIGkuc3RhdHVzLm5hbWUudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL3RrdExpc3QgPSB0a3RMaXN0ICsgXCJcXG5cIiArIGkua2V5LnRvU3RyaW5nKCkgKyBcIiAoXCIgKyBpLmdldElzc3VlVHlwZSgpLm5hbWUgKyBcIikgXCIgKyBpLnN0YXR1cy5uYW1lLnRvU3RyaW5nKClcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGlmKHRrdExpc3QgIT0gXCJcIil7XG4gICAgICAgICAgICAgICAgICAgIHRrdExpc3QgPSB0a3RMaXN0ICsgXCI7IFwiICsgaS5rZXkudG9TdHJpbmcoKSArIFwiIChcIiArIGkuZ2V0SXNzdWVUeXBlKCkubmFtZSArIFwiKSBcIiArIGkuc3RhdHVzLm5hbWUudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICB0a3RMaXN0ID0gaS5rZXkudG9TdHJpbmcoKSArIFwiIChcIiArIGkuZ2V0SXNzdWVUeXBlKCkubmFtZSArIFwiKSBcIiArIGkuc3RhdHVzLm5hbWUudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL3RrdExpc3QgPSB0a3RMaXN0ICsgXCJcXG5cIiArIGkua2V5LnRvU3RyaW5nKCkgKyBcIiAoXCIgKyBpLmdldElzc3VlVHlwZSgpLm5hbWUgKyBcIikgXCIgKyBpLnN0YXR1cy5uYW1lLnRvU3RyaW5nKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBsb2cuZGVidWcgXCJ0a3RMaXN0OiBcIiArIHRrdExpc3Rcbn1cblxuZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuXG5pZiAoIXdhcm5pbmdzKXtcbiAgICByZXR1cm4gdHJ1ZVxufWVsc2V7XG4gICAgaWYod2FybmluZ3Mpe1xuICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIikpe1xuICAgICAgICAgICAgLy9sb2cuZGVidWcgXCJyZXR1cm4gdHJ1ZVwiXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuXHRcdFx0ZGVmIHdMaXN0Q29uZmlybUVtcHR5Q29udHJhY3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1NdWx0aXBsZVRrdHMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYobWlzc2luZ0NvbnRyYWN0KXtcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eUNvbnRyYWN0LmFkZChcIldcIilcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eUNvbnRyYWN0LmFkZChcIkNVU1RPTUVSX0NPTlRSQUNUX01JU1NJTkdcIilcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eUNvbnRyYWN0LmFkZChudWxsKVxuXG4gICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5Q29udHJhY3QpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKGV4cGlyZWRDb250cmFjdCl7XG4gICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlDb250cmFjdC5hZGQoXCJXXCIpXG4gICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlDb250cmFjdC5hZGQoXCJDVVNUT01FUl9DT05UUkFDVF9FWFBJUkVEXCIpXG4gICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlDb250cmFjdC5hZGQobnVsbClcblxuICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eUNvbnRyYWN0KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZih3YXJuaW5nTnVtVGt0KXtcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1NdWx0aXBsZVRrdHMuYWRkKFwiV1wiKVxuICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybU11bHRpcGxlVGt0cy5hZGQodGt0TGlzdClcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1NdWx0aXBsZVRrdHMuYWRkKFwiTU9SRV9USEFOXzJfVEtUU19MQVNUXzYwX0RBWVNcIilcbiAgICAgICAgICAgICAgICAvL3dMaXN0Q29uZmlybU11bHRpcGxlVGt0cy5hZGQobnVsbClcblxuICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1NdWx0aXBsZVRrdHMpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiV1wiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpIFxuICAgICAgICB9XG4gICAgfVxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">a80e150a-63e9-41ea-964a-c564139e7864</arg>
              <arg name="FIELD_NOTES">YCFgU0FQOiB1cGRhdGUgU04gc3RhdHVzICYgQ3JlYXRlIFNP</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcblxuZGVmIHNhcFNOID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1NBUF9TRVJWSUNFX05PVElGSUNBVElPTlwiKVswXVxuXG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcblxuVVJMIHVybFxuSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvblxuXG5pZihpc3N1ZS5pc3N1ZVR5cGUubmFtZSAhPSBcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0XCIgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzYXBTTikgIT0gbnVsbCl7XG4gICAgcmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuXG4gICAgZGVmIGJvZHlfcmVxID0gW11cbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXG4gICAgICAgIFwic3RhdHVzXCI6IFwiUExBXCJcbiAgICBdIFxuXG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL3NlcnZpY2Uvbm90aWZpY2F0aW9uXCJcblxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxuICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNOOiBcIiArIGJvZHlfcmVxXG4gICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxuICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgIFxuICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG4gICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcblxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TTi1VUERBVEVcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0udG9TdHJpbmcoKSlcbiAgICAgICAgXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICB9ZWxzZXtcbiAgICAgICAgLyoqIFNFUlZJQ0UgT1JERVIgQ1JFQVRJT04gKiovXG4gICAgICAgIGJvZHlfcmVxID0gW1xuICAgICAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXlcbiAgICAgICAgXSBcbiAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL29yL3VwZGF0ZS9zZXJ2aWNlL29yZGVyXCJcblxuICAgICAgICBsb2cuZGVidWcgXCJiYXNlVVJMIFNPOiBcIiArIGJhc2VVUkxcbiAgICAgICAgbG9nLmRlYnVnIFwiYm9keV9yZXEgU086IFwiICsgYm9keV9yZXFcbiAgICAgICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgICAgICBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG4gICAgICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgICAgICBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cdFx0bG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDFcIikgJiYgIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgXHRcdGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVmIGpzb25TbHVycGVyID0gbmV3IEpzb25TbHVycGVyKClcbiAgICAgICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpXG4gICAgICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICAgICAgbG9nLmRlYnVnIFwibWVzc2FnZTogXCIgKyAganNvbl9vYmplY3QubWVzc2FnZVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiZXJyb3JzOiBcIiArICBqc29uX29iamVjdC5lcnJvcnMudG9TdHJpbmcoKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJPUC1TQVAtU08tQ1JFQVRFXCIpXG4gICAgICAgICAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGpzb25fb2JqZWN0LmVycm9yc1swXSlcbiAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICAgICAgfVxuICAgIH1cbn1cbiAiLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="4">
              <post-functions>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdateissuestatus-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowcreatecomment-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowgeneratechangehistory-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowreindexissue-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="append.value"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.value">%%CURRENT_DATETIME%%</arg>
                  <arg name="field.name">customfield_22639</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">0db4b388-06a4-49d8-ace8-c098c9d1a5c2</arg>
                  <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIGxpbmtlZFRpY2tldHMgJiBGYXN0LVRyYW5zYWN0IHRoZW0=</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5sb2cud2FybiBcIiR7aXNzdWUua2V5fSBUcmFuc2F6aW9uZSBBU1NJR04gVE8gU1VQUExJRVIgLSBQb3N0IEZ1bmN0aW9uIGNoZWNrIGxpbmtlZElzc3Vlc1wiXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiBhdXRvbWF0aWNhbGx5Q29uZmlybWVkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5QXNzaWduZWQnXSA/IHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlBc3NpZ25lZCddLnRvU3RyaW5nKCkgOiBcIk9QX0FVVE9NQVRJQ0FMTFlfQVNTSUdORURcIilbMF1cbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5cbi8vUGVyIHRlc3QgZGEgY29uc29sZVxuLy9pc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIk9QVVQtMjc2XCIpXG5cbi8qUFJPRCovXG5BU1NJR05fVE9fU1VQUExJRVIgPSBwcm9wZXJ0aWVzWyd3Zi50ci5hc3NpZ25Ub1N1cHBsaWVyQW5kU2NoZWR1bGVOb01haWwnXSA/IHByb3BlcnRpZXNbJ3dmLnRyLmFzc2lnblRvU3VwcGxpZXJBbmRTY2hlZHVsZU5vTWFpbCddLnRvSW50ZWdlcigpIDogNjkxXG5cbmRlZiB1c2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXG5kZWYgaXNzdWVTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVTZXJ2aWNlKClcblxuLypTZSBlc2VndW8gbGEgY29uZmlybSB0byBjdXN0b21lciBzdSB1biB0aWNrZXQgY29uIDEgbyArIHRpY2tldCBjb2xsZWdhdGksIHZlcmlmaWNvIGUgc3Bvc3RvIGluIGF1dG9tYXRpY28gZ2xpIGV2ZW50dWFsaSB0aWNrZXQgY29sbGVnYXRpKi9cbmxvZy53YXJuIFwidmVyaWZpY28gZSBzcG9zdG8gaW4gYXV0b21hdGljbyBnbGkgZXZlbnR1YWxpIHRpY2tldCBjb2xsZWdhdGlcIlxubG9nLmRlYnVnIGlzc3VlLmdldElzc3VlVHlwZSgpLmdldE5hbWUoKVxubG9nLmRlYnVnIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZClcbmlmKChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpPT1udWxsIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCkudG9TdHJpbmcoKS5lcXVhbHMoXCJOb1wiKSkpe1xuICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKVxuICAgIGxvZy5kZWJ1ZyBcImFsbEluSXNzdWVMaW5rOiBcIiArIGFsbEluSXNzdWVMaW5rXG4gICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgICAgIGlmKGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKSE9IG51bGwgJiYgaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgbG9nLndhcm4gXCJJc3N1ZSBjb24gcmVsYXRlc0luSXNzdWVMaW5rXCJcbiAgICAgICAgICAgIC8qRXNlZ3VpcmUgdHJhbnNhemlvbmUgZGkgc3RhdG8gZGVsbGEgc291cmNlSXNzdWUqL1xuICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlID0gaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpXG4gICAgICAgICAgICBkZWYgbGlua2VkSXNzdWVTdGF0dXMgPSBsaW5rZWRJc3N1ZS5nZXRTdGF0dXMoKVxuICAgICAgICAgICAgZGVmIHRyYW5zaXRpb25JZFxuICAgICAgICAgICAgaWYobGlua2VkSXNzdWVTdGF0dXMubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5vcGVuJ10udG9TdHJpbmcoKSl7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbklkPUFTU0lHTl9UT19TVVBQTElFUlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYodHJhbnNpdGlvbklkPT1BU1NJR05fVE9fU1VQUExJRVIpe1xuICAgICAgICAgICAgICAgIC8vIFByZXBhcmUgb3VyIGlucHV0IGZvciB0aGUgdHJhbnNpdGlvblxuICAgICAgICAgICAgICAgIGRlZiBpc3N1ZUlucHV0UGFyYW1ldGVycyA9IGlzc3VlU2VydmljZS5uZXdJc3N1ZUlucHV0UGFyYW1ldGVycygpXG4gICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7XG4gICAgICAgICAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayh0cnVlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL2RlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpXG4gICAgICAgICAgICAgICAgLy9Db21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gXCJZZXNcIiB9XG4gICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksIFwiWWVzXCIpIFxuICAgICAgICAgICAgICAgIC8vbG9nLndhcm4gXCJpc3N1ZUlucHV0UGFyYW1ldGVyczogXCIgKyBpc3N1ZUlucHV0UGFyYW1ldGVyc1xuICAgICAgICAgICAgICAgIGRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlXG5cbiAgICAgICAgICAgICAgICBkZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLmdldFJlbGV2YW50Q29uZmlnKGxpbmtlZElzc3VlKVxuICAgICAgICAgICAgICAgIGxvZy53YXJuIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcbiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuXG4gICAgICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpXG4gICAgICAgICAgICAgICAgbG9nLndhcm4gXCJVcGRhdGVkIGN1c3RvbWZpZWxkIC0gaXNzdWUgbGlua2F0YVwiXG5cbiAgICAgICAgICAgICAgICAvL2RlZiB2YWxpZGF0aW9uUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycylcbiAgICAgICAgICAgICAgICBpZiAoaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgZGVmIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpXG4gICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJGYWlsZWQgdG8gdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn1cIilcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlRyYW5zYXppb25lIGZhdHRhICR7QVNTSUdOX1RPX1NVUFBMSUVSfSAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c31cIilcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259XCIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgTGlzdDxJc3N1ZUxpbms+IGFsbE91dElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbiAgICBsb2cuZGVidWcgXCJhbGxPdXRJc3N1ZUxpbms6IFwiICsgYWxsT3V0SXNzdWVMaW5rXG4gICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsT3V0SXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHtcbiAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcblxuICAgICAgICBpZihpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKSE9IG51bGwgJiYgaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgbG9nLndhcm4gXCJJc3N1ZSBjb24gcmVsYXRlc091dElzc3VlTGlua1wiXG4gICAgICAgICAgICAvKkVzZWd1aXJlIHRyYW5zYXppb25lIGRpIHN0YXRvIGRlbGxhIGRlc3RpbmF0aW9uSXNzdWUqL1xuICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlID0gaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KClcbiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZVN0YXR1cyA9IGxpbmtlZElzc3VlLmdldFN0YXR1cygpXG4gICAgICAgICAgICBkZWYgdHJhbnNpdGlvbklkXG4gICAgICAgICAgICBsb2cud2FybiBcImxpbmtlZElzc3VlOiBcIiArIGxpbmtlZElzc3VlXG4gICAgICAgICAgICBsb2cud2FybiBcImxpbmtlZElzc3VlU3RhdHVzLm5hbWU6IFwiICsgbGlua2VkSXNzdWVTdGF0dXMubmFtZVxuICAgICAgICAgICAgaWYobGlua2VkSXNzdWVTdGF0dXMubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5vcGVuJ10udG9TdHJpbmcoKSl7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbklkPUFTU0lHTl9UT19TVVBQTElFUlxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZih0cmFuc2l0aW9uSWQ9PUFTU0lHTl9UT19TVVBQTElFUil7XG4gICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uXG4gICAgICAgICAgICAgICAgZGVmIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKClcbiAgICAgICAgICAgICAgICBpc3N1ZUlucHV0UGFyYW1ldGVycy53aXRoIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0U2tpcFNjcmVlbkNoZWNrKHRydWUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSlcbiAgICAgICAgICAgICAgICAvL0NvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICAgICAgICAgICAgICAvL2lzc3VlSW5wdXRQYXJhbWV0ZXJzLmFkZEN1c3RvbUZpZWxkVmFsdWUoZmllbGRDb25maWcuZ2V0SWQoKSwgXCJZZXNcIikgXG5cbiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcbiAgICAgICAgICAgICAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBsaW5rZWRJc3N1ZVxuXG4gICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNvbmZpcm1lZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSlcbiAgICAgICAgICAgICAgICBsb2cud2FybiBcImZpZWxkQ29uZmlnOiBcIiArIGZpZWxkQ29uZmlnXG4gICAgICAgICAgICAgICAgZGVmIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gXCJZZXNcIiB9XG4gICAgICAgICAgICAgICAgYXV0b21hdGljYWxseUNvbmZpcm1lZC51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcblxuICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGxpbmtlZElzc3VlKVxuICAgICAgICAgICAgICAgIGxvZy53YXJuIFwiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGFcIlxuXG4gICAgICAgICAgICAgICAgaWYgKGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSB0cmFuc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpKVxuICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259XCIpXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJUcmFuc2F6aW9uZSBmYXR0YSAke0FTU0lHTl9UT19TVVBQTElFUn0gJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSwgJHtsaW5rZWRJc3N1ZS5zdGF0dXN9XCIpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIkNvdWxkIG5vdCB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfVxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="831" name="Completed to be Closed">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">df15a75e93b4c124a70f49e69dbcae9d48e2e8e4</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IFJFU1QgQVBJOiBPUCBwZXIgY29uc3VudGl2YXppb25lIHRpY2tldA==</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5cbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5kZWYgYXV0b21hdGljYWxseUNsb3NlZCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUNsb3NlZCddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5ib29sZWFuIHVuYXRhbnR1bT10cnVlXG5cbi8qISFEYSByaW11b3ZlcmUgYXBwZW5hIHJpc29sdGkgaSBidWchISovXG4vL2lmKCFpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0LnBsYW5uZWRNYWludGVuYW5jZSddKSl7XG5cbiAgICAvKk9QLTEwMzg6IGxhIGNvbnRhYmlsaXp6YXppb25lIGRvdnJcdTAwZTAgcHJldmVkZXJlIGxlIHVuYXRhbnR1bSByYXRlcyBzb2xvIHNlIGlsIHRpY2tldCBub24gXHUwMGU4IHN0YXRvIGNoaXVzbyBpbiBhdXRvbWF0aWNvKi9cbiAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpIT1udWxsICYmIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIikpe1xuICAgICAgICB1bmF0YW50dW09ZmFsc2UgICAgXG4gICAgfVxuICAgIGxvZy5kZWJ1ZyBcIkNvbnN1bnRpdmF6aW9uZSB0aWNrZXQgXCIgKyBpc3N1ZS5rZXkgKyBcIiBjb24gdW5hdGFudHVtOiBcIiArIHVuYXRhbnR1bVxuXG4gICAgLyogUkVTVCBBUEkgcGVyIENvbnRhYmlsaXp6YXppb25lIEludGVydmVudG8gKi9cbiAgICByZXF1ZXN0TWV0aG9kID0gXCJHRVRcIjtcblxuICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9BQS90aWNrZXQvaXNzdWVLZXkvXCIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArIFwiL2Nsb3NlP3VtPVwiK3VuYXRhbnR1bS50b1N0cmluZygpXG4gICAgbG9nLmRlYnVnIFwiYmFzZVVybDogXCIgKyBiYXNlVVJMXG5cbiAgICAvKkRlZmluaXJlIHBhcmFtZXRybyBkaSBpbnB1dCB1bmF0YW50dW09dHJ1ZXxmYWxzZSBpbiBiYXNlIGFsIHZhbG9yZSBkZWxsYSB2YXJpYWJpbGUgYm9vbGVhbmEgdW5hdGFudHVtKi9cbiAgICBVUkwgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuXG4gICAgLy9Jc3N1ZUluZGV4aW5nU2VydmljZSBpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSlcbiAgICAvL2lzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgoaXNzdWVNYW5hZ2VyLmdldElzc3VlT2JqZWN0KGlzc3VlLmtleS50b1N0cmluZygpKSlcblxuICAgIC8vZGVmIHVuYVRhbnR1bVJhdGVzID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QQUFfVU5BVEFOVFVNX1JBVEVTXCIpWzBdXG4gICAgLy9sb2cud2FybiBcInVuYVRhbnR1bVJhdGVzOiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodW5hVGFudHVtUmF0ZXMpXG5cbiAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2U6IFwiICsgY29ubmVjdGlvblxuXG4gICAgICAgIC8qUk9MTEJBQ0sqL1xuICAgICAgICAvKlJpbW96aW9uZSBhbGxlZ2F0byByYXBwb3J0byBkaSBpbnRlcnZlbnRvIGFwcGVuYSBjcmVhdG8qL1xuICAgICAgICAvKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG4gICAgICAgIENsYXNzIGlxbEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLklRTEZhY2FkZVwiKTsgXG4gICAgICAgIGRlZiBpcWxGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUoaXFsRmFjYWRlQ2xhc3MpO1xuXG4gICAgICAgIC8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbiAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpO1xuICAgICAgICBkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcblxuICAgICAgICAvKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbiAgICAgICAgQ2xhc3Mgb2JqZWN0VHlwZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVGYWNhZGVcIik7XG4gICAgICAgIGRlZiBvYmplY3RUeXBlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVGYWNhZGVDbGFzcyk7XG5cbiAgICAgICAgLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbiAgICAgICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XG4gICAgICAgIGRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XG5cbiAgICAgICAgQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG4gICAgICAgIGRlZiBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzKTtcblxuICAgICAgICAvKiBTcGVjaWZ5IHRoZSBzY2hlbWEgaWQgYXMgd2VsbCBhcyB0aGUgSVFMIHRoYXQgd2lsbCBmZXRjaCBvYmplY3RzLiBJbiB0aGlzIGNhc2UgYWxsIG9iamVjdHMgd2l0aCBOYW1lIG1hdGNoaW5nIHRoZSB2YWx1ZUNGLCBiZSBzdXJlIHRvIGluY2x1ZGUgXCIgYXJvdW5kIHZhbHVlICovXG4gICAgICAgIGRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5cXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5uYW1lJ10udG9TdHJpbmcoKSArIFwiXFxcIiA9IFxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm9ianMucmFwcEludEZBQUMnXS50b1N0cmluZygpICsgXCJcXFwiIEFORCBcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpICsgXCIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSBcIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIpXCIpOyAvLyBTZWUgdGhlIGNvbXBsZXRlIGxpc3Qgb2YgcG9zc2libGUgSVFMIG9uIHRoZSBJbnNpZ2h0IFF1ZXJ5IExhbmd1YWdlIGRvY3VtZW50YXRpb24gcGFnZVxuICAgICAgICAvKiBJZiB0aGlzIGlzIGEgbWFuZGF0b3J5IGZpZWxkIHlvdSBzaG91bGQgYmUgYWJsZSB0byBkbyB0aGlzOiAqL1xuICAgICAgICBsb2cuaW5mbyhcIkluc2lnaHQgb2JqZWN0OiBcIiArIG9iamVjdHNbMF0pO1xuXG4gICAgICAgIGlmKG9iamVjdHNbMF0pe1xuICAgICAgICAgICAgLyogVVBEQVRFIE9KQkVDVCBERUxFVEVEIFZBTFVFICovXG4gICAgICAgICAgICBkZWYgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ob2JqZWN0c1swXS5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpICBcbiAgICAgICAgICAgIGRlZiB2YWx1ZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuXG4gICAgICAgICAgICBkZWYgdmFsdWVCZWFuID0gb2JUcmlhZ2UuY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKClcbiAgICAgICAgICAgIHZhbHVlQmVhbi5zZXRWYWx1ZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihvYlRyaWFnZS5nZXRPYmplY3RUeXBlQXR0cmlidXRlSWQoKSksIHRydWUpXG4gICAgICAgICAgICAvKkNsZWFuIGFjdHVhbCB2YWx1ZSovXG4gICAgICAgICAgICB2YWx1ZS5jbGVhcigpXG4gICAgICAgICAgICB2YWx1ZS5hZGQodmFsdWVCZWFuKTtcbiAgICAgICAgICAgIG9iVHJpYWdlLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWUpXG5cbiAgICAgICAgICAgIC8vVXBkYXRlIE9KQkVDVCBhdHRyaWJ1dGUgdmFsdWVcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHtcbiAgICAgICAgICAgICAgICBsb2cud2FybihcIkNvdWxkIG5vdCB1cGRhdGUgb2JqZWN0IGF0dHJpYnV0ZSBkdWUgdG8gdmFsaWRhdGlvbiBleGNlcHRpb246XCIgKyB2aWUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtVEtULUFDQ09VTlRJTkdcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgfWVsc2V7XG4gICAgICAgIC8qT1AtMTAzODogY29uc3VudGl2YXppb25lIHRlcm1pbmF0YSBjb3JyZXR0YW1lbnRlIC0gc2UgXHUwMGU4IHN0YXRhIGVzZWd1aXRhIGNvbiB1bmF0YW50dW09dHJ1ZSBzZXR0byBhIE5vIGlsIGNhbXBvIE9QQUFfQVVUT01BVElDQUxMWV9DTE9TRUQqL1xuICAgICAgICBpZih1bmF0YW50dW0pe1xuICAgICAgICAgICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXG4gICAgICAgICAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBpc3N1ZVxuXG4gICAgICAgICAgICBkZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcbiAgICAgICAgICAgIGRlZiBjZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09IFwiTm9cIiB9XG4gICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q2xvc2VkLnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuXG4gICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7XG4gICAgICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGlzc3VlKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIHByaW5jaXBhbGUgJHtpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpfVwiXG4gICAgICAgIH1cbiAgICB9XG4vL30iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlCmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2UKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXIKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsCgpQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpCkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpCnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7Cglwcm9wZXJ0aWVzLmxvYWQoaXQpCn0KQ2F0ZWdvcnkgbG9nID0gQ2F0ZWdvcnkuZ2V0SW5zdGFuY2UoImNvbS5vbnJlc29sdmUuamlyYS5ncm9vdnkuUG9zdEZ1bmN0aW9uIikKbG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpCgpJc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7CkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTsKCklzc3VlSW5kZXhpbmdTZXJ2aWNlIAlpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSkKZGVmIGF1dG9tYXRpY2FsbHlDbG9zZWQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlDbG9zZWQnXS50b1N0cmluZygpKVswXQoKZGVmIHJlcXVlc3RNZXRob2QKZGVmIGJhc2VVUkwKCmludCBPUEFBID0gcHJvcGVydGllc1snaXNjaGVtYS5hYS5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKCkKaW50IERCTyA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuZGJvLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKQpib29sZWFuIHVuYXRhbnR1bT10cnVlCgovKk9QLTEwMzg6IGxhIGNvbnRhYmlsaXp6YXppb25lIGRvdnLDoCBwcmV2ZWRlcmUgbGUgdW5hdGFudHVtIHJhdGVzIHNvbG8gc2UgaWwgdGlja2V0IG5vbiDDqCBzdGF0byBjaGl1c28gaW4gYXV0b21hdGljbyovCmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkhPW51bGwgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKS50b1N0cmluZygpLmVxdWFscygiWWVzIikpewoJdW5hdGFudHVtPWZhbHNlICAgIAp9CmxvZy5kZWJ1ZyAiQ29uc3VudGl2YXppb25lIHRpY2tldCAiICsgaXNzdWUua2V5ICsgIiBjb24gdW5hdGFudHVtOiAiICsgdW5hdGFudHVtCgovKiBSRVNUIEFQSSBwZXIgQ29udGFiaWxpenphemlvbmUgSW50ZXJ2ZW50byAqLwpyZXF1ZXN0TWV0aG9kID0gIkdFVCI7CgpiYXNlVVJMID0gImh0dHA6Ly8iICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyAiL29wL3Jlc3QvQUEvdGlja2V0L2lzc3VlS2V5LyIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArICIvY2xvc2U/dW09Iit1bmF0YW50dW0udG9TdHJpbmcoKQpsb2cuZGVidWcgImJhc2VVcmw6ICIgKyBiYXNlVVJMCgovKkRlZmluaXJlIHBhcmFtZXRybyBkaSBpbnB1dCB1bmF0YW50dW09dHJ1ZXxmYWxzZSBpbiBiYXNlIGFsIHZhbG9yZSBkZWxsYSB2YXJpYWJpbGUgYm9vbGVhbmEgdW5hdGFudHVtKi8KVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTCkKSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpOwpjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eSgiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL2pzb24iKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoIkFjY2VwdCIsICIqLyoiKTsKY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTsKY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpOwpjb25uZWN0aW9uLmNvbm5lY3QoKTsKbG9nLmRlYnVnICJSZXNwb25zZUNvZGU6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkKbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKCi8vSXNzdWVJbmRleGluZ1NlcnZpY2UgaXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpCi8vaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVPYmplY3QoaXNzdWUua2V5LnRvU3RyaW5nKCkpKQoKLy9kZWYgdW5hVGFudHVtUmF0ZXMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKCJPUEFBX1VOQVRBTlRVTV9SQVRFUyIpWzBdCi8vbG9nLndhcm4gInVuYVRhbnR1bVJhdGVzOiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcykKCmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCmRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKQpkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpCgppZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoIjIwMCIpKXsKICAgIGxvZy5kZWJ1ZyAidXJsOiAiICsgdXJsCiAgICBsb2cuZGVidWcgIlJlc3BvbnNlQ29kZToiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKQogICAgbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKICAgIGxvZy5kZWJ1ZyAiUmVzcG9uc2U6ICIgKyBjb25uZWN0aW9uCgogICAgLypST0xMQkFDSyovCiAgICAvKlJpbW96aW9uZSBhbGxlZ2F0byByYXBwb3J0byBkaSBpbnRlcnZlbnRvIGFwcGVuYSBjcmVhdG8qLwogICAgLyogR2V0IEluc2lnaHQgSVFMIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqLwogICAgQ2xhc3MgaXFsRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGUiKTsgCiAgICBkZWYgaXFsRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKGlxbEZhY2FkZUNsYXNzKTsKCiAgICAvKiBHZXQgSW5zaWdodCBPYmplY3QgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovCiAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZSIpOwogICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7CgogICAgLyogR2V0IEluc2lnaHQgT2JqZWN0IFR5cGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovCiAgICBDbGFzcyBvYmplY3RUeXBlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlIik7CiAgICBkZWYgb2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpOwoKICAgIC8qIEdldCBJbnNpZ2h0IE9iamVjdCBBdHRyaWJ1dGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovCiAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CiAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpOwoKICAgIENsYXNzIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkiKTsKICAgIGRlZiBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzKTsKCiAgICAvKiBTcGVjaWZ5IHRoZSBzY2hlbWEgaWQgYXMgd2VsbCBhcyB0aGUgSVFMIHRoYXQgd2lsbCBmZXRjaCBvYmplY3RzLiBJbiB0aGlzIGNhc2UgYWxsIG9iamVjdHMgd2l0aCBOYW1lIG1hdGNoaW5nIHRoZSB2YWx1ZUNGLCBiZSBzdXJlIHRvIGluY2x1ZGUgIiBhcm91bmQgdmFsdWUgKi8KICAgIGRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCAiXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuY2F0ZWdvcnlSZWYnXS50b1N0cmluZygpICsgIlwiLlwiIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm5hbWUnXS50b1N0cmluZygpICsgIlwiID0gXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkub2Jqcy5yYXBwSW50RkFBQyddLnRvU3RyaW5nKCkgKyAiXCIgQU5EICIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSArICIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSAiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyAiKSIpOyAvLyBTZWUgdGhlIGNvbXBsZXRlIGxpc3Qgb2YgcG9zc2libGUgSVFMIG9uIHRoZSBJbnNpZ2h0IFF1ZXJ5IExhbmd1YWdlIGRvY3VtZW50YXRpb24gcGFnZQogICAgLyogSWYgdGhpcyBpcyBhIG1hbmRhdG9yeSBmaWVsZCB5b3Ugc2hvdWxkIGJlIGFibGUgdG8gZG8gdGhpczogKi8KICAgIGxvZy5pbmZvKCJJbnNpZ2h0IG9iamVjdDogIiArIG9iamVjdHNbMF0pOwoKICAgIGlmKG9iamVjdHNbMF0pewogICAgICAgIC8qIFVQREFURSBPSkJFQ1QgREVMRVRFRCBWQUxVRSAqLwogICAgICAgIGRlZiBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihvYmplY3RzWzBdLmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkgIAogICAgICAgIGRlZiB2YWx1ZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQoKICAgICAgICBkZWYgdmFsdWVCZWFuID0gb2JUcmlhZ2UuY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCkKICAgICAgICB2YWx1ZUJlYW4uc2V0VmFsdWUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2UuZ2V0T2JqZWN0VHlwZUF0dHJpYnV0ZUlkKCkpLCB0cnVlKQogICAgICAgIC8qQ2xlYW4gYWN0dWFsIHZhbHVlKi8KICAgICAgICB2YWx1ZS5jbGVhcigpCiAgICAgICAgdmFsdWUuYWRkKHZhbHVlQmVhbik7CiAgICAgICAgb2JUcmlhZ2Uuc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyh2YWx1ZSkKCiAgICAgICAgLy9VcGRhdGUgT0pCRUNUIGF0dHJpYnV0ZSB2YWx1ZQogICAgICAgIHRyeSB7CiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLnN0b3JlT2JqZWN0QXR0cmlidXRlQmVhbihvYlRyaWFnZSk7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSkgewogICAgICAgICAgICBsb2cud2FybigiQ291bGQgbm90IHVwZGF0ZSBvYmplY3QgYXR0cmlidXRlIGR1ZSB0byB2YWxpZGF0aW9uIGV4Y2VwdGlvbjoiICsgdmllLmdldE1lc3NhZ2UoKSk7CiAgICAgICAgfQogICAgfQoKICAgIGVMaXN0RXJyb3JzLmFkZCgiRSIpCiAgICBlTGlzdEVycm9ycy5hZGQoIk9QLVRLVC1BQ0NPVU5USU5HIikKICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArICIgIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkpCiAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKQogICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKQoKICAgIG91dHB1dC5hZGQoZUxpc3QpCiAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IkUiOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQogICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJFIiwgb3V0cHV0LnRvU3RyaW5nKCkpCn1lbHNlewogICAgLypPUC0xMDM4OiBjb25zdW50aXZhemlvbmUgdGVybWluYXRhIGNvcnJldHRhbWVudGUgLSBzZSDDqCBzdGF0YSBlc2VndWl0YSBjb24gdW5hdGFudHVtPXRydWUgc2V0dG8gYSBObyBpbCBjYW1wbyBPUEFBX0FVVE9NQVRJQ0FMTFlfQ0xPU0VEKi8KICAgIGlmKHVuYXRhbnR1bSl7CiAgICAgICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpCiAgICAgICAgZGVmIG1pID0gKE11dGFibGVJc3N1ZSkgaXNzdWUKCiAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSkKICAgICAgICBsb2cuZGVidWcgImZpZWxkQ29uZmlnOiAiICsgZmllbGRDb25maWcKICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiTm8iIH0KICAgICAgICBhdXRvbWF0aWNhbGx5Q2xvc2VkLnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoKICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7CiAgICAgICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChpc3N1ZSkKICAgICAgICBsb2cuZGVidWcgIlVwZGF0ZWQgY3VzdG9tZmllbGQgLSBpc3N1ZSBwcmluY2lwYWxlICR7aXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKX0iCiAgICB9Cn0K</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">b734e2c5-1436-43e7-ba9d-53f2ba06c457</arg>
              <arg name="FIELD_NOTES">YCFgQ3JlYXRlIFNOICYgU08=</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuXG5kZWYgU04gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfU0FQX1NFUlZJQ0VfTk9USUZJQ0FUSU9OXCIpWzBdXG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcblxuVVJMIHVybFxuSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvblxuXG5pZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKFNOKSA9PSBudWxsICYmIGlzc3VlLmlzc3VlVHlwZS5uYW1lICE9IFwiUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXRcIil7XG4gICAgcmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuXG4gICAgZGVmIGJvZHlfcmVxID0gW11cbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXG4gICAgICAgIFwic3RhdHVzXCI6IFwiSU5QXCJcbiAgICBdIFxuXG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL3NlcnZpY2Uvbm90aWZpY2F0aW9uXCJcblxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxuICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNOOiBcIiArIGJvZHlfcmVxXG4gICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxuICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgIFxuICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG4gICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcblxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TTi1VUERBVEVcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICB9ZWxzZXtcbiAgICAgICAgLyoqIFNFUlZJQ0UgT1JERVIgQ1JFQVRJT04gKiovXG4gICAgICAgIGJvZHlfcmVxID0gW1xuICAgICAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXlcbiAgICAgICAgXSBcbiAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL29yL3VwZGF0ZS9zZXJ2aWNlL29yZGVyXCJcblxuICAgICAgICBsb2cuZGVidWcgXCJiYXNlVVJMIFNPOiBcIiArIGJhc2VVUkxcbiAgICAgICAgbG9nLmRlYnVnIFwiYm9keV9yZXEgU086IFwiICsgYm9keV9yZXFcbiAgICAgICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgICAgICBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG4gICAgICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgICAgICBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAxXCIpICYmICFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxuICAgIFx0XHRsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICAgICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICBcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtU0FQLVNPLUNSRUFURVwiKVxuICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgIH1cbiAgICB9XG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="Not Done" status="Done" step="18">
              <post-functions>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdateissuestatus-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowcreatecomment-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowgeneratechangehistory-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowreindexissue-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="2" name="Assigned To Supplier">
      <meta name="jira.status.id">14327</meta>
      <actions>
<common-action id="81" />
<common-action id="121" />
        <action id="71" name="Accetta Intervento" view="fieldscreen">
          <meta name="opsbar-sequence">10</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">19905</meta>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">9ea9661d5b7954626bd1f3b6b542df62f7afc3dd</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIGVycm9ycyAmIHdhcm5pbmdz</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5cblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQgICBcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFxuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5kZWYgQ2F0ZWdvcnkgbG9nID0gQ2F0ZWdvcnkuZ2V0SW5zdGFuY2UoXCJjb20ub25yZXNvbHZlLmppcmEuZ3Jvb3Z5LlBvc3RGdW5jdGlvblwiKVxuIFxuSXNzdWUgaXNzdWUgPSBpc3N1ZVxuXG5kZWYgZXJyb3JzID0gZmFsc2VcbmRlZiB3YXJuaW5ncyA9IGZhbHNlXG5cbmRlZiBzdXBwbGllckxhYmVsID0gcHJvcGVydGllc1snY2Yuc3VwcGxpZXInXSA/IHByb3BlcnRpZXNbJ2NmLnN1cHBsaWVyJ10udG9TdHJpbmcoKSA6IFwiT1BfU1VQUExJRVJcIlxuZGVmIHN1cHBsaWVyMSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShzdXBwbGllckxhYmVsKVswXVxuZGVmIHN1cHBsaWVyMiA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShzdXBwbGllckxhYmVsKVsxXVxuXG5kZWYgZXJyb3JNYW5kYXRvcnlGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiB3YXJuaW5nRW1wdHlGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KClcbiBcbi8vT1BfU1VQUExJRVJfUkVQQUlSIHZzIE9QX1NVUFBMSUVSX05FV0lOU1RcbmxvZy5kZWJ1ZyBcInN1cHBsaWVyTGFiZWw6IFwiICsgc3VwcGxpZXJMYWJlbFxubG9nLmRlYnVnIFwic3VwcGxpZXIxOiBcIiArIHN1cHBsaWVyMVxubG9nLmRlYnVnIFwic3VwcGxpZXIyOiBcIiArIHN1cHBsaWVyMlxuZGVmIHN1cHBsaWVyMWVtcHR5ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzdXBwbGllcjEpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzdXBwbGllcjEpID09IFwiXCIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzdXBwbGllcjEpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpXG5kZWYgc3VwcGxpZXIyZW1wdHkgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHN1cHBsaWVyMik9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHN1cHBsaWVyMikgPT0gXCJcIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHN1cHBsaWVyMikudG9TdHJpbmcoKS5lcXVhbHMoXCJcIilcbmxvZy5kZWJ1ZyBcInN1cHBsaWVyMWVtcHR5OiBcIiArIHN1cHBsaWVyMWVtcHR5XG5sb2cuZGVidWcgXCJzdXBwbGllcjJlbXB0eTogXCIgKyBzdXBwbGllcjJlbXB0eVxuaWYoKHN1cHBsaWVyMWVtcHR5KSAmJiAoc3VwcGxpZXIyZW1wdHkpKXtcblx0bG9nLmRlYnVnIFwic3VwcGxpZXIxZW1wdHkgJiYgc3VwcGxpZXIyZW1wdHlcIlxuICAgIGVycm9ycyA9IHRydWVcblx0ZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHN1cHBsaWVyTGFiZWwpXG4gICAgbG9nLmRlYnVnIFwiZXJyb3JNYW5kYXRvcnlGaWVsZHM6IFwiICsgZXJyb3JNYW5kYXRvcnlGaWVsZHNcbn1cblxuZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuXG5pZiAoIWVycm9ycyAmJiAhd2FybmluZ3Mpe1xuICAgIHJldHVybiB0cnVlXG59ZWxzZXtcbiAgICBpZighZXJyb3JzICYmIHdhcm5pbmdzKXtcbiAgICAgICAgZGVmIHdMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIFxuICAgICAgICBpZih3YXJuaW5nRW1wdHlGaWVsZHMuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHkgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChcIldcIilcbiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChcIkNPTkZJUk1fRU1QVFlfRklFTERTXCIpXG4gICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQobnVsbClcbiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZCh3YXJuaW5nRW1wdHlGaWVsZHMpXG5cbiAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eSlcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgb3V0cHV0LmFkZCh3TGlzdClcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiV1wiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIldcIiwgb3V0cHV0LnRvU3RyaW5nKCkpICAgXG4gICAgfVxuICAgIGlmKGVycm9ycyAmJiAhd2FybmluZ3Mpe1xuICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgXG4gICAgICAgIGlmKGVycm9yTWFuZGF0b3J5RmllbGRzLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgZGVmIGVMaXN0TWFuZGF0b3J5ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoXCJFXCIpXG4gICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoXCJNQU5EQVRPUllfRklFTERTXCIpXG4gICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQobnVsbClcbiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChlcnJvck1hbmRhdG9yeUZpZWxkcylcbiAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdE1hbmRhdG9yeSlcbiAgICAgICAgfVxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKFwiRVwiLCBvdXRwdXQudG9TdHJpbmcoKSkgICBcbiAgICB9XG4gICAgaWYoZXJyb3JzICYmIHdhcm5pbmdzKXtcbiAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICBcbiAgICAgICAgaWYoZXJyb3JNYW5kYXRvcnlGaWVsZHMuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICBkZWYgZUxpc3RNYW5kYXRvcnkgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChcIkVcIilcbiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChcIk1BTkRBVE9SWV9GSUVMRFNcIilcbiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChudWxsKVxuICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKGVycm9yTWFuZGF0b3J5RmllbGRzKVxuICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0TWFuZGF0b3J5KVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZih3YXJuaW5nRW1wdHlGaWVsZHMuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHkgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChcIldcIilcbiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChcIkNPTkZJUk1fRU1QVFlfRklFTERTXCIpXG4gICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQobnVsbClcbiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZCh3YXJuaW5nRW1wdHlGaWVsZHMpXG5cbiAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eSlcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgb3V0cHV0LmFkZCh3TGlzdClcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiV0VcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJXRVwiLCBvdXRwdXQudG9TdHJpbmcoKSkgIFxuICAgIH1cbn0iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZQppbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb24KaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3IKaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CmRlZiBDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQogCklzc3VlIGlzc3VlID0gaXNzdWUKCmRlZiBlcnJvcnMgPSBmYWxzZQpkZWYgd2FybmluZ3MgPSBmYWxzZQoKZGVmIHN1cHBsaWVyTGFiZWwgPSBwcm9wZXJ0aWVzWydjZi5zdXBwbGllciddID8gcHJvcGVydGllc1snY2Yuc3VwcGxpZXInXS50b1N0cmluZygpIDogIk9QX1NVUFBMSUVSIgpkZWYgc3VwcGxpZXIgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHN1cHBsaWVyTGFiZWwpWzBdCgpkZWYgZXJyb3JNYW5kYXRvcnlGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIHdhcm5pbmdFbXB0eUZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKQogCi8vT1BfU1VQUExJRVJfUkVQQUlSIHZzIE9QX1NVUFBMSUVSX05FV0lOU1QKbG9nLmRlYnVnICJzdXBwbGllckxhYmVsOiAiICsgc3VwcGxpZXJMYWJlbAppZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHN1cHBsaWVyKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc3VwcGxpZXIpID09ICIiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc3VwcGxpZXIpLnRvU3RyaW5nKCkuZXF1YWxzKCIiKSl7CgllcnJvcnMgPSB0cnVlCgllcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQoc3VwcGxpZXJMYWJlbCkKICAgIGxvZy5kZWJ1ZyAiZXJyb3JNYW5kYXRvcnlGaWVsZHM6ICIgKyBlcnJvck1hbmRhdG9yeUZpZWxkcwp9CgoKZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKQoKaWYgKCFlcnJvcnMgJiYgIXdhcm5pbmdzKXsKICAgIHJldHVybiB0cnVlCn1lbHNlewogICAgaWYoIWVycm9ycyAmJiB3YXJuaW5ncyl7CiAgICAgICAgZGVmIHdMaXN0ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgCiAgICAgICAgaWYod2FybmluZ0VtcHR5RmllbGRzLnNpemUoKSA+IDApewogICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHkgPSBuZXcgQXJyYXlMaXN0KCkKICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKCJXIikKICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKCJDT05GSVJNX0VNUFRZX0ZJRUxEUyIpCiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChudWxsKQogICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQod2FybmluZ0VtcHR5RmllbGRzKQoKICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5KQogICAgICAgIH0KICAgICAgICAKICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KQogICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3siVyI6IicgKyBvdXRwdXQudG9TdHJpbmcoKSArICcifScpCiAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJXIiwgb3V0cHV0LnRvU3RyaW5nKCkpICAgCiAgICB9CiAgICBpZihlcnJvcnMgJiYgIXdhcm5pbmdzKXsKICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KCkKICAgICAgICAKICAgICAgICBpZihlcnJvck1hbmRhdG9yeUZpZWxkcy5zaXplKCkgPiAwKXsKICAgICAgICAgICAgZGVmIGVMaXN0TWFuZGF0b3J5ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZCgiRSIpCiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZCgiTUFOREFUT1JZX0ZJRUxEUyIpCiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChudWxsKQogICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoZXJyb3JNYW5kYXRvcnlGaWVsZHMpCiAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdE1hbmRhdG9yeSkKICAgICAgICB9CiAgICAgICAgb3V0cHV0LmFkZChlTGlzdCkKICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IkUiOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQogICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiRSIsIG91dHB1dC50b1N0cmluZygpKSAgIAogICAgfQogICAgaWYoZXJyb3JzICYmIHdhcm5pbmdzKXsKICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KCkKICAgICAgICBkZWYgd0xpc3QgPSBuZXcgQXJyYXlMaXN0KCkKICAgICAgICAKICAgICAgICBpZihlcnJvck1hbmRhdG9yeUZpZWxkcy5zaXplKCkgPiAwKXsKICAgICAgICAgICAgZGVmIGVMaXN0TWFuZGF0b3J5ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZCgiRSIpCiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZCgiTUFOREFUT1JZX0ZJRUxEUyIpCiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChudWxsKQogICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoZXJyb3JNYW5kYXRvcnlGaWVsZHMpCiAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdE1hbmRhdG9yeSkKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaWYod2FybmluZ0VtcHR5RmllbGRzLnNpemUoKSA+IDApewogICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHkgPSBuZXcgQXJyYXlMaXN0KCkKICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKCJXIikKICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKCJDT05GSVJNX0VNUFRZX0ZJRUxEUyIpCiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChudWxsKQogICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQod2FybmluZ0VtcHR5RmllbGRzKQoKICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5KQogICAgICAgIH0KICAgICAgICAKICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KQogICAgICAgIG91dHB1dC5hZGQod0xpc3QpCiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigneyJXRSI6IicgKyBvdXRwdXQudG9TdHJpbmcoKSArICcifScpCiAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJXRSIsIG91dHB1dC50b1N0cmluZygpKSAgCiAgICB9Cn0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">ebf32ca3-2ea4-4039-9460-4705d533e401</arg>
              <arg name="FIELD_NOTES">YCFgQ3JlYXRlIFNOIGZvciBvbGQgdGlja2V0cw==</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuXG5kZWYgU04gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfU0FQX1NFUlZJQ0VfTk9USUZJQ0FUSU9OXCIpWzBdXG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcblxuVVJMIHVybFxuSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvblxuXG5pZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKFNOKSA9PSBudWxsICYmIGlzc3VlLmlzc3VlVHlwZS5uYW1lICE9IFwiUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXRcIil7XG4gICAgcmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuXG4gICAgZGVmIGJvZHlfcmVxID0gW11cbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXG4gICAgICAgIFwic3RhdHVzXCI6IFwiT1BFXCJcbiAgICBdIFxuXG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL3NlcnZpY2Uvbm90aWZpY2F0aW9uXCJcblxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxuICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNOOiBcIiArIGJvZHlfcmVxXG4gICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxuICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgIFxuICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG4gICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcblxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TTi1VUERBVEVcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICB9XG59Iiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="3">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">5c617aad-7d1a-4805-8e97-6b2c635a187e</arg>
                  <arg name="FIELD_NOTES">YCFgT1A6IE5ldyBJbnN0YWxsYXRpb24gLSBDaGVjayBsaW5rZWRUaWNrZXRzICYgRmFzdC1UcmFuc2FjdCB0aGVt</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5sb2cud2FybiBcIiR7aXNzdWUua2V5fSBUcmFuc2F6aW9uZSBBQ0NFUFRFRCBCWSBTVVBQTElFUiAtIFBvc3QgRnVuY3Rpb24gY2hlY2sgbGlua2VkSXNzdWVzXCJcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuZGVmIGF1dG9tYXRpY2FsbHlDb25maXJtZWQgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUFjY2VwdGVkJ10gPyBwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5QWNjZXB0ZWQnXS50b1N0cmluZygpIDogXCJPUF9BVVRPTUFUSUNBTExZX0FDQ0VQVEVEXCIpWzBdXG5kZWYgcGxhbm5lZERhdGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9QTEFOTkVEX0RBVEVcIilbMF1cbmRlZiBwbGFubmVkSG91ciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1BMQU5ORURfSE9VUlwiKVswXVxuSXNzdWVJbmRleGluZ1NlcnZpY2UgXHRpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSlcblxuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL2lzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0yNzZcIilcblxuLypERVYqL1xuQUNDRVBUID0gcHJvcGVydGllc1snd2YudHIuYWNjZXB0J10gPyBwcm9wZXJ0aWVzWyd3Zi50ci5hY2NlcHQnXSA6IDcxXG5cbi8qUFJPRCovXG4vL0NPTkZJUk1fVE9fQ1VTVE9NRVJcblxuZGVmIHVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcbmRlZiBpc3N1ZVNlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZVNlcnZpY2UoKVxuZGVmIHJlcXVlc3RNZXRob2RcbmRlZiBiYXNlVVJMXG5cbi8qU2UgZXNlZ3VvIGxhIGNvbmZpcm0gdG8gY3VzdG9tZXIgc3UgdW4gdGlja2V0IGNvbiAxIG8gKyB0aWNrZXQgY29sbGVnYXRpLCB2ZXJpZmljbyBlIHNwb3N0byBpbiBhdXRvbWF0aWNvIGdsaSBldmVudHVhbGkgdGlja2V0IGNvbGxlZ2F0aSovXG5sb2cud2FybiBcInZlcmlmaWNvIGUgc3Bvc3RvIGluIGF1dG9tYXRpY28gZ2xpIGV2ZW50dWFsaSB0aWNrZXQgY29sbGVnYXRpXCJcblxuaWYoKGlzc3VlLmdldElzc3VlVHlwZSgpLmdldE5hbWUoKSA9PSBwcm9wZXJ0aWVzWydpdC5uZXdJbnN0YWxsYXRpb24nXS50b1N0cmluZygpIHx8IGlzc3VlLmdldElzc3VlVHlwZSgpLmdldE5hbWUoKSA9PSBcIk1haW50ZW5hbmNlIFRpY2tldFwiKSAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpPT1udWxsIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCkudG9TdHJpbmcoKS5lcXVhbHMoXCJOb1wiKSl7XG4gICAgTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG4gICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgIGxvZy53YXJuIFwiSXNzdWUgY29uIHJlbGF0ZXNJbklzc3VlTGlua1wiXG4gICAgICAgICAgICAvKkVzZWd1aXJlIHRyYW5zYXppb25lIGRpIHN0YXRvIGRlbGxhIHNvdXJjZUlzc3VlKi9cbiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZSA9IGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKVxuICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlU3RhdHVzID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzKClcbiAgICAgICAgICAgIGRlZiB0cmFuc2l0aW9uSWRcbiAgICAgICAgICAgIGlmKGxpbmtlZElzc3VlU3RhdHVzLm5hbWUgPT0gKHByb3BlcnRpZXNbJ3dmLmFzc2lnbmVkVG9TdXBwbGllciddID8gcHJvcGVydGllc1snd2YuYXNzaWduZWRUb1N1cHBsaWVyJ10udG9TdHJpbmcoKSA6IFwiQXNzaWduZWQgVG8gU3VwcGxpZXJcIikpe1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb25JZD1BQ0NFUFRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHRyYW5zaXRpb25JZD09QUNDRVBUKXtcbiAgICAgICAgICAgICAgICAvLyBQcmVwYXJlIG91ciBpbnB1dCBmb3IgdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKVxuICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGgge1xuICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2sodHJ1ZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy9kZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKVxuICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09IFwiWWVzXCIgfVxuICAgICAgICAgICAgICAgIC8vaXNzdWVJbnB1dFBhcmFtZXRlcnMuYWRkQ3VzdG9tRmllbGRWYWx1ZShmaWVsZENvbmZpZy5nZXRJZCgpLCBcIlllc1wiKSBcbiAgICAgICAgICAgICAgICAvL2xvZy53YXJuIFwiaXNzdWVJbnB1dFBhcmFtZXRlcnM6IFwiICsgaXNzdWVJbnB1dFBhcmFtZXRlcnNcbiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcbiAgICAgICAgICAgICAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBsaW5rZWRJc3N1ZVxuXG4gICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNvbmZpcm1lZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSlcbiAgICAgICAgICAgICAgICBsb2cud2FybiBcImZpZWxkQ29uZmlnOiBcIiArIGZpZWxkQ29uZmlnXG4gICAgICAgICAgICAgICAgZGVmIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gXCJZZXNcIiB9XG4gICAgICAgICAgICAgICAgYXV0b21hdGljYWxseUNvbmZpcm1lZC51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbGFubmVkRGF0ZSlcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbGFubmVkSG91cilcbiAgICAgICAgICAgICAgICBwbGFubmVkRGF0ZS51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbGFubmVkRGF0ZSksIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocGxhbm5lZERhdGUpKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuICAgICAgICAgICAgICAgIHBsYW5uZWRIb3VyLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBsYW5uZWRIb3VyKSwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbGFubmVkSG91cikpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG5cbiAgICAgICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChsaW5rZWRJc3N1ZSlcbiAgICAgICAgICAgICAgICBsb2cud2FybiBcIlVwZGF0ZWQgY3VzdG9tZmllbGQgLSBpc3N1ZSBsaW5rYXRhXCJcbiAgICAgICAgICAgICAgICBsb2cud2FybiBcImxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocGxhbm5lZERhdGUpOiBcIiArIGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocGxhbm5lZERhdGUpXG4gICAgICAgICAgICAgICAgbG9nLndhcm4gXCJsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBsYW5uZWRIb3VyKTogXCIgKyBsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBsYW5uZWRIb3VyKVxuXG4gICAgICAgICAgICAgICAgLy9kZWYgdmFsaWRhdGlvblJlc3VsdCA9IGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpXG4gICAgICAgICAgICAgICAgaWYgKGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZC50b0ludGVnZXIoKSwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSB0cmFuc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZC50b0ludGVnZXIoKSwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpKVxuICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259XCIpXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJUcmFuc2F6aW9uZSBmYXR0YSA3OSAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c31cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFJFU1QgQVBJIHBlciBwdWxpemlhIGNhY2hlIGlzc3VlIGxpbmthdGEgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RNZXRob2QgPSBcIkdFVFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgLypTY3JpcHQgVmFyaWFibGVzKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vUGVyIHRlc3QgZGEgY29uc29sZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy0zMjUzNVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vY2xlYXJDYWNoZS90aWNrZXRrZXkvXCIgKyBsaW5rZWRJc3N1ZS5rZXlcbiAgICAgICAgICAgICAgICAgICAgICAgIFVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgICAgICAgICAgICAgICAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIkNvdWxkIG5vdCB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG4gICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsT3V0SXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHtcbiAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcblxuICAgICAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICBsb2cud2FybiBcIklzc3VlIGNvbiByZWxhdGVzT3V0SXNzdWVMaW5rXCJcbiAgICAgICAgICAgIC8qRXNlZ3VpcmUgdHJhbnNhemlvbmUgZGkgc3RhdG8gZGVsbGEgZGVzdGluYXRpb25Jc3N1ZSovXG4gICAgICAgICAgICBkZWYgbGlua2VkSXNzdWUgPSBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKVxuICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlU3RhdHVzID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzKClcbiAgICAgICAgICAgIGRlZiB0cmFuc2l0aW9uSWRcbiAgICAgICAgICAgIGxvZy53YXJuIFwibGlua2VkSXNzdWU6IFwiICsgbGlua2VkSXNzdWVcbiAgICAgICAgICAgIGxvZy53YXJuIFwibGlua2VkSXNzdWVTdGF0dXMubmFtZTogXCIgKyBsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lXG4gICAgICAgICAgICBpZihsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lID09IChwcm9wZXJ0aWVzWyd3Zi5hc3NpZ25lZFRvU3VwcGxpZXInXSA/IHByb3BlcnRpZXNbJ3dmLmFzc2lnbmVkVG9TdXBwbGllciddLnRvU3RyaW5nKCkgOiBcIkFzc2lnbmVkIFRvIFN1cHBsaWVyXCIpKXtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9QUNDRVBUXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKHRyYW5zaXRpb25JZD09QUNDRVBUKXtcbiAgICAgICAgICAgICAgICAvLyBQcmVwYXJlIG91ciBpbnB1dCBmb3IgdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKVxuICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGgge1xuICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2sodHJ1ZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy9kZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKVxuICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09IFwiWWVzXCIgfVxuICAgICAgICAgICAgICAgIC8vaXNzdWVJbnB1dFBhcmFtZXRlcnMuYWRkQ3VzdG9tRmllbGRWYWx1ZShmaWVsZENvbmZpZy5nZXRJZCgpLCBcIlllc1wiKSBcblxuICAgICAgICAgICAgICAgIGRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlXG5cbiAgICAgICAgICAgICAgICBkZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLmdldFJlbGV2YW50Q29uZmlnKGxpbmtlZElzc3VlKVxuICAgICAgICAgICAgICAgIGxvZy53YXJuIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcbiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuXHRcdFx0XHRwbGFubmVkRGF0ZS51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbGFubmVkRGF0ZSksIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocGxhbm5lZERhdGUpKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuICAgICAgICAgICAgICAgIHBsYW5uZWRIb3VyLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBsYW5uZWRIb3VyKSwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbGFubmVkSG91cikpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpXG4gICAgICAgICAgICAgICAgbG9nLndhcm4gXCJVcGRhdGVkIGN1c3RvbWZpZWxkIC0gaXNzdWUgbGlua2F0YVwiXG4gICAgICAgICAgICAgICAgbG9nLndhcm4gXCJsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBsYW5uZWREYXRlKTogXCIgKyBsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBsYW5uZWREYXRlKVxuICAgICAgICAgICAgICAgIGxvZy53YXJuIFwibGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbGFubmVkSG91cik6IFwiICsgbGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbGFubmVkSG91cilcblxuICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQudG9JbnRlZ2VyKCksIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgdHJhbnNpdGlvblxuICAgICAgICAgICAgICAgICAgICBkZWYgaXNzdWVSZXN1bHQgPSBpc3N1ZVNlcnZpY2UudHJhbnNpdGlvbih1c2VyLCBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQudG9JbnRlZ2VyKCksIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEgaXNzdWVSZXN1bHQuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIkZhaWxlZCB0byB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiVHJhbnNhemlvbmUgZmF0dGEgMTIyICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn0sICR7bGlua2VkSXNzdWUuc3RhdHVzfVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLyogUkVTVCBBUEkgcGVyIHB1bGl6aWEgY2FjaGUgaXNzdWUgbGlua2F0YSAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdE1ldGhvZCA9IFwiR0VUXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKlNjcmlwdCBWYXJpYWJsZXMqL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTMyNTM1XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvYXV0b21hdGlvbi9jbGVhckNhY2hlL3RpY2tldGtleS9cIiArIGxpbmtlZElzc3VlLmtleVxuICAgICAgICAgICAgICAgICAgICAgICAgVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICAgICAgICAgICAgICAgICAgICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259XCIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICB9XG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlCmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZQppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQpDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5XQVJOKQoKbG9nLndhcm4gIiR7aXNzdWUua2V5fSBUcmFuc2F6aW9uZSBBQ0NFUFRFRCBCWSBTVVBQTElFUiAtIFBvc3QgRnVuY3Rpb24gY2hlY2sgbGlua2VkSXNzdWVzIgoKSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpOwpDdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7CmRlZiBhdXRvbWF0aWNhbGx5Q29uZmlybWVkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5QWNjZXB0ZWQnXSA/IHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlBY2NlcHRlZCddLnRvU3RyaW5nKCkgOiAiT1BfQVVUT01BVElDQUxMWV9BQ0NFUFRFRCIpWzBdCklzc3VlSW5kZXhpbmdTZXJ2aWNlIAlpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSkKCklzc3VlIGlzc3VlID0gaXNzdWUKLy9QZXIgdGVzdCBkYSBjb25zb2xlCi8vaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoIk9QVVQtMjc2IikKCi8qREVWKi8KQUNDRVBUID0gcHJvcGVydGllc1snd2YudHIuYWNjZXB0J10gPyBwcm9wZXJ0aWVzWyd3Zi50ci5hY2NlcHQnXSA6IDcxCgovKlBST0QqLwovL0NPTkZJUk1fVE9fQ1VTVE9NRVIKCmRlZiB1c2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpCmRlZiBpc3N1ZVNlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZVNlcnZpY2UoKQoKLypTZSBlc2VndW8gbGEgY29uZmlybSB0byBjdXN0b21lciBzdSB1biB0aWNrZXQgY29uIDEgbyArIHRpY2tldCBjb2xsZWdhdGksIHZlcmlmaWNvIGUgc3Bvc3RvIGluIGF1dG9tYXRpY28gZ2xpIGV2ZW50dWFsaSB0aWNrZXQgY29sbGVnYXRpKi8KbG9nLndhcm4gInZlcmlmaWNvIGUgc3Bvc3RvIGluIGF1dG9tYXRpY28gZ2xpIGV2ZW50dWFsaSB0aWNrZXQgY29sbGVnYXRpIgoKaWYoaXNzdWUuZ2V0SXNzdWVUeXBlKCkuZ2V0TmFtZSgpID09IHByb3BlcnRpZXNbJ2l0Lm5ld0luc3RhbGxhdGlvbiddLnRvU3RyaW5nKCkgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKT09bnVsbCB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLnRvU3RyaW5nKCkuZXF1YWxzKCJObyIpKXsKICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKQogICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykgewogICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7CgogICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgbG9nLndhcm4gIklzc3VlIGNvbiByZWxhdGVzSW5Jc3N1ZUxpbmsiCiAgICAgICAgICAgIC8qRXNlZ3VpcmUgdHJhbnNhemlvbmUgZGkgc3RhdG8gZGVsbGEgc291cmNlSXNzdWUqLwogICAgICAgICAgICBkZWYgbGlua2VkSXNzdWUgPSBpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkKICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlU3RhdHVzID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzKCkKICAgICAgICAgICAgZGVmIHRyYW5zaXRpb25JZAogICAgICAgICAgICBpZihsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lID09IChwcm9wZXJ0aWVzWyd3Zi5hc3NpZ25lZFRvU3VwcGxpZXInXSA/IHByb3BlcnRpZXNbJ3dmLmFzc2lnbmVkVG9TdXBwbGllciddLnRvU3RyaW5nKCkgOiAiQXNzaWduZWQgVG8gU3VwcGxpZXIiKSl7CiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9QUNDRVBUCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYodHJhbnNpdGlvbklkPT1BQ0NFUFQpewogICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKQogICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7CiAgICAgICAgICAgICAgICAgICAgc2V0U2tpcFNjcmVlbkNoZWNrKHRydWUpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvL2RlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpCiAgICAgICAgICAgICAgICAvL0NvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICAvL2lzc3VlSW5wdXRQYXJhbWV0ZXJzLmFkZEN1c3RvbUZpZWxkVmFsdWUoZmllbGRDb25maWcuZ2V0SWQoKSwgIlllcyIpIAogICAgICAgICAgICAgICAgLy9sb2cud2FybiAiaXNzdWVJbnB1dFBhcmFtZXRlcnM6ICIgKyBpc3N1ZUlucHV0UGFyYW1ldGVycwogICAgICAgICAgICAgICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpCiAgICAgICAgICAgICAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBsaW5rZWRJc3N1ZQoKICAgICAgICAgICAgICAgIGRlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDb25maXJtZWQuZ2V0UmVsZXZhbnRDb25maWcobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICBsb2cud2FybiAiZmllbGRDb25maWc6ICIgKyBmaWVsZENvbmZpZwogICAgICAgICAgICAgICAgZGVmIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gIlllcyIgfQogICAgICAgICAgICAgICAgYXV0b21hdGljYWxseUNvbmZpcm1lZC51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSkKCiAgICAgICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7CiAgICAgICAgICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGxpbmtlZElzc3VlKQogICAgICAgICAgICAgICAgbG9nLndhcm4gIlVwZGF0ZWQgY3VzdG9tZmllbGQgLSBpc3N1ZSBsaW5rYXRhIgoKICAgICAgICAgICAgICAgIC8vZGVmIHZhbGlkYXRpb25SZXN1bHQgPSBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKQogICAgICAgICAgICAgICAgaWYgKGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb24KICAgICAgICAgICAgICAgICAgICBkZWYgaXNzdWVSZXN1bHQgPSBpc3N1ZVNlcnZpY2UudHJhbnNpdGlvbih1c2VyLCBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKSkKICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIkZhaWxlZCB0byB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSIpCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJUcmFuc2F6aW9uZSBmYXR0YSA3OSAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c30iKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIkNvdWxkIG5vdCB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuZXJyb3JDb2xsZWN0aW9ufSIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgTGlzdDxJc3N1ZUxpbms+IGFsbE91dElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSkKICAgIGZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbE91dElzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7CiAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTsKCiAgICAgICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICBsb2cud2FybiAiSXNzdWUgY29uIHJlbGF0ZXNPdXRJc3N1ZUxpbmsiCiAgICAgICAgICAgIC8qRXNlZ3VpcmUgdHJhbnNhemlvbmUgZGkgc3RhdG8gZGVsbGEgZGVzdGluYXRpb25Jc3N1ZSovCiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZSA9IGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpCiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZVN0YXR1cyA9IGxpbmtlZElzc3VlLmdldFN0YXR1cygpCiAgICAgICAgICAgIGRlZiB0cmFuc2l0aW9uSWQKICAgICAgICAgICAgbG9nLndhcm4gImxpbmtlZElzc3VlOiAiICsgbGlua2VkSXNzdWUKICAgICAgICAgICAgbG9nLndhcm4gImxpbmtlZElzc3VlU3RhdHVzLm5hbWU6ICIgKyBsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lCiAgICAgICAgICAgIGlmKGxpbmtlZElzc3VlU3RhdHVzLm5hbWUgPT0gKHByb3BlcnRpZXNbJ3dmLmFzc2lnbmVkVG9TdXBwbGllciddID8gcHJvcGVydGllc1snd2YuYXNzaWduZWRUb1N1cHBsaWVyJ10udG9TdHJpbmcoKSA6ICJBc3NpZ25lZCBUbyBTdXBwbGllciIpKXsKICAgICAgICAgICAgICAgIHRyYW5zaXRpb25JZD1BQ0NFUFQKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYodHJhbnNpdGlvbklkPT1BQ0NFUFQpewogICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKQogICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7CiAgICAgICAgICAgICAgICAgICAgc2V0U2tpcFNjcmVlbkNoZWNrKHRydWUpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvL2RlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpCiAgICAgICAgICAgICAgICAvL0NvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICAvL2lzc3VlSW5wdXRQYXJhbWV0ZXJzLmFkZEN1c3RvbUZpZWxkVmFsdWUoZmllbGRDb25maWcuZ2V0SWQoKSwgIlllcyIpIAoKICAgICAgICAgICAgICAgIGRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKQogICAgICAgICAgICAgICAgZGVmIG1pID0gKE11dGFibGVJc3N1ZSkgbGlua2VkSXNzdWUKCiAgICAgICAgICAgICAgICBkZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLmdldFJlbGV2YW50Q29uZmlnKGxpbmtlZElzc3VlKQogICAgICAgICAgICAgICAgbG9nLndhcm4gImZpZWxkQ29uZmlnOiAiICsgZmllbGRDb25maWcKICAgICAgICAgICAgICAgIGRlZiBjZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgIGF1dG9tYXRpY2FsbHlDb25maXJtZWQudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpCgogICAgICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpOwogICAgICAgICAgICAgICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgIGxvZy53YXJuICJVcGRhdGVkIGN1c3RvbWZpZWxkIC0gaXNzdWUgbGlua2F0YSIKCiAgICAgICAgICAgICAgICBpZiAoaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuaXNWYWxpZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgdHJhbnNpdGlvbgogICAgICAgICAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpKQogICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIlRyYW5zYXppb25lIGZhdHRhIDEyMiAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c30iKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIkNvdWxkIG5vdCB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuZXJyb3JDb2xsZWN0aW9ufSIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgfQogICAgfQp9</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE"></arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">c78e1ae3244cda5eddd8f7276fcd5db77569ce43</arg>
                  <arg name="FIELD_NOTES">YCFgT1A6IExpbmtlZCBUaWNrZXRzOiBjaGVjayBhbmQgbGluayByZWxhdGVkIGlzc3Vlcw==</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnlcbmltcG9ydCBncm9vdnkuanNvbi5Kc29uQnVpbGRlclxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29uZmlnLnV0aWwuSmlyYUhvbWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvblxuaW1wb3J0IGphdmEudGV4dC5TaW1wbGVEYXRlRm9ybWF0XG5pbXBvcnQgamF2YS50ZXh0LlBhcnNlRXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLnNlY3VyaXR5LkppcmFBdXRoZW50aWNhdGlvbkNvbnRleHRcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuYmMuaXNzdWUuSXNzdWVTZXJ2aWNlLklzc3VlUmVzdWx0XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmpxbC5wYXJzZXIuSnFsUXVlcnlQYXJzZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuYmMuaXNzdWUuc2VhcmNoLlNlYXJjaFNlcnZpY2VcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEudXNlci51dGlsLlVzZXJVdGlsXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLndlYi5iZWFuLlBhZ2VyRmlsdGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuTGlua0NvbGxlY3Rpb25JbXBsO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGluaztcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS51dGlsLkRlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlclxuXG5pbXBvcnQgZ3Jvb3Z5LnV0aWwubG9nZ2luZy5TbGY0alxuaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkNvbmN1cnJlbnRIYXNoTWFwXG5pbXBvcnQgamF2YXguYW5ub3RhdGlvbi5Qb3N0Q29uc3RydWN0XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5jYWNoZS5hbm5vdGF0aW9uLkNhY2hlYWJsZVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbi8qU2NyaXB0IFZhcmlhYmxlcyovXG4vL1BlciBQb3N0IEZ1bmN0aW9uXG5pc3N1ZSA9IGlzc3VlXG4vL1BlciB0ZXN0IGRhIGNvbnNvbGVcbi8vSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpXG4vL2lzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0yNDFcIilcblxuLypJbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzKi9cbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTsgIFxuQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XG5vYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XG5vYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuLyogR2V0IEluc2lnaHQgSVFMIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xuQ2xhc3MgaXFsRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuSVFMRmFjYWRlXCIpOyBcbmlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG5DbGFzcyBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuc2VydmljZXMubW9kZWwuZmFjdG9yeS5PYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeVwiKTtcbm9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MpO1xuLyogR2V0IEluc2lnaHQgT2JqZWN0IFR5cGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBvYmplY3RUeXBlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUZhY2FkZVwiKTsgXG5vYmplY3RUeXBlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVGYWNhZGVDbGFzcyk7XG5cbi8qQ3VzdG9tZmllbGRzKi9cbmRlZiBzdXBwbGllckNGID0gcHJvcGVydGllc1snY2Yuc3VwcGxpZXInXSA/IHByb3BlcnRpZXNbJ2NmLnN1cHBsaWVyJ10udG9TdHJpbmcoKSA6IFwiT1BfU1VQUExJRVJcIlxuZGVmIHN1cHBsaWVyRmllbGQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHN1cHBsaWVyQ0YpWzBdXG5kZWYgcGxhbm5lZERhdGUgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnBsYW5uZWREYXRlJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBzaXRlID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zaXRlJ10udG9TdHJpbmcoKSlbMF1cbmRlZiB3YnNQcmogPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLndic1ByaiddID8gcHJvcGVydGllc1snY2Yud2JzUHJqJ10udG9TdHJpbmcoKSA6IFwiT1BfV0JTX1BSSlwiKVswXVxubG9nLmRlYnVnIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc3VwcGxpZXJGaWVsZClcblxuSmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCBhdXRoQ29udGV4dCA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKVxuZGVmIGpxbFF1ZXJ5UGFyc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KEpxbFF1ZXJ5UGFyc2VyKVxuZGVmIHNlYXJjaFNlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoU2VhcmNoU2VydmljZSlcblVzZXJVdGlsIHVzZXJVdGlsID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0VXNlclV0aWwoKVxuZGVmIHVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5qaXJhQXV0aGVudGljYXRpb25Db250ZXh0LmxvZ2dlZEluVXNlclxuZGVmIHJlcXVlc3RNZXRob2RcbmRlZiBiYXNlVVJMXG5cbmRlZiBzdXBwbGllciA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc3VwcGxpZXJGaWVsZCkgPyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHN1cHBsaWVyRmllbGQpLmZpcnN0KCkudG9TdHJpbmcoKSA6IG51bGxcbmxvZy5kZWJ1ZyBcInN1cHBsaWVyOiBcIiArIHN1cHBsaWVyXG5cbmlmKHN1cHBsaWVyKXtcbiAgICAvL0xpbmsgaXNzdWVzIGFzc2lnbmVkIHRvIHRoZSBzYW1lIHZlbmRvclxuICAgIHN1cHBsaWVyID0gc3VwcGxpZXIuc3Vic3RyaW5nKDEsc3VwcGxpZXIuaW5kZXhPZignKCcpLTEpXG5cbiAgICBMaXN0PElzc3VlTGluaz4gYWxsSW5DdXJyZW50SXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpO1xuICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxPdXRDdXJyZW50SXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldE91dHdhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKTtcbiAgICBkZWYgYWxyZWFkeUxpbmtlZD1mYWxzZVxuXG4vLyAgICBkZWYganFsU2VhcmNoID0gXCJwcm9qZWN0ID0gJ1wiICsgaXNzdWUuZ2V0UHJvamVjdE9iamVjdCgpLm5hbWUgKyBcIicgQU5EIGlzc3VldHlwZSA9ICdcIiArIGlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUgKyBcIicgQU5EIGtleSAhPSAnXCIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArIFwiJyBBTkQgJ09QX1NVUFBMSUVSJyBpbiBpcWxGdW5jdGlvbignXCIgKyBwcm9wZXJ0aWVzWydpb2JqLnN1cHBpbnN0LnN1cHBsaWVyUmVmJ10udG9TdHJpbmcoKSArIFwiIExJS0UgXFxcIlwiICsgc3VwcGxpZXIucmVwbGFjZUFsbChcIidcIixcIlxcJ1wiKSArIFwiXFxcIicpXCIgKyBcIiBBTkQgJ1wiICsgcHJvcGVydGllc1snY2Yuc2l0ZSddLnRvU3RyaW5nKCkgKyBcIicgPSAnXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNpdGUpLmZpcnN0KCkudG9TdHJpbmcoKS5yZXBsYWNlQWxsKFwiJ1wiLFwiXFwnXCIpICsgXCInIEFORCBzdGF0dXMgSU4gKCdcIiArIHByb3BlcnRpZXNbJ3dmLmFjY2VwdGVkQnlTdXBwbGllciddLnRvU3RyaW5nKCkgKyBcIicpIEFORCBcIiArIChpc3N1ZS5pc3N1ZVR5cGUubmFtZS5lcXVhbHMoXCJNYWludGVuYW5jZSBUaWNrZXRcIikgPyAocHJvcGVydGllc1snY2YucGxhbm5lZERhdGUnXS50b1N0cmluZygpICsgXCIgPj0gJ1wiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbGFubmVkRGF0ZSkuZm9ybWF0KFwieXl5eS1NTS1kZCBISDptbVwiKSArIFwiJyBBTkQgXCIgKyBwcm9wZXJ0aWVzWydjZi5wbGFubmVkRGF0ZSddLnRvU3RyaW5nKCkgKyBcIiA8PSAnXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBsYW5uZWREYXRlKS5mb3JtYXQoXCJ5eXl5LU1NLWRkXCIpLnRvU3RyaW5nKCkgKyBcIiAyMzo1OVwiICsgXCInXCIpIDogKHByb3BlcnRpZXNbJ2NmLndic1ByaiddID8gcHJvcGVydGllc1snY2Yud2JzUHJqJ10udG9TdHJpbmcoKSA6IFwiT1BfV0JTX1BSSlwiKSArIFwiID0gJ1wiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh3YnNQcmopICsgXCInXCIpXG4gICAgZGVmIGFhU2NoZW1hSWQgPSBwcm9wZXJ0aWVzWydpc2NoZW1hLmFhLmlkJ107XG4gICAgZGVmIGpxbFNlYXJjaCA9IFwicHJvamVjdCA9ICdcIiArIGlzc3VlLmdldFByb2plY3RPYmplY3QoKS5uYW1lICsgXCInIEFORCBpc3N1ZXR5cGUgPSAnXCIgKyBpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lICsgXCInIEFORCBrZXkgIT0gJ1wiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIicgQU5EICdPUF9TVVBQTElFUicgaW4gaXFsRnVuY3Rpb24oJ29iamVjdFNjaGVtYUlkID0gXCIgKyBhYVNjaGVtYUlkICsgXCIgQU5EIG9iamVjdFR5cGUgPSBTdXBwbGllcl9JbnN0YWxsYXRpb24gQU5EIG9iamVjdCBIQVZJTkcgaW5ib3VuZFJlZmVyZW5jZXMob2JqZWN0U2NoZW1hSWQgPSBcIiArIGFhU2NoZW1hSWQgKyBcIiBBTkQgb2JqZWN0VHlwZSA9IFN1cHBsaWVyIEFORCBOYW1lIExJS0UgXFxcIlwiICsgc3VwcGxpZXIucmVwbGFjZUFsbChcIidcIixcIlxcJ1wiKSArIFwiXFxcIiknKVwiICsgXCIgQU5EICdcIiArIHByb3BlcnRpZXNbJ2NmLnNpdGUnXS50b1N0cmluZygpICsgXCInID0gJ1wiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzaXRlKS5maXJzdCgpLnRvU3RyaW5nKCkucmVwbGFjZUFsbChcIidcIixcIlxcJ1wiKSArIFwiJyBBTkQgc3RhdHVzIElOICgnXCIgKyBwcm9wZXJ0aWVzWyd3Zi5hY2NlcHRlZEJ5U3VwcGxpZXInXS50b1N0cmluZygpICsgXCInKSBBTkQgXCIgKyAoaXNzdWUuaXNzdWVUeXBlLm5hbWUuZXF1YWxzKFwiTWFpbnRlbmFuY2UgVGlja2V0XCIpID8gKHByb3BlcnRpZXNbJ2NmLnBsYW5uZWREYXRlJ10udG9TdHJpbmcoKSArIFwiID49ICdcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocGxhbm5lZERhdGUpLmZvcm1hdChcInl5eXktTU0tZGQgSEg6bW1cIikgKyBcIicgQU5EIFwiICsgcHJvcGVydGllc1snY2YucGxhbm5lZERhdGUnXS50b1N0cmluZygpICsgXCIgPD0gJ1wiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbGFubmVkRGF0ZSkuZm9ybWF0KFwieXl5eS1NTS1kZFwiKS50b1N0cmluZygpICsgXCIgMjM6NTlcIiArIFwiJ1wiKSA6IChwcm9wZXJ0aWVzWydjZi53YnNQcmonXSA/IHByb3BlcnRpZXNbJ2NmLndic1ByaiddLnRvU3RyaW5nKCkgOiBcIk9QX1dCU19QUkpcIikgKyBcIiA9ICdcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUod2JzUHJqKSArIFwiJ1wiKVxuICAgIGxvZy5kZWJ1ZyBcInJpY2VyY2E6IFwiICsganFsU2VhcmNoXG4gICAgZGVmIHF1ZXJ5ID0ganFsUXVlcnlQYXJzZXIucGFyc2VRdWVyeShqcWxTZWFyY2gpXG4gICAgbG9nLmRlYnVnIFwicXVlcnk6IFwiICsgcXVlcnlcbiAgICBkZWYgc2VhcmNoID0gc2VhcmNoU2VydmljZS5zZWFyY2godXNlciwgcXVlcnksIFBhZ2VyRmlsdGVyLmdldFVubGltaXRlZEZpbHRlcigpKVxuICAgIGRlZiBmb3VuZD1mYWxzZVxuICAgIGRlZiBmb3VuZE91dHdhcmQ9ZmFsc2VcbiAgICBkZWYgbGlua2VkSXNzdWVcbiAgICBpZiAoc2VhcmNoLnJlc3VsdHMpIHtcdFxuICAgICAgICBmb3IgKGkgaW4gc2VhcmNoLnJlc3VsdHMuZmlyc3QoKSl7XG4gICAgICAgICAgICAvKlBlciBvZ25pIGlzc3VlIHJlc3RpdHVpdGEgZGFsbGEgcXVlcnkgSlFMIHZlcmlmaWNvIHNlIGhhIGdpXHUwMGUwIGRlaSBsaW5rIFJlbGF0ZXMgVG8qL1xuICAgICAgICAgICAgbG9nLmRlYnVnIGkua2V5XG5cbiAgICAgICAgICAgIGRlZiBpc3N1ZVNlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZVNlcnZpY2UoKVxuXG4gICAgICAgICAgICBMaXN0PElzc3VlTGluaz4gYWxsSW5Jc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0SW53YXJkTGlua3MoaS5nZXRJZCgpKTtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImFsbEluSXNzdWVMaW5rOiBcIiArIGFsbEluSXNzdWVMaW5rXG4gICAgICAgICAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxJbklzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgICAgICAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgICAgICAgICBkZWYgbGlua2VkSXNzdWVUZW1wID0gaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpXG4gICAgICAgICAgICAgICAgU3RyaW5nIHR5cGUgPSBsaW5rZWRJc3N1ZVRlbXAuZ2V0SXNzdWVUeXBlKCkuZ2V0TmFtZSgpO1xuXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiaXNzdWVsaW5rIFR5cGU6IFwiICsgaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwic291cmNlSXNzdWU6IFwiICsgaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiZGVzdGluYXRpb25Jc3N1ZTogXCIgKyBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKVxuXG4gICAgICAgICAgICAgICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkgJiYgaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpLmtleSE9aXNzdWUua2V5KXtcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidHJvdmF0byBpbldhcmRMaW5rIC0gcHJlbmRvIGxhIHNvdXJjZSBpc3N1ZSBcIiArIGxpbmtlZElzc3VlVGVtcCArIFwiIGUgbGEgbGVnbyBhbGxhIGlzc3VlIGNvcnJlbnRlIHNvbG8gc2Ugbm9uIFx1MDBlOCBnaVx1MDBlMCBsaW5rYXRhXCJcbiAgICAgICAgICAgICAgICAgICAgYWxyZWFkeUxpbmtlZD1mYWxzZVxuICAgICAgICAgICAgICAgICAgICBmb3IobGkgaW4gYWxsSW5DdXJyZW50SXNzdWVMaW5rKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGxpbmtlZElzc3VlVGVtcC5nZXRJZCgpID09IGxpLmdldFNvdXJjZU9iamVjdCgpLmdldElkKCkgfHwgbGlua2VkSXNzdWVUZW1wLmdldElkKCkgPT0gbGkuZ2V0RGVzdGluYXRpb25PYmplY3QoKS5nZXRJZCgpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHJlYWR5TGlua2VkPXRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmb3IobGkgaW4gYWxsT3V0Q3VycmVudElzc3VlTGluayl7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihsaW5rZWRJc3N1ZVRlbXAuZ2V0SWQoKSA9PSBsaS5nZXRTb3VyY2VPYmplY3QoKS5nZXRJZCgpIHx8IGxpbmtlZElzc3VlVGVtcC5nZXRJZCgpID09IGxpLmdldERlc3RpbmF0aW9uT2JqZWN0KCkuZ2V0SWQoKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxyZWFkeUxpbmtlZD10cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZm91bmQ9dHJ1ZVxuICAgICAgICAgICAgICAgICAgICBpZighYWxyZWFkeUxpbmtlZCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJub24gXHUwMGU4IGxpbmthdGEsIGxhIGxpbmtvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5jcmVhdGVJc3N1ZUxpbmsobGlua2VkSXNzdWVUZW1wLmdldElkKCksIGlzc3VlLmdldElkKCksIExvbmcucGFyc2VMb25nKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzSWQnXS50b1N0cmluZygpKSwgMSwgdXNlcik7IFxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBSRVNUIEFQSSBwZXIgcHVsaXppYSBjYWNoZSBpc3N1ZSBsaW5rYXRhICovXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0TWV0aG9kID0gXCJHRVRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qU2NyaXB0IFZhcmlhYmxlcyovXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1BlciB0ZXN0IGRhIGNvbnNvbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMzI1MzVcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL2NsZWFyQ2FjaGUvdGlja2V0a2V5L1wiICsgbGlua2VkSXNzdWVUZW1wLmtleVxuICAgICAgICAgICAgICAgICAgICAgICAgVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICAgICAgICAgICAgICAgICAgICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImdpXHUwMGUwIGxpbmthdGEsIG5vbiBsYSBsaW5rbyBkaSBudW92b1wiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGkuZ2V0SWQoKSk7XG4gICAgICAgICAgICBsb2cuZGVidWcgXCJhbGxPdXRJc3N1ZUxpbms6IFwiICsgYWxsT3V0SXNzdWVMaW5rXG4gICAgICAgICAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgICAgICAgICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG4gICAgICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlVGVtcCA9IGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpXG4gICAgICAgICAgICAgICAgU3RyaW5nIHR5cGUgPSBsaW5rZWRJc3N1ZVRlbXAuZ2V0SXNzdWVUeXBlKCkuZ2V0TmFtZSgpO1xuXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiaXNzdWVsaW5rIFR5cGU6IFwiICsgaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwic291cmNlSXNzdWU6IFwiICsgaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiZGVzdGluYXRpb25Jc3N1ZTogXCIgKyBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKVxuXG4gICAgICAgICAgICAgICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkgJiYgaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkua2V5IT1pc3N1ZS5rZXkpe1xuICAgICAgICAgICAgICAgICAgICBmb3VuZD10cnVlXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRyb3ZhdG8gb3V0V2FyZExpbmsgLSBwcmVuZG8gbGEgZGVzdGluYXRpb24gaXNzdWUgXCIgKyBsaW5rZWRJc3N1ZVRlbXAgKyBcIiBlIGxhIGxlZ28gYWxsYSBpc3N1ZSBjb3JyZW50ZSBzb2xvIHNlIG5vbiBcdTAwZTggZ2lcdTAwZTAgbGlua2F0YVwiXG5cbiAgICAgICAgICAgICAgICAgICAgYWxyZWFkeUxpbmtlZD1mYWxzZVxuICAgICAgICAgICAgICAgICAgICBmb3IobGkgaW4gYWxsSW5DdXJyZW50SXNzdWVMaW5rKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGxpbmtlZElzc3VlVGVtcC5nZXRJZCgpID09IGxpLmdldFNvdXJjZU9iamVjdCgpLmdldElkKCkgfHwgbGlua2VkSXNzdWVUZW1wLmdldElkKCkgPT0gbGkuZ2V0RGVzdGluYXRpb25PYmplY3QoKS5nZXRJZCgpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHJlYWR5TGlua2VkPXRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmb3IobGkgaW4gYWxsT3V0Q3VycmVudElzc3VlTGluayl7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihsaW5rZWRJc3N1ZVRlbXAuZ2V0SWQoKSA9PSBsaS5nZXRTb3VyY2VPYmplY3QoKS5nZXRJZCgpIHx8IGxpbmtlZElzc3VlVGVtcC5nZXRJZCgpID09IGxpLmdldERlc3RpbmF0aW9uT2JqZWN0KCkuZ2V0SWQoKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxyZWFkeUxpbmtlZD10cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZm91bmQ9dHJ1ZVxuICAgICAgICAgICAgICAgICAgICBpZighYWxyZWFkeUxpbmtlZCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJub24gXHUwMGU4IGxpbmthdGEsIGxhIGxpbmtvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5jcmVhdGVJc3N1ZUxpbmsoaXNzdWUuZ2V0SWQoKSwgbGlua2VkSXNzdWVUZW1wLmdldElkKCksIExvbmcucGFyc2VMb25nKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzSWQnXS50b1N0cmluZygpKSwgMSwgdXNlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFJFU1QgQVBJIHBlciBwdWxpemlhIGNhY2hlIGlzc3VlIGxpbmthdGEgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RNZXRob2QgPSBcIkdFVFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgLypTY3JpcHQgVmFyaWFibGVzKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vUGVyIHRlc3QgZGEgY29uc29sZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy0zMjUzNVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vY2xlYXJDYWNoZS90aWNrZXRrZXkvXCIgKyBsaW5rZWRJc3N1ZVRlbXAua2V5XG4gICAgICAgICAgICAgICAgICAgICAgICBVUkwgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgICAgICAgICAgICAgICAgICAgICAgSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImdpXHUwMGUwIGxpbmthdGEsIG5vbiBsYSBsaW5rbyBkaSBudW92b1wiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ZWxzZSBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSAmJiBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKS5rZXk9PWlzc3VlLmtleSl7XG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImlzc3VlIGdpXHUwMGUwIGxpbmthdGFcIlxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiQ3JlbyBsaW5rIHRyYSBsYSBpc3N1ZSBvZ2dldHRvIGRpIHRyYW5zaXRpb24gZSBsYSBpc3N1ZSByaXN1bHRhbnRlIGRhbCBmaWx0cm8gc2Ugbm9uIFx1MDBlOCBnaVx1MDBlMCBsaW5rYXRhXCJcbiAgICAgICAgICAgIGFscmVhZHlMaW5rZWQ9ZmFsc2VcbiAgICAgICAgICAgIGZvcihsaSBpbiBhbGxJbkN1cnJlbnRJc3N1ZUxpbmspe1xuICAgICAgICAgICAgICAgIGlmKGkuZ2V0SWQoKSA9PSBsaS5nZXRTb3VyY2VPYmplY3QoKS5nZXRJZCgpIHx8IGkuZ2V0SWQoKSA9PSBsaS5nZXREZXN0aW5hdGlvbk9iamVjdCgpLmdldElkKCkpe1xuICAgICAgICAgICAgICAgICAgICBhbHJlYWR5TGlua2VkPXRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IobGkgaW4gYWxsT3V0Q3VycmVudElzc3VlTGluayl7XG4gICAgICAgICAgICAgICAgaWYoaS5nZXRJZCgpID09IGxpLmdldFNvdXJjZU9iamVjdCgpLmdldElkKCkgfHwgaS5nZXRJZCgpID09IGxpLmdldERlc3RpbmF0aW9uT2JqZWN0KCkuZ2V0SWQoKSl7XG4gICAgICAgICAgICAgICAgICAgIGFscmVhZHlMaW5rZWQ9dHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKCFhbHJlYWR5TGlua2VkKXtcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJub24gXHUwMGU4IGxpbmthdGEsIGxhIGxpbmtvXCJcbiAgICAgICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuY3JlYXRlSXNzdWVMaW5rKGkuZ2V0SWQoKSwgaXNzdWUuZ2V0SWQoKSwgTG9uZy5wYXJzZUxvbmcocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXNJZCddLnRvU3RyaW5nKCkpLCAxLCB1c2VyKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvKiBSRVNUIEFQSSBwZXIgcHVsaXppYSBjYWNoZSBpc3N1ZSBsaW5rYXRhICovXG4gICAgICAgICAgICAgICAgcmVxdWVzdE1ldGhvZCA9IFwiR0VUXCI7XG4gICAgICAgICAgICAgICAgLypTY3JpcHQgVmFyaWFibGVzKi9cbiAgICAgICAgICAgICAgICAvL1BlciB0ZXN0IGRhIGNvbnNvbGVcbiAgICAgICAgICAgICAgICAvL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTMyNTM1XCIpXG4gICAgICAgICAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vY2xlYXJDYWNoZS90aWNrZXRrZXkvXCIgKyBpLmtleVxuICAgICAgICAgICAgICAgIFVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgICAgICAgICAgSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiZ2lcdTAwZTAgbGlua2F0YSwgbm9uIGxhIGxpbmtvIGRpIG51b3ZvXCJcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgIH1cblxuICAgIH0gZWxzZSB7XG4gICAgICAgIGxvZy5lcnJvcihcIkludmFsaWQgSlFMOiBcIiArIGpxbFNlYXJjaCk7XG4gICAgfSBcbn1lbHNle1xuICAgIC8vaG93IHRvIGxpbmsgaXNzdWVzIGFzc2lnbmVkIHRvIHRoZSBzYW1lIGludGVybmFsIHRlY2hzPyBkbyB3ZSB3YW50IHRvIGRvIGl0P1xufVxuIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZQppbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb24KaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3IKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXIKaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyCmltcG9ydCBncm9vdnkuanNvbi5Kc29uU2x1cnBlcgppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb25maWcudXRpbC5KaXJhSG9tZQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvbgppbXBvcnQgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQKaW1wb3J0IGphdmEudGV4dC5QYXJzZUV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLnNlY3VyaXR5LkppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5iYy5pc3N1ZS5Jc3N1ZVNlcnZpY2UuSXNzdWVSZXN1bHQKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5qcWwucGFyc2VyLkpxbFF1ZXJ5UGFyc2VyCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuYmMuaXNzdWUuc2VhcmNoLlNlYXJjaFNlcnZpY2UKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS51c2VyLnV0aWwuVXNlclV0aWwKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS53ZWIuYmVhbi5QYWdlckZpbHRlcgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuTGlua0NvbGxlY3Rpb25JbXBsOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWUKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS51dGlsLkRlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcgoKaW1wb3J0IGdyb292eS51dGlsLmxvZ2dpbmcuU2xmNGoKaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkNvbmN1cnJlbnRIYXNoTWFwCmltcG9ydCBqYXZheC5hbm5vdGF0aW9uLlBvc3RDb25zdHJ1Y3QKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuY2FjaGUuYW5ub3RhdGlvbi5DYWNoZWFibGUKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXIKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsCgpQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpCkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpCnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7Cglwcm9wZXJ0aWVzLmxvYWQoaXQpCn0KZGVmIENhdGVnb3J5IGxvZyA9IENhdGVnb3J5LmdldEluc3RhbmNlKCJjb20ub25yZXNvbHZlLmppcmEuZ3Jvb3Z5LlBvc3RGdW5jdGlvbiIpCmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKQoKLypTY3JpcHQgVmFyaWFibGVzKi8KLy9QZXIgUG9zdCBGdW5jdGlvbgppc3N1ZSA9IGlzc3VlCi8vUGVyIHRlc3QgZGEgY29uc29sZQovL0lzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKQovL2lzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKCJPUFVULTI0MSIpCgovKkluc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHMqLwpDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZSIpOyAgCkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUiKTsKb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpOwpvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpOwovKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovCkNsYXNzIGlxbEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuSVFMRmFjYWRlIik7IAppcWxGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUoaXFsRmFjYWRlQ2xhc3MpOwpDbGFzcyBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5zZXJ2aWNlcy5tb2RlbC5mYWN0b3J5Lk9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Iik7Cm9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MpOwovKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi8KQ2xhc3Mgb2JqZWN0VHlwZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUZhY2FkZSIpOyAKb2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpOwoKLypDdXN0b21maWVsZHMqLwpkZWYgc3VwcGxpZXJJbnN0YWxsYXRpb24gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnN1cHBsaWVyUmVwYWlyJ10udG9TdHJpbmcoKSlbMF0KZGVmIHN1cHBsaWVyTmV3SW5zdGFsbGF0aW9uID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zdXBwbGllck5ld0luc3RhbGxhdGlvbiddLnRvU3RyaW5nKCkpWzBdCmRlZiBwbGFubmVkRGF0ZSA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YucGxhbm5lZERhdGUnXS50b1N0cmluZygpKVswXQpkZWYgc2l0ZSA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yuc2l0ZSddLnRvU3RyaW5nKCkpWzBdCmRlZiB3YnNQcmogPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLndic1ByaiddID8gcHJvcGVydGllc1snY2Yud2JzUHJqJ10udG9TdHJpbmcoKSA6ICJPUF9XQlNfUFJKIilbMF0KbG9nLmRlYnVnIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc3VwcGxpZXJJbnN0YWxsYXRpb24pCgpKaXJhQXV0aGVudGljYXRpb25Db250ZXh0IGF1dGhDb250ZXh0ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpCmRlZiBqcWxRdWVyeVBhcnNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChKcWxRdWVyeVBhcnNlcikKZGVmIHNlYXJjaFNlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoU2VhcmNoU2VydmljZSkKVXNlclV0aWwgdXNlclV0aWwgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRVc2VyVXRpbCgpCmRlZiB1c2VyID0gQ29tcG9uZW50QWNjZXNzb3IuamlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dC5sb2dnZWRJblVzZXIKCmRlZiBzdXBwbGllciA9IChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHN1cHBsaWVySW5zdGFsbGF0aW9uKSA/IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc3VwcGxpZXJJbnN0YWxsYXRpb24pLmZpcnN0KCkudG9TdHJpbmcoKSA6IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc3VwcGxpZXJOZXdJbnN0YWxsYXRpb24pLmZpcnN0KCkudG9TdHJpbmcoKSkKbG9nLmRlYnVnICJzdXBwbGllcjogIiArIHN1cHBsaWVyCnN1cHBsaWVyID0gc3VwcGxpZXIuc3Vic3RyaW5nKDEsc3VwcGxpZXIuaW5kZXhPZignKCcpLTEpCgpMaXN0PElzc3VlTGluaz4gYWxsSW5DdXJyZW50SXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpOwpMaXN0PElzc3VlTGluaz4gYWxsT3V0Q3VycmVudElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSk7CmRlZiBhbHJlYWR5TGlua2VkPWZhbHNlCgpkZWYganFsU2VhcmNoID0gInByb2plY3QgPSAnIiArIGlzc3VlLmdldFByb2plY3RPYmplY3QoKS5uYW1lICsgIicgQU5EIGlzc3VldHlwZSA9ICciICsgaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZSArICInIEFORCBrZXkgIT0gJyIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArICInIEFORCAnIiArIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHN1cHBsaWVySW5zdGFsbGF0aW9uKSA/IHByb3BlcnRpZXNbJ2NmLnN1cHBsaWVyUmVwYWlyJ10udG9TdHJpbmcoKSA6IHByb3BlcnRpZXNbJ2NmLnN1cHBsaWVyTmV3SW5zdGFsbGF0aW9uJ10udG9TdHJpbmcoKSkgKyAiJyBpbiBpcWxGdW5jdGlvbignIiArIHByb3BlcnRpZXNbJ2lvYmouc3VwcGluc3Quc3VwcGxpZXJSZWYnXS50b1N0cmluZygpICsgIiBMSUtFIFwiIiArIHN1cHBsaWVyLnJlcGxhY2VBbGwoIiciLCJcJyIpICsgIlwiJykiICsgIiBBTkQgJyIgKyBwcm9wZXJ0aWVzWydjZi5zaXRlJ10udG9TdHJpbmcoKSArICInID0gJyIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNpdGUpLmZpcnN0KCkudG9TdHJpbmcoKS5yZXBsYWNlQWxsKCInIiwiXCciKSArICInIEFORCBzdGF0dXMgSU4gKCciICsgcHJvcGVydGllc1snd2YuYWNjZXB0ZWRCeVN1cHBsaWVyJ10udG9TdHJpbmcoKSArICInKSBBTkQgIiArIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHN1cHBsaWVySW5zdGFsbGF0aW9uKSA/IChwcm9wZXJ0aWVzWydjZi5wbGFubmVkRGF0ZSddLnRvU3RyaW5nKCkgKyAiID49ICciICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbGFubmVkRGF0ZSkuZm9ybWF0KCJ5eXl5LU1NLWRkIEhIOm1tIikgKyAiJyBBTkQgIiArIHByb3BlcnRpZXNbJ2NmLnBsYW5uZWREYXRlJ10udG9TdHJpbmcoKSArICIgPD0gJyIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBsYW5uZWREYXRlKS5mb3JtYXQoInl5eXktTU0tZGQiKS50b1N0cmluZygpICsgIiAyMzo1OSIgKyAiJyIpIDogKHByb3BlcnRpZXNbJ2NmLndic1ByaiddID8gcHJvcGVydGllc1snY2Yud2JzUHJqJ10udG9TdHJpbmcoKSA6ICJPUF9XQlNfUFJKIikgKyAiID0gJyIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHdic1ByaikgKyAiJyIpCmxvZy5kZWJ1ZyAicmljZXJjYTogIiArIGpxbFNlYXJjaApkZWYgcXVlcnkgPSBqcWxRdWVyeVBhcnNlci5wYXJzZVF1ZXJ5KGpxbFNlYXJjaCkKbG9nLmRlYnVnICJxdWVyeTogIiArIHF1ZXJ5CmRlZiBzZWFyY2ggPSBzZWFyY2hTZXJ2aWNlLnNlYXJjaCh1c2VyLCBxdWVyeSwgUGFnZXJGaWx0ZXIuZ2V0VW5saW1pdGVkRmlsdGVyKCkpCmRlZiBmb3VuZD1mYWxzZQpkZWYgZm91bmRPdXR3YXJkPWZhbHNlCmRlZiBsaW5rZWRJc3N1ZQppZiAoc2VhcmNoLnJlc3VsdHMpIHsJCiAgICBmb3IgKGkgaW4gc2VhcmNoLnJlc3VsdHMpewogICAgICAgIC8qUGVyIG9nbmkgaXNzdWUgcmVzdGl0dWl0YSBkYWxsYSBxdWVyeSBKUUwgdmVyaWZpY28gc2UgaGEgZ2nDoCBkZWkgbGluayBSZWxhdGVzIFRvKi8KICAgICAgICBsb2cuZGVidWcgaS5rZXkKCiAgICAgICAgZGVmIGlzc3VlU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlU2VydmljZSgpCgogICAgICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpLmdldElkKCkpOwogICAgICAgIGxvZy5kZWJ1ZyAiYWxsSW5Jc3N1ZUxpbms6ICIgKyBhbGxJbklzc3VlTGluawogICAgICAgIGZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbEluSXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHsKICAgICAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTsKICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlVGVtcCA9IGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKQogICAgICAgICAgICBTdHJpbmcgdHlwZSA9IGxpbmtlZElzc3VlVGVtcC5nZXRJc3N1ZVR5cGUoKS5nZXROYW1lKCk7CgogICAgICAgICAgICBsb2cuZGVidWcgImlzc3VlbGluayBUeXBlOiAiICsgaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpCgkJCWxvZy5kZWJ1ZyAic291cmNlSXNzdWU6ICIgKyBpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkKICAgICAgICAgICAgbG9nLmRlYnVnICJkZXN0aW5hdGlvbklzc3VlOiAiICsgaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpICYmIGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKS5rZXkhPWlzc3VlLmtleSl7CiAgICAgICAgICAgICAgICBsb2cuZGVidWcgInRyb3ZhdG8gaW5XYXJkTGluayAtIHByZW5kbyBsYSBzb3VyY2UgaXNzdWUgIiArIGxpbmtlZElzc3VlVGVtcCArICIgZSBsYSBsZWdvIGFsbGEgaXNzdWUgY29ycmVudGUgc29sbyBzZSBub24gw6ggZ2nDoCBsaW5rYXRhIgogICAgICAgICAgICAgICAgYWxyZWFkeUxpbmtlZD1mYWxzZQogICAgICAgICAgICAgICAgZm9yKGxpIGluIGFsbEluQ3VycmVudElzc3VlTGluayl7CiAgICAgICAgICAgICAgICAgICAgaWYobGlua2VkSXNzdWVUZW1wLmdldElkKCkgPT0gbGkuZ2V0U291cmNlT2JqZWN0KCkuZ2V0SWQoKSB8fCBsaW5rZWRJc3N1ZVRlbXAuZ2V0SWQoKSA9PSBsaS5nZXREZXN0aW5hdGlvbk9iamVjdCgpLmdldElkKCkpewogICAgICAgICAgICAgICAgICAgICAgICBhbHJlYWR5TGlua2VkPXRydWUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBmb3IobGkgaW4gYWxsT3V0Q3VycmVudElzc3VlTGluayl7CiAgICAgICAgICAgICAgICAgICAgaWYobGlua2VkSXNzdWVUZW1wLmdldElkKCkgPT0gbGkuZ2V0U291cmNlT2JqZWN0KCkuZ2V0SWQoKSB8fCBsaW5rZWRJc3N1ZVRlbXAuZ2V0SWQoKSA9PSBsaS5nZXREZXN0aW5hdGlvbk9iamVjdCgpLmdldElkKCkpewogICAgICAgICAgICAgICAgICAgICAgICBhbHJlYWR5TGlua2VkPXRydWUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBmb3VuZD10cnVlCiAgICAgICAgICAgICAgICBpZighYWxyZWFkeUxpbmtlZCl7CiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnICJub24gw6ggbGlua2F0YSwgbGEgbGlua28iCiAgICAgICAgICAgICAgICAgCUNvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5jcmVhdGVJc3N1ZUxpbmsobGlua2VkSXNzdWVUZW1wLmdldElkKCksIGlzc3VlLmdldElkKCksIExvbmcucGFyc2VMb25nKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzSWQnXS50b1N0cmluZygpKSwgMSwgdXNlcik7ICAgCiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgImdpw6AgbGlua2F0YSwgbm9uIGxhIGxpbmtvIGRpIG51b3ZvIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGkuZ2V0SWQoKSk7CiAgICAgICAgbG9nLmRlYnVnICJhbGxPdXRJc3N1ZUxpbms6ICIgKyBhbGxPdXRJc3N1ZUxpbmsKICAgICAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykgewogICAgICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpOwogICAgICAgICAgICBkZWYgbGlua2VkSXNzdWVUZW1wID0gaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkKICAgICAgICAgICAgU3RyaW5nIHR5cGUgPSBsaW5rZWRJc3N1ZVRlbXAuZ2V0SXNzdWVUeXBlKCkuZ2V0TmFtZSgpOwoKICAgICAgICAgICAgbG9nLmRlYnVnICJpc3N1ZWxpbmsgVHlwZTogIiArIGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKQoJCQlsb2cuZGVidWcgInNvdXJjZUlzc3VlOiAiICsgaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpCiAgICAgICAgICAgIGxvZy5kZWJ1ZyAiZGVzdGluYXRpb25Jc3N1ZTogIiArIGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpCiAgICAgICAgICAgIAogICAgICAgICAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSAmJiBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKS5rZXkhPWlzc3VlLmtleSl7CiAgICAgICAgICAgICAgICBmb3VuZD10cnVlCiAgICAgICAgICAgICAgICBsb2cuZGVidWcgInRyb3ZhdG8gb3V0V2FyZExpbmsgLSBwcmVuZG8gbGEgZGVzdGluYXRpb24gaXNzdWUgIiArIGxpbmtlZElzc3VlVGVtcCArICIgZSBsYSBsZWdvIGFsbGEgaXNzdWUgY29ycmVudGUgc29sbyBzZSBub24gw6ggZ2nDoCBsaW5rYXRhIgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBhbHJlYWR5TGlua2VkPWZhbHNlCiAgICAgICAgICAgICAgICBmb3IobGkgaW4gYWxsSW5DdXJyZW50SXNzdWVMaW5rKXsKICAgICAgICAgICAgICAgICAgICBpZihsaW5rZWRJc3N1ZVRlbXAuZ2V0SWQoKSA9PSBsaS5nZXRTb3VyY2VPYmplY3QoKS5nZXRJZCgpIHx8IGxpbmtlZElzc3VlVGVtcC5nZXRJZCgpID09IGxpLmdldERlc3RpbmF0aW9uT2JqZWN0KCkuZ2V0SWQoKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGFscmVhZHlMaW5rZWQ9dHJ1ZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZvcihsaSBpbiBhbGxPdXRDdXJyZW50SXNzdWVMaW5rKXsKICAgICAgICAgICAgICAgICAgICBpZihsaW5rZWRJc3N1ZVRlbXAuZ2V0SWQoKSA9PSBsaS5nZXRTb3VyY2VPYmplY3QoKS5nZXRJZCgpIHx8IGxpbmtlZElzc3VlVGVtcC5nZXRJZCgpID09IGxpLmdldERlc3RpbmF0aW9uT2JqZWN0KCkuZ2V0SWQoKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGFscmVhZHlMaW5rZWQ9dHJ1ZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZvdW5kPXRydWUKICAgICAgICAgICAgICAgIGlmKCFhbHJlYWR5TGlua2VkKXsKICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgIm5vbiDDqCBsaW5rYXRhLCBsYSBsaW5rbyIKICAgICAgICAgICAgICAgICAJQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmNyZWF0ZUlzc3VlTGluayhpc3N1ZS5nZXRJZCgpLCBsaW5rZWRJc3N1ZVRlbXAuZ2V0SWQoKSwgTG9uZy5wYXJzZUxvbmcocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXNJZCddLnRvU3RyaW5nKCkpLCAxLCB1c2VyKTsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyAiZ2nDoCBsaW5rYXRhLCBub24gbGEgbGlua28gZGkgbnVvdm8iCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH1lbHNlIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpICYmIGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpLmtleT09aXNzdWUua2V5KXsKICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyAiaXNzdWUgZ2nDoCBsaW5rYXRhIgogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgbG9nLmRlYnVnICJDcmVvIGxpbmsgdHJhIGxhIGlzc3VlIG9nZ2V0dG8gZGkgdHJhbnNpdGlvbiBlIGxhIGlzc3VlIHJpc3VsdGFudGUgZGFsIGZpbHRybyBzZSBub24gw6ggZ2nDoCBsaW5rYXRhIgogICAgICAgIGFscmVhZHlMaW5rZWQ9ZmFsc2UKICAgICAgICBmb3IobGkgaW4gYWxsSW5DdXJyZW50SXNzdWVMaW5rKXsKICAgICAgICAgICAgaWYoaS5nZXRJZCgpID09IGxpLmdldFNvdXJjZU9iamVjdCgpLmdldElkKCkgfHwgaS5nZXRJZCgpID09IGxpLmdldERlc3RpbmF0aW9uT2JqZWN0KCkuZ2V0SWQoKSl7CiAgICAgICAgICAgICAgICBhbHJlYWR5TGlua2VkPXRydWUKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmb3IobGkgaW4gYWxsT3V0Q3VycmVudElzc3VlTGluayl7CiAgICAgICAgICAgIGlmKGkuZ2V0SWQoKSA9PSBsaS5nZXRTb3VyY2VPYmplY3QoKS5nZXRJZCgpIHx8IGkuZ2V0SWQoKSA9PSBsaS5nZXREZXN0aW5hdGlvbk9iamVjdCgpLmdldElkKCkpewogICAgICAgICAgICAgICAgYWxyZWFkeUxpbmtlZD10cnVlCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYoIWFscmVhZHlMaW5rZWQpewogICAgICAgICAgICBsb2cuZGVidWcgIm5vbiDDqCBsaW5rYXRhLCBsYSBsaW5rbyIKICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmNyZWF0ZUlzc3VlTGluayhpLmdldElkKCksIGlzc3VlLmdldElkKCksIExvbmcucGFyc2VMb25nKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzSWQnXS50b1N0cmluZygpKSwgMSwgdXNlcik7CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGxvZy5kZWJ1ZyAiZ2nDoCBsaW5rYXRhLCBub24gbGEgbGlua28gZGkgbnVvdm8iCiAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgIAogICAgfQogICAgCn0gZWxzZSB7CiAgICBsb2cuZXJyb3IoIkludmFsaWQgSlFMOiAiICsganFsU2VhcmNoKTsKfSA=</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE"></arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">a6604d0a-af28-40f6-84ec-7a2dc32df2b0</arg>
                  <arg name="FIELD_NOTES">YCFgT1AgRW1haWwgTm90aWZpY2F0aW9uOiBBQ0NFUFRFRF9CWV9TVVBQTElFUiAtIG1hbnRlbnV0YSBjb21lIHBvc3QgZnVuY3Rpb24gcGVyIGV2aXRhcmUgZGkgZ2VuZXJhcmUgYmxvY2NoaSBhbCBmb3JuaXRvcmUgbGVnYXRpIGFsbCdpbnZpbyBkaSBub3RpZmljaGUgaW50ZXJuZQ==</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnlcbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuZGVmIHJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuXG5kZWYgYm9keV9yZXEgPSBbXG5cdFwidGVtcGxhdGVOYW1lXCI6IHByb3BlcnRpZXNbJ3R0LmFjY2VwdGVkQnlTdXBwbGllciddLnRvU3RyaW5nKCksXG5cdFwicGVjXCI6IGZhbHNlLFxuICAgIFwiaXNzdWVLZXlcIjogaXNzdWUua2V5XG5dXG5cbmRlZiBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS90cmFuc2FjdGlvbi9tYWlsL3NlbmRcIlxuVVJMIHVybFxudXJsID0gbmV3IFVSTChiYXNlVVJMKVxuXG5IdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbmNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG5jb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG5jb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxubG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5jb25uZWN0aW9uLmNvbm5lY3QoKTtcblxubG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxubG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxubG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxubG9nLmRlYnVnIFwiZ2V0UmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuXG4iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CkNhdGVnb3J5IGxvZyA9IENhdGVnb3J5LmdldEluc3RhbmNlKCJjb20ub25yZXNvbHZlLmppcmEuZ3Jvb3Z5LlBvc3RGdW5jdGlvbiIpCmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKQppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQpkZWYgcmVxdWVzdE1ldGhvZCA9ICJQT1NUIjsKCklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTsKQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpOwoKZGVmIGJvZHlfcmVxID0gWwoJInRlbXBsYXRlTmFtZSI6IHByb3BlcnRpZXNbJ3R0LmFjY2VwdGVkQnlTdXBwbGllciddLnRvU3RyaW5nKCksCgkicGVjIjogZmFsc2UsCiAgICAiaXNzdWVLZXkiOiBpc3N1ZS5rZXkKXQoKZGVmIGJhc2VVUkwgPSAiaHR0cDovLyIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArICIvb3AvcmVzdC9qaXJhL0FBL3RyYW5zYWN0aW9uL21haWwvc2VuZCIKVVJMIHVybAp1cmwgPSBuZXcgVVJMKGJhc2VVUkwpCgpIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpOwpjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7CmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04Iik7CmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KCJBY2NlcHQiLCAiKi8qIik7CmNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7CmNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTsKY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0KY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcigiVVRGLTgiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH0KbG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtCmNvbm5lY3Rpb24uY29ubmVjdCgpOwoKbG9nLmRlYnVnICJ1cmw6ICIgKyB1cmwKbG9nLmRlYnVnICJSZXNwb25zZUNvZGU6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkKbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKbG9nLmRlYnVnICJnZXRSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKCg==</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="471" name="Clona Tkt" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">20401</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">c659704c-9678-4844-9a05-6f3497e391e7</arg>
                <arg name="FIELD_NOTES">YCFgRW5hYmxlZCBvbmx5IGZvciBSZXBhaXIgYW5kIE5ldyBJbnN0YWxsYXRpb24=</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnTWFpbnRlbmFuY2UgVGlja2V0JyB8fCAoaXNzdWUuaXNzdWVUeXBlLm5hbWUgPT0gJ05ldyBJbnN0YWxsYXRpb24nICYmIGNmVmFsdWVzWydPUF9BU1NFVCddICE9IG51bGwpIiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="2">
              <post-functions>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="fieldValue">New Installation</arg>
                  <arg name="preconditionMode-textValue">DISCARD</arg>
                  <arg name="fieldsList">issuetype</arg>
                </function>
                <function type="class">
                  <arg name="field.existingAttachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="targetIssueTypeDefinedByCfSelection"></arg>
                  <arg name="issueTypeId">12301</arg>
                  <arg name="scopeType">ISSUE_LINKING</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="field.attachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="targetIssueType">SELECTED_ISSUE_TYPE</arg>
                  <arg name="scopeSource-jql"></arg>
                  <arg name="createIssueAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.copyTransitionComment">false</arg>
                  <arg name="targetProjectType">SAME</arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="transitionAttachmentsOperation">copy</arg>
                  <arg name="field.issueAssignTo">ASSIGN_TO_UNASSIGNED</arg>
                  <arg name="targetProjectSelectedCustomField"></arg>
                  <arg name="destination-scopeTarget">LINK_END</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiescreatelinkedissue-function</arg>
                  <arg name="scopeDestination-linkEnd">10003:OUTWARD</arg>
                  <arg name="field.enablingCustomFieldId"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="subFunctions">[{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_21909&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21909&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22600&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22600&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22822&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22822&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22601&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22601&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22603&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22603&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22663&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22663&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22634&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22634&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22651&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22651&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22700&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22700&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22606&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22606&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22607&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22607&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22629&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22629&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22652&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22652&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;description&quot;,&quot;destinationFieldId&quot;:&quot;description&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22627&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22627&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22620&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22620&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22668&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22668&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23602&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23203&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22814&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22814&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23237&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23237&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;issuekey&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23243&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;YES&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23238&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22702&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22702&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22703&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22703&quot;}}]</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.createlinkedissue.CreateLinkedIssueFunction</arg>
                  <arg name="projectId">11228</arg>
                </function>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="fieldValue">Maintenance Ticket</arg>
                  <arg name="preconditionMode-textValue">DISCARD</arg>
                  <arg name="fieldsList">issuetype</arg>
                </function>
                <function type="class">
                  <arg name="field.existingAttachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="targetIssueTypeDefinedByCfSelection"></arg>
                  <arg name="issueTypeId">13001</arg>
                  <arg name="scopeType">ISSUE_LINKING</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="field.attachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="targetIssueType">SELECTED_ISSUE_TYPE</arg>
                  <arg name="scopeSource-jql"></arg>
                  <arg name="createIssueAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.copyTransitionComment">false</arg>
                  <arg name="targetProjectType">SAME</arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="transitionAttachmentsOperation">copy</arg>
                  <arg name="field.issueAssignTo">ASSIGN_TO_UNASSIGNED</arg>
                  <arg name="targetProjectSelectedCustomField"></arg>
                  <arg name="destination-scopeTarget">LINK_END</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiescreatelinkedissue-function</arg>
                  <arg name="scopeDestination-linkEnd">10003:OUTWARD</arg>
                  <arg name="field.enablingCustomFieldId"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="subFunctions">[{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_21909&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21909&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22600&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22600&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22822&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22822&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22601&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22601&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22603&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22603&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22663&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22663&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22634&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22634&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22651&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22651&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22700&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22700&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22606&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22606&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22607&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22607&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22629&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22629&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22652&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22652&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;description&quot;,&quot;destinationFieldId&quot;:&quot;description&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22627&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22627&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22620&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22620&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22668&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22668&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23602&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23203&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22814&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22814&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23237&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23237&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;issuekey&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23243&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;YES&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23238&quot;}}]</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.createlinkedissue.CreateLinkedIssueFunction</arg>
                  <arg name="projectId">11228</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_23602</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="391" name="Modifica Pianificazione" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">20113</meta>
          <results>
            <unconditional-result old-status="null" status="null" step="2">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="3" name="Accepted By Supplier">
      <meta name="jira.status.id">14328</meta>
      <actions>
<common-action id="111" />
<common-action id="101" />
<common-action id="91" />
<common-action id="121" />
        <action id="481" name="Clona Tkt" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">20401</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">c659704c-9678-4844-9a05-6f3497e391e7</arg>
                <arg name="FIELD_NOTES">YCFgRW5hYmxlZCBvbmx5IGZvciBSZXBhaXIgYW5kIE5ldyBJbnN0YWxsYXRpb24=</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnTWFpbnRlbmFuY2UgVGlja2V0JyB8fCAoaXNzdWUuaXNzdWVUeXBlLm5hbWUgPT0gJ05ldyBJbnN0YWxsYXRpb24nICYmIGNmVmFsdWVzWydPUF9BU1NFVCddICE9IG51bGwpIiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="3">
              <post-functions>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="fieldValue">New Installation</arg>
                  <arg name="preconditionMode-textValue">DISCARD</arg>
                  <arg name="fieldsList">issuetype</arg>
                </function>
                <function type="class">
                  <arg name="field.existingAttachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="targetIssueTypeDefinedByCfSelection"></arg>
                  <arg name="issueTypeId">12301</arg>
                  <arg name="scopeType">ISSUE_LINKING</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="field.attachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="targetIssueType">SELECTED_ISSUE_TYPE</arg>
                  <arg name="scopeSource-jql"></arg>
                  <arg name="createIssueAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.copyTransitionComment">false</arg>
                  <arg name="targetProjectType">SAME</arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="transitionAttachmentsOperation">copy</arg>
                  <arg name="field.issueAssignTo">ASSIGN_TO_UNASSIGNED</arg>
                  <arg name="targetProjectSelectedCustomField"></arg>
                  <arg name="destination-scopeTarget">LINK_END</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiescreatelinkedissue-function</arg>
                  <arg name="scopeDestination-linkEnd">10003:OUTWARD</arg>
                  <arg name="field.enablingCustomFieldId"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="subFunctions">[{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_21909&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21909&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22600&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22600&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22822&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22822&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22601&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22601&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22603&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22603&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22663&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22663&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22634&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22634&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22651&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22651&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22700&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22700&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22606&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22606&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22607&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22607&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22629&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22629&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22652&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22652&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;description&quot;,&quot;destinationFieldId&quot;:&quot;description&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22627&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22627&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22620&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22620&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22668&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22668&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23602&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23203&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22814&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22814&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23237&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23237&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;issuekey&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23243&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;YES&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23238&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22702&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22702&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22703&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22703&quot;}}]</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.createlinkedissue.CreateLinkedIssueFunction</arg>
                  <arg name="projectId">11228</arg>
                </function>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="fieldValue">Maintenance Ticket</arg>
                  <arg name="preconditionMode-textValue">DISCARD</arg>
                  <arg name="fieldsList">issuetype</arg>
                </function>
                <function type="class">
                  <arg name="field.existingAttachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="targetIssueTypeDefinedByCfSelection"></arg>
                  <arg name="issueTypeId">13001</arg>
                  <arg name="scopeType">ISSUE_LINKING</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="field.attachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="targetIssueType">SELECTED_ISSUE_TYPE</arg>
                  <arg name="scopeSource-jql"></arg>
                  <arg name="createIssueAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.copyTransitionComment">false</arg>
                  <arg name="targetProjectType">SAME</arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="transitionAttachmentsOperation">copy</arg>
                  <arg name="field.issueAssignTo">ASSIGN_TO_UNASSIGNED</arg>
                  <arg name="targetProjectSelectedCustomField"></arg>
                  <arg name="destination-scopeTarget">LINK_END</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiescreatelinkedissue-function</arg>
                  <arg name="scopeDestination-linkEnd">10003:OUTWARD</arg>
                  <arg name="field.enablingCustomFieldId"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="subFunctions">[{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_21909&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21909&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22600&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22600&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22822&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22822&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22601&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22601&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22603&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22603&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22663&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22663&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22634&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22634&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22651&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22651&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22700&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22700&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22606&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22606&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22607&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22607&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22629&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22629&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22652&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22652&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;description&quot;,&quot;destinationFieldId&quot;:&quot;description&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22627&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22627&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22620&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22620&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22668&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22668&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23602&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23203&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22814&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22814&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23237&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23237&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;issuekey&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23243&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;YES&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23238&quot;}}]</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.createlinkedissue.CreateLinkedIssueFunction</arg>
                  <arg name="projectId">11228</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_23602</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="681" name="Modifica Pianificazione" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">20113</meta>
          <results>
            <unconditional-result old-status="null" status="null" step="3">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="4" name="Confirmed and Planned">
      <meta name="jira.status.id">14329</meta>
      <actions>
<common-action id="111" />
<common-action id="121" />
<common-action id="931" />
<common-action id="841" />
        <action id="131" name="Intervento Eseguito con Linked" view="fieldscreen">
          <meta name="opsbar-sequence">20</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">19909</meta>
          <restrict-to>
            <conditions type="AND">
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">7bd8f307-ca58-4131-9202-7dc3a5716587</arg>
                <arg name="FIELD_NOTES">YCFgTmV3IEluc3RhbGxhdGlvbg==</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnTmV3IEluc3RhbGxhdGlvbiciLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
              </condition>
              <condition type="class">
                <arg name="issuesComparison">MUST_FIND_ISSUES</arg>
                <arg name="jqlQuery">issuekey={issue.issuekey} AND issueFunction in linkedIssuesOf(&quot;status='Confirmed and planned'&quot;, &quot;relates to&quot;)</arg>
                <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                <arg name="conditionValue">1</arg>
                <arg name="class.name">com.googlecode.jsu.workflow.condition.JqlCondition</arg>
                <arg name="fieldValue"></arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="6">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">3736629c-da1c-49ae-9ff2-eea923bf090d</arg>
                  <arg name="FIELD_NOTES">YCFgU2V0IEFTU0VUIElOU1RBTExBVElPTl9EQVRFID0gT1BfRVhFQ1VUSU9OX0RBVEU=</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5kZWYgYXV0b21hdGljYWxseUNvbmZpcm1lZCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseURvbmUnXSA/IHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlEb25lJ10udG9TdHJpbmcoKSA6IFwiT1BfQVVUT01BVElDQUxMWV9ET05FXCIpWzBdXG5kZWYgbGlua2VkVG9DbG9zZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5saW5rZWRBc3NldHMnXSA/IHByb3BlcnRpZXNbJ2NmLmxpbmtlZEFzc2V0cyddLnRvU3RyaW5nKCkgOiBcIk9QX0xJTktFRF9BU1NFVFNcIilbMF1cbmRlZiBjdXJyZW50QXNzZXQgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXNzZXQnXSA/IHByb3BlcnRpZXNbJ2NmLmFzc2V0J10udG9TdHJpbmcoKSA6IFwiT1BfQVNTRVRcIilbMF1cblxuSXNzdWVJbmRleGluZ1NlcnZpY2UgXHRpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSlcbmRlZiBleGVjdXRpb25EYXRlID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5leGVjdXRpb25EYXRlJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBhc3NldCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXNzZXQnXS50b1N0cmluZygpKVswXVxuXG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcblxuLypTY3JpcHQgVmFyaWFibGVzKi9cbi8vUGVyIHRlc3QgZGEgY29uc29sZVxuLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy0zNzE5XCIpXG5cbmludCBPUEFBID0gcHJvcGVydGllc1snaXNjaGVtYS5hYS5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbmludCBEQk8gPSBwcm9wZXJ0aWVzWydpc2NoZW1hLmRiby5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcblxuLypSaW1vemlvbmUgYWxsZWdhdG8gcmFwcG9ydG8gZGkgaW50ZXJ2ZW50byBhcHBlbmEgY3JlYXRvKi9cbi8qIEdldCBJbnNpZ2h0IElRTCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIGlxbEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLklRTEZhY2FkZVwiKTsgXG5kZWYgaXFsRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKGlxbEZhY2FkZUNsYXNzKTtcblxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xuQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpO1xuZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XG5cbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBUeXBlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xuQ2xhc3Mgb2JqZWN0VHlwZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVGYWNhZGVcIik7XG5kZWYgb2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpO1xuXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgQXR0cmlidXRlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xuQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XG5kZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xuXG5DbGFzcyBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuc2VydmljZXMubW9kZWwuZmFjdG9yeS5PYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeVwiKTtcbmRlZiBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzKTtcblxubG9nLmRlYnVnIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXQpWzBdLmdldElkKClcbmxvZy5kZWJ1ZyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGV4ZWN1dGlvbkRhdGUpXG5cbmRlZiBvYmogPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldClbMF0uZ2V0SWQoKSk7XG5kZWYgaW5zdGFsbGF0aW9uRGF0ZSA9IHByb3BlcnRpZXNbJ2lvYmouaGFyZHdhcmUuaW5zdERhdGUuaWQnXSA/IHByb3BlcnRpZXNbJ2lvYmouaGFyZHdhcmUuaW5zdERhdGUuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpIDogMjk1NlxuZGVmIGF0dHJpYlR5cGUgPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25EYXRlKTsgXG5cbmRlZiBuZXdBdHRyaWIgPSBvYmouY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihhdHRyaWJUeXBlKTtcbmRlZiBuZXdBdHRyaWJWYWx1ZSA9IG5ld0F0dHJpYi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTtcblxuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKT09bnVsbCB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpKXtcbiAgICB0cnkge1xuICAgICAgICBuZXdBdHRyaWJWYWx1ZS5zZXRWYWx1ZShhdHRyaWJUeXBlLCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGV4ZWN1dGlvbkRhdGUpKzEpO1xuICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHtcbiAgICAgICAgbG9nLndhcm4oXCJTRVRJTlNJR0hUVkFMVUU6IFVuYWJsZSB0byBzZXQgYXR0cmlidXRlIFwiICsgYXR0cmliVHlwZSArIFwiIHRvIFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShleGVjdXRpb25EYXRlKSArIFwiLiBFeGl0aW5nLlwiKTtcbiAgICAgICAgbG9nLndhcm4oU0VUSU5TSUdIVFZBTFVFOiB2aWUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGRlZiBhdHRyaWJWYWx1ZXMgPSBuZXdBdHRyaWIuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpO1xuICAgIGF0dHJpYlZhbHVlcy5hZGQobmV3QXR0cmliVmFsdWUpO1xuICAgIG5ld0F0dHJpYi5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKGF0dHJpYlZhbHVlcyk7XG5cbiAgICB0cnkge1xuICAgICAgICBuZXdBdHRyaWIgPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG5ld0F0dHJpYik7XG4gICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSkge1xuICAgICAgICBsb2cud2FybihcIlNFVElOU0lHSFRWQUxVRTogVW5hYmxlIHRvIHNhdmUgY2hhbmdlcy4gRXhpdGluZy5cIik7XG4gICAgICAgIGxvZy53YXJuKFNFVElOU0lHSFRWQUxVRTogdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgbG9nLmluZm8oXCJTRVRJTlNJR0hUVkFMVUU6IFN1Y2Nlc3NmdWxseSBzYXZlZCB2YWx1ZVwiKTtcbn1cblxuZGVmIHVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcbmRlZiBpc3N1ZVNlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZVNlcnZpY2UoKVxuXG5pZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpPT1udWxsIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCkudG9TdHJpbmcoKS5lcXVhbHMoXCJOb1wiKSl7XG4gICAgTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG4gICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgIGxvZy53YXJuIFwiSXNzdWUgY29uIHJlbGF0ZXNJbklzc3VlTGlua1wiXG4gICAgICAgICAgICAvKkVzZWd1aXJlIHRyYW5zYXppb25lIGRpIHN0YXRvIGRlbGxhIHNvdXJjZUlzc3VlKi9cbiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZSA9IGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkZWYgbGlua2VkQXNzZXQgPSBsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1cnJlbnRBc3NldClbMF1cbiAgICAgICAgICAgIC8vbG9nLmRlYnVnIFwibGlua2VkSXNzdWU6IFwiICsgbGlua2VkSXNzdWVcbiAgICAgICAgICAgIC8vbG9nLmRlYnVnIFwiY3VycmVudCBhc3NldDogXCIgKyBhc3NldFxuICAgICAgICAgICAgZm9yIChhIGluIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGlua2VkVG9DbG9zZSkpe1xuICAgICAgICAgICAgICAgIC8vbG9nLmRlYnVnIFwiYXNzZXQgc2VsZXppb25hdGk6IFwiICsgYVxuICAgICAgICAgICAgICAgIGlmIChhID09IGxpbmtlZEFzc2V0KXtcbiAgICAgICAgICAgICAgICAgICAgLy9sb2cuZGVidWcgXCJhID09IGFzc2V0XCJcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIG9iaiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0KVswXS5nZXRJZCgpKTtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFsbGF0aW9uRGF0ZSA9IHByb3BlcnRpZXNbJ2lvYmouaGFyZHdhcmUuaW5zdERhdGUuaWQnXSA/IHByb3BlcnRpZXNbJ2lvYmouaGFyZHdhcmUuaW5zdERhdGUuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpIDogMjk1NlxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJUeXBlID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uRGF0ZSk7IFxuXG4gICAgICAgICAgICAgICAgICAgIG5ld0F0dHJpYiA9IG9iai5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKGF0dHJpYlR5cGUpO1xuICAgICAgICAgICAgICAgICAgICBuZXdBdHRyaWJWYWx1ZSA9IG5ld0F0dHJpYi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTtcblxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3QXR0cmliVmFsdWUuc2V0VmFsdWUoYXR0cmliVHlwZSwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShleGVjdXRpb25EYXRlKSsxKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJTRVRJTlNJR0hUVkFMVUU6IFVuYWJsZSB0byBzZXQgYXR0cmlidXRlIFwiICsgYXR0cmliVHlwZSArIFwiIHRvIFwiICsgbGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShleGVjdXRpb25EYXRlKSArIFwiLiBFeGl0aW5nLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFNFVElOU0lHSFRWQUxVRTogdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJWYWx1ZXMgPSBuZXdBdHRyaWIuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpO1xuICAgICAgICAgICAgICAgICAgICBhdHRyaWJWYWx1ZXMuYWRkKG5ld0F0dHJpYlZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3QXR0cmliLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoYXR0cmliVmFsdWVzKTtcblxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3QXR0cmliID0gb2JqZWN0RmFjYWRlLnN0b3JlT2JqZWN0QXR0cmlidXRlQmVhbihuZXdBdHRyaWIpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlNFVElOU0lHSFRWQUxVRTogVW5hYmxlIHRvIHNhdmUgY2hhbmdlcy4gRXhpdGluZy5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihTRVRJTlNJR0hUVkFMVUU6IHZpZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxvZy5pbmZvKFwiU0VUSU5TSUdIVFZBTFVFOiBTdWNjZXNzZnVsbHkgc2F2ZWQgdmFsdWVcIik7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgTGlzdDxJc3N1ZUxpbms+IGFsbE91dElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgIGxvZy53YXJuIFwiSXNzdWUgY29uIHJlbGF0ZXNPdXRJc3N1ZUxpbmtcIlxuICAgICAgICAgICAgLypFc2VndWlyZSB0cmFuc2F6aW9uZSBkaSBzdGF0byBkZWxsYSBkZXN0aW5hdGlvbklzc3VlKi9cbiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZSA9IGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpXG5cdFx0XHRkZWYgbGlua2VkQXNzZXQgPSBsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1cnJlbnRBc3NldClbMF1cbiAgICAgICAgICAgIC8vbG9nLmRlYnVnIFwibGlua2VkSXNzdWU6IFwiICsgbGlua2VkSXNzdWVcbiAgICAgICAgICAgIC8vbG9nLmRlYnVnIFwiY3VycmVudCBhc3NldDogXCIgKyBhc3NldFxuICAgICAgICAgICAgZm9yIChhIGluIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGlua2VkVG9DbG9zZSkpe1xuICAgICAgICAgICAgICAgIC8vbG9nLmRlYnVnIFwiYXNzZXQgc2VsZXppb25hdGk6IFwiICsgYVxuICAgICAgICAgICAgICAgIGlmIChhID09IGxpbmtlZEFzc2V0KXtcbiAgICAgICAgICAgICAgICAgICAgLy9sb2cuZGVidWcgXCJhID09IGFzc2V0XCJcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIG9iaiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0KVswXS5nZXRJZCgpKTtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFsbGF0aW9uRGF0ZSA9IHByb3BlcnRpZXNbJ2lvYmouaGFyZHdhcmUuaW5zdERhdGUuaWQnXSA/IHByb3BlcnRpZXNbJ2lvYmouaGFyZHdhcmUuaW5zdERhdGUuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpIDogMjk1NlxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJUeXBlID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uRGF0ZSk7IFxuXG4gICAgICAgICAgICAgICAgICAgIG5ld0F0dHJpYiA9IG9iai5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKGF0dHJpYlR5cGUpO1xuICAgICAgICAgICAgICAgICAgICBuZXdBdHRyaWJWYWx1ZSA9IG5ld0F0dHJpYi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTtcblxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3QXR0cmliVmFsdWUuc2V0VmFsdWUoYXR0cmliVHlwZSwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShleGVjdXRpb25EYXRlKSsxKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJTRVRJTlNJR0hUVkFMVUU6IFVuYWJsZSB0byBzZXQgYXR0cmlidXRlIFwiICsgYXR0cmliVHlwZSArIFwiIHRvIFwiICsgbGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShleGVjdXRpb25EYXRlKSArIFwiLiBFeGl0aW5nLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFNFVElOU0lHSFRWQUxVRTogdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJWYWx1ZXMgPSBuZXdBdHRyaWIuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpO1xuICAgICAgICAgICAgICAgICAgICBhdHRyaWJWYWx1ZXMuYWRkKG5ld0F0dHJpYlZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3QXR0cmliLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoYXR0cmliVmFsdWVzKTtcblxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3QXR0cmliID0gb2JqZWN0RmFjYWRlLnN0b3JlT2JqZWN0QXR0cmlidXRlQmVhbihuZXdBdHRyaWIpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlNFVElOU0lHSFRWQUxVRTogVW5hYmxlIHRvIHNhdmUgY2hhbmdlcy4gRXhpdGluZy5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihTRVRJTlNJR0hUVkFMVUU6IHZpZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxvZy5pbmZvKFwiU0VUSU5TSUdIVFZBTFVFOiBTdWNjZXNzZnVsbHkgc2F2ZWQgdmFsdWVcIik7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfVxufVxuIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">9b6405df-608f-4326-9959-e675d5b0c407</arg>
                  <arg name="FIELD_NOTES">YCFgIE9QIEVtYWlsIE5vdGlmaWNhdGlvbjogVEtUX0VYRUNVVEVEIC0gTWFudGVudXRhIGNvbWUgcG9zdCBmdW5jdGlvbiBwZXIgbm9uIGdlbmVyYXJlIGJsb2NjaGkgYWwgZm9ybml0b3JlIGxlZ2F0aSBhIGVycm9yaSBkaSBpbnZpbyBtYWlsIGludGVybmUg</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnlcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5kZWYgcmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5cbmRlZiBib2R5X3JlcSA9IFtcblx0XCJ0ZW1wbGF0ZU5hbWVcIjogXCJUS1RfRVhFQ1VURURcIixcblx0XCJwZWNcIjogZmFsc2UsXG4gICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXlcbl1cblxuZGVmIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL3RyYW5zYWN0aW9uL21haWwvc2VuZFwiXG5VUkwgdXJsXG51cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG5cbkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbmNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5jb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG5sb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbmNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG5sb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG5sb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG5sb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG5sb2cuZGVidWcgXCJnZXRSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG5cbiIsInNjcmlwdFBhdGgiOm51bGx9</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">64d02ce2-a8a1-49da-9ae5-dc0c74e1252c</arg>
                  <arg name="FIELD_NOTES">YCFgT1A6IE5ldyBJbnN0YWxsYXRpb24gLSBDaGVjayBsaW5rZWRUaWNrZXRzICYgRmFzdC1UcmFuc2FjdCB0aGVt</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5kZWYgYXV0b21hdGljYWxseUNvbmZpcm1lZCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseURvbmUnXSA/IHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlEb25lJ10udG9TdHJpbmcoKSA6IFwiT1BfQVVUT01BVElDQUxMWV9ET05FXCIpWzBdXG5kZWYgbGlua2VkVG9DbG9zZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5saW5rZWRBc3NldHMnXSA/IHByb3BlcnRpZXNbJ2NmLmxpbmtlZEFzc2V0cyddLnRvU3RyaW5nKCkgOiBcIk9QX0xJTktFRF9BU1NFVFNcIilbMF1cbmRlZiBjdXJyZW50QXNzZXQgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXNzZXQnXSA/IHByb3BlcnRpZXNbJ2NmLmFzc2V0J10udG9TdHJpbmcoKSA6IFwiT1BfQVNTRVRcIilbMF1cbmRlZiBleGVjdXRpb25EYXRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmV4ZWN1dGlvbkRhdGUnXSA/IHByb3BlcnRpZXNbJ2NmLmV4ZWN1dGlvbkRhdGUnXS50b1N0cmluZygpIDogXCJPUF9FWEVDVVRJT05fREFURVwiKVswXVxuSXNzdWVJbmRleGluZ1NlcnZpY2UgXHRpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSlcblxuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL2lzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTQwMjNcIilcbmxvZy53YXJuIFwiJHtpc3N1ZS5rZXl9IFRyYW5zYXppb25lIFRLVCBFU0VHVUlUTyAtIFBvc3QgRnVuY3Rpb24gY2hlY2sgbGlua2VkSXNzdWVzXCJcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuZGVmIGJvZHlfcmVxID0gW11cblxuLypERVYqL1xuaW50IENMT1NFX1RLVCA9IHByb3BlcnRpZXNbJ3dmLnRyLnRrdEVzZWd1aXRvJ10gPyBwcm9wZXJ0aWVzWyd3Zi50ci50a3RFc2VndWl0byddLnRvSW50ZWdlcigpIDogMTMxXG5pbnQgQ0xPU0VfVEtUX05PX0xJTktFRCA9IHByb3BlcnRpZXNbJ3dmLnRyLnRrdEVzZWd1aXRvTm9MaW5rZWQnXSA/IHByb3BlcnRpZXNbJ3dmLnRyLnRrdEVzZWd1aXRvTm9MaW5rZWQnXS50b0ludGVnZXIoKSA6IDYzMVxuXG5kZWYgdXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuZGVmIGlzc3VlU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlU2VydmljZSgpXG5cbi8qU2UgZXNlZ3VvIGxhIGNvbmZpcm0gdG8gY3VzdG9tZXIgc3UgdW4gdGlja2V0IGNvbiAxIG8gKyB0aWNrZXQgY29sbGVnYXRpLCB2ZXJpZmljbyBlIHNwb3N0byBpbiBhdXRvbWF0aWNvIGdsaSBldmVudHVhbGkgdGlja2V0IGNvbGxlZ2F0aSovXG5sb2cud2FybiBcInZlcmlmaWNvIGUgc3Bvc3RvIGluIGF1dG9tYXRpY28gZ2xpIGV2ZW50dWFsaSB0aWNrZXQgY29sbGVnYXRpXCJcbmxvZy53YXJuIFwibGlua2VkIHRvIGJlIGNsb3NlZDogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxpbmtlZFRvQ2xvc2UpXG5cbmxvZy5kZWJ1ZyBpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5nZXROYW1lKCkgPT0gcHJvcGVydGllc1snaXQubmV3SW5zdGFsbGF0aW9uJ10udG9TdHJpbmcoKVxubG9nLmRlYnVnIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCk9PW51bGxcbmxvZy5kZWJ1ZyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLnRvU3RyaW5nKCkuZXF1YWxzKFwiTm9cIilcblxuaWYoaXNzdWUuZ2V0SXNzdWVUeXBlKCkuZ2V0TmFtZSgpID09IHByb3BlcnRpZXNbJ2l0Lm5ld0luc3RhbGxhdGlvbiddLnRvU3RyaW5nKCkgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKT09bnVsbCB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLnRvU3RyaW5nKCkuZXF1YWxzKFwiTm9cIikpe1xuICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKVxuICAgIGZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbEluSXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHtcbiAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcblxuICAgICAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICBsb2cud2FybiBcIklzc3VlIGNvbiByZWxhdGVzSW5Jc3N1ZUxpbmtcIlxuICAgICAgICAgICAgLypFc2VndWlyZSB0cmFuc2F6aW9uZSBkaSBzdGF0byBkZWxsYSBzb3VyY2VJc3N1ZSovXG4gICAgICAgICAgICBkZWYgbGlua2VkSXNzdWUgPSBpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KClcbiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZVN0YXR1cyA9IGxpbmtlZElzc3VlLmdldFN0YXR1cygpXG4gICAgICAgICAgICBkZWYgdHJhbnNpdGlvbklkXG4gICAgICAgICAgICBpZihsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lID09IChwcm9wZXJ0aWVzWyd3Zi5jb25maXJtZWRBbmRQbGFubmVkJ10gPyBwcm9wZXJ0aWVzWyd3Zi5jb25maXJtZWRBbmRQbGFubmVkJ10udG9TdHJpbmcoKSA6IFwiQ29uZmlybWVkIGFuZCBQbGFubmVkXCIpICl7XG4gICAgICAgICAgICAgICAgLypEYSBjb25zaWRlcmFyZSBzb2xvIHNlIGwnYXNzZXQgY29sbGVnYXRvIFx1MDBlOCBuZWxsYSBsaXN0YSBkaSBxdWVsbGkgc2NlbHRpKi9cbiAgICAgICAgICAgICAgICBkZWYgYXNzZXQgPSBsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1cnJlbnRBc3NldClbMF1cbiAgICAgICAgICAgICAgICAvL2xvZy5kZWJ1ZyBcImxpbmtlZElzc3VlOiBcIiArIGxpbmtlZElzc3VlXG4gICAgICAgICAgICAgICAgLy9sb2cuZGVidWcgXCJjdXJyZW50IGFzc2V0OiBcIiArIGFzc2V0XG4gICAgICAgICAgICAgICAgZm9yIChhIGluIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGlua2VkVG9DbG9zZSkpe1xuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJhc3NldCBzZWxlemlvbmF0aTogXCIgKyBhXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImFzc2V0IGNvcnJlbnRlOiBcIiArIGFzc2V0XG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImVxdWFscz8gXCIgKyBhLnRvU3RyaW5nKCkuZXF1YWxzKGFzc2V0LnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAgICAgICAgIGlmIChhLnRvU3RyaW5nKCkuZXF1YWxzKGFzc2V0LnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImEgPT0gYXNzZXRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbklkPUNMT1NFX1RLVFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYodHJhbnNpdGlvbklkPT1DTE9TRV9US1Qpe1xuICAgICAgICAgICAgICAgIC8vIFByZXBhcmUgb3VyIGlucHV0IGZvciB0aGUgdHJhbnNpdGlvblxuICAgICAgICAgICAgICAgIGRlZiBpc3N1ZUlucHV0UGFyYW1ldGVycyA9IGlzc3VlU2VydmljZS5uZXdJc3N1ZUlucHV0UGFyYW1ldGVycygpXG4gICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7XG4gICAgICAgICAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayh0cnVlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL2RlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpXG4gICAgICAgICAgICAgICAgLy9Db21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gXCJZZXNcIiB9XG4gICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksIFwiWWVzXCIpIFxuICAgICAgICAgICAgICAgIC8vbG9nLndhcm4gXCJpc3N1ZUlucHV0UGFyYW1ldGVyczogXCIgKyBpc3N1ZUlucHV0UGFyYW1ldGVyc1xuICAgICAgICAgICAgICAgIGRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlXG5cbiAgICAgICAgICAgICAgICBkZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLmdldFJlbGV2YW50Q29uZmlnKGxpbmtlZElzc3VlKVxuICAgICAgICAgICAgICAgIGxvZy53YXJuIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcbiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuXHRcdFx0XHRleGVjdXRpb25EYXRlLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGV4ZWN1dGlvbkRhdGUpKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChsaW5rZWRJc3N1ZSlcbiAgICAgICAgICAgICAgICBsb2cud2FybiBcIlVwZGF0ZWQgY3VzdG9tZmllbGQgLSBpc3N1ZSBsaW5rYXRhXCJcblxuICAgICAgICAgICAgICAgIC8vZGVmIHZhbGlkYXRpb25SZXN1bHQgPSBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKVxuICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgdHJhbnNpdGlvblxuICAgICAgICAgICAgICAgICAgICBkZWYgaXNzdWVSZXN1bHQgPSBpc3N1ZVNlcnZpY2UudHJhbnNpdGlvbih1c2VyLCBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEgaXNzdWVSZXN1bHQuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIkZhaWxlZCB0byB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiVHJhbnNhemlvbmUgZmF0dGEgNzkgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSwgJHtsaW5rZWRJc3N1ZS5zdGF0dXN9XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1B1bGl6aWEgY2FjaGUgdGlja2V0IGNvbGxlZ2F0b1xuICAgICAgICAgICAgICAgICAgICAgICAgLyogUkVTVCBBUEkgcGVyIEdlbmVyYXppb25lIEFsbGVnYXRvIFJhcHBvcnRvIGRpIEludGVydmVudG8gKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RNZXRob2QgPSBcIkdFVFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgLypTY3JpcHQgVmFyaWFibGVzKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vUGVyIHRlc3QgZGEgY29uc29sZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIk9QVVQtMTQwNjJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInJlcXVlc3RNZXRob2Q6IFwiICsgcmVxdWVzdE1ldGhvZFxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vY2xlYXJDYWNoZS90aWNrZXRrZXkvXCIgKyBsaW5rZWRJc3N1ZS5rZXlcbiAgICAgICAgICAgICAgICAgICAgICAgIFVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgICAgICAgICAgICAgICAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259XCIpXG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiVHJ5IHRyYW5zaXRpb24gTk8gbGlua2VkXCIpXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb25JZD1DTE9TRV9US1RfTk9fTElOS0VEXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEgaXNzdWVSZXN1bHQuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJGYWlsZWQgdG8gdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn1cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiVHJhbnNhemlvbmUgZmF0dGEgNzkgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSwgJHtsaW5rZWRJc3N1ZS5zdGF0dXN9XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9QdWxpemlhIGNhY2hlIHRpY2tldCBjb2xsZWdhdG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBSRVNUIEFQSSBwZXIgR2VuZXJhemlvbmUgQWxsZWdhdG8gUmFwcG9ydG8gZGkgSW50ZXJ2ZW50byAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RNZXRob2QgPSBcIkdFVFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qU2NyaXB0IFZhcmlhYmxlcyovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIk9QVVQtMTQwNjJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJyZXF1ZXN0TWV0aG9kOiBcIiArIHJlcXVlc3RNZXRob2RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvYXV0b21hdGlvbi9jbGVhckNhY2hlL3RpY2tldGtleS9cIiArIGxpbmtlZElzc3VlLmtleVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIkNvdWxkIG5vdCB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgTGlzdDxJc3N1ZUxpbms+IGFsbE91dElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgIGxvZy53YXJuIFwiSXNzdWUgY29uIHJlbGF0ZXNPdXRJc3N1ZUxpbmtcIlxuICAgICAgICAgICAgLypFc2VndWlyZSB0cmFuc2F6aW9uZSBkaSBzdGF0byBkZWxsYSBkZXN0aW5hdGlvbklzc3VlKi9cbiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZSA9IGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpXG4gICAgICAgICAgICBkZWYgbGlua2VkSXNzdWVTdGF0dXMgPSBsaW5rZWRJc3N1ZS5nZXRTdGF0dXMoKVxuICAgICAgICAgICAgZGVmIHRyYW5zaXRpb25JZFxuICAgICAgICAgICAgbG9nLndhcm4gXCJsaW5rZWRJc3N1ZTogXCIgKyBsaW5rZWRJc3N1ZVxuICAgICAgICAgICAgbG9nLndhcm4gXCJsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lOiBcIiArIGxpbmtlZElzc3VlU3RhdHVzLm5hbWVcbiAgICAgICAgICAgIGlmKGxpbmtlZElzc3VlU3RhdHVzLm5hbWUgPT0gKHByb3BlcnRpZXNbJ3dmLmNvbmZpcm1lZEFuZFBsYW5uZWQnXSA/IHByb3BlcnRpZXNbJ3dmLmNvbmZpcm1lZEFuZFBsYW5uZWQnXS50b1N0cmluZygpIDogXCJDb25maXJtZWQgYW5kIFBsYW5uZWRcIikpe1xuICAgICAgICAgICAgICAgIC8qRGEgY29uc2lkZXJhcmUgc29sbyBzZSBsJ2Fzc2V0IGNvbGxlZ2F0byBcdTAwZTggbmVsbGEgbGlzdGEgZGkgcXVlbGxpIHNjZWx0aSovXG4gICAgICAgICAgICAgICAgZGVmIGFzc2V0ID0gbGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXJyZW50QXNzZXQpWzBdXG4gICAgICAgICAgICAgICAgLy9sb2cuZGVidWcgXCJsaW5rZWRJc3N1ZTogXCIgKyBsaW5rZWRJc3N1ZVxuICAgICAgICAgICAgICAgIC8vbG9nLmRlYnVnIFwiY3VycmVudCBhc3NldDogXCIgKyBhc3NldFxuICAgICAgICAgICAgICAgIGZvciAoYSBpbiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxpbmtlZFRvQ2xvc2UpKXtcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiYXNzZXQgc2VsZXppb25hdGk6IFwiICsgYVxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJhc3NldCBjb3JyZW50ZTogXCIgKyBhc3NldFxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJlcXVhbHM/IFwiICsgYS50b1N0cmluZygpLmVxdWFscyhhc3NldC50b1N0cmluZygpKVxuICAgICAgICAgICAgICAgICAgICBpZiAoYS50b1N0cmluZygpLmVxdWFscyhhc3NldC50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJhID09IGFzc2V0XCJcbiAgICAgICAgICAgICAgICBcdFx0dHJhbnNpdGlvbklkPUNMT1NFX1RLVFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZih0cmFuc2l0aW9uSWQ9PUNMT1NFX1RLVCl7XG4gICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uXG4gICAgICAgICAgICAgICAgZGVmIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKClcbiAgICAgICAgICAgICAgICBpc3N1ZUlucHV0UGFyYW1ldGVycy53aXRoIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0U2tpcFNjcmVlbkNoZWNrKHRydWUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSlcbiAgICAgICAgICAgICAgICAvL0NvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICAgICAgICAgICAgICAvL2lzc3VlSW5wdXRQYXJhbWV0ZXJzLmFkZEN1c3RvbUZpZWxkVmFsdWUoZmllbGRDb25maWcuZ2V0SWQoKSwgXCJZZXNcIikgXG5cbiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcbiAgICAgICAgICAgICAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBsaW5rZWRJc3N1ZVxuXG4gICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNvbmZpcm1lZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSlcbiAgICAgICAgICAgICAgICBsb2cud2FybiBcImZpZWxkQ29uZmlnOiBcIiArIGZpZWxkQ29uZmlnXG4gICAgICAgICAgICAgICAgZGVmIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gXCJZZXNcIiB9XG4gICAgICAgICAgICAgICAgYXV0b21hdGljYWxseUNvbmZpcm1lZC51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcblx0XHRcdFx0ZXhlY3V0aW9uRGF0ZS51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKSwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShleGVjdXRpb25EYXRlKSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChsaW5rZWRJc3N1ZSlcbiAgICAgICAgICAgICAgICBsb2cud2FybiBcIlVwZGF0ZWQgY3VzdG9tZmllbGQgLSBpc3N1ZSBsaW5rYXRhXCJcblxuICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgdHJhbnNpdGlvblxuICAgICAgICAgICAgICAgICAgICBkZWYgaXNzdWVSZXN1bHQgPSBpc3N1ZVNlcnZpY2UudHJhbnNpdGlvbih1c2VyLCBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEgaXNzdWVSZXN1bHQuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIkZhaWxlZCB0byB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiVHJhbnNhemlvbmUgZmF0dGEgMTIyICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn0sICR7bGlua2VkSXNzdWUuc3RhdHVzfVwiKVxuXHRcdFx0XHRcdFx0Ly9QdWxpemlhIGNhY2hlIHRpY2tldCBjb2xsZWdhdG9cblx0XHRcdFx0XHRcdC8qIFJFU1QgQVBJIHBlciBHZW5lcmF6aW9uZSBBbGxlZ2F0byBSYXBwb3J0byBkaSBJbnRlcnZlbnRvICovXG5cdFx0XHRcdFx0XHRyZXF1ZXN0TWV0aG9kID0gXCJHRVRcIjtcblx0XHRcdFx0XHRcdC8qU2NyaXB0IFZhcmlhYmxlcyovXG5cdFx0XHRcdFx0XHQvL1BlciB0ZXN0IGRhIGNvbnNvbGVcblx0XHRcdFx0XHRcdC8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJPUFVULTE0MDYyXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJyZXF1ZXN0TWV0aG9kOiBcIiArIHJlcXVlc3RNZXRob2Rcblx0XHRcdFx0XHRcdGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL2NsZWFyQ2FjaGUvdGlja2V0a2V5L1wiICsgbGlua2VkSXNzdWUua2V5XG5cdFx0XHRcdFx0XHRVUkwgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuXHRcdFx0XHRcdFx0SHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcblx0XHRcdFx0XHRcdGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcblx0XHRcdFx0XHRcdGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuXHRcdFx0XHRcdFx0Y29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG5cdFx0XHRcdFx0XHRjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuXHRcdFx0XHRcdFx0Y29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuXHRcdFx0XHRcdFx0Y29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcblx0XHRcdFx0XHRcdGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcblx0XHRcdFx0XHRcdGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG5cdFx0XHRcdFx0XHRcdGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcblx0XHRcdFx0XHRcdFx0bG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuXHRcdFx0XHRcdFx0XHRsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG5cdFx0XHRcdFx0XHR9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIkNvdWxkIG5vdCB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlRyeSB0cmFuc2l0aW9uIE5PIGxpbmtlZFwiKVxuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9Q0xPU0VfVEtUX05PX0xJTktFRFxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSB0cmFuc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWYgaXNzdWVSZXN1bHQgPSBpc3N1ZVNlcnZpY2UudHJhbnNpdGlvbih1c2VyLCBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlRyYW5zYXppb25lIGZhdHRhIDc5ICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn0sICR7bGlua2VkSXNzdWUuc3RhdHVzfVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vUHVsaXppYSBjYWNoZSB0aWNrZXQgY29sbGVnYXRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogUkVTVCBBUEkgcGVyIEdlbmVyYXppb25lIEFsbGVnYXRvIFJhcHBvcnRvIGRpIEludGVydmVudG8gKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0TWV0aG9kID0gXCJHRVRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKlNjcmlwdCBWYXJpYWJsZXMqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vUGVyIHRlc3QgZGEgY29uc29sZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJPUFVULTE0MDYyXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwicmVxdWVzdE1ldGhvZDogXCIgKyByZXF1ZXN0TWV0aG9kXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vY2xlYXJDYWNoZS90aWNrZXRrZXkvXCIgKyBsaW5rZWRJc3N1ZS5rZXlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBVUkwgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJDb3VsZCBub3QgdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmVycm9yQ29sbGVjdGlvbn1cIilcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfVxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_23244</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="491" name="Clona Tkt" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">20401</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">c659704c-9678-4844-9a05-6f3497e391e7</arg>
                <arg name="FIELD_NOTES">YCFgRW5hYmxlZCBvbmx5IGZvciBSZXBhaXIgYW5kIE5ldyBJbnN0YWxsYXRpb24=</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnTWFpbnRlbmFuY2UgVGlja2V0JyB8fCAoaXNzdWUuaXNzdWVUeXBlLm5hbWUgPT0gJ05ldyBJbnN0YWxsYXRpb24nICYmIGNmVmFsdWVzWydPUF9BU1NFVCddICE9IG51bGwpIiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="4">
              <post-functions>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="fieldValue">New Installation</arg>
                  <arg name="preconditionMode-textValue">DISCARD</arg>
                  <arg name="fieldsList">issuetype</arg>
                </function>
                <function type="class">
                  <arg name="field.existingAttachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="targetIssueTypeDefinedByCfSelection"></arg>
                  <arg name="issueTypeId">12301</arg>
                  <arg name="scopeType">ISSUE_LINKING</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="field.attachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="targetIssueType">SELECTED_ISSUE_TYPE</arg>
                  <arg name="scopeSource-jql"></arg>
                  <arg name="createIssueAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.copyTransitionComment">false</arg>
                  <arg name="targetProjectType">SAME</arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="transitionAttachmentsOperation">copy</arg>
                  <arg name="field.issueAssignTo">ASSIGN_TO_UNASSIGNED</arg>
                  <arg name="targetProjectSelectedCustomField"></arg>
                  <arg name="destination-scopeTarget">LINK_END</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiescreatelinkedissue-function</arg>
                  <arg name="scopeDestination-linkEnd">10003:OUTWARD</arg>
                  <arg name="field.enablingCustomFieldId"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="subFunctions">[{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_21909&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21909&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22600&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22600&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22822&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22822&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22601&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22601&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22603&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22603&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22663&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22663&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22634&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22634&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22651&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22651&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22700&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22700&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22606&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22606&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22607&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22607&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22629&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22629&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22652&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22652&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;description&quot;,&quot;destinationFieldId&quot;:&quot;description&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22627&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22627&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22620&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22620&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22668&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22668&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23602&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23203&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22814&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22814&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23237&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23237&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;issuekey&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23243&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;YES&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23238&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22702&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22702&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22703&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22703&quot;}}]</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.createlinkedissue.CreateLinkedIssueFunction</arg>
                  <arg name="projectId">11228</arg>
                </function>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="fieldValue">Maintenance Ticket</arg>
                  <arg name="preconditionMode-textValue">DISCARD</arg>
                  <arg name="fieldsList">issuetype</arg>
                </function>
                <function type="class">
                  <arg name="field.existingAttachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="targetIssueTypeDefinedByCfSelection"></arg>
                  <arg name="issueTypeId">13001</arg>
                  <arg name="scopeType">ISSUE_LINKING</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="field.attachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="targetIssueType">SELECTED_ISSUE_TYPE</arg>
                  <arg name="scopeSource-jql"></arg>
                  <arg name="createIssueAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.copyTransitionComment">false</arg>
                  <arg name="targetProjectType">SAME</arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="transitionAttachmentsOperation">copy</arg>
                  <arg name="field.issueAssignTo">ASSIGN_TO_UNASSIGNED</arg>
                  <arg name="targetProjectSelectedCustomField"></arg>
                  <arg name="destination-scopeTarget">LINK_END</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiescreatelinkedissue-function</arg>
                  <arg name="scopeDestination-linkEnd">10003:OUTWARD</arg>
                  <arg name="field.enablingCustomFieldId"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="subFunctions">[{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_21909&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21909&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22600&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22600&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22822&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22822&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22601&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22601&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22603&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22603&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22663&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22663&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22634&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22634&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22651&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22651&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22700&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22700&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22606&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22606&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22607&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22607&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22629&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22629&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22652&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22652&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;description&quot;,&quot;destinationFieldId&quot;:&quot;description&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22627&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22627&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22620&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22620&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22668&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22668&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23602&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23203&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22814&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22814&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23237&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23237&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;issuekey&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23243&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;YES&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23238&quot;}}]</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.createlinkedissue.CreateLinkedIssueFunction</arg>
                  <arg name="projectId">11228</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_23602</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="411" name="Modifica Pianificazione" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">20113</meta>
          <results>
            <unconditional-result old-status="Not Done" status="Done" step="4">
              <post-functions>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdateissuestatus-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowcreatecomment-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowgeneratechangehistory-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowreindexissue-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="441" name="Modifica Impianto">
          <meta name="opsbar-sequence">50</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <results>
            <unconditional-result old-status="Not Done" status="Done" step="4">
              <post-functions>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdateissuestatus-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowcreatecomment-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowgeneratechangehistory-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowreindexissue-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="571" name="Intervento Completato" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">19910</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">185e2a49-1a31-4832-a832-448398454451</arg>
                <arg name="FIELD_NOTES">YCFgRGEgYWJpbGl0YXJlIHBlciBNYWludGVuYW5jZSBhIGNvcnBvID8hPw==</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJmYWxzZSIsInNjcmlwdFBhdGgiOm51bGx9</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">9c177ee6-0134-44a2-9497-0109ef2aa809</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIFJlcXVpcmVkIEZpZWxkcyAtIHNvbG8gZXJyb3JzLCBubyB3YXJuaW5ncw==</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5cblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5kZWYgQ2F0ZWdvcnkgbG9nID0gQ2F0ZWdvcnkuZ2V0SW5zdGFuY2UoXCJjb20ub25yZXNvbHZlLmppcmEuZ3Jvb3Z5LlBvc3RGdW5jdGlvblwiKVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlIGlzc3VlID0gaXNzdWVcblxubG9nLmRlYnVnIFwiVHJhbnNhemlvbmUgQ29tcGxldGUgLSBQcmltbyB2YWxpZGF0b3JcIlxubG9nLmRlYnVnIFwiVHJhbnNhemlvbmUgQ29tcGxldGUgLSBQcmltbyB2YWxpZGF0b3IgLSBJc3N1ZTogXCIgKyBpc3N1ZVxuXG5kZWYgZXJyb3JzID0gZmFsc2VcbmRlZiB3YXJuaW5ncyA9IGZhbHNlXG5cbmRlZiBhdXRvbWF0aWNhbGx5Q2xvc2VkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q2xvc2VkJ10udG9TdHJpbmcoKSlbMF1cblxuZGVmIGFzc2V0ID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hc3NldCddLnRvU3RyaW5nKCkpWzBdXG5kZWYgYXNzZXRTdGF0dXNQcmUgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmFzc2V0U3RhdHVzUHJlJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBhc3NldFN0YXR1c1Bvc3QgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmFzc2V0U3RhdHVzUG9zdCddLnRvU3RyaW5nKCkpWzBdXG5kZWYgcmlzayA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yucmlza09uc2l0ZSddLnRvU3RyaW5nKCkpWzBdXG5kZWYgcmlza0Rlc2NyaXB0aW9uID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5yaXNrRGVzY3JpcHRpb24nXS50b1N0cmluZygpKVswXVxuZGVmIGN1c3RTaWduYXR1cmUgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmN1c3RvbWVyU2lnbmF0dXJlJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBjdXN0UmVmID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5jdXN0Q29udGFjdE9uc2l0ZSddLnRvU3RyaW5nKCkpWzBdXG4vL2RlZiB0ZWNoU2lnbmF0dXJlID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi50ZWNobmljaWFuU2lnbmF0dXJlJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBrbXMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmttcyddLnRvU3RyaW5nKCkpWzBdXG5kZWYgdHJhdmVsSCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YudHJhdmVsSG91cnMnXS50b1N0cmluZygpKVswXVxuZGVmIGV4ZWN1dGlvbkRhdGUgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmV4ZWN1dGlvbkRhdGUnXS50b1N0cmluZygpKVswXVxuZGVmIHRlY2hzT25zaXRlID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi50ZWNobmljaWFuc09uc2l0ZSddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiByZXBNYXRlcmlhbHMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJlcGxhY2VkTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF1cbmRlZiByZXFNYXRlcmlhbHMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJlcXVpcmVkTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF1cblxuZGVmIHRyYW5zaXRpb25DaGVjayA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY2hlY2tBbmRDb25maXJtJ10udG9TdHJpbmcoKSlbMF1cblxuZGVmIGx1bXBTdW1QcmljZSA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YubHVtcFN1bVByaWNlJ10udG9TdHJpbmcoKSlbMF1cblxuZGVmIGVycm9yTWFuZGF0b3J5RmllbGRzID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgZXJyb3JKb2JTdGFydGVkQ29tcGxldGVkRmllbGRzID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgZXJyb3JUZWNoU2lnbmF0dXJlRmllbGRzID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgd2FybmluZ0VtcHR5RmllbGRzID0gbmV3IEFycmF5TGlzdCgpXG5cbi8qT1AtMTAzODogRXNlZ3VvIGxhIHZlcmlmaWNhIGRlaSBjYW1waSBvYmJsaWdhdG9yaSBzb2xvIHNlIGlsIHRpY2tldCBzdSBjdWkgc3RvIGVzZWd1ZW5kbyBsYSB0cmFuc2F6aW9uZSBub24gXHUwMGU4IHN0YXRvIGNoaXVzbyBpbiBhdXRvbWF0aWNvIGRhbCBzaXN0ZW1hKi9cbmxvZy5kZWJ1ZyBcImlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCk6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKVxubG9nLmRlYnVnIFwiY2hlY2s6IFwiICsgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIilcbmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCk9PW51bGwgfHwgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIikpe1xuICAgIC8vT1BBQV9MVU1QX1NVTV9QUklDRVxuICAgIGlmKCFpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0LnBsYW5uZWRNYWludGVuYW5jZSddKSAmJiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUHJpY2UpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUHJpY2UpID09IFwiXCIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUHJpY2UpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKSl7XG4gICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLmx1bXBTdW1QcmljZSddLnRvU3RyaW5nKCkpXG4gICAgfVxuXG4gICAgLy9PUEFBX1JFUExBQ0VEX01BVEVSSUFMU1xuICAgIGlmKCFpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0LnBsYW5uZWRNYWludGVuYW5jZSddKSAmJiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpID09IFwiXCIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcIndhcm5pbmdzIHRydWVcIlxuICAgICAgICB3YXJuaW5ncyA9IHRydWVcbiAgICAgICAgd2FybmluZ0VtcHR5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5yZXBsYWNlZE1hdGVyaWFscyddLnRvU3RyaW5nKCkpXG4gICAgfVxuICAgIC8vT1BBQV9SRVFVSVJFRF9NQVRFUklBTFNcbiAgICBpZighaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5wbGFubmVkTWFpbnRlbmFuY2UnXSkgJiYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVxTWF0ZXJpYWxzKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVxTWF0ZXJpYWxzKSA9PSBcIlwiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVxTWF0ZXJpYWxzKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSkpe1xuICAgICAgICBsb2cuZGVidWcgXCJ3YXJuaW5ncyB0cnVlXCJcbiAgICAgICAgd2FybmluZ3MgPSB0cnVlXG4gICAgICAgIHdhcm5pbmdFbXB0eUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YucmVxdWlyZWRNYXRlcmlhbHMnXS50b1N0cmluZygpKVxuICAgIH1cblxuXG4gICAgLy9PUEFBX0FTU0VUXG4gICAgaWYoIWlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQucGxhbm5lZE1haW50ZW5hbmNlJ10pICYmIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0KT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXQpID09IFwiXCIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldCkudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpKXtcbiAgICAgICAgZXJyb3JzID0gdHJ1ZVxuICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YuYXNzZXQnXS50b1N0cmluZygpKVxuICAgIH1cbiAgICAvL09QQUFfQVNTRVRfU1RBVFVTX1BSRVxuICAgIGlmKCFpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0LnBsYW5uZWRNYWludGVuYW5jZSddKSAmJiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldFN0YXR1c1ByZSk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0U3RhdHVzUHJlKSA9PSBcIlwiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXRTdGF0dXNQcmUpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKSl7XG4gICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLmFzc2V0U3RhdHVzUHJlJ10udG9TdHJpbmcoKSlcbiAgICB9XG4gICAgLy9PUEFBX0FTU0VUX1NUQVRVU19QT1NUXG4gICAgaWYoIWlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQucGxhbm5lZE1haW50ZW5hbmNlJ10pICYmIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0U3RhdHVzUG9zdCk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0U3RhdHVzUG9zdCkgPT0gXCJcIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0U3RhdHVzUG9zdCkudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpKXtcbiAgICAgICAgZXJyb3JzID0gdHJ1ZVxuICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YuYXNzZXRTdGF0dXNQb3N0J10udG9TdHJpbmcoKSlcbiAgICB9XG4gICAgLy9PUEFBX1JJU0tfT05TSVRFXG4gICAgaWYoIWlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQucGxhbm5lZE1haW50ZW5hbmNlJ10pICYmIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJpc2spPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyaXNrKSA9PSBcIlwiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmlzaykudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpKXtcbiAgICAgICAgZXJyb3JzID0gdHJ1ZVxuICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2Yucmlza09uc2l0ZSddLnRvU3RyaW5nKCkpXG4gICAgfVxuICAgIC8vT1BBQV9SSVNLX0RFU0NSSVBUSU9OXG4gICAgaWYoIWlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQucGxhbm5lZE1haW50ZW5hbmNlJ10pICYmIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJpc2spLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpICYmIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJpc2tEZXNjcmlwdGlvbik9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJpc2tEZXNjcmlwdGlvbikgPT0gXCJcIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJpc2tEZXNjcmlwdGlvbikudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpKSl7XG4gICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLnJpc2tEZXNjcmlwdGlvbiddLnRvU3RyaW5nKCkpXG4gICAgfVxuICAgIC8vT1BBQV9DVVNUT01FUl9TSUdOQVRVUkVcbiAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1c3RTaWduYXR1cmUpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0U2lnbmF0dXJlKSA9PSBcIlwiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VzdFNpZ25hdHVyZSkudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpe1xuICAgICAgICBlcnJvcnMgPSB0cnVlXG4gICAgICAgIGVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5jdXN0b21lclNpZ25hdHVyZSddLnRvU3RyaW5nKCkpXG4gICAgfVxuICAgIC8vT1BBQV9DVVNUT01FUl9DT05UQUNUX09OU0lURVxuICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VzdFJlZik9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1c3RSZWYpID09IFwiXCIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0UmVmKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSl7XG4gICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLmN1c3RDb250YWN0T25zaXRlJ10udG9TdHJpbmcoKSlcbiAgICB9XG4gICAgLy9PUEFBX1RFQ0hOSUNJQU5fU0lHTkFUVVJFXG4gICAgLypcbiAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hTaWduYXR1cmUpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0ZWNoU2lnbmF0dXJlKSA9PSBcIlwiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGVjaFNpZ25hdHVyZSkudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpe1xuICAgICAgICBlcnJvcnMgPSB0cnVlXG4gICAgICAgIGVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi50ZWNobmljaWFuU2lnbmF0dXJlJ10udG9TdHJpbmcoKSlcbiAgICB9XG4gICAgKi9cbiAgICAvLzE1LjEyLjIwMjAgQUYgLSB0b2x0YSBvYmJsaWdhdG9yaWV0XHUwMGUwIHN1aSBjYW1waSBPUF9LTVMgZSBPUF9UUkFWRUxfSE9VUlMgcG9pY2hcdTAwZTggb3JhIGxhIHJpY2hpZXN0YSB1dGVudGkgXHUwMGU4IGRpIGltcGxlbWVudGFyZTpcbiAgICAvL0NpbnppYSBTYWxpdHVybzogZG92cmViYmVybyBlc3NlcmUgb2JibGlnYXRvcmkgbGFkZG92ZSBkYSBjb250cmF0dG8gaWwgZm9ybml0b3JlIG5vbiBoYSBpbCBkaXJpdHRvIGZpc3NvIGRpIGNoaWFtYXRhXG4gICAgLy9PUEFBX0tNU1xuICAgIC8qaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShrbXMpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShrbXMpID09IFwiXCIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShrbXMpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKXtcbiAgICAgICAgZXJyb3JzID0gdHJ1ZVxuICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2Yua21zJ10udG9TdHJpbmcoKSlcbiAgICB9Ki9cbiAgICAvL09QQUFfVFJBVkVMX0hPVVJTXG4gICAgLyppZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYXZlbEgpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmF2ZWxIKSA9PSBcIlwiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsSCkudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpe1xuICAgICAgICBlcnJvcnMgPSB0cnVlXG4gICAgICAgIGVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi50cmF2ZWxIb3VycyddLnRvU3RyaW5nKCkpXG4gICAgfSovXG4gICAgLy9PUEFBX0VYRUNVVElPTl9EQVRFXG4gICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShleGVjdXRpb25EYXRlKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZXhlY3V0aW9uRGF0ZSkgPT0gXCJcIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGV4ZWN1dGlvbkRhdGUpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKXtcbiAgICAgICAgZXJyb3JzID0gdHJ1ZVxuICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YuZXhlY3V0aW9uRGF0ZSddLnRvU3RyaW5nKCkpXG4gICAgfVxuXG4gICAgLy9Kb2IgU3RhcnRlZCArIEpvYiBDb21wbGV0ZWQgZGkgb2duaSBvZ2dldHRvIFRlY2hfT25TaXRlX1JlcG9ydCBhc3NvY2lhdG8gYWwgY2FtcG8gT1BBQV9URUNIU19PTlNJVEVcbiAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hzT25zaXRlKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGVjaHNPbnNpdGUpICE9IFwiXCIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGVjaHNPbnNpdGUpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKXtcbiAgICAgICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovXG4gICAgICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50c1xuICAgICAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7ICBcbiAgICAgICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XG4gICAgICAgIGRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XG4gICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4gICAgICAgIGRlZiB0ZWNoc09uc2l0ZUZpZWxkID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0ZWNoc09uc2l0ZSlcblx0XHRsb2cuZGVidWcgXCJ0ZWNoc09uc2l0ZUZpZWxkOiBcIiArIHRlY2hzT25zaXRlRmllbGRcbiAgICAgICAgZm9yKHRlY2huaWNpYW4gaW4gdGVjaHNPbnNpdGVGaWVsZCl7XG4gICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3RcbiAgICAgICAgICAgIGRlZiB0ZWNoT25zaXRlPXRlY2huaWNpYW4udG9TdHJpbmcoKVxuICAgICAgICAgICAgZGVmIHRlY2hPbnNpdGVLZXkgPSB0ZWNoT25zaXRlLnN1YnN0cmluZyh0ZWNoT25zaXRlLmluZGV4T2YoJygnKSsxLHRlY2hPbnNpdGUuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgZGVmIHRlY2hPbnNpdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4odGVjaE9uc2l0ZUtleSlcbiAgICAgICAgICAgIC8vZ2V0IFwiSm9iIFN0YXJ0ZWRcIiBmb3IgdGhhdCBUZWNobmljaWFuXG4gICAgICAgICAgICBkZWYgb2JUcmlhZ2VcbiAgICAgICAgICAgIGRlZiB0ZWNoSm9iU3RhcnRlZFxuICAgICAgICAgICAgZGVmIHRlY2hKb2JDb21wbGV0ZWRcbiAgICAgICAgICAgIGRlZiB0ZWNoUmVmLCB0ZWNoLCB0ZWNoUmVmS2V5LCB0ZWNoUmVmT2JqZWN0LCB0ZWNoUmVmTmFtZVxuICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hPbnNpdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai50ZWNoT25TaXRlLmpvYlN0YXJ0ZWQnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaE9uc2l0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2hPblNpdGUuam9iU3RhcnRlZCddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgICAgIHRlY2hKb2JTdGFydGVkID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbG9nLmRlYnVnIHRlY2hKb2JTdGFydGVkIFxuICAgICAgICAgICAgLy9nZXQgXCJKb2IgQ29tcGxldGVkXCIgZm9yIHRoYXQgVGVjaG5pY2lhblxuICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hPbnNpdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai50ZWNoT25TaXRlLmpvYkNvbXBsZXRlZCddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoT25zaXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoudGVjaE9uU2l0ZS5qb2JDb21wbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICB0ZWNoSm9iQ29tcGxldGVkID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbG9nLmRlYnVnIHRlY2hKb2JDb21wbGV0ZWRcbiAgICAgICAgICAgIC8vZ2V0IFwiVGVjaG5pY2lhbl9SRUZcIiBmb3IgdGhhdCBUZWNobmljaWFuXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJ0ZWNoT25zaXRlT2JqZWN0OiBcIiArIHRlY2hPbnNpdGVPYmplY3RcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hPbnNpdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai50ZWNoT25zaXRlLnRlY2huaWNpYW5SZWYnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaE9uc2l0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2hPbnNpdGUudGVjaG5pY2lhblJlZiddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgICAgIHRlY2hSZWYgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIHRlY2ggPSB0ZWNoUmVmLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ0ZWNoOiBcIiArIHRlY2hcbiAgICAgICAgICAgICAgICB0ZWNoUmVmS2V5ID0gdGVjaC5zdWJzdHJpbmcodGVjaC5pbmRleE9mKCcoJykrMSx0ZWNoLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ0ZWNoUmVmS2V5OiBcIiArIHRlY2hSZWZLZXlcbiAgICAgICAgICAgICAgICB0ZWNoUmVmT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEnXS50b1N0cmluZygpICsgXCItXCIgKyB0ZWNoUmVmS2V5KVxuICAgICAgICAgICAgICAgIHRlY2hSZWZOYW1lID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai50ZWNobmljaWFuLm5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgXHRcdGxvZy5kZWJ1ZyB0ZWNoUmVmTmFtZVxuXG4gICAgICAgICAgICBpZighdGVjaEpvYlN0YXJ0ZWQgfHwgIXRlY2hKb2JDb21wbGV0ZWQpe1xuICAgICAgICAgICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgICAgICAgICBlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWRGaWVsZHMuYWRkKHRlY2hSZWZOYW1lLnN1YnN0cmluZyh0ZWNoUmVmTmFtZS5pbmRleE9mKCcoJykrMSx0ZWNoUmVmTmFtZS5pbmRleE9mKCcpJykpKVxuICAgICAgICAgICAgfSAgICBcbiAgICAgICAgIH0gICAgXG4gICAgfVxuICAgIFxuICAgIGRlZiB0ZWNoU2lnbkZvdW5kPWZhbHNlXG4gICAgLy9GaXJtYSBkaSBhbG1lbm8gdW4gb2dnZXR0byBUZWNoX09uU2l0ZV9SZXBvcnQgYXNzb2NpYXRvIGFsIGNhbXBvIE9QQUFfVEVDSFNfT05TSVRFXG4gICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0ZWNoc09uc2l0ZSkhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hzT25zaXRlKSAhPSBcIlwiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hzT25zaXRlKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSl7XG4gICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qL1xuICAgICAgICAvL2luc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHNcbiAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyAgXG4gICAgICAgIENsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuICAgICAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xuICAgICAgICBkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcblxuICAgICAgICBkZWYgdGVjaHNPbnNpdGVGaWVsZCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGVjaHNPbnNpdGUpXG5cdFx0bG9nLmRlYnVnIFwidGVjaHNPbnNpdGVGaWVsZDogXCIgKyB0ZWNoc09uc2l0ZUZpZWxkXG4gICAgICAgIGZvcih0ZWNobmljaWFuIGluIHRlY2hzT25zaXRlRmllbGQpe1xuICAgICAgICAgICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0XG4gICAgICAgICAgICBkZWYgdGVjaE9uc2l0ZT10ZWNobmljaWFuLnRvU3RyaW5nKClcbiAgICAgICAgICAgIGRlZiB0ZWNoT25zaXRlS2V5ID0gdGVjaE9uc2l0ZS5zdWJzdHJpbmcodGVjaE9uc2l0ZS5pbmRleE9mKCcoJykrMSx0ZWNoT25zaXRlLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgIGRlZiB0ZWNoT25zaXRlT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHRlY2hPbnNpdGVLZXkpXG4gICAgICAgICAgICAvL2dldCBcIkpvYiBTdGFydGVkXCIgZm9yIHRoYXQgVGVjaG5pY2lhblxuICAgICAgICAgICAgZGVmIG9iVHJpYWdlXG4gICAgICAgICAgICBkZWYgdGVjaFNpZ25hdHVyZSwgdGVjaFNpZ25hdHVyZUF0dHJcbiAgICAgICAgICAgIHRlY2hTaWduYXR1cmVBdHRyID0gcHJvcGVydGllc1snaW9iai50ZWNoT25TaXRlLnNpZ25hdHVyZSddID8gcHJvcGVydGllc1snaW9iai50ZWNoT25TaXRlLnNpZ25hdHVyZSddLnRvU3RyaW5nKCkgOiBcIlRFQ0hOSUNJQU5fU0lHTkFUVVJFXCJcbiAgICAgICAgICAgIGRlZiB0ZWNoUmVmLCB0ZWNoLCB0ZWNoUmVmS2V5LCB0ZWNoUmVmT2JqZWN0LCB0ZWNoUmVmTmFtZVxuICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hPbnNpdGVPYmplY3QuZ2V0SWQoKSwgdGVjaFNpZ25hdHVyZUF0dHIpKXtcbiAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoT25zaXRlT2JqZWN0LmdldElkKCksIHRlY2hTaWduYXR1cmVBdHRyKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICB0ZWNoU2lnbmF0dXJlID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbG9nLmRlYnVnIFwidGVjaFNpZ25hdHVyZTogXCIgKyB0ZWNoU2lnbmF0dXJlIFxuXG4gICAgICAgICAgICAvL2dldCBcIlRlY2huaWNpYW5fUkVGXCIgZm9yIHRoYXQgVGVjaG5pY2lhblxuICAgICAgICAgICAgbG9nLmRlYnVnIFwidGVjaE9uc2l0ZU9iamVjdDogXCIgKyB0ZWNoT25zaXRlT2JqZWN0XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoT25zaXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoudGVjaE9uc2l0ZS50ZWNobmljaWFuUmVmJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hPbnNpdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai50ZWNoT25zaXRlLnRlY2huaWNpYW5SZWYnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICB0ZWNoUmVmID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICB0ZWNoID0gdGVjaFJlZi50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidGVjaDogXCIgKyB0ZWNoXG4gICAgICAgICAgICAgICAgdGVjaFJlZktleSA9IHRlY2guc3Vic3RyaW5nKHRlY2guaW5kZXhPZignKCcpKzEsdGVjaC5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidGVjaFJlZktleTogXCIgKyB0ZWNoUmVmS2V5XG4gICAgICAgICAgICAgICAgdGVjaFJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihwcm9wZXJ0aWVzWydpc2NoZW1hLmFhJ10udG9TdHJpbmcoKSArIFwiLVwiICsgdGVjaFJlZktleSlcbiAgICAgICAgICAgICAgICB0ZWNoUmVmTmFtZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoudGVjaG5pY2lhbi5uYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgIFx0XHRsb2cuZGVidWcgdGVjaFJlZk5hbWVcblxuICAgICAgICAgICAgaWYoIXRlY2hTaWduYXR1cmUpe1xuICAgICAgICAgICAgICAgIGVycm9yVGVjaFNpZ25hdHVyZUZpZWxkcy5hZGQodGVjaFJlZk5hbWUuc3Vic3RyaW5nKHRlY2hSZWZOYW1lLmluZGV4T2YoJygnKSsxLHRlY2hSZWZOYW1lLmluZGV4T2YoJyknKSkpXG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICB0ZWNoU2lnbkZvdW5kID0gdHJ1ZVxuICAgICAgICAgICAgICAgIGVycm9yVGVjaFNpZ25hdHVyZUZpZWxkcy5jbGVhcigpXG4gICAgICAgICAgICB9ICAgIFxuICAgICAgICAgfVxuICAgICAgICBpZighdGVjaFNpZ25Gb3VuZCl7XG4gICAgICAgICAgICBlcnJvcnMgPSB0cnVlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICBpZiAoIWVycm9ycyAmJiAhd2FybmluZ3Mpe1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH1lbHNle1xuICAgICAgICBpZighZXJyb3JzICYmIHdhcm5pbmdzKXtcbiAgICAgICAgICAgIC8vU2UgY2kgc29ubyBzb2xvIHdhcm5pbmdzIHZlcmlmaWNvIHNlIGwndXRlbnRlIGhhIGdpXHUwMGUwIGRpY2hpYXJhdG8gZGkgdm9sZXIgcHJvc2VndWlyZSBjb211bnF1ZVxuICAgICAgICAgICAgLy8gLSB0cmFuc2l0aW9uIGZpZWxkIFwiT1BBQV9DSEVDS19BTkRfQ09ORklSTVwiPVwiWWVzXCJcbiAgICAgICAgICAgIC8vIC0gaW4gY2FzbyBjb250cmFyaW8gaW52aW8gaSB3YXJuaW5nIGEgRkVcblxuICAgICAgICAgICAgLy9sb2cuZGVidWcgXCJ0cmFuc2l0aW9uQ2hlY2s6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spXG4gICAgICAgICAgICAvL2xvZy5kZWJ1ZyBcInJlc3VsdDogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIilcbiAgICAgICAgICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKSl7XG4gICAgICAgICAgICAgICAgLy9sb2cuZGVidWcgXCJyZXR1cm4gdHJ1ZVwiXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgICAgICAgICAgICAgaWYod2FybmluZ0VtcHR5RmllbGRzLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHkgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKFwiV1wiKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQoXCJDT05GSVJNX0VNUFRZX0ZJRUxEU1wiKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQobnVsbClcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKHdhcm5pbmdFbXB0eUZpZWxkcylcblxuICAgICAgICAgICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHkpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgb3V0cHV0LmFkZCh3TGlzdClcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ0aHJvdyBleGNlcHRpb246IFwiICsgb3V0cHV0LnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJXXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICAgICAgICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJXXCIsIG91dHB1dC50b1N0cmluZygpKSAgIFxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICAgICAgaWYoZXJyb3JzICYmICF3YXJuaW5ncyl7XG4gICAgICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgICAgICAgICAgaWYoZXJyb3JNYW5kYXRvcnlGaWVsZHMuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0TWFuZGF0b3J5ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKFwiRVwiKVxuICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChcIk1BTkRBVE9SWV9GSUVMRFNcIilcbiAgICAgICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQobnVsbClcbiAgICAgICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoZXJyb3JNYW5kYXRvcnlGaWVsZHMpXG4gICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0TWFuZGF0b3J5KVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZihlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWRGaWVsZHMuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0U3RhcnRFbmQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kLmFkZChcIkVcIilcbiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kLmFkZChcIk1JU1NJTkdfT05TSVRFX1NUQVJUX0VORF9ERVRBSUxTXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQobnVsbClcbiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kLmFkZChlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWRGaWVsZHMpXG4gICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0U3RhcnRFbmQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKGVycm9yVGVjaFNpZ25hdHVyZUZpZWxkcy5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICBkZWYgZUxpc3RUZWNoU2lnbiA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGVMaXN0VGVjaFNpZ24uYWRkKFwiRVwiKVxuICAgICAgICAgICAgICAgIGVMaXN0VGVjaFNpZ24uYWRkKFwiTUlTU0lOR19URUNIX1NJR05BVFVSRVwiKVxuICAgICAgICAgICAgICAgIGVMaXN0VGVjaFNpZ24uYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgZUxpc3RUZWNoU2lnbi5hZGQoZXJyb3JUZWNoU2lnbmF0dXJlRmllbGRzKVxuICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdFRlY2hTaWduKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwidGhyb3cgZXhjZXB0aW9uOiBcIiArIG91dHB1dC50b1N0cmluZygpXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICAgICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIkVcIiwgb3V0cHV0LnRvU3RyaW5nKCkpICAgXG4gICAgICAgIH1cbiAgICAgICAgaWYoZXJyb3JzICYmIHdhcm5pbmdzKXtcbiAgICAgICAgICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgZGVmIHdMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICBpZihlcnJvck1hbmRhdG9yeUZpZWxkcy5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICBkZWYgZUxpc3RNYW5kYXRvcnkgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKFwiTUFOREFUT1JZX0ZJRUxEU1wiKVxuICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChudWxsKVxuICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChlcnJvck1hbmRhdG9yeUZpZWxkcylcbiAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RNYW5kYXRvcnkpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKGVycm9ySm9iU3RhcnRlZENvbXBsZXRlZEZpZWxkcy5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICBkZWYgZUxpc3RTdGFydEVuZCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKFwiRVwiKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKFwiTUlTU0lOR19PTlNJVEVfU1RBUlRfRU5EX0RFVEFJTFNcIilcbiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kLmFkZChudWxsKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKGVycm9ySm9iU3RhcnRlZENvbXBsZXRlZEZpZWxkcylcbiAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RTdGFydEVuZClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihlcnJvclRlY2hTaWduYXR1cmVGaWVsZHMuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0VGVjaFNpZ24gPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBlTGlzdFRlY2hTaWduLmFkZChcIkVcIilcbiAgICAgICAgICAgICAgICBlTGlzdFRlY2hTaWduLmFkZChcIk1JU1NJTkdfVEVDSF9TSUdOQVRVUkVcIilcbiAgICAgICAgICAgICAgICBlTGlzdFRlY2hTaWduLmFkZChudWxsKVxuICAgICAgICAgICAgICAgIGVMaXN0VGVjaFNpZ24uYWRkKGVycm9yVGVjaFNpZ25hdHVyZUZpZWxkcylcbiAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RUZWNoU2lnbilcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYod2FybmluZ0VtcHR5RmllbGRzLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1FbXB0eSA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChcIldcIilcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQoXCJDT05GSVJNX0VNUFRZX0ZJRUxEU1wiKVxuICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChudWxsKVxuICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZCh3YXJuaW5nRW1wdHlGaWVsZHMpXG5cbiAgICAgICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHkpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwidGhyb3cgZXhjZXB0aW9uOiBcIiArIG91dHB1dC50b1N0cmluZygpXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJXRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJXRVwiLCBvdXRwdXQudG9TdHJpbmcoKSkgIFxuICAgICAgICB9XG4gICAgfVxufVxuIiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">44d55f4b-44ce-4e70-af32-0ef4516e93e6</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IFJFU1QgQVBJOiBPUCBnZW5lcmF6aW9uZSBSYXBwb3J0byBkaSBpbnRlcnZlbnRv</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuQ2F0ZWdvcnkgbG9nID0gQ2F0ZWdvcnkuZ2V0SW5zdGFuY2UoXCJjb20ub25yZXNvbHZlLmppcmEuZ3Jvb3Z5LlBvc3RGdW5jdGlvblwiKVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxubG9nLmRlYnVnIFwiT25TaXRlIFJlcG9ydCBwZXIgaXNzdWU6IFwiICsgaXNzdWUua2V5XG4vKiBSRVNUIEFQSSBwZXIgR2VuZXJhemlvbmUgQWxsZWdhdG8gUmFwcG9ydG8gZGkgSW50ZXJ2ZW50byAqL1xucmVxdWVzdE1ldGhvZCA9IFwiUFVUXCI7XG5cblxuLyohIURhIHJpbXVvdmVyZSBhcHBlbmEgcmlzb2x0aSBpIGJ1ZyEhKi9cbmlmKCFpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0LnBsYW5uZWRNYWludGVuYW5jZSddKSl7XG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vQUEvdGlja2V0L1wiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIi9hdHRhY2htZW50L29uc2l0ZVwiXG4gICAgbG9nLmRlYnVnIFwiYmFzZVVybDogXCIgKyBiYXNlVVJMXG5cbiAgICBVUkwgdXJsXG4gICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuXG4gICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiR0VORVJBVEUtT05TSVRFUkVQT1JUXCIpXG4gICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKSlcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcbiAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgIH1cblxufVxuIiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">4982e177-86e5-4bc8-8965-b00de7d61755</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IFJFU1QgQVBJOiBPUCBwZXIgY29uc3VudGl2YXppb25lIHRpY2tldA==</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbkNhdGVnb3J5IGxvZyA9IENhdGVnb3J5LmdldEluc3RhbmNlKFwiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb25cIilcbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5cbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5kZWYgYXV0b21hdGljYWxseUNsb3NlZCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUNsb3NlZCddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5ib29sZWFuIHVuYXRhbnR1bT10cnVlXG5cbi8qISFEYSByaW11b3ZlcmUgYXBwZW5hIHJpc29sdGkgaSBidWchISovXG5pZighaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5wbGFubmVkTWFpbnRlbmFuY2UnXSkpe1xuXG4gICAgLypPUC0xMDM4OiBsYSBjb250YWJpbGl6emF6aW9uZSBkb3ZyXHUwMGUwIHByZXZlZGVyZSBsZSB1bmF0YW50dW0gcmF0ZXMgc29sbyBzZSBpbCB0aWNrZXQgbm9uIFx1MDBlOCBzdGF0byBjaGl1c28gaW4gYXV0b21hdGljbyovXG4gICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKSE9bnVsbCAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpKXtcbiAgICAgICAgdW5hdGFudHVtPWZhbHNlICAgIFxuICAgIH1cbiAgICBsb2cuZGVidWcgXCJDb25zdW50aXZhemlvbmUgdGlja2V0IFwiICsgaXNzdWUua2V5ICsgXCIgY29uIHVuYXRhbnR1bTogXCIgKyB1bmF0YW50dW1cblxuICAgIC8qIFJFU1QgQVBJIHBlciBDb250YWJpbGl6emF6aW9uZSBJbnRlcnZlbnRvICovXG4gICAgcmVxdWVzdE1ldGhvZCA9IFwiR0VUXCI7XG5cbiAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvQUEvdGlja2V0L2lzc3VlS2V5L1wiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIi9jbG9zZT91bT1cIit1bmF0YW50dW0udG9TdHJpbmcoKVxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVcmw6IFwiICsgYmFzZVVSTFxuXG4gICAgLypEZWZpbmlyZSBwYXJhbWV0cm8gZGkgaW5wdXQgdW5hdGFudHVtPXRydWV8ZmFsc2UgaW4gYmFzZSBhbCB2YWxvcmUgZGVsbGEgdmFyaWFiaWxlIGJvb2xlYW5hIHVuYXRhbnR1bSovXG4gICAgVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcblxuICAgIC8vSXNzdWVJbmRleGluZ1NlcnZpY2UgaXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG4gICAgLy9pc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGlzc3VlTWFuYWdlci5nZXRJc3N1ZU9iamVjdChpc3N1ZS5rZXkudG9TdHJpbmcoKSkpXG5cbiAgICAvL2RlZiB1bmFUYW50dW1SYXRlcyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUEFBX1VOQVRBTlRVTV9SQVRFU1wiKVswXVxuICAgIC8vbG9nLndhcm4gXCJ1bmFUYW50dW1SYXRlczogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHVuYVRhbnR1bVJhdGVzKVxuXG4gICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlOiBcIiArIGNvbm5lY3Rpb25cblxuICAgICAgICAvKlJPTExCQUNLKi9cbiAgICAgICAgLypSaW1vemlvbmUgYWxsZWdhdG8gcmFwcG9ydG8gZGkgaW50ZXJ2ZW50byBhcHBlbmEgY3JlYXRvKi9cbiAgICAgICAgLyogR2V0IEluc2lnaHQgSVFMIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xuICAgICAgICBDbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuICAgICAgICBkZWYgaXFsRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKGlxbEZhY2FkZUNsYXNzKTtcblxuICAgICAgICAvKiBHZXQgSW5zaWdodCBPYmplY3QgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG4gICAgICAgIENsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTtcbiAgICAgICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XG5cbiAgICAgICAgLyogR2V0IEluc2lnaHQgT2JqZWN0IFR5cGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG4gICAgICAgIENsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpO1xuICAgICAgICBkZWYgb2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpO1xuXG4gICAgICAgIC8qIEdldCBJbnNpZ2h0IE9iamVjdCBBdHRyaWJ1dGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG4gICAgICAgIENsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuICAgICAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xuXG4gICAgICAgIENsYXNzIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5zZXJ2aWNlcy5tb2RlbC5mYWN0b3J5Lk9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5XCIpO1xuICAgICAgICBkZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG5cbiAgICAgICAgLyogU3BlY2lmeSB0aGUgc2NoZW1hIGlkIGFzIHdlbGwgYXMgdGhlIElRTCB0aGF0IHdpbGwgZmV0Y2ggb2JqZWN0cy4gSW4gdGhpcyBjYXNlIGFsbCBvYmplY3RzIHdpdGggTmFtZSBtYXRjaGluZyB0aGUgdmFsdWVDRiwgYmUgc3VyZSB0byBpbmNsdWRlIFwiIGFyb3VuZCB2YWx1ZSAqL1xuICAgICAgICBkZWYgb2JqZWN0cyA9IGlxbEZhY2FkZS5maW5kT2JqZWN0c0J5SVFMQW5kU2NoZW1hKERCTywgXCJcXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5jYXRlZ29yeVJlZiddLnRvU3RyaW5nKCkgKyBcIlxcXCIuXFxcIlwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkubmFtZSddLnRvU3RyaW5nKCkgKyBcIlxcXCIgPSBcXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5vYmpzLnJhcHBJbnRGQUFDJ10udG9TdHJpbmcoKSArIFwiXFxcIiBBTkQgXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSArIFwiIT10cnVlIEFORCBvYmplY3QgSEFWSU5HIGNvbm5lY3RlZFRpY2tldHMoa2V5ID0gXCIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArIFwiKVwiKTsgLy8gU2VlIHRoZSBjb21wbGV0ZSBsaXN0IG9mIHBvc3NpYmxlIElRTCBvbiB0aGUgSW5zaWdodCBRdWVyeSBMYW5ndWFnZSBkb2N1bWVudGF0aW9uIHBhZ2VcbiAgICAgICAgLyogSWYgdGhpcyBpcyBhIG1hbmRhdG9yeSBmaWVsZCB5b3Ugc2hvdWxkIGJlIGFibGUgdG8gZG8gdGhpczogKi9cbiAgICAgICAgbG9nLmluZm8oXCJJbnNpZ2h0IG9iamVjdDogXCIgKyBvYmplY3RzWzBdKTtcblxuICAgICAgICBpZihvYmplY3RzWzBdKXtcbiAgICAgICAgICAgIC8qIFVQREFURSBPSkJFQ1QgREVMRVRFRCBWQUxVRSAqL1xuICAgICAgICAgICAgZGVmIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG9iamVjdHNbMF0uZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuZGVsZXRlZCddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKSAgXG4gICAgICAgICAgICBkZWYgdmFsdWUgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcblxuICAgICAgICAgICAgZGVmIHZhbHVlQmVhbiA9IG9iVHJpYWdlLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpXG4gICAgICAgICAgICB2YWx1ZUJlYW4uc2V0VmFsdWUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2UuZ2V0T2JqZWN0VHlwZUF0dHJpYnV0ZUlkKCkpLCB0cnVlKVxuICAgICAgICAgICAgLypDbGVhbiBhY3R1YWwgdmFsdWUqL1xuICAgICAgICAgICAgdmFsdWUuY2xlYXIoKVxuICAgICAgICAgICAgdmFsdWUuYWRkKHZhbHVlQmVhbik7XG4gICAgICAgICAgICBvYlRyaWFnZS5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKHZhbHVlKVxuXG4gICAgICAgICAgICAvL1VwZGF0ZSBPSkJFQ1QgYXR0cmlidXRlIHZhbHVlXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLnN0b3JlT2JqZWN0QXR0cmlidXRlQmVhbihvYlRyaWFnZSk7XG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XG4gICAgICAgICAgICAgICAgbG9nLndhcm4oXCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOlwiICsgdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVRLVC1BQ0NPVU5USU5HXCIpXG4gICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKSlcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcbiAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgIH1lbHNle1xuICAgICAgICAvKk9QLTEwMzg6IGNvbnN1bnRpdmF6aW9uZSB0ZXJtaW5hdGEgY29ycmV0dGFtZW50ZSAtIHNlIFx1MDBlOCBzdGF0YSBlc2VndWl0YSBjb24gdW5hdGFudHVtPXRydWUgc2V0dG8gYSBObyBpbCBjYW1wbyBPUEFBX0FVVE9NQVRJQ0FMTFlfQ0xPU0VEKi9cbiAgICAgICAgaWYodW5hdGFudHVtKXtcbiAgICAgICAgICAgIGRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuICAgICAgICAgICAgZGVmIG1pID0gKE11dGFibGVJc3N1ZSkgaXNzdWVcblxuICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSlcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImZpZWxkQ29uZmlnOiBcIiArIGZpZWxkQ29uZmlnXG4gICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIk5vXCIgfVxuICAgICAgICAgICAgYXV0b21hdGljYWxseUNsb3NlZC51cGRhdGVWYWx1ZShudWxsLCBpc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcblxuICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xuICAgICAgICAgICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChpc3N1ZSlcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlVwZGF0ZWQgY3VzdG9tZmllbGQgLSBpc3N1ZSBwcmluY2lwYWxlICR7aXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKX1cIlxuICAgICAgICB9XG4gICAgfVxufSIsInNjcmlwdFBhdGgiOm51bGx9</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">c6fc1cea-b26c-460d-83ef-3294126d30cf</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IFJFU1QgQVBJOiBPUCBFbWFpbCBOb3RpZmljYXRpb246IE9OU0lURV9SRVBPUlQgLSBvbmx5IElGIE9QQUFfQVVUT01BVElDQUxMWV9DTE9TRUQhPVllcyBBTkQgc2VuZE1haWwhPU5PIE1BSUwgQU5EIGNpIHNvbm8gdGlja2V0IGNvbGxlZ2F0aS4gLS0tLT4gRElTQUJMRUQgc3UgdHJhbnNhemlvbmUgY29tcGxldGUgLSB2aWVuZSBmYXR0byBtYW51YWxtZW50ZSBkYSBTRU5EIE9OU0lURSBSRVBPUlQ=</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGlua1xuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuQ2F0ZWdvcnkgbG9nID0gQ2F0ZWdvcnkuZ2V0SW5zdGFuY2UoXCJjb20ub25yZXNvbHZlLmppcmEuZ3Jvb3Z5LlBvc3RGdW5jdGlvblwiKVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiBhdXRvbWF0aWNhbGx5Q2xvc2VkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q2xvc2VkJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBzZW5kTWFpbFRvID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zZW5kTWFpbFRvJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBzZW5kTWFpbFRvUmVjID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zZW5kTWFpbFRvUmVjaXBpZW50cyddLnRvU3RyaW5nKCkpWzBdXG5kZWYgb25zaXRlUmVwb3J0RGF0ZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi53Zk9uc2l0ZVJlcG9ydCddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5kZWYgcmVsYXRlc0luSXNzdWVMaW5rPWZhbHNlXG5kZWYgcmVsYXRlc091dElzc3VlTGluaz1mYWxzZVxuZGVmIGxpbmtlZFRpY2tldHM9bmV3IEFycmF5TGlzdCgpXG5kZWYgYm9keV9yZXFcbmRlZiBzZW5kbWFpbD10cnVlXG5cbmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCk9PW51bGwgfHwgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIikpe1xuXG4gICAgLypPUC0xMDM4OiB2ZXJpZmljYSB0aWNrZXQgY29sbGVnYXRpKi9cbiAgICBMaXN0PElzc3VlTGluaz4gYWxsSW5Jc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0SW53YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxJbklzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG5cbiAgICAgICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgcmVsYXRlc0luSXNzdWVMaW5rPXRydWVcbiAgICAgICAgICAgIGxpbmtlZFRpY2tldHMuYWRkKGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKS50b1N0cmluZygpKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiSXNzdWUgY29uIHJlbGF0ZXNJbklzc3VlTGlua1wiXG4gICAgICAgIH1cbiAgICB9XG4gICAgTGlzdDxJc3N1ZUxpbms+IGFsbE91dElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgIHJlbGF0ZXNPdXRJc3N1ZUxpbms9dHJ1ZVxuICAgICAgICAgICAgbGlua2VkVGlja2V0cy5hZGQoaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkudG9TdHJpbmcoKSlcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIklzc3VlIGNvbiByZWxhdGVzT3V0SXNzdWVMaW5rXCJcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBsb2cuZGVidWcgXCJpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCk6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKS50b1N0cmluZygpXG4gICAgaWYoKHJlbGF0ZXNJbklzc3VlTGluayB8fCByZWxhdGVzT3V0SXNzdWVMaW5rKSAmJiAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydjZi5vcHRpb24uc2VuZE1haWxUby5ub0VtYWlsJ10udG9TdHJpbmcoKSkgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydjZi5vcHRpb24uc2VuZE1haWxUby5jdXJyZW50UmVwb3J0J10udG9TdHJpbmcoKSkpe1xuICAgICAgICAvL09QLTEwMzg6IGludmlhcmUgc29sbyBsYSBtYWlsIGNvbiBpbCByYXBwb3J0byBkaSBpbnRlcnZlbnRvIGRlbCB0aWNrZXQgY29ycmVudGVcbiAgICAgICAgYm9keV9yZXEgPSBbXG4gICAgICAgICAgICBcInRlbXBsYXRlTmFtZVwiOiBwcm9wZXJ0aWVzWyd0dC5vblNpdGVSZXBvcnQnXS50b1N0cmluZygpLFxuICAgICAgICAgICAgXCJwZWNcIjogZmFsc2UsXG4gICAgICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleSxcbiAgICAgICAgICAgIFwiYWRkaXRpb25hbFJlY2lwaWVudHNcIjogaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvUmVjKS50b1N0cmluZygpXG4gICAgICAgIF1cbiAgICAgICAgLyozMS4wNy4yMDIwIEFGOiBuZWxsYSB0cmFuc2F6aW9uZSBjb21wbGV0ZSBOT04gaW52aWFyZSBtYWlsIGxhIG1haWwgcGVyIGkgdGlja2V0IGNvbiBjb2xsZWdhdGkgLSBpbCByYXBwb3J0byBkaSBpbnRlcnZlbnRvIGRlaSB0aWNrZXQgXCJmaWdsaVwiIHZpZW5lIGdlbmVyYXRvIGRvcG8gbCdpbnZpbyBkZWxsYSBtYWlsIHN1bCBcInBhZHJlXCIgcXVpbmRpIG5vbiB2ZXJyZWJiZSBpbmNsdXNvIG5lbGxhIG1haWwqL1xuICAgICAgICAvKkwnaW52aW8gZGVsbGEgbWFpbCB2ZXJyXHUwMGUwIGZhdHRvIHN1Y2Nlc3NpdmFtZW50ZSByaXNwZXR0byBhbGxhIGNoaXVzdXJhIGNvbiBcIlNlbmQgT25TaXRlIFJlcG9ydFwiKi9cbiAgICAgICAgc2VuZG1haWw9ZmFsc2VcbiAgICB9ZWxzZSBpZigocmVsYXRlc0luSXNzdWVMaW5rIHx8IHJlbGF0ZXNPdXRJc3N1ZUxpbmspICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLm5vRW1haWwnXS50b1N0cmluZygpKSAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLmN1cnJlbnRSZXBvcnQnXS50b1N0cmluZygpKSl7XG4gICAgICAgIC8vT1AtMTAzODogaW52aWFyZSBsYSBtYWlsIGNvbiB0dXR0aSBpIHJhcHBvcnRpIGRpIGludGVydmVudG8gZGVpIHRpY2tldCBjb2xsZWdhdGlcbiAgICAgICAgYm9keV9yZXEgPSBbXG4gICAgICAgICAgICBcInRlbXBsYXRlTmFtZVwiOiBwcm9wZXJ0aWVzWyd0dC5vblNpdGVSZXBvcnQnXS50b1N0cmluZygpLFxuICAgICAgICAgICAgXCJwZWNcIjogZmFsc2UsXG4gICAgICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleSxcbiAgICAgICAgICAgIFwibGlua2VkVGlja2V0c1wiOiBsaW5rZWRUaWNrZXRzLFxuICAgICAgICAgICAgXCJhZGRpdGlvbmFsUmVjaXBpZW50c1wiOiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG9SZWMpLnRvU3RyaW5nKClcbiAgICAgICAgXVxuICAgICAgICAvKjMxLjA3LjIwMjAgQUY6IG5lbGxhIHRyYW5zYXppb25lIGNvbXBsZXRlIE5PTiBpbnZpYXJlIG1haWwgbGEgbWFpbCBwZXIgaSB0aWNrZXQgY29uIGNvbGxlZ2F0aSAtIGlsIHJhcHBvcnRvIGRpIGludGVydmVudG8gZGVpIHRpY2tldCBcImZpZ2xpXCIgdmllbmUgZ2VuZXJhdG8gZG9wbyBsJ2ludmlvIGRlbGxhIG1haWwgc3VsIFwicGFkcmVcIiBxdWluZGkgbm9uIHZlcnJlYmJlIGluY2x1c28gbmVsbGEgbWFpbCovXG4gICAgICAgIC8qTCdpbnZpbyBkZWxsYSBtYWlsIHZlcnJcdTAwZTAgZmF0dG8gc3VjY2Vzc2l2YW1lbnRlIHJpc3BldHRvIGFsbGEgY2hpdXN1cmEgY29uIFwiU2VuZCBPblNpdGUgUmVwb3J0XCIqL1xuICAgICAgICBzZW5kbWFpbD1mYWxzZVxuICAgIH1lbHNlIGlmKCFyZWxhdGVzSW5Jc3N1ZUxpbmsgJiYgIXJlbGF0ZXNPdXRJc3N1ZUxpbmspe1xuICAgICAgICAvKkFGIDIwMjAwNzI5IC0gc3UgRkFBQyBTZXJ2aWNlIGxhIG5vdGlmaWNhIGNvbiBpbCByYXBwb3J0byBkaSBpbnRlcnZlbnRvIHZpZW5lIGludmlhdGEgc29sbyBzdSBlc3BsaWNpdGEgZGVjaXNpb25lIGRlbGwndXRlbnRlIC0gY2hlIHNwaW5nZXJcdTAwZTAgU0VORCBPTlNJVEUgUkVQT1JUIGRvcG8gYXZlciBjaGl1c28gaWwgdGlja2V0LiBRdWluZGkgc2Ugbm9uIGNpIHNvbm8gdGlja2V0IGNvbGxlZ2F0aSBzZXR0aWFtbyBzZW5kbWFpbD1mYWxzZSovXG4gICAgICAgIHNlbmRtYWlsPWZhbHNlXG4gICAgICAgIGJvZHlfcmVxID0gW1xuICAgICAgICAgICAgXCJ0ZW1wbGF0ZU5hbWVcIjogcHJvcGVydGllc1sndHQub25TaXRlUmVwb3J0J10udG9TdHJpbmcoKSxcbiAgICAgICAgICAgIFwicGVjXCI6IGZhbHNlLFxuICAgICAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXG4gICAgICAgICAgICBcImFkZGl0aW9uYWxSZWNpcGllbnRzXCI6IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUb1JlYykudG9TdHJpbmcoKVxuICAgICAgICBdXG4gICAgfWVsc2V7XG4gICAgICAgIC8vT1AtMTAzODogbm9uIGludmlhcmUgbGEgbWFpbFxuICAgICAgICBzZW5kbWFpbD1mYWxzZVxuICAgIH1cbiAgICBcbiAgICBsb2cuZGVidWcgXCJzZW5kbWFpbDogXCIgKyBzZW5kbWFpbFxuICAgIGlmKHNlbmRtYWlsKXtcbiAgICAgICAgLyogUkVTVCBBUEkgcGVyIEludmlvIE5vdGlmaWNhIEVtYWlsIE9OU0lURV9SRVBPUlQgKi9cbiAgICAgICAgcmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuXG4gICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL3RyYW5zYWN0aW9uL21haWwvc2VuZFwiXG4gICAgICAgIFVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgICAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgICAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxOiBcIiArIGJvZHlfcmVxXG4gICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cbiAgICAgICAgbG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuICAgICAgICBcbiAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgIC8vbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuXG4gICAgICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpICYmICFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjA0XCIpKXtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcblxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG4gICAgICAgICAgICBDbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuICAgICAgICAgICAgZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG5cbiAgICAgICAgICAgIC8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbiAgICAgICAgICAgIENsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTtcbiAgICAgICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4gICAgICAgICAgICAvKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbiAgICAgICAgICAgIENsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpO1xuICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcblxuICAgICAgICAgICAgLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbiAgICAgICAgICAgIENsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcblxuICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG4gICAgICAgICAgICBkZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG5cbiAgICAgICAgICAgIC8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSBcIiBhcm91bmQgdmFsdWUgKi9cbiAgICAgICAgICAgIC8qUk9MTEJBQ0sqL1xuICAgICAgICAgICAgLypSaW1vemlvbmUgYWxsZWdhdG8gcmFwcG9ydG8gZGkgaW50ZXJ2ZW50byBhcHBlbmEgY3JlYXRvKi9cbiAgICAgICAgICAgIGRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5cXFwiTmFtZVxcXCIgPSBcXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5vYmpzLnJhcHBJbnRGQUFDJ10udG9TdHJpbmcoKSArIFwiXFxcIiBBTkQgXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSArIFwiIT10cnVlIEFORCBvYmplY3QgSEFWSU5HIGNvbm5lY3RlZFRpY2tldHMoa2V5ID0gXCIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArIFwiKVwiKTsgLy8gU2VlIHRoZSBjb21wbGV0ZSBsaXN0IG9mIHBvc3NpYmxlIElRTCBvbiB0aGUgSW5zaWdodCBRdWVyeSBMYW5ndWFnZSBkb2N1bWVudGF0aW9uIHBhZ2VcbiAgICAgICAgICAgIC8qIElmIHRoaXMgaXMgYSBtYW5kYXRvcnkgZmllbGQgeW91IHNob3VsZCBiZSBhYmxlIHRvIGRvIHRoaXM6ICovXG4gICAgICAgICAgICAvL2xvZy5pbmZvKFwiSW5zaWdodCBvYmplY3Q6IFwiICsgb2JqZWN0c1swXSk7XG5cbiAgICAgICAgICAgIGlmKG9iamVjdHNbMF0pe1xuICAgICAgICAgICAgICAgIC8qIFVQREFURSBPSkJFQ1QgREVMRVRFRCBWQUxVRSAqL1xuICAgICAgICAgICAgICAgIGRlZiBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihvYmplY3RzWzBdLmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkgIFxuICAgICAgICAgICAgICAgIGRlZiB2YWx1ZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuXG4gICAgICAgICAgICAgICAgZGVmIHZhbHVlQmVhbiA9IG9iVHJpYWdlLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpXG4gICAgICAgICAgICAgICAgdmFsdWVCZWFuLnNldFZhbHVlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlLmdldE9iamVjdFR5cGVBdHRyaWJ1dGVJZCgpKSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAvKkNsZWFuIGFjdHVhbCB2YWx1ZSovXG4gICAgICAgICAgICAgICAgdmFsdWUuY2xlYXIoKVxuICAgICAgICAgICAgICAgIHZhbHVlLmFkZCh2YWx1ZUJlYW4pO1xuICAgICAgICAgICAgICAgIG9iVHJpYWdlLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWUpXG5cbiAgICAgICAgICAgICAgICAvL1VwZGF0ZSBPSkJFQ1QgYXR0cmlidXRlIHZhbHVlXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiMS4gQ291bGQgbm90IHVwZGF0ZSBvYmplY3QgYXR0cmlidXRlIGR1ZSB0byB2YWxpZGF0aW9uIGV4Y2VwdGlvbjpcIiArIHZpZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLypSb2xsYmFjayBjb250YWJpbGl6emF6aW9uZSBpbnRlcnZlbnRvKi9cbiAgICAgICAgICAgIC8qQ2FuY2VsbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBPblNpdGVfUmF0ZV9SZXBvcnQgcmVnaXN0cmF0aSBuZWkgY2FtcGkgT1BBQV9MVU1QX1NVTV9SQVRFUywgT1BBQV9VTkFfVEFOVFVNX1JBVEVTLCBPUEFBX1RSQVZFTF9SQVRFUywgT1BBQV9MQUJPVVJfUkFURVMqL1xuICAgICAgICAgICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovXG5cbiAgICAgICAgICAgIC8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSBcIiBhcm91bmQgdmFsdWUgKi9cbiAgICAgICAgICAgIG9iamVjdHMgPSBpcWxGYWNhZGUuZmluZE9iamVjdHNCeUlRTEFuZFNjaGVtYShPUEFBLCBcIm9iamVjdFR5cGUgPSBcIiArIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydCddLnRvU3RyaW5nKCkgKyBcIiBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleT1cIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIpIEFORCBcXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyBcIlxcXCIgIT0gdHJ1ZVwiKTsgLy8gU2VlIHRoZSBjb21wbGV0ZSBsaXN0IG9mIHBvc3NpYmxlIElRTCBvbiB0aGUgSW5zaWdodCBRdWVyeSBMYW5ndWFnZSBkb2N1bWVudGF0aW9uIHBhZ2VcbiAgICAgICAgICAgIC8qIElmIHRoaXMgaXMgYSBtYW5kYXRvcnkgZmllbGQgeW91IHNob3VsZCBiZSBhYmxlIHRvIGRvIHRoaXM6ICovXG4gICAgICAgICAgICAvL2xvZy5pbmZvKFwiSW5zaWdodCBvYmplY3RzIGRhIGNhbmNlbGxhcmU6IFwiICsgb2JqZWN0cyk7XG5cbiAgICAgICAgICAgIGZvcihvYmogaW4gb2JqZWN0cyl7XG4gICAgICAgICAgICAgICAgLyogREVMRVRFIENPTk5FQ1RFRCBPQkpFQ1RTICovXG4gICAgICAgICAgICAgICAgb2JqZWN0RmFjYWRlLmRlbGV0ZU9iamVjdEJlYW4ob2JqLmdldElkKCkpOyAgXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qQ2FuY2VsbGFyZSBnbGkgaW1wb3J0aSBmb3JuaXRvcmUsIGNsaWVudGUgZSBpIHRvdGFsaSBzdSB0dXR0aSBnbGkgb2dnZXR0aSBDb21wb25lbnQgaW4gT1BBQV9SRVBMQUNFRF9NQVRFUklBTFMqL1xuICAgICAgICAgICAgZGVmIHJlcE1hdGVyaWFscyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YucmVwbGFjZWRNYXRlcmlhbHMnXS50b1N0cmluZygpKVswXVxuICAgICAgICAgICAgZGVmIHJlcE1hdExpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscylcblxuICAgICAgICAgICAgZm9yKG1hdCBpbiByZXBNYXRMaXN0KXtcbiAgICAgICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5kIGdldCBvYmplY3RcbiAgICAgICAgICAgICAgICBkZWYgY29tcG9uZW50PW1hdC50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgZGVmIGNvbXBvbmVudEtleSA9IGNvbXBvbmVudC5zdWJzdHJpbmcoY29tcG9uZW50LmluZGV4T2YoJygnKSsxLGNvbXBvbmVudC5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgZGVmIGNvbXBvbmVudE9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihjb21wb25lbnRLZXkpXG4gICAgICAgICAgICAgICAgLy9zZXQgXCJBUFBMSUVEX1RPXCIsIFwiQUNDT1VOVElOR19TVVBQTElFUl9NQVRFUklBTF9SRUZcIiwgXCJBQ0NPVU5USU5HX0NVU1RPTUVSX01BVEVSSUFMX1JFRlwiLCBcIlRPVEFMX0FNT1VOVF9TVVBQTElFUlwiLCBcIlRPVEFMX0FNT1VOVF9DVVNUT01FUlwiIHRvIG51bGwgZm9yIHRoYXQgY29tcG9uZW50XG5cbiAgICAgICAgICAgICAgICAvL0FQUExJRURfVE9cbiAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgICAgICAgICAgZGVmIG9iVHJpYWdlQXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICAgICAgZGVmIHZhbHVlQXBwbGllZFRvID0gb2JUcmlhZ2VBcHBsaWVkVG8uZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuIFwidmFsdWVBcHBsaWVkVG86IFwiICsgdmFsdWVBcHBsaWVkVG9cbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlQXBwbGllZFRvLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVBcHBsaWVkVG8uY2xlYXIoKSBcblxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZUFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5kZWxldGVPYmplY3RBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlQXBwbGllZFRvLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpeyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZXJyb3IoXCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOlwiICsgdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL0FDQ09VTlRJTkdfU1VQUExJRVJfTUFURVJJQUxfUkVGXG4gICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hY2NvdW50aW5nU3VwcE1hdGVyaWFsJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgICAgICBkZWYgb2JUcmlhZ2VNYXRTID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hY2NvdW50aW5nU3VwcE1hdGVyaWFsJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgICAgIGRlZiB2YWx1ZU1hdFMgPSBvYlRyaWFnZU1hdFMuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuIFwidmFsdWVNYXRTOiBcIiArIHZhbHVlTWF0U1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVNYXRTLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVNYXRTLmNsZWFyKCkgXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2VNYXRTID0gb2JqZWN0RmFjYWRlLmRlbGV0ZU9iamVjdEF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2VNYXRTLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpeyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZXJyb3IoXCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOlwiICsgdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL0FDQ09VTlRJTkdfQ1VTVE9NRVJfTUFURVJJQUxfUkVGXG4gICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hY2NvdW50aW5nQ3VzdE1hdGVyaWFsJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgICAgICBkZWYgb2JUcmlhZ2VNYXRDID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hY2NvdW50aW5nQ3VzdE1hdGVyaWFsJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgICAgIGRlZiB2YWx1ZU1hdEMgPSBvYlRyaWFnZU1hdEMuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuIFwidmFsdWVNYXRDOiBcIiArIHZhbHVlTWF0Q1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVNYXRDLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVNYXRDLmNsZWFyKCkgXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2VNYXRDID0gb2JqZWN0RmFjYWRlLmRlbGV0ZU9iamVjdEF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2VNYXRDLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpeyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZXJyb3IoXCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOlwiICsgdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy9UT1RBTF9BTU9VTlRfU1VQUExJRVJcbiAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdFN1cHAnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgICAgIGRlZiBvYlRyaWFnZVRvdFMgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdFN1cHAnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICAgICAgZGVmIHZhbHVlVG90UyA9IG9iVHJpYWdlVG90Uy5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4gXCJ2YWx1ZVRvdFM6IFwiICsgdmFsdWVUb3RTXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZVRvdFMuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVRvdFMuY2xlYXIoKSBcblxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZVRvdFMgPSBvYmplY3RGYWNhZGUuZGVsZXRlT2JqZWN0QXR0cmlidXRlQmVhbihvYlRyaWFnZVRvdFMuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSl7IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5lcnJvcihcIkNvdWxkIG5vdCB1cGRhdGUgb2JqZWN0IGF0dHJpYnV0ZSBkdWUgdG8gdmFsaWRhdGlvbiBleGNlcHRpb246XCIgKyB2aWUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vVE9UQUxfQU1PVU5UX0NVU1RPTUVSXG4gICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RDdXN0J10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgICAgICBkZWYgb2JUcmlhZ2VUb3RDID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RDdXN0J10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgICAgIGRlZiB2YWx1ZVRvdEMgPSBvYlRyaWFnZVRvdEMuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuIFwidmFsdWVUb3RDOiBcIiArIHZhbHVlVG90Q1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVUb3RDLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVUb3RDLmNsZWFyKCkgXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2VUb3RDID0gb2JqZWN0RmFjYWRlLmRlbGV0ZU9iamVjdEF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2VUb3RDLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpeyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZXJyb3IoXCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOlwiICsgdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ICAgIFxuXG4gICAgICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgICAgICBsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXG5cbiAgICAgICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICAgICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICBcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiU0VORE1BSUxcIilcbiAgICAgICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKSlcbiAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChqc29uX29iamVjdC5tZXNzYWdlKVxuICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgLypMJ2VtYWlsIFx1MDBlOCBzdGF0YSBpbnZpYXRhIGNvcnJldHRhbWVudGUsIGFnZ2lvcm5vIGlsIGNhbXBvIE9OU0lURV9SRVBPUlQgY29uIGxhIGRhdGEgY29ycmVudGUqL1xuXG4gICAgICAgICAgICAvLyBsb2cud2FybiBcImlzc3VlIFwiK2lzc3VlLmdldEtleSgpXG4gICAgICAgICAgICBkZWYgY2Z2ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShvbnNpdGVSZXBvcnREYXRlKVxuICAgICAgICAgICAgaWYgKCFjZnYpIHtcbiAgICAgICAgICAgICAgZGVmIHQwICA9IG5ldyBqYXZhLnNxbC5UaW1lc3RhbXAoU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkpXG4gICAgICAgICAgICAgIGxvZy53YXJuIFwiU3RhcnRUaW1lID0+ICdcIit0MC50b1N0cmluZygpK1wiJ1wiXG4gICAgICAgICAgICAgIGRlZiBtdiA9IG5ldyBNb2RpZmllZFZhbHVlKG9uc2l0ZVJlcG9ydERhdGUsIHQwKVxuICAgICAgICAgICAgICBkZWYgY2ggPSBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKClcbiAgICAgICAgICAgICAgb25zaXRlUmVwb3J0RGF0ZS51cGRhdGVWYWx1ZShudWxsLCBpc3N1ZSwgbXYsIGNoKSBcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGxvZy53YXJuIFwiU3RhcnRUaW1lID09ICdcIitjZnYudG9TdHJpbmcoKStcIidcIlxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="Not Done" status="Done" step="6">
              <post-functions>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdateissuestatus-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowcreatecomment-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">f4339be8-c25a-4951-b5bf-e4f2a6ac6e06</arg>
                  <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIGxpbmtlZFRpY2tldHMgJiBGYXN0LVRyYW5zYWN0IHRoZW0=</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5sb2cud2FybiBcIiR7aXNzdWUua2V5fSBUcmFuc2F6aW9uZSBDb21wbGV0ZSAtIFBvc3QgRnVuY3Rpb24gY2hlY2sgbGlua2VkSXNzdWVzXCJcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuZGVmIGF1dG9tYXRpY2FsbHlDbG9zZWQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlDbG9zZWQnXS50b1N0cmluZygpKVswXVxuSXNzdWVJbmRleGluZ1NlcnZpY2UgXHRpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSlcblxuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL2lzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0yNzZcIilcblxuU1RBUlRfUFJPR1JFU1M9cHJvcGVydGllc1snd2YudHIuc3RhcnRQcm9ncmVzcyddXG5DT01QTEVURT1wcm9wZXJ0aWVzWyd3Zi50ci5jb21wbGV0ZSddXG5cbmRlZiB1c2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXG5kZWYgaXNzdWVTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVTZXJ2aWNlKClcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG5sb2cud2FybiBcImlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCk6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKVxuXG5pZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpPT1udWxsIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkudG9TdHJpbmcoKS5lcXVhbHMoXCJOb1wiKSl7XG4gICAgLypPUC0xMDM4OiBzZSBobyBlc2VndWl0byBsYSBDb21wbGV0ZSBzdWwgdGlja2V0IFwicGFkcmVcIiB2ZXJpZmljbyBlIHNwb3N0byBpbiBhdXRvbWF0aWNvIGdsaSBldmVudHVhbGkgdGlja2V0IGNvbGxlZ2F0aSovXG4gICAgXG4gICAgbG9nLndhcm4gXCJ2ZXJpZmljbyBlIHNwb3N0byBpbiBhdXRvbWF0aWNvIGdsaSBldmVudHVhbGkgdGlja2V0IGNvbGxlZ2F0aVwiXG4gICAgXG4gICAgTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG4gICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgIC8qRXNlZ3VpcmUgdHJhbnNhemlvbmUgZGkgc3RhdG8gY29uIE9QQUFfQVVUT01BVElDQUxMWV9DTE9TRUQ9WWVzIGRlbGxhIHNvdXJjZUlzc3VlKi9cbiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZSA9IGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKVxuICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlU3RhdHVzID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzKClcbiAgICAgICAgICAgIGxvZy53YXJuIFwiSXNzdWUgY29uIHJlbGF0ZXNJbklzc3VlTGluayAke2xpbmtlZElzc3VlfSBjb24gc3RhdG8gJHtsaW5rZWRJc3N1ZVN0YXR1c31cIlxuICAgICAgICAgICAgZGVmIHRyYW5zaXRpb25JZFxuICAgICAgICAgICAgaWYobGlua2VkSXNzdWVTdGF0dXMubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5jb25maXJtZWRBbmRQbGFubmVkJ10udG9TdHJpbmcoKSl7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbklkPVNUQVJUX1BST0dSRVNTXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lID09IHByb3BlcnRpZXNbJ3dmLmluUHJvZ3Jlc3MnXS50b1N0cmluZygpKXtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9Q09NUExFVEVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHRyYW5zaXRpb25JZD09U1RBUlRfUFJPR1JFU1Mpe1xuICAgICAgICAgICAgICAgIC8vIFByZXBhcmUgb3VyIGlucHV0IGZvciB0aGUgdHJhbnNpdGlvblxuICAgICAgICAgICAgICAgIGRlZiBpc3N1ZUlucHV0UGFyYW1ldGVycyA9IGlzc3VlU2VydmljZS5uZXdJc3N1ZUlucHV0UGFyYW1ldGVycygpXG4gICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7XG4gICAgICAgICAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayhmYWxzZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy9kZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKVxuICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09IFwiWWVzXCIgfVxuICAgICAgICAgICAgICAgIC8vaXNzdWVJbnB1dFBhcmFtZXRlcnMuYWRkQ3VzdG9tRmllbGRWYWx1ZShmaWVsZENvbmZpZy5nZXRJZCgpLCBcIlllc1wiKSBcbiAgICAgICAgICAgICAgICAvL2xvZy53YXJuIFwiaXNzdWVJbnB1dFBhcmFtZXRlcnM6IFwiICsgaXNzdWVJbnB1dFBhcmFtZXRlcnNcbiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcbiAgICAgICAgICAgICAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBsaW5rZWRJc3N1ZVxuXG4gICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSlcbiAgICAgICAgICAgICAgICBsb2cud2FybiBcImZpZWxkQ29uZmlnOiBcIiArIGZpZWxkQ29uZmlnXG4gICAgICAgICAgICAgICAgZGVmIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gXCJZZXNcIiB9XG4gICAgICAgICAgICAgICAgYXV0b21hdGljYWxseUNsb3NlZC51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcblxuICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGxpbmtlZElzc3VlKVxuICAgICAgICAgICAgICAgIGxvZy53YXJuIFwiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGFcIlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vZGVmIHZhbGlkYXRpb25SZXN1bHQgPSBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKVxuICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgdHJhbnNpdGlvblxuICAgICAgICAgICAgICAgICAgICBkZWYgaXNzdWVSZXN1bHQgPSBpc3N1ZVNlcnZpY2UudHJhbnNpdGlvbih1c2VyLCBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEgaXNzdWVSZXN1bHQuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIkZhaWxlZCB0byB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiVHJhbnNhemlvbmUgZmF0dGEgOTYgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSwgJHtsaW5rZWRJc3N1ZS5zdGF0dXN9XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBSRVNUIEFQSSBwZXIgcHVsaXppYSBjYWNoZSBpc3N1ZSBsaW5rYXRhICovXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0TWV0aG9kID0gXCJHRVRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qU2NyaXB0IFZhcmlhYmxlcyovXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1BlciB0ZXN0IGRhIGNvbnNvbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMzI1MzVcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL2NsZWFyQ2FjaGUvdGlja2V0a2V5L1wiICsgbGlua2VkSXNzdWUua2V5XG4gICAgICAgICAgICAgICAgICAgICAgICBVUkwgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgICAgICAgICAgICAgICAgICAgICAgSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbklkPUNPTVBMRVRFXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQcmVwYXJlIG91ciBpbnB1dCBmb3IgdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKClcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGgge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayhmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLy9Db21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gXCJZZXNcIiB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2lzc3VlSW5wdXRQYXJhbWV0ZXJzLmFkZEN1c3RvbUZpZWxkVmFsdWUoZmllbGRDb25maWcuZ2V0SWQoKSwgXCJZZXNcIikgXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3ZhbGlkYXRpb25SZXN1bHQgPSBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKVxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pID0gKE11dGFibGVJc3N1ZSkgbGlua2VkSXNzdWVcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9maWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcobGlua2VkSXNzdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2xvZy53YXJuIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vYXV0b21hdGljYWxseUNsb3NlZC51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9Db21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2lzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2xvZy53YXJuIFwiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIkZhaWxlZCB0byB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlRyYW5zYXppb25lIGZhdHRhIDEyNCAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c31cIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogUkVTVCBBUEkgcGVyIHB1bGl6aWEgY2FjaGUgaXNzdWUgbGlua2F0YSAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0TWV0aG9kID0gXCJHRVRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLypTY3JpcHQgVmFyaWFibGVzKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMzI1MzVcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vY2xlYXJDYWNoZS90aWNrZXRrZXkvXCIgKyBsaW5rZWRJc3N1ZS5rZXlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIkNvdWxkIG5vdCB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJDb3VsZCBub3QgdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmVycm9yQ29sbGVjdGlvbn1cIilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ZWxzZSBpZiAodHJhbnNpdGlvbklkPT1DT01QTEVURSl7XG4gICAgICAgICAgICAgICAgZGVmIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKClcbiAgICAgICAgICAgICAgICBpc3N1ZUlucHV0UGFyYW1ldGVycy53aXRoIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0U2tpcFNjcmVlbkNoZWNrKGZhbHNlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL2RlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpXG4gICAgICAgICAgICAgICAgLy9Db21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gXCJZZXNcIiB9XG4gICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksIFwiWWVzXCIpIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlXG5cbiAgICAgICAgICAgICAgICBkZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGxpbmtlZElzc3VlKVxuICAgICAgICAgICAgICAgIGxvZy53YXJuIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcbiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q2xvc2VkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuXG4gICAgICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpXG4gICAgICAgICAgICAgICAgbG9nLndhcm4gXCJVcGRhdGVkIGN1c3RvbWZpZWxkIC0gaXNzdWUgbGlua2F0YVwiXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy9kZWYgdmFsaWRhdGlvblJlc3VsdCA9IGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpXG4gICAgICAgICAgICAgICAgaWYgKGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSB0cmFuc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpKVxuICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259XCIpXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJUcmFuc2F6aW9uZSBmYXR0YSAxNjEgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSwgJHtsaW5rZWRJc3N1ZS5zdGF0dXN9XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBSRVNUIEFQSSBwZXIgcHVsaXppYSBjYWNoZSBpc3N1ZSBsaW5rYXRhICovXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0TWV0aG9kID0gXCJHRVRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qU2NyaXB0IFZhcmlhYmxlcyovXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1BlciB0ZXN0IGRhIGNvbnNvbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMzI1MzVcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL2NsZWFyQ2FjaGUvdGlja2V0a2V5L1wiICsgbGlua2VkSXNzdWUua2V5XG4gICAgICAgICAgICAgICAgICAgICAgICBVUkwgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgICAgICAgICAgICAgICAgICAgICAgSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJDb3VsZCBub3QgdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmVycm9yQ29sbGVjdGlvbn1cIilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgTGlzdDxJc3N1ZUxpbms+IGFsbE91dElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgIGxvZy53YXJuIFwiSXNzdWUgY29uIHJlbGF0ZXNPdXRJc3N1ZUxpbmtcIlxuICAgICAgICAgICAgLypFc2VndWlyZSB0cmFuc2F6aW9uZSBkaSBzdGF0byBjb24gT1BBQV9BVVRPTUFUSUNBTExZX0NMT1NFRD1ZZXMgZGVsbGEgZGVzdGluYXRpb25Jc3N1ZSovXG4gICAgICAgICAgICBkZWYgbGlua2VkSXNzdWUgPSBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKVxuICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlU3RhdHVzID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzKClcbiAgICAgICAgICAgIGRlZiB0cmFuc2l0aW9uSWRcbiAgICAgICAgICAgIGxvZy53YXJuIFwibGlua2VkSXNzdWU6IFwiICsgbGlua2VkSXNzdWVcbiAgICAgICAgICAgIGxvZy53YXJuIFwibGlua2VkSXNzdWVTdGF0dXMubmFtZTogXCIgKyBsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lXG4gICAgICAgICAgICBpZihsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lID09IFwiQ29uZmlybWVkIGFuZCBQbGFubmVkXCIpe1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb25JZD1TVEFSVF9QUk9HUkVTU1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYobGlua2VkSXNzdWVTdGF0dXMubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5pblByb2dyZXNzJ10udG9TdHJpbmcoKSl7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbklkPUNPTVBMRVRFXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2cud2FybiBcInRyYW5zaXRpb25JZDogXCIgKyB0cmFuc2l0aW9uSWRcbiAgICAgICAgICAgIGlmKHRyYW5zaXRpb25JZD09U1RBUlRfUFJPR1JFU1Mpe1xuICAgICAgICAgICAgICAgIC8vIFByZXBhcmUgb3VyIGlucHV0IGZvciB0aGUgdHJhbnNpdGlvblxuICAgICAgICAgICAgICAgIGRlZiBpc3N1ZUlucHV0UGFyYW1ldGVycyA9IGlzc3VlU2VydmljZS5uZXdJc3N1ZUlucHV0UGFyYW1ldGVycygpXG4gICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7XG4gICAgICAgICAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayhmYWxzZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy9kZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKVxuICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09IFwiWWVzXCIgfVxuICAgICAgICAgICAgICAgIC8vaXNzdWVJbnB1dFBhcmFtZXRlcnMuYWRkQ3VzdG9tRmllbGRWYWx1ZShmaWVsZENvbmZpZy5nZXRJZCgpLCBcIlllc1wiKSBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcbiAgICAgICAgICAgICAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBsaW5rZWRJc3N1ZVxuXG4gICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSlcbiAgICAgICAgICAgICAgICBsb2cud2FybiBcImZpZWxkQ29uZmlnOiBcIiArIGZpZWxkQ29uZmlnXG4gICAgICAgICAgICAgICAgZGVmIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gXCJZZXNcIiB9XG4gICAgICAgICAgICAgICAgYXV0b21hdGljYWxseUNsb3NlZC51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcblxuICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGxpbmtlZElzc3VlKVxuICAgICAgICAgICAgICAgIGxvZy53YXJuIFwiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGFcIlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vZGVmIHZhbGlkYXRpb25SZXN1bHQgPSBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKVxuICAgICAgICAgICAgICAgIGxvZy53YXJuIFwiaXNzdWVJbnB1dFBhcmFtZXRlcnM6IFwiICsgaXNzdWVJbnB1dFBhcmFtZXRlcnNcbiAgICAgICAgICAgICAgICBpZiAoaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgZGVmIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpXG4gICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJGYWlsZWQgdG8gdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn1cIilcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlRyYW5zYXppb25lIGZhdHRhIDIxOCAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c31cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFJFU1QgQVBJIHBlciBwdWxpemlhIGNhY2hlIGlzc3VlIGxpbmthdGEgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RNZXRob2QgPSBcIkdFVFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgLypTY3JpcHQgVmFyaWFibGVzKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vUGVyIHRlc3QgZGEgY29uc29sZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy0zMjUzNVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vY2xlYXJDYWNoZS90aWNrZXRrZXkvXCIgKyBsaW5rZWRJc3N1ZS5rZXlcbiAgICAgICAgICAgICAgICAgICAgICAgIFVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgICAgICAgICAgICAgICAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9Q09NUExFVEVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFByZXBhcmUgb3VyIGlucHV0IGZvciB0aGUgdHJhbnNpdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKVxuICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0U2tpcFNjcmVlbkNoZWNrKGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy9maWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0NvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vaXNzdWVJbnB1dFBhcmFtZXRlcnMuYWRkQ3VzdG9tRmllbGRWYWx1ZShmaWVsZENvbmZpZy5nZXRJZCgpLCBcIlllc1wiKSBcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pID0gKE11dGFibGVJc3N1ZSkgbGlua2VkSXNzdWVcblxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGxpbmtlZElzc3VlKVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4gXCJmaWVsZENvbmZpZzogXCIgKyBmaWVsZENvbmZpZ1xuICAgICAgICAgICAgICAgICAgICAgICAgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9tYXRpY2FsbHlDbG9zZWQudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybiBcIlVwZGF0ZWQgY3VzdG9tZmllbGQgLSBpc3N1ZSBsaW5rYXRhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy92YWxpZGF0aW9uUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycylcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSB0cmFuc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVSZXN1bHQgPSBpc3N1ZVNlcnZpY2UudHJhbnNpdGlvbih1c2VyLCBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJGYWlsZWQgdG8gdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn1cIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJUcmFuc2F6aW9uZSBmYXR0YSAyNDggJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSwgJHtsaW5rZWRJc3N1ZS5zdGF0dXN9XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFJFU1QgQVBJIHBlciBwdWxpemlhIGNhY2hlIGlzc3VlIGxpbmthdGEgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdE1ldGhvZCA9IFwiR0VUXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qU2NyaXB0IFZhcmlhYmxlcyovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vUGVyIHRlc3QgZGEgY29uc29sZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTMyNTM1XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL2NsZWFyQ2FjaGUvdGlja2V0a2V5L1wiICsgbGlua2VkSXNzdWUua2V5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJDb3VsZCBub3QgdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmVycm9yQ29sbGVjdGlvbn1cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259XCIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgbG9nLndhcm4gXCJpc3N1ZSBkYSBjb21wbGV0YXJlXCJcbiAgICAgICAgICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKVxuICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGgge1xuICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2soZmFsc2UpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSlcbiAgICAgICAgICAgICAgICAvL0NvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICAgICAgICAgICAgICAvL2lzc3VlSW5wdXRQYXJhbWV0ZXJzLmFkZEN1c3RvbUZpZWxkVmFsdWUoZmllbGRDb25maWcuZ2V0SWQoKSwgXCJZZXNcIikgXG4gICAgICAgICAgICAgICAgLy9sb2cud2FybiBcInZhbGlkYXRlUmVzdWx0XCJcbiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcbiAgICAgICAgICAgICAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBsaW5rZWRJc3N1ZVxuXG4gICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSlcbiAgICAgICAgICAgICAgICBsb2cud2FybiBcImZpZWxkQ29uZmlnOiBcIiArIGZpZWxkQ29uZmlnXG4gICAgICAgICAgICAgICAgZGVmIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gXCJZZXNcIiB9XG4gICAgICAgICAgICAgICAgYXV0b21hdGljYWxseUNsb3NlZC51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcblxuICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGxpbmtlZElzc3VlKVxuICAgICAgICAgICAgICAgIGxvZy53YXJuIFwiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGFcIlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgdHJhbnNpdGlvblxuICAgICAgICAgICAgICAgICAgICBkZWYgaXNzdWVSZXN1bHQgPSBpc3N1ZVNlcnZpY2UudHJhbnNpdGlvbih1c2VyLCBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEgaXNzdWVSZXN1bHQuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIkZhaWxlZCB0byB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiVHJhbnNhemlvbmUgZmF0dGEgMjg1ICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn0sICR7bGlua2VkSXNzdWUuc3RhdHVzfVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLyogUkVTVCBBUEkgcGVyIHB1bGl6aWEgY2FjaGUgaXNzdWUgbGlua2F0YSAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdE1ldGhvZCA9IFwiR0VUXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKlNjcmlwdCBWYXJpYWJsZXMqL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTMyNTM1XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvYXV0b21hdGlvbi9jbGVhckNhY2hlL3RpY2tldGtleS9cIiArIGxpbmtlZElzc3VlLmtleVxuICAgICAgICAgICAgICAgICAgICAgICAgVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICAgICAgICAgICAgICAgICAgICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259XCIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_22693</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowgeneratechangehistory-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowreindexissue-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="631" name="Intervento Eseguito no Linked" view="fieldscreen">
          <meta name="opsbar-sequence">20</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">19909</meta>
          <restrict-to>
            <conditions type="AND">
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">cd0dd24f-b782-4024-a92e-4d4074c29982</arg>
                <arg name="FIELD_NOTES">YCFgTmV3IEluc3RhbGxhdGlvbg==</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnTmV3IEluc3RhbGxhdGlvbiciLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
              </condition>
              <condition type="class">
                <arg name="issuesComparison">MUST_NOT_FIND_ISSUES</arg>
                <arg name="jqlQuery">issuekey={issue.issuekey} AND issueFunction in linkedIssuesOf(&quot;status='Confirmed and planned'&quot;, &quot;relates to&quot;)</arg>
                <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                <arg name="conditionValue">1</arg>
                <arg name="class.name">com.googlecode.jsu.workflow.condition.JqlCondition</arg>
                <arg name="fieldValue"></arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="6">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">886f8744-f504-454d-8533-7c8c1e78c1dd</arg>
                  <arg name="FIELD_NOTES">YCFgU2V0IEFTU0VUIElOU1RBTExBVElPTl9EQVRFID0gT1BfRVhFQ1VUSU9OX0RBVEU=</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5cbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5kZWYgZXhlY3V0aW9uRGF0ZSA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuZXhlY3V0aW9uRGF0ZSddLnRvU3RyaW5nKCkpWzBdXG5kZWYgYXNzZXQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmFzc2V0J10udG9TdHJpbmcoKSlbMF1cblxuZGVmIHJlcXVlc3RNZXRob2RcbmRlZiBiYXNlVVJMXG5cbi8qU2NyaXB0IFZhcmlhYmxlcyovXG4vL1BlciB0ZXN0IGRhIGNvbnNvbGVcbi8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMzcxOVwiKVxuXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5cbi8qUmltb3ppb25lIGFsbGVnYXRvIHJhcHBvcnRvIGRpIGludGVydmVudG8gYXBwZW5hIGNyZWF0byovXG4vKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG5cbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTtcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcblxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcblxuQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG5kZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG5cbmxvZy5kZWJ1ZyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0KVswXS5nZXRJZCgpXG5sb2cuZGVidWcgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShleGVjdXRpb25EYXRlKVxuXG5kZWYgb2JqID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXQpWzBdLmdldElkKCkpO1xuZGVmIGluc3RhbGxhdGlvbkRhdGUgPSBwcm9wZXJ0aWVzWydpb2JqLmhhcmR3YXJlLmluc3REYXRlLmlkJ10gPyBwcm9wZXJ0aWVzWydpb2JqLmhhcmR3YXJlLmluc3REYXRlLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKSA6IDI5NTZcbmRlZiBhdHRyaWJUeXBlID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uRGF0ZSk7IFxuXG5kZWYgbmV3QXR0cmliID0gb2JqLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW4oYXR0cmliVHlwZSk7XG5kZWYgbmV3QXR0cmliVmFsdWUgPSBuZXdBdHRyaWIuY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7XG5cbnRyeSB7XG4gICAgbmV3QXR0cmliVmFsdWUuc2V0VmFsdWUoYXR0cmliVHlwZSwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShleGVjdXRpb25EYXRlKSsxKTtcbn0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHtcbiAgICBsb2cud2FybihcIlNFVElOU0lHSFRWQUxVRTogVW5hYmxlIHRvIHNldCBhdHRyaWJ1dGUgXCIgKyBhdHRyaWJUeXBlICsgXCIgdG8gXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGV4ZWN1dGlvbkRhdGUpICsgXCIuIEV4aXRpbmcuXCIpO1xuICAgIGxvZy53YXJuKFNFVElOU0lHSFRWQUxVRTogdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5kZWYgYXR0cmliVmFsdWVzID0gbmV3QXR0cmliLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTtcbmF0dHJpYlZhbHVlcy5hZGQobmV3QXR0cmliVmFsdWUpO1xubmV3QXR0cmliLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoYXR0cmliVmFsdWVzKTtcblxudHJ5IHtcbiAgICBuZXdBdHRyaWIgPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG5ld0F0dHJpYik7XG59IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XG4gICAgbG9nLndhcm4oXCJTRVRJTlNJR0hUVkFMVUU6IFVuYWJsZSB0byBzYXZlIGNoYW5nZXMuIEV4aXRpbmcuXCIpO1xuICAgIGxvZy53YXJuKFNFVElOU0lHSFRWQUxVRTogdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgcmV0dXJuIGZhbHNlO1xufVxubG9nLmluZm8oXCJTRVRJTlNJR0hUVkFMVUU6IFN1Y2Nlc3NmdWxseSBzYXZlZCB2YWx1ZVwiKTtcbiIsInNjcmlwdFBhdGgiOm51bGx9</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">ecba5d38-8970-49d4-af83-757b269ecbb1</arg>
                  <arg name="FIELD_NOTES">YCFgIE9QIEVtYWlsIE5vdGlmaWNhdGlvbjogVEtUX0VYRUNVVEVEIC0gTWFudGVudXRhIGNvbWUgcG9zdCBmdW5jdGlvbiBwZXIgbm9uIGdlbmVyYXJlIGJsb2NjaGkgYWwgZm9ybml0b3JlIGxlZ2F0aSBhIGVycm9yaSBkaSBpbnZpbyBtYWlsIGludGVybmUg</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnlcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5kZWYgcmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5cbmRlZiBib2R5X3JlcSA9IFtcblx0XCJ0ZW1wbGF0ZU5hbWVcIjogXCJUS1RfRVhFQ1VURURcIixcblx0XCJwZWNcIjogZmFsc2UsXG4gICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXlcbl1cblxuZGVmIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL3RyYW5zYWN0aW9uL21haWwvc2VuZFwiXG5VUkwgdXJsXG51cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG5cbkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbmNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5jb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG5sb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbmNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG5sb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG5sb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG5sb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG5sb2cuZGVidWcgXCJnZXRSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG5cbiIsInNjcmlwdFBhdGgiOm51bGx9</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="5" name="In Progress">
      <meta name="jira.status.id">3</meta>
      <actions>
<common-action id="141" />
<common-action id="841" />
        <action id="151" name="Annulla Rapporto di Intervento">
          <meta name="opsbar-sequence">20</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <results>
            <unconditional-result old-status="null" status="null" step="4">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="501" name="Clona Tkt" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">20401</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">c659704c-9678-4844-9a05-6f3497e391e7</arg>
                <arg name="FIELD_NOTES">YCFgRW5hYmxlZCBvbmx5IGZvciBSZXBhaXIgYW5kIE5ldyBJbnN0YWxsYXRpb24=</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnTWFpbnRlbmFuY2UgVGlja2V0JyB8fCAoaXNzdWUuaXNzdWVUeXBlLm5hbWUgPT0gJ05ldyBJbnN0YWxsYXRpb24nICYmIGNmVmFsdWVzWydPUF9BU1NFVCddICE9IG51bGwpIiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="5">
              <post-functions>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="fieldValue">New Installation</arg>
                  <arg name="preconditionMode-textValue">DISCARD</arg>
                  <arg name="fieldsList">issuetype</arg>
                </function>
                <function type="class">
                  <arg name="field.existingAttachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="targetIssueTypeDefinedByCfSelection"></arg>
                  <arg name="issueTypeId">12301</arg>
                  <arg name="scopeType">ISSUE_LINKING</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="field.attachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="targetIssueType">SELECTED_ISSUE_TYPE</arg>
                  <arg name="scopeSource-jql"></arg>
                  <arg name="createIssueAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.copyTransitionComment">false</arg>
                  <arg name="targetProjectType">SAME</arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="transitionAttachmentsOperation">copy</arg>
                  <arg name="field.issueAssignTo">ASSIGN_TO_UNASSIGNED</arg>
                  <arg name="targetProjectSelectedCustomField"></arg>
                  <arg name="destination-scopeTarget">LINK_END</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiescreatelinkedissue-function</arg>
                  <arg name="scopeDestination-linkEnd">10003:OUTWARD</arg>
                  <arg name="field.enablingCustomFieldId"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="subFunctions">[{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_21909&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21909&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22600&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22600&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22822&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22822&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22601&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22601&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22603&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22603&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22663&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22663&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22634&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22634&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22651&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22651&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22700&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22700&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22606&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22606&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22607&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22607&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22629&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22629&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22652&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22652&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;description&quot;,&quot;destinationFieldId&quot;:&quot;description&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22627&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22627&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22620&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22620&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22668&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22668&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23602&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23203&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22814&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22814&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23237&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23237&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;issuekey&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23243&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;YES&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23238&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22702&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22702&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22703&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22703&quot;}}]</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.createlinkedissue.CreateLinkedIssueFunction</arg>
                  <arg name="projectId">11228</arg>
                </function>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="fieldValue">Maintenance Ticket</arg>
                  <arg name="preconditionMode-textValue">DISCARD</arg>
                  <arg name="fieldsList">issuetype</arg>
                </function>
                <function type="class">
                  <arg name="field.existingAttachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="targetIssueTypeDefinedByCfSelection"></arg>
                  <arg name="issueTypeId">13001</arg>
                  <arg name="scopeType">ISSUE_LINKING</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="field.attachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="targetIssueType">SELECTED_ISSUE_TYPE</arg>
                  <arg name="scopeSource-jql"></arg>
                  <arg name="createIssueAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.copyTransitionComment">false</arg>
                  <arg name="targetProjectType">SAME</arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="transitionAttachmentsOperation">copy</arg>
                  <arg name="field.issueAssignTo">ASSIGN_TO_UNASSIGNED</arg>
                  <arg name="targetProjectSelectedCustomField"></arg>
                  <arg name="destination-scopeTarget">LINK_END</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiescreatelinkedissue-function</arg>
                  <arg name="scopeDestination-linkEnd">10003:OUTWARD</arg>
                  <arg name="field.enablingCustomFieldId"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="subFunctions">[{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_21909&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21909&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22600&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22600&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22822&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22822&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22601&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22601&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22603&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22603&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22663&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22663&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22634&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22634&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22651&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22651&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22700&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22700&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22606&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22606&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22607&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22607&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22629&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22629&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22652&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22652&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;description&quot;,&quot;destinationFieldId&quot;:&quot;description&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22627&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22627&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22620&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22620&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22668&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22668&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23602&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23203&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22814&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22814&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23237&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23237&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;issuekey&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23243&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;YES&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23238&quot;}}]</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.createlinkedissue.CreateLinkedIssueFunction</arg>
                  <arg name="projectId">11228</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_23602</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="451" name="Modifica Impianto">
          <meta name="opsbar-sequence">50</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">19072275-7e71-48ef-9842-e5955dbe1cd9</arg>
                <arg name="FIELD_NOTES">YCFgTm90IGVuYWJsZWQgZm9yIFBNIFRpY2tldHM=</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJjZlZhbHVlc1snT1BfQVNTRVQnXSAhPSBudWxsIiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="Not Done" status="Done" step="5">
              <post-functions>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdateissuestatus-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowcreatecomment-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowgeneratechangehistory-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowreindexissue-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="971" name="Intervento Completato" view="fieldscreen">
          <meta name="opsbar-sequence">10</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">19910</meta>
          <restrict-to>
            <conditions type="AND">
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">e11c2942-0754-423c-8e92-d78a6375f221</arg>
                <arg name="FIELD_NOTES">YCFgZGlzYWJsZWQ=</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="disabled">false</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5pc3N1ZVR5cGUubmFtZSAhPSAnUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXQnICYmIGlzc3VlLmlzc3VlVHlwZS5uYW1lICE9IFwiTWFpbnRlbmFuY2UgVGlja2V0XCIgJiYgaXNzdWUuaXNzdWVUeXBlLm5hbWUgIT0gXCJOZXcgSW5zdGFsbGF0aW9uXCIiLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
              <condition type="class">
                <arg name="RESOLUTION_FIELD_NAME">6</arg>
                <arg name="FIELD_FUNCTION_ID">fc8b9dd9-f011-4c94-85b2-3dad9c428711</arg>
                <arg name="FIELD_NOTES">YCFgRm9yIFBNIFRpY2tldHMgLSBhbGwgc3ViLXRhc2tzIG11c3QgYmUgcmVzb2x2ZWQ=</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.AllSubtasksResolvedCondition</arg>
                <arg name="disabled">true</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">fa37467a9382f8924cd169d5ba599dcb71925405</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIFJlcXVpcmVkIEZpZWxkcyAtIHNvbG8gZXJyb3JzLCBubyB3YXJuaW5ncw==</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5cblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcblxuLy9Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKClcbi8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMjUxMTJcIilcblxubG9nLmRlYnVnIFwiVHJhbnNhemlvbmUgQ29tcGxldGUgLSBQcmltbyB2YWxpZGF0b3JcIlxubG9nLmRlYnVnIFwiVHJhbnNhemlvbmUgQ29tcGxldGUgLSBQcmltbyB2YWxpZGF0b3IgLSBJc3N1ZTogXCIgKyBpc3N1ZVxuXG5kZWYgZXJyb3JzID0gZmFsc2VcbmRlZiB3YXJuaW5ncyA9IGZhbHNlXG5cbmRlZiBhdXRvbWF0aWNhbGx5Q2xvc2VkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q2xvc2VkJ10udG9TdHJpbmcoKSlbMF1cblxuZGVmIGFzc2V0ID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hc3NldCddLnRvU3RyaW5nKCkpWzBdXG5kZWYgYXNzZXRTdGF0dXNQcmUgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmFzc2V0U3RhdHVzUHJlJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBhc3NldFN0YXR1c1Bvc3QgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmFzc2V0U3RhdHVzUG9zdCddLnRvU3RyaW5nKCkpWzBdXG5kZWYgcmlzayA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yucmlza09uc2l0ZSddLnRvU3RyaW5nKCkpWzBdXG5kZWYgcmlza0Rlc2NyaXB0aW9uID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5yaXNrRGVzY3JpcHRpb24nXS50b1N0cmluZygpKVswXVxuZGVmIGN1c3RTaWduYXR1cmUgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmN1c3RvbWVyU2lnbmF0dXJlJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBjdXN0UmVmID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5jdXN0Q29udGFjdE9uc2l0ZSddLnRvU3RyaW5nKCkpWzBdXG4vL2RlZiB0ZWNoU2lnbmF0dXJlID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi50ZWNobmljaWFuU2lnbmF0dXJlJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBrbXMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmttcyddLnRvU3RyaW5nKCkpWzBdXG5kZWYgdHJhdmVsSCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YudHJhdmVsSG91cnMnXS50b1N0cmluZygpKVswXVxuZGVmIGV4ZWN1dGlvbkRhdGUgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmV4ZWN1dGlvbkRhdGUnXS50b1N0cmluZygpKVswXVxuZGVmIHRlY2hzT25zaXRlID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi50ZWNobmljaWFuc09uc2l0ZSddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiByZXBNYXRlcmlhbHMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJlcGxhY2VkTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF1cbmRlZiByZXFNYXRlcmlhbHMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJlcXVpcmVkTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF1cblxuZGVmIHRyYW5zaXRpb25DaGVjayA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY2hlY2tBbmRDb25maXJtJ10udG9TdHJpbmcoKSlbMF1cblxuZGVmIGx1bXBTdW1QcmljZSA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YubHVtcFN1bVByaWNlJ10udG9TdHJpbmcoKSlbMF1cblxuZGVmIGVycm9yTWFuZGF0b3J5RmllbGRzID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgZXJyb3JKb2JTdGFydGVkQ29tcGxldGVkRmllbGRzID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgZXJyb3JKb2JTdGFydGVkQ29tcGxldGVkdnNFeGVjdXRpb24gPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlcnJvckpvYlN0YXJ0ZWREYXRldnNDb21wbGV0ZWQgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlcnJvckdsb2JhbEV4ZWN1dGlvbkRhdGUgPSBmYWxzZVxuZGVmIGVycm9yVGVjaFNpZ25hdHVyZUZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIHdhcm5pbmdFbXB0eUZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVycm9yU3ViVGFza1Jlc29sdXRpb24gPSBmYWxzZVxuZGVmIGVycm9yVGVjaHNNaXNzaW5nID0gZmFsc2VcblxuZGVmIGV4ZWN1dGlvbkRhdGVEYXRlXG5cbi8qT1AtMTAzODogRXNlZ3VvIGxhIHZlcmlmaWNhIGRlaSBjYW1waSBvYmJsaWdhdG9yaSBzb2xvIHNlIGlsIHRpY2tldCBzdSBjdWkgc3RvIGVzZWd1ZW5kbyBsYSB0cmFuc2F6aW9uZSBub24gXHUwMGU4IHN0YXRvIGNoaXVzbyBpbiBhdXRvbWF0aWNvIGRhbCBzaXN0ZW1hKi9cbmxvZy5kZWJ1ZyBcImlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCk6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKVxubG9nLmRlYnVnIFwiY2hlY2s6IFwiICsgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIilcbmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCk9PW51bGwgfHwgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIikpe1xuICAgIC8vT1BBQV9MVU1QX1NVTV9QUklDRVxuICAgIGlmKCFpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0LnBsYW5uZWRNYWludGVuYW5jZSddKSAmJiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUHJpY2UpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUHJpY2UpID09IFwiXCIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUHJpY2UpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKSl7XG4gICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLmx1bXBTdW1QcmljZSddLnRvU3RyaW5nKCkpXG4gICAgfVxuXG4gICAgLy9PUEFBX1JFUExBQ0VEX01BVEVSSUFMU1xuICAgIGlmKCFpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0LnBsYW5uZWRNYWludGVuYW5jZSddKSAmJiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpID09IFwiXCIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcIndhcm5pbmdzIHRydWVcIlxuICAgICAgICB3YXJuaW5ncyA9IHRydWVcbiAgICAgICAgd2FybmluZ0VtcHR5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5yZXBsYWNlZE1hdGVyaWFscyddLnRvU3RyaW5nKCkpXG4gICAgfVxuICAgIC8vT1BBQV9SRVFVSVJFRF9NQVRFUklBTFNcbiAgICBpZighaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5wbGFubmVkTWFpbnRlbmFuY2UnXSkgJiYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVxTWF0ZXJpYWxzKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVxTWF0ZXJpYWxzKSA9PSBcIlwiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVxTWF0ZXJpYWxzKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSkpe1xuICAgICAgICBsb2cuZGVidWcgXCJ3YXJuaW5ncyB0cnVlXCJcbiAgICAgICAgd2FybmluZ3MgPSB0cnVlXG4gICAgICAgIHdhcm5pbmdFbXB0eUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YucmVxdWlyZWRNYXRlcmlhbHMnXS50b1N0cmluZygpKVxuICAgIH1cblxuXG4gICAgLy9PUEFBX0FTU0VUXG4gICAgaWYoIWlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQucGxhbm5lZE1haW50ZW5hbmNlJ10pICYmIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0KT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXQpID09IFwiXCIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldCkudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpKXtcbiAgICAgICAgZXJyb3JzID0gdHJ1ZVxuICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YuYXNzZXQnXS50b1N0cmluZygpKVxuICAgIH1cbiAgICAvL09QQUFfQVNTRVRfU1RBVFVTX1BSRVxuICAgIGlmKCFpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0LnBsYW5uZWRNYWludGVuYW5jZSddKSAmJiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldFN0YXR1c1ByZSk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0U3RhdHVzUHJlKSA9PSBcIlwiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXRTdGF0dXNQcmUpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKSl7XG4gICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLmFzc2V0U3RhdHVzUHJlJ10udG9TdHJpbmcoKSlcbiAgICB9XG4gICAgLy9PUEFBX0FTU0VUX1NUQVRVU19QT1NUXG4gICAgaWYoIWlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQucGxhbm5lZE1haW50ZW5hbmNlJ10pICYmIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0U3RhdHVzUG9zdCk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0U3RhdHVzUG9zdCkgPT0gXCJcIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0U3RhdHVzUG9zdCkudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpKXtcbiAgICAgICAgZXJyb3JzID0gdHJ1ZVxuICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YuYXNzZXRTdGF0dXNQb3N0J10udG9TdHJpbmcoKSlcbiAgICB9XG4gICAgLy9PUEFBX1JJU0tfT05TSVRFXG4gICAgaWYoIWlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQucGxhbm5lZE1haW50ZW5hbmNlJ10pICYmIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJpc2spPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyaXNrKSA9PSBcIlwiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmlzaykudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpKXtcbiAgICAgICAgZXJyb3JzID0gdHJ1ZVxuICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2Yucmlza09uc2l0ZSddLnRvU3RyaW5nKCkpXG4gICAgfVxuICAgIC8vT1BBQV9SSVNLX0RFU0NSSVBUSU9OXG4gICAgaWYoIWlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQucGxhbm5lZE1haW50ZW5hbmNlJ10pICYmIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJpc2spLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpICYmIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJpc2tEZXNjcmlwdGlvbik9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJpc2tEZXNjcmlwdGlvbikgPT0gXCJcIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJpc2tEZXNjcmlwdGlvbikudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpKSl7XG4gICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLnJpc2tEZXNjcmlwdGlvbiddLnRvU3RyaW5nKCkpXG4gICAgfVxuICAgIC8vT1BBQV9DVVNUT01FUl9TSUdOQVRVUkVcbiAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1c3RTaWduYXR1cmUpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0U2lnbmF0dXJlKSA9PSBcIlwiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VzdFNpZ25hdHVyZSkudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpe1xuICAgICAgICBlcnJvcnMgPSB0cnVlXG4gICAgICAgIGVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5jdXN0b21lclNpZ25hdHVyZSddLnRvU3RyaW5nKCkpXG4gICAgfVxuICAgIC8vT1BBQV9DVVNUT01FUl9DT05UQUNUX09OU0lURVxuICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VzdFJlZik9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1c3RSZWYpID09IFwiXCIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0UmVmKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSl7XG4gICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLmN1c3RDb250YWN0T25zaXRlJ10udG9TdHJpbmcoKSlcbiAgICB9XG4gICAgXG4gICAgLy9QTSBUSUNLRVQgLSBhbGwgc3ViLXRhc2tzIG11c3QgYmUgQ29tcGxldGVkXG4gICAgaWYoaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5wbGFubmVkTWFpbnRlbmFuY2UnXSkpe1xuICAgICAgICBkZWYgc3ViVGFza3MgPSBpc3N1ZS5nZXRTdWJUYXNrT2JqZWN0cygpXG5cbiAgICAgICAgaWYoc3ViVGFza3Mpe1xuICAgICAgICAgICAgc3ViVGFza3MuZWFjaCB7IC8vTG9vcCBlYWNoIHN1YnRhc2sgb2YgcGFyZW50IGlzc3VlXG4gICAgICAgICAgICAgICAgLy9JZiB0aGUgc3VidGFzayBpcyBcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1wiXG4gICAgICAgICAgICAgICAgaWYgKGl0Lmlzc3VlVHlwZS5uYW1lID09IFwiUGxhbm5lZCBNYWludGVuYW5jZSBUYXNrXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYoIWl0LmdldFJlc29sdXRpb24oKSB8fCBpdC5nZXRSZXNvbHV0aW9uKCkubmFtZSAhPSBcIkNvbXBsZXRlZFwiKXsgXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnMgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvclN1YlRhc2tSZXNvbHV0aW9uID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvL09QQUFfVEVDSE5JQ0lBTl9TSUdOQVRVUkVcbiAgICAvKlxuICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGVjaFNpZ25hdHVyZSk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hTaWduYXR1cmUpID09IFwiXCIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0ZWNoU2lnbmF0dXJlKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSl7XG4gICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLnRlY2huaWNpYW5TaWduYXR1cmUnXS50b1N0cmluZygpKVxuICAgIH1cbiAgICAqL1xuICAgIC8vMTUuMTIuMjAyMCBBRiAtIHRvbHRhIG9iYmxpZ2F0b3JpZXRcdTAwZTAgc3VpIGNhbXBpIE9QX0tNUyBlIE9QX1RSQVZFTF9IT1VSUyBwb2ljaFx1MDBlOCBvcmEgbGEgcmljaGllc3RhIHV0ZW50aSBcdTAwZTggZGkgaW1wbGVtZW50YXJlOlxuICAgIC8vQ2luemlhIFNhbGl0dXJvOiBkb3ZyZWJiZXJvIGVzc2VyZSBvYmJsaWdhdG9yaSBsYWRkb3ZlIGRhIGNvbnRyYXR0byBpbCBmb3JuaXRvcmUgbm9uIGhhIGlsIGRpcml0dG8gZmlzc28gZGkgY2hpYW1hdGFcbiAgICAvL09QQUFfS01TXG4gICAgLyppZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGttcyk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGttcykgPT0gXCJcIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGttcykudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpe1xuICAgICAgICBlcnJvcnMgPSB0cnVlXG4gICAgICAgIGVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5rbXMnXS50b1N0cmluZygpKVxuICAgIH0qL1xuICAgIC8vT1BBQV9UUkFWRUxfSE9VUlNcbiAgICAvKmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsSCk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYXZlbEgpID09IFwiXCIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmF2ZWxIKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSl7XG4gICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLnRyYXZlbEhvdXJzJ10udG9TdHJpbmcoKSlcbiAgICB9Ki9cbiAgICAvL09QQUFfRVhFQ1VUSU9OX0RBVEVcbiAgICAvKlRPRE86IGRhIGNvbW1lbnRhcmUgcXVhbmRvIHJpbXVvdmVyZW1vIGxhIGNvbXBpbGF6aW9uZSBkaSBleGVjdXRpb24gZGF0ZSBhbmNoZSBwZXIgcmVwYWlyKi9cbiAgICBpZighaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5wbGFubmVkTWFpbnRlbmFuY2UnXSkgJiYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZXhlY3V0aW9uRGF0ZSk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGV4ZWN1dGlvbkRhdGUpID09IFwiXCIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShleGVjdXRpb25EYXRlKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSkpe1xuICAgICAgICBlcnJvcnMgPSB0cnVlXG4gICAgICAgIGVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5leGVjdXRpb25EYXRlJ10udG9TdHJpbmcoKSlcbiAgICB9ZWxzZXtcbiAgICAgICAgaWYoIWlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQucGxhbm5lZE1haW50ZW5hbmNlJ10pKXtcbiAgICAgICAgICAgIGV4ZWN1dGlvbkRhdGVEYXRlID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShleGVjdXRpb25EYXRlKS5mb3JtYXQoJ2RkL01NL3l5eXknKVxuICAgICAgICB9XG5cdH1cbiAgICBcbiAgICBcbiAgICAvL0pvYiBTdGFydGVkICsgSm9iIENvbXBsZXRlZCBkaSBvZ25pIG9nZ2V0dG8gVGVjaF9PblNpdGVfUmVwb3J0IGFzc29jaWF0byBhbCBjYW1wbyBPUEFBX1RFQ0hTX09OU0lURVxuICAgIGRlZiBnbG9iYWxFeGVjRGF0ZVxuICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGVjaHNPbnNpdGUpIT1udWxsICYmIChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0ZWNoc09uc2l0ZSkgIT0gXCJcIiAmJiAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0ZWNoc09uc2l0ZSkudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpe1xuICAgICAgICAvKkNpY2xhcmUgdHV0dGkgZ2xpIG9nZ2V0dGkgYXNzb2NpYXRpIGFsIGNhbXBvKi9cbiAgICAgICAgLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzXG4gICAgICAgIENsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTsgIFxuICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTtcbiAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbiAgICAgICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XG5cbiAgICAgICAgZGVmIHRlY2hzT25zaXRlRmllbGQgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hzT25zaXRlKVxuXHRcdGxvZy5kZWJ1ZyBcInRlY2hzT25zaXRlRmllbGQ6IFwiICsgdGVjaHNPbnNpdGVGaWVsZFxuICAgICAgICBmb3IodGVjaG5pY2lhbiBpbiB0ZWNoc09uc2l0ZUZpZWxkKXtcbiAgICAgICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdFxuICAgICAgICAgICAgZGVmIHRlY2hPbnNpdGU9dGVjaG5pY2lhbi50b1N0cmluZygpXG4gICAgICAgICAgICBkZWYgdGVjaE9uc2l0ZUtleSA9IHRlY2hPbnNpdGUuc3Vic3RyaW5nKHRlY2hPbnNpdGUuaW5kZXhPZignKCcpKzEsdGVjaE9uc2l0ZS5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICBkZWYgdGVjaE9uc2l0ZU9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbih0ZWNoT25zaXRlS2V5KVxuICAgICAgICAgICAgLy9nZXQgXCJKb2IgU3RhcnRlZFwiIGZvciB0aGF0IFRlY2huaWNpYW5cbiAgICAgICAgICAgIGRlZiBvYlRyaWFnZVxuICAgICAgICAgICAgZGVmIHRlY2hKb2JTdGFydGVkXG4gICAgICAgICAgICBkZWYgdGVjaEpvYkNvbXBsZXRlZFxuICAgICAgICAgICAgZGVmIHRlY2hKb2JTdGFydGVkRGF0ZSwgdGVjaEpvYkNvbXBsZXRlZERhdGVcbiAgICAgICAgICAgIGRlZiB0ZWNoUmVmLCB0ZWNoLCB0ZWNoUmVmS2V5LCB0ZWNoUmVmT2JqZWN0LCB0ZWNoUmVmTmFtZVxuICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hPbnNpdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai50ZWNoT25TaXRlLmpvYlN0YXJ0ZWQnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaE9uc2l0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2hPblNpdGUuam9iU3RhcnRlZCddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgICAgIHRlY2hKb2JTdGFydGVkID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIHRlY2hKb2JTdGFydGVkRGF0ZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLmZvcm1hdCgnZGQvTU0veXl5eScpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRlY2hKb2JTdGFydGVkOiBcIiArIHRlY2hKb2JTdGFydGVkRGF0ZVxuICAgICAgICAgICAgLy9nZXQgXCJKb2IgQ29tcGxldGVkXCIgZm9yIHRoYXQgVGVjaG5pY2lhblxuICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hPbnNpdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai50ZWNoT25TaXRlLmpvYkNvbXBsZXRlZCddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoT25zaXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoudGVjaE9uU2l0ZS5qb2JDb21wbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICB0ZWNoSm9iQ29tcGxldGVkID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICB0ZWNoSm9iQ29tcGxldGVkRGF0ZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLmZvcm1hdCgnZGQvTU0veXl5eScpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRlY2hKb2JDb21wbGV0ZWQ6IFwiICsgdGVjaEpvYkNvbXBsZXRlZFxuICAgICAgICAgICAgLy9nZXQgXCJUZWNobmljaWFuX1JFRlwiIGZvciB0aGF0IFRlY2huaWNpYW5cbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRlY2hPbnNpdGVPYmplY3Q6IFwiICsgdGVjaE9uc2l0ZU9iamVjdFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaE9uc2l0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2hPbnNpdGUudGVjaG5pY2lhblJlZiddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoT25zaXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoudGVjaE9uc2l0ZS50ZWNobmljaWFuUmVmJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgdGVjaFJlZiA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgdGVjaCA9IHRlY2hSZWYudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRlY2g6IFwiICsgdGVjaFxuICAgICAgICAgICAgICAgIHRlY2hSZWZLZXkgPSB0ZWNoLnN1YnN0cmluZyh0ZWNoLmluZGV4T2YoJygnKSsxLHRlY2guaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRlY2hSZWZLZXk6IFwiICsgdGVjaFJlZktleVxuICAgICAgICAgICAgICAgIHRlY2hSZWZPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4ocHJvcGVydGllc1snaXNjaGVtYS5hYSddLnRvU3RyaW5nKCkgKyBcIi1cIiArIHRlY2hSZWZLZXkpXG4gICAgICAgICAgICAgICAgdGVjaFJlZk5hbWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaFJlZk9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2huaWNpYW4ubmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICBcdFx0bG9nLmRlYnVnIHRlY2hSZWZOYW1lXG4gICAgICAgICAgICBpZighdGVjaEpvYlN0YXJ0ZWQgfHwgIXRlY2hKb2JDb21wbGV0ZWQpe1xuICAgICAgICAgICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgICAgICAgICBlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWRGaWVsZHMuYWRkKHRlY2hSZWZOYW1lLnN1YnN0cmluZyh0ZWNoUmVmTmFtZS5pbmRleE9mKCcoJykrMSx0ZWNoUmVmTmFtZS5pbmRleE9mKCcpJykpKVxuICAgICAgICAgICAgfSAgICBcbiAgICAgICAgICAgIGlmKCFpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0LnBsYW5uZWRNYWludGVuYW5jZSddKSAmJiB0ZWNoSm9iU3RhcnRlZERhdGUgIT0gdGVjaEpvYkNvbXBsZXRlZERhdGUpe1xuICAgICAgICAgICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgICAgICAgICBlcnJvckpvYlN0YXJ0ZWREYXRldnNDb21wbGV0ZWQuYWRkKHRlY2hSZWZOYW1lLnN1YnN0cmluZyh0ZWNoUmVmTmFtZS5pbmRleE9mKCcoJykrMSx0ZWNoUmVmTmFtZS5pbmRleE9mKCcpJykpKVxuICAgICAgICAgICAgfVxuXHRcdFx0aWYoIWlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQucGxhbm5lZE1haW50ZW5hbmNlJ10pICYmIGV4ZWN1dGlvbkRhdGVEYXRlICE9IG51bGwgJiYgdGVjaEpvYlN0YXJ0ZWREYXRlICE9IGV4ZWN1dGlvbkRhdGVEYXRlKXtcbiAgICAgICAgICAgICAgICBlcnJvcnMgPSB0cnVlXG4gICAgICAgICAgICAgICAgZXJyb3JKb2JTdGFydGVkQ29tcGxldGVkdnNFeGVjdXRpb24uYWRkKHRlY2hSZWZOYW1lLnN1YnN0cmluZyh0ZWNoUmVmTmFtZS5pbmRleE9mKCcoJykrMSx0ZWNoUmVmTmFtZS5pbmRleE9mKCcpJykpKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihnbG9iYWxFeGVjRGF0ZT09bnVsbCAmJiB0ZWNoSm9iU3RhcnRlZERhdGUgPT0gdGVjaEpvYkNvbXBsZXRlZERhdGUpe1xuICAgICAgICAgICAgICAgIGdsb2JhbEV4ZWNEYXRlID0gdGVjaEpvYlN0YXJ0ZWREYXRlXG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBpZihnbG9iYWxFeGVjRGF0ZSE9bnVsbCAmJiBnbG9iYWxFeGVjRGF0ZSE9dGVjaEpvYlN0YXJ0ZWREYXRlKXtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JzPXRydWVcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JHbG9iYWxFeGVjdXRpb25EYXRlID0gdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgIH0gICAgXG4gICAgfWVsc2V7XG4gICAgICAgIGlmKGlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQucGxhbm5lZE1haW50ZW5hbmNlJ10pKXtcbiAgICAgICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgICAgIGVycm9yVGVjaHNNaXNzaW5nID0gdHJ1ZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGVmIHRlY2hTaWduRm91bmQ9ZmFsc2VcbiAgICAvL0Zpcm1hIGRpIGFsbWVubyB1biBvZ2dldHRvIFRlY2hfT25TaXRlX1JlcG9ydCBhc3NvY2lhdG8gYWwgY2FtcG8gT1BBQV9URUNIU19PTlNJVEVcbiAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hzT25zaXRlKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGVjaHNPbnNpdGUpICE9IFwiXCIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGVjaHNPbnNpdGUpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKXtcbiAgICAgICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovXG4gICAgICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50c1xuICAgICAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7ICBcbiAgICAgICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XG4gICAgICAgIGRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XG4gICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4gICAgICAgIGRlZiB0ZWNoc09uc2l0ZUZpZWxkID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0ZWNoc09uc2l0ZSlcblx0XHRsb2cuZGVidWcgXCJ0ZWNoc09uc2l0ZUZpZWxkOiBcIiArIHRlY2hzT25zaXRlRmllbGRcbiAgICAgICAgZm9yKHRlY2huaWNpYW4gaW4gdGVjaHNPbnNpdGVGaWVsZCl7XG4gICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3RcbiAgICAgICAgICAgIGRlZiB0ZWNoT25zaXRlPXRlY2huaWNpYW4udG9TdHJpbmcoKVxuICAgICAgICAgICAgZGVmIHRlY2hPbnNpdGVLZXkgPSB0ZWNoT25zaXRlLnN1YnN0cmluZyh0ZWNoT25zaXRlLmluZGV4T2YoJygnKSsxLHRlY2hPbnNpdGUuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgZGVmIHRlY2hPbnNpdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4odGVjaE9uc2l0ZUtleSlcbiAgICAgICAgICAgIC8vZ2V0IFwiSm9iIFN0YXJ0ZWRcIiBmb3IgdGhhdCBUZWNobmljaWFuXG4gICAgICAgICAgICBkZWYgb2JUcmlhZ2VcbiAgICAgICAgICAgIGRlZiB0ZWNoU2lnbmF0dXJlLCB0ZWNoU2lnbmF0dXJlQXR0clxuICAgICAgICAgICAgdGVjaFNpZ25hdHVyZUF0dHIgPSBwcm9wZXJ0aWVzWydpb2JqLnRlY2hPblNpdGUuc2lnbmF0dXJlJ10gPyBwcm9wZXJ0aWVzWydpb2JqLnRlY2hPblNpdGUuc2lnbmF0dXJlJ10udG9TdHJpbmcoKSA6IFwiVEVDSE5JQ0lBTl9TSUdOQVRVUkVcIlxuICAgICAgICAgICAgZGVmIHRlY2hSZWYsIHRlY2gsIHRlY2hSZWZLZXksIHRlY2hSZWZPYmplY3QsIHRlY2hSZWZOYW1lXG4gICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaE9uc2l0ZU9iamVjdC5nZXRJZCgpLCB0ZWNoU2lnbmF0dXJlQXR0cikpe1xuICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hPbnNpdGVPYmplY3QuZ2V0SWQoKSwgdGVjaFNpZ25hdHVyZUF0dHIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgICAgIHRlY2hTaWduYXR1cmUgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJ0ZWNoU2lnbmF0dXJlOiBcIiArIHRlY2hTaWduYXR1cmUgXG5cbiAgICAgICAgICAgIC8vZ2V0IFwiVGVjaG5pY2lhbl9SRUZcIiBmb3IgdGhhdCBUZWNobmljaWFuXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJ0ZWNoT25zaXRlT2JqZWN0OiBcIiArIHRlY2hPbnNpdGVPYmplY3RcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hPbnNpdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai50ZWNoT25zaXRlLnRlY2huaWNpYW5SZWYnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaE9uc2l0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2hPbnNpdGUudGVjaG5pY2lhblJlZiddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgICAgIHRlY2hSZWYgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIHRlY2ggPSB0ZWNoUmVmLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ0ZWNoOiBcIiArIHRlY2hcbiAgICAgICAgICAgICAgICB0ZWNoUmVmS2V5ID0gdGVjaC5zdWJzdHJpbmcodGVjaC5pbmRleE9mKCcoJykrMSx0ZWNoLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ0ZWNoUmVmS2V5OiBcIiArIHRlY2hSZWZLZXlcbiAgICAgICAgICAgICAgICB0ZWNoUmVmT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEnXS50b1N0cmluZygpICsgXCItXCIgKyB0ZWNoUmVmS2V5KVxuICAgICAgICAgICAgICAgIHRlY2hSZWZOYW1lID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai50ZWNobmljaWFuLm5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgXHRcdGxvZy5kZWJ1ZyB0ZWNoUmVmTmFtZVxuXG4gICAgICAgICAgICBpZighdGVjaFNpZ25hdHVyZSAmJiAhdGVjaFNpZ25Gb3VuZCl7XG4gICAgICAgICAgICAgICAgZXJyb3JUZWNoU2lnbmF0dXJlRmllbGRzLmFkZCh0ZWNoUmVmTmFtZS5zdWJzdHJpbmcodGVjaFJlZk5hbWUuaW5kZXhPZignKCcpKzEsdGVjaFJlZk5hbWUuaW5kZXhPZignKScpKSlcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGlmKHRlY2hTaWduYXR1cmUpe1xuICAgICAgICAgICAgICAgICAgICB0ZWNoU2lnbkZvdW5kID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICBlcnJvclRlY2hTaWduYXR1cmVGaWVsZHMuY2xlYXIoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gICAgXG4gICAgICAgICB9XG4gICAgICAgIGlmKCF0ZWNoU2lnbkZvdW5kKXtcbiAgICAgICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgIGlmICghZXJyb3JzICYmICF3YXJuaW5ncyl7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfWVsc2V7XG4gICAgICAgIGlmKCFlcnJvcnMgJiYgd2FybmluZ3Mpe1xuICAgICAgICAgICAgLy9TZSBjaSBzb25vIHNvbG8gd2FybmluZ3MgdmVyaWZpY28gc2UgbCd1dGVudGUgaGEgZ2lcdTAwZTAgZGljaGlhcmF0byBkaSB2b2xlciBwcm9zZWd1aXJlIGNvbXVucXVlXG4gICAgICAgICAgICAvLyAtIHRyYW5zaXRpb24gZmllbGQgXCJPUEFBX0NIRUNLX0FORF9DT05GSVJNXCI9XCJZZXNcIlxuICAgICAgICAgICAgLy8gLSBpbiBjYXNvIGNvbnRyYXJpbyBpbnZpbyBpIHdhcm5pbmcgYSBGRVxuXG4gICAgICAgICAgICAvL2xvZy5kZWJ1ZyBcInRyYW5zaXRpb25DaGVjazogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaylcbiAgICAgICAgICAgIC8vbG9nLmRlYnVnIFwicmVzdWx0OiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKVxuICAgICAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpKXtcbiAgICAgICAgICAgICAgICAvL2xvZy5kZWJ1ZyBcInJldHVybiB0cnVlXCJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgZGVmIHdMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICAgICAgICAgICAgICBpZih3YXJuaW5nRW1wdHlGaWVsZHMuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1FbXB0eSA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQoXCJXXCIpXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChcIkNPTkZJUk1fRU1QVFlfRklFTERTXCIpXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChudWxsKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQod2FybmluZ0VtcHR5RmllbGRzKVxuXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eSlcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRocm93IGV4Y2VwdGlvbjogXCIgKyBvdXRwdXQudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIldcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgICAgICAgICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIldcIiwgb3V0cHV0LnRvU3RyaW5nKCkpICAgXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgICAgICBpZihlcnJvcnMgJiYgIXdhcm5pbmdzKXtcbiAgICAgICAgICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgICAgICAgICBpZihlcnJvck1hbmRhdG9yeUZpZWxkcy5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICBkZWYgZUxpc3RNYW5kYXRvcnkgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKFwiTUFOREFUT1JZX0ZJRUxEU1wiKVxuICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChudWxsKVxuICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChlcnJvck1hbmRhdG9yeUZpZWxkcylcbiAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RNYW5kYXRvcnkpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKGVycm9ySm9iU3RhcnRlZENvbXBsZXRlZEZpZWxkcy5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICBkZWYgZUxpc3RTdGFydEVuZCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKFwiRVwiKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKFwiTUlTU0lOR19PTlNJVEVfU1RBUlRfRU5EX0RFVEFJTFNcIilcbiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kLmFkZChudWxsKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKGVycm9ySm9iU3RhcnRlZENvbXBsZXRlZEZpZWxkcylcbiAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RTdGFydEVuZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoZXJyb3JKb2JTdGFydGVkQ29tcGxldGVkdnNFeGVjdXRpb24uc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0U3RhcnRFbmRFeGVjID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZEV4ZWMuYWRkKFwiRVwiKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmRFeGVjLmFkZChcIkVYRUNVVElPTl9EQVRFX1ZTX1RFQ0hfU1RBUlRfQ09NUExFVEVEXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZEV4ZWMuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZEV4ZWMuYWRkKGVycm9ySm9iU3RhcnRlZENvbXBsZXRlZHZzRXhlY3V0aW9uKVxuICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdFN0YXJ0RW5kRXhlYylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoZXJyb3JUZWNoU2lnbmF0dXJlRmllbGRzLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgIGRlZiBlTGlzdFRlY2hTaWduID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZUxpc3RUZWNoU2lnbi5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RUZWNoU2lnbi5hZGQoXCJNSVNTSU5HX1RFQ0hfU0lHTkFUVVJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RUZWNoU2lnbi5hZGQobnVsbClcbiAgICAgICAgICAgICAgICBlTGlzdFRlY2hTaWduLmFkZChlcnJvclRlY2hTaWduYXR1cmVGaWVsZHMpXG4gICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0VGVjaFNpZ24pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKGVycm9yU3ViVGFza1Jlc29sdXRpb24pe1xuICAgICAgICAgICAgICAgIGRlZiBlTGlzdFN1YlRhc2tDb21wbGV0ZWQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBlTGlzdFN1YlRhc2tDb21wbGV0ZWQuYWRkKFwiRVwiKVxuICAgICAgICAgICAgICAgIGVMaXN0U3ViVGFza0NvbXBsZXRlZC5hZGQoXCJTVUJUQVNLX05PVF9DT01QTEVURURcIilcbiAgICAgICAgICAgICAgICBlTGlzdFN1YlRhc2tDb21wbGV0ZWQuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0U3ViVGFza0NvbXBsZXRlZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoZXJyb3JUZWNoc01pc3Npbmcpe1xuICAgICAgICAgICAgICAgIGRlZiBlTGlzdFN1YlRhc2tDb21wbGV0ZWQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBlTGlzdFN1YlRhc2tDb21wbGV0ZWQuYWRkKFwiRVwiKVxuICAgICAgICAgICAgICAgIGVMaXN0U3ViVGFza0NvbXBsZXRlZC5hZGQoXCJNSVNTSU5HX1RFQ0hOSUNJQU5TXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RTdWJUYXNrQ29tcGxldGVkLmFkZChudWxsKVxuICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdFN1YlRhc2tDb21wbGV0ZWQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKGVycm9ySm9iU3RhcnRlZERhdGV2c0NvbXBsZXRlZC5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICBkZWYgZUxpc3RTdGFydEVuZCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKFwiRVwiKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKFwiVEVDSF9TVEFSVF9DT01QTEVURURfREFURVwiKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQoZXJyb3JKb2JTdGFydGVkRGF0ZXZzQ29tcGxldGVkKVxuICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdFN0YXJ0RW5kKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihlcnJvckdsb2JhbEV4ZWN1dGlvbkRhdGUpe1xuICAgICAgICAgICAgICAgIGRlZiBlTGlzdEV4ZWNEYXRlID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZUxpc3RFeGVjRGF0ZS5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RFeGVjRGF0ZS5hZGQoXCJFWEVDVVRJT05fREFURV9BTExfVEVDSFNcIilcbiAgICAgICAgICAgICAgICBlTGlzdEV4ZWNEYXRlLmFkZChudWxsKVxuICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdEV4ZWNEYXRlKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwidGhyb3cgZXhjZXB0aW9uOiBcIiArIG91dHB1dC50b1N0cmluZygpXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICAgICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIkVcIiwgb3V0cHV0LnRvU3RyaW5nKCkpICAgXG4gICAgICAgIH1cbiAgICAgICAgaWYoZXJyb3JzICYmIHdhcm5pbmdzKXtcbiAgICAgICAgICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgZGVmIHdMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICBpZihlcnJvck1hbmRhdG9yeUZpZWxkcy5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICBkZWYgZUxpc3RNYW5kYXRvcnkgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKFwiTUFOREFUT1JZX0ZJRUxEU1wiKVxuICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChudWxsKVxuICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChlcnJvck1hbmRhdG9yeUZpZWxkcylcbiAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RNYW5kYXRvcnkpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKGVycm9ySm9iU3RhcnRlZENvbXBsZXRlZEZpZWxkcy5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICBkZWYgZUxpc3RTdGFydEVuZCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKFwiRVwiKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKFwiTUlTU0lOR19PTlNJVEVfU1RBUlRfRU5EX0RFVEFJTFNcIilcbiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kLmFkZChudWxsKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKGVycm9ySm9iU3RhcnRlZENvbXBsZXRlZEZpZWxkcylcbiAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RTdGFydEVuZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoZXJyb3JKb2JTdGFydGVkQ29tcGxldGVkdnNFeGVjdXRpb24uc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0U3RhcnRFbmRFeGVjID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZEV4ZWMuYWRkKFwiRVwiKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmRFeGVjLmFkZChcIkVYRUNVVElPTl9EQVRFX1ZTX1RFQ0hfU1RBUlRfQ09NUExFVEVEXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZEV4ZWMuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZEV4ZWMuYWRkKGVycm9ySm9iU3RhcnRlZENvbXBsZXRlZHZzRXhlY3V0aW9uKVxuICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdFN0YXJ0RW5kRXhlYylcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihlcnJvclRlY2hTaWduYXR1cmVGaWVsZHMuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0VGVjaFNpZ24gPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBlTGlzdFRlY2hTaWduLmFkZChcIkVcIilcbiAgICAgICAgICAgICAgICBlTGlzdFRlY2hTaWduLmFkZChcIk1JU1NJTkdfVEVDSF9TSUdOQVRVUkVcIilcbiAgICAgICAgICAgICAgICBlTGlzdFRlY2hTaWduLmFkZChudWxsKVxuICAgICAgICAgICAgICAgIGVMaXN0VGVjaFNpZ24uYWRkKGVycm9yVGVjaFNpZ25hdHVyZUZpZWxkcylcbiAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RUZWNoU2lnbilcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoZXJyb3JTdWJUYXNrUmVzb2x1dGlvbil7XG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0U3ViVGFza0NvbXBsZXRlZCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGVMaXN0U3ViVGFza0NvbXBsZXRlZC5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RTdWJUYXNrQ29tcGxldGVkLmFkZChcIlNVQlRBU0tfTk9UX0NPTVBMRVRFRFwiKVxuICAgICAgICAgICAgICAgIGVMaXN0U3ViVGFza0NvbXBsZXRlZC5hZGQobnVsbClcbiAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RTdWJUYXNrQ29tcGxldGVkKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihlcnJvclRlY2hzTWlzc2luZyl7XG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0U3ViVGFza0NvbXBsZXRlZCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGVMaXN0U3ViVGFza0NvbXBsZXRlZC5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RTdWJUYXNrQ29tcGxldGVkLmFkZChcIk1JU1NJTkdfVEVDSE5JQ0lBTlNcIilcbiAgICAgICAgICAgICAgICBlTGlzdFN1YlRhc2tDb21wbGV0ZWQuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0U3ViVGFza0NvbXBsZXRlZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoZXJyb3JKb2JTdGFydGVkRGF0ZXZzQ29tcGxldGVkLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgIGRlZiBlTGlzdFN0YXJ0RW5kID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQoXCJURUNIX1NUQVJUX0NPTVBMRVRFRF9EQVRFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQobnVsbClcbiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kLmFkZChlcnJvckpvYlN0YXJ0ZWREYXRldnNDb21wbGV0ZWQpXG4gICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0U3RhcnRFbmQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKGVycm9yR2xvYmFsRXhlY3V0aW9uRGF0ZSl7XG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0RXhlY0RhdGUgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBlTGlzdEV4ZWNEYXRlLmFkZChcIkVcIilcbiAgICAgICAgICAgICAgICBlTGlzdEV4ZWNEYXRlLmFkZChcIkVYRUNVVElPTl9EQVRFX0FMTF9URUNIU1wiKVxuICAgICAgICAgICAgICAgIGVMaXN0RXhlY0RhdGUuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXhlY0RhdGUpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKHdhcm5pbmdFbXB0eUZpZWxkcy5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHkgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQoXCJXXCIpXG4gICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKFwiQ09ORklSTV9FTVBUWV9GSUVMRFNcIilcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQobnVsbClcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQod2FybmluZ0VtcHR5RmllbGRzKVxuXG4gICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5KVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICAgICAgb3V0cHV0LmFkZCh3TGlzdClcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRocm93IGV4Y2VwdGlvbjogXCIgKyBvdXRwdXQudG9TdHJpbmcoKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiV0VcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgICAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKFwiV0VcIiwgb3V0cHV0LnRvU3RyaW5nKCkpICBcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZQppbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb24KaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3IKaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CmRlZiBDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRykKCklzc3VlIGlzc3VlID0gaXNzdWUKCmxvZy5kZWJ1ZyAiVHJhbnNhemlvbmUgQ29tcGxldGUgLSBQcmltbyB2YWxpZGF0b3IiCmxvZy5kZWJ1ZyAiVHJhbnNhemlvbmUgQ29tcGxldGUgLSBQcmltbyB2YWxpZGF0b3IgLSBJc3N1ZTogIiArIGlzc3VlCgpkZWYgZXJyb3JzID0gZmFsc2UKZGVmIHdhcm5pbmdzID0gZmFsc2UKCmRlZiBhdXRvbWF0aWNhbGx5Q2xvc2VkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q2xvc2VkJ10udG9TdHJpbmcoKSlbMF0KCmRlZiBhc3NldCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXNzZXQnXS50b1N0cmluZygpKVswXQpkZWYgYXNzZXRTdGF0dXNQcmUgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmFzc2V0U3RhdHVzUHJlJ10udG9TdHJpbmcoKSlbMF0KZGVmIGFzc2V0U3RhdHVzUG9zdCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXNzZXRTdGF0dXNQb3N0J10udG9TdHJpbmcoKSlbMF0KZGVmIHJpc2sgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJpc2tPbnNpdGUnXS50b1N0cmluZygpKVswXQpkZWYgcmlza0Rlc2NyaXB0aW9uID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5yaXNrRGVzY3JpcHRpb24nXS50b1N0cmluZygpKVswXQpkZWYgY3VzdFNpZ25hdHVyZSA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY3VzdG9tZXJTaWduYXR1cmUnXS50b1N0cmluZygpKVswXQpkZWYgY3VzdFJlZiA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY3VzdENvbnRhY3RPbnNpdGUnXS50b1N0cmluZygpKVswXQpkZWYgdGVjaFNpZ25hdHVyZSA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YudGVjaG5pY2lhblNpZ25hdHVyZSddLnRvU3RyaW5nKCkpWzBdCmRlZiBrbXMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmttcyddLnRvU3RyaW5nKCkpWzBdCmRlZiB0cmF2ZWxIID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi50cmF2ZWxIb3VycyddLnRvU3RyaW5nKCkpWzBdCmRlZiBleGVjdXRpb25EYXRlID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5leGVjdXRpb25EYXRlJ10udG9TdHJpbmcoKSlbMF0KZGVmIHRlY2hzT25zaXRlID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi50ZWNobmljaWFuc09uc2l0ZSddLnRvU3RyaW5nKCkpWzBdCgpkZWYgcmVwTWF0ZXJpYWxzID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5yZXBsYWNlZE1hdGVyaWFscyddLnRvU3RyaW5nKCkpWzBdCmRlZiByZXFNYXRlcmlhbHMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJlcXVpcmVkTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF0KCmRlZiB0cmFuc2l0aW9uQ2hlY2sgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmNoZWNrQW5kQ29uZmlybSddLnRvU3RyaW5nKCkpWzBdCgpkZWYgbHVtcFN1bVByaWNlID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5sdW1wU3VtUHJpY2UnXS50b1N0cmluZygpKVswXQoKZGVmIGVycm9yTWFuZGF0b3J5RmllbGRzID0gbmV3IEFycmF5TGlzdCgpCmRlZiBlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWRGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIHdhcm5pbmdFbXB0eUZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKQoKLypPUC0xMDM4OiBFc2VndW8gbGEgdmVyaWZpY2EgZGVpIGNhbXBpIG9iYmxpZ2F0b3JpIHNvbG8gc2UgaWwgdGlja2V0IHN1IGN1aSBzdG8gZXNlZ3VlbmRvIGxhIHRyYW5zYXppb25lIG5vbiDDqCBzdGF0byBjaGl1c28gaW4gYXV0b21hdGljbyBkYWwgc2lzdGVtYSovCmxvZy5kZWJ1ZyAiaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKTogIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkKbG9nLmRlYnVnICJjaGVjazogIiArICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKQppZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpPT1udWxsIHx8ICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKSl7CiAgICAvL09QQUFfTFVNUF9TVU1fUFJJQ0UKICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobHVtcFN1bVByaWNlKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobHVtcFN1bVByaWNlKSA9PSAiIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1QcmljZSkudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICBlcnJvcnMgPSB0cnVlCiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLmx1bXBTdW1QcmljZSddLnRvU3RyaW5nKCkpCiAgICB9CgogICAgLy9PUEFBX1JFUExBQ0VEX01BVEVSSUFMUwogICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpID09ICIiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgIGxvZy5kZWJ1ZyAid2FybmluZ3MgdHJ1ZSIKICAgICAgICB3YXJuaW5ncyA9IHRydWUKICAgICAgICB3YXJuaW5nRW1wdHlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLnJlcGxhY2VkTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSkKICAgIH0KICAgIC8vT1BBQV9SRVFVSVJFRF9NQVRFUklBTFMKICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVxTWF0ZXJpYWxzKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVxTWF0ZXJpYWxzKSA9PSAiIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcU1hdGVyaWFscykudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICBsb2cuZGVidWcgIndhcm5pbmdzIHRydWUiCiAgICAgICAgd2FybmluZ3MgPSB0cnVlCiAgICAgICAgd2FybmluZ0VtcHR5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5yZXF1aXJlZE1hdGVyaWFscyddLnRvU3RyaW5nKCkpCiAgICB9CgoKICAgIC8vT1BBQV9BU1NFVAogICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldCk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0KSA9PSAiIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0KS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgIGVycm9ycyA9IHRydWUKICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YuYXNzZXQnXS50b1N0cmluZygpKQogICAgfQogICAgLy9PUEFBX0FTU0VUX1NUQVRVU19QUkUKICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXRTdGF0dXNQcmUpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldFN0YXR1c1ByZSkgPT0gIiIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldFN0YXR1c1ByZSkudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICBlcnJvcnMgPSB0cnVlCiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLmFzc2V0U3RhdHVzUHJlJ10udG9TdHJpbmcoKSkKICAgIH0KICAgIC8vT1BBQV9BU1NFVF9TVEFUVVNfUE9TVAogICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldFN0YXR1c1Bvc3QpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldFN0YXR1c1Bvc3QpID09ICIiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXRTdGF0dXNQb3N0KS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgIGVycm9ycyA9IHRydWUKICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YuYXNzZXRTdGF0dXNQb3N0J10udG9TdHJpbmcoKSkKICAgIH0KICAgIC8vT1BBQV9SSVNLX09OU0lURQogICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyaXNrKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmlzaykgPT0gIiIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyaXNrKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgIGVycm9ycyA9IHRydWUKICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2Yucmlza09uc2l0ZSddLnRvU3RyaW5nKCkpCiAgICB9CiAgICAvL09QQUFfUklTS19ERVNDUklQVElPTgogICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyaXNrKS50b1N0cmluZygpLmVxdWFscygiWWVzIikgJiYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmlza0Rlc2NyaXB0aW9uKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmlza0Rlc2NyaXB0aW9uKSA9PSAiIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJpc2tEZXNjcmlwdGlvbikudG9TdHJpbmcoKS5lcXVhbHMoIiIpKSl7CiAgICAgICAgZXJyb3JzID0gdHJ1ZQogICAgICAgIGVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5yaXNrRGVzY3JpcHRpb24nXS50b1N0cmluZygpKQogICAgfQogICAgLy9PUEFBX0NVU1RPTUVSX1NJR05BVFVSRQogICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0U2lnbmF0dXJlKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VzdFNpZ25hdHVyZSkgPT0gIiIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0U2lnbmF0dXJlKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgIGVycm9ycyA9IHRydWUKICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YuY3VzdG9tZXJTaWduYXR1cmUnXS50b1N0cmluZygpKQogICAgfQogICAgLy9PUEFBX0NVU1RPTUVSX0NPTlRBQ1RfT05TSVRFCiAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1c3RSZWYpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0UmVmKSA9PSAiIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1c3RSZWYpLnRvU3RyaW5nKCkuZXF1YWxzKCIiKSl7CiAgICAgICAgZXJyb3JzID0gdHJ1ZQogICAgICAgIGVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5jdXN0Q29udGFjdE9uc2l0ZSddLnRvU3RyaW5nKCkpCiAgICB9CiAgICAvL09QQUFfVEVDSE5JQ0lBTl9TSUdOQVRVUkUKICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGVjaFNpZ25hdHVyZSk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hTaWduYXR1cmUpID09ICIiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGVjaFNpZ25hdHVyZSkudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICBlcnJvcnMgPSB0cnVlCiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLnRlY2huaWNpYW5TaWduYXR1cmUnXS50b1N0cmluZygpKQogICAgfQogICAgLy8xNS4xMi4yMDIwIEFGIC0gdG9sdGEgb2JibGlnYXRvcmlldMOgIHN1aSBjYW1waSBPUF9LTVMgZSBPUF9UUkFWRUxfSE9VUlMgcG9pY2jDqCBvcmEgbGEgcmljaGllc3RhIHV0ZW50aSDDqCBkaSBpbXBsZW1lbnRhcmU6CiAgICAvL0NpbnppYSBTYWxpdHVybzogZG92cmViYmVybyBlc3NlcmUgb2JibGlnYXRvcmkgbGFkZG92ZSBkYSBjb250cmF0dG8gaWwgZm9ybml0b3JlIG5vbiBoYSBpbCBkaXJpdHRvIGZpc3NvIGRpIGNoaWFtYXRhCiAgICAvL09QQUFfS01TCiAgICAvKmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoa21zKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoa21zKSA9PSAiIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGttcykudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICBlcnJvcnMgPSB0cnVlCiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLmttcyddLnRvU3RyaW5nKCkpCiAgICB9Ki8KICAgIC8vT1BBQV9UUkFWRUxfSE9VUlMKICAgIC8qaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmF2ZWxIKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsSCkgPT0gIiIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmF2ZWxIKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgIGVycm9ycyA9IHRydWUKICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YudHJhdmVsSG91cnMnXS50b1N0cmluZygpKQogICAgfSovCiAgICAvL09QQUFfRVhFQ1VUSU9OX0RBVEUKICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZXhlY3V0aW9uRGF0ZSk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGV4ZWN1dGlvbkRhdGUpID09ICIiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZXhlY3V0aW9uRGF0ZSkudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICBlcnJvcnMgPSB0cnVlCiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLmV4ZWN1dGlvbkRhdGUnXS50b1N0cmluZygpKQogICAgfQoKICAgIC8vSm9iIFN0YXJ0ZWQgKyBKb2IgQ29tcGxldGVkIGRpIG9nbmkgb2dnZXR0byBUZWNoX09uU2l0ZV9SZXBvcnQgYXNzb2NpYXRvIGFsIGNhbXBvIE9QQUFfVEVDSFNfT05TSVRFCiAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hzT25zaXRlKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGVjaHNPbnNpdGUpICE9ICIiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hzT25zaXRlKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qLwogICAgICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50cwogICAgICAgIENsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlIik7ICAKICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CiAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTsKICAgICAgICBkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTsKCiAgICAgICAgZGVmIHRlY2hzT25zaXRlRmllbGQgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hzT25zaXRlKQoJCWxvZy5kZWJ1ZyAidGVjaHNPbnNpdGVGaWVsZDogIiArIHRlY2hzT25zaXRlRmllbGQKICAgICAgICBmb3IodGVjaG5pY2lhbiBpbiB0ZWNoc09uc2l0ZUZpZWxkKXsKICAgICAgICAgICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0CiAgICAgICAgICAgIGRlZiB0ZWNoT25zaXRlPXRlY2huaWNpYW4udG9TdHJpbmcoKQogICAgICAgICAgICBkZWYgdGVjaE9uc2l0ZUtleSA9IHRlY2hPbnNpdGUuc3Vic3RyaW5nKHRlY2hPbnNpdGUuaW5kZXhPZignKCcpKzEsdGVjaE9uc2l0ZS5pbmRleE9mKCcpJykpCiAgICAgICAgICAgIGRlZiB0ZWNoT25zaXRlT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHRlY2hPbnNpdGVLZXkpCiAgICAgICAgICAgIC8vZ2V0ICJKb2IgU3RhcnRlZCIgZm9yIHRoYXQgVGVjaG5pY2lhbgogICAgICAgICAgICBkZWYgb2JUcmlhZ2UKICAgICAgICAgICAgZGVmIHRlY2hKb2JTdGFydGVkCiAgICAgICAgICAgIGRlZiB0ZWNoSm9iQ29tcGxldGVkCiAgICAgICAgICAgIGRlZiB0ZWNoUmVmLCB0ZWNoLCB0ZWNoUmVmS2V5LCB0ZWNoUmVmT2JqZWN0LCB0ZWNoUmVmTmFtZQogICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaE9uc2l0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2hPblNpdGUuam9iU3RhcnRlZCddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hPbnNpdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai50ZWNoT25TaXRlLmpvYlN0YXJ0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkKICAgICAgICAgICAgICAgIHRlY2hKb2JTdGFydGVkID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgbG9nLmRlYnVnIHRlY2hKb2JTdGFydGVkIAogICAgICAgICAgICAvL2dldCAiSm9iIENvbXBsZXRlZCIgZm9yIHRoYXQgVGVjaG5pY2lhbgogICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaE9uc2l0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2hPblNpdGUuam9iQ29tcGxldGVkJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaE9uc2l0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2hPblNpdGUuam9iQ29tcGxldGVkJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpCiAgICAgICAgICAgICAgICB0ZWNoSm9iQ29tcGxldGVkID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgbG9nLmRlYnVnIHRlY2hKb2JDb21wbGV0ZWQKICAgICAgICAgICAgLy9nZXQgIlRlY2huaWNpYW5fUkVGIiBmb3IgdGhhdCBUZWNobmljaWFuCiAgICAgICAgICAgIGxvZy5kZWJ1ZyAidGVjaE9uc2l0ZU9iamVjdDogIiArIHRlY2hPbnNpdGVPYmplY3QKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoT25zaXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoudGVjaE9uc2l0ZS50ZWNobmljaWFuUmVmJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoT25zaXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoudGVjaE9uc2l0ZS50ZWNobmljaWFuUmVmJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpCiAgICAgICAgICAgICAgICB0ZWNoUmVmID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIHRlY2ggPSB0ZWNoUmVmLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyAidGVjaDogIiArIHRlY2gKICAgICAgICAgICAgICAgIHRlY2hSZWZLZXkgPSB0ZWNoLnN1YnN0cmluZyh0ZWNoLmluZGV4T2YoJygnKSsxLHRlY2guaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgbG9nLmRlYnVnICJ0ZWNoUmVmS2V5OiAiICsgdGVjaFJlZktleQogICAgICAgICAgICAgICAgdGVjaFJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihwcm9wZXJ0aWVzWydpc2NoZW1hLmFhJ10udG9TdHJpbmcoKSArICItIiArIHRlY2hSZWZLZXkpCiAgICAgICAgICAgICAgICB0ZWNoUmVmTmFtZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoudGVjaG5pY2lhbi5uYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgIAkJbG9nLmRlYnVnIHRlY2hSZWZOYW1lCgogICAgICAgICAgICBpZighdGVjaEpvYlN0YXJ0ZWQgfHwgIXRlY2hKb2JDb21wbGV0ZWQpewogICAgICAgICAgICAgICAgZXJyb3JzID0gdHJ1ZQogICAgICAgICAgICAgICAgZXJyb3JKb2JTdGFydGVkQ29tcGxldGVkRmllbGRzLmFkZCh0ZWNoUmVmTmFtZS5zdWJzdHJpbmcodGVjaFJlZk5hbWUuaW5kZXhPZignKCcpKzEsdGVjaFJlZk5hbWUuaW5kZXhPZignKScpKSkKICAgICAgICAgICAgfSAgICAKICAgICAgICAgfSAgICAKICAgIH0KCiAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpCgogICAgaWYgKCFlcnJvcnMgJiYgIXdhcm5pbmdzKXsKICAgICAgICByZXR1cm4gdHJ1ZQogICAgfWVsc2V7CiAgICAgICAgaWYoIWVycm9ycyAmJiB3YXJuaW5ncyl7CiAgICAgICAgICAgIC8vU2UgY2kgc29ubyBzb2xvIHdhcm5pbmdzIHZlcmlmaWNvIHNlIGwndXRlbnRlIGhhIGdpw6AgZGljaGlhcmF0byBkaSB2b2xlciBwcm9zZWd1aXJlIGNvbXVucXVlCiAgICAgICAgICAgIC8vIC0gdHJhbnNpdGlvbiBmaWVsZCAiT1BBQV9DSEVDS19BTkRfQ09ORklSTSI9IlllcyIKICAgICAgICAgICAgLy8gLSBpbiBjYXNvIGNvbnRyYXJpbyBpbnZpbyBpIHdhcm5pbmcgYSBGRQoKICAgICAgICAgICAgLy9sb2cuZGVidWcgInRyYW5zaXRpb25DaGVjazogIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKQogICAgICAgICAgICAvL2xvZy5kZWJ1ZyAicmVzdWx0OiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKQogICAgICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykudG9TdHJpbmcoKS5lcXVhbHMoIlllcyIpKXsKICAgICAgICAgICAgICAgIC8vbG9nLmRlYnVnICJyZXR1cm4gdHJ1ZSIKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgZGVmIHdMaXN0ID0gbmV3IEFycmF5TGlzdCgpCgogICAgICAgICAgICAgICAgaWYod2FybmluZ0VtcHR5RmllbGRzLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1FbXB0eSA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZCgiVyIpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKCJDT05GSVJNX0VNUFRZX0ZJRUxEUyIpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKG51bGwpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKHdhcm5pbmdFbXB0eUZpZWxkcykKCiAgICAgICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5KQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIG91dHB1dC5hZGQod0xpc3QpCiAgICAgICAgICAgICAgICBsb2cuZGVidWcgInRocm93IGV4Y2VwdGlvbjogIiArIG91dHB1dC50b1N0cmluZygpCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IlciOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQogICAgICAgICAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJXIiwgb3V0cHV0LnRvU3RyaW5nKCkpICAgCiAgICAgICAgICAgIH0KCiAgICAgICAgfQogICAgICAgIGlmKGVycm9ycyAmJiAhd2FybmluZ3MpewogICAgICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KCkKCiAgICAgICAgICAgIGlmKGVycm9yTWFuZGF0b3J5RmllbGRzLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgZGVmIGVMaXN0TWFuZGF0b3J5ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoIkUiKQogICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKCJNQU5EQVRPUllfRklFTERTIikKICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChudWxsKQogICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKGVycm9yTWFuZGF0b3J5RmllbGRzKQogICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0TWFuZGF0b3J5KQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZihlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWRGaWVsZHMuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICBkZWYgZUxpc3RTdGFydEVuZCA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQoIkUiKQogICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQoIk1JU1NJTkdfT05TSVRFX1NUQVJUX0VORF9ERVRBSUxTIikKICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKG51bGwpCiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kLmFkZChlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWRGaWVsZHMpCiAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RTdGFydEVuZCkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgb3V0cHV0LmFkZChlTGlzdCkKICAgICAgICAgICAgbG9nLmRlYnVnICJ0aHJvdyBleGNlcHRpb246ICIgKyBvdXRwdXQudG9TdHJpbmcoKQogICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IkUiOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQogICAgICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oIkUiLCBvdXRwdXQudG9TdHJpbmcoKSkgICAKICAgICAgICB9CiAgICAgICAgaWYoZXJyb3JzICYmIHdhcm5pbmdzKXsKICAgICAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICBpZihlcnJvck1hbmRhdG9yeUZpZWxkcy5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgIGRlZiBlTGlzdE1hbmRhdG9yeSA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKCJFIikKICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZCgiTUFOREFUT1JZX0ZJRUxEUyIpCiAgICAgICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQobnVsbCkKICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChlcnJvck1hbmRhdG9yeUZpZWxkcykKICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdE1hbmRhdG9yeSkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYoZXJyb3JKb2JTdGFydGVkQ29tcGxldGVkRmllbGRzLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgZGVmIGVMaXN0U3RhcnRFbmQgPSBuZXcgQXJyYXlMaXN0KCkKICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKCJFIikKICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKCJNSVNTSU5HX09OU0lURV9TVEFSVF9FTkRfREVUQUlMUyIpCiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kLmFkZChudWxsKQogICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQoZXJyb3JKb2JTdGFydGVkQ29tcGxldGVkRmllbGRzKQogICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0U3RhcnRFbmQpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKHdhcm5pbmdFbXB0eUZpZWxkcy5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1FbXB0eSA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKCJXIikKICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZCgiQ09ORklSTV9FTVBUWV9GSUVMRFMiKQogICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKG51bGwpCiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQod2FybmluZ0VtcHR5RmllbGRzKQoKICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eSkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgb3V0cHV0LmFkZChlTGlzdCkKICAgICAgICAgICAgb3V0cHV0LmFkZCh3TGlzdCkKICAgICAgICAgICAgbG9nLmRlYnVnICJ0aHJvdyBleGNlcHRpb246ICIgKyBvdXRwdXQudG9TdHJpbmcoKQogICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IldFIjoiJyArIG91dHB1dC50b1N0cmluZygpICsgJyJ9JykKICAgICAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJXRSIsIG91dHB1dC50b1N0cmluZygpKSAgCiAgICAgICAgfQogICAgfQp9Cg==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">9fe0fa5191d4b6a91ba7485380ff8d0a9fda8fe7</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IFJFU1QgQVBJOiBPUCBnZW5lcmF6aW9uZSBSYXBwb3J0byBkaSBpbnRlcnZlbnRv</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxubG9nLmRlYnVnIFwiT25TaXRlIFJlcG9ydCBwZXIgaXNzdWU6IFwiICsgaXNzdWUua2V5XG4vKiBSRVNUIEFQSSBwZXIgR2VuZXJhemlvbmUgQWxsZWdhdG8gUmFwcG9ydG8gZGkgSW50ZXJ2ZW50byAqL1xucmVxdWVzdE1ldGhvZCA9IFwiUFVUXCI7XG4vKlNjcmlwdCBWYXJpYWJsZXMqL1xuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0xNDA2MlwiKVxuXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5cbi8qUmltb3ppb25lIGFsbGVnYXRvIHJhcHBvcnRvIGRpIGludGVydmVudG8gYXBwZW5hIGNyZWF0byovXG4vKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG5cbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTtcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcblxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcblxuQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG5kZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG5cbi8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSBcIiBhcm91bmQgdmFsdWUgKi9cbmRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5OYW1lIExJS0UgXFxcIlJhcHBvcnRvIGRpIGludGVydmVudG9cXFwiIEFORCBcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpICsgXCIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSBcIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIpXCIpOyAvLyBTZWUgdGhlIGNvbXBsZXRlIGxpc3Qgb2YgcG9zc2libGUgSVFMIG9uIHRoZSBJbnNpZ2h0IFF1ZXJ5IExhbmd1YWdlIGRvY3VtZW50YXRpb24gcGFnZVxuLyogSWYgdGhpcyBpcyBhIG1hbmRhdG9yeSBmaWVsZCB5b3Ugc2hvdWxkIGJlIGFibGUgdG8gZG8gdGhpczogKi9cbmxvZy5kZWJ1ZyBcIklRTDogXCIgKyBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5OYW1lIExJS0UgXFxcIlJhcHBvcnRvIGRpIGludGVydmVudG9cXFwiIEFORCBcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpICsgXCIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSBcIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIpXCJcblxuLyohIURhIHJpbXVvdmVyZSBhcHBlbmEgcmlzb2x0aSBpIGJ1ZyEhKi9cbmlmKChvYmplY3RzID09IG51bGwgfHwgb2JqZWN0cy5zaXplPT0wKSAmJiAhaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5wbGFubmVkTWFpbnRlbmFuY2UnXSkpe1xuICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL0FBL3RpY2tldC9cIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIvYXR0YWNobWVudC9vbnNpdGVcIlxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVcmw6IFwiICsgYmFzZVVSTFxuXG4gICAgVVJMIHVybFxuICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcblxuICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkdFTkVSQVRFLU9OU0lURVJFUE9SVFwiKVxuICAgICAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICB9XG5cbn1cbiIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeQppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQpDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRykKCklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTsKQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpOwpkZWYgcmVxdWVzdE1ldGhvZApkZWYgYmFzZVVSTApsb2cuZGVidWcgIk9uU2l0ZSBSZXBvcnQgcGVyIGlzc3VlOiAiICsgaXNzdWUua2V5Ci8qIFJFU1QgQVBJIHBlciBHZW5lcmF6aW9uZSBBbGxlZ2F0byBSYXBwb3J0byBkaSBJbnRlcnZlbnRvICovCnJlcXVlc3RNZXRob2QgPSAiUFVUIjsKCmJhc2VVUkwgPSAiaHR0cDovLyIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArICIvb3AvcmVzdC9hdXRvbWF0aW9uL0FBL3RpY2tldC8iICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyAiL2F0dGFjaG1lbnQvb25zaXRlIgpsb2cuZGVidWcgImJhc2VVcmw6ICIgKyBiYXNlVVJMCgpVUkwgdXJsCnVybCA9IG5ldyBVUkwoYmFzZVVSTCkKSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpOwpjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eSgiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL2pzb24iKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoIkFjY2VwdCIsICIqLyoiKTsKY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTsKY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpOwpjb25uZWN0aW9uLmNvbm5lY3QoKTsKbG9nLmRlYnVnICJSZXNwb25zZUNvZGU6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkKbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKCmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCmRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKQpkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpCgppZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoIjIwMCIpKXsKICAgIGxvZy5kZWJ1ZyAidXJsOiAiICsgdXJsCiAgICBsb2cuZGVidWcgIlJlc3BvbnNlQ29kZToiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKQogICAgbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKICAgIGVMaXN0RXJyb3JzLmFkZCgiRSIpCiAgICBlTGlzdEVycm9ycy5hZGQoIkdFTkVSQVRFLU9OU0lURVJFUE9SVCIpCiAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyAiICIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpKQogICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncykKICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycykKCiAgICBvdXRwdXQuYWRkKGVMaXN0KQogICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigneyJFIjoiJyArIG91dHB1dC50b1N0cmluZygpICsgJyJ9JykKICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiRSIsIG91dHB1dC50b1N0cmluZygpKQp9Cg==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">b734e2c5-1436-43e7-ba9d-53f2ba06c457</arg>
              <arg name="FIELD_NOTES">YCFgQ3JlYXRlIFNOICYgU08gZm9yIG9sZCB0aWNrZXRzICsgZm9yIENvbXBsZXRlZCBkdXJpbmcgTWFpbnRlbmFuY2U=</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuXG5kZWYgU04gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfU0FQX1NFUlZJQ0VfTk9USUZJQ0FUSU9OXCIpWzBdXG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcblxuVVJMIHVybFxuSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvblxuXG5pZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKFNOKSA9PSBudWxsICYmIGlzc3VlLmlzc3VlVHlwZS5uYW1lICE9IFwiUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXRcIil7XG4gICAgcmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuXG4gICAgZGVmIGJvZHlfcmVxID0gW11cbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXG4gICAgICAgIFwic3RhdHVzXCI6IFwiSU5QXCJcbiAgICBdIFxuXG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL3NlcnZpY2Uvbm90aWZpY2F0aW9uXCJcblxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxuICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNOOiBcIiArIGJvZHlfcmVxXG4gICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxuICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgIFxuICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG4gICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcblxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TTi1VUERBVEVcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICB9ZWxzZXtcbiAgICAgICAgLyoqIFNFUlZJQ0UgT1JERVIgQ1JFQVRJT04gKiovXG4gICAgICAgIGJvZHlfcmVxID0gW1xuICAgICAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXlcbiAgICAgICAgXSBcbiAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL29yL3VwZGF0ZS9zZXJ2aWNlL29yZGVyXCJcblxuICAgICAgICBsb2cuZGVidWcgXCJiYXNlVVJMIFNPOiBcIiArIGJhc2VVUkxcbiAgICAgICAgbG9nLmRlYnVnIFwiYm9keV9yZXEgU086IFwiICsgYm9keV9yZXFcbiAgICAgICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgICAgICBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG4gICAgICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgICAgICBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAxXCIpICYmICFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxuICAgIFx0XHRsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICAgICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICBcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtU0FQLVNPLUNSRUFURVwiKVxuICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgIH1cbiAgICB9XG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">37c2d78492ac54794b8917d58342d465c219be98</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IFJFU1QgQVBJOiBPUCBFbWFpbCBOb3RpZmljYXRpb246IE9OU0lURV9SRVBPUlQgLSBvbmx5IElGIE9QQUFfQVVUT01BVElDQUxMWV9DTE9TRUQhPVllcyBBTkQgc2VuZE1haWwhPU5PIE1BSUwgQU5EIGNpIHNvbm8gdGlja2V0IGNvbGxlZ2F0aS4gLS0tLT4gRElTQUJMRUQgc3UgdHJhbnNhemlvbmUgY29tcGxldGUgLSB2aWVuZSBmYXR0byBtYW51YWxtZW50ZSBkYSBTRU5EIE9OU0lURSBSRVBPUlQ=</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGlua1xuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiBhdXRvbWF0aWNhbGx5Q2xvc2VkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q2xvc2VkJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBzZW5kTWFpbFRvID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zZW5kTWFpbFRvJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBzZW5kTWFpbFRvUmVjID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zZW5kTWFpbFRvUmVjaXBpZW50cyddLnRvU3RyaW5nKCkpWzBdXG5kZWYgb25zaXRlUmVwb3J0RGF0ZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi53Zk9uc2l0ZVJlcG9ydCddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5kZWYgcmVsYXRlc0luSXNzdWVMaW5rPWZhbHNlXG5kZWYgcmVsYXRlc091dElzc3VlTGluaz1mYWxzZVxuZGVmIGxpbmtlZFRpY2tldHM9bmV3IEFycmF5TGlzdCgpXG5kZWYgYm9keV9yZXFcbmRlZiBzZW5kbWFpbD10cnVlXG5cbmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCk9PW51bGwgfHwgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIikpe1xuXG4gICAgLypPUC0xMDM4OiB2ZXJpZmljYSB0aWNrZXQgY29sbGVnYXRpKi9cbiAgICBMaXN0PElzc3VlTGluaz4gYWxsSW5Jc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0SW53YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxJbklzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG5cbiAgICAgICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgcmVsYXRlc0luSXNzdWVMaW5rPXRydWVcbiAgICAgICAgICAgIGxpbmtlZFRpY2tldHMuYWRkKGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKS50b1N0cmluZygpKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiSXNzdWUgY29uIHJlbGF0ZXNJbklzc3VlTGlua1wiXG4gICAgICAgIH1cbiAgICB9XG4gICAgTGlzdDxJc3N1ZUxpbms+IGFsbE91dElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgIHJlbGF0ZXNPdXRJc3N1ZUxpbms9dHJ1ZVxuICAgICAgICAgICAgbGlua2VkVGlja2V0cy5hZGQoaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkudG9TdHJpbmcoKSlcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIklzc3VlIGNvbiByZWxhdGVzT3V0SXNzdWVMaW5rXCJcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBsb2cuZGVidWcgXCJpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCk6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKS50b1N0cmluZygpXG4gICAgaWYoKHJlbGF0ZXNJbklzc3VlTGluayB8fCByZWxhdGVzT3V0SXNzdWVMaW5rKSAmJiAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydjZi5vcHRpb24uc2VuZE1haWxUby5ub0VtYWlsJ10udG9TdHJpbmcoKSkgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydjZi5vcHRpb24uc2VuZE1haWxUby5jdXJyZW50UmVwb3J0J10udG9TdHJpbmcoKSkpe1xuICAgICAgICAvL09QLTEwMzg6IGludmlhcmUgc29sbyBsYSBtYWlsIGNvbiBpbCByYXBwb3J0byBkaSBpbnRlcnZlbnRvIGRlbCB0aWNrZXQgY29ycmVudGVcbiAgICAgICAgYm9keV9yZXEgPSBbXG4gICAgICAgICAgICBcInRlbXBsYXRlTmFtZVwiOiBwcm9wZXJ0aWVzWyd0dC5vblNpdGVSZXBvcnQnXS50b1N0cmluZygpLFxuICAgICAgICAgICAgXCJwZWNcIjogZmFsc2UsXG4gICAgICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleSxcbiAgICAgICAgICAgIFwiYWRkaXRpb25hbFJlY2lwaWVudHNcIjogaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvUmVjKS50b1N0cmluZygpXG4gICAgICAgIF1cbiAgICAgICAgLyozMS4wNy4yMDIwIEFGOiBuZWxsYSB0cmFuc2F6aW9uZSBjb21wbGV0ZSBOT04gaW52aWFyZSBtYWlsIGxhIG1haWwgcGVyIGkgdGlja2V0IGNvbiBjb2xsZWdhdGkgLSBpbCByYXBwb3J0byBkaSBpbnRlcnZlbnRvIGRlaSB0aWNrZXQgXCJmaWdsaVwiIHZpZW5lIGdlbmVyYXRvIGRvcG8gbCdpbnZpbyBkZWxsYSBtYWlsIHN1bCBcInBhZHJlXCIgcXVpbmRpIG5vbiB2ZXJyZWJiZSBpbmNsdXNvIG5lbGxhIG1haWwqL1xuICAgICAgICAvKkwnaW52aW8gZGVsbGEgbWFpbCB2ZXJyXHUwMGUwIGZhdHRvIHN1Y2Nlc3NpdmFtZW50ZSByaXNwZXR0byBhbGxhIGNoaXVzdXJhIGNvbiBcIlNlbmQgT25TaXRlIFJlcG9ydFwiKi9cbiAgICAgICAgc2VuZG1haWw9ZmFsc2VcbiAgICB9ZWxzZSBpZigocmVsYXRlc0luSXNzdWVMaW5rIHx8IHJlbGF0ZXNPdXRJc3N1ZUxpbmspICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLm5vRW1haWwnXS50b1N0cmluZygpKSAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLmN1cnJlbnRSZXBvcnQnXS50b1N0cmluZygpKSl7XG4gICAgICAgIC8vT1AtMTAzODogaW52aWFyZSBsYSBtYWlsIGNvbiB0dXR0aSBpIHJhcHBvcnRpIGRpIGludGVydmVudG8gZGVpIHRpY2tldCBjb2xsZWdhdGlcbiAgICAgICAgYm9keV9yZXEgPSBbXG4gICAgICAgICAgICBcInRlbXBsYXRlTmFtZVwiOiBwcm9wZXJ0aWVzWyd0dC5vblNpdGVSZXBvcnQnXS50b1N0cmluZygpLFxuICAgICAgICAgICAgXCJwZWNcIjogZmFsc2UsXG4gICAgICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleSxcbiAgICAgICAgICAgIFwibGlua2VkVGlja2V0c1wiOiBsaW5rZWRUaWNrZXRzLFxuICAgICAgICAgICAgXCJhZGRpdGlvbmFsUmVjaXBpZW50c1wiOiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG9SZWMpLnRvU3RyaW5nKClcbiAgICAgICAgXVxuICAgICAgICAvKjMxLjA3LjIwMjAgQUY6IG5lbGxhIHRyYW5zYXppb25lIGNvbXBsZXRlIE5PTiBpbnZpYXJlIG1haWwgbGEgbWFpbCBwZXIgaSB0aWNrZXQgY29uIGNvbGxlZ2F0aSAtIGlsIHJhcHBvcnRvIGRpIGludGVydmVudG8gZGVpIHRpY2tldCBcImZpZ2xpXCIgdmllbmUgZ2VuZXJhdG8gZG9wbyBsJ2ludmlvIGRlbGxhIG1haWwgc3VsIFwicGFkcmVcIiBxdWluZGkgbm9uIHZlcnJlYmJlIGluY2x1c28gbmVsbGEgbWFpbCovXG4gICAgICAgIC8qTCdpbnZpbyBkZWxsYSBtYWlsIHZlcnJcdTAwZTAgZmF0dG8gc3VjY2Vzc2l2YW1lbnRlIHJpc3BldHRvIGFsbGEgY2hpdXN1cmEgY29uIFwiU2VuZCBPblNpdGUgUmVwb3J0XCIqL1xuICAgICAgICBzZW5kbWFpbD1mYWxzZVxuICAgIH1lbHNlIGlmKCFyZWxhdGVzSW5Jc3N1ZUxpbmsgJiYgIXJlbGF0ZXNPdXRJc3N1ZUxpbmspe1xuICAgICAgICAvKkFGIDIwMjAwNzI5IC0gc3UgRkFBQyBTZXJ2aWNlIGxhIG5vdGlmaWNhIGNvbiBpbCByYXBwb3J0byBkaSBpbnRlcnZlbnRvIHZpZW5lIGludmlhdGEgc29sbyBzdSBlc3BsaWNpdGEgZGVjaXNpb25lIGRlbGwndXRlbnRlIC0gY2hlIHNwaW5nZXJcdTAwZTAgU0VORCBPTlNJVEUgUkVQT1JUIGRvcG8gYXZlciBjaGl1c28gaWwgdGlja2V0LiBRdWluZGkgc2Ugbm9uIGNpIHNvbm8gdGlja2V0IGNvbGxlZ2F0aSBzZXR0aWFtbyBzZW5kbWFpbD1mYWxzZSovXG4gICAgICAgIHNlbmRtYWlsPWZhbHNlXG4gICAgICAgIGJvZHlfcmVxID0gW1xuICAgICAgICAgICAgXCJ0ZW1wbGF0ZU5hbWVcIjogcHJvcGVydGllc1sndHQub25TaXRlUmVwb3J0J10udG9TdHJpbmcoKSxcbiAgICAgICAgICAgIFwicGVjXCI6IGZhbHNlLFxuICAgICAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXG4gICAgICAgICAgICBcImFkZGl0aW9uYWxSZWNpcGllbnRzXCI6IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUb1JlYykudG9TdHJpbmcoKVxuICAgICAgICBdXG4gICAgfWVsc2V7XG4gICAgICAgIC8vT1AtMTAzODogbm9uIGludmlhcmUgbGEgbWFpbFxuICAgICAgICBzZW5kbWFpbD1mYWxzZVxuICAgIH1cbiAgICBcbiAgICBsb2cuZGVidWcgXCJzZW5kbWFpbDogXCIgKyBzZW5kbWFpbFxuICAgIGlmKHNlbmRtYWlsKXtcbiAgICAgICAgLyogUkVTVCBBUEkgcGVyIEludmlvIE5vdGlmaWNhIEVtYWlsIE9OU0lURV9SRVBPUlQgKi9cbiAgICAgICAgcmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuXG4gICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL3RyYW5zYWN0aW9uL21haWwvc2VuZFwiXG4gICAgICAgIFVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgICAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgICAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxOiBcIiArIGJvZHlfcmVxXG4gICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cbiAgICAgICAgbG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuICAgICAgICBcbiAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgIC8vbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuXG4gICAgICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcblxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG4gICAgICAgICAgICBDbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuICAgICAgICAgICAgZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG5cbiAgICAgICAgICAgIC8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbiAgICAgICAgICAgIENsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTtcbiAgICAgICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4gICAgICAgICAgICAvKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbiAgICAgICAgICAgIENsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpO1xuICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcblxuICAgICAgICAgICAgLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbiAgICAgICAgICAgIENsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcblxuICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG4gICAgICAgICAgICBkZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG5cbiAgICAgICAgICAgIC8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSBcIiBhcm91bmQgdmFsdWUgKi9cbiAgICAgICAgICAgIC8qUk9MTEJBQ0sqL1xuICAgICAgICAgICAgLypSaW1vemlvbmUgYWxsZWdhdG8gcmFwcG9ydG8gZGkgaW50ZXJ2ZW50byBhcHBlbmEgY3JlYXRvKi9cbiAgICAgICAgICAgIGRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5cXFwiTmFtZVxcXCIgPSBcXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5vYmpzLnJhcHBJbnRGQUFDJ10udG9TdHJpbmcoKSArIFwiXFxcIiBBTkQgXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSArIFwiIT10cnVlIEFORCBvYmplY3QgSEFWSU5HIGNvbm5lY3RlZFRpY2tldHMoa2V5ID0gXCIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArIFwiKVwiKTsgLy8gU2VlIHRoZSBjb21wbGV0ZSBsaXN0IG9mIHBvc3NpYmxlIElRTCBvbiB0aGUgSW5zaWdodCBRdWVyeSBMYW5ndWFnZSBkb2N1bWVudGF0aW9uIHBhZ2VcbiAgICAgICAgICAgIC8qIElmIHRoaXMgaXMgYSBtYW5kYXRvcnkgZmllbGQgeW91IHNob3VsZCBiZSBhYmxlIHRvIGRvIHRoaXM6ICovXG4gICAgICAgICAgICAvL2xvZy5pbmZvKFwiSW5zaWdodCBvYmplY3Q6IFwiICsgb2JqZWN0c1swXSk7XG5cbiAgICAgICAgICAgIGlmKG9iamVjdHNbMF0pe1xuICAgICAgICAgICAgICAgIC8qIFVQREFURSBPSkJFQ1QgREVMRVRFRCBWQUxVRSAqL1xuICAgICAgICAgICAgICAgIGRlZiBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihvYmplY3RzWzBdLmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkgIFxuICAgICAgICAgICAgICAgIGRlZiB2YWx1ZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuXG4gICAgICAgICAgICAgICAgZGVmIHZhbHVlQmVhbiA9IG9iVHJpYWdlLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpXG4gICAgICAgICAgICAgICAgdmFsdWVCZWFuLnNldFZhbHVlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlLmdldE9iamVjdFR5cGVBdHRyaWJ1dGVJZCgpKSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAvKkNsZWFuIGFjdHVhbCB2YWx1ZSovXG4gICAgICAgICAgICAgICAgdmFsdWUuY2xlYXIoKVxuICAgICAgICAgICAgICAgIHZhbHVlLmFkZCh2YWx1ZUJlYW4pO1xuICAgICAgICAgICAgICAgIG9iVHJpYWdlLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWUpXG5cbiAgICAgICAgICAgICAgICAvL1VwZGF0ZSBPSkJFQ1QgYXR0cmlidXRlIHZhbHVlXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiMS4gQ291bGQgbm90IHVwZGF0ZSBvYmplY3QgYXR0cmlidXRlIGR1ZSB0byB2YWxpZGF0aW9uIGV4Y2VwdGlvbjpcIiArIHZpZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLypSb2xsYmFjayBjb250YWJpbGl6emF6aW9uZSBpbnRlcnZlbnRvKi9cbiAgICAgICAgICAgIC8qQ2FuY2VsbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBPblNpdGVfUmF0ZV9SZXBvcnQgcmVnaXN0cmF0aSBuZWkgY2FtcGkgT1BBQV9MVU1QX1NVTV9SQVRFUywgT1BBQV9VTkFfVEFOVFVNX1JBVEVTLCBPUEFBX1RSQVZFTF9SQVRFUywgT1BBQV9MQUJPVVJfUkFURVMqL1xuICAgICAgICAgICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovXG5cbiAgICAgICAgICAgIC8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSBcIiBhcm91bmQgdmFsdWUgKi9cbiAgICAgICAgICAgIG9iamVjdHMgPSBpcWxGYWNhZGUuZmluZE9iamVjdHNCeUlRTEFuZFNjaGVtYShPUEFBLCBcIm9iamVjdFR5cGUgPSBcIiArIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydCddLnRvU3RyaW5nKCkgKyBcIiBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleT1cIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIpIEFORCBcXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyBcIlxcXCIgIT0gdHJ1ZVwiKTsgLy8gU2VlIHRoZSBjb21wbGV0ZSBsaXN0IG9mIHBvc3NpYmxlIElRTCBvbiB0aGUgSW5zaWdodCBRdWVyeSBMYW5ndWFnZSBkb2N1bWVudGF0aW9uIHBhZ2VcbiAgICAgICAgICAgIC8qIElmIHRoaXMgaXMgYSBtYW5kYXRvcnkgZmllbGQgeW91IHNob3VsZCBiZSBhYmxlIHRvIGRvIHRoaXM6ICovXG4gICAgICAgICAgICAvL2xvZy5pbmZvKFwiSW5zaWdodCBvYmplY3RzIGRhIGNhbmNlbGxhcmU6IFwiICsgb2JqZWN0cyk7XG5cbiAgICAgICAgICAgIGZvcihvYmogaW4gb2JqZWN0cyl7XG4gICAgICAgICAgICAgICAgLyogREVMRVRFIENPTk5FQ1RFRCBPQkpFQ1RTICovXG4gICAgICAgICAgICAgICAgb2JqZWN0RmFjYWRlLmRlbGV0ZU9iamVjdEJlYW4ob2JqLmdldElkKCkpOyAgXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qQ2FuY2VsbGFyZSBnbGkgaW1wb3J0aSBmb3JuaXRvcmUsIGNsaWVudGUgZSBpIHRvdGFsaSBzdSB0dXR0aSBnbGkgb2dnZXR0aSBDb21wb25lbnQgaW4gT1BBQV9SRVBMQUNFRF9NQVRFUklBTFMqL1xuICAgICAgICAgICAgZGVmIHJlcE1hdGVyaWFscyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YucmVwbGFjZWRNYXRlcmlhbHMnXS50b1N0cmluZygpKVswXVxuICAgICAgICAgICAgZGVmIHJlcE1hdExpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscylcblxuICAgICAgICAgICAgZm9yKG1hdCBpbiByZXBNYXRMaXN0KXtcbiAgICAgICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5kIGdldCBvYmplY3RcbiAgICAgICAgICAgICAgICBkZWYgY29tcG9uZW50PW1hdC50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgZGVmIGNvbXBvbmVudEtleSA9IGNvbXBvbmVudC5zdWJzdHJpbmcoY29tcG9uZW50LmluZGV4T2YoJygnKSsxLGNvbXBvbmVudC5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgZGVmIGNvbXBvbmVudE9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihjb21wb25lbnRLZXkpXG4gICAgICAgICAgICAgICAgLy9zZXQgXCJBUFBMSUVEX1RPXCIsIFwiQUNDT1VOVElOR19TVVBQTElFUl9NQVRFUklBTF9SRUZcIiwgXCJBQ0NPVU5USU5HX0NVU1RPTUVSX01BVEVSSUFMX1JFRlwiLCBcIlRPVEFMX0FNT1VOVF9TVVBQTElFUlwiLCBcIlRPVEFMX0FNT1VOVF9DVVNUT01FUlwiIHRvIG51bGwgZm9yIHRoYXQgY29tcG9uZW50XG5cbiAgICAgICAgICAgICAgICAvL0FQUExJRURfVE9cbiAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgICAgICAgICAgZGVmIG9iVHJpYWdlQXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICAgICAgZGVmIHZhbHVlQXBwbGllZFRvID0gb2JUcmlhZ2VBcHBsaWVkVG8uZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuIFwidmFsdWVBcHBsaWVkVG86IFwiICsgdmFsdWVBcHBsaWVkVG9cbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlQXBwbGllZFRvLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVBcHBsaWVkVG8uY2xlYXIoKSBcblxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZUFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5kZWxldGVPYmplY3RBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlQXBwbGllZFRvLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpeyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZXJyb3IoXCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOlwiICsgdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL0FDQ09VTlRJTkdfU1VQUExJRVJfTUFURVJJQUxfUkVGXG4gICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hY2NvdW50aW5nU3VwcE1hdGVyaWFsJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgICAgICBkZWYgb2JUcmlhZ2VNYXRTID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hY2NvdW50aW5nU3VwcE1hdGVyaWFsJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgICAgIGRlZiB2YWx1ZU1hdFMgPSBvYlRyaWFnZU1hdFMuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuIFwidmFsdWVNYXRTOiBcIiArIHZhbHVlTWF0U1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVNYXRTLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVNYXRTLmNsZWFyKCkgXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2VNYXRTID0gb2JqZWN0RmFjYWRlLmRlbGV0ZU9iamVjdEF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2VNYXRTLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpeyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZXJyb3IoXCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOlwiICsgdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL0FDQ09VTlRJTkdfQ1VTVE9NRVJfTUFURVJJQUxfUkVGXG4gICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hY2NvdW50aW5nQ3VzdE1hdGVyaWFsJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgICAgICBkZWYgb2JUcmlhZ2VNYXRDID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hY2NvdW50aW5nQ3VzdE1hdGVyaWFsJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgICAgIGRlZiB2YWx1ZU1hdEMgPSBvYlRyaWFnZU1hdEMuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuIFwidmFsdWVNYXRDOiBcIiArIHZhbHVlTWF0Q1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVNYXRDLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVNYXRDLmNsZWFyKCkgXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2VNYXRDID0gb2JqZWN0RmFjYWRlLmRlbGV0ZU9iamVjdEF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2VNYXRDLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpeyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZXJyb3IoXCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOlwiICsgdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy9UT1RBTF9BTU9VTlRfU1VQUExJRVJcbiAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdFN1cHAnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgICAgIGRlZiBvYlRyaWFnZVRvdFMgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdFN1cHAnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICAgICAgZGVmIHZhbHVlVG90UyA9IG9iVHJpYWdlVG90Uy5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4gXCJ2YWx1ZVRvdFM6IFwiICsgdmFsdWVUb3RTXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZVRvdFMuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVRvdFMuY2xlYXIoKSBcblxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZVRvdFMgPSBvYmplY3RGYWNhZGUuZGVsZXRlT2JqZWN0QXR0cmlidXRlQmVhbihvYlRyaWFnZVRvdFMuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSl7IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5lcnJvcihcIkNvdWxkIG5vdCB1cGRhdGUgb2JqZWN0IGF0dHJpYnV0ZSBkdWUgdG8gdmFsaWRhdGlvbiBleGNlcHRpb246XCIgKyB2aWUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vVE9UQUxfQU1PVU5UX0NVU1RPTUVSXG4gICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RDdXN0J10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgICAgICBkZWYgb2JUcmlhZ2VUb3RDID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RDdXN0J10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgICAgIGRlZiB2YWx1ZVRvdEMgPSBvYlRyaWFnZVRvdEMuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuIFwidmFsdWVUb3RDOiBcIiArIHZhbHVlVG90Q1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVUb3RDLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVUb3RDLmNsZWFyKCkgXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2VUb3RDID0gb2JqZWN0RmFjYWRlLmRlbGV0ZU9iamVjdEF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2VUb3RDLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpeyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZXJyb3IoXCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOlwiICsgdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ICAgIFxuXG4gICAgICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgICAgICBsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXG5cbiAgICAgICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICAgICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICBcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiU0VORE1BSUxcIilcbiAgICAgICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKSlcbiAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChqc29uX29iamVjdC5tZXNzYWdlKVxuICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgLypMJ2VtYWlsIFx1MDBlOCBzdGF0YSBpbnZpYXRhIGNvcnJldHRhbWVudGUsIGFnZ2lvcm5vIGlsIGNhbXBvIE9OU0lURV9SRVBPUlQgY29uIGxhIGRhdGEgY29ycmVudGUqL1xuXG4gICAgICAgICAgICAvLyBsb2cud2FybiBcImlzc3VlIFwiK2lzc3VlLmdldEtleSgpXG4gICAgICAgICAgICBkZWYgY2Z2ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShvbnNpdGVSZXBvcnREYXRlKVxuICAgICAgICAgICAgaWYgKCFjZnYpIHtcbiAgICAgICAgICAgICAgZGVmIHQwICA9IG5ldyBqYXZhLnNxbC5UaW1lc3RhbXAoU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkpXG4gICAgICAgICAgICAgIGxvZy53YXJuIFwiU3RhcnRUaW1lID0+ICdcIit0MC50b1N0cmluZygpK1wiJ1wiXG4gICAgICAgICAgICAgIGRlZiBtdiA9IG5ldyBNb2RpZmllZFZhbHVlKG9uc2l0ZVJlcG9ydERhdGUsIHQwKVxuICAgICAgICAgICAgICBkZWYgY2ggPSBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKClcbiAgICAgICAgICAgICAgb25zaXRlUmVwb3J0RGF0ZS51cGRhdGVWYWx1ZShudWxsLCBpc3N1ZSwgbXYsIGNoKSBcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGxvZy53YXJuIFwiU3RhcnRUaW1lID09ICdcIitjZnYudG9TdHJpbmcoKStcIidcIlxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWUKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS51dGlsLkRlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvbgppbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CkNhdGVnb3J5IGxvZyA9IENhdGVnb3J5LmdldEluc3RhbmNlKCJjb20ub25yZXNvbHZlLmppcmEuZ3Jvb3Z5LlBvc3RGdW5jdGlvbiIpCmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKQoKSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpOwpDdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7CmRlZiBhdXRvbWF0aWNhbGx5Q2xvc2VkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q2xvc2VkJ10udG9TdHJpbmcoKSlbMF0KZGVmIHNlbmRNYWlsVG8gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnNlbmRNYWlsVG8nXS50b1N0cmluZygpKVswXQpkZWYgc2VuZE1haWxUb1JlYyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yuc2VuZE1haWxUb1JlY2lwaWVudHMnXS50b1N0cmluZygpKVswXQpkZWYgb25zaXRlUmVwb3J0RGF0ZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi53Zk9uc2l0ZVJlcG9ydCddLnRvU3RyaW5nKCkpWzBdCgpkZWYgcmVxdWVzdE1ldGhvZApkZWYgYmFzZVVSTAoKaW50IE9QQUEgPSBwcm9wZXJ0aWVzWydpc2NoZW1hLmFhLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKQppbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpCmRlZiByZWxhdGVzSW5Jc3N1ZUxpbms9ZmFsc2UKZGVmIHJlbGF0ZXNPdXRJc3N1ZUxpbms9ZmFsc2UKZGVmIGxpbmtlZFRpY2tldHM9bmV3IEFycmF5TGlzdCgpCmRlZiBib2R5X3JlcQpkZWYgc2VuZG1haWw9dHJ1ZQoKaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKT09bnVsbCB8fCAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKS50b1N0cmluZygpLmVxdWFscygiWWVzIikpewoKICAgIC8qT1AtMTAzODogdmVyaWZpY2EgdGlja2V0IGNvbGxlZ2F0aSovCiAgICBMaXN0PElzc3VlTGluaz4gYWxsSW5Jc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0SW53YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSkKICAgIGZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbEluSXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHsKICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpOwoKICAgICAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgIHJlbGF0ZXNJbklzc3VlTGluaz10cnVlCiAgICAgICAgICAgIGxpbmtlZFRpY2tldHMuYWRkKGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKS50b1N0cmluZygpKQogICAgICAgICAgICBsb2cuZGVidWcgIklzc3VlIGNvbiByZWxhdGVzSW5Jc3N1ZUxpbmsiCiAgICAgICAgfQogICAgfQogICAgTGlzdDxJc3N1ZUxpbms+IGFsbE91dElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSkKICAgIGZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbE91dElzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7CiAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTsKCiAgICAgICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICByZWxhdGVzT3V0SXNzdWVMaW5rPXRydWUKICAgICAgICAgICAgbGlua2VkVGlja2V0cy5hZGQoaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkudG9TdHJpbmcoKSkKICAgICAgICAgICAgbG9nLmRlYnVnICJJc3N1ZSBjb24gcmVsYXRlc091dElzc3VlTGluayIKICAgICAgICB9CiAgICB9CiAgICAKICAgIGxvZy5kZWJ1ZyAiaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKS50b1N0cmluZygpOiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKS50b1N0cmluZygpCiAgICBpZigocmVsYXRlc0luSXNzdWVMaW5rIHx8IHJlbGF0ZXNPdXRJc3N1ZUxpbmspICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLm5vRW1haWwnXS50b1N0cmluZygpKSAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLmN1cnJlbnRSZXBvcnQnXS50b1N0cmluZygpKSl7CiAgICAgICAgLy9PUC0xMDM4OiBpbnZpYXJlIHNvbG8gbGEgbWFpbCBjb24gaWwgcmFwcG9ydG8gZGkgaW50ZXJ2ZW50byBkZWwgdGlja2V0IGNvcnJlbnRlCiAgICAgICAgYm9keV9yZXEgPSBbCiAgICAgICAgICAgICJ0ZW1wbGF0ZU5hbWUiOiBwcm9wZXJ0aWVzWyd0dC5vblNpdGVSZXBvcnQnXS50b1N0cmluZygpLAogICAgICAgICAgICAicGVjIjogZmFsc2UsCiAgICAgICAgICAgICJpc3N1ZUtleSI6IGlzc3VlLmtleSwKICAgICAgICAgICAgImFkZGl0aW9uYWxSZWNpcGllbnRzIjogaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvUmVjKS50b1N0cmluZygpCiAgICAgICAgXQogICAgICAgIC8qMzEuMDcuMjAyMCBBRjogbmVsbGEgdHJhbnNhemlvbmUgY29tcGxldGUgTk9OIGludmlhcmUgbWFpbCBsYSBtYWlsIHBlciBpIHRpY2tldCBjb24gY29sbGVnYXRpIC0gaWwgcmFwcG9ydG8gZGkgaW50ZXJ2ZW50byBkZWkgdGlja2V0ICJmaWdsaSIgdmllbmUgZ2VuZXJhdG8gZG9wbyBsJ2ludmlvIGRlbGxhIG1haWwgc3VsICJwYWRyZSIgcXVpbmRpIG5vbiB2ZXJyZWJiZSBpbmNsdXNvIG5lbGxhIG1haWwqLwogICAgICAgIC8qTCdpbnZpbyBkZWxsYSBtYWlsIHZlcnLDoCBmYXR0byBzdWNjZXNzaXZhbWVudGUgcmlzcGV0dG8gYWxsYSBjaGl1c3VyYSBjb24gIlNlbmQgT25TaXRlIFJlcG9ydCIqLwogICAgICAgIHNlbmRtYWlsPWZhbHNlCiAgICB9ZWxzZSBpZigocmVsYXRlc0luSXNzdWVMaW5rIHx8IHJlbGF0ZXNPdXRJc3N1ZUxpbmspICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLm5vRW1haWwnXS50b1N0cmluZygpKSAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLmN1cnJlbnRSZXBvcnQnXS50b1N0cmluZygpKSl7CiAgICAgICAgLy9PUC0xMDM4OiBpbnZpYXJlIGxhIG1haWwgY29uIHR1dHRpIGkgcmFwcG9ydGkgZGkgaW50ZXJ2ZW50byBkZWkgdGlja2V0IGNvbGxlZ2F0aQogICAgICAgIGJvZHlfcmVxID0gWwogICAgICAgICAgICAidGVtcGxhdGVOYW1lIjogcHJvcGVydGllc1sndHQub25TaXRlUmVwb3J0J10udG9TdHJpbmcoKSwKICAgICAgICAgICAgInBlYyI6IGZhbHNlLAogICAgICAgICAgICAiaXNzdWVLZXkiOiBpc3N1ZS5rZXksCiAgICAgICAgICAgICJsaW5rZWRUaWNrZXRzIjogbGlua2VkVGlja2V0cywKICAgICAgICAgICAgImFkZGl0aW9uYWxSZWNpcGllbnRzIjogaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvUmVjKS50b1N0cmluZygpCiAgICAgICAgXQogICAgICAgIC8qMzEuMDcuMjAyMCBBRjogbmVsbGEgdHJhbnNhemlvbmUgY29tcGxldGUgTk9OIGludmlhcmUgbWFpbCBsYSBtYWlsIHBlciBpIHRpY2tldCBjb24gY29sbGVnYXRpIC0gaWwgcmFwcG9ydG8gZGkgaW50ZXJ2ZW50byBkZWkgdGlja2V0ICJmaWdsaSIgdmllbmUgZ2VuZXJhdG8gZG9wbyBsJ2ludmlvIGRlbGxhIG1haWwgc3VsICJwYWRyZSIgcXVpbmRpIG5vbiB2ZXJyZWJiZSBpbmNsdXNvIG5lbGxhIG1haWwqLwogICAgICAgIC8qTCdpbnZpbyBkZWxsYSBtYWlsIHZlcnLDoCBmYXR0byBzdWNjZXNzaXZhbWVudGUgcmlzcGV0dG8gYWxsYSBjaGl1c3VyYSBjb24gIlNlbmQgT25TaXRlIFJlcG9ydCIqLwogICAgICAgIHNlbmRtYWlsPWZhbHNlCiAgICB9ZWxzZSBpZighcmVsYXRlc0luSXNzdWVMaW5rICYmICFyZWxhdGVzT3V0SXNzdWVMaW5rKXsKICAgICAgICAvKkFGIDIwMjAwNzI5IC0gc3UgRkFBQyBTZXJ2aWNlIGxhIG5vdGlmaWNhIGNvbiBpbCByYXBwb3J0byBkaSBpbnRlcnZlbnRvIHZpZW5lIGludmlhdGEgc29sbyBzdSBlc3BsaWNpdGEgZGVjaXNpb25lIGRlbGwndXRlbnRlIC0gY2hlIHNwaW5nZXLDoCBTRU5EIE9OU0lURSBSRVBPUlQgZG9wbyBhdmVyIGNoaXVzbyBpbCB0aWNrZXQuIFF1aW5kaSBzZSBub24gY2kgc29ubyB0aWNrZXQgY29sbGVnYXRpIHNldHRpYW1vIHNlbmRtYWlsPWZhbHNlKi8KICAgICAgICBzZW5kbWFpbD1mYWxzZQogICAgICAgIGJvZHlfcmVxID0gWwogICAgICAgICAgICAidGVtcGxhdGVOYW1lIjogcHJvcGVydGllc1sndHQub25TaXRlUmVwb3J0J10udG9TdHJpbmcoKSwKICAgICAgICAgICAgInBlYyI6IGZhbHNlLAogICAgICAgICAgICAiaXNzdWVLZXkiOiBpc3N1ZS5rZXksCiAgICAgICAgICAgICJhZGRpdGlvbmFsUmVjaXBpZW50cyI6IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUb1JlYykudG9TdHJpbmcoKQogICAgICAgIF0KICAgIH1lbHNlewogICAgICAgIC8vT1AtMTAzODogbm9uIGludmlhcmUgbGEgbWFpbAogICAgICAgIHNlbmRtYWlsPWZhbHNlCiAgICB9CiAgICAKICAgIGxvZy5kZWJ1ZyAic2VuZG1haWw6ICIgKyBzZW5kbWFpbAogICAgaWYoc2VuZG1haWwpewogICAgICAgIC8qIFJFU1QgQVBJIHBlciBJbnZpbyBOb3RpZmljYSBFbWFpbCBPTlNJVEVfUkVQT1JUICovCiAgICAgICAgcmVxdWVzdE1ldGhvZCA9ICJQT1NUIjsKCiAgICAgICAgYmFzZVVSTCA9ICJodHRwOi8vIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgIi9vcC9yZXN0L2ppcmEvQUEvdHJhbnNhY3Rpb24vbWFpbC9zZW5kIgogICAgICAgIFVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpCiAgICAgICAgSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTsKICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7CiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLTgiKTsKICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eSgiQWNjZXB0IiwgIiovKiIpOwogICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7CiAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpOwogICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtCiAgICAgICAgbG9nLmRlYnVnICJib2R5X3JlcTogIiArIGJvZHlfcmVxCiAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcigiVVRGLTgiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH0KICAgICAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0KICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTsKICAgICAgICAKICAgICAgICBsb2cuZGVidWcgInVybDogIiArIHVybAogICAgICAgIGxvZy5kZWJ1ZyAiUmVzcG9uc2VDb2RlOiIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpCiAgICAgICAgLy9sb2cuZGVidWcgIlJlc3BvbnNlTWVzc2FnZToiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKQoKICAgICAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKQoKICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoIjIwMCIpKXsKICAgICAgICAgICAgbG9nLmRlYnVnICJ1cmw6ICIgKyB1cmwKICAgICAgICAgICAgbG9nLmRlYnVnICJSZXNwb25zZUNvZGU6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkKICAgICAgICAgICAgbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKCiAgICAgICAgICAgIAogICAgICAgICAgICAvKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovCiAgICAgICAgICAgIENsYXNzIGlxbEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuSVFMRmFjYWRlIik7IAogICAgICAgICAgICBkZWYgaXFsRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKGlxbEZhY2FkZUNsYXNzKTsKCiAgICAgICAgICAgIC8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi8KICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGUiKTsKICAgICAgICAgICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7CgogICAgICAgICAgICAvKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi8KICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0VHlwZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUZhY2FkZSIpOwogICAgICAgICAgICBkZWYgb2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpOwoKICAgICAgICAgICAgLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi8KICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSIpOwogICAgICAgICAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpOwoKICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuc2VydmljZXMubW9kZWwuZmFjdG9yeS5PYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeSIpOwogICAgICAgICAgICBkZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7CgogICAgICAgICAgICAvKiBTcGVjaWZ5IHRoZSBzY2hlbWEgaWQgYXMgd2VsbCBhcyB0aGUgSVFMIHRoYXQgd2lsbCBmZXRjaCBvYmplY3RzLiBJbiB0aGlzIGNhc2UgYWxsIG9iamVjdHMgd2l0aCBOYW1lIG1hdGNoaW5nIHRoZSB2YWx1ZUNGLCBiZSBzdXJlIHRvIGluY2x1ZGUgIiBhcm91bmQgdmFsdWUgKi8KICAgICAgICAgICAgLypST0xMQkFDSyovCiAgICAgICAgICAgIC8qUmltb3ppb25lIGFsbGVnYXRvIHJhcHBvcnRvIGRpIGludGVydmVudG8gYXBwZW5hIGNyZWF0byovCiAgICAgICAgICAgIGRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCAiXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuY2F0ZWdvcnlSZWYnXS50b1N0cmluZygpICsgIlwiLlwiTmFtZVwiID0gXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkub2Jqcy5yYXBwSW50RkFBQyddLnRvU3RyaW5nKCkgKyAiXCIgQU5EICIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSArICIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSAiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyAiKSIpOyAvLyBTZWUgdGhlIGNvbXBsZXRlIGxpc3Qgb2YgcG9zc2libGUgSVFMIG9uIHRoZSBJbnNpZ2h0IFF1ZXJ5IExhbmd1YWdlIGRvY3VtZW50YXRpb24gcGFnZQogICAgICAgICAgICAvKiBJZiB0aGlzIGlzIGEgbWFuZGF0b3J5IGZpZWxkIHlvdSBzaG91bGQgYmUgYWJsZSB0byBkbyB0aGlzOiAqLwogICAgICAgICAgICAvL2xvZy5pbmZvKCJJbnNpZ2h0IG9iamVjdDogIiArIG9iamVjdHNbMF0pOwoKICAgICAgICAgICAgaWYob2JqZWN0c1swXSl7CiAgICAgICAgICAgICAgICAvKiBVUERBVEUgT0pCRUNUIERFTEVURUQgVkFMVUUgKi8KICAgICAgICAgICAgICAgIGRlZiBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihvYmplY3RzWzBdLmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkgIAogICAgICAgICAgICAgICAgZGVmIHZhbHVlID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpCgogICAgICAgICAgICAgICAgZGVmIHZhbHVlQmVhbiA9IG9iVHJpYWdlLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpCiAgICAgICAgICAgICAgICB2YWx1ZUJlYW4uc2V0VmFsdWUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2UuZ2V0T2JqZWN0VHlwZUF0dHJpYnV0ZUlkKCkpLCB0cnVlKQogICAgICAgICAgICAgICAgLypDbGVhbiBhY3R1YWwgdmFsdWUqLwogICAgICAgICAgICAgICAgdmFsdWUuY2xlYXIoKQogICAgICAgICAgICAgICAgdmFsdWUuYWRkKHZhbHVlQmVhbik7CiAgICAgICAgICAgICAgICBvYlRyaWFnZS5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKHZhbHVlKQoKICAgICAgICAgICAgICAgIC8vVXBkYXRlIE9KQkVDVCBhdHRyaWJ1dGUgdmFsdWUKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHsKICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiMS4gQ291bGQgbm90IHVwZGF0ZSBvYmplY3QgYXR0cmlidXRlIGR1ZSB0byB2YWxpZGF0aW9uIGV4Y2VwdGlvbjoiICsgdmllLmdldE1lc3NhZ2UoKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8qUm9sbGJhY2sgY29udGFiaWxpenphemlvbmUgaW50ZXJ2ZW50byovCiAgICAgICAgICAgIC8qQ2FuY2VsbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBPblNpdGVfUmF0ZV9SZXBvcnQgcmVnaXN0cmF0aSBuZWkgY2FtcGkgT1BBQV9MVU1QX1NVTV9SQVRFUywgT1BBQV9VTkFfVEFOVFVNX1JBVEVTLCBPUEFBX1RSQVZFTF9SQVRFUywgT1BBQV9MQUJPVVJfUkFURVMqLwogICAgICAgICAgICAvKkNpY2xhcmUgdHV0dGkgZ2xpIG9nZ2V0dGkgYXNzb2NpYXRpIGFsIGNhbXBvKi8KCiAgICAgICAgICAgIC8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSAiIGFyb3VuZCB2YWx1ZSAqLwogICAgICAgICAgICBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoT1BBQSwgIm9iamVjdFR5cGUgPSAiICsgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0J10udG9TdHJpbmcoKSArICIgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXk9IiArIGlzc3VlLmtleS50b1N0cmluZygpICsgIikgQU5EIFwiIiArIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSArICJcIiAhPSB0cnVlIik7IC8vIFNlZSB0aGUgY29tcGxldGUgbGlzdCBvZiBwb3NzaWJsZSBJUUwgb24gdGhlIEluc2lnaHQgUXVlcnkgTGFuZ3VhZ2UgZG9jdW1lbnRhdGlvbiBwYWdlCiAgICAgICAgICAgIC8qIElmIHRoaXMgaXMgYSBtYW5kYXRvcnkgZmllbGQgeW91IHNob3VsZCBiZSBhYmxlIHRvIGRvIHRoaXM6ICovCiAgICAgICAgICAgIC8vbG9nLmluZm8oIkluc2lnaHQgb2JqZWN0cyBkYSBjYW5jZWxsYXJlOiAiICsgb2JqZWN0cyk7CgogICAgICAgICAgICBmb3Iob2JqIGluIG9iamVjdHMpewogICAgICAgICAgICAgICAgLyogREVMRVRFIENPTk5FQ1RFRCBPQkpFQ1RTICovCiAgICAgICAgICAgICAgICBvYmplY3RGYWNhZGUuZGVsZXRlT2JqZWN0QmVhbihvYmouZ2V0SWQoKSk7ICAKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLypDYW5jZWxsYXJlIGdsaSBpbXBvcnRpIGZvcm5pdG9yZSwgY2xpZW50ZSBlIGkgdG90YWxpIHN1IHR1dHRpIGdsaSBvZ2dldHRpIENvbXBvbmVudCBpbiBPUEFBX1JFUExBQ0VEX01BVEVSSUFMUyovCiAgICAgICAgICAgIGRlZiByZXBNYXRlcmlhbHMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJlcGxhY2VkTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF0KICAgICAgICAgICAgZGVmIHJlcE1hdExpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykKCiAgICAgICAgICAgIGZvcihtYXQgaW4gcmVwTWF0TGlzdCl7CiAgICAgICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5kIGdldCBvYmplY3QKICAgICAgICAgICAgICAgIGRlZiBjb21wb25lbnQ9bWF0LnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIGRlZiBjb21wb25lbnRLZXkgPSBjb21wb25lbnQuc3Vic3RyaW5nKGNvbXBvbmVudC5pbmRleE9mKCcoJykrMSxjb21wb25lbnQuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgZGVmIGNvbXBvbmVudE9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihjb21wb25lbnRLZXkpCiAgICAgICAgICAgICAgICAvL3NldCAiQVBQTElFRF9UTyIsICJBQ0NPVU5USU5HX1NVUFBMSUVSX01BVEVSSUFMX1JFRiIsICJBQ0NPVU5USU5HX0NVU1RPTUVSX01BVEVSSUFMX1JFRiIsICJUT1RBTF9BTU9VTlRfU1VQUExJRVIiLCAiVE9UQUxfQU1PVU5UX0NVU1RPTUVSIiB0byBudWxsIGZvciB0aGF0IGNvbXBvbmVudAoKICAgICAgICAgICAgICAgIC8vQVBQTElFRF9UTwogICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hcHBsaWVkVG8nXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICAgICAgZGVmIG9iVHJpYWdlQXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkKICAgICAgICAgICAgICAgICAgICBkZWYgdmFsdWVBcHBsaWVkVG8gPSBvYlRyaWFnZUFwcGxpZWRUby5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkKICAgICAgICAgICAgICAgICAgICBsb2cud2FybiAidmFsdWVBcHBsaWVkVG86ICIgKyB2YWx1ZUFwcGxpZWRUbwogICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZUFwcGxpZWRUby5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVBcHBsaWVkVG8uY2xlYXIoKSAKCiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZUFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5kZWxldGVPYmplY3RBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlQXBwbGllZFRvLmlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSl7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmVycm9yKCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOiIgKyB2aWUuZ2V0TWVzc2FnZSgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvL0FDQ09VTlRJTkdfU1VQUExJRVJfTUFURVJJQUxfUkVGCiAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmFjY291bnRpbmdTdXBwTWF0ZXJpYWwnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICAgICAgZGVmIG9iVHJpYWdlTWF0UyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuYWNjb3VudGluZ1N1cHBNYXRlcmlhbCddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKQogICAgICAgICAgICAgICAgICAgIGRlZiB2YWx1ZU1hdFMgPSBvYlRyaWFnZU1hdFMuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpCiAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4gInZhbHVlTWF0UzogIiArIHZhbHVlTWF0UwogICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZU1hdFMuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlTWF0Uy5jbGVhcigpIAoKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iVHJpYWdlTWF0UyA9IG9iamVjdEZhY2FkZS5kZWxldGVPYmplY3RBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlTWF0Uy5pZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpeyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5lcnJvcigiQ291bGQgbm90IHVwZGF0ZSBvYmplY3QgYXR0cmlidXRlIGR1ZSB0byB2YWxpZGF0aW9uIGV4Y2VwdGlvbjoiICsgdmllLmdldE1lc3NhZ2UoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy9BQ0NPVU5USU5HX0NVU1RPTUVSX01BVEVSSUFMX1JFRgogICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hY2NvdW50aW5nQ3VzdE1hdGVyaWFsJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgICAgIGRlZiBvYlRyaWFnZU1hdEMgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmFjY291bnRpbmdDdXN0TWF0ZXJpYWwnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkKICAgICAgICAgICAgICAgICAgICBkZWYgdmFsdWVNYXRDID0gb2JUcmlhZ2VNYXRDLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQogICAgICAgICAgICAgICAgICAgIGxvZy53YXJuICJ2YWx1ZU1hdEM6ICIgKyB2YWx1ZU1hdEMKICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVNYXRDLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZU1hdEMuY2xlYXIoKSAKCiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZU1hdEMgPSBvYmplY3RGYWNhZGUuZGVsZXRlT2JqZWN0QXR0cmlidXRlQmVhbihvYlRyaWFnZU1hdEMuaWQpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKXsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZXJyb3IoIkNvdWxkIG5vdCB1cGRhdGUgb2JqZWN0IGF0dHJpYnV0ZSBkdWUgdG8gdmFsaWRhdGlvbiBleGNlcHRpb246IiArIHZpZS5nZXRNZXNzYWdlKCkpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvL1RPVEFMX0FNT1VOVF9TVVBQTElFUgogICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RTdXBwJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgICAgIGRlZiBvYlRyaWFnZVRvdFMgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdFN1cHAnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkKICAgICAgICAgICAgICAgICAgICBkZWYgdmFsdWVUb3RTID0gb2JUcmlhZ2VUb3RTLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQogICAgICAgICAgICAgICAgICAgIGxvZy53YXJuICJ2YWx1ZVRvdFM6ICIgKyB2YWx1ZVRvdFMKICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVUb3RTLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVRvdFMuY2xlYXIoKSAKCiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZVRvdFMgPSBvYmplY3RGYWNhZGUuZGVsZXRlT2JqZWN0QXR0cmlidXRlQmVhbihvYlRyaWFnZVRvdFMuaWQpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKXsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZXJyb3IoIkNvdWxkIG5vdCB1cGRhdGUgb2JqZWN0IGF0dHJpYnV0ZSBkdWUgdG8gdmFsaWRhdGlvbiBleGNlcHRpb246IiArIHZpZS5nZXRNZXNzYWdlKCkpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy9UT1RBTF9BTU9VTlRfQ1VTVE9NRVIKICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQudG90Q3VzdCddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgICAgICAgICBkZWYgb2JUcmlhZ2VUb3RDID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RDdXN0J10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpCiAgICAgICAgICAgICAgICAgICAgZGVmIHZhbHVlVG90QyA9IG9iVHJpYWdlVG90Qy5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkKICAgICAgICAgICAgICAgICAgICBsb2cud2FybiAidmFsdWVUb3RDOiAiICsgdmFsdWVUb3RDCiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlVG90Qy5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVUb3RDLmNsZWFyKCkgCgogICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2VUb3RDID0gb2JqZWN0RmFjYWRlLmRlbGV0ZU9iamVjdEF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2VUb3RDLmlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSl7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmVycm9yKCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOiIgKyB2aWUuZ2V0TWVzc2FnZSgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSAgICAKCiAgICAgICAgICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQKICAgICAgICAgICAgbG9nLmRlYnVnICIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6ICIgKyBvdXRwdXRNc2cKCiAgICAgICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpCiAgICAgICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpCiAgICAgICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgCiAgICAgICAgICAgIGxvZy5kZWJ1ZyAibWVzc2FnZTogIiArICBqc29uX29iamVjdC5tZXNzYWdlCiAgICAgICAgICAgIAogICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoIkUiKQogICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoIlNFTkRNQUlMIikKICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgIiAiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKSkKICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGpzb25fb2JqZWN0Lm1lc3NhZ2UpCiAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycykKCiAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpCiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3siRSI6IicgKyBvdXRwdXQudG9TdHJpbmcoKSArICcifScpCiAgICAgICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiRSIsIG91dHB1dC50b1N0cmluZygpKQogICAgICAgIH1lbHNlewogICAgICAgICAgICAvKkwnZW1haWwgw6ggc3RhdGEgaW52aWF0YSBjb3JyZXR0YW1lbnRlLCBhZ2dpb3JubyBpbCBjYW1wbyBPTlNJVEVfUkVQT1JUIGNvbiBsYSBkYXRhIGNvcnJlbnRlKi8KCiAgICAgICAgICAgIC8vIGxvZy53YXJuICJpc3N1ZSAiK2lzc3VlLmdldEtleSgpCiAgICAgICAgICAgIGRlZiBjZnYgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG9uc2l0ZVJlcG9ydERhdGUpCiAgICAgICAgICAgIGlmICghY2Z2KSB7CiAgICAgICAgICAgICAgZGVmIHQwICA9IG5ldyBqYXZhLnNxbC5UaW1lc3RhbXAoU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkpCiAgICAgICAgICAgICAgbG9nLndhcm4gIlN0YXJ0VGltZSA9PiAnIit0MC50b1N0cmluZygpKyInIgogICAgICAgICAgICAgIGRlZiBtdiA9IG5ldyBNb2RpZmllZFZhbHVlKG9uc2l0ZVJlcG9ydERhdGUsIHQwKQogICAgICAgICAgICAgIGRlZiBjaCA9IG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKQogICAgICAgICAgICAgIG9uc2l0ZVJlcG9ydERhdGUudXBkYXRlVmFsdWUobnVsbCwgaXNzdWUsIG12LCBjaCkgCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgbG9nLndhcm4gIlN0YXJ0VGltZSA9PSAnIitjZnYudG9TdHJpbmcoKSsiJyIKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQ==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">df15a75e93b4c124a70f49e69dbcae9d48e2e8e4</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IFJFU1QgQVBJOiBPUCBwZXIgY29uc3VudGl2YXppb25lIHRpY2tldA==</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5cbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5kZWYgYXV0b21hdGljYWxseUNsb3NlZCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUNsb3NlZCddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5ib29sZWFuIHVuYXRhbnR1bT10cnVlXG5cbi8qISFEYSByaW11b3ZlcmUgYXBwZW5hIHJpc29sdGkgaSBidWchISovXG4vL2lmKCFpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0LnBsYW5uZWRNYWludGVuYW5jZSddKSl7XG5cbiAgICAvKk9QLTEwMzg6IGxhIGNvbnRhYmlsaXp6YXppb25lIGRvdnJcdTAwZTAgcHJldmVkZXJlIGxlIHVuYXRhbnR1bSByYXRlcyBzb2xvIHNlIGlsIHRpY2tldCBub24gXHUwMGU4IHN0YXRvIGNoaXVzbyBpbiBhdXRvbWF0aWNvKi9cbiAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpIT1udWxsICYmIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIikpe1xuICAgICAgICB1bmF0YW50dW09ZmFsc2UgICAgXG4gICAgfVxuICAgIGxvZy5kZWJ1ZyBcIkNvbnN1bnRpdmF6aW9uZSB0aWNrZXQgXCIgKyBpc3N1ZS5rZXkgKyBcIiBjb24gdW5hdGFudHVtOiBcIiArIHVuYXRhbnR1bVxuXG4gICAgLyogUkVTVCBBUEkgcGVyIENvbnRhYmlsaXp6YXppb25lIEludGVydmVudG8gKi9cbiAgICByZXF1ZXN0TWV0aG9kID0gXCJHRVRcIjtcblxuICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9BQS90aWNrZXQvaXNzdWVLZXkvXCIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArIFwiL2Nsb3NlP3VtPVwiK3VuYXRhbnR1bS50b1N0cmluZygpXG4gICAgbG9nLmRlYnVnIFwiYmFzZVVybDogXCIgKyBiYXNlVVJMXG5cbiAgICAvKkRlZmluaXJlIHBhcmFtZXRybyBkaSBpbnB1dCB1bmF0YW50dW09dHJ1ZXxmYWxzZSBpbiBiYXNlIGFsIHZhbG9yZSBkZWxsYSB2YXJpYWJpbGUgYm9vbGVhbmEgdW5hdGFudHVtKi9cbiAgICBVUkwgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuXG4gICAgLy9Jc3N1ZUluZGV4aW5nU2VydmljZSBpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSlcbiAgICAvL2lzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgoaXNzdWVNYW5hZ2VyLmdldElzc3VlT2JqZWN0KGlzc3VlLmtleS50b1N0cmluZygpKSlcblxuICAgIC8vZGVmIHVuYVRhbnR1bVJhdGVzID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QQUFfVU5BVEFOVFVNX1JBVEVTXCIpWzBdXG4gICAgLy9sb2cud2FybiBcInVuYVRhbnR1bVJhdGVzOiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodW5hVGFudHVtUmF0ZXMpXG5cbiAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2U6IFwiICsgY29ubmVjdGlvblxuXG4gICAgICAgIC8qUk9MTEJBQ0sqL1xuICAgICAgICAvKlJpbW96aW9uZSBhbGxlZ2F0byByYXBwb3J0byBkaSBpbnRlcnZlbnRvIGFwcGVuYSBjcmVhdG8qL1xuICAgICAgICAvKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG4gICAgICAgIENsYXNzIGlxbEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLklRTEZhY2FkZVwiKTsgXG4gICAgICAgIGRlZiBpcWxGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUoaXFsRmFjYWRlQ2xhc3MpO1xuXG4gICAgICAgIC8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbiAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpO1xuICAgICAgICBkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcblxuICAgICAgICAvKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbiAgICAgICAgQ2xhc3Mgb2JqZWN0VHlwZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVGYWNhZGVcIik7XG4gICAgICAgIGRlZiBvYmplY3RUeXBlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVGYWNhZGVDbGFzcyk7XG5cbiAgICAgICAgLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbiAgICAgICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XG4gICAgICAgIGRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XG5cbiAgICAgICAgQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG4gICAgICAgIGRlZiBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzKTtcblxuICAgICAgICAvKiBTcGVjaWZ5IHRoZSBzY2hlbWEgaWQgYXMgd2VsbCBhcyB0aGUgSVFMIHRoYXQgd2lsbCBmZXRjaCBvYmplY3RzLiBJbiB0aGlzIGNhc2UgYWxsIG9iamVjdHMgd2l0aCBOYW1lIG1hdGNoaW5nIHRoZSB2YWx1ZUNGLCBiZSBzdXJlIHRvIGluY2x1ZGUgXCIgYXJvdW5kIHZhbHVlICovXG4gICAgICAgIGRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5cXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5uYW1lJ10udG9TdHJpbmcoKSArIFwiXFxcIiA9IFxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm9ianMucmFwcEludEZBQUMnXS50b1N0cmluZygpICsgXCJcXFwiIEFORCBcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpICsgXCIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSBcIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIpXCIpOyAvLyBTZWUgdGhlIGNvbXBsZXRlIGxpc3Qgb2YgcG9zc2libGUgSVFMIG9uIHRoZSBJbnNpZ2h0IFF1ZXJ5IExhbmd1YWdlIGRvY3VtZW50YXRpb24gcGFnZVxuICAgICAgICAvKiBJZiB0aGlzIGlzIGEgbWFuZGF0b3J5IGZpZWxkIHlvdSBzaG91bGQgYmUgYWJsZSB0byBkbyB0aGlzOiAqL1xuICAgICAgICBsb2cuaW5mbyhcIkluc2lnaHQgb2JqZWN0OiBcIiArIG9iamVjdHNbMF0pO1xuXG4gICAgICAgIGlmKG9iamVjdHNbMF0pe1xuICAgICAgICAgICAgLyogVVBEQVRFIE9KQkVDVCBERUxFVEVEIFZBTFVFICovXG4gICAgICAgICAgICBkZWYgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ob2JqZWN0c1swXS5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpICBcbiAgICAgICAgICAgIGRlZiB2YWx1ZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuXG4gICAgICAgICAgICBkZWYgdmFsdWVCZWFuID0gb2JUcmlhZ2UuY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKClcbiAgICAgICAgICAgIHZhbHVlQmVhbi5zZXRWYWx1ZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihvYlRyaWFnZS5nZXRPYmplY3RUeXBlQXR0cmlidXRlSWQoKSksIHRydWUpXG4gICAgICAgICAgICAvKkNsZWFuIGFjdHVhbCB2YWx1ZSovXG4gICAgICAgICAgICB2YWx1ZS5jbGVhcigpXG4gICAgICAgICAgICB2YWx1ZS5hZGQodmFsdWVCZWFuKTtcbiAgICAgICAgICAgIG9iVHJpYWdlLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWUpXG5cbiAgICAgICAgICAgIC8vVXBkYXRlIE9KQkVDVCBhdHRyaWJ1dGUgdmFsdWVcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHtcbiAgICAgICAgICAgICAgICBsb2cud2FybihcIkNvdWxkIG5vdCB1cGRhdGUgb2JqZWN0IGF0dHJpYnV0ZSBkdWUgdG8gdmFsaWRhdGlvbiBleGNlcHRpb246XCIgKyB2aWUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtVEtULUFDQ09VTlRJTkdcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgfWVsc2V7XG4gICAgICAgIC8qT1AtMTAzODogY29uc3VudGl2YXppb25lIHRlcm1pbmF0YSBjb3JyZXR0YW1lbnRlIC0gc2UgXHUwMGU4IHN0YXRhIGVzZWd1aXRhIGNvbiB1bmF0YW50dW09dHJ1ZSBzZXR0byBhIE5vIGlsIGNhbXBvIE9QQUFfQVVUT01BVElDQUxMWV9DTE9TRUQqL1xuICAgICAgICBpZih1bmF0YW50dW0pe1xuICAgICAgICAgICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXG4gICAgICAgICAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBpc3N1ZVxuXG4gICAgICAgICAgICBkZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcbiAgICAgICAgICAgIGRlZiBjZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09IFwiTm9cIiB9XG4gICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q2xvc2VkLnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuXG4gICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7XG4gICAgICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGlzc3VlKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIHByaW5jaXBhbGUgJHtpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpfVwiXG4gICAgICAgIH1cbiAgICB9XG4vL30iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlCmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2UKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXIKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsCgpQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpCkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpCnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7Cglwcm9wZXJ0aWVzLmxvYWQoaXQpCn0KQ2F0ZWdvcnkgbG9nID0gQ2F0ZWdvcnkuZ2V0SW5zdGFuY2UoImNvbS5vbnJlc29sdmUuamlyYS5ncm9vdnkuUG9zdEZ1bmN0aW9uIikKbG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpCgpJc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7CkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTsKCklzc3VlSW5kZXhpbmdTZXJ2aWNlIAlpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSkKZGVmIGF1dG9tYXRpY2FsbHlDbG9zZWQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlDbG9zZWQnXS50b1N0cmluZygpKVswXQoKZGVmIHJlcXVlc3RNZXRob2QKZGVmIGJhc2VVUkwKCmludCBPUEFBID0gcHJvcGVydGllc1snaXNjaGVtYS5hYS5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKCkKaW50IERCTyA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuZGJvLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKQpib29sZWFuIHVuYXRhbnR1bT10cnVlCgovKk9QLTEwMzg6IGxhIGNvbnRhYmlsaXp6YXppb25lIGRvdnLDoCBwcmV2ZWRlcmUgbGUgdW5hdGFudHVtIHJhdGVzIHNvbG8gc2UgaWwgdGlja2V0IG5vbiDDqCBzdGF0byBjaGl1c28gaW4gYXV0b21hdGljbyovCmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkhPW51bGwgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKS50b1N0cmluZygpLmVxdWFscygiWWVzIikpewoJdW5hdGFudHVtPWZhbHNlICAgIAp9CmxvZy5kZWJ1ZyAiQ29uc3VudGl2YXppb25lIHRpY2tldCAiICsgaXNzdWUua2V5ICsgIiBjb24gdW5hdGFudHVtOiAiICsgdW5hdGFudHVtCgovKiBSRVNUIEFQSSBwZXIgQ29udGFiaWxpenphemlvbmUgSW50ZXJ2ZW50byAqLwpyZXF1ZXN0TWV0aG9kID0gIkdFVCI7CgpiYXNlVVJMID0gImh0dHA6Ly8iICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyAiL29wL3Jlc3QvQUEvdGlja2V0L2lzc3VlS2V5LyIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArICIvY2xvc2U/dW09Iit1bmF0YW50dW0udG9TdHJpbmcoKQpsb2cuZGVidWcgImJhc2VVcmw6ICIgKyBiYXNlVVJMCgovKkRlZmluaXJlIHBhcmFtZXRybyBkaSBpbnB1dCB1bmF0YW50dW09dHJ1ZXxmYWxzZSBpbiBiYXNlIGFsIHZhbG9yZSBkZWxsYSB2YXJpYWJpbGUgYm9vbGVhbmEgdW5hdGFudHVtKi8KVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTCkKSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpOwpjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eSgiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL2pzb24iKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoIkFjY2VwdCIsICIqLyoiKTsKY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTsKY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpOwpjb25uZWN0aW9uLmNvbm5lY3QoKTsKbG9nLmRlYnVnICJSZXNwb25zZUNvZGU6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkKbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKCi8vSXNzdWVJbmRleGluZ1NlcnZpY2UgaXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpCi8vaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVPYmplY3QoaXNzdWUua2V5LnRvU3RyaW5nKCkpKQoKLy9kZWYgdW5hVGFudHVtUmF0ZXMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKCJPUEFBX1VOQVRBTlRVTV9SQVRFUyIpWzBdCi8vbG9nLndhcm4gInVuYVRhbnR1bVJhdGVzOiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcykKCmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCmRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKQpkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpCgppZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoIjIwMCIpKXsKICAgIGxvZy5kZWJ1ZyAidXJsOiAiICsgdXJsCiAgICBsb2cuZGVidWcgIlJlc3BvbnNlQ29kZToiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKQogICAgbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKICAgIGxvZy5kZWJ1ZyAiUmVzcG9uc2U6ICIgKyBjb25uZWN0aW9uCgogICAgLypST0xMQkFDSyovCiAgICAvKlJpbW96aW9uZSBhbGxlZ2F0byByYXBwb3J0byBkaSBpbnRlcnZlbnRvIGFwcGVuYSBjcmVhdG8qLwogICAgLyogR2V0IEluc2lnaHQgSVFMIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqLwogICAgQ2xhc3MgaXFsRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGUiKTsgCiAgICBkZWYgaXFsRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKGlxbEZhY2FkZUNsYXNzKTsKCiAgICAvKiBHZXQgSW5zaWdodCBPYmplY3QgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovCiAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZSIpOwogICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7CgogICAgLyogR2V0IEluc2lnaHQgT2JqZWN0IFR5cGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovCiAgICBDbGFzcyBvYmplY3RUeXBlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlIik7CiAgICBkZWYgb2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpOwoKICAgIC8qIEdldCBJbnNpZ2h0IE9iamVjdCBBdHRyaWJ1dGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovCiAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CiAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpOwoKICAgIENsYXNzIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkiKTsKICAgIGRlZiBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzKTsKCiAgICAvKiBTcGVjaWZ5IHRoZSBzY2hlbWEgaWQgYXMgd2VsbCBhcyB0aGUgSVFMIHRoYXQgd2lsbCBmZXRjaCBvYmplY3RzLiBJbiB0aGlzIGNhc2UgYWxsIG9iamVjdHMgd2l0aCBOYW1lIG1hdGNoaW5nIHRoZSB2YWx1ZUNGLCBiZSBzdXJlIHRvIGluY2x1ZGUgIiBhcm91bmQgdmFsdWUgKi8KICAgIGRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCAiXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuY2F0ZWdvcnlSZWYnXS50b1N0cmluZygpICsgIlwiLlwiIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm5hbWUnXS50b1N0cmluZygpICsgIlwiID0gXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkub2Jqcy5yYXBwSW50RkFBQyddLnRvU3RyaW5nKCkgKyAiXCIgQU5EICIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSArICIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSAiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyAiKSIpOyAvLyBTZWUgdGhlIGNvbXBsZXRlIGxpc3Qgb2YgcG9zc2libGUgSVFMIG9uIHRoZSBJbnNpZ2h0IFF1ZXJ5IExhbmd1YWdlIGRvY3VtZW50YXRpb24gcGFnZQogICAgLyogSWYgdGhpcyBpcyBhIG1hbmRhdG9yeSBmaWVsZCB5b3Ugc2hvdWxkIGJlIGFibGUgdG8gZG8gdGhpczogKi8KICAgIGxvZy5pbmZvKCJJbnNpZ2h0IG9iamVjdDogIiArIG9iamVjdHNbMF0pOwoKICAgIGlmKG9iamVjdHNbMF0pewogICAgICAgIC8qIFVQREFURSBPSkJFQ1QgREVMRVRFRCBWQUxVRSAqLwogICAgICAgIGRlZiBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihvYmplY3RzWzBdLmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkgIAogICAgICAgIGRlZiB2YWx1ZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQoKICAgICAgICBkZWYgdmFsdWVCZWFuID0gb2JUcmlhZ2UuY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCkKICAgICAgICB2YWx1ZUJlYW4uc2V0VmFsdWUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2UuZ2V0T2JqZWN0VHlwZUF0dHJpYnV0ZUlkKCkpLCB0cnVlKQogICAgICAgIC8qQ2xlYW4gYWN0dWFsIHZhbHVlKi8KICAgICAgICB2YWx1ZS5jbGVhcigpCiAgICAgICAgdmFsdWUuYWRkKHZhbHVlQmVhbik7CiAgICAgICAgb2JUcmlhZ2Uuc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyh2YWx1ZSkKCiAgICAgICAgLy9VcGRhdGUgT0pCRUNUIGF0dHJpYnV0ZSB2YWx1ZQogICAgICAgIHRyeSB7CiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLnN0b3JlT2JqZWN0QXR0cmlidXRlQmVhbihvYlRyaWFnZSk7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSkgewogICAgICAgICAgICBsb2cud2FybigiQ291bGQgbm90IHVwZGF0ZSBvYmplY3QgYXR0cmlidXRlIGR1ZSB0byB2YWxpZGF0aW9uIGV4Y2VwdGlvbjoiICsgdmllLmdldE1lc3NhZ2UoKSk7CiAgICAgICAgfQogICAgfQoKICAgIGVMaXN0RXJyb3JzLmFkZCgiRSIpCiAgICBlTGlzdEVycm9ycy5hZGQoIk9QLVRLVC1BQ0NPVU5USU5HIikKICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArICIgIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkpCiAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKQogICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKQoKICAgIG91dHB1dC5hZGQoZUxpc3QpCiAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IkUiOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQogICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJFIiwgb3V0cHV0LnRvU3RyaW5nKCkpCn1lbHNlewogICAgLypPUC0xMDM4OiBjb25zdW50aXZhemlvbmUgdGVybWluYXRhIGNvcnJldHRhbWVudGUgLSBzZSDDqCBzdGF0YSBlc2VndWl0YSBjb24gdW5hdGFudHVtPXRydWUgc2V0dG8gYSBObyBpbCBjYW1wbyBPUEFBX0FVVE9NQVRJQ0FMTFlfQ0xPU0VEKi8KICAgIGlmKHVuYXRhbnR1bSl7CiAgICAgICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpCiAgICAgICAgZGVmIG1pID0gKE11dGFibGVJc3N1ZSkgaXNzdWUKCiAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSkKICAgICAgICBsb2cuZGVidWcgImZpZWxkQ29uZmlnOiAiICsgZmllbGRDb25maWcKICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiTm8iIH0KICAgICAgICBhdXRvbWF0aWNhbGx5Q2xvc2VkLnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoKICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7CiAgICAgICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChpc3N1ZSkKICAgICAgICBsb2cuZGVidWcgIlVwZGF0ZWQgY3VzdG9tZmllbGQgLSBpc3N1ZSBwcmluY2lwYWxlICR7aXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKX0iCiAgICB9Cn0K</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="24">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">81aa9673-d0a1-4cdb-9909-19371f018388</arg>
                  <arg name="FIELD_NOTES">YCFgUE0gVGlja2V0IC0gVXBkYXRlIEhBUkRXQVJFLk1BSU5URU5BTkNFX05FWFRfVElDS0VUX0RBVEUgKyBIQVJEV0FSRS5NQUlOVEVOQU5DRV9MQVNUX1RJQ0tFVF9EQVRF</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS51dGlsLkRlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5ldmVudC50eXBlLkV2ZW50RGlzcGF0Y2hPcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2U7XG5pbXBvcnQgb3JnLm9mYml6LmNvcmUuZW50aXR5LkRlbGVnYXRvckludGVyZmFjZVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS51dGlsLkJ1aWxkVXRpbHNJbmZvXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmlzc3VldHlwZS5Jc3N1ZVR5cGVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpXG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTIzNjkyXCIpXG5cbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTsgIFxuQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XG5kZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xuZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XG5cbmRlZiBhc3NldCA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0FTU0VUXCIpWzBdXG5kZWYgZXhlY3V0aW9uRGF0ZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0VYRUNVVElPTl9EQVRFXCIpWzBdXG5cbmxvZy5kZWJ1ZyBcIkRhdGEgZGkgZXNlY3V6aW9uZSBpbnRlcnZlbnRvOiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZXhlY3V0aW9uRGF0ZSlcblxuaWYoaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZSA9PSBcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0XCIpe1xuICAgIGRlZiBzdWJUYXNrcyA9IGlzc3VlLmdldFN1YlRhc2tPYmplY3RzKClcbiAgICBkZWYgaXRBc3NldCBcbiAgICBEYXRlIG5ld0RhdGVcblxuICAgIHN1YlRhc2tzLmVhY2gge1xuICAgICAgICBpZiAoaXQuZ2V0SXNzdWVUeXBlKCkubmFtZSA9PSBcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1wiICYmIGl0LmdldFJlc29sdXRpb24oKSl7XG4gICAgICAgICAgICBsb2cuZGVidWcgXCJhc3NldDogXCIgKyBpdC5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0KVxuICAgICAgICAgICAgaXRBc3NldCA9IGl0LmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXQpWzBdLnRvU3RyaW5nKClcbiAgICAgICAgICAgIGl0QXNzZXRLZXkgPSBpdEFzc2V0LnN1YnN0cmluZyhpdEFzc2V0Lmxhc3RJbmRleE9mKCcoJykrMSwgaXRBc3NldC5sYXN0SW5kZXhPZignKScpKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiaXRBc3NldEtleTogXCIgKyBpdEFzc2V0S2V5XG5cbiAgICAgICAgICAgIGRlZiBvYlRyaWFnZVxuICAgICAgICAgICAgZGVmIGh3UE1udW1iZXJcbiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oaXRBc3NldEtleSkuZ2V0SWQoKSwgXCJQTEFOTkVEX01BSU5URU5BTkNFX1ZJU0lUU19OVU1cIikpe1xuICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihpdEFzc2V0S2V5KS5nZXRJZCgpLCBcIlBMQU5ORURfTUFJTlRFTkFOQ0VfVklTSVRTX05VTVwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICBod1BNbnVtYmVyID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImh3UE1udW1iZXI6IFwiICsgaHdQTW51bWJlclxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL0NoZWNrIEhBUkRXQVJFLlBMQU5ORURfTUFJTlRFTkFOQ0VfVklTSVRTX05VTVxuICAgICAgICAgICAgaWYoaHdQTW51bWJlcil7XG4gICAgICAgICAgICAgICAgbmV3RGF0ZSA9IChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGV4ZWN1dGlvbkRhdGUpICsgTWF0aC5yb3VuZCgzNjUvaHdQTW51bWJlci50b0ludGVnZXIoKSkudG9JbnRlZ2VyKCkpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwibmV3IGRhdGU6IFwiICsgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZXhlY3V0aW9uRGF0ZSkgKyBNYXRoLnJvdW5kKDM2NS9od1BNbnVtYmVyLnRvSW50ZWdlcigpKS50b0ludGVnZXIoKSlcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIC8vQ2hlY2sgSEFSRFdBUkUuQ1VTVE9NRVJfQ09OVFJBQ1RfUkVGLkNPTlRSQUNUX1RZUEVcbiAgICAgICAgICAgICAgICBkZWYgY29udHJhY3QsIGNvbnRyYWN0S2V5LCBjb250cmFjdE9iamVjdCwgY29udHJhY3RUeXBlLCBmcmVxdWVuY3ksIGZyZXFEYXlzLCBwYWNrLCBwbUluY2x1ZGVkXG4gICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihpdEFzc2V0S2V5KS5nZXRJZCgpLCBcIkNVU1RPTUVSX0NPTlRSQUNUX1JFRlwiKSl7XG4gICAgICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihpdEFzc2V0S2V5KS5nZXRJZCgpLCBcIkNVU1RPTUVSX0NPTlRSQUNUX1JFRlwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICAgICAgY29udHJhY3QgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKVxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJjb250cmFjdDogXCIgKyBjb250cmFjdFxuICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdCwgXCJDT05UUkFDVF9UWVBFXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgICAgICAgICBjb250cmFjdFR5cGUgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKVxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJjb250cmFjdFR5cGU6IFwiICsgY29udHJhY3RUeXBlXG5cbiAgICAgICAgICAgICAgICAgICAgaWYoY29udHJhY3RUeXBlLmVxdWFscyhcIk1BSU5URU5BTkNFIFRJQ0tFVCBDT05UUkFDVFwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdCwgXCJQTV9GUkVRVUVOQ1lfUkVGXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgZnJlcXVlbmN5ID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImZyZXF1ZW5jeTogXCIgKyBmcmVxdWVuY3lcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGZyZXF1ZW5jeSwgXCJEQVlTXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgZnJlcURheXMgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiZnJlcURheXM6IFwiICsgZnJlcURheXNcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0RhdGUgPSAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShleGVjdXRpb25EYXRlKSArIGZyZXFEYXlzLnRvSW50ZWdlcigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwibmV3IGRhdGU6IFwiICsgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZXhlY3V0aW9uRGF0ZSkgKyBmcmVxRGF5cy50b0ludGVnZXIoKSlcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihjb250cmFjdFR5cGUuZXF1YWxzKFwiTUFJTlRFTkFOQ0UgRkVFIENPTlRSQUNUXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdCwgXCJQQUNLQUdFX1JFRlwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWNrID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJwYWNrOiBcIiArIHBhY2tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihmcmVxdWVuY3ksIFwiUE1fSU5DTFVERURcIikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG1JbmNsdWRlZCA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwicG1JbmNsdWRlZDogXCIgKyBwbUluY2x1ZGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3RGF0ZSA9IChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGV4ZWN1dGlvbkRhdGUpICsgcG1JbmNsdWRlZC50b0ludGVnZXIoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJuZXcgZGF0ZTogXCIgKyAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShleGVjdXRpb25EYXRlKSArIHBtSW5jbHVkZWQudG9JbnRlZ2VyKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRlZiBhc3NldE9iaiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihpdEFzc2V0S2V5KSAgICAgIFxuICAgICAgICAgICAgbG9nLmRlYnVnIFwibmV3RGF0ZTogXCIgKyBuZXdEYXRlXG4gICAgICAgICAgICBkZWYgb2JqID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGFzc2V0T2JqLmdldElkKCkpO1xuICAgICAgICAgICAgLyogQ3JlYXRlIGEgbmV3IHVuc2F2ZWQgb2JqZWN0IGJlYW4gLSBNQUlOVEVOQU5DRSBORVhUIFRJQ0tFVCBEQVRFKi9cbiAgICAgICAgICAgIGRlZiBhdHRyaWJUeXBlID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oMzc3Nyk7IFxuICAgICAgICAgICAgZGVmIG5ld0F0dHJpYiA9IG9iai5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKGF0dHJpYlR5cGUpO1xuICAgICAgICAgICAgZGVmIG5ld0F0dHJpYlZhbHVlID0gbmV3QXR0cmliLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpO1xuICAgICAgICAgICAgZGVmIG9iamVjdEF0dHJpYnV0ZUJlYW5zID0gbmV3IEFycmF5TGlzdCgpO1xuXG4gICAgICAgICAgICBuZXdBdHRyaWJWYWx1ZS5zZXREYXRlVmFsdWUobmV3RGF0ZSlcbiAgICAgICAgICAgIGRlZiBhdHRyaWJWYWx1ZXMgPSBuZXdBdHRyaWIuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpO1xuICAgICAgICAgICAgYXR0cmliVmFsdWVzLmFkZChuZXdBdHRyaWJWYWx1ZSk7XG4gICAgICAgICAgICBuZXdBdHRyaWIuc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyhhdHRyaWJWYWx1ZXMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvKiBDcmVhdGUgYSBuZXcgdW5zYXZlZCBvYmplY3QgYmVhbiAtIE1BSU5URU5BTkNFIExBU1QgVElDS0VUIERBVEUgKi9cbiAgICAgICAgICAgIGF0dHJpYlR5cGUgPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbigzNzc2KTsgXG4gICAgICAgICAgICBuZXdBdHRyaWIgPSBvYmouY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihhdHRyaWJUeXBlKTtcbiAgICAgICAgICAgIG5ld0F0dHJpYlZhbHVlID0gbmV3QXR0cmliLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpO1xuICAgICAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMgPSBuZXcgQXJyYXlMaXN0KCk7XG5cbiAgICAgICAgICAgIG5ld0F0dHJpYlZhbHVlLnNldERhdGVWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGV4ZWN1dGlvbkRhdGUpKVxuICAgICAgICAgICAgYXR0cmliVmFsdWVzID0gbmV3QXR0cmliLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTtcbiAgICAgICAgICAgIGF0dHJpYlZhbHVlcy5hZGQobmV3QXR0cmliVmFsdWUpO1xuICAgICAgICAgICAgbmV3QXR0cmliLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoYXR0cmliVmFsdWVzKTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBuZXdBdHRyaWIgPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG5ld0F0dHJpYik7XG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XG4gICAgICAgICAgICAgICAgbG9nLndhcm4oXCJVbmFibGUgdG8gc2F2ZSBjaGFuZ2VzLiBFeGl0aW5nLlwiKTtcbiAgICAgICAgICAgICAgICBsb2cud2Fybih2aWUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIGxpbmtlZFRpY2tldHMgJiBGYXN0LVRyYW5zYWN0IHRoZW0=</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlCmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZQppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQpDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5XQVJOKQoKbG9nLndhcm4gIiR7aXNzdWUua2V5fSBUcmFuc2F6aW9uZSBDb21wbGV0ZSAtIFBvc3QgRnVuY3Rpb24gY2hlY2sgbGlua2VkSXNzdWVzIgoKSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpOwpDdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7CmRlZiBhdXRvbWF0aWNhbGx5Q2xvc2VkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q2xvc2VkJ10udG9TdHJpbmcoKSlbMF0KSXNzdWVJbmRleGluZ1NlcnZpY2UgCWlzc3VlSW5kZXhpbmdTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KElzc3VlSW5kZXhpbmdTZXJ2aWNlKQoKSXNzdWUgaXNzdWUgPSBpc3N1ZQovL1BlciB0ZXN0IGRhIGNvbnNvbGUKLy9pc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZSgiT1BVVC0yNzYiKQoKU1RBUlRfUFJPR1JFU1M9cHJvcGVydGllc1snd2YudHIuc3RhcnRQcm9ncmVzcyddCkNPTVBMRVRFPXByb3BlcnRpZXNbJ3dmLnRyLmNvbXBsZXRlJ10KCmRlZiB1c2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpCmRlZiBpc3N1ZVNlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZVNlcnZpY2UoKQoKbG9nLndhcm4gImlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCk6ICIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpCgppZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpPT1udWxsIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkudG9TdHJpbmcoKS5lcXVhbHMoIk5vIikpewogICAgLypPUC0xMDM4OiBzZSBobyBlc2VndWl0byBsYSBDb21wbGV0ZSBzdWwgdGlja2V0ICJwYWRyZSIgdmVyaWZpY28gZSBzcG9zdG8gaW4gYXV0b21hdGljbyBnbGkgZXZlbnR1YWxpIHRpY2tldCBjb2xsZWdhdGkqLwogICAgCiAgICBsb2cud2FybiAidmVyaWZpY28gZSBzcG9zdG8gaW4gYXV0b21hdGljbyBnbGkgZXZlbnR1YWxpIHRpY2tldCBjb2xsZWdhdGkiCiAgICAKICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKQogICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykgewogICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7CgogICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgLypFc2VndWlyZSB0cmFuc2F6aW9uZSBkaSBzdGF0byBjb24gT1BBQV9BVVRPTUFUSUNBTExZX0NMT1NFRD1ZZXMgZGVsbGEgc291cmNlSXNzdWUqLwogICAgICAgICAgICBkZWYgbGlua2VkSXNzdWUgPSBpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkKICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlU3RhdHVzID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzKCkKICAgICAgICAgICAgbG9nLndhcm4gIklzc3VlIGNvbiByZWxhdGVzSW5Jc3N1ZUxpbmsgJHtsaW5rZWRJc3N1ZX0gY29uIHN0YXRvICR7bGlua2VkSXNzdWVTdGF0dXN9IgogICAgICAgICAgICBkZWYgdHJhbnNpdGlvbklkCiAgICAgICAgICAgIGlmKGxpbmtlZElzc3VlU3RhdHVzLm5hbWUgPT0gcHJvcGVydGllc1snd2YuY29uZmlybWVkQW5kUGxhbm5lZCddLnRvU3RyaW5nKCkpewogICAgICAgICAgICAgICAgdHJhbnNpdGlvbklkPVNUQVJUX1BST0dSRVNTCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYobGlua2VkSXNzdWVTdGF0dXMubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5pblByb2dyZXNzJ10udG9TdHJpbmcoKSl7CiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9Q09NUExFVEUKICAgICAgICAgICAgfQogICAgICAgICAgICBpZih0cmFuc2l0aW9uSWQ9PVNUQVJUX1BST0dSRVNTKXsKICAgICAgICAgICAgICAgIC8vIFByZXBhcmUgb3VyIGlucHV0IGZvciB0aGUgdHJhbnNpdGlvbgogICAgICAgICAgICAgICAgZGVmIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKCkKICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGggewogICAgICAgICAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayhmYWxzZSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSkKICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgIC8vaXNzdWVJbnB1dFBhcmFtZXRlcnMuYWRkQ3VzdG9tRmllbGRWYWx1ZShmaWVsZENvbmZpZy5nZXRJZCgpLCAiWWVzIikgCiAgICAgICAgICAgICAgICAvL2xvZy53YXJuICJpc3N1ZUlucHV0UGFyYW1ldGVyczogIiArIGlzc3VlSW5wdXRQYXJhbWV0ZXJzCiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlCgogICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgIGxvZy53YXJuICJmaWVsZENvbmZpZzogIiArIGZpZWxkQ29uZmlnCiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q2xvc2VkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoKICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTsKICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICBsb2cud2FybiAiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGEiCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vZGVmIHZhbGlkYXRpb25SZXN1bHQgPSBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKQogICAgICAgICAgICAgICAgaWYgKGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb24KICAgICAgICAgICAgICAgICAgICBkZWYgaXNzdWVSZXN1bHQgPSBpc3N1ZVNlcnZpY2UudHJhbnNpdGlvbih1c2VyLCBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKSkKICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIkZhaWxlZCB0byB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSIpCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJUcmFuc2F6aW9uZSBmYXR0YSA5NiAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c30iKQogICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9Q09NUExFVEUKICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKCkKICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2soZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy9maWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpCiAgICAgICAgICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksICJZZXMiKSAKICAgICAgICAgICAgICAgICAgICAgICAgLy92YWxpZGF0aW9uUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykKICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKICAgICAgICAgICAgICAgICAgICAgICAgbWkgPSAoTXV0YWJsZUlzc3VlKSBsaW5rZWRJc3N1ZQoKICAgICAgICAgICAgICAgICAgICAgICAgLy9maWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICAgICAgICAgIC8vbG9nLndhcm4gImZpZWxkQ29uZmlnOiAiICsgZmllbGRDb25maWcKICAgICAgICAgICAgICAgICAgICAgICAgLy9jZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy9hdXRvbWF0aWNhbGx5Q2xvc2VkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoKICAgICAgICAgICAgICAgICAgICAgICAgLy9Db21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgLy9sb2cud2FybiAiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGEiCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJUcmFuc2F6aW9uZSBmYXR0YSAxMjQgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSwgJHtsaW5rZWRJc3N1ZS5zdGF0dXN9IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJDb3VsZCBub3QgdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmVycm9yQ29sbGVjdGlvbn0iKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfWVsc2UgaWYgKHRyYW5zaXRpb25JZD09Q09NUExFVEUpewogICAgICAgICAgICAgICAgZGVmIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKCkKICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGggewogICAgICAgICAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayhmYWxzZSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSkKICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgIC8vaXNzdWVJbnB1dFBhcmFtZXRlcnMuYWRkQ3VzdG9tRmllbGRWYWx1ZShmaWVsZENvbmZpZy5nZXRJZCgpLCAiWWVzIikgCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKQogICAgICAgICAgICAgICAgZGVmIG1pID0gKE11dGFibGVJc3N1ZSkgbGlua2VkSXNzdWUKCiAgICAgICAgICAgICAgICBkZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGxpbmtlZElzc3VlKQogICAgICAgICAgICAgICAgbG9nLndhcm4gImZpZWxkQ29uZmlnOiAiICsgZmllbGRDb25maWcKICAgICAgICAgICAgICAgIGRlZiBjZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgIGF1dG9tYXRpY2FsbHlDbG9zZWQudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpCgogICAgICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpOwogICAgICAgICAgICAgICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgIGxvZy53YXJuICJVcGRhdGVkIGN1c3RvbWZpZWxkIC0gaXNzdWUgbGlua2F0YSIKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy9kZWYgdmFsaWRhdGlvblJlc3VsdCA9IGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpCiAgICAgICAgICAgICAgICBpZiAoaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuaXNWYWxpZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgdHJhbnNpdGlvbgogICAgICAgICAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpKQogICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIlRyYW5zYXppb25lIGZhdHRhIDE2MSAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c30iKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIkNvdWxkIG5vdCB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuZXJyb3JDb2xsZWN0aW9ufSIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICBMaXN0PElzc3VlTGluaz4gYWxsT3V0SXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldE91dHdhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKQogICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsT3V0SXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHsKICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpOwoKICAgICAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgIGxvZy53YXJuICJJc3N1ZSBjb24gcmVsYXRlc091dElzc3VlTGluayIKICAgICAgICAgICAgLypFc2VndWlyZSB0cmFuc2F6aW9uZSBkaSBzdGF0byBjb24gT1BBQV9BVVRPTUFUSUNBTExZX0NMT1NFRD1ZZXMgZGVsbGEgZGVzdGluYXRpb25Jc3N1ZSovCiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZSA9IGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpCiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZVN0YXR1cyA9IGxpbmtlZElzc3VlLmdldFN0YXR1cygpCiAgICAgICAgICAgIGRlZiB0cmFuc2l0aW9uSWQKICAgICAgICAgICAgbG9nLndhcm4gImxpbmtlZElzc3VlOiAiICsgbGlua2VkSXNzdWUKICAgICAgICAgICAgbG9nLndhcm4gImxpbmtlZElzc3VlU3RhdHVzLm5hbWU6ICIgKyBsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lCiAgICAgICAgICAgIGlmKGxpbmtlZElzc3VlU3RhdHVzLm5hbWUgPT0gIkNvbmZpcm1lZCBhbmQgUGxhbm5lZCIpewogICAgICAgICAgICAgICAgdHJhbnNpdGlvbklkPVNUQVJUX1BST0dSRVNTCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYobGlua2VkSXNzdWVTdGF0dXMubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5pblByb2dyZXNzJ10udG9TdHJpbmcoKSl7CiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9Q09NUExFVEUKICAgICAgICAgICAgfQogICAgICAgICAgICBsb2cud2FybiAidHJhbnNpdGlvbklkOiAiICsgdHJhbnNpdGlvbklkCiAgICAgICAgICAgIGlmKHRyYW5zaXRpb25JZD09U1RBUlRfUFJPR1JFU1MpewogICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKQogICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7CiAgICAgICAgICAgICAgICAgICAgc2V0U2tpcFNjcmVlbkNoZWNrKGZhbHNlKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy9kZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKQogICAgICAgICAgICAgICAgLy9Db21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gIlllcyIgfQogICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksICJZZXMiKSAKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpCiAgICAgICAgICAgICAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBsaW5rZWRJc3N1ZQoKICAgICAgICAgICAgICAgIGRlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICBsb2cud2FybiAiZmllbGRDb25maWc6ICIgKyBmaWVsZENvbmZpZwogICAgICAgICAgICAgICAgZGVmIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gIlllcyIgfQogICAgICAgICAgICAgICAgYXV0b21hdGljYWxseUNsb3NlZC51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSkKCiAgICAgICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7CiAgICAgICAgICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGxpbmtlZElzc3VlKQogICAgICAgICAgICAgICAgbG9nLndhcm4gIlVwZGF0ZWQgY3VzdG9tZmllbGQgLSBpc3N1ZSBsaW5rYXRhIgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvL2RlZiB2YWxpZGF0aW9uUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykKICAgICAgICAgICAgICAgIGxvZy53YXJuICJpc3N1ZUlucHV0UGFyYW1ldGVyczogIiArIGlzc3VlSW5wdXRQYXJhbWV0ZXJzCiAgICAgICAgICAgICAgICBpZiAoaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuaXNWYWxpZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgdHJhbnNpdGlvbgogICAgICAgICAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpKQogICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIlRyYW5zYXppb25lIGZhdHRhIDIxOCAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c30iKQogICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9Q09NUExFVEUKICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKCkKICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2soZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy9maWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpCiAgICAgICAgICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksICJZZXMiKSAKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpCiAgICAgICAgICAgICAgICAgICAgICAgIG1pID0gKE11dGFibGVJc3N1ZSkgbGlua2VkSXNzdWUKCiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4gImZpZWxkQ29uZmlnOiAiICsgZmllbGRDb25maWcKICAgICAgICAgICAgICAgICAgICAgICAgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9tYXRpY2FsbHlDbG9zZWQudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpCgogICAgICAgICAgICAgICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuICJVcGRhdGVkIGN1c3RvbWZpZWxkIC0gaXNzdWUgbGlua2F0YSIKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vdmFsaWRhdGlvblJlc3VsdCA9IGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJUcmFuc2F6aW9uZSBmYXR0YSAyNDggJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSwgJHtsaW5rZWRJc3N1ZS5zdGF0dXN9IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJDb3VsZCBub3QgdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmVycm9yQ29sbGVjdGlvbn0iKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICBsb2cud2FybiAiaXNzdWUgZGEgY29tcGxldGFyZSIKICAgICAgICAgICAgICAgIGRlZiBpc3N1ZUlucHV0UGFyYW1ldGVycyA9IGlzc3VlU2VydmljZS5uZXdJc3N1ZUlucHV0UGFyYW1ldGVycygpCiAgICAgICAgICAgICAgICBpc3N1ZUlucHV0UGFyYW1ldGVycy53aXRoIHsKICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2soZmFsc2UpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvL2RlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpCiAgICAgICAgICAgICAgICAvL0NvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICAvL2lzc3VlSW5wdXRQYXJhbWV0ZXJzLmFkZEN1c3RvbUZpZWxkVmFsdWUoZmllbGRDb25maWcuZ2V0SWQoKSwgIlllcyIpIAogICAgICAgICAgICAgICAgLy9sb2cud2FybiAidmFsaWRhdGVSZXN1bHQiCiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlCgogICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgIGxvZy53YXJuICJmaWVsZENvbmZpZzogIiArIGZpZWxkQ29uZmlnCiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q2xvc2VkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoKICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTsKICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICBsb2cud2FybiAiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGEiCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgICAgICAgICAgZGVmIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpCiAgICAgICAgICAgICAgICAgICAgaWYgKCEgaXNzdWVSZXN1bHQuaXNWYWxpZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJGYWlsZWQgdG8gdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn0iKQogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiVHJhbnNhemlvbmUgZmF0dGEgMjg1ICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn0sICR7bGlua2VkSXNzdWUuc3RhdHVzfSIpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCn0=</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE"></arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue">50</arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_22693</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="6" name="Completed to be Closed">
      <meta name="jira.status.id">14330</meta>
      <actions>
        <action id="161" name="ODV" view="fieldscreen">
          <meta name="opsbar-sequence">40</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">19908</meta>
          <restrict-to>
            <conditions type="AND">
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">1428cc10-dd49-4245-bfa5-1c21e88f47e3</arg>
                <arg name="FIELD_NOTES">YCFgTWFpbnRlbmFuY2UgVGlja2V0IE9SIFBNIFRpY2tldA==</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnTWFpbnRlbmFuY2UgVGlja2V0JyB8fCBpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXQnIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
              </condition>
              <condition type="class">
                <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIE9QX1NBTEVTX09SREVSX0RBVEUgLSBJZiBub3QgbnVsbCAtIHRyYW5zaXRpb24gaGFzIGFscmVhZHkgYmVlbiBleGVjdXRlZA==</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXIKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsCgpQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpCkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpCnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7Cglwcm9wZXJ0aWVzLmxvYWQoaXQpCn0KY2ZWYWx1ZXNbcHJvcGVydGllc1snY2Yuc2FsZXNPcmRlckRhdGUnXV0gPT0gbnVsbHx8fA==</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
              </condition>
              <condition type="class">
                <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIE9QX0FVVE9NQVRJQ0FMTFlfQ0xPU0VEIC0gaWYgWWVzIGRvbid0IGFsbG93IHRyYW5zaXRpb24=</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXIKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsCgpQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpCkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpCnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7Cglwcm9wZXJ0aWVzLmxvYWQoaXQpCn0KY2ZWYWx1ZXNbcHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUNsb3NlZCddXSA9PSBudWxsIHx8IGNmVmFsdWVzW3Byb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlDbG9zZWQnXV0/LnZhbHVlID09ICdObyd8fHw=</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">3d74ebaab228199aff706fc0e35573a6d6df31fb</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIFJlcXVpcmVkIEZpZWxkcyAtIHNvbG8gZXJyb3JzLCBubyB3YXJuaW5ncw==</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXJcbmltcG9ydCBncm9vdnkuanNvbi5Kc29uQnVpbGRlclxuaW1wb3J0IGdyb292eS5qc29uLlN0cmVhbWluZ0pzb25CdWlsZGVyXG5cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZFxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGlua1xuXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcblxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnlcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuIFxuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL0lzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbi8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMjI3OTJcIilcblxuZGVmIGVycm9ycyA9IGZhbHNlXG5kZWYgd2FybmluZ3MgPSBmYWxzZVxuZGVmIHJlbGF0ZXNJbklzc3VlTGluaz1mYWxzZVxuZGVmIHJlbGF0ZXNPdXRJc3N1ZUxpbms9ZmFsc2VcbmRlZiB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlTGlua2VkID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgd0xpc3RDb25maXJtRW1wdHlSYXRlUXVvdGVMaW5rZWQgPSBuZXcgQXJyYXlMaXN0KClcblxuZGVmIGx1bXBTdW1QcmljZSA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YubHVtcFN1bVByaWNlJ10udG9TdHJpbmcoKSlbMF1cblxuLypDYW1waSBjb24gZGF0aSBvYmJsaWdhdG9yaSBwZXIgdGlja2V0IG5vbiBhIGNvcnBvKi9cbmRlZiByZXBNYXRlcmlhbHMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJlcGxhY2VkTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF1cbmRlZiB1bmFUYW50dW1SYXRlcyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YudW5hdGFudHVtUmF0ZXMnXS50b1N0cmluZygpKVswXVxuZGVmIGxhYm91clJhdGVzID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5sYWJvdXJSYXRlcyddLnRvU3RyaW5nKCkpWzBdXG5kZWYgdHJhdmVsUmF0ZXMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnRyYXZlbFJhdGVzJ10udG9TdHJpbmcoKSlbMF1cblxuLypDYW1waSBjb24gZGF0aSBvYmJsaWdhdG9yaSBwZXIgdGlja2V0IGEgY29ycG8qL1xuZGVmIGx1bXBTdW1SYXRlcyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YubHVtcFN1bVJhdGVzJ10udG9TdHJpbmcoKSlbMF1cblxuLypDb25mZXJtYSB1dGVudGUgc3Ugd2FybmluZ3MqL1xuZGVmIHRyYW5zaXRpb25DaGVjayA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY2hlY2tBbmRDb25maXJtJ10udG9TdHJpbmcoKSlbMF1cbmRlZiB0cmFuc2l0aW9uQ2hlY2tWYWx1ZSA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKVxuXG4vKkluc2lnaHQgU2NoZW1hIElEcyovXG5kZWYgREJPYmplY3RzID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8nXS50b1N0cmluZygpICsgXCItXCJcbmRlZiBPUEFBID0gcHJvcGVydGllc1snaXNjaGVtYS5hYSddLnRvU3RyaW5nKCkgKyBcIi1cIlxuXG4vKkFycmF5IHdhcm5pbmdzIGVkIGVycm9ycyBwZXIgbGEgaXNzdWUgcHJpbmNpcGFsZSwgdW5vIHBlciBvZ25pIHRpcG9sb2dpYSBkaSBlcnJvcmUgbyB3YXJuaW5nKi9cbmRlZiBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXIgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyID0gbmV3IEFycmF5TGlzdCgpXG4vL2RlZiBpc3N1ZUVycm9yLi4uXG5cbi8qVmVyaWZpY2EgY2FtcGkgc3UgdGlja2V0IG9nZ2V0dG8gZGVsbGEgdHJhbnNhemlvbmUqL1xuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUHJpY2UpIT1udWxsICYmIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobHVtcFN1bVByaWNlKS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKSl7XG5cdC8qQ29udGFiaWxpenphemlvbmUgYSBjb3JwbyovXG5cdGxvZy5kZWJ1ZyBcIkNvbnRhYmlsaXp6YXppb25lIGEgY29ycG9cIlxuXHQvL09QQUFfTFVNUF9TVU1fUkFURVNcblx0aWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUmF0ZXMpIT1udWxsICYmIChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUmF0ZXMpICE9IFwiXCIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobHVtcFN1bVJhdGVzKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSl7XG5cdFx0LypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovXG5cdFx0Ly9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzXG5cdFx0Q2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyAgXG5cdFx0Q2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XG5cdFx0ZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcblx0XHRkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcblxuXHRcdGRlZiBsc1JhdGVzTGlzdCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobHVtcFN1bVJhdGVzKVxuXG5cdFx0Zm9yKGxzIGluIGxzUmF0ZXNMaXN0KXtcblx0XHRcdC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdFxuXHRcdFx0ZGVmIGxzUmF0ZT1scy50b1N0cmluZygpXG5cdFx0XHRkZWYgbHNSYXRlS2V5ID0gbHNSYXRlLnN1YnN0cmluZyhsc1JhdGUuaW5kZXhPZignKCcpKzEsbHNSYXRlLmluZGV4T2YoJyknKSlcblx0XHRcdGRlZiBsc1JhdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4obHNSYXRlS2V5KVxuXHRcdFx0Ly9nZXQgXCJBUFBMSUVEX1RPXCIgZm9yIHRoYXQgcmF0ZVxuXHRcdFx0ZGVmIGxzQXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxzUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuYXBwbGllZFRvJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcblx0XHRcdGRlZiBsc0FwcGxpZWRUb1ZhbHVlXG5cdFx0XHRpZiAobHNBcHBsaWVkVG8pe1xuXHRcdFx0XHRsc0FwcGxpZWRUb1ZhbHVlID0gbHNBcHBsaWVkVG8uc3Vic3RyaW5nKGxzQXBwbGllZFRvLmluZGV4T2YoJygnKSsxLGxzQXBwbGllZFRvLmluZGV4T2YoJyknKSlcblx0XHRcdH1cbiAgICAgICAgICAgIC8vZ2V0IFwiREVMRVRFRFwiIGZvciB0aGF0IHJhdGVcbiAgICAgICAgICAgIGRlZiBkZWxldGVkXG4gICAgICAgICAgICBkZWYgZGVsZXRlZFZhbHVlXG4gICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgIGRlbGV0ZWQgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJkZWxldGVkOiBcIiArIGRlbGV0ZWRcbiAgICAgICAgICAgICAgICBpZiAoZGVsZXRlZCl7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZWRWYWx1ZSA9IGRlbGV0ZWQuc3Vic3RyaW5nKGRlbGV0ZWQuaW5kZXhPZignKCcpKzEsZGVsZXRlZC5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXHRcdFx0XG5cdFx0XHRkZWYgbHNSYXRlUmVmID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxzUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQucmF0ZVJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG5cdFx0XHRcblx0XHRcdGRlZiBsc1JhdGVSZWZLZXlcblx0XHRcdGRlZiBsc1JhdGVSZWZWYWx1ZVxuXHRcdFx0aWYobHNSYXRlUmVmLnNpemUoKSA+IDApe1xuXHRcdFx0XHRsc1JhdGVSZWYgPSBsc1JhdGVSZWYudG9TdHJpbmcoKVxuXHRcdFx0XHRsc1JhdGVSZWZLZXkgPSBsc1JhdGVSZWYuc3Vic3RyaW5nKGxzUmF0ZVJlZi5pbmRleE9mKCcoJykrMSxsc1JhdGVSZWYuaW5kZXhPZignKScpKVxuXHRcdFx0XHRkZWYgbHNSYXRlUmVmT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKERCT2JqZWN0cyArIGxzUmF0ZVJlZktleSlcblx0XHRcdFx0bHNSYXRlUmVmVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoucmF0ZS5OYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcblx0XHRcdFx0bHNSYXRlUmVmVmFsdWUgPSBsc1JhdGVSZWZWYWx1ZS5zdWJzdHJpbmcobHNSYXRlUmVmVmFsdWUuaW5kZXhPZignKCcpKzEsbHNSYXRlUmVmVmFsdWUuaW5kZXhPZignKScpKVxuXHRcdFx0fVxuXG5cdFx0XHRpZigobHNBcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscyhcIkJPVEhcIikgfHwgbHNBcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscyhcIkNVU1RPTUVSXCIpKSAmJiAhZGVsZXRlZFZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKFwidHJ1ZVwiKSl7XG5cdFx0XHRcdC8vZ2V0IFwiVE9UQUxfQU1PVU5UX0NVU1RPTUVSXCIgZm9yIHRoYXQgY29tcG9uZW50XG5cdFx0XHRcdGRlZiB0b3RDdXN0b21lciBcblx0XHRcdFx0aWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxzUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdG9tZXInXS50b1N0cmluZygpKSl7XG5cdFx0XHRcdFx0dG90Q3VzdG9tZXIgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lib2oub25TaXRlUmF0ZVJlcG9ydC50b3RDdXN0b21lciddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKCF0b3RDdXN0b21lciB8fCB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMC4wXCIpKXtcblx0XHRcdFx0XHR3YXJuaW5ncz10cnVlXG5cdFx0XHRcdFx0aXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lci5hZGQobHNSYXRlUmVmVmFsdWUudG9TdHJpbmcoKSlcblx0XHRcdFx0XHRsb2cuZGVidWcgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIiBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyOiBcIiArIGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXJcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdCB9ICAgIFxuXHR9XG5cbn1lbHNle1xuXHQvKkNvbnRhYmlsaXp6YXppb25lIG5vbiBhIGNvcnBvKi9cblx0bG9nLmRlYnVnIFwiQ29udGFiaWxpenphemlvbmUgTk9OIGEgY29ycG9cIlxuXG5cdC8vT1BBQV9SRVBMQUNFRF9NQVRFUklBTFNcblx0aWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpIT1udWxsICYmIChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpICE9IFwiXCIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSl7XG5cdFx0Ly9sb2cuZGVidWcgXCJNYXRlcmlhbGk6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpXG5cdFx0LypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovXG5cdFx0Ly9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzXG5cdFx0Q2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyAgXG5cdFx0Q2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XG5cdFx0ZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcblx0XHRkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcblxuXHRcdGRlZiByZXBNYXRMaXN0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpXG5cblx0XHRmb3IobWF0IGluIHJlcE1hdExpc3Qpe1xuXHRcdFx0Ly9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0XG5cdFx0XHRkZWYgY29tcG9uZW50PW1hdC50b1N0cmluZygpXG5cdFx0XHQvL2RlZiBjb21wb25lbnRLZXkgPSBjb21wb25lbnQuc3Vic3RyaW5nKGNvbXBvbmVudC5pbmRleE9mKCcoJykrMSxjb21wb25lbnQuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgZGVmIGNvbXBvbmVudEtleSA9IGNvbXBvbmVudC5zdWJzdHJpbmcoY29tcG9uZW50LmluZGV4T2YoJygnK09QQUEpKzEsY29tcG9uZW50Lmxlbmd0aCgpLTEpXG5cdFx0XHRkZWYgY29tcG9uZW50T2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGNvbXBvbmVudEtleSlcblx0XHRcdC8vZ2V0IFwiQVBQTElFRF9UT1wiIGZvciB0aGF0IGNvbXBvbmVudFxuXHRcdFx0ZGVmIGFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuYXBwbGllZFRvJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpIGFzIEFycmF5TGlzdFxuXHRcdFx0ZGVmIGFwcGxpZWRUb1ZhbHVlXG5cdFx0XHRpZihhcHBsaWVkVG8uc2l6ZSgpID4gMCl7XG5cdFx0XHRcdGFwcGxpZWRUbyA9IGFwcGxpZWRUby50b1N0cmluZygpXG5cdFx0XHRcdGFwcGxpZWRUb1ZhbHVlID0gYXBwbGllZFRvLnN1YnN0cmluZyhhcHBsaWVkVG8uaW5kZXhPZignKCcpKzEsYXBwbGllZFRvLmluZGV4T2YoJyknKSlcblx0XHRcdFx0Ly9sb2cuZGVidWcgXCJhcHBsaWVkVG9WYWx1ZTogXCIgKyBhcHBsaWVkVG9WYWx1ZVxuXHRcdFx0fVxuICAgICAgICAgICAgLy9nZXQgXCJERUxFVEVEXCIgZm9yIHRoYXQgcmF0ZVxuICAgICAgICAgICAgZGVmIGRlbGV0ZWRcbiAgICAgICAgICAgIGRlZiBkZWxldGVkVmFsdWVcbiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuZGVsZXRlZCddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgICAgICBkZWxldGVkID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5kZWxldGVkJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJkZWxldGVkOiBcIiArIGRlbGV0ZWRcbiAgICAgICAgICAgICAgICBpZiAoZGVsZXRlZCl7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZWRWYWx1ZSA9IGRlbGV0ZWQuc3Vic3RyaW5nKGRlbGV0ZWQuaW5kZXhPZignKCcpKzEsZGVsZXRlZC5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXHRcdFx0XG5cdFx0XHRkZWYgbWF0TnVtYmVyXG5cdFx0XHRkZWYgbWF0TnVtYmVyS2V5XG5cdFx0XHRkZWYgbWF0TnVtYmVyVmFsdWVcblx0XHRcdGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQubWF0ZXJpYWxSZWYnXS50b1N0cmluZygpKSl7XG5cdFx0XHRcdG1hdE51bWJlciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQubWF0ZXJpYWxSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkgYXMgQXJyYXlMaXN0XG5cdFx0XHRcdGlmKG1hdE51bWJlci5zaXplKCkgPiAwKXtcblx0XHRcdFx0XHRtYXROdW1iZXIgPSBtYXROdW1iZXIudG9TdHJpbmcoKVxuXHRcdFx0XHRcdG1hdE51bWJlcktleSA9IG1hdE51bWJlci5zdWJzdHJpbmcobWF0TnVtYmVyLmluZGV4T2YoJygnKSsxLG1hdE51bWJlci5pbmRleE9mKCcpJykpXG5cdFx0XHRcdFx0ZGVmIG1hdE51bWJlck9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihEQk9iamVjdHMgKyBtYXROdW1iZXJLZXkpXG5cdFx0XHRcdFx0bWF0TnVtYmVyVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obWF0TnVtYmVyT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoubWF0ZXJpYWwubmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG5cdFx0XHRcdFx0bWF0TnVtYmVyVmFsdWUgPSBtYXROdW1iZXJWYWx1ZS5zdWJzdHJpbmcobWF0TnVtYmVyVmFsdWUuaW5kZXhPZignKCcpKzEsbWF0TnVtYmVyVmFsdWUuaW5kZXhPZignKScpKVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGRlZiBzZXJpYWxOdW1iZXJcblx0XHRcdGRlZiBzZXJpYWxOdW1iZXJWYWx1ZVxuXHRcdFx0aWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5zZXJpYWxOdW1iZXInXS50b1N0cmluZygpKSl7XG5cdFx0XHRcdHNlcmlhbE51bWJlciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuc2VyaWFsTnVtYmVyJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpIGFzIEFycmF5TGlzdFxuXHRcdFx0XHRpZihzZXJpYWxOdW1iZXIuc2l6ZSgpID4gMCl7XG5cdFx0XHRcdFx0c2VyaWFsTnVtYmVyID0gc2VyaWFsTnVtYmVyLnRvU3RyaW5nKClcblx0XHRcdFx0XHRzZXJpYWxOdW1iZXJWYWx1ZSA9IHNlcmlhbE51bWJlci5zdWJzdHJpbmcoc2VyaWFsTnVtYmVyLmluZGV4T2YoJygnKSsxLHNlcmlhbE51bWJlci5pbmRleE9mKCcpJykpXG5cdFx0XHRcdH0gIFxuXHRcdFx0fVx0XHRcdFx0XG5cblx0XHRcdGlmKChhcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscyhcIkJPVEhcIikgfHwgYXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoXCJDVVNUT01FUlwiKSkgJiYgIWRlbGV0ZWRWYWx1ZS50b1N0cmluZygpLmVxdWFscyhcInRydWVcIikpe1xuXHRcdFx0XHQvL2dldCBcIlRPVEFMX0FNT1VOVF9DVVNUT01FUlwiIGZvciB0aGF0IGNvbXBvbmVudFxuXHRcdFx0XHRkZWYgdG90Q3VzdG9tZXIgXG5cdFx0XHRcdGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQudG90Q3VzdCddLnRvU3RyaW5nKCkpKXtcblx0XHRcdFx0XHR0b3RDdXN0b21lciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQudG90Q3VzdCddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKCF0b3RDdXN0b21lciB8fCB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMC4wXCIpKXtcblx0XHRcdFx0XHR3YXJuaW5ncz10cnVlXG5cdFx0XHRcdFx0aXNzdWVXYXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyLmFkZChtYXROdW1iZXJWYWx1ZS50b1N0cmluZygpICsgKCFzZXJpYWxOdW1iZXIudG9TdHJpbmcoKS5lcXVhbHMoXCJbXVwiKSA/IFwiIChcIiArIChzZXJpYWxOdW1iZXJWYWx1ZSA/IHNlcmlhbE51bWJlclZhbHVlLnRvU3RyaW5nKCkgOiBcIlwiKSArIFwiKVwiIDogXCIgKClcIikpICAgXG5cdFx0XHRcdFx0bG9nLmRlYnVnIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyOiBcIiArIGlzc3VlV2FybmluZ0VtcHR5UXVvdGVNYXRDdXN0b21lclxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0IH0gICAgXG5cdH0gIFxuXG5cdC8vT1BBQV9VTkFUQU5UVU1fUkFURVNcblx0aWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcykhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHVuYVRhbnR1bVJhdGVzKSAhPSBcIlwiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHVuYVRhbnR1bVJhdGVzKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSl7XG5cdFx0bG9nLmRlYnVnIFwiVW5hIHRhbnR1bSByYXRlczogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHVuYVRhbnR1bVJhdGVzKVxuXHRcdC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qL1xuXHRcdC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50c1xuXHRcdENsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTsgIFxuXHRcdENsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuXHRcdGRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XG5cdFx0ZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XG5cblx0XHRkZWYgdW1SYXRlc0xpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHVuYVRhbnR1bVJhdGVzKVxuXG5cdFx0Zm9yKHVtIGluIHVtUmF0ZXNMaXN0KXtcblx0XHRcdC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdFxuXHRcdFx0ZGVmIHVtUmF0ZT11bS50b1N0cmluZygpXG5cdFx0XHRkZWYgdW1SYXRlS2V5ID0gdW1SYXRlLnN1YnN0cmluZyh1bVJhdGUuaW5kZXhPZignKCcpKzEsdW1SYXRlLmluZGV4T2YoJyknKSlcblx0XHRcdGRlZiB1bVJhdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4odW1SYXRlS2V5KVxuXHRcdFx0Ly9nZXQgXCJBUFBMSUVEX1RPXCIgZm9yIHRoYXQgcmF0ZVxuXHRcdFx0ZGVmIHVtQXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHVtUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuYXBwbGllZFRvJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcblx0XHRcdGRlZiB1bUFwcGxpZWRUb1ZhbHVlID0gdW1BcHBsaWVkVG8uc3Vic3RyaW5nKHVtQXBwbGllZFRvLmluZGV4T2YoJygnKSsxLHVtQXBwbGllZFRvLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy9nZXQgXCJERUxFVEVEXCIgZm9yIHRoYXQgcmF0ZVxuXHRcdFx0ZGVmIGRlbGV0ZWRcbiAgICAgICAgICAgIGRlZiBkZWxldGVkVmFsdWVcbiAgICAgICAgICAgIGlmIChvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgIGRlbGV0ZWQgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJkZWxldGVkOiBcIiArIGRlbGV0ZWRcbiAgICAgICAgICAgICAgICBpZiAoZGVsZXRlZCl7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZWRWYWx1ZSA9IGRlbGV0ZWQuc3Vic3RyaW5nKGRlbGV0ZWQuaW5kZXhPZignKCcpKzEsZGVsZXRlZC5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG5cdFx0XHRkZWYgdW1SYXRlUmVmXG5cdFx0XHRpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5yYXRlUmVmJ10udG9TdHJpbmcoKSkpe1xuXHRcdFx0XHR1bVJhdGVSZWY9b2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHVtUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQucmF0ZVJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGRlZiB1bVJhdGVSZWZLZXlcblx0XHRcdGRlZiB1bVJhdGVSZWZWYWx1ZVxuXHRcdFx0aWYodW1SYXRlUmVmKXtcblx0XHRcdFx0dW1SYXRlUmVmID0gdW1SYXRlUmVmLnRvU3RyaW5nKClcblx0XHRcdFx0dW1SYXRlUmVmS2V5ID0gdW1SYXRlUmVmLnN1YnN0cmluZyh1bVJhdGVSZWYuaW5kZXhPZignKCcpKzEsdW1SYXRlUmVmLmluZGV4T2YoJyknKSlcblx0XHRcdFx0ZGVmIHVtUmF0ZVJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihEQk9iamVjdHMgKyB1bVJhdGVSZWZLZXkpXG5cdFx0XHRcdHVtUmF0ZVJlZlZhbHVlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHVtUmF0ZVJlZk9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnJhdGUuTmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG5cdFx0XHRcdHVtUmF0ZVJlZlZhbHVlID0gdW1SYXRlUmVmVmFsdWUuc3Vic3RyaW5nKHVtUmF0ZVJlZlZhbHVlLmluZGV4T2YoJygnKSsxLHVtUmF0ZVJlZlZhbHVlLmluZGV4T2YoJyknKSlcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0aWYoKHVtQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoXCJCT1RIXCIpIHx8IHVtQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoXCJDVVNUT01FUlwiKSkgJiYgIWRlbGV0ZWRWYWx1ZS50b1N0cmluZygpLmVxdWFscyhcInRydWVcIikpe1xuXHRcdFx0XHQvL2dldCBcIlRPVEFMX0FNT1VOVF9DVVNUT01FUlwiIGZvciB0aGF0IGNvbXBvbmVudFxuXHRcdFx0XHRkZWYgdG90Q3VzdG9tZXJcblx0XHRcdFx0aWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHVtUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdG9tZXInXS50b1N0cmluZygpKSl7XG5cdFx0XHRcdFx0dG90Q3VzdG9tZXI9b2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHVtUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdG9tZXInXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcblx0XHRcdFx0fVxuXHRcdFx0XHRpZighdG90Q3VzdG9tZXIgfHwgdG90Q3VzdG9tZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscyhcIjAuMFwiKSl7XG5cdFx0XHRcdFx0d2FybmluZ3M9dHJ1ZVxuXHRcdFx0XHRcdGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIuYWRkKHVtUmF0ZVJlZlZhbHVlLnRvU3RyaW5nKCkpXG5cdFx0XHRcdFx0bG9nLmRlYnVnIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lcjogXCIgKyBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHQgfSAgICBcblx0fVxuXG5cdC8vT1BBQV9MQUJPVVJfUkFURVNcblx0aWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcykhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxhYm91clJhdGVzKSAhPSBcIlwiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxhYm91clJhdGVzKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSl7XG5cdFx0bG9nLmRlYnVnIFwiTGFib3VyIHJhdGVzOiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpXG5cdFx0LypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovXG5cdFx0Ly9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzXG5cdFx0Q2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyAgXG5cdFx0Q2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XG5cdFx0ZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcblx0XHRkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcblxuXHRcdGRlZiBsYWJvdXJSYXRlc0xpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxhYm91clJhdGVzKVxuXG5cdFx0Zm9yKGxiIGluIGxhYm91clJhdGVzTGlzdCl7XG5cdFx0XHQvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3Rcblx0XHRcdGRlZiBsYlJhdGU9bGIudG9TdHJpbmcoKVxuXHRcdFx0ZGVmIGxiUmF0ZUtleSA9IGxiUmF0ZS5zdWJzdHJpbmcobGJSYXRlLmluZGV4T2YoJygnKSsxLGxiUmF0ZS5pbmRleE9mKCcpJykpXG5cdFx0XHRkZWYgbGJSYXRlT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGxiUmF0ZUtleSlcblx0XHRcdC8vZ2V0IFwiQVBQTElFRF9UT1wiIGZvciB0aGF0IHJhdGVcblx0XHRcdGRlZiBsYkFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG5cdFx0XHRkZWYgbGJBcHBsaWVkVG9WYWx1ZSA9IGxiQXBwbGllZFRvLnN1YnN0cmluZyhsYkFwcGxpZWRUby5pbmRleE9mKCcoJykrMSxsYkFwcGxpZWRUby5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAvL2dldCBcIkRFTEVURURcIiBmb3IgdGhhdCByYXRlXG5cdFx0XHRkZWYgZGVsZXRlZFxuICAgICAgICAgICAgZGVmIGRlbGV0ZWRWYWx1ZVxuICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5kZWxldGVkJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgIGRlbGV0ZWQgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmRlbGV0ZWQnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImRlbGV0ZWQ6IFwiICsgZGVsZXRlZFxuICAgICAgICAgICAgICAgIGlmIChkZWxldGVkKXtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlZFZhbHVlID0gZGVsZXRlZC5zdWJzdHJpbmcoZGVsZXRlZC5pbmRleE9mKCcoJykrMSxkZWxldGVkLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cblx0XHRcdGRlZiBsYlJhdGVSZWZcblx0XHRcdGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKSl7XG5cdFx0XHRcdGxiUmF0ZVJlZj1vYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5yYXRlUmVmJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0ZGVmIHRlY2hSZWZcbiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaWJvai5vblNpdGVSYXRlUmVwb3J0LnRlY2huaWNpYW5SZWYnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgdGVjaFJlZj1vYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lib2oub25TaXRlUmF0ZVJlcG9ydC50ZWNobmljaWFuUmVmJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgIH1cblx0XHRcdFxuICAgICAgICAgICAgZGVmIGxiUmF0ZVJlZktleVxuICAgICAgICAgICAgZGVmIGxiUmF0ZVJlZlZhbHVlXG4gICAgICAgICAgICBpZihsYlJhdGVSZWYgJiYgbGJSYXRlUmVmLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgIGxiUmF0ZVJlZiA9IGxiUmF0ZVJlZi50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgbGJSYXRlUmVmS2V5ID0gbGJSYXRlUmVmLnN1YnN0cmluZyhsYlJhdGVSZWYuaW5kZXhPZignKCcpKzEsbGJSYXRlUmVmLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICBkZWYgbGJSYXRlUmVmT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKERCT2JqZWN0cyArIGxiUmF0ZVJlZktleSlcbiAgICAgICAgICAgICAgICBsYlJhdGVSZWZWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5yYXRlLk5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIGxiUmF0ZVJlZlZhbHVlID0gbGJSYXRlUmVmVmFsdWUuc3Vic3RyaW5nKGxiUmF0ZVJlZlZhbHVlLmluZGV4T2YoJygnKSsxLGxiUmF0ZVJlZlZhbHVlLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgIH1cblx0XHRcdFxuXHRcdFx0ZGVmIHRlY2hSZWZLZXlcbiAgICAgICAgICAgIGRlZiB0ZWNoUmVmVmFsdWVcbiAgICAgICAgICAgIGlmKHRlY2hSZWYpe1xuICAgICAgICAgICAgICAgIHRlY2hSZWYgPSB0ZWNoUmVmLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ0ZWNoUmVmOiBcIiArIHRlY2hSZWZcbiAgICAgICAgICAgICAgICB0ZWNoUmVmS2V5ID0gdGVjaFJlZi5zdWJzdHJpbmcodGVjaFJlZi5pbmRleE9mKCcoJykrMSx0ZWNoUmVmLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICBkZWYgdGVjaFJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihPUEFBICsgdGVjaFJlZktleSlcbiAgICAgICAgICAgICAgICB0ZWNoUmVmVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaFJlZk9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2huaWNpYW4ubmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgaWYodGVjaFJlZlZhbHVlKXtcbiAgICAgICAgICAgICAgICAgICAgdGVjaFJlZlZhbHVlID0gdGVjaFJlZlZhbHVlLnN1YnN0cmluZyh0ZWNoUmVmVmFsdWUuaW5kZXhPZignKCcpKzEsdGVjaFJlZlZhbHVlLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidGVjaFJlZlZhbHVlOiBcIiArIHRlY2hSZWZWYWx1ZVxuICAgICAgICAgICAgfVxuXHRcdFx0bG9nLmRlYnVnIGxiQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKVxuXHRcdFx0aWYoKGxiQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoXCJCT1RIXCIpIHx8IGxiQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoXCJDVVNUT01FUlwiKSkgJiYgIWRlbGV0ZWRWYWx1ZS50b1N0cmluZygpLmVxdWFscyhcInRydWVcIikpe1xuXHRcdFx0XHQvL2dldCBcIlRPVEFMX0FNT1VOVF9DVVNUT01FUlwiIGZvciB0aGF0IGNvbXBvbmVudFxuXHRcdFx0XHRkZWYgdG90Q3VzdG9tZXJcblx0XHRcdFx0aWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdG9tZXInXS50b1N0cmluZygpKSl7XG5cdFx0XHRcdFx0dG90Q3VzdG9tZXI9b2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdG9tZXInXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcblx0XHRcdFx0fVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpXG5cdFx0XHRcdGlmKCF0b3RDdXN0b21lciB8fCB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMC4wXCIpKXtcblx0XHRcdFx0XHR3YXJuaW5ncz10cnVlXG5cdFx0XHRcdFx0aXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lci5hZGQobGJSYXRlUmVmVmFsdWUudG9TdHJpbmcoKSArIFwiIChcIiArIHRlY2hSZWZWYWx1ZSArIFwiKVwiKVxuXHRcdFx0XHRcdGxvZy5kZWJ1ZyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArIFwiIGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXI6IFwiICsgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lciBcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdCB9ICAgIFxuXHR9XG5cblx0Ly9PUEFBX1RSQVZFTF9SQVRFU1xuXHRpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYXZlbFJhdGVzKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsUmF0ZXMpICE9IFwiXCIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsUmF0ZXMpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKXtcblx0XHRsb2cuZGVidWcgXCJUcmF2ZWwgcmF0ZXM6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmF2ZWxSYXRlcylcblx0XHQvKkNpY2xhcmUgdHV0dGkgZ2xpIG9nZ2V0dGkgYXNzb2NpYXRpIGFsIGNhbXBvKi9cblx0XHQvL2luc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHNcblx0XHRDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7ICBcblx0XHRDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTtcblx0XHRkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xuXHRcdGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG5cdFx0ZGVmIHRyYXZlbFJhdGVzTGlzdCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsUmF0ZXMpXG5cblx0XHRmb3IodHIgaW4gdHJhdmVsUmF0ZXNMaXN0KXtcblx0XHRcdC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdFxuXHRcdFx0ZGVmIHRyUmF0ZT10ci50b1N0cmluZygpXG5cdFx0XHRkZWYgdHJSYXRlS2V5ID0gdHJSYXRlLnN1YnN0cmluZyh0clJhdGUuaW5kZXhPZignKCcpKzEsdHJSYXRlLmluZGV4T2YoJyknKSlcblx0XHRcdGRlZiB0clJhdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4odHJSYXRlS2V5KVxuXHRcdFx0Ly9nZXQgXCJBUFBMSUVEX1RPXCIgZm9yIHRoYXQgcmF0ZVxuICAgICAgICAgICAgZGVmIHRyQXBwbGllZFRvXG4gICAgICAgICAgICBkZWYgdHJBcHBsaWVkVG9WYWx1ZVxuICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuYXBwbGllZFRvJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgIHRyQXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuYXBwbGllZFRvJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICB0ckFwcGxpZWRUb1ZhbHVlID0gdHJBcHBsaWVkVG8uc3Vic3RyaW5nKHRyQXBwbGllZFRvLmluZGV4T2YoJygnKSsxLHRyQXBwbGllZFRvLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vZ2V0IFwiREVMRVRFRFwiIGZvciB0aGF0IHJhdGVcblx0XHRcdGRlZiBkZWxldGVkXG4gICAgICAgICAgICBkZWYgZGVsZXRlZFZhbHVlXG4gICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odHJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgIGRlbGV0ZWQgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odHJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJkZWxldGVkOiBcIiArIGRlbGV0ZWRcbiAgICAgICAgICAgICAgICBpZiAoZGVsZXRlZCl7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZWRWYWx1ZSA9IGRlbGV0ZWQuc3Vic3RyaW5nKGRlbGV0ZWQuaW5kZXhPZignKCcpKzEsZGVsZXRlZC5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG5cdFx0XHRkZWYgdHJSYXRlUmVmXG5cdFx0XHRpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odHJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5yYXRlUmVmJ10udG9TdHJpbmcoKSkpe1xuXHRcdFx0XHR0clJhdGVSZWY9b2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQucmF0ZVJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGRlZiB0clJhdGVSZWZLZXlcblx0XHRcdGRlZiB0clJhdGVSZWZWYWx1ZVxuXHRcdFx0aWYodHJSYXRlUmVmICE9IG51bGwgJiYgdHJSYXRlUmVmLnNpemUoKSA+IDApe1xuXHRcdFx0XHR0clJhdGVSZWYgPSB0clJhdGVSZWYudG9TdHJpbmcoKVxuXHRcdFx0XHR0clJhdGVSZWZLZXkgPSB0clJhdGVSZWYuc3Vic3RyaW5nKHRyUmF0ZVJlZi5pbmRleE9mKCcoJykrMSx0clJhdGVSZWYuaW5kZXhPZignKScpKVxuXHRcdFx0XHRkZWYgdHJSYXRlUmVmT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKERCT2JqZWN0cyArIHRyUmF0ZVJlZktleSlcblx0XHRcdFx0dHJSYXRlUmVmVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odHJSYXRlUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoucmF0ZS5OYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcblx0XHRcdFx0dHJSYXRlUmVmVmFsdWUgPSB0clJhdGVSZWZWYWx1ZS5zdWJzdHJpbmcodHJSYXRlUmVmVmFsdWUuaW5kZXhPZignKCcpKzEsdHJSYXRlUmVmVmFsdWUuaW5kZXhPZignKScpKVxuXHRcdFx0fVxuXG5cdFx0XHRpZih0ckFwcGxpZWRUb1ZhbHVlICE9IG51bGwgJiYgIWRlbGV0ZWRWYWx1ZS50b1N0cmluZygpLmVxdWFscyhcInRydWVcIikgJiYgKHRyQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoXCJCT1RIXCIpIHx8IHRyQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoXCJDVVNUT01FUlwiKSkpe1xuXHRcdFx0XHQvL2dldCBcIlRPVEFMX0FNT1VOVF9DVVNUT01FUlwiIGZvciB0aGF0IGNvbXBvbmVudFxuXHRcdFx0XHRkZWYgdG90Q3VzdG9tZXJcblx0XHRcdFx0aWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdG9tZXInXS50b1N0cmluZygpKSl7XG5cdFx0XHRcdFx0dG90Q3VzdG9tZXI9b2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdG9tZXInXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcblx0XHRcdFx0fVxuXHRcdFx0XHRpZighdG90Q3VzdG9tZXIgfHwgdG90Q3VzdG9tZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscyhcIjAuMFwiKSl7XG5cdFx0XHRcdFx0d2FybmluZ3M9dHJ1ZVxuXHRcdFx0XHRcdGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIuYWRkKHRyUmF0ZVJlZlZhbHVlLnRvU3RyaW5nKCkpXG5cdFx0XHRcdFx0bG9nLmRlYnVnIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lcjogXCIgKyBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHQgfSAgICBcblx0fVxuXG59XG5cbmRlZiBsaW5rZWRUaWNrZXRzPW5ldyBBcnJheUxpc3QoKVxuXG4vKk9QLTEwMzg6IHZlcmlmaWNhIHRpY2tldCBjb2xsZWdhdGkgLSAgZSBzdSBjaWFzY3VubyB2ZXJpZmljYSBjYW1waSBvYmJsaWdhdG9yaSovXG5MaXN0PElzc3VlTGluaz4gYWxsSW5Jc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0SW53YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbmZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbEluSXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHtcbiAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICByZWxhdGVzSW5Jc3N1ZUxpbms9dHJ1ZVxuICAgICAgICBsaW5rZWRUaWNrZXRzLmFkZChpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkpXG4gICAgICAgIGxvZy5kZWJ1ZyBcIklzc3VlIGNvbiByZWxhdGVzSW5Jc3N1ZUxpbmtcIlxuICAgIH1cbn1cbkxpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG5mb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG5cbiAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7XG4gICAgICAgIHJlbGF0ZXNPdXRJc3N1ZUxpbms9dHJ1ZVxuICAgICAgICBsaW5rZWRUaWNrZXRzLmFkZChpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKSlcbiAgICAgICAgbG9nLmRlYnVnIFwiSXNzdWUgY29uIHJlbGF0ZXNPdXRJc3N1ZUxpbmtcIlxuICAgIH1cbn1cblxuLypBcnJheSB3YXJuaW5ncyBlZCBlcnJvcnMgcGVyIGxlIGlzc3VlIGxpbmthdGUsIHVubyBwZXIgb2duaSB0aXBvbG9naWEgZGkgZXJyb3JlIG8gd2FybmluZyovXG5kZWYgd2FybmluZ3NNYXRMaW5rZWRJc3N1ZXMgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiB3YXJuaW5nc1JhdGVMaW5rZWRJc3N1ZXMgPSBuZXcgQXJyYXlMaXN0KClcbi8vZGVmIGVycm9yc0xpbmtlZElzc3VlcyA9IG5ldyBBcnJheUxpc3QoKVxuXG5mb3IoaSBpbiBsaW5rZWRUaWNrZXRzKXtcbiAgICBpc3N1ZT1pIGFzIElzc3VlXG5cbiAgICAvKkFycmF5IHdhcm5pbmdzIGVkIGVycm9ycyBwZXIgbGEgc2luZ29sYSBpc3N1ZSBsaW5rYXRhLCB1bm8gcGVyIG9nbmkgdGlwb2xvZ2lhIGRpIGVycm9yZSBvIHdhcm5pbmcqL1xuICAgIGRlZiB3YXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lciA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiB3YXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyID0gbmV3IEFycmF5TGlzdCgpIFxuICAgIC8vZGVmIGVycm9yLi4uXG4gICAgXG4gICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUHJpY2UpIT1udWxsICYmIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobHVtcFN1bVByaWNlKS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKSl7XG4gICAgICAgIC8qQ29udGFiaWxpenphemlvbmUgYSBjb3JwbyovXG4gICAgICAgIGxvZy5kZWJ1ZyBcIkNvbnRhYmlsaXp6YXppb25lIGEgY29ycG9cIlxuICAgICAgICAvL09QQUFfTFVNUF9TVU1fUkFURVNcbiAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUmF0ZXMpIT1udWxsICYmIChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUmF0ZXMpICE9IFwiXCIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobHVtcFN1bVJhdGVzKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSl7XG4gICAgICAgICAgICAvKkNpY2xhcmUgdHV0dGkgZ2xpIG9nZ2V0dGkgYXNzb2NpYXRpIGFsIGNhbXBvKi9cbiAgICAgICAgICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50c1xuICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyAgXG4gICAgICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTtcbiAgICAgICAgICAgIGRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XG4gICAgICAgICAgICBkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcblxuICAgICAgICAgICAgZGVmIGxzUmF0ZXNMaXN0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUmF0ZXMpXG5cbiAgICAgICAgICAgIGZvcihscyBpbiBsc1JhdGVzTGlzdCl7XG4gICAgICAgICAgICAgICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0XG4gICAgICAgICAgICAgICAgZGVmIGxzUmF0ZT1scy50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgZGVmIGxzUmF0ZUtleSA9IGxzUmF0ZS5zdWJzdHJpbmcobHNSYXRlLmluZGV4T2YoJygnKSsxLGxzUmF0ZS5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgZGVmIGxzUmF0ZU9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihsc1JhdGVLZXkpXG4gICAgICAgICAgICAgICAgLy9nZXQgXCJBUFBMSUVEX1RPXCIgZm9yIHRoYXQgcmF0ZVxuICAgICAgICAgICAgICAgIGRlZiBsc0FwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsc1JhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgZGVmIGxzQXBwbGllZFRvVmFsdWVcbiAgICAgICAgICAgICAgICBpZiAobHNBcHBsaWVkVG8pe1xuICAgICAgICAgICAgICAgICAgICBsc0FwcGxpZWRUb1ZhbHVlID0gbHNBcHBsaWVkVG8uc3Vic3RyaW5nKGxzQXBwbGllZFRvLmluZGV4T2YoJygnKSsxLGxzQXBwbGllZFRvLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy9nZXQgXCJERUxFVEVEXCIgZm9yIHRoYXQgcmF0ZVxuICAgICAgICAgICAgICAgIGRlZiBkZWxldGVkXG4gICAgICAgICAgICAgICAgZGVmIGRlbGV0ZWRWYWx1ZVxuICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsc1JhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZWQgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiZGVsZXRlZDogXCIgKyBkZWxldGVkXG4gICAgICAgICAgICAgICAgICAgIGlmIChkZWxldGVkKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZWRWYWx1ZSA9IGRlbGV0ZWQuc3Vic3RyaW5nKGRlbGV0ZWQuaW5kZXhPZignKCcpKzEsZGVsZXRlZC5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBkZWYgbHNSYXRlUmVmID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxzUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQucmF0ZVJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG5cbiAgICAgICAgICAgICAgICBkZWYgbHNSYXRlUmVmS2V5XG4gICAgICAgICAgICAgICAgZGVmIGxzUmF0ZVJlZlZhbHVlXG4gICAgICAgICAgICAgICAgaWYobHNSYXRlUmVmLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICBsc1JhdGVSZWYgPSBsc1JhdGVSZWYudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICBsc1JhdGVSZWZLZXkgPSBsc1JhdGVSZWYuc3Vic3RyaW5nKGxzUmF0ZVJlZi5pbmRleE9mKCcoJykrMSxsc1JhdGVSZWYuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgICAgICBkZWYgbHNSYXRlUmVmT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKERCT2JqZWN0cyArIGxzUmF0ZVJlZktleSlcbiAgICAgICAgICAgICAgICAgICAgbHNSYXRlUmVmVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoucmF0ZS5uYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgbHNSYXRlUmVmVmFsdWUgPSBsc1JhdGVSZWZWYWx1ZS5zdWJzdHJpbmcobHNSYXRlUmVmVmFsdWUuaW5kZXhPZignKCcpKzEsbHNSYXRlUmVmVmFsdWUuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKChsc0FwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKFwiQk9USFwiKSB8fCBsc0FwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKFwiQ1VTVE9NRVJcIikpICYmICFkZWxldGVkVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoXCJ0cnVlXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgLy9nZXQgXCJUT1RBTF9BTU9VTlRfQ1VTVE9NRVJcIiBmb3IgdGhhdCBjb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgZGVmIHRvdEN1c3RvbWVyXG4gICAgICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsc1JhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnRvdEN1c3RvbWVyJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgICAgICBcdHRvdEN1c3RvbWVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxzUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdG9tZXInXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZighdG90Q3VzdG9tZXIgfHwgdG90Q3VzdG9tZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscyhcIjAuMFwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIuYWRkKGxzUmF0ZVJlZlZhbHVlLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIiB3YXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lcjogXCIgKyB3YXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lclxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSAgICBcbiAgICAgICAgfVxuXG4gICAgfWVsc2V7XG4gICAgICAgIC8qQ29udGFiaWxpenphemlvbmUgbm9uIGEgY29ycG8qL1xuICAgICAgICBsb2cuZGVidWcgXCJDb250YWJpbGl6emF6aW9uZSBOT04gYSBjb3Jwb1wiXG5cbiAgICAgICAgLy9PUEFBX1JFUExBQ0VEX01BVEVSSUFMU1xuICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykgIT0gXCJcIiAmJiAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKXtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIk1hdGVyaWFsaTogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscylcbiAgICAgICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qL1xuICAgICAgICAgICAgLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzXG4gICAgICAgICAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7ICBcbiAgICAgICAgICAgIENsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbiAgICAgICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4gICAgICAgICAgICBkZWYgcmVwTWF0TGlzdCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKVxuXG4gICAgICAgICAgICBmb3IobWF0IGluIHJlcE1hdExpc3Qpe1xuICAgICAgICAgICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdFxuICAgICAgICAgICAgICAgIGRlZiBjb21wb25lbnQ9bWF0LnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAvL2RlZiBjb21wb25lbnRLZXkgPSBjb21wb25lbnQuc3Vic3RyaW5nKGNvbXBvbmVudC5pbmRleE9mKCcoJykrMSxjb21wb25lbnQuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIGRlZiBjb21wb25lbnRLZXkgPSBjb21wb25lbnQuc3Vic3RyaW5nKGNvbXBvbmVudC5pbmRleE9mKCcoJytPUEFBKSsxLGNvbXBvbmVudC5sZW5ndGgoKS0xKVxuICAgICAgICAgICAgICAgIGRlZiBjb21wb25lbnRPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oY29tcG9uZW50S2V5KVxuICAgICAgICAgICAgICAgIC8vZ2V0IFwiQVBQTElFRF9UT1wiIGZvciB0aGF0IGNvbXBvbmVudFxuICAgICAgICAgICAgICAgIGRlZiBhcHBsaWVkVG9cbiAgICAgICAgICAgICAgICBkZWYgYXBwbGllZFRvVmFsdWVcbiAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgICAgICAgICAgYXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkgYXMgQXJyYXlMaXN0XG4gICAgICAgICAgICAgICAgICAgIGlmKGFwcGxpZWRUby5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGxpZWRUbyA9IGFwcGxpZWRUby50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBsaWVkVG9WYWx1ZSA9IGFwcGxpZWRUby5zdWJzdHJpbmcoYXBwbGllZFRvLmluZGV4T2YoJygnKSsxLGFwcGxpZWRUby5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJhcHBsaWVkVG9WYWx1ZTogXCIgKyBhcHBsaWVkVG9WYWx1ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vZ2V0IFwiREVMRVRFRFwiIGZvciB0aGF0IHJhdGVcbiAgICAgICAgICAgICAgICBkZWYgZGVsZXRlZFxuICAgICAgICAgICAgICAgIGRlZiBkZWxldGVkVmFsdWVcbiAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmRlbGV0ZWQnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZWQgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmRlbGV0ZWQnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJkZWxldGVkOiBcIiArIGRlbGV0ZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlbGV0ZWQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlZFZhbHVlID0gZGVsZXRlZC5zdWJzdHJpbmcoZGVsZXRlZC5pbmRleE9mKCcoJykrMSxkZWxldGVkLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBkZWYgbWF0TnVtYmVyXG4gICAgICAgICAgICAgICAgZGVmIG1hdE51bWJlcktleVxuICAgICAgICAgICAgICAgIGRlZiBtYXROdW1iZXJWYWx1ZVxuICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQubWF0ZXJpYWxSZWYnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgICAgIG1hdE51bWJlciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQubWF0ZXJpYWxSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkgYXMgQXJyYXlMaXN0XG4gICAgICAgICAgICAgICAgICAgIGlmKG1hdE51bWJlci5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdE51bWJlciA9IG1hdE51bWJlci50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXROdW1iZXJLZXkgPSBtYXROdW1iZXIuc3Vic3RyaW5nKG1hdE51bWJlci5pbmRleE9mKCcoJykrMSxtYXROdW1iZXIuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmIG1hdE51bWJlck9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihEQk9iamVjdHMgKyBtYXROdW1iZXJLZXkpXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXROdW1iZXJWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihtYXROdW1iZXJPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5tYXRlcmlhbC5uYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdE51bWJlclZhbHVlID0gbWF0TnVtYmVyVmFsdWUuc3Vic3RyaW5nKG1hdE51bWJlclZhbHVlLmluZGV4T2YoJygnKSsxLG1hdE51bWJlclZhbHVlLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGRlZiBzZXJpYWxOdW1iZXJcbiAgICAgICAgICAgICAgICBkZWYgc2VyaWFsTnVtYmVyVmFsdWVcbiAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnNlcmlhbE51bWJlciddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgICAgICAgICAgc2VyaWFsTnVtYmVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5zZXJpYWxOdW1iZXInXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkgYXMgQXJyYXlMaXN0XG4gICAgICAgICAgICAgICAgICAgIGlmKHNlcmlhbE51bWJlci5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcmlhbE51bWJlciA9IHNlcmlhbE51bWJlci50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXJpYWxOdW1iZXJWYWx1ZSA9IHNlcmlhbE51bWJlci5zdWJzdHJpbmcoc2VyaWFsTnVtYmVyLmluZGV4T2YoJygnKSsxLHNlcmlhbE51bWJlci5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZihhcHBsaWVkVG9WYWx1ZSAmJiAhZGVsZXRlZFZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKFwidHJ1ZVwiKSAmJiAoYXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoXCJCT1RIXCIpIHx8IGFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKFwiQ1VTVE9NRVJcIikpKXtcbiAgICAgICAgICAgICAgICAgICAgLy9nZXQgXCJUT1RBTF9BTU9VTlRfQ1VTVE9NRVJcIiBmb3IgdGhhdCBjb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiQXBwbGllZFRvIHZlcmlmaWNhdG8gPT4gXCIgKyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdEN1c3QnXS50b1N0cmluZygpKVxuICAgICAgICAgICAgICAgICAgICBkZWYgdG90Q3VzdG9tZXIgXG4gICAgICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQudG90Q3VzdCddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgICAgICAgICAgXHR0b3RDdXN0b21lciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQudG90Q3VzdCddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmKCF0b3RDdXN0b21lciB8fCB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMC4wXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzPXRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXIuYWRkKG1hdE51bWJlclZhbHVlLnRvU3RyaW5nKCkgKyAoIXNlcmlhbE51bWJlci50b1N0cmluZygpLmVxdWFscyhcIltdXCIpID8gXCIgKFwiICsgc2VyaWFsTnVtYmVyVmFsdWUudG9TdHJpbmcoKSArIFwiKVwiIDogXCIgKClcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIiB3YXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyOiBcIisgd2FybmluZ0VtcHR5UXVvdGVNYXRDdXN0b21lclxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSAgICBcbiAgICAgICAgfSAgXG5cbiAgICAgICAgLy9PUEFBX1VOQVRBTlRVTV9SQVRFU1xuICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHVuYVRhbnR1bVJhdGVzKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodW5hVGFudHVtUmF0ZXMpICE9IFwiXCIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodW5hVGFudHVtUmF0ZXMpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKXtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlVuYSB0YW50dW0gcmF0ZXM6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcylcbiAgICAgICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qL1xuICAgICAgICAgICAgLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzXG4gICAgICAgICAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7ICBcbiAgICAgICAgICAgIENsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbiAgICAgICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4gICAgICAgICAgICBkZWYgdW1SYXRlc0xpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHVuYVRhbnR1bVJhdGVzKVxuXG4gICAgICAgICAgICBmb3IodW0gaW4gdW1SYXRlc0xpc3Qpe1xuICAgICAgICAgICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdFxuICAgICAgICAgICAgICAgIGRlZiB1bVJhdGU9dW0udG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVLZXkgPSB1bVJhdGUuc3Vic3RyaW5nKHVtUmF0ZS5pbmRleE9mKCcoJykrMSx1bVJhdGUuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4odW1SYXRlS2V5KVxuICAgICAgICAgICAgICAgIC8vZ2V0IFwiQVBQTElFRF9UT1wiIGZvciB0aGF0IHJhdGVcbiAgICAgICAgICAgICAgICBkZWYgdW1BcHBsaWVkVG8gPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIGRlZiB1bUFwcGxpZWRUb1ZhbHVlID0gdW1BcHBsaWVkVG8uc3Vic3RyaW5nKHVtQXBwbGllZFRvLmluZGV4T2YoJygnKSsxLHVtQXBwbGllZFRvLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvL2dldCBcIkRFTEVURURcIiBmb3IgdGhhdCByYXRlXG4gICAgICAgICAgICAgICAgZGVmIGRlbGV0ZWRcbiAgICAgICAgICAgICAgICBkZWYgZGVsZXRlZFZhbHVlXG4gICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHVtUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuZGVsZXRlZCddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlZCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJkZWxldGVkOiBcIiArIGRlbGV0ZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlbGV0ZWQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlZFZhbHVlID0gZGVsZXRlZC5zdWJzdHJpbmcoZGVsZXRlZC5pbmRleE9mKCcoJykrMSxkZWxldGVkLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVSZWZcbiAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5yYXRlUmVmJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgICAgICB1bVJhdGVSZWY9b2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHVtUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQucmF0ZVJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZGVmIHVtUmF0ZVJlZktleVxuICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVSZWZWYWx1ZVxuICAgICAgICAgICAgICAgIGlmKHVtUmF0ZVJlZil7XG4gICAgICAgICAgICAgICAgICAgIHVtUmF0ZVJlZiA9IHVtUmF0ZVJlZi50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIHVtUmF0ZVJlZktleSA9IHVtUmF0ZVJlZi5zdWJzdHJpbmcodW1SYXRlUmVmLmluZGV4T2YoJygnKSsxLHVtUmF0ZVJlZi5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVSZWZPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oREJPYmplY3RzICsgdW1SYXRlUmVmS2V5KVxuICAgICAgICAgICAgICAgICAgICB1bVJhdGVSZWZWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGVSZWZPYmplY3QuZ2V0SWQoKSwgXCJOYW1lXCIpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIHVtUmF0ZVJlZlZhbHVlID0gdW1SYXRlUmVmVmFsdWUuc3Vic3RyaW5nKHVtUmF0ZVJlZlZhbHVlLmluZGV4T2YoJygnKSsxLHVtUmF0ZVJlZlZhbHVlLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZigodW1BcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscyhcIkJPVEhcIikgfHwgdW1BcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscyhcIkNVU1RPTUVSXCIpKSAmJiAhZGVsZXRlZFZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKFwidHJ1ZVwiKSl7XG4gICAgICAgICAgICAgICAgICAgIC8vZ2V0IFwiVE9UQUxfQU1PVU5UX0NVU1RPTUVSXCIgZm9yIHRoYXQgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgIGRlZiB0b3RDdXN0b21lciBcbiAgICAgICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHVtUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdG9tZXInXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RDdXN0b21lcj1vYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC50b3RDdXN0b21lciddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmKCF0b3RDdXN0b21lciB8fCB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMC4wXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzPXRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyLmFkZCh1bVJhdGVSZWZWYWx1ZS50b1N0cmluZygpKVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIgd2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXI6IFwiICsgd2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gICAgXG4gICAgICAgIH1cblxuICAgICAgICAvL09QQUFfTEFCT1VSX1JBVEVTXG4gICAgICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpIT1udWxsICYmIChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcykgIT0gXCJcIiAmJiAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcykudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpe1xuICAgICAgICAgICAgbG9nLmRlYnVnIFwiTGFib3VyIHJhdGVzOiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpXG4gICAgICAgICAgICAvKkNpY2xhcmUgdHV0dGkgZ2xpIG9nZ2V0dGkgYXNzb2NpYXRpIGFsIGNhbXBvKi9cbiAgICAgICAgICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50c1xuICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyAgXG4gICAgICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTtcbiAgICAgICAgICAgIGRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XG4gICAgICAgICAgICBkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcblxuICAgICAgICAgICAgZGVmIGxhYm91clJhdGVzTGlzdCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpXG5cbiAgICAgICAgICAgIGZvcihsYiBpbiBsYWJvdXJSYXRlc0xpc3Qpe1xuICAgICAgICAgICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdFxuICAgICAgICAgICAgICAgIGRlZiBsYlJhdGU9bGIudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIGRlZiBsYlJhdGVLZXkgPSBsYlJhdGUuc3Vic3RyaW5nKGxiUmF0ZS5sYXN0SW5kZXhPZignKCcpKzEsbGJSYXRlLmxhc3RJbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgZGVmIGxiUmF0ZU9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihsYlJhdGVLZXkpXG4gICAgICAgICAgICAgICAgLy9nZXQgXCJBUFBMSUVEX1RPXCIgZm9yIHRoYXQgcmF0ZVxuICAgICAgICAgICAgICAgIGRlZiBsYkFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgZGVmIGxiQXBwbGllZFRvVmFsdWUgPSBsYkFwcGxpZWRUby5zdWJzdHJpbmcobGJBcHBsaWVkVG8ubGFzdEluZGV4T2YoJygnKSsxLGxiQXBwbGllZFRvLmxhc3RJbmRleE9mKCcpJykpXG5cbiAgICAgICAgICAgICAgICAvL2dldCBcIkRFTEVURURcIiBmb3IgdGhhdCByYXRlXG4gICAgICAgICAgICAgICAgZGVmIGRlbGV0ZWRcbiAgICAgICAgICAgICAgICBkZWYgZGVsZXRlZFZhbHVlXG4gICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuZGVsZXRlZCddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlZCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJkZWxldGVkOiBcIiArIGRlbGV0ZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlbGV0ZWQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlZFZhbHVlID0gZGVsZXRlZC5zdWJzdHJpbmcoZGVsZXRlZC5sYXN0SW5kZXhPZignKCcpKzEsZGVsZXRlZC5sYXN0SW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGRlZiBsYlJhdGVSZWYgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5yYXRlUmVmJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcblxuICAgICAgICAgICAgICAgIGRlZiB0ZWNoUmVmXG4gICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQudGVjaG5pY2lhblJlZiddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgICAgICAgICAgdGVjaFJlZj1vYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC50ZWNobmljaWFuUmVmJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBkZWYgbGJSYXRlUmVmS2V5XG4gICAgICAgICAgICAgICAgZGVmIGxiUmF0ZVJlZlZhbHVlXG4gICAgICAgICAgICAgICAgaWYobGJSYXRlUmVmLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICBsYlJhdGVSZWYgPSBsYlJhdGVSZWYudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICBsYlJhdGVSZWZLZXkgPSBsYlJhdGVSZWYuc3Vic3RyaW5nKGxiUmF0ZVJlZi5sYXN0SW5kZXhPZignKCcpKzEsbGJSYXRlUmVmLmxhc3RJbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgICAgIGRlZiBsYlJhdGVSZWZPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oREJPYmplY3RzICsgbGJSYXRlUmVmS2V5KVxuICAgICAgICAgICAgICAgICAgICBsYlJhdGVSZWZWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVSZWZPYmplY3QuZ2V0SWQoKSwgXCJOYW1lXCIpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIGxiUmF0ZVJlZlZhbHVlID0gbGJSYXRlUmVmVmFsdWUuc3Vic3RyaW5nKGxiUmF0ZVJlZlZhbHVlLmxhc3RJbmRleE9mKCcoJykrMSxsYlJhdGVSZWZWYWx1ZS5sYXN0SW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGRlZiB0ZWNoUmVmS2V5XG4gICAgICAgICAgICAgICAgZGVmIHRlY2hSZWZWYWx1ZVxuICAgICAgICAgICAgICAgIGlmKHRlY2hSZWYpe1xuICAgICAgICAgICAgICAgICAgICB0ZWNoUmVmID0gdGVjaFJlZi50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRlY2hSZWY6IFwiICsgdGVjaFJlZlxuICAgICAgICAgICAgICAgICAgICB0ZWNoUmVmS2V5ID0gdGVjaFJlZi5zdWJzdHJpbmcodGVjaFJlZi5sYXN0SW5kZXhPZignKCcpKzEsdGVjaFJlZi5sYXN0SW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgICAgICBkZWYgdGVjaFJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihPUEFBICsgdGVjaFJlZktleSlcbiAgICAgICAgICAgICAgICAgICAgdGVjaFJlZlZhbHVlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai50ZWNobmljaWFuLm5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICB0ZWNoUmVmVmFsdWUgPSBsYlJhdGVSZWZWYWx1ZS5zdWJzdHJpbmcodGVjaFJlZlZhbHVlLmxhc3RJbmRleE9mKCcoJykrMSx0ZWNoUmVmVmFsdWUubGFzdEluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuXHRcdFx0XHRsb2cuZGVidWcgbGJBcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgaWYoKGxiQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoXCJCT1RIXCIpIHx8IGxiQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoXCJDVVNUT01FUlwiKSkgJiYgIWRlbGV0ZWRWYWx1ZS50b1N0cmluZygpLmVxdWFscyhcInRydWVcIikpe1xuICAgICAgICAgICAgICAgICAgICAvL2dldCBcIlRPVEFMX0FNT1VOVF9DVVNUT01FUlwiIGZvciB0aGF0IGNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICBkZWYgdG90Q3VzdG9tZXIgXG4gICAgICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnRvdEN1c3RvbWVyJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdG90Q3VzdG9tZXIgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC50b3RDdXN0b21lciddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidG90Q3VzdG9tZXI6IFwiICsgdG90Q3VzdG9tZXJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZighdG90Q3VzdG9tZXIgfHwgdG90Q3VzdG9tZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscyhcIjAuMFwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lci5hZGQobGJSYXRlUmVmVmFsdWUudG9TdHJpbmcoKSArIFwiIChcIiArIHRlY2hSZWZWYWx1ZS50b1N0cmluZygpICsgXCIpXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIiB3YXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lcjogXCIgKyB3YXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lclxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSAgICBcbiAgICAgICAgfVxuXG4gICAgICAgIC8vT1BBQV9UUkFWRUxfUkFURVNcbiAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmF2ZWxSYXRlcykhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYXZlbFJhdGVzKSAhPSBcIlwiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYXZlbFJhdGVzKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSl7XG4gICAgICAgICAgICBsb2cuZGVidWcgXCJUcmF2ZWwgcmF0ZXM6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmF2ZWxSYXRlcylcbiAgICAgICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qL1xuICAgICAgICAgICAgLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzXG4gICAgICAgICAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7ICBcbiAgICAgICAgICAgIENsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbiAgICAgICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4gICAgICAgICAgICBkZWYgdHJhdmVsUmF0ZXNMaXN0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmF2ZWxSYXRlcylcblxuICAgICAgICAgICAgZm9yKHRyIGluIHRyYXZlbFJhdGVzTGlzdCl7XG4gICAgICAgICAgICAgICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0XG4gICAgICAgICAgICAgICAgZGVmIHRyUmF0ZT10ci50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgZGVmIHRyUmF0ZUtleSA9IHRyUmF0ZS5zdWJzdHJpbmcodHJSYXRlLmluZGV4T2YoJygnKSsxLHRyUmF0ZS5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgZGVmIHRyUmF0ZU9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbih0clJhdGVLZXkpXG4gICAgICAgICAgICAgICAgLy9nZXQgXCJBUFBMSUVEX1RPXCIgZm9yIHRoYXQgcmF0ZVxuICAgICAgICAgICAgICAgIGRlZiB0ckFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgZGVmIHRyQXBwbGllZFRvVmFsdWUgPSB0ckFwcGxpZWRUby5zdWJzdHJpbmcodHJBcHBsaWVkVG8uaW5kZXhPZignKCcpKzEsdHJBcHBsaWVkVG8uaW5kZXhPZignKScpKVxuXG4gICAgICAgICAgICAgICAgLy9nZXQgXCJERUxFVEVEXCIgZm9yIHRoYXQgcmF0ZVxuICAgICAgICAgICAgICAgIGRlZiBkZWxldGVkXG4gICAgICAgICAgICAgICAgZGVmIGRlbGV0ZWRWYWx1ZVxuICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZWQgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odHJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiZGVsZXRlZDogXCIgKyBkZWxldGVkXG4gICAgICAgICAgICAgICAgICAgIGlmIChkZWxldGVkKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZWRWYWx1ZSA9IGRlbGV0ZWQuc3Vic3RyaW5nKGRlbGV0ZWQuaW5kZXhPZignKCcpKzEsZGVsZXRlZC5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZGVmIHRyUmF0ZVJlZiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuXG4gICAgICAgICAgICAgICAgZGVmIHRyUmF0ZVJlZktleVxuICAgICAgICAgICAgICAgIGRlZiB0clJhdGVSZWZWYWx1ZVxuICAgICAgICAgICAgICAgIGlmKHRyUmF0ZVJlZi5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgdHJSYXRlUmVmID0gdHJSYXRlUmVmLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgdHJSYXRlUmVmS2V5ID0gdHJSYXRlUmVmLnN1YnN0cmluZyh0clJhdGVSZWYuaW5kZXhPZignKCcpKzEsdHJSYXRlUmVmLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICAgICAgZGVmIHRyUmF0ZVJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihEQk9iamVjdHMgKyB0clJhdGVSZWZLZXkpXG4gICAgICAgICAgICAgICAgICAgIHRyUmF0ZVJlZlZhbHVlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZVJlZk9iamVjdC5nZXRJZCgpLCBcIk5hbWVcIikuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgdHJSYXRlUmVmVmFsdWUgPSB0clJhdGVSZWZWYWx1ZS5zdWJzdHJpbmcodHJSYXRlUmVmVmFsdWUuaW5kZXhPZignKCcpKzEsdHJSYXRlUmVmVmFsdWUuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKCh0ckFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKFwiQk9USFwiKSB8fCB0ckFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKFwiQ1VTVE9NRVJcIikpICYmICFkZWxldGVkVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoXCJ0cnVlXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgLy9nZXQgXCJUT1RBTF9BTU9VTlRfQ1VTVE9NRVJcIiBmb3IgdGhhdCBjb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgZGVmIHRvdEN1c3RvbWVyXG4gICAgICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnRvdEN1c3RvbWVyJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdG90Q3VzdG9tZXI9b2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdG9tZXInXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZighdG90Q3VzdG9tZXIgfHwgdG90Q3VzdG9tZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscyhcIjAuMFwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lci5hZGQodHJSYXRlUmVmVmFsdWUudG9TdHJpbmcoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArIFwiIHdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyOiBcIiArIHdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ICAgIFxuICAgICAgICB9XG5cbiAgICB9XG4gICAgXG4gICAgLypWZXJpZmljbyBsYSBwcmVzZW56YSBkaSBlcnJvcmkgZSB3YXJuaW5nIHN1bGxhIGlzc3VlIGNvcnJlbnRlIGUsIHNlIHByZXNlbnRpLCBsaSBhZ2dpdW5nbyBhZ2xpIGFycmF5IGRlZ2xpIGVycm9yaSBlIHdhcm5pbmcgZGVsbGUgaXNzdWUgbGlua2F0ZSovXG4gICAgaWYod2FybmluZ0VtcHR5UXVvdGVNYXRDdXN0b21lci5zaXplKCk+MCl7XG4gICAgICAgIGRlZiBvYmpMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIG9iakxpc3QuYWRkKGlzc3VlKVxuICAgICAgICBvYmpMaXN0LmFkZCh3YXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyKVxuICAgICAgICB3YXJuaW5nc01hdExpbmtlZElzc3Vlcy5hZGQob2JqTGlzdClcbiAgICB9XG4gICAgXG4gICAgaWYod2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIuc2l6ZSgpPjApe1xuICAgICAgICBkZWYgb2JqTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICBvYmpMaXN0LmFkZChpc3N1ZSlcbiAgICAgICAgb2JqTGlzdC5hZGQod2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIpXG4gICAgICAgIHdhcm5pbmdzUmF0ZUxpbmtlZElzc3Vlcy5hZGQob2JqTGlzdClcbiAgICB9XG4gICAgXG4gICAgLy9pZihlcnJvcnMuLi4pXG4gICAgXG59XG5cbmxvZy5kZWJ1ZyBcIndhcm5pbmdzTWF0TGlua2VkSXNzdWVzOiBcIiArIHdhcm5pbmdzTWF0TGlua2VkSXNzdWVzXG5sb2cuZGVidWcgXCJ3YXJuaW5nc1JhdGVMaW5rZWRJc3N1ZXM6IFwiICsgd2FybmluZ3NSYXRlTGlua2VkSXNzdWVzXG5cbmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcblxuaWYgKCFlcnJvcnMgJiYgIXdhcm5pbmdzKXtcblx0cmV0dXJuIHRydWVcbn1lbHNle1xuXHRpZighZXJyb3JzICYmIHdhcm5pbmdzKXtcblx0XHQvL1NlIGNpIHNvbm8gc29sbyB3YXJuaW5ncyB2ZXJpZmljbyBzZSBsJ3V0ZW50ZSBoYSBnaVx1MDBlMCBkaWNoaWFyYXRvIGRpIHZvbGVyIHByb3NlZ3VpcmUgY29tdW5xdWVcblx0XHQvLyAtIHRyYW5zaXRpb24gZmllbGQgXCJPUEFBX0NIRUNLX0FORF9DT05GSVJNXCI9XCJZZXNcIlxuXHRcdC8vIC0gaW4gY2FzbyBjb250cmFyaW8gaW52aW8gaSB3YXJuaW5nIGEgRkVcblxuXHRcdGxvZy5kZWJ1ZyBcInRyYW5zaXRpb25DaGVjazogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaylcblx0XHQvL2xvZy5kZWJ1ZyBcInJlc3VsdDogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIilcblx0XHRpZih0cmFuc2l0aW9uQ2hlY2tWYWx1ZS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKSl7XG5cdFx0XHRsb2cuZGVidWcgXCJyZXR1cm4gdHJ1ZSAtIHRyYW5zaXRpb25DaGVjayA9IFllc1wiXG5cdFx0XHRyZXR1cm4gdHJ1ZVxuXHRcdH1lbHNle1xuXHRcdFx0ZGVmIHdMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG5cblx0XHRcdGlmKGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIuc2l6ZSgpID4gMCl7XG5cdFx0XHRcdGRlZiB3TGlzdENvbmZpcm1FbXB0eVJhdGUgPSBuZXcgQXJyYXlMaXN0KClcblx0XHRcdFx0d0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZChcIldcIilcblx0XHRcdFx0d0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZChcIkNVU1RPTUVSX0NPTkZJUk1fRU1QVFlfUkFURVNcIilcblx0XHRcdFx0d0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZChudWxsKVxuXHRcdFx0XHR3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIpXG5cblx0XHRcdFx0d0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5UmF0ZSlcblx0XHRcdH1cblxuXHRcdFx0aWYoaXNzdWVXYXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyLnNpemUoKSA+IDApe1xuXHRcdFx0XHRkZWYgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZSA9IG5ldyBBcnJheUxpc3QoKVxuXHRcdFx0XHR3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChcIldcIilcblx0XHRcdFx0d0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoXCJDVVNUT01FUl9DT05GSVJNX0VNUFRZX01BVF9RVU9URVwiKVxuXHRcdFx0XHR3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChudWxsKVxuXHRcdFx0XHR3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXIpXG5cblx0XHRcdFx0d0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUpXG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGlmKHdhcm5pbmdzTWF0TGlua2VkSXNzdWVzLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgIGZvcihvYmogaW4gd2FybmluZ3NNYXRMaW5rZWRJc3N1ZXMpe1xuICAgICAgICAgICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZSA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChcIldcIilcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoXCJDVVNUT01FUl9DT05GSVJNX0VNUFRZX01BVF9RVU9URVwiKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChvYmpbMF0pXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKG9ialsxXSlcblxuICAgICAgICAgICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKHdhcm5pbmdzUmF0ZUxpbmtlZElzc3Vlcy5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICBmb3Iob2JqIGluIHdhcm5pbmdzUmF0ZUxpbmtlZElzc3Vlcyl7XG4gICAgICAgICAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1FbXB0eVJhdGUgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZChcIldcIilcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZChcIkNVU1RPTUVSX0NPTkZJUk1fRU1QVFlfUkFURVNcIilcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZChvYmpbMF0pXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQob2JqWzFdKVxuXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eVJhdGUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG5cdFx0XHRvdXRwdXQuYWRkKHdMaXN0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiV1wiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG5cdFx0XHQvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJXXCIsIG91dHB1dC50b1N0cmluZygpKSAgIFxuXHRcdH1cblxuXHR9XG5cdGlmKGVycm9ycyAmJiAhd2FybmluZ3Mpe1xuXHRcdGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuXG5cdFx0b3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG5cdFx0Ly90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKFwiRVwiLCBvdXRwdXQudG9TdHJpbmcoKSkgICBcblx0fVxuXHRpZihlcnJvcnMgJiYgd2FybmluZ3Mpe1xuXHRcdGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuXHRcdGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuXG5cdFx0aWYoaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lci5zaXplKCkgPiAwKXtcblx0XHRcdGRlZiB3TGlzdENvbmZpcm1FbXB0eVJhdGUgPSBuZXcgQXJyYXlMaXN0KClcblx0XHRcdHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoXCJXXCIpXG5cdFx0XHR3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKFwiQ1VTVE9NRVJfQ09ORklSTV9FTVBUWV9SQVRFU1wiKVxuXHRcdFx0d0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZChudWxsKVxuXHRcdFx0d0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZChpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyKVxuXG5cdFx0XHR3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHlSYXRlKVxuXHRcdH1cblxuXHRcdGlmKGlzc3VlV2FybmluZ0VtcHR5UXVvdGVNYXRDdXN0b21lci5zaXplKCkgPiAwKXtcblx0XHRcdGRlZiB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlID0gbmV3IEFycmF5TGlzdCgpXG5cdFx0XHR3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChcIldcIilcblx0XHRcdHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKFwiQ1VTVE9NRVJfQ09ORklSTV9FTVBUWV9NQVRfUVVPVEVcIilcblx0XHRcdHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKG51bGwpXG5cdFx0XHR3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXIpXG5cblx0XHRcdHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlKVxuXHRcdH1cblx0XHRcblx0XHRpZih3YXJuaW5nc01hdExpbmtlZElzc3Vlcy5zaXplKCkgPiAwKXtcblx0XHRcdGZvcihvYmogaW4gd2FybmluZ3NNYXRMaW5rZWRJc3N1ZXMpe1xuXHRcdFx0XHRkZWYgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZSA9IG5ldyBBcnJheUxpc3QoKVxuXHRcdFx0XHR3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChcIldcIilcblx0XHRcdFx0d0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoXCJDVVNUT01FUl9DT05GSVJNX0VNUFRZX01BVF9RVU9URVwiKVxuXHRcdFx0XHR3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChvYmpbMF0pXG5cdFx0XHRcdHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKG9ialsxXSlcblxuXHRcdFx0XHR3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZSlcblx0XHRcdH1cblx0XHR9XG5cdFx0XG5cdFx0aWYod2FybmluZ3NSYXRlTGlua2VkSXNzdWVzLnNpemUoKSA+IDApe1xuXHRcdFx0Zm9yKG9iaiBpbiB3YXJuaW5nc1JhdGVMaW5rZWRJc3N1ZXMpe1xuXHRcdFx0XHRkZWYgd0xpc3RDb25maXJtRW1wdHlSYXRlID0gbmV3IEFycmF5TGlzdCgpXG5cdFx0XHRcdHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoXCJXXCIpXG5cdFx0XHRcdHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoXCJDVVNUT01FUl9DT05GSVJNX0VNUFRZX1JBVEVTXCIpXG5cdFx0XHRcdHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQob2JqWzBdKVxuXHRcdFx0XHR3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKG9ialsxXSlcblxuXHRcdFx0XHR3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHlSYXRlKVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdG91dHB1dC5hZGQoZUxpc3QpXG5cdFx0b3V0cHV0LmFkZCh3TGlzdClcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiV0VcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuXHRcdC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIldFXCIsIG91dHB1dC50b1N0cmluZygpKSAgXG5cdH1cbn0iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyCmltcG9ydCBncm9vdnkuanNvbi5Kc29uQnVpbGRlcgppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXIKCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWUKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWUKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGluawoKaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2UKCmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CmRlZiBDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRykKIApJc3N1ZSBpc3N1ZSA9IGlzc3VlCi8vUGVyIHRlc3QgZGEgY29uc29sZQovL0lzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTsKLy9pc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZSgiT1BVVC0xNDA2NSIpCgpkZWYgZXJyb3JzID0gZmFsc2UKZGVmIHdhcm5pbmdzID0gZmFsc2UKZGVmIHJlbGF0ZXNJbklzc3VlTGluaz1mYWxzZQpkZWYgcmVsYXRlc091dElzc3VlTGluaz1mYWxzZQpkZWYgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZUxpbmtlZCA9IG5ldyBBcnJheUxpc3QoKQpkZWYgd0xpc3RDb25maXJtRW1wdHlSYXRlUXVvdGVMaW5rZWQgPSBuZXcgQXJyYXlMaXN0KCkKCmRlZiBsdW1wU3VtUHJpY2UgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmx1bXBTdW1QcmljZSddLnRvU3RyaW5nKCkpWzBdCgovKkNhbXBpIGNvbiBkYXRpIG9iYmxpZ2F0b3JpIHBlciB0aWNrZXQgbm9uIGEgY29ycG8qLwpkZWYgcmVwTWF0ZXJpYWxzID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5yZXBsYWNlZE1hdGVyaWFscyddLnRvU3RyaW5nKCkpWzBdCmRlZiB1bmFUYW50dW1SYXRlcyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YudW5hdGFudHVtUmF0ZXMnXS50b1N0cmluZygpKVswXQpkZWYgbGFib3VyUmF0ZXMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmxhYm91clJhdGVzJ10udG9TdHJpbmcoKSlbMF0KZGVmIHRyYXZlbFJhdGVzID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi50cmF2ZWxSYXRlcyddLnRvU3RyaW5nKCkpWzBdCgovKkNhbXBpIGNvbiBkYXRpIG9iYmxpZ2F0b3JpIHBlciB0aWNrZXQgYSBjb3JwbyovCmRlZiBsdW1wU3VtUmF0ZXMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmx1bXBTdW1SYXRlcyddLnRvU3RyaW5nKCkpWzBdCgovKkNvbmZlcm1hIHV0ZW50ZSBzdSB3YXJuaW5ncyovCmRlZiB0cmFuc2l0aW9uQ2hlY2sgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmNoZWNrQW5kQ29uZmlybSddLnRvU3RyaW5nKCkpWzBdCmRlZiB0cmFuc2l0aW9uQ2hlY2tWYWx1ZSA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKQoKLypJbnNpZ2h0IFNjaGVtYSBJRHMqLwpkZWYgREJPYmplY3RzID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8nXS50b1N0cmluZygpICsgIi0iCmRlZiBPUEFBID0gcHJvcGVydGllc1snaXNjaGVtYS5hYSddLnRvU3RyaW5nKCkgKyAiLSIKCi8qQXJyYXkgd2FybmluZ3MgZWQgZXJyb3JzIHBlciBsYSBpc3N1ZSBwcmluY2lwYWxlLCB1bm8gcGVyIG9nbmkgdGlwb2xvZ2lhIGRpIGVycm9yZSBvIHdhcm5pbmcqLwpkZWYgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyID0gbmV3IEFycmF5TGlzdCgpCmRlZiBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyID0gbmV3IEFycmF5TGlzdCgpCi8vZGVmIGlzc3VlRXJyb3IuLi4KCi8qVmVyaWZpY2EgY2FtcGkgc3UgdGlja2V0IG9nZ2V0dG8gZGVsbGEgdHJhbnNhemlvbmUqLwppZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1QcmljZSkhPW51bGwgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUHJpY2UpLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKSl7CgkvKkNvbnRhYmlsaXp6YXppb25lIGEgY29ycG8qLwoJbG9nLmRlYnVnICJDb250YWJpbGl6emF6aW9uZSBhIGNvcnBvIgoJLy9PUEFBX0xVTVBfU1VNX1JBVEVTCglpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1SYXRlcykhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1SYXRlcykgIT0gIiIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobHVtcFN1bVJhdGVzKS50b1N0cmluZygpLmVxdWFscygiIikpewoJCS8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qLwoJCS8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50cwoJCUNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlIik7ICAKCQlDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CgkJZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTsKCQlkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTsKCgkJZGVmIGxzUmF0ZXNMaXN0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUmF0ZXMpCgoJCWZvcihscyBpbiBsc1JhdGVzTGlzdCl7CgkJCS8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdAoJCQlkZWYgbHNSYXRlPWxzLnRvU3RyaW5nKCkKCQkJZGVmIGxzUmF0ZUtleSA9IGxzUmF0ZS5zdWJzdHJpbmcobHNSYXRlLmluZGV4T2YoJygnKSsxLGxzUmF0ZS5pbmRleE9mKCcpJykpCgkJCWRlZiBsc1JhdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4obHNSYXRlS2V5KQoJCQkvL2dldCAiQVBQTElFRF9UTyIgZm9yIHRoYXQgcmF0ZQoJCQlkZWYgbHNBcHBsaWVkVG8gPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQoJCQlkZWYgbHNBcHBsaWVkVG9WYWx1ZQoJCQlpZiAobHNBcHBsaWVkVG8pewoJCQkJbHNBcHBsaWVkVG9WYWx1ZSA9IGxzQXBwbGllZFRvLnN1YnN0cmluZyhsc0FwcGxpZWRUby5pbmRleE9mKCcoJykrMSxsc0FwcGxpZWRUby5pbmRleE9mKCcpJykpCgkJCX0KICAgICAgICAgICAgLy9nZXQgIkRFTEVURUQiIGZvciB0aGF0IHJhdGUKICAgICAgICAgICAgZGVmIGRlbGV0ZWQKICAgICAgICAgICAgZGVmIGRlbGV0ZWRWYWx1ZQogICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgZGVsZXRlZCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsc1JhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgbG9nLmRlYnVnICJkZWxldGVkOiAiICsgZGVsZXRlZAogICAgICAgICAgICAgICAgaWYgKGRlbGV0ZWQpewogICAgICAgICAgICAgICAgICAgIGRlbGV0ZWRWYWx1ZSA9IGRlbGV0ZWQuc3Vic3RyaW5nKGRlbGV0ZWQuaW5kZXhPZignKCcpKzEsZGVsZXRlZC5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCQkJCgkJCWRlZiBsc1JhdGVSZWYgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5yYXRlUmVmJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKCQkJCgkJCWRlZiBsc1JhdGVSZWZLZXkKCQkJZGVmIGxzUmF0ZVJlZlZhbHVlCgkJCWlmKGxzUmF0ZVJlZi5zaXplKCkgPiAwKXsKCQkJCWxzUmF0ZVJlZiA9IGxzUmF0ZVJlZi50b1N0cmluZygpCgkJCQlsc1JhdGVSZWZLZXkgPSBsc1JhdGVSZWYuc3Vic3RyaW5nKGxzUmF0ZVJlZi5pbmRleE9mKCcoJykrMSxsc1JhdGVSZWYuaW5kZXhPZignKScpKQoJCQkJZGVmIGxzUmF0ZVJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihPUEFBICsgbHNSYXRlUmVmS2V5KQoJCQkJbHNSYXRlUmVmVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoucmF0ZS5OYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKCQkJCWxzUmF0ZVJlZlZhbHVlID0gbHNSYXRlUmVmVmFsdWUuc3Vic3RyaW5nKGxzUmF0ZVJlZlZhbHVlLmluZGV4T2YoJygnKSsxLGxzUmF0ZVJlZlZhbHVlLmluZGV4T2YoJyknKSkKCQkJfQoKCQkJaWYoKGxzQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoIkJPVEgiKSB8fCBsc0FwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJDVVNUT01FUiIpKSAmJiAhZGVsZXRlZFZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJ0cnVlIikpewoJCQkJLy9nZXQgIlRPVEFMX0FNT1VOVF9DVVNUT01FUiIgZm9yIHRoYXQgY29tcG9uZW50CgkJCQlkZWYgdG90Q3VzdG9tZXIgCgkJCQlpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lib2oub25TaXRlUmF0ZVJlcG9ydC50b3RDdXN0b21lciddLnRvU3RyaW5nKCkpKXsKCQkJCQl0b3RDdXN0b21lciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsc1JhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaWJvai5vblNpdGVSYXRlUmVwb3J0LnRvdEN1c3RvbWVyJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpCgkJCQl9CgkJCQlpZighdG90Q3VzdG9tZXIgfHwgdG90Q3VzdG9tZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscygiMC4wIikpewoJCQkJCXdhcm5pbmdzPXRydWUKCQkJCQlpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyLmFkZChsc1JhdGVSZWZWYWx1ZS50b1N0cmluZygpKQoJCQkJCWxvZy5kZWJ1ZyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArICIgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lcjogIiArIGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIKCQkJCX0KCQkJfQoJCSB9ICAgIAoJfQoKfWVsc2V7CgkvKkNvbnRhYmlsaXp6YXppb25lIG5vbiBhIGNvcnBvKi8KCWxvZy5kZWJ1ZyAiQ29udGFiaWxpenphemlvbmUgTk9OIGEgY29ycG8iCgoJLy9PUEFBX1JFUExBQ0VEX01BVEVSSUFMUwoJaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpIT1udWxsICYmIChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpICE9ICIiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKCQkvL2xvZy5kZWJ1ZyAiTWF0ZXJpYWxpOiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpCgkJLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovCgkJLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzCgkJQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGUiKTsgIAoJCUNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUiKTsKCQlkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpOwoJCWRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpOwoKCQlkZWYgcmVwTWF0TGlzdCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKQoKCQlmb3IobWF0IGluIHJlcE1hdExpc3QpewoJCQkvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3QKCQkJZGVmIGNvbXBvbmVudD1tYXQudG9TdHJpbmcoKQoJCQkvL2RlZiBjb21wb25lbnRLZXkgPSBjb21wb25lbnQuc3Vic3RyaW5nKGNvbXBvbmVudC5pbmRleE9mKCcoJykrMSxjb21wb25lbnQuaW5kZXhPZignKScpKQogICAgICAgICAgICBkZWYgY29tcG9uZW50S2V5ID0gY29tcG9uZW50LnN1YnN0cmluZyhjb21wb25lbnQuaW5kZXhPZignKCcrT1BBQSkrMSxjb21wb25lbnQubGVuZ3RoKCktMSkKCQkJZGVmIGNvbXBvbmVudE9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihjb21wb25lbnRLZXkpCgkJCS8vZ2V0ICJBUFBMSUVEX1RPIiBmb3IgdGhhdCBjb21wb25lbnQKCQkJZGVmIGFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuYXBwbGllZFRvJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpIGFzIEFycmF5TGlzdAoJCQlkZWYgYXBwbGllZFRvVmFsdWUKCQkJaWYoYXBwbGllZFRvLnNpemUoKSA+IDApewoJCQkJYXBwbGllZFRvID0gYXBwbGllZFRvLnRvU3RyaW5nKCkKCQkJCWFwcGxpZWRUb1ZhbHVlID0gYXBwbGllZFRvLnN1YnN0cmluZyhhcHBsaWVkVG8uaW5kZXhPZignKCcpKzEsYXBwbGllZFRvLmluZGV4T2YoJyknKSkKCQkJCS8vbG9nLmRlYnVnICJhcHBsaWVkVG9WYWx1ZTogIiArIGFwcGxpZWRUb1ZhbHVlCgkJCX0KICAgICAgICAgICAgLy9nZXQgIkRFTEVURUQiIGZvciB0aGF0IHJhdGUKICAgICAgICAgICAgZGVmIGRlbGV0ZWQKICAgICAgICAgICAgZGVmIGRlbGV0ZWRWYWx1ZQogICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmRlbGV0ZWQnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICBkZWxldGVkID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5kZWxldGVkJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyAiZGVsZXRlZDogIiArIGRlbGV0ZWQKICAgICAgICAgICAgICAgIGlmIChkZWxldGVkKXsKICAgICAgICAgICAgICAgICAgICBkZWxldGVkVmFsdWUgPSBkZWxldGVkLnN1YnN0cmluZyhkZWxldGVkLmluZGV4T2YoJygnKSsxLGRlbGV0ZWQuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgkJCQoJCQlkZWYgbWF0TnVtYmVyCgkJCWRlZiBtYXROdW1iZXJLZXkKCQkJZGVmIG1hdE51bWJlclZhbHVlCgkJCWlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQubWF0ZXJpYWxSZWYnXS50b1N0cmluZygpKSl7CgkJCQltYXROdW1iZXIgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50Lm1hdGVyaWFsUmVmJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpIGFzIEFycmF5TGlzdAoJCQkJaWYobWF0TnVtYmVyLnNpemUoKSA+IDApewoJCQkJCW1hdE51bWJlciA9IG1hdE51bWJlci50b1N0cmluZygpCgkJCQkJbWF0TnVtYmVyS2V5ID0gbWF0TnVtYmVyLnN1YnN0cmluZyhtYXROdW1iZXIuaW5kZXhPZignKCcpKzEsbWF0TnVtYmVyLmluZGV4T2YoJyknKSkKCQkJCQlkZWYgbWF0TnVtYmVyT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKERCT2JqZWN0cyArIG1hdE51bWJlcktleSkKCQkJCQltYXROdW1iZXJWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihtYXROdW1iZXJPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5tYXRlcmlhbC5uYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKCQkJCQltYXROdW1iZXJWYWx1ZSA9IG1hdE51bWJlclZhbHVlLnN1YnN0cmluZyhtYXROdW1iZXJWYWx1ZS5pbmRleE9mKCcoJykrMSxtYXROdW1iZXJWYWx1ZS5pbmRleE9mKCcpJykpCgkJCQl9CgkJCX0KCQkJCgkJCWRlZiBzZXJpYWxOdW1iZXIKCQkJZGVmIHNlcmlhbE51bWJlclZhbHVlCgkJCWlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuc2VyaWFsTnVtYmVyJ10udG9TdHJpbmcoKSkpewoJCQkJc2VyaWFsTnVtYmVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5zZXJpYWxOdW1iZXInXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkgYXMgQXJyYXlMaXN0CgkJCQlpZihzZXJpYWxOdW1iZXIuc2l6ZSgpID4gMCl7CgkJCQkJc2VyaWFsTnVtYmVyID0gc2VyaWFsTnVtYmVyLnRvU3RyaW5nKCkKCQkJCQlzZXJpYWxOdW1iZXJWYWx1ZSA9IHNlcmlhbE51bWJlci5zdWJzdHJpbmcoc2VyaWFsTnVtYmVyLmluZGV4T2YoJygnKSsxLHNlcmlhbE51bWJlci5pbmRleE9mKCcpJykpCgkJCQl9ICAKCQkJfQkJCQkKCgkJCWlmKChhcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscygiQk9USCIpIHx8IGFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJDVVNUT01FUiIpKSAmJiAhZGVsZXRlZFZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJ0cnVlIikpewoJCQkJLy9nZXQgIlRPVEFMX0FNT1VOVF9DVVNUT01FUiIgZm9yIHRoYXQgY29tcG9uZW50CgkJCQlkZWYgdG90Q3VzdG9tZXIgCgkJCQlpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdEN1c3QnXS50b1N0cmluZygpKSl7CgkJCQkJdG90Q3VzdG9tZXIgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdEN1c3QnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkKCQkJCX0KCQkJCWlmKCF0b3RDdXN0b21lciB8fCB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKCIwLjAiKSl7CgkJCQkJd2FybmluZ3M9dHJ1ZQoJCQkJCWlzc3VlV2FybmluZ0VtcHR5UXVvdGVNYXRDdXN0b21lci5hZGQobWF0TnVtYmVyVmFsdWUudG9TdHJpbmcoKSArICghc2VyaWFsTnVtYmVyLnRvU3RyaW5nKCkuZXF1YWxzKCJbXSIpID8gIiAoIiArIHNlcmlhbE51bWJlclZhbHVlLnRvU3RyaW5nKCkgKyAiKSIgOiAiICgpIikpICAgCgkJCQkJbG9nLmRlYnVnIGlzc3VlLmtleS50b1N0cmluZygpICsgIiBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXI6ICIgKyBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXIKCQkJCX0KCQkJfQoJCSB9ICAgIAoJfSAgCgoJLy9PUEFBX1VOQVRBTlRVTV9SQVRFUwoJaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcykhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHVuYVRhbnR1bVJhdGVzKSAhPSAiIiAmJiAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcykudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKCQlsb2cuZGVidWcgIlVuYSB0YW50dW0gcmF0ZXM6ICIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHVuYVRhbnR1bVJhdGVzKQoJCS8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qLwoJCS8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50cwoJCUNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlIik7ICAKCQlDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CgkJZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTsKCQlkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTsKCgkJZGVmIHVtUmF0ZXNMaXN0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcykKCgkJZm9yKHVtIGluIHVtUmF0ZXNMaXN0KXsKCQkJLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0CgkJCWRlZiB1bVJhdGU9dW0udG9TdHJpbmcoKQoJCQlkZWYgdW1SYXRlS2V5ID0gdW1SYXRlLnN1YnN0cmluZyh1bVJhdGUuaW5kZXhPZignKCcpKzEsdW1SYXRlLmluZGV4T2YoJyknKSkKCQkJZGVmIHVtUmF0ZU9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbih1bVJhdGVLZXkpCgkJCS8vZ2V0ICJBUFBMSUVEX1RPIiBmb3IgdGhhdCByYXRlCgkJCWRlZiB1bUFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCgkJCWRlZiB1bUFwcGxpZWRUb1ZhbHVlID0gdW1BcHBsaWVkVG8uc3Vic3RyaW5nKHVtQXBwbGllZFRvLmluZGV4T2YoJygnKSsxLHVtQXBwbGllZFRvLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vZ2V0ICJERUxFVEVEIiBmb3IgdGhhdCByYXRlCgkJCWRlZiBkZWxldGVkCiAgICAgICAgICAgIGRlZiBkZWxldGVkVmFsdWUKICAgICAgICAgICAgaWYgKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICBkZWxldGVkID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHVtUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuZGVsZXRlZCddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgICAgICAgICBsb2cuZGVidWcgImRlbGV0ZWQ6ICIgKyBkZWxldGVkCiAgICAgICAgICAgICAgICBpZiAoZGVsZXRlZCl7CiAgICAgICAgICAgICAgICAgICAgZGVsZXRlZFZhbHVlID0gZGVsZXRlZC5zdWJzdHJpbmcoZGVsZXRlZC5pbmRleE9mKCcoJykrMSxkZWxldGVkLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKCQkJZGVmIHVtUmF0ZVJlZgoJCQlpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5yYXRlUmVmJ10udG9TdHJpbmcoKSkpewoJCQkJdW1SYXRlUmVmPW9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQoJCQl9CgkJCQoJCQlkZWYgdW1SYXRlUmVmS2V5CgkJCWRlZiB1bVJhdGVSZWZWYWx1ZQoJCQlpZih1bVJhdGVSZWYpewoJCQkJdW1SYXRlUmVmID0gdW1SYXRlUmVmLnRvU3RyaW5nKCkKCQkJCXVtUmF0ZVJlZktleSA9IHVtUmF0ZVJlZi5zdWJzdHJpbmcodW1SYXRlUmVmLmluZGV4T2YoJygnKSsxLHVtUmF0ZVJlZi5pbmRleE9mKCcpJykpCgkJCQlkZWYgdW1SYXRlUmVmT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKE9QQUEgKyB1bVJhdGVSZWZLZXkpCgkJCQl1bVJhdGVSZWZWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGVSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5yYXRlLk5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQoJCQkJdW1SYXRlUmVmVmFsdWUgPSB1bVJhdGVSZWZWYWx1ZS5zdWJzdHJpbmcodW1SYXRlUmVmVmFsdWUuaW5kZXhPZignKCcpKzEsdW1SYXRlUmVmVmFsdWUuaW5kZXhPZignKScpKQoJCQl9CgkJCQoJCQlpZigodW1BcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscygiQk9USCIpIHx8IHVtQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoIkNVU1RPTUVSIikpICYmICFkZWxldGVkVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoInRydWUiKSl7CgkJCQkvL2dldCAiVE9UQUxfQU1PVU5UX0NVU1RPTUVSIiBmb3IgdGhhdCBjb21wb25lbnQKCQkJCWRlZiB0b3RDdXN0b21lcgoJCQkJaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHVtUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdG9tZXInXS50b1N0cmluZygpKSl7CgkJCQkJdG90Q3VzdG9tZXI9b2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHVtUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdG9tZXInXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkKCQkJCX0KCQkJCWlmKCF0b3RDdXN0b21lciB8fCB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKCIwLjAiKSl7CgkJCQkJd2FybmluZ3M9dHJ1ZQoJCQkJCWlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIuYWRkKHVtUmF0ZVJlZlZhbHVlLnRvU3RyaW5nKCkpCgkJCQkJbG9nLmRlYnVnIGlzc3VlLmtleS50b1N0cmluZygpICsgIiBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyOiAiICsgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lcgoJCQkJfQoJCQl9CgkJIH0gICAgCgl9CgoJLy9PUEFBX0xBQk9VUl9SQVRFUwoJaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcykhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxhYm91clJhdGVzKSAhPSAiIiAmJiAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcykudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKCQlsb2cuZGVidWcgIkxhYm91ciByYXRlczogIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpCgkJLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovCgkJLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzCgkJQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGUiKTsgIAoJCUNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUiKTsKCQlkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpOwoJCWRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpOwoKCQlkZWYgbGFib3VyUmF0ZXNMaXN0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcykKCgkJZm9yKGxiIGluIGxhYm91clJhdGVzTGlzdCl7CgkJCS8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdAoJCQlkZWYgbGJSYXRlPWxiLnRvU3RyaW5nKCkKCQkJZGVmIGxiUmF0ZUtleSA9IGxiUmF0ZS5zdWJzdHJpbmcobGJSYXRlLmluZGV4T2YoJygnKSsxLGxiUmF0ZS5pbmRleE9mKCcpJykpCgkJCWRlZiBsYlJhdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4obGJSYXRlS2V5KQoJCQkvL2dldCAiQVBQTElFRF9UTyIgZm9yIHRoYXQgcmF0ZQoJCQlkZWYgbGJBcHBsaWVkVG8gPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCgkJCWRlZiBsYkFwcGxpZWRUb1ZhbHVlID0gbGJBcHBsaWVkVG8uc3Vic3RyaW5nKGxiQXBwbGllZFRvLmluZGV4T2YoJygnKSsxLGxiQXBwbGllZFRvLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgLy9nZXQgIkRFTEVURUQiIGZvciB0aGF0IHJhdGUKCQkJZGVmIGRlbGV0ZWQKICAgICAgICAgICAgZGVmIGRlbGV0ZWRWYWx1ZQogICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmRlbGV0ZWQnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICBkZWxldGVkID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5kZWxldGVkJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyAiZGVsZXRlZDogIiArIGRlbGV0ZWQKICAgICAgICAgICAgICAgIGlmIChkZWxldGVkKXsKICAgICAgICAgICAgICAgICAgICBkZWxldGVkVmFsdWUgPSBkZWxldGVkLnN1YnN0cmluZyhkZWxldGVkLmluZGV4T2YoJygnKSsxLGRlbGV0ZWQuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgoJCQlkZWYgbGJSYXRlUmVmCgkJCWlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKSl7CgkJCQlsYlJhdGVSZWY9b2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQucmF0ZVJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCgkJCX0KCQkJCgkJCWRlZiB0ZWNoUmVmCiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaWJvai5vblNpdGVSYXRlUmVwb3J0LnRlY2huaWNpYW5SZWYnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICB0ZWNoUmVmPW9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaWJvai5vblNpdGVSYXRlUmVwb3J0LnRlY2huaWNpYW5SZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICB9CgkJCQogICAgICAgICAgICBkZWYgbGJSYXRlUmVmS2V5CiAgICAgICAgICAgIGRlZiBsYlJhdGVSZWZWYWx1ZQogICAgICAgICAgICBpZihsYlJhdGVSZWYgJiYgbGJSYXRlUmVmLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgbGJSYXRlUmVmID0gbGJSYXRlUmVmLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIGxiUmF0ZVJlZktleSA9IGxiUmF0ZVJlZi5zdWJzdHJpbmcobGJSYXRlUmVmLmluZGV4T2YoJygnKSsxLGxiUmF0ZVJlZi5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICBkZWYgbGJSYXRlUmVmT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKE9QQUEgKyBsYlJhdGVSZWZLZXkpCiAgICAgICAgICAgICAgICBsYlJhdGVSZWZWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5yYXRlLk5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgbGJSYXRlUmVmVmFsdWUgPSBsYlJhdGVSZWZWYWx1ZS5zdWJzdHJpbmcobGJSYXRlUmVmVmFsdWUuaW5kZXhPZignKCcpKzEsbGJSYXRlUmVmVmFsdWUuaW5kZXhPZignKScpKQogICAgICAgICAgICB9CgkJCQoJCQlkZWYgdGVjaFJlZktleQogICAgICAgICAgICBkZWYgdGVjaFJlZlZhbHVlCiAgICAgICAgICAgIGlmKHRlY2hSZWYpewogICAgICAgICAgICAgICAgdGVjaFJlZiA9IHRlY2hSZWYudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgbG9nLmRlYnVnICJ0ZWNoUmVmOiAiICsgdGVjaFJlZgogICAgICAgICAgICAgICAgdGVjaFJlZktleSA9IHRlY2hSZWYuc3Vic3RyaW5nKHRlY2hSZWYuaW5kZXhPZignKCcpKzEsdGVjaFJlZi5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICBkZWYgdGVjaFJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihPUEFBICsgdGVjaFJlZktleSkKICAgICAgICAgICAgICAgIHRlY2hSZWZWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoudGVjaG5pY2lhbi5uYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIGlmKHRlY2hSZWZWYWx1ZSl7CiAgICAgICAgICAgICAgICAgICAgdGVjaFJlZlZhbHVlID0gdGVjaFJlZlZhbHVlLnN1YnN0cmluZyh0ZWNoUmVmVmFsdWUuaW5kZXhPZignKCcpKzEsdGVjaFJlZlZhbHVlLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoJCQkKCQkJaWYoKGxiQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoIkJPVEgiKSB8fCBsYkFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJDVVNUT01FUiIpKSAmJiAhZGVsZXRlZFZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJ0cnVlIikpewoJCQkJLy9nZXQgIlRPVEFMX0FNT1VOVF9DVVNUT01FUiIgZm9yIHRoYXQgY29tcG9uZW50CgkJCQlkZWYgdG90Q3VzdG9tZXIKCQkJCWlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaWJvai5vblNpdGVSYXRlUmVwb3J0LnRvdEN1c3RvbWVyJ10udG9TdHJpbmcoKSkpewoJCQkJCXRvdEN1c3RvbWVyPW9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaWJvai5vblNpdGVSYXRlUmVwb3J0LnRvdEN1c3RvbWVyJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpCgkJCQl9CgkJCQlpZighdG90Q3VzdG9tZXIgfHwgdG90Q3VzdG9tZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscygiMC4wIikpewoJCQkJCXdhcm5pbmdzPXRydWUKCQkJCQlpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyLmFkZChsYlJhdGVSZWZWYWx1ZS50b1N0cmluZygpKQoJCQkJCWxvZy5kZWJ1ZyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArICIgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lcjogIiArIGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIKCQkJCX0KCQkJfQoJCSB9ICAgIAoJfQoKCS8vT1BBQV9UUkFWRUxfUkFURVMKCWlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsUmF0ZXMpIT1udWxsICYmIChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmF2ZWxSYXRlcykgIT0gIiIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsUmF0ZXMpLnRvU3RyaW5nKCkuZXF1YWxzKCIiKSl7CgkJbG9nLmRlYnVnICJUcmF2ZWwgcmF0ZXM6ICIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYXZlbFJhdGVzKQoJCS8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qLwoJCS8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50cwoJCUNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlIik7ICAKCQlDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CgkJZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTsKCQlkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTsKCgkJZGVmIHRyYXZlbFJhdGVzTGlzdCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsUmF0ZXMpCgoJCWZvcih0ciBpbiB0cmF2ZWxSYXRlc0xpc3QpewoJCQkvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3QKCQkJZGVmIHRyUmF0ZT10ci50b1N0cmluZygpCgkJCWRlZiB0clJhdGVLZXkgPSB0clJhdGUuc3Vic3RyaW5nKHRyUmF0ZS5pbmRleE9mKCcoJykrMSx0clJhdGUuaW5kZXhPZignKScpKQoJCQlkZWYgdHJSYXRlT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHRyUmF0ZUtleSkKCQkJLy9nZXQgIkFQUExJRURfVE8iIGZvciB0aGF0IHJhdGUKICAgICAgICAgICAgZGVmIHRyQXBwbGllZFRvCiAgICAgICAgICAgIGRlZiB0ckFwcGxpZWRUb1ZhbHVlCiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaWJvai5jb21wb25lbnQuYXBwbGllZFRvJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgdHJBcHBsaWVkVG8gPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odHJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lib2ouY29tcG9uZW50LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgICAgICAgICB0ckFwcGxpZWRUb1ZhbHVlID0gdHJBcHBsaWVkVG8uc3Vic3RyaW5nKHRyQXBwbGllZFRvLmluZGV4T2YoJygnKSsxLHRyQXBwbGllZFRvLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgfQogICAgICAgICAgICAvL2dldCAiREVMRVRFRCIgZm9yIHRoYXQgcmF0ZQoJCQlkZWYgZGVsZXRlZAogICAgICAgICAgICBkZWYgZGVsZXRlZFZhbHVlCiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICBkZWxldGVkID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuZGVsZXRlZCddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgICAgICAgICBsb2cuZGVidWcgImRlbGV0ZWQ6ICIgKyBkZWxldGVkCiAgICAgICAgICAgICAgICBpZiAoZGVsZXRlZCl7CiAgICAgICAgICAgICAgICAgICAgZGVsZXRlZFZhbHVlID0gZGVsZXRlZC5zdWJzdHJpbmcoZGVsZXRlZC5pbmRleE9mKCcoJykrMSxkZWxldGVkLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKCQkJZGVmIHRyUmF0ZVJlZgoJCQlpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odHJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5yYXRlUmVmJ10udG9TdHJpbmcoKSkpewoJCQkJdHJSYXRlUmVmPW9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQoJCQl9CgkJCQoJCQlkZWYgdHJSYXRlUmVmS2V5CgkJCWRlZiB0clJhdGVSZWZWYWx1ZQoJCQlpZih0clJhdGVSZWYgIT0gbnVsbCAmJiB0clJhdGVSZWYuc2l6ZSgpID4gMCl7CgkJCQl0clJhdGVSZWYgPSB0clJhdGVSZWYudG9TdHJpbmcoKQoJCQkJdHJSYXRlUmVmS2V5ID0gdHJSYXRlUmVmLnN1YnN0cmluZyh0clJhdGVSZWYuaW5kZXhPZignKCcpKzEsdHJSYXRlUmVmLmluZGV4T2YoJyknKSkKCQkJCWRlZiB0clJhdGVSZWZPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oT1BBQSArIHRyUmF0ZVJlZktleSkKCQkJCXRyUmF0ZVJlZlZhbHVlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZVJlZk9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLnJhdGUubmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCgkJCQl0clJhdGVSZWZWYWx1ZSA9IHRyUmF0ZVJlZlZhbHVlLnN1YnN0cmluZyh0clJhdGVSZWZWYWx1ZS5pbmRleE9mKCcoJykrMSx0clJhdGVSZWZWYWx1ZS5pbmRleE9mKCcpJykpCgkJCX0KCgkJCWlmKHRyQXBwbGllZFRvVmFsdWUgIT0gbnVsbCAmJiAhZGVsZXRlZFZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJ0cnVlIikgJiYgKHRyQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoIkJPVEgiKSB8fCB0ckFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJDVVNUT01FUiIpKSl7CgkJCQkvL2dldCAiVE9UQUxfQU1PVU5UX0NVU1RPTUVSIiBmb3IgdGhhdCBjb21wb25lbnQKCQkJCWRlZiB0b3RDdXN0b21lcgoJCQkJaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdG9tZXInXS50b1N0cmluZygpKSl7CgkJCQkJdG90Q3VzdG9tZXI9b2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdG9tZXInXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkKCQkJCX0KCQkJCWlmKCF0b3RDdXN0b21lciB8fCB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKCIwLjAiKSl7CgkJCQkJd2FybmluZ3M9dHJ1ZQoJCQkJCWlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIuYWRkKHRyUmF0ZVJlZlZhbHVlLnRvU3RyaW5nKCkpCgkJCQkJbG9nLmRlYnVnIGlzc3VlLmtleS50b1N0cmluZygpICsgIiBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyOiAiICsgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lcgoJCQkJfQoJCQl9CgkJIH0gICAgCgl9Cgp9CgpkZWYgbGlua2VkVGlja2V0cz1uZXcgQXJyYXlMaXN0KCkKCi8qT1AtMTAzODogdmVyaWZpY2EgdGlja2V0IGNvbGxlZ2F0aSAtICBlIHN1IGNpYXNjdW5vIHZlcmlmaWNhIGNhbXBpIG9iYmxpZ2F0b3JpKi8KTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpCmZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbEluSXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHsKICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7CgogICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpewogICAgICAgIHJlbGF0ZXNJbklzc3VlTGluaz10cnVlCiAgICAgICAgbGlua2VkVGlja2V0cy5hZGQoaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpKQogICAgICAgIGxvZy5kZWJ1ZyAiSXNzdWUgY29uIHJlbGF0ZXNJbklzc3VlTGluayIKICAgIH0KfQpMaXN0PElzc3VlTGluaz4gYWxsT3V0SXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldE91dHdhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKQpmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykgewogICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTsKCiAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7CiAgICAgICAgcmVsYXRlc091dElzc3VlTGluaz10cnVlCiAgICAgICAgbGlua2VkVGlja2V0cy5hZGQoaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkpCiAgICAgICAgbG9nLmRlYnVnICJJc3N1ZSBjb24gcmVsYXRlc091dElzc3VlTGluayIKICAgIH0KfQoKLypBcnJheSB3YXJuaW5ncyBlZCBlcnJvcnMgcGVyIGxlIGlzc3VlIGxpbmthdGUsIHVubyBwZXIgb2duaSB0aXBvbG9naWEgZGkgZXJyb3JlIG8gd2FybmluZyovCmRlZiB3YXJuaW5nc01hdExpbmtlZElzc3VlcyA9IG5ldyBBcnJheUxpc3QoKQpkZWYgd2FybmluZ3NSYXRlTGlua2VkSXNzdWVzID0gbmV3IEFycmF5TGlzdCgpCi8vZGVmIGVycm9yc0xpbmtlZElzc3VlcyA9IG5ldyBBcnJheUxpc3QoKQoKZm9yKGkgaW4gbGlua2VkVGlja2V0cyl7CiAgICBpc3N1ZT1pIGFzIElzc3VlCgogICAgLypBcnJheSB3YXJuaW5ncyBlZCBlcnJvcnMgcGVyIGxhIHNpbmdvbGEgaXNzdWUgbGlua2F0YSwgdW5vIHBlciBvZ25pIHRpcG9sb2dpYSBkaSBlcnJvcmUgbyB3YXJuaW5nKi8KICAgIGRlZiB3YXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lciA9IG5ldyBBcnJheUxpc3QoKQogICAgZGVmIHdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXIgPSBuZXcgQXJyYXlMaXN0KCkgCiAgICAvL2RlZiBlcnJvci4uLgogICAgCiAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1QcmljZSkhPW51bGwgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUHJpY2UpLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKSl7CiAgICAgICAgLypDb250YWJpbGl6emF6aW9uZSBhIGNvcnBvKi8KICAgICAgICBsb2cuZGVidWcgIkNvbnRhYmlsaXp6YXppb25lIGEgY29ycG8iCiAgICAgICAgLy9PUEFBX0xVTVBfU1VNX1JBVEVTCiAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUmF0ZXMpIT1udWxsICYmIChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUmF0ZXMpICE9ICIiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1SYXRlcykudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICAgICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovCiAgICAgICAgICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50cwogICAgICAgICAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZSIpOyAgCiAgICAgICAgICAgIENsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUiKTsKICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTsKICAgICAgICAgICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7CgogICAgICAgICAgICBkZWYgbHNSYXRlc0xpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1SYXRlcykKCiAgICAgICAgICAgIGZvcihscyBpbiBsc1JhdGVzTGlzdCl7CiAgICAgICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3QKICAgICAgICAgICAgICAgIGRlZiBsc1JhdGU9bHMudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgZGVmIGxzUmF0ZUtleSA9IGxzUmF0ZS5zdWJzdHJpbmcobHNSYXRlLmluZGV4T2YoJygnKSsxLGxzUmF0ZS5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICBkZWYgbHNSYXRlT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGxzUmF0ZUtleSkKICAgICAgICAgICAgICAgIC8vZ2V0ICJBUFBMSUVEX1RPIiBmb3IgdGhhdCByYXRlCiAgICAgICAgICAgICAgICBkZWYgbHNBcHBsaWVkVG8gPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgZGVmIGxzQXBwbGllZFRvVmFsdWUKICAgICAgICAgICAgICAgIGlmIChsc0FwcGxpZWRUbyl7CiAgICAgICAgICAgICAgICAgICAgbHNBcHBsaWVkVG9WYWx1ZSA9IGxzQXBwbGllZFRvLnN1YnN0cmluZyhsc0FwcGxpZWRUby5pbmRleE9mKCcoJykrMSxsc0FwcGxpZWRUby5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vZ2V0ICJERUxFVEVEIiBmb3IgdGhhdCByYXRlCiAgICAgICAgICAgICAgICBkZWYgZGVsZXRlZAogICAgICAgICAgICAgICAgZGVmIGRlbGV0ZWRWYWx1ZQogICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxzUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuZGVsZXRlZCddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgICAgICAgICBkZWxldGVkID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxzUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuZGVsZXRlZCddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnICJkZWxldGVkOiAiICsgZGVsZXRlZAogICAgICAgICAgICAgICAgICAgIGlmIChkZWxldGVkKXsKICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlZFZhbHVlID0gZGVsZXRlZC5zdWJzdHJpbmcoZGVsZXRlZC5pbmRleE9mKCcoJykrMSxkZWxldGVkLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZGVmIGxzUmF0ZVJlZiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsc1JhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQoKICAgICAgICAgICAgICAgIGRlZiBsc1JhdGVSZWZLZXkKICAgICAgICAgICAgICAgIGRlZiBsc1JhdGVSZWZWYWx1ZQogICAgICAgICAgICAgICAgaWYobHNSYXRlUmVmLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgICAgIGxzUmF0ZVJlZiA9IGxzUmF0ZVJlZi50b1N0cmluZygpCiAgICAgICAgICAgICAgICAgICAgbHNSYXRlUmVmS2V5ID0gbHNSYXRlUmVmLnN1YnN0cmluZyhsc1JhdGVSZWYuaW5kZXhPZignKCcpKzEsbHNSYXRlUmVmLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgICAgICBkZWYgbHNSYXRlUmVmT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKE9QQUEgKyBsc1JhdGVSZWZLZXkpCiAgICAgICAgICAgICAgICAgICAgbHNSYXRlUmVmVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoucmF0ZS5uYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgICAgICBsc1JhdGVSZWZWYWx1ZSA9IGxzUmF0ZVJlZlZhbHVlLnN1YnN0cmluZyhsc1JhdGVSZWZWYWx1ZS5pbmRleE9mKCcoJykrMSxsc1JhdGVSZWZWYWx1ZS5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYoKGxzQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoIkJPVEgiKSB8fCBsc0FwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJDVVNUT01FUiIpKSAmJiAhZGVsZXRlZFZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJ0cnVlIikpewogICAgICAgICAgICAgICAgICAgIC8vZ2V0ICJUT1RBTF9BTU9VTlRfQ1VTVE9NRVIiIGZvciB0aGF0IGNvbXBvbmVudAogICAgICAgICAgICAgICAgICAgIGRlZiB0b3RDdXN0b21lcgogICAgICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsc1JhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnRvdEN1c3RvbWVyJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgICAgIAl0b3RDdXN0b21lciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsc1JhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnRvdEN1c3RvbWVyJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKCF0b3RDdXN0b21lciB8fCB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKCIwLjAiKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzPXRydWUgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyLmFkZChsc1JhdGVSZWZWYWx1ZS50b1N0cmluZygpKQogICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyAiIHdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyOiAiICsgd2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gICAgCiAgICAgICAgfQoKICAgIH1lbHNlewogICAgICAgIC8qQ29udGFiaWxpenphemlvbmUgbm9uIGEgY29ycG8qLwogICAgICAgIGxvZy5kZWJ1ZyAiQ29udGFiaWxpenphemlvbmUgTk9OIGEgY29ycG8iCgogICAgICAgIC8vT1BBQV9SRVBMQUNFRF9NQVRFUklBTFMKICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykgIT0gIiIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgICAgICBsb2cuZGVidWcgIk1hdGVyaWFsaTogIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKQogICAgICAgICAgICAvKkNpY2xhcmUgdHV0dGkgZ2xpIG9nZ2V0dGkgYXNzb2NpYXRpIGFsIGNhbXBvKi8KICAgICAgICAgICAgLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzCiAgICAgICAgICAgIENsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlIik7ICAKICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSIpOwogICAgICAgICAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpOwogICAgICAgICAgICBkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTsKCiAgICAgICAgICAgIGRlZiByZXBNYXRMaXN0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpCgogICAgICAgICAgICBmb3IobWF0IGluIHJlcE1hdExpc3QpewogICAgICAgICAgICAgICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0CiAgICAgICAgICAgICAgICBkZWYgY29tcG9uZW50PW1hdC50b1N0cmluZygpCiAgICAgICAgICAgICAgICAvL2RlZiBjb21wb25lbnRLZXkgPSBjb21wb25lbnQuc3Vic3RyaW5nKGNvbXBvbmVudC5pbmRleE9mKCcoJykrMSxjb21wb25lbnQuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgZGVmIGNvbXBvbmVudEtleSA9IGNvbXBvbmVudC5zdWJzdHJpbmcoY29tcG9uZW50LmluZGV4T2YoJygnK09QQUEpKzEsY29tcG9uZW50Lmxlbmd0aCgpLTEpCiAgICAgICAgICAgICAgICBkZWYgY29tcG9uZW50T2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGNvbXBvbmVudEtleSkKICAgICAgICAgICAgICAgIC8vZ2V0ICJBUFBMSUVEX1RPIiBmb3IgdGhhdCBjb21wb25lbnQKICAgICAgICAgICAgICAgIGRlZiBhcHBsaWVkVG8KICAgICAgICAgICAgICAgIGRlZiBhcHBsaWVkVG9WYWx1ZQogICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hcHBsaWVkVG8nXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICAgICAgYXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkgYXMgQXJyYXlMaXN0CiAgICAgICAgICAgICAgICAgICAgaWYoYXBwbGllZFRvLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgICAgICAgICBhcHBsaWVkVG8gPSBhcHBsaWVkVG8udG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgICAgICBhcHBsaWVkVG9WYWx1ZSA9IGFwcGxpZWRUby5zdWJzdHJpbmcoYXBwbGllZFRvLmluZGV4T2YoJygnKSsxLGFwcGxpZWRUby5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyAiYXBwbGllZFRvVmFsdWU6ICIgKyBhcHBsaWVkVG9WYWx1ZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vZ2V0ICJERUxFVEVEIiBmb3IgdGhhdCByYXRlCiAgICAgICAgICAgICAgICBkZWYgZGVsZXRlZAogICAgICAgICAgICAgICAgZGVmIGRlbGV0ZWRWYWx1ZQogICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5kZWxldGVkJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgICAgIGRlbGV0ZWQgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmRlbGV0ZWQnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyAiZGVsZXRlZDogIiArIGRlbGV0ZWQKICAgICAgICAgICAgICAgICAgICBpZiAoZGVsZXRlZCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZWRWYWx1ZSA9IGRlbGV0ZWQuc3Vic3RyaW5nKGRlbGV0ZWQuaW5kZXhPZignKCcpKzEsZGVsZXRlZC5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBkZWYgbWF0TnVtYmVyCiAgICAgICAgICAgICAgICBkZWYgbWF0TnVtYmVyS2V5CiAgICAgICAgICAgICAgICBkZWYgbWF0TnVtYmVyVmFsdWUKICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQubWF0ZXJpYWxSZWYnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICAgICAgbWF0TnVtYmVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5tYXRlcmlhbFJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKSBhcyBBcnJheUxpc3QKICAgICAgICAgICAgICAgICAgICBpZihtYXROdW1iZXIuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICAgICAgICAgIG1hdE51bWJlciA9IG1hdE51bWJlci50b1N0cmluZygpCiAgICAgICAgICAgICAgICAgICAgICAgIG1hdE51bWJlcktleSA9IG1hdE51bWJlci5zdWJzdHJpbmcobWF0TnVtYmVyLmluZGV4T2YoJygnKSsxLG1hdE51bWJlci5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBtYXROdW1iZXJPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oREJPYmplY3RzICsgbWF0TnVtYmVyS2V5KQogICAgICAgICAgICAgICAgICAgICAgICBtYXROdW1iZXJWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihtYXROdW1iZXJPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5tYXRlcmlhbC5uYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgICAgICAgICAgbWF0TnVtYmVyVmFsdWUgPSBtYXROdW1iZXJWYWx1ZS5zdWJzdHJpbmcobWF0TnVtYmVyVmFsdWUuaW5kZXhPZignKCcpKzEsbWF0TnVtYmVyVmFsdWUuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBkZWYgc2VyaWFsTnVtYmVyCiAgICAgICAgICAgICAgICBkZWYgc2VyaWFsTnVtYmVyVmFsdWUKICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuc2VyaWFsTnVtYmVyJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgICAgIHNlcmlhbE51bWJlciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuc2VyaWFsTnVtYmVyJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpIGFzIEFycmF5TGlzdAogICAgICAgICAgICAgICAgICAgIGlmKHNlcmlhbE51bWJlci5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWFsTnVtYmVyID0gc2VyaWFsTnVtYmVyLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWFsTnVtYmVyVmFsdWUgPSBzZXJpYWxOdW1iZXIuc3Vic3RyaW5nKHNlcmlhbE51bWJlci5pbmRleE9mKCcoJykrMSxzZXJpYWxOdW1iZXIuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZihhcHBsaWVkVG9WYWx1ZSAmJiAhZGVsZXRlZFZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJ0cnVlIikgJiYgKGFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJCT1RIIikgfHwgYXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoIkNVU1RPTUVSIikpKXsKICAgICAgICAgICAgICAgICAgICAvL2dldCAiVE9UQUxfQU1PVU5UX0NVU1RPTUVSIiBmb3IgdGhhdCBjb21wb25lbnQKICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgIkFwcGxpZWRUbyB2ZXJpZmljYXRvID0+ICIgKyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdEN1c3QnXS50b1N0cmluZygpKQogICAgICAgICAgICAgICAgICAgIGRlZiB0b3RDdXN0b21lciAKICAgICAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdEN1c3QnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICAgICAgCXRvdEN1c3RvbWVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RDdXN0J10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKCF0b3RDdXN0b21lciB8fCB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKCIwLjAiKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzPXRydWUKICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ0VtcHR5UXVvdGVNYXRDdXN0b21lci5hZGQobWF0TnVtYmVyVmFsdWUudG9TdHJpbmcoKSArICghc2VyaWFsTnVtYmVyLnRvU3RyaW5nKCkuZXF1YWxzKCJbXSIpID8gIiAoIiArIHNlcmlhbE51bWJlclZhbHVlLnRvU3RyaW5nKCkgKyAiKSIgOiAiICgpIikpCiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArICIgd2FybmluZ0VtcHR5UXVvdGVNYXRDdXN0b21lcjogIisgd2FybmluZ0VtcHR5UXVvdGVNYXRDdXN0b21lcgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSAgICAKICAgICAgICB9ICAKCiAgICAgICAgLy9PUEFBX1VOQVRBTlRVTV9SQVRFUwogICAgICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodW5hVGFudHVtUmF0ZXMpIT1udWxsICYmIChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcykgIT0gIiIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodW5hVGFudHVtUmF0ZXMpLnRvU3RyaW5nKCkuZXF1YWxzKCIiKSl7CiAgICAgICAgICAgIGxvZy5kZWJ1ZyAiVW5hIHRhbnR1bSByYXRlczogIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodW5hVGFudHVtUmF0ZXMpCiAgICAgICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qLwogICAgICAgICAgICAvL2luc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHMKICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGUiKTsgIAogICAgICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CiAgICAgICAgICAgIGRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7CiAgICAgICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpOwoKICAgICAgICAgICAgZGVmIHVtUmF0ZXNMaXN0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcykKCiAgICAgICAgICAgIGZvcih1bSBpbiB1bVJhdGVzTGlzdCl7CiAgICAgICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3QKICAgICAgICAgICAgICAgIGRlZiB1bVJhdGU9dW0udG9TdHJpbmcoKQogICAgICAgICAgICAgICAgZGVmIHVtUmF0ZUtleSA9IHVtUmF0ZS5zdWJzdHJpbmcodW1SYXRlLmluZGV4T2YoJygnKSsxLHVtUmF0ZS5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICBkZWYgdW1SYXRlT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHVtUmF0ZUtleSkKICAgICAgICAgICAgICAgIC8vZ2V0ICJBUFBMSUVEX1RPIiBmb3IgdGhhdCByYXRlCiAgICAgICAgICAgICAgICBkZWYgdW1BcHBsaWVkVG8gPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgZGVmIHVtQXBwbGllZFRvVmFsdWUgPSB1bUFwcGxpZWRUby5zdWJzdHJpbmcodW1BcHBsaWVkVG8uaW5kZXhPZignKCcpKzEsdW1BcHBsaWVkVG8uaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvL2dldCAiREVMRVRFRCIgZm9yIHRoYXQgcmF0ZQogICAgICAgICAgICAgICAgZGVmIGRlbGV0ZWQKICAgICAgICAgICAgICAgIGRlZiBkZWxldGVkVmFsdWUKICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICAgICAgZGVsZXRlZCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyAiZGVsZXRlZDogIiArIGRlbGV0ZWQKICAgICAgICAgICAgICAgICAgICBpZiAoZGVsZXRlZCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZWRWYWx1ZSA9IGRlbGV0ZWQuc3Vic3RyaW5nKGRlbGV0ZWQuaW5kZXhPZignKCcpKzEsZGVsZXRlZC5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVSZWYKICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICAgICAgdW1SYXRlUmVmPW9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVSZWZLZXkKICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVSZWZWYWx1ZQogICAgICAgICAgICAgICAgaWYodW1SYXRlUmVmKXsKICAgICAgICAgICAgICAgICAgICB1bVJhdGVSZWYgPSB1bVJhdGVSZWYudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgIHVtUmF0ZVJlZktleSA9IHVtUmF0ZVJlZi5zdWJzdHJpbmcodW1SYXRlUmVmLmluZGV4T2YoJygnKSsxLHVtUmF0ZVJlZi5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICAgICAgZGVmIHVtUmF0ZVJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihPUEFBICsgdW1SYXRlUmVmS2V5KQogICAgICAgICAgICAgICAgICAgIHVtUmF0ZVJlZlZhbHVlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHVtUmF0ZVJlZk9iamVjdC5nZXRJZCgpLCAiTmFtZSIpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgICAgICAgICAgICAgdW1SYXRlUmVmVmFsdWUgPSB1bVJhdGVSZWZWYWx1ZS5zdWJzdHJpbmcodW1SYXRlUmVmVmFsdWUuaW5kZXhPZignKCcpKzEsdW1SYXRlUmVmVmFsdWUuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmKCh1bUFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJCT1RIIikgfHwgdW1BcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscygiQ1VTVE9NRVIiKSkgJiYgIWRlbGV0ZWRWYWx1ZS50b1N0cmluZygpLmVxdWFscygidHJ1ZSIpKXsKICAgICAgICAgICAgICAgICAgICAvL2dldCAiVE9UQUxfQU1PVU5UX0NVU1RPTUVSIiBmb3IgdGhhdCBjb21wb25lbnQKICAgICAgICAgICAgICAgICAgICBkZWYgdG90Q3VzdG9tZXIgCiAgICAgICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHVtUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdG9tZXInXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRvdEN1c3RvbWVyPW9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnRvdEN1c3RvbWVyJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKCF0b3RDdXN0b21lciB8fCB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKCIwLjAiKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzPXRydWUKICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIuYWRkKHVtUmF0ZVJlZlZhbHVlLnRvU3RyaW5nKCkpCiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArICIgd2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXI6ICIgKyB3YXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lcgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSAgICAKICAgICAgICB9CgogICAgICAgIC8vT1BBQV9MQUJPVVJfUkFURVMKICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxhYm91clJhdGVzKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpICE9ICIiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxhYm91clJhdGVzKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgICAgICBsb2cuZGVidWcgIkxhYm91ciByYXRlczogIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpCiAgICAgICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qLwogICAgICAgICAgICAvL2luc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHMKICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGUiKTsgIAogICAgICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CiAgICAgICAgICAgIGRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7CiAgICAgICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpOwoKICAgICAgICAgICAgZGVmIGxhYm91clJhdGVzTGlzdCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpCgogICAgICAgICAgICBmb3IobGIgaW4gbGFib3VyUmF0ZXNMaXN0KXsKICAgICAgICAgICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdAogICAgICAgICAgICAgICAgZGVmIGxiUmF0ZT1sYi50b1N0cmluZygpCiAgICAgICAgICAgICAgICBkZWYgbGJSYXRlS2V5ID0gbGJSYXRlLnN1YnN0cmluZyhsYlJhdGUuaW5kZXhPZignKCcpKzEsbGJSYXRlLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIGRlZiBsYlJhdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4obGJSYXRlS2V5KQogICAgICAgICAgICAgICAgLy9nZXQgIkFQUExJRURfVE8iIGZvciB0aGF0IHJhdGUKICAgICAgICAgICAgICAgIGRlZiBsYkFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgICAgICAgICBkZWYgbGJBcHBsaWVkVG9WYWx1ZSA9IGxiQXBwbGllZFRvLnN1YnN0cmluZyhsYkFwcGxpZWRUby5pbmRleE9mKCcoJykrMSxsYkFwcGxpZWRUby5pbmRleE9mKCcpJykpCgogICAgICAgICAgICAgICAgLy9nZXQgIkRFTEVURUQiIGZvciB0aGF0IHJhdGUKICAgICAgICAgICAgICAgIGRlZiBkZWxldGVkCiAgICAgICAgICAgICAgICBkZWYgZGVsZXRlZFZhbHVlCiAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgICAgIGRlbGV0ZWQgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgImRlbGV0ZWQ6ICIgKyBkZWxldGVkCiAgICAgICAgICAgICAgICAgICAgaWYgKGRlbGV0ZWQpewogICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVkVmFsdWUgPSBkZWxldGVkLnN1YnN0cmluZyhkZWxldGVkLmluZGV4T2YoJygnKSsxLGRlbGV0ZWQuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZGVmIGxiUmF0ZVJlZiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQoKICAgICAgICAgICAgICAgIGRlZiB0ZWNoUmVmCiAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC50ZWNobmljaWFuUmVmJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgICAgIHRlY2hSZWY9b2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQudGVjaG5pY2lhblJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZGVmIGxiUmF0ZVJlZktleQogICAgICAgICAgICAgICAgZGVmIGxiUmF0ZVJlZlZhbHVlCiAgICAgICAgICAgICAgICBpZihsYlJhdGVSZWYuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICAgICAgbGJSYXRlUmVmID0gbGJSYXRlUmVmLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgICAgICBsYlJhdGVSZWZLZXkgPSBsYlJhdGVSZWYuc3Vic3RyaW5nKGxiUmF0ZVJlZi5pbmRleE9mKCcoJykrMSxsYlJhdGVSZWYuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgICAgIGRlZiBsYlJhdGVSZWZPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oT1BBQSArIGxiUmF0ZVJlZktleSkKICAgICAgICAgICAgICAgICAgICBsYlJhdGVSZWZWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5yYXRlLm5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgIGxiUmF0ZVJlZlZhbHVlID0gbGJSYXRlUmVmVmFsdWUuc3Vic3RyaW5nKGxiUmF0ZVJlZlZhbHVlLmluZGV4T2YoJygnKSsxLGxiUmF0ZVJlZlZhbHVlLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBkZWYgdGVjaFJlZktleQogICAgICAgICAgICAgICAgZGVmIHRlY2hSZWZWYWx1ZQogICAgICAgICAgICAgICAgaWYodGVjaFJlZil7CiAgICAgICAgICAgICAgICAgICAgdGVjaFJlZiA9IHRlY2hSZWYudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyAidGVjaFJlZjogIiArIHRlY2hSZWYKICAgICAgICAgICAgICAgICAgICB0ZWNoUmVmS2V5ID0gdGVjaFJlZi5zdWJzdHJpbmcodGVjaFJlZi5pbmRleE9mKCcoJykrMSx0ZWNoUmVmLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgICAgICBkZWYgdGVjaFJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihPUEFBICsgdGVjaFJlZktleSkKICAgICAgICAgICAgICAgICAgICB0ZWNoUmVmVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaFJlZk9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2huaWNpYW4ubmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgICAgICAgICAgICAgdGVjaFJlZlZhbHVlID0gbGJSYXRlUmVmVmFsdWUuc3Vic3RyaW5nKHRlY2hSZWZWYWx1ZS5pbmRleE9mKCcoJykrMSx0ZWNoUmVmVmFsdWUuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmKChsYkFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJCT1RIIikgfHwgbGJBcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscygiQ1VTVE9NRVIiKSkgJiYgIWRlbGV0ZWRWYWx1ZS50b1N0cmluZygpLmVxdWFscygidHJ1ZSIpKXsKICAgICAgICAgICAgICAgICAgICAvL2dldCAiVE9UQUxfQU1PVU5UX0NVU1RPTUVSIiBmb3IgdGhhdCBjb21wb25lbnQKICAgICAgICAgICAgICAgICAgICBkZWYgdG90Q3VzdG9tZXIgCiAgICAgICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdG9tZXInXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRvdEN1c3RvbWVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdG9tZXInXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYoIXRvdEN1c3RvbWVyIHx8IHRvdEN1c3RvbWVyWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKS5lcXVhbHMoIjAuMCIpKXsKICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ3M9dHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lci5hZGQobGJSYXRlUmVmVmFsdWUudG9TdHJpbmcoKSArICIgKCIgKyB0ZWNoUmVmVmFsdWUudG9TdHJpbmcoKSArICIpIikKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIGlzc3VlLmtleS50b1N0cmluZygpICsgIiB3YXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lcjogIiArIHdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9ICAgIAogICAgICAgIH0KCiAgICAgICAgLy9PUEFBX1RSQVZFTF9SQVRFUwogICAgICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsUmF0ZXMpIT1udWxsICYmIChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmF2ZWxSYXRlcykgIT0gIiIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsUmF0ZXMpLnRvU3RyaW5nKCkuZXF1YWxzKCIiKSl7CiAgICAgICAgICAgIGxvZy5kZWJ1ZyAiVHJhdmVsIHJhdGVzOiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmF2ZWxSYXRlcykKICAgICAgICAgICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovCiAgICAgICAgICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50cwogICAgICAgICAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZSIpOyAgCiAgICAgICAgICAgIENsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUiKTsKICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTsKICAgICAgICAgICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7CgogICAgICAgICAgICBkZWYgdHJhdmVsUmF0ZXNMaXN0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmF2ZWxSYXRlcykKCiAgICAgICAgICAgIGZvcih0ciBpbiB0cmF2ZWxSYXRlc0xpc3QpewogICAgICAgICAgICAgICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0CiAgICAgICAgICAgICAgICBkZWYgdHJSYXRlPXRyLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIGRlZiB0clJhdGVLZXkgPSB0clJhdGUuc3Vic3RyaW5nKHRyUmF0ZS5pbmRleE9mKCcoJykrMSx0clJhdGUuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgZGVmIHRyUmF0ZU9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbih0clJhdGVLZXkpCiAgICAgICAgICAgICAgICAvL2dldCAiQVBQTElFRF9UTyIgZm9yIHRoYXQgcmF0ZQogICAgICAgICAgICAgICAgZGVmIHRyQXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuYXBwbGllZFRvJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIGRlZiB0ckFwcGxpZWRUb1ZhbHVlID0gdHJBcHBsaWVkVG8uc3Vic3RyaW5nKHRyQXBwbGllZFRvLmluZGV4T2YoJygnKSsxLHRyQXBwbGllZFRvLmluZGV4T2YoJyknKSkKCiAgICAgICAgICAgICAgICAvL2dldCAiREVMRVRFRCIgZm9yIHRoYXQgcmF0ZQogICAgICAgICAgICAgICAgZGVmIGRlbGV0ZWQKICAgICAgICAgICAgICAgIGRlZiBkZWxldGVkVmFsdWUKICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICAgICAgZGVsZXRlZCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyAiZGVsZXRlZDogIiArIGRlbGV0ZWQKICAgICAgICAgICAgICAgICAgICBpZiAoZGVsZXRlZCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZWRWYWx1ZSA9IGRlbGV0ZWQuc3Vic3RyaW5nKGRlbGV0ZWQuaW5kZXhPZignKCcpKzEsZGVsZXRlZC5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBkZWYgdHJSYXRlUmVmID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQucmF0ZVJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCgogICAgICAgICAgICAgICAgZGVmIHRyUmF0ZVJlZktleQogICAgICAgICAgICAgICAgZGVmIHRyUmF0ZVJlZlZhbHVlCiAgICAgICAgICAgICAgICBpZih0clJhdGVSZWYuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICAgICAgdHJSYXRlUmVmID0gdHJSYXRlUmVmLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgICAgICB0clJhdGVSZWZLZXkgPSB0clJhdGVSZWYuc3Vic3RyaW5nKHRyUmF0ZVJlZi5pbmRleE9mKCcoJykrMSx0clJhdGVSZWYuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgICAgIGRlZiB0clJhdGVSZWZPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oT1BBQSArIHRyUmF0ZVJlZktleSkKICAgICAgICAgICAgICAgICAgICB0clJhdGVSZWZWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5yYXRlLm5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgIHRyUmF0ZVJlZlZhbHVlID0gdHJSYXRlUmVmVmFsdWUuc3Vic3RyaW5nKHRyUmF0ZVJlZlZhbHVlLmluZGV4T2YoJygnKSsxLHRyUmF0ZVJlZlZhbHVlLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZigodHJBcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscygiQk9USCIpIHx8IHRyQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoIkNVU1RPTUVSIikpICYmICFkZWxldGVkVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoInRydWUiKSl7CiAgICAgICAgICAgICAgICAgICAgLy9nZXQgIlRPVEFMX0FNT1VOVF9DVVNUT01FUiIgZm9yIHRoYXQgY29tcG9uZW50CiAgICAgICAgICAgICAgICAgICAgZGVmIHRvdEN1c3RvbWVyCiAgICAgICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdG9tZXInXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRvdEN1c3RvbWVyPW9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnRvdEN1c3RvbWVyJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKCF0b3RDdXN0b21lciB8fCB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKCIwLjAiKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzPXRydWUKICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIuYWRkKHRyUmF0ZVJlZlZhbHVlLnRvU3RyaW5nKCkpCiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArICIgd2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXI6ICIgKyB3YXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lcgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSAgICAKICAgICAgICB9CgogICAgfQogICAgCiAgICAvKlZlcmlmaWNvIGxhIHByZXNlbnphIGRpIGVycm9yaSBlIHdhcm5pbmcgc3VsbGEgaXNzdWUgY29ycmVudGUgZSwgc2UgcHJlc2VudGksIGxpIGFnZ2l1bmdvIGFnbGkgYXJyYXkgZGVnbGkgZXJyb3JpIGUgd2FybmluZyBkZWxsZSBpc3N1ZSBsaW5rYXRlKi8KICAgIGlmKHdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXIuc2l6ZSgpPjApewogICAgICAgIGRlZiBvYmpMaXN0ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgb2JqTGlzdC5hZGQoaXNzdWUpCiAgICAgICAgb2JqTGlzdC5hZGQod2FybmluZ0VtcHR5UXVvdGVNYXRDdXN0b21lcikKICAgICAgICB3YXJuaW5nc01hdExpbmtlZElzc3Vlcy5hZGQob2JqTGlzdCkKICAgIH0KICAgIAogICAgaWYod2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIuc2l6ZSgpPjApewogICAgICAgIGRlZiBvYmpMaXN0ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgb2JqTGlzdC5hZGQoaXNzdWUpCiAgICAgICAgb2JqTGlzdC5hZGQod2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIpCiAgICAgICAgd2FybmluZ3NSYXRlTGlua2VkSXNzdWVzLmFkZChvYmpMaXN0KQogICAgfQogICAgCiAgICAvL2lmKGVycm9ycy4uLikKICAgIAp9Cgpsb2cuZGVidWcgIndhcm5pbmdzTWF0TGlua2VkSXNzdWVzOiAiICsgd2FybmluZ3NNYXRMaW5rZWRJc3N1ZXMKbG9nLmRlYnVnICJ3YXJuaW5nc1JhdGVMaW5rZWRJc3N1ZXM6ICIgKyB3YXJuaW5nc1JhdGVMaW5rZWRJc3N1ZXMKCmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KCkKCmlmICghZXJyb3JzICYmICF3YXJuaW5ncyl7CglyZXR1cm4gdHJ1ZQp9ZWxzZXsKCWlmKCFlcnJvcnMgJiYgd2FybmluZ3MpewoJCS8vU2UgY2kgc29ubyBzb2xvIHdhcm5pbmdzIHZlcmlmaWNvIHNlIGwndXRlbnRlIGhhIGdpw6AgZGljaGlhcmF0byBkaSB2b2xlciBwcm9zZWd1aXJlIGNvbXVucXVlCgkJLy8gLSB0cmFuc2l0aW9uIGZpZWxkICJPUEFBX0NIRUNLX0FORF9DT05GSVJNIj0iWWVzIgoJCS8vIC0gaW4gY2FzbyBjb250cmFyaW8gaW52aW8gaSB3YXJuaW5nIGEgRkUKCgkJbG9nLmRlYnVnICJ0cmFuc2l0aW9uQ2hlY2s6ICIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykKCQkvL2xvZy5kZWJ1ZyAicmVzdWx0OiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKQoJCWlmKHRyYW5zaXRpb25DaGVja1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKSl7CgkJCWxvZy5kZWJ1ZyAicmV0dXJuIHRydWUgLSB0cmFuc2l0aW9uQ2hlY2sgPSBZZXMiCgkJCXJldHVybiB0cnVlCgkJfWVsc2V7CgkJCWRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKQoKCQkJaWYoaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lci5zaXplKCkgPiAwKXsKCQkJCWRlZiB3TGlzdENvbmZpcm1FbXB0eVJhdGUgPSBuZXcgQXJyYXlMaXN0KCkKCQkJCXdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoIlciKQoJCQkJd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZCgiQ1VTVE9NRVJfQ09ORklSTV9FTVBUWV9SQVRFUyIpCgkJCQl3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKG51bGwpCgkJCQl3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIpCgoJCQkJd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5UmF0ZSkKCQkJfQoKCQkJaWYoaXNzdWVXYXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyLnNpemUoKSA+IDApewoJCQkJZGVmIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUgPSBuZXcgQXJyYXlMaXN0KCkKCQkJCXdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKCJXIikKCQkJCXdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKCJDVVNUT01FUl9DT05GSVJNX0VNUFRZX01BVF9RVU9URSIpCgkJCQl3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChudWxsKQoJCQkJd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoaXNzdWVXYXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyKQoKCQkJCXdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlKQoJCQl9CgkJCQoJCQlpZih3YXJuaW5nc01hdExpbmtlZElzc3Vlcy5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgIGZvcihvYmogaW4gd2FybmluZ3NNYXRMaW5rZWRJc3N1ZXMpewogICAgICAgICAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoIlciKQogICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKCJDVVNUT01FUl9DT05GSVJNX0VNUFRZX01BVF9RVU9URSIpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQob2JqWzBdKQogICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKG9ialsxXSkKCiAgICAgICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGlmKHdhcm5pbmdzUmF0ZUxpbmtlZElzc3Vlcy5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgIGZvcihvYmogaW4gd2FybmluZ3NSYXRlTGlua2VkSXNzdWVzKXsKICAgICAgICAgICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHlSYXRlID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZCgiVyIpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZCgiQ1VTVE9NRVJfQ09ORklSTV9FTVBUWV9SQVRFUyIpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZChvYmpbMF0pCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZChvYmpbMV0pCgogICAgICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eVJhdGUpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCgkJCW91dHB1dC5hZGQod0xpc3QpCiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3siVyI6IicgKyBvdXRwdXQudG9TdHJpbmcoKSArICcifScpCgkJCS8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiVyIsIG91dHB1dC50b1N0cmluZygpKSAgIAoJCX0KCgl9CglpZihlcnJvcnMgJiYgIXdhcm5pbmdzKXsKCQlkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KCkKCgkJb3V0cHV0LmFkZChlTGlzdCkKICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IkUiOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQoJCS8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiRSIsIG91dHB1dC50b1N0cmluZygpKSAgIAoJfQoJaWYoZXJyb3JzICYmIHdhcm5pbmdzKXsKCQlkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KCkKCQlkZWYgd0xpc3QgPSBuZXcgQXJyYXlMaXN0KCkKCgkJaWYoaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lci5zaXplKCkgPiAwKXsKCQkJZGVmIHdMaXN0Q29uZmlybUVtcHR5UmF0ZSA9IG5ldyBBcnJheUxpc3QoKQoJCQl3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKCJXIikKCQkJd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZCgiQ1VTVE9NRVJfQ09ORklSTV9FTVBUWV9SQVRFUyIpCgkJCXdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQobnVsbCkKCQkJd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZChpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyKQoKCQkJd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5UmF0ZSkKCQl9CgoJCWlmKGlzc3VlV2FybmluZ0VtcHR5UXVvdGVNYXRDdXN0b21lci5zaXplKCkgPiAwKXsKCQkJZGVmIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUgPSBuZXcgQXJyYXlMaXN0KCkKCQkJd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoIlciKQoJCQl3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZCgiQ1VTVE9NRVJfQ09ORklSTV9FTVBUWV9NQVRfUVVPVEUiKQoJCQl3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChudWxsKQoJCQl3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXIpCgoJCQl3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZSkKCQl9CgkJCgkJaWYod2FybmluZ3NNYXRMaW5rZWRJc3N1ZXMuc2l6ZSgpID4gMCl7CgkJCWZvcihvYmogaW4gd2FybmluZ3NNYXRMaW5rZWRJc3N1ZXMpewoJCQkJZGVmIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUgPSBuZXcgQXJyYXlMaXN0KCkKCQkJCXdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKCJXIikKCQkJCXdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKCJDVVNUT01FUl9DT05GSVJNX0VNUFRZX01BVF9RVU9URSIpCgkJCQl3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChvYmpbMF0pCgkJCQl3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChvYmpbMV0pCgoJCQkJd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUpCgkJCX0KCQl9CgkJCgkJaWYod2FybmluZ3NSYXRlTGlua2VkSXNzdWVzLnNpemUoKSA+IDApewoJCQlmb3Iob2JqIGluIHdhcm5pbmdzUmF0ZUxpbmtlZElzc3Vlcyl7CgkJCQlkZWYgd0xpc3RDb25maXJtRW1wdHlSYXRlID0gbmV3IEFycmF5TGlzdCgpCgkJCQl3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKCJXIikKCQkJCXdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoIkNVU1RPTUVSX0NPTkZJUk1fRU1QVFlfUkFURVMiKQoJCQkJd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZChvYmpbMF0pCgkJCQl3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKG9ialsxXSkKCgkJCQl3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHlSYXRlKQoJCQl9CgkJfQoKCQlvdXRwdXQuYWRkKGVMaXN0KQoJCW91dHB1dC5hZGQod0xpc3QpCiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigneyJXRSI6IicgKyBvdXRwdXQudG9TdHJpbmcoKSArICcifScpCgkJLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJXRSIsIG91dHB1dC50b1N0cmluZygpKSAgCgl9Cn0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">4ff179ac-14f3-424d-9faa-d832d37c527a</arg>
              <arg name="FIELD_NOTES">YCFgQ3JlYXRlIFNOICYgU08gZm9yIG9sZCB0aWNrZXRz</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuXG5kZWYgU04gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfU0FQX1NFUlZJQ0VfTk9USUZJQ0FUSU9OXCIpWzBdXG5kZWYgU08gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfU0FQX1NFUlZJQ0VfT1JERVJcIilbMF1cbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG5VUkwgdXJsXG5IdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uXG5kZWYgYm9keV9yZXEgPSBbXVxuZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShTTikgPT0gbnVsbCAmJiBpc3N1ZS5pc3N1ZVR5cGUubmFtZSAhPSBcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0XCIpe1xuICAgIHJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXG4gICAgICAgIFwic3RhdHVzXCI6IFwiT1BFXCJcbiAgICBdIFxuXG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL3NlcnZpY2Uvbm90aWZpY2F0aW9uXCJcblxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxuICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNOOiBcIiArIGJvZHlfcmVxXG4gICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxuICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuICAgIFxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgIFxuICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG4gICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcblxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TTi1VUERBVEVcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICB9ZWxzZXtcbiAgICAgICAgLyoqIFNFUlZJQ0UgT1JERVIgQ1JFQVRJT04gKiovXG4gICAgICAgIGJvZHlfcmVxID0gW1xuICAgICAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXlcbiAgICAgICAgXSBcbiAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL29yL3VwZGF0ZS9zZXJ2aWNlL29yZGVyXCJcblxuICAgICAgICBsb2cuZGVidWcgXCJiYXNlVVJMIFNPOiBcIiArIGJhc2VVUkxcbiAgICAgICAgbG9nLmRlYnVnIFwiYm9keV9yZXEgU086IFwiICsgYm9keV9yZXFcbiAgICAgICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgICAgICBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG4gICAgICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgICAgICBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAxXCIpICYmICFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxuICAgIFx0XHRsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICAgICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICBcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtU0FQLVNPLUNSRUFURVwiKVxuICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgIH1cbiAgICB9XG59ZWxzZXtcbiAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKFNOKSAhPSBudWxsICYmIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoU08pID09IG51bGwgJiYgaXNzdWUuaXNzdWVUeXBlLm5hbWUgIT0gXCJQbGFubmVkIE1haW50ZW5hbmNlIFRpY2tldFwiKXtcbiAgICAgICAgLyoqIFNFUlZJQ0UgT1JERVIgQ1JFQVRJT04gKiovXG4gICAgICAgIHJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcbiAgICAgICAgYm9keV9yZXEgPSBbXG4gICAgICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleVxuICAgICAgICBdIFxuICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS9hZnRlci9zYWxlcy9jcmVhdGUvb3IvdXBkYXRlL3NlcnZpY2Uvb3JkZXJcIlxuXG4gICAgICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU086IFwiICsgYmFzZVVSTFxuICAgICAgICBsb2cuZGVidWcgXCJib2R5X3JlcSBTTzogXCIgKyBib2R5X3JlcVxuICAgICAgICB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgICAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgICAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cbiAgICAgICAgbG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgICAgIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDFcIikgJiYgIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgXHRcdGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVmIGpzb25TbHVycGVyID0gbmV3IEpzb25TbHVycGVyKClcbiAgICAgICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpXG4gICAgICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICAgICAgbG9nLmRlYnVnIFwibWVzc2FnZTogXCIgKyAganNvbl9vYmplY3QubWVzc2FnZVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiZXJyb3JzOiBcIiArICBqc29uX29iamVjdC5lcnJvcnMudG9TdHJpbmcoKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJPUC1TQVAtU08tQ1JFQVRFXCIpXG4gICAgICAgICAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGpzb25fb2JqZWN0LmVycm9yc1swXSlcbiAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICAgICAgfVxuICAgIH1cbn0iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">f794e26f6a504d3cc776bd5c16d3ff518ff13b6f</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IFJFU1QgQVBJOiBPUCBnZW5lcmF6aW9uZSBPRFYgc3UgU0FQ</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5Xb3JrZmxvd0V4Y2VwdGlvbjtcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvblxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyO1xuaW1wb3J0IGdyb292eS5qc29uLlN0cmVhbWluZ0pzb25CdWlsZGVyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5DdXN0b21GaWVsZE1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3I7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMuY29kZWMuYmluYXJ5LkJhc2U2NDtcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5XG5pbXBvcnQgZ3Jvb3Z5eC5uZXQuaHR0cC5IVFRQQnVpbGRlclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGlua1xuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuZGVmIG9kdiA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1NBTEVTX09SREVSXCIpWzBdXG5cbmRlZiByZXF1ZXN0TWV0aG9kID0gXCJQT1NUXCJcblxuZGVmIHJlbGF0ZXNJbklzc3VlTGluaz1mYWxzZVxuZGVmIHJlbGF0ZXNPdXRJc3N1ZUxpbms9ZmFsc2VcbmRlZiBsaW5rZWRUaWNrZXRzPW5ldyBBcnJheUxpc3QoKVxuXG5MaXN0PElzc3VlTGluaz4gYWxsSW5Jc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0SW53YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxJbklzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG5cbiAgICAgICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkgJiYgaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpLnN0YXR1cy5uYW1lID09IFwiQ29tcGxldGVkIHRvIGJlIENsb3NlZFwiICYmIChpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkuZ2V0Q3VzdG9tRmllbGRWYWx1ZShvZHYpID09IG51bGwgfHwgaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpLmdldEN1c3RvbUZpZWxkVmFsdWUob2R2KSA9PSBcIlwiKSl7XG4gICAgICAgICAgICByZWxhdGVzSW5Jc3N1ZUxpbms9dHJ1ZVxuICAgICAgICAgICAgbGlua2VkVGlja2V0cy5hZGQoaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJJc3N1ZSBjb24gcmVsYXRlc0luSXNzdWVMaW5rXCJcbiAgICAgICAgfVxuICAgIH1cbiAgICBMaXN0PElzc3VlTGluaz4gYWxsT3V0SXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldE91dHdhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKVxuICAgIGZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbE91dElzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG5cbiAgICAgICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkgJiYgaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkuc3RhdHVzLm5hbWUgPT0gXCJDb21wbGV0ZWQgdG8gYmUgQ2xvc2VkXCIgJiYgKGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpLmdldEN1c3RvbUZpZWxkVmFsdWUob2R2KSA9PSBudWxsIHx8IGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpLmdldEN1c3RvbUZpZWxkVmFsdWUob2R2KSA9PSBcIlwiKSl7XG4gICAgICAgICAgICByZWxhdGVzT3V0SXNzdWVMaW5rPXRydWVcbiAgICAgICAgICAgIGxpbmtlZFRpY2tldHMuYWRkKGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJJc3N1ZSBjb24gcmVsYXRlc091dElzc3VlTGlua1wiXG4gICAgICAgIH1cbiAgICB9XG5cbi8qIFJFU1QgQVBJIHBlciBJbnZpbyBOb3RpZmljYSBFbWFpbCBPTlNJVEVfUkVQT1JUICovXG5kZWYgYm9keV9yZXFcblxuaWYocmVsYXRlc0luSXNzdWVMaW5rIHx8IHJlbGF0ZXNPdXRJc3N1ZUxpbmspe1xuICAgIGJvZHlfcmVxID0gW1xuICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleSxcbiAgICAgICAgXCJsaW5rZWRUaWNrZXRzXCI6IGxpbmtlZFRpY2tldHNcbiAgICBdXG59ZWxzZXtcbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXlcbiAgICBdXG59XG5cbmRlZiBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS9zYWxlcy9vcmRlci9jcmVhdGVcIlxubG9nLmRlYnVnIGJhc2VVUkxcblVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG5IdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbmNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG5jb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG5jb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxubG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5jb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICBsb2cuZGVidWcgXCJFcnJvclN0cmVhbTogXCIgKyBjb25uZWN0aW9uLmdldEVycm9yU3RyZWFtKCkudG9TdHJpbmcoKVxuICAgIGxvZy5kZWJ1ZyBcImdldEhlYWRlckZpZWxkcygpOiBcIiArIGNvbm5lY3Rpb24uZ2V0SGVhZGVyRmllbGRzKClcbiAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xuICAgIFxuICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcbiAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcbiAgICBcbiAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtU0FQLU9EVlwiKVxuICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsganNvbl9vYmplY3QuZXJyb3JzWzBdLnRvU3RyaW5nKCkpXG4gICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcbiAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIkVcIiwgb3V0cHV0LnRvU3RyaW5nKCkpXG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuV29ya2Zsb3dFeGNlcHRpb247CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7CmltcG9ydCBncm9vdnkuanNvbi5TdHJlYW1pbmdKc29uQnVpbGRlcjsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5DdXN0b21GaWVsZE1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3I7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlCmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMuY29kZWMuYmluYXJ5LkJhc2U2NDsKaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGdyb292eXgubmV0Lmh0dHAuSFRUUEJ1aWxkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGluawppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQpDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRykKCklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTsKQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpOwoKCmRlZiByZXF1ZXN0TWV0aG9kID0gIlBPU1QiCgpkZWYgcmVsYXRlc0luSXNzdWVMaW5rPWZhbHNlCmRlZiByZWxhdGVzT3V0SXNzdWVMaW5rPWZhbHNlCmRlZiBsaW5rZWRUaWNrZXRzPW5ldyBBcnJheUxpc3QoKQoKTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpCiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxJbklzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7CiAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTsKCiAgICAgICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICByZWxhdGVzSW5Jc3N1ZUxpbms9dHJ1ZQogICAgICAgICAgICBsaW5rZWRUaWNrZXRzLmFkZChpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkudG9TdHJpbmcoKSkKICAgICAgICAgICAgbG9nLmRlYnVnICJJc3N1ZSBjb24gcmVsYXRlc0luSXNzdWVMaW5rIgogICAgICAgIH0KICAgIH0KICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpCiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykgewogICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7CgogICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgcmVsYXRlc091dElzc3VlTGluaz10cnVlCiAgICAgICAgICAgIGxpbmtlZFRpY2tldHMuYWRkKGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpLnRvU3RyaW5nKCkpCiAgICAgICAgICAgIGxvZy5kZWJ1ZyAiSXNzdWUgY29uIHJlbGF0ZXNPdXRJc3N1ZUxpbmsiCiAgICAgICAgfQogICAgfQoKLyogUkVTVCBBUEkgcGVyIEludmlvIE5vdGlmaWNhIEVtYWlsIE9OU0lURV9SRVBPUlQgKi8KZGVmIGJvZHlfcmVxCgppZihyZWxhdGVzSW5Jc3N1ZUxpbmsgfHwgcmVsYXRlc091dElzc3VlTGluayl7CiAgICBib2R5X3JlcSA9IFsKICAgICAgICAiaXNzdWVLZXkiOiBpc3N1ZS5rZXksCiAgICAgICAgImxpbmtlZFRpY2tldHMiOiBsaW5rZWRUaWNrZXRzCiAgICBdCn1lbHNlewogICAgYm9keV9yZXEgPSBbCiAgICAgICAgImlzc3VlS2V5IjogaXNzdWUua2V5CiAgICBdCn0KCmRlZiBiYXNlVVJMID0gImh0dHA6Ly8iICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyAiL29wL3Jlc3QvamlyYS9BQS9zYWxlcy9vcmRlci9jcmVhdGUiCmxvZy5kZWJ1ZyBiYXNlVVJMClVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpCkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7CmNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLTgiKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoIkFjY2VwdCIsICIqLyoiKTsKY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTsKY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpOwpjb25uZWN0aW9uLm91dHB1dFN0cmVhbQpjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKCJVVEYtOCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfQpsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0KY29ubmVjdGlvbi5jb25uZWN0KCk7CgpkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpCmRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKQpkZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKQoKaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKCIyMDAiKSl7CiAgICBsb2cuZGVidWcgInVybDogIiArIHVybAogICAgbG9nLmRlYnVnICJSZXNwb25zZUNvZGU6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkKICAgIGxvZy5kZWJ1ZyAiUmVzcG9uc2VNZXNzYWdlOiIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpCiAgICBsb2cuZGVidWcgIkVycm9yU3RyZWFtOiAiICsgY29ubmVjdGlvbi5nZXRFcnJvclN0cmVhbSgpLnRvU3RyaW5nKCkKICAgIGxvZy5kZWJ1ZyAiZ2V0SGVhZGVyRmllbGRzKCk6ICIgKyBjb25uZWN0aW9uLmdldEhlYWRlckZpZWxkcygpCiAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0CiAgICBsb2cuZGVidWcgIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogIiArIG91dHB1dE1zZwogICAgCiAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKQogICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZykKICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgCiAgICBsb2cuZGVidWcgIm1lc3NhZ2U6ICIgKyAganNvbl9vYmplY3QubWVzc2FnZQogICAgCiAgICBlTGlzdEVycm9ycy5hZGQoIkUiKQogICAgZUxpc3RFcnJvcnMuYWRkKCJPUC1TQVAtT0RWIikKICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArICIgIiArIGpzb25fb2JqZWN0Lm1lc3NhZ2UpCiAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKQogICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKQoKICAgIG91dHB1dC5hZGQoZUxpc3QpCiAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IkUiOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQogICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJFIiwgb3V0cHV0LnRvU3RyaW5nKCkpCn0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="6">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_ACTION">181 Tkt Chiuso</arg>
                  <arg name="FIELD_NOTES">YCFgT1A6IENsb3NlIHRrdCBpZiBPRFYgYW5kIE9EQSBoYXZlIGJlZW4gY3JlYXRlZA==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.FasttrackTransition</arg>
                  <arg name="FIELD_CONDITION">YCFgY2ZWYWx1ZXNbJ09QX1BVUkNIQVNFX09SREVSJ10gIT0gbnVsbCAmJiBjZlZhbHVlc1snT1BfUFVSQ0hBU0VfT1JERVJfREFURSddICE9IG51bGwgJiYgY2ZWYWx1ZXNbJ09QX1BVUkNIQVNFX09SREVSX1RPVEFMJ10gIT0gbnVsbHx8fA==</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_TRANSITION_OPTIONS"></arg>
                  <arg name="FIELD_ADDITIONAL_SCRIPT">YCFg</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="171" name="ODA" view="fieldscreen">
          <meta name="opsbar-sequence">50</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">19908</meta>
          <restrict-to>
            <conditions type="AND">
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">edf645c7-f017-4c6b-a509-5be062f0a1cd</arg>
                <arg name="FIELD_NOTES">YCFgTWFpbnRlbmFuY2UgVGt0IE9SIFBNIFRpY2tldCAtIEFORCBTdXBwbGllciBOT1QgTlVMTA==</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnlcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cblxuZGVmIHN1cHBsaWVyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnN1cHBsaWVyJ10udG9TdHJpbmcoKSlcbmRlZiB0cm92YXRvID0gZmFsc2VcblxuZm9yIChzIGluIHN1cHBsaWVyKXtcbiAgICBpZiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzKSAhPSBudWxsKXtcbiAgICAgICAgdHJvdmF0byA9IHRydWVcbiAgICB9XG59XG4oaXNzdWUuaXNzdWVUeXBlLm5hbWUgPT0gJ01haW50ZW5hbmNlIFRpY2tldCcgfHwgaXNzdWUuaXNzdWVUeXBlLm5hbWUgPT0gJ1BsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0JykgJiYgdHJvdmF0byA9PSB0cnVlIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
              </condition>
              <condition type="class">
                <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIE9QX1BVUkNIQVNFX09SREVSX0RBVEUgLSBJZiBub3QgbnVsbCAtIHRyYW5zaXRpb24gaGFzIGFscmVhZHkgYmVlbiBleGVjdXRlZA==</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXIKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsCgpQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpCkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpCnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7Cglwcm9wZXJ0aWVzLmxvYWQoaXQpCn0KY2ZWYWx1ZXNbcHJvcGVydGllc1snY2YucHVyY2hhc2VPcmRlckRhdGUnXV0gPT0gbnVsbCAmJiBjZlZhbHVlc1twcm9wZXJ0aWVzWydjZi53ZlB1cmNoYXNlT3JkZXJUb1MnXV0gPT0gbnVsbHx8fA==</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
              </condition>
              <condition type="class">
                <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIE9QQUFfQVVUT01BVElDQUxMWV9DTE9TRUQgLSBpZiBZZXMgZG9uJ3QgYWxsb3cgdHJhbnNpdGlvbg==</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXIKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsCgpQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpCkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpCnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7Cglwcm9wZXJ0aWVzLmxvYWQoaXQpCn0KY2ZWYWx1ZXNbcHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUNsb3NlZCddXSA9PSBudWxsIHx8IGNmVmFsdWVzW3Byb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlDbG9zZWQnXV0/LnZhbHVlID09ICdObyd8fHw=</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">3c57210d24c112bcff020e8630134c0aaf31c353</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIFJlcXVpcmVkIEZpZWxkcyAtIHNvbG8gZXJyb3JzLCBubyB3YXJuaW5ncw==</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXJcbmltcG9ydCBncm9vdnkuanNvbi5Kc29uQnVpbGRlclxuaW1wb3J0IGdyb292eS5qc29uLlN0cmVhbWluZ0pzb25CdWlsZGVyXG5cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZFxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGlua1xuXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcblxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnlcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cblxuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL0lzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbi8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMjMxMDBcIilcblxuZGVmIGVycm9ycyA9IGZhbHNlXG5kZWYgd2FybmluZ3MgPSBmYWxzZVxuZGVmIHJlbGF0ZXNJbklzc3VlTGluaz1mYWxzZVxuZGVmIHJlbGF0ZXNPdXRJc3N1ZUxpbms9ZmFsc2VcbmRlZiB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlTGlua2VkID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgd0xpc3RDb25maXJtRW1wdHlSYXRlUXVvdGVMaW5rZWQgPSBuZXcgQXJyYXlMaXN0KClcblxuZGVmIGx1bXBTdW1QcmljZSA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YubHVtcFN1bVByaWNlJ10udG9TdHJpbmcoKSlbMF1cblxuLypDYW1waSBjb24gZGF0aSBvYmJsaWdhdG9yaSBwZXIgdGlja2V0IG5vbiBhIGNvcnBvKi9cbmRlZiByZXBNYXRlcmlhbHMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJlcGxhY2VkTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF1cbmRlZiB1bmFUYW50dW1SYXRlcyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YudW5hdGFudHVtUmF0ZXMnXS50b1N0cmluZygpKVswXVxuZGVmIGxhYm91clJhdGVzID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5sYWJvdXJSYXRlcyddLnRvU3RyaW5nKCkpWzBdXG5kZWYgdHJhdmVsUmF0ZXMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnRyYXZlbFJhdGVzJ10udG9TdHJpbmcoKSlbMF1cblxuLypDYW1waSBjb24gZGF0aSBvYmJsaWdhdG9yaSBwZXIgdGlja2V0IGEgY29ycG8qL1xuZGVmIGx1bXBTdW1SYXRlcyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YubHVtcFN1bVJhdGVzJ10udG9TdHJpbmcoKSlbMF1cblxuLypDb25mZXJtYSB1dGVudGUgc3Ugd2FybmluZ3MqL1xuZGVmIHRyYW5zaXRpb25DaGVjayA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY2hlY2tBbmRDb25maXJtJ10udG9TdHJpbmcoKSlbMF1cbmxvZy5kZWJ1ZyBcInRyYW5zaXRpb25DaGVjazogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaylcbi8qSW5zaWdodCBTY2hlbWEgSURzKi9cbmRlZiBEQk9iamVjdHMgPSBwcm9wZXJ0aWVzWydpc2NoZW1hLmRibyddLnRvU3RyaW5nKCkgKyBcIi1cIlxuZGVmIE9QQUEgPSBwcm9wZXJ0aWVzWydpc2NoZW1hLmFhJ10udG9TdHJpbmcoKSArIFwiLVwiXG5kZWYgRE8gPSBwcm9wZXJ0aWVzWydpc2NoZW1hLmRibyddLnRvU3RyaW5nKCkgKyBcIi1cIlxuXG4vKkFycmF5IHdhcm5pbmdzIGVkIGVycm9ycyBwZXIgbGEgaXNzdWUgcHJpbmNpcGFsZSwgdW5vIHBlciBvZ25pIHRpcG9sb2dpYSBkaSBlcnJvcmUgbyB3YXJuaW5nKi9cbmRlZiBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlTWF0U3VwcGxpZXIgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlUmF0ZVN1cHBsaWVyID0gbmV3IEFycmF5TGlzdCgpXG4vL2RlZiBpc3N1ZUVycm9yLi4uXG5cbmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKT09bnVsbCB8fCAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpKXtcbiAgICAvKlZlcmlmaWNhIGNhbXBpIHN1IHRpY2tldCBvZ2dldHRvIGRlbGxhIHRyYW5zYXppb25lKi9cbiAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1QcmljZSkhPW51bGwgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUHJpY2UpLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpKXtcbiAgICAgICAgLypDb250YWJpbGl6emF6aW9uZSBhIGNvcnBvKi9cbiAgICAgICAgbG9nLmRlYnVnIFwiQ29udGFiaWxpenphemlvbmUgYSBjb3Jwb1wiXG4gICAgICAgIC8vT1BBQV9MVU1QX1NVTV9SQVRFU1xuICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1SYXRlcykhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1SYXRlcykgIT0gXCJcIiAmJiAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUmF0ZXMpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKXtcbiAgICAgICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qL1xuICAgICAgICAgICAgLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzXG4gICAgICAgICAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7ICBcbiAgICAgICAgICAgIENsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbiAgICAgICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4gICAgICAgICAgICBkZWYgbHNSYXRlc0xpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1SYXRlcylcblxuICAgICAgICAgICAgZm9yKGxzIGluIGxzUmF0ZXNMaXN0KXtcbiAgICAgICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3RcbiAgICAgICAgICAgICAgICBkZWYgbHNSYXRlPWxzLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBkZWYgbHNSYXRlS2V5ID0gbHNSYXRlLnN1YnN0cmluZyhsc1JhdGUubGFzdEluZGV4T2YoJygnKSsxLGxzUmF0ZS5sYXN0SW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIGRlZiBsc1JhdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4obHNSYXRlS2V5KVxuICAgICAgICAgICAgICAgIC8vZ2V0IFwiREVMRVRFRFwiIGZvciB0aGF0IHRoYXQgcmF0ZVxuICAgICAgICAgICAgICAgIGRlZiBsc0RlbCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsc1JhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKSA/IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsc1JhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKSA6IFwiXCJcbiAgICAgICAgICAgICAgICBkZWYgbHNEZWxWYWx1ZSA9IGxzRGVsICE9IFwiXCIgPyBsc0RlbC5zdWJzdHJpbmcobHNEZWwubGFzdEluZGV4T2YoJygnKSsxLGxzRGVsLmxhc3RJbmRleE9mKCcpJykpIDogXCJcIlxuXG4gICAgICAgICAgICAgICAgLy9nZXQgXCJBUFBMSUVEX1RPXCIgZm9yIHRoYXQgcmF0ZVxuICAgICAgICAgICAgICAgIGRlZiBsc0FwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsc1JhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgZGVmIGxzQXBwbGllZFRvVmFsdWVcbiAgICAgICAgICAgICAgICBpZiAobHNBcHBsaWVkVG8pe1xuICAgICAgICAgICAgICAgICAgICBsc0FwcGxpZWRUb1ZhbHVlID0gbHNBcHBsaWVkVG8uc3Vic3RyaW5nKGxzQXBwbGllZFRvLmluZGV4T2YoJygnKSsxLGxzQXBwbGllZFRvLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBkZWYgbHNSYXRlUmVmID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxzUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQucmF0ZVJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG5cbiAgICAgICAgICAgICAgICBkZWYgbHNSYXRlUmVmS2V5XG4gICAgICAgICAgICAgICAgZGVmIGxzUmF0ZVJlZlZhbHVlXG4gICAgICAgICAgICAgICAgaWYobHNSYXRlUmVmLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICBsc1JhdGVSZWYgPSBsc1JhdGVSZWYudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICBsc1JhdGVSZWZLZXkgPSBsc1JhdGVSZWYuc3Vic3RyaW5nKGxzUmF0ZVJlZi5pbmRleE9mKCcoJykrMSxsc1JhdGVSZWYuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgICAgICBkZWYgbHNSYXRlUmVmT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKERPICsgbHNSYXRlUmVmS2V5KVxuICAgICAgICAgICAgICAgICAgICBsc1JhdGVSZWZWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsc1JhdGVSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5yYXRlLk5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICBsc1JhdGVSZWZWYWx1ZSA9IGxzUmF0ZVJlZlZhbHVlLnN1YnN0cmluZyhsc1JhdGVSZWZWYWx1ZS5pbmRleE9mKCcoJykrMSxsc1JhdGVSZWZWYWx1ZS5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYoKGxzQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoXCJCT1RIXCIpIHx8IGxzQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoXCJTVVBQTElFUlwiKSkgJiYgIWxzRGVsVmFsdWUuZXF1YWxzKFwidHJ1ZVwiKSl7XG4gICAgICAgICAgICAgICAgICAgIC8vZ2V0IFwiVE9UQUxfQU1PVU5UX1NVUFBMSUVSXCIgZm9yIHRoYXQgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgIGRlZiB0b3RTdXBwbGllclxuICAgICAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lib2oub25TaXRlUmF0ZVJlcG9ydC50b3RTdXBwbGllciddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdFN1cHBsaWVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxzUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90U3VwcGxpZXInXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZighdG90U3VwcGxpZXIgfHwgdG90U3VwcGxpZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscyhcIjAuMFwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlUmF0ZVN1cHBsaWVyLmFkZChsc1JhdGVSZWZWYWx1ZS50b1N0cmluZygpKVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVTdXBwbGllcjogXCIgKyBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlUmF0ZVN1cHBsaWVyXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ICAgIFxuICAgICAgICB9XG5cbiAgICB9ZWxzZXtcbiAgICAgICAgLypDb250YWJpbGl6emF6aW9uZSBub24gYSBjb3JwbyovXG4gICAgICAgIGxvZy5kZWJ1ZyBcIkNvbnRhYmlsaXp6YXppb25lIE5PTiBhIGNvcnBvXCJcblxuICAgICAgICAvL09QQUFfUkVQTEFDRURfTUFURVJJQUxTXG4gICAgICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKSAhPSBcIlwiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpe1xuICAgICAgICAgICAgLy9sb2cuZGVidWcgXCJNYXRlcmlhbGk6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpXG4gICAgICAgICAgICAvKkNpY2xhcmUgdHV0dGkgZ2xpIG9nZ2V0dGkgYXNzb2NpYXRpIGFsIGNhbXBvKi9cbiAgICAgICAgICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50c1xuICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyAgXG4gICAgICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTtcbiAgICAgICAgICAgIGRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XG4gICAgICAgICAgICBkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcblxuICAgICAgICAgICAgZGVmIHJlcE1hdExpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscylcblxuICAgICAgICAgICAgZm9yKG1hdCBpbiByZXBNYXRMaXN0KXtcbiAgICAgICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3RcbiAgICAgICAgICAgICAgICBkZWYgY29tcG9uZW50PW1hdC50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgZGVmIGNvbXBvbmVudEtleSA9IGNvbXBvbmVudC5zdWJzdHJpbmcoY29tcG9uZW50LmluZGV4T2YoJygnK09QQUEpKzEsY29tcG9uZW50Lmxlbmd0aCgpLTEpXG4gICAgICAgICAgICAgICAgZGVmIGNvbXBvbmVudE9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihjb21wb25lbnRLZXkpXG4gICAgICAgICAgICAgICAgLy9nZXQgXCJERUxFVEVEXCIgZm9yIHRoYXQgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgZGVmIG1hdERlbCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKSA/IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKSA6IFwiXCJcbiAgICAgICAgICAgICAgICBkZWYgbWF0RGVsVmFsdWUgPSBtYXREZWwgIT0gXCJcIiA/IG1hdERlbC5zdWJzdHJpbmcobWF0RGVsLmluZGV4T2YoJygnKSsxLG1hdERlbC5pbmRleE9mKCcpJykpIDogXCJcIlxuXG5cbiAgICAgICAgICAgICAgICAvL2dldCBcIkFQUExJRURfVE9cIiBmb3IgdGhhdCBjb21wb25lbnRcbiAgICAgICAgICAgICAgICBkZWYgYXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuYXBwbGllZFRvJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpIGFzIEFycmF5TGlzdFxuICAgICAgICAgICAgICAgIGRlZiBhcHBsaWVkVG9WYWx1ZVxuICAgICAgICAgICAgICAgIGlmKGFwcGxpZWRUby5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgYXBwbGllZFRvID0gYXBwbGllZFRvLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgYXBwbGllZFRvVmFsdWUgPSBhcHBsaWVkVG8uc3Vic3RyaW5nKGFwcGxpZWRUby5pbmRleE9mKCcoJykrMSxhcHBsaWVkVG8uaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgICAgICAvL2xvZy5kZWJ1ZyBcImFwcGxpZWRUb1ZhbHVlOiBcIiArIGFwcGxpZWRUb1ZhbHVlXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZGVmIG1hdE51bWJlclxuICAgICAgICAgICAgICAgIGRlZiBtYXROdW1iZXJLZXlcbiAgICAgICAgICAgICAgICBkZWYgbWF0TnVtYmVyVmFsdWVcbiAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50Lm1hdGVyaWFsUmVmJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgICAgICBtYXROdW1iZXIgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50Lm1hdGVyaWFsUmVmJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpIGFzIEFycmF5TGlzdFxuICAgICAgICAgICAgICAgICAgICBpZihtYXROdW1iZXIuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXROdW1iZXIgPSBtYXROdW1iZXIudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0TnVtYmVyS2V5ID0gbWF0TnVtYmVyLnN1YnN0cmluZyhtYXROdW1iZXIuaW5kZXhPZignKCcpKzEsbWF0TnVtYmVyLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBtYXROdW1iZXJPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oREJPYmplY3RzICsgbWF0TnVtYmVyS2V5KVxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0TnVtYmVyVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obWF0TnVtYmVyT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoubWF0ZXJpYWwubmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXROdW1iZXJWYWx1ZSA9IG1hdE51bWJlclZhbHVlLnN1YnN0cmluZyhtYXROdW1iZXJWYWx1ZS5pbmRleE9mKCcoJykrMSxtYXROdW1iZXJWYWx1ZS5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBkZWYgc2VyaWFsTnVtYmVyXG4gICAgICAgICAgICAgICAgZGVmIHNlcmlhbE51bWJlclZhbHVlXG4gICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5zZXJpYWxOdW1iZXInXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgICAgIHNlcmlhbE51bWJlciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuc2VyaWFsTnVtYmVyJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpIGFzIEFycmF5TGlzdFxuICAgICAgICAgICAgICAgICAgICBpZihzZXJpYWxOdW1iZXIuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXJpYWxOdW1iZXIgPSBzZXJpYWxOdW1iZXIudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWFsTnVtYmVyVmFsdWUgPSBzZXJpYWxOdW1iZXIuc3Vic3RyaW5nKHNlcmlhbE51bWJlci5pbmRleE9mKCcoJykrMSxzZXJpYWxOdW1iZXIuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYoKGFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKFwiQk9USFwiKSB8fCBhcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscyhcIlNVUFBMSUVSXCIpKSAmJiAhbWF0RGVsVmFsdWUuZXF1YWxzKFwidHJ1ZVwiKSl7XG4gICAgICAgICAgICAgICAgICAgIC8vZ2V0IFwiVE9UQUxfQU1PVU5UX1NVUFBMSUVSXCIgZm9yIHRoYXQgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgIGRlZiB0b3RTdXBwbGllclxuICAgICAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdFN1cHAnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RTdXBwbGllciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQudG90U3VwcCddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmKCF0b3RTdXBwbGllciB8fCB0b3RTdXBwbGllclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMC4wXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzPXRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlV2FybmluZ0VtcHR5UXVvdGVNYXRTdXBwbGllci5hZGQobWF0TnVtYmVyVmFsdWUudG9TdHJpbmcoKSArICghc2VyaWFsTnVtYmVyLnRvU3RyaW5nKCkuZXF1YWxzKFwiW11cIikgPyBcIiAoXCIgKyAoc2VyaWFsTnVtYmVyVmFsdWUgPyBzZXJpYWxOdW1iZXJWYWx1ZS50b1N0cmluZygpIDogXCJcIikgKyBcIilcIiA6IFwiICgpXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZU1hdFN1cHBsaWVyOiBcIiArIGlzc3VlV2FybmluZ0VtcHR5UXVvdGVNYXRTdXBwbGllclxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSAgICBcbiAgICAgICAgfSAgXG5cbiAgICAgICAgLy9PUEFBX1VOQVRBTlRVTV9SQVRFU1xuICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHVuYVRhbnR1bVJhdGVzKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodW5hVGFudHVtUmF0ZXMpICE9IFwiXCIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodW5hVGFudHVtUmF0ZXMpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKXtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlVuYSB0YW50dW0gcmF0ZXM6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcylcbiAgICAgICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qL1xuICAgICAgICAgICAgLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzXG4gICAgICAgICAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7ICBcbiAgICAgICAgICAgIENsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbiAgICAgICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4gICAgICAgICAgICBkZWYgdW1SYXRlc0xpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHVuYVRhbnR1bVJhdGVzKVxuXG4gICAgICAgICAgICBmb3IodW0gaW4gdW1SYXRlc0xpc3Qpe1xuICAgICAgICAgICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdFxuICAgICAgICAgICAgICAgIGRlZiB1bVJhdGU9dW0udG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVLZXkgPSB1bVJhdGUuc3Vic3RyaW5nKHVtUmF0ZS5pbmRleE9mKCcoJykrMSx1bVJhdGUuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4odW1SYXRlS2V5KVxuXG4gICAgICAgICAgICAgICAgZGVmIHVtRGVsID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHVtUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuZGVsZXRlZCddLnRvU3RyaW5nKCkpID8gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHVtUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuZGVsZXRlZCddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpIDogXCJcIlxuICAgICAgICAgICAgICAgIGRlZiB1bURlbFZhbHVlID0gdW1EZWwgIT0gXCJcIiA/IHVtRGVsLnN1YnN0cmluZyh1bURlbC5pbmRleE9mKCcoJykrMSx1bURlbC5pbmRleE9mKCcpJykpIDogXCJcIlxuXG4gICAgICAgICAgICAgICAgLy9nZXQgXCJBUFBMSUVEX1RPXCIgZm9yIHRoYXQgcmF0ZVxuICAgICAgICAgICAgICAgIGRlZiB1bUFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgZGVmIHVtQXBwbGllZFRvVmFsdWUgPSB1bUFwcGxpZWRUby5zdWJzdHJpbmcodW1BcHBsaWVkVG8uaW5kZXhPZignKCcpKzEsdW1BcHBsaWVkVG8uaW5kZXhPZignKScpKVxuXG4gICAgICAgICAgICAgICAgZGVmIHVtUmF0ZVJlZlxuICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgICAgIHVtUmF0ZVJlZj1vYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5yYXRlUmVmJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBkZWYgdW1SYXRlUmVmS2V5XG4gICAgICAgICAgICAgICAgZGVmIHVtUmF0ZVJlZlZhbHVlXG4gICAgICAgICAgICAgICAgaWYodW1SYXRlUmVmKXtcbiAgICAgICAgICAgICAgICAgICAgdW1SYXRlUmVmID0gdW1SYXRlUmVmLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgdW1SYXRlUmVmS2V5ID0gdW1SYXRlUmVmLnN1YnN0cmluZyh1bVJhdGVSZWYubGFzdEluZGV4T2YoJygnKSsxLHVtUmF0ZVJlZi5sYXN0SW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ1bVJhdGVSZWZLZXk6IFwiICsgdW1SYXRlUmVmS2V5XG4gICAgICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVSZWZPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oRE8gKyB1bVJhdGVSZWZLZXkpXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVtUmF0ZVJlZk9iamVjdDogXCIgKyB1bVJhdGVSZWZPYmplY3RcbiAgICAgICAgICAgICAgICAgICAgdW1SYXRlUmVmVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoucmF0ZS5OYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgdW1SYXRlUmVmVmFsdWUgPSB1bVJhdGVSZWZWYWx1ZS5zdWJzdHJpbmcodW1SYXRlUmVmVmFsdWUuaW5kZXhPZignKCcpKzEsdW1SYXRlUmVmVmFsdWUuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKCh1bUFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKFwiQk9USFwiKSB8fCB1bUFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKFwiU1VQUExJRVJcIikpICYmICF1bURlbFZhbHVlLmVxdWFscyhcInRydWVcIikpe1xuICAgICAgICAgICAgICAgICAgICAvL2dldCBcIlRPVEFMX0FNT1VOVF9TVVBQTElFUlwiIGZvciB0aGF0IGNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICBkZWYgdG90U3VwcGxpZXJcbiAgICAgICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHVtUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90U3VwcGxpZXInXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RTdXBwbGllciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaWJvai5vblNpdGVSYXRlUmVwb3J0LnRvdFN1cHBsaWVyJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYoIXRvdFN1cHBsaWVyIHx8IHRvdFN1cHBsaWVyWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIwLjBcIikpe1xuICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ3M9dHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVTdXBwbGllci5hZGQodW1SYXRlUmVmVmFsdWUudG9TdHJpbmcoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArIFwiIGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlU3VwcGxpZXI6IFwiICsgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVTdXBwbGllclxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSAgICBcbiAgICAgICAgfVxuXG4gICAgICAgIC8vT1BBQV9MQUJPVVJfUkFURVNcbiAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcykhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxhYm91clJhdGVzKSAhPSBcIlwiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxhYm91clJhdGVzKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSl7XG4gICAgICAgICAgICBsb2cuZGVidWcgXCJMYWJvdXIgcmF0ZXM6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcylcbiAgICAgICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qL1xuICAgICAgICAgICAgLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzXG4gICAgICAgICAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7ICBcbiAgICAgICAgICAgIENsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbiAgICAgICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4gICAgICAgICAgICBkZWYgbGFib3VyUmF0ZXNMaXN0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcylcblxuICAgICAgICAgICAgZm9yKGxiIGluIGxhYm91clJhdGVzTGlzdCl7XG4gICAgICAgICAgICAgICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0XG4gICAgICAgICAgICAgICAgZGVmIGxiUmF0ZT1sYi50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgZGVmIGxiUmF0ZUtleSA9IGxiUmF0ZS5zdWJzdHJpbmcobGJSYXRlLmluZGV4T2YoJygnKSsxLGxiUmF0ZS5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgZGVmIGxiUmF0ZU9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihsYlJhdGVLZXkpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwibGJSYXRlT2JqZWN0OiBcIiArIGxiUmF0ZU9iamVjdFxuICAgICAgICAgICAgICAgIC8vZ2V0IFwiREVMRVRFRFwiIGZvciB0aGF0IHJhdGVcbiAgICAgICAgICAgICAgICBkZWYgbGJEZWwgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSkgPyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkgOiBcIlwiXG4gICAgICAgICAgICAgICAgZGVmIGxiRGVsVmFsdWUgPSBsYkRlbCAhPSBcIlwiID8gbGJEZWwuc3Vic3RyaW5nKGxiRGVsLmluZGV4T2YoJygnKSsxLGxiRGVsLmluZGV4T2YoJyknKSkgOiBcIlwiXG5cbiAgICAgICAgICAgICAgICAvL2dldCBcIkFQUExJRURfVE9cIiBmb3IgdGhhdCByYXRlXG4gICAgICAgICAgICAgICAgZGVmIGxiQXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuYXBwbGllZFRvJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBkZWYgbGJBcHBsaWVkVG9WYWx1ZSA9IGxiQXBwbGllZFRvLnN1YnN0cmluZyhsYkFwcGxpZWRUby5pbmRleE9mKCcoJykrMSxsYkFwcGxpZWRUby5pbmRleE9mKCcpJykpXG5cbiAgICAgICAgICAgICAgICBkZWYgbGJSYXRlUmVmXG4gICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQucmF0ZVJlZiddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgICAgICAgICAgbGJSYXRlUmVmPW9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGRlZiB0ZWNoUmVmXG4gICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudGVjaG5pY2lhblJlZiddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgICAgICAgICAgdGVjaFJlZj1vYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lib2oub25TaXRlUmF0ZVJlcG9ydC50ZWNobmljaWFuUmVmJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidGVjaFJlZjogXCIgKyB0ZWNoUmVmXG4gICAgICAgICAgICAgICAgZGVmIGxiUmF0ZVJlZktleVxuICAgICAgICAgICAgICAgIGRlZiBsYlJhdGVSZWZWYWx1ZVxuICAgICAgICAgICAgICAgIGlmKGxiUmF0ZVJlZi5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgbGJSYXRlUmVmID0gbGJSYXRlUmVmLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgbGJSYXRlUmVmS2V5ID0gbGJSYXRlUmVmLnN1YnN0cmluZyhsYlJhdGVSZWYuaW5kZXhPZignKCcpKzEsbGJSYXRlUmVmLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICAgICAgZGVmIGxiUmF0ZVJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihETyArIGxiUmF0ZVJlZktleSlcbiAgICAgICAgICAgICAgICAgICAgbGJSYXRlUmVmVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoucmF0ZS5OYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgbGJSYXRlUmVmVmFsdWUgPSBsYlJhdGVSZWZWYWx1ZS5zdWJzdHJpbmcobGJSYXRlUmVmVmFsdWUuaW5kZXhPZignKCcpKzEsbGJSYXRlUmVmVmFsdWUuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGRlZiB0ZWNoUmVmS2V5XG4gICAgICAgICAgICAgICAgZGVmIHRlY2hSZWZWYWx1ZVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRlY2hSZWY6IFwiICsgdGVjaFJlZlxuICAgICAgICAgICAgICAgIGlmKHRlY2hSZWYpe1xuICAgICAgICAgICAgICAgICAgICB0ZWNoUmVmID0gdGVjaFJlZi50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRlY2hSZWY6IFwiICsgdGVjaFJlZlxuICAgICAgICAgICAgICAgICAgICB0ZWNoUmVmS2V5ID0gdGVjaFJlZi5zdWJzdHJpbmcodGVjaFJlZi5pbmRleE9mKCcoJykrMSx0ZWNoUmVmLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICAgICAgZGVmIHRlY2hSZWZPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oT1BBQSArIHRlY2hSZWZLZXkpXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRlY2hSZWZPYmplY3Q6IFwiICsgdGVjaFJlZk9iamVjdFxuICAgICAgICAgICAgICAgICAgICB0ZWNoUmVmVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaFJlZk9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2huaWNpYW4ubmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIHRlY2hSZWZWYWx1ZSA9IHRlY2hSZWZWYWx1ZS5zdWJzdHJpbmcodGVjaFJlZlZhbHVlLmluZGV4T2YoJygnKSsxLHRlY2hSZWZWYWx1ZS5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRlY2hSZWZWYWx1ZTogXCIgKyB0ZWNoUmVmVmFsdWVcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZigobGJBcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscyhcIkJPVEhcIikgfHwgbGJBcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscyhcIlNVUFBMSUVSXCIpKSAmJiAhbGJEZWxWYWx1ZS5lcXVhbHMoXCJ0cnVlXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgLy9nZXQgXCJUT1RBTF9BTU9VTlRfU1VQUExJRVJcIiBmb3IgdGhhdCBjb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgZGVmIHRvdFN1cHBsaWVyXG4gICAgICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaWJvai5vblNpdGVSYXRlUmVwb3J0LnRvdFN1cHBsaWVyJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdG90U3VwcGxpZXIgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lib2oub25TaXRlUmF0ZVJlcG9ydC50b3RTdXBwbGllciddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmKCF0b3RTdXBwbGllciB8fCB0b3RTdXBwbGllclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMC4wXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzPXRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlU3VwcGxpZXIuYWRkKGxiUmF0ZVJlZlZhbHVlLnRvU3RyaW5nKCkgKyBcIiAoXCIgKyB0ZWNoUmVmVmFsdWUudG9TdHJpbmcoKSArIFwiKVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVTdXBwbGllcjogXCIgKyBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlUmF0ZVN1cHBsaWVyXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ICAgIFxuICAgICAgICB9XG5cbiAgICAgICAgLy9PUEFBX1RSQVZFTF9SQVRFU1xuICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYXZlbFJhdGVzKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsUmF0ZXMpICE9IFwiXCIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsUmF0ZXMpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKXtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlRyYXZlbCByYXRlczogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYXZlbFJhdGVzKVxuICAgICAgICAgICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovXG4gICAgICAgICAgICAvL2luc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHNcbiAgICAgICAgICAgIENsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTsgIFxuICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XG4gICAgICAgICAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xuICAgICAgICAgICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XG5cbiAgICAgICAgICAgIGRlZiB0cmF2ZWxSYXRlc0xpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYXZlbFJhdGVzKVxuXG4gICAgICAgICAgICBmb3IodHIgaW4gdHJhdmVsUmF0ZXNMaXN0KXtcbiAgICAgICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3RcbiAgICAgICAgICAgICAgICBkZWYgdHJSYXRlPXRyLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBkZWYgdHJSYXRlS2V5ID0gdHJSYXRlLnN1YnN0cmluZyh0clJhdGUuaW5kZXhPZignKCcpKzEsdHJSYXRlLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICBkZWYgdHJSYXRlT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHRyUmF0ZUtleSlcblxuICAgICAgICAgICAgICAgIGRlZiB0ckRlbCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKSA/IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKSA6IFwiXCJcbiAgICAgICAgICAgICAgICBkZWYgdHJEZWxWYWx1ZSA9IHRyRGVsICE9IFwiXCIgPyB0ckRlbC5zdWJzdHJpbmcodHJEZWwuaW5kZXhPZignKCcpKzEsdHJEZWwuaW5kZXhPZignKScpKSA6IFwiXCJcblxuICAgICAgICAgICAgICAgIC8vZ2V0IFwiQVBQTElFRF9UT1wiIGZvciB0aGF0IHJhdGVcbiAgICAgICAgICAgICAgICBkZWYgdHJBcHBsaWVkVG8gPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odHJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIGRlZiB0ckFwcGxpZWRUb1ZhbHVlID0gdHJBcHBsaWVkVG8uc3Vic3RyaW5nKHRyQXBwbGllZFRvLmluZGV4T2YoJygnKSsxLHRyQXBwbGllZFRvLmluZGV4T2YoJyknKSlcblxuICAgICAgICAgICAgICAgIGRlZiB0clJhdGVSZWZcbiAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odHJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5yYXRlUmVmJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgICAgICB0clJhdGVSZWY9b2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQucmF0ZVJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZGVmIHRyUmF0ZVJlZktleVxuICAgICAgICAgICAgICAgIGRlZiB0clJhdGVSZWZWYWx1ZVxuICAgICAgICAgICAgICAgIGlmKHRyUmF0ZVJlZi5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgdHJSYXRlUmVmID0gdHJSYXRlUmVmLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgdHJSYXRlUmVmS2V5ID0gdHJSYXRlUmVmLnN1YnN0cmluZyh0clJhdGVSZWYuaW5kZXhPZignKCcpKzEsdHJSYXRlUmVmLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICAgICAgZGVmIHRyUmF0ZVJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihETyArIHRyUmF0ZVJlZktleSlcbiAgICAgICAgICAgICAgICAgICAgdHJSYXRlUmVmVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odHJSYXRlUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoucmF0ZS5OYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgdHJSYXRlUmVmVmFsdWUgPSB0clJhdGVSZWZWYWx1ZS5zdWJzdHJpbmcodHJSYXRlUmVmVmFsdWUuaW5kZXhPZignKCcpKzEsdHJSYXRlUmVmVmFsdWUuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKCh0ckFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKFwiQk9USFwiKSB8fCB0ckFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKFwiU1VQUExJRVJcIikpICYmICF0ckRlbFZhbHVlLmVxdWFscyhcInRydWVcIikpe1xuICAgICAgICAgICAgICAgICAgICAvL2dldCBcIlRPVEFMX0FNT1VOVF9TVVBQTElFUlwiIGZvciB0aGF0IGNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICBkZWYgdG90U3VwcGxpZXJcbiAgICAgICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90U3VwcGxpZXInXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RTdXBwbGllcj1vYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odHJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lib2oub25TaXRlUmF0ZVJlcG9ydC50b3RTdXBwbGllciddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmKCF0b3RTdXBwbGllciB8fCB0b3RTdXBwbGllclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMC4wXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzPXRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlU3VwcGxpZXIuYWRkKHRyUmF0ZVJlZlZhbHVlLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIiBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlUmF0ZVN1cHBsaWVyOiBcIiArIGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlU3VwcGxpZXJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gICAgXG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIGRlZiBsaW5rZWRUaWNrZXRzPW5ldyBBcnJheUxpc3QoKVxuXG4gICAgLypPUC0xMDM4OiB2ZXJpZmljYSB0aWNrZXQgY29sbGVnYXRpIC0gIGUgc3UgY2lhc2N1bm8gdmVyaWZpY2EgY2FtcGkgb2JibGlnYXRvcmkqL1xuICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKVxuICAgIGZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbEluSXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHtcbiAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcblxuICAgICAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICByZWxhdGVzSW5Jc3N1ZUxpbms9dHJ1ZVxuICAgICAgICAgICAgbGlua2VkVGlja2V0cy5hZGQoaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiSXNzdWUgY29uIHJlbGF0ZXNJbklzc3VlTGlua1wiXG4gICAgICAgIH1cbiAgICB9XG4gICAgTGlzdDxJc3N1ZUxpbms+IGFsbE91dElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgIHJlbGF0ZXNPdXRJc3N1ZUxpbms9dHJ1ZVxuICAgICAgICAgICAgbGlua2VkVGlja2V0cy5hZGQoaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkpXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJJc3N1ZSBjb24gcmVsYXRlc091dElzc3VlTGlua1wiXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKkFycmF5IHdhcm5pbmdzIGVkIGVycm9ycyBwZXIgbGUgaXNzdWUgbGlua2F0ZSwgdW5vIHBlciBvZ25pIHRpcG9sb2dpYSBkaSBlcnJvcmUgbyB3YXJuaW5nKi9cbiAgICBkZWYgd2FybmluZ3NNYXRMaW5rZWRJc3N1ZXMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgd2FybmluZ3NSYXRlTGlua2VkSXNzdWVzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgLy9kZWYgZXJyb3JzTGlua2VkSXNzdWVzID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICBmb3IoaSBpbiBsaW5rZWRUaWNrZXRzKXtcbiAgICAgICAgaXNzdWU9aSBhcyBJc3N1ZVxuXG4gICAgICAgIC8qQXJyYXkgd2FybmluZ3MgZWQgZXJyb3JzIHBlciBsYSBzaW5nb2xhIGlzc3VlIGxpbmthdGEsIHVubyBwZXIgb2duaSB0aXBvbG9naWEgZGkgZXJyb3JlIG8gd2FybmluZyovXG4gICAgICAgIGRlZiB3YXJuaW5nRW1wdHlRdW90ZVJhdGVTdXBwbGllciA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICBkZWYgd2FybmluZ0VtcHR5UXVvdGVNYXRTdXBwbGllciA9IG5ldyBBcnJheUxpc3QoKSBcbiAgICAgICAgLy9kZWYgZXJyb3IuLi5cblxuICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1QcmljZSkhPW51bGwgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUHJpY2UpLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpKXtcbiAgICAgICAgICAgIC8qQ29udGFiaWxpenphemlvbmUgYSBjb3JwbyovXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJDb250YWJpbGl6emF6aW9uZSBhIGNvcnBvXCJcbiAgICAgICAgICAgIC8vT1BBQV9MVU1QX1NVTV9SQVRFU1xuICAgICAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUmF0ZXMpIT1udWxsICYmIChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUmF0ZXMpICE9IFwiXCIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobHVtcFN1bVJhdGVzKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSl7XG4gICAgICAgICAgICAgICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovXG4gICAgICAgICAgICAgICAgLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzXG4gICAgICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyAgXG4gICAgICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XG4gICAgICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbiAgICAgICAgICAgICAgICBkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcblxuICAgICAgICAgICAgICAgIGRlZiBsc1JhdGVzTGlzdCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobHVtcFN1bVJhdGVzKVxuXG4gICAgICAgICAgICAgICAgZm9yKGxzIGluIGxzUmF0ZXNMaXN0KXtcbiAgICAgICAgICAgICAgICAgICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0XG4gICAgICAgICAgICAgICAgICAgIGRlZiBsc1JhdGU9bHMudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICBkZWYgbHNSYXRlS2V5ID0gbHNSYXRlLnN1YnN0cmluZyhsc1JhdGUuaW5kZXhPZignKCcpKzEsbHNSYXRlLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICAgICAgZGVmIGxzUmF0ZU9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihsc1JhdGVLZXkpXG4gICAgICAgICAgICAgICAgICAgIC8vZ2V0IFwiREVMRVRFRFwiIGZvciB0aGF0IGNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICBkZWYgbHNEZWwgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSkgPyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkgOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgIGRlZiBsc0RlbFZhbHVlID0gbHNEZWwgIT0gXCJcIiA/IGxzRGVsLnN1YnN0cmluZyhsc0RlbC5pbmRleE9mKCcoJykrMSxsc0RlbC5pbmRleE9mKCcpJykpIDogXCJcIlxuXG4gICAgICAgICAgICAgICAgICAgIC8vZ2V0IFwiQVBQTElFRF9UT1wiIGZvciB0aGF0IHJhdGVcbiAgICAgICAgICAgICAgICAgICAgZGVmIGxzQXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxzUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuYXBwbGllZFRvJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgZGVmIGxzQXBwbGllZFRvVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxzQXBwbGllZFRvKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxzQXBwbGllZFRvVmFsdWUgPSBsc0FwcGxpZWRUby5zdWJzdHJpbmcobHNBcHBsaWVkVG8uaW5kZXhPZignKCcpKzEsbHNBcHBsaWVkVG8uaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZGVmIGxzUmF0ZVJlZiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsc1JhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuXG4gICAgICAgICAgICAgICAgICAgIGRlZiBsc1JhdGVSZWZLZXlcbiAgICAgICAgICAgICAgICAgICAgZGVmIGxzUmF0ZVJlZlZhbHVlXG4gICAgICAgICAgICAgICAgICAgIGlmKGxzUmF0ZVJlZi5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxzUmF0ZVJlZiA9IGxzUmF0ZVJlZi50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICBsc1JhdGVSZWZLZXkgPSBsc1JhdGVSZWYuc3Vic3RyaW5nKGxzUmF0ZVJlZi5pbmRleE9mKCcoJykrMSxsc1JhdGVSZWYuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmIGxzUmF0ZVJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihETyArIGxzUmF0ZVJlZktleSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGxzUmF0ZVJlZlZhbHVlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxzUmF0ZVJlZk9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnJhdGUuTmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICBsc1JhdGVSZWZWYWx1ZSA9IGxzUmF0ZVJlZlZhbHVlLnN1YnN0cmluZyhsc1JhdGVSZWZWYWx1ZS5pbmRleE9mKCcoJykrMSxsc1JhdGVSZWZWYWx1ZS5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZigobHNBcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscyhcIkJPVEhcIikgfHwgbHNBcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscyhcIlNVUFBMSUVSXCIpKSAmJiAhbHNEZWxWYWx1ZS5lcXVhbHMoXCJ0cnVlXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZ2V0IFwiVE9UQUxfQU1PVU5UX1NVUFBMSUVSXCIgZm9yIHRoYXQgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWYgdG90U3VwcGxpZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsc1JhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaWJvai5vblNpdGVSYXRlUmVwb3J0LnRvdFN1cHBsaWVyJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdFN1cHBsaWVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxzUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90U3VwcGxpZXInXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCF0b3RTdXBwbGllciB8fCB0b3RTdXBwbGllclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMC4wXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdFbXB0eVF1b3RlUmF0ZVN1cHBsaWVyLmFkZChsc1JhdGVSZWZWYWx1ZS50b1N0cmluZygpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArIFwiIHdhcm5pbmdFbXB0eVF1b3RlUmF0ZVN1cHBsaWVyOiBcIiArIHdhcm5pbmdFbXB0eVF1b3RlUmF0ZVN1cHBsaWVyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICAgIFxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgLypDb250YWJpbGl6emF6aW9uZSBub24gYSBjb3JwbyovXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJDb250YWJpbGl6emF6aW9uZSBOT04gYSBjb3Jwb1wiXG5cbiAgICAgICAgICAgIC8vT1BBQV9SRVBMQUNFRF9NQVRFUklBTFNcbiAgICAgICAgICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKSAhPSBcIlwiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpe1xuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIk1hdGVyaWFsaTogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscylcbiAgICAgICAgICAgICAgICAvKkNpY2xhcmUgdHV0dGkgZ2xpIG9nZ2V0dGkgYXNzb2NpYXRpIGFsIGNhbXBvKi9cbiAgICAgICAgICAgICAgICAvL2luc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHNcbiAgICAgICAgICAgICAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7ICBcbiAgICAgICAgICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTtcbiAgICAgICAgICAgICAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xuICAgICAgICAgICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4gICAgICAgICAgICAgICAgZGVmIHJlcE1hdExpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscylcblxuICAgICAgICAgICAgICAgIGZvcihtYXQgaW4gcmVwTWF0TGlzdCl7XG4gICAgICAgICAgICAgICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdFxuICAgICAgICAgICAgICAgICAgICBkZWYgY29tcG9uZW50PW1hdC50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIGRlZiBjb21wb25lbnRLZXkgPSBjb21wb25lbnQuc3Vic3RyaW5nKGNvbXBvbmVudC5pbmRleE9mKCcoJytPUEFBKSsxLGNvbXBvbmVudC5sZW5ndGgoKS0xKVxuICAgICAgICAgICAgICAgICAgICBkZWYgY29tcG9uZW50T2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGNvbXBvbmVudEtleSlcbiAgICAgICAgICAgICAgICAgICAgLy9nZXQgXCJERUxFVEVEXCIgZm9yIHRoYXQgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgIGRlZiBtYXREZWwgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSkgPyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkgOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgIGRlZiBtYXREZWxWYWx1ZSA9IG1hdERlbCAhPSBcIlwiID8gbWF0RGVsLnN1YnN0cmluZyhtYXREZWwuaW5kZXhPZignKCcpKzEsbWF0RGVsLmluZGV4T2YoJyknKSkgOiBcIlwiXG5cbiAgICAgICAgICAgICAgICAgICAgLy9nZXQgXCJBUFBMSUVEX1RPXCIgZm9yIHRoYXQgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgIGRlZiBhcHBsaWVkVG9cbiAgICAgICAgICAgICAgICAgICAgZGVmIGFwcGxpZWRUb1ZhbHVlXG4gICAgICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKSBhcyBBcnJheUxpc3RcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFwcGxpZWRUby5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBsaWVkVG8gPSBhcHBsaWVkVG8udG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGxpZWRUb1ZhbHVlID0gYXBwbGllZFRvLnN1YnN0cmluZyhhcHBsaWVkVG8uaW5kZXhPZignKCcpKzEsYXBwbGllZFRvLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJhcHBsaWVkVG9WYWx1ZTogXCIgKyBhcHBsaWVkVG9WYWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZGVmIG1hdE51bWJlclxuICAgICAgICAgICAgICAgICAgICBkZWYgbWF0TnVtYmVyS2V5XG4gICAgICAgICAgICAgICAgICAgIGRlZiBtYXROdW1iZXJWYWx1ZVxuICAgICAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50Lm1hdGVyaWFsUmVmJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0TnVtYmVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5tYXRlcmlhbFJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKSBhcyBBcnJheUxpc3RcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKG1hdE51bWJlci5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXROdW1iZXIgPSBtYXROdW1iZXIudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdE51bWJlcktleSA9IG1hdE51bWJlci5zdWJzdHJpbmcobWF0TnVtYmVyLmluZGV4T2YoJygnKSsxLG1hdE51bWJlci5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIG1hdE51bWJlck9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihEQk9iamVjdHMgKyBtYXROdW1iZXJLZXkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0TnVtYmVyVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obWF0TnVtYmVyT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoubWF0ZXJpYWwubmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0TnVtYmVyVmFsdWUgPSBtYXROdW1iZXJWYWx1ZS5zdWJzdHJpbmcobWF0TnVtYmVyVmFsdWUuaW5kZXhPZignKCcpKzEsbWF0TnVtYmVyVmFsdWUuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZGVmIHNlcmlhbE51bWJlclxuICAgICAgICAgICAgICAgICAgICBkZWYgc2VyaWFsTnVtYmVyVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5zZXJpYWxOdW1iZXInXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXJpYWxOdW1iZXIgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnNlcmlhbE51bWJlciddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKSBhcyBBcnJheUxpc3RcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNlcmlhbE51bWJlci5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJpYWxOdW1iZXIgPSBzZXJpYWxOdW1iZXIudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcmlhbE51bWJlclZhbHVlID0gc2VyaWFsTnVtYmVyLnN1YnN0cmluZyhzZXJpYWxOdW1iZXIuaW5kZXhPZignKCcpKzEsc2VyaWFsTnVtYmVyLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmKGFwcGxpZWRUb1ZhbHVlICYmICFtYXREZWxWYWx1ZS5lcXVhbHMoXCJ0cnVlXCIpICYmIChhcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscyhcIkJPVEhcIikgfHwgYXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoXCJTVVBQTElFUlwiKSkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9nZXQgXCJUT1RBTF9BTU9VTlRfU1VQUExJRVJcIiBmb3IgdGhhdCBjb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIkFwcGxpZWRUbyB2ZXJpZmljYXRvID0+IFwiICsgb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RTdXBwJ10udG9TdHJpbmcoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZiB0b3RTdXBwbGllciBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQudG90U3VwcCddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RTdXBwbGllciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQudG90U3VwcCddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXRvdFN1cHBsaWVyIHx8IHRvdFN1cHBsaWVyWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIwLjBcIikpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzPXRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nRW1wdHlRdW90ZU1hdFN1cHBsaWVyLmFkZChtYXROdW1iZXJWYWx1ZS50b1N0cmluZygpICsgKCFzZXJpYWxOdW1iZXIudG9TdHJpbmcoKS5lcXVhbHMoXCJbXVwiKSA/IFwiIChcIiArIHNlcmlhbE51bWJlclZhbHVlLnRvU3RyaW5nKCkgKyBcIilcIiA6IFwiICgpXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArIFwiIHdhcm5pbmdFbXB0eVF1b3RlTWF0U3VwcGxpZXI6IFwiKyB3YXJuaW5nRW1wdHlRdW90ZU1hdFN1cHBsaWVyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICAgIFxuICAgICAgICAgICAgfSAgXG5cbiAgICAgICAgICAgIC8vT1BBQV9VTkFUQU5UVU1fUkFURVNcbiAgICAgICAgICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodW5hVGFudHVtUmF0ZXMpIT1udWxsICYmIChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcykgIT0gXCJcIiAmJiAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcykudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpe1xuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlVuYSB0YW50dW0gcmF0ZXM6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcylcbiAgICAgICAgICAgICAgICAvKkNpY2xhcmUgdHV0dGkgZ2xpIG9nZ2V0dGkgYXNzb2NpYXRpIGFsIGNhbXBvKi9cbiAgICAgICAgICAgICAgICAvL2luc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHNcbiAgICAgICAgICAgICAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7ICBcbiAgICAgICAgICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTtcbiAgICAgICAgICAgICAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xuICAgICAgICAgICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4gICAgICAgICAgICAgICAgZGVmIHVtUmF0ZXNMaXN0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcylcblxuICAgICAgICAgICAgICAgIGZvcih1bSBpbiB1bVJhdGVzTGlzdCl7XG4gICAgICAgICAgICAgICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdFxuICAgICAgICAgICAgICAgICAgICBkZWYgdW1SYXRlPXVtLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgZGVmIHVtUmF0ZUtleSA9IHVtUmF0ZS5zdWJzdHJpbmcodW1SYXRlLmluZGV4T2YoJygnKSsxLHVtUmF0ZS5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4odW1SYXRlS2V5KVxuICAgICAgICAgICAgICAgICAgICAvL2dldCBcIkRFTEVURURcIiBmb3IgdGhhdCBjb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgZGVmIHVtRGVsID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHVtUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuZGVsZXRlZCddLnRvU3RyaW5nKCkpID8gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHVtUmF0ZS5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuZGVsZXRlZCddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpIDogXCJcIlxuICAgICAgICAgICAgICAgICAgICBkZWYgdW1EZWxWYWx1ZSA9IHVtRGVsICE9IFwiXCIgPyB1bURlbC5zdWJzdHJpbmcodW1EZWwuaW5kZXhPZignKCcpKzEsdW1EZWwuaW5kZXhPZignKScpKSA6IFwiXCJcblxuICAgICAgICAgICAgICAgICAgICAvL2dldCBcIkFQUExJRURfVE9cIiBmb3IgdGhhdCByYXRlXG4gICAgICAgICAgICAgICAgICAgIGRlZiB1bUFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIGRlZiB1bUFwcGxpZWRUb1ZhbHVlID0gdW1BcHBsaWVkVG8uc3Vic3RyaW5nKHVtQXBwbGllZFRvLmluZGV4T2YoJygnKSsxLHVtQXBwbGllZFRvLmluZGV4T2YoJyknKSlcblxuICAgICAgICAgICAgICAgICAgICBkZWYgdW1SYXRlUmVmXG4gICAgICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bVJhdGVSZWY9b2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHVtUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQucmF0ZVJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGVmIHRlY2hSZWZcbiAgICAgICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHVtUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudGVjaG5pY2lhblJlZiddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlY2hSZWY9b2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHVtUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudGVjaG5pY2lhblJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBkZWYgdW1SYXRlUmVmS2V5XG4gICAgICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVSZWZWYWx1ZVxuICAgICAgICAgICAgICAgICAgICBpZih1bVJhdGVSZWYpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdW1SYXRlUmVmID0gdW1SYXRlUmVmLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgIHVtUmF0ZVJlZktleSA9IHVtUmF0ZVJlZi5zdWJzdHJpbmcodW1SYXRlUmVmLmluZGV4T2YoJygnKSsxLHVtUmF0ZVJlZi5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWYgdW1SYXRlUmVmT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKERPICsgdW1SYXRlUmVmS2V5KVxuICAgICAgICAgICAgICAgICAgICAgICAgdW1SYXRlUmVmVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoucmF0ZS5OYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgIHVtUmF0ZVJlZlZhbHVlID0gdW1SYXRlUmVmVmFsdWUuc3Vic3RyaW5nKHVtUmF0ZVJlZlZhbHVlLmluZGV4T2YoJygnKSsxLHVtUmF0ZVJlZlZhbHVlLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGRlZiB0ZWNoUmVmS2V5XG4gICAgICAgICAgICAgICAgICAgIGRlZiB0ZWNoUmVmVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgaWYodGVjaFJlZil7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZWNoUmVmID0gdGVjaFJlZi50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ0ZWNoUmVmOiBcIiArIHRlY2hSZWZcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlY2hSZWZLZXkgPSB0ZWNoUmVmLnN1YnN0cmluZyh0ZWNoUmVmLmluZGV4T2YoJygnKSsxLHRlY2hSZWYuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmIHVtUmF0ZVJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihETyArIHVtUmF0ZVJlZktleSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlY2hSZWZWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoudGVjaG5pY2lhbi5uYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlY2hSZWZWYWx1ZSA9IHRlY2hSZWZWYWx1ZS5zdWJzdHJpbmcodGVjaFJlZlZhbHVlLmluZGV4T2YoJygnKSsxLHRlY2hSZWZWYWx1ZS5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZigodW1BcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscyhcIkJPVEhcIikgfHwgdW1BcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscyhcIlNVUFBMSUVSXCIpKSAmJiAhdW1EZWxWYWx1ZS5lcXVhbHMoXCJ0cnVlXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZ2V0IFwiVE9UQUxfQU1PVU5UX1NVUFBMSUVSXCIgZm9yIHRoYXQgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWYgdG90U3VwcGxpZXIgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lib2oub25TaXRlUmF0ZVJlcG9ydC50b3RTdXBwbGllciddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RTdXBwbGllcj1vYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lib2oub25TaXRlUmF0ZVJlcG9ydC50b3RTdXBwbGllciddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXRvdFN1cHBsaWVyIHx8IHRvdFN1cHBsaWVyWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIwLjBcIikpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzPXRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nRW1wdHlRdW90ZVJhdGVTdXBwbGllci5hZGQodW1SYXRlUmVmVmFsdWUudG9TdHJpbmcoKSArIFwiIChcIiArIHRlY2hSZWZWYWx1ZS50b1N0cmluZygpICsgXCIpXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIgd2FybmluZ0VtcHR5UXVvdGVSYXRlU3VwcGxpZXI6IFwiICsgd2FybmluZ0VtcHR5UXVvdGVSYXRlU3VwcGxpZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gICAgXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vT1BBQV9MQUJPVVJfUkFURVNcbiAgICAgICAgICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpIT1udWxsICYmIChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcykgIT0gXCJcIiAmJiAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcykudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpe1xuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIkxhYm91ciByYXRlczogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxhYm91clJhdGVzKVxuICAgICAgICAgICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qL1xuICAgICAgICAgICAgICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50c1xuICAgICAgICAgICAgICAgIENsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTsgIFxuICAgICAgICAgICAgICAgIENsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuICAgICAgICAgICAgICAgIGRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XG4gICAgICAgICAgICAgICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XG5cbiAgICAgICAgICAgICAgICBkZWYgbGFib3VyUmF0ZXNMaXN0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcylcblxuICAgICAgICAgICAgICAgIGZvcihsYiBpbiBsYWJvdXJSYXRlc0xpc3Qpe1xuICAgICAgICAgICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3RcbiAgICAgICAgICAgICAgICAgICAgZGVmIGxiUmF0ZT1sYi50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIGRlZiBsYlJhdGVLZXkgPSBsYlJhdGUuc3Vic3RyaW5nKGxiUmF0ZS5pbmRleE9mKCcoJykrMSxsYlJhdGUuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgICAgICBkZWYgbGJSYXRlT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGxiUmF0ZUtleSlcbiAgICAgICAgICAgICAgICAgICAgLy9nZXQgXCJERUxFVEVEXCIgZm9yIHRoYXQgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgIGRlZiBsYkRlbCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKSA/IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGUuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKSA6IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgZGVmIGxiRGVsVmFsdWUgPSBsYkRlbCAhPSBcIlwiID8gbGJEZWwuc3Vic3RyaW5nKGxiRGVsLmluZGV4T2YoJygnKSsxLGxiRGVsLmluZGV4T2YoJyknKSkgOiBcIlwiXG5cbiAgICAgICAgICAgICAgICAgICAgLy9nZXQgXCJBUFBMSUVEX1RPXCIgZm9yIHRoYXQgcmF0ZVxuICAgICAgICAgICAgICAgICAgICBkZWYgbGJBcHBsaWVkVG8gPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICBkZWYgbGJBcHBsaWVkVG9WYWx1ZSA9IGxiQXBwbGllZFRvLnN1YnN0cmluZyhsYkFwcGxpZWRUby5pbmRleE9mKCcoJykrMSxsYkFwcGxpZWRUby5pbmRleE9mKCcpJykpXG5cbiAgICAgICAgICAgICAgICAgICAgZGVmIGxiUmF0ZVJlZiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuXG4gICAgICAgICAgICAgICAgICAgIGRlZiB0ZWNoUmVmXG4gICAgICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaWJvai5vblNpdGVSYXRlUmVwb3J0LnRlY2huaWNpYW5SZWYnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZWNoUmVmPW9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaWJvai5vblNpdGVSYXRlUmVwb3J0LnRlY2huaWNpYW5SZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZGVmIGxiUmF0ZVJlZktleVxuICAgICAgICAgICAgICAgICAgICBkZWYgbGJSYXRlUmVmVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgaWYobGJSYXRlUmVmLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgbGJSYXRlUmVmID0gbGJSYXRlUmVmLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgIGxiUmF0ZVJlZktleSA9IGxiUmF0ZVJlZi5zdWJzdHJpbmcobGJSYXRlUmVmLmluZGV4T2YoJygnKSsxLGxiUmF0ZVJlZi5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWYgbGJSYXRlUmVmT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKERPICsgbGJSYXRlUmVmS2V5KVxuICAgICAgICAgICAgICAgICAgICAgICAgbGJSYXRlUmVmVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoucmF0ZS5OYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgIGxiUmF0ZVJlZlZhbHVlID0gbGJSYXRlUmVmVmFsdWUuc3Vic3RyaW5nKGxiUmF0ZVJlZlZhbHVlLmluZGV4T2YoJygnKSsxLGxiUmF0ZVJlZlZhbHVlLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGRlZiB0ZWNoUmVmS2V5XG4gICAgICAgICAgICAgICAgICAgIGRlZiB0ZWNoUmVmVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgaWYodGVjaFJlZil7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZWNoUmVmID0gdGVjaFJlZi50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZWNoUmVmS2V5ID0gdGVjaFJlZi5zdWJzdHJpbmcodGVjaFJlZi5pbmRleE9mKCcoJykrMSx0ZWNoUmVmLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZiB0ZWNoUmVmT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKE9QQUEgKyB0ZWNoUmVmS2V5KVxuICAgICAgICAgICAgICAgICAgICAgICAgdGVjaFJlZlZhbHVlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai50ZWNobmljaWFuLm5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGVjaFJlZlZhbHVlID0gbGJSYXRlUmVmVmFsdWUuc3Vic3RyaW5nKHRlY2hSZWZWYWx1ZS5pbmRleE9mKCcoJykrMSx0ZWNoUmVmVmFsdWUuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoKGxiQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoXCJCT1RIXCIpIHx8IGxiQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoXCJTVVBQTElFUlwiKSkgJiYgIWxiRGVsVmFsdWUuZXF1YWxzKFwidHJ1ZVwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2dldCBcIlRPVEFMX0FNT1VOVF9TVVBQTElFUlwiIGZvciB0aGF0IGNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmIHRvdFN1cHBsaWVyIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90U3VwcGxpZXInXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90U3VwcGxpZXIgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lib2oub25TaXRlUmF0ZVJlcG9ydC50b3RTdXBwbGllciddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXRvdFN1cHBsaWVyIHx8IHRvdFN1cHBsaWVyWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIwLjBcIikpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzPXRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nRW1wdHlRdW90ZVJhdGVTdXBwbGllci5hZGQobGJSYXRlUmVmVmFsdWUudG9TdHJpbmcoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIiB3YXJuaW5nRW1wdHlRdW90ZVJhdGVTdXBwbGllcjogXCIgKyB3YXJuaW5nRW1wdHlRdW90ZVJhdGVTdXBwbGllclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSAgICBcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9PUEFBX1RSQVZFTF9SQVRFU1xuICAgICAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmF2ZWxSYXRlcykhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYXZlbFJhdGVzKSAhPSBcIlwiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYXZlbFJhdGVzKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSl7XG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiVHJhdmVsIHJhdGVzOiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsUmF0ZXMpXG4gICAgICAgICAgICAgICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovXG4gICAgICAgICAgICAgICAgLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzXG4gICAgICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyAgXG4gICAgICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XG4gICAgICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbiAgICAgICAgICAgICAgICBkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcblxuICAgICAgICAgICAgICAgIGRlZiB0cmF2ZWxSYXRlc0xpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYXZlbFJhdGVzKVxuXG4gICAgICAgICAgICAgICAgZm9yKHRyIGluIHRyYXZlbFJhdGVzTGlzdCl7XG4gICAgICAgICAgICAgICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdFxuICAgICAgICAgICAgICAgICAgICBkZWYgdHJSYXRlPXRyLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgZGVmIHRyUmF0ZUtleSA9IHRyUmF0ZS5zdWJzdHJpbmcodHJSYXRlLmluZGV4T2YoJygnKSsxLHRyUmF0ZS5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgICAgIGRlZiB0clJhdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4odHJSYXRlS2V5KVxuICAgICAgICAgICAgICAgICAgICAvL2dldCBcIkRFTEVURURcIiBmb3IgdGhhdCBjb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgZGVmIHRyRGVsID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuZGVsZXRlZCddLnRvU3RyaW5nKCkpID8gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZS5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuZGVsZXRlZCddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpIDogXCJcIlxuICAgICAgICAgICAgICAgICAgICBkZWYgdHJEZWxWYWx1ZSA9IHRyRGVsICE9IFwiXCIgPyB0ckRlbC5zdWJzdHJpbmcodHJEZWwuaW5kZXhPZignKCcpKzEsdHJEZWwuaW5kZXhPZignKScpKSA6IFwiXCJcblxuICAgICAgICAgICAgICAgICAgICAvL2dldCBcIkFQUExJRURfVE9cIiBmb3IgdGhhdCByYXRlXG4gICAgICAgICAgICAgICAgICAgIGRlZiB0ckFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIGRlZiB0ckFwcGxpZWRUb1ZhbHVlID0gdHJBcHBsaWVkVG8uc3Vic3RyaW5nKHRyQXBwbGllZFRvLmluZGV4T2YoJygnKSsxLHRyQXBwbGllZFRvLmluZGV4T2YoJyknKSlcblxuICAgICAgICAgICAgICAgICAgICBkZWYgdHJSYXRlUmVmID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQucmF0ZVJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG5cbiAgICAgICAgICAgICAgICAgICAgZGVmIHRyUmF0ZVJlZktleVxuICAgICAgICAgICAgICAgICAgICBkZWYgdHJSYXRlUmVmVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgaWYodHJSYXRlUmVmLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJSYXRlUmVmID0gdHJSYXRlUmVmLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyUmF0ZVJlZktleSA9IHRyUmF0ZVJlZi5zdWJzdHJpbmcodHJSYXRlUmVmLmluZGV4T2YoJygnKSsxLHRyUmF0ZVJlZi5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWYgdHJSYXRlUmVmT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKERPICsgdHJSYXRlUmVmS2V5KVxuICAgICAgICAgICAgICAgICAgICAgICAgdHJSYXRlUmVmVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odHJSYXRlUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoucmF0ZS5OYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyUmF0ZVJlZlZhbHVlID0gdHJSYXRlUmVmVmFsdWUuc3Vic3RyaW5nKHRyUmF0ZVJlZlZhbHVlLmluZGV4T2YoJygnKSsxLHRyUmF0ZVJlZlZhbHVlLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmKCh0ckFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKFwiQk9USFwiKSB8fCB0ckFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKFwiU1VQUExJRVJcIikpICYmICF0ckRlbFZhbHVlLmVxdWFscyhcInRydWVcIikpe1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9nZXQgXCJUT1RBTF9BTU9VTlRfU1VQUExJRVJcIiBmb3IgdGhhdCBjb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZiB0b3RTdXBwbGllclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90U3VwcGxpZXInXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90U3VwcGxpZXI9b2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90U3VwcGxpZXInXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCF0b3RTdXBwbGllciB8fCB0b3RTdXBwbGllclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMC4wXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ0VtcHR5UXVvdGVSYXRlU3VwcGxpZXIuYWRkKHRyUmF0ZVJlZlZhbHVlLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIgd2FybmluZ0VtcHR5UXVvdGVSYXRlU3VwcGxpZXI6IFwiICsgd2FybmluZ0VtcHR5UXVvdGVSYXRlU3VwcGxpZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gICAgXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG4gICAgICAgIC8qVmVyaWZpY28gbGEgcHJlc2VuemEgZGkgZXJyb3JpIGUgd2FybmluZyBzdWxsYSBpc3N1ZSBjb3JyZW50ZSBlLCBzZSBwcmVzZW50aSwgbGkgYWdnaXVuZ28gYWdsaSBhcnJheSBkZWdsaSBlcnJvcmkgZSB3YXJuaW5nIGRlbGxlIGlzc3VlIGxpbmthdGUqL1xuICAgICAgICBpZih3YXJuaW5nRW1wdHlRdW90ZU1hdFN1cHBsaWVyLnNpemUoKT4wKXtcbiAgICAgICAgICAgIGRlZiBvYmpMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICBvYmpMaXN0LmFkZChpc3N1ZSlcbiAgICAgICAgICAgIG9iakxpc3QuYWRkKHdhcm5pbmdFbXB0eVF1b3RlTWF0U3VwcGxpZXIpXG4gICAgICAgICAgICB3YXJuaW5nc01hdExpbmtlZElzc3Vlcy5hZGQob2JqTGlzdClcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHdhcm5pbmdFbXB0eVF1b3RlUmF0ZVN1cHBsaWVyLnNpemUoKT4wKXtcbiAgICAgICAgICAgIGRlZiBvYmpMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICBvYmpMaXN0LmFkZChpc3N1ZSlcbiAgICAgICAgICAgIG9iakxpc3QuYWRkKHdhcm5pbmdFbXB0eVF1b3RlUmF0ZVN1cHBsaWVyKVxuICAgICAgICAgICAgd2FybmluZ3NSYXRlTGlua2VkSXNzdWVzLmFkZChvYmpMaXN0KVxuICAgICAgICB9XG5cbiAgICAgICAgLy9pZihlcnJvcnMuLi4pXG5cbiAgICB9XG5cbiAgICBsb2cuZGVidWcgXCJ3YXJuaW5nc01hdExpbmtlZElzc3VlczogXCIgKyB3YXJuaW5nc01hdExpbmtlZElzc3Vlc1xuICAgIGxvZy5kZWJ1ZyBcIndhcm5pbmdzUmF0ZUxpbmtlZElzc3VlczogXCIgKyB3YXJuaW5nc1JhdGVMaW5rZWRJc3N1ZXNcblxuICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgIGlmICghZXJyb3JzICYmICF3YXJuaW5ncyl7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfWVsc2V7XG4gICAgICAgIGlmKCFlcnJvcnMgJiYgd2FybmluZ3Mpe1xuICAgICAgICAgICAgLy9TZSBjaSBzb25vIHNvbG8gd2FybmluZ3MgdmVyaWZpY28gc2UgbCd1dGVudGUgaGEgZ2lcdTAwZTAgZGljaGlhcmF0byBkaSB2b2xlciBwcm9zZWd1aXJlIGNvbXVucXVlXG4gICAgICAgICAgICAvLyAtIHRyYW5zaXRpb24gZmllbGQgXCJPUEFBX0NIRUNLX0FORF9DT05GSVJNXCI9XCJZZXNcIlxuICAgICAgICAgICAgLy8gLSBpbiBjYXNvIGNvbnRyYXJpbyBpbnZpbyBpIHdhcm5pbmcgYSBGRVxuXG4gICAgICAgICAgICAvL2xvZy5kZWJ1ZyBcInRyYW5zaXRpb25DaGVjazogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaylcbiAgICAgICAgICAgIC8vbG9nLmRlYnVnIFwicmVzdWx0OiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKVxuICAgICAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpKXtcbiAgICAgICAgICAgICAgICAvL2xvZy5kZWJ1ZyBcInJldHVybiB0cnVlIC0gdHJhbnNpdGlvbkNoZWNrID0gWWVzXCJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgZGVmIHdMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICAgICAgICAgICAgICBpZihpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlUmF0ZVN1cHBsaWVyLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHlSYXRlID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoXCJXXCIpXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoXCJTVVBQTElFUl9DT05GSVJNX0VNUFRZX1JBVEVTXCIpXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQobnVsbClcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZChpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlUmF0ZVN1cHBsaWVyKVxuXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eVJhdGUpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYoaXNzdWVXYXJuaW5nRW1wdHlRdW90ZU1hdFN1cHBsaWVyLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZSA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChcIldcIilcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoXCJTVVBQTElFUl9DT05GSVJNX0VNUFRZX01BVF9RVU9URVwiKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChudWxsKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlTWF0U3VwcGxpZXIpXG5cbiAgICAgICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYod2FybmluZ3NNYXRMaW5rZWRJc3N1ZXMuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgICAgIGZvcihvYmogaW4gd2FybmluZ3NNYXRMaW5rZWRJc3N1ZXMpe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKFwiV1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoXCJTVVBQTElFUl9DT05GSVJNX0VNUFRZX01BVF9RVU9URVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQob2JqWzBdKVxuICAgICAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQob2JqWzFdKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKHdhcm5pbmdzUmF0ZUxpbmtlZElzc3Vlcy5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgZm9yKG9iaiBpbiB3YXJuaW5nc1JhdGVMaW5rZWRJc3N1ZXMpe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmIHdMaXN0Q29uZmlybUVtcHR5UmF0ZSA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZChcIldcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoXCJTVVBQTElFUl9DT05GSVJNX0VNUFRZX1JBVEVTXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKG9ialswXSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQob2JqWzFdKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHlSYXRlKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgb3V0cHV0LmFkZCh3TGlzdClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJXXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICAgICAgICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJXXCIsIG91dHB1dC50b1N0cmluZygpKSAgIFxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICAgICAgaWYoZXJyb3JzICYmICF3YXJuaW5ncyl7XG4gICAgICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgICAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgICAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKFwiRVwiLCBvdXRwdXQudG9TdHJpbmcoKSkgICBcbiAgICAgICAgfVxuICAgICAgICBpZihlcnJvcnMgJiYgd2FybmluZ3Mpe1xuICAgICAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICBkZWYgd0xpc3QgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgICAgICAgICAgaWYoaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVTdXBwbGllci5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHlSYXRlID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZChcIldcIilcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKFwiU1VQUExJRVJfQ09ORklSTV9FTVBUWV9SQVRFU1wiKVxuICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQobnVsbClcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlU3VwcGxpZXIpXG5cbiAgICAgICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHlSYXRlKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZihpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlTWF0U3VwcGxpZXIuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgZGVmIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChcIldcIilcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChcIlNVUFBMSUVSX0NPTkZJUk1fRU1QVFlfTUFUX1FVT1RFXCIpXG4gICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQobnVsbClcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlTWF0U3VwcGxpZXIpXG5cbiAgICAgICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYod2FybmluZ3NNYXRMaW5rZWRJc3N1ZXMuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgZm9yKG9iaiBpbiB3YXJuaW5nc01hdExpbmtlZElzc3Vlcyl7XG4gICAgICAgICAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKFwiV1wiKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChcIlNVUFBMSUVSX0NPTkZJUk1fRU1QVFlfTUFUX1FVT1RFXCIpXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKG9ialswXSlcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQob2JqWzFdKVxuXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYod2FybmluZ3NSYXRlTGlua2VkSXNzdWVzLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgIGZvcihvYmogaW4gd2FybmluZ3NSYXRlTGlua2VkSXNzdWVzKXtcbiAgICAgICAgICAgICAgICAgICAgZGVmIHdMaXN0Q29uZmlybUVtcHR5UmF0ZSA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKFwiV1wiKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKFwiU1VQUExJRVJfQ09ORklSTV9FTVBUWV9SQVRFU1wiKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKG9ialswXSlcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZChvYmpbMV0pXG5cbiAgICAgICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5UmF0ZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiV0VcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgICAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKFwiV0VcIiwgb3V0cHV0LnRvU3RyaW5nKCkpICBcbiAgICAgICAgfVxuICAgIH1cbn1lbHNle1xuICAgIHJldHVybiB0cnVlXG59XG5cbiIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyCmltcG9ydCBncm9vdnkuanNvbi5Kc29uQnVpbGRlcgppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXIKCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWUKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWUKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGluawoKaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2UKCmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CmRlZiBDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRykKCklzc3VlIGlzc3VlID0gaXNzdWUKLy9QZXIgdGVzdCBkYSBjb25zb2xlCi8vSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpOwovL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKCJBQVMtMjIwMiIpCgpkZWYgZXJyb3JzID0gZmFsc2UKZGVmIHdhcm5pbmdzID0gZmFsc2UKZGVmIHJlbGF0ZXNJbklzc3VlTGluaz1mYWxzZQpkZWYgcmVsYXRlc091dElzc3VlTGluaz1mYWxzZQpkZWYgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZUxpbmtlZCA9IG5ldyBBcnJheUxpc3QoKQpkZWYgd0xpc3RDb25maXJtRW1wdHlSYXRlUXVvdGVMaW5rZWQgPSBuZXcgQXJyYXlMaXN0KCkKCmRlZiBsdW1wU3VtUHJpY2UgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmx1bXBTdW1QcmljZSddLnRvU3RyaW5nKCkpWzBdCgovKkNhbXBpIGNvbiBkYXRpIG9iYmxpZ2F0b3JpIHBlciB0aWNrZXQgbm9uIGEgY29ycG8qLwpkZWYgcmVwTWF0ZXJpYWxzID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5yZXBsYWNlZE1hdGVyaWFscyddLnRvU3RyaW5nKCkpWzBdCmRlZiB1bmFUYW50dW1SYXRlcyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YudW5hdGFudHVtUmF0ZXMnXS50b1N0cmluZygpKVswXQpkZWYgbGFib3VyUmF0ZXMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmxhYm91clJhdGVzJ10udG9TdHJpbmcoKSlbMF0KZGVmIHRyYXZlbFJhdGVzID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi50cmF2ZWxSYXRlcyddLnRvU3RyaW5nKCkpWzBdCgovKkNhbXBpIGNvbiBkYXRpIG9iYmxpZ2F0b3JpIHBlciB0aWNrZXQgYSBjb3JwbyovCmRlZiBsdW1wU3VtUmF0ZXMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmx1bXBTdW1SYXRlcyddLnRvU3RyaW5nKCkpWzBdCgovKkNvbmZlcm1hIHV0ZW50ZSBzdSB3YXJuaW5ncyovCmRlZiB0cmFuc2l0aW9uQ2hlY2sgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmNoZWNrQW5kQ29uZmlybSddLnRvU3RyaW5nKCkpWzBdCgovKkluc2lnaHQgU2NoZW1hIElEcyovCmRlZiBEQk9iamVjdHMgPSBwcm9wZXJ0aWVzWydpc2NoZW1hLmRibyddLnRvU3RyaW5nKCkgKyAiLSIKZGVmIE9QQUEgPSBwcm9wZXJ0aWVzWydpc2NoZW1hLmFhJ10udG9TdHJpbmcoKSArICItIgoKLypBcnJheSB3YXJuaW5ncyBlZCBlcnJvcnMgcGVyIGxhIGlzc3VlIHByaW5jaXBhbGUsIHVubyBwZXIgb2duaSB0aXBvbG9naWEgZGkgZXJyb3JlIG8gd2FybmluZyovCmRlZiBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlTWF0U3VwcGxpZXIgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlU3VwcGxpZXIgPSBuZXcgQXJyYXlMaXN0KCkKLy9kZWYgaXNzdWVFcnJvci4uLgoKLypWZXJpZmljYSBjYW1waSBzdSB0aWNrZXQgb2dnZXR0byBkZWxsYSB0cmFuc2F6aW9uZSovCmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobHVtcFN1bVByaWNlKSE9bnVsbCAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1QcmljZSkudG9TdHJpbmcoKS5lcXVhbHMoIlllcyIpKXsKICAgIC8qQ29udGFiaWxpenphemlvbmUgYSBjb3JwbyovCiAgICBsb2cuZGVidWcgIkNvbnRhYmlsaXp6YXppb25lIGEgY29ycG8iCiAgICAvL09QQUFfTFVNUF9TVU1fUkFURVMKICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobHVtcFN1bVJhdGVzKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobHVtcFN1bVJhdGVzKSAhPSAiIiAmJiAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUmF0ZXMpLnRvU3RyaW5nKCkuZXF1YWxzKCIiKSl7CiAgICAgICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovCiAgICAgICAgLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzCiAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGUiKTsgIAogICAgICAgIENsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUiKTsKICAgICAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpOwogICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpOwoKICAgICAgICBkZWYgbHNSYXRlc0xpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1SYXRlcykKCiAgICAgICAgZm9yKGxzIGluIGxzUmF0ZXNMaXN0KXsKICAgICAgICAgICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0CiAgICAgICAgICAgIGRlZiBsc1JhdGU9bHMudG9TdHJpbmcoKQogICAgICAgICAgICBsb2cuZGVidWcgbHNSYXRlCiAgICAgICAgICAgIGRlZiBsc1JhdGVLZXkgPSBsc1JhdGUuc3Vic3RyaW5nKGxzUmF0ZS5pbmRleE9mKCcoJykrMSxsc1JhdGUuaW5kZXhPZignKScpKQogICAgICAgICAgICBkZWYgbHNSYXRlT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGxzUmF0ZUtleSkKICAgICAgICAgICAgLy9nZXQgIkRFTEVURUQiIGZvciB0aGF0IHRoYXQgcmF0ZQoJCQlkZWYgbHNEZWwgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSkgPyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkgOiAiIgoJICAgICAgICBkZWYgbHNEZWxWYWx1ZSA9IGxzRGVsICE9ICIiID8gbHNEZWwuc3Vic3RyaW5nKGxzRGVsLmluZGV4T2YoJygnKSsxLGxzRGVsLmluZGV4T2YoJyknKSkgOiAiIgoKICAgICAgICAgICAgLy9nZXQgIkFQUExJRURfVE8iIGZvciB0aGF0IHJhdGUKICAgICAgICAgICAgZGVmIGxzQXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxzUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuYXBwbGllZFRvJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgZGVmIGxzQXBwbGllZFRvVmFsdWUKICAgICAgICAgICAgaWYgKGxzQXBwbGllZFRvKXsKICAgICAgICAgICAgICAgIGxzQXBwbGllZFRvVmFsdWUgPSBsc0FwcGxpZWRUby5zdWJzdHJpbmcobHNBcHBsaWVkVG8uaW5kZXhPZignKCcpKzEsbHNBcHBsaWVkVG8uaW5kZXhPZignKScpKQogICAgICAgICAgICB9CgogICAgICAgICAgICBkZWYgbHNSYXRlUmVmID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxzUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQucmF0ZVJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCgogICAgICAgICAgICBkZWYgbHNSYXRlUmVmS2V5CiAgICAgICAgICAgIGRlZiBsc1JhdGVSZWZWYWx1ZQogICAgICAgICAgICBpZihsc1JhdGVSZWYuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICBsc1JhdGVSZWYgPSBsc1JhdGVSZWYudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgbHNSYXRlUmVmS2V5ID0gbHNSYXRlUmVmLnN1YnN0cmluZyhsc1JhdGVSZWYuaW5kZXhPZignKCcpKzEsbHNSYXRlUmVmLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIGRlZiBsc1JhdGVSZWZPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oT1BBQSArIGxzUmF0ZVJlZktleSkKICAgICAgICAgICAgICAgIGxzUmF0ZVJlZlZhbHVlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxzUmF0ZVJlZk9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnJhdGUuTmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgICAgICAgICBsc1JhdGVSZWZWYWx1ZSA9IGxzUmF0ZVJlZlZhbHVlLnN1YnN0cmluZyhsc1JhdGVSZWZWYWx1ZS5pbmRleE9mKCcoJykrMSxsc1JhdGVSZWZWYWx1ZS5pbmRleE9mKCcpJykpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKChsc0FwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJCT1RIIikgfHwgbHNBcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscygiU1VQUExJRVIiKSkgJiYgIWxzRGVsVmFsdWUuZXF1YWxzKCJ0cnVlIikpewogICAgICAgICAgICAgICAgLy9nZXQgIlRPVEFMX0FNT1VOVF9TVVBQTElFUiIgZm9yIHRoYXQgY29tcG9uZW50CiAgICAgICAgICAgICAgICBkZWYgdG90U3VwcGxpZXIKCQkJCWlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsc1JhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaWJvai5vblNpdGVSYXRlUmVwb3J0LnRvdFN1cHBsaWVyJ10udG9TdHJpbmcoKSkpewoJCQkJCXRvdFN1cHBsaWVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxzUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90U3VwcGxpZXInXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkKCQkJCX0KICAgICAgICAgICAgICAgIGlmKCF0b3RTdXBwbGllciB8fCB0b3RTdXBwbGllclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKCIwLjAiKSl7CiAgICAgICAgICAgICAgICAgICAgd2FybmluZ3M9dHJ1ZQogICAgICAgICAgICAgICAgICAgIGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlU3VwcGxpZXIuYWRkKGxzUmF0ZVJlZlZhbHVlLnRvU3RyaW5nKCkpCiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIGlzc3VlLmtleS50b1N0cmluZygpICsgIiBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlUmF0ZVN1cHBsaWVyOiAiICsgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVTdXBwbGllcgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSAgICAKICAgIH0KCn1lbHNlewogICAgLypDb250YWJpbGl6emF6aW9uZSBub24gYSBjb3JwbyovCiAgICBsb2cuZGVidWcgIkNvbnRhYmlsaXp6YXppb25lIE5PTiBhIGNvcnBvIgoKICAgIC8vT1BBQV9SRVBMQUNFRF9NQVRFUklBTFMKICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKSAhPSAiIiAmJiAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpLnRvU3RyaW5nKCkuZXF1YWxzKCIiKSl7CiAgICAgICAgLy9sb2cuZGVidWcgIk1hdGVyaWFsaTogIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKQogICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qLwogICAgICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50cwogICAgICAgIENsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlIik7ICAKICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CiAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTsKICAgICAgICBkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTsKCiAgICAgICAgZGVmIHJlcE1hdExpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykKCiAgICAgICAgZm9yKG1hdCBpbiByZXBNYXRMaXN0KXsKICAgICAgICAgICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0CiAgICAgICAgICAgIGRlZiBjb21wb25lbnQ9bWF0LnRvU3RyaW5nKCkKICAgICAgICAgICAgZGVmIGNvbXBvbmVudEtleSA9IGNvbXBvbmVudC5zdWJzdHJpbmcoY29tcG9uZW50LmluZGV4T2YoJygnK09QQUEpKzEsY29tcG9uZW50Lmxlbmd0aCgpLTEpCiAgICAgICAgICAgIGRlZiBjb21wb25lbnRPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oY29tcG9uZW50S2V5KQogICAgICAgIAkvL2dldCAiREVMRVRFRCIgZm9yIHRoYXQgY29tcG9uZW50CgkJCWRlZiBtYXREZWwgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSkgPyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkgOiAiIgoJICAgICAgICBkZWYgbWF0RGVsVmFsdWUgPSBtYXREZWwgIT0gIiIgPyBtYXREZWwuc3Vic3RyaW5nKG1hdERlbC5pbmRleE9mKCcoJykrMSxtYXREZWwuaW5kZXhPZignKScpKSA6ICIiCgogICAgICAgICAgICAKICAgICAgICAgICAgLy9nZXQgIkFQUExJRURfVE8iIGZvciB0aGF0IGNvbXBvbmVudAogICAgICAgICAgICBkZWYgYXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuYXBwbGllZFRvJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpIGFzIEFycmF5TGlzdAogICAgICAgICAgICBkZWYgYXBwbGllZFRvVmFsdWUKICAgICAgICAgICAgaWYoYXBwbGllZFRvLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgYXBwbGllZFRvID0gYXBwbGllZFRvLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIGFwcGxpZWRUb1ZhbHVlID0gYXBwbGllZFRvLnN1YnN0cmluZyhhcHBsaWVkVG8uaW5kZXhPZignKCcpKzEsYXBwbGllZFRvLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIC8vbG9nLmRlYnVnICJhcHBsaWVkVG9WYWx1ZTogIiArIGFwcGxpZWRUb1ZhbHVlCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGRlZiBtYXROdW1iZXIKICAgICAgICAgICAgZGVmIG1hdE51bWJlcktleQogICAgICAgICAgICBkZWYgbWF0TnVtYmVyVmFsdWUKICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5tYXRlcmlhbFJlZiddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgICAgIG1hdE51bWJlciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQubWF0ZXJpYWxSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkgYXMgQXJyYXlMaXN0CiAgICAgICAgICAgICAgICBpZihtYXROdW1iZXIuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICAgICAgbWF0TnVtYmVyID0gbWF0TnVtYmVyLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgICAgICBtYXROdW1iZXJLZXkgPSBtYXROdW1iZXIuc3Vic3RyaW5nKG1hdE51bWJlci5pbmRleE9mKCcoJykrMSxtYXROdW1iZXIuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgICAgIGRlZiBtYXROdW1iZXJPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oREJPYmplY3RzICsgbWF0TnVtYmVyS2V5KQogICAgICAgICAgICAgICAgICAgIG1hdE51bWJlclZhbHVlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG1hdE51bWJlck9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm1hdGVyaWFsLm5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgIG1hdE51bWJlclZhbHVlID0gbWF0TnVtYmVyVmFsdWUuc3Vic3RyaW5nKG1hdE51bWJlclZhbHVlLmluZGV4T2YoJygnKSsxLG1hdE51bWJlclZhbHVlLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgZGVmIHNlcmlhbE51bWJlcgogICAgICAgICAgICBkZWYgc2VyaWFsTnVtYmVyVmFsdWUKICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5zZXJpYWxOdW1iZXInXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICBzZXJpYWxOdW1iZXIgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnNlcmlhbE51bWJlciddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKSBhcyBBcnJheUxpc3QKICAgICAgICAgICAgICAgIGlmKHNlcmlhbE51bWJlci5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgICAgICBzZXJpYWxOdW1iZXIgPSBzZXJpYWxOdW1iZXIudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgIHNlcmlhbE51bWJlclZhbHVlID0gc2VyaWFsTnVtYmVyLnN1YnN0cmluZyhzZXJpYWxOdW1iZXIuaW5kZXhPZignKCcpKzEsc2VyaWFsTnVtYmVyLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgaWYoKGFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJCT1RIIikgfHwgYXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoIlNVUFBMSUVSIikpICYmICFtYXREZWxWYWx1ZS5lcXVhbHMoInRydWUiKSl7CiAgICAgICAgICAgICAgICAvL2dldCAiVE9UQUxfQU1PVU5UX1NVUFBMSUVSIiBmb3IgdGhhdCBjb21wb25lbnQKICAgICAgICAgICAgICAgIGRlZiB0b3RTdXBwbGllcgogICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RTdXBwJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgICAgIHRvdFN1cHBsaWVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RTdXBwJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZighdG90U3VwcGxpZXIgfHwgdG90U3VwcGxpZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscygiMC4wIikpewogICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzPXRydWUKICAgICAgICAgICAgICAgICAgICBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlTWF0U3VwcGxpZXIuYWRkKG1hdE51bWJlclZhbHVlLnRvU3RyaW5nKCkgKyAoIXNlcmlhbE51bWJlci50b1N0cmluZygpLmVxdWFscygiW10iKSA/ICIgKCIgKyBzZXJpYWxOdW1iZXJWYWx1ZS50b1N0cmluZygpICsgIikiIDogIiAoKSIpKQogICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArICIgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZU1hdFN1cHBsaWVyOiAiICsgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZU1hdFN1cHBsaWVyCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9ICAgIAogICAgfSAgCgogICAgLy9PUEFBX1VOQVRBTlRVTV9SQVRFUwogICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcykhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHVuYVRhbnR1bVJhdGVzKSAhPSAiIiAmJiAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcykudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICBsb2cuZGVidWcgIlVuYSB0YW50dW0gcmF0ZXM6ICIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHVuYVRhbnR1bVJhdGVzKQogICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qLwogICAgICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50cwogICAgICAgIENsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlIik7ICAKICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CiAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTsKICAgICAgICBkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTsKCiAgICAgICAgZGVmIHVtUmF0ZXNMaXN0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcykKCiAgICAgICAgZm9yKHVtIGluIHVtUmF0ZXNMaXN0KXsKICAgICAgICAgICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0CiAgICAgICAgICAgIGRlZiB1bVJhdGU9dW0udG9TdHJpbmcoKQogICAgICAgICAgICBkZWYgdW1SYXRlS2V5ID0gdW1SYXRlLnN1YnN0cmluZyh1bVJhdGUuaW5kZXhPZignKCcpKzEsdW1SYXRlLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgZGVmIHVtUmF0ZU9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbih1bVJhdGVLZXkpCiAgICAgICAgICAgIAogICAgICAgICAgICBkZWYgdW1EZWwgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSkgPyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkgOiAiIgogICAgICAgICAgICBkZWYgdW1EZWxWYWx1ZSA9IHVtRGVsICE9ICIiID8gdW1EZWwuc3Vic3RyaW5nKHVtRGVsLmluZGV4T2YoJygnKSsxLHVtRGVsLmluZGV4T2YoJyknKSkgOiAiIgogICAgICAgICAgICAKICAgICAgICAgICAgLy9nZXQgIkFQUExJRURfVE8iIGZvciB0aGF0IHJhdGUKICAgICAgICAgICAgZGVmIHVtQXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHVtUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuYXBwbGllZFRvJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgZGVmIHVtQXBwbGllZFRvVmFsdWUgPSB1bUFwcGxpZWRUby5zdWJzdHJpbmcodW1BcHBsaWVkVG8uaW5kZXhPZignKCcpKzEsdW1BcHBsaWVkVG8uaW5kZXhPZignKScpKQoKICAgICAgICAgICAgZGVmIHVtUmF0ZVJlZgogICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5yYXRlUmVmJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgdW1SYXRlUmVmPW9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICB9CgogICAgICAgICAgICBkZWYgdW1SYXRlUmVmS2V5CiAgICAgICAgICAgIGRlZiB1bVJhdGVSZWZWYWx1ZQogICAgICAgICAgICBpZih1bVJhdGVSZWYpewogICAgICAgICAgICAgICAgdW1SYXRlUmVmID0gdW1SYXRlUmVmLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIHVtUmF0ZVJlZktleSA9IHVtUmF0ZVJlZi5zdWJzdHJpbmcodW1SYXRlUmVmLmluZGV4T2YoJygnKSsxLHVtUmF0ZVJlZi5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICBkZWYgdW1SYXRlUmVmT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKE9QQUEgKyB1bVJhdGVSZWZLZXkpCiAgICAgICAgICAgICAgICB1bVJhdGVSZWZWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGVSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5yYXRlLk5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgdW1SYXRlUmVmVmFsdWUgPSB1bVJhdGVSZWZWYWx1ZS5zdWJzdHJpbmcodW1SYXRlUmVmVmFsdWUuaW5kZXhPZignKCcpKzEsdW1SYXRlUmVmVmFsdWUuaW5kZXhPZignKScpKQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZigodW1BcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscygiQk9USCIpIHx8IHVtQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoIlNVUFBMSUVSIikpICYmICF1bURlbFZhbHVlLmVxdWFscygidHJ1ZSIpKXsKICAgICAgICAgICAgICAgIC8vZ2V0ICJUT1RBTF9BTU9VTlRfU1VQUExJRVIiIGZvciB0aGF0IGNvbXBvbmVudAogICAgICAgICAgICAgICAgZGVmIHRvdFN1cHBsaWVyCiAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lib2oub25TaXRlUmF0ZVJlcG9ydC50b3RTdXBwbGllciddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgICAgICAgICB0b3RTdXBwbGllciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaWJvai5vblNpdGVSYXRlUmVwb3J0LnRvdFN1cHBsaWVyJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZighdG90U3VwcGxpZXIgfHwgdG90U3VwcGxpZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscygiMC4wIikpewogICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzPXRydWUKICAgICAgICAgICAgICAgICAgICBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlUmF0ZVN1cHBsaWVyLmFkZCh1bVJhdGVSZWZWYWx1ZS50b1N0cmluZygpKQogICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArICIgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVTdXBwbGllcjogIiArIGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlU3VwcGxpZXIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0gICAgCiAgICB9CgogICAgLy9PUEFBX0xBQk9VUl9SQVRFUwogICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcykhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxhYm91clJhdGVzKSAhPSAiIiAmJiAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcykudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICBsb2cuZGVidWcgIkxhYm91ciByYXRlczogIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpCiAgICAgICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovCiAgICAgICAgLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzCiAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGUiKTsgIAogICAgICAgIENsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUiKTsKICAgICAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpOwogICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpOwoKICAgICAgICBkZWYgbGFib3VyUmF0ZXNMaXN0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcykKCiAgICAgICAgZm9yKGxiIGluIGxhYm91clJhdGVzTGlzdCl7CiAgICAgICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdAogICAgICAgICAgICBkZWYgbGJSYXRlPWxiLnRvU3RyaW5nKCkKICAgICAgICAgICAgZGVmIGxiUmF0ZUtleSA9IGxiUmF0ZS5zdWJzdHJpbmcobGJSYXRlLmluZGV4T2YoJygnKSsxLGxiUmF0ZS5pbmRleE9mKCcpJykpCiAgICAgICAgICAgIGRlZiBsYlJhdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4obGJSYXRlS2V5KQogICAgICAgICAgICAvL2dldCAiREVMRVRFRCIgZm9yIHRoYXQgcmF0ZQogICAgICAgICAgICBkZWYgbGJEZWwgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSkgPyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkgOiAiIgogICAgICAgICAgICBkZWYgbGJEZWxWYWx1ZSA9IGxiRGVsICE9ICIiID8gbGJEZWwuc3Vic3RyaW5nKGxiRGVsLmluZGV4T2YoJygnKSsxLGxiRGVsLmluZGV4T2YoJyknKSkgOiAiIgogICAgICAgICAgICAKICAgICAgICAgICAgLy9nZXQgIkFQUExJRURfVE8iIGZvciB0aGF0IHJhdGUKICAgICAgICAgICAgZGVmIGxiQXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuYXBwbGllZFRvJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgZGVmIGxiQXBwbGllZFRvVmFsdWUgPSBsYkFwcGxpZWRUby5zdWJzdHJpbmcobGJBcHBsaWVkVG8uaW5kZXhPZignKCcpKzEsbGJBcHBsaWVkVG8uaW5kZXhPZignKScpKQoKICAgICAgICAgICAgZGVmIGxiUmF0ZVJlZgoJCQlpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5yYXRlUmVmJ10udG9TdHJpbmcoKSkpewoJCQkJbGJSYXRlUmVmPW9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQoJCQl9CgoJCQlkZWYgdGVjaFJlZgogICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC50ZWNobmljaWFuUmVmJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgdGVjaFJlZj1vYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC50ZWNobmljaWFuUmVmJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgfQoJCQkKICAgICAgICAgICAgZGVmIGxiUmF0ZVJlZktleQogICAgICAgICAgICBkZWYgbGJSYXRlUmVmVmFsdWUKICAgICAgICAgICAgaWYobGJSYXRlUmVmLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgbGJSYXRlUmVmID0gbGJSYXRlUmVmLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIGxiUmF0ZVJlZktleSA9IGxiUmF0ZVJlZi5zdWJzdHJpbmcobGJSYXRlUmVmLmluZGV4T2YoJygnKSsxLGxiUmF0ZVJlZi5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICBkZWYgbGJSYXRlUmVmT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKE9QQUEgKyBsYlJhdGVSZWZLZXkpCiAgICAgICAgICAgICAgICBsYlJhdGVSZWZWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5yYXRlLk5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgbGJSYXRlUmVmVmFsdWUgPSBsYlJhdGVSZWZWYWx1ZS5zdWJzdHJpbmcobGJSYXRlUmVmVmFsdWUuaW5kZXhPZignKCcpKzEsbGJSYXRlUmVmVmFsdWUuaW5kZXhPZignKScpKQogICAgICAgICAgICB9CgkJCQoJCQlkZWYgdGVjaFJlZktleQogICAgICAgICAgICBkZWYgdGVjaFJlZlZhbHVlCiAgICAgICAgICAgIGlmKHRlY2hSZWYpewogICAgICAgICAgICAgICAgdGVjaFJlZiA9IHRlY2hSZWYudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgbG9nLmRlYnVnICJ0ZWNoUmVmOiAiICsgdGVjaFJlZgogICAgICAgICAgICAgICAgdGVjaFJlZktleSA9IHRlY2hSZWYuc3Vic3RyaW5nKHRlY2hSZWYuaW5kZXhPZignKCcpKzEsdGVjaFJlZi5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICBkZWYgdGVjaFJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihPUEFBICsgdGVjaFJlZktleSkKICAgICAgICAgICAgICAgIHRlY2hSZWZWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoudGVjaG5pY2lhbi5uYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIHRlY2hSZWZWYWx1ZSA9IGxiUmF0ZVJlZlZhbHVlLnN1YnN0cmluZyh0ZWNoUmVmVmFsdWUuaW5kZXhPZignKCcpKzEsdGVjaFJlZlZhbHVlLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYoKGxiQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoIkJPVEgiKSB8fCBsYkFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJTVVBQTElFUiIpKSAmJiAhbGJEZWxWYWx1ZS5lcXVhbHMoInRydWUiKSl7CiAgICAgICAgICAgICAgICAvL2dldCAiVE9UQUxfQU1PVU5UX1NVUFBMSUVSIiBmb3IgdGhhdCBjb21wb25lbnQKICAgICAgICAgICAgICAgIGRlZiB0b3RTdXBwbGllcgogICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90U3VwcGxpZXInXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICAgICAgdG90U3VwcGxpZXIgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lib2oub25TaXRlUmF0ZVJlcG9ydC50b3RTdXBwbGllciddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYoIXRvdFN1cHBsaWVyIHx8IHRvdFN1cHBsaWVyWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKS5lcXVhbHMoIjAuMCIpKXsKICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlCiAgICAgICAgICAgICAgICAgICAgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVTdXBwbGllci5hZGQobGJSYXRlUmVmVmFsdWUudG9TdHJpbmcoKSArICIgKCIgKyB0ZWNoUmVmVmFsdWUudG9TdHJpbmcoKSArICIpIikKICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyAiIGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlU3VwcGxpZXI6ICIgKyBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlUmF0ZVN1cHBsaWVyCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9ICAgIAogICAgfQoKICAgIC8vT1BBQV9UUkFWRUxfUkFURVMKICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsUmF0ZXMpIT1udWxsICYmIChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmF2ZWxSYXRlcykgIT0gIiIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsUmF0ZXMpLnRvU3RyaW5nKCkuZXF1YWxzKCIiKSl7CiAgICAgICAgbG9nLmRlYnVnICJUcmF2ZWwgcmF0ZXM6ICIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYXZlbFJhdGVzKQogICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qLwogICAgICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50cwogICAgICAgIENsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlIik7ICAKICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CiAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTsKICAgICAgICBkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTsKCiAgICAgICAgZGVmIHRyYXZlbFJhdGVzTGlzdCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsUmF0ZXMpCgogICAgICAgIGZvcih0ciBpbiB0cmF2ZWxSYXRlc0xpc3QpewogICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3QKICAgICAgICAgICAgZGVmIHRyUmF0ZT10ci50b1N0cmluZygpCiAgICAgICAgICAgIGRlZiB0clJhdGVLZXkgPSB0clJhdGUuc3Vic3RyaW5nKHRyUmF0ZS5pbmRleE9mKCcoJykrMSx0clJhdGUuaW5kZXhPZignKScpKQogICAgICAgICAgICBkZWYgdHJSYXRlT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHRyUmF0ZUtleSkKICAgICAgICAgICAgCiAgICAgICAgICAgIGRlZiB0ckRlbCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKSA/IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKSA6ICIiCiAgICAgICAgICAgIGRlZiB0ckRlbFZhbHVlID0gdHJEZWwgIT0gIiIgPyB0ckRlbC5zdWJzdHJpbmcodHJEZWwuaW5kZXhPZignKCcpKzEsdHJEZWwuaW5kZXhPZignKScpKSA6ICIiCiAgICAgICAgICAgIAogICAgICAgICAgICAvL2dldCAiQVBQTElFRF9UTyIgZm9yIHRoYXQgcmF0ZQogICAgICAgICAgICBkZWYgdHJBcHBsaWVkVG8gPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odHJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICBkZWYgdHJBcHBsaWVkVG9WYWx1ZSA9IHRyQXBwbGllZFRvLnN1YnN0cmluZyh0ckFwcGxpZWRUby5pbmRleE9mKCcoJykrMSx0ckFwcGxpZWRUby5pbmRleE9mKCcpJykpCgogICAgICAgICAgICBkZWYgdHJSYXRlUmVmCgkJCWlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKSl7CgkJCQl0clJhdGVSZWY9b2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQucmF0ZVJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCgkJCX0KCiAgICAgICAgICAgIGRlZiB0clJhdGVSZWZLZXkKICAgICAgICAgICAgZGVmIHRyUmF0ZVJlZlZhbHVlCiAgICAgICAgICAgIGlmKHRyUmF0ZVJlZi5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgIHRyUmF0ZVJlZiA9IHRyUmF0ZVJlZi50b1N0cmluZygpCiAgICAgICAgICAgICAgICB0clJhdGVSZWZLZXkgPSB0clJhdGVSZWYuc3Vic3RyaW5nKHRyUmF0ZVJlZi5pbmRleE9mKCcoJykrMSx0clJhdGVSZWYuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgZGVmIHRyUmF0ZVJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihPUEFBICsgdHJSYXRlUmVmS2V5KQogICAgICAgICAgICAgICAgdHJSYXRlUmVmVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odHJSYXRlUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoucmF0ZS5OYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIHRyUmF0ZVJlZlZhbHVlID0gdHJSYXRlUmVmVmFsdWUuc3Vic3RyaW5nKHRyUmF0ZVJlZlZhbHVlLmluZGV4T2YoJygnKSsxLHRyUmF0ZVJlZlZhbHVlLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYoKHRyQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoIkJPVEgiKSB8fCB0ckFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJTVVBQTElFUiIpKSAmJiAhdHJEZWxWYWx1ZS5lcXVhbHMoInRydWUiKSl7CiAgICAgICAgICAgICAgICAvL2dldCAiVE9UQUxfQU1PVU5UX1NVUFBMSUVSIiBmb3IgdGhhdCBjb21wb25lbnQKICAgICAgICAgICAgICAgIGRlZiB0b3RTdXBwbGllcgogICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90U3VwcGxpZXInXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICAgICAgdG90U3VwcGxpZXI9b2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90U3VwcGxpZXInXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKCF0b3RTdXBwbGllciB8fCB0b3RTdXBwbGllclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKCIwLjAiKSl7CiAgICAgICAgICAgICAgICAgICAgd2FybmluZ3M9dHJ1ZQogICAgICAgICAgICAgICAgICAgIGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlU3VwcGxpZXIuYWRkKHRyUmF0ZVJlZlZhbHVlLnRvU3RyaW5nKCkpCiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIGlzc3VlLmtleS50b1N0cmluZygpICsgIiBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlUmF0ZVN1cHBsaWVyOiAiICsgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVTdXBwbGllcgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSAgICAKICAgIH0KCn0KCmRlZiBsaW5rZWRUaWNrZXRzPW5ldyBBcnJheUxpc3QoKQoKLypPUC0xMDM4OiB2ZXJpZmljYSB0aWNrZXQgY29sbGVnYXRpIC0gIGUgc3UgY2lhc2N1bm8gdmVyaWZpY2EgY2FtcGkgb2JibGlnYXRvcmkqLwpMaXN0PElzc3VlTGluaz4gYWxsSW5Jc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0SW53YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSkKZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykgewogICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTsKCiAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7CiAgICAgICAgcmVsYXRlc0luSXNzdWVMaW5rPXRydWUKICAgICAgICBsaW5rZWRUaWNrZXRzLmFkZChpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkpCiAgICAgICAgbG9nLmRlYnVnICJJc3N1ZSBjb24gcmVsYXRlc0luSXNzdWVMaW5rIgogICAgfQp9Ckxpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpCmZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbE91dElzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7CiAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpOwoKICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXsKICAgICAgICByZWxhdGVzT3V0SXNzdWVMaW5rPXRydWUKICAgICAgICBsaW5rZWRUaWNrZXRzLmFkZChpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKSkKICAgICAgICBsb2cuZGVidWcgIklzc3VlIGNvbiByZWxhdGVzT3V0SXNzdWVMaW5rIgogICAgfQp9CgovKkFycmF5IHdhcm5pbmdzIGVkIGVycm9ycyBwZXIgbGUgaXNzdWUgbGlua2F0ZSwgdW5vIHBlciBvZ25pIHRpcG9sb2dpYSBkaSBlcnJvcmUgbyB3YXJuaW5nKi8KZGVmIHdhcm5pbmdzTWF0TGlua2VkSXNzdWVzID0gbmV3IEFycmF5TGlzdCgpCmRlZiB3YXJuaW5nc1JhdGVMaW5rZWRJc3N1ZXMgPSBuZXcgQXJyYXlMaXN0KCkKLy9kZWYgZXJyb3JzTGlua2VkSXNzdWVzID0gbmV3IEFycmF5TGlzdCgpCgpmb3IoaSBpbiBsaW5rZWRUaWNrZXRzKXsKICAgIGlzc3VlPWkgYXMgSXNzdWUKCiAgICAvKkFycmF5IHdhcm5pbmdzIGVkIGVycm9ycyBwZXIgbGEgc2luZ29sYSBpc3N1ZSBsaW5rYXRhLCB1bm8gcGVyIG9nbmkgdGlwb2xvZ2lhIGRpIGVycm9yZSBvIHdhcm5pbmcqLwogICAgZGVmIHdhcm5pbmdFbXB0eVF1b3RlUmF0ZVN1cHBsaWVyID0gbmV3IEFycmF5TGlzdCgpCiAgICBkZWYgd2FybmluZ0VtcHR5UXVvdGVNYXRTdXBwbGllciA9IG5ldyBBcnJheUxpc3QoKSAKICAgIC8vZGVmIGVycm9yLi4uCiAgICAKICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobHVtcFN1bVByaWNlKSE9bnVsbCAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1QcmljZSkudG9TdHJpbmcoKS5lcXVhbHMoIlllcyIpKXsKICAgICAgICAvKkNvbnRhYmlsaXp6YXppb25lIGEgY29ycG8qLwogICAgICAgIGxvZy5kZWJ1ZyAiQ29udGFiaWxpenphemlvbmUgYSBjb3JwbyIKICAgICAgICAvL09QQUFfTFVNUF9TVU1fUkFURVMKICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1SYXRlcykhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1SYXRlcykgIT0gIiIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobHVtcFN1bVJhdGVzKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgICAgICAvKkNpY2xhcmUgdHV0dGkgZ2xpIG9nZ2V0dGkgYXNzb2NpYXRpIGFsIGNhbXBvKi8KICAgICAgICAgICAgLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzCiAgICAgICAgICAgIENsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlIik7ICAKICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSIpOwogICAgICAgICAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpOwogICAgICAgICAgICBkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTsKCiAgICAgICAgICAgIGRlZiBsc1JhdGVzTGlzdCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobHVtcFN1bVJhdGVzKQoKICAgICAgICAgICAgZm9yKGxzIGluIGxzUmF0ZXNMaXN0KXsKICAgICAgICAgICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdAogICAgICAgICAgICAgICAgZGVmIGxzUmF0ZT1scy50b1N0cmluZygpCiAgICAgICAgICAgICAgICBkZWYgbHNSYXRlS2V5ID0gbHNSYXRlLnN1YnN0cmluZyhsc1JhdGUuaW5kZXhPZignKCcpKzEsbHNSYXRlLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIGRlZiBsc1JhdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4obHNSYXRlS2V5KQogICAgICAgICAgICAgICAgLy9nZXQgIkRFTEVURUQiIGZvciB0aGF0IGNvbXBvbmVudAogICAgICAgICAgICAgICAgZGVmIGxzRGVsID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxzUmF0ZS5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuZGVsZXRlZCddLnRvU3RyaW5nKCkpID8gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxzUmF0ZS5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuZGVsZXRlZCddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpIDogIiIKICAgICAgICAgICAgICAgIGRlZiBsc0RlbFZhbHVlID0gbHNEZWwgIT0gIiIgPyBsc0RlbC5zdWJzdHJpbmcobHNEZWwuaW5kZXhPZignKCcpKzEsbHNEZWwuaW5kZXhPZignKScpKSA6ICIiCgogICAgICAgICAgICAgICAgLy9nZXQgIkFQUExJRURfVE8iIGZvciB0aGF0IHJhdGUKICAgICAgICAgICAgICAgIGRlZiBsc0FwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsc1JhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgICAgICAgICBkZWYgbHNBcHBsaWVkVG9WYWx1ZQogICAgICAgICAgICAgICAgaWYgKGxzQXBwbGllZFRvKXsKICAgICAgICAgICAgICAgICAgICBsc0FwcGxpZWRUb1ZhbHVlID0gbHNBcHBsaWVkVG8uc3Vic3RyaW5nKGxzQXBwbGllZFRvLmluZGV4T2YoJygnKSsxLGxzQXBwbGllZFRvLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBkZWYgbHNSYXRlUmVmID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxzUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQucmF0ZVJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCgogICAgICAgICAgICAgICAgZGVmIGxzUmF0ZVJlZktleQogICAgICAgICAgICAgICAgZGVmIGxzUmF0ZVJlZlZhbHVlCiAgICAgICAgICAgICAgICBpZihsc1JhdGVSZWYuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICAgICAgbHNSYXRlUmVmID0gbHNSYXRlUmVmLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgICAgICBsc1JhdGVSZWZLZXkgPSBsc1JhdGVSZWYuc3Vic3RyaW5nKGxzUmF0ZVJlZi5pbmRleE9mKCcoJykrMSxsc1JhdGVSZWYuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgICAgIGRlZiBsc1JhdGVSZWZPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oT1BBQSArIGxzUmF0ZVJlZktleSkKICAgICAgICAgICAgICAgICAgICBsc1JhdGVSZWZWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsc1JhdGVSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5yYXRlLk5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgIGxzUmF0ZVJlZlZhbHVlID0gbHNSYXRlUmVmVmFsdWUuc3Vic3RyaW5nKGxzUmF0ZVJlZlZhbHVlLmluZGV4T2YoJygnKSsxLGxzUmF0ZVJlZlZhbHVlLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZigobHNBcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscygiQk9USCIpIHx8IGxzQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoIlNVUFBMSUVSIikpICYmICFsc0RlbFZhbHVlLmVxdWFscygidHJ1ZSIpKXsKICAgICAgICAgICAgICAgICAgICAvL2dldCAiVE9UQUxfQU1PVU5UX1NVUFBMSUVSIiBmb3IgdGhhdCBjb21wb25lbnQKICAgICAgICAgICAgICAgICAgICBkZWYgdG90U3VwcGxpZXIKICAgICAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lib2oub25TaXRlUmF0ZVJlcG9ydC50b3RTdXBwbGllciddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgICAgICAgICAJdG90U3VwcGxpZXIgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lib2oub25TaXRlUmF0ZVJlcG9ydC50b3RTdXBwbGllciddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZighdG90U3VwcGxpZXIgfHwgdG90U3VwcGxpZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscygiMC4wIikpewogICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlICAgIAogICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nRW1wdHlRdW90ZVJhdGVTdXBwbGllci5hZGQobHNSYXRlUmVmVmFsdWUudG9TdHJpbmcoKSkKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIGlzc3VlLmtleS50b1N0cmluZygpICsgIiB3YXJuaW5nRW1wdHlRdW90ZVJhdGVTdXBwbGllcjogIiArIHdhcm5pbmdFbXB0eVF1b3RlUmF0ZVN1cHBsaWVyCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9ICAgIAogICAgICAgIH0KCiAgICB9ZWxzZXsKICAgICAgICAvKkNvbnRhYmlsaXp6YXppb25lIG5vbiBhIGNvcnBvKi8KICAgICAgICBsb2cuZGVidWcgIkNvbnRhYmlsaXp6YXppb25lIE5PTiBhIGNvcnBvIgoKICAgICAgICAvL09QQUFfUkVQTEFDRURfTUFURVJJQUxTCiAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpIT1udWxsICYmIChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpICE9ICIiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICAgICAgbG9nLmRlYnVnICJNYXRlcmlhbGk6ICIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykKICAgICAgICAgICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovCiAgICAgICAgICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50cwogICAgICAgICAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZSIpOyAgCiAgICAgICAgICAgIENsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUiKTsKICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTsKICAgICAgICAgICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7CgogICAgICAgICAgICBkZWYgcmVwTWF0TGlzdCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKQoKICAgICAgICAgICAgZm9yKG1hdCBpbiByZXBNYXRMaXN0KXsKICAgICAgICAgICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdAogICAgICAgICAgICAgICAgZGVmIGNvbXBvbmVudD1tYXQudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgZGVmIGNvbXBvbmVudEtleSA9IGNvbXBvbmVudC5zdWJzdHJpbmcoY29tcG9uZW50LmluZGV4T2YoJygnK09QQUEpKzEsY29tcG9uZW50Lmxlbmd0aCgpLTEpCiAgICAgICAgICAgICAgICBkZWYgY29tcG9uZW50T2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGNvbXBvbmVudEtleSkKICAgICAgICAgICAgICAgIC8vZ2V0ICJERUxFVEVEIiBmb3IgdGhhdCBjb21wb25lbnQKICAgICAgICAgICAgICAgIGRlZiBtYXREZWwgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSkgPyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkgOiAiIgogICAgICAgICAgICAgICAgZGVmIG1hdERlbFZhbHVlID0gbWF0RGVsICE9ICIiID8gbWF0RGVsLnN1YnN0cmluZyhtYXREZWwuaW5kZXhPZignKCcpKzEsbWF0RGVsLmluZGV4T2YoJyknKSkgOiAiIgoKICAgICAgICAgICAgICAgIC8vZ2V0ICJBUFBMSUVEX1RPIiBmb3IgdGhhdCBjb21wb25lbnQKICAgICAgICAgICAgICAgIGRlZiBhcHBsaWVkVG8KICAgICAgICAgICAgICAgIGRlZiBhcHBsaWVkVG9WYWx1ZQogICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuYXBwbGllZFRvJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgICAgIGFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKSBhcyBBcnJheUxpc3QKICAgICAgICAgICAgICAgICAgICBpZihhcHBsaWVkVG8uc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGxpZWRUbyA9IGFwcGxpZWRUby50b1N0cmluZygpCiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGxpZWRUb1ZhbHVlID0gYXBwbGllZFRvLnN1YnN0cmluZyhhcHBsaWVkVG8uaW5kZXhPZignKCcpKzEsYXBwbGllZFRvLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnICJhcHBsaWVkVG9WYWx1ZTogIiArIGFwcGxpZWRUb1ZhbHVlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBkZWYgbWF0TnVtYmVyCiAgICAgICAgICAgICAgICBkZWYgbWF0TnVtYmVyS2V5CiAgICAgICAgICAgICAgICBkZWYgbWF0TnVtYmVyVmFsdWUKICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQubWF0ZXJpYWxSZWYnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICAgICAgbWF0TnVtYmVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5tYXRlcmlhbFJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKSBhcyBBcnJheUxpc3QKICAgICAgICAgICAgICAgICAgICBpZihtYXROdW1iZXIuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICAgICAgICAgIG1hdE51bWJlciA9IG1hdE51bWJlci50b1N0cmluZygpCiAgICAgICAgICAgICAgICAgICAgICAgIG1hdE51bWJlcktleSA9IG1hdE51bWJlci5zdWJzdHJpbmcobWF0TnVtYmVyLmluZGV4T2YoJygnKSsxLG1hdE51bWJlci5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBtYXROdW1iZXJPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oREJPYmplY3RzICsgbWF0TnVtYmVyS2V5KQogICAgICAgICAgICAgICAgICAgICAgICBtYXROdW1iZXJWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihtYXROdW1iZXJPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5tYXRlcmlhbC5uYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgICAgICAgICAgbWF0TnVtYmVyVmFsdWUgPSBtYXROdW1iZXJWYWx1ZS5zdWJzdHJpbmcobWF0TnVtYmVyVmFsdWUuaW5kZXhPZignKCcpKzEsbWF0TnVtYmVyVmFsdWUuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBkZWYgc2VyaWFsTnVtYmVyCiAgICAgICAgICAgICAgICBkZWYgc2VyaWFsTnVtYmVyVmFsdWUKICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuc2VyaWFsTnVtYmVyJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgICAgIHNlcmlhbE51bWJlciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuc2VyaWFsTnVtYmVyJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpIGFzIEFycmF5TGlzdAogICAgICAgICAgICAgICAgICAgIGlmKHNlcmlhbE51bWJlci5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWFsTnVtYmVyID0gc2VyaWFsTnVtYmVyLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWFsTnVtYmVyVmFsdWUgPSBzZXJpYWxOdW1iZXIuc3Vic3RyaW5nKHNlcmlhbE51bWJlci5pbmRleE9mKCcoJykrMSxzZXJpYWxOdW1iZXIuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZihhcHBsaWVkVG9WYWx1ZSAmJiAhbWF0RGVsVmFsdWUuZXF1YWxzKCJ0cnVlIikgJiYgKGFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJCT1RIIikgfHwgYXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoIlNVUFBMSUVSIikpKXsKICAgICAgICAgICAgICAgICAgICAvL2dldCAiVE9UQUxfQU1PVU5UX1NVUFBMSUVSIiBmb3IgdGhhdCBjb21wb25lbnQKICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgIkFwcGxpZWRUbyB2ZXJpZmljYXRvID0+ICIgKyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdFN1cHAnXS50b1N0cmluZygpKQogICAgICAgICAgICAgICAgICAgIGRlZiB0b3RTdXBwbGllciAKICAgICAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdFN1cHAnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICAgICAgCXRvdFN1cHBsaWVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RTdXBwJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpCiAgICAgICAgICAgICAgICAgICAgfQoJCQkJCWlmKCF0b3RTdXBwbGllciB8fCB0b3RTdXBwbGllclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKCIwLjAiKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzPXRydWUKICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ0VtcHR5UXVvdGVNYXRTdXBwbGllci5hZGQobWF0TnVtYmVyVmFsdWUudG9TdHJpbmcoKSArICghc2VyaWFsTnVtYmVyLnRvU3RyaW5nKCkuZXF1YWxzKCJbXSIpID8gIiAoIiArIHNlcmlhbE51bWJlclZhbHVlLnRvU3RyaW5nKCkgKyAiKSIgOiAiICgpIikpCiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArICIgd2FybmluZ0VtcHR5UXVvdGVNYXRTdXBwbGllcjogIisgd2FybmluZ0VtcHR5UXVvdGVNYXRTdXBwbGllcgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSAgICAKICAgICAgICB9ICAKCiAgICAgICAgLy9PUEFBX1VOQVRBTlRVTV9SQVRFUwogICAgICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodW5hVGFudHVtUmF0ZXMpIT1udWxsICYmIChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcykgIT0gIiIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodW5hVGFudHVtUmF0ZXMpLnRvU3RyaW5nKCkuZXF1YWxzKCIiKSl7CiAgICAgICAgICAgIGxvZy5kZWJ1ZyAiVW5hIHRhbnR1bSByYXRlczogIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodW5hVGFudHVtUmF0ZXMpCiAgICAgICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qLwogICAgICAgICAgICAvL2luc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHMKICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGUiKTsgIAogICAgICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CiAgICAgICAgICAgIGRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7CiAgICAgICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpOwoKICAgICAgICAgICAgZGVmIHVtUmF0ZXNMaXN0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcykKCiAgICAgICAgICAgIGZvcih1bSBpbiB1bVJhdGVzTGlzdCl7CiAgICAgICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3QKICAgICAgICAgICAgICAgIGRlZiB1bVJhdGU9dW0udG9TdHJpbmcoKQogICAgICAgICAgICAgICAgZGVmIHVtUmF0ZUtleSA9IHVtUmF0ZS5zdWJzdHJpbmcodW1SYXRlLmluZGV4T2YoJygnKSsxLHVtUmF0ZS5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICBkZWYgdW1SYXRlT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHVtUmF0ZUtleSkKICAgICAgICAgICAgICAgIC8vZ2V0ICJERUxFVEVEIiBmb3IgdGhhdCBjb21wb25lbnQKICAgICAgICAgICAgICAgIGRlZiB1bURlbCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGUuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKSA/IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGUuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKSA6ICIiCiAgICAgICAgICAgICAgICBkZWYgdW1EZWxWYWx1ZSA9IHVtRGVsICE9ICIiID8gdW1EZWwuc3Vic3RyaW5nKHVtRGVsLmluZGV4T2YoJygnKSsxLHVtRGVsLmluZGV4T2YoJyknKSkgOiAiIgoKICAgICAgICAgICAgICAgIC8vZ2V0ICJBUFBMSUVEX1RPIiBmb3IgdGhhdCByYXRlCiAgICAgICAgICAgICAgICBkZWYgdW1BcHBsaWVkVG8gPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgZGVmIHVtQXBwbGllZFRvVmFsdWUgPSB1bUFwcGxpZWRUby5zdWJzdHJpbmcodW1BcHBsaWVkVG8uaW5kZXhPZignKCcpKzEsdW1BcHBsaWVkVG8uaW5kZXhPZignKScpKQoKICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVSZWYKICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICAgICAgdW1SYXRlUmVmPW9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZGVmIHRlY2hSZWYKICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnRlY2huaWNpYW5SZWYnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICAgICAgdGVjaFJlZj1vYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC50ZWNobmljaWFuUmVmJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBkZWYgdW1SYXRlUmVmS2V5CiAgICAgICAgICAgICAgICBkZWYgdW1SYXRlUmVmVmFsdWUKICAgICAgICAgICAgICAgIGlmKHVtUmF0ZVJlZil7CiAgICAgICAgICAgICAgICAgICAgdW1SYXRlUmVmID0gdW1SYXRlUmVmLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgICAgICB1bVJhdGVSZWZLZXkgPSB1bVJhdGVSZWYuc3Vic3RyaW5nKHVtUmF0ZVJlZi5pbmRleE9mKCcoJykrMSx1bVJhdGVSZWYuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVSZWZPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oT1BBQSArIHVtUmF0ZVJlZktleSkKICAgICAgICAgICAgICAgICAgICB1bVJhdGVSZWZWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGVSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5yYXRlLk5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgIHVtUmF0ZVJlZlZhbHVlID0gdW1SYXRlUmVmVmFsdWUuc3Vic3RyaW5nKHVtUmF0ZVJlZlZhbHVlLmluZGV4T2YoJygnKSsxLHVtUmF0ZVJlZlZhbHVlLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBkZWYgdGVjaFJlZktleQogICAgICAgICAgICAgICAgZGVmIHRlY2hSZWZWYWx1ZQogICAgICAgICAgICAgICAgaWYodGVjaFJlZil7CiAgICAgICAgICAgICAgICAgICAgdGVjaFJlZiA9IHRlY2hSZWYudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyAidGVjaFJlZjogIiArIHRlY2hSZWYKICAgICAgICAgICAgICAgICAgICB0ZWNoUmVmS2V5ID0gdGVjaFJlZi5zdWJzdHJpbmcodGVjaFJlZi5pbmRleE9mKCcoJykrMSx0ZWNoUmVmLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgICAgICBkZWYgdW1SYXRlUmVmT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKE9QQUEgKyB1bVJhdGVSZWZLZXkpCiAgICAgICAgICAgICAgICAgICAgdGVjaFJlZlZhbHVlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai50ZWNobmljaWFuLm5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgIHRlY2hSZWZWYWx1ZSA9IHVtUmF0ZVJlZlZhbHVlLnN1YnN0cmluZyh0ZWNoUmVmVmFsdWUuaW5kZXhPZignKCcpKzEsdGVjaFJlZlZhbHVlLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZigodW1BcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscygiQk9USCIpIHx8IHVtQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoIlNVUFBMSUVSIikpICYmICF1bURlbFZhbHVlLmVxdWFscygidHJ1ZSIpKXsKICAgICAgICAgICAgICAgICAgICAvL2dldCAiVE9UQUxfQU1PVU5UX1NVUFBMSUVSIiBmb3IgdGhhdCBjb21wb25lbnQKICAgICAgICAgICAgICAgICAgICBkZWYgdG90U3VwcGxpZXIgCiAgICAgICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHVtUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90U3VwcGxpZXInXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRvdFN1cHBsaWVyPW9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaWJvai5vblNpdGVSYXRlUmVwb3J0LnRvdFN1cHBsaWVyJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKCF0b3RTdXBwbGllciB8fCB0b3RTdXBwbGllclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKCIwLjAiKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzPXRydWUKICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ0VtcHR5UXVvdGVSYXRlU3VwcGxpZXIuYWRkKHVtUmF0ZVJlZlZhbHVlLnRvU3RyaW5nKCkgKyAiICgiICsgdGVjaFJlZlZhbHVlLnRvU3RyaW5nKCkgKyAiKSIpCiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArICIgd2FybmluZ0VtcHR5UXVvdGVSYXRlU3VwcGxpZXI6ICIgKyB3YXJuaW5nRW1wdHlRdW90ZVJhdGVTdXBwbGllcgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSAgICAKICAgICAgICB9CgogICAgICAgIC8vT1BBQV9MQUJPVVJfUkFURVMKICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxhYm91clJhdGVzKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpICE9ICIiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxhYm91clJhdGVzKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgICAgICBsb2cuZGVidWcgIkxhYm91ciByYXRlczogIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpCiAgICAgICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qLwogICAgICAgICAgICAvL2luc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHMKICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGUiKTsgIAogICAgICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CiAgICAgICAgICAgIGRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7CiAgICAgICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpOwoKICAgICAgICAgICAgZGVmIGxhYm91clJhdGVzTGlzdCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpCgogICAgICAgICAgICBmb3IobGIgaW4gbGFib3VyUmF0ZXNMaXN0KXsKICAgICAgICAgICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdAogICAgICAgICAgICAgICAgZGVmIGxiUmF0ZT1sYi50b1N0cmluZygpCiAgICAgICAgICAgICAgICBkZWYgbGJSYXRlS2V5ID0gbGJSYXRlLnN1YnN0cmluZyhsYlJhdGUuaW5kZXhPZignKCcpKzEsbGJSYXRlLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIGRlZiBsYlJhdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4obGJSYXRlS2V5KQogICAgICAgICAgICAgICAgLy9nZXQgIkRFTEVURUQiIGZvciB0aGF0IGNvbXBvbmVudAogICAgICAgICAgICAgICAgZGVmIGxiRGVsID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZS5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuZGVsZXRlZCddLnRvU3RyaW5nKCkpID8gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZS5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuZGVsZXRlZCddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpIDogIiIKICAgICAgICAgICAgICAgIGRlZiBsYkRlbFZhbHVlID0gbGJEZWwgIT0gIiIgPyBsYkRlbC5zdWJzdHJpbmcobGJEZWwuaW5kZXhPZignKCcpKzEsbGJEZWwuaW5kZXhPZignKScpKSA6ICIiCgogICAgICAgICAgICAgICAgLy9nZXQgIkFQUExJRURfVE8iIGZvciB0aGF0IHJhdGUKICAgICAgICAgICAgICAgIGRlZiBsYkFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgICAgICAgICBkZWYgbGJBcHBsaWVkVG9WYWx1ZSA9IGxiQXBwbGllZFRvLnN1YnN0cmluZyhsYkFwcGxpZWRUby5pbmRleE9mKCcoJykrMSxsYkFwcGxpZWRUby5pbmRleE9mKCcpJykpCgogICAgICAgICAgICAgICAgZGVmIGxiUmF0ZVJlZiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQoKICAgICAgICAgICAgICAgIGRlZiB0ZWNoUmVmCiAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC50ZWNobmljaWFuUmVmJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgICAgIHRlY2hSZWY9b2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQudGVjaG5pY2lhblJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZGVmIGxiUmF0ZVJlZktleQogICAgICAgICAgICAgICAgZGVmIGxiUmF0ZVJlZlZhbHVlCiAgICAgICAgICAgICAgICBpZihsYlJhdGVSZWYuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICAgICAgbGJSYXRlUmVmID0gbGJSYXRlUmVmLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgICAgICBsYlJhdGVSZWZLZXkgPSBsYlJhdGVSZWYuc3Vic3RyaW5nKGxiUmF0ZVJlZi5pbmRleE9mKCcoJykrMSxsYlJhdGVSZWYuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgICAgIGRlZiBsYlJhdGVSZWZPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oT1BBQSArIGxiUmF0ZVJlZktleSkKICAgICAgICAgICAgICAgICAgICBsYlJhdGVSZWZWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5yYXRlLk5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgIGxiUmF0ZVJlZlZhbHVlID0gbGJSYXRlUmVmVmFsdWUuc3Vic3RyaW5nKGxiUmF0ZVJlZlZhbHVlLmluZGV4T2YoJygnKSsxLGxiUmF0ZVJlZlZhbHVlLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBkZWYgdGVjaFJlZktleQogICAgICAgICAgICAgICAgZGVmIHRlY2hSZWZWYWx1ZQogICAgICAgICAgICAgICAgaWYodGVjaFJlZil7CiAgICAgICAgICAgICAgICAgICAgdGVjaFJlZiA9IHRlY2hSZWYudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyAidGVjaFJlZjogIiArIHRlY2hSZWYKICAgICAgICAgICAgICAgICAgICB0ZWNoUmVmS2V5ID0gdGVjaFJlZi5zdWJzdHJpbmcodGVjaFJlZi5pbmRleE9mKCcoJykrMSx0ZWNoUmVmLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgICAgICBkZWYgdGVjaFJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihPUEFBICsgdGVjaFJlZktleSkKICAgICAgICAgICAgICAgICAgICB0ZWNoUmVmVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaFJlZk9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2huaWNpYW4ubmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgICAgICAgICAgICAgdGVjaFJlZlZhbHVlID0gbGJSYXRlUmVmVmFsdWUuc3Vic3RyaW5nKHRlY2hSZWZWYWx1ZS5pbmRleE9mKCcoJykrMSx0ZWNoUmVmVmFsdWUuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmKChsYkFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJCT1RIIikgfHwgbGJBcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscygiU1VQUExJRVIiKSkgJiYgIWxiRGVsVmFsdWUuZXF1YWxzKCJ0cnVlIikpewogICAgICAgICAgICAgICAgICAgIC8vZ2V0ICJUT1RBTF9BTU9VTlRfU1VQUExJRVIiIGZvciB0aGF0IGNvbXBvbmVudAogICAgICAgICAgICAgICAgICAgIGRlZiB0b3RTdXBwbGllciAKICAgICAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lib2oub25TaXRlUmF0ZVJlcG9ydC50b3RTdXBwbGllciddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgICAgICAgICAgICAgdG90U3VwcGxpZXIgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lib2oub25TaXRlUmF0ZVJlcG9ydC50b3RTdXBwbGllciddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZighdG90U3VwcGxpZXIgfHwgdG90U3VwcGxpZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscygiMC4wIikpewogICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdFbXB0eVF1b3RlUmF0ZVN1cHBsaWVyLmFkZChsYlJhdGVSZWZWYWx1ZS50b1N0cmluZygpKQogICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyAiIHdhcm5pbmdFbXB0eVF1b3RlUmF0ZVN1cHBsaWVyOiAiICsgd2FybmluZ0VtcHR5UXVvdGVSYXRlU3VwcGxpZXIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gICAgCiAgICAgICAgfQoKICAgICAgICAvL09QQUFfVFJBVkVMX1JBVEVTCiAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmF2ZWxSYXRlcykhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYXZlbFJhdGVzKSAhPSAiIiAmJiAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmF2ZWxSYXRlcykudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICAgICAgbG9nLmRlYnVnICJUcmF2ZWwgcmF0ZXM6ICIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYXZlbFJhdGVzKQogICAgICAgICAgICAvKkNpY2xhcmUgdHV0dGkgZ2xpIG9nZ2V0dGkgYXNzb2NpYXRpIGFsIGNhbXBvKi8KICAgICAgICAgICAgLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzCiAgICAgICAgICAgIENsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlIik7ICAKICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSIpOwogICAgICAgICAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpOwogICAgICAgICAgICBkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTsKCiAgICAgICAgICAgIGRlZiB0cmF2ZWxSYXRlc0xpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYXZlbFJhdGVzKQoKICAgICAgICAgICAgZm9yKHRyIGluIHRyYXZlbFJhdGVzTGlzdCl7CiAgICAgICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3QKICAgICAgICAgICAgICAgIGRlZiB0clJhdGU9dHIudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgZGVmIHRyUmF0ZUtleSA9IHRyUmF0ZS5zdWJzdHJpbmcodHJSYXRlLmluZGV4T2YoJygnKSsxLHRyUmF0ZS5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICBkZWYgdHJSYXRlT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHRyUmF0ZUtleSkKICAgICAgICAgICAgICAgIC8vZ2V0ICJERUxFVEVEIiBmb3IgdGhhdCBjb21wb25lbnQKICAgICAgICAgICAgICAgIGRlZiB0ckRlbCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGUuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKSA/IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGUuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKSA6ICIiCiAgICAgICAgICAgICAgICBkZWYgdHJEZWxWYWx1ZSA9IHRyRGVsICE9ICIiID8gdHJEZWwuc3Vic3RyaW5nKHRyRGVsLmluZGV4T2YoJygnKSsxLHRyRGVsLmluZGV4T2YoJyknKSkgOiAiIgoKICAgICAgICAgICAgICAgIC8vZ2V0ICJBUFBMSUVEX1RPIiBmb3IgdGhhdCByYXRlCiAgICAgICAgICAgICAgICBkZWYgdHJBcHBsaWVkVG8gPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odHJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgZGVmIHRyQXBwbGllZFRvVmFsdWUgPSB0ckFwcGxpZWRUby5zdWJzdHJpbmcodHJBcHBsaWVkVG8uaW5kZXhPZignKCcpKzEsdHJBcHBsaWVkVG8uaW5kZXhPZignKScpKQoKICAgICAgICAgICAgICAgIGRlZiB0clJhdGVSZWYgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odHJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5yYXRlUmVmJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKCiAgICAgICAgICAgICAgICBkZWYgdHJSYXRlUmVmS2V5CiAgICAgICAgICAgICAgICBkZWYgdHJSYXRlUmVmVmFsdWUKICAgICAgICAgICAgICAgIGlmKHRyUmF0ZVJlZi5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgICAgICB0clJhdGVSZWYgPSB0clJhdGVSZWYudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgIHRyUmF0ZVJlZktleSA9IHRyUmF0ZVJlZi5zdWJzdHJpbmcodHJSYXRlUmVmLmluZGV4T2YoJygnKSsxLHRyUmF0ZVJlZi5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICAgICAgZGVmIHRyUmF0ZVJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihPUEFBICsgdHJSYXRlUmVmS2V5KQogICAgICAgICAgICAgICAgICAgIHRyUmF0ZVJlZlZhbHVlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZVJlZk9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnJhdGUuTmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgICAgICAgICAgICAgdHJSYXRlUmVmVmFsdWUgPSB0clJhdGVSZWZWYWx1ZS5zdWJzdHJpbmcodHJSYXRlUmVmVmFsdWUuaW5kZXhPZignKCcpKzEsdHJSYXRlUmVmVmFsdWUuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmKCh0ckFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJCT1RIIikgfHwgdHJBcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscygiU1VQUExJRVIiKSkgJiYgIXRyRGVsVmFsdWUuZXF1YWxzKCJ0cnVlIikpewogICAgICAgICAgICAgICAgICAgIC8vZ2V0ICJUT1RBTF9BTU9VTlRfU1VQUExJRVIiIGZvciB0aGF0IGNvbXBvbmVudAogICAgICAgICAgICAgICAgICAgIGRlZiB0b3RTdXBwbGllcgogICAgICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaWJvai5vblNpdGVSYXRlUmVwb3J0LnRvdFN1cHBsaWVyJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgICAgICAgICB0b3RTdXBwbGllcj1vYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odHJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lib2oub25TaXRlUmF0ZVJlcG9ydC50b3RTdXBwbGllciddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZighdG90U3VwcGxpZXIgfHwgdG90U3VwcGxpZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscygiMC4wIikpewogICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdFbXB0eVF1b3RlUmF0ZVN1cHBsaWVyLmFkZCh0clJhdGVSZWZWYWx1ZS50b1N0cmluZygpKQogICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyAiIHdhcm5pbmdFbXB0eVF1b3RlUmF0ZVN1cHBsaWVyOiAiICsgd2FybmluZ0VtcHR5UXVvdGVSYXRlU3VwcGxpZXIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gICAgCiAgICAgICAgfQoKICAgIH0KICAgIAogICAgLypWZXJpZmljbyBsYSBwcmVzZW56YSBkaSBlcnJvcmkgZSB3YXJuaW5nIHN1bGxhIGlzc3VlIGNvcnJlbnRlIGUsIHNlIHByZXNlbnRpLCBsaSBhZ2dpdW5nbyBhZ2xpIGFycmF5IGRlZ2xpIGVycm9yaSBlIHdhcm5pbmcgZGVsbGUgaXNzdWUgbGlua2F0ZSovCiAgICBpZih3YXJuaW5nRW1wdHlRdW90ZU1hdFN1cHBsaWVyLnNpemUoKT4wKXsKICAgICAgICBkZWYgb2JqTGlzdCA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgIG9iakxpc3QuYWRkKGlzc3VlKQogICAgICAgIG9iakxpc3QuYWRkKHdhcm5pbmdFbXB0eVF1b3RlTWF0U3VwcGxpZXIpCiAgICAgICAgd2FybmluZ3NNYXRMaW5rZWRJc3N1ZXMuYWRkKG9iakxpc3QpCiAgICB9CiAgICAKICAgIGlmKHdhcm5pbmdFbXB0eVF1b3RlUmF0ZVN1cHBsaWVyLnNpemUoKT4wKXsKICAgICAgICBkZWYgb2JqTGlzdCA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgIG9iakxpc3QuYWRkKGlzc3VlKQogICAgICAgIG9iakxpc3QuYWRkKHdhcm5pbmdFbXB0eVF1b3RlUmF0ZVN1cHBsaWVyKQogICAgICAgIHdhcm5pbmdzUmF0ZUxpbmtlZElzc3Vlcy5hZGQob2JqTGlzdCkKICAgIH0KICAgIAogICAgLy9pZihlcnJvcnMuLi4pCiAgICAKfQoKbG9nLmRlYnVnICJ3YXJuaW5nc01hdExpbmtlZElzc3VlczogIiArIHdhcm5pbmdzTWF0TGlua2VkSXNzdWVzCmxvZy5kZWJ1ZyAid2FybmluZ3NSYXRlTGlua2VkSXNzdWVzOiAiICsgd2FybmluZ3NSYXRlTGlua2VkSXNzdWVzCgpkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpCgppZiAoIWVycm9ycyAmJiAhd2FybmluZ3MpewogICAgcmV0dXJuIHRydWUKfWVsc2V7CiAgICBpZighZXJyb3JzICYmIHdhcm5pbmdzKXsKICAgICAgICAvL1NlIGNpIHNvbm8gc29sbyB3YXJuaW5ncyB2ZXJpZmljbyBzZSBsJ3V0ZW50ZSBoYSBnacOgIGRpY2hpYXJhdG8gZGkgdm9sZXIgcHJvc2VndWlyZSBjb211bnF1ZQogICAgICAgIC8vIC0gdHJhbnNpdGlvbiBmaWVsZCAiT1BBQV9DSEVDS19BTkRfQ09ORklSTSI9IlllcyIKICAgICAgICAvLyAtIGluIGNhc28gY29udHJhcmlvIGludmlvIGkgd2FybmluZyBhIEZFCgogICAgICAgIC8vbG9nLmRlYnVnICJ0cmFuc2l0aW9uQ2hlY2s6ICIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykKICAgICAgICAvL2xvZy5kZWJ1ZyAicmVzdWx0OiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKQogICAgICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKS50b1N0cmluZygpLmVxdWFscygiWWVzIikpewogICAgICAgICAgICAvL2xvZy5kZWJ1ZyAicmV0dXJuIHRydWUgLSB0cmFuc2l0aW9uQ2hlY2sgPSBZZXMiCiAgICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKQoKICAgICAgICAgICAgaWYoaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVTdXBwbGllci5zaXplKCkgPiAwKXsKICAgICAgICAgICAgCWRlZiB3TGlzdENvbmZpcm1FbXB0eVJhdGUgPSBuZXcgQXJyYXlMaXN0KCkKICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoIlciKQogICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZCgiU1VQUExJRVJfQ09ORklSTV9FTVBUWV9SQVRFUyIpCiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKG51bGwpCiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlU3VwcGxpZXIpCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHlSYXRlKQogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBpZihpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlTWF0U3VwcGxpZXIuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgIAlkZWYgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZSA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoIlciKQogICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoIlNVUFBMSUVSX0NPTkZJUk1fRU1QVFlfTUFUX1FVT1RFIikKICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKG51bGwpCiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlTWF0U3VwcGxpZXIpCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZSkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYod2FybmluZ3NNYXRMaW5rZWRJc3N1ZXMuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICBmb3Iob2JqIGluIHdhcm5pbmdzTWF0TGlua2VkSXNzdWVzKXsKICAgICAgICAgICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZSA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKCJXIikKICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZCgiU1VQUExJRVJfQ09ORklSTV9FTVBUWV9NQVRfUVVPVEUiKQogICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKG9ialswXSkKICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChvYmpbMV0pCgogICAgICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBpZih3YXJuaW5nc1JhdGVMaW5rZWRJc3N1ZXMuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICBmb3Iob2JqIGluIHdhcm5pbmdzUmF0ZUxpbmtlZElzc3Vlcyl7CiAgICAgICAgICAgICAgICAgICAgZGVmIHdMaXN0Q29uZmlybUVtcHR5UmF0ZSA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoIlciKQogICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoIlNVUFBMSUVSX0NPTkZJUk1fRU1QVFlfUkFURVMiKQogICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQob2JqWzBdKQogICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQob2JqWzFdKQoKICAgICAgICAgICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHlSYXRlKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KQogICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IlciOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQogICAgICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oIlciLCBvdXRwdXQudG9TdHJpbmcoKSkgICAKICAgICAgICB9CgogICAgfQogICAgaWYoZXJyb3JzICYmICF3YXJuaW5ncyl7CiAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCgogICAgICAgIG91dHB1dC5hZGQoZUxpc3QpCiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigneyJFIjoiJyArIG91dHB1dC50b1N0cmluZygpICsgJyJ9JykKICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oIkUiLCBvdXRwdXQudG9TdHJpbmcoKSkgICAKICAgIH0KICAgIGlmKGVycm9ycyAmJiB3YXJuaW5ncyl7CiAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgZGVmIHdMaXN0ID0gbmV3IEFycmF5TGlzdCgpCgogICAgICAgIGlmKGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlU3VwcGxpZXIuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1FbXB0eVJhdGUgPSBuZXcgQXJyYXlMaXN0KCkKICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZCgiVyIpCiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoIlNVUFBMSUVSX0NPTkZJUk1fRU1QVFlfUkFURVMiKQoJCQl3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKG51bGwpCiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVTdXBwbGllcikKCiAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eVJhdGUpCiAgICAgICAgfQoKICAgICAgICBpZihpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlTWF0U3VwcGxpZXIuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKCJXIikKICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoIlNVUFBMSUVSX0NPTkZJUk1fRU1QVFlfTUFUX1FVT1RFIikKICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQobnVsbCkKICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoaXNzdWVXYXJuaW5nRW1wdHlRdW90ZU1hdFN1cHBsaWVyKQoKICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUpCiAgICAgICAgfQoKICAgICAgICBpZih3YXJuaW5nc01hdExpbmtlZElzc3Vlcy5zaXplKCkgPiAwKXsKICAgICAgICAgICAgZm9yKG9iaiBpbiB3YXJuaW5nc01hdExpbmtlZElzc3Vlcyl7CiAgICAgICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZSA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoIlciKQogICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoIlNVUFBMSUVSX0NPTkZJUk1fRU1QVFlfTUFUX1FVT1RFIikKICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKG9ialswXSkKICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKG9ialsxXSkKCiAgICAgICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZSkKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYod2FybmluZ3NSYXRlTGlua2VkSXNzdWVzLnNpemUoKSA+IDApewogICAgICAgICAgICBmb3Iob2JqIGluIHdhcm5pbmdzUmF0ZUxpbmtlZElzc3Vlcyl7CiAgICAgICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHlSYXRlID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKCJXIikKICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoIlNVUFBMSUVSX0NPTkZJUk1fRU1QVFlfUkFURVMiKQogICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZChvYmpbMF0pCiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKG9ialsxXSkKCiAgICAgICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHlSYXRlKQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KQogICAgICAgIG91dHB1dC5hZGQod0xpc3QpCiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigneyJXRSI6IicgKyBvdXRwdXQudG9TdHJpbmcoKSArICcifScpCiAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJXRSIsIG91dHB1dC50b1N0cmluZygpKSAgCiAgICB9Cn0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">fe514447-9df4-4f6e-a146-4880c721f4ec</arg>
              <arg name="FIELD_NOTES">YCFgQ3JlYXRlIFNOICYgU08gZm9yIG9sZCB0aWNrZXRz</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuXG5kZWYgU04gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfU0FQX1NFUlZJQ0VfTk9USUZJQ0FUSU9OXCIpWzBdXG5kZWYgU08gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfU0FQX1NFUlZJQ0VfT1JERVJcIilbMF1cbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG5VUkwgdXJsXG5IdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uXG5kZWYgYm9keV9yZXEgPSBbXVxuZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShTTikgPT0gbnVsbCAmJiBpc3N1ZS5pc3N1ZVR5cGUubmFtZSAhPSBcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0XCIpe1xuICAgIHJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXG4gICAgICAgIFwic3RhdHVzXCI6IFwiT1BFXCJcbiAgICBdIFxuXG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL3NlcnZpY2Uvbm90aWZpY2F0aW9uXCJcblxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxuICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNOOiBcIiArIGJvZHlfcmVxXG4gICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxuICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuICAgIFxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgIFxuICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG4gICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcblxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TTi1VUERBVEVcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICB9ZWxzZXtcbiAgICAgICAgLyoqIFNFUlZJQ0UgT1JERVIgQ1JFQVRJT04gKiovXG4gICAgICAgIGJvZHlfcmVxID0gW1xuICAgICAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXlcbiAgICAgICAgXSBcbiAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL29yL3VwZGF0ZS9zZXJ2aWNlL29yZGVyXCJcblxuICAgICAgICBsb2cuZGVidWcgXCJiYXNlVVJMIFNPOiBcIiArIGJhc2VVUkxcbiAgICAgICAgbG9nLmRlYnVnIFwiYm9keV9yZXEgU086IFwiICsgYm9keV9yZXFcbiAgICAgICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgICAgICBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG4gICAgICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgICAgICBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAxXCIpICYmICFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxuICAgIFx0XHRsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICAgICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICBcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtU0FQLVNPLUNSRUFURVwiKVxuICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgIH1cbiAgICB9XG59ZWxzZXtcbiAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKFNOKSAhPSBudWxsICYmIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoU08pID09IG51bGwgJiYgaXNzdWUuaXNzdWVUeXBlLm5hbWUgIT0gXCJQbGFubmVkIE1haW50ZW5hbmNlIFRpY2tldFwiKXtcbiAgICAgICAgLyoqIFNFUlZJQ0UgT1JERVIgQ1JFQVRJT04gKiovXG4gICAgICAgIHJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcbiAgICAgICAgYm9keV9yZXEgPSBbXG4gICAgICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleVxuICAgICAgICBdIFxuICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS9hZnRlci9zYWxlcy9jcmVhdGUvb3IvdXBkYXRlL3NlcnZpY2Uvb3JkZXJcIlxuXG4gICAgICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU086IFwiICsgYmFzZVVSTFxuICAgICAgICBsb2cuZGVidWcgXCJib2R5X3JlcSBTTzogXCIgKyBib2R5X3JlcVxuICAgICAgICB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgICAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgICAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cbiAgICAgICAgbG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgICAgIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDFcIikgJiYgIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgXHRcdGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVmIGpzb25TbHVycGVyID0gbmV3IEpzb25TbHVycGVyKClcbiAgICAgICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpXG4gICAgICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICAgICAgbG9nLmRlYnVnIFwibWVzc2FnZTogXCIgKyAganNvbl9vYmplY3QubWVzc2FnZVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiZXJyb3JzOiBcIiArICBqc29uX29iamVjdC5lcnJvcnMudG9TdHJpbmcoKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJPUC1TQVAtU08tQ1JFQVRFXCIpXG4gICAgICAgICAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGpzb25fb2JqZWN0LmVycm9yc1swXSlcbiAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICAgICAgfVxuICAgIH1cbn0iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">3657615f14a01fb91bdcb3a532f38f81b3555fa9</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IGdlbmVyYXppb25lIE9EQSBmb3JuaXRvcmU=</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXJcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5XG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5cblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuLypTY3JpcHQgVmFyaWFibGVzKi9cbi8vUGVyIFBvc3QgRnVuY3Rpb25cbi8vaXNzdWUgPSBpc3N1ZVxuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL2lzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTM0ODFcIilcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiBvZGEgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9QVVJDSEFTRV9PUkRFUlwiKVswXVxuZGVmIHJlcXVlc3RNZXRob2RcbmRlZiBiYXNlVVJMXG5cblVSTCB1cmxcbkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb25cblxuLyogUkVTVCBBUEkgcGVyIEdlbmVyYXppb25lIE9EQSAqL1xucmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuZGVmIHJlbGF0ZXNJbklzc3VlTGluaz1mYWxzZVxuZGVmIHJlbGF0ZXNPdXRJc3N1ZUxpbms9ZmFsc2VcbmRlZiBsaW5rZWRUaWNrZXRzPW5ldyBBcnJheUxpc3QoKVxuTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG5mb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxJbklzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcblxuICAgIGlmKGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKSE9bnVsbCAmJiBpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSAmJiBpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkuc3RhdHVzLm5hbWUgPT0gXCJDb21wbGV0ZWQgdG8gYmUgQ2xvc2VkXCIgJiYgKGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKS5nZXRDdXN0b21GaWVsZFZhbHVlKG9kYSkgPT0gbnVsbCB8fCBpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkuZ2V0Q3VzdG9tRmllbGRWYWx1ZShvZGEpID09IFwiXCIpKXtcbiAgICAgICAgcmVsYXRlc0luSXNzdWVMaW5rPXRydWVcbiAgICAgICAgbGlua2VkVGlja2V0cy5hZGQoaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpLnRvU3RyaW5nKCkpXG4gICAgICAgIGxvZy5kZWJ1ZyBcIklzc3VlIGNvbiByZWxhdGVzSW5Jc3N1ZUxpbmtcIlxuICAgIH1cbn1cbkxpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG5mb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG5cbiAgICBpZihpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKSE9bnVsbCAmJiBpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSAmJiBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKS5zdGF0dXMubmFtZSA9PSBcIkNvbXBsZXRlZCB0byBiZSBDbG9zZWRcIiAmJiAoaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkuZ2V0Q3VzdG9tRmllbGRWYWx1ZShvZGEpID09IG51bGwgfHwgaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkuZ2V0Q3VzdG9tRmllbGRWYWx1ZShvZGEpID09IFwiXCIpKXtcbiAgICAgICAgcmVsYXRlc091dElzc3VlTGluaz10cnVlXG4gICAgICAgIGxpbmtlZFRpY2tldHMuYWRkKGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpLnRvU3RyaW5nKCkpXG4gICAgICAgIGxvZy5kZWJ1ZyBcIklzc3VlIGNvbiByZWxhdGVzT3V0SXNzdWVMaW5rXCJcbiAgICB9XG59XG5cbmRlZiBib2R5X3JlcVxuXG5pZihyZWxhdGVzSW5Jc3N1ZUxpbmsgfHwgcmVsYXRlc091dElzc3VlTGluayl7XG4gICAgYm9keV9yZXEgPSBbXG4gICAgICAgIFwiaXNzdWVLZXlcIjogaXNzdWUua2V5LFxuICAgICAgICBcImxpbmtlZFRpY2tldHNcIjogbGlua2VkVGlja2V0c1xuICAgIF1cbn1lbHNle1xuICAgIGJvZHlfcmVxID0gW1xuICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleVxuICAgIF1cbn1cblxuXG5iYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS9wdXJjaGFzZS9vcmRlci9jcmVhdGVcIlxudXJsID0gbmV3IFVSTChiYXNlVVJMKVxuY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG5jb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbmxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cbmxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuY29ubmVjdGlvbi5jb25uZWN0KCk7XG5cbmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5sb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG5sb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG5cbmlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2U6IFwiICsgY29ubmVjdGlvblxuICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHRcbiAgICBsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXG4gICAgXG4gICAgZGVmIGpzb25TbHVycGVyID0gbmV3IEpzb25TbHVycGVyKClcbiAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgXG4gICAgbG9nLmRlYnVnIFwibWVzc2FnZTogXCIgKyAganNvbl9vYmplY3QubWVzc2FnZVxuICAgIC8vbG9nLmRlYnVnIFwibWVzc2FnZTogXCIgKyAganNvbl9vYmplY3QubWVzc2FnZS50b1N0cmluZygpLnJlcGxhY2VBbGwoJ1snLCcnKS5yZXBsYWNlQWxsKCd7JywnJykucmVwbGFjZUFsbCgnfScsJycpLnJlcGxhY2VBbGwoJ10nLCcnKS5yZXBsYWNlQWxsKCc/JywnJykucmVwbGFjZUFsbCgnPScsJycpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICBkZWYgZXJyb3JUeXBlID0ganNvbl9vYmplY3QubGV2ZWxcblx0bG9nLmRlYnVnIFwianNvbl9vYmplY3QubnVtYmVyOiBcIiArIGpzb25fb2JqZWN0Lm51bWJlclxuXG4gICAgLyppZiBqc29uX29iamVjdC5udW1iZXIgIT0gbnVsbCAmJiBlcnJvclR5cGUgPSBXIC0tPiBsJ09EQSBcdTAwZTggc3RhdG8gY3JlYXRvIG1hIFx1MDBlOCBuZWNlc3NhcmlvIHJpc29sdmVyZSBsZSBzZWd1ZW50aSBhbm9tYWxpZSBkaXJldHRhbWVudGUgc3UgU0FQKi9cbiAgICBpZiAoIWpzb25fb2JqZWN0Lm51bWJlcil7XG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcblx0XHRlTGlzdEVycm9ycy5hZGQoXCJPUC1TQVAtT0RBXCIpXG4gICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsganNvbl9vYmplY3QuZXJyb3JzWzBdLnRvU3RyaW5nKCkucmVwbGFjZUFsbChcIi9bXmEtekEtWiBdL2dcIixcIlwiKS5yZXBsYWNlQWxsKCdcIicsJycpKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgfVxuICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIkVcIiwgb3V0cHV0LnRvU3RyaW5nKCkpXG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXIKaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXIKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsCgpQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpCkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpCnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7Cglwcm9wZXJ0aWVzLmxvYWQoaXQpCn0KQ2F0ZWdvcnkgbG9nID0gQ2F0ZWdvcnkuZ2V0SW5zdGFuY2UoImNvbS5vbnJlc29sdmUuamlyYS5ncm9vdnkuUG9zdEZ1bmN0aW9uIikKbG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmsKCklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTsKQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpOwpkZWYgcmVxdWVzdE1ldGhvZApkZWYgYmFzZVVSTAoKVVJMIHVybApIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uCgovKiBSRVNUIEFQSSBwZXIgR2VuZXJhemlvbmUgT0RBICovCnJlcXVlc3RNZXRob2QgPSAiUE9TVCI7CmRlZiByZWxhdGVzSW5Jc3N1ZUxpbms9ZmFsc2UKZGVmIHJlbGF0ZXNPdXRJc3N1ZUxpbms9ZmFsc2UKZGVmIGxpbmtlZFRpY2tldHM9bmV3IEFycmF5TGlzdCgpCkxpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKQpmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxJbklzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7CiAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpOwoKICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXsKICAgICAgICByZWxhdGVzSW5Jc3N1ZUxpbms9dHJ1ZQogICAgICAgIGxpbmtlZFRpY2tldHMuYWRkKGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKS50b1N0cmluZygpKQogICAgICAgIGxvZy5kZWJ1ZyAiSXNzdWUgY29uIHJlbGF0ZXNJbklzc3VlTGluayIKICAgIH0KfQpMaXN0PElzc3VlTGluaz4gYWxsT3V0SXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldE91dHdhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKQpmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykgewogICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTsKCiAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7CiAgICAgICAgcmVsYXRlc091dElzc3VlTGluaz10cnVlCiAgICAgICAgbGlua2VkVGlja2V0cy5hZGQoaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkudG9TdHJpbmcoKSkKICAgICAgICBsb2cuZGVidWcgIklzc3VlIGNvbiByZWxhdGVzT3V0SXNzdWVMaW5rIgogICAgfQp9CgpkZWYgYm9keV9yZXEKCmlmKHJlbGF0ZXNJbklzc3VlTGluayB8fCByZWxhdGVzT3V0SXNzdWVMaW5rKXsKICAgIGJvZHlfcmVxID0gWwogICAgICAgICJpc3N1ZUtleSI6IGlzc3VlLmtleSwKICAgICAgICAibGlua2VkVGlja2V0cyI6IGxpbmtlZFRpY2tldHMKICAgIF0KfWVsc2V7CiAgICBib2R5X3JlcSA9IFsKICAgICAgICAiaXNzdWVLZXkiOiBpc3N1ZS5rZXkKICAgIF0KfQoKCmJhc2VVUkwgPSAiaHR0cDovLyIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArICIvb3AvcmVzdC9qaXJhL0FBL3B1cmNoYXNlL29yZGVyL2NyZWF0ZSIKdXJsID0gbmV3IFVSTChiYXNlVVJMKQpjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpOwpjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7CmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04Iik7CmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KCJBY2NlcHQiLCAiKi8qIik7CmNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7CmNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTsKY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0KbG9nLmRlYnVnICJ1cmw6ICIgKyB1cmwKY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcigiVVRGLTgiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH0KbG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtCmNvbm5lY3Rpb24uY29ubmVjdCgpOwoKZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKQpkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpCmRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KCkKCmlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscygiMjAwIikpewogICAgbG9nLmRlYnVnICJ1cmw6ICIgKyB1cmwKICAgIGxvZy5kZWJ1ZyAiUmVzcG9uc2VDb2RlOiIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpCiAgICBsb2cuZGVidWcgIlJlc3BvbnNlTWVzc2FnZToiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKQogICAgbG9nLmRlYnVnICJSZXNwb25zZTogIiArIGNvbm5lY3Rpb24KICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQKICAgIGxvZy5kZWJ1ZyAiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiAiICsgb3V0cHV0TXNnCiAgICAKICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpCiAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKQogICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICAKICAgIGxvZy5kZWJ1ZyAibWVzc2FnZTogIiArICBqc29uX29iamVjdC5tZXNzYWdlCiAgICAKICAgIGVMaXN0RXJyb3JzLmFkZCgiRSIpCiAgICBlTGlzdEVycm9ycy5hZGQoIk9QLVNBUC1PREEiKQogICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgIiAiICsganNvbl9vYmplY3QubWVzc2FnZSkKICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpCiAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpCiAgICAKICAgIG91dHB1dC5hZGQoZUxpc3QpCiAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IkUiOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQogICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJFIiwgb3V0cHV0LnRvU3RyaW5nKCkpCn0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="6">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">c55994e4-af18-453a-9606-f93fde15755e</arg>
                  <arg name="FIELD_NOTES">YCFgT1AgRW1haWwgTm90aWZpY2F0aW9uOiBQVVJDSEFTRV9PUkRFUl9UT19TVVBQTElFUg==</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG5VUkwgdXJsXG5IdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uXG5cbnJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcbmRlZiBib2R5X3JlcSA9IFtcbiAgICBcInRlbXBsYXRlTmFtZVwiOiBcIlBVUkNIQVNFX09SREVSX1RPX1NVUFBMSUVSXCIsXG4gICAgXCJwZWNcIjogZmFsc2UsXG4gICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXlcbl1cblxuYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvdHJhbnNhY3Rpb24vbWFpbC9zZW5kXCJcbnVybCA9IG5ldyBVUkwoYmFzZVVSTClcbmNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbmNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5jb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG5sb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbmNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG5kZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuXG5pZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikgJiYgIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDRcIikpe1xuICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICBlTGlzdEVycm9ycy5hZGQoXCJTRU5ETUFJTFwiKVxuICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKSlcbiAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIkVcIiwgb3V0cHV0LnRvU3RyaW5nKCkpXG59ZWxzZXtcbiAgICBcbiAgICAvL1VwZGF0ZSBjdXN0b20gZmllbGQgT1BBQV9QVVJDSEFTRV9PUkRFUl9EQVRFXG4gICAgXG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWUKaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0OwppbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeQppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQpDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRykKCklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTsKQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpOwpkZWYgcmVxdWVzdE1ldGhvZApkZWYgYmFzZVVSTAoKVVJMIHVybApIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uCgpyZXF1ZXN0TWV0aG9kID0gIlBPU1QiOwpkZWYgYm9keV9yZXEgPSBbCiAgICAidGVtcGxhdGVOYW1lIjogIlBVUkNIQVNFX09SREVSX1RPX1NVUFBMSUVSIiwKICAgICJwZWMiOiBmYWxzZSwKICAgICJpc3N1ZUtleSI6IGlzc3VlLmtleQpdCgpiYXNlVVJMID0gImh0dHA6Ly8iICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyAiL29wL3Jlc3QvamlyYS9BQS90cmFuc2FjdGlvbi9tYWlsL3NlbmQiCnVybCA9IG5ldyBVUkwoYmFzZVVSTCkKY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpOwpjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eSgiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOCIpOwpjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eSgiQWNjZXB0IiwgIiovKiIpOwpjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpOwpjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7CmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtCmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoIlVURi04IikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9CmxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbQpjb25uZWN0aW9uLmNvbm5lY3QoKTsKCmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCmRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKQpkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpCgppZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoIjIwMCIpKXsKICAgIGxvZy5kZWJ1ZyAidXJsOiAiICsgdXJsCiAgICBsb2cuZGVidWcgIlJlc3BvbnNlQ29kZToiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKQogICAgbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKICAgIGVMaXN0RXJyb3JzLmFkZCgiRSIpCiAgICBlTGlzdEVycm9ycy5hZGQoIlNFTkRNQUlMIikKICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArICIgIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkpCiAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKQogICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKQoKICAgIG91dHB1dC5hZGQoZUxpc3QpCiAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJFIiwgb3V0cHV0LnRvU3RyaW5nKCkpCn1lbHNlewogICAgCiAgICAvL1VwZGF0ZSBjdXN0b20gZmllbGQgT1BBQV9QVVJDSEFTRV9PUkRFUl9EQVRFCiAgICAKfQ==</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_ACTION">181 Tkt Chiuso</arg>
                  <arg name="FIELD_NOTES">YCFgT1A6IENsb3NlIHRrdCBpZiBPRFYgYW5kIE9EQSBoYXZlIGJlZW4gY3JlYXRlZA==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.FasttrackTransition</arg>
                  <arg name="FIELD_CONDITION">YCFgY2ZWYWx1ZXNbJ09QX1NBTEVTX09SREVSJ10gIT0gbnVsbCAmJiBjZlZhbHVlc1snT1BfU0FMRVNfT1JERVJfREFURSddICE9IG51bGwgJiYgY2ZWYWx1ZXNbJ09QX1NBTEVTX09SREVSX1RPVEFMJ10gIT0gbnVsbHx8fA==</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_TRANSITION_OPTIONS"></arg>
                  <arg name="FIELD_ADDITIONAL_SCRIPT">YCFg</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="181" name="Tkt Chiuso" view="fieldscreen">
          <meta name="opsbar-sequence">70</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">19925</meta>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">e94c2b2e-e5aa-4a24-a37e-7b5d16b043f5</arg>
              <arg name="FIELD_NOTES">YCFgU0FQOiB1cGRhdGUgU04gc3RhdHVz</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuZGVmIHN1cHBsaWVyID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zdXBwbGllciddID8gcHJvcGVydGllc1snY2Yuc3VwcGxpZXInXS50b1N0cmluZygpIDogXCJPUF9TVVBQTElFUlwiKVswXVxuZGVmIHNhcFNOID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1NBUF9TRVJWSUNFX05PVElGSUNBVElPTlwiKVswXVxuXG5VUkwgdXJsXG5IdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uXG5cbmlmKGlzc3VlLmlzc3VlVHlwZS5uYW1lICE9IFwiUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXRcIiAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNhcFNOKSAhPSBudWxsKXtcbiAgICByZXF1ZXN0TWV0aG9kID0gXCJQT1NUXCI7XG5cbiAgICBkZWYgYm9keV9yZXEgPSBbXVxuICAgIGJvZHlfcmVxID0gW1xuICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleSxcbiAgICAgICAgXCJzdGF0dXNcIjogXCJDTE9cIlxuICAgIF0gXG5cbiAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS9hZnRlci9zYWxlcy9jcmVhdGUvc2VydmljZS9ub3RpZmljYXRpb25cIlxuICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNOOiBcIiArIGJvZHlfcmVxXG4gICAgbG9nLmRlYnVnIFwiYmFzZVVSTCBTTjogXCIgKyBiYXNlVVJMXG4gICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxuICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtU0FQLVNOLVVQREFURVwiKVxuICAgICAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICB9ZWxzZXtcbiAgICAgICAgLyoqIFNFUlZJQ0UgT1JERVIgVVBEQVRFICoqL1xuICAgICAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgICAgIFwiaXNzdWVLZXlcIjogaXNzdWUua2V5XG4gICAgICAgIF0gXG4gICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL2FmdGVyL3NhbGVzL2NyZWF0ZS9vci91cGRhdGUvc2VydmljZS9vcmRlclwiXG5cbiAgICAgICAgbG9nLmRlYnVnIFwiYmFzZVVSTCBTTzogXCIgKyBiYXNlVVJMXG4gICAgICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNPOiBcIiArIGJvZHlfcmVxXG4gICAgICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICAgICAgY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxuICAgICAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG5cbiAgICAgICAgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuXHRcdGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAxXCIpICYmICFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxuICAgIFx0XHRsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICAgICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICBcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtU0FQLVNPLUNSRUFURVwiKVxuICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgLyoqIERBIEZBUkUgU0MgU09MTyBJTiBDQVNPIERJIFRFQ05JQ0kgSU5URVJOSSAqKi9cbiAgICAgICAgICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc3VwcGxpZXIpPT1udWxsKXsgLyoqIHNlIE9QX1NVUFBMSUVSID0gTlVMTCBpbCB0aWNrZXQgaGEgcHJvc2VndWl0byBzdWwgZmx1c3NvIHRlY25pY2kgaW50ZXJuaSAqKi9cblxuICAgICAgICAgICAgICAgIGJvZHlfcmVxID0gW1xuICAgICAgICAgICAgICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleSxcbiAgICAgICAgICAgICAgICBdIFxuXG4gICAgICAgICAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL3NlcnZpY2Uvb3JkZXIvY29uZmlybWF0aW9uXCJcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJib2R5X3JlcSBTQzogXCIgKyBib2R5X3JlcVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU0M6IFwiICsgYmFzZVVSTFxuICAgICAgICAgICAgICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgICAgICAgICAgICAgIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgICAgICAgICAgICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSAmJiAhY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICAgICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtU0FQLVNDLUNSRUFURVwiKVxuICAgICAgICAgICAgICAgICAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkpXG4gICAgICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">f1d1522d-5b09-4510-bcb6-abc0e5c6dbc7</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IERvYyBUZW1wbGF0ZSBnZW5lcmF0aW9uIC0gc2UgTmV3IEluc3RhbGxhdGlvbiAtIEdlbmVyYSBDRV9ET0NVTUVOVEFUSU9OIC0gcGVyIGlzc3VlIGNvcnJlbnRlIGUgY29sbGVnYXRpIHNvbG8gc2UgTUFOVUZBQ1RVUkVSID0gRkFBQw==</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5Xb3JrZmxvd0V4Y2VwdGlvbjtcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvblxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyO1xuaW1wb3J0IGdyb292eS5qc29uLlN0cmVhbWluZ0pzb25CdWlsZGVyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5DdXN0b21GaWVsZE1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3I7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMuY29kZWMuYmluYXJ5LkJhc2U2NDtcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5XG5pbXBvcnQgZ3Jvb3Z5eC5uZXQuaHR0cC5IVFRQQnVpbGRlclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGlua1xuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKVxuLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy0xNzYzNFwiKVxuXG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5kZWYgYXV0b21hdGljYWxseUNvbmZpcm1lZCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUNFJ10gPyBwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q0UnXS50b1N0cmluZygpIDogXCJPUF9BVVRPTUFUSUNBTExZX0NFXCIpWzBdXG5cbi8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50c1xuQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyAgXG5DbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTtcbmRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XG5kZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcblxuZGVmIHJlcXVlc3RNZXRob2RcbmRlZiBiYXNlVVJMXG5cbmRlZiBmaXJzdFRpY2tldCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuZmlyc3RUa3QnXS50b1N0cmluZygpKVswXVxuU3RyaW5nIGFzc2V0Q0YgPSBwcm9wZXJ0aWVzWydjZi5hc3NldCddID8gcHJvcGVydGllc1snY2YuYXNzZXQnXS50b1N0cmluZygpIDogXCJPUF9BU1NFVFwiXG5kZWYgYXNzZXQgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoYXNzZXRDRilbMF1cbmRlZiBhc3NldFZhbHVlID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldClcblxubG9nLmRlYnVnIFwiYXNzZXQ6IFwiICsgYXNzZXQgKyBcIiwgYXNzZXRWYWx1ZTogXCIgKyBhc3NldFZhbHVlWzBdICsgXCIgLSBmcm9tIFwiICsgYXNzZXRWYWx1ZVswXS50b1N0cmluZygpLmluZGV4T2YoJygnKSsxXG5cbmRlZiBhc3NldEtleSA9IGFzc2V0VmFsdWVbMF0udG9TdHJpbmcoKS5zdWJzdHJpbmcoYXNzZXRWYWx1ZVswXS50b1N0cmluZygpLmluZGV4T2YoJygnKSsxLGFzc2V0VmFsdWVbMF0udG9TdHJpbmcoKS5pbmRleE9mKCcpJykpXG5cbmRlZiBhc3NldE9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihhc3NldEtleSlcbi8vZ2V0IFwiTUFOVUZBQ1RVUkVSXCIgZm9yIGFzc2V0XG5cbmRlZiBvYlRyaWFnZVxuZGVmIG1hbnVmYWN0dXJlclxubG9nLmRlYnVnIG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihhc3NldE9iamVjdC5nZXRJZCgpLCBcIk1BTlVGQUNUVVJFUlwiKVxuaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGFzc2V0T2JqZWN0LmdldElkKCksIFwiTUFOVUZBQ1RVUkVSXCIpKXtcbiAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihhc3NldE9iamVjdC5nZXRJZCgpLCBcIk1BTlVGQUNUVVJFUlwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICBtYW51ZmFjdHVyZXIgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG59XG5cbmxvZy5kZWJ1ZyBpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lXG5sb2cuZGVidWcgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShmaXJzdFRpY2tldClcblxuaWYobWFudWZhY3R1cmVyLnRvU3RyaW5nKCkuZXF1YWxzKFwiRkFBQ1wiKSl7XG4gICAgbG9nLmRlYnVnIFwibWFudWZhY3R1cmVyOiBcIiArIG1hbnVmYWN0dXJlciArIFwiIC0tPiBnZW5lcm8gZG9jdW1lbnRhemlvbmUgQ0VcIlxuICAgIC8qIFJFU1QgQVBJIHBlciBnZW5lcmF6aW9uZSBkb2N1bWVudGF6aW9uZSBDRSAqL1xuICAgIHJlcXVlc3RNZXRob2QgPSBcIkdFVFwiO1xuXG4gICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKT09bnVsbCB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpKXtcbiAgICAgICAgaWYoaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5uZXdJbnN0YWxsYXRpb24nXSkpe1xuICAgICAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vZG9jdW1lbnQvZ2VuZXJhdGlvbi9jaGVjaz9JU1NVRV9LRVk9XCIrIGFzc2V0T2JqZWN0LmdldElkKCkudG9TdHJpbmcoKSArXCImRE9DX0NBVEVHT1JZPUNFX0RPQ1VNRU5UQVRJT04mSVNTVUVfS0VZX0ZPUl9DRV9ET0M9XCIgKyBpc3N1ZS5rZXlcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBiYXNlVVJMXG4gICAgICAgICAgICBVUkwgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgICAgICAgICAgSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICAgICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgICAgICAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG5cbiAgICAgICAgICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiRXJyb3JTdHJlYW06IFwiICsgY29ubmVjdGlvbi5nZXRFcnJvclN0cmVhbSgpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJnZXRIZWFkZXJGaWVsZHMoKTogXCIgKyBjb25uZWN0aW9uLmdldEhlYWRlckZpZWxkcygpXG4gICAgICAgICAgICAgICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgICAgICAgICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgICAgICAgICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcbiAgICAgICAgICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcblxuICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJPUC1ET0NTXCIpXG4gICAgICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5tZXNzYWdlKVxuICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgICAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICAgICAgICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJFXCIsIG91dHB1dC50b1N0cmluZygpKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGVmIHVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcbiAgICBkZWYgaXNzdWVTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVTZXJ2aWNlKClcblxuICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCk9PW51bGwgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKS50b1N0cmluZygpLmVxdWFscyhcIk5vXCIpKXtcbiAgICAgICAgTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG4gICAgICAgIGZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbEluSXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHtcbiAgICAgICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG5cbiAgICAgICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgICAgICBsb2cud2FybiBcIklzc3VlIGNvbiByZWxhdGVzSW5Jc3N1ZUxpbmtcIlxuICAgICAgICAgICAgICAgIC8qRXNlZ3VpcmUgdHJhbnNhemlvbmUgZGkgc3RhdG8gZGVsbGEgc291cmNlSXNzdWUqL1xuICAgICAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZSA9IGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKVxuXG4gICAgICAgICAgICAgICAgYXNzZXRWYWx1ZSA9IGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXQpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiYXNzZXQ6IFwiICsgYXNzZXQgKyBcIiwgYXNzZXRWYWx1ZTogXCIgKyBhc3NldFZhbHVlWzBdICsgXCIgLSBmcm9tIFwiICsgYXNzZXRWYWx1ZVswXS50b1N0cmluZygpLmluZGV4T2YoJygnKSsxXG4gICAgICAgICAgICAgICAgYXNzZXRLZXkgPSBhc3NldFZhbHVlWzBdLnRvU3RyaW5nKCkuc3Vic3RyaW5nKGFzc2V0VmFsdWVbMF0udG9TdHJpbmcoKS5pbmRleE9mKCcoJykrMSxhc3NldFZhbHVlWzBdLnRvU3RyaW5nKCkuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIGFzc2V0T2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGFzc2V0S2V5KVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oYXNzZXRPYmplY3QuZ2V0SWQoKSwgXCJNQU5VRkFDVFVSRVJcIilcbiAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oYXNzZXRPYmplY3QuZ2V0SWQoKSwgXCJNQU5VRkFDVFVSRVJcIikpe1xuICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihhc3NldE9iamVjdC5nZXRJZCgpLCBcIk1BTlVGQUNUVVJFUlwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICAgICAgbWFudWZhY3R1cmVyID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKGxpbmtlZElzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQubmV3SW5zdGFsbGF0aW9uJ10pICYmIG1hbnVmYWN0dXJlci50b1N0cmluZygpLmVxdWFscyhcIkZBQUNcIikpe1xuICAgICAgICAgICAgICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvYXV0b21hdGlvbi9kb2N1bWVudC9nZW5lcmF0aW9uL2NoZWNrP0lTU1VFX0tFWT1cIisgYXNzZXRPYmplY3QuZ2V0SWQoKS50b1N0cmluZygpICtcIiZET0NfQ0FURUdPUlk9Q0VfRE9DVU1FTlRBVElPTiZJU1NVRV9LRVlfRk9SX0NFX0RPQz1cIiArIGxpbmtlZElzc3VlLmtleVxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgYmFzZVVSTFxuICAgICAgICAgICAgICAgICAgICBVUkwgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgICAgICAgICAgICAgICAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICAgICAgZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJFcnJvclN0cmVhbTogXCIgKyBjb25uZWN0aW9uLmdldEVycm9yU3RyZWFtKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiZ2V0SGVhZGVyRmllbGRzKCk6IFwiICsgY29ubmVjdGlvbi5nZXRIZWFkZXJGaWVsZHMoKVxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLURPQ1NcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsganNvbl9vYmplY3QubWVzc2FnZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgICAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIkVcIiwgb3V0cHV0LnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG4gICAgICAgIGZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbE91dElzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgICAgICAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgbG9nLndhcm4gXCJJc3N1ZSBjb24gcmVsYXRlc091dElzc3VlTGlua1wiXG4gICAgICAgICAgICAgICAgLypFc2VndWlyZSB0cmFuc2F6aW9uZSBkaSBzdGF0byBkZWxsYSBkZXN0aW5hdGlvbklzc3VlKi9cbiAgICAgICAgICAgICAgICBkZWYgbGlua2VkSXNzdWUgPSBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKVxuXG4gICAgICAgICAgICAgICAgYXNzZXRWYWx1ZSA9IGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXQpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiYXNzZXQ6IFwiICsgYXNzZXQgKyBcIiwgYXNzZXRWYWx1ZTogXCIgKyBhc3NldFZhbHVlWzBdICsgXCIgLSBmcm9tIFwiICsgYXNzZXRWYWx1ZVswXS50b1N0cmluZygpLmluZGV4T2YoJygnKSsxXG4gICAgICAgICAgICAgICAgYXNzZXRLZXkgPSBhc3NldFZhbHVlWzBdLnRvU3RyaW5nKCkuc3Vic3RyaW5nKGFzc2V0VmFsdWVbMF0udG9TdHJpbmcoKS5pbmRleE9mKCcoJykrMSxhc3NldFZhbHVlWzBdLnRvU3RyaW5nKCkuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIGFzc2V0T2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGFzc2V0S2V5KVxuXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihhc3NldE9iamVjdC5nZXRJZCgpLCBcIk1BTlVGQUNUVVJFUlwiKVxuICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihhc3NldE9iamVjdC5nZXRJZCgpLCBcIk1BTlVGQUNUVVJFUlwiKSl7XG4gICAgICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGFzc2V0T2JqZWN0LmdldElkKCksIFwiTUFOVUZBQ1RVUkVSXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgICAgICAgICBtYW51ZmFjdHVyZXIgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYobGlua2VkSXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5uZXdJbnN0YWxsYXRpb24nXSkgJiYgbWFudWZhY3R1cmVyLnRvU3RyaW5nKCkuZXF1YWxzKFwiRkFBQ1wiKSl7XG4gICAgICAgICAgICAgICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL2RvY3VtZW50L2dlbmVyYXRpb24vY2hlY2s/SVNTVUVfS0VZPVwiKyBhc3NldE9iamVjdC5nZXRJZCgpLnRvU3RyaW5nKCkgK1wiJkRPQ19DQVRFR09SWT1DRV9ET0NVTUVOVEFUSU9OJklTU1VFX0tFWV9GT1JfQ0VfRE9DPVwiICsgbGlua2VkSXNzdWUua2V5XG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBiYXNlVVJMXG4gICAgICAgICAgICAgICAgICAgIFVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgICAgICAgICAgICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgICAgICAgICAgICAgICAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgICAgICBkZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICAgICAgZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIkVycm9yU3RyZWFtOiBcIiArIGNvbm5lY3Rpb24uZ2V0RXJyb3JTdHJlYW0oKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJnZXRIZWFkZXJGaWVsZHMoKTogXCIgKyBjb25uZWN0aW9uLmdldEhlYWRlckZpZWxkcygpXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcblxuICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtRE9DU1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5tZXNzYWdlKVxuICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcbiAgICAgICAgICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgICAgICAgICAgICAgICAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKFwiRVwiLCBvdXRwdXQudG9TdHJpbmcoKSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1lbHNle1xuICAgIGxvZy5kZWJ1ZyBcIm1hbnVmYWN0dXJlcjogXCIgKyBtYW51ZmFjdHVyZXIgKyBcIiAtLT4gTk9OIGdlbmVybyBkb2N1bWVudGF6aW9uZSBDRVwiXG59XG4iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="7">
              <post-functions>
                <function type="class">
                  <arg name="field.copyFieldSource1"></arg>
                  <arg name="textValue">-1</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="workflowName-textValue">OPAA: PM Task Workflow</arg>
                  <arg name="performTransitionAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="scopeType">PARENT</arg>
                  <arg name="destination-scopeTarget">SUB_TASK</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitieslinkedtransition-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="integerValue">51</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.linkedtransition.LinkedTransitionFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                  <arg name="status"></arg>
                </function>
                <function type="class">
                  <arg name="field.name">resolution</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
                  <arg name="field.value">6</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">cb1f83508d578368bc33689cfe415057fb57da44</arg>
                  <arg name="FIELD_NOTES">YCFgT1A6IERvYyBUZW1wbGF0ZSBnZW5lcmF0aW9uIC0gc2UgTmV3IEluc3RhbGxhdGlvbiAtIEdlbmVyYSBDRV9ET0NVTUVOVEFUSU9OIC0gcGVyIGlzc3VlIGNvcnJlbnRlIGUgY29sbGVnYXRp</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5Xb3JrZmxvd0V4Y2VwdGlvbjtcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvblxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyO1xuaW1wb3J0IGdyb292eS5qc29uLlN0cmVhbWluZ0pzb25CdWlsZGVyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5DdXN0b21GaWVsZE1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3I7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMuY29kZWMuYmluYXJ5LkJhc2U2NDtcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5XG5pbXBvcnQgZ3Jvb3Z5eC5uZXQuaHR0cC5IVFRQQnVpbGRlclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGlua1xuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiBhdXRvbWF0aWNhbGx5Q29uZmlybWVkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q0UnXSA/IHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlDRSddLnRvU3RyaW5nKCkgOiBcIk9QX0FVVE9NQVRJQ0FMTFlfQ0VcIilbMF1cblxuLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzXG5DbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7ICBcbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcblxuZGVmIGZpcnN0VGlja2V0ID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5maXJzdFRrdCddLnRvU3RyaW5nKCkpWzBdXG5TdHJpbmcgYXNzZXRDRiA9IHByb3BlcnRpZXNbJ2NmLmFzc2V0J10gPyBwcm9wZXJ0aWVzWydjZi5hc3NldCddLnRvU3RyaW5nKCkgOiBcIk9QX0FTU0VUXCJcbmRlZiBhc3NldCA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShhc3NldENGKVswXVxuZGVmIGFzc2V0VmFsdWUgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0KVxuXG5sb2cuZGVidWcgXCJhc3NldDogXCIgKyBhc3NldCArIFwiLCBhc3NldFZhbHVlOiBcIiArIGFzc2V0VmFsdWVbMF0gKyBcIiAtIGZyb20gXCIgKyBhc3NldFZhbHVlWzBdLnRvU3RyaW5nKCkuaW5kZXhPZignKCcpKzFcblxuZGVmIGFzc2V0S2V5ID0gYXNzZXRWYWx1ZVswXS50b1N0cmluZygpLnN1YnN0cmluZyhhc3NldFZhbHVlWzBdLnRvU3RyaW5nKCkuaW5kZXhPZignKCcpKzEsYXNzZXRWYWx1ZVswXS50b1N0cmluZygpLmluZGV4T2YoJyknKSlcblxuZGVmIGFzc2V0T2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGFzc2V0S2V5KVxuXG5sb2cuZGVidWcgaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZVxubG9nLmRlYnVnIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZmlyc3RUaWNrZXQpXG5cblxuLyogUkVTVCBBUEkgcGVyIEludmlvIE5vdGlmaWNhIEVtYWlsIE9OU0lURV9SRVBPUlQgKi9cbnJlcXVlc3RNZXRob2QgPSBcIkdFVFwiO1xuXG5pZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpPT1udWxsIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCkudG9TdHJpbmcoKS5lcXVhbHMoXCJOb1wiKSl7XG4gICAgaWYoaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5uZXdJbnN0YWxsYXRpb24nXSkpe1xuICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvYXV0b21hdGlvbi9kb2N1bWVudC9nZW5lcmF0aW9uL2NoZWNrP0lTU1VFX0tFWT1cIisgYXNzZXRPYmplY3QuZ2V0SWQoKS50b1N0cmluZygpICtcIiZET0NfQ0FURUdPUlk9Q0VfRE9DVU1FTlRBVElPTiZJU1NVRV9LRVlfRk9SX0NFX0RPQz1cIiArIGlzc3VlLmtleVxuICAgICAgICBsb2cuZGVidWcgYmFzZVVSTFxuICAgICAgICBVUkwgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgICAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG5cbiAgICAgICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuXG4gICAgICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJFcnJvclN0cmVhbTogXCIgKyBjb25uZWN0aW9uLmdldEVycm9yU3RyZWFtKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiZ2V0SGVhZGVyRmllbGRzKCk6IFwiICsgY29ubmVjdGlvbi5nZXRIZWFkZXJGaWVsZHMoKVxuICAgICAgICAgICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xuXG4gICAgICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICAgICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcbiAgICAgICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG5cbiAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLURPQ1NcIilcbiAgICAgICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsganNvbl9vYmplY3QubWVzc2FnZSlcbiAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICAgICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIkVcIiwgb3V0cHV0LnRvU3RyaW5nKCkpXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmRlZiB1c2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXG5kZWYgaXNzdWVTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVTZXJ2aWNlKClcblxuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKT09bnVsbCB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLnRvU3RyaW5nKCkuZXF1YWxzKFwiTm9cIikpe1xuICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKVxuICAgIGZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbEluSXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHtcbiAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcblxuICAgICAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICBsb2cud2FybiBcIklzc3VlIGNvbiByZWxhdGVzSW5Jc3N1ZUxpbmtcIlxuICAgICAgICAgICAgLypFc2VndWlyZSB0cmFuc2F6aW9uZSBkaSBzdGF0byBkZWxsYSBzb3VyY2VJc3N1ZSovXG4gICAgICAgICAgICBkZWYgbGlua2VkSXNzdWUgPSBpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYXNzZXRWYWx1ZSA9IGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXQpXG5cdFx0XHRsb2cuZGVidWcgXCJhc3NldDogXCIgKyBhc3NldCArIFwiLCBhc3NldFZhbHVlOiBcIiArIGFzc2V0VmFsdWVbMF0gKyBcIiAtIGZyb20gXCIgKyBhc3NldFZhbHVlWzBdLnRvU3RyaW5nKCkuaW5kZXhPZignKCcpKzFcbiAgICAgICAgICAgIGFzc2V0S2V5ID0gYXNzZXRWYWx1ZVswXS50b1N0cmluZygpLnN1YnN0cmluZyhhc3NldFZhbHVlWzBdLnRvU3RyaW5nKCkuaW5kZXhPZignKCcpKzEsYXNzZXRWYWx1ZVswXS50b1N0cmluZygpLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgIGFzc2V0T2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGFzc2V0S2V5KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihsaW5rZWRJc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0Lm5ld0luc3RhbGxhdGlvbiddKSl7XG4gICAgICAgICAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vZG9jdW1lbnQvZ2VuZXJhdGlvbi9jaGVjaz9JU1NVRV9LRVk9XCIrIGFzc2V0T2JqZWN0LmdldElkKCkudG9TdHJpbmcoKSArXCImRE9DX0NBVEVHT1JZPUNFX0RPQ1VNRU5UQVRJT04mSVNTVUVfS0VZX0ZPUl9DRV9ET0M9XCIgKyBsaW5rZWRJc3N1ZS5rZXlcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgYmFzZVVSTFxuICAgICAgICAgICAgICAgIFVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgICAgICAgICAgSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgICAgICAgICAgICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuXG4gICAgICAgICAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiRXJyb3JTdHJlYW06IFwiICsgY29ubmVjdGlvbi5nZXRFcnJvclN0cmVhbSgpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiZ2V0SGVhZGVyRmllbGRzKCk6IFwiICsgY29ubmVjdGlvbi5nZXRIZWFkZXJGaWVsZHMoKVxuICAgICAgICAgICAgICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgICAgICAgICAgICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICAgICAgICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICAgICAgICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG5cbiAgICAgICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJPUC1ET0NTXCIpXG4gICAgICAgICAgICAgICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsganNvbl9vYmplY3QubWVzc2FnZSlcbiAgICAgICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcbiAgICAgICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgICAgICAgICAgICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJFXCIsIG91dHB1dC50b1N0cmluZygpKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG4gICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsT3V0SXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHtcbiAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcblxuICAgICAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICBsb2cud2FybiBcIklzc3VlIGNvbiByZWxhdGVzT3V0SXNzdWVMaW5rXCJcbiAgICAgICAgICAgIC8qRXNlZ3VpcmUgdHJhbnNhemlvbmUgZGkgc3RhdG8gZGVsbGEgZGVzdGluYXRpb25Jc3N1ZSovXG4gICAgICAgICAgICBkZWYgbGlua2VkSXNzdWUgPSBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBhc3NldFZhbHVlID0gbGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldClcblx0XHRcdGxvZy5kZWJ1ZyBcImFzc2V0OiBcIiArIGFzc2V0ICsgXCIsIGFzc2V0VmFsdWU6IFwiICsgYXNzZXRWYWx1ZVswXSArIFwiIC0gZnJvbSBcIiArIGFzc2V0VmFsdWVbMF0udG9TdHJpbmcoKS5pbmRleE9mKCcoJykrMVxuICAgICAgICAgICAgYXNzZXRLZXkgPSBhc3NldFZhbHVlWzBdLnRvU3RyaW5nKCkuc3Vic3RyaW5nKGFzc2V0VmFsdWVbMF0udG9TdHJpbmcoKS5pbmRleE9mKCcoJykrMSxhc3NldFZhbHVlWzBdLnRvU3RyaW5nKCkuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgYXNzZXRPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oYXNzZXRLZXkpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKGxpbmtlZElzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQubmV3SW5zdGFsbGF0aW9uJ10pKXtcbiAgICAgICAgICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvYXV0b21hdGlvbi9kb2N1bWVudC9nZW5lcmF0aW9uL2NoZWNrP0lTU1VFX0tFWT1cIisgYXNzZXRPYmplY3QuZ2V0SWQoKS50b1N0cmluZygpICtcIiZET0NfQ0FURUdPUlk9Q0VfRE9DVU1FTlRBVElPTiZJU1NVRV9LRVlfRk9SX0NFX0RPQz1cIiArIGxpbmtlZElzc3VlLmtleVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBiYXNlVVJMXG4gICAgICAgICAgICAgICAgVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICAgICAgICAgICAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG5cbiAgICAgICAgICAgICAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG5cbiAgICAgICAgICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJFcnJvclN0cmVhbTogXCIgKyBjb25uZWN0aW9uLmdldEVycm9yU3RyZWFtKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJnZXRIZWFkZXJGaWVsZHMoKTogXCIgKyBjb25uZWN0aW9uLmdldEhlYWRlckZpZWxkcygpXG4gICAgICAgICAgICAgICAgICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHRcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xuXG4gICAgICAgICAgICAgICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgICAgICAgICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpXG4gICAgICAgICAgICAgICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcblxuICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLURPQ1NcIilcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5tZXNzYWdlKVxuICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgICAgICAgICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIkVcIiwgb3V0cHV0LnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuV29ya2Zsb3dFeGNlcHRpb247CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7CmltcG9ydCBncm9vdnkuanNvbi5TdHJlYW1pbmdKc29uQnVpbGRlcjsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5DdXN0b21GaWVsZE1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3I7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlCmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMuY29kZWMuYmluYXJ5LkJhc2U2NDsKaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGdyb292eXgubmV0Lmh0dHAuSFRUUEJ1aWxkZXIKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXIKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsCgpQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpCkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpCnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7Cglwcm9wZXJ0aWVzLmxvYWQoaXQpCn0KQ2F0ZWdvcnkgbG9nID0gQ2F0ZWdvcnkuZ2V0SW5zdGFuY2UoImNvbS5vbnJlc29sdmUuamlyYS5ncm9vdnkuUG9zdEZ1bmN0aW9uIikKbG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpCgpJc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7CkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTsKLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzCkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlIik7ICAKQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSIpOwpkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpOwpkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTsKCmRlZiByZXF1ZXN0TWV0aG9kCmRlZiBiYXNlVVJMCgpkZWYgZmlyc3RUaWNrZXQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmZpcnN0VGt0J10udG9TdHJpbmcoKSlbMF0KU3RyaW5nIGFzc2V0Q0YgPSBwcm9wZXJ0aWVzWydjZi5hc3NldCddID8gcHJvcGVydGllc1snY2YuYXNzZXQnXS50b1N0cmluZygpIDogIk9QX0FTU0VUIgpkZWYgYXNzZXQgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoYXNzZXRDRilbMF0KZGVmIGFzc2V0VmFsdWUgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0KQoKbG9nLmRlYnVnICJhc3NldDogIiArIGFzc2V0ICsgIiwgYXNzZXRWYWx1ZTogIiArIGFzc2V0VmFsdWVbMF0gKyAiIC0gZnJvbSAiICsgYXNzZXRWYWx1ZVswXS50b1N0cmluZygpLmluZGV4T2YoJygnKSsxCgpkZWYgYXNzZXRLZXkgPSBhc3NldFZhbHVlWzBdLnRvU3RyaW5nKCkuc3Vic3RyaW5nKGFzc2V0VmFsdWVbMF0udG9TdHJpbmcoKS5pbmRleE9mKCcoJykrMSxhc3NldFZhbHVlWzBdLnRvU3RyaW5nKCkuaW5kZXhPZignKScpKQoKZGVmIGFzc2V0T2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGFzc2V0S2V5KQoKbG9nLmRlYnVnIGlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUKbG9nLmRlYnVnIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZmlyc3RUaWNrZXQpCgoKLyogUkVTVCBBUEkgcGVyIEludmlvIE5vdGlmaWNhIEVtYWlsIE9OU0lURV9SRVBPUlQgKi8KcmVxdWVzdE1ldGhvZCA9ICJHRVQiOwoKaWYoaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5uZXdJbnN0YWxsYXRpb24nXSkpewogICAgYmFzZVVSTCA9ICJodHRwOi8vIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgIi9vcC9yZXN0L2F1dG9tYXRpb24vZG9jdW1lbnQvZ2VuZXJhdGlvbi9jaGVjaz9JU1NVRV9LRVk9IisgYXNzZXRPYmplY3QuZ2V0SWQoKS50b1N0cmluZygpICsiJkRPQ19DQVRFR09SWT1DRV9ET0NVTUVOVEFUSU9OIgogICAgbG9nLmRlYnVnIGJhc2VVUkwKICAgIFVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpCiAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpOwogICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpOwogICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi9qc29uIik7CiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eSgiQWNjZXB0IiwgIiovKiIpOwogICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTsKICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTsKICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpOwoKICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KCkKICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKQogICAgZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpCiAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpCgogICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKCIyMDAiKSl7CiAgICAgICAgbG9nLmRlYnVnICJ1cmw6ICIgKyB1cmwKICAgICAgICBsb2cuZGVidWcgIlJlc3BvbnNlQ29kZToiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKQogICAgICAgIGxvZy5kZWJ1ZyAiUmVzcG9uc2VNZXNzYWdlOiIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpCiAgICAgICAgbG9nLmRlYnVnICJFcnJvclN0cmVhbTogIiArIGNvbm5lY3Rpb24uZ2V0RXJyb3JTdHJlYW0oKS50b1N0cmluZygpCiAgICAgICAgbG9nLmRlYnVnICJnZXRIZWFkZXJGaWVsZHMoKTogIiArIGNvbm5lY3Rpb24uZ2V0SGVhZGVyRmllbGRzKCkKICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0CiAgICAgICAgbG9nLmRlYnVnICIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6ICIgKyBvdXRwdXRNc2cKCiAgICAgICAgZGVmIGpzb25TbHVycGVyID0gbmV3IEpzb25TbHVycGVyKCkKICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKQogICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgCiAgICAgICAgbG9nLmRlYnVnICJtZXNzYWdlOiAiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2UKCiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKCJFIikKICAgICAgICBlTGlzdEVycm9ycy5hZGQoIk9QLURPQ1MiKQogICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArICIgIiArIGpzb25fb2JqZWN0Lm1lc3NhZ2UpCiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncykKICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpCgogICAgICAgIG91dHB1dC5hZGQoZUxpc3QpCiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiRSIsIG91dHB1dC50b1N0cmluZygpKQogICAgfQp9Cg==</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="disabled">true</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE"></arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">d218642b-8282-4ed9-bfa6-22fd4f196c49</arg>
                  <arg name="FIELD_NOTES">YCFgT1A6IE5ldyBJbnN0YWxsYXRpb24gLSBDaGVjayBsaW5rZWRUaWNrZXRzICYgRmFzdC1UcmFuc2FjdCB0aGVt</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbkNhdGVnb3J5IGxvZyA9IENhdGVnb3J5LmdldEluc3RhbmNlKFwiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb25cIilcbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLldBUk4pXG5cbmxvZy53YXJuIFwiJHtpc3N1ZS5rZXl9IFRyYW5zYXppb25lIFRLVCBDSElVU08gLSBQb3N0IEZ1bmN0aW9uIGNoZWNrIGxpbmtlZElzc3Vlc1wiXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiBhdXRvbWF0aWNhbGx5Q29uZmlybWVkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q2xvc2VkJ10gPyBwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q2xvc2VkJ10udG9TdHJpbmcoKSA6IFwiT1BfQVVUT01BVElDQUxMWV9DTE9TRURcIilbMF1cbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5cbklzc3VlIGlzc3VlID0gaXNzdWVcbi8vUGVyIHRlc3QgZGEgY29uc29sZVxuLy9pc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIk9QVVQtMjc2XCIpXG5cbi8qREVWKi9cbkNMT1NFX1RLVCA9IHByb3BlcnRpZXNbJ3dmLnRyLmNsb3NlJ10gPyBwcm9wZXJ0aWVzWyd3Zi50ci5jbG9zZSddIDogMTgxXG5cbi8qUFJPRCovXG4vL0NPTkZJUk1fVE9fQ1VTVE9NRVJcblxuZGVmIHVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcbmRlZiBpc3N1ZVNlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZVNlcnZpY2UoKVxuXG4vKlNlIGVzZWd1byBsYSBjb25maXJtIHRvIGN1c3RvbWVyIHN1IHVuIHRpY2tldCBjb24gMSBvICsgdGlja2V0IGNvbGxlZ2F0aSwgdmVyaWZpY28gZSBzcG9zdG8gaW4gYXV0b21hdGljbyBnbGkgZXZlbnR1YWxpIHRpY2tldCBjb2xsZWdhdGkqL1xubG9nLndhcm4gXCJ2ZXJpZmljbyBlIHNwb3N0byBpbiBhdXRvbWF0aWNvIGdsaSBldmVudHVhbGkgdGlja2V0IGNvbGxlZ2F0aVwiXG5cbmlmKGlzc3VlLmdldElzc3VlVHlwZSgpLmdldE5hbWUoKSA9PSBwcm9wZXJ0aWVzWydpdC5uZXdJbnN0YWxsYXRpb24nXS50b1N0cmluZygpICYmIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCk9PW51bGwgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKS50b1N0cmluZygpLmVxdWFscyhcIk5vXCIpKXtcbiAgICBMaXN0PElzc3VlTGluaz4gYWxsSW5Jc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0SW53YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxJbklzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG5cbiAgICAgICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgbG9nLndhcm4gXCJJc3N1ZSBjb24gcmVsYXRlc0luSXNzdWVMaW5rXCJcbiAgICAgICAgICAgIC8qRXNlZ3VpcmUgdHJhbnNhemlvbmUgZGkgc3RhdG8gZGVsbGEgc291cmNlSXNzdWUqL1xuICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlID0gaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpXG4gICAgICAgICAgICBkZWYgbGlua2VkSXNzdWVTdGF0dXMgPSBsaW5rZWRJc3N1ZS5nZXRTdGF0dXMoKVxuICAgICAgICAgICAgZGVmIHRyYW5zaXRpb25JZFxuICAgICAgICAgICAgaWYobGlua2VkSXNzdWVTdGF0dXMubmFtZSA9PSAocHJvcGVydGllc1snd2YuY29tcGxldGVkVG9CZUNsb3NlZCddID8gcHJvcGVydGllc1snd2YuY29tcGxldGVkVG9CZUNsb3NlZCddLnRvU3RyaW5nKCkgOiBcIkNvbXBsZXRlZCB0byBiZSBDbG9zZWRcIikgKXtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9Q0xPU0VfVEtUXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZih0cmFuc2l0aW9uSWQ9PUNMT1NFX1RLVCl7XG4gICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uXG4gICAgICAgICAgICAgICAgZGVmIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKClcbiAgICAgICAgICAgICAgICBpc3N1ZUlucHV0UGFyYW1ldGVycy53aXRoIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0U2tpcFNjcmVlbkNoZWNrKHRydWUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSlcbiAgICAgICAgICAgICAgICAvL0NvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICAgICAgICAgICAgICAvL2lzc3VlSW5wdXRQYXJhbWV0ZXJzLmFkZEN1c3RvbUZpZWxkVmFsdWUoZmllbGRDb25maWcuZ2V0SWQoKSwgXCJZZXNcIikgXG4gICAgICAgICAgICAgICAgLy9sb2cud2FybiBcImlzc3VlSW5wdXRQYXJhbWV0ZXJzOiBcIiArIGlzc3VlSW5wdXRQYXJhbWV0ZXJzXG4gICAgICAgICAgICAgICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXG4gICAgICAgICAgICAgICAgZGVmIG1pID0gKE11dGFibGVJc3N1ZSkgbGlua2VkSXNzdWVcblxuICAgICAgICAgICAgICAgIGRlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDb25maXJtZWQuZ2V0UmVsZXZhbnRDb25maWcobGlua2VkSXNzdWUpXG4gICAgICAgICAgICAgICAgbG9nLndhcm4gXCJmaWVsZENvbmZpZzogXCIgKyBmaWVsZENvbmZpZ1xuICAgICAgICAgICAgICAgIGRlZiBjZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09IFwiWWVzXCIgfVxuICAgICAgICAgICAgICAgIGF1dG9tYXRpY2FsbHlDb25maXJtZWQudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG5cbiAgICAgICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChsaW5rZWRJc3N1ZSlcbiAgICAgICAgICAgICAgICBsb2cud2FybiBcIlVwZGF0ZWQgY3VzdG9tZmllbGQgLSBpc3N1ZSBsaW5rYXRhXCJcblxuICAgICAgICAgICAgICAgIC8vZGVmIHZhbGlkYXRpb25SZXN1bHQgPSBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKVxuICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgdHJhbnNpdGlvblxuICAgICAgICAgICAgICAgICAgICBkZWYgaXNzdWVSZXN1bHQgPSBpc3N1ZVNlcnZpY2UudHJhbnNpdGlvbih1c2VyLCBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEgaXNzdWVSZXN1bHQuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIkZhaWxlZCB0byB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiVHJhbnNhemlvbmUgZmF0dGEgNzkgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSwgJHtsaW5rZWRJc3N1ZS5zdGF0dXN9XCIpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIkNvdWxkIG5vdCB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG4gICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsT3V0SXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHtcbiAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcblxuICAgICAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICBsb2cud2FybiBcIklzc3VlIGNvbiByZWxhdGVzT3V0SXNzdWVMaW5rXCJcbiAgICAgICAgICAgIC8qRXNlZ3VpcmUgdHJhbnNhemlvbmUgZGkgc3RhdG8gZGVsbGEgZGVzdGluYXRpb25Jc3N1ZSovXG4gICAgICAgICAgICBkZWYgbGlua2VkSXNzdWUgPSBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKVxuICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlU3RhdHVzID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzKClcbiAgICAgICAgICAgIGRlZiB0cmFuc2l0aW9uSWRcbiAgICAgICAgICAgIGxvZy53YXJuIFwibGlua2VkSXNzdWU6IFwiICsgbGlua2VkSXNzdWVcbiAgICAgICAgICAgIGxvZy53YXJuIFwibGlua2VkSXNzdWVTdGF0dXMubmFtZTogXCIgKyBsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lXG4gICAgICAgICAgICBpZihsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lID09IChwcm9wZXJ0aWVzWyd3Zi5jb21wbGV0ZWRUb0JlQ2xvc2VkJ10gPyBwcm9wZXJ0aWVzWyd3Zi5jb21wbGV0ZWRUb0JlQ2xvc2VkJ10udG9TdHJpbmcoKSA6IFwiQ29tcGxldGVkIHRvIGJlIENsb3NlZFwiKSl7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbklkPUNMT1NFX1RLVFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZih0cmFuc2l0aW9uSWQ9PUNMT1NFX1RLVCl7XG4gICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uXG4gICAgICAgICAgICAgICAgZGVmIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKClcbiAgICAgICAgICAgICAgICBpc3N1ZUlucHV0UGFyYW1ldGVycy53aXRoIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0U2tpcFNjcmVlbkNoZWNrKHRydWUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSlcbiAgICAgICAgICAgICAgICAvL0NvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICAgICAgICAgICAgICAvL2lzc3VlSW5wdXRQYXJhbWV0ZXJzLmFkZEN1c3RvbUZpZWxkVmFsdWUoZmllbGRDb25maWcuZ2V0SWQoKSwgXCJZZXNcIikgXG5cbiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcbiAgICAgICAgICAgICAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBsaW5rZWRJc3N1ZVxuXG4gICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNvbmZpcm1lZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSlcbiAgICAgICAgICAgICAgICBsb2cud2FybiBcImZpZWxkQ29uZmlnOiBcIiArIGZpZWxkQ29uZmlnXG4gICAgICAgICAgICAgICAgZGVmIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gXCJZZXNcIiB9XG4gICAgICAgICAgICAgICAgYXV0b21hdGljYWxseUNvbmZpcm1lZC51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcblxuICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGxpbmtlZElzc3VlKVxuICAgICAgICAgICAgICAgIGxvZy53YXJuIFwiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGFcIlxuXG4gICAgICAgICAgICAgICAgaWYgKGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSB0cmFuc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpKVxuICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259XCIpXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJUcmFuc2F6aW9uZSBmYXR0YSAxMjIgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSwgJHtsaW5rZWRJc3N1ZS5zdGF0dXN9XCIpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIkNvdWxkIG5vdCB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfVxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlCmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZQppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQpDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5XQVJOKQoKbG9nLndhcm4gIiR7aXNzdWUua2V5fSBUcmFuc2F6aW9uZSBUS1QgQ0hJVVNPIC0gUG9zdCBGdW5jdGlvbiBjaGVjayBsaW5rZWRJc3N1ZXMiCgpJc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7CkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTsKZGVmIGF1dG9tYXRpY2FsbHlDb25maXJtZWQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlEb25lJ10gPyBwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5RG9uZSddLnRvU3RyaW5nKCkgOiAiT1BfQVVUT01BVElDQUxMWV9ET05FIilbMF0KSXNzdWVJbmRleGluZ1NlcnZpY2UgCWlzc3VlSW5kZXhpbmdTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KElzc3VlSW5kZXhpbmdTZXJ2aWNlKQoKSXNzdWUgaXNzdWUgPSBpc3N1ZQovL1BlciB0ZXN0IGRhIGNvbnNvbGUKLy9pc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZSgiT1BVVC0yNzYiKQoKLypERVYqLwpDTE9TRV9US1QgPSBwcm9wZXJ0aWVzWyd3Zi50ci5jbG9zZSddID8gcHJvcGVydGllc1snd2YudHIuY2xvc2UnXSA6IDE4MQoKLypQUk9EKi8KLy9DT05GSVJNX1RPX0NVU1RPTUVSCgpkZWYgdXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKQpkZWYgaXNzdWVTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVTZXJ2aWNlKCkKCi8qU2UgZXNlZ3VvIGxhIGNvbmZpcm0gdG8gY3VzdG9tZXIgc3UgdW4gdGlja2V0IGNvbiAxIG8gKyB0aWNrZXQgY29sbGVnYXRpLCB2ZXJpZmljbyBlIHNwb3N0byBpbiBhdXRvbWF0aWNvIGdsaSBldmVudHVhbGkgdGlja2V0IGNvbGxlZ2F0aSovCmxvZy53YXJuICJ2ZXJpZmljbyBlIHNwb3N0byBpbiBhdXRvbWF0aWNvIGdsaSBldmVudHVhbGkgdGlja2V0IGNvbGxlZ2F0aSIKCmlmKGlzc3VlLmdldElzc3VlVHlwZSgpLmdldE5hbWUoKSA9PSBwcm9wZXJ0aWVzWydpdC5uZXdJbnN0YWxsYXRpb24nXS50b1N0cmluZygpICYmIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCk9PW51bGwgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKS50b1N0cmluZygpLmVxdWFscygiTm8iKSl7CiAgICBMaXN0PElzc3VlTGluaz4gYWxsSW5Jc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0SW53YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSkKICAgIGZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbEluSXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHsKICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpOwoKICAgICAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgIGxvZy53YXJuICJJc3N1ZSBjb24gcmVsYXRlc0luSXNzdWVMaW5rIgogICAgICAgICAgICAvKkVzZWd1aXJlIHRyYW5zYXppb25lIGRpIHN0YXRvIGRlbGxhIHNvdXJjZUlzc3VlKi8KICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlID0gaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpCiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZVN0YXR1cyA9IGxpbmtlZElzc3VlLmdldFN0YXR1cygpCiAgICAgICAgICAgIGRlZiB0cmFuc2l0aW9uSWQKICAgICAgICAgICAgaWYobGlua2VkSXNzdWVTdGF0dXMubmFtZSA9PSAocHJvcGVydGllc1snd2YuY29tcGxldGVkVG9CZUNsb3NlZCddID8gcHJvcGVydGllc1snd2YuY29tcGxldGVkVG9CZUNsb3NlZCddLnRvU3RyaW5nKCkgOiAiQ29tcGxldGVkIHRvIGJlIENsb3NlZCIpICl7CiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9Q0xPU0VfVEtUCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYodHJhbnNpdGlvbklkPT1DTE9TRV9US1QpewogICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKQogICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7CiAgICAgICAgICAgICAgICAgICAgc2V0U2tpcFNjcmVlbkNoZWNrKHRydWUpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvL2RlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpCiAgICAgICAgICAgICAgICAvL0NvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICAvL2lzc3VlSW5wdXRQYXJhbWV0ZXJzLmFkZEN1c3RvbUZpZWxkVmFsdWUoZmllbGRDb25maWcuZ2V0SWQoKSwgIlllcyIpIAogICAgICAgICAgICAgICAgLy9sb2cud2FybiAiaXNzdWVJbnB1dFBhcmFtZXRlcnM6ICIgKyBpc3N1ZUlucHV0UGFyYW1ldGVycwogICAgICAgICAgICAgICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpCiAgICAgICAgICAgICAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBsaW5rZWRJc3N1ZQoKICAgICAgICAgICAgICAgIGRlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDb25maXJtZWQuZ2V0UmVsZXZhbnRDb25maWcobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICBsb2cud2FybiAiZmllbGRDb25maWc6ICIgKyBmaWVsZENvbmZpZwogICAgICAgICAgICAgICAgZGVmIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gIlllcyIgfQogICAgICAgICAgICAgICAgYXV0b21hdGljYWxseUNvbmZpcm1lZC51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSkKCiAgICAgICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7CiAgICAgICAgICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGxpbmtlZElzc3VlKQogICAgICAgICAgICAgICAgbG9nLndhcm4gIlVwZGF0ZWQgY3VzdG9tZmllbGQgLSBpc3N1ZSBsaW5rYXRhIgoKICAgICAgICAgICAgICAgIC8vZGVmIHZhbGlkYXRpb25SZXN1bHQgPSBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKQogICAgICAgICAgICAgICAgaWYgKGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb24KICAgICAgICAgICAgICAgICAgICBkZWYgaXNzdWVSZXN1bHQgPSBpc3N1ZVNlcnZpY2UudHJhbnNpdGlvbih1c2VyLCBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKSkKICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIkZhaWxlZCB0byB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSIpCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJUcmFuc2F6aW9uZSBmYXR0YSA3OSAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c30iKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIkNvdWxkIG5vdCB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuZXJyb3JDb2xsZWN0aW9ufSIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgTGlzdDxJc3N1ZUxpbms+IGFsbE91dElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSkKICAgIGZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbE91dElzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7CiAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTsKCiAgICAgICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICBsb2cud2FybiAiSXNzdWUgY29uIHJlbGF0ZXNPdXRJc3N1ZUxpbmsiCiAgICAgICAgICAgIC8qRXNlZ3VpcmUgdHJhbnNhemlvbmUgZGkgc3RhdG8gZGVsbGEgZGVzdGluYXRpb25Jc3N1ZSovCiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZSA9IGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpCiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZVN0YXR1cyA9IGxpbmtlZElzc3VlLmdldFN0YXR1cygpCiAgICAgICAgICAgIGRlZiB0cmFuc2l0aW9uSWQKICAgICAgICAgICAgbG9nLndhcm4gImxpbmtlZElzc3VlOiAiICsgbGlua2VkSXNzdWUKICAgICAgICAgICAgbG9nLndhcm4gImxpbmtlZElzc3VlU3RhdHVzLm5hbWU6ICIgKyBsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lCiAgICAgICAgICAgIGlmKGxpbmtlZElzc3VlU3RhdHVzLm5hbWUgPT0gKHByb3BlcnRpZXNbJ3dmLmNvbXBsZXRlZFRvQmVDbG9zZWQnXSA/IHByb3BlcnRpZXNbJ3dmLmNvbXBsZXRlZFRvQmVDbG9zZWQnXS50b1N0cmluZygpIDogIkNvbXBsZXRlZCB0byBiZSBDbG9zZWQiKSl7CiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9Q0xPU0VfVEtUCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKHRyYW5zaXRpb25JZD09Q0xPU0VfVEtUKXsKICAgICAgICAgICAgICAgIC8vIFByZXBhcmUgb3VyIGlucHV0IGZvciB0aGUgdHJhbnNpdGlvbgogICAgICAgICAgICAgICAgZGVmIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKCkKICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGggewogICAgICAgICAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayh0cnVlKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy9kZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKQogICAgICAgICAgICAgICAgLy9Db21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gIlllcyIgfQogICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksICJZZXMiKSAKCiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlCgogICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNvbmZpcm1lZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgIGxvZy53YXJuICJmaWVsZENvbmZpZzogIiArIGZpZWxkQ29uZmlnCiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoKICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTsKICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICBsb2cud2FybiAiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGEiCgogICAgICAgICAgICAgICAgaWYgKGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb24KICAgICAgICAgICAgICAgICAgICBkZWYgaXNzdWVSZXN1bHQgPSBpc3N1ZVNlcnZpY2UudHJhbnNpdGlvbih1c2VyLCBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKSkKICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIkZhaWxlZCB0byB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSIpCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJUcmFuc2F6aW9uZSBmYXR0YSAxMjIgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSwgJHtsaW5rZWRJc3N1ZS5zdGF0dXN9IikKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJDb3VsZCBub3QgdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmVycm9yQ29sbGVjdGlvbn0iKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgIH0KICAgIH0KfQ==</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE"></arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="191" name="Invia Consuntivo al Cliente" view="fieldscreen">
          <meta name="opsbar-sequence">30</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">19911</meta>
          <restrict-to>
            <conditions type="AND">
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">a0f5c2ba-110e-404e-99b7-f01f177a8cfe</arg>
                <arg name="FIELD_NOTES">YCFgRW5hYmxlZCBvbmx5IGZvciBSZXBhaXIgVGlja2V0</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnTWFpbnRlbmFuY2UgVGlja2V0JyIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
              </condition>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">fada32c2-b768-4770-816d-beeac0f8e084</arg>
                <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIEZJTkFOQ0lBTF9TVEFURU1FTlRfVE9fQ1VTVE9NRVIgLSBJZiBpdCdzIG51bGwgdGhlIGVtYWlsIGhhcyBub3QgYmVlbiBzZW50IHlldA==</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5cblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5jZlZhbHVlc1twcm9wZXJ0aWVzWydjZi53ZkZpbmFuY2lhbFN0YXRtVG9DJ11dID09IG51bGwiLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">e70180eb-0cf2-468c-b6c4-1eeded83980b</arg>
                <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIE9QX0FVVE9NQVRJQ0FMTFlfQ0xPU0VEIC0gaWYgWWVzIGRvbid0IGFsbG93IHRyYW5zaXRpb24=</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5cblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5jZlZhbHVlc1twcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q2xvc2VkJ11dID09IG51bGwgfHwgY2ZWYWx1ZXNbcHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUNsb3NlZCddLnRvU3RyaW5nKCldPy52YWx1ZSA9PSAnTm8nIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">8534508a-17fc-4b92-b86f-7050c11b0e0c</arg>
                <arg name="FIELD_NOTES">YCFgQXZhaWxhYmxlIG9ubHkgaWYgdGhlcmUgaXMgYXQgbGVhc3Qgb25lIENPTlNVTlRJVk8gYXR0YWNoZWQgdG8gdGhlIHRpY2tldA==</arg>
                <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxubG9nLmRlYnVnIFwiT25TaXRlIFJlcG9ydCBwZXIgaXNzdWU6IFwiICsgaXNzdWUua2V5XG4vKiBSRVNUIEFQSSBwZXIgR2VuZXJhemlvbmUgQWxsZWdhdG8gUmFwcG9ydG8gZGkgSW50ZXJ2ZW50byAqL1xucmVxdWVzdE1ldGhvZCA9IFwiUFVUXCI7XG4vKlNjcmlwdCBWYXJpYWJsZXMqL1xuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0xNDA2MlwiKVxuXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5cbi8qUmltb3ppb25lIGFsbGVnYXRvIHJhcHBvcnRvIGRpIGludGVydmVudG8gYXBwZW5hIGNyZWF0byovXG4vKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG5cbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTtcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcblxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcblxuQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG5kZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG5cbi8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSBcIiBhcm91bmQgdmFsdWUgKi9cbmRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIm9iamVjdFR5cGU9QXR0YWNobWVudCBBTkQgXFxcIlwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuY2F0ZWdvcnlSZWYnXS50b1N0cmluZygpICsgXCJcXFwiLk5hbWUgTElLRSBcXFwiQ29uc3VudGl2byBDbGllbnRlXFxcIiBBTkQgXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSArIFwiIT10cnVlIEFORCBvYmplY3QgSEFWSU5HIGNvbm5lY3RlZFRpY2tldHMoa2V5ID0gXCIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArIFwiKVwiKTsgLy8gU2VlIHRoZSBjb21wbGV0ZSBsaXN0IG9mIHBvc3NpYmxlIElRTCBvbiB0aGUgSW5zaWdodCBRdWVyeSBMYW5ndWFnZSBkb2N1bWVudGF0aW9uIHBhZ2Vcbi8qIElmIHRoaXMgaXMgYSBtYW5kYXRvcnkgZmllbGQgeW91IHNob3VsZCBiZSBhYmxlIHRvIGRvIHRoaXM6ICovXG5sb2cuZGVidWcgXCJJUUw6IFwiICsgXCJvYmplY3RUeXBlPUF0dGFjaG1lbnQgQU5EIFxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5OYW1lIExJS0UgXFxcIkNvbnN1bnRpdm8gQ2xpZW50ZVxcXCIgQU5EIFwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyBcIiE9dHJ1ZSBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleSA9IFwiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIilcIlxubG9nLmRlYnVnIFwib2JqZWN0czogXCIgKyBvYmplY3RzXG5sb2cuZGVidWcgXCJyaXN1bHRhdG86IFwiICsgKG9iamVjdHMgIT0gbnVsbCAmJiBvYmplY3RzLnNpemU+MCAmJiAhaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5wbGFubmVkTWFpbnRlbmFuY2UnXSkpXG4vKiEhRGEgcmltdW92ZXJlIGFwcGVuYSByaXNvbHRpIGkgYnVnISEqL1xuLy9yZXR1cm4gKG9iamVjdHMgIT0gbnVsbCAmJiBvYmplY3RzLnNpemUhPTApICYmICFpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0LnBsYW5uZWRNYWludGVuYW5jZSddKVxucGFzc2VzQ29uZGl0aW9uID0gKG9iamVjdHMgIT0gbnVsbCAmJiBvYmplY3RzLnNpemU+MCAmJiAhaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5wbGFubmVkTWFpbnRlbmFuY2UnXSkpXG4iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.CustomScriptCondition</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">7f809f6e87447e19ed7c9921bc7d6a28aed7bf3f</arg>
              <arg name="FIELD_NOTES">YCFgT1AgRW1haWwgTm90aWZpY2F0aW9uOiBGSU5BTkNJQUxfU1RBVEVNRU5UX1RPX0NVU1RPTUVS</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGlua1xuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuQ2F0ZWdvcnkgbG9nID0gQ2F0ZWdvcnkuZ2V0SW5zdGFuY2UoXCJjb20ub25yZXNvbHZlLmppcmEuZ3Jvb3Z5LlBvc3RGdW5jdGlvblwiKVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG5kZWYgREJPPXByb3BlcnRpZXNbJ2lzY2hlbWEuZGJvLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuLyogUkVTVCBBUEkgcGVyIEludmlvIE5vdGlmaWNhIEVtYWlsIE9OU0lURV9SRVBPUlQgKi9cbnJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcblxuZGVmIHJlbGF0ZXNJbklzc3VlTGluaz1mYWxzZVxuZGVmIHJlbGF0ZXNPdXRJc3N1ZUxpbms9ZmFsc2VcbmRlZiBsaW5rZWRUaWNrZXRzPW5ldyBBcnJheUxpc3QoKVxuTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG5mb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxJbklzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcblxuICAgIGlmKGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKSAhPSBudWxsICYmIGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpICYmIGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKS5zdGF0dXMubmFtZSA9PSBcIkNvbXBsZXRlZCB0byBiZSBDbG9zZWRcIil7XG4gICAgICAgIHJlbGF0ZXNJbklzc3VlTGluaz10cnVlXG4gICAgICAgIGxpbmtlZFRpY2tldHMuYWRkKGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKS50b1N0cmluZygpKVxuICAgICAgICBsb2cuZGVidWcgXCJJc3N1ZSBjb24gcmVsYXRlc0luSXNzdWVMaW5rXCJcbiAgICB9XG59XG5MaXN0PElzc3VlTGluaz4gYWxsT3V0SXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldE91dHdhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKVxuZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsT3V0SXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHtcbiAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgaWYoaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkgIT0gbnVsbCAmJiBpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSAmJiBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKS5zdGF0dXMubmFtZSA9PSBcIkNvbXBsZXRlZCB0byBiZSBDbG9zZWRcIil7XG4gICAgICAgIHJlbGF0ZXNPdXRJc3N1ZUxpbms9dHJ1ZVxuICAgICAgICBsaW5rZWRUaWNrZXRzLmFkZChpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKS50b1N0cmluZygpKVxuICAgICAgICBsb2cuZGVidWcgXCJJc3N1ZSBjb24gcmVsYXRlc091dElzc3VlTGlua1wiXG4gICAgfVxufVxuXG5kZWYgYm9keV9yZXFcbmlmKHJlbGF0ZXNJbklzc3VlTGluayB8fCByZWxhdGVzT3V0SXNzdWVMaW5rKXtcbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJ0ZW1wbGF0ZU5hbWVcIjogcHJvcGVydGllc1sndHQuZmluYW5jaWFsU3RhdGVtZW50VG9DJ10udG9TdHJpbmcoKSxcbiAgICAgICAgXCJwZWNcIjogZmFsc2UsXG4gICAgICAgIFwiaXNzdWVLZXlcIjogaXNzdWUua2V5LFxuICAgICAgICBcImxpbmtlZFRpY2tldHNcIjogbGlua2VkVGlja2V0c1xuICAgIF1cbn1lbHNle1xuICAgIGJvZHlfcmVxID0gW1xuICAgICAgICBcInRlbXBsYXRlTmFtZVwiOiBwcm9wZXJ0aWVzWyd0dC5maW5hbmNpYWxTdGF0ZW1lbnRUb0MnXS50b1N0cmluZygpLFxuICAgICAgICBcInBlY1wiOiBmYWxzZSxcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXlcbiAgICBdXG59XG5cbmJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL3RyYW5zYWN0aW9uL21haWwvc2VuZFwiXG5VUkwgdXJsXG51cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG5IdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbmNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG5jb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG5jb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxubG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5jb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpICYmICFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjA0XCIpKXtcbiAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICBsb2cuZGVidWcgXCJSZXNwb25zZTogXCIgKyBjb25uZWN0aW9uXG4gICAgXG4gICAgLypST0xMQkFDSyovXG4gICAgLypSaW1vemlvbmUgYWxsZWdhdG8gY29uc3VudGl2byBhcHBlbmEgY3JlYXRvKi9cbiAgICAvKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG4gICAgQ2xhc3MgaXFsRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuSVFMRmFjYWRlXCIpOyBcbiAgICBkZWYgaXFsRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKGlxbEZhY2FkZUNsYXNzKTtcblxuICAgIC8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbiAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7XG4gICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XG5cbiAgICAvKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbiAgICBDbGFzcyBvYmplY3RUeXBlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUZhY2FkZVwiKTtcbiAgICBkZWYgb2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpO1xuXG4gICAgLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbiAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTtcbiAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xuXG4gICAgQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG4gICAgZGVmIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MpO1xuXG4gICAgLyogU3BlY2lmeSB0aGUgc2NoZW1hIGlkIGFzIHdlbGwgYXMgdGhlIElRTCB0aGF0IHdpbGwgZmV0Y2ggb2JqZWN0cy4gSW4gdGhpcyBjYXNlIGFsbCBvYmplY3RzIHdpdGggTmFtZSBtYXRjaGluZyB0aGUgdmFsdWVDRiwgYmUgc3VyZSB0byBpbmNsdWRlIFwiIGFyb3VuZCB2YWx1ZSAqL1xuICAgIGRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5cXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5uYW1lJ10udG9TdHJpbmcoKSArIFwiXFxcIiA9IFxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm9ianMuY29uc3VudGl2byddLnRvU3RyaW5nKCkgKyBcIlxcXCIgQU5EIFwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyBcIiE9dHJ1ZSBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleSA9IFwiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIilcIik7IC8vIFNlZSB0aGUgY29tcGxldGUgbGlzdCBvZiBwb3NzaWJsZSBJUUwgb24gdGhlIEluc2lnaHQgUXVlcnkgTGFuZ3VhZ2UgZG9jdW1lbnRhdGlvbiBwYWdlXG4gICAgLyogSWYgdGhpcyBpcyBhIG1hbmRhdG9yeSBmaWVsZCB5b3Ugc2hvdWxkIGJlIGFibGUgdG8gZG8gdGhpczogKi9cbiAgICBsb2cuaW5mbyhcIkluc2lnaHQgb2JqZWN0OiBcIiArIG9iamVjdHNbMF0pO1xuICAgIFxuICAgIGlmKG9iamVjdHNbMF0pe1xuICAgICAgICAvKiBVUERBVEUgT0pCRUNUIERFTEVURUQgVkFMVUUgKi9cbiAgICAgICAgZGVmIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG9iamVjdHNbMF0uZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuZGVsZXRlZCddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKSAgXG4gICAgICAgIGRlZiB2YWx1ZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuXG4gICAgICAgIGRlZiB2YWx1ZUJlYW4gPSBvYlRyaWFnZS5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKVxuICAgICAgICB2YWx1ZUJlYW4uc2V0VmFsdWUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2UuZ2V0T2JqZWN0VHlwZUF0dHJpYnV0ZUlkKCkpLCB0cnVlKVxuICAgICAgICAvKkNsZWFuIGFjdHVhbCB2YWx1ZSovXG4gICAgICAgIHZhbHVlLmNsZWFyKClcbiAgICAgICAgdmFsdWUuYWRkKHZhbHVlQmVhbik7XG4gICAgICAgIG9iVHJpYWdlLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWUpXG5cbiAgICAgICAgLy9VcGRhdGUgT0pCRUNUIGF0dHJpYnV0ZSB2YWx1ZVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlKTtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSkge1xuICAgICAgICAgICAgbG9nLndhcm4oXCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOlwiICsgdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxuICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcbiAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcblxuICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICBlTGlzdEVycm9ycy5hZGQoXCJTRU5ETUFJTFwiKVxuICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKSlcbiAgICBlTGlzdEVycm9ycy5hZGQoanNvbl9vYmplY3QubWVzc2FnZSlcbiAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG4gICAgXG4gICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJFXCIsIG91dHB1dC50b1N0cmluZygpKVxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CkNhdGVnb3J5IGxvZyA9IENhdGVnb3J5LmdldEluc3RhbmNlKCJjb20ub25yZXNvbHZlLmppcmEuZ3Jvb3Z5LlBvc3RGdW5jdGlvbiIpCmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKQoKSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpOwpDdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7CmRlZiByZXF1ZXN0TWV0aG9kCmRlZiBiYXNlVVJMCgpkZWYgREJPPXByb3BlcnRpZXNbJ2lzY2hlbWEuZGJvLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKQovKiBSRVNUIEFQSSBwZXIgSW52aW8gTm90aWZpY2EgRW1haWwgT05TSVRFX1JFUE9SVCAqLwpyZXF1ZXN0TWV0aG9kID0gIlBPU1QiOwoKZGVmIHJlbGF0ZXNJbklzc3VlTGluaz1mYWxzZQpkZWYgcmVsYXRlc091dElzc3VlTGluaz1mYWxzZQpkZWYgbGlua2VkVGlja2V0cz1uZXcgQXJyYXlMaXN0KCkKTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpCmZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbEluSXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHsKICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7CgogICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpewogICAgICAgIHJlbGF0ZXNJbklzc3VlTGluaz10cnVlCiAgICAgICAgbGlua2VkVGlja2V0cy5hZGQoaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpLnRvU3RyaW5nKCkpCiAgICAgICAgbG9nLmRlYnVnICJJc3N1ZSBjb24gcmVsYXRlc0luSXNzdWVMaW5rIgogICAgfQp9Ckxpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpCmZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbE91dElzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7CiAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpOwoKICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXsKICAgICAgICByZWxhdGVzT3V0SXNzdWVMaW5rPXRydWUKICAgICAgICBsaW5rZWRUaWNrZXRzLmFkZChpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKS50b1N0cmluZygpKQogICAgICAgIGxvZy5kZWJ1ZyAiSXNzdWUgY29uIHJlbGF0ZXNPdXRJc3N1ZUxpbmsiCiAgICB9Cn0KCmRlZiBib2R5X3JlcQppZihyZWxhdGVzSW5Jc3N1ZUxpbmsgfHwgcmVsYXRlc091dElzc3VlTGluayl7CiAgICBib2R5X3JlcSA9IFsKICAgICAgICAidGVtcGxhdGVOYW1lIjogcHJvcGVydGllc1sndHQuZmluYW5jaWFsU3RhdGVtZW50VG9DJ10udG9TdHJpbmcoKSwKICAgICAgICAicGVjIjogZmFsc2UsCiAgICAgICAgImlzc3VlS2V5IjogaXNzdWUua2V5LAogICAgICAgICJsaW5rZWRUaWNrZXRzIjogbGlua2VkVGlja2V0cwogICAgXQp9ZWxzZXsKICAgIGJvZHlfcmVxID0gWwogICAgICAgICJ0ZW1wbGF0ZU5hbWUiOiBwcm9wZXJ0aWVzWyd0dC5maW5hbmNpYWxTdGF0ZW1lbnRUb0MnXS50b1N0cmluZygpLAogICAgICAgICJwZWMiOiBmYWxzZSwKICAgICAgICAiaXNzdWVLZXkiOiBpc3N1ZS5rZXkKICAgIF0KfQoKYmFzZVVSTCA9ICJodHRwOi8vIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgIi9vcC9yZXN0L2ppcmEvQUEvdHJhbnNhY3Rpb24vbWFpbC9zZW5kIgpVUkwgdXJsCnVybCA9IG5ldyBVUkwoYmFzZVVSTCkKSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpOwpjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eSgiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOCIpOwpjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eSgiQWNjZXB0IiwgIiovKiIpOwpjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpOwpjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7CmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtCmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoIlVURi04IikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9CmxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbQpjb25uZWN0aW9uLmNvbm5lY3QoKTsKCmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCmRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKQpkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpCgppZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoIjIwMCIpKXsKICAgIGxvZy5kZWJ1ZyAidXJsOiAiICsgdXJsCiAgICBsb2cuZGVidWcgIlJlc3BvbnNlQ29kZToiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKQogICAgbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKICAgIGxvZy5kZWJ1ZyAiUmVzcG9uc2U6ICIgKyBjb25uZWN0aW9uCiAgICAKICAgIC8qUk9MTEJBQ0sqLwogICAgLypSaW1vemlvbmUgYWxsZWdhdG8gY29uc3VudGl2byBhcHBlbmEgY3JlYXRvKi8KICAgIC8qIEdldCBJbnNpZ2h0IElRTCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi8KICAgIENsYXNzIGlxbEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuSVFMRmFjYWRlIik7IAogICAgZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7CgogICAgLyogR2V0IEluc2lnaHQgT2JqZWN0IEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqLwogICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGUiKTsKICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpOwoKICAgIC8qIEdldCBJbnNpZ2h0IE9iamVjdCBUeXBlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqLwogICAgQ2xhc3Mgb2JqZWN0VHlwZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUZhY2FkZSIpOwogICAgZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTsKCiAgICAvKiBHZXQgSW5zaWdodCBPYmplY3QgQXR0cmlidXRlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqLwogICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSIpOwogICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTsKCiAgICBDbGFzcyBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5zZXJ2aWNlcy5tb2RlbC5mYWN0b3J5Lk9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Iik7CiAgICBkZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7CgogICAgLyogU3BlY2lmeSB0aGUgc2NoZW1hIGlkIGFzIHdlbGwgYXMgdGhlIElRTCB0aGF0IHdpbGwgZmV0Y2ggb2JqZWN0cy4gSW4gdGhpcyBjYXNlIGFsbCBvYmplY3RzIHdpdGggTmFtZSBtYXRjaGluZyB0aGUgdmFsdWVDRiwgYmUgc3VyZSB0byBpbmNsdWRlICIgYXJvdW5kIHZhbHVlICovCiAgICBkZWYgb2JqZWN0cyA9IGlxbEZhY2FkZS5maW5kT2JqZWN0c0J5SVFMQW5kU2NoZW1hKERCTywgIlwiIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArICJcIi5cIiIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5uYW1lJ10udG9TdHJpbmcoKSArICJcIiA9IFwiIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm9ianMuY29uc3VudGl2byddLnRvU3RyaW5nKCkgKyAiXCIgQU5EICIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSArICIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSAiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyAiKSIpOyAvLyBTZWUgdGhlIGNvbXBsZXRlIGxpc3Qgb2YgcG9zc2libGUgSVFMIG9uIHRoZSBJbnNpZ2h0IFF1ZXJ5IExhbmd1YWdlIGRvY3VtZW50YXRpb24gcGFnZQogICAgLyogSWYgdGhpcyBpcyBhIG1hbmRhdG9yeSBmaWVsZCB5b3Ugc2hvdWxkIGJlIGFibGUgdG8gZG8gdGhpczogKi8KICAgIGxvZy5pbmZvKCJJbnNpZ2h0IG9iamVjdDogIiArIG9iamVjdHNbMF0pOwogICAgCiAgICBpZihvYmplY3RzWzBdKXsKICAgICAgICAvKiBVUERBVEUgT0pCRUNUIERFTEVURUQgVkFMVUUgKi8KICAgICAgICBkZWYgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ob2JqZWN0c1swXS5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpICAKICAgICAgICBkZWYgdmFsdWUgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkKCiAgICAgICAgZGVmIHZhbHVlQmVhbiA9IG9iVHJpYWdlLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpCiAgICAgICAgdmFsdWVCZWFuLnNldFZhbHVlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlLmdldE9iamVjdFR5cGVBdHRyaWJ1dGVJZCgpKSwgdHJ1ZSkKICAgICAgICAvKkNsZWFuIGFjdHVhbCB2YWx1ZSovCiAgICAgICAgdmFsdWUuY2xlYXIoKQogICAgICAgIHZhbHVlLmFkZCh2YWx1ZUJlYW4pOwogICAgICAgIG9iVHJpYWdlLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWUpCgogICAgICAgIC8vVXBkYXRlIE9KQkVDVCBhdHRyaWJ1dGUgdmFsdWUKICAgICAgICB0cnkgewogICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5zdG9yZU9iamVjdEF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2UpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHsKICAgICAgICAgICAgbG9nLndhcm4oIkNvdWxkIG5vdCB1cGRhdGUgb2JqZWN0IGF0dHJpYnV0ZSBkdWUgdG8gdmFsaWRhdGlvbiBleGNlcHRpb246IiArIHZpZS5nZXRNZXNzYWdlKCkpOwogICAgICAgIH0KICAgIH0KICAgIAogICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dAogICAgbG9nLmRlYnVnICIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6ICIgKyBvdXRwdXRNc2cKCiAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKQogICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZykKICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgCiAgICBsb2cuZGVidWcgIm1lc3NhZ2U6ICIgKyAganNvbl9vYmplY3QubWVzc2FnZQoKICAgIGVMaXN0RXJyb3JzLmFkZCgiRSIpCiAgICBlTGlzdEVycm9ycy5hZGQoIlNFTkRNQUlMIikKICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArICIgIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkpCiAgICBlTGlzdEVycm9ycy5hZGQoanNvbl9vYmplY3QubWVzc2FnZSkKICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycykKICAgIAogICAgb3V0cHV0LmFkZChlTGlzdCkKICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3siRSI6IicgKyBvdXRwdXQudG9TdHJpbmcoKSArICcifScpCiAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oIkUiLCBvdXRwdXQudG9TdHJpbmcoKSkKfQ==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="6">
              <post-functions>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="append.value"></arg>
                  <arg name="maxAllowed-integerValue">50</arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.value">%%CURRENT_DATETIME%%</arg>
                  <arg name="field.name">customfield_22644</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">8f43e1be-b7a3-4a6d-9cce-637d025ad9b4</arg>
                  <arg name="FIELD_NOTES">YCFgVXBkYXRlIEZJTkFOQ0lBTF9TVEFURU1FTlRfU0VOVF9EQVRFIG9uIGxpbmtlZCBpc3N1ZXM=</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGlua1xuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZVxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5Jc3N1ZUluZGV4aW5nU2VydmljZSBcdGlzc3VlSW5kZXhpbmdTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KElzc3VlSW5kZXhpbmdTZXJ2aWNlKVxuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcbmRlZiBzZW5kTWFpbFRvID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zZW5kTWFpbFRvTGlua2VkJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBvbnNpdGVSZXBvcnREYXRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLndmT25zaXRlUmVwb3J0J10udG9TdHJpbmcoKSlbMF1cbmRlZiBzZW5kTWFpbFRvUmVjID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zZW5kTWFpbFRvUmVjaXBpZW50cyddLnRvU3RyaW5nKCkpWzBdXG5kZWYgc2VkTWFpbERhdGUgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfV0ZfRklOQU5DSUFMX1NUQVRFTUVOVF9UT19DVVNUT01FUlwiKVswXVxuZGVmIHJlbGF0ZXNJbklzc3VlTGluaz1mYWxzZVxuZGVmIHJlbGF0ZXNPdXRJc3N1ZUxpbms9ZmFsc2VcbmRlZiBsaW5rZWRUaWNrZXRzPW5ldyBBcnJheUxpc3QoKVxubG9nLmRlYnVnIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUbykudG9TdHJpbmcoKVxuZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXG5kZWYgbWlcblxuTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG5mb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxJbklzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcblxuICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpICYmIGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKS5zdGF0dXMubmFtZSA9PSBcIkNvbXBsZXRlZCB0byBiZSBDbG9zZWRcIil7XG4gICAgICAgIG1pID0gKE11dGFibGVJc3N1ZSkgaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpXG4gICAgICAgIHNlZE1haWxEYXRlLnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKSwgbmV3IE1vZGlmaWVkVmFsdWUoaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VkTWFpbERhdGUpLCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlZE1haWxEYXRlKSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcbiAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xuICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKSlcbiAgICAgICAgXG4gICAgICAgIC8qIFJFU1QgQVBJIHBlciBwdWxpemlhIGNhY2hlIGlzc3VlIGxpbmthdGEgKi9cbiAgICAgICAgcmVxdWVzdE1ldGhvZCA9IFwiR0VUXCI7XG4gICAgICAgIC8qU2NyaXB0IFZhcmlhYmxlcyovXG4gICAgICAgIC8vUGVyIHRlc3QgZGEgY29uc29sZVxuICAgICAgICAvL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTMyNTM1XCIpXG4gICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL2NsZWFyQ2FjaGUvdGlja2V0a2V5L1wiICsgaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpLmtleVxuICAgICAgICBVUkwgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgICAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbn1cbkxpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG5mb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG5cbiAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSAmJiBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKS5zdGF0dXMubmFtZSA9PSBcIkNvbXBsZXRlZCB0byBiZSBDbG9zZWRcIil7XG4gICAgICAgIG1pID0gKE11dGFibGVJc3N1ZSkgaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KClcbiAgICAgICAgc2VkTWFpbERhdGUudXBkYXRlVmFsdWUobnVsbCwgaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCksIG5ldyBNb2RpZmllZFZhbHVlKGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VkTWFpbERhdGUpLCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlZE1haWxEYXRlKSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcbiAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xuICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpKVxuICAgICAgICBcbiAgICAgICAgLyogUkVTVCBBUEkgcGVyIHB1bGl6aWEgY2FjaGUgaXNzdWUgbGlua2F0YSAqL1xuICAgICAgICByZXF1ZXN0TWV0aG9kID0gXCJHRVRcIjtcbiAgICAgICAgLypTY3JpcHQgVmFyaWFibGVzKi9cbiAgICAgICAgLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4gICAgICAgIC8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMzI1MzVcIilcbiAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vY2xlYXJDYWNoZS90aWNrZXRrZXkvXCIgKyBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKS5rZXlcbiAgICAgICAgVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICAgICAgSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgfVxuICAgIH1cbn0iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="201" name="Riapri Rapporto di Intervento">
          <meta name="opsbar-sequence">10</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <restrict-to>
            <conditions type="AND">
              <conditions type="OR">
                <condition type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.condition.ValueFieldCondition</arg>
                  <arg name="fieldValue"></arg>
                  <arg name="fieldsList">customfield_23409</arg>
                </condition>
                <condition type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.condition.ValueFieldCondition</arg>
                  <arg name="fieldValue">No</arg>
                  <arg name="fieldsList">customfield_23409</arg>
                </condition>
              </conditions>
              <condition type="class">
                <arg name="FIELD_NOTES">YCFgT1BBQV9TQUxFU19PUkRFUl9EQVRFIGFuZCBPUEFBX1BVUkNIQVNFX09SREVSX0RBVEUgc2hvdWxkIGJlIG51bGwgaW4gb3JkZXIgdG8gcmVvcGVuIHRoZSB0aWNrZXQgLSBvdGhlcndpc2UgdGhlIHRpY2tldCBoYXMgYWxyZWFkeSBiZWVuIGFjY291bnRlZCBzbyBpdCBjYW5ub3QgYmUgcmVvcGVuZWQ=</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgY2ZWYWx1ZXNbJ09QX1NBTEVTX09SREVSX0RBVEUnXSA9PSBudWxsICYmIGNmVmFsdWVzWydPUF9QVVJDSEFTRV9PUkRFUl9EQVRFJ10gPT0gbnVsbHx8fA==</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
              </condition>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">e855fbdb-cb53-4bf8-922b-167760b6e692</arg>
                <arg name="FIELD_NOTES">YCFgTWFpbnRlbmFuY2UgVGlja2V0</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnTWFpbnRlbmFuY2UgVGlja2V0JyB8fCBpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXQnIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="5">
              <post-functions>
                <function type="class">
                  <arg name="field">customfield_22693</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.15.1</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                </function>
                <function type="class">
                  <arg name="field">customfield_22660</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.15.1</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                </function>
                <function type="class">
                  <arg name="field">customfield_22644</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.15.1</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                </function>
                <function type="class">
                  <arg name="field">customfield_22641</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.15.1</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue">50</arg>
                  <arg name="runAsUser-user"></arg>
                  <arg name="field">customfield_22666</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="field3">customfield_23402</arg>
                  <arg name="field2">customfield_23401</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">93ee91428be862f784d2facaa9da5be13f63a66b</arg>
                  <arg name="FIELD_NOTES">YCFgT1A6IFJlbW92ZSBPblNpdGUgUmVwb3J0IEF0dGFjaG1lbnRz</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbkNhdGVnb3J5IGxvZyA9IENhdGVnb3J5LmdldEluc3RhbmNlKFwiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb25cIilcbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5cbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5kZWYgYXV0b21hdGljYWxseUNsb3NlZCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUNsb3NlZCddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG4vKlNjcmlwdCBWYXJpYWJsZXMqL1xuLy9QZXIgUG9zdCBGdW5jdGlvblxuSXNzdWUgaXNzdWUgPSBpc3N1ZVxuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0xNDA2MlwiKVxuXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5cbi8qUmltb3ppb25lIGFsbGVnYXRvIHJhcHBvcnRvIGRpIGludGVydmVudG8gYXBwZW5hIGNyZWF0byovXG4vKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG5cbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTtcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcblxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcblxuQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG5kZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG5cbi8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSBcIiBhcm91bmQgdmFsdWUgKi9cbmRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIm9iamVjdFR5cGU9QXR0YWNobWVudCBBTkQgXFxcIlwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuY2F0ZWdvcnlSZWYnXS50b1N0cmluZygpICsgXCJcXFwiLlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm5hbWUnXS50b1N0cmluZygpICsgXCJcXFwiIElOIChcXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5vYmpzLnJhcHBJbnRGQUFDJ10udG9TdHJpbmcoKSArIFwiXFxcIixcXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5vYmpzLmNvbnN1bnRpdm8nXS50b1N0cmluZygpICsgXCJcXFwiKSBBTkQgQVVUT19HRU5FUkFURUQgPSB0cnVlIEFORCBcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpICsgXCIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSBcIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIpXCIpOyAvLyBTZWUgdGhlIGNvbXBsZXRlIGxpc3Qgb2YgcG9zc2libGUgSVFMIG9uIHRoZSBJbnNpZ2h0IFF1ZXJ5IExhbmd1YWdlIGRvY3VtZW50YXRpb24gcGFnZVxuLyogSWYgdGhpcyBpcyBhIG1hbmRhdG9yeSBmaWVsZCB5b3Ugc2hvdWxkIGJlIGFibGUgdG8gZG8gdGhpczogKi9cbmxvZy5kZWJ1ZyBcIklRTDogXCIgKyBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5cXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5uYW1lJ10udG9TdHJpbmcoKSArIFwiXFxcIiBJTiAoXFxcIlwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkub2Jqcy5yYXBwSW50RkFBQyddLnRvU3RyaW5nKCkgKyBcIlxcXCIsXFxcIlwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkub2Jqcy5jb25zdW50aXZvJ10udG9TdHJpbmcoKSArIFwiXFxcIikgQU5EIFwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyBcIiE9dHJ1ZSBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleSA9IFwiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIilcIlxuXG5mb3IoaW9iaiBpbiBvYmplY3RzKXtcbiAgICAvKiBVUERBVEUgT0pCRUNUIERFTEVURUQgVkFMVUUgKi9cbiAgICBkZWYgb2JqID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGlvYmouZ2V0SWQoKSk7XG4gICAgICAgIFxuICAgIGludCBhdHRhY2htZW50RGVsZXRlZCA9IHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudC5kZWxldGVkLmlkJ10gPyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnQuZGVsZXRlZC5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKCkgOiAzMjY1XG4gICAgXG4gICAgYXR0cmliVHlwZSA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKGF0dGFjaG1lbnREZWxldGVkKTsgXG5cbiAgICBuZXdBdHRyaWIgPSBvYmouY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihhdHRyaWJUeXBlKTtcbiAgICBkZWYgbmV3QXR0cmliVmFsdWUgPSBuZXdBdHRyaWIuY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7XG5cbiAgICB0cnkge1xuICAgIFx0bmV3QXR0cmliVmFsdWUuc2V0VmFsdWUoYXR0cmliVHlwZSwgdHJ1ZSk7XG4gICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSkge1xuICAgICBcdGxvZy53YXJuKFwiU0VUSU5TSUdIVFZBTFVFOiBVbmFibGUgdG8gc2V0IGF0dHJpYnV0ZSBcIiArIGF0dHJpYlR5cGUgKyBcIiB0byBcIiArIHRvdGFsQW1vdW50U3VwcCArIFwiLiBFeGl0aW5nLlwiKTtcbiAgICAgXHRsb2cud2FybihTRVRJTlNJR0hUVkFMVUU6IHZpZS5nZXRNZXNzYWdlKCkpO1xuICAgICBcdHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgZGVmIGF0dHJpYlZhbHVlcyA9IG5ld0F0dHJpYi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7XG4gICAgYXR0cmliVmFsdWVzLmFkZChuZXdBdHRyaWJWYWx1ZSk7XG4gICAgbmV3QXR0cmliLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoYXR0cmliVmFsdWVzKTtcbiAgICAgXG4gICAgdHJ5IHtcbiAgICBcdG5ld0F0dHJpYiA9IG9iamVjdEZhY2FkZS5zdG9yZU9iamVjdEF0dHJpYnV0ZUJlYW4obmV3QXR0cmliKTtcbiAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XG4gICAgXHRsb2cud2FybihcIlNFVElOU0lHSFRWQUxVRTogVW5hYmxlIHRvIHNhdmUgY2hhbmdlcy4gRXhpdGluZy5cIik7XG4gICAgIFx0bG9nLndhcm4oU0VUSU5TSUdIVFZBTFVFOiB2aWUuZ2V0TWVzc2FnZSgpKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGxvZy5pbmZvKFwiU0VUSU5TSUdIVFZBTFVFOiBTdWNjZXNzZnVsbHkgc2F2ZWQgdmFsdWVcIik7XG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlCmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2UKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXIKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsCgpQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpCkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpCnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7Cglwcm9wZXJ0aWVzLmxvYWQoaXQpCn0KQ2F0ZWdvcnkgbG9nID0gQ2F0ZWdvcnkuZ2V0SW5zdGFuY2UoImNvbS5vbnJlc29sdmUuamlyYS5ncm9vdnkuUG9zdEZ1bmN0aW9uIikKbG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpCgpJc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7CkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTsKCklzc3VlSW5kZXhpbmdTZXJ2aWNlIAlpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSkKZGVmIGF1dG9tYXRpY2FsbHlDbG9zZWQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlDbG9zZWQnXS50b1N0cmluZygpKVswXQoKZGVmIHJlcXVlc3RNZXRob2QKZGVmIGJhc2VVUkwKCi8qU2NyaXB0IFZhcmlhYmxlcyovCi8vUGVyIFBvc3QgRnVuY3Rpb24KSXNzdWUgaXNzdWUgPSBpc3N1ZQovL1BlciB0ZXN0IGRhIGNvbnNvbGUKLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZSgiT1BVVC0xNDA2MiIpCgppbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpCmludCBEQk8gPSBwcm9wZXJ0aWVzWydpc2NoZW1hLmRiby5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKCkKCi8qUmltb3ppb25lIGFsbGVnYXRvIHJhcHBvcnRvIGRpIGludGVydmVudG8gYXBwZW5hIGNyZWF0byovCi8qIEdldCBJbnNpZ2h0IElRTCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi8KQ2xhc3MgaXFsRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGUiKTsgCmRlZiBpcWxGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUoaXFsRmFjYWRlQ2xhc3MpOwoKLyogR2V0IEluc2lnaHQgT2JqZWN0IEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqLwpDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZSIpOwpkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTsKCi8qIEdldCBJbnNpZ2h0IE9iamVjdCBUeXBlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqLwpDbGFzcyBvYmplY3RUeXBlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlIik7CmRlZiBvYmplY3RUeXBlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVGYWNhZGVDbGFzcyk7CgovKiBHZXQgSW5zaWdodCBPYmplY3QgQXR0cmlidXRlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqLwpDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CmRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7CgpDbGFzcyBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5zZXJ2aWNlcy5tb2RlbC5mYWN0b3J5Lk9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Iik7CmRlZiBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzKTsKCi8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSAiIGFyb3VuZCB2YWx1ZSAqLwpkZWYgb2JqZWN0cyA9IGlxbEZhY2FkZS5maW5kT2JqZWN0c0J5SVFMQW5kU2NoZW1hKERCTywgIlwiIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArICJcIi5cIiIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5uYW1lJ10udG9TdHJpbmcoKSArICJcIiBJTiAoXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkub2Jqcy5yYXBwSW50RkFBQyddLnRvU3RyaW5nKCkgKyAiXCIsXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkub2Jqcy5jb25zdW50aXZvJ10udG9TdHJpbmcoKSArICJcIikgQU5EICIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSArICIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSAiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyAiKSIpOyAvLyBTZWUgdGhlIGNvbXBsZXRlIGxpc3Qgb2YgcG9zc2libGUgSVFMIG9uIHRoZSBJbnNpZ2h0IFF1ZXJ5IExhbmd1YWdlIGRvY3VtZW50YXRpb24gcGFnZQovKiBJZiB0aGlzIGlzIGEgbWFuZGF0b3J5IGZpZWxkIHlvdSBzaG91bGQgYmUgYWJsZSB0byBkbyB0aGlzOiAqLwpsb2cuZGVidWcgIklRTDogIiArICJcIiIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5jYXRlZ29yeVJlZiddLnRvU3RyaW5nKCkgKyAiXCIuXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkubmFtZSddLnRvU3RyaW5nKCkgKyAiXCIgSU4gKFwiIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm9ianMucmFwcEludEZBQUMnXS50b1N0cmluZygpICsgIlwiLFwiIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm9ianMuY29uc3VudGl2byddLnRvU3RyaW5nKCkgKyAiXCIpIEFORCAiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyAiIT10cnVlIEFORCBvYmplY3QgSEFWSU5HIGNvbm5lY3RlZFRpY2tldHMoa2V5ID0gIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgIikiCgpmb3IoaW9iaiBpbiBvYmplY3RzKXsKICAgIC8qIFVQREFURSBPSkJFQ1QgREVMRVRFRCBWQUxVRSAqLwogICAgZGVmIG9iaiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihpb2JqLmdldElkKCkpOwogICAgICAgIAogICAgaW50IGF0dGFjaG1lbnREZWxldGVkID0gcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50LmRlbGV0ZWQuaWQnXSA/IHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudC5kZWxldGVkLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKSA6IDMyNjUKICAgIAogICAgYXR0cmliVHlwZSA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKGF0dGFjaG1lbnREZWxldGVkKTsgCgogICAgbmV3QXR0cmliID0gb2JqLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW4oYXR0cmliVHlwZSk7CiAgICBkZWYgbmV3QXR0cmliVmFsdWUgPSBuZXdBdHRyaWIuY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7CgogICAgdHJ5IHsKICAgIAluZXdBdHRyaWJWYWx1ZS5zZXRWYWx1ZShhdHRyaWJUeXBlLCB0cnVlKTsKICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHsKICAgICAJbG9nLndhcm4oIlNFVElOU0lHSFRWQUxVRTogVW5hYmxlIHRvIHNldCBhdHRyaWJ1dGUgIiArIGF0dHJpYlR5cGUgKyAiIHRvICIgKyB0b3RhbEFtb3VudFN1cHAgKyAiLiBFeGl0aW5nLiIpOwogICAgIAlsb2cud2FybihTRVRJTlNJR0hUVkFMVUU6IHZpZS5nZXRNZXNzYWdlKCkpOwogICAgIAlyZXR1cm4gZmFsc2U7CiAgICB9CiAgICAKICAgIGRlZiBhdHRyaWJWYWx1ZXMgPSBuZXdBdHRyaWIuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpOwogICAgYXR0cmliVmFsdWVzLmFkZChuZXdBdHRyaWJWYWx1ZSk7CiAgICBuZXdBdHRyaWIuc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyhhdHRyaWJWYWx1ZXMpOwogICAgIAogICAgdHJ5IHsKICAgIAluZXdBdHRyaWIgPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG5ld0F0dHJpYik7CiAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7CiAgICAJbG9nLndhcm4oIlNFVElOU0lHSFRWQUxVRTogVW5hYmxlIHRvIHNhdmUgY2hhbmdlcy4gRXhpdGluZy4iKTsKICAgICAJbG9nLndhcm4oU0VUSU5TSUdIVFZBTFVFOiB2aWUuZ2V0TWVzc2FnZSgpKTsKICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGxvZy5pbmZvKCJTRVRJTlNJR0hUVkFMVUU6IFN1Y2Nlc3NmdWxseSBzYXZlZCB2YWx1ZSIpOwp9</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE"></arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">9750ea32-a13d-4474-8c20-074bb1967d78</arg>
                  <arg name="FIELD_NOTES">YCFgQ2xlYXIgY2FjaGU=</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG4vKiBSRVNUIEFQSSBwZXIgR2VuZXJhemlvbmUgQWxsZWdhdG8gUmFwcG9ydG8gZGkgSW50ZXJ2ZW50byAqL1xucmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuLypTY3JpcHQgVmFyaWFibGVzKi9cbi8vUGVyIHRlc3QgZGEgY29uc29sZVxuLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIk9QVVQtMTQwNjJcIilcbmJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL2NsZWFyQ2FjaGUvZGF0YU9iamVjdFwiXG5kZWYgYm9keV9yZXEgPSBbXVxuVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbmNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5sb2cuZGVidWcgXCJib2R5X3JlcTogXCIgKyBib2R5X3JlcVxuY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxubG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5jb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbn0iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="disabled">false</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="211" name="Invia notifica ODA al Fornitore">
          <meta name="opsbar-sequence">60</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <restrict-to>
            <conditions type="AND">
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">30831edd-db6a-4254-884e-1bc1056de0ca</arg>
                <arg name="FIELD_NOTES">YCFgSWYgT1BfUFVSQ0hBU0VfT1JERVIgaXMgbm90IE5VTEwgLSB5b3UgY2FuIGFzayB0byBzZW5kIGFnYWluIFBPIG5vdGlmaWNhdGlvbg==</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5cblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5jZlZhbHVlc1twcm9wZXJ0aWVzWydjZi5wdXJjaGFzZU9yZGVyJ11dICE9IG51bGwiLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
              </condition>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">412f2a16-10d6-4b8f-83c9-4f9d4ed9b555</arg>
                <arg name="FIELD_NOTES">YCFgTWFpbnRlbmFuY2UgVGlja2V0IE9SIFBNIFRpY2tldA==</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnTWFpbnRlbmFuY2UgVGlja2V0JyB8fCBpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXQnIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">4e1d2427405a47dffb8300132632cf585f8677e4</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIFJlcXVpcmVkIEZpZWxkcyAtIHNvbG8gZXJyb3JzLCBubyB3YXJuaW5ncw==</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5cblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5kZWYgQ2F0ZWdvcnkgbG9nID0gQ2F0ZWdvcnkuZ2V0SW5zdGFuY2UoXCJjb20ub25yZXNvbHZlLmppcmEuZ3Jvb3Z5LlBvc3RGdW5jdGlvblwiKVxuIFxuSXNzdWUgaXNzdWUgPSBpc3N1ZVxuXG5kZWYgZXJyb3JzID0gZmFsc2VcbmRlZiB3YXJuaW5ncyA9IGZhbHNlXG5cbmRlZiBsdW1wU3VtUHJpY2UgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmx1bXBTdW1QcmljZSddLnRvU3RyaW5nKCkpWzBdXG5cbi8qQ2FtcGkgY29uIGRhdGkgb2JibGlnYXRvcmkgcGVyIHRpY2tldCBub24gYSBjb3JwbyovXG5kZWYgcmVwTWF0ZXJpYWxzID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5yZXBsYWNlZE1hdGVyaWFscyddLnRvU3RyaW5nKCkpWzBdXG5kZWYgdW5hVGFudHVtUmF0ZXMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnVuYXRhbnR1bVJhdGVzJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBsYWJvdXJSYXRlcyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YubGFib3VyUmF0ZXMnXS50b1N0cmluZygpKVswXVxuZGVmIHRyYXZlbFJhdGVzID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi50cmF2ZWxSYXRlcyddLnRvU3RyaW5nKCkpWzBdXG5cbi8qQ2FtcGkgY29uIGRhdGkgb2JibGlnYXRvcmkgcGVyIHRpY2tldCBhIGNvcnBvKi9cbmRlZiBsdW1wU3VtUmF0ZXMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmx1bXBTdW1SYXRlcyddLnRvU3RyaW5nKCkpWzBdXG5cbi8qQ29uZmVybWEgdXRlbnRlIHN1IHdhcm5pbmdzKi9cbmRlZiB0cmFuc2l0aW9uQ2hlY2sgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmNoZWNrQW5kQ29uZmlybSddLnRvU3RyaW5nKCkpWzBdXG5cbi8qSW5zaWdodCBTY2hlbWEgSURzKi9cbmRlZiBEQk9iamVjdHMgPSBwcm9wZXJ0aWVzWydpc2NoZW1hLmRibyddLnRvU3RyaW5nKCkgKyBcIi1cIlxuZGVmIE9QQUEgPSBwcm9wZXJ0aWVzWydpc2NoZW1hLmFhJ10udG9TdHJpbmcoKSArIFwiLVwiXG5cbmRlZiBlcnJvck1hbmRhdG9yeUZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVycm9ySm9iU3RhcnRlZENvbXBsZXRlZEZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIHdhcm5pbmdFbXB0eUZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIHdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXIgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiB3YXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lciA9IG5ldyBBcnJheUxpc3QoKVxuXG4vL3RyeXtcbiAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1QcmljZSkhPW51bGwgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUHJpY2UpLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpKXtcbiAgICAgICAgLypDb250YWJpbGl6emF6aW9uZSBhIGNvcnBvKi9cbiAgICAgICAgbG9nLmRlYnVnIFwiQ29udGFiaWxpenphemlvbmUgYSBjb3Jwb1wiXG4gICAgICAgIC8vT1BBQV9MVU1QX1NVTV9SQVRFU1xuICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1SYXRlcykhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1SYXRlcykgIT0gXCJcIiAmJiAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUmF0ZXMpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKXtcbiAgICAgICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qL1xuICAgICAgICAgICAgLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzXG4gICAgICAgICAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7ICBcbiAgICAgICAgICAgIENsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbiAgICAgICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4gICAgICAgICAgICBkZWYgbHNSYXRlc0xpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1SYXRlcylcblxuICAgICAgICAgICAgZm9yKGxzIGluIGxzUmF0ZXNMaXN0KXtcbiAgICAgICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3RcbiAgICAgICAgICAgICAgICBkZWYgbHNSYXRlPWxzLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBkZWYgbHNSYXRlS2V5ID0gbHNSYXRlLnN1YnN0cmluZyhsc1JhdGUuaW5kZXhPZignKCcpKzEsbHNSYXRlLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICBkZWYgbHNSYXRlT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGxzUmF0ZUtleSlcbiAgICAgICAgICAgICAgICAvL2dldCBcIkFQUExJRURfVE9cIiBmb3IgdGhhdCByYXRlXG4gICAgICAgICAgICAgICAgZGVmIGxzQXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxzUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuYXBwbGllZFRvJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBkZWYgbHNBcHBsaWVkVG9WYWx1ZVxuICAgICAgICAgICAgICAgIGlmIChsc0FwcGxpZWRUbyl7XG4gICAgICAgICAgICAgICAgICAgIGxzQXBwbGllZFRvVmFsdWUgPSBsc0FwcGxpZWRUby5zdWJzdHJpbmcobHNBcHBsaWVkVG8uaW5kZXhPZignKCcpKzEsbHNBcHBsaWVkVG8uaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBkZWYgbHNSYXRlUmVmID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxzUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQucmF0ZVJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZGVmIGxzUmF0ZVJlZktleVxuICAgICAgICAgICAgICAgIGRlZiBsc1JhdGVSZWZWYWx1ZVxuICAgICAgICAgICAgICAgIGlmKGxzUmF0ZVJlZi5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgbHNSYXRlUmVmID0gbHNSYXRlUmVmLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgbHNSYXRlUmVmS2V5ID0gbHNSYXRlUmVmLnN1YnN0cmluZyhsc1JhdGVSZWYuaW5kZXhPZignKCcpKzEsbHNSYXRlUmVmLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICAgICAgZGVmIGxzUmF0ZVJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihPUEFBICsgbHNSYXRlUmVmS2V5KVxuICAgICAgICAgICAgICAgICAgICBsc1JhdGVSZWZWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsc1JhdGVSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5yYXRlLm5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICBsc1JhdGVSZWZWYWx1ZSA9IGxzUmF0ZVJlZlZhbHVlLnN1YnN0cmluZyhsc1JhdGVSZWZWYWx1ZS5pbmRleE9mKCcoJykrMSxsc1JhdGVSZWZWYWx1ZS5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYobHNBcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscyhcIkJPVEhcIikgfHwgbHNBcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscyhcIlNVUFBMSUVSXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgLy9nZXQgXCJUT1RBTF9BTU9VTlRfU1VQUExJRVJcIiBmb3IgdGhhdCBjb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgZGVmIHRvdEN1c3RvbWVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxzUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQudG90U3VwcGxpZXInXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgICAgICAgICAgICAgaWYoIXRvdEN1c3RvbWVyIHx8IHRvdEN1c3RvbWVyWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIwLjBcIikpe1xuICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ3M9dHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIuYWRkKGxzUmF0ZVJlZlZhbHVlLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgfSAgICBcbiAgICAgICAgfVxuXG4gICAgfWVsc2V7XG4gICAgICAgIC8qQ29udGFiaWxpenphemlvbmUgbm9uIGEgY29ycG8qL1xuICAgICAgICBsb2cuZGVidWcgXCJDb250YWJpbGl6emF6aW9uZSBOT04gYSBjb3Jwb1wiXG5cbiAgICAgICAgLy9PUEFBX1JFUExBQ0VEX01BVEVSSUFMU1xuICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykgIT0gXCJcIiAmJiAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKXtcbiAgICAgICAgICAgIC8vbG9nLmRlYnVnIFwiTWF0ZXJpYWxpOiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKVxuICAgICAgICAgICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovXG4gICAgICAgICAgICAvL2luc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHNcbiAgICAgICAgICAgIENsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTsgIFxuICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XG4gICAgICAgICAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xuICAgICAgICAgICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XG5cbiAgICAgICAgICAgIGRlZiByZXBNYXRMaXN0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpXG5cbiAgICAgICAgICAgIGZvcihtYXQgaW4gcmVwTWF0TGlzdCl7XG4gICAgICAgICAgICAgICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0XG4gICAgICAgICAgICAgICAgZGVmIGNvbXBvbmVudD1tYXQudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIGRlZiBjb21wb25lbnRLZXkgPSBjb21wb25lbnQuc3Vic3RyaW5nKGNvbXBvbmVudC5pbmRleE9mKCcoJytPUEFBKSsxLGNvbXBvbmVudC5sZW5ndGgoKS0xKVxuICAgICAgICAgICAgICAgIGRlZiBjb21wb25lbnRPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oY29tcG9uZW50S2V5KVxuICAgICAgICAgICAgICAgIC8vZ2V0IFwiQVBQTElFRF9UT1wiIGZvciB0aGF0IGNvbXBvbmVudFxuICAgICAgICAgICAgICAgIGRlZiBhcHBsaWVkVG8gPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKSBhcyBBcnJheUxpc3RcbiAgICAgICAgICAgICAgICBkZWYgYXBwbGllZFRvVmFsdWVcbiAgICAgICAgICAgICAgICBpZihhcHBsaWVkVG8uc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgICAgIGFwcGxpZWRUbyA9IGFwcGxpZWRUby50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIGFwcGxpZWRUb1ZhbHVlID0gYXBwbGllZFRvLnN1YnN0cmluZyhhcHBsaWVkVG8uaW5kZXhPZignKCcpKzEsYXBwbGllZFRvLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICAgICAgLy9sb2cuZGVidWcgXCJhcHBsaWVkVG9WYWx1ZTogXCIgKyBhcHBsaWVkVG9WYWx1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBkZWYgbWF0TnVtYmVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5tYXRlcmlhbFJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKSBhcyBBcnJheUxpc3RcbiAgICAgICAgICAgICAgICBkZWYgbWF0TnVtYmVyS2V5XG4gICAgICAgICAgICAgICAgZGVmIG1hdE51bWJlclZhbHVlXG4gICAgICAgICAgICAgICAgaWYobWF0TnVtYmVyLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICBtYXROdW1iZXIgPSBtYXROdW1iZXIudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICBtYXROdW1iZXJLZXkgPSBtYXROdW1iZXIuc3Vic3RyaW5nKG1hdE51bWJlci5pbmRleE9mKCcoJykrMSxtYXROdW1iZXIuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgICAgICBkZWYgbWF0TnVtYmVyT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKERCT2JqZWN0cyArIG1hdE51bWJlcktleSlcbiAgICAgICAgICAgICAgICAgICAgbWF0TnVtYmVyVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obWF0TnVtYmVyT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoubWF0ZXJpYWwubmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIG1hdE51bWJlclZhbHVlID0gbWF0TnVtYmVyVmFsdWUuc3Vic3RyaW5nKG1hdE51bWJlclZhbHVlLmluZGV4T2YoJygnKSsxLG1hdE51bWJlclZhbHVlLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZGVmIHNlcmlhbE51bWJlciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuc2VyaWFsTnVtYmVyJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpIGFzIEFycmF5TGlzdFxuICAgICAgICAgICAgICAgIGRlZiBzZXJpYWxOdW1iZXJWYWx1ZVxuICAgICAgICAgICAgICAgIGlmKHNlcmlhbE51bWJlci5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgc2VyaWFsTnVtYmVyID0gc2VyaWFsTnVtYmVyLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgc2VyaWFsTnVtYmVyVmFsdWUgPSBzZXJpYWxOdW1iZXIuc3Vic3RyaW5nKHNlcmlhbE51bWJlci5pbmRleE9mKCcoJykrMSxzZXJpYWxOdW1iZXIuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICBcblxuICAgICAgICAgICAgICAgIGlmKGFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKFwiQk9USFwiKSB8fCBhcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscyhcIlNVUFBMSUVSXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgLy9nZXQgXCJUT1RBTF9BTU9VTlRfU1VQUExJRVJcIiBmb3IgdGhhdCBjb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgZGVmIHRvdEN1c3RvbWVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuYXBwbGllZFRvJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgICAgIGlmKCF0b3RDdXN0b21lciB8fCB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMC4wXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzPXRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXIuYWRkKG1hdE51bWJlclZhbHVlLnRvU3RyaW5nKCkgKyAoIXNlcmlhbE51bWJlci50b1N0cmluZygpLmVxdWFscyhcIltdXCIpID8gXCIgKFwiICsgc2VyaWFsTnVtYmVyVmFsdWUudG9TdHJpbmcoKSArIFwiKVwiIDogXCIgKClcIikpICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgfSAgICBcbiAgICAgICAgfSAgXG5cbiAgICAgICAgLy9PUEFBX1VOQVRBTlRVTV9SQVRFU1xuICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHVuYVRhbnR1bVJhdGVzKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodW5hVGFudHVtUmF0ZXMpICE9IFwiXCIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodW5hVGFudHVtUmF0ZXMpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKXtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlVuYSB0YW50dW0gcmF0ZXM6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcylcbiAgICAgICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qL1xuICAgICAgICAgICAgLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzXG4gICAgICAgICAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7ICBcbiAgICAgICAgICAgIENsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbiAgICAgICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4gICAgICAgICAgICBkZWYgdW1SYXRlc0xpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHVuYVRhbnR1bVJhdGVzKVxuXG4gICAgICAgICAgICBmb3IodW0gaW4gdW1SYXRlc0xpc3Qpe1xuICAgICAgICAgICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdFxuICAgICAgICAgICAgICAgIGRlZiB1bVJhdGU9dW0udG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVLZXkgPSB1bVJhdGUuc3Vic3RyaW5nKHVtUmF0ZS5pbmRleE9mKCcoJykrMSx1bVJhdGUuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4odW1SYXRlS2V5KVxuICAgICAgICAgICAgICAgIC8vZ2V0IFwiQVBQTElFRF9UT1wiIGZvciB0aGF0IHJhdGVcbiAgICAgICAgICAgICAgICBkZWYgdW1BcHBsaWVkVG8gPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIGRlZiB1bUFwcGxpZWRUb1ZhbHVlID0gdW1BcHBsaWVkVG8uc3Vic3RyaW5nKHVtQXBwbGllZFRvLmluZGV4T2YoJygnKSsxLHVtQXBwbGllZFRvLmluZGV4T2YoJyknKSlcblxuICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVSZWYgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5yYXRlUmVmJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBcblxuICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVSZWZLZXlcbiAgICAgICAgICAgICAgICBkZWYgdW1SYXRlUmVmVmFsdWVcbiAgICAgICAgICAgICAgICBpZih1bVJhdGVSZWYuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgICAgIHVtUmF0ZVJlZiA9IHVtUmF0ZVJlZi50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIHVtUmF0ZVJlZktleSA9IHVtUmF0ZVJlZi5zdWJzdHJpbmcodW1SYXRlUmVmLmluZGV4T2YoJygnKSsxLHVtUmF0ZVJlZi5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVSZWZPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oT1BBQSArIHVtUmF0ZVJlZktleSlcbiAgICAgICAgICAgICAgICAgICAgdW1SYXRlUmVmVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoucmF0ZS5uYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgdW1SYXRlUmVmVmFsdWUgPSB1bVJhdGVSZWZWYWx1ZS5zdWJzdHJpbmcodW1SYXRlUmVmVmFsdWUuaW5kZXhPZignKCcpKzEsdW1SYXRlUmVmVmFsdWUuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZih1bUFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKFwiQk9USFwiKSB8fCB1bUFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKFwiU1VQUExJRVJcIikpe1xuICAgICAgICAgICAgICAgICAgICAvL2dldCBcIlRPVEFMX0FNT1VOVF9TVVBQTElFUlwiIGZvciB0aGF0IGNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICBkZWYgdG90Q3VzdG9tZXIgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC50b3RTdXBwbGllciddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuICAgICAgICAgICAgICAgICAgICBpZighdG90Q3VzdG9tZXIgfHwgdG90Q3VzdG9tZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscyhcIjAuMFwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lci5hZGQodW1SYXRlUmVmVmFsdWUudG9TdHJpbmcoKSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICB9ICAgIFxuICAgICAgICB9XG5cbiAgICAgICAgLy9PUEFBX0xBQk9VUl9SQVRFU1xuICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxhYm91clJhdGVzKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpICE9IFwiXCIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKXtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIkxhYm91ciByYXRlczogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxhYm91clJhdGVzKVxuICAgICAgICAgICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovXG4gICAgICAgICAgICAvL2luc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHNcbiAgICAgICAgICAgIENsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTsgIFxuICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XG4gICAgICAgICAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xuICAgICAgICAgICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XG5cbiAgICAgICAgICAgIGRlZiBsYWJvdXJSYXRlc0xpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxhYm91clJhdGVzKVxuXG4gICAgICAgICAgICBmb3IobGIgaW4gbGFib3VyUmF0ZXNMaXN0KXtcbiAgICAgICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3RcbiAgICAgICAgICAgICAgICBkZWYgbGJSYXRlPWxiLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBkZWYgbGJSYXRlS2V5ID0gbGJSYXRlLnN1YnN0cmluZyhsYlJhdGUuaW5kZXhPZignKCcpKzEsbGJSYXRlLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICBkZWYgbGJSYXRlT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGxiUmF0ZUtleSlcbiAgICAgICAgICAgICAgICAvL2dldCBcIkFQUExJRURfVE9cIiBmb3IgdGhhdCByYXRlXG4gICAgICAgICAgICAgICAgZGVmIGxiQXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuYXBwbGllZFRvJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBkZWYgbGJBcHBsaWVkVG9WYWx1ZSA9IGxiQXBwbGllZFRvLnN1YnN0cmluZyhsYkFwcGxpZWRUby5pbmRleE9mKCcoJykrMSxsYkFwcGxpZWRUby5pbmRleE9mKCcpJykpXG5cbiAgICAgICAgICAgICAgICBkZWYgbGJSYXRlUmVmID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQucmF0ZVJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZGVmIGxiUmF0ZVJlZktleVxuICAgICAgICAgICAgICAgIGRlZiBsYlJhdGVSZWZWYWx1ZVxuICAgICAgICAgICAgICAgIGlmKGxiUmF0ZVJlZi5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgbGJSYXRlUmVmID0gbGJSYXRlUmVmLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgbGJSYXRlUmVmS2V5ID0gbGJSYXRlUmVmLnN1YnN0cmluZyhsYlJhdGVSZWYuaW5kZXhPZignKCcpKzEsbGJSYXRlUmVmLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICAgICAgZGVmIGxiUmF0ZVJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihPUEFBICsgbGJSYXRlUmVmS2V5KVxuICAgICAgICAgICAgICAgICAgICBsYlJhdGVSZWZWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5yYXRlLm5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICBsYlJhdGVSZWZWYWx1ZSA9IGxiUmF0ZVJlZlZhbHVlLnN1YnN0cmluZyhsYlJhdGVSZWZWYWx1ZS5pbmRleE9mKCcoJykrMSxsYlJhdGVSZWZWYWx1ZS5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgZGVmIHRlY2hSZWYgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIFwiVEVDSE5JQ0lBTl9SRUZcIikuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgZGVmIHRlY2hSZWZLZXlcbiAgICAgICAgICAgICAgICBkZWYgdGVjaFJlZlZhbHVlXG4gICAgICAgICAgICAgICAgaWYodGVjaFJlZi5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgdGVjaFJlZiA9IHRlY2hSZWYudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICB0ZWNoUmVmS2V5ID0gdGVjaFJlZi5zdWJzdHJpbmcodGVjaFJlZi5pbmRleE9mKCcoJykrMSx0ZWNoUmVmLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICAgICAgZGVmIHVtUmF0ZVJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihPUEFBICsgdW1SYXRlUmVmS2V5KVxuICAgICAgICAgICAgICAgICAgICB0ZWNoUmVmVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaFJlZk9iamVjdC5nZXRJZCgpLCBcIk5hbWVcIikuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgdGVjaFJlZlZhbHVlID0gdW1SYXRlUmVmVmFsdWUuc3Vic3RyaW5nKHRlY2hSZWZWYWx1ZS5pbmRleE9mKCcoJykrMSx0ZWNoUmVmVmFsdWUuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgaWYobGJBcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscyhcIkJPVEhcIikgfHwgbGJBcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscyhcIlNVUFBMSUVSXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgLy9nZXQgXCJUT1RBTF9BTU9VTlRfU1VQUExJRVJcIiBmb3IgdGhhdCBjb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgZGVmIHRvdEN1c3RvbWVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQudG90U3VwcGxpZXInXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgICAgICAgICAgICAgaWYoIXRvdEN1c3RvbWVyIHx8IHRvdEN1c3RvbWVyWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIwLjBcIikpe1xuICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ3M9dHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIuYWRkKGxiUmF0ZVJlZlZhbHVlLnRvU3RyaW5nKCkvKiArIFwiIChcIiArIHRlY2hSZWZWYWx1ZS50b1N0cmluZygpICsgXCIpXCIqLylcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICB9ICAgIFxuICAgICAgICB9XG5cbiAgICAgICAgLy9PUEFBX1RSQVZFTF9SQVRFU1xuICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYXZlbFJhdGVzKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsUmF0ZXMpICE9IFwiXCIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsUmF0ZXMpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKXtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlRyYXZlbCByYXRlczogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYXZlbFJhdGVzKVxuICAgICAgICAgICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovXG4gICAgICAgICAgICAvL2luc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHNcbiAgICAgICAgICAgIENsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTsgIFxuICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XG4gICAgICAgICAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xuICAgICAgICAgICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XG5cbiAgICAgICAgICAgIGRlZiB0cmF2ZWxSYXRlc0xpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYXZlbFJhdGVzKVxuXG4gICAgICAgICAgICBmb3IodHIgaW4gdHJhdmVsUmF0ZXNMaXN0KXtcbiAgICAgICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3RcbiAgICAgICAgICAgICAgICBkZWYgdHJSYXRlPXRyLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBkZWYgdHJSYXRlS2V5ID0gdHJSYXRlLnN1YnN0cmluZyh0clJhdGUuaW5kZXhPZignKCcpKzEsdHJSYXRlLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICBkZWYgdHJSYXRlT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHRyUmF0ZUtleSlcbiAgICAgICAgICAgICAgICAvL2dldCBcIkFQUExJRURfVE9cIiBmb3IgdGhhdCByYXRlXG4gICAgICAgICAgICAgICAgZGVmIHRyQXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuYXBwbGllZFRvJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBkZWYgdHJBcHBsaWVkVG9WYWx1ZSA9IHRyQXBwbGllZFRvLnN1YnN0cmluZyh0ckFwcGxpZWRUby5pbmRleE9mKCcoJykrMSx0ckFwcGxpZWRUby5pbmRleE9mKCcpJykpXG5cbiAgICAgICAgICAgICAgICBkZWYgdHJSYXRlUmVmID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQucmF0ZVJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZGVmIHRyUmF0ZVJlZktleVxuICAgICAgICAgICAgICAgIGRlZiB0clJhdGVSZWZWYWx1ZVxuICAgICAgICAgICAgICAgIGlmKHRyUmF0ZVJlZi5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgdHJSYXRlUmVmID0gdHJSYXRlUmVmLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgdHJSYXRlUmVmS2V5ID0gdHJSYXRlUmVmLnN1YnN0cmluZyh0clJhdGVSZWYuaW5kZXhPZignKCcpKzEsdHJSYXRlUmVmLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICAgICAgZGVmIHRyUmF0ZVJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihPUEFBICsgdHJSYXRlUmVmS2V5KVxuICAgICAgICAgICAgICAgICAgICB0clJhdGVSZWZWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5yYXRlLm5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICB0clJhdGVSZWZWYWx1ZSA9IHRyUmF0ZVJlZlZhbHVlLnN1YnN0cmluZyh0clJhdGVSZWZWYWx1ZS5pbmRleE9mKCcoJykrMSx0clJhdGVSZWZWYWx1ZS5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYodHJBcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscyhcIkJPVEhcIikgfHwgdHJBcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscyhcIlNVUFBMSUVSXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgLy9nZXQgXCJUT1RBTF9BTU9VTlRfU1VQUExJRVJcIiBmb3IgdGhhdCBjb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgZGVmIHRvdEN1c3RvbWVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQudG90U3VwcGxpZXInXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgICAgICAgICAgICAgaWYoIXRvdEN1c3RvbWVyIHx8IHRvdEN1c3RvbWVyWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIwLjBcIikpe1xuICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ3M9dHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIuYWRkKHRyUmF0ZVJlZlZhbHVlLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgfSAgICBcbiAgICAgICAgfVxuXG4gICAgfVxuXG5cbiAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICBpZiAoIWVycm9ycyAmJiAhd2FybmluZ3Mpe1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH1lbHNle1xuICAgICAgICBpZighZXJyb3JzICYmIHdhcm5pbmdzKXtcbiAgICAgICAgICAgIC8vU2UgY2kgc29ubyBzb2xvIHdhcm5pbmdzIHZlcmlmaWNvIHNlIGwndXRlbnRlIGhhIGdpXHUwMGUwIGRpY2hpYXJhdG8gZGkgdm9sZXIgcHJvc2VndWlyZSBjb211bnF1ZVxuICAgICAgICAgICAgLy8gLSB0cmFuc2l0aW9uIGZpZWxkIFwiT1BBQV9DSEVDS19BTkRfQ09ORklSTVwiPVwiWWVzXCJcbiAgICAgICAgICAgIC8vIC0gaW4gY2FzbyBjb250cmFyaW8gaW52aW8gaSB3YXJuaW5nIGEgRkVcblxuICAgICAgICAgICAgLy9sb2cuZGVidWcgXCJ0cmFuc2l0aW9uQ2hlY2s6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spXG4gICAgICAgICAgICAvL2xvZy5kZWJ1ZyBcInJlc3VsdDogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIilcbiAgICAgICAgICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKSl7XG4gICAgICAgICAgICAgICAgLy9sb2cuZGVidWcgXCJyZXR1cm4gdHJ1ZSAtIHRyYW5zaXRpb25DaGVjayA9IFllc1wiXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgICAgICAgICAgICAgaWYod2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1FbXB0eVJhdGUgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZChcIldcIilcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZChcIlNVUFBMSUVSX0NPTkZJUk1fRU1QVFlfUkFURVNcIilcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZChudWxsKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKHdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyKVxuXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eVJhdGUpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYod2FybmluZ0VtcHR5UXVvdGVNYXRDdXN0b21lci5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgZGVmIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoXCJXXCIpXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKFwiU1VQUExJRVJfQ09ORklSTV9FTVBUWV9NQVRfUVVPVEVcIilcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQobnVsbClcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQod2FybmluZ0VtcHR5UXVvdGVNYXRDdXN0b21lcilcblxuICAgICAgICAgICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZSlcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJXXCIsIG91dHB1dC50b1N0cmluZygpKSAgIFxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICAgICAgaWYoZXJyb3JzICYmICF3YXJuaW5ncyl7XG4gICAgICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgICAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJFXCIsIG91dHB1dC50b1N0cmluZygpKSAgIFxuICAgICAgICB9XG4gICAgICAgIGlmKGVycm9ycyAmJiB3YXJuaW5ncyl7XG4gICAgICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgICAgICAgICBpZih3YXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lci5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHlSYXRlID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZChcIldcIilcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKFwiU1VQUExJRVJfQ09ORklSTV9FTVBUWV9SQVRFU1wiKVxuICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQobnVsbClcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKHdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyKVxuXG4gICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5UmF0ZSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYod2FybmluZ0VtcHR5UXVvdGVNYXRDdXN0b21lci5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZSA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKFwiV1wiKVxuICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKFwiU1VQUExJRVJfQ09ORklSTV9FTVBUWV9NQVRfUVVPVEVcIilcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChudWxsKVxuICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKHdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXIpXG5cbiAgICAgICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgICAgIG91dHB1dC5hZGQod0xpc3QpXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKFwiV0VcIiwgb3V0cHV0LnRvU3RyaW5nKCkpICBcbiAgICAgICAgfVxuICAgIH1cbi8vfWNhdGNoKEV4Y2VwdGlvbiBlKXtcbi8vICAgIGxvZy5kZWJ1ZyBcIkV4Y2VwdGlvbjogXCIgKyBlXG4vLyAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKFwiRXhjZXB0aW9uXCIsIGUudG9TdHJpbmcoKSkgIFxuLy99XG4iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZQppbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb24KaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3IKaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CmRlZiBDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQogCklzc3VlIGlzc3VlID0gaXNzdWUKCmRlZiBlcnJvcnMgPSBmYWxzZQpkZWYgd2FybmluZ3MgPSBmYWxzZQoKZGVmIGx1bXBTdW1QcmljZSA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YubHVtcFN1bVByaWNlJ10udG9TdHJpbmcoKSlbMF0KCi8qQ2FtcGkgY29uIGRhdGkgb2JibGlnYXRvcmkgcGVyIHRpY2tldCBub24gYSBjb3JwbyovCmRlZiByZXBNYXRlcmlhbHMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJlcGxhY2VkTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF0KZGVmIHVuYVRhbnR1bVJhdGVzID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi51bmF0YW50dW1SYXRlcyddLnRvU3RyaW5nKCkpWzBdCmRlZiBsYWJvdXJSYXRlcyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YubGFib3VyUmF0ZXMnXS50b1N0cmluZygpKVswXQpkZWYgdHJhdmVsUmF0ZXMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnRyYXZlbFJhdGVzJ10udG9TdHJpbmcoKSlbMF0KCi8qQ2FtcGkgY29uIGRhdGkgb2JibGlnYXRvcmkgcGVyIHRpY2tldCBhIGNvcnBvKi8KZGVmIGx1bXBTdW1SYXRlcyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YubHVtcFN1bVJhdGVzJ10udG9TdHJpbmcoKSlbMF0KCi8qQ29uZmVybWEgdXRlbnRlIHN1IHdhcm5pbmdzKi8KZGVmIHRyYW5zaXRpb25DaGVjayA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY2hlY2tBbmRDb25maXJtJ10udG9TdHJpbmcoKSlbMF0KCi8qSW5zaWdodCBTY2hlbWEgSURzKi8KZGVmIERCT2JqZWN0cyA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuZGJvJ10udG9TdHJpbmcoKSArICItIgpkZWYgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEnXS50b1N0cmluZygpICsgIi0iCgpkZWYgZXJyb3JNYW5kYXRvcnlGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIGVycm9ySm9iU3RhcnRlZENvbXBsZXRlZEZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKQpkZWYgd2FybmluZ0VtcHR5RmllbGRzID0gbmV3IEFycmF5TGlzdCgpCmRlZiB3YXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyID0gbmV3IEFycmF5TGlzdCgpCmRlZiB3YXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lciA9IG5ldyBBcnJheUxpc3QoKQoKLy90cnl7CiAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1QcmljZSkhPW51bGwgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUHJpY2UpLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKSl7CiAgICAgICAgLypDb250YWJpbGl6emF6aW9uZSBhIGNvcnBvKi8KICAgICAgICBsb2cuZGVidWcgIkNvbnRhYmlsaXp6YXppb25lIGEgY29ycG8iCiAgICAgICAgLy9PUEFBX0xVTVBfU1VNX1JBVEVTCiAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUmF0ZXMpIT1udWxsICYmIChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUmF0ZXMpICE9ICIiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1SYXRlcykudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICAgICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovCiAgICAgICAgICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50cwogICAgICAgICAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZSIpOyAgCiAgICAgICAgICAgIENsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUiKTsKICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTsKICAgICAgICAgICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7CgogICAgICAgICAgICBkZWYgbHNSYXRlc0xpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1SYXRlcykKCiAgICAgICAgICAgIGZvcihscyBpbiBsc1JhdGVzTGlzdCl7CiAgICAgICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3QKICAgICAgICAgICAgICAgIGRlZiBsc1JhdGU9bHMudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgZGVmIGxzUmF0ZUtleSA9IGxzUmF0ZS5zdWJzdHJpbmcobHNSYXRlLmluZGV4T2YoJygnKSsxLGxzUmF0ZS5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICBkZWYgbHNSYXRlT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGxzUmF0ZUtleSkKICAgICAgICAgICAgICAgIC8vZ2V0ICJBUFBMSUVEX1RPIiBmb3IgdGhhdCByYXRlCiAgICAgICAgICAgICAgICBkZWYgbHNBcHBsaWVkVG8gPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgZGVmIGxzQXBwbGllZFRvVmFsdWUKICAgICAgICAgICAgICAgIGlmIChsc0FwcGxpZWRUbyl7CiAgICAgICAgICAgICAgICAgICAgbHNBcHBsaWVkVG9WYWx1ZSA9IGxzQXBwbGllZFRvLnN1YnN0cmluZyhsc0FwcGxpZWRUby5pbmRleE9mKCcoJykrMSxsc0FwcGxpZWRUby5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGRlZiBsc1JhdGVSZWYgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5yYXRlUmVmJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZGVmIGxzUmF0ZVJlZktleQogICAgICAgICAgICAgICAgZGVmIGxzUmF0ZVJlZlZhbHVlCiAgICAgICAgICAgICAgICBpZihsc1JhdGVSZWYuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICAgICAgbHNSYXRlUmVmID0gbHNSYXRlUmVmLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgICAgICBsc1JhdGVSZWZLZXkgPSBsc1JhdGVSZWYuc3Vic3RyaW5nKGxzUmF0ZVJlZi5pbmRleE9mKCcoJykrMSxsc1JhdGVSZWYuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgICAgIGRlZiBsc1JhdGVSZWZPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oT1BBQSArIGxzUmF0ZVJlZktleSkKICAgICAgICAgICAgICAgICAgICBsc1JhdGVSZWZWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsc1JhdGVSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5yYXRlLm5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgIGxzUmF0ZVJlZlZhbHVlID0gbHNSYXRlUmVmVmFsdWUuc3Vic3RyaW5nKGxzUmF0ZVJlZlZhbHVlLmluZGV4T2YoJygnKSsxLGxzUmF0ZVJlZlZhbHVlLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZihsc0FwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJCT1RIIikgfHwgbHNBcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscygiU1VQUExJRVIiKSl7CiAgICAgICAgICAgICAgICAgICAgLy9nZXQgIlRPVEFMX0FNT1VOVF9TVVBQTElFUiIgZm9yIHRoYXQgY29tcG9uZW50CiAgICAgICAgICAgICAgICAgICAgZGVmIHRvdEN1c3RvbWVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxzUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQudG90U3VwcGxpZXInXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkKICAgICAgICAgICAgICAgICAgICBpZighdG90Q3VzdG9tZXIgfHwgdG90Q3VzdG9tZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscygiMC4wIikpewogICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyLmFkZChsc1JhdGVSZWZWYWx1ZS50b1N0cmluZygpKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgIH0gICAgCiAgICAgICAgfQoKICAgIH1lbHNlewogICAgICAgIC8qQ29udGFiaWxpenphemlvbmUgbm9uIGEgY29ycG8qLwogICAgICAgIGxvZy5kZWJ1ZyAiQ29udGFiaWxpenphemlvbmUgTk9OIGEgY29ycG8iCgogICAgICAgIC8vT1BBQV9SRVBMQUNFRF9NQVRFUklBTFMKICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykgIT0gIiIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgICAgICAvL2xvZy5kZWJ1ZyAiTWF0ZXJpYWxpOiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpCiAgICAgICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qLwogICAgICAgICAgICAvL2luc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHMKICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGUiKTsgIAogICAgICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CiAgICAgICAgICAgIGRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7CiAgICAgICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpOwoKICAgICAgICAgICAgZGVmIHJlcE1hdExpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykKCiAgICAgICAgICAgIGZvcihtYXQgaW4gcmVwTWF0TGlzdCl7CiAgICAgICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3QKICAgICAgICAgICAgICAgIGRlZiBjb21wb25lbnQ9bWF0LnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIGRlZiBjb21wb25lbnRLZXkgPSBjb21wb25lbnQuc3Vic3RyaW5nKGNvbXBvbmVudC5pbmRleE9mKCcoJytPUEFBKSsxLGNvbXBvbmVudC5sZW5ndGgoKS0xKQogICAgICAgICAgICAgICAgZGVmIGNvbXBvbmVudE9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihjb21wb25lbnRLZXkpCiAgICAgICAgICAgICAgICAvL2dldCAiQVBQTElFRF9UTyIgZm9yIHRoYXQgY29tcG9uZW50CiAgICAgICAgICAgICAgICBkZWYgYXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkgYXMgQXJyYXlMaXN0CiAgICAgICAgICAgICAgICBkZWYgYXBwbGllZFRvVmFsdWUKICAgICAgICAgICAgICAgIGlmKGFwcGxpZWRUby5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgICAgICBhcHBsaWVkVG8gPSBhcHBsaWVkVG8udG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgIGFwcGxpZWRUb1ZhbHVlID0gYXBwbGllZFRvLnN1YnN0cmluZyhhcHBsaWVkVG8uaW5kZXhPZignKCcpKzEsYXBwbGllZFRvLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgICAgICAvL2xvZy5kZWJ1ZyAiYXBwbGllZFRvVmFsdWU6ICIgKyBhcHBsaWVkVG9WYWx1ZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBkZWYgbWF0TnVtYmVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5tYXRlcmlhbFJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKSBhcyBBcnJheUxpc3QKICAgICAgICAgICAgICAgIGRlZiBtYXROdW1iZXJLZXkKICAgICAgICAgICAgICAgIGRlZiBtYXROdW1iZXJWYWx1ZQogICAgICAgICAgICAgICAgaWYobWF0TnVtYmVyLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgICAgIG1hdE51bWJlciA9IG1hdE51bWJlci50b1N0cmluZygpCiAgICAgICAgICAgICAgICAgICAgbWF0TnVtYmVyS2V5ID0gbWF0TnVtYmVyLnN1YnN0cmluZyhtYXROdW1iZXIuaW5kZXhPZignKCcpKzEsbWF0TnVtYmVyLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgICAgICBkZWYgbWF0TnVtYmVyT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKERCT2JqZWN0cyArIG1hdE51bWJlcktleSkKICAgICAgICAgICAgICAgICAgICBtYXROdW1iZXJWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihtYXROdW1iZXJPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5tYXRlcmlhbC5uYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgICAgICBtYXROdW1iZXJWYWx1ZSA9IG1hdE51bWJlclZhbHVlLnN1YnN0cmluZyhtYXROdW1iZXJWYWx1ZS5pbmRleE9mKCcoJykrMSxtYXROdW1iZXJWYWx1ZS5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGRlZiBzZXJpYWxOdW1iZXIgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnNlcmlhbE51bWJlciddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKSBhcyBBcnJheUxpc3QKICAgICAgICAgICAgICAgIGRlZiBzZXJpYWxOdW1iZXJWYWx1ZQogICAgICAgICAgICAgICAgaWYoc2VyaWFsTnVtYmVyLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgICAgIHNlcmlhbE51bWJlciA9IHNlcmlhbE51bWJlci50b1N0cmluZygpCiAgICAgICAgICAgICAgICAgICAgc2VyaWFsTnVtYmVyVmFsdWUgPSBzZXJpYWxOdW1iZXIuc3Vic3RyaW5nKHNlcmlhbE51bWJlci5pbmRleE9mKCcoJykrMSxzZXJpYWxOdW1iZXIuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIGlmKGFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJCT1RIIikgfHwgYXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoIlNVUFBMSUVSIikpewogICAgICAgICAgICAgICAgICAgIC8vZ2V0ICJUT1RBTF9BTU9VTlRfU1VQUExJRVIiIGZvciB0aGF0IGNvbXBvbmVudAogICAgICAgICAgICAgICAgICAgIGRlZiB0b3RDdXN0b21lciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQogICAgICAgICAgICAgICAgICAgIGlmKCF0b3RDdXN0b21lciB8fCB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKCIwLjAiKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzPXRydWUKICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ0VtcHR5UXVvdGVNYXRDdXN0b21lci5hZGQobWF0TnVtYmVyVmFsdWUudG9TdHJpbmcoKSArICghc2VyaWFsTnVtYmVyLnRvU3RyaW5nKCkuZXF1YWxzKCJbXSIpID8gIiAoIiArIHNlcmlhbE51bWJlclZhbHVlLnRvU3RyaW5nKCkgKyAiKSIgOiAiICgpIikpICAgCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgfSAgICAKICAgICAgICB9ICAKCiAgICAgICAgLy9PUEFBX1VOQVRBTlRVTV9SQVRFUwogICAgICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodW5hVGFudHVtUmF0ZXMpIT1udWxsICYmIChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcykgIT0gIiIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodW5hVGFudHVtUmF0ZXMpLnRvU3RyaW5nKCkuZXF1YWxzKCIiKSl7CiAgICAgICAgICAgIGxvZy5kZWJ1ZyAiVW5hIHRhbnR1bSByYXRlczogIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodW5hVGFudHVtUmF0ZXMpCiAgICAgICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qLwogICAgICAgICAgICAvL2luc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHMKICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGUiKTsgIAogICAgICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CiAgICAgICAgICAgIGRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7CiAgICAgICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpOwoKICAgICAgICAgICAgZGVmIHVtUmF0ZXNMaXN0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcykKCiAgICAgICAgICAgIGZvcih1bSBpbiB1bVJhdGVzTGlzdCl7CiAgICAgICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3QKICAgICAgICAgICAgICAgIGRlZiB1bVJhdGU9dW0udG9TdHJpbmcoKQogICAgICAgICAgICAgICAgZGVmIHVtUmF0ZUtleSA9IHVtUmF0ZS5zdWJzdHJpbmcodW1SYXRlLmluZGV4T2YoJygnKSsxLHVtUmF0ZS5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICBkZWYgdW1SYXRlT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHVtUmF0ZUtleSkKICAgICAgICAgICAgICAgIC8vZ2V0ICJBUFBMSUVEX1RPIiBmb3IgdGhhdCByYXRlCiAgICAgICAgICAgICAgICBkZWYgdW1BcHBsaWVkVG8gPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgZGVmIHVtQXBwbGllZFRvVmFsdWUgPSB1bUFwcGxpZWRUby5zdWJzdHJpbmcodW1BcHBsaWVkVG8uaW5kZXhPZignKCcpKzEsdW1BcHBsaWVkVG8uaW5kZXhPZignKScpKQoKICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVSZWYgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5yYXRlUmVmJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIAoKICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVSZWZLZXkKICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVSZWZWYWx1ZQogICAgICAgICAgICAgICAgaWYodW1SYXRlUmVmLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgICAgIHVtUmF0ZVJlZiA9IHVtUmF0ZVJlZi50b1N0cmluZygpCiAgICAgICAgICAgICAgICAgICAgdW1SYXRlUmVmS2V5ID0gdW1SYXRlUmVmLnN1YnN0cmluZyh1bVJhdGVSZWYuaW5kZXhPZignKCcpKzEsdW1SYXRlUmVmLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgICAgICBkZWYgdW1SYXRlUmVmT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKE9QQUEgKyB1bVJhdGVSZWZLZXkpCiAgICAgICAgICAgICAgICAgICAgdW1SYXRlUmVmVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoucmF0ZS5uYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgICAgICB1bVJhdGVSZWZWYWx1ZSA9IHVtUmF0ZVJlZlZhbHVlLnN1YnN0cmluZyh1bVJhdGVSZWZWYWx1ZS5pbmRleE9mKCcoJykrMSx1bVJhdGVSZWZWYWx1ZS5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmKHVtQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoIkJPVEgiKSB8fCB1bUFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJTVVBQTElFUiIpKXsKICAgICAgICAgICAgICAgICAgICAvL2dldCAiVE9UQUxfQU1PVU5UX1NVUFBMSUVSIiBmb3IgdGhhdCBjb21wb25lbnQKICAgICAgICAgICAgICAgICAgICBkZWYgdG90Q3VzdG9tZXIgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC50b3RTdXBwbGllciddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQogICAgICAgICAgICAgICAgICAgIGlmKCF0b3RDdXN0b21lciB8fCB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKCIwLjAiKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzPXRydWUKICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIuYWRkKHVtUmF0ZVJlZlZhbHVlLnRvU3RyaW5nKCkpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgfSAgICAKICAgICAgICB9CgogICAgICAgIC8vT1BBQV9MQUJPVVJfUkFURVMKICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxhYm91clJhdGVzKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpICE9ICIiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxhYm91clJhdGVzKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgICAgICBsb2cuZGVidWcgIkxhYm91ciByYXRlczogIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpCiAgICAgICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qLwogICAgICAgICAgICAvL2luc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHMKICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGUiKTsgIAogICAgICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CiAgICAgICAgICAgIGRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7CiAgICAgICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpOwoKICAgICAgICAgICAgZGVmIGxhYm91clJhdGVzTGlzdCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpCgogICAgICAgICAgICBmb3IobGIgaW4gbGFib3VyUmF0ZXNMaXN0KXsKICAgICAgICAgICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdAogICAgICAgICAgICAgICAgZGVmIGxiUmF0ZT1sYi50b1N0cmluZygpCiAgICAgICAgICAgICAgICBkZWYgbGJSYXRlS2V5ID0gbGJSYXRlLnN1YnN0cmluZyhsYlJhdGUuaW5kZXhPZignKCcpKzEsbGJSYXRlLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIGRlZiBsYlJhdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4obGJSYXRlS2V5KQogICAgICAgICAgICAgICAgLy9nZXQgIkFQUExJRURfVE8iIGZvciB0aGF0IHJhdGUKICAgICAgICAgICAgICAgIGRlZiBsYkFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgICAgICAgICBkZWYgbGJBcHBsaWVkVG9WYWx1ZSA9IGxiQXBwbGllZFRvLnN1YnN0cmluZyhsYkFwcGxpZWRUby5pbmRleE9mKCcoJykrMSxsYkFwcGxpZWRUby5pbmRleE9mKCcpJykpCgogICAgICAgICAgICAgICAgZGVmIGxiUmF0ZVJlZiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBkZWYgbGJSYXRlUmVmS2V5CiAgICAgICAgICAgICAgICBkZWYgbGJSYXRlUmVmVmFsdWUKICAgICAgICAgICAgICAgIGlmKGxiUmF0ZVJlZi5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgICAgICBsYlJhdGVSZWYgPSBsYlJhdGVSZWYudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgIGxiUmF0ZVJlZktleSA9IGxiUmF0ZVJlZi5zdWJzdHJpbmcobGJSYXRlUmVmLmluZGV4T2YoJygnKSsxLGxiUmF0ZVJlZi5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICAgICAgZGVmIGxiUmF0ZVJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihPUEFBICsgbGJSYXRlUmVmS2V5KQogICAgICAgICAgICAgICAgICAgIGxiUmF0ZVJlZlZhbHVlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZVJlZk9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnJhdGUubmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgICAgICAgICAgICAgbGJSYXRlUmVmVmFsdWUgPSBsYlJhdGVSZWZWYWx1ZS5zdWJzdHJpbmcobGJSYXRlUmVmVmFsdWUuaW5kZXhPZignKCcpKzEsbGJSYXRlUmVmVmFsdWUuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvKgogICAgICAgICAgICAgICAgZGVmIHRlY2hSZWYgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksICJURUNITklDSUFOX1JFRiIpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQogICAgICAgICAgICAgICAgZGVmIHRlY2hSZWZLZXkKICAgICAgICAgICAgICAgIGRlZiB0ZWNoUmVmVmFsdWUKICAgICAgICAgICAgICAgIGlmKHRlY2hSZWYuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICAgICAgdGVjaFJlZiA9IHRlY2hSZWYudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgIHRlY2hSZWZLZXkgPSB0ZWNoUmVmLnN1YnN0cmluZyh0ZWNoUmVmLmluZGV4T2YoJygnKSsxLHRlY2hSZWYuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVSZWZPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oT1BBQSArIHVtUmF0ZVJlZktleSkKICAgICAgICAgICAgICAgICAgICB0ZWNoUmVmVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaFJlZk9iamVjdC5nZXRJZCgpLCAiTmFtZSIpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgICAgICAgICAgICAgdGVjaFJlZlZhbHVlID0gdW1SYXRlUmVmVmFsdWUuc3Vic3RyaW5nKHRlY2hSZWZWYWx1ZS5pbmRleE9mKCcoJykrMSx0ZWNoUmVmVmFsdWUuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKi8KCiAgICAgICAgICAgICAgICBpZihsYkFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJCT1RIIikgfHwgbGJBcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscygiU1VQUExJRVIiKSl7CiAgICAgICAgICAgICAgICAgICAgLy9nZXQgIlRPVEFMX0FNT1VOVF9TVVBQTElFUiIgZm9yIHRoYXQgY29tcG9uZW50CiAgICAgICAgICAgICAgICAgICAgZGVmIHRvdEN1c3RvbWVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQudG90U3VwcGxpZXInXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkKICAgICAgICAgICAgICAgICAgICBpZighdG90Q3VzdG9tZXIgfHwgdG90Q3VzdG9tZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscygiMC4wIikpewogICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyLmFkZChsYlJhdGVSZWZWYWx1ZS50b1N0cmluZygpLyogKyAiICgiICsgdGVjaFJlZlZhbHVlLnRvU3RyaW5nKCkgKyAiKSIqLykKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICB9ICAgIAogICAgICAgIH0KCiAgICAgICAgLy9PUEFBX1RSQVZFTF9SQVRFUwogICAgICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsUmF0ZXMpIT1udWxsICYmIChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmF2ZWxSYXRlcykgIT0gIiIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsUmF0ZXMpLnRvU3RyaW5nKCkuZXF1YWxzKCIiKSl7CiAgICAgICAgICAgIGxvZy5kZWJ1ZyAiVHJhdmVsIHJhdGVzOiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmF2ZWxSYXRlcykKICAgICAgICAgICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovCiAgICAgICAgICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50cwogICAgICAgICAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZSIpOyAgCiAgICAgICAgICAgIENsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUiKTsKICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTsKICAgICAgICAgICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7CgogICAgICAgICAgICBkZWYgdHJhdmVsUmF0ZXNMaXN0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmF2ZWxSYXRlcykKCiAgICAgICAgICAgIGZvcih0ciBpbiB0cmF2ZWxSYXRlc0xpc3QpewogICAgICAgICAgICAgICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0CiAgICAgICAgICAgICAgICBkZWYgdHJSYXRlPXRyLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIGRlZiB0clJhdGVLZXkgPSB0clJhdGUuc3Vic3RyaW5nKHRyUmF0ZS5pbmRleE9mKCcoJykrMSx0clJhdGUuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgZGVmIHRyUmF0ZU9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbih0clJhdGVLZXkpCiAgICAgICAgICAgICAgICAvL2dldCAiQVBQTElFRF9UTyIgZm9yIHRoYXQgcmF0ZQogICAgICAgICAgICAgICAgZGVmIHRyQXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuYXBwbGllZFRvJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIGRlZiB0ckFwcGxpZWRUb1ZhbHVlID0gdHJBcHBsaWVkVG8uc3Vic3RyaW5nKHRyQXBwbGllZFRvLmluZGV4T2YoJygnKSsxLHRyQXBwbGllZFRvLmluZGV4T2YoJyknKSkKCiAgICAgICAgICAgICAgICBkZWYgdHJSYXRlUmVmID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQucmF0ZVJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGRlZiB0clJhdGVSZWZLZXkKICAgICAgICAgICAgICAgIGRlZiB0clJhdGVSZWZWYWx1ZQogICAgICAgICAgICAgICAgaWYodHJSYXRlUmVmLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgICAgIHRyUmF0ZVJlZiA9IHRyUmF0ZVJlZi50b1N0cmluZygpCiAgICAgICAgICAgICAgICAgICAgdHJSYXRlUmVmS2V5ID0gdHJSYXRlUmVmLnN1YnN0cmluZyh0clJhdGVSZWYuaW5kZXhPZignKCcpKzEsdHJSYXRlUmVmLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgICAgICBkZWYgdHJSYXRlUmVmT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKE9QQUEgKyB0clJhdGVSZWZLZXkpCiAgICAgICAgICAgICAgICAgICAgdHJSYXRlUmVmVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odHJSYXRlUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoucmF0ZS5uYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgICAgICB0clJhdGVSZWZWYWx1ZSA9IHRyUmF0ZVJlZlZhbHVlLnN1YnN0cmluZyh0clJhdGVSZWZWYWx1ZS5pbmRleE9mKCcoJykrMSx0clJhdGVSZWZWYWx1ZS5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYodHJBcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscygiQk9USCIpIHx8IHRyQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoIlNVUFBMSUVSIikpewogICAgICAgICAgICAgICAgICAgIC8vZ2V0ICJUT1RBTF9BTU9VTlRfU1VQUExJRVIiIGZvciB0aGF0IGNvbXBvbmVudAogICAgICAgICAgICAgICAgICAgIGRlZiB0b3RDdXN0b21lciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnRvdFN1cHBsaWVyJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpCiAgICAgICAgICAgICAgICAgICAgaWYoIXRvdEN1c3RvbWVyIHx8IHRvdEN1c3RvbWVyWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKS5lcXVhbHMoIjAuMCIpKXsKICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ3M9dHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lci5hZGQodHJSYXRlUmVmVmFsdWUudG9TdHJpbmcoKSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICB9ICAgIAogICAgICAgIH0KCiAgICB9CgoKICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KCkKCiAgICBpZiAoIWVycm9ycyAmJiAhd2FybmluZ3MpewogICAgICAgIHJldHVybiB0cnVlCiAgICB9ZWxzZXsKICAgICAgICBpZighZXJyb3JzICYmIHdhcm5pbmdzKXsKICAgICAgICAgICAgLy9TZSBjaSBzb25vIHNvbG8gd2FybmluZ3MgdmVyaWZpY28gc2UgbCd1dGVudGUgaGEgZ2nDoCBkaWNoaWFyYXRvIGRpIHZvbGVyIHByb3NlZ3VpcmUgY29tdW5xdWUKICAgICAgICAgICAgLy8gLSB0cmFuc2l0aW9uIGZpZWxkICJPUEFBX0NIRUNLX0FORF9DT05GSVJNIj0iWWVzIgogICAgICAgICAgICAvLyAtIGluIGNhc28gY29udHJhcmlvIGludmlvIGkgd2FybmluZyBhIEZFCgogICAgICAgICAgICAvL2xvZy5kZWJ1ZyAidHJhbnNpdGlvbkNoZWNrOiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spCiAgICAgICAgICAgIC8vbG9nLmRlYnVnICJyZXN1bHQ6ICIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykudG9TdHJpbmcoKS5lcXVhbHMoIlllcyIpCiAgICAgICAgICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKS50b1N0cmluZygpLmVxdWFscygiWWVzIikpewogICAgICAgICAgICAgICAgLy9sb2cuZGVidWcgInJldHVybiB0cnVlIC0gdHJhbnNpdGlvbkNoZWNrID0gWWVzIgogICAgICAgICAgICAgICAgcmV0dXJuIHRydWUKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICBkZWYgd0xpc3QgPSBuZXcgQXJyYXlMaXN0KCkKCiAgICAgICAgICAgICAgICBpZih3YXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lci5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHlSYXRlID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZCgiVyIpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZCgiU1VQUExJRVJfQ09ORklSTV9FTVBUWV9SQVRFUyIpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZChudWxsKQogICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQod2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIpCgogICAgICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eVJhdGUpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYod2FybmluZ0VtcHR5UXVvdGVNYXRDdXN0b21lci5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZSA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKCJXIikKICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZCgiU1VQUExJRVJfQ09ORklSTV9FTVBUWV9NQVRfUVVPVEUiKQogICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKG51bGwpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQod2FybmluZ0VtcHR5UXVvdGVNYXRDdXN0b21lcikKCiAgICAgICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgb3V0cHV0LmFkZCh3TGlzdCkKICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3siVyI6IicgKyBvdXRwdXQudG9TdHJpbmcoKSArICcifScpCiAgICAgICAgICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oIlciLCBvdXRwdXQudG9TdHJpbmcoKSkgICAKICAgICAgICAgICAgfQoKICAgICAgICB9CiAgICAgICAgaWYoZXJyb3JzICYmICF3YXJuaW5ncyl7CiAgICAgICAgICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKQoKICAgICAgICAgICAgb3V0cHV0LmFkZChlTGlzdCkKICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigneyJFIjoiJyArIG91dHB1dC50b1N0cmluZygpICsgJyJ9JykKICAgICAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJFIiwgb3V0cHV0LnRvU3RyaW5nKCkpICAgCiAgICAgICAgfQogICAgICAgIGlmKGVycm9ycyAmJiB3YXJuaW5ncyl7CiAgICAgICAgICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICBkZWYgd0xpc3QgPSBuZXcgQXJyYXlMaXN0KCkKCiAgICAgICAgICAgIGlmKHdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgZGVmIHdMaXN0Q29uZmlybUVtcHR5UmF0ZSA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZCgiVyIpCiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKCJTVVBQTElFUl9DT05GSVJNX0VNUFRZX1JBVEVTIikKICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQobnVsbCkKICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQod2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIpCgogICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5UmF0ZSkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYod2FybmluZ0VtcHR5UXVvdGVNYXRDdXN0b21lci5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZCgiVyIpCiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZCgiU1VQUExJRVJfQ09ORklSTV9FTVBUWV9NQVRfUVVPVEUiKQogICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQobnVsbCkKICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKHdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXIpCgogICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpCiAgICAgICAgICAgIG91dHB1dC5hZGQod0xpc3QpCiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3siV0UiOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQogICAgICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oIldFIiwgb3V0cHV0LnRvU3RyaW5nKCkpICAKICAgICAgICB9CiAgICB9Ci8vfWNhdGNoKEV4Y2VwdGlvbiBlKXsKLy8gICAgbG9nLmRlYnVnICJFeGNlcHRpb246ICIgKyBlCi8vICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oIkV4Y2VwdGlvbiIsIGUudG9TdHJpbmcoKSkgIAovL30K</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">689764320f82b76e3ae6c1de4019336fc58866cd</arg>
              <arg name="FIELD_NOTES">YCFgT1AgRW1haWwgTm90aWZpY2F0aW9uOiBQVVJDSEFTRV9PUkRFUl9UT19TVVBQTElFUg==</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuZGVmIHJlcXVlc3RNZXRob2RcbmRlZiBiYXNlVVJMXG5cblVSTCB1cmxcbkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb25cblxucmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuXG5kZWYgcmVsYXRlc0luSXNzdWVMaW5rPWZhbHNlXG5kZWYgcmVsYXRlc091dElzc3VlTGluaz1mYWxzZVxuZGVmIGxpbmtlZFRpY2tldHM9bmV3IEFycmF5TGlzdCgpXG5cbkxpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKVxuZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG5cbiAgICBpZihpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkgIT0gbnVsbCAmJiBpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSAmJiBpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkuc3RhdHVzLm5hbWUgPT0gXCJDb21wbGV0ZWQgdG8gYmUgQ2xvc2VkXCIpe1xuICAgICAgICByZWxhdGVzSW5Jc3N1ZUxpbms9dHJ1ZVxuICAgICAgICBsaW5rZWRUaWNrZXRzLmFkZChpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkpXG4gICAgICAgIGxvZy5kZWJ1ZyBcIklzc3VlIGNvbiByZWxhdGVzSW5Jc3N1ZUxpbmtcIlxuICAgIH1cbn1cbkxpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG5mb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG5cbiAgICBpZihpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKSAhPSBudWxsICYmIGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpICYmIGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpLnN0YXR1cy5uYW1lID09IFwiQ29tcGxldGVkIHRvIGJlIENsb3NlZFwiKXtcbiAgICAgICAgcmVsYXRlc091dElzc3VlTGluaz10cnVlXG4gICAgICAgIGxpbmtlZFRpY2tldHMuYWRkKGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpKVxuICAgICAgICBsb2cuZGVidWcgXCJJc3N1ZSBjb24gcmVsYXRlc091dElzc3VlTGlua1wiXG4gICAgfVxufVxuXG5kZWYgYm9keV9yZXEgPSBbXVxuXG5pZihyZWxhdGVzSW5Jc3N1ZUxpbmsgfHwgcmVsYXRlc091dElzc3VlTGluayl7XG4gICAgYm9keV9yZXEgPSBbXG4gICAgICAgIFwidGVtcGxhdGVOYW1lXCI6IFwiUFVSQ0hBU0VfT1JERVJfVE9fU1VQUExJRVJcIixcbiAgICAgICAgXCJwZWNcIjogZmFsc2UsXG4gICAgICAgIFwiaXNzdWVLZXlcIjogaXNzdWUua2V5LFxuICAgICAgICBcImxpbmtlZFRpY2tldHNcIjogbGlua2VkVGlja2V0c1xuICAgIF0gICAgXG59ZWxzZXtcbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJ0ZW1wbGF0ZU5hbWVcIjogXCJQVVJDSEFTRV9PUkRFUl9UT19TVVBQTElFUlwiLFxuICAgICAgICBcInBlY1wiOiBmYWxzZSxcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXlcbiAgICBdIFxufVxuXG5iYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS90cmFuc2FjdGlvbi9tYWlsL3NlbmRcIlxudXJsID0gbmV3IFVSTChiYXNlVVJMKVxuY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG5jb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cbmxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuY29ubmVjdGlvbi5jb25uZWN0KCk7XG5cbmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cbmlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSAmJiAhY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwNFwiKSl7XG4gICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgXG4gICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxuICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcbiAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcblxuICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICBlTGlzdEVycm9ycy5hZGQoXCJTRU5ETUFJTFwiKVxuICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKSlcbiAgICBlTGlzdEVycm9ycy5hZGQoanNvbl9vYmplY3QubWVzc2FnZSlcbiAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWUKaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0OwppbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeQppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQpDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRykKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGluawoKSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpOwpDdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7CmRlZiByZXF1ZXN0TWV0aG9kCmRlZiBiYXNlVVJMCgpVUkwgdXJsCkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24KCnJlcXVlc3RNZXRob2QgPSAiUE9TVCI7CgpkZWYgcmVsYXRlc0luSXNzdWVMaW5rPWZhbHNlCmRlZiByZWxhdGVzT3V0SXNzdWVMaW5rPWZhbHNlCmRlZiBsaW5rZWRUaWNrZXRzPW5ldyBBcnJheUxpc3QoKQoKTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpCmZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbEluSXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHsKICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7CgogICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpewogICAgICAgIHJlbGF0ZXNJbklzc3VlTGluaz10cnVlCiAgICAgICAgbGlua2VkVGlja2V0cy5hZGQoaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpKQogICAgICAgIGxvZy5kZWJ1ZyAiSXNzdWUgY29uIHJlbGF0ZXNJbklzc3VlTGluayIKICAgIH0KfQpMaXN0PElzc3VlTGluaz4gYWxsT3V0SXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldE91dHdhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKQpmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykgewogICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTsKCiAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7CiAgICAgICAgcmVsYXRlc091dElzc3VlTGluaz10cnVlCiAgICAgICAgbGlua2VkVGlja2V0cy5hZGQoaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkpCiAgICAgICAgbG9nLmRlYnVnICJJc3N1ZSBjb24gcmVsYXRlc091dElzc3VlTGluayIKICAgIH0KfQoKZGVmIGJvZHlfcmVxID0gW10KCmlmKHJlbGF0ZXNJbklzc3VlTGluayB8fCByZWxhdGVzT3V0SXNzdWVMaW5rKXsKICAgIGJvZHlfcmVxID0gWwogICAgICAgICJ0ZW1wbGF0ZU5hbWUiOiBwcm9wZXJ0aWVzWyd0dC5wdXJjaGFzZU9yZGVyVG9TJ10udG9TdHJpbmcoKSwKICAgICAgICAicGVjIjogZmFsc2UsCiAgICAgICAgImlzc3VlS2V5IjogaXNzdWUua2V5LAogICAgICAgICJsaW5rZWRUaWNrZXRzIjogbGlua2VkVGlja2V0cwogICAgXSAgICAKfWVsc2V7CiAgICBib2R5X3JlcSA9IFsKICAgICAgICAidGVtcGxhdGVOYW1lIjogcHJvcGVydGllc1sndHQucHVyY2hhc2VPcmRlclRvUyddLnRvU3RyaW5nKCksCiAgICAgICAgInBlYyI6IGZhbHNlLAogICAgICAgICJpc3N1ZUtleSI6IGlzc3VlLmtleQogICAgXSAKfQoKYmFzZVVSTCA9ICJodHRwOi8vIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgIi9vcC9yZXN0L2ppcmEvQUEvdHJhbnNhY3Rpb24vbWFpbC9zZW5kIgp1cmwgPSBuZXcgVVJMKGJhc2VVUkwpCmNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7CmNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLTgiKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoIkFjY2VwdCIsICIqLyoiKTsKY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTsKY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpOwpjb25uZWN0aW9uLm91dHB1dFN0cmVhbQpjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKCJVVEYtOCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfQpsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0KY29ubmVjdGlvbi5jb25uZWN0KCk7CgpkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpCmRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKQpkZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKQoKaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKCIyMDAiKSl7CiAgICBsb2cuZGVidWcgInVybDogIiArIHVybAogICAgbG9nLmRlYnVnICJSZXNwb25zZUNvZGU6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkKICAgIGxvZy5kZWJ1ZyAiUmVzcG9uc2VNZXNzYWdlOiIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpCiAgICBlTGlzdEVycm9ycy5hZGQoIkUiKQogICAgZUxpc3RFcnJvcnMuYWRkKCJTRU5ETUFJTCIpCiAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyAiICIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpKQogICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncykKICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycykKCiAgICBvdXRwdXQuYWRkKGVMaXN0KQogICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigneyJFIjoiJyArIG91dHB1dC50b1N0cmluZygpICsgJyJ9JykKICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiRSIsIG91dHB1dC50b1N0cmluZygpKQp9</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="6">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="221" name="Invia Mail Rapporto di Intervento" view="fieldscreen">
          <meta name="opsbar-sequence">20</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">19912</meta>
          <restrict-to>
            <conditions type="AND">
              <condition type="class">
                <arg name="FIELD_NOTES">YCFgT1A6IElmIHN0YXR1cz1DT01QTEVURUQgVE8gQkUgQ0xPU0VEICYmIE9OU0lURV9SRVBPUlQgPSBudWxsIC0gTm90aWZpY2F0aW9uIGhhcyBub3QgYmVlbiBzZW50</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXIKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsCgpQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpCkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpCnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7Cglwcm9wZXJ0aWVzLmxvYWQoaXQpCn0KY2ZWYWx1ZXNbcHJvcGVydGllc1snY2Yud2ZPbnNpdGVSZXBvcnQnXV0gPT0gbnVsbHx8fA==</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
              </condition>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">b4a54bb6-c08d-4e16-b3cf-1348807eb21a</arg>
                <arg name="FIELD_NOTES">YCFgTWFpbnRlbmFuY2UgVGlja2V0IE9SIFBNIFRpY2tldA==</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnTWFpbnRlbmFuY2UgVGlja2V0JyB8fCBpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXQnIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
              </condition>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">e824724d-1f75-44f4-8569-241bdc9705cd</arg>
                <arg name="FIELD_NOTES">YCFgQXZhaWxhYmxlIG9ubHkgaWYgdGhlcmUgaXMgYXQgbGVhc3Qgb25lIE9OIFNJVEUgUkVQT1JUIGF0dGFjaGVkIHRvIHRoZSB0aWNrZXQ=</arg>
                <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxubG9nLmRlYnVnIFwiT25TaXRlIFJlcG9ydCBwZXIgaXNzdWU6IFwiICsgaXNzdWUua2V5XG4vKiBSRVNUIEFQSSBwZXIgR2VuZXJhemlvbmUgQWxsZWdhdG8gUmFwcG9ydG8gZGkgSW50ZXJ2ZW50byAqL1xucmVxdWVzdE1ldGhvZCA9IFwiUFVUXCI7XG4vKlNjcmlwdCBWYXJpYWJsZXMqL1xuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0xNDA2MlwiKVxuXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5cbi8qUmltb3ppb25lIGFsbGVnYXRvIHJhcHBvcnRvIGRpIGludGVydmVudG8gYXBwZW5hIGNyZWF0byovXG4vKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG5cbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTtcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcblxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcblxuQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG5kZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG5cbi8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSBcIiBhcm91bmQgdmFsdWUgKi9cbmRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIm9iamVjdFR5cGU9QXR0YWNobWVudCBBTkQgXFxcIlwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuY2F0ZWdvcnlSZWYnXS50b1N0cmluZygpICsgXCJcXFwiLk5hbWUgTElLRSBcXFwiUmFwcG9ydG8gZGkgaW50ZXJ2ZW50b1xcXCIgQU5EIFwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyBcIiE9dHJ1ZSBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleSA9IFwiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIilcIik7IC8vIFNlZSB0aGUgY29tcGxldGUgbGlzdCBvZiBwb3NzaWJsZSBJUUwgb24gdGhlIEluc2lnaHQgUXVlcnkgTGFuZ3VhZ2UgZG9jdW1lbnRhdGlvbiBwYWdlXG4vKiBJZiB0aGlzIGlzIGEgbWFuZGF0b3J5IGZpZWxkIHlvdSBzaG91bGQgYmUgYWJsZSB0byBkbyB0aGlzOiAqL1xubG9nLmRlYnVnIFwiSVFMOiBcIiArIFwib2JqZWN0VHlwZT1BdHRhY2htZW50IEFORCBcXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5jYXRlZ29yeVJlZiddLnRvU3RyaW5nKCkgKyBcIlxcXCIuTmFtZSBMSUtFIFxcXCJSYXBwb3J0byBkaSBpbnRlcnZlbnRvXFxcIiBBTkQgXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSArIFwiIT10cnVlIEFORCBvYmplY3QgSEFWSU5HIGNvbm5lY3RlZFRpY2tldHMoa2V5ID0gXCIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArIFwiKVwiXG5sb2cuZGVidWcgXCJvYmplY3RzOiBcIiArIG9iamVjdHNcbmxvZy5kZWJ1ZyBcInJpc3VsdGF0bzogXCIgKyAob2JqZWN0cyAhPSBudWxsICYmIG9iamVjdHMuc2l6ZT4wKVxuLyohIURhIHJpbXVvdmVyZSBhcHBlbmEgcmlzb2x0aSBpIGJ1ZyEhKi9cbi8vcmV0dXJuIChvYmplY3RzICE9IG51bGwgJiYgb2JqZWN0cy5zaXplIT0wKSAmJiAhaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5wbGFubmVkTWFpbnRlbmFuY2UnXSlcbnBhc3Nlc0NvbmRpdGlvbiA9IChvYmplY3RzICE9IG51bGwgJiYgb2JqZWN0cy5zaXplPjApXG4iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.CustomScriptCondition</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">dcec49d7a2f27ae7f5e1c9874ad28f99eb5fde33</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IGxpbmtlZFRpY2tldHMhPW51bGwgPT4gQ2hlY2sgd2l0aCB1c2VyIHRoZSByZXF1aXJlZCBFbWFpbCBSZWNpcGllbnRz</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5cblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcblxuXG5kZWYgZmllbGRzUmVxdWlyZWQgPSBmYWxzZVxuZGVmIGF1dG9tYXRpY2FsbHlDbG9zZWQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlDbG9zZWQnXS50b1N0cmluZygpKVswXVxuZGVmIHNlbmRNYWlsVG8gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnNlbmRNYWlsVG9MaW5rZWQnXS50b1N0cmluZygpKVswXVxuZGVmIHJlcXVpcmVkRmllbGRzID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgcmVsYXRlc0luSXNzdWVMaW5rPWZhbHNlXG5kZWYgcmVsYXRlc091dElzc3VlTGluaz1mYWxzZVxuXG4vKk9QLTEwMzg6IENoaWVkbyBhbGwndXRlbnRlIHNlIGUgYSBjaGkgdnVvbGUgaW52aWFyZSBsYSBub3RpZmljYSBkZWwgcmFwcG9ydG8gZGkgaW50ZXJ2ZW50byBjaGUgdmVyclx1MDBlMCBnZW5lcmF0by5cbkxvIGNoaWVkbyBzb2xvIHNlIGlsIHRpY2tldCBzdSBjdWkgc3RvIGVzZWd1ZW5kbyBsYSB0cmFuc2F6aW9uZSBub24gXHUwMGU4IHN0YXRvIGNoaXVzbyBpbiBhdXRvbWF0aWNvIGRhbCBzaXN0ZW1hIGUgc29sbyBzZSBub24gZ2xpIGVyYSBnaVx1MDBlMCBzdGF0byBjaGllc3RvIHByaW1hKi9cbmxvZy5kZWJ1ZyBcImlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCk6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKVxubG9nLmRlYnVnIFwiaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKTogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pXG5sb2cuZGVidWcgXCJ0cmFuc2llbnRWYXJzOiBcIiArIHRyYW5zaWVudFZhcnNcbmxvZy5kZWJ1ZyBcImlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUbykudG9TdHJpbmcoKTogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKClcblxuTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG5mb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxJbklzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcbiAgICBcbiAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7XG5cdFx0cmVsYXRlc0luSXNzdWVMaW5rPXRydWVcbiAgICAgICAgbG9nLmRlYnVnIFwiSXNzdWUgY29uIHJlbGF0ZXNJbklzc3VlTGlua1wiXG4gICAgICAgIGJyZWFrXG4gICAgfVxufVxuTGlzdDxJc3N1ZUxpbms+IGFsbE91dElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbmZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbE91dElzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcbiAgICBcbiAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7XG5cdFx0cmVsYXRlc091dElzc3VlTGluaz10cnVlXG4gICAgICAgIGxvZy5kZWJ1ZyBcIklzc3VlIGNvbiByZWxhdGVzT3V0SXNzdWVMaW5rXCJcbiAgICAgICAgYnJlYWtcbiAgICB9XG59XG5cbmxvZy5kZWJ1ZyBpc3N1ZS5rZXkgKyBcIiAocmVsYXRlc0luSXNzdWVMaW5rIHx8IHJlbGF0ZXNPdXRJc3N1ZUxpbmspOiBcIiArIChyZWxhdGVzSW5Jc3N1ZUxpbmsgfHwgcmVsYXRlc091dElzc3VlTGluaylcbmxvZy5kZWJ1ZyBpc3N1ZS5rZXkgKyBcIiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKSBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZClcbmxvZy5kZWJ1ZyBpc3N1ZS5rZXkgKyBcIiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pPT1udWxsIFwiICsgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUbyk9PW51bGwpXG5cbmlmKChyZWxhdGVzSW5Jc3N1ZUxpbmsgfHwgcmVsYXRlc091dElzc3VlTGluaykgLyomJiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKT09bnVsbCB8fCAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKSkqLyAmJiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKT09bnVsbCB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKFwiTm9uZVwiKSkpe1xuXHRmaWVsZHNSZXF1aXJlZCA9IHRydWVcblx0cmVxdWlyZWRGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLnNlbmRNYWlsVG9MaW5rZWQnXS50b1N0cmluZygpKVxufVxuXG5sb2cuZGVidWcgXCJGaWVsZHNSZXF1aXJlZDogXCIgKyBmaWVsZHNSZXF1aXJlZFxuZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuXG5pZihmaWVsZHNSZXF1aXJlZCl7XG5cdGRlZiBmTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgICAgIGlmKHJlcXVpcmVkRmllbGRzLnNpemUoKSA+IDApe1xuICAgICAgICBcdGRlZiBmTGlzdERldGFpbCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGZMaXN0RGV0YWlsLmFkZChcIkZcIilcbiAgICAgICAgICAgICAgICBmTGlzdERldGFpbC5hZGQoXCJVU0VSX0lOUFVUXCIpXG4gICAgICAgICAgICBcdGZMaXN0RGV0YWlsLmFkZChudWxsKVxuICAgICAgICAgICAgICAgIGZMaXN0RGV0YWlsLmFkZChyZXF1aXJlZEZpZWxkcylcbiAgICAgICAgICAgICAgICBmTGlzdC5hZGQoZkxpc3REZXRhaWwpXG4gICAgICAgIH1cblxuICAgICAgICBvdXRwdXQuYWRkKGZMaXN0KVxuICAgIFx0dGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRlwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIkZcIiwgb3V0cHV0LnRvU3RyaW5nKCkpICAgXG59ZWxzZXtcbiAgICByZXR1cm4gdHJ1ZVxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZQppbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb24KaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3IKaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmsKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXIKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsCgpQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpCkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpCnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7Cglwcm9wZXJ0aWVzLmxvYWQoaXQpCn0KZGVmIENhdGVnb3J5IGxvZyA9IENhdGVnb3J5LmdldEluc3RhbmNlKCJjb20ub25yZXNvbHZlLmppcmEuZ3Jvb3Z5LlBvc3RGdW5jdGlvbiIpCmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKQoKSXNzdWUgaXNzdWUgPSBpc3N1ZQoKZGVmIGZpZWxkc1JlcXVpcmVkID0gZmFsc2UKZGVmIGF1dG9tYXRpY2FsbHlDbG9zZWQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlDbG9zZWQnXS50b1N0cmluZygpKVswXQpkZWYgc2VuZE1haWxUbyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yuc2VuZE1haWxUb0xpbmtlZCddLnRvU3RyaW5nKCkpWzBdCmRlZiByZXF1aXJlZEZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKQpkZWYgcmVsYXRlc0luSXNzdWVMaW5rPWZhbHNlCmRlZiByZWxhdGVzT3V0SXNzdWVMaW5rPWZhbHNlCgovKk9QLTEwMzg6IENoaWVkbyBhbGwndXRlbnRlIHNlIGUgYSBjaGkgdnVvbGUgaW52aWFyZSBsYSBub3RpZmljYSBkZWwgcmFwcG9ydG8gZGkgaW50ZXJ2ZW50byBjaGUgdmVycsOgIGdlbmVyYXRvLgpMbyBjaGllZG8gc29sbyBzZSBpbCB0aWNrZXQgc3UgY3VpIHN0byBlc2VndWVuZG8gbGEgdHJhbnNhemlvbmUgbm9uIMOoIHN0YXRvIGNoaXVzbyBpbiBhdXRvbWF0aWNvIGRhbCBzaXN0ZW1hIGUgc29sbyBzZSBub24gZ2xpIGVyYSBnacOgIHN0YXRvIGNoaWVzdG8gcHJpbWEqLwpsb2cuZGVidWcgImlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCk6ICIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpCmxvZy5kZWJ1ZyAiaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKTogIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUbykKbG9nLmRlYnVnICJ0cmFuc2llbnRWYXJzOiAiICsgdHJhbnNpZW50VmFycwpsb2cuZGVidWcgImlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUbykudG9TdHJpbmcoKTogIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUbykudG9TdHJpbmcoKQoKTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpCmZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbEluSXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHsKICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7CiAgICAKICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXsKCQlyZWxhdGVzSW5Jc3N1ZUxpbms9dHJ1ZQogICAgICAgIGxvZy5kZWJ1ZyAiSXNzdWUgY29uIHJlbGF0ZXNJbklzc3VlTGluayIKICAgICAgICBicmVhawogICAgfQp9Ckxpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpCmZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbE91dElzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7CiAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpOwogICAgCiAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7CgkJcmVsYXRlc091dElzc3VlTGluaz10cnVlCiAgICAgICAgbG9nLmRlYnVnICJJc3N1ZSBjb24gcmVsYXRlc091dElzc3VlTGluayIKICAgICAgICBicmVhawogICAgfQp9Cgpsb2cuZGVidWcgaXNzdWUua2V5ICsgIiAocmVsYXRlc0luSXNzdWVMaW5rIHx8IHJlbGF0ZXNPdXRJc3N1ZUxpbmspOiAiICsgKHJlbGF0ZXNJbklzc3VlTGluayB8fCByZWxhdGVzT3V0SXNzdWVMaW5rKQpsb2cuZGVidWcgaXNzdWUua2V5ICsgIiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKSAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKQpsb2cuZGVidWcgaXNzdWUua2V5ICsgIiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pPT1udWxsICIgKyAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKT09bnVsbCkKCmlmKChyZWxhdGVzSW5Jc3N1ZUxpbmsgfHwgcmVsYXRlc091dElzc3VlTGluaykgLyomJiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKT09bnVsbCB8fCAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKS50b1N0cmluZygpLmVxdWFscygiWWVzIikpKi8gJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKT09bnVsbCl7CglmaWVsZHNSZXF1aXJlZCA9IHRydWUKCXJlcXVpcmVkRmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5zZW5kTWFpbFRvTGlua2VkJ10udG9TdHJpbmcoKSkKfQoKbG9nLmRlYnVnICJGaWVsZHNSZXF1aXJlZDogIiArIGZpZWxkc1JlcXVpcmVkCmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KCkKCmlmKGZpZWxkc1JlcXVpcmVkKXsKCWRlZiBmTGlzdCA9IG5ldyBBcnJheUxpc3QoKQoKICAgICAgICBpZihyZXF1aXJlZEZpZWxkcy5zaXplKCkgPiAwKXsKICAgICAgICAJZGVmIGZMaXN0RGV0YWlsID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgICAgICBmTGlzdERldGFpbC5hZGQoIkYiKQogICAgICAgICAgICAgICAgZkxpc3REZXRhaWwuYWRkKCJVU0VSX0lOUFVUIikKICAgICAgICAgICAgCWZMaXN0RGV0YWlsLmFkZChudWxsKQogICAgICAgICAgICAgICAgZkxpc3REZXRhaWwuYWRkKHJlcXVpcmVkRmllbGRzKQogICAgICAgICAgICAgICAgZkxpc3QuYWRkKGZMaXN0RGV0YWlsKQogICAgICAgIH0KCiAgICAgICAgb3V0cHV0LmFkZChmTGlzdCkKICAgIAl0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IkYiOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQogICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiRiIsIG91dHB1dC50b1N0cmluZygpKSAgIAp9ZWxzZXsKICAgIHJldHVybiB0cnVlCn0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">732b852fe810d140fc2df432e5e30b7a3bed81cc</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IFJFU1QgQVBJOiBPUCBFbWFpbCBOb3RpZmljYXRpb246IE9OU0lURV9SRVBPUlQ=</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGlua1xuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuQ2F0ZWdvcnkgbG9nID0gQ2F0ZWdvcnkuZ2V0SW5zdGFuY2UoXCJjb20ub25yZXNvbHZlLmppcmEuZ3Jvb3Z5LlBvc3RGdW5jdGlvblwiKVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuZGVmIHNlbmRNYWlsVG8gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnNlbmRNYWlsVG9MaW5rZWQnXS50b1N0cmluZygpKVswXVxuZGVmIG9uc2l0ZVJlcG9ydERhdGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yud2ZPbnNpdGVSZXBvcnQnXS50b1N0cmluZygpKVswXVxuZGVmIHNlbmRNYWlsVG9SZWMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnNlbmRNYWlsVG9SZWNpcGllbnRzJ10udG9TdHJpbmcoKSlbMF1cblxuZGVmIHJlbGF0ZXNJbklzc3VlTGluaz1mYWxzZVxuZGVmIHJlbGF0ZXNPdXRJc3N1ZUxpbms9ZmFsc2VcbmRlZiBsaW5rZWRUaWNrZXRzPW5ldyBBcnJheUxpc3QoKVxubG9nLmRlYnVnIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUbykudG9TdHJpbmcoKVxuXG5MaXN0PElzc3VlTGluaz4gYWxsSW5Jc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0SW53YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbmZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbEluSXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHtcbiAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgaWYoaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpICE9IG51bGwgJiYgaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkgJiYgaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpLnN0YXR1cy5uYW1lID09IFwiQ29tcGxldGVkIHRvIGJlIENsb3NlZFwiKXtcbiAgICAgICAgcmVsYXRlc0luSXNzdWVMaW5rPXRydWVcbiAgICAgICAgbGlua2VkVGlja2V0cy5hZGQoaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpLnRvU3RyaW5nKCkpXG4gICAgICAgIGxvZy5kZWJ1ZyBcIklzc3VlIGNvbiByZWxhdGVzSW5Jc3N1ZUxpbmtcIlxuICAgIH1cbn1cbkxpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG5mb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG5cbiAgICBpZihpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKSAhPSBudWxsICYmIGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpICYmIGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpLnN0YXR1cy5uYW1lID09IFwiQ29tcGxldGVkIHRvIGJlIENsb3NlZFwiKXtcbiAgICAgICAgcmVsYXRlc091dElzc3VlTGluaz10cnVlXG4gICAgICAgIGxpbmtlZFRpY2tldHMuYWRkKGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpLnRvU3RyaW5nKCkpXG4gICAgICAgIGxvZy5kZWJ1ZyBcIklzc3VlIGNvbiByZWxhdGVzT3V0SXNzdWVMaW5rXCJcbiAgICB9XG59XG5cbmRlZiBib2R5X3JlcSA9IFtdXG5cbmlmKChyZWxhdGVzSW5Jc3N1ZUxpbmsgfHwgcmVsYXRlc091dElzc3VlTGluaykgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUbykudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snY2Yub3B0aW9uLnNlbmRNYWlsVG8ubm9FbWFpbCddLnRvU3RyaW5nKCkpICYmIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUbykudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snY2Yub3B0aW9uLnNlbmRNYWlsVG8uY3VycmVudFJlcG9ydCddLnRvU3RyaW5nKCkpKXtcbiAgICAvL09QLTEwMzg6IGludmlhcmUgc29sbyBsYSBtYWlsIGNvbiBpbCByYXBwb3J0byBkaSBpbnRlcnZlbnRvIGRlbCB0aWNrZXQgY29ycmVudGVcbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJ0ZW1wbGF0ZU5hbWVcIjogcHJvcGVydGllc1sndHQub25TaXRlUmVwb3J0J10udG9TdHJpbmcoKSxcbiAgICAgICAgXCJwZWNcIjogZmFsc2UsXG4gICAgICAgIFwiaXNzdWVLZXlcIjogaXNzdWUua2V5LFxuICAgICAgICBcImFkZGl0aW9uYWxSZWNpcGllbnRzXCI6IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUb1JlYykudG9TdHJpbmcoKVxuICAgIF1cbiAgICBsb2cuZGVidWcgXCJpbjE6IGJvZHlfcmVxOiBcIiArIGJvZHlfcmVxXG59ZWxzZSBpZigocmVsYXRlc0luSXNzdWVMaW5rIHx8IHJlbGF0ZXNPdXRJc3N1ZUxpbmspICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLm5vRW1haWwnXS50b1N0cmluZygpKSAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLmFsbExpbmtlZCddLnRvU3RyaW5nKCkpKXtcbiAgICAvL09QLTEwMzg6IGludmlhcmUgbGEgbWFpbCBjb24gdHV0dGkgaSByYXBwb3J0aSBkaSBpbnRlcnZlbnRvIGRlaSB0aWNrZXQgY29sbGVnYXRpXG4gICAgYm9keV9yZXEgPSBbXG4gICAgICAgIFwidGVtcGxhdGVOYW1lXCI6IHByb3BlcnRpZXNbJ3R0Lm9uU2l0ZVJlcG9ydCddLnRvU3RyaW5nKCksXG4gICAgICAgIFwicGVjXCI6IGZhbHNlLFxuICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleSxcbiAgICAgICAgXCJsaW5rZWRUaWNrZXRzXCI6IGxpbmtlZFRpY2tldHMsXG4gICAgICAgIFwiYWRkaXRpb25hbFJlY2lwaWVudHNcIjogaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvUmVjKS50b1N0cmluZygpXG4gICAgXVxuICAgIGxvZy5kZWJ1ZyBcImluMjogYm9keV9yZXE6IFwiICsgYm9keV9yZXFcbn1lbHNlIGlmKCFyZWxhdGVzSW5Jc3N1ZUxpbmsgJiYgIXJlbGF0ZXNPdXRJc3N1ZUxpbmspe1xuICAgIGJvZHlfcmVxID0gW1xuICAgICAgICBcInRlbXBsYXRlTmFtZVwiOiBwcm9wZXJ0aWVzWyd0dC5vblNpdGVSZXBvcnQnXS50b1N0cmluZygpLFxuICAgICAgICBcInBlY1wiOiBmYWxzZSxcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXG4gICAgICAgIFwiYWRkaXRpb25hbFJlY2lwaWVudHNcIjogaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvUmVjKS50b1N0cmluZygpXG4gICAgXVxuICAgIGxvZy5kZWJ1ZyBcImluMzogYm9keV9yZXE6IFwiICsgYm9keV9yZXFcbn1cblxuLyogUkVTVCBBUEkgcGVyIEludmlvIE5vdGlmaWNhIEVtYWlsIE9OU0lURV9SRVBPUlQgKi9cbnJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcbmxvZy5kZWJ1ZyBcInByZXBhcm8gbGEgY2hpYW1hdGFcIlxuYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1tcImFwaS5lbnZcIl0udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS90cmFuc2FjdGlvbi9tYWlsL3NlbmRcIlxuVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbmNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5jb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG5sb2cuZGVidWcgXCJjb25uZWN0aW9uLm91dHB1dFN0cmVhbTogXCIgKyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuY29ubmVjdGlvbi5jb25uZWN0KCk7XG4vL2xvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbmxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbmxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcblxuZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpICYmICFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjA0XCIpKXtcbiAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgbG9nLmRlYnVnIFwiYm9keV9yZXE6IFwiICsgYm9keV9yZXFcbiAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuXG4gICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxuICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcbiAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcblxuICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICBlTGlzdEVycm9ycy5hZGQoXCJTRU5ETUFJTFwiKVxuICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKSlcbiAgICBlTGlzdEVycm9ycy5hZGQoanNvbl9vYmplY3QubWVzc2FnZSlcbiAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIkVcIiwgb3V0cHV0LnRvU3RyaW5nKCkpXG4gICAgXG59ZWxzZXtcbiAgICAvKkwnZW1haWwgXHUwMGU4IHN0YXRhIGludmlhdGEgY29ycmV0dGFtZW50ZSwgYWdnaW9ybm8gaWwgY2FtcG8gT05TSVRFX1JFUE9SVCBjb24gbGEgZGF0YSBjb3JyZW50ZSovXG5cbiAgICAvLyBsb2cud2FybiBcImlzc3VlIFwiK2lzc3VlLmdldEtleSgpXG4gICAgZGVmIGNmdiA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUob25zaXRlUmVwb3J0RGF0ZSlcbiAgICBpZiAoIWNmdikge1xuICAgICAgICBkZWYgdDAgID0gbmV3IGphdmEuc3FsLlRpbWVzdGFtcChTeXN0ZW0uY3VycmVudFRpbWVNaWxsaXMoKSlcbiAgICAgICAgbG9nLndhcm4gXCJTdGFydFRpbWUgPT4gJ1wiK3QwLnRvU3RyaW5nKCkrXCInXCJcbiAgICAgICAgZGVmIG12ID0gbmV3IE1vZGlmaWVkVmFsdWUob25zaXRlUmVwb3J0RGF0ZSwgdDApXG4gICAgICAgIGRlZiBjaCA9IG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKVxuICAgICAgICBvbnNpdGVSZXBvcnREYXRlLnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBtdiwgY2gpIFxuICAgIH0gZWxzZSB7XG4gICAgICAgIGxvZy53YXJuIFwiU3RhcnRUaW1lID09ICdcIitjZnYudG9TdHJpbmcoKStcIidcIlxuICAgIH1cbn0iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWUKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS51dGlsLkRlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvbgppbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CkNhdGVnb3J5IGxvZyA9IENhdGVnb3J5LmdldEluc3RhbmNlKCJjb20ub25yZXNvbHZlLmppcmEuZ3Jvb3Z5LlBvc3RGdW5jdGlvbiIpCmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKQoKSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpOwpDdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7CmRlZiByZXF1ZXN0TWV0aG9kCmRlZiBiYXNlVVJMCmRlZiBzZW5kTWFpbFRvID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zZW5kTWFpbFRvTGlua2VkJ10udG9TdHJpbmcoKSlbMF0KZGVmIG9uc2l0ZVJlcG9ydERhdGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yud2ZPbnNpdGVSZXBvcnQnXS50b1N0cmluZygpKVswXQpkZWYgc2VuZE1haWxUb1JlYyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yuc2VuZE1haWxUb1JlY2lwaWVudHMnXS50b1N0cmluZygpKVswXQoKZGVmIHJlbGF0ZXNJbklzc3VlTGluaz1mYWxzZQpkZWYgcmVsYXRlc091dElzc3VlTGluaz1mYWxzZQpkZWYgbGlua2VkVGlja2V0cz1uZXcgQXJyYXlMaXN0KCkKbG9nLmRlYnVnIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUbykudG9TdHJpbmcoKQoKTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpCmZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbEluSXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHsKICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7CgogICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpewogICAgICAgIHJlbGF0ZXNJbklzc3VlTGluaz10cnVlCiAgICAgICAgbGlua2VkVGlja2V0cy5hZGQoaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpLnRvU3RyaW5nKCkpCiAgICAgICAgbG9nLmRlYnVnICJJc3N1ZSBjb24gcmVsYXRlc0luSXNzdWVMaW5rIgogICAgfQp9Ckxpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpCmZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbE91dElzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7CiAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpOwoKICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXsKICAgICAgICByZWxhdGVzT3V0SXNzdWVMaW5rPXRydWUKICAgICAgICBsaW5rZWRUaWNrZXRzLmFkZChpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKS50b1N0cmluZygpKQogICAgICAgIGxvZy5kZWJ1ZyAiSXNzdWUgY29uIHJlbGF0ZXNPdXRJc3N1ZUxpbmsiCiAgICB9Cn0KCmRlZiBib2R5X3JlcSA9IFtdCgppZigocmVsYXRlc0luSXNzdWVMaW5rIHx8IHJlbGF0ZXNPdXRJc3N1ZUxpbmspICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLm5vRW1haWwnXS50b1N0cmluZygpKSAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLmN1cnJlbnRSZXBvcnQnXS50b1N0cmluZygpKSl7CiAgICAvL09QLTEwMzg6IGludmlhcmUgc29sbyBsYSBtYWlsIGNvbiBpbCByYXBwb3J0byBkaSBpbnRlcnZlbnRvIGRlbCB0aWNrZXQgY29ycmVudGUKICAgIGJvZHlfcmVxID0gWwogICAgICAgICJ0ZW1wbGF0ZU5hbWUiOiBwcm9wZXJ0aWVzWyd0dC5vblNpdGVSZXBvcnQnXS50b1N0cmluZygpLAogICAgICAgICJwZWMiOiBmYWxzZSwKICAgICAgICAiaXNzdWVLZXkiOiBpc3N1ZS5rZXksCiAgICAgICAgImFkZGl0aW9uYWxSZWNpcGllbnRzIjogaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvUmVjKS50b1N0cmluZygpCiAgICBdCiAgICBsb2cuZGVidWcgImluMTogYm9keV9yZXE6ICIgKyBib2R5X3JlcQp9ZWxzZSBpZigocmVsYXRlc0luSXNzdWVMaW5rIHx8IHJlbGF0ZXNPdXRJc3N1ZUxpbmspICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLm5vRW1haWwnXS50b1N0cmluZygpKSAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLmFsbExpbmtlZCddLnRvU3RyaW5nKCkpKXsKICAgIC8vT1AtMTAzODogaW52aWFyZSBsYSBtYWlsIGNvbiB0dXR0aSBpIHJhcHBvcnRpIGRpIGludGVydmVudG8gZGVpIHRpY2tldCBjb2xsZWdhdGkKICAgIGJvZHlfcmVxID0gWwogICAgICAgICJ0ZW1wbGF0ZU5hbWUiOiBwcm9wZXJ0aWVzWyd0dC5vblNpdGVSZXBvcnQnXS50b1N0cmluZygpLAogICAgICAgICJwZWMiOiBmYWxzZSwKICAgICAgICAiaXNzdWVLZXkiOiBpc3N1ZS5rZXksCiAgICAgICAgImxpbmtlZFRpY2tldHMiOiBsaW5rZWRUaWNrZXRzLAogICAgICAgICJhZGRpdGlvbmFsUmVjaXBpZW50cyI6IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUb1JlYykudG9TdHJpbmcoKQogICAgXQogICAgbG9nLmRlYnVnICJpbjI6IGJvZHlfcmVxOiAiICsgYm9keV9yZXEKfWVsc2UgaWYoIXJlbGF0ZXNJbklzc3VlTGluayAmJiAhcmVsYXRlc091dElzc3VlTGluayl7CiAgICBib2R5X3JlcSA9IFsKICAgICAgICAidGVtcGxhdGVOYW1lIjogcHJvcGVydGllc1sndHQub25TaXRlUmVwb3J0J10udG9TdHJpbmcoKSwKICAgICAgICAicGVjIjogZmFsc2UsCiAgICAgICAgImlzc3VlS2V5IjogaXNzdWUua2V5LAogICAgICAgICJhZGRpdGlvbmFsUmVjaXBpZW50cyI6IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUb1JlYykudG9TdHJpbmcoKQogICAgXQogICAgbG9nLmRlYnVnICJpbjM6IGJvZHlfcmVxOiAiICsgYm9keV9yZXEKfQoKLyogUkVTVCBBUEkgcGVyIEludmlvIE5vdGlmaWNhIEVtYWlsIE9OU0lURV9SRVBPUlQgKi8KcmVxdWVzdE1ldGhvZCA9ICJQT1NUIjsKbG9nLmRlYnVnICJwcmVwYXJvIGxhIGNoaWFtYXRhIgpiYXNlVVJMID0gImh0dHA6Ly8iICsgcHJvcGVydGllc1siYXBpLmVudiJdLnRvU3RyaW5nKCkgKyAiL29wL3Jlc3QvamlyYS9BQS90cmFuc2FjdGlvbi9tYWlsL3NlbmQiClVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpCkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7CmNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLTgiKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoIkFjY2VwdCIsICIqLyoiKTsKY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTsKY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpOwpjb25uZWN0aW9uLm91dHB1dFN0cmVhbQpjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKCJVVEYtOCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfQpsb2cuZGVidWcgImNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtOiAiICsgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0KY29ubmVjdGlvbi5jb25uZWN0KCk7Ci8vbG9nLmRlYnVnICJ1cmw6ICIgKyB1cmwKbG9nLmRlYnVnICJSZXNwb25zZUNvZGU6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkKbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKCmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCmRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKQpkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpCgppZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoIjIwMCIpKXsKICAgIGxvZy5kZWJ1ZyAidXJsOiAiICsgdXJsCiAgICBsb2cuZGVidWcgImJvZHlfcmVxOiAiICsgYm9keV9yZXEKICAgIGxvZy5kZWJ1ZyAiUmVzcG9uc2VDb2RlOiIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpCiAgICBsb2cuZGVidWcgIlJlc3BvbnNlTWVzc2FnZToiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKQoKICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQKICAgIGxvZy5kZWJ1ZyAiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiAiICsgb3V0cHV0TXNnCgogICAgZGVmIGpzb25TbHVycGVyID0gbmV3IEpzb25TbHVycGVyKCkKICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpCiAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIAogICAgbG9nLmRlYnVnICJtZXNzYWdlOiAiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2UKCiAgICBlTGlzdEVycm9ycy5hZGQoIkUiKQogICAgZUxpc3RFcnJvcnMuYWRkKCJTRU5ETUFJTCIpCiAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyAiICIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpKQogICAgZUxpc3RFcnJvcnMuYWRkKGpzb25fb2JqZWN0Lm1lc3NhZ2UpCiAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpCgogICAgb3V0cHV0LmFkZChlTGlzdCkKICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3siRSI6IicgKyBvdXRwdXQudG9TdHJpbmcoKSArICcifScpCiAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oIkUiLCBvdXRwdXQudG9TdHJpbmcoKSkKICAgIAp9ZWxzZXsKICAgIC8qTCdlbWFpbCDDqCBzdGF0YSBpbnZpYXRhIGNvcnJldHRhbWVudGUsIGFnZ2lvcm5vIGlsIGNhbXBvIE9OU0lURV9SRVBPUlQgY29uIGxhIGRhdGEgY29ycmVudGUqLwoKICAgIC8vIGxvZy53YXJuICJpc3N1ZSAiK2lzc3VlLmdldEtleSgpCiAgICBkZWYgY2Z2ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShvbnNpdGVSZXBvcnREYXRlKQogICAgaWYgKCFjZnYpIHsKICAgICAgICBkZWYgdDAgID0gbmV3IGphdmEuc3FsLlRpbWVzdGFtcChTeXN0ZW0uY3VycmVudFRpbWVNaWxsaXMoKSkKICAgICAgICBsb2cud2FybiAiU3RhcnRUaW1lID0+ICciK3QwLnRvU3RyaW5nKCkrIiciCiAgICAgICAgZGVmIG12ID0gbmV3IE1vZGlmaWVkVmFsdWUob25zaXRlUmVwb3J0RGF0ZSwgdDApCiAgICAgICAgZGVmIGNoID0gbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpCiAgICAgICAgb25zaXRlUmVwb3J0RGF0ZS51cGRhdGVWYWx1ZShudWxsLCBpc3N1ZSwgbXYsIGNoKSAKICAgIH0gZWxzZSB7CiAgICAgICAgbG9nLndhcm4gIlN0YXJ0VGltZSA9PSAnIitjZnYudG9TdHJpbmcoKSsiJyIKICAgIH0KfQ==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="6">
              <post-functions>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="append.value"></arg>
                  <arg name="maxAllowed-integerValue">50</arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.value">%%CURRENT_DATETIME%%</arg>
                  <arg name="field.name">customfield_22641</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">8a9e10fb-e319-4826-b753-f83451d46725</arg>
                  <arg name="FIELD_NOTES">YCFgVXBkYXRlIE9OU0lURV9SRVBPUlRfU0VOVF9EQVRFIG9uIGxpbmtlZCBpc3N1ZXM=</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGlua1xuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZVxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5Jc3N1ZUluZGV4aW5nU2VydmljZSBcdGlzc3VlSW5kZXhpbmdTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KElzc3VlSW5kZXhpbmdTZXJ2aWNlKVxuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcbmRlZiBzZW5kTWFpbFRvID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zZW5kTWFpbFRvTGlua2VkJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBvbnNpdGVSZXBvcnREYXRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLndmT25zaXRlUmVwb3J0J10udG9TdHJpbmcoKSlbMF1cbmRlZiBzZW5kTWFpbFRvUmVjID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zZW5kTWFpbFRvUmVjaXBpZW50cyddLnRvU3RyaW5nKCkpWzBdXG5kZWYgc2VkTWFpbERhdGUgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfV0ZfT05TSVRFX1JFUE9SVFwiKVswXVxuZGVmIHJlbGF0ZXNJbklzc3VlTGluaz1mYWxzZVxuZGVmIHJlbGF0ZXNPdXRJc3N1ZUxpbms9ZmFsc2VcbmRlZiBsaW5rZWRUaWNrZXRzPW5ldyBBcnJheUxpc3QoKVxubG9nLmRlYnVnIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUbykudG9TdHJpbmcoKVxuZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXG5kZWYgbWlcblxuTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG5mb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxJbklzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcblxuICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpICYmIGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKS5zdGF0dXMubmFtZSA9PSBcIkNvbXBsZXRlZCB0byBiZSBDbG9zZWRcIil7XG4gICAgICAgIG1pID0gKE11dGFibGVJc3N1ZSkgaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpXG4gICAgICAgIHNlZE1haWxEYXRlLnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKSwgbmV3IE1vZGlmaWVkVmFsdWUoaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VkTWFpbERhdGUpLCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlZE1haWxEYXRlKSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcbiAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xuICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKSlcbiAgICAgICAgXG4gICAgICAgIC8qIFJFU1QgQVBJIHBlciBwdWxpemlhIGNhY2hlIGlzc3VlIGxpbmthdGEgKi9cbiAgICAgICAgcmVxdWVzdE1ldGhvZCA9IFwiR0VUXCI7XG4gICAgICAgIC8qU2NyaXB0IFZhcmlhYmxlcyovXG4gICAgICAgIC8vUGVyIHRlc3QgZGEgY29uc29sZVxuICAgICAgICAvL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTMyNTM1XCIpXG4gICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL2NsZWFyQ2FjaGUvdGlja2V0a2V5L1wiICsgaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpLmtleVxuICAgICAgICBVUkwgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgICAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbn1cbkxpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG5mb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG5cbiAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSAmJiBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKS5zdGF0dXMubmFtZSA9PSBcIkNvbXBsZXRlZCB0byBiZSBDbG9zZWRcIil7XG4gICAgICAgIG1pID0gKE11dGFibGVJc3N1ZSkgaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KClcbiAgICAgICAgc2VkTWFpbERhdGUudXBkYXRlVmFsdWUobnVsbCwgaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCksIG5ldyBNb2RpZmllZFZhbHVlKGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VkTWFpbERhdGUpLCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlZE1haWxEYXRlKSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcbiAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xuICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpKVxuICAgICAgICBcbiAgICAgICAgLyogUkVTVCBBUEkgcGVyIHB1bGl6aWEgY2FjaGUgaXNzdWUgbGlua2F0YSAqL1xuICAgICAgICByZXF1ZXN0TWV0aG9kID0gXCJHRVRcIjtcbiAgICAgICAgLypTY3JpcHQgVmFyaWFibGVzKi9cbiAgICAgICAgLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4gICAgICAgIC8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMzI1MzVcIilcbiAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vY2xlYXJDYWNoZS90aWNrZXRrZXkvXCIgKyBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKS5rZXlcbiAgICAgICAgVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICAgICAgSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgfVxuICAgIH1cbn0iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_22666</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="511" name="Clona Tkt" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">20401</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">c659704c-9678-4844-9a05-6f3497e391e7</arg>
                <arg name="FIELD_NOTES">YCFgRW5hYmxlZCBvbmx5IGZvciBSZXBhaXIgYW5kIE5ldyBJbnN0YWxsYXRpb24=</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnTWFpbnRlbmFuY2UgVGlja2V0JyB8fCAoaXNzdWUuaXNzdWVUeXBlLm5hbWUgPT0gJ05ldyBJbnN0YWxsYXRpb24nICYmIGNmVmFsdWVzWydPUF9BU1NFVCddICE9IG51bGwpIiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="6">
              <post-functions>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="fieldValue">New Installation</arg>
                  <arg name="preconditionMode-textValue">DISCARD</arg>
                  <arg name="fieldsList">issuetype</arg>
                </function>
                <function type="class">
                  <arg name="field.existingAttachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="targetIssueTypeDefinedByCfSelection"></arg>
                  <arg name="issueTypeId">12301</arg>
                  <arg name="scopeType">ISSUE_LINKING</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="field.attachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="targetIssueType">SELECTED_ISSUE_TYPE</arg>
                  <arg name="scopeSource-jql"></arg>
                  <arg name="createIssueAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.copyTransitionComment">false</arg>
                  <arg name="targetProjectType">SAME</arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="transitionAttachmentsOperation">copy</arg>
                  <arg name="field.issueAssignTo">ASSIGN_TO_UNASSIGNED</arg>
                  <arg name="targetProjectSelectedCustomField"></arg>
                  <arg name="destination-scopeTarget">LINK_END</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiescreatelinkedissue-function</arg>
                  <arg name="scopeDestination-linkEnd">10003:OUTWARD</arg>
                  <arg name="field.enablingCustomFieldId"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="subFunctions">[{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_21909&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21909&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22600&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22600&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22822&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22822&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22601&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22601&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22603&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22603&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22663&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22663&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22634&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22634&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22651&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22651&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22700&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22700&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22606&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22606&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22607&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22607&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22629&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22629&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22652&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22652&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;description&quot;,&quot;destinationFieldId&quot;:&quot;description&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22627&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22627&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22620&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22620&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22668&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22668&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23602&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23203&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22814&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22814&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23237&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23237&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;issuekey&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23243&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;YES&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23238&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22702&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22702&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22703&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22703&quot;}}]</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.createlinkedissue.CreateLinkedIssueFunction</arg>
                  <arg name="projectId">11228</arg>
                </function>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="fieldValue">Maintenance Ticket</arg>
                  <arg name="preconditionMode-textValue">DISCARD</arg>
                  <arg name="fieldsList">issuetype</arg>
                </function>
                <function type="class">
                  <arg name="field.existingAttachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="targetIssueTypeDefinedByCfSelection"></arg>
                  <arg name="issueTypeId">13001</arg>
                  <arg name="scopeType">ISSUE_LINKING</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="field.attachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="targetIssueType">SELECTED_ISSUE_TYPE</arg>
                  <arg name="scopeSource-jql"></arg>
                  <arg name="createIssueAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.copyTransitionComment">false</arg>
                  <arg name="targetProjectType">SAME</arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="transitionAttachmentsOperation">copy</arg>
                  <arg name="field.issueAssignTo">ASSIGN_TO_UNASSIGNED</arg>
                  <arg name="targetProjectSelectedCustomField"></arg>
                  <arg name="destination-scopeTarget">LINK_END</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiescreatelinkedissue-function</arg>
                  <arg name="scopeDestination-linkEnd">10003:OUTWARD</arg>
                  <arg name="field.enablingCustomFieldId"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="subFunctions">[{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_21909&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21909&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22600&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22600&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22822&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22822&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22601&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22601&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22603&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22603&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22663&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22663&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22634&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22634&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22651&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22651&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22700&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22700&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22606&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22606&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22607&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22607&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22629&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22629&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22652&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22652&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;description&quot;,&quot;destinationFieldId&quot;:&quot;description&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22627&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22627&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22620&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22620&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22668&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22668&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23602&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23203&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22814&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22814&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23237&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23237&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;issuekey&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23243&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;YES&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23238&quot;}}]</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.createlinkedissue.CreateLinkedIssueFunction</arg>
                  <arg name="projectId">11228</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_23602</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="611" name="Re-Invia Mail Rapporto di Intervento" view="fieldscreen">
          <meta name="opsbar-sequence">20</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">19912</meta>
          <restrict-to>
            <conditions type="AND">
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">a427f3dd-5525-41b0-a491-11f378238361</arg>
                <arg name="FIELD_NOTES">YCFgT1A6IElmIHN0YXR1cz1DT01QTEVURUQgVE8gQkUgQ0xPU0VEICYmIE9OU0lURV9SRVBPUlQgPSBudWxsIC0gTm90aWZpY2F0aW9uIGhhcyBub3QgYmVlbiBzZW50</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5cblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5jZlZhbHVlc1twcm9wZXJ0aWVzWydjZi53Zk9uc2l0ZVJlcG9ydCddXSAhPSBudWxsIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE">AAS-15446</arg>
              </condition>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">22690743-3ae3-441a-b99c-dca209b6a789</arg>
                <arg name="FIELD_NOTES">YCFgTWFpbnRlbmFuY2UgVGlja2V0IE9SIFBNIFRpY2tldA==</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnTWFpbnRlbmFuY2UgVGlja2V0JyB8fCBpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXQnIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">dcec49d7a2f27ae7f5e1c9874ad28f99eb5fde33</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IGxpbmtlZFRpY2tldHMhPW51bGwgPT4gQ2hlY2sgd2l0aCB1c2VyIHRoZSByZXF1aXJlZCBFbWFpbCBSZWNpcGllbnRz</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5cblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcblxuZGVmIGZpZWxkc1JlcXVpcmVkID0gZmFsc2VcbmRlZiBhdXRvbWF0aWNhbGx5Q2xvc2VkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q2xvc2VkJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBzZW5kTWFpbFRvID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zZW5kTWFpbFRvTGlua2VkJ10udG9TdHJpbmcoKSlbMF1cbmRlZiByZXF1aXJlZEZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIHJlbGF0ZXNJbklzc3VlTGluaz1mYWxzZVxuZGVmIHJlbGF0ZXNPdXRJc3N1ZUxpbms9ZmFsc2VcblxuLypPUC0xMDM4OiBDaGllZG8gYWxsJ3V0ZW50ZSBzZSBlIGEgY2hpIHZ1b2xlIGludmlhcmUgbGEgbm90aWZpY2EgZGVsIHJhcHBvcnRvIGRpIGludGVydmVudG8gY2hlIHZlcnJcdTAwZTAgZ2VuZXJhdG8uXG5MbyBjaGllZG8gc29sbyBzZSBpbCB0aWNrZXQgc3UgY3VpIHN0byBlc2VndWVuZG8gbGEgdHJhbnNhemlvbmUgbm9uIFx1MDBlOCBzdGF0byBjaGl1c28gaW4gYXV0b21hdGljbyBkYWwgc2lzdGVtYSBlIHNvbG8gc2Ugbm9uIGdsaSBlcmEgZ2lcdTAwZTAgc3RhdG8gY2hpZXN0byBwcmltYSovXG5sb2cuZGVidWcgXCJpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpOiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZClcbmxvZy5kZWJ1ZyBcImlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUbyk6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKVxubG9nLmRlYnVnIFwidHJhbnNpZW50VmFyczogXCIgKyB0cmFuc2llbnRWYXJzXG5sb2cuZGVidWcgXCJpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCk6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKS50b1N0cmluZygpXG5cbkxpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKVxuZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG4gICAgXG4gICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpe1xuXHRcdHJlbGF0ZXNJbklzc3VlTGluaz10cnVlXG4gICAgICAgIGxvZy5kZWJ1ZyBcIklzc3VlIGNvbiByZWxhdGVzSW5Jc3N1ZUxpbmtcIlxuICAgICAgICBicmVha1xuICAgIH1cbn1cbkxpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG5mb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG4gICAgXG4gICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpe1xuXHRcdHJlbGF0ZXNPdXRJc3N1ZUxpbms9dHJ1ZVxuICAgICAgICBsb2cuZGVidWcgXCJJc3N1ZSBjb24gcmVsYXRlc091dElzc3VlTGlua1wiXG4gICAgICAgIGJyZWFrXG4gICAgfVxufVxuXG5sb2cuZGVidWcgaXNzdWUua2V5ICsgXCIgKHJlbGF0ZXNJbklzc3VlTGluayB8fCByZWxhdGVzT3V0SXNzdWVMaW5rKTogXCIgKyAocmVsYXRlc0luSXNzdWVMaW5rIHx8IHJlbGF0ZXNPdXRJc3N1ZUxpbmspXG5sb2cuZGVidWcgaXNzdWUua2V5ICsgXCIgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkgXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpXG5sb2cuZGVidWcgaXNzdWUua2V5ICsgXCIgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKT09bnVsbCBcIiArIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pPT1udWxsKVxuXG5pZigocmVsYXRlc0luSXNzdWVMaW5rIHx8IHJlbGF0ZXNPdXRJc3N1ZUxpbmspIC8qJiYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCk9PW51bGwgfHwgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIikpKi8gJiYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUbyk9PW51bGwgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKS50b1N0cmluZygpLmVxdWFscyhcIk5vbmVcIikpKXtcblx0ZmllbGRzUmVxdWlyZWQgPSB0cnVlXG5cdHJlcXVpcmVkRmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5zZW5kTWFpbFRvTGlua2VkJ10udG9TdHJpbmcoKSlcbn1cblxubG9nLmRlYnVnIFwiRmllbGRzUmVxdWlyZWQ6IFwiICsgZmllbGRzUmVxdWlyZWRcbmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcblxuaWYoZmllbGRzUmVxdWlyZWQpe1xuXHRkZWYgZkxpc3QgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgICAgICBpZihyZXF1aXJlZEZpZWxkcy5zaXplKCkgPiAwKXtcbiAgICAgICAgXHRkZWYgZkxpc3REZXRhaWwgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBmTGlzdERldGFpbC5hZGQoXCJGXCIpXG4gICAgICAgICAgICAgICAgZkxpc3REZXRhaWwuYWRkKFwiVVNFUl9JTlBVVFwiKVxuICAgICAgICAgICAgXHRmTGlzdERldGFpbC5hZGQobnVsbClcbiAgICAgICAgICAgICAgICBmTGlzdERldGFpbC5hZGQocmVxdWlyZWRGaWVsZHMpXG4gICAgICAgICAgICAgICAgZkxpc3QuYWRkKGZMaXN0RGV0YWlsKVxuICAgICAgICB9XG5cbiAgICAgICAgb3V0cHV0LmFkZChmTGlzdClcbiAgICBcdHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkZcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJGXCIsIG91dHB1dC50b1N0cmluZygpKSAgIFxufWVsc2V7XG4gICAgcmV0dXJuIHRydWVcbn0iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZQppbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb24KaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3IKaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmsKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXIKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsCgpQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpCkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpCnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7Cglwcm9wZXJ0aWVzLmxvYWQoaXQpCn0KZGVmIENhdGVnb3J5IGxvZyA9IENhdGVnb3J5LmdldEluc3RhbmNlKCJjb20ub25yZXNvbHZlLmppcmEuZ3Jvb3Z5LlBvc3RGdW5jdGlvbiIpCmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKQoKSXNzdWUgaXNzdWUgPSBpc3N1ZQoKZGVmIGZpZWxkc1JlcXVpcmVkID0gZmFsc2UKZGVmIGF1dG9tYXRpY2FsbHlDbG9zZWQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlDbG9zZWQnXS50b1N0cmluZygpKVswXQpkZWYgc2VuZE1haWxUbyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yuc2VuZE1haWxUb0xpbmtlZCddLnRvU3RyaW5nKCkpWzBdCmRlZiByZXF1aXJlZEZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKQpkZWYgcmVsYXRlc0luSXNzdWVMaW5rPWZhbHNlCmRlZiByZWxhdGVzT3V0SXNzdWVMaW5rPWZhbHNlCgovKk9QLTEwMzg6IENoaWVkbyBhbGwndXRlbnRlIHNlIGUgYSBjaGkgdnVvbGUgaW52aWFyZSBsYSBub3RpZmljYSBkZWwgcmFwcG9ydG8gZGkgaW50ZXJ2ZW50byBjaGUgdmVycsOgIGdlbmVyYXRvLgpMbyBjaGllZG8gc29sbyBzZSBpbCB0aWNrZXQgc3UgY3VpIHN0byBlc2VndWVuZG8gbGEgdHJhbnNhemlvbmUgbm9uIMOoIHN0YXRvIGNoaXVzbyBpbiBhdXRvbWF0aWNvIGRhbCBzaXN0ZW1hIGUgc29sbyBzZSBub24gZ2xpIGVyYSBnacOgIHN0YXRvIGNoaWVzdG8gcHJpbWEqLwpsb2cuZGVidWcgImlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCk6ICIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpCmxvZy5kZWJ1ZyAiaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKTogIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUbykKbG9nLmRlYnVnICJ0cmFuc2llbnRWYXJzOiAiICsgdHJhbnNpZW50VmFycwpsb2cuZGVidWcgImlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUbykudG9TdHJpbmcoKTogIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUbykudG9TdHJpbmcoKQoKTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpCmZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbEluSXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHsKICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7CiAgICAKICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXsKCQlyZWxhdGVzSW5Jc3N1ZUxpbms9dHJ1ZQogICAgICAgIGxvZy5kZWJ1ZyAiSXNzdWUgY29uIHJlbGF0ZXNJbklzc3VlTGluayIKICAgICAgICBicmVhawogICAgfQp9Ckxpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpCmZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbE91dElzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7CiAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpOwogICAgCiAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7CgkJcmVsYXRlc091dElzc3VlTGluaz10cnVlCiAgICAgICAgbG9nLmRlYnVnICJJc3N1ZSBjb24gcmVsYXRlc091dElzc3VlTGluayIKICAgICAgICBicmVhawogICAgfQp9Cgpsb2cuZGVidWcgaXNzdWUua2V5ICsgIiAocmVsYXRlc0luSXNzdWVMaW5rIHx8IHJlbGF0ZXNPdXRJc3N1ZUxpbmspOiAiICsgKHJlbGF0ZXNJbklzc3VlTGluayB8fCByZWxhdGVzT3V0SXNzdWVMaW5rKQpsb2cuZGVidWcgaXNzdWUua2V5ICsgIiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKSAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKQpsb2cuZGVidWcgaXNzdWUua2V5ICsgIiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pPT1udWxsICIgKyAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKT09bnVsbCkKCmlmKChyZWxhdGVzSW5Jc3N1ZUxpbmsgfHwgcmVsYXRlc091dElzc3VlTGluaykgLyomJiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKT09bnVsbCB8fCAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKS50b1N0cmluZygpLmVxdWFscygiWWVzIikpKi8gJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKT09bnVsbCl7CglmaWVsZHNSZXF1aXJlZCA9IHRydWUKCXJlcXVpcmVkRmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5zZW5kTWFpbFRvTGlua2VkJ10udG9TdHJpbmcoKSkKfQoKbG9nLmRlYnVnICJGaWVsZHNSZXF1aXJlZDogIiArIGZpZWxkc1JlcXVpcmVkCmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KCkKCmlmKGZpZWxkc1JlcXVpcmVkKXsKCWRlZiBmTGlzdCA9IG5ldyBBcnJheUxpc3QoKQoKICAgICAgICBpZihyZXF1aXJlZEZpZWxkcy5zaXplKCkgPiAwKXsKICAgICAgICAJZGVmIGZMaXN0RGV0YWlsID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgICAgICBmTGlzdERldGFpbC5hZGQoIkYiKQogICAgICAgICAgICAgICAgZkxpc3REZXRhaWwuYWRkKCJVU0VSX0lOUFVUIikKICAgICAgICAgICAgCWZMaXN0RGV0YWlsLmFkZChudWxsKQogICAgICAgICAgICAgICAgZkxpc3REZXRhaWwuYWRkKHJlcXVpcmVkRmllbGRzKQogICAgICAgICAgICAgICAgZkxpc3QuYWRkKGZMaXN0RGV0YWlsKQogICAgICAgIH0KCiAgICAgICAgb3V0cHV0LmFkZChmTGlzdCkKICAgIAl0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IkYiOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQogICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiRiIsIG91dHB1dC50b1N0cmluZygpKSAgIAp9ZWxzZXsKICAgIHJldHVybiB0cnVlCn0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">732b852fe810d140fc2df432e5e30b7a3bed81cc</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IFJFU1QgQVBJOiBPUCBFbWFpbCBOb3RpZmljYXRpb246IE9OU0lURV9SRVBPUlQ=</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGlua1xuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuQ2F0ZWdvcnkgbG9nID0gQ2F0ZWdvcnkuZ2V0SW5zdGFuY2UoXCJjb20ub25yZXNvbHZlLmppcmEuZ3Jvb3Z5LlBvc3RGdW5jdGlvblwiKVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuZGVmIHNlbmRNYWlsVG8gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnNlbmRNYWlsVG9MaW5rZWQnXS50b1N0cmluZygpKVswXVxuZGVmIG9uc2l0ZVJlcG9ydERhdGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yud2ZPbnNpdGVSZXBvcnQnXS50b1N0cmluZygpKVswXVxuZGVmIHNlbmRNYWlsVG9SZWMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnNlbmRNYWlsVG9SZWNpcGllbnRzJ10udG9TdHJpbmcoKSlbMF1cblxuZGVmIHJlbGF0ZXNJbklzc3VlTGluaz1mYWxzZVxuZGVmIHJlbGF0ZXNPdXRJc3N1ZUxpbms9ZmFsc2VcbmRlZiBsaW5rZWRUaWNrZXRzPW5ldyBBcnJheUxpc3QoKVxubG9nLmRlYnVnIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUbykudG9TdHJpbmcoKVxuXG5MaXN0PElzc3VlTGluaz4gYWxsSW5Jc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0SW53YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbmZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbEluSXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHtcbiAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgaWYoaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpICE9IG51bGwgJiYgaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkgJiYgaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpLnN0YXR1cy5uYW1lID09IFwiQ29tcGxldGVkIHRvIGJlIENsb3NlZFwiKXtcbiAgICAgICAgcmVsYXRlc0luSXNzdWVMaW5rPXRydWVcbiAgICAgICAgbGlua2VkVGlja2V0cy5hZGQoaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpLnRvU3RyaW5nKCkpXG4gICAgICAgIGxvZy5kZWJ1ZyBcIklzc3VlIGNvbiByZWxhdGVzSW5Jc3N1ZUxpbmtcIlxuICAgIH1cbn1cbkxpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG5mb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG5cbiAgICBpZihpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKSAhPSBudWxsICYmIGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpICYmIGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpLnN0YXR1cy5uYW1lID09IFwiQ29tcGxldGVkIHRvIGJlIENsb3NlZFwiKXtcbiAgICAgICAgcmVsYXRlc091dElzc3VlTGluaz10cnVlXG4gICAgICAgIGxpbmtlZFRpY2tldHMuYWRkKGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpLnRvU3RyaW5nKCkpXG4gICAgICAgIGxvZy5kZWJ1ZyBcIklzc3VlIGNvbiByZWxhdGVzT3V0SXNzdWVMaW5rXCJcbiAgICB9XG59XG5cbmRlZiBib2R5X3JlcSA9IFtdXG5cbmlmKChyZWxhdGVzSW5Jc3N1ZUxpbmsgfHwgcmVsYXRlc091dElzc3VlTGluaykgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUbykudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snY2Yub3B0aW9uLnNlbmRNYWlsVG8ubm9FbWFpbCddLnRvU3RyaW5nKCkpICYmIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUbykudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snY2Yub3B0aW9uLnNlbmRNYWlsVG8uY3VycmVudFJlcG9ydCddLnRvU3RyaW5nKCkpKXtcbiAgICAvL09QLTEwMzg6IGludmlhcmUgc29sbyBsYSBtYWlsIGNvbiBpbCByYXBwb3J0byBkaSBpbnRlcnZlbnRvIGRlbCB0aWNrZXQgY29ycmVudGVcbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJ0ZW1wbGF0ZU5hbWVcIjogcHJvcGVydGllc1sndHQub25TaXRlUmVwb3J0J10udG9TdHJpbmcoKSxcbiAgICAgICAgXCJwZWNcIjogZmFsc2UsXG4gICAgICAgIFwiaXNzdWVLZXlcIjogaXNzdWUua2V5LFxuICAgICAgICBcImFkZGl0aW9uYWxSZWNpcGllbnRzXCI6IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUb1JlYykudG9TdHJpbmcoKVxuICAgIF1cbiAgICBsb2cuZGVidWcgXCJpbjE6IGJvZHlfcmVxOiBcIiArIGJvZHlfcmVxXG59ZWxzZSBpZigocmVsYXRlc0luSXNzdWVMaW5rIHx8IHJlbGF0ZXNPdXRJc3N1ZUxpbmspICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLm5vRW1haWwnXS50b1N0cmluZygpKSAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLmFsbExpbmtlZCddLnRvU3RyaW5nKCkpKXtcbiAgICAvL09QLTEwMzg6IGludmlhcmUgbGEgbWFpbCBjb24gdHV0dGkgaSByYXBwb3J0aSBkaSBpbnRlcnZlbnRvIGRlaSB0aWNrZXQgY29sbGVnYXRpXG4gICAgYm9keV9yZXEgPSBbXG4gICAgICAgIFwidGVtcGxhdGVOYW1lXCI6IHByb3BlcnRpZXNbJ3R0Lm9uU2l0ZVJlcG9ydCddLnRvU3RyaW5nKCksXG4gICAgICAgIFwicGVjXCI6IGZhbHNlLFxuICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleSxcbiAgICAgICAgXCJsaW5rZWRUaWNrZXRzXCI6IGxpbmtlZFRpY2tldHMsXG4gICAgICAgIFwiYWRkaXRpb25hbFJlY2lwaWVudHNcIjogaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvUmVjKS50b1N0cmluZygpXG4gICAgXVxuICAgIGxvZy5kZWJ1ZyBcImluMjogYm9keV9yZXE6IFwiICsgYm9keV9yZXFcbn1lbHNlIGlmKCFyZWxhdGVzSW5Jc3N1ZUxpbmsgJiYgIXJlbGF0ZXNPdXRJc3N1ZUxpbmspe1xuICAgIGJvZHlfcmVxID0gW1xuICAgICAgICBcInRlbXBsYXRlTmFtZVwiOiBwcm9wZXJ0aWVzWyd0dC5vblNpdGVSZXBvcnQnXS50b1N0cmluZygpLFxuICAgICAgICBcInBlY1wiOiBmYWxzZSxcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXG4gICAgICAgIFwiYWRkaXRpb25hbFJlY2lwaWVudHNcIjogaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvUmVjKS50b1N0cmluZygpXG4gICAgXVxuICAgIGxvZy5kZWJ1ZyBcImluMzogYm9keV9yZXE6IFwiICsgYm9keV9yZXFcbn1cblxuLyogUkVTVCBBUEkgcGVyIEludmlvIE5vdGlmaWNhIEVtYWlsIE9OU0lURV9SRVBPUlQgKi9cbnJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcbmxvZy5kZWJ1ZyBcInByZXBhcm8gbGEgY2hpYW1hdGFcIlxuYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1tcImFwaS5lbnZcIl0udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS90cmFuc2FjdGlvbi9tYWlsL3NlbmRcIlxuVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbmNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5jb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG5sb2cuZGVidWcgXCJjb25uZWN0aW9uLm91dHB1dFN0cmVhbTogXCIgKyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuY29ubmVjdGlvbi5jb25uZWN0KCk7XG4vL2xvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbmxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbmxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcblxuZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpICYmICFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjA0XCIpKXtcbiAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgbG9nLmRlYnVnIFwiYm9keV9yZXE6IFwiICsgYm9keV9yZXFcbiAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuXG4gICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxuICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcbiAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcblxuICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICBlTGlzdEVycm9ycy5hZGQoXCJTRU5ETUFJTFwiKVxuICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKSlcbiAgICBlTGlzdEVycm9ycy5hZGQoanNvbl9vYmplY3QubWVzc2FnZSlcbiAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIkVcIiwgb3V0cHV0LnRvU3RyaW5nKCkpXG4gICAgXG59ZWxzZXtcbiAgICAvKkwnZW1haWwgXHUwMGU4IHN0YXRhIGludmlhdGEgY29ycmV0dGFtZW50ZSwgYWdnaW9ybm8gaWwgY2FtcG8gT05TSVRFX1JFUE9SVCBjb24gbGEgZGF0YSBjb3JyZW50ZSovXG5cbiAgICAvLyBsb2cud2FybiBcImlzc3VlIFwiK2lzc3VlLmdldEtleSgpXG4gICAgZGVmIGNmdiA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUob25zaXRlUmVwb3J0RGF0ZSlcbiAgICBpZiAoIWNmdikge1xuICAgICAgICBkZWYgdDAgID0gbmV3IGphdmEuc3FsLlRpbWVzdGFtcChTeXN0ZW0uY3VycmVudFRpbWVNaWxsaXMoKSlcbiAgICAgICAgbG9nLndhcm4gXCJTdGFydFRpbWUgPT4gJ1wiK3QwLnRvU3RyaW5nKCkrXCInXCJcbiAgICAgICAgZGVmIG12ID0gbmV3IE1vZGlmaWVkVmFsdWUob25zaXRlUmVwb3J0RGF0ZSwgdDApXG4gICAgICAgIGRlZiBjaCA9IG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKVxuICAgICAgICBvbnNpdGVSZXBvcnREYXRlLnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBtdiwgY2gpIFxuICAgIH0gZWxzZSB7XG4gICAgICAgIGxvZy53YXJuIFwiU3RhcnRUaW1lID09ICdcIitjZnYudG9TdHJpbmcoKStcIidcIlxuICAgIH1cbn0iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWUKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS51dGlsLkRlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvbgppbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CkNhdGVnb3J5IGxvZyA9IENhdGVnb3J5LmdldEluc3RhbmNlKCJjb20ub25yZXNvbHZlLmppcmEuZ3Jvb3Z5LlBvc3RGdW5jdGlvbiIpCmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKQoKSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpOwpDdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7CmRlZiByZXF1ZXN0TWV0aG9kCmRlZiBiYXNlVVJMCmRlZiBzZW5kTWFpbFRvID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zZW5kTWFpbFRvTGlua2VkJ10udG9TdHJpbmcoKSlbMF0KZGVmIG9uc2l0ZVJlcG9ydERhdGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yud2ZPbnNpdGVSZXBvcnQnXS50b1N0cmluZygpKVswXQpkZWYgc2VuZE1haWxUb1JlYyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yuc2VuZE1haWxUb1JlY2lwaWVudHMnXS50b1N0cmluZygpKVswXQoKZGVmIHJlbGF0ZXNJbklzc3VlTGluaz1mYWxzZQpkZWYgcmVsYXRlc091dElzc3VlTGluaz1mYWxzZQpkZWYgbGlua2VkVGlja2V0cz1uZXcgQXJyYXlMaXN0KCkKbG9nLmRlYnVnIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUbykudG9TdHJpbmcoKQoKTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpCmZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbEluSXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHsKICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7CgogICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpewogICAgICAgIHJlbGF0ZXNJbklzc3VlTGluaz10cnVlCiAgICAgICAgbGlua2VkVGlja2V0cy5hZGQoaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpLnRvU3RyaW5nKCkpCiAgICAgICAgbG9nLmRlYnVnICJJc3N1ZSBjb24gcmVsYXRlc0luSXNzdWVMaW5rIgogICAgfQp9Ckxpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpCmZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbE91dElzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7CiAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpOwoKICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXsKICAgICAgICByZWxhdGVzT3V0SXNzdWVMaW5rPXRydWUKICAgICAgICBsaW5rZWRUaWNrZXRzLmFkZChpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKS50b1N0cmluZygpKQogICAgICAgIGxvZy5kZWJ1ZyAiSXNzdWUgY29uIHJlbGF0ZXNPdXRJc3N1ZUxpbmsiCiAgICB9Cn0KCmRlZiBib2R5X3JlcSA9IFtdCgppZigocmVsYXRlc0luSXNzdWVMaW5rIHx8IHJlbGF0ZXNPdXRJc3N1ZUxpbmspICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLm5vRW1haWwnXS50b1N0cmluZygpKSAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLmN1cnJlbnRSZXBvcnQnXS50b1N0cmluZygpKSl7CiAgICAvL09QLTEwMzg6IGludmlhcmUgc29sbyBsYSBtYWlsIGNvbiBpbCByYXBwb3J0byBkaSBpbnRlcnZlbnRvIGRlbCB0aWNrZXQgY29ycmVudGUKICAgIGJvZHlfcmVxID0gWwogICAgICAgICJ0ZW1wbGF0ZU5hbWUiOiBwcm9wZXJ0aWVzWyd0dC5vblNpdGVSZXBvcnQnXS50b1N0cmluZygpLAogICAgICAgICJwZWMiOiBmYWxzZSwKICAgICAgICAiaXNzdWVLZXkiOiBpc3N1ZS5rZXksCiAgICAgICAgImFkZGl0aW9uYWxSZWNpcGllbnRzIjogaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvUmVjKS50b1N0cmluZygpCiAgICBdCiAgICBsb2cuZGVidWcgImluMTogYm9keV9yZXE6ICIgKyBib2R5X3JlcQp9ZWxzZSBpZigocmVsYXRlc0luSXNzdWVMaW5rIHx8IHJlbGF0ZXNPdXRJc3N1ZUxpbmspICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLm5vRW1haWwnXS50b1N0cmluZygpKSAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLmFsbExpbmtlZCddLnRvU3RyaW5nKCkpKXsKICAgIC8vT1AtMTAzODogaW52aWFyZSBsYSBtYWlsIGNvbiB0dXR0aSBpIHJhcHBvcnRpIGRpIGludGVydmVudG8gZGVpIHRpY2tldCBjb2xsZWdhdGkKICAgIGJvZHlfcmVxID0gWwogICAgICAgICJ0ZW1wbGF0ZU5hbWUiOiBwcm9wZXJ0aWVzWyd0dC5vblNpdGVSZXBvcnQnXS50b1N0cmluZygpLAogICAgICAgICJwZWMiOiBmYWxzZSwKICAgICAgICAiaXNzdWVLZXkiOiBpc3N1ZS5rZXksCiAgICAgICAgImxpbmtlZFRpY2tldHMiOiBsaW5rZWRUaWNrZXRzLAogICAgICAgICJhZGRpdGlvbmFsUmVjaXBpZW50cyI6IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUb1JlYykudG9TdHJpbmcoKQogICAgXQogICAgbG9nLmRlYnVnICJpbjI6IGJvZHlfcmVxOiAiICsgYm9keV9yZXEKfWVsc2UgaWYoIXJlbGF0ZXNJbklzc3VlTGluayAmJiAhcmVsYXRlc091dElzc3VlTGluayl7CiAgICBib2R5X3JlcSA9IFsKICAgICAgICAidGVtcGxhdGVOYW1lIjogcHJvcGVydGllc1sndHQub25TaXRlUmVwb3J0J10udG9TdHJpbmcoKSwKICAgICAgICAicGVjIjogZmFsc2UsCiAgICAgICAgImlzc3VlS2V5IjogaXNzdWUua2V5LAogICAgICAgICJhZGRpdGlvbmFsUmVjaXBpZW50cyI6IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUb1JlYykudG9TdHJpbmcoKQogICAgXQogICAgbG9nLmRlYnVnICJpbjM6IGJvZHlfcmVxOiAiICsgYm9keV9yZXEKfQoKLyogUkVTVCBBUEkgcGVyIEludmlvIE5vdGlmaWNhIEVtYWlsIE9OU0lURV9SRVBPUlQgKi8KcmVxdWVzdE1ldGhvZCA9ICJQT1NUIjsKbG9nLmRlYnVnICJwcmVwYXJvIGxhIGNoaWFtYXRhIgpiYXNlVVJMID0gImh0dHA6Ly8iICsgcHJvcGVydGllc1siYXBpLmVudiJdLnRvU3RyaW5nKCkgKyAiL29wL3Jlc3QvamlyYS9BQS90cmFuc2FjdGlvbi9tYWlsL3NlbmQiClVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpCkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7CmNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLTgiKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoIkFjY2VwdCIsICIqLyoiKTsKY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTsKY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpOwpjb25uZWN0aW9uLm91dHB1dFN0cmVhbQpjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKCJVVEYtOCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfQpsb2cuZGVidWcgImNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtOiAiICsgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0KY29ubmVjdGlvbi5jb25uZWN0KCk7Ci8vbG9nLmRlYnVnICJ1cmw6ICIgKyB1cmwKbG9nLmRlYnVnICJSZXNwb25zZUNvZGU6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkKbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKCmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCmRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKQpkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpCgppZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoIjIwMCIpKXsKICAgIGxvZy5kZWJ1ZyAidXJsOiAiICsgdXJsCiAgICBsb2cuZGVidWcgImJvZHlfcmVxOiAiICsgYm9keV9yZXEKICAgIGxvZy5kZWJ1ZyAiUmVzcG9uc2VDb2RlOiIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpCiAgICBsb2cuZGVidWcgIlJlc3BvbnNlTWVzc2FnZToiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKQoKICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQKICAgIGxvZy5kZWJ1ZyAiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiAiICsgb3V0cHV0TXNnCgogICAgZGVmIGpzb25TbHVycGVyID0gbmV3IEpzb25TbHVycGVyKCkKICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpCiAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIAogICAgbG9nLmRlYnVnICJtZXNzYWdlOiAiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2UKCiAgICBlTGlzdEVycm9ycy5hZGQoIkUiKQogICAgZUxpc3RFcnJvcnMuYWRkKCJTRU5ETUFJTCIpCiAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyAiICIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpKQogICAgZUxpc3RFcnJvcnMuYWRkKGpzb25fb2JqZWN0Lm1lc3NhZ2UpCiAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpCgogICAgb3V0cHV0LmFkZChlTGlzdCkKICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3siRSI6IicgKyBvdXRwdXQudG9TdHJpbmcoKSArICcifScpCiAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oIkUiLCBvdXRwdXQudG9TdHJpbmcoKSkKICAgIAp9ZWxzZXsKICAgIC8qTCdlbWFpbCDDqCBzdGF0YSBpbnZpYXRhIGNvcnJldHRhbWVudGUsIGFnZ2lvcm5vIGlsIGNhbXBvIE9OU0lURV9SRVBPUlQgY29uIGxhIGRhdGEgY29ycmVudGUqLwoKICAgIC8vIGxvZy53YXJuICJpc3N1ZSAiK2lzc3VlLmdldEtleSgpCiAgICBkZWYgY2Z2ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShvbnNpdGVSZXBvcnREYXRlKQogICAgaWYgKCFjZnYpIHsKICAgICAgICBkZWYgdDAgID0gbmV3IGphdmEuc3FsLlRpbWVzdGFtcChTeXN0ZW0uY3VycmVudFRpbWVNaWxsaXMoKSkKICAgICAgICBsb2cud2FybiAiU3RhcnRUaW1lID0+ICciK3QwLnRvU3RyaW5nKCkrIiciCiAgICAgICAgZGVmIG12ID0gbmV3IE1vZGlmaWVkVmFsdWUob25zaXRlUmVwb3J0RGF0ZSwgdDApCiAgICAgICAgZGVmIGNoID0gbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpCiAgICAgICAgb25zaXRlUmVwb3J0RGF0ZS51cGRhdGVWYWx1ZShudWxsLCBpc3N1ZSwgbXYsIGNoKSAKICAgIH0gZWxzZSB7CiAgICAgICAgbG9nLndhcm4gIlN0YXJ0VGltZSA9PSAnIitjZnYudG9TdHJpbmcoKSsiJyIKICAgIH0KfQ==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="6">
              <post-functions>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="append.value"></arg>
                  <arg name="maxAllowed-integerValue">50</arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.value">%%CURRENT_DATETIME%%</arg>
                  <arg name="field.name">customfield_22641</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">309e0c3d-af4a-4dfc-a9f4-fe57e6309132</arg>
                  <arg name="FIELD_NOTES">YCFgVXBkYXRlIE9OU0lURV9SRVBPUlRfU0VOVF9EQVRFIG9uIGxpbmtlZCBpc3N1ZXM=</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGlua1xuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZVxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5Jc3N1ZUluZGV4aW5nU2VydmljZSBcdGlzc3VlSW5kZXhpbmdTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KElzc3VlSW5kZXhpbmdTZXJ2aWNlKVxuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcbmRlZiBzZW5kTWFpbFRvID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zZW5kTWFpbFRvTGlua2VkJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBvbnNpdGVSZXBvcnREYXRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLndmT25zaXRlUmVwb3J0J10udG9TdHJpbmcoKSlbMF1cbmRlZiBzZW5kTWFpbFRvUmVjID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zZW5kTWFpbFRvUmVjaXBpZW50cyddLnRvU3RyaW5nKCkpWzBdXG5kZWYgc2VkTWFpbERhdGUgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfV0ZfT05TSVRFX1JFUE9SVFwiKVswXVxuZGVmIHJlbGF0ZXNJbklzc3VlTGluaz1mYWxzZVxuZGVmIHJlbGF0ZXNPdXRJc3N1ZUxpbms9ZmFsc2VcbmRlZiBsaW5rZWRUaWNrZXRzPW5ldyBBcnJheUxpc3QoKVxubG9nLmRlYnVnIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUbykudG9TdHJpbmcoKVxuZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXG5kZWYgbWlcblxuTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG5mb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxJbklzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcblxuICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpICYmIGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKS5zdGF0dXMubmFtZSA9PSBcIkNvbXBsZXRlZCB0byBiZSBDbG9zZWRcIil7XG4gICAgICAgIG1pID0gKE11dGFibGVJc3N1ZSkgaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpXG4gICAgICAgIHNlZE1haWxEYXRlLnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKSwgbmV3IE1vZGlmaWVkVmFsdWUoaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VkTWFpbERhdGUpLCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlZE1haWxEYXRlKSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcbiAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xuICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKSlcbiAgICAgICAgXG4gICAgICAgIC8qIFJFU1QgQVBJIHBlciBwdWxpemlhIGNhY2hlIGlzc3VlIGxpbmthdGEgKi9cbiAgICAgICAgcmVxdWVzdE1ldGhvZCA9IFwiR0VUXCI7XG4gICAgICAgIC8qU2NyaXB0IFZhcmlhYmxlcyovXG4gICAgICAgIC8vUGVyIHRlc3QgZGEgY29uc29sZVxuICAgICAgICAvL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTMyNTM1XCIpXG4gICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL2NsZWFyQ2FjaGUvdGlja2V0a2V5L1wiICsgaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpLmtleVxuICAgICAgICBVUkwgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgICAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbn1cbkxpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG5mb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG5cbiAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSAmJiBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKS5zdGF0dXMubmFtZSA9PSBcIkNvbXBsZXRlZCB0byBiZSBDbG9zZWRcIil7XG4gICAgICAgIG1pID0gKE11dGFibGVJc3N1ZSkgaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KClcbiAgICAgICAgc2VkTWFpbERhdGUudXBkYXRlVmFsdWUobnVsbCwgaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCksIG5ldyBNb2RpZmllZFZhbHVlKGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VkTWFpbERhdGUpLCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlZE1haWxEYXRlKSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcbiAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xuICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpKVxuICAgICAgICBcbiAgICAgICAgLyogUkVTVCBBUEkgcGVyIHB1bGl6aWEgY2FjaGUgaXNzdWUgbGlua2F0YSAqL1xuICAgICAgICByZXF1ZXN0TWV0aG9kID0gXCJHRVRcIjtcbiAgICAgICAgLypTY3JpcHQgVmFyaWFibGVzKi9cbiAgICAgICAgLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4gICAgICAgIC8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMzI1MzVcIilcbiAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vY2xlYXJDYWNoZS90aWNrZXRrZXkvXCIgKyBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKS5rZXlcbiAgICAgICAgVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICAgICAgSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgfVxuICAgIH1cbn0iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_22666</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="621" name="Re-Invia Consuntivo al Cliente" view="fieldscreen">
          <meta name="opsbar-sequence">30</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">19911</meta>
          <restrict-to>
            <conditions type="AND">
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">dacad0dc-0b69-4718-870b-22e11398542c</arg>
                <arg name="FIELD_NOTES">YCFgTWFpbnRlbmFuY2UgVGlja2V0IE9SIFBNIFRpY2tldA==</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnTWFpbnRlbmFuY2UgVGlja2V0JyB8fCBpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXQnIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
              </condition>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">fada32c2-b768-4770-816d-beeac0f8e084</arg>
                <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIEZJTkFOQ0lBTF9TVEFURU1FTlRfVE9fQ1VTVE9NRVIgLSBJZiBpdCdzIG51bGwgdGhlIGVtYWlsIGhhcyBub3QgYmVlbiBzZW50IHlldA==</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5cblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5jZlZhbHVlc1twcm9wZXJ0aWVzWydjZi53ZkZpbmFuY2lhbFN0YXRtVG9DJ11dICE9IG51bGwiLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">e70180eb-0cf2-468c-b6c4-1eeded83980b</arg>
                <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIE9QX0FVVE9NQVRJQ0FMTFlfQ0xPU0VEIC0gaWYgWWVzIGRvbid0IGFsbG93IHRyYW5zaXRpb24=</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5cblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5jZlZhbHVlc1twcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q2xvc2VkJ11dID09IG51bGwgfHwgY2ZWYWx1ZXNbcHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUNsb3NlZCddXT8udmFsdWUgPT0gJ05vJyIsInNjcmlwdFBhdGgiOm51bGx9</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">6c786cdf0a6d0ad4b6b1d34c1ad1598920327ad2</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIFJlcXVpcmVkIEZpZWxkcyAtIHNvbG8gZXJyb3JzLCBubyB3YXJuaW5ncw==</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuIFxuLy9Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTM5ODFcIilcblxuZGVmIGVycm9ycyA9IGZhbHNlXG5kZWYgd2FybmluZ3MgPSBmYWxzZVxuXG5kZWYgbHVtcFN1bVByaWNlID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5sdW1wU3VtUHJpY2UnXS50b1N0cmluZygpKVswXVxuXG4vKkNhbXBpIGNvbiBkYXRpIG9iYmxpZ2F0b3JpIHBlciB0aWNrZXQgbm9uIGEgY29ycG8qL1xuZGVmIHJlcE1hdGVyaWFscyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YucmVwbGFjZWRNYXRlcmlhbHMnXS50b1N0cmluZygpKVswXVxuZGVmIHVuYVRhbnR1bVJhdGVzID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi51bmF0YW50dW1SYXRlcyddLnRvU3RyaW5nKCkpWzBdXG5kZWYgbGFib3VyUmF0ZXMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmxhYm91clJhdGVzJ10udG9TdHJpbmcoKSlbMF1cbmRlZiB0cmF2ZWxSYXRlcyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YudHJhdmVsUmF0ZXMnXS50b1N0cmluZygpKVswXVxuXG4vKkNhbXBpIGNvbiBkYXRpIG9iYmxpZ2F0b3JpIHBlciB0aWNrZXQgYSBjb3JwbyovXG5kZWYgbHVtcFN1bVJhdGVzID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5sdW1wU3VtUmF0ZXMnXS50b1N0cmluZygpKVswXVxuXG4vKkNvbmZlcm1hIHV0ZW50ZSBzdSB3YXJuaW5ncyovXG5kZWYgdHJhbnNpdGlvbkNoZWNrID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5jaGVja0FuZENvbmZpcm0nXS50b1N0cmluZygpKVswXVxuXG4vKkluc2lnaHQgU2NoZW1hIElEcyovXG5kZWYgREJPYmplY3RzID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8nXS50b1N0cmluZygpICsgXCItXCJcbmRlZiBPUEFBID0gcHJvcGVydGllc1snaXNjaGVtYS5hYSddLnRvU3RyaW5nKCkgKyBcIi1cIlxuXG5kZWYgZXJyb3JNYW5kYXRvcnlGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWRGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiB3YXJuaW5nRW1wdHlGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiB3YXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgd2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIgPSBuZXcgQXJyYXlMaXN0KClcblxuLy90cnl7XG4gICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUHJpY2UpIT1udWxsICYmIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobHVtcFN1bVByaWNlKS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKSl7XG4gICAgICAgIC8qQ29udGFiaWxpenphemlvbmUgYSBjb3JwbyovXG4gICAgICAgIGxvZy5kZWJ1ZyBcIkNvbnRhYmlsaXp6YXppb25lIGEgY29ycG9cIlxuICAgICAgICAvL09QQUFfTFVNUF9TVU1fUkFURVNcbiAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUmF0ZXMpIT1udWxsICYmIChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUmF0ZXMpICE9IFwiXCIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobHVtcFN1bVJhdGVzKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSl7XG4gICAgICAgICAgICAvKkNpY2xhcmUgdHV0dGkgZ2xpIG9nZ2V0dGkgYXNzb2NpYXRpIGFsIGNhbXBvKi9cbiAgICAgICAgICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50c1xuICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyAgXG4gICAgICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTtcbiAgICAgICAgICAgIGRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XG4gICAgICAgICAgICBkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcblxuICAgICAgICAgICAgZGVmIGxzUmF0ZXNMaXN0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUmF0ZXMpXG5cdFx0XHRsb2cuZGVidWcgbHNSYXRlc0xpc3RcbiAgICAgICAgICAgIGZvcihscyBpbiBsc1JhdGVzTGlzdCl7XG4gICAgICAgICAgICAgICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0XG4gICAgICAgICAgICAgICAgZGVmIGxzUmF0ZT1scy50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwibHNSYXRlOiBcIiArIGxzUmF0ZVxuICAgICAgICAgICAgICAgIGRlZiBsc1JhdGVLZXkgPSBsc1JhdGUuc3Vic3RyaW5nKGxzUmF0ZS5pbmRleE9mKCcoJykrMSxsc1JhdGUuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImxzUmF0ZUtleTogXCIgKyBsc1JhdGVLZXlcbiAgICAgICAgICAgICAgICBkZWYgbHNSYXRlT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGxzUmF0ZUtleSlcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJsc1JhdGVPYmplY3Q6IFwiICsgbHNSYXRlT2JqZWN0XG4gICAgICAgICAgICAgICAgLy9nZXQgXCJBUFBMSUVEX1RPXCIgZm9yIHRoYXQgcmF0ZVxuICAgICAgICAgICAgICAgIGRlZiBsc0FwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsc1JhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwibHNBcHBsaWVkVG86IFwiICsgbHNBcHBsaWVkVG9cbiAgICAgICAgICAgICAgICBkZWYgbHNBcHBsaWVkVG9WYWx1ZVxuICAgICAgICAgICAgICAgIGlmIChsc0FwcGxpZWRUbyl7XG4gICAgICAgICAgICAgICAgICAgIGxzQXBwbGllZFRvVmFsdWUgPSBsc0FwcGxpZWRUby5zdWJzdHJpbmcobHNBcHBsaWVkVG8uaW5kZXhPZignKCcpKzEsbHNBcHBsaWVkVG8uaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlT2JqZWN0LmdldElkKCksIFJBVEVfUkVGKTogXCIgKyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5yYXRlUmVmJ10udG9TdHJpbmcoKSlcbiAgICAgICAgICAgICAgICBkZWYgbHNSYXRlUmVmID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxzUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQucmF0ZVJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwibHNSYXRlUmVmOiBcIiArIGxzUmF0ZVJlZlxuICAgICAgICAgICAgICAgIGRlZiBsc1JhdGVSZWZLZXlcbiAgICAgICAgICAgICAgICBkZWYgbHNSYXRlUmVmVmFsdWVcbiAgICAgICAgICAgICAgICBpZihsc1JhdGVSZWYuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgICAgIGxzUmF0ZVJlZiA9IGxzUmF0ZVJlZi50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIGxzUmF0ZVJlZktleSA9IGxzUmF0ZVJlZi5zdWJzdHJpbmcobHNSYXRlUmVmLmluZGV4T2YoJygnKSsxLGxzUmF0ZVJlZi5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgICAgIGRlZiBsc1JhdGVSZWZPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oREJPYmplY3RzICsgbHNSYXRlUmVmS2V5KVxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgbHNSYXRlUmVmT2JqZWN0XG4gICAgICAgICAgICAgICAgICAgIGxzUmF0ZVJlZlZhbHVlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxzUmF0ZVJlZk9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnJhdGUuTmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIGxzUmF0ZVJlZlZhbHVlID0gbHNSYXRlUmVmVmFsdWUuc3Vic3RyaW5nKGxzUmF0ZVJlZlZhbHVlLmluZGV4T2YoJygnKSsxLGxzUmF0ZVJlZlZhbHVlLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZihsc0FwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKFwiQk9USFwiKSB8fCBsc0FwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKFwiQ1VTVE9NRVJcIikpe1xuICAgICAgICAgICAgICAgICAgICAvL2dldCBcIlRPVEFMX0FNT1VOVF9DVVNUT01FUlwiIGZvciB0aGF0IGNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICBkZWYgdG90Q3VzdG9tZXIgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC50b3RDdXN0b21lciddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuICAgICAgICAgICAgICAgICAgICBpZighdG90Q3VzdG9tZXIgfHwgdG90Q3VzdG9tZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscyhcIjAuMFwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lci5hZGQobHNSYXRlUmVmVmFsdWUudG9TdHJpbmcoKSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICB9ICAgIFxuICAgICAgICB9XG5cbiAgICB9ZWxzZXtcbiAgICAgICAgLypDb250YWJpbGl6emF6aW9uZSBub24gYSBjb3JwbyovXG4gICAgICAgIGxvZy5kZWJ1ZyBcIkNvbnRhYmlsaXp6YXppb25lIE5PTiBhIGNvcnBvXCJcblxuICAgICAgICAvL09QQUFfUkVQTEFDRURfTUFURVJJQUxTXG4gICAgICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKSAhPSBcIlwiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpe1xuICAgICAgICAgICAgLy9sb2cuZGVidWcgXCJNYXRlcmlhbGk6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpXG4gICAgICAgICAgICAvKkNpY2xhcmUgdHV0dGkgZ2xpIG9nZ2V0dGkgYXNzb2NpYXRpIGFsIGNhbXBvKi9cbiAgICAgICAgICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50c1xuICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyAgXG4gICAgICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTtcbiAgICAgICAgICAgIGRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XG4gICAgICAgICAgICBkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcblxuICAgICAgICAgICAgZGVmIHJlcE1hdExpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscylcblxuICAgICAgICAgICAgZm9yKG1hdCBpbiByZXBNYXRMaXN0KXtcbiAgICAgICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3RcbiAgICAgICAgICAgICAgICBkZWYgY29tcG9uZW50PW1hdC50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgZGVmIGNvbXBvbmVudEtleSA9IGNvbXBvbmVudC5zdWJzdHJpbmcoY29tcG9uZW50LmluZGV4T2YoJygnK09QQUEpKzEsY29tcG9uZW50Lmxlbmd0aCgpLTEpXG4gICAgICAgICAgICAgICAgZGVmIGNvbXBvbmVudE9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihjb21wb25lbnRLZXkpXG4gICAgICAgICAgICAgICAgLy9nZXQgXCJBUFBMSUVEX1RPXCIgZm9yIHRoYXQgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgZGVmIGFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKSBhcyBBcnJheUxpc3RcbiAgICAgICAgICAgICAgICBkZWYgYXBwbGllZFRvVmFsdWVcbiAgICAgICAgICAgICAgICBpZihhcHBsaWVkVG8uc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgICAgIGFwcGxpZWRUbyA9IGFwcGxpZWRUby50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIGFwcGxpZWRUb1ZhbHVlID0gYXBwbGllZFRvLnN1YnN0cmluZyhhcHBsaWVkVG8uaW5kZXhPZignKCcpKzEsYXBwbGllZFRvLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICAgICAgLy9sb2cuZGVidWcgXCJhcHBsaWVkVG9WYWx1ZTogXCIgKyBhcHBsaWVkVG9WYWx1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBkZWYgbWF0TnVtYmVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5tYXRlcmlhbFJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKSBhcyBBcnJheUxpc3RcbiAgICAgICAgICAgICAgICBkZWYgbWF0TnVtYmVyS2V5XG4gICAgICAgICAgICAgICAgZGVmIG1hdE51bWJlclZhbHVlXG4gICAgICAgICAgICAgICAgaWYobWF0TnVtYmVyLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICBtYXROdW1iZXIgPSBtYXROdW1iZXIudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICBtYXROdW1iZXJLZXkgPSBtYXROdW1iZXIuc3Vic3RyaW5nKG1hdE51bWJlci5pbmRleE9mKCcoJykrMSxtYXROdW1iZXIuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgICAgICBkZWYgbWF0TnVtYmVyT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKERCT2JqZWN0cyArIG1hdE51bWJlcktleSlcbiAgICAgICAgICAgICAgICAgICAgbWF0TnVtYmVyVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obWF0TnVtYmVyT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoubWF0ZXJpYWwubmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIG1hdE51bWJlclZhbHVlID0gbWF0TnVtYmVyVmFsdWUuc3Vic3RyaW5nKG1hdE51bWJlclZhbHVlLmluZGV4T2YoJygnKSsxLG1hdE51bWJlclZhbHVlLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZGVmIHNlcmlhbE51bWJlciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuc2VyaWFsTnVtYmVyJ10udG9TdHJpbmcoKSkgPyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnNlcmlhbE51bWJlciddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKSBhcyBBcnJheUxpc3QgOiBudWxsXG4gICAgICAgICAgICAgICAgZGVmIHNlcmlhbE51bWJlclZhbHVlXG4gICAgICAgICAgICAgICAgaWYoc2VyaWFsTnVtYmVyKXtcbiAgICAgICAgICAgICAgICAgICAgc2VyaWFsTnVtYmVyID0gc2VyaWFsTnVtYmVyLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgc2VyaWFsTnVtYmVyVmFsdWUgPSBzZXJpYWxOdW1iZXIuc3Vic3RyaW5nKHNlcmlhbE51bWJlci5pbmRleE9mKCcoJykrMSxzZXJpYWxOdW1iZXIuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICBcblxuICAgICAgICAgICAgICAgIGlmKGFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKFwiQk9USFwiKSB8fCBhcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscyhcIkNVU1RPTUVSXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgLy9nZXQgXCJUT1RBTF9BTU9VTlRfQ1VTVE9NRVJcIiBmb3IgdGhhdCBjb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgZGVmIHRvdEN1c3RvbWVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RDdXN0J10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgICAgIGlmKCF0b3RDdXN0b21lciB8fCB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMC4wXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzPXRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXIuYWRkKG1hdE51bWJlclZhbHVlLnRvU3RyaW5nKCkgKyAoIXNlcmlhbE51bWJlci50b1N0cmluZygpLmVxdWFscyhcIltdXCIpID8gXCIgKFwiICsgc2VyaWFsTnVtYmVyVmFsdWUudG9TdHJpbmcoKSArIFwiKVwiIDogXCIgKClcIikpICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgfSAgICBcbiAgICAgICAgfSAgXG5cbiAgICAgICAgLy9PUEFBX1VOQVRBTlRVTV9SQVRFU1xuICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHVuYVRhbnR1bVJhdGVzKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodW5hVGFudHVtUmF0ZXMpICE9IFwiXCIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodW5hVGFudHVtUmF0ZXMpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKXtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlVuYSB0YW50dW0gcmF0ZXM6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcylcbiAgICAgICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qL1xuICAgICAgICAgICAgLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzXG4gICAgICAgICAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7ICBcbiAgICAgICAgICAgIENsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbiAgICAgICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4gICAgICAgICAgICBkZWYgdW1SYXRlc0xpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHVuYVRhbnR1bVJhdGVzKVxuXG4gICAgICAgICAgICBmb3IodW0gaW4gdW1SYXRlc0xpc3Qpe1xuICAgICAgICAgICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdFxuICAgICAgICAgICAgICAgIGRlZiB1bVJhdGU9dW0udG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVLZXkgPSB1bVJhdGUuc3Vic3RyaW5nKHVtUmF0ZS5pbmRleE9mKCcoJykrMSx1bVJhdGUuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4odW1SYXRlS2V5KVxuICAgICAgICAgICAgICAgIC8vZ2V0IFwiQVBQTElFRF9UT1wiIGZvciB0aGF0IHJhdGVcbiAgICAgICAgICAgICAgICBkZWYgdW1BcHBsaWVkVG8gPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIGRlZiB1bUFwcGxpZWRUb1ZhbHVlID0gdW1BcHBsaWVkVG8uc3Vic3RyaW5nKHVtQXBwbGllZFRvLmluZGV4T2YoJygnKSsxLHVtQXBwbGllZFRvLmluZGV4T2YoJyknKSlcblxuICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVSZWYgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5yYXRlUmVmJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcblxuICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVSZWZLZXlcbiAgICAgICAgICAgICAgICBkZWYgdW1SYXRlUmVmVmFsdWVcbiAgICAgICAgICAgICAgICBpZih1bVJhdGVSZWYuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgICAgIHVtUmF0ZVJlZiA9IHVtUmF0ZVJlZi50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIHVtUmF0ZVJlZktleSA9IHVtUmF0ZVJlZi5zdWJzdHJpbmcodW1SYXRlUmVmLmluZGV4T2YoJygnKSsxLHVtUmF0ZVJlZi5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVSZWZPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oREJPYmplY3RzICsgdW1SYXRlUmVmS2V5KVxuICAgICAgICAgICAgICAgICAgICB1bVJhdGVSZWZWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGVSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5yYXRlLk5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICB1bVJhdGVSZWZWYWx1ZSA9IHVtUmF0ZVJlZlZhbHVlLnN1YnN0cmluZyh1bVJhdGVSZWZWYWx1ZS5pbmRleE9mKCcoJykrMSx1bVJhdGVSZWZWYWx1ZS5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmKHVtQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoXCJCT1RIXCIpIHx8IHVtQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoXCJDVVNUT01FUlwiKSl7XG4gICAgICAgICAgICAgICAgICAgIC8vZ2V0IFwiVE9UQUxfQU1PVU5UX0NVU1RPTUVSXCIgZm9yIHRoYXQgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgIGRlZiB0b3RDdXN0b21lciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaWJvai5vblNpdGVSYXRlUmVwb3J0LnRvdEN1c3RvbWVyJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgICAgIGlmKCF0b3RDdXN0b21lciB8fCB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMC4wXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzPXRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyLmFkZCh1bVJhdGVSZWZWYWx1ZS50b1N0cmluZygpKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgIH0gICAgXG4gICAgICAgIH1cblxuICAgICAgICAvL09QQUFfTEFCT1VSX1JBVEVTXG4gICAgICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpIT1udWxsICYmIChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcykgIT0gXCJcIiAmJiAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcykudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpe1xuICAgICAgICAgICAgbG9nLmRlYnVnIFwiTGFib3VyIHJhdGVzOiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpXG4gICAgICAgICAgICAvKkNpY2xhcmUgdHV0dGkgZ2xpIG9nZ2V0dGkgYXNzb2NpYXRpIGFsIGNhbXBvKi9cbiAgICAgICAgICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50c1xuICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyAgXG4gICAgICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTtcbiAgICAgICAgICAgIGRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XG4gICAgICAgICAgICBkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcblxuICAgICAgICAgICAgZGVmIGxhYm91clJhdGVzTGlzdCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpXG5cbiAgICAgICAgICAgIGZvcihsYiBpbiBsYWJvdXJSYXRlc0xpc3Qpe1xuICAgICAgICAgICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdFxuICAgICAgICAgICAgICAgIGRlZiBsYlJhdGU9bGIudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIGRlZiBsYlJhdGVLZXkgPSBsYlJhdGUuc3Vic3RyaW5nKGxiUmF0ZS5pbmRleE9mKCcoJykrMSxsYlJhdGUuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIGRlZiBsYlJhdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4obGJSYXRlS2V5KVxuICAgICAgICAgICAgICAgIC8vZ2V0IFwiQVBQTElFRF9UT1wiIGZvciB0aGF0IHJhdGVcbiAgICAgICAgICAgICAgICBkZWYgbGJBcHBsaWVkVG8gPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIGRlZiBsYkFwcGxpZWRUb1ZhbHVlID0gbGJBcHBsaWVkVG8uc3Vic3RyaW5nKGxiQXBwbGllZFRvLmluZGV4T2YoJygnKSsxLGxiQXBwbGllZFRvLmluZGV4T2YoJyknKSlcblxuICAgICAgICAgICAgICAgIGRlZiBsYlJhdGVSZWYgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5yYXRlUmVmJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBkZWYgbGJSYXRlUmVmS2V5XG4gICAgICAgICAgICAgICAgZGVmIGxiUmF0ZVJlZlZhbHVlXG4gICAgICAgICAgICAgICAgaWYobGJSYXRlUmVmLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICBsYlJhdGVSZWYgPSBsYlJhdGVSZWYudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICBsYlJhdGVSZWZLZXkgPSBsYlJhdGVSZWYuc3Vic3RyaW5nKGxiUmF0ZVJlZi5pbmRleE9mKCcoJykrMSxsYlJhdGVSZWYuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgICAgICBkZWYgbGJSYXRlUmVmT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKERCT2JqZWN0cyArIGxiUmF0ZVJlZktleSlcbiAgICAgICAgICAgICAgICAgICAgbGJSYXRlUmVmVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoucmF0ZS5OYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgbGJSYXRlUmVmVmFsdWUgPSBsYlJhdGVSZWZWYWx1ZS5zdWJzdHJpbmcobGJSYXRlUmVmVmFsdWUuaW5kZXhPZignKCcpKzEsbGJSYXRlUmVmVmFsdWUuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKGxiQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoXCJCT1RIXCIpIHx8IGxiQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoXCJDVVNUT01FUlwiKSl7XG4gICAgICAgICAgICAgICAgICAgIC8vZ2V0IFwiVE9UQUxfQU1PVU5UX0NVU1RPTUVSXCIgZm9yIHRoYXQgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgIGRlZiB0b3RDdXN0b21lciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaWJvai5vblNpdGVSYXRlUmVwb3J0LnRvdEN1c3RvbWVyJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgICAgIGlmKCF0b3RDdXN0b21lciB8fCB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMC4wXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzPXRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyLmFkZChsYlJhdGVSZWZWYWx1ZS50b1N0cmluZygpKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgIH0gICAgXG4gICAgICAgIH1cblxuICAgICAgICAvL09QQUFfVFJBVkVMX1JBVEVTXG4gICAgICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsUmF0ZXMpIT1udWxsICYmIChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmF2ZWxSYXRlcykgIT0gXCJcIiAmJiAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmF2ZWxSYXRlcykudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpe1xuICAgICAgICAgICAgbG9nLmRlYnVnIFwiVHJhdmVsIHJhdGVzOiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsUmF0ZXMpXG4gICAgICAgICAgICAvKkNpY2xhcmUgdHV0dGkgZ2xpIG9nZ2V0dGkgYXNzb2NpYXRpIGFsIGNhbXBvKi9cbiAgICAgICAgICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50c1xuICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyAgXG4gICAgICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTtcbiAgICAgICAgICAgIGRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XG4gICAgICAgICAgICBkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcblxuICAgICAgICAgICAgZGVmIHRyYXZlbFJhdGVzTGlzdCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsUmF0ZXMpXG5cbiAgICAgICAgICAgIGZvcih0ciBpbiB0cmF2ZWxSYXRlc0xpc3Qpe1xuICAgICAgICAgICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdFxuICAgICAgICAgICAgICAgIGRlZiB0clJhdGU9dHIudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIGRlZiB0clJhdGVLZXkgPSB0clJhdGUuc3Vic3RyaW5nKHRyUmF0ZS5pbmRleE9mKCcoJykrMSx0clJhdGUuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIGRlZiB0clJhdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4odHJSYXRlS2V5KVxuICAgICAgICAgICAgICAgIC8vZ2V0IFwiQVBQTElFRF9UT1wiIGZvciB0aGF0IHJhdGVcbiAgICAgICAgICAgICAgICBkZWYgdHJBcHBsaWVkVG8gPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odHJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIGRlZiB0ckFwcGxpZWRUb1ZhbHVlID0gdHJBcHBsaWVkVG8uc3Vic3RyaW5nKHRyQXBwbGllZFRvLmluZGV4T2YoJygnKSsxLHRyQXBwbGllZFRvLmluZGV4T2YoJyknKSlcblxuICAgICAgICAgICAgICAgIGRlZiB0clJhdGVSZWYgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odHJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5yYXRlUmVmJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBkZWYgdHJSYXRlUmVmS2V5XG4gICAgICAgICAgICAgICAgZGVmIHRyUmF0ZVJlZlZhbHVlXG4gICAgICAgICAgICAgICAgaWYodHJSYXRlUmVmLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICB0clJhdGVSZWYgPSB0clJhdGVSZWYudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICB0clJhdGVSZWZLZXkgPSB0clJhdGVSZWYuc3Vic3RyaW5nKHRyUmF0ZVJlZi5pbmRleE9mKCcoJykrMSx0clJhdGVSZWYuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgICAgICBkZWYgdHJSYXRlUmVmT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKERCT2JqZWN0cyArIHRyUmF0ZVJlZktleSlcbiAgICAgICAgICAgICAgICAgICAgdHJSYXRlUmVmVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odHJSYXRlUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoucmF0ZS5OYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgdHJSYXRlUmVmVmFsdWUgPSB0clJhdGVSZWZWYWx1ZS5zdWJzdHJpbmcodHJSYXRlUmVmVmFsdWUuaW5kZXhPZignKCcpKzEsdHJSYXRlUmVmVmFsdWUuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKHRyQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoXCJCT1RIXCIpIHx8IHRyQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoXCJDVVNUT01FUlwiKSl7XG4gICAgICAgICAgICAgICAgICAgIC8vZ2V0IFwiVE9UQUxfQU1PVU5UX0NVU1RPTUVSXCIgZm9yIHRoYXQgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgIGRlZiB0b3RDdXN0b21lciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaWJvai5vblNpdGVSYXRlUmVwb3J0LnRvdEN1c3RvbWVyJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgICAgIGlmKCF0b3RDdXN0b21lciB8fCB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMC4wXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzPXRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyLmFkZCh0clJhdGVSZWZWYWx1ZS50b1N0cmluZygpKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgIH0gICAgXG4gICAgICAgIH1cblxuICAgIH1cblxuXG4gICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgaWYgKCFlcnJvcnMgJiYgIXdhcm5pbmdzKXtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9ZWxzZXtcbiAgICAgICAgaWYoIWVycm9ycyAmJiB3YXJuaW5ncyl7XG4gICAgICAgICAgICAvL1NlIGNpIHNvbm8gc29sbyB3YXJuaW5ncyB2ZXJpZmljbyBzZSBsJ3V0ZW50ZSBoYSBnaVx1MDBlMCBkaWNoaWFyYXRvIGRpIHZvbGVyIHByb3NlZ3VpcmUgY29tdW5xdWVcbiAgICAgICAgICAgIC8vIC0gdHJhbnNpdGlvbiBmaWVsZCBcIk9QQUFfQ0hFQ0tfQU5EX0NPTkZJUk1cIj1cIlllc1wiXG4gICAgICAgICAgICAvLyAtIGluIGNhc28gY29udHJhcmlvIGludmlvIGkgd2FybmluZyBhIEZFXG5cbiAgICAgICAgICAgIC8vbG9nLmRlYnVnIFwidHJhbnNpdGlvbkNoZWNrOiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKVxuICAgICAgICAgICAgLy9sb2cuZGVidWcgXCJyZXN1bHQ6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpXG4gICAgICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIikpe1xuICAgICAgICAgICAgICAgIC8vbG9nLmRlYnVnIFwicmV0dXJuIHRydWUgLSB0cmFuc2l0aW9uQ2hlY2sgPSBZZXNcIlxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBkZWYgd0xpc3QgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgICAgICAgICAgICAgIGlmKHdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHlSYXRlID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoXCJXXCIpXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoXCJDVVNUT01FUl9DT05GSVJNX0VNUFRZX1JBVEVTXCIpXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQobnVsbClcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZCh3YXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lcilcblxuICAgICAgICAgICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHlSYXRlKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKHdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXIuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKFwiV1wiKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChcIkNVU1RPTUVSX0NPTkZJUk1fRU1QVFlfTUFUX1FVT1RFXCIpXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKHdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXIpXG5cbiAgICAgICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgb3V0cHV0LmFkZCh3TGlzdClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJXXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICAgICAgICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJXXCIsIG91dHB1dC50b1N0cmluZygpKSAgIFxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICAgICAgaWYoZXJyb3JzICYmICF3YXJuaW5ncyl7XG4gICAgICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgICAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgICAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKFwiRVwiLCBvdXRwdXQudG9TdHJpbmcoKSkgICBcbiAgICAgICAgfVxuICAgICAgICBpZihlcnJvcnMgJiYgd2FybmluZ3Mpe1xuICAgICAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICBkZWYgd0xpc3QgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgICAgICAgICAgaWYod2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1FbXB0eVJhdGUgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZChcIldcIilcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZChcIkNVU1RPTUVSX0NPTkZJUk1fRU1QVFlfUkFURVNcIilcbiAgICAgICAgICAgICAgICBcdHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQobnVsbClcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZCh3YXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lcilcblxuICAgICAgICAgICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHlSYXRlKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKHdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXIuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKFwiV1wiKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChcIkNVU1RPTUVSX0NPTkZJUk1fRU1QVFlfTUFUX1FVT1RFXCIpXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKHdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXIpXG5cbiAgICAgICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICAgICAgb3V0cHV0LmFkZCh3TGlzdClcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIldFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICAgICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIldFXCIsIG91dHB1dC50b1N0cmluZygpKSAgXG4gICAgICAgIH1cbiAgICB9XG4vL31jYXRjaChFeGNlcHRpb24gZSl7XG4vLyAgICBsb2cuZGVidWcgXCJFeGNlcHRpb246IFwiICsgZVxuLy8gICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIkV4Y2VwdGlvblwiLCBlLnRvU3RyaW5nKCkpICBcbi8vfVxuIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZQppbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb24KaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3IKaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CmRlZiBDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQogCklzc3VlIGlzc3VlID0gaXNzdWUKLy9Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7Ci8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoIk9QVVQtMzk2IikKCmRlZiBlcnJvcnMgPSBmYWxzZQpkZWYgd2FybmluZ3MgPSBmYWxzZQoKZGVmIGx1bXBTdW1QcmljZSA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YubHVtcFN1bVByaWNlJ10udG9TdHJpbmcoKSlbMF0KCi8qQ2FtcGkgY29uIGRhdGkgb2JibGlnYXRvcmkgcGVyIHRpY2tldCBub24gYSBjb3JwbyovCmRlZiByZXBNYXRlcmlhbHMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJlcGxhY2VkTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF0KZGVmIHVuYVRhbnR1bVJhdGVzID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi51bmF0YW50dW1SYXRlcyddLnRvU3RyaW5nKCkpWzBdCmRlZiBsYWJvdXJSYXRlcyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YubGFib3VyUmF0ZXMnXS50b1N0cmluZygpKVswXQpkZWYgdHJhdmVsUmF0ZXMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnRyYXZlbFJhdGVzJ10udG9TdHJpbmcoKSlbMF0KCi8qQ2FtcGkgY29uIGRhdGkgb2JibGlnYXRvcmkgcGVyIHRpY2tldCBhIGNvcnBvKi8KZGVmIGx1bXBTdW1SYXRlcyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YubHVtcFN1bVJhdGVzJ10udG9TdHJpbmcoKSlbMF0KCi8qQ29uZmVybWEgdXRlbnRlIHN1IHdhcm5pbmdzKi8KZGVmIHRyYW5zaXRpb25DaGVjayA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY2hlY2tBbmRDb25maXJtJ10udG9TdHJpbmcoKSlbMF0KCi8qSW5zaWdodCBTY2hlbWEgSURzKi8KZGVmIERCT2JqZWN0cyA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuZGJvJ10udG9TdHJpbmcoKSArICItIgpkZWYgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEnXS50b1N0cmluZygpICsgIi0iCgpkZWYgZXJyb3JNYW5kYXRvcnlGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIGVycm9ySm9iU3RhcnRlZENvbXBsZXRlZEZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKQpkZWYgd2FybmluZ0VtcHR5RmllbGRzID0gbmV3IEFycmF5TGlzdCgpCmRlZiB3YXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyID0gbmV3IEFycmF5TGlzdCgpCmRlZiB3YXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lciA9IG5ldyBBcnJheUxpc3QoKQoKLy90cnl7CiAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1QcmljZSkhPW51bGwgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUHJpY2UpLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKSl7CiAgICAgICAgLypDb250YWJpbGl6emF6aW9uZSBhIGNvcnBvKi8KICAgICAgICBsb2cuZGVidWcgIkNvbnRhYmlsaXp6YXppb25lIGEgY29ycG8iCiAgICAgICAgLy9PUEFBX0xVTVBfU1VNX1JBVEVTCiAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUmF0ZXMpIT1udWxsICYmIChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUmF0ZXMpICE9ICIiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1SYXRlcykudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICAgICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovCiAgICAgICAgICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50cwogICAgICAgICAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZSIpOyAgCiAgICAgICAgICAgIENsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUiKTsKICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTsKICAgICAgICAgICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7CgogICAgICAgICAgICBkZWYgbHNSYXRlc0xpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1SYXRlcykKCQkJbG9nLmRlYnVnIGxzUmF0ZXNMaXN0CiAgICAgICAgICAgIGZvcihscyBpbiBsc1JhdGVzTGlzdCl7CiAgICAgICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3QKICAgICAgICAgICAgICAgIGRlZiBsc1JhdGU9bHMudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgbG9nLmRlYnVnICJsc1JhdGU6ICIgKyBsc1JhdGUKICAgICAgICAgICAgICAgIGRlZiBsc1JhdGVLZXkgPSBsc1JhdGUuc3Vic3RyaW5nKGxzUmF0ZS5pbmRleE9mKCcoJykrMSxsc1JhdGUuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgbG9nLmRlYnVnICJsc1JhdGVLZXk6ICIgKyBsc1JhdGVLZXkKICAgICAgICAgICAgICAgIGRlZiBsc1JhdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4obHNSYXRlS2V5KQogICAgICAgICAgICAgICAgbG9nLmRlYnVnICJsc1JhdGVPYmplY3Q6ICIgKyBsc1JhdGVPYmplY3QKICAgICAgICAgICAgICAgIC8vZ2V0ICJBUFBMSUVEX1RPIiBmb3IgdGhhdCByYXRlCiAgICAgICAgICAgICAgICBkZWYgbHNBcHBsaWVkVG8gPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgbG9nLmRlYnVnICJsc0FwcGxpZWRUbzogIiArIGxzQXBwbGllZFRvCiAgICAgICAgICAgICAgICBkZWYgbHNBcHBsaWVkVG9WYWx1ZQogICAgICAgICAgICAgICAgaWYgKGxzQXBwbGllZFRvKXsKICAgICAgICAgICAgICAgICAgICBsc0FwcGxpZWRUb1ZhbHVlID0gbHNBcHBsaWVkVG8uc3Vic3RyaW5nKGxzQXBwbGllZFRvLmluZGV4T2YoJygnKSsxLGxzQXBwbGllZFRvLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyAib2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxzUmF0ZU9iamVjdC5nZXRJZCgpLCBSQVRFX1JFRik6ICIgKyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5yYXRlUmVmJ10udG9TdHJpbmcoKSkKICAgICAgICAgICAgICAgIGRlZiBsc1JhdGVSZWYgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5yYXRlUmVmJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyAibHNSYXRlUmVmOiAiICsgbHNSYXRlUmVmCiAgICAgICAgICAgICAgICBkZWYgbHNSYXRlUmVmS2V5CiAgICAgICAgICAgICAgICBkZWYgbHNSYXRlUmVmVmFsdWUKICAgICAgICAgICAgICAgIGlmKGxzUmF0ZVJlZi5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgICAgICBsc1JhdGVSZWYgPSBsc1JhdGVSZWYudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgIGxzUmF0ZVJlZktleSA9IGxzUmF0ZVJlZi5zdWJzdHJpbmcobHNSYXRlUmVmLmluZGV4T2YoJygnKSsxLGxzUmF0ZVJlZi5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICAgICAgZGVmIGxzUmF0ZVJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihPUEFBICsgbHNSYXRlUmVmS2V5KQogICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBsc1JhdGVSZWZPYmplY3QKICAgICAgICAgICAgICAgICAgICBsc1JhdGVSZWZWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsc1JhdGVSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5yYXRlLk5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgIGxzUmF0ZVJlZlZhbHVlID0gbHNSYXRlUmVmVmFsdWUuc3Vic3RyaW5nKGxzUmF0ZVJlZlZhbHVlLmluZGV4T2YoJygnKSsxLGxzUmF0ZVJlZlZhbHVlLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZihsc0FwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJCT1RIIikgfHwgbHNBcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscygiQ1VTVE9NRVIiKSl7CiAgICAgICAgICAgICAgICAgICAgLy9nZXQgIlRPVEFMX0FNT1VOVF9DVVNUT01FUiIgZm9yIHRoYXQgY29tcG9uZW50CiAgICAgICAgICAgICAgICAgICAgZGVmIHRvdEN1c3RvbWVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxzUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdG9tZXInXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkKICAgICAgICAgICAgICAgICAgICBpZighdG90Q3VzdG9tZXIgfHwgdG90Q3VzdG9tZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscygiMC4wIikpewogICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyLmFkZChsc1JhdGVSZWZWYWx1ZS50b1N0cmluZygpKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgIH0gICAgCiAgICAgICAgfQoKICAgIH1lbHNlewogICAgICAgIC8qQ29udGFiaWxpenphemlvbmUgbm9uIGEgY29ycG8qLwogICAgICAgIGxvZy5kZWJ1ZyAiQ29udGFiaWxpenphemlvbmUgTk9OIGEgY29ycG8iCgogICAgICAgIC8vT1BBQV9SRVBMQUNFRF9NQVRFUklBTFMKICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykgIT0gIiIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgICAgICAvL2xvZy5kZWJ1ZyAiTWF0ZXJpYWxpOiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpCiAgICAgICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qLwogICAgICAgICAgICAvL2luc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHMKICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGUiKTsgIAogICAgICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CiAgICAgICAgICAgIGRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7CiAgICAgICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpOwoKICAgICAgICAgICAgZGVmIHJlcE1hdExpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykKCiAgICAgICAgICAgIGZvcihtYXQgaW4gcmVwTWF0TGlzdCl7CiAgICAgICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3QKICAgICAgICAgICAgICAgIGRlZiBjb21wb25lbnQ9bWF0LnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIGRlZiBjb21wb25lbnRLZXkgPSBjb21wb25lbnQuc3Vic3RyaW5nKGNvbXBvbmVudC5pbmRleE9mKCcoJytPUEFBKSsxLGNvbXBvbmVudC5sZW5ndGgoKS0xKQogICAgICAgICAgICAgICAgZGVmIGNvbXBvbmVudE9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihjb21wb25lbnRLZXkpCiAgICAgICAgICAgICAgICAvL2dldCAiQVBQTElFRF9UTyIgZm9yIHRoYXQgY29tcG9uZW50CiAgICAgICAgICAgICAgICBkZWYgYXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuYXBwbGllZFRvJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpIGFzIEFycmF5TGlzdAogICAgICAgICAgICAgICAgZGVmIGFwcGxpZWRUb1ZhbHVlCiAgICAgICAgICAgICAgICBpZihhcHBsaWVkVG8uc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICAgICAgYXBwbGllZFRvID0gYXBwbGllZFRvLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgICAgICBhcHBsaWVkVG9WYWx1ZSA9IGFwcGxpZWRUby5zdWJzdHJpbmcoYXBwbGllZFRvLmluZGV4T2YoJygnKSsxLGFwcGxpZWRUby5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICAgICAgLy9sb2cuZGVidWcgImFwcGxpZWRUb1ZhbHVlOiAiICsgYXBwbGllZFRvVmFsdWUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZGVmIG1hdE51bWJlciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQubWF0ZXJpYWxSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkgYXMgQXJyYXlMaXN0CiAgICAgICAgICAgICAgICBkZWYgbWF0TnVtYmVyS2V5CiAgICAgICAgICAgICAgICBkZWYgbWF0TnVtYmVyVmFsdWUKICAgICAgICAgICAgICAgIGlmKG1hdE51bWJlci5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgICAgICBtYXROdW1iZXIgPSBtYXROdW1iZXIudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgIG1hdE51bWJlcktleSA9IG1hdE51bWJlci5zdWJzdHJpbmcobWF0TnVtYmVyLmluZGV4T2YoJygnKSsxLG1hdE51bWJlci5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICAgICAgZGVmIG1hdE51bWJlck9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihEQk9iamVjdHMgKyBtYXROdW1iZXJLZXkpCiAgICAgICAgICAgICAgICAgICAgbWF0TnVtYmVyVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obWF0TnVtYmVyT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoubWF0ZXJpYWwubmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgICAgICAgICAgICAgbWF0TnVtYmVyVmFsdWUgPSBtYXROdW1iZXJWYWx1ZS5zdWJzdHJpbmcobWF0TnVtYmVyVmFsdWUuaW5kZXhPZignKCcpKzEsbWF0TnVtYmVyVmFsdWUuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBkZWYgc2VyaWFsTnVtYmVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5zZXJpYWxOdW1iZXInXS50b1N0cmluZygpKSA/IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuc2VyaWFsTnVtYmVyJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpIGFzIEFycmF5TGlzdCA6IG51bGwKICAgICAgICAgICAgICAgIGRlZiBzZXJpYWxOdW1iZXJWYWx1ZQogICAgICAgICAgICAgICAgaWYoc2VyaWFsTnVtYmVyICYmIHNlcmlhbE51bWJlci5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgICAgICBzZXJpYWxOdW1iZXIgPSBzZXJpYWxOdW1iZXIudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgIHNlcmlhbE51bWJlclZhbHVlID0gc2VyaWFsTnVtYmVyLnN1YnN0cmluZyhzZXJpYWxOdW1iZXIuaW5kZXhPZignKCcpKzEsc2VyaWFsTnVtYmVyLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAKCiAgICAgICAgICAgICAgICBpZihhcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscygiQk9USCIpIHx8IGFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJDVVNUT01FUiIpKXsKICAgICAgICAgICAgICAgICAgICAvL2dldCAiVE9UQUxfQU1PVU5UX0NVU1RPTUVSIiBmb3IgdGhhdCBjb21wb25lbnQKICAgICAgICAgICAgICAgICAgICBkZWYgdG90Q3VzdG9tZXIgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdEN1c3QnXS50b1N0cmluZygpKSA/IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQudG90Q3VzdCddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKSA6IG51bGwKICAgICAgICAgICAgICAgICAgICBpZighdG90Q3VzdG9tZXIgfHwgdG90Q3VzdG9tZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscygiMC4wIikpewogICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXIuYWRkKG1hdE51bWJlclZhbHVlLnRvU3RyaW5nKCkgKyAoKHNlcmlhbE51bWJlciAmJiBzZXJpYWxOdW1iZXIuc2l6ZSgpID4gMCkgPyAiICgiICsgc2VyaWFsTnVtYmVyVmFsdWUudG9TdHJpbmcoKSArICIpIiA6ICIgKCkiKSkgICAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICB9ICAgIAogICAgICAgIH0gIAoKICAgICAgICAvL09QQUFfVU5BVEFOVFVNX1JBVEVTCiAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcykhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHVuYVRhbnR1bVJhdGVzKSAhPSAiIiAmJiAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcykudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICAgICAgbG9nLmRlYnVnICJVbmEgdGFudHVtIHJhdGVzOiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcykKICAgICAgICAgICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovCiAgICAgICAgICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50cwogICAgICAgICAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZSIpOyAgCiAgICAgICAgICAgIENsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUiKTsKICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTsKICAgICAgICAgICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7CgogICAgICAgICAgICBkZWYgdW1SYXRlc0xpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHVuYVRhbnR1bVJhdGVzKQoKICAgICAgICAgICAgZm9yKHVtIGluIHVtUmF0ZXNMaXN0KXsKICAgICAgICAgICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdAogICAgICAgICAgICAgICAgZGVmIHVtUmF0ZT11bS50b1N0cmluZygpCiAgICAgICAgICAgICAgICBkZWYgdW1SYXRlS2V5ID0gdW1SYXRlLnN1YnN0cmluZyh1bVJhdGUuaW5kZXhPZignKCcpKzEsdW1SYXRlLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4odW1SYXRlS2V5KQogICAgICAgICAgICAgICAgLy9nZXQgIkFQUExJRURfVE8iIGZvciB0aGF0IHJhdGUKICAgICAgICAgICAgICAgIGRlZiB1bUFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgICAgICAgICBkZWYgdW1BcHBsaWVkVG9WYWx1ZSA9IHVtQXBwbGllZFRvLnN1YnN0cmluZyh1bUFwcGxpZWRUby5pbmRleE9mKCcoJykrMSx1bUFwcGxpZWRUby5pbmRleE9mKCcpJykpCgogICAgICAgICAgICAgICAgZGVmIHVtUmF0ZVJlZiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQoKICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVSZWZLZXkKICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVSZWZWYWx1ZQogICAgICAgICAgICAgICAgaWYodW1SYXRlUmVmLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgICAgIHVtUmF0ZVJlZiA9IHVtUmF0ZVJlZi50b1N0cmluZygpCiAgICAgICAgICAgICAgICAgICAgdW1SYXRlUmVmS2V5ID0gdW1SYXRlUmVmLnN1YnN0cmluZyh1bVJhdGVSZWYuaW5kZXhPZignKCcpKzEsdW1SYXRlUmVmLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgICAgICBkZWYgdW1SYXRlUmVmT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKE9QQUEgKyB1bVJhdGVSZWZLZXkpCiAgICAgICAgICAgICAgICAgICAgdW1SYXRlUmVmVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoucmF0ZS5OYW1lJ10udG9TdHJpbmcoKSkgPyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoucmF0ZS5OYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkgOiBudWxsCiAgICAgICAgICAgICAgICAgICAgdW1SYXRlUmVmVmFsdWUgPSB1bVJhdGVSZWZWYWx1ZSA/IHVtUmF0ZVJlZlZhbHVlLnN1YnN0cmluZyh1bVJhdGVSZWZWYWx1ZS5pbmRleE9mKCcoJykrMSx1bVJhdGVSZWZWYWx1ZS5pbmRleE9mKCcpJykpIDogbnVsbAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZih1bUFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJCT1RIIikgfHwgdW1BcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscygiQ1VTVE9NRVIiKSl7CiAgICAgICAgICAgICAgICAgICAgLy9nZXQgIlRPVEFMX0FNT1VOVF9DVVNUT01FUiIgZm9yIHRoYXQgY29tcG9uZW50CiAgICAgICAgICAgICAgICAgICAgZGVmIHRvdEN1c3RvbWVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHVtUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdG9tZXInXS50b1N0cmluZygpKSA/IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnRvdEN1c3RvbWVyJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpIDogbnVsbAogICAgICAgICAgICAgICAgICAgIGlmKCF0b3RDdXN0b21lciB8fCB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKCIwLjAiKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzPXRydWUKICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIuYWRkKHVtUmF0ZVJlZlZhbHVlLnRvU3RyaW5nKCkpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgfSAgICAKICAgICAgICB9CgogICAgICAgIC8vT1BBQV9MQUJPVVJfUkFURVMKICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxhYm91clJhdGVzKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpICE9ICIiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxhYm91clJhdGVzKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgICAgICBsb2cuZGVidWcgIkxhYm91ciByYXRlczogIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpCiAgICAgICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qLwogICAgICAgICAgICAvL2luc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHMKICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGUiKTsgIAogICAgICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CiAgICAgICAgICAgIGRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7CiAgICAgICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpOwoKICAgICAgICAgICAgZGVmIGxhYm91clJhdGVzTGlzdCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpCgogICAgICAgICAgICBmb3IobGIgaW4gbGFib3VyUmF0ZXNMaXN0KXsKICAgICAgICAgICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdAogICAgICAgICAgICAgICAgZGVmIGxiUmF0ZT1sYi50b1N0cmluZygpCiAgICAgICAgICAgICAgICBkZWYgbGJSYXRlS2V5ID0gbGJSYXRlLnN1YnN0cmluZyhsYlJhdGUuaW5kZXhPZignKCcpKzEsbGJSYXRlLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIGRlZiBsYlJhdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4obGJSYXRlS2V5KQogICAgICAgICAgICAgICAgLy9nZXQgIkFQUExJRURfVE8iIGZvciB0aGF0IHJhdGUKICAgICAgICAgICAgICAgIGRlZiBsYkFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgICAgICAgICBkZWYgbGJBcHBsaWVkVG9WYWx1ZSA9IGxiQXBwbGllZFRvLnN1YnN0cmluZyhsYkFwcGxpZWRUby5pbmRleE9mKCcoJykrMSxsYkFwcGxpZWRUby5pbmRleE9mKCcpJykpCgogICAgICAgICAgICAgICAgZGVmIGxiUmF0ZVJlZiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBkZWYgbGJSYXRlUmVmS2V5CiAgICAgICAgICAgICAgICBkZWYgbGJSYXRlUmVmVmFsdWUKICAgICAgICAgICAgICAgIGlmKGxiUmF0ZVJlZi5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgICAgICBsYlJhdGVSZWYgPSBsYlJhdGVSZWYudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgIGxiUmF0ZVJlZktleSA9IGxiUmF0ZVJlZi5zdWJzdHJpbmcobGJSYXRlUmVmLmluZGV4T2YoJygnKSsxLGxiUmF0ZVJlZi5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICAgICAgZGVmIGxiUmF0ZVJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihPUEFBICsgbGJSYXRlUmVmS2V5KQogICAgICAgICAgICAgICAgICAgIGxiUmF0ZVJlZlZhbHVlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZVJlZk9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnJhdGUuTmFtZSddLnRvU3RyaW5nKCkpID8gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZVJlZk9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnJhdGUuTmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpIDogbnVsbAogICAgICAgICAgICAgICAgICAgIGxiUmF0ZVJlZlZhbHVlID0gbGJSYXRlUmVmVmFsdWUgPyBsYlJhdGVSZWZWYWx1ZS5zdWJzdHJpbmcobGJSYXRlUmVmVmFsdWUuaW5kZXhPZignKCcpKzEsbGJSYXRlUmVmVmFsdWUuaW5kZXhPZignKScpKSA6IG51bGwKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZihsYkFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJCT1RIIikgfHwgbGJBcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscygiQ1VTVE9NRVIiKSl7CiAgICAgICAgICAgICAgICAgICAgLy9nZXQgIlRPVEFMX0FNT1VOVF9DVVNUT01FUiIgZm9yIHRoYXQgY29tcG9uZW50CiAgICAgICAgICAgICAgICAgICAgZGVmIHRvdEN1c3RvbWVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdG9tZXInXS50b1N0cmluZygpKSA/IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnRvdEN1c3RvbWVyJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpIDogbnVsbAogICAgICAgICAgICAgICAgICAgIGlmKCF0b3RDdXN0b21lciB8fCB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKCIwLjAiKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzPXRydWUKICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIuYWRkKGxiUmF0ZVJlZlZhbHVlLnRvU3RyaW5nKCkpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgfSAgICAKICAgICAgICB9CgogICAgICAgIC8vT1BBQV9UUkFWRUxfUkFURVMKICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYXZlbFJhdGVzKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsUmF0ZXMpICE9ICIiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYXZlbFJhdGVzKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgICAgICBsb2cuZGVidWcgIlRyYXZlbCByYXRlczogIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsUmF0ZXMpCiAgICAgICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qLwogICAgICAgICAgICAvL2luc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHMKICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGUiKTsgIAogICAgICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CiAgICAgICAgICAgIGRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7CiAgICAgICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpOwoKICAgICAgICAgICAgZGVmIHRyYXZlbFJhdGVzTGlzdCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsUmF0ZXMpCgogICAgICAgICAgICBmb3IodHIgaW4gdHJhdmVsUmF0ZXNMaXN0KXsKICAgICAgICAgICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdAogICAgICAgICAgICAgICAgZGVmIHRyUmF0ZT10ci50b1N0cmluZygpCiAgICAgICAgICAgICAgICBkZWYgdHJSYXRlS2V5ID0gdHJSYXRlLnN1YnN0cmluZyh0clJhdGUuaW5kZXhPZignKCcpKzEsdHJSYXRlLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIGRlZiB0clJhdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4odHJSYXRlS2V5KQogICAgICAgICAgICAgICAgLy9nZXQgIkFQUExJRURfVE8iIGZvciB0aGF0IHJhdGUKICAgICAgICAgICAgICAgIGRlZiB0ckFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpID8gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuYXBwbGllZFRvJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkgOiBudWxsCiAgICAgICAgICAgICAgICBkZWYgdHJBcHBsaWVkVG9WYWx1ZSA9IHRyQXBwbGllZFRvID8gdHJBcHBsaWVkVG8uc3Vic3RyaW5nKHRyQXBwbGllZFRvLmluZGV4T2YoJygnKSsxLHRyQXBwbGllZFRvLmluZGV4T2YoJyknKSkgOiBudWxsCgogICAgICAgICAgICAgICAgZGVmIHRyUmF0ZVJlZiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKSA/IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKSA6IG51bGwKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZGVmIHRyUmF0ZVJlZktleQogICAgICAgICAgICAgICAgZGVmIHRyUmF0ZVJlZlZhbHVlCiAgICAgICAgICAgICAgICBpZih0clJhdGVSZWYuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICAgICAgdHJSYXRlUmVmID0gdHJSYXRlUmVmLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgICAgICB0clJhdGVSZWZLZXkgPSB0clJhdGVSZWYuc3Vic3RyaW5nKHRyUmF0ZVJlZi5pbmRleE9mKCcoJykrMSx0clJhdGVSZWYuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgICAgIGRlZiB0clJhdGVSZWZPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oT1BBQSArIHRyUmF0ZVJlZktleSkKICAgICAgICAgICAgICAgICAgICB0clJhdGVSZWZWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5yYXRlLk5hbWUnXS50b1N0cmluZygpKSA/IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5yYXRlLk5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKSA6IG51bGwKICAgICAgICAgICAgICAgICAgICB0clJhdGVSZWZWYWx1ZSA9IHRyUmF0ZVJlZlZhbHVlID8gdHJSYXRlUmVmVmFsdWUuc3Vic3RyaW5nKHRyUmF0ZVJlZlZhbHVlLmluZGV4T2YoJygnKSsxLHRyUmF0ZVJlZlZhbHVlLmluZGV4T2YoJyknKSkgOiBudWxsCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYodHJBcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscygiQk9USCIpIHx8IHRyQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoIkNVU1RPTUVSIikpewogICAgICAgICAgICAgICAgICAgIC8vZ2V0ICJUT1RBTF9BTU9VTlRfQ1VTVE9NRVIiIGZvciB0aGF0IGNvbXBvbmVudAogICAgICAgICAgICAgICAgICAgIGRlZiB0b3RDdXN0b21lciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnRvdEN1c3RvbWVyJ10udG9TdHJpbmcoKSkgPyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odHJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC50b3RDdXN0b21lciddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKSA6IG51bGwKICAgICAgICAgICAgICAgICAgICBpZighdG90Q3VzdG9tZXIgfHwgdG90Q3VzdG9tZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscygiMC4wIikpewogICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyLmFkZCh0clJhdGVSZWZWYWx1ZS50b1N0cmluZygpKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgIH0gICAgCiAgICAgICAgfQoKICAgIH0KCgogICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKQoKICAgIGlmICghZXJyb3JzICYmICF3YXJuaW5ncyl7CiAgICAgICAgcmV0dXJuIHRydWUKICAgIH1lbHNlewogICAgICAgIGlmKCFlcnJvcnMgJiYgd2FybmluZ3MpewogICAgICAgICAgICAvL1NlIGNpIHNvbm8gc29sbyB3YXJuaW5ncyB2ZXJpZmljbyBzZSBsJ3V0ZW50ZSBoYSBnacOgIGRpY2hpYXJhdG8gZGkgdm9sZXIgcHJvc2VndWlyZSBjb211bnF1ZQogICAgICAgICAgICAvLyAtIHRyYW5zaXRpb24gZmllbGQgIk9QQUFfQ0hFQ0tfQU5EX0NPTkZJUk0iPSJZZXMiCiAgICAgICAgICAgIC8vIC0gaW4gY2FzbyBjb250cmFyaW8gaW52aW8gaSB3YXJuaW5nIGEgRkUKCiAgICAgICAgICAgIC8vbG9nLmRlYnVnICJ0cmFuc2l0aW9uQ2hlY2s6ICIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykKICAgICAgICAgICAgLy9sb2cuZGVidWcgInJlc3VsdDogIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKS50b1N0cmluZygpLmVxdWFscygiWWVzIikKICAgICAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKSl7CiAgICAgICAgICAgICAgICAvL2xvZy5kZWJ1ZyAicmV0dXJuIHRydWUgLSB0cmFuc2l0aW9uQ2hlY2sgPSBZZXMiCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZQogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKQoKICAgICAgICAgICAgICAgIGlmKHdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1FbXB0eVJhdGUgPSBuZXcgQXJyYXlMaXN0KCkKICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKCJXIikKICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKCJDVVNUT01FUl9DT05GSVJNX0VNUFRZX1JBVEVTIikKICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKG51bGwpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZCh3YXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lcikKCiAgICAgICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5UmF0ZSkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZih3YXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoIlciKQogICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKCJDVVNUT01FUl9DT05GSVJNX0VNUFRZX01BVF9RVU9URSIpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQobnVsbCkKICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZCh3YXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyKQoKICAgICAgICAgICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZSkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigneyJXIjoiJyArIG91dHB1dC50b1N0cmluZygpICsgJyJ9JykKICAgICAgICAgICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiVyIsIG91dHB1dC50b1N0cmluZygpKSAgIAogICAgICAgICAgICB9CgogICAgICAgIH0KICAgICAgICBpZihlcnJvcnMgJiYgIXdhcm5pbmdzKXsKICAgICAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCgogICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KQogICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IkUiOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQogICAgICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oIkUiLCBvdXRwdXQudG9TdHJpbmcoKSkgICAKICAgICAgICB9CiAgICAgICAgaWYoZXJyb3JzICYmIHdhcm5pbmdzKXsKICAgICAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKQoKICAgICAgICAgICAgaWYod2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICAgICAgZGVmIHdMaXN0Q29uZmlybUVtcHR5UmF0ZSA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoIlciKQogICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoIkNVU1RPTUVSX0NPTkZJUk1fRU1QVFlfUkFURVMiKQogICAgICAgICAgICAgICAgCXdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQobnVsbCkKICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKHdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyKQoKICAgICAgICAgICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHlSYXRlKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmKHdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXIuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICAgICAgZGVmIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUgPSBuZXcgQXJyYXlMaXN0KCkKICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZCgiVyIpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoIkNVU1RPTUVSX0NPTkZJUk1fRU1QVFlfTUFUX1FVT1RFIikKICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChudWxsKQogICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKHdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXIpCgogICAgICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgb3V0cHV0LmFkZChlTGlzdCkKICAgICAgICAgICAgb3V0cHV0LmFkZCh3TGlzdCkKICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigneyJXRSI6IicgKyBvdXRwdXQudG9TdHJpbmcoKSArICcifScpCiAgICAgICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiV0UiLCBvdXRwdXQudG9TdHJpbmcoKSkgIAogICAgICAgIH0KICAgIH0KLy99Y2F0Y2goRXhjZXB0aW9uIGUpewovLyAgICBsb2cuZGVidWcgIkV4Y2VwdGlvbjogIiArIGUKLy8gICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiRXhjZXB0aW9uIiwgZS50b1N0cmluZygpKSAgCi8vfQo=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">7f809f6e87447e19ed7c9921bc7d6a28aed7bf3f</arg>
              <arg name="FIELD_NOTES">YCFgT1AgRW1haWwgTm90aWZpY2F0aW9uOiBGSU5BTkNJQUxfU1RBVEVNRU5UX1RPX0NVU1RPTUVS</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGlua1xuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuQ2F0ZWdvcnkgbG9nID0gQ2F0ZWdvcnkuZ2V0SW5zdGFuY2UoXCJjb20ub25yZXNvbHZlLmppcmEuZ3Jvb3Z5LlBvc3RGdW5jdGlvblwiKVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG5kZWYgREJPPXByb3BlcnRpZXNbJ2lzY2hlbWEuZGJvLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuLyogUkVTVCBBUEkgcGVyIEludmlvIE5vdGlmaWNhIEVtYWlsIE9OU0lURV9SRVBPUlQgKi9cbnJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcblxuZGVmIHJlbGF0ZXNJbklzc3VlTGluaz1mYWxzZVxuZGVmIHJlbGF0ZXNPdXRJc3N1ZUxpbms9ZmFsc2VcbmRlZiBsaW5rZWRUaWNrZXRzPW5ldyBBcnJheUxpc3QoKVxuTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG5mb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxJbklzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcblxuICAgIGlmKGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKSAhPSBudWxsICYmIGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpICYmIGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKS5zdGF0dXMubmFtZSA9PSBcIkNvbXBsZXRlZCB0byBiZSBDbG9zZWRcIil7XG4gICAgICAgIHJlbGF0ZXNJbklzc3VlTGluaz10cnVlXG4gICAgICAgIGxpbmtlZFRpY2tldHMuYWRkKGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKS50b1N0cmluZygpKVxuICAgICAgICBsb2cuZGVidWcgXCJJc3N1ZSBjb24gcmVsYXRlc0luSXNzdWVMaW5rXCJcbiAgICB9XG59XG5MaXN0PElzc3VlTGluaz4gYWxsT3V0SXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldE91dHdhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKVxuZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsT3V0SXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHtcbiAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgaWYoaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkgIT0gbnVsbCAmJiBpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSAmJiBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKS5zdGF0dXMubmFtZSA9PSBcIkNvbXBsZXRlZCB0byBiZSBDbG9zZWRcIil7XG4gICAgICAgIHJlbGF0ZXNPdXRJc3N1ZUxpbms9dHJ1ZVxuICAgICAgICBsaW5rZWRUaWNrZXRzLmFkZChpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKS50b1N0cmluZygpKVxuICAgICAgICBsb2cuZGVidWcgXCJJc3N1ZSBjb24gcmVsYXRlc091dElzc3VlTGlua1wiXG4gICAgfVxufVxuXG5kZWYgYm9keV9yZXFcbmlmKHJlbGF0ZXNJbklzc3VlTGluayB8fCByZWxhdGVzT3V0SXNzdWVMaW5rKXtcbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJ0ZW1wbGF0ZU5hbWVcIjogcHJvcGVydGllc1sndHQuZmluYW5jaWFsU3RhdGVtZW50VG9DJ10udG9TdHJpbmcoKSxcbiAgICAgICAgXCJwZWNcIjogZmFsc2UsXG4gICAgICAgIFwiaXNzdWVLZXlcIjogaXNzdWUua2V5LFxuICAgICAgICBcImxpbmtlZFRpY2tldHNcIjogbGlua2VkVGlja2V0c1xuICAgIF1cbn1lbHNle1xuICAgIGJvZHlfcmVxID0gW1xuICAgICAgICBcInRlbXBsYXRlTmFtZVwiOiBwcm9wZXJ0aWVzWyd0dC5maW5hbmNpYWxTdGF0ZW1lbnRUb0MnXS50b1N0cmluZygpLFxuICAgICAgICBcInBlY1wiOiBmYWxzZSxcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXlcbiAgICBdXG59XG5cbmJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL3RyYW5zYWN0aW9uL21haWwvc2VuZFwiXG5VUkwgdXJsXG51cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG5IdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbmNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG5jb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG5jb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxubG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5jb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpICYmICFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjA0XCIpKXtcbiAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICBsb2cuZGVidWcgXCJSZXNwb25zZTogXCIgKyBjb25uZWN0aW9uXG4gICAgXG4gICAgLypST0xMQkFDSyovXG4gICAgLypSaW1vemlvbmUgYWxsZWdhdG8gY29uc3VudGl2byBhcHBlbmEgY3JlYXRvKi9cbiAgICAvKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG4gICAgQ2xhc3MgaXFsRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuSVFMRmFjYWRlXCIpOyBcbiAgICBkZWYgaXFsRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKGlxbEZhY2FkZUNsYXNzKTtcblxuICAgIC8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbiAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7XG4gICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XG5cbiAgICAvKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbiAgICBDbGFzcyBvYmplY3RUeXBlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUZhY2FkZVwiKTtcbiAgICBkZWYgb2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpO1xuXG4gICAgLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbiAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTtcbiAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xuXG4gICAgQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG4gICAgZGVmIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MpO1xuXG4gICAgLyogU3BlY2lmeSB0aGUgc2NoZW1hIGlkIGFzIHdlbGwgYXMgdGhlIElRTCB0aGF0IHdpbGwgZmV0Y2ggb2JqZWN0cy4gSW4gdGhpcyBjYXNlIGFsbCBvYmplY3RzIHdpdGggTmFtZSBtYXRjaGluZyB0aGUgdmFsdWVDRiwgYmUgc3VyZSB0byBpbmNsdWRlIFwiIGFyb3VuZCB2YWx1ZSAqL1xuICAgIGRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5cXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5uYW1lJ10udG9TdHJpbmcoKSArIFwiXFxcIiA9IFxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm9ianMuY29uc3VudGl2byddLnRvU3RyaW5nKCkgKyBcIlxcXCIgQU5EIFwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyBcIiE9dHJ1ZSBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleSA9IFwiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIilcIik7IC8vIFNlZSB0aGUgY29tcGxldGUgbGlzdCBvZiBwb3NzaWJsZSBJUUwgb24gdGhlIEluc2lnaHQgUXVlcnkgTGFuZ3VhZ2UgZG9jdW1lbnRhdGlvbiBwYWdlXG4gICAgLyogSWYgdGhpcyBpcyBhIG1hbmRhdG9yeSBmaWVsZCB5b3Ugc2hvdWxkIGJlIGFibGUgdG8gZG8gdGhpczogKi9cbiAgICBsb2cuaW5mbyhcIkluc2lnaHQgb2JqZWN0OiBcIiArIG9iamVjdHNbMF0pO1xuICAgIFxuICAgIGlmKG9iamVjdHNbMF0pe1xuICAgICAgICAvKiBVUERBVEUgT0pCRUNUIERFTEVURUQgVkFMVUUgKi9cbiAgICAgICAgZGVmIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG9iamVjdHNbMF0uZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuZGVsZXRlZCddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKSAgXG4gICAgICAgIGRlZiB2YWx1ZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuXG4gICAgICAgIGRlZiB2YWx1ZUJlYW4gPSBvYlRyaWFnZS5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKVxuICAgICAgICB2YWx1ZUJlYW4uc2V0VmFsdWUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2UuZ2V0T2JqZWN0VHlwZUF0dHJpYnV0ZUlkKCkpLCB0cnVlKVxuICAgICAgICAvKkNsZWFuIGFjdHVhbCB2YWx1ZSovXG4gICAgICAgIHZhbHVlLmNsZWFyKClcbiAgICAgICAgdmFsdWUuYWRkKHZhbHVlQmVhbik7XG4gICAgICAgIG9iVHJpYWdlLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWUpXG5cbiAgICAgICAgLy9VcGRhdGUgT0pCRUNUIGF0dHJpYnV0ZSB2YWx1ZVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlKTtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSkge1xuICAgICAgICAgICAgbG9nLndhcm4oXCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOlwiICsgdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxuICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcbiAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcblxuICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICBlTGlzdEVycm9ycy5hZGQoXCJTRU5ETUFJTFwiKVxuICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKSlcbiAgICBlTGlzdEVycm9ycy5hZGQoanNvbl9vYmplY3QubWVzc2FnZSlcbiAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG4gICAgXG4gICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJFXCIsIG91dHB1dC50b1N0cmluZygpKVxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CkNhdGVnb3J5IGxvZyA9IENhdGVnb3J5LmdldEluc3RhbmNlKCJjb20ub25yZXNvbHZlLmppcmEuZ3Jvb3Z5LlBvc3RGdW5jdGlvbiIpCmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKQoKSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpOwpDdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7CmRlZiByZXF1ZXN0TWV0aG9kCmRlZiBiYXNlVVJMCgpkZWYgREJPPXByb3BlcnRpZXNbJ2lzY2hlbWEuZGJvLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKQovKiBSRVNUIEFQSSBwZXIgSW52aW8gTm90aWZpY2EgRW1haWwgT05TSVRFX1JFUE9SVCAqLwpyZXF1ZXN0TWV0aG9kID0gIlBPU1QiOwoKZGVmIHJlbGF0ZXNJbklzc3VlTGluaz1mYWxzZQpkZWYgcmVsYXRlc091dElzc3VlTGluaz1mYWxzZQpkZWYgbGlua2VkVGlja2V0cz1uZXcgQXJyYXlMaXN0KCkKTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpCmZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbEluSXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHsKICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7CgogICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpewogICAgICAgIHJlbGF0ZXNJbklzc3VlTGluaz10cnVlCiAgICAgICAgbGlua2VkVGlja2V0cy5hZGQoaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpLnRvU3RyaW5nKCkpCiAgICAgICAgbG9nLmRlYnVnICJJc3N1ZSBjb24gcmVsYXRlc0luSXNzdWVMaW5rIgogICAgfQp9Ckxpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpCmZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbE91dElzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7CiAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpOwoKICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXsKICAgICAgICByZWxhdGVzT3V0SXNzdWVMaW5rPXRydWUKICAgICAgICBsaW5rZWRUaWNrZXRzLmFkZChpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKS50b1N0cmluZygpKQogICAgICAgIGxvZy5kZWJ1ZyAiSXNzdWUgY29uIHJlbGF0ZXNPdXRJc3N1ZUxpbmsiCiAgICB9Cn0KCmRlZiBib2R5X3JlcQppZihyZWxhdGVzSW5Jc3N1ZUxpbmsgfHwgcmVsYXRlc091dElzc3VlTGluayl7CiAgICBib2R5X3JlcSA9IFsKICAgICAgICAidGVtcGxhdGVOYW1lIjogcHJvcGVydGllc1sndHQuZmluYW5jaWFsU3RhdGVtZW50VG9DJ10udG9TdHJpbmcoKSwKICAgICAgICAicGVjIjogZmFsc2UsCiAgICAgICAgImlzc3VlS2V5IjogaXNzdWUua2V5LAogICAgICAgICJsaW5rZWRUaWNrZXRzIjogbGlua2VkVGlja2V0cwogICAgXQp9ZWxzZXsKICAgIGJvZHlfcmVxID0gWwogICAgICAgICJ0ZW1wbGF0ZU5hbWUiOiBwcm9wZXJ0aWVzWyd0dC5maW5hbmNpYWxTdGF0ZW1lbnRUb0MnXS50b1N0cmluZygpLAogICAgICAgICJwZWMiOiBmYWxzZSwKICAgICAgICAiaXNzdWVLZXkiOiBpc3N1ZS5rZXkKICAgIF0KfQoKYmFzZVVSTCA9ICJodHRwOi8vIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgIi9vcC9yZXN0L2ppcmEvQUEvdHJhbnNhY3Rpb24vbWFpbC9zZW5kIgpVUkwgdXJsCnVybCA9IG5ldyBVUkwoYmFzZVVSTCkKSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpOwpjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eSgiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOCIpOwpjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eSgiQWNjZXB0IiwgIiovKiIpOwpjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpOwpjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7CmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtCmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoIlVURi04IikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9CmxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbQpjb25uZWN0aW9uLmNvbm5lY3QoKTsKCmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCmRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKQpkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpCgppZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoIjIwMCIpKXsKICAgIGxvZy5kZWJ1ZyAidXJsOiAiICsgdXJsCiAgICBsb2cuZGVidWcgIlJlc3BvbnNlQ29kZToiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKQogICAgbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKICAgIGxvZy5kZWJ1ZyAiUmVzcG9uc2U6ICIgKyBjb25uZWN0aW9uCiAgICAKICAgIC8qUk9MTEJBQ0sqLwogICAgLypSaW1vemlvbmUgYWxsZWdhdG8gY29uc3VudGl2byBhcHBlbmEgY3JlYXRvKi8KICAgIC8qIEdldCBJbnNpZ2h0IElRTCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi8KICAgIENsYXNzIGlxbEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuSVFMRmFjYWRlIik7IAogICAgZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7CgogICAgLyogR2V0IEluc2lnaHQgT2JqZWN0IEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqLwogICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGUiKTsKICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpOwoKICAgIC8qIEdldCBJbnNpZ2h0IE9iamVjdCBUeXBlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqLwogICAgQ2xhc3Mgb2JqZWN0VHlwZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUZhY2FkZSIpOwogICAgZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTsKCiAgICAvKiBHZXQgSW5zaWdodCBPYmplY3QgQXR0cmlidXRlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqLwogICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSIpOwogICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTsKCiAgICBDbGFzcyBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5zZXJ2aWNlcy5tb2RlbC5mYWN0b3J5Lk9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Iik7CiAgICBkZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7CgogICAgLyogU3BlY2lmeSB0aGUgc2NoZW1hIGlkIGFzIHdlbGwgYXMgdGhlIElRTCB0aGF0IHdpbGwgZmV0Y2ggb2JqZWN0cy4gSW4gdGhpcyBjYXNlIGFsbCBvYmplY3RzIHdpdGggTmFtZSBtYXRjaGluZyB0aGUgdmFsdWVDRiwgYmUgc3VyZSB0byBpbmNsdWRlICIgYXJvdW5kIHZhbHVlICovCiAgICBkZWYgb2JqZWN0cyA9IGlxbEZhY2FkZS5maW5kT2JqZWN0c0J5SVFMQW5kU2NoZW1hKERCTywgIlwiIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArICJcIi5cIiIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5uYW1lJ10udG9TdHJpbmcoKSArICJcIiA9IFwiIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm9ianMuY29uc3VudGl2byddLnRvU3RyaW5nKCkgKyAiXCIgQU5EICIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSArICIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSAiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyAiKSIpOyAvLyBTZWUgdGhlIGNvbXBsZXRlIGxpc3Qgb2YgcG9zc2libGUgSVFMIG9uIHRoZSBJbnNpZ2h0IFF1ZXJ5IExhbmd1YWdlIGRvY3VtZW50YXRpb24gcGFnZQogICAgLyogSWYgdGhpcyBpcyBhIG1hbmRhdG9yeSBmaWVsZCB5b3Ugc2hvdWxkIGJlIGFibGUgdG8gZG8gdGhpczogKi8KICAgIGxvZy5pbmZvKCJJbnNpZ2h0IG9iamVjdDogIiArIG9iamVjdHNbMF0pOwogICAgCiAgICBpZihvYmplY3RzWzBdKXsKICAgICAgICAvKiBVUERBVEUgT0pCRUNUIERFTEVURUQgVkFMVUUgKi8KICAgICAgICBkZWYgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ob2JqZWN0c1swXS5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpICAKICAgICAgICBkZWYgdmFsdWUgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkKCiAgICAgICAgZGVmIHZhbHVlQmVhbiA9IG9iVHJpYWdlLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpCiAgICAgICAgdmFsdWVCZWFuLnNldFZhbHVlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlLmdldE9iamVjdFR5cGVBdHRyaWJ1dGVJZCgpKSwgdHJ1ZSkKICAgICAgICAvKkNsZWFuIGFjdHVhbCB2YWx1ZSovCiAgICAgICAgdmFsdWUuY2xlYXIoKQogICAgICAgIHZhbHVlLmFkZCh2YWx1ZUJlYW4pOwogICAgICAgIG9iVHJpYWdlLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWUpCgogICAgICAgIC8vVXBkYXRlIE9KQkVDVCBhdHRyaWJ1dGUgdmFsdWUKICAgICAgICB0cnkgewogICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5zdG9yZU9iamVjdEF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2UpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHsKICAgICAgICAgICAgbG9nLndhcm4oIkNvdWxkIG5vdCB1cGRhdGUgb2JqZWN0IGF0dHJpYnV0ZSBkdWUgdG8gdmFsaWRhdGlvbiBleGNlcHRpb246IiArIHZpZS5nZXRNZXNzYWdlKCkpOwogICAgICAgIH0KICAgIH0KICAgIAogICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dAogICAgbG9nLmRlYnVnICIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6ICIgKyBvdXRwdXRNc2cKCiAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKQogICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZykKICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgCiAgICBsb2cuZGVidWcgIm1lc3NhZ2U6ICIgKyAganNvbl9vYmplY3QubWVzc2FnZQoKICAgIGVMaXN0RXJyb3JzLmFkZCgiRSIpCiAgICBlTGlzdEVycm9ycy5hZGQoIlNFTkRNQUlMIikKICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArICIgIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkpCiAgICBlTGlzdEVycm9ycy5hZGQoanNvbl9vYmplY3QubWVzc2FnZSkKICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycykKICAgIAogICAgb3V0cHV0LmFkZChlTGlzdCkKICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3siRSI6IicgKyBvdXRwdXQudG9TdHJpbmcoKSArICcifScpCiAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oIkUiLCBvdXRwdXQudG9TdHJpbmcoKSkKfQ==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="6">
              <post-functions>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="append.value"></arg>
                  <arg name="maxAllowed-integerValue">50</arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.value">%%CURRENT_DATETIME%%</arg>
                  <arg name="field.name">customfield_22644</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">e5c66278-68bf-4160-8cc6-ca5e2c5da9cc</arg>
                  <arg name="FIELD_NOTES">YCFgVXBkYXRlIEZJTkFOQ0lBTF9TVEFURU1FTlRfU0VOVF9EQVRFIG9uIGxpbmtlZCBpc3N1ZXM=</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGlua1xuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZVxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5Jc3N1ZUluZGV4aW5nU2VydmljZSBcdGlzc3VlSW5kZXhpbmdTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KElzc3VlSW5kZXhpbmdTZXJ2aWNlKVxuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcbmRlZiBzZW5kTWFpbFRvID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zZW5kTWFpbFRvTGlua2VkJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBvbnNpdGVSZXBvcnREYXRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLndmT25zaXRlUmVwb3J0J10udG9TdHJpbmcoKSlbMF1cbmRlZiBzZW5kTWFpbFRvUmVjID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zZW5kTWFpbFRvUmVjaXBpZW50cyddLnRvU3RyaW5nKCkpWzBdXG5kZWYgc2VkTWFpbERhdGUgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfV0ZfRklOQU5DSUFMX1NUQVRFTUVOVF9UT19DVVNUT01FUlwiKVswXVxuZGVmIHJlbGF0ZXNJbklzc3VlTGluaz1mYWxzZVxuZGVmIHJlbGF0ZXNPdXRJc3N1ZUxpbms9ZmFsc2VcbmRlZiBsaW5rZWRUaWNrZXRzPW5ldyBBcnJheUxpc3QoKVxubG9nLmRlYnVnIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUbykudG9TdHJpbmcoKVxuZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXG5kZWYgbWlcblxuTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG5mb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxJbklzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcblxuICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpICYmIGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKS5zdGF0dXMubmFtZSA9PSBcIkNvbXBsZXRlZCB0byBiZSBDbG9zZWRcIil7XG4gICAgICAgIG1pID0gKE11dGFibGVJc3N1ZSkgaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpXG4gICAgICAgIHNlZE1haWxEYXRlLnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKSwgbmV3IE1vZGlmaWVkVmFsdWUoaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VkTWFpbERhdGUpLCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlZE1haWxEYXRlKSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcbiAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xuICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKSlcbiAgICAgICAgXG4gICAgICAgIC8qIFJFU1QgQVBJIHBlciBwdWxpemlhIGNhY2hlIGlzc3VlIGxpbmthdGEgKi9cbiAgICAgICAgcmVxdWVzdE1ldGhvZCA9IFwiR0VUXCI7XG4gICAgICAgIC8qU2NyaXB0IFZhcmlhYmxlcyovXG4gICAgICAgIC8vUGVyIHRlc3QgZGEgY29uc29sZVxuICAgICAgICAvL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTMyNTM1XCIpXG4gICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL2NsZWFyQ2FjaGUvdGlja2V0a2V5L1wiICsgaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpLmtleVxuICAgICAgICBVUkwgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgICAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbn1cbkxpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG5mb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG5cbiAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSAmJiBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKS5zdGF0dXMubmFtZSA9PSBcIkNvbXBsZXRlZCB0byBiZSBDbG9zZWRcIil7XG4gICAgICAgIG1pID0gKE11dGFibGVJc3N1ZSkgaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KClcbiAgICAgICAgc2VkTWFpbERhdGUudXBkYXRlVmFsdWUobnVsbCwgaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCksIG5ldyBNb2RpZmllZFZhbHVlKGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VkTWFpbERhdGUpLCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlZE1haWxEYXRlKSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcbiAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xuICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpKVxuICAgICAgICBcbiAgICAgICAgLyogUkVTVCBBUEkgcGVyIHB1bGl6aWEgY2FjaGUgaXNzdWUgbGlua2F0YSAqL1xuICAgICAgICByZXF1ZXN0TWV0aG9kID0gXCJHRVRcIjtcbiAgICAgICAgLypTY3JpcHQgVmFyaWFibGVzKi9cbiAgICAgICAgLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4gICAgICAgIC8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMzI1MzVcIilcbiAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vY2xlYXJDYWNoZS90aWNrZXRrZXkvXCIgKyBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKS5rZXlcbiAgICAgICAgVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICAgICAgSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgfVxuICAgIH1cbn0iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="671" name="Genera Offerta per Materiali da Preventivare" view="fieldscreen">
          <meta name="opsbar-sequence">10</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">20119</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_NOTES">YCFgT1A6IEdlbmVyYXppb25lIHRpY2tldCBkaSBwcmV2ZW50aXZhemlvbmUgLSBzb2xvIHNlIGNpIHNvbm8gT1BfUkVRVUlSRURfTUFURVJJQUxTIGUgc2UgT1BBQV9RVU9URV9USUNLRVQgPSBudWxs</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXIKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsCgpQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpCkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpCnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7Cglwcm9wZXJ0aWVzLmxvYWQoaXQpCn0KY2ZWYWx1ZXNbcHJvcGVydGllc1snY2YucmVxdWlyZWRNYXRlcmlhbHMnXV0gIT0gbnVsbCAmJiBjZlZhbHVlc1twcm9wZXJ0aWVzWydjZi5vZmZlckxpbmtlZElzc3VlJ11dID09IG51bGx8fHw=</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="6">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="field.existingAttachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="targetIssueTypeDefinedByCfSelection"></arg>
                  <arg name="issueTypeId">13001</arg>
                  <arg name="scopeType">ISSUE_LINKING</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="field.attachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="targetIssueType">SELECTED_ISSUE_TYPE</arg>
                  <arg name="scopeSource-jql"></arg>
                  <arg name="createIssueAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.copyTransitionComment">false</arg>
                  <arg name="targetProjectType">SAME</arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="transitionAttachmentsOperation">copy</arg>
                  <arg name="field.issueAssignTo">ASSIGN_TO_UNASSIGNED</arg>
                  <arg name="targetProjectSelectedCustomField"></arg>
                  <arg name="destination-scopeTarget">LINK_END</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiescreatelinkedissue-function</arg>
                  <arg name="scopeDestination-linkEnd">10003:INWARD</arg>
                  <arg name="field.enablingCustomFieldId">customfield_22609</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="subFunctions">[{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22609&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22658&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22600&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22600&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22822&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22822&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22601&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22601&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22602&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22602&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22813&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22813&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23235&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23235&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22651&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22651&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22700&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22700&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22607&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22607&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;priority&quot;,&quot;destinationFieldId&quot;:&quot;priority&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22814&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22814&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23203&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23203&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23401&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23237&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_21909&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21909&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22649&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22629&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Yes&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22681&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23401&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21908&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22716&quot;,&quot;destinationFieldId&quot;:&quot;summary&quot;}}]</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.createlinkedissue.CreateLinkedIssueFunction</arg>
                  <arg name="projectId">11228</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">4fd7d272cffa1401b740b9188cdaeaaf5185c323</arg>
                  <arg name="FIELD_NOTES">YCFgRlNNOiBVcGRhdGUgc3RhdHVzIG9uIGp1c3QgY3JlYXRlZCBSZXBhaXIgUXVvdGF0aW9uIGlzc3Vl</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnlcbmltcG9ydCBncm9vdnkuanNvbi5Kc29uQnVpbGRlclxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29uZmlnLnV0aWwuSmlyYUhvbWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvblxuaW1wb3J0IGphdmEudGV4dC5TaW1wbGVEYXRlRm9ybWF0XG5pbXBvcnQgamF2YS50ZXh0LlBhcnNlRXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbmZpZy5wcm9wZXJ0aWVzLkFQS2V5c1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLkxpbmtDb2xsZWN0aW9uSW1wbDtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbms7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxubG9nLmRlYnVnIFwiUGVyY29yc28gcHJvcGVydGllczogXCIgKyBTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5cbi8qU2NyaXB0IFZhcmlhYmxlcyovXG4vL1BlciBQb3N0IEZ1bmN0aW9uXG5pc3N1ZSA9IGlzc3VlXG4vL1BlciB0ZXN0IGRhIGNvbnNvbGVcbi8vSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpXG4vL2lzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0yNTdcIilcbmxvZy5kZWJ1ZyBcIklzc3VlOiBcIiArIGlzc3VlXG5kZWYgZm91bmQ9ZmFsc2VcbmRlZiBsaW5rZWRJc3N1ZVxuZGVmIGlzc3VlU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlU2VydmljZSgpXG5cbmRlZiB0cmFuc2l0aW9uQ2hlY2sgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmNoZWNrQW5kQ29uZmlybSddLnRvU3RyaW5nKCkpWzBdXG5kZWYgb2ZmZXJGcm9tUmVwYWlyID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1RLVF9HRU5FUkFURURfRlJPTV9SRVBBSVJcIilbMF1cblxuZGVmIGdyb3VwTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEdyb3VwTWFuYWdlcigpXG5kZWYgdXNlck1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRVc2VyTWFuYWdlcigpXG5kZWYgY3VycmVudFVzZXJUcmFuc2l0aW9uID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0NVUlJFTlRfVVNFUl9HRU5FUkFURV9SRVBBSVJfUVVPVEVcIilbMF1cblN0cmluZyBzdXBwbGllckFkbSA9IFwiT1BST0xFX0FBX1NVUFBMSUVSX0FETVwiXG5TdHJpbmcgc3VwcGxpZXJUZWNoID0gXCJPUFJPTEVfQUFfU1VQUExJRVJfVEVDSFwiXG5cbkxpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKTtcbmxvZy5kZWJ1ZyBcImFsbEluSXNzdWVMaW5rOiBcIiArIGFsbEluSXNzdWVMaW5rXG5mb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxJbklzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcbiAgICBkZWYgbGlua2VkSXNzdWVUZW1wID0gaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpXG4gICAgU3RyaW5nIHR5cGUgPSBsaW5rZWRJc3N1ZVRlbXAuZ2V0SXNzdWVUeXBlKCkuZ2V0TmFtZSgpO1xuXG4gICAgbG9nLmRlYnVnKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKSkgXG4gICAgXG4gICAgaWYoaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpIT1udWxsICYmIGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgbGlua2VkSXNzdWU9bGlua2VkSXNzdWVUZW1wXG4gICAgICAgIGxvZy5kZWJ1ZyBcImxpbmtlZCBpc3N1ZTogXCIgKyBsaW5rZWRJc3N1ZVxuICAgICAgICAvL2xvZy5kZWJ1ZyBcImxpbmtlZCBpc3N1ZSBzdGF0dXM6IFwiICsgbGlua2VkSXNzdWUuZ2V0U3RhdHVzT2JqZWN0KCkubmFtZVxuICAgICAgICBpZihsaW5rZWRJc3N1ZS5nZXRTdGF0dXNPYmplY3QoKS5uYW1lID09IHByb3BlcnRpZXNbJ3dmLm9wZW4nXS50b1N0cmluZygpKXtcbiAgICAgICAgICAgIGZvdW5kPXRydWVcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vbG9nLmRlYnVnIFwiZm91bmQ6IFwiICsgZm91bmRcblxuaWYoZm91bmQpe1xuXHRkZWYgZGVzdFN0YXR1c09iamVjdCA9IGxpbmtlZElzc3VlLmdldFN0YXR1c09iamVjdCgpXG4gICAgLy9sb2cuZGVidWcgXCJkZXN0U3RhdHVzT2JqZWN0OiBcIiArIGRlc3RTdGF0dXNPYmplY3RcbiAgICAvL2xvZy5kZWJ1ZyBcImxpbmtlZElzc3VlOiBcIiArIGxpbmtlZElzc3VlXG4gICAgZGVmIHVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcblx0Ly8gSXMgdGhlIHN0YXR1cyBvZiB0aGUgbGlua2VkIGlzc3VlIFwiSW5zdGFsbGluZ1wiID9cbiAgICBcbiAgICBkZWYgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuY3VzdG9tRmllbGRNYW5hZ2VyXG4gICAgZGVmIG9mZmVySXNzdWVGaWVsZCA9IGN1c3RvbUZpZWxkTWFuYWdlci5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yub2ZmZXJMaW5rZWRJc3N1ZSddLnRvU3RyaW5nKCkpLmZpcnN0KClcbiAgICBkZWYgbWFpbnRlbmFuY2VJc3N1ZUZpZWxkID0gY3VzdG9tRmllbGRNYW5hZ2VyLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5tYWludGVuYW5jZUxpbmtlZElzc3VlJ10gPyBwcm9wZXJ0aWVzWydjZi5tYWludGVuYW5jZUxpbmtlZElzc3VlJ10udG9TdHJpbmcoKSA6IFwiT1BfTUFJTlRFTkFOQ0VfTElOS0VEX0lTU1VFXCIpLmZpcnN0KClcbiAgICBkZWYgb2ZmZXJJc3N1ZUJvb2xGaWVsZCA9IGN1c3RvbUZpZWxkTWFuYWdlci5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yub2ZmZXJUa3QnXS50b1N0cmluZygpKS5maXJzdCgpXG4gICAgXG4gICAgLy9TZXQgT1BBQV9PRkZFUl9US1Q9WWVzIG9uIGp1c3QgY3JlYXRlZCBsaW5rZWRJc3N1ZVxuICAgIGRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlXG5cbiAgICBkZWYgZmllbGRDb25maWcgPSBvZmZlcklzc3VlQm9vbEZpZWxkLmdldFJlbGV2YW50Q29uZmlnKGxpbmtlZElzc3VlKVxuICAgIC8vbG9nLndhcm4gXCJmaWVsZENvbmZpZzogXCIgKyBmaWVsZENvbmZpZ1xuICAgIGRlZiBjZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09IFwiWWVzXCIgfVxuICAgIGxvZy5kZWJ1ZyBcInRyYW5zaXRpb24gZmllbGQgdmFsdWU6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXJyZW50VXNlclRyYW5zaXRpb24pXG4gICAgLy9sb2cuZGVidWcgXCJjdXJyZW50VXNlclRyYW5zaXRpb246IFwiICsgY3VycmVudFVzZXJUcmFuc2l0aW9uXG4gICAgZGVmIHVzZXJUcmFuc2l0aW9uID0gdXNlck1hbmFnZXIuZ2V0VXNlckJ5TmFtZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1cnJlbnRVc2VyVHJhbnNpdGlvbikudG9TdHJpbmcoKSlcblx0bG9nLmRlYnVnIFwidXNlclRyYW5zaXRpb246IFwiICsgdXNlclRyYW5zaXRpb25cbiAgICBpZiAodXNlclRyYW5zaXRpb24gIT0gbnVsbCAmJiAoZ3JvdXBNYW5hZ2VyLmdldFVzZXJzSW5Hcm91cChzdXBwbGllckFkbSkuY29udGFpbnModXNlclRyYW5zaXRpb24pIHx8IGdyb3VwTWFuYWdlci5nZXRVc2Vyc0luR3JvdXAoc3VwcGxpZXJUZWNoKS5jb250YWlucyh1c2VyVHJhbnNpdGlvbikpKSB7XG4gICAgICAgIC8vIFRyYW5zaXRpb24gZXhlY3V0ZWQgYnkgZXh0ZXJuYWwgdXNlciAtLT4gdG8gYmUgYWRkZWQgYWxzbyBpbnRlcm5hbCB0ZWNocyByb2xlIGdyb3Vwc1xuICAgICAgICAvLyBFbWFpbCBoYXMgbm90IHRvIGJlIHNlbnRcbiAgICAgICAgLy8gU04gd2lsbCBiZSBjcmVhdGVkIGFzIHNvb24gYXMgdGhlIHF1b3RhdGlvbiBoYXMgYmVlbiBjb25maXJtZWQgLSB0byBiZSBjaGVja2VkIHdoZW4gdG8gY3JlYXRlIFNOIGlmIG5vIHF1b3RhdGlvbiBmcm9tIHN1cHBsaWVyIGlzIG5lZWRlZCAtIHdoZW4gdGhlIHF1b3RhdGlvbiBoYXMgYmVlbiBzZW50IHRvIHRoZSBjdXN0b21lcj9cbiAgICAgICAgbG9nLmRlYnVnIFwiaW4gdXRlbnRlIHN1cHBsaWVyXCJcbiAgICAgICAgdHJhbnNpdGlvbkNoZWNrLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjayksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG4gICAgICAgIG9mZmVyRnJvbVJlcGFpci51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShvZmZlckZyb21SZXBhaXIpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuXHR9XG4gICAgb2ZmZXJJc3N1ZUJvb2xGaWVsZC51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShvZmZlcklzc3VlQm9vbEZpZWxkKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcblx0bWFpbnRlbmFuY2VJc3N1ZUZpZWxkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG1haW50ZW5hbmNlSXNzdWVGaWVsZCksIGlzc3VlLmtleS50b1N0cmluZygpKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuICAgIFxuICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTtcbiAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGxpbmtlZElzc3VlKSAgICBcbiAgICBcbiAgICAvL2xvZy5kZWJ1ZyBcIm9mZmVySXNzdWVGaWVsZDogXCIgKyBvZmZlcklzc3VlRmllbGRcbiAgICAvL2xvZy5kZWJ1ZyBcImxpbmtlZElzc3VlOiBcIiArIGxpbmtlZElzc3VlXG4gICAgb2ZmZXJJc3N1ZUZpZWxkLnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG9mZmVySXNzdWVGaWVsZCksIGxpbmtlZElzc3VlLmtleS50b1N0cmluZygpKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuICAgIC8vbG9nLmRlYnVnIFwidXBkYXRlZDogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG9mZmVySXNzdWVGaWVsZClcbiAgICBcbiAgICBpZiAoZGVzdFN0YXR1c09iamVjdC5uYW1lID09IHByb3BlcnRpZXNbJ3dmLm9wZW4nXS50b1N0cmluZygpKSB7XG4gICAgICAgIC8vIFByZXBhcmUgb3VyIGlucHV0IGZvciB0aGUgdHJhbnNpdGlvblxuICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKVxuICAgICAgICBpc3N1ZUlucHV0UGFyYW1ldGVycy53aXRoIHtcbiAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayh0cnVlKVxuICAgICAgICB9XG4gICAgICAgIC8vIFZhbGlkYXRlIHRyYW5zaXRpb25pbmcgdGhlIGxpbmtlZCBpc3N1ZSB0byBcIlNpZ25zIE5lZWRlZFwiXG4gICAgICAgIGRlZiB2YWxpZGF0aW9uUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgKHByb3BlcnRpZXNbJ3dmLnRyLmFza1F1b3RlJ10gPyBwcm9wZXJ0aWVzWyd3Zi50ci5hc2tRdW90ZSddLnRvSW50ZWdlcigpIDogMTEpLCBpc3N1ZUlucHV0UGFyYW1ldGVycylcbiAgICAgICAgaWYgKHZhbGlkYXRpb25SZXN1bHQuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSB0cmFuc2l0aW9uXG4gICAgICAgICAgICBkZWYgaXNzdWVSZXN1bHQgPSBpc3N1ZVNlcnZpY2UudHJhbnNpdGlvbih1c2VyLCB2YWxpZGF0aW9uUmVzdWx0KVxuICAgICAgICAgICAgaWYgKCEgaXNzdWVSZXN1bHQuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnKFwiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2Rlc3RJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnKFwiVHJhbnNhemlvbmUgZmF0dGFcIilcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyhcIkNvdWxkIG5vdCB0cmFuc2l0aW9uIHRhc2sgJHtkZXN0SXNzdWUua2V5fSwgZXJyb3JzOiAke3ZhbGlkYXRpb25SZXN1bHQuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICB9XG4gICAgfVxuICAgIFxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZQppbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb24KaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3IKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXIKaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyCmltcG9ydCBncm9vdnkuanNvbi5Kc29uU2x1cnBlcgppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb25maWcudXRpbC5KaXJhSG9tZQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvbgppbXBvcnQgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQKaW1wb3J0IGphdmEudGV4dC5QYXJzZUV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbmZpZy5wcm9wZXJ0aWVzLkFQS2V5cwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuTGlua0NvbGxlY3Rpb25JbXBsOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWUKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS51dGlsLkRlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CmRlZiBDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRykKSXNzdWVJbmRleGluZ1NlcnZpY2UgCWlzc3VlSW5kZXhpbmdTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KElzc3VlSW5kZXhpbmdTZXJ2aWNlKQoKLypTY3JpcHQgVmFyaWFibGVzKi8KLy9QZXIgUG9zdCBGdW5jdGlvbgppc3N1ZSA9IGlzc3VlCi8vUGVyIHRlc3QgZGEgY29uc29sZQovL0lzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKQovL2lzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKCJPUFVULTI1NyIpCmxvZy5kZWJ1ZyAiSXNzdWU6ICIgKyBpc3N1ZQpkZWYgZm91bmQ9ZmFsc2UKZGVmIGxpbmtlZElzc3VlCmRlZiBpc3N1ZVNlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZVNlcnZpY2UoKQoKTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpOwpsb2cuZGVidWcgImFsbEluSXNzdWVMaW5rOiAiICsgYWxsSW5Jc3N1ZUxpbmsKZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykgewogICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTsKICAgIGRlZiBsaW5rZWRJc3N1ZVRlbXAgPSBpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkKICAgIFN0cmluZyB0eXBlID0gbGlua2VkSXNzdWVUZW1wLmdldElzc3VlVHlwZSgpLmdldE5hbWUoKTsKCiAgICBsb2cuZGVidWcoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpKSAKICAgIAogICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNUcmlnZ2VyJ10udG9TdHJpbmcoKSkpewogICAgICAgIGZvdW5kPXRydWUKICAgICAgICBsaW5rZWRJc3N1ZT1saW5rZWRJc3N1ZVRlbXAKICAgIH0KfQpsb2cuZGVidWcgImZvdW5kOiAiICsgZm91bmQKCmlmKGZvdW5kKXsKCWRlZiBkZXN0U3RhdHVzT2JqZWN0ID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzT2JqZWN0KCkKICAgIGxvZy5kZWJ1ZyAiZGVzdFN0YXR1c09iamVjdDogIiArIGRlc3RTdGF0dXNPYmplY3QKICAgIGxvZy5kZWJ1ZyAibGlua2VkSXNzdWU6ICIgKyBsaW5rZWRJc3N1ZQogICAgZGVmIHVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKCS8vIElzIHRoZSBzdGF0dXMgb2YgdGhlIGxpbmtlZCBpc3N1ZSAiSW5zdGFsbGluZyIgPwogICAgCiAgICBkZWYgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuY3VzdG9tRmllbGRNYW5hZ2VyCiAgICBkZWYgb2ZmZXJJc3N1ZUZpZWxkID0gY3VzdG9tRmllbGRNYW5hZ2VyLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5vZmZlckxpbmtlZElzc3VlJ10udG9TdHJpbmcoKSkuZmlyc3QoKQogICAgZGVmIG1haW50ZW5hbmNlSXNzdWVGaWVsZCA9IGN1c3RvbUZpZWxkTWFuYWdlci5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YubWFpbnRlbmFuY2VMaW5rZWRJc3N1ZSddID8gcHJvcGVydGllc1snY2YubWFpbnRlbmFuY2VMaW5rZWRJc3N1ZSddLnRvU3RyaW5nKCkgOiAiT1BfTUFJTlRFTkFOQ0VfTElOS0VEX0lTU1VFIikuZmlyc3QoKQogICAgZGVmIG9mZmVySXNzdWVCb29sRmllbGQgPSBjdXN0b21GaWVsZE1hbmFnZXIuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLm9mZmVyVGt0J10udG9TdHJpbmcoKSkuZmlyc3QoKQogICAgCiAgICAvL1NldCBPUEFBX09GRkVSX1RLVD1ZZXMgb24ganVzdCBjcmVhdGVkIGxpbmtlZElzc3VlCiAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlCgogICAgZGVmIGZpZWxkQ29uZmlnID0gb2ZmZXJJc3N1ZUJvb2xGaWVsZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSkKICAgIGxvZy53YXJuICJmaWVsZENvbmZpZzogIiArIGZpZWxkQ29uZmlnCiAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICBvZmZlcklzc3VlQm9vbEZpZWxkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG9mZmVySXNzdWVCb29sRmllbGQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoJbWFpbnRlbmFuY2VJc3N1ZUZpZWxkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG1haW50ZW5hbmNlSXNzdWVGaWVsZCksIGlzc3VlLmtleS50b1N0cmluZygpKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQogICAgCiAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7CiAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGxpbmtlZElzc3VlKSAgICAKICAgIAogICAgbG9nLmRlYnVnICJvZmZlcklzc3VlRmllbGQ6ICIgKyBvZmZlcklzc3VlRmllbGQKICAgIGxvZy5kZWJ1ZyAibGlua2VkSXNzdWU6ICIgKyBsaW5rZWRJc3N1ZQogICAgb2ZmZXJJc3N1ZUZpZWxkLnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG9mZmVySXNzdWVGaWVsZCksIGxpbmtlZElzc3VlLmtleS50b1N0cmluZygpKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQogICAgbG9nLmRlYnVnICJ1cGRhdGVkOiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShvZmZlcklzc3VlRmllbGQpCiAgICAKICAgIGlmIChkZXN0U3RhdHVzT2JqZWN0Lm5hbWUgPT0gcHJvcGVydGllc1snd2Yub3BlbiddLnRvU3RyaW5nKCkpIHsKICAgICAgICAvLyBQcmVwYXJlIG91ciBpbnB1dCBmb3IgdGhlIHRyYW5zaXRpb24KICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKQogICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGggewogICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2sodHJ1ZSkKICAgICAgICB9CiAgICAgICAgLy8gVmFsaWRhdGUgdHJhbnNpdGlvbmluZyB0aGUgbGlua2VkIGlzc3VlIHRvICJTaWducyBOZWVkZWQiCiAgICAgICAgZGVmIHZhbGlkYXRpb25SZXN1bHQgPSBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCAocHJvcGVydGllc1snd2YudHIuYXNrUXVvdGUnXSA/IHByb3BlcnRpZXNbJ3dmLnRyLmFza1F1b3RlJ10udG9JbnRlZ2VyKCkgOiAxMSksIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKQogICAgICAgIGlmICh2YWxpZGF0aW9uUmVzdWx0LmlzVmFsaWQoKSkgewogICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIHZhbGlkYXRpb25SZXN1bHQpCiAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgbG9nLmRlYnVnKCJGYWlsZWQgdG8gdHJhbnNpdGlvbiB0YXNrICR7ZGVzdElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICBsb2cuZGVidWcoIlRyYW5zYXppb25lIGZhdHRhIikKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGxvZy5kZWJ1ZygiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2Rlc3RJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7dmFsaWRhdGlvblJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICB9CiAgICB9CiAgICAKfQ==</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE"></arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_23401</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="791" name="Genera Rapporto di Intervento FAAC" view="fieldscreen">
          <meta name="opsbar-sequence">10</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">19910</meta>
          <restrict-to>
            <conditions type="AND">
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">da6b0975-6a4b-46f7-a46f-15e624ccc794</arg>
                <arg name="FIELD_NOTES">YCFgQXZhaWxhYmxlIG9ubHkgaWYgbm8gT05TSVRFIFJFUE9SVCBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBleGlzdHMgb24gdGhlIHRpY2tldA==</arg>
                <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxubG9nLmRlYnVnIFwiT25TaXRlIFJlcG9ydCBwZXIgaXNzdWU6IFwiICsgaXNzdWUua2V5XG4vKiBSRVNUIEFQSSBwZXIgR2VuZXJhemlvbmUgQWxsZWdhdG8gUmFwcG9ydG8gZGkgSW50ZXJ2ZW50byAqL1xucmVxdWVzdE1ldGhvZCA9IFwiUFVUXCI7XG4vKlNjcmlwdCBWYXJpYWJsZXMqL1xuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0xNDA2MlwiKVxuXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5cbi8qUmltb3ppb25lIGFsbGVnYXRvIHJhcHBvcnRvIGRpIGludGVydmVudG8gYXBwZW5hIGNyZWF0byovXG4vKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG5cbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTtcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcblxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcblxuQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG5kZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG5cbi8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSBcIiBhcm91bmQgdmFsdWUgKi9cbmRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5OYW1lIExJS0UgXFxcIlJhcHBvcnRvIGRpIGludGVydmVudG9cXFwiIEFORCBBVVRPX0dFTkVSQVRFRD10cnVlIEFORCBcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpICsgXCIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSBcIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIpXCIpOyAvLyBTZWUgdGhlIGNvbXBsZXRlIGxpc3Qgb2YgcG9zc2libGUgSVFMIG9uIHRoZSBJbnNpZ2h0IFF1ZXJ5IExhbmd1YWdlIGRvY3VtZW50YXRpb24gcGFnZVxuLyogSWYgdGhpcyBpcyBhIG1hbmRhdG9yeSBmaWVsZCB5b3Ugc2hvdWxkIGJlIGFibGUgdG8gZG8gdGhpczogKi9cbmxvZy5kZWJ1ZyBcIklRTDogXCIgKyBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5OYW1lIExJS0UgXFxcIlJhcHBvcnRvIGRpIGludGVydmVudG9cXFwiIEFORCBcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpICsgXCIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSBcIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIpXCJcblxuLyohIURhIHJpbXVvdmVyZSBhcHBlbmEgcmlzb2x0aSBpIGJ1ZyEhKi9cbmlmKChvYmplY3RzID09IG51bGwgfHwgb2JqZWN0cy5zaXplPT0wKSAvKiYmICFpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0LnBsYW5uZWRNYWludGVuYW5jZSddKSovKXtcbiAgICBwYXNzZXNDb25kaXRpb24gPSB0cnVlXG59ZWxzZXtcbiAgICBwYXNzZXNDb25kaXRpb24gPSBmYWxzZVxufVxuIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.CustomScriptCondition</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">c83eed7c-052e-4c06-ac5e-c2925515cc02</arg>
                <arg name="FIELD_NOTES">YCFgTWFpbnRlbmFuY2UgVGlja2V0IE9SIFBNIFRpY2tldA==</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnTWFpbnRlbmFuY2UgVGlja2V0JyB8fCBpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXQnIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">9fe0fa5191d4b6a91ba7485380ff8d0a9fda8fe7</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IFJFU1QgQVBJOiBPUCBnZW5lcmF6aW9uZSBSYXBwb3J0byBkaSBpbnRlcnZlbnRv</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxubG9nLmRlYnVnIFwiT25TaXRlIFJlcG9ydCBwZXIgaXNzdWU6IFwiICsgaXNzdWUua2V5XG4vKiBSRVNUIEFQSSBwZXIgR2VuZXJhemlvbmUgQWxsZWdhdG8gUmFwcG9ydG8gZGkgSW50ZXJ2ZW50byAqL1xucmVxdWVzdE1ldGhvZCA9IFwiUFVUXCI7XG4vKlNjcmlwdCBWYXJpYWJsZXMqL1xuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0xNDA2MlwiKVxuXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5cbi8qUmltb3ppb25lIGFsbGVnYXRvIHJhcHBvcnRvIGRpIGludGVydmVudG8gYXBwZW5hIGNyZWF0byovXG4vKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG5cbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTtcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcblxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcblxuQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG5kZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG5cbi8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSBcIiBhcm91bmQgdmFsdWUgKi9cbmRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5OYW1lIExJS0UgXFxcIlJhcHBvcnRvIGRpIGludGVydmVudG9cXFwiIEFORCBBVVRPX0dFTkVSQVRFRCA9IHRydWUgQU5EIFwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyBcIiE9dHJ1ZSBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleSA9IFwiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIilcIik7IC8vIFNlZSB0aGUgY29tcGxldGUgbGlzdCBvZiBwb3NzaWJsZSBJUUwgb24gdGhlIEluc2lnaHQgUXVlcnkgTGFuZ3VhZ2UgZG9jdW1lbnRhdGlvbiBwYWdlXG4vKiBJZiB0aGlzIGlzIGEgbWFuZGF0b3J5IGZpZWxkIHlvdSBzaG91bGQgYmUgYWJsZSB0byBkbyB0aGlzOiAqL1xubG9nLmRlYnVnIFwiSVFMOiBcIiArIFwiXFxcIlwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuY2F0ZWdvcnlSZWYnXS50b1N0cmluZygpICsgXCJcXFwiLk5hbWUgTElLRSBcXFwiUmFwcG9ydG8gZGkgaW50ZXJ2ZW50b1xcXCIgQU5EIFwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyBcIiE9dHJ1ZSBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleSA9IFwiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIilcIlxuXG4vKiEhRGEgcmltdW92ZXJlIGFwcGVuYSByaXNvbHRpIGkgYnVnISEqL1xuaWYoKG9iamVjdHMgPT0gbnVsbCB8fCBvYmplY3RzLnNpemU9PTApIC8qJiYgIWlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQucGxhbm5lZE1haW50ZW5hbmNlJ10pKi8pe1xuICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL0FBL3RpY2tldC9cIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIvYXR0YWNobWVudC9vbnNpdGVcIlxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVcmw6IFwiICsgYmFzZVVSTFxuXG4gICAgVVJMIHVybFxuICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcblxuICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkdFTkVSQVRFLU9OU0lURVJFUE9SVFwiKVxuICAgICAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICB9XG5cbn1cbiIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeQppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQpDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRykKCklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTsKQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpOwpkZWYgcmVxdWVzdE1ldGhvZApkZWYgYmFzZVVSTApsb2cuZGVidWcgIk9uU2l0ZSBSZXBvcnQgcGVyIGlzc3VlOiAiICsgaXNzdWUua2V5Ci8qIFJFU1QgQVBJIHBlciBHZW5lcmF6aW9uZSBBbGxlZ2F0byBSYXBwb3J0byBkaSBJbnRlcnZlbnRvICovCnJlcXVlc3RNZXRob2QgPSAiUFVUIjsKCmJhc2VVUkwgPSAiaHR0cDovLyIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArICIvb3AvcmVzdC9hdXRvbWF0aW9uL0FBL3RpY2tldC8iICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyAiL2F0dGFjaG1lbnQvb25zaXRlIgpsb2cuZGVidWcgImJhc2VVcmw6ICIgKyBiYXNlVVJMCgpVUkwgdXJsCnVybCA9IG5ldyBVUkwoYmFzZVVSTCkKSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpOwpjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eSgiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL2pzb24iKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoIkFjY2VwdCIsICIqLyoiKTsKY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTsKY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpOwpjb25uZWN0aW9uLmNvbm5lY3QoKTsKbG9nLmRlYnVnICJSZXNwb25zZUNvZGU6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkKbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKCmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCmRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKQpkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpCgppZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoIjIwMCIpKXsKICAgIGxvZy5kZWJ1ZyAidXJsOiAiICsgdXJsCiAgICBsb2cuZGVidWcgIlJlc3BvbnNlQ29kZToiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKQogICAgbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKICAgIGVMaXN0RXJyb3JzLmFkZCgiRSIpCiAgICBlTGlzdEVycm9ycy5hZGQoIkdFTkVSQVRFLU9OU0lURVJFUE9SVCIpCiAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyAiICIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpKQogICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncykKICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycykKCiAgICBvdXRwdXQuYWRkKGVMaXN0KQogICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigneyJFIjoiJyArIG91dHB1dC50b1N0cmluZygpICsgJyJ9JykKICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiRSIsIG91dHB1dC50b1N0cmluZygpKQp9Cg==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">45747608-2046-4623-a20b-8410265ef0c3</arg>
              <arg name="FIELD_NOTES">YCFgUkVTVCBBUEk6IEdlbmVyYSByYXBwb3J0byBkaSBpbnRlcnZlbnRvIGNvbiB0ZW1wbGF0ZQ==</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGlua1xuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbi8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMzI1NTFcIilcblxuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuZGVmIHJlcXVlc3RNZXRob2RcbmRlZiBiYXNlVVJMXG5cbmRlZiB0a3RWaXNpYmlsaXR5ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEtUX1ZJU0lCSUxJVFlfS0VZXCIpXG5kZWYgdGVtcGxhdGVJZFxuaW50IERCTyA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuZGJvLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuXG5kZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuXG4vKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG4vKiBHZXQgSW5zaWdodCBPYmplY3QgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7XG5kZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBUeXBlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xuQ2xhc3Mgb2JqZWN0VHlwZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVGYWNhZGVcIik7XG5kZWYgb2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpO1xuLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbkNsYXNzIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5zZXJ2aWNlcy5tb2RlbC5mYWN0b3J5Lk9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5XCIpO1xuZGVmIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MpO1xuXG5kZWYgdGt0S2V5ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0a3RWaXNpYmlsaXR5KVswXVxuZGVmIHRrdE9iaktleSA9IHRrdEtleS50b1N0cmluZygpLnN1YnN0cmluZyh0a3RLZXkudG9TdHJpbmcoKS5sYXN0SW5kZXhPZignKCcpKzEsdGt0S2V5LnRvU3RyaW5nKCkubGFzdEluZGV4T2YoJyknKSlcblxuZGVmIGNvbXBhbnkgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGt0S2V5LmdldElkKCksIFwiQ09NUEFOWV9SRUZcIikuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpO1xubG9nLmRlYnVnIFwiY29tcGFueTogXCIgKyBjb21wYW55WzBdLmdldFZhbHVlKClcblxuZGVmIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBhbnlbMF0uZ2V0VmFsdWUoKSwgcHJvcGVydGllc1snaW9iai5jb250YWN0LmRiby5uYW1lJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpICBcbmRlZiBjb21wYW55TmFtZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxubG9nLmRlYnVnIFwiY29tcGFueU5hbWU6IFwiICsgY29tcGFueU5hbWVbMF0udmFsdWVcblxub2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcGFueVswXS5nZXRWYWx1ZSgpLCBcIkRFRkFVTFRfTEFOR1VBR0VcIikuY3JlYXRlTXV0YWJsZSgpICBcbmRlZiBkZWZMYW5ndWFnZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxubG9nLmRlYnVnIFwiZGVmTGFuZ3VhZ2U6IFwiICsgZGVmTGFuZ3VhZ2VbMF0udmFsdWVcblxuZGVmIG9iamVjdHMgPSBpcWxGYWNhZGUuZmluZE9iamVjdHNCeUlRTEFuZFNjaGVtYShEQk8sIFwiXFxcIlwiICsgKHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmF0dGFjaG1lbnRDYXRlZ29yeSddID8gcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuYXR0YWNobWVudENhdGVnb3J5J10udG9TdHJpbmcoKSA6IFwiQVRUQUNITUVOVF9DQVRFR09SWVwiKSArIFwiXFxcIi5cXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5uYW1lJ10udG9TdHJpbmcoKSArIFwiXFxcIiA9IFxcXCJcIiArIFwiUmFwcG9ydG8gZGkgaW50ZXJ2ZW50byAoRkFBQylcIiArIFwiXFxcIiBBTkQgXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSArIFwiIT10cnVlIEFORCBDT01QQU5ZIElTIE5PVCBFTVBUWSBBTkQgQ09NUEFOWS5OYW1lID0gXFxcIlwiICsgY29tcGFueU5hbWVbMF0udmFsdWUgKyBcIlxcXCIgQU5EIElTU1VFX1RZUEU9XFxcIlwiICsgaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZSArIFwiXFxcIiBBTkQgTEFOR1VBR0UgPSBcXFwiXCIgKyBkZWZMYW5ndWFnZVswXS52YWx1ZSArIFwiXFxcIlwiKTsgLy8gU2VlIHRoZSBjb21wbGV0ZSBsaXN0IG9mIHBvc3NpYmxlIElRTCBvbiB0aGUgSW5zaWdodCBRdWVyeSBMYW5ndWFnZSBkb2N1bWVudGF0aW9uIHBhZ2VcbmxvZy5pbmZvKFwiSW5zaWdodCBvYmplY3Q6IFwiICsgb2JqZWN0c1swXSk7XG5sb2cuZGVidWcgXCJcXFwiXCIgKyAocHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuYXR0YWNobWVudENhdGVnb3J5J10gPyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5hdHRhY2htZW50Q2F0ZWdvcnknXS50b1N0cmluZygpIDogXCJBVFRBQ0hNRU5UX0NBVEVHT1JZXCIpICsgXCJcXFwiLlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm5hbWUnXS50b1N0cmluZygpICsgXCJcXFwiID0gXFxcIlwiICsgXCJSYXBwb3J0byBkaSBpbnRlcnZlbnRvIChGQUFDKVwiICsgXCJcXFwiIEFORCBcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpICsgXCIhPXRydWUgQU5EIENPTVBBTlkgSVMgTk9UIEVNUFRZIEFORCBDT01QQU5ZLk5hbWUgPSBcXFwiXCIgKyBjb21wYW55TmFtZVswXS52YWx1ZSArIFwiXFxcIiBBTkQgSVNTVUVfVFlQRT1cXFwiXCIgKyBpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lICsgXCJcXFwiIEFORCBMQU5HVUFHRSA9IFxcXCJcIiArIGRlZkxhbmd1YWdlWzBdLnZhbHVlICsgXCJcXFwiXCJcblxuaWYoIW9iamVjdHNbMF0pe1xuICAgIC8qTmVzc3VuIGZpbGUgaW5kaXZpZHVhdG8gcmVzdGl0dWlzY28gZXJyb3JlICovXG4gICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgIGVMaXN0RXJyb3JzLmFkZChcIk1JU1NJTkctT05TSVRFUkVQT1JULVRFTVBMQVRFXCIpXG4gICAgZUxpc3RFcnJvcnMuYWRkKG51bGwpXG4gICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9Jylcbn1cblxuaWYob2JqZWN0c1swXSl7XG4gICAgbG9nLmRlYnVnIFwidGVtcGxhdGUgZGEgdXNhcmU6IFwiICsgb2JqZWN0c1swXS5nZXRJZCgpXG4gICAgdGVtcGxhdGVJZD1vYmplY3RzWzBdLmdldElkKClcbn1cblxuXG4vKiBSRVNUIEFQSSBwZXIgR2VuZXJhemlvbmUgUmFwcG9ydG8gZGkgaW50ZXJ2ZW50byAqL1xucmVxdWVzdE1ldGhvZCA9IFwiUFVUXCI7XG5cbi8qUGFyYW1ldGVyczogdHlwZSBpcyBvcHRpb25hbCAtIGl0IGNhbiBiZSBzZXQgdG8gV29yZCBvciBQREYqL1xuYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vQUEvdGlja2V0L1wiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIi9hdHRhY2htZW50L29uc2l0ZT90ZW1wbGF0ZUlkPVwiICsgdGVtcGxhdGVJZCArIFwiJnR5cGU9UERGXCJcbmxvZy5kZWJ1ZyBcImJhc2VVcmw6IFwiICsgYmFzZVVSTFxuXG5VUkwgdXJsXG51cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG5IdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG5jb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuY29ubmVjdGlvbi5jb25uZWN0KCk7XG5sb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG5sb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG5cbmlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgIGVMaXN0RXJyb3JzLmFkZChcIkdFTkVSQVRFLU9OU0lURVJFUE9SVFwiKVxuICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKSlcbiAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="disabled">false</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="6">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">442a396a-d2f9-4282-99b9-1de0b8f0afd4</arg>
                  <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIGxpbmtlZFRpY2tldHMgJiBGYXN0LVRyYW5zYWN0IHRoZW0=</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbkNhdGVnb3J5IGxvZyA9IENhdGVnb3J5LmdldEluc3RhbmNlKFwiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb25cIilcbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLldBUk4pXG5cbmxvZy53YXJuIFwiJHtpc3N1ZS5rZXl9IFRyYW5zYXppb25lIENvbXBsZXRlIC0gUG9zdCBGdW5jdGlvbiBjaGVjayBsaW5rZWRJc3N1ZXNcIlxuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5kZWYgYXV0b21hdGljYWxseUNsb3NlZCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUNsb3NlZCddLnRvU3RyaW5nKCkpWzBdXG5Jc3N1ZUluZGV4aW5nU2VydmljZSBcdGlzc3VlSW5kZXhpbmdTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KElzc3VlSW5kZXhpbmdTZXJ2aWNlKVxuXG5Jc3N1ZSBpc3N1ZSA9IGlzc3VlXG4vL1BlciB0ZXN0IGRhIGNvbnNvbGVcbi8vaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJPUFVULTI3NlwiKVxuXG5DUkVBVEVfT05TSVRFUkVQT1JUPXByb3BlcnRpZXNbJ3dmLnRyLmNyZWF0ZU9uc2l0ZVJlcG9ydCddID8gcHJvcGVydGllc1snd2YudHIuY3JlYXRlT25zaXRlUmVwb3J0J10gOiA3OTFcblxuZGVmIHVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcbmRlZiBpc3N1ZVNlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZVNlcnZpY2UoKVxuXG5sb2cud2FybiBcImlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCk6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKVxuXG5pZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpPT1udWxsIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkudG9TdHJpbmcoKS5lcXVhbHMoXCJOb1wiKSl7XG4gICAgLypPUC0xMDM4OiBzZSBobyBlc2VndWl0byBsYSBDb21wbGV0ZSBzdWwgdGlja2V0IFwicGFkcmVcIiB2ZXJpZmljbyBlIHNwb3N0byBpbiBhdXRvbWF0aWNvIGdsaSBldmVudHVhbGkgdGlja2V0IGNvbGxlZ2F0aSovXG4gICAgXG4gICAgbG9nLndhcm4gXCJ2ZXJpZmljbyBlIHNwb3N0byBpbiBhdXRvbWF0aWNvIGdsaSBldmVudHVhbGkgdGlja2V0IGNvbGxlZ2F0aVwiXG4gICAgXG4gICAgTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG4gICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgIC8qRXNlZ3VpcmUgdHJhbnNhemlvbmUgZGkgc3RhdG8gY29uIE9QQUFfQVVUT01BVElDQUxMWV9DTE9TRUQ9WWVzIGRlbGxhIHNvdXJjZUlzc3VlKi9cbiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZSA9IGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKVxuICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlU3RhdHVzID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzKClcbiAgICAgICAgICAgIGxvZy53YXJuIFwiSXNzdWUgY29uIHJlbGF0ZXNJbklzc3VlTGluayAke2xpbmtlZElzc3VlfSBjb24gc3RhdG8gJHtsaW5rZWRJc3N1ZVN0YXR1c31cIlxuICAgICAgICAgICAgZGVmIHRyYW5zaXRpb25JZFxuICAgICAgICAgICAgaWYobGlua2VkSXNzdWVTdGF0dXMubmFtZSA9PSAocHJvcGVydGllc1snd2YuY29tcGxldGVkVG9CZUNsb3NlZCddID8gcHJvcGVydGllc1snd2YuY29tcGxldGVkVG9CZUNsb3NlZCddLnRvU3RyaW5nKCkgOiBcIkNvbXBsZXRlZCBUbyBCZSBDbG9zZWRcIikpe1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb25JZD1DUkVBVEVfT05TSVRFUkVQT1JUXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHJhbnNpdGlvbklkPT1DUkVBVEVfT05TSVRFUkVQT1JUKXtcbiAgICAgICAgICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKVxuICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGgge1xuICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2soZmFsc2UpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSlcbiAgICAgICAgICAgICAgICAvL0NvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICAgICAgICAgICAgICAvL2lzc3VlSW5wdXRQYXJhbWV0ZXJzLmFkZEN1c3RvbUZpZWxkVmFsdWUoZmllbGRDb25maWcuZ2V0SWQoKSwgXCJZZXNcIikgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXG4gICAgICAgICAgICAgICAgZGVmIG1pID0gKE11dGFibGVJc3N1ZSkgbGlua2VkSXNzdWVcblxuICAgICAgICAgICAgICAgIGRlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcobGlua2VkSXNzdWUpXG4gICAgICAgICAgICAgICAgbG9nLndhcm4gXCJmaWVsZENvbmZpZzogXCIgKyBmaWVsZENvbmZpZ1xuICAgICAgICAgICAgICAgIGRlZiBjZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09IFwiWWVzXCIgfVxuICAgICAgICAgICAgICAgIGF1dG9tYXRpY2FsbHlDbG9zZWQudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG5cbiAgICAgICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChsaW5rZWRJc3N1ZSlcbiAgICAgICAgICAgICAgICBsb2cud2FybiBcIlVwZGF0ZWQgY3VzdG9tZmllbGQgLSBpc3N1ZSBsaW5rYXRhXCJcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvL2RlZiB2YWxpZGF0aW9uUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycylcbiAgICAgICAgICAgICAgICBpZiAoaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLnRvSW50ZWdlcigpLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgZGVmIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLnRvSW50ZWdlcigpLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpXG4gICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJGYWlsZWQgdG8gdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn1cIilcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlRyYW5zYXppb25lIGZhdHRhIDE2MSAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c31cIilcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259XCIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG4gICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsT3V0SXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHtcbiAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcblxuICAgICAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICBsb2cud2FybiBcIklzc3VlIGNvbiByZWxhdGVzT3V0SXNzdWVMaW5rXCJcbiAgICAgICAgICAgIC8qRXNlZ3VpcmUgdHJhbnNhemlvbmUgZGkgc3RhdG8gY29uIE9QQUFfQVVUT01BVElDQUxMWV9DTE9TRUQ9WWVzIGRlbGxhIGRlc3RpbmF0aW9uSXNzdWUqL1xuICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlID0gaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KClcbiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZVN0YXR1cyA9IGxpbmtlZElzc3VlLmdldFN0YXR1cygpXG4gICAgICAgICAgICBkZWYgdHJhbnNpdGlvbklkXG4gICAgICAgICAgICBsb2cud2FybiBcImxpbmtlZElzc3VlOiBcIiArIGxpbmtlZElzc3VlXG4gICAgICAgICAgICBsb2cud2FybiBcImxpbmtlZElzc3VlU3RhdHVzLm5hbWU6IFwiICsgbGlua2VkSXNzdWVTdGF0dXMubmFtZVxuICAgICAgICAgICAgaWYobGlua2VkSXNzdWVTdGF0dXMubmFtZSA9PSAocHJvcGVydGllc1snd2YuY29tcGxldGVkVG9CZUNsb3NlZCddID8gcHJvcGVydGllc1snd2YuY29tcGxldGVkVG9CZUNsb3NlZCddLnRvU3RyaW5nKCkgOiBcIkNvbXBsZXRlZCBUbyBCZSBDbG9zZWRcIikpe1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb25JZD1DUkVBVEVfT05TSVRFUkVQT1JUXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHJhbnNpdGlvbklkPT1DUkVBVEVfT05TSVRFUkVQT1JUKXtcbiAgICAgICAgICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKVxuICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGgge1xuICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2soZmFsc2UpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSlcbiAgICAgICAgICAgICAgICAvL0NvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICAgICAgICAgICAgICAvL2lzc3VlSW5wdXRQYXJhbWV0ZXJzLmFkZEN1c3RvbUZpZWxkVmFsdWUoZmllbGRDb25maWcuZ2V0SWQoKSwgXCJZZXNcIikgXG4gICAgICAgICAgICAgICAgLy9sb2cud2FybiBcInZhbGlkYXRlUmVzdWx0XCJcbiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcbiAgICAgICAgICAgICAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBsaW5rZWRJc3N1ZVxuXG4gICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSlcbiAgICAgICAgICAgICAgICBsb2cud2FybiBcImZpZWxkQ29uZmlnOiBcIiArIGZpZWxkQ29uZmlnXG4gICAgICAgICAgICAgICAgZGVmIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gXCJZZXNcIiB9XG4gICAgICAgICAgICAgICAgYXV0b21hdGljYWxseUNsb3NlZC51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcblxuICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGxpbmtlZElzc3VlKVxuICAgICAgICAgICAgICAgIGxvZy53YXJuIFwiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGFcIlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQudG9JbnRlZ2VyKCksIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgdHJhbnNpdGlvblxuICAgICAgICAgICAgICAgICAgICBkZWYgaXNzdWVSZXN1bHQgPSBpc3N1ZVNlcnZpY2UudHJhbnNpdGlvbih1c2VyLCBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQudG9JbnRlZ2VyKCksIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEgaXNzdWVSZXN1bHQuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIkZhaWxlZCB0byB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiVHJhbnNhemlvbmUgZmF0dGEgMjg1ICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn0sICR7bGlua2VkSXNzdWUuc3RhdHVzfVwiKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJDb3VsZCBub3QgdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmVycm9yQ29sbGVjdGlvbn1cIilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbn0iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlCmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZQppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQpDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5XQVJOKQoKbG9nLndhcm4gIiR7aXNzdWUua2V5fSBUcmFuc2F6aW9uZSBDb21wbGV0ZSAtIFBvc3QgRnVuY3Rpb24gY2hlY2sgbGlua2VkSXNzdWVzIgoKSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpOwpDdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7CmRlZiBhdXRvbWF0aWNhbGx5Q2xvc2VkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q2xvc2VkJ10udG9TdHJpbmcoKSlbMF0KSXNzdWVJbmRleGluZ1NlcnZpY2UgCWlzc3VlSW5kZXhpbmdTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KElzc3VlSW5kZXhpbmdTZXJ2aWNlKQoKSXNzdWUgaXNzdWUgPSBpc3N1ZQovL1BlciB0ZXN0IGRhIGNvbnNvbGUKLy9pc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZSgiT1BVVC0yNzYiKQoKU1RBUlRfUFJPR1JFU1M9cHJvcGVydGllc1snd2YudHIuc3RhcnRQcm9ncmVzcyddCkNPTVBMRVRFPXByb3BlcnRpZXNbJ3dmLnRyLmNvbXBsZXRlJ10KCmRlZiB1c2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpCmRlZiBpc3N1ZVNlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZVNlcnZpY2UoKQoKbG9nLndhcm4gImlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCk6ICIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpCgppZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpPT1udWxsIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkudG9TdHJpbmcoKS5lcXVhbHMoIk5vIikpewogICAgLypPUC0xMDM4OiBzZSBobyBlc2VndWl0byBsYSBDb21wbGV0ZSBzdWwgdGlja2V0ICJwYWRyZSIgdmVyaWZpY28gZSBzcG9zdG8gaW4gYXV0b21hdGljbyBnbGkgZXZlbnR1YWxpIHRpY2tldCBjb2xsZWdhdGkqLwogICAgCiAgICBsb2cud2FybiAidmVyaWZpY28gZSBzcG9zdG8gaW4gYXV0b21hdGljbyBnbGkgZXZlbnR1YWxpIHRpY2tldCBjb2xsZWdhdGkiCiAgICAKICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKQogICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykgewogICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7CgogICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgLypFc2VndWlyZSB0cmFuc2F6aW9uZSBkaSBzdGF0byBjb24gT1BBQV9BVVRPTUFUSUNBTExZX0NMT1NFRD1ZZXMgZGVsbGEgc291cmNlSXNzdWUqLwogICAgICAgICAgICBkZWYgbGlua2VkSXNzdWUgPSBpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkKICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlU3RhdHVzID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzKCkKICAgICAgICAgICAgbG9nLndhcm4gIklzc3VlIGNvbiByZWxhdGVzSW5Jc3N1ZUxpbmsgJHtsaW5rZWRJc3N1ZX0gY29uIHN0YXRvICR7bGlua2VkSXNzdWVTdGF0dXN9IgogICAgICAgICAgICBkZWYgdHJhbnNpdGlvbklkCiAgICAgICAgICAgIGlmKGxpbmtlZElzc3VlU3RhdHVzLm5hbWUgPT0gcHJvcGVydGllc1snd2YuY29uZmlybWVkQW5kUGxhbm5lZCddLnRvU3RyaW5nKCkpewogICAgICAgICAgICAgICAgdHJhbnNpdGlvbklkPVNUQVJUX1BST0dSRVNTCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYobGlua2VkSXNzdWVTdGF0dXMubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5pblByb2dyZXNzJ10udG9TdHJpbmcoKSl7CiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9Q09NUExFVEUKICAgICAgICAgICAgfQogICAgICAgICAgICBpZih0cmFuc2l0aW9uSWQ9PVNUQVJUX1BST0dSRVNTKXsKICAgICAgICAgICAgICAgIC8vIFByZXBhcmUgb3VyIGlucHV0IGZvciB0aGUgdHJhbnNpdGlvbgogICAgICAgICAgICAgICAgZGVmIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKCkKICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGggewogICAgICAgICAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayhmYWxzZSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSkKICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgIC8vaXNzdWVJbnB1dFBhcmFtZXRlcnMuYWRkQ3VzdG9tRmllbGRWYWx1ZShmaWVsZENvbmZpZy5nZXRJZCgpLCAiWWVzIikgCiAgICAgICAgICAgICAgICAvL2xvZy53YXJuICJpc3N1ZUlucHV0UGFyYW1ldGVyczogIiArIGlzc3VlSW5wdXRQYXJhbWV0ZXJzCiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlCgogICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgIGxvZy53YXJuICJmaWVsZENvbmZpZzogIiArIGZpZWxkQ29uZmlnCiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q2xvc2VkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoKICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTsKICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICBsb2cud2FybiAiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGEiCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vZGVmIHZhbGlkYXRpb25SZXN1bHQgPSBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKQogICAgICAgICAgICAgICAgaWYgKGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb24KICAgICAgICAgICAgICAgICAgICBkZWYgaXNzdWVSZXN1bHQgPSBpc3N1ZVNlcnZpY2UudHJhbnNpdGlvbih1c2VyLCBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKSkKICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIkZhaWxlZCB0byB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSIpCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJUcmFuc2F6aW9uZSBmYXR0YSA5NiAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c30iKQogICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9Q09NUExFVEUKICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKCkKICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2soZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy9maWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpCiAgICAgICAgICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksICJZZXMiKSAKICAgICAgICAgICAgICAgICAgICAgICAgLy92YWxpZGF0aW9uUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykKICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKICAgICAgICAgICAgICAgICAgICAgICAgbWkgPSAoTXV0YWJsZUlzc3VlKSBsaW5rZWRJc3N1ZQoKICAgICAgICAgICAgICAgICAgICAgICAgLy9maWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICAgICAgICAgIC8vbG9nLndhcm4gImZpZWxkQ29uZmlnOiAiICsgZmllbGRDb25maWcKICAgICAgICAgICAgICAgICAgICAgICAgLy9jZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy9hdXRvbWF0aWNhbGx5Q2xvc2VkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoKICAgICAgICAgICAgICAgICAgICAgICAgLy9Db21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgLy9sb2cud2FybiAiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGEiCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJUcmFuc2F6aW9uZSBmYXR0YSAxMjQgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSwgJHtsaW5rZWRJc3N1ZS5zdGF0dXN9IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJDb3VsZCBub3QgdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmVycm9yQ29sbGVjdGlvbn0iKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfWVsc2UgaWYgKHRyYW5zaXRpb25JZD09Q09NUExFVEUpewogICAgICAgICAgICAgICAgZGVmIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKCkKICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGggewogICAgICAgICAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayhmYWxzZSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSkKICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgIC8vaXNzdWVJbnB1dFBhcmFtZXRlcnMuYWRkQ3VzdG9tRmllbGRWYWx1ZShmaWVsZENvbmZpZy5nZXRJZCgpLCAiWWVzIikgCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKQogICAgICAgICAgICAgICAgZGVmIG1pID0gKE11dGFibGVJc3N1ZSkgbGlua2VkSXNzdWUKCiAgICAgICAgICAgICAgICBkZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGxpbmtlZElzc3VlKQogICAgICAgICAgICAgICAgbG9nLndhcm4gImZpZWxkQ29uZmlnOiAiICsgZmllbGRDb25maWcKICAgICAgICAgICAgICAgIGRlZiBjZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgIGF1dG9tYXRpY2FsbHlDbG9zZWQudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpCgogICAgICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpOwogICAgICAgICAgICAgICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgIGxvZy53YXJuICJVcGRhdGVkIGN1c3RvbWZpZWxkIC0gaXNzdWUgbGlua2F0YSIKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy9kZWYgdmFsaWRhdGlvblJlc3VsdCA9IGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpCiAgICAgICAgICAgICAgICBpZiAoaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuaXNWYWxpZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgdHJhbnNpdGlvbgogICAgICAgICAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpKQogICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIlRyYW5zYXppb25lIGZhdHRhIDE2MSAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c30iKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIkNvdWxkIG5vdCB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuZXJyb3JDb2xsZWN0aW9ufSIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICBMaXN0PElzc3VlTGluaz4gYWxsT3V0SXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldE91dHdhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKQogICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsT3V0SXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHsKICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpOwoKICAgICAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgIGxvZy53YXJuICJJc3N1ZSBjb24gcmVsYXRlc091dElzc3VlTGluayIKICAgICAgICAgICAgLypFc2VndWlyZSB0cmFuc2F6aW9uZSBkaSBzdGF0byBjb24gT1BBQV9BVVRPTUFUSUNBTExZX0NMT1NFRD1ZZXMgZGVsbGEgZGVzdGluYXRpb25Jc3N1ZSovCiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZSA9IGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpCiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZVN0YXR1cyA9IGxpbmtlZElzc3VlLmdldFN0YXR1cygpCiAgICAgICAgICAgIGRlZiB0cmFuc2l0aW9uSWQKICAgICAgICAgICAgbG9nLndhcm4gImxpbmtlZElzc3VlOiAiICsgbGlua2VkSXNzdWUKICAgICAgICAgICAgbG9nLndhcm4gImxpbmtlZElzc3VlU3RhdHVzLm5hbWU6ICIgKyBsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lCiAgICAgICAgICAgIGlmKGxpbmtlZElzc3VlU3RhdHVzLm5hbWUgPT0gIkNvbmZpcm1lZCBhbmQgUGxhbm5lZCIpewogICAgICAgICAgICAgICAgdHJhbnNpdGlvbklkPVNUQVJUX1BST0dSRVNTCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYobGlua2VkSXNzdWVTdGF0dXMubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5pblByb2dyZXNzJ10udG9TdHJpbmcoKSl7CiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9Q09NUExFVEUKICAgICAgICAgICAgfQogICAgICAgICAgICBsb2cud2FybiAidHJhbnNpdGlvbklkOiAiICsgdHJhbnNpdGlvbklkCiAgICAgICAgICAgIGlmKHRyYW5zaXRpb25JZD09U1RBUlRfUFJPR1JFU1MpewogICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKQogICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7CiAgICAgICAgICAgICAgICAgICAgc2V0U2tpcFNjcmVlbkNoZWNrKGZhbHNlKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy9kZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKQogICAgICAgICAgICAgICAgLy9Db21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gIlllcyIgfQogICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksICJZZXMiKSAKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpCiAgICAgICAgICAgICAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBsaW5rZWRJc3N1ZQoKICAgICAgICAgICAgICAgIGRlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICBsb2cud2FybiAiZmllbGRDb25maWc6ICIgKyBmaWVsZENvbmZpZwogICAgICAgICAgICAgICAgZGVmIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gIlllcyIgfQogICAgICAgICAgICAgICAgYXV0b21hdGljYWxseUNsb3NlZC51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSkKCiAgICAgICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7CiAgICAgICAgICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGxpbmtlZElzc3VlKQogICAgICAgICAgICAgICAgbG9nLndhcm4gIlVwZGF0ZWQgY3VzdG9tZmllbGQgLSBpc3N1ZSBsaW5rYXRhIgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvL2RlZiB2YWxpZGF0aW9uUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykKICAgICAgICAgICAgICAgIGxvZy53YXJuICJpc3N1ZUlucHV0UGFyYW1ldGVyczogIiArIGlzc3VlSW5wdXRQYXJhbWV0ZXJzCiAgICAgICAgICAgICAgICBpZiAoaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuaXNWYWxpZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgdHJhbnNpdGlvbgogICAgICAgICAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpKQogICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIlRyYW5zYXppb25lIGZhdHRhIDIxOCAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c30iKQogICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9Q09NUExFVEUKICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKCkKICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2soZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy9maWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpCiAgICAgICAgICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksICJZZXMiKSAKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpCiAgICAgICAgICAgICAgICAgICAgICAgIG1pID0gKE11dGFibGVJc3N1ZSkgbGlua2VkSXNzdWUKCiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4gImZpZWxkQ29uZmlnOiAiICsgZmllbGRDb25maWcKICAgICAgICAgICAgICAgICAgICAgICAgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9tYXRpY2FsbHlDbG9zZWQudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpCgogICAgICAgICAgICAgICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuICJVcGRhdGVkIGN1c3RvbWZpZWxkIC0gaXNzdWUgbGlua2F0YSIKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vdmFsaWRhdGlvblJlc3VsdCA9IGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJUcmFuc2F6aW9uZSBmYXR0YSAyNDggJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSwgJHtsaW5rZWRJc3N1ZS5zdGF0dXN9IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJDb3VsZCBub3QgdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmVycm9yQ29sbGVjdGlvbn0iKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICBsb2cud2FybiAiaXNzdWUgZGEgY29tcGxldGFyZSIKICAgICAgICAgICAgICAgIGRlZiBpc3N1ZUlucHV0UGFyYW1ldGVycyA9IGlzc3VlU2VydmljZS5uZXdJc3N1ZUlucHV0UGFyYW1ldGVycygpCiAgICAgICAgICAgICAgICBpc3N1ZUlucHV0UGFyYW1ldGVycy53aXRoIHsKICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2soZmFsc2UpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvL2RlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpCiAgICAgICAgICAgICAgICAvL0NvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICAvL2lzc3VlSW5wdXRQYXJhbWV0ZXJzLmFkZEN1c3RvbUZpZWxkVmFsdWUoZmllbGRDb25maWcuZ2V0SWQoKSwgIlllcyIpIAogICAgICAgICAgICAgICAgLy9sb2cud2FybiAidmFsaWRhdGVSZXN1bHQiCiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlCgogICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgIGxvZy53YXJuICJmaWVsZENvbmZpZzogIiArIGZpZWxkQ29uZmlnCiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q2xvc2VkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoKICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTsKICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICBsb2cud2FybiAiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGEiCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgICAgICAgICAgZGVmIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpCiAgICAgICAgICAgICAgICAgICAgaWYgKCEgaXNzdWVSZXN1bHQuaXNWYWxpZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJGYWlsZWQgdG8gdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn0iKQogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiVHJhbnNhemlvbmUgZmF0dGEgMjg1ICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn0sICR7bGlua2VkSXNzdWUuc3RhdHVzfSIpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCn0=</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE"></arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue">50</arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_22693</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="801" name="Genera Offerta per Sostituzione Impianto" view="fieldscreen">
          <meta name="opsbar-sequence">10</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">20119</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">342d56e7-53b3-4e78-aaa8-c68422a9773f</arg>
                <arg name="FIELD_NOTES">YCFgTk9UIFBNIFRpY2tldA==</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5pc3N1ZVR5cGUubmFtZSAhPSAnUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXQnIiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="6">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="field.existingAttachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="targetIssueTypeDefinedByCfSelection"></arg>
                  <arg name="issueTypeId">12301</arg>
                  <arg name="scopeType">ISSUE_LINKING</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="field.attachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="targetIssueType">SELECTED_ISSUE_TYPE</arg>
                  <arg name="scopeSource-jql"></arg>
                  <arg name="createIssueAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.copyTransitionComment">false</arg>
                  <arg name="targetProjectType">SAME</arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="transitionAttachmentsOperation">copy</arg>
                  <arg name="field.issueAssignTo">ASSIGN_TO_UNASSIGNED</arg>
                  <arg name="targetProjectSelectedCustomField"></arg>
                  <arg name="destination-scopeTarget">LINK_END</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiescreatelinkedissue-function</arg>
                  <arg name="scopeDestination-linkEnd">10003:INWARD</arg>
                  <arg name="field.enablingCustomFieldId"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="subFunctions">[{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22609&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22609&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22600&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22600&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22822&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22822&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22601&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22601&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22602&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22602&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22813&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22813&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23235&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23235&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22651&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22651&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22700&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22700&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22607&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22607&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;priority&quot;,&quot;destinationFieldId&quot;:&quot;priority&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22814&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22814&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23203&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23203&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23400&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23400&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_21909&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21909&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22649&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22629&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Yes&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22681&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Nuova Installazione&quot;,&quot;destinationFieldId&quot;:&quot;summary&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23400&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21908&quot;}}]</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.createlinkedissue.CreateLinkedIssueFunction</arg>
                  <arg name="projectId">11228</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">4fd7d272cffa1401b740b9188cdaeaaf5185c323</arg>
                  <arg name="FIELD_NOTES">YCFgRlNNOiBVcGRhdGUgc3RhdHVzIG9uIGp1c3QgY3JlYXRlZCBOZXcgSW5zdGFsbGF0aW9uIFF1b3RhdGlvbiBpc3N1ZQ==</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnlcbmltcG9ydCBncm9vdnkuanNvbi5Kc29uQnVpbGRlclxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29uZmlnLnV0aWwuSmlyYUhvbWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvblxuaW1wb3J0IGphdmEudGV4dC5TaW1wbGVEYXRlRm9ybWF0XG5pbXBvcnQgamF2YS50ZXh0LlBhcnNlRXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbmZpZy5wcm9wZXJ0aWVzLkFQS2V5c1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLkxpbmtDb2xsZWN0aW9uSW1wbDtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbms7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxubG9nLmRlYnVnIFwiUGVyY29yc28gcHJvcGVydGllczogXCIgKyBTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5cbi8qU2NyaXB0IFZhcmlhYmxlcyovXG4vL1BlciBQb3N0IEZ1bmN0aW9uXG5pc3N1ZSA9IGlzc3VlXG4vL1BlciB0ZXN0IGRhIGNvbnNvbGVcbi8vSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpXG4vL2lzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0yNTdcIilcbmxvZy5kZWJ1ZyBcIklzc3VlOiBcIiArIGlzc3VlXG5kZWYgZm91bmQ9ZmFsc2VcbmRlZiBsaW5rZWRJc3N1ZVxuZGVmIGlzc3VlU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlU2VydmljZSgpXG5cbmRlZiB0cmFuc2l0aW9uQ2hlY2sgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmNoZWNrQW5kQ29uZmlybSddLnRvU3RyaW5nKCkpWzBdXG5kZWYgb2ZmZXJGcm9tUmVwYWlyID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1RLVF9HRU5FUkFURURfRlJPTV9SRVBBSVJcIilbMF1cblxuZGVmIGdyb3VwTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEdyb3VwTWFuYWdlcigpXG5kZWYgdXNlck1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRVc2VyTWFuYWdlcigpXG5kZWYgY3VycmVudFVzZXJUcmFuc2l0aW9uID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0NVUlJFTlRfVVNFUl9HRU5FUkFURV9ORVdJTlNUX1FVT1RFXCIpWzBdXG5TdHJpbmcgc3VwcGxpZXJBZG0gPSBcIk9QUk9MRV9BQV9TVVBQTElFUl9BRE1cIlxuU3RyaW5nIHN1cHBsaWVyVGVjaCA9IFwiT1BST0xFX0FBX1NVUFBMSUVSX1RFQ0hcIlxuXG5MaXN0PElzc3VlTGluaz4gYWxsSW5Jc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0SW53YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSk7XG5sb2cuZGVidWcgXCJhbGxJbklzc3VlTGluazogXCIgKyBhbGxJbklzc3VlTGlua1xuZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG4gICAgZGVmIGxpbmtlZElzc3VlVGVtcCA9IGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKVxuICAgIFN0cmluZyB0eXBlID0gbGlua2VkSXNzdWVUZW1wLmdldElzc3VlVHlwZSgpLmdldE5hbWUoKTtcblxuICAgIGxvZy5kZWJ1Zyhpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkpIFxuICAgIFxuICAgIGlmKGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKSE9bnVsbCAmJiBpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7XG4gICAgICAgIGxpbmtlZElzc3VlPWxpbmtlZElzc3VlVGVtcFxuICAgICAgICBsb2cuZGVidWcgXCJsaW5rZWQgaXNzdWU6IFwiICsgbGlua2VkSXNzdWVcbiAgICAgICAgLy9sb2cuZGVidWcgXCJsaW5rZWQgaXNzdWUgc3RhdHVzOiBcIiArIGxpbmtlZElzc3VlLmdldFN0YXR1c09iamVjdCgpLm5hbWVcbiAgICAgICAgaWYobGlua2VkSXNzdWUuZ2V0U3RhdHVzT2JqZWN0KCkubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5vcGVuJ10udG9TdHJpbmcoKSl7XG4gICAgICAgICAgICBmb3VuZD10cnVlXG4gICAgICAgIH1cbiAgICB9XG59XG4vL2xvZy5kZWJ1ZyBcImZvdW5kOiBcIiArIGZvdW5kXG5cbmlmKGZvdW5kKXtcblx0ZGVmIGRlc3RTdGF0dXNPYmplY3QgPSBsaW5rZWRJc3N1ZS5nZXRTdGF0dXNPYmplY3QoKVxuICAgIC8vbG9nLmRlYnVnIFwiZGVzdFN0YXR1c09iamVjdDogXCIgKyBkZXN0U3RhdHVzT2JqZWN0XG4gICAgLy9sb2cuZGVidWcgXCJsaW5rZWRJc3N1ZTogXCIgKyBsaW5rZWRJc3N1ZVxuICAgIGRlZiB1c2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXG5cdC8vIElzIHRoZSBzdGF0dXMgb2YgdGhlIGxpbmtlZCBpc3N1ZSBcIkluc3RhbGxpbmdcIiA/XG4gICAgXG4gICAgZGVmIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmN1c3RvbUZpZWxkTWFuYWdlclxuICAgIGRlZiBvZmZlcklzc3VlRmllbGQgPSBjdXN0b21GaWVsZE1hbmFnZXIuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLm9mZmVyTGlua2VkSXNzdWUnXS50b1N0cmluZygpKS5maXJzdCgpXG4gICAgZGVmIG1haW50ZW5hbmNlSXNzdWVGaWVsZCA9IGN1c3RvbUZpZWxkTWFuYWdlci5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YubWFpbnRlbmFuY2VMaW5rZWRJc3N1ZSddID8gcHJvcGVydGllc1snY2YubWFpbnRlbmFuY2VMaW5rZWRJc3N1ZSddLnRvU3RyaW5nKCkgOiBcIk9QX01BSU5URU5BTkNFX0xJTktFRF9JU1NVRVwiKS5maXJzdCgpXG4gICAgZGVmIG9mZmVySXNzdWVCb29sRmllbGQgPSBjdXN0b21GaWVsZE1hbmFnZXIuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLm9mZmVyVGt0J10udG9TdHJpbmcoKSkuZmlyc3QoKVxuICAgIFxuICAgIC8vU2V0IE9QQUFfT0ZGRVJfVEtUPVllcyBvbiBqdXN0IGNyZWF0ZWQgbGlua2VkSXNzdWVcbiAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcbiAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBsaW5rZWRJc3N1ZVxuXG4gICAgZGVmIGZpZWxkQ29uZmlnID0gb2ZmZXJJc3N1ZUJvb2xGaWVsZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSlcbiAgICAvL2xvZy53YXJuIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcbiAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICBsb2cuZGVidWcgXCJ0cmFuc2l0aW9uIGZpZWxkIHZhbHVlOiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VycmVudFVzZXJUcmFuc2l0aW9uKVxuICAgIGRlZiB1c2VyVHJhbnNpdGlvbiA9IHVzZXJNYW5hZ2VyLmdldFVzZXJCeU5hbWUoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXJyZW50VXNlclRyYW5zaXRpb24pLnRvU3RyaW5nKCkpXG5cdGxvZy5kZWJ1ZyBcInVzZXJUcmFuc2l0aW9uOiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VycmVudFVzZXJUcmFuc2l0aW9uKSArIFwiIC0gXCIgKyB1c2VyVHJhbnNpdGlvblxuICAgIGlmICh1c2VyVHJhbnNpdGlvbiAhPSBudWxsICYmIChncm91cE1hbmFnZXIuZ2V0VXNlcnNJbkdyb3VwKHN1cHBsaWVyQWRtKS5jb250YWlucyh1c2VyVHJhbnNpdGlvbikgfHwgZ3JvdXBNYW5hZ2VyLmdldFVzZXJzSW5Hcm91cChzdXBwbGllclRlY2gpLmNvbnRhaW5zKHVzZXJUcmFuc2l0aW9uKSkpIHtcbiAgICAgICAgLy8gVHJhbnNpdGlvbiBleGVjdXRlZCBieSBleHRlcm5hbCB1c2VyIC0tPiB0byBiZSBhZGRlZCBhbHNvIGludGVybmFsIHRlY2hzIHJvbGUgZ3JvdXBzXG4gICAgICAgIC8vIEVtYWlsIGhhcyBub3QgdG8gYmUgc2VudFxuICAgICAgICAvLyBTTiB3aWxsIGJlIGNyZWF0ZWQgYXMgc29vbiBhcyB0aGUgcXVvdGF0aW9uIGhhcyBiZWVuIGNvbmZpcm1lZCAtIHRvIGJlIGNoZWNrZWQgd2hlbiB0byBjcmVhdGUgU04gaWYgbm8gcXVvdGF0aW9uIGZyb20gc3VwcGxpZXIgaXMgbmVlZGVkIC0gd2hlbiB0aGUgcXVvdGF0aW9uIGhhcyBiZWVuIHNlbnQgdG8gdGhlIGN1c3RvbWVyP1xuICAgICAgICBsb2cuZGVidWcgXCJpbiB1dGVudGUgc3VwcGxpZXJcIlxuICAgICAgICB0cmFuc2l0aW9uQ2hlY2sudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcbiAgICAgICAgb2ZmZXJGcm9tUmVwYWlyLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG9mZmVyRnJvbVJlcGFpciksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG5cdH1cbiAgICBvZmZlcklzc3VlQm9vbEZpZWxkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG9mZmVySXNzdWVCb29sRmllbGQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuXHRtYWludGVuYW5jZUlzc3VlRmllbGQudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobWFpbnRlbmFuY2VJc3N1ZUZpZWxkKSwgaXNzdWUua2V5LnRvU3RyaW5nKCkpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG4gICAgXG4gICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xuICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpICAgIFxuICAgIFxuICAgIC8vbG9nLmRlYnVnIFwib2ZmZXJJc3N1ZUZpZWxkOiBcIiArIG9mZmVySXNzdWVGaWVsZFxuICAgIC8vbG9nLmRlYnVnIFwibGlua2VkSXNzdWU6IFwiICsgbGlua2VkSXNzdWVcbiAgICAvL29mZmVySXNzdWVGaWVsZC51cGRhdGVWYWx1ZShudWxsLCBpc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShvZmZlcklzc3VlRmllbGQpLCBsaW5rZWRJc3N1ZS5rZXkudG9TdHJpbmcoKSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcbiAgICAvL2xvZy5kZWJ1ZyBcInVwZGF0ZWQ6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShvZmZlcklzc3VlRmllbGQpXG4gICAgXG4gICAgaWYgKGRlc3RTdGF0dXNPYmplY3QubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5vcGVuJ10udG9TdHJpbmcoKSkge1xuICAgICAgICAvLyBQcmVwYXJlIG91ciBpbnB1dCBmb3IgdGhlIHRyYW5zaXRpb25cbiAgICAgICAgZGVmIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKClcbiAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7XG4gICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2sodHJ1ZSlcbiAgICAgICAgfVxuICAgICAgICAvLyBWYWxpZGF0ZSB0cmFuc2l0aW9uaW5nIHRoZSBsaW5rZWQgaXNzdWUgdG8gXCJTaWducyBOZWVkZWRcIlxuICAgICAgICBkZWYgdmFsaWRhdGlvblJlc3VsdCA9IGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIChwcm9wZXJ0aWVzWyd3Zi50ci5hc2tRdW90ZSddID8gcHJvcGVydGllc1snd2YudHIuYXNrUXVvdGUnXS50b0ludGVnZXIoKSA6IDExKSwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpXG4gICAgICAgIGlmICh2YWxpZGF0aW9uUmVzdWx0LmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgdHJhbnNpdGlvblxuICAgICAgICAgICAgZGVmIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgdmFsaWRhdGlvblJlc3VsdClcbiAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyhcIkZhaWxlZCB0byB0cmFuc2l0aW9uIHRhc2sgJHtkZXN0SXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn1cIilcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyhcIlRyYW5zYXppb25lIGZhdHRhXCIpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsb2cuZGVidWcoXCJDb3VsZCBub3QgdHJhbnNpdGlvbiB0YXNrICR7ZGVzdElzc3VlLmtleX0sIGVycm9yczogJHt2YWxpZGF0aW9uUmVzdWx0LmVycm9yQ29sbGVjdGlvbn1cIilcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbn0iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZQppbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb24KaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3IKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXIKaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyCmltcG9ydCBncm9vdnkuanNvbi5Kc29uU2x1cnBlcgppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb25maWcudXRpbC5KaXJhSG9tZQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvbgppbXBvcnQgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQKaW1wb3J0IGphdmEudGV4dC5QYXJzZUV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbmZpZy5wcm9wZXJ0aWVzLkFQS2V5cwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuTGlua0NvbGxlY3Rpb25JbXBsOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWUKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS51dGlsLkRlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CmRlZiBDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRykKSXNzdWVJbmRleGluZ1NlcnZpY2UgCWlzc3VlSW5kZXhpbmdTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KElzc3VlSW5kZXhpbmdTZXJ2aWNlKQoKLypTY3JpcHQgVmFyaWFibGVzKi8KLy9QZXIgUG9zdCBGdW5jdGlvbgppc3N1ZSA9IGlzc3VlCi8vUGVyIHRlc3QgZGEgY29uc29sZQovL0lzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKQovL2lzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKCJPUFVULTI1NyIpCmxvZy5kZWJ1ZyAiSXNzdWU6ICIgKyBpc3N1ZQpkZWYgZm91bmQ9ZmFsc2UKZGVmIGxpbmtlZElzc3VlCmRlZiBpc3N1ZVNlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZVNlcnZpY2UoKQoKTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpOwpsb2cuZGVidWcgImFsbEluSXNzdWVMaW5rOiAiICsgYWxsSW5Jc3N1ZUxpbmsKZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykgewogICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTsKICAgIGRlZiBsaW5rZWRJc3N1ZVRlbXAgPSBpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkKICAgIFN0cmluZyB0eXBlID0gbGlua2VkSXNzdWVUZW1wLmdldElzc3VlVHlwZSgpLmdldE5hbWUoKTsKCiAgICBsb2cuZGVidWcoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpKSAKICAgIAogICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNUcmlnZ2VyJ10udG9TdHJpbmcoKSkpewogICAgICAgIGZvdW5kPXRydWUKICAgICAgICBsaW5rZWRJc3N1ZT1saW5rZWRJc3N1ZVRlbXAKICAgIH0KfQpsb2cuZGVidWcgImZvdW5kOiAiICsgZm91bmQKCmlmKGZvdW5kKXsKCWRlZiBkZXN0U3RhdHVzT2JqZWN0ID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzT2JqZWN0KCkKICAgIGxvZy5kZWJ1ZyAiZGVzdFN0YXR1c09iamVjdDogIiArIGRlc3RTdGF0dXNPYmplY3QKICAgIGxvZy5kZWJ1ZyAibGlua2VkSXNzdWU6ICIgKyBsaW5rZWRJc3N1ZQogICAgZGVmIHVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKCS8vIElzIHRoZSBzdGF0dXMgb2YgdGhlIGxpbmtlZCBpc3N1ZSAiSW5zdGFsbGluZyIgPwogICAgCiAgICBkZWYgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuY3VzdG9tRmllbGRNYW5hZ2VyCiAgICBkZWYgb2ZmZXJJc3N1ZUZpZWxkID0gY3VzdG9tRmllbGRNYW5hZ2VyLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5vZmZlckxpbmtlZElzc3VlJ10udG9TdHJpbmcoKSkuZmlyc3QoKQogICAgZGVmIG1haW50ZW5hbmNlSXNzdWVGaWVsZCA9IGN1c3RvbUZpZWxkTWFuYWdlci5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YubWFpbnRlbmFuY2VMaW5rZWRJc3N1ZSddID8gcHJvcGVydGllc1snY2YubWFpbnRlbmFuY2VMaW5rZWRJc3N1ZSddLnRvU3RyaW5nKCkgOiAiT1BfTUFJTlRFTkFOQ0VfTElOS0VEX0lTU1VFIikuZmlyc3QoKQogICAgZGVmIG9mZmVySXNzdWVCb29sRmllbGQgPSBjdXN0b21GaWVsZE1hbmFnZXIuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLm9mZmVyVGt0J10udG9TdHJpbmcoKSkuZmlyc3QoKQogICAgCiAgICAvL1NldCBPUEFBX09GRkVSX1RLVD1ZZXMgb24ganVzdCBjcmVhdGVkIGxpbmtlZElzc3VlCiAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlCgogICAgZGVmIGZpZWxkQ29uZmlnID0gb2ZmZXJJc3N1ZUJvb2xGaWVsZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSkKICAgIGxvZy53YXJuICJmaWVsZENvbmZpZzogIiArIGZpZWxkQ29uZmlnCiAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICBvZmZlcklzc3VlQm9vbEZpZWxkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG9mZmVySXNzdWVCb29sRmllbGQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoJbWFpbnRlbmFuY2VJc3N1ZUZpZWxkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG1haW50ZW5hbmNlSXNzdWVGaWVsZCksIGlzc3VlLmtleS50b1N0cmluZygpKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQogICAgCiAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7CiAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGxpbmtlZElzc3VlKSAgICAKICAgIAogICAgbG9nLmRlYnVnICJvZmZlcklzc3VlRmllbGQ6ICIgKyBvZmZlcklzc3VlRmllbGQKICAgIGxvZy5kZWJ1ZyAibGlua2VkSXNzdWU6ICIgKyBsaW5rZWRJc3N1ZQogICAgb2ZmZXJJc3N1ZUZpZWxkLnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG9mZmVySXNzdWVGaWVsZCksIGxpbmtlZElzc3VlLmtleS50b1N0cmluZygpKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQogICAgbG9nLmRlYnVnICJ1cGRhdGVkOiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShvZmZlcklzc3VlRmllbGQpCiAgICAKICAgIGlmIChkZXN0U3RhdHVzT2JqZWN0Lm5hbWUgPT0gcHJvcGVydGllc1snd2Yub3BlbiddLnRvU3RyaW5nKCkpIHsKICAgICAgICAvLyBQcmVwYXJlIG91ciBpbnB1dCBmb3IgdGhlIHRyYW5zaXRpb24KICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKQogICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGggewogICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2sodHJ1ZSkKICAgICAgICB9CiAgICAgICAgLy8gVmFsaWRhdGUgdHJhbnNpdGlvbmluZyB0aGUgbGlua2VkIGlzc3VlIHRvICJTaWducyBOZWVkZWQiCiAgICAgICAgZGVmIHZhbGlkYXRpb25SZXN1bHQgPSBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCAocHJvcGVydGllc1snd2YudHIuYXNrUXVvdGUnXSA/IHByb3BlcnRpZXNbJ3dmLnRyLmFza1F1b3RlJ10udG9JbnRlZ2VyKCkgOiAxMSksIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKQogICAgICAgIGlmICh2YWxpZGF0aW9uUmVzdWx0LmlzVmFsaWQoKSkgewogICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIHZhbGlkYXRpb25SZXN1bHQpCiAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgbG9nLmRlYnVnKCJGYWlsZWQgdG8gdHJhbnNpdGlvbiB0YXNrICR7ZGVzdElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICBsb2cuZGVidWcoIlRyYW5zYXppb25lIGZhdHRhIikKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGxvZy5kZWJ1ZygiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2Rlc3RJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7dmFsaWRhdGlvblJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICB9CiAgICB9CiAgICAKfQ==</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE"></arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_23400</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="811" name="Riapri Intervento">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">f02b01a1-c02e-4cd0-af93-8f4c019ac5b9</arg>
                <arg name="FIELD_NOTES">YCFgTmV3IEluc3RhbGxhdGlvbg==</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnTmV3IEluc3RhbGxhdGlvbiciLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="4">
              <post-functions>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_22762</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="851" name="Genera Consuntivo Cliente" view="fieldscreen">
          <meta name="opsbar-sequence">30</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">19911</meta>
          <restrict-to>
            <conditions type="AND">
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">a0f5c2ba-110e-404e-99b7-f01f177a8cfe</arg>
                <arg name="FIELD_NOTES">YCFgRW5hYmxlZCBvbmx5IGZvciBSZXBhaXIgVGlja2V0</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnTWFpbnRlbmFuY2UgVGlja2V0JyIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
              </condition>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">fada32c2-b768-4770-816d-beeac0f8e084</arg>
                <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIEZJTkFOQ0lBTF9TVEFURU1FTlRfVE9fQ1VTVE9NRVIgLSBJZiBpdCdzIG51bGwgdGhlIGVtYWlsIGhhcyBub3QgYmVlbiBzZW50IHlldA==</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5cblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5jZlZhbHVlc1twcm9wZXJ0aWVzWydjZi53ZkZpbmFuY2lhbFN0YXRtVG9DJ11dID09IG51bGwiLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">e70180eb-0cf2-468c-b6c4-1eeded83980b</arg>
                <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIE9QX0FVVE9NQVRJQ0FMTFlfQ0xPU0VEIC0gaWYgWWVzIGRvbid0IGFsbG93IHRyYW5zaXRpb24=</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5cblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5jZlZhbHVlc1twcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q2xvc2VkJ11dID09IG51bGwgfHwgY2ZWYWx1ZXNbcHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUNsb3NlZCddLnRvU3RyaW5nKCldPy52YWx1ZSA9PSAnTm8nIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">dd31289a-d8bf-4841-8c4e-de322ebe1183</arg>
                <arg name="FIELD_NOTES">YCFgQXZhaWxhYmxlIG9ubHkgaWYgdGhlcmUgaXMgbm8gQ09OU1VOVElWTyBhdHRhY2hlZCB0byB0aGUgdGlja2V0</arg>
                <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxubG9nLmRlYnVnIFwiT25TaXRlIFJlcG9ydCBwZXIgaXNzdWU6IFwiICsgaXNzdWUua2V5XG4vKiBSRVNUIEFQSSBwZXIgR2VuZXJhemlvbmUgQWxsZWdhdG8gUmFwcG9ydG8gZGkgSW50ZXJ2ZW50byAqL1xucmVxdWVzdE1ldGhvZCA9IFwiUFVUXCI7XG4vKlNjcmlwdCBWYXJpYWJsZXMqL1xuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0xNDA2MlwiKVxuXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5cbi8qUmltb3ppb25lIGFsbGVnYXRvIHJhcHBvcnRvIGRpIGludGVydmVudG8gYXBwZW5hIGNyZWF0byovXG4vKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG5cbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTtcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcblxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcblxuQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG5kZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG5cbi8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSBcIiBhcm91bmQgdmFsdWUgKi9cbmRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIm9iamVjdFR5cGU9QXR0YWNobWVudCBBTkQgXFxcIlwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuY2F0ZWdvcnlSZWYnXS50b1N0cmluZygpICsgXCJcXFwiLk5hbWUgTElLRSBcXFwiQ29uc3VudGl2byBDbGllbnRlXFxcIiBBTkQgXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSArIFwiIT10cnVlIEFORCBvYmplY3QgSEFWSU5HIGNvbm5lY3RlZFRpY2tldHMoa2V5ID0gXCIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArIFwiKVwiKTsgLy8gU2VlIHRoZSBjb21wbGV0ZSBsaXN0IG9mIHBvc3NpYmxlIElRTCBvbiB0aGUgSW5zaWdodCBRdWVyeSBMYW5ndWFnZSBkb2N1bWVudGF0aW9uIHBhZ2Vcbi8qIElmIHRoaXMgaXMgYSBtYW5kYXRvcnkgZmllbGQgeW91IHNob3VsZCBiZSBhYmxlIHRvIGRvIHRoaXM6ICovXG5sb2cuZGVidWcgXCJJUUw6IFwiICsgXCJvYmplY3RUeXBlPUF0dGFjaG1lbnQgQU5EIFxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5OYW1lIExJS0UgXFxcIkNvbnN1bnRpdm8gQ2xpZW50ZVxcXCIgQU5EIFwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyBcIiE9dHJ1ZSBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleSA9IFwiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIilcIlxubG9nLmRlYnVnIFwib2JqZWN0czogXCIgKyBvYmplY3RzXG5sb2cuZGVidWcgXCJyaXN1bHRhdG86IFwiICsgKChvYmplY3RzID09IG51bGwgfHwgb2JqZWN0cy5zaXplPT0wKSAmJiAhaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5wbGFubmVkTWFpbnRlbmFuY2UnXSkpXG4vKiEhRGEgcmltdW92ZXJlIGFwcGVuYSByaXNvbHRpIGkgYnVnISEqL1xuLy9yZXR1cm4gKG9iamVjdHMgIT0gbnVsbCAmJiBvYmplY3RzLnNpemUhPTApICYmICFpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0LnBsYW5uZWRNYWludGVuYW5jZSddKVxucGFzc2VzQ29uZGl0aW9uID0gKChvYmplY3RzID09IG51bGwgfHwgb2JqZWN0cy5zaXplPT0wKSAmJiAhaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5wbGFubmVkTWFpbnRlbmFuY2UnXSkpXG4iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.CustomScriptCondition</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">6c786cdf0a6d0ad4b6b1d34c1ad1598920327ad2</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIFJlcXVpcmVkIEZpZWxkcyAtIHNvbG8gZXJyb3JzLCBubyB3YXJuaW5ncw==</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuIFxuLy9Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTM5ODFcIilcblxuZGVmIGVycm9ycyA9IGZhbHNlXG5kZWYgd2FybmluZ3MgPSBmYWxzZVxuXG5kZWYgbHVtcFN1bVByaWNlID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5sdW1wU3VtUHJpY2UnXS50b1N0cmluZygpKVswXVxuXG4vKkNhbXBpIGNvbiBkYXRpIG9iYmxpZ2F0b3JpIHBlciB0aWNrZXQgbm9uIGEgY29ycG8qL1xuZGVmIHJlcE1hdGVyaWFscyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YucmVwbGFjZWRNYXRlcmlhbHMnXS50b1N0cmluZygpKVswXVxuZGVmIHVuYVRhbnR1bVJhdGVzID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi51bmF0YW50dW1SYXRlcyddLnRvU3RyaW5nKCkpWzBdXG5kZWYgbGFib3VyUmF0ZXMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmxhYm91clJhdGVzJ10udG9TdHJpbmcoKSlbMF1cbmRlZiB0cmF2ZWxSYXRlcyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YudHJhdmVsUmF0ZXMnXS50b1N0cmluZygpKVswXVxuXG4vKkNhbXBpIGNvbiBkYXRpIG9iYmxpZ2F0b3JpIHBlciB0aWNrZXQgYSBjb3JwbyovXG5kZWYgbHVtcFN1bVJhdGVzID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5sdW1wU3VtUmF0ZXMnXS50b1N0cmluZygpKVswXVxuXG4vKkNvbmZlcm1hIHV0ZW50ZSBzdSB3YXJuaW5ncyovXG5kZWYgdHJhbnNpdGlvbkNoZWNrID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5jaGVja0FuZENvbmZpcm0nXS50b1N0cmluZygpKVswXVxuXG4vKkluc2lnaHQgU2NoZW1hIElEcyovXG5kZWYgREJPYmplY3RzID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8nXS50b1N0cmluZygpICsgXCItXCJcbmRlZiBPUEFBID0gcHJvcGVydGllc1snaXNjaGVtYS5hYSddLnRvU3RyaW5nKCkgKyBcIi1cIlxuXG5kZWYgZXJyb3JNYW5kYXRvcnlGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWRGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiB3YXJuaW5nRW1wdHlGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiB3YXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgd2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIgPSBuZXcgQXJyYXlMaXN0KClcblxuLy90cnl7XG4gICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUHJpY2UpIT1udWxsICYmIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobHVtcFN1bVByaWNlKS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKSl7XG4gICAgICAgIC8qQ29udGFiaWxpenphemlvbmUgYSBjb3JwbyovXG4gICAgICAgIGxvZy5kZWJ1ZyBcIkNvbnRhYmlsaXp6YXppb25lIGEgY29ycG9cIlxuICAgICAgICAvL09QQUFfTFVNUF9TVU1fUkFURVNcbiAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUmF0ZXMpIT1udWxsICYmIChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUmF0ZXMpICE9IFwiXCIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobHVtcFN1bVJhdGVzKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSl7XG4gICAgICAgICAgICAvKkNpY2xhcmUgdHV0dGkgZ2xpIG9nZ2V0dGkgYXNzb2NpYXRpIGFsIGNhbXBvKi9cbiAgICAgICAgICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50c1xuICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyAgXG4gICAgICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTtcbiAgICAgICAgICAgIGRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XG4gICAgICAgICAgICBkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcblxuICAgICAgICAgICAgZGVmIGxzUmF0ZXNMaXN0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUmF0ZXMpXG5cdFx0XHRsb2cuZGVidWcgbHNSYXRlc0xpc3RcbiAgICAgICAgICAgIGZvcihscyBpbiBsc1JhdGVzTGlzdCl7XG4gICAgICAgICAgICAgICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0XG4gICAgICAgICAgICAgICAgZGVmIGxzUmF0ZT1scy50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwibHNSYXRlOiBcIiArIGxzUmF0ZVxuICAgICAgICAgICAgICAgIGRlZiBsc1JhdGVLZXkgPSBsc1JhdGUuc3Vic3RyaW5nKGxzUmF0ZS5pbmRleE9mKCcoJykrMSxsc1JhdGUuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImxzUmF0ZUtleTogXCIgKyBsc1JhdGVLZXlcbiAgICAgICAgICAgICAgICBkZWYgbHNSYXRlT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGxzUmF0ZUtleSlcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJsc1JhdGVPYmplY3Q6IFwiICsgbHNSYXRlT2JqZWN0XG4gICAgICAgICAgICAgICAgLy9nZXQgXCJBUFBMSUVEX1RPXCIgZm9yIHRoYXQgcmF0ZVxuICAgICAgICAgICAgICAgIGRlZiBsc0FwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsc1JhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwibHNBcHBsaWVkVG86IFwiICsgbHNBcHBsaWVkVG9cbiAgICAgICAgICAgICAgICBkZWYgbHNBcHBsaWVkVG9WYWx1ZVxuICAgICAgICAgICAgICAgIGlmIChsc0FwcGxpZWRUbyl7XG4gICAgICAgICAgICAgICAgICAgIGxzQXBwbGllZFRvVmFsdWUgPSBsc0FwcGxpZWRUby5zdWJzdHJpbmcobHNBcHBsaWVkVG8uaW5kZXhPZignKCcpKzEsbHNBcHBsaWVkVG8uaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlT2JqZWN0LmdldElkKCksIFJBVEVfUkVGKTogXCIgKyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5yYXRlUmVmJ10udG9TdHJpbmcoKSlcbiAgICAgICAgICAgICAgICBkZWYgbHNSYXRlUmVmID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxzUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQucmF0ZVJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwibHNSYXRlUmVmOiBcIiArIGxzUmF0ZVJlZlxuICAgICAgICAgICAgICAgIGRlZiBsc1JhdGVSZWZLZXlcbiAgICAgICAgICAgICAgICBkZWYgbHNSYXRlUmVmVmFsdWVcbiAgICAgICAgICAgICAgICBpZihsc1JhdGVSZWYuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgICAgIGxzUmF0ZVJlZiA9IGxzUmF0ZVJlZi50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIGxzUmF0ZVJlZktleSA9IGxzUmF0ZVJlZi5zdWJzdHJpbmcobHNSYXRlUmVmLmluZGV4T2YoJygnKSsxLGxzUmF0ZVJlZi5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgICAgIGRlZiBsc1JhdGVSZWZPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oREJPYmplY3RzICsgbHNSYXRlUmVmS2V5KVxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgbHNSYXRlUmVmT2JqZWN0XG4gICAgICAgICAgICAgICAgICAgIGxzUmF0ZVJlZlZhbHVlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxzUmF0ZVJlZk9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnJhdGUubmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIGxzUmF0ZVJlZlZhbHVlID0gbHNSYXRlUmVmVmFsdWUuc3Vic3RyaW5nKGxzUmF0ZVJlZlZhbHVlLmluZGV4T2YoJygnKSsxLGxzUmF0ZVJlZlZhbHVlLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZihsc0FwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKFwiQk9USFwiKSB8fCBsc0FwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKFwiQ1VTVE9NRVJcIikpe1xuICAgICAgICAgICAgICAgICAgICAvL2dldCBcIlRPVEFMX0FNT1VOVF9DVVNUT01FUlwiIGZvciB0aGF0IGNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICBkZWYgdG90Q3VzdG9tZXIgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC50b3RDdXN0b21lciddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuICAgICAgICAgICAgICAgICAgICBpZighdG90Q3VzdG9tZXIgfHwgdG90Q3VzdG9tZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscyhcIjAuMFwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lci5hZGQobHNSYXRlUmVmVmFsdWUudG9TdHJpbmcoKSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICB9ICAgIFxuICAgICAgICB9XG5cbiAgICB9ZWxzZXtcbiAgICAgICAgLypDb250YWJpbGl6emF6aW9uZSBub24gYSBjb3JwbyovXG4gICAgICAgIGxvZy5kZWJ1ZyBcIkNvbnRhYmlsaXp6YXppb25lIE5PTiBhIGNvcnBvXCJcblxuICAgICAgICAvL09QQUFfUkVQTEFDRURfTUFURVJJQUxTXG4gICAgICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKSAhPSBcIlwiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpe1xuICAgICAgICAgICAgLy9sb2cuZGVidWcgXCJNYXRlcmlhbGk6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpXG4gICAgICAgICAgICAvKkNpY2xhcmUgdHV0dGkgZ2xpIG9nZ2V0dGkgYXNzb2NpYXRpIGFsIGNhbXBvKi9cbiAgICAgICAgICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50c1xuICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyAgXG4gICAgICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTtcbiAgICAgICAgICAgIGRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XG4gICAgICAgICAgICBkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcblxuICAgICAgICAgICAgZGVmIHJlcE1hdExpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscylcblxuICAgICAgICAgICAgZm9yKG1hdCBpbiByZXBNYXRMaXN0KXtcbiAgICAgICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3RcbiAgICAgICAgICAgICAgICBkZWYgY29tcG9uZW50PW1hdC50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgZGVmIGNvbXBvbmVudEtleSA9IGNvbXBvbmVudC5zdWJzdHJpbmcoY29tcG9uZW50LmluZGV4T2YoJygnK09QQUEpKzEsY29tcG9uZW50Lmxlbmd0aCgpLTEpXG4gICAgICAgICAgICAgICAgZGVmIGNvbXBvbmVudE9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihjb21wb25lbnRLZXkpXG4gICAgICAgICAgICAgICAgLy9nZXQgXCJBUFBMSUVEX1RPXCIgZm9yIHRoYXQgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgZGVmIGFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKSBhcyBBcnJheUxpc3RcbiAgICAgICAgICAgICAgICBkZWYgYXBwbGllZFRvVmFsdWVcbiAgICAgICAgICAgICAgICBpZihhcHBsaWVkVG8uc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgICAgIGFwcGxpZWRUbyA9IGFwcGxpZWRUby50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIGFwcGxpZWRUb1ZhbHVlID0gYXBwbGllZFRvLnN1YnN0cmluZyhhcHBsaWVkVG8uaW5kZXhPZignKCcpKzEsYXBwbGllZFRvLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICAgICAgLy9sb2cuZGVidWcgXCJhcHBsaWVkVG9WYWx1ZTogXCIgKyBhcHBsaWVkVG9WYWx1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBkZWYgbWF0TnVtYmVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5tYXRlcmlhbFJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKSBhcyBBcnJheUxpc3RcbiAgICAgICAgICAgICAgICBkZWYgbWF0TnVtYmVyS2V5XG4gICAgICAgICAgICAgICAgZGVmIG1hdE51bWJlclZhbHVlXG4gICAgICAgICAgICAgICAgaWYobWF0TnVtYmVyLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICBtYXROdW1iZXIgPSBtYXROdW1iZXIudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICBtYXROdW1iZXJLZXkgPSBtYXROdW1iZXIuc3Vic3RyaW5nKG1hdE51bWJlci5pbmRleE9mKCcoJykrMSxtYXROdW1iZXIuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgICAgICBkZWYgbWF0TnVtYmVyT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKERCT2JqZWN0cyArIG1hdE51bWJlcktleSlcbiAgICAgICAgICAgICAgICAgICAgbWF0TnVtYmVyVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obWF0TnVtYmVyT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoubWF0ZXJpYWwubmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIG1hdE51bWJlclZhbHVlID0gbWF0TnVtYmVyVmFsdWUuc3Vic3RyaW5nKG1hdE51bWJlclZhbHVlLmluZGV4T2YoJygnKSsxLG1hdE51bWJlclZhbHVlLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZGVmIHNlcmlhbE51bWJlciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuc2VyaWFsTnVtYmVyJ10udG9TdHJpbmcoKSkgPyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnNlcmlhbE51bWJlciddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKSBhcyBBcnJheUxpc3QgOiBudWxsXG4gICAgICAgICAgICAgICAgZGVmIHNlcmlhbE51bWJlclZhbHVlXG4gICAgICAgICAgICAgICAgaWYoc2VyaWFsTnVtYmVyKXtcbiAgICAgICAgICAgICAgICAgICAgc2VyaWFsTnVtYmVyID0gc2VyaWFsTnVtYmVyLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgc2VyaWFsTnVtYmVyVmFsdWUgPSBzZXJpYWxOdW1iZXIuc3Vic3RyaW5nKHNlcmlhbE51bWJlci5pbmRleE9mKCcoJykrMSxzZXJpYWxOdW1iZXIuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy9nZXQgXCJERUxFVEVEXCIgZm9yIHRoYXQgcmF0ZVxuICAgICAgICAgICAgICAgIGRlZiBkZWxldGVkXG4gICAgICAgICAgICAgICAgZGVmIGRlbGV0ZWRWYWx1ZVxuICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihtYXQuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuZGVsZXRlZCddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlZCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihtYXQuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuZGVsZXRlZCddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImRlbGV0ZWQ6IFwiICsgZGVsZXRlZFxuICAgICAgICAgICAgICAgICAgICBpZiAoZGVsZXRlZCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVkVmFsdWUgPSBkZWxldGVkLnN1YnN0cmluZyhkZWxldGVkLmluZGV4T2YoJygnKSsxLGRlbGV0ZWQuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYoKGFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKFwiQk9USFwiKSB8fCBhcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscyhcIkNVU1RPTUVSXCIpKSAmJiAhZGVsZXRlZFZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKFwidHJ1ZVwiKSl7XG4gICAgICAgICAgICAgICAgICAgIC8vZ2V0IFwiVE9UQUxfQU1PVU5UX0NVU1RPTUVSXCIgZm9yIHRoYXQgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgIGRlZiB0b3RDdXN0b21lciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQudG90Q3VzdCddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuICAgICAgICAgICAgICAgICAgICBpZighdG90Q3VzdG9tZXIgfHwgdG90Q3VzdG9tZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscyhcIjAuMFwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyLmFkZChtYXROdW1iZXJWYWx1ZS50b1N0cmluZygpICsgKCFzZXJpYWxOdW1iZXIudG9TdHJpbmcoKS5lcXVhbHMoXCJbXVwiKSA/IFwiIChcIiArIHNlcmlhbE51bWJlclZhbHVlLnRvU3RyaW5nKCkgKyBcIilcIiA6IFwiICgpXCIpKSAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgIH0gICAgXG4gICAgICAgIH0gIFxuXG4gICAgICAgIC8vT1BBQV9VTkFUQU5UVU1fUkFURVNcbiAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcykhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHVuYVRhbnR1bVJhdGVzKSAhPSBcIlwiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHVuYVRhbnR1bVJhdGVzKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSl7XG4gICAgICAgICAgICBsb2cuZGVidWcgXCJVbmEgdGFudHVtIHJhdGVzOiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodW5hVGFudHVtUmF0ZXMpXG4gICAgICAgICAgICAvKkNpY2xhcmUgdHV0dGkgZ2xpIG9nZ2V0dGkgYXNzb2NpYXRpIGFsIGNhbXBvKi9cbiAgICAgICAgICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50c1xuICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyAgXG4gICAgICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTtcbiAgICAgICAgICAgIGRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XG4gICAgICAgICAgICBkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcblxuICAgICAgICAgICAgZGVmIHVtUmF0ZXNMaXN0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcylcblxuICAgICAgICAgICAgZm9yKHVtIGluIHVtUmF0ZXNMaXN0KXtcbiAgICAgICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3RcbiAgICAgICAgICAgICAgICBkZWYgdW1SYXRlPXVtLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBkZWYgdW1SYXRlS2V5ID0gdW1SYXRlLnN1YnN0cmluZyh1bVJhdGUuaW5kZXhPZignKCcpKzEsdW1SYXRlLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICBkZWYgdW1SYXRlT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHVtUmF0ZUtleSlcbiAgICAgICAgICAgICAgICAvL2dldCBcIkFQUExJRURfVE9cIiBmb3IgdGhhdCByYXRlXG4gICAgICAgICAgICAgICAgZGVmIHVtQXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHVtUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuYXBwbGllZFRvJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBkZWYgdW1BcHBsaWVkVG9WYWx1ZSA9IHVtQXBwbGllZFRvLnN1YnN0cmluZyh1bUFwcGxpZWRUby5pbmRleE9mKCcoJykrMSx1bUFwcGxpZWRUby5pbmRleE9mKCcpJykpXG5cbiAgICAgICAgICAgICAgICBkZWYgdW1SYXRlUmVmID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHVtUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQucmF0ZVJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG5cbiAgICAgICAgICAgICAgICBkZWYgdW1SYXRlUmVmS2V5XG4gICAgICAgICAgICAgICAgZGVmIHVtUmF0ZVJlZlZhbHVlXG4gICAgICAgICAgICAgICAgaWYodW1SYXRlUmVmLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICB1bVJhdGVSZWYgPSB1bVJhdGVSZWYudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICB1bVJhdGVSZWZLZXkgPSB1bVJhdGVSZWYuc3Vic3RyaW5nKHVtUmF0ZVJlZi5pbmRleE9mKCcoJykrMSx1bVJhdGVSZWYuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgICAgICBkZWYgdW1SYXRlUmVmT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKERCT2JqZWN0cyArIHVtUmF0ZVJlZktleSlcbiAgICAgICAgICAgICAgICAgICAgdW1SYXRlUmVmVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoucmF0ZS5OYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgdW1SYXRlUmVmVmFsdWUgPSB1bVJhdGVSZWZWYWx1ZS5zdWJzdHJpbmcodW1SYXRlUmVmVmFsdWUuaW5kZXhPZignKCcpKzEsdW1SYXRlUmVmVmFsdWUuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZih1bUFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKFwiQk9USFwiKSB8fCB1bUFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKFwiQ1VTVE9NRVJcIikpe1xuICAgICAgICAgICAgICAgICAgICAvL2dldCBcIlRPVEFMX0FNT1VOVF9DVVNUT01FUlwiIGZvciB0aGF0IGNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICBkZWYgdG90Q3VzdG9tZXIgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lib2oub25TaXRlUmF0ZVJlcG9ydC50b3RDdXN0b21lciddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuICAgICAgICAgICAgICAgICAgICBpZighdG90Q3VzdG9tZXIgfHwgdG90Q3VzdG9tZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscyhcIjAuMFwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lci5hZGQodW1SYXRlUmVmVmFsdWUudG9TdHJpbmcoKSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICB9ICAgIFxuICAgICAgICB9XG5cbiAgICAgICAgLy9PUEFBX0xBQk9VUl9SQVRFU1xuICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxhYm91clJhdGVzKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpICE9IFwiXCIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKXtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIkxhYm91ciByYXRlczogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxhYm91clJhdGVzKVxuICAgICAgICAgICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovXG4gICAgICAgICAgICAvL2luc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHNcbiAgICAgICAgICAgIENsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTsgIFxuICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XG4gICAgICAgICAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xuICAgICAgICAgICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XG5cbiAgICAgICAgICAgIGRlZiBsYWJvdXJSYXRlc0xpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxhYm91clJhdGVzKVxuXG4gICAgICAgICAgICBmb3IobGIgaW4gbGFib3VyUmF0ZXNMaXN0KXtcbiAgICAgICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3RcbiAgICAgICAgICAgICAgICBkZWYgbGJSYXRlPWxiLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBkZWYgbGJSYXRlS2V5ID0gbGJSYXRlLnN1YnN0cmluZyhsYlJhdGUuaW5kZXhPZignKCcpKzEsbGJSYXRlLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICBkZWYgbGJSYXRlT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGxiUmF0ZUtleSlcbiAgICAgICAgICAgICAgICAvL2dldCBcIkFQUExJRURfVE9cIiBmb3IgdGhhdCByYXRlXG4gICAgICAgICAgICAgICAgZGVmIGxiQXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuYXBwbGllZFRvJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBkZWYgbGJBcHBsaWVkVG9WYWx1ZSA9IGxiQXBwbGllZFRvLnN1YnN0cmluZyhsYkFwcGxpZWRUby5pbmRleE9mKCcoJykrMSxsYkFwcGxpZWRUby5pbmRleE9mKCcpJykpXG5cbiAgICAgICAgICAgICAgICBkZWYgbGJSYXRlUmVmID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQucmF0ZVJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZGVmIGxiUmF0ZVJlZktleVxuICAgICAgICAgICAgICAgIGRlZiBsYlJhdGVSZWZWYWx1ZVxuICAgICAgICAgICAgICAgIGlmKGxiUmF0ZVJlZi5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgbGJSYXRlUmVmID0gbGJSYXRlUmVmLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgbGJSYXRlUmVmS2V5ID0gbGJSYXRlUmVmLnN1YnN0cmluZyhsYlJhdGVSZWYuaW5kZXhPZignKCcpKzEsbGJSYXRlUmVmLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICAgICAgZGVmIGxiUmF0ZVJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihEQk9iamVjdHMgKyBsYlJhdGVSZWZLZXkpXG4gICAgICAgICAgICAgICAgICAgIGxiUmF0ZVJlZlZhbHVlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZVJlZk9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnJhdGUuTmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIGxiUmF0ZVJlZlZhbHVlID0gbGJSYXRlUmVmVmFsdWUuc3Vic3RyaW5nKGxiUmF0ZVJlZlZhbHVlLmluZGV4T2YoJygnKSsxLGxiUmF0ZVJlZlZhbHVlLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZihsYkFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKFwiQk9USFwiKSB8fCBsYkFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKFwiQ1VTVE9NRVJcIikpe1xuICAgICAgICAgICAgICAgICAgICAvL2dldCBcIlRPVEFMX0FNT1VOVF9DVVNUT01FUlwiIGZvciB0aGF0IGNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICBkZWYgdG90Q3VzdG9tZXIgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lib2oub25TaXRlUmF0ZVJlcG9ydC50b3RDdXN0b21lciddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuICAgICAgICAgICAgICAgICAgICBpZighdG90Q3VzdG9tZXIgfHwgdG90Q3VzdG9tZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscyhcIjAuMFwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lci5hZGQobGJSYXRlUmVmVmFsdWUudG9TdHJpbmcoKSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICB9ICAgIFxuICAgICAgICB9XG5cbiAgICAgICAgLy9PUEFBX1RSQVZFTF9SQVRFU1xuICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYXZlbFJhdGVzKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsUmF0ZXMpICE9IFwiXCIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsUmF0ZXMpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKXtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlRyYXZlbCByYXRlczogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYXZlbFJhdGVzKVxuICAgICAgICAgICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovXG4gICAgICAgICAgICAvL2luc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHNcbiAgICAgICAgICAgIENsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTsgIFxuICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XG4gICAgICAgICAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xuICAgICAgICAgICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XG5cbiAgICAgICAgICAgIGRlZiB0cmF2ZWxSYXRlc0xpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYXZlbFJhdGVzKVxuXG4gICAgICAgICAgICBmb3IodHIgaW4gdHJhdmVsUmF0ZXNMaXN0KXtcbiAgICAgICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3RcbiAgICAgICAgICAgICAgICBkZWYgdHJSYXRlPXRyLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBkZWYgdHJSYXRlS2V5ID0gdHJSYXRlLnN1YnN0cmluZyh0clJhdGUuaW5kZXhPZignKCcpKzEsdHJSYXRlLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICBkZWYgdHJSYXRlT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHRyUmF0ZUtleSlcbiAgICAgICAgICAgICAgICAvL2dldCBcIkFQUExJRURfVE9cIiBmb3IgdGhhdCByYXRlXG4gICAgICAgICAgICAgICAgZGVmIHRyQXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuYXBwbGllZFRvJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBkZWYgdHJBcHBsaWVkVG9WYWx1ZSA9IHRyQXBwbGllZFRvLnN1YnN0cmluZyh0ckFwcGxpZWRUby5pbmRleE9mKCcoJykrMSx0ckFwcGxpZWRUby5pbmRleE9mKCcpJykpXG5cbiAgICAgICAgICAgICAgICBkZWYgdHJSYXRlUmVmID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQucmF0ZVJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZGVmIHRyUmF0ZVJlZktleVxuICAgICAgICAgICAgICAgIGRlZiB0clJhdGVSZWZWYWx1ZVxuICAgICAgICAgICAgICAgIGlmKHRyUmF0ZVJlZi5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgdHJSYXRlUmVmID0gdHJSYXRlUmVmLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgdHJSYXRlUmVmS2V5ID0gdHJSYXRlUmVmLnN1YnN0cmluZyh0clJhdGVSZWYuaW5kZXhPZignKCcpKzEsdHJSYXRlUmVmLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICAgICAgZGVmIHRyUmF0ZVJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihEQk9iamVjdHMgKyB0clJhdGVSZWZLZXkpXG4gICAgICAgICAgICAgICAgICAgIHRyUmF0ZVJlZlZhbHVlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZVJlZk9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnJhdGUuTmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIHRyUmF0ZVJlZlZhbHVlID0gdHJSYXRlUmVmVmFsdWUuc3Vic3RyaW5nKHRyUmF0ZVJlZlZhbHVlLmluZGV4T2YoJygnKSsxLHRyUmF0ZVJlZlZhbHVlLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZih0ckFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKFwiQk9USFwiKSB8fCB0ckFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKFwiQ1VTVE9NRVJcIikpe1xuICAgICAgICAgICAgICAgICAgICAvL2dldCBcIlRPVEFMX0FNT1VOVF9DVVNUT01FUlwiIGZvciB0aGF0IGNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICBkZWYgdG90Q3VzdG9tZXIgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odHJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lib2oub25TaXRlUmF0ZVJlcG9ydC50b3RDdXN0b21lciddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuICAgICAgICAgICAgICAgICAgICBpZighdG90Q3VzdG9tZXIgfHwgdG90Q3VzdG9tZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscyhcIjAuMFwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lci5hZGQodHJSYXRlUmVmVmFsdWUudG9TdHJpbmcoKSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICB9ICAgIFxuICAgICAgICB9XG5cbiAgICB9XG5cblxuICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgIGlmICghZXJyb3JzICYmICF3YXJuaW5ncyl7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfWVsc2V7XG4gICAgICAgIGlmKCFlcnJvcnMgJiYgd2FybmluZ3Mpe1xuICAgICAgICAgICAgLy9TZSBjaSBzb25vIHNvbG8gd2FybmluZ3MgdmVyaWZpY28gc2UgbCd1dGVudGUgaGEgZ2lcdTAwZTAgZGljaGlhcmF0byBkaSB2b2xlciBwcm9zZWd1aXJlIGNvbXVucXVlXG4gICAgICAgICAgICAvLyAtIHRyYW5zaXRpb24gZmllbGQgXCJPUEFBX0NIRUNLX0FORF9DT05GSVJNXCI9XCJZZXNcIlxuICAgICAgICAgICAgLy8gLSBpbiBjYXNvIGNvbnRyYXJpbyBpbnZpbyBpIHdhcm5pbmcgYSBGRVxuXG4gICAgICAgICAgICAvL2xvZy5kZWJ1ZyBcInRyYW5zaXRpb25DaGVjazogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaylcbiAgICAgICAgICAgIC8vbG9nLmRlYnVnIFwicmVzdWx0OiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKVxuICAgICAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpKXtcbiAgICAgICAgICAgICAgICAvL2xvZy5kZWJ1ZyBcInJldHVybiB0cnVlIC0gdHJhbnNpdGlvbkNoZWNrID0gWWVzXCJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgZGVmIHdMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICAgICAgICAgICAgICBpZih3YXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lci5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgZGVmIHdMaXN0Q29uZmlybUVtcHR5UmF0ZSA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKFwiV1wiKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKFwiQ1VTVE9NRVJfQ09ORklSTV9FTVBUWV9SQVRFU1wiKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQod2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIpXG5cbiAgICAgICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5UmF0ZSlcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZih3YXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZSA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChcIldcIilcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoXCJDVVNUT01FUl9DT05GSVJNX0VNUFRZX01BVF9RVU9URVwiKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChudWxsKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZCh3YXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyKVxuXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG91dHB1dC5hZGQod0xpc3QpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiV1wiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgICAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKFwiV1wiLCBvdXRwdXQudG9TdHJpbmcoKSkgICBcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICAgIGlmKGVycm9ycyAmJiAhd2FybmluZ3Mpe1xuICAgICAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICAgICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIkVcIiwgb3V0cHV0LnRvU3RyaW5nKCkpICAgXG4gICAgICAgIH1cbiAgICAgICAgaWYoZXJyb3JzICYmIHdhcm5pbmdzKXtcbiAgICAgICAgICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgZGVmIHdMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICAgICAgICAgIGlmKHdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHlSYXRlID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoXCJXXCIpXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoXCJDVVNUT01FUl9DT05GSVJNX0VNUFRZX1JBVEVTXCIpXG4gICAgICAgICAgICAgICAgXHR3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQod2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIpXG5cbiAgICAgICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5UmF0ZSlcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZih3YXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZSA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChcIldcIilcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoXCJDVVNUT01FUl9DT05GSVJNX0VNUFRZX01BVF9RVU9URVwiKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChudWxsKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZCh3YXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyKVxuXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgICAgIG91dHB1dC5hZGQod0xpc3QpXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJXRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJXRVwiLCBvdXRwdXQudG9TdHJpbmcoKSkgIFxuICAgICAgICB9XG4gICAgfVxuLy99Y2F0Y2goRXhjZXB0aW9uIGUpe1xuLy8gICAgbG9nLmRlYnVnIFwiRXhjZXB0aW9uOiBcIiArIGVcbi8vICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJFeGNlcHRpb25cIiwgZS50b1N0cmluZygpKSAgXG4vL31cbiIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZQppbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb24KaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3IKaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CmRlZiBDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQogCklzc3VlIGlzc3VlID0gaXNzdWUKLy9Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7Ci8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoIk9QVVQtMzk2IikKCmRlZiBlcnJvcnMgPSBmYWxzZQpkZWYgd2FybmluZ3MgPSBmYWxzZQoKZGVmIGx1bXBTdW1QcmljZSA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YubHVtcFN1bVByaWNlJ10udG9TdHJpbmcoKSlbMF0KCi8qQ2FtcGkgY29uIGRhdGkgb2JibGlnYXRvcmkgcGVyIHRpY2tldCBub24gYSBjb3JwbyovCmRlZiByZXBNYXRlcmlhbHMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJlcGxhY2VkTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF0KZGVmIHVuYVRhbnR1bVJhdGVzID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi51bmF0YW50dW1SYXRlcyddLnRvU3RyaW5nKCkpWzBdCmRlZiBsYWJvdXJSYXRlcyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YubGFib3VyUmF0ZXMnXS50b1N0cmluZygpKVswXQpkZWYgdHJhdmVsUmF0ZXMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnRyYXZlbFJhdGVzJ10udG9TdHJpbmcoKSlbMF0KCi8qQ2FtcGkgY29uIGRhdGkgb2JibGlnYXRvcmkgcGVyIHRpY2tldCBhIGNvcnBvKi8KZGVmIGx1bXBTdW1SYXRlcyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YubHVtcFN1bVJhdGVzJ10udG9TdHJpbmcoKSlbMF0KCi8qQ29uZmVybWEgdXRlbnRlIHN1IHdhcm5pbmdzKi8KZGVmIHRyYW5zaXRpb25DaGVjayA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY2hlY2tBbmRDb25maXJtJ10udG9TdHJpbmcoKSlbMF0KCi8qSW5zaWdodCBTY2hlbWEgSURzKi8KZGVmIERCT2JqZWN0cyA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuZGJvJ10udG9TdHJpbmcoKSArICItIgpkZWYgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEnXS50b1N0cmluZygpICsgIi0iCgpkZWYgZXJyb3JNYW5kYXRvcnlGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIGVycm9ySm9iU3RhcnRlZENvbXBsZXRlZEZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKQpkZWYgd2FybmluZ0VtcHR5RmllbGRzID0gbmV3IEFycmF5TGlzdCgpCmRlZiB3YXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyID0gbmV3IEFycmF5TGlzdCgpCmRlZiB3YXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lciA9IG5ldyBBcnJheUxpc3QoKQoKLy90cnl7CiAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1QcmljZSkhPW51bGwgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUHJpY2UpLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKSl7CiAgICAgICAgLypDb250YWJpbGl6emF6aW9uZSBhIGNvcnBvKi8KICAgICAgICBsb2cuZGVidWcgIkNvbnRhYmlsaXp6YXppb25lIGEgY29ycG8iCiAgICAgICAgLy9PUEFBX0xVTVBfU1VNX1JBVEVTCiAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUmF0ZXMpIT1udWxsICYmIChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUmF0ZXMpICE9ICIiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1SYXRlcykudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICAgICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovCiAgICAgICAgICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50cwogICAgICAgICAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZSIpOyAgCiAgICAgICAgICAgIENsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUiKTsKICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTsKICAgICAgICAgICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7CgogICAgICAgICAgICBkZWYgbHNSYXRlc0xpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1SYXRlcykKCQkJbG9nLmRlYnVnIGxzUmF0ZXNMaXN0CiAgICAgICAgICAgIGZvcihscyBpbiBsc1JhdGVzTGlzdCl7CiAgICAgICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3QKICAgICAgICAgICAgICAgIGRlZiBsc1JhdGU9bHMudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgbG9nLmRlYnVnICJsc1JhdGU6ICIgKyBsc1JhdGUKICAgICAgICAgICAgICAgIGRlZiBsc1JhdGVLZXkgPSBsc1JhdGUuc3Vic3RyaW5nKGxzUmF0ZS5pbmRleE9mKCcoJykrMSxsc1JhdGUuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgbG9nLmRlYnVnICJsc1JhdGVLZXk6ICIgKyBsc1JhdGVLZXkKICAgICAgICAgICAgICAgIGRlZiBsc1JhdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4obHNSYXRlS2V5KQogICAgICAgICAgICAgICAgbG9nLmRlYnVnICJsc1JhdGVPYmplY3Q6ICIgKyBsc1JhdGVPYmplY3QKICAgICAgICAgICAgICAgIC8vZ2V0ICJBUFBMSUVEX1RPIiBmb3IgdGhhdCByYXRlCiAgICAgICAgICAgICAgICBkZWYgbHNBcHBsaWVkVG8gPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgbG9nLmRlYnVnICJsc0FwcGxpZWRUbzogIiArIGxzQXBwbGllZFRvCiAgICAgICAgICAgICAgICBkZWYgbHNBcHBsaWVkVG9WYWx1ZQogICAgICAgICAgICAgICAgaWYgKGxzQXBwbGllZFRvKXsKICAgICAgICAgICAgICAgICAgICBsc0FwcGxpZWRUb1ZhbHVlID0gbHNBcHBsaWVkVG8uc3Vic3RyaW5nKGxzQXBwbGllZFRvLmluZGV4T2YoJygnKSsxLGxzQXBwbGllZFRvLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyAib2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxzUmF0ZU9iamVjdC5nZXRJZCgpLCBSQVRFX1JFRik6ICIgKyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5yYXRlUmVmJ10udG9TdHJpbmcoKSkKICAgICAgICAgICAgICAgIGRlZiBsc1JhdGVSZWYgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obHNSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5yYXRlUmVmJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyAibHNSYXRlUmVmOiAiICsgbHNSYXRlUmVmCiAgICAgICAgICAgICAgICBkZWYgbHNSYXRlUmVmS2V5CiAgICAgICAgICAgICAgICBkZWYgbHNSYXRlUmVmVmFsdWUKICAgICAgICAgICAgICAgIGlmKGxzUmF0ZVJlZi5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgICAgICBsc1JhdGVSZWYgPSBsc1JhdGVSZWYudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgIGxzUmF0ZVJlZktleSA9IGxzUmF0ZVJlZi5zdWJzdHJpbmcobHNSYXRlUmVmLmluZGV4T2YoJygnKSsxLGxzUmF0ZVJlZi5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICAgICAgZGVmIGxzUmF0ZVJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihPUEFBICsgbHNSYXRlUmVmS2V5KQogICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBsc1JhdGVSZWZPYmplY3QKICAgICAgICAgICAgICAgICAgICBsc1JhdGVSZWZWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsc1JhdGVSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5yYXRlLk5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgIGxzUmF0ZVJlZlZhbHVlID0gbHNSYXRlUmVmVmFsdWUuc3Vic3RyaW5nKGxzUmF0ZVJlZlZhbHVlLmluZGV4T2YoJygnKSsxLGxzUmF0ZVJlZlZhbHVlLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZihsc0FwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJCT1RIIikgfHwgbHNBcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscygiQ1VTVE9NRVIiKSl7CiAgICAgICAgICAgICAgICAgICAgLy9nZXQgIlRPVEFMX0FNT1VOVF9DVVNUT01FUiIgZm9yIHRoYXQgY29tcG9uZW50CiAgICAgICAgICAgICAgICAgICAgZGVmIHRvdEN1c3RvbWVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxzUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdG9tZXInXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkKICAgICAgICAgICAgICAgICAgICBpZighdG90Q3VzdG9tZXIgfHwgdG90Q3VzdG9tZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscygiMC4wIikpewogICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyLmFkZChsc1JhdGVSZWZWYWx1ZS50b1N0cmluZygpKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgIH0gICAgCiAgICAgICAgfQoKICAgIH1lbHNlewogICAgICAgIC8qQ29udGFiaWxpenphemlvbmUgbm9uIGEgY29ycG8qLwogICAgICAgIGxvZy5kZWJ1ZyAiQ29udGFiaWxpenphemlvbmUgTk9OIGEgY29ycG8iCgogICAgICAgIC8vT1BBQV9SRVBMQUNFRF9NQVRFUklBTFMKICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykgIT0gIiIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgICAgICAvL2xvZy5kZWJ1ZyAiTWF0ZXJpYWxpOiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpCiAgICAgICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qLwogICAgICAgICAgICAvL2luc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHMKICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGUiKTsgIAogICAgICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CiAgICAgICAgICAgIGRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7CiAgICAgICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpOwoKICAgICAgICAgICAgZGVmIHJlcE1hdExpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykKCiAgICAgICAgICAgIGZvcihtYXQgaW4gcmVwTWF0TGlzdCl7CiAgICAgICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3QKICAgICAgICAgICAgICAgIGRlZiBjb21wb25lbnQ9bWF0LnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIGRlZiBjb21wb25lbnRLZXkgPSBjb21wb25lbnQuc3Vic3RyaW5nKGNvbXBvbmVudC5pbmRleE9mKCcoJytPUEFBKSsxLGNvbXBvbmVudC5sZW5ndGgoKS0xKQogICAgICAgICAgICAgICAgZGVmIGNvbXBvbmVudE9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihjb21wb25lbnRLZXkpCiAgICAgICAgICAgICAgICAvL2dldCAiQVBQTElFRF9UTyIgZm9yIHRoYXQgY29tcG9uZW50CiAgICAgICAgICAgICAgICBkZWYgYXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuYXBwbGllZFRvJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpIGFzIEFycmF5TGlzdAogICAgICAgICAgICAgICAgZGVmIGFwcGxpZWRUb1ZhbHVlCiAgICAgICAgICAgICAgICBpZihhcHBsaWVkVG8uc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICAgICAgYXBwbGllZFRvID0gYXBwbGllZFRvLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgICAgICBhcHBsaWVkVG9WYWx1ZSA9IGFwcGxpZWRUby5zdWJzdHJpbmcoYXBwbGllZFRvLmluZGV4T2YoJygnKSsxLGFwcGxpZWRUby5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICAgICAgLy9sb2cuZGVidWcgImFwcGxpZWRUb1ZhbHVlOiAiICsgYXBwbGllZFRvVmFsdWUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZGVmIG1hdE51bWJlciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQubWF0ZXJpYWxSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkgYXMgQXJyYXlMaXN0CiAgICAgICAgICAgICAgICBkZWYgbWF0TnVtYmVyS2V5CiAgICAgICAgICAgICAgICBkZWYgbWF0TnVtYmVyVmFsdWUKICAgICAgICAgICAgICAgIGlmKG1hdE51bWJlci5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgICAgICBtYXROdW1iZXIgPSBtYXROdW1iZXIudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgIG1hdE51bWJlcktleSA9IG1hdE51bWJlci5zdWJzdHJpbmcobWF0TnVtYmVyLmluZGV4T2YoJygnKSsxLG1hdE51bWJlci5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICAgICAgZGVmIG1hdE51bWJlck9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihEQk9iamVjdHMgKyBtYXROdW1iZXJLZXkpCiAgICAgICAgICAgICAgICAgICAgbWF0TnVtYmVyVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obWF0TnVtYmVyT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoubWF0ZXJpYWwubmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgICAgICAgICAgICAgbWF0TnVtYmVyVmFsdWUgPSBtYXROdW1iZXJWYWx1ZS5zdWJzdHJpbmcobWF0TnVtYmVyVmFsdWUuaW5kZXhPZignKCcpKzEsbWF0TnVtYmVyVmFsdWUuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBkZWYgc2VyaWFsTnVtYmVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5zZXJpYWxOdW1iZXInXS50b1N0cmluZygpKSA/IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuc2VyaWFsTnVtYmVyJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpIGFzIEFycmF5TGlzdCA6IG51bGwKICAgICAgICAgICAgICAgIGRlZiBzZXJpYWxOdW1iZXJWYWx1ZQogICAgICAgICAgICAgICAgaWYoc2VyaWFsTnVtYmVyICYmIHNlcmlhbE51bWJlci5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgICAgICBzZXJpYWxOdW1iZXIgPSBzZXJpYWxOdW1iZXIudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgIHNlcmlhbE51bWJlclZhbHVlID0gc2VyaWFsTnVtYmVyLnN1YnN0cmluZyhzZXJpYWxOdW1iZXIuaW5kZXhPZignKCcpKzEsc2VyaWFsTnVtYmVyLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAKCiAgICAgICAgICAgICAgICBpZihhcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscygiQk9USCIpIHx8IGFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJDVVNUT01FUiIpKXsKICAgICAgICAgICAgICAgICAgICAvL2dldCAiVE9UQUxfQU1PVU5UX0NVU1RPTUVSIiBmb3IgdGhhdCBjb21wb25lbnQKICAgICAgICAgICAgICAgICAgICBkZWYgdG90Q3VzdG9tZXIgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdEN1c3QnXS50b1N0cmluZygpKSA/IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQudG90Q3VzdCddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKSA6IG51bGwKICAgICAgICAgICAgICAgICAgICBpZighdG90Q3VzdG9tZXIgfHwgdG90Q3VzdG9tZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscygiMC4wIikpewogICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXIuYWRkKG1hdE51bWJlclZhbHVlLnRvU3RyaW5nKCkgKyAoKHNlcmlhbE51bWJlciAmJiBzZXJpYWxOdW1iZXIuc2l6ZSgpID4gMCkgPyAiICgiICsgc2VyaWFsTnVtYmVyVmFsdWUudG9TdHJpbmcoKSArICIpIiA6ICIgKCkiKSkgICAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICB9ICAgIAogICAgICAgIH0gIAoKICAgICAgICAvL09QQUFfVU5BVEFOVFVNX1JBVEVTCiAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcykhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHVuYVRhbnR1bVJhdGVzKSAhPSAiIiAmJiAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcykudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICAgICAgbG9nLmRlYnVnICJVbmEgdGFudHVtIHJhdGVzOiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcykKICAgICAgICAgICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovCiAgICAgICAgICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50cwogICAgICAgICAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZSIpOyAgCiAgICAgICAgICAgIENsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUiKTsKICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTsKICAgICAgICAgICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7CgogICAgICAgICAgICBkZWYgdW1SYXRlc0xpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHVuYVRhbnR1bVJhdGVzKQoKICAgICAgICAgICAgZm9yKHVtIGluIHVtUmF0ZXNMaXN0KXsKICAgICAgICAgICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdAogICAgICAgICAgICAgICAgZGVmIHVtUmF0ZT11bS50b1N0cmluZygpCiAgICAgICAgICAgICAgICBkZWYgdW1SYXRlS2V5ID0gdW1SYXRlLnN1YnN0cmluZyh1bVJhdGUuaW5kZXhPZignKCcpKzEsdW1SYXRlLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4odW1SYXRlS2V5KQogICAgICAgICAgICAgICAgLy9nZXQgIkFQUExJRURfVE8iIGZvciB0aGF0IHJhdGUKICAgICAgICAgICAgICAgIGRlZiB1bUFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgICAgICAgICBkZWYgdW1BcHBsaWVkVG9WYWx1ZSA9IHVtQXBwbGllZFRvLnN1YnN0cmluZyh1bUFwcGxpZWRUby5pbmRleE9mKCcoJykrMSx1bUFwcGxpZWRUby5pbmRleE9mKCcpJykpCgogICAgICAgICAgICAgICAgZGVmIHVtUmF0ZVJlZiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQoKICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVSZWZLZXkKICAgICAgICAgICAgICAgIGRlZiB1bVJhdGVSZWZWYWx1ZQogICAgICAgICAgICAgICAgaWYodW1SYXRlUmVmLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgICAgIHVtUmF0ZVJlZiA9IHVtUmF0ZVJlZi50b1N0cmluZygpCiAgICAgICAgICAgICAgICAgICAgdW1SYXRlUmVmS2V5ID0gdW1SYXRlUmVmLnN1YnN0cmluZyh1bVJhdGVSZWYuaW5kZXhPZignKCcpKzEsdW1SYXRlUmVmLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgICAgICBkZWYgdW1SYXRlUmVmT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKE9QQUEgKyB1bVJhdGVSZWZLZXkpCiAgICAgICAgICAgICAgICAgICAgdW1SYXRlUmVmVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoucmF0ZS5OYW1lJ10udG9TdHJpbmcoKSkgPyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odW1SYXRlUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoucmF0ZS5OYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkgOiBudWxsCiAgICAgICAgICAgICAgICAgICAgdW1SYXRlUmVmVmFsdWUgPSB1bVJhdGVSZWZWYWx1ZSA/IHVtUmF0ZVJlZlZhbHVlLnN1YnN0cmluZyh1bVJhdGVSZWZWYWx1ZS5pbmRleE9mKCcoJykrMSx1bVJhdGVSZWZWYWx1ZS5pbmRleE9mKCcpJykpIDogbnVsbAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZih1bUFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJCT1RIIikgfHwgdW1BcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscygiQ1VTVE9NRVIiKSl7CiAgICAgICAgICAgICAgICAgICAgLy9nZXQgIlRPVEFMX0FNT1VOVF9DVVNUT01FUiIgZm9yIHRoYXQgY29tcG9uZW50CiAgICAgICAgICAgICAgICAgICAgZGVmIHRvdEN1c3RvbWVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHVtUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdG9tZXInXS50b1N0cmluZygpKSA/IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih1bVJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnRvdEN1c3RvbWVyJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpIDogbnVsbAogICAgICAgICAgICAgICAgICAgIGlmKCF0b3RDdXN0b21lciB8fCB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKCIwLjAiKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzPXRydWUKICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIuYWRkKHVtUmF0ZVJlZlZhbHVlLnRvU3RyaW5nKCkpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgfSAgICAKICAgICAgICB9CgogICAgICAgIC8vT1BBQV9MQUJPVVJfUkFURVMKICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxhYm91clJhdGVzKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpICE9ICIiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxhYm91clJhdGVzKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgICAgICBsb2cuZGVidWcgIkxhYm91ciByYXRlczogIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpCiAgICAgICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qLwogICAgICAgICAgICAvL2luc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHMKICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGUiKTsgIAogICAgICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CiAgICAgICAgICAgIGRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7CiAgICAgICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpOwoKICAgICAgICAgICAgZGVmIGxhYm91clJhdGVzTGlzdCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpCgogICAgICAgICAgICBmb3IobGIgaW4gbGFib3VyUmF0ZXNMaXN0KXsKICAgICAgICAgICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdAogICAgICAgICAgICAgICAgZGVmIGxiUmF0ZT1sYi50b1N0cmluZygpCiAgICAgICAgICAgICAgICBkZWYgbGJSYXRlS2V5ID0gbGJSYXRlLnN1YnN0cmluZyhsYlJhdGUuaW5kZXhPZignKCcpKzEsbGJSYXRlLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIGRlZiBsYlJhdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4obGJSYXRlS2V5KQogICAgICAgICAgICAgICAgLy9nZXQgIkFQUExJRURfVE8iIGZvciB0aGF0IHJhdGUKICAgICAgICAgICAgICAgIGRlZiBsYkFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgICAgICAgICBkZWYgbGJBcHBsaWVkVG9WYWx1ZSA9IGxiQXBwbGllZFRvLnN1YnN0cmluZyhsYkFwcGxpZWRUby5pbmRleE9mKCcoJykrMSxsYkFwcGxpZWRUby5pbmRleE9mKCcpJykpCgogICAgICAgICAgICAgICAgZGVmIGxiUmF0ZVJlZiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBkZWYgbGJSYXRlUmVmS2V5CiAgICAgICAgICAgICAgICBkZWYgbGJSYXRlUmVmVmFsdWUKICAgICAgICAgICAgICAgIGlmKGxiUmF0ZVJlZi5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgICAgICBsYlJhdGVSZWYgPSBsYlJhdGVSZWYudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgIGxiUmF0ZVJlZktleSA9IGxiUmF0ZVJlZi5zdWJzdHJpbmcobGJSYXRlUmVmLmluZGV4T2YoJygnKSsxLGxiUmF0ZVJlZi5pbmRleE9mKCcpJykpCiAgICAgICAgICAgICAgICAgICAgZGVmIGxiUmF0ZVJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihPUEFBICsgbGJSYXRlUmVmS2V5KQogICAgICAgICAgICAgICAgICAgIGxiUmF0ZVJlZlZhbHVlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZVJlZk9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnJhdGUuTmFtZSddLnRvU3RyaW5nKCkpID8gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZVJlZk9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnJhdGUuTmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpIDogbnVsbAogICAgICAgICAgICAgICAgICAgIGxiUmF0ZVJlZlZhbHVlID0gbGJSYXRlUmVmVmFsdWUgPyBsYlJhdGVSZWZWYWx1ZS5zdWJzdHJpbmcobGJSYXRlUmVmVmFsdWUuaW5kZXhPZignKCcpKzEsbGJSYXRlUmVmVmFsdWUuaW5kZXhPZignKScpKSA6IG51bGwKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZihsYkFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJCT1RIIikgfHwgbGJBcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscygiQ1VTVE9NRVIiKSl7CiAgICAgICAgICAgICAgICAgICAgLy9nZXQgIlRPVEFMX0FNT1VOVF9DVVNUT01FUiIgZm9yIHRoYXQgY29tcG9uZW50CiAgICAgICAgICAgICAgICAgICAgZGVmIHRvdEN1c3RvbWVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdG9tZXInXS50b1N0cmluZygpKSA/IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnRvdEN1c3RvbWVyJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpIDogbnVsbAogICAgICAgICAgICAgICAgICAgIGlmKCF0b3RDdXN0b21lciB8fCB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKCIwLjAiKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzPXRydWUKICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIuYWRkKGxiUmF0ZVJlZlZhbHVlLnRvU3RyaW5nKCkpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgfSAgICAKICAgICAgICB9CgogICAgICAgIC8vT1BBQV9UUkFWRUxfUkFURVMKICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYXZlbFJhdGVzKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsUmF0ZXMpICE9ICIiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYXZlbFJhdGVzKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgICAgICBsb2cuZGVidWcgIlRyYXZlbCByYXRlczogIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsUmF0ZXMpCiAgICAgICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qLwogICAgICAgICAgICAvL2luc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHMKICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGUiKTsgIAogICAgICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CiAgICAgICAgICAgIGRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7CiAgICAgICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpOwoKICAgICAgICAgICAgZGVmIHRyYXZlbFJhdGVzTGlzdCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsUmF0ZXMpCgogICAgICAgICAgICBmb3IodHIgaW4gdHJhdmVsUmF0ZXNMaXN0KXsKICAgICAgICAgICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdAogICAgICAgICAgICAgICAgZGVmIHRyUmF0ZT10ci50b1N0cmluZygpCiAgICAgICAgICAgICAgICBkZWYgdHJSYXRlS2V5ID0gdHJSYXRlLnN1YnN0cmluZyh0clJhdGUuaW5kZXhPZignKCcpKzEsdHJSYXRlLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIGRlZiB0clJhdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4odHJSYXRlS2V5KQogICAgICAgICAgICAgICAgLy9nZXQgIkFQUExJRURfVE8iIGZvciB0aGF0IHJhdGUKICAgICAgICAgICAgICAgIGRlZiB0ckFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpID8gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRyUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuYXBwbGllZFRvJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkgOiBudWxsCiAgICAgICAgICAgICAgICBkZWYgdHJBcHBsaWVkVG9WYWx1ZSA9IHRyQXBwbGllZFRvID8gdHJBcHBsaWVkVG8uc3Vic3RyaW5nKHRyQXBwbGllZFRvLmluZGV4T2YoJygnKSsxLHRyQXBwbGllZFRvLmluZGV4T2YoJyknKSkgOiBudWxsCgogICAgICAgICAgICAgICAgZGVmIHRyUmF0ZVJlZiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKSA/IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKSA6IG51bGwKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZGVmIHRyUmF0ZVJlZktleQogICAgICAgICAgICAgICAgZGVmIHRyUmF0ZVJlZlZhbHVlCiAgICAgICAgICAgICAgICBpZih0clJhdGVSZWYuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICAgICAgdHJSYXRlUmVmID0gdHJSYXRlUmVmLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgICAgICB0clJhdGVSZWZLZXkgPSB0clJhdGVSZWYuc3Vic3RyaW5nKHRyUmF0ZVJlZi5pbmRleE9mKCcoJykrMSx0clJhdGVSZWYuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgICAgIGRlZiB0clJhdGVSZWZPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oT1BBQSArIHRyUmF0ZVJlZktleSkKICAgICAgICAgICAgICAgICAgICB0clJhdGVSZWZWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5yYXRlLk5hbWUnXS50b1N0cmluZygpKSA/IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5yYXRlLk5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKSA6IG51bGwKICAgICAgICAgICAgICAgICAgICB0clJhdGVSZWZWYWx1ZSA9IHRyUmF0ZVJlZlZhbHVlID8gdHJSYXRlUmVmVmFsdWUuc3Vic3RyaW5nKHRyUmF0ZVJlZlZhbHVlLmluZGV4T2YoJygnKSsxLHRyUmF0ZVJlZlZhbHVlLmluZGV4T2YoJyknKSkgOiBudWxsCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYodHJBcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscygiQk9USCIpIHx8IHRyQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoIkNVU1RPTUVSIikpewogICAgICAgICAgICAgICAgICAgIC8vZ2V0ICJUT1RBTF9BTU9VTlRfQ1VTVE9NRVIiIGZvciB0aGF0IGNvbXBvbmVudAogICAgICAgICAgICAgICAgICAgIGRlZiB0b3RDdXN0b21lciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0clJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnRvdEN1c3RvbWVyJ10udG9TdHJpbmcoKSkgPyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odHJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC50b3RDdXN0b21lciddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKSA6IG51bGwKICAgICAgICAgICAgICAgICAgICBpZighdG90Q3VzdG9tZXIgfHwgdG90Q3VzdG9tZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscygiMC4wIikpewogICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyLmFkZCh0clJhdGVSZWZWYWx1ZS50b1N0cmluZygpKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgIH0gICAgCiAgICAgICAgfQoKICAgIH0KCgogICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKQoKICAgIGlmICghZXJyb3JzICYmICF3YXJuaW5ncyl7CiAgICAgICAgcmV0dXJuIHRydWUKICAgIH1lbHNlewogICAgICAgIGlmKCFlcnJvcnMgJiYgd2FybmluZ3MpewogICAgICAgICAgICAvL1NlIGNpIHNvbm8gc29sbyB3YXJuaW5ncyB2ZXJpZmljbyBzZSBsJ3V0ZW50ZSBoYSBnacOgIGRpY2hpYXJhdG8gZGkgdm9sZXIgcHJvc2VndWlyZSBjb211bnF1ZQogICAgICAgICAgICAvLyAtIHRyYW5zaXRpb24gZmllbGQgIk9QQUFfQ0hFQ0tfQU5EX0NPTkZJUk0iPSJZZXMiCiAgICAgICAgICAgIC8vIC0gaW4gY2FzbyBjb250cmFyaW8gaW52aW8gaSB3YXJuaW5nIGEgRkUKCiAgICAgICAgICAgIC8vbG9nLmRlYnVnICJ0cmFuc2l0aW9uQ2hlY2s6ICIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykKICAgICAgICAgICAgLy9sb2cuZGVidWcgInJlc3VsdDogIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKS50b1N0cmluZygpLmVxdWFscygiWWVzIikKICAgICAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKSl7CiAgICAgICAgICAgICAgICAvL2xvZy5kZWJ1ZyAicmV0dXJuIHRydWUgLSB0cmFuc2l0aW9uQ2hlY2sgPSBZZXMiCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZQogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKQoKICAgICAgICAgICAgICAgIGlmKHdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1FbXB0eVJhdGUgPSBuZXcgQXJyYXlMaXN0KCkKICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKCJXIikKICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKCJDVVNUT01FUl9DT05GSVJNX0VNUFRZX1JBVEVTIikKICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKG51bGwpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZCh3YXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lcikKCiAgICAgICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5UmF0ZSkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZih3YXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoIlciKQogICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKCJDVVNUT01FUl9DT05GSVJNX0VNUFRZX01BVF9RVU9URSIpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQobnVsbCkKICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZCh3YXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyKQoKICAgICAgICAgICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZSkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigneyJXIjoiJyArIG91dHB1dC50b1N0cmluZygpICsgJyJ9JykKICAgICAgICAgICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiVyIsIG91dHB1dC50b1N0cmluZygpKSAgIAogICAgICAgICAgICB9CgogICAgICAgIH0KICAgICAgICBpZihlcnJvcnMgJiYgIXdhcm5pbmdzKXsKICAgICAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCgogICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KQogICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IkUiOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQogICAgICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oIkUiLCBvdXRwdXQudG9TdHJpbmcoKSkgICAKICAgICAgICB9CiAgICAgICAgaWYoZXJyb3JzICYmIHdhcm5pbmdzKXsKICAgICAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKQoKICAgICAgICAgICAgaWYod2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICAgICAgZGVmIHdMaXN0Q29uZmlybUVtcHR5UmF0ZSA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoIlciKQogICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoIkNVU1RPTUVSX0NPTkZJUk1fRU1QVFlfUkFURVMiKQogICAgICAgICAgICAgICAgCXdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQobnVsbCkKICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKHdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyKQoKICAgICAgICAgICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHlSYXRlKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmKHdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXIuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICAgICAgZGVmIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUgPSBuZXcgQXJyYXlMaXN0KCkKICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZCgiVyIpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoIkNVU1RPTUVSX0NPTkZJUk1fRU1QVFlfTUFUX1FVT1RFIikKICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChudWxsKQogICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKHdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXIpCgogICAgICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgb3V0cHV0LmFkZChlTGlzdCkKICAgICAgICAgICAgb3V0cHV0LmFkZCh3TGlzdCkKICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigneyJXRSI6IicgKyBvdXRwdXQudG9TdHJpbmcoKSArICcifScpCiAgICAgICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiV0UiLCBvdXRwdXQudG9TdHJpbmcoKSkgIAogICAgICAgIH0KICAgIH0KLy99Y2F0Y2goRXhjZXB0aW9uIGUpewovLyAgICBsb2cuZGVidWcgIkV4Y2VwdGlvbjogIiArIGUKLy8gICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiRXhjZXB0aW9uIiwgZS50b1N0cmluZygpKSAgCi8vfQo=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">8a3daba2cbc0fa976eb28f598d455a84abf02ad8</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IFJFU1QgQVBJOiBPUCBnZW5lcmF6aW9uZSBDb25zdW50aXZv</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGlua1xuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG4vKiBSRVNUIEFQSSBwZXIgR2VuZXJhemlvbmUgQWxsZWdhdG8gQ29uc3VudGl2byAqL1xucmVxdWVzdE1ldGhvZCA9IFwiUFVUXCI7XG5cbmRlZiByZWxhdGVzSW5Jc3N1ZUxpbms9ZmFsc2VcbmRlZiByZWxhdGVzT3V0SXNzdWVMaW5rPWZhbHNlXG5kZWYgbGlua2VkVGlja2V0cz1uZXcgQXJyYXlMaXN0KClcbkxpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKVxuZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG5cbiAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSAmJiBpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkuc3RhdHVzLm5hbWUgPT0gXCJDb21wbGV0ZWQgdG8gYmUgQ2xvc2VkXCIpe1xuICAgICAgICByZWxhdGVzSW5Jc3N1ZUxpbms9dHJ1ZVxuICAgICAgICBsaW5rZWRUaWNrZXRzLmFkZChpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkudG9TdHJpbmcoKSlcbiAgICAgICAgbG9nLmRlYnVnIFwiSXNzdWUgY29uIHJlbGF0ZXNJbklzc3VlTGlua1wiXG4gICAgfVxufVxuTGlzdDxJc3N1ZUxpbms+IGFsbE91dElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbmZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbE91dElzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcblxuICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpICYmIGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpLnN0YXR1cy5uYW1lID09IFwiQ29tcGxldGVkIHRvIGJlIENsb3NlZFwiKXtcbiAgICAgICAgcmVsYXRlc091dElzc3VlTGluaz10cnVlXG4gICAgICAgIGxpbmtlZFRpY2tldHMuYWRkKGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpLnRvU3RyaW5nKCkpXG4gICAgICAgIGxvZy5kZWJ1ZyBcIklzc3VlIGNvbiByZWxhdGVzT3V0SXNzdWVMaW5rXCJcbiAgICB9XG59XG5cbmJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL0FBL3RpY2tldC9cIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIvYXR0YWNobWVudC9iYWxhbmNlXCJcblxuaWYocmVsYXRlc0luSXNzdWVMaW5rIHx8IHJlbGF0ZXNPdXRJc3N1ZUxpbmspe1xuICAgIGJhc2VVUkwgPSBiYXNlVVJMICsgXCI/bGlua2VkVGlja2V0cz1cIiArIGxpbmtlZFRpY2tldHMudG9TdHJpbmcoKS5yZXBsYWNlQWxsKFwiXFxcXFtcIixcIlwiKS5yZXBsYWNlQWxsKFwiXFxcXF1cIixcIlwiKS5yZXBsYWNlQWxsKFwiIFwiLFwiXCIpXG59XG5cbmxvZy5kZWJ1ZyBcImJhc2VVcmw6IFwiICsgYmFzZVVSTFxuXG5VUkwgdXJsXG51cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG5IdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG5jb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuY29ubmVjdGlvbi5jb25uZWN0KCk7XG5cbmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5sb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG5sb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG5sb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG5cbmlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgIGVMaXN0RXJyb3JzLmFkZChcIkdFTkVSQVRFLUFDQ09VTlRJTkdSRVBPUlRcIilcbiAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkpXG4gICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcbiAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIkVcIiwgb3V0cHV0LnRvU3RyaW5nKCkpXG59XG4iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CkNhdGVnb3J5IGxvZyA9IENhdGVnb3J5LmdldEluc3RhbmNlKCJjb20ub25yZXNvbHZlLmppcmEuZ3Jvb3Z5LlBvc3RGdW5jdGlvbiIpCmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKQoKSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpOwpDdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7CmRlZiByZXF1ZXN0TWV0aG9kCmRlZiBiYXNlVVJMCgovKiBSRVNUIEFQSSBwZXIgR2VuZXJhemlvbmUgQWxsZWdhdG8gQ29uc3VudGl2byAqLwpyZXF1ZXN0TWV0aG9kID0gIlBVVCI7CgpkZWYgcmVsYXRlc0luSXNzdWVMaW5rPWZhbHNlCmRlZiByZWxhdGVzT3V0SXNzdWVMaW5rPWZhbHNlCmRlZiBsaW5rZWRUaWNrZXRzPW5ldyBBcnJheUxpc3QoKQpMaXN0PElzc3VlTGluaz4gYWxsSW5Jc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0SW53YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSkKZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykgewogICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTsKCiAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7CiAgICAgICAgcmVsYXRlc0luSXNzdWVMaW5rPXRydWUKICAgICAgICBsaW5rZWRUaWNrZXRzLmFkZChpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkudG9TdHJpbmcoKSkKICAgICAgICBsb2cuZGVidWcgIklzc3VlIGNvbiByZWxhdGVzSW5Jc3N1ZUxpbmsiCiAgICB9Cn0KTGlzdDxJc3N1ZUxpbms+IGFsbE91dElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSkKZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsT3V0SXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHsKICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7CgogICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpewogICAgICAgIHJlbGF0ZXNPdXRJc3N1ZUxpbms9dHJ1ZQogICAgICAgIGxpbmtlZFRpY2tldHMuYWRkKGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpLnRvU3RyaW5nKCkpCiAgICAgICAgbG9nLmRlYnVnICJJc3N1ZSBjb24gcmVsYXRlc091dElzc3VlTGluayIKICAgIH0KfQoKYmFzZVVSTCA9ICJodHRwOi8vIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgIi9vcC9yZXN0L2F1dG9tYXRpb24vQUEvdGlja2V0LyIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArICIvYXR0YWNobWVudC9iYWxhbmNlIgoKaWYocmVsYXRlc0luSXNzdWVMaW5rIHx8IHJlbGF0ZXNPdXRJc3N1ZUxpbmspewogICAgYmFzZVVSTCA9IGJhc2VVUkwgKyAiP2xpbmtlZFRpY2tldHM9IiArIGxpbmtlZFRpY2tldHMudG9TdHJpbmcoKS5yZXBsYWNlQWxsKCJcXFsiLCIiKS5yZXBsYWNlQWxsKCJcXF0iLCIiKS5yZXBsYWNlQWxsKCIgIiwiIikKfQoKbG9nLmRlYnVnICJiYXNlVXJsOiAiICsgYmFzZVVSTAoKVVJMIHVybAp1cmwgPSBuZXcgVVJMKGJhc2VVUkwpCkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7CmNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi9qc29uIik7CmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KCJBY2NlcHQiLCAiKi8qIik7CmNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7CmNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTsKY29ubmVjdGlvbi5jb25uZWN0KCk7CgpkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpCmRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKQpkZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKQoKaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKCIyMDAiKSl7CiAgICBsb2cuZGVidWcgInVybDogIiArIHVybAogICAgbG9nLmRlYnVnICJSZXNwb25zZUNvZGU6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkKICAgIGxvZy5kZWJ1ZyAiUmVzcG9uc2VNZXNzYWdlOiIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpCiAgICBlTGlzdEVycm9ycy5hZGQoIkUiKQogICAgZUxpc3RFcnJvcnMuYWRkKCJHRU5FUkFURS1BQ0NPVU5USU5HUkVQT1JUIikKICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArICIgIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkpCiAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKQogICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKQoKICAgIG91dHB1dC5hZGQoZUxpc3QpCiAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IkUiOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQogICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJFIiwgb3V0cHV0LnRvU3RyaW5nKCkpCn0K</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">c3e26a81-b0c5-4e49-a913-de7bbca4705b</arg>
              <arg name="FIELD_NOTES">YCFgUkVTVCBBUEk6IEdlbmVyYXppb25lIENvbnN1bnRpdm8gQ2xpZW50ZSBkYSB0ZW1wbGF0ZQ==</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGlua1xuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbi8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMzI1NTFcIilcblxuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuZGVmIHJlcXVlc3RNZXRob2RcbmRlZiBiYXNlVVJMXG5cbmRlZiB0a3RWaXNpYmlsaXR5ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEtUX1ZJU0lCSUxJVFlfS0VZXCIpXG5kZWYgdGVtcGxhdGVJZFxuaW50IERCTyA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuZGJvLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuXG5kZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuXG4vKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG4vKiBHZXQgSW5zaWdodCBPYmplY3QgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7XG5kZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBUeXBlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xuQ2xhc3Mgb2JqZWN0VHlwZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVGYWNhZGVcIik7XG5kZWYgb2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpO1xuLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbkNsYXNzIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5zZXJ2aWNlcy5tb2RlbC5mYWN0b3J5Lk9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5XCIpO1xuZGVmIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MpO1xuXG5kZWYgdGt0S2V5ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0a3RWaXNpYmlsaXR5KVswXVxuZGVmIHRrdE9iaktleSA9IHRrdEtleS50b1N0cmluZygpLnN1YnN0cmluZyh0a3RLZXkudG9TdHJpbmcoKS5sYXN0SW5kZXhPZignKCcpKzEsdGt0S2V5LnRvU3RyaW5nKCkubGFzdEluZGV4T2YoJyknKSlcblxuZGVmIGNvbXBhbnkgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGt0S2V5LmdldElkKCksIFwiQ09NUEFOWV9SRUZcIikuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpO1xubG9nLmRlYnVnIFwiY29tcGFueTogXCIgKyBjb21wYW55WzBdLmdldFZhbHVlKClcblxuZGVmIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBhbnlbMF0uZ2V0VmFsdWUoKSwgcHJvcGVydGllc1snaW9iai5jb250YWN0LmRiby5uYW1lJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpICBcbmRlZiBjb21wYW55TmFtZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxubG9nLmRlYnVnIFwiY29tcGFueU5hbWU6IFwiICsgY29tcGFueU5hbWVbMF0udmFsdWVcblxub2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcGFueVswXS5nZXRWYWx1ZSgpLCBcIkRFRkFVTFRfTEFOR1VBR0VcIikuY3JlYXRlTXV0YWJsZSgpICBcbmRlZiBkZWZMYW5ndWFnZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxubG9nLmRlYnVnIFwiZGVmTGFuZ3VhZ2U6IFwiICsgZGVmTGFuZ3VhZ2VbMF0udmFsdWVcblxuXG5kZWYgb2JqZWN0cyA9IGlxbEZhY2FkZS5maW5kT2JqZWN0c0J5SVFMQW5kU2NoZW1hKERCTywgXCJcXFwiXCIgKyAocHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuYXR0YWNobWVudENhdGVnb3J5J10gPyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5hdHRhY2htZW50Q2F0ZWdvcnknXS50b1N0cmluZygpIDogXCJBVFRBQ0hNRU5UX0NBVEVHT1JZXCIpICsgXCJcXFwiLlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm5hbWUnXS50b1N0cmluZygpICsgXCJcXFwiID0gXFxcIlwiICsgXCJDb25zdW50aXZvIENsaWVudGVcIiArIFwiXFxcIiBBTkQgXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSArIFwiIT10cnVlIEFORCBDT01QQU5ZIElTIE5PVCBFTVBUWSBBTkQgQ09NUEFOWS5OYW1lID0gXFxcIlwiICsgY29tcGFueU5hbWVbMF0udmFsdWUgKyBcIlxcXCIgQU5EIElTU1VFX1RZUEU9XFxcIlwiICsgaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZSArIFwiXFxcIiBBTkQgTEFOR1VBR0UgPSBcXFwiXCIgKyBkZWZMYW5ndWFnZVswXS52YWx1ZSArIFwiXFxcIlwiKTsgLy8gU2VlIHRoZSBjb21wbGV0ZSBsaXN0IG9mIHBvc3NpYmxlIElRTCBvbiB0aGUgSW5zaWdodCBRdWVyeSBMYW5ndWFnZSBkb2N1bWVudGF0aW9uIHBhZ2VcbmxvZy5pbmZvKFwiSW5zaWdodCBvYmplY3Q6IFwiICsgb2JqZWN0c1swXSk7XG5sb2cuZGVidWcgXCJcXFwiXCIgKyAocHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuYXR0YWNobWVudENhdGVnb3J5J10gPyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5hdHRhY2htZW50Q2F0ZWdvcnknXS50b1N0cmluZygpIDogXCJBVFRBQ0hNRU5UX0NBVEVHT1JZXCIpICsgXCJcXFwiLlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm5hbWUnXS50b1N0cmluZygpICsgXCJcXFwiID0gXFxcIlwiICsgXCJDb25zdW50aXZvIENsaWVudGVcIiArIFwiXFxcIiBBTkQgXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSArIFwiIT10cnVlIEFORCBDT01QQU5ZIElTIE5PVCBFTVBUWSBBTkQgQ09NUEFOWS5OYW1lID0gXFxcIlwiICsgY29tcGFueU5hbWVbMF0udmFsdWUgKyBcIlxcXCIgQU5EIElTU1VFX1RZUEU9XFxcIlwiICsgaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZSArIFwiXFxcIiBBTkQgTEFOR1VBR0UgPSBcXFwiXCIgKyBkZWZMYW5ndWFnZVswXS52YWx1ZSArIFwiXFxcIlwiXG5cbmlmKCFvYmplY3RzWzBdKXtcbiAgICAvKk5lc3N1biBmaWxlIGluZGl2aWR1YXRvIHJlc3RpdHVpc2NvIGVycm9yZSAqL1xuICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICBlTGlzdEVycm9ycy5hZGQoXCJNSVNTSU5HLUFDQ09VTlRJTkdSRVBPUlQtVEVNUExBVEVcIilcbiAgICBlTGlzdEVycm9ycy5hZGQobnVsbClcbiAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxufVxuXG5pZihvYmplY3RzWzBdKXtcbiAgICBsb2cuZGVidWcgXCJ0ZW1wbGF0ZSBkYSB1c2FyZTogXCIgKyBvYmplY3RzWzBdLmdldElkKClcbiAgICB0ZW1wbGF0ZUlkPW9iamVjdHNbMF0uZ2V0SWQoKVxufVxuXG5cbi8qIFJFU1QgQVBJIHBlciBHZW5lcmF6aW9uZSBSYXBwb3J0byBkaSBpbnRlcnZlbnRvICovXG5yZXF1ZXN0TWV0aG9kID0gXCJQVVRcIjtcblxuLypQYXJhbWV0ZXJzOiB0eXBlIGlzIG9wdGlvbmFsIC0gaXQgY2FuIGJlIHNldCB0byBXb3JkIG9yIFBERiovXG5iYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvYXV0b21hdGlvbi9BQS90aWNrZXQvXCIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArIFwiL2F0dGFjaG1lbnQvYmFsYW5jZT90ZW1wbGF0ZUlkPVwiICsgdGVtcGxhdGVJZCArIFwiJnR5cGU9UERGXCJcbmxvZy5kZWJ1ZyBcImJhc2VVcmw6IFwiICsgYmFzZVVSTFxuXG5VUkwgdXJsXG51cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG5IdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG5jb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuY29ubmVjdGlvbi5jb25uZWN0KCk7XG5sb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG5sb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG5cbmlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgIGVMaXN0RXJyb3JzLmFkZChcIkdFTkVSQVRFLUFDQ09VTlRJTkdSRVBPUlRcIilcbiAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkpXG4gICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcbiAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxufSIsInNjcmlwdFBhdGgiOm51bGx9</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="disabled">false</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="6">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="1021" name="Riapri Rapporto di Intervento">
          <meta name="opsbar-sequence">10</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <restrict-to>
            <conditions type="AND">
              <condition type="class">
                <arg name="FIELD_NOTES">YCFgT1BBQV9TQUxFU19PUkRFUl9EQVRFIGFuZCBPUEFBX1BVUkNIQVNFX09SREVSX0RBVEUgc2hvdWxkIGJlIG51bGwgaW4gb3JkZXIgdG8gcmVvcGVuIHRoZSB0aWNrZXQgLSBvdGhlcndpc2UgdGhlIHRpY2tldCBoYXMgYWxyZWFkeSBiZWVuIGFjY291bnRlZCBzbyBpdCBjYW5ub3QgYmUgcmVvcGVuZWQ=</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgY2ZWYWx1ZXNbJ09QX1NBTEVTX09SREVSX0RBVEUnXSA9PSBudWxsICYmIGNmVmFsdWVzWydPUF9QVVJDSEFTRV9PUkRFUl9EQVRFJ10gPT0gbnVsbHx8fA==</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
              </condition>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">e855fbdb-cb53-4bf8-922b-167760b6e692</arg>
                <arg name="FIELD_NOTES">YCFgTWFpbnRlbmFuY2UgVGlja2V0</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnTWFpbnRlbmFuY2UgVGlja2V0JyB8fCBpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXQnIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
              </condition>
              <condition type="class">
                <arg name="conditionList">3</arg>
                <arg name="comparisonType">1</arg>
                <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                <arg name="class.name">com.googlecode.jsu.workflow.condition.ValueFieldCondition</arg>
                <arg name="fieldValue">Yes</arg>
                <arg name="fieldsList">customfield_23409</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="18">
              <post-functions>
                <function type="class">
                  <arg name="field">customfield_22693</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.15.1</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                </function>
                <function type="class">
                  <arg name="field">customfield_22660</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.15.1</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                </function>
                <function type="class">
                  <arg name="field">customfield_22644</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.15.1</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                </function>
                <function type="class">
                  <arg name="field">customfield_22641</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.15.1</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue">50</arg>
                  <arg name="runAsUser-user"></arg>
                  <arg name="field">customfield_22666</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="field3">customfield_23402</arg>
                  <arg name="field2">customfield_23401</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">93ee91428be862f784d2facaa9da5be13f63a66b</arg>
                  <arg name="FIELD_NOTES">YCFgT1A6IFJlbW92ZSBPblNpdGUgUmVwb3J0IEF0dGFjaG1lbnRz</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbkNhdGVnb3J5IGxvZyA9IENhdGVnb3J5LmdldEluc3RhbmNlKFwiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb25cIilcbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5cbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5kZWYgYXV0b21hdGljYWxseUNsb3NlZCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUNsb3NlZCddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG4vKlNjcmlwdCBWYXJpYWJsZXMqL1xuLy9QZXIgUG9zdCBGdW5jdGlvblxuSXNzdWUgaXNzdWUgPSBpc3N1ZVxuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0xNDA2MlwiKVxuXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5cbi8qUmltb3ppb25lIGFsbGVnYXRvIHJhcHBvcnRvIGRpIGludGVydmVudG8gYXBwZW5hIGNyZWF0byovXG4vKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG5cbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTtcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcblxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcblxuQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG5kZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG5cbi8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSBcIiBhcm91bmQgdmFsdWUgKi9cbmRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIm9iamVjdFR5cGU9QXR0YWNobWVudCBBTkQgXFxcIlwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuY2F0ZWdvcnlSZWYnXS50b1N0cmluZygpICsgXCJcXFwiLlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm5hbWUnXS50b1N0cmluZygpICsgXCJcXFwiIElOIChcXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5vYmpzLnJhcHBJbnRGQUFDJ10udG9TdHJpbmcoKSArIFwiXFxcIixcXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5vYmpzLmNvbnN1bnRpdm8nXS50b1N0cmluZygpICsgXCJcXFwiKSBBTkQgQVVUT19HRU5FUkFURUQgPSB0cnVlIEFORCBcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpICsgXCIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSBcIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIpXCIpOyAvLyBTZWUgdGhlIGNvbXBsZXRlIGxpc3Qgb2YgcG9zc2libGUgSVFMIG9uIHRoZSBJbnNpZ2h0IFF1ZXJ5IExhbmd1YWdlIGRvY3VtZW50YXRpb24gcGFnZVxuLyogSWYgdGhpcyBpcyBhIG1hbmRhdG9yeSBmaWVsZCB5b3Ugc2hvdWxkIGJlIGFibGUgdG8gZG8gdGhpczogKi9cbmxvZy5kZWJ1ZyBcIklRTDogXCIgKyBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5cXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5uYW1lJ10udG9TdHJpbmcoKSArIFwiXFxcIiBJTiAoXFxcIlwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkub2Jqcy5yYXBwSW50RkFBQyddLnRvU3RyaW5nKCkgKyBcIlxcXCIsXFxcIlwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkub2Jqcy5jb25zdW50aXZvJ10udG9TdHJpbmcoKSArIFwiXFxcIikgQU5EIFwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyBcIiE9dHJ1ZSBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleSA9IFwiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIilcIlxuXG5mb3IoaW9iaiBpbiBvYmplY3RzKXtcbiAgICAvKiBVUERBVEUgT0pCRUNUIERFTEVURUQgVkFMVUUgKi9cbiAgICBkZWYgb2JqID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGlvYmouZ2V0SWQoKSk7XG4gICAgICAgIFxuICAgIGludCBhdHRhY2htZW50RGVsZXRlZCA9IHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudC5kZWxldGVkLmlkJ10gPyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnQuZGVsZXRlZC5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKCkgOiAzMjY1XG4gICAgXG4gICAgYXR0cmliVHlwZSA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKGF0dGFjaG1lbnREZWxldGVkKTsgXG5cbiAgICBuZXdBdHRyaWIgPSBvYmouY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihhdHRyaWJUeXBlKTtcbiAgICBkZWYgbmV3QXR0cmliVmFsdWUgPSBuZXdBdHRyaWIuY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7XG5cbiAgICB0cnkge1xuICAgIFx0bmV3QXR0cmliVmFsdWUuc2V0VmFsdWUoYXR0cmliVHlwZSwgdHJ1ZSk7XG4gICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSkge1xuICAgICBcdGxvZy53YXJuKFwiU0VUSU5TSUdIVFZBTFVFOiBVbmFibGUgdG8gc2V0IGF0dHJpYnV0ZSBcIiArIGF0dHJpYlR5cGUgKyBcIiB0byBcIiArIHRvdGFsQW1vdW50U3VwcCArIFwiLiBFeGl0aW5nLlwiKTtcbiAgICAgXHRsb2cud2FybihTRVRJTlNJR0hUVkFMVUU6IHZpZS5nZXRNZXNzYWdlKCkpO1xuICAgICBcdHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgZGVmIGF0dHJpYlZhbHVlcyA9IG5ld0F0dHJpYi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7XG4gICAgYXR0cmliVmFsdWVzLmFkZChuZXdBdHRyaWJWYWx1ZSk7XG4gICAgbmV3QXR0cmliLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoYXR0cmliVmFsdWVzKTtcbiAgICAgXG4gICAgdHJ5IHtcbiAgICBcdG5ld0F0dHJpYiA9IG9iamVjdEZhY2FkZS5zdG9yZU9iamVjdEF0dHJpYnV0ZUJlYW4obmV3QXR0cmliKTtcbiAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XG4gICAgXHRsb2cud2FybihcIlNFVElOU0lHSFRWQUxVRTogVW5hYmxlIHRvIHNhdmUgY2hhbmdlcy4gRXhpdGluZy5cIik7XG4gICAgIFx0bG9nLndhcm4oU0VUSU5TSUdIVFZBTFVFOiB2aWUuZ2V0TWVzc2FnZSgpKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGxvZy5pbmZvKFwiU0VUSU5TSUdIVFZBTFVFOiBTdWNjZXNzZnVsbHkgc2F2ZWQgdmFsdWVcIik7XG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlCmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2UKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXIKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsCgpQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpCkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpCnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7Cglwcm9wZXJ0aWVzLmxvYWQoaXQpCn0KQ2F0ZWdvcnkgbG9nID0gQ2F0ZWdvcnkuZ2V0SW5zdGFuY2UoImNvbS5vbnJlc29sdmUuamlyYS5ncm9vdnkuUG9zdEZ1bmN0aW9uIikKbG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpCgpJc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7CkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTsKCklzc3VlSW5kZXhpbmdTZXJ2aWNlIAlpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSkKZGVmIGF1dG9tYXRpY2FsbHlDbG9zZWQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlDbG9zZWQnXS50b1N0cmluZygpKVswXQoKZGVmIHJlcXVlc3RNZXRob2QKZGVmIGJhc2VVUkwKCi8qU2NyaXB0IFZhcmlhYmxlcyovCi8vUGVyIFBvc3QgRnVuY3Rpb24KSXNzdWUgaXNzdWUgPSBpc3N1ZQovL1BlciB0ZXN0IGRhIGNvbnNvbGUKLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZSgiT1BVVC0xNDA2MiIpCgppbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpCmludCBEQk8gPSBwcm9wZXJ0aWVzWydpc2NoZW1hLmRiby5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKCkKCi8qUmltb3ppb25lIGFsbGVnYXRvIHJhcHBvcnRvIGRpIGludGVydmVudG8gYXBwZW5hIGNyZWF0byovCi8qIEdldCBJbnNpZ2h0IElRTCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi8KQ2xhc3MgaXFsRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGUiKTsgCmRlZiBpcWxGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUoaXFsRmFjYWRlQ2xhc3MpOwoKLyogR2V0IEluc2lnaHQgT2JqZWN0IEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqLwpDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZSIpOwpkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTsKCi8qIEdldCBJbnNpZ2h0IE9iamVjdCBUeXBlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqLwpDbGFzcyBvYmplY3RUeXBlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlIik7CmRlZiBvYmplY3RUeXBlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVGYWNhZGVDbGFzcyk7CgovKiBHZXQgSW5zaWdodCBPYmplY3QgQXR0cmlidXRlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqLwpDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CmRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7CgpDbGFzcyBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5zZXJ2aWNlcy5tb2RlbC5mYWN0b3J5Lk9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Iik7CmRlZiBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzKTsKCi8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSAiIGFyb3VuZCB2YWx1ZSAqLwpkZWYgb2JqZWN0cyA9IGlxbEZhY2FkZS5maW5kT2JqZWN0c0J5SVFMQW5kU2NoZW1hKERCTywgIlwiIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArICJcIi5cIiIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5uYW1lJ10udG9TdHJpbmcoKSArICJcIiBJTiAoXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkub2Jqcy5yYXBwSW50RkFBQyddLnRvU3RyaW5nKCkgKyAiXCIsXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkub2Jqcy5jb25zdW50aXZvJ10udG9TdHJpbmcoKSArICJcIikgQU5EICIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSArICIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSAiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyAiKSIpOyAvLyBTZWUgdGhlIGNvbXBsZXRlIGxpc3Qgb2YgcG9zc2libGUgSVFMIG9uIHRoZSBJbnNpZ2h0IFF1ZXJ5IExhbmd1YWdlIGRvY3VtZW50YXRpb24gcGFnZQovKiBJZiB0aGlzIGlzIGEgbWFuZGF0b3J5IGZpZWxkIHlvdSBzaG91bGQgYmUgYWJsZSB0byBkbyB0aGlzOiAqLwpsb2cuZGVidWcgIklRTDogIiArICJcIiIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5jYXRlZ29yeVJlZiddLnRvU3RyaW5nKCkgKyAiXCIuXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkubmFtZSddLnRvU3RyaW5nKCkgKyAiXCIgSU4gKFwiIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm9ianMucmFwcEludEZBQUMnXS50b1N0cmluZygpICsgIlwiLFwiIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm9ianMuY29uc3VudGl2byddLnRvU3RyaW5nKCkgKyAiXCIpIEFORCAiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyAiIT10cnVlIEFORCBvYmplY3QgSEFWSU5HIGNvbm5lY3RlZFRpY2tldHMoa2V5ID0gIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgIikiCgpmb3IoaW9iaiBpbiBvYmplY3RzKXsKICAgIC8qIFVQREFURSBPSkJFQ1QgREVMRVRFRCBWQUxVRSAqLwogICAgZGVmIG9iaiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihpb2JqLmdldElkKCkpOwogICAgICAgIAogICAgaW50IGF0dGFjaG1lbnREZWxldGVkID0gcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50LmRlbGV0ZWQuaWQnXSA/IHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudC5kZWxldGVkLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKSA6IDMyNjUKICAgIAogICAgYXR0cmliVHlwZSA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKGF0dGFjaG1lbnREZWxldGVkKTsgCgogICAgbmV3QXR0cmliID0gb2JqLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW4oYXR0cmliVHlwZSk7CiAgICBkZWYgbmV3QXR0cmliVmFsdWUgPSBuZXdBdHRyaWIuY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7CgogICAgdHJ5IHsKICAgIAluZXdBdHRyaWJWYWx1ZS5zZXRWYWx1ZShhdHRyaWJUeXBlLCB0cnVlKTsKICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHsKICAgICAJbG9nLndhcm4oIlNFVElOU0lHSFRWQUxVRTogVW5hYmxlIHRvIHNldCBhdHRyaWJ1dGUgIiArIGF0dHJpYlR5cGUgKyAiIHRvICIgKyB0b3RhbEFtb3VudFN1cHAgKyAiLiBFeGl0aW5nLiIpOwogICAgIAlsb2cud2FybihTRVRJTlNJR0hUVkFMVUU6IHZpZS5nZXRNZXNzYWdlKCkpOwogICAgIAlyZXR1cm4gZmFsc2U7CiAgICB9CiAgICAKICAgIGRlZiBhdHRyaWJWYWx1ZXMgPSBuZXdBdHRyaWIuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpOwogICAgYXR0cmliVmFsdWVzLmFkZChuZXdBdHRyaWJWYWx1ZSk7CiAgICBuZXdBdHRyaWIuc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyhhdHRyaWJWYWx1ZXMpOwogICAgIAogICAgdHJ5IHsKICAgIAluZXdBdHRyaWIgPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG5ld0F0dHJpYik7CiAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7CiAgICAJbG9nLndhcm4oIlNFVElOU0lHSFRWQUxVRTogVW5hYmxlIHRvIHNhdmUgY2hhbmdlcy4gRXhpdGluZy4iKTsKICAgICAJbG9nLndhcm4oU0VUSU5TSUdIVFZBTFVFOiB2aWUuZ2V0TWVzc2FnZSgpKTsKICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGxvZy5pbmZvKCJTRVRJTlNJR0hUVkFMVUU6IFN1Y2Nlc3NmdWxseSBzYXZlZCB2YWx1ZSIpOwp9</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE"></arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">9750ea32-a13d-4474-8c20-074bb1967d78</arg>
                  <arg name="FIELD_NOTES">YCFgQ2xlYXIgY2FjaGU=</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG4vKiBSRVNUIEFQSSBwZXIgR2VuZXJhemlvbmUgQWxsZWdhdG8gUmFwcG9ydG8gZGkgSW50ZXJ2ZW50byAqL1xucmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuLypTY3JpcHQgVmFyaWFibGVzKi9cbi8vUGVyIHRlc3QgZGEgY29uc29sZVxuLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIk9QVVQtMTQwNjJcIilcbmJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL2NsZWFyQ2FjaGUvZGF0YU9iamVjdFwiXG5kZWYgYm9keV9yZXEgPSBbXVxuVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbmNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5sb2cuZGVidWcgXCJib2R5X3JlcTogXCIgKyBib2R5X3JlcVxuY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxubG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5jb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbn0iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="disabled">false</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="7" name="Closed">
      <meta name="jira.status.id">6</meta>
      <actions>
        <action id="231" name="Genera Offerta per Materiali da Preventivare" view="fieldscreen">
          <meta name="opsbar-sequence">10</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">20119</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_NOTES">YCFgT1A6IEdlbmVyYXppb25lIHRpY2tldCBkaSBwcmV2ZW50aXZhemlvbmUgLSBzb2xvIHNlIGNpIHNvbm8gT1BfUkVRVUlSRURfTUFURVJJQUxTIGUgc2UgT1BBQV9RVU9URV9USUNLRVQgPSBudWxs</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXIKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsCgpQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpCkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpCnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7Cglwcm9wZXJ0aWVzLmxvYWQoaXQpCn0KY2ZWYWx1ZXNbcHJvcGVydGllc1snY2YucmVxdWlyZWRNYXRlcmlhbHMnXV0gIT0gbnVsbCAmJiBjZlZhbHVlc1twcm9wZXJ0aWVzWydjZi5vZmZlckxpbmtlZElzc3VlJ11dID09IG51bGx8fHw=</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="7">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="field.existingAttachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="targetIssueTypeDefinedByCfSelection"></arg>
                  <arg name="issueTypeId">13001</arg>
                  <arg name="scopeType">ISSUE_LINKING</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="field.attachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="targetIssueType">SELECTED_ISSUE_TYPE</arg>
                  <arg name="scopeSource-jql"></arg>
                  <arg name="createIssueAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.copyTransitionComment">false</arg>
                  <arg name="targetProjectType">SAME</arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="transitionAttachmentsOperation">copy</arg>
                  <arg name="field.issueAssignTo">ASSIGN_TO_ASSIGNEE</arg>
                  <arg name="targetProjectSelectedCustomField"></arg>
                  <arg name="destination-scopeTarget">LINK_END</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiescreatelinkedissue-function</arg>
                  <arg name="scopeDestination-linkEnd">10003:INWARD</arg>
                  <arg name="field.enablingCustomFieldId">customfield_22609</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="subFunctions">[{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22609&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22609&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22600&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22600&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22822&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22822&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22601&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22601&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22602&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22602&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22813&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22813&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23235&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23235&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22651&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22651&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22700&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22700&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22607&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22607&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;priority&quot;,&quot;destinationFieldId&quot;:&quot;priority&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22814&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22814&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23203&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23203&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23237&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23237&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_21909&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21909&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22649&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22629&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Yes&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22681&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23401&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21908&quot;}}]</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.createlinkedissue.CreateLinkedIssueFunction</arg>
                  <arg name="projectId">11228</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">4fd7d272cffa1401b740b9188cdaeaaf5185c323</arg>
                  <arg name="FIELD_NOTES">YCFgRlNNOiBVcGRhdGUgc3RhdHVzIG9uIGp1c3QgY3JlYXRlZCBSZXBhaXIgUXVvdGF0aW9uIGlzc3Vl</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnlcbmltcG9ydCBncm9vdnkuanNvbi5Kc29uQnVpbGRlclxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29uZmlnLnV0aWwuSmlyYUhvbWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvblxuaW1wb3J0IGphdmEudGV4dC5TaW1wbGVEYXRlRm9ybWF0XG5pbXBvcnQgamF2YS50ZXh0LlBhcnNlRXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbmZpZy5wcm9wZXJ0aWVzLkFQS2V5c1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLkxpbmtDb2xsZWN0aW9uSW1wbDtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbms7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxubG9nLmRlYnVnIFwiUGVyY29yc28gcHJvcGVydGllczogXCIgKyBTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5cbi8qU2NyaXB0IFZhcmlhYmxlcyovXG4vL1BlciBQb3N0IEZ1bmN0aW9uXG5pc3N1ZSA9IGlzc3VlXG4vL1BlciB0ZXN0IGRhIGNvbnNvbGVcbi8vSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpXG4vL2lzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0yNTdcIilcbmxvZy5kZWJ1ZyBcIklzc3VlOiBcIiArIGlzc3VlXG5kZWYgZm91bmQ9ZmFsc2VcbmRlZiBsaW5rZWRJc3N1ZVxuZGVmIGlzc3VlU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlU2VydmljZSgpXG5cbmRlZiB0cmFuc2l0aW9uQ2hlY2sgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmNoZWNrQW5kQ29uZmlybSddLnRvU3RyaW5nKCkpWzBdXG5kZWYgb2ZmZXJGcm9tUmVwYWlyID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1RLVF9HRU5FUkFURURfRlJPTV9SRVBBSVJcIilbMF1cblxuZGVmIGdyb3VwTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEdyb3VwTWFuYWdlcigpXG5kZWYgdXNlck1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRVc2VyTWFuYWdlcigpXG5kZWYgY3VycmVudFVzZXJUcmFuc2l0aW9uID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0NVUlJFTlRfVVNFUl9HRU5FUkFURV9SRVBBSVJfUVVPVEVcIilbMF1cblN0cmluZyBzdXBwbGllckFkbSA9IFwiT1BST0xFX0FBX1NVUFBMSUVSX0FETVwiXG5TdHJpbmcgc3VwcGxpZXJUZWNoID0gXCJPUFJPTEVfQUFfU1VQUExJRVJfVEVDSFwiXG5cbkxpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKTtcbmxvZy5kZWJ1ZyBcImFsbEluSXNzdWVMaW5rOiBcIiArIGFsbEluSXNzdWVMaW5rXG5mb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxJbklzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcbiAgICBkZWYgbGlua2VkSXNzdWVUZW1wID0gaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpXG4gICAgU3RyaW5nIHR5cGUgPSBsaW5rZWRJc3N1ZVRlbXAuZ2V0SXNzdWVUeXBlKCkuZ2V0TmFtZSgpO1xuXG4gICAgbG9nLmRlYnVnKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKSkgXG4gICAgXG4gICAgaWYoaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpIT1udWxsICYmIGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgbGlua2VkSXNzdWU9bGlua2VkSXNzdWVUZW1wXG4gICAgICAgIGxvZy5kZWJ1ZyBcImxpbmtlZCBpc3N1ZTogXCIgKyBsaW5rZWRJc3N1ZVxuICAgICAgICAvL2xvZy5kZWJ1ZyBcImxpbmtlZCBpc3N1ZSBzdGF0dXM6IFwiICsgbGlua2VkSXNzdWUuZ2V0U3RhdHVzT2JqZWN0KCkubmFtZVxuICAgICAgICBpZihsaW5rZWRJc3N1ZS5nZXRTdGF0dXNPYmplY3QoKS5uYW1lID09IHByb3BlcnRpZXNbJ3dmLm9wZW4nXS50b1N0cmluZygpKXtcbiAgICAgICAgICAgIGZvdW5kPXRydWVcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vbG9nLmRlYnVnIFwiZm91bmQ6IFwiICsgZm91bmRcblxuaWYoZm91bmQpe1xuXHRkZWYgZGVzdFN0YXR1c09iamVjdCA9IGxpbmtlZElzc3VlLmdldFN0YXR1c09iamVjdCgpXG4gICAgLy9sb2cuZGVidWcgXCJkZXN0U3RhdHVzT2JqZWN0OiBcIiArIGRlc3RTdGF0dXNPYmplY3RcbiAgICAvL2xvZy5kZWJ1ZyBcImxpbmtlZElzc3VlOiBcIiArIGxpbmtlZElzc3VlXG4gICAgZGVmIHVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcblx0Ly8gSXMgdGhlIHN0YXR1cyBvZiB0aGUgbGlua2VkIGlzc3VlIFwiSW5zdGFsbGluZ1wiID9cbiAgICBcbiAgICBkZWYgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuY3VzdG9tRmllbGRNYW5hZ2VyXG4gICAgZGVmIG9mZmVySXNzdWVGaWVsZCA9IGN1c3RvbUZpZWxkTWFuYWdlci5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yub2ZmZXJMaW5rZWRJc3N1ZSddLnRvU3RyaW5nKCkpLmZpcnN0KClcbiAgICBkZWYgbWFpbnRlbmFuY2VJc3N1ZUZpZWxkID0gY3VzdG9tRmllbGRNYW5hZ2VyLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5tYWludGVuYW5jZUxpbmtlZElzc3VlJ10gPyBwcm9wZXJ0aWVzWydjZi5tYWludGVuYW5jZUxpbmtlZElzc3VlJ10udG9TdHJpbmcoKSA6IFwiT1BfTUFJTlRFTkFOQ0VfTElOS0VEX0lTU1VFXCIpLmZpcnN0KClcbiAgICBkZWYgb2ZmZXJJc3N1ZUJvb2xGaWVsZCA9IGN1c3RvbUZpZWxkTWFuYWdlci5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yub2ZmZXJUa3QnXS50b1N0cmluZygpKS5maXJzdCgpXG4gICAgXG4gICAgLy9TZXQgT1BBQV9PRkZFUl9US1Q9WWVzIG9uIGp1c3QgY3JlYXRlZCBsaW5rZWRJc3N1ZVxuICAgIGRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlXG5cbiAgICBkZWYgZmllbGRDb25maWcgPSBvZmZlcklzc3VlQm9vbEZpZWxkLmdldFJlbGV2YW50Q29uZmlnKGxpbmtlZElzc3VlKVxuICAgIC8vbG9nLndhcm4gXCJmaWVsZENvbmZpZzogXCIgKyBmaWVsZENvbmZpZ1xuICAgIGRlZiBjZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09IFwiWWVzXCIgfVxuICAgIGxvZy5kZWJ1ZyBcInRyYW5zaXRpb24gZmllbGQgdmFsdWU6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXJyZW50VXNlclRyYW5zaXRpb24pXG4gICAgLy9sb2cuZGVidWcgXCJjdXJyZW50VXNlclRyYW5zaXRpb246IFwiICsgY3VycmVudFVzZXJUcmFuc2l0aW9uXG4gICAgZGVmIHVzZXJUcmFuc2l0aW9uID0gdXNlck1hbmFnZXIuZ2V0VXNlckJ5TmFtZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1cnJlbnRVc2VyVHJhbnNpdGlvbikudG9TdHJpbmcoKSlcblx0bG9nLmRlYnVnIFwidXNlclRyYW5zaXRpb246IFwiICsgdXNlclRyYW5zaXRpb25cbiAgICBpZiAodXNlclRyYW5zaXRpb24gIT0gbnVsbCAmJiAoZ3JvdXBNYW5hZ2VyLmdldFVzZXJzSW5Hcm91cChzdXBwbGllckFkbSkuY29udGFpbnModXNlclRyYW5zaXRpb24pIHx8IGdyb3VwTWFuYWdlci5nZXRVc2Vyc0luR3JvdXAoc3VwcGxpZXJUZWNoKS5jb250YWlucyh1c2VyVHJhbnNpdGlvbikpKSB7XG4gICAgICAgIC8vIFRyYW5zaXRpb24gZXhlY3V0ZWQgYnkgZXh0ZXJuYWwgdXNlciAtLT4gdG8gYmUgYWRkZWQgYWxzbyBpbnRlcm5hbCB0ZWNocyByb2xlIGdyb3Vwc1xuICAgICAgICAvLyBFbWFpbCBoYXMgbm90IHRvIGJlIHNlbnRcbiAgICAgICAgLy8gU04gd2lsbCBiZSBjcmVhdGVkIGFzIHNvb24gYXMgdGhlIHF1b3RhdGlvbiBoYXMgYmVlbiBjb25maXJtZWQgLSB0byBiZSBjaGVja2VkIHdoZW4gdG8gY3JlYXRlIFNOIGlmIG5vIHF1b3RhdGlvbiBmcm9tIHN1cHBsaWVyIGlzIG5lZWRlZCAtIHdoZW4gdGhlIHF1b3RhdGlvbiBoYXMgYmVlbiBzZW50IHRvIHRoZSBjdXN0b21lcj9cbiAgICAgICAgbG9nLmRlYnVnIFwiaW4gdXRlbnRlIHN1cHBsaWVyXCJcbiAgICAgICAgdHJhbnNpdGlvbkNoZWNrLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjayksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG4gICAgICAgIG9mZmVyRnJvbVJlcGFpci51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShvZmZlckZyb21SZXBhaXIpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuXHR9XG4gICAgb2ZmZXJJc3N1ZUJvb2xGaWVsZC51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShvZmZlcklzc3VlQm9vbEZpZWxkKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcblx0bWFpbnRlbmFuY2VJc3N1ZUZpZWxkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG1haW50ZW5hbmNlSXNzdWVGaWVsZCksIGlzc3VlLmtleS50b1N0cmluZygpKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuICAgIFxuICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTtcbiAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGxpbmtlZElzc3VlKSAgICBcbiAgICBcbiAgICAvL2xvZy5kZWJ1ZyBcIm9mZmVySXNzdWVGaWVsZDogXCIgKyBvZmZlcklzc3VlRmllbGRcbiAgICAvL2xvZy5kZWJ1ZyBcImxpbmtlZElzc3VlOiBcIiArIGxpbmtlZElzc3VlXG4gICAgb2ZmZXJJc3N1ZUZpZWxkLnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG9mZmVySXNzdWVGaWVsZCksIGxpbmtlZElzc3VlLmtleS50b1N0cmluZygpKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuICAgIC8vbG9nLmRlYnVnIFwidXBkYXRlZDogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG9mZmVySXNzdWVGaWVsZClcbiAgICBcbiAgICBpZiAoZGVzdFN0YXR1c09iamVjdC5uYW1lID09IHByb3BlcnRpZXNbJ3dmLm9wZW4nXS50b1N0cmluZygpKSB7XG4gICAgICAgIC8vIFByZXBhcmUgb3VyIGlucHV0IGZvciB0aGUgdHJhbnNpdGlvblxuICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKVxuICAgICAgICBpc3N1ZUlucHV0UGFyYW1ldGVycy53aXRoIHtcbiAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayh0cnVlKVxuICAgICAgICB9XG4gICAgICAgIC8vIFZhbGlkYXRlIHRyYW5zaXRpb25pbmcgdGhlIGxpbmtlZCBpc3N1ZSB0byBcIlNpZ25zIE5lZWRlZFwiXG4gICAgICAgIGRlZiB2YWxpZGF0aW9uUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgKHByb3BlcnRpZXNbJ3dmLnRyLmFza1F1b3RlJ10gPyBwcm9wZXJ0aWVzWyd3Zi50ci5hc2tRdW90ZSddLnRvSW50ZWdlcigpIDogMTEpLCBpc3N1ZUlucHV0UGFyYW1ldGVycylcbiAgICAgICAgaWYgKHZhbGlkYXRpb25SZXN1bHQuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSB0cmFuc2l0aW9uXG4gICAgICAgICAgICBkZWYgaXNzdWVSZXN1bHQgPSBpc3N1ZVNlcnZpY2UudHJhbnNpdGlvbih1c2VyLCB2YWxpZGF0aW9uUmVzdWx0KVxuICAgICAgICAgICAgaWYgKCEgaXNzdWVSZXN1bHQuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnKFwiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2Rlc3RJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnKFwiVHJhbnNhemlvbmUgZmF0dGFcIilcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyhcIkNvdWxkIG5vdCB0cmFuc2l0aW9uIHRhc2sgJHtkZXN0SXNzdWUua2V5fSwgZXJyb3JzOiAke3ZhbGlkYXRpb25SZXN1bHQuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICB9XG4gICAgfVxuICAgIFxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZQppbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb24KaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3IKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXIKaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyCmltcG9ydCBncm9vdnkuanNvbi5Kc29uU2x1cnBlcgppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb25maWcudXRpbC5KaXJhSG9tZQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvbgppbXBvcnQgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQKaW1wb3J0IGphdmEudGV4dC5QYXJzZUV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbmZpZy5wcm9wZXJ0aWVzLkFQS2V5cwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuTGlua0NvbGxlY3Rpb25JbXBsOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWUKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS51dGlsLkRlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CmRlZiBDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRykKSXNzdWVJbmRleGluZ1NlcnZpY2UgCWlzc3VlSW5kZXhpbmdTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KElzc3VlSW5kZXhpbmdTZXJ2aWNlKQoKLypTY3JpcHQgVmFyaWFibGVzKi8KLy9QZXIgUG9zdCBGdW5jdGlvbgppc3N1ZSA9IGlzc3VlCi8vUGVyIHRlc3QgZGEgY29uc29sZQovL0lzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKQovL2lzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKCJPUFVULTI1NyIpCmxvZy5kZWJ1ZyAiSXNzdWU6ICIgKyBpc3N1ZQpkZWYgZm91bmQ9ZmFsc2UKZGVmIGxpbmtlZElzc3VlCmRlZiBpc3N1ZVNlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZVNlcnZpY2UoKQoKTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpOwpsb2cuZGVidWcgImFsbEluSXNzdWVMaW5rOiAiICsgYWxsSW5Jc3N1ZUxpbmsKZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykgewogICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTsKICAgIGRlZiBsaW5rZWRJc3N1ZVRlbXAgPSBpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkKICAgIFN0cmluZyB0eXBlID0gbGlua2VkSXNzdWVUZW1wLmdldElzc3VlVHlwZSgpLmdldE5hbWUoKTsKCiAgICBsb2cuZGVidWcoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpKSAKICAgIAogICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNUcmlnZ2VyJ10udG9TdHJpbmcoKSkpewogICAgICAgIGZvdW5kPXRydWUKICAgICAgICBsaW5rZWRJc3N1ZT1saW5rZWRJc3N1ZVRlbXAKICAgIH0KfQpsb2cuZGVidWcgImZvdW5kOiAiICsgZm91bmQKCmlmKGZvdW5kKXsKCWRlZiBkZXN0U3RhdHVzT2JqZWN0ID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzT2JqZWN0KCkKICAgIGxvZy5kZWJ1ZyAiZGVzdFN0YXR1c09iamVjdDogIiArIGRlc3RTdGF0dXNPYmplY3QKICAgIGxvZy5kZWJ1ZyAibGlua2VkSXNzdWU6ICIgKyBsaW5rZWRJc3N1ZQogICAgZGVmIHVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKCS8vIElzIHRoZSBzdGF0dXMgb2YgdGhlIGxpbmtlZCBpc3N1ZSAiSW5zdGFsbGluZyIgPwogICAgCiAgICBkZWYgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuY3VzdG9tRmllbGRNYW5hZ2VyCiAgICBkZWYgb2ZmZXJJc3N1ZUZpZWxkID0gY3VzdG9tRmllbGRNYW5hZ2VyLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5vZmZlckxpbmtlZElzc3VlJ10udG9TdHJpbmcoKSkuZmlyc3QoKQogICAgZGVmIG1haW50ZW5hbmNlSXNzdWVGaWVsZCA9IGN1c3RvbUZpZWxkTWFuYWdlci5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YubWFpbnRlbmFuY2VMaW5rZWRJc3N1ZSddID8gcHJvcGVydGllc1snY2YubWFpbnRlbmFuY2VMaW5rZWRJc3N1ZSddLnRvU3RyaW5nKCkgOiAiT1BfTUFJTlRFTkFOQ0VfTElOS0VEX0lTU1VFIikuZmlyc3QoKQogICAgZGVmIG9mZmVySXNzdWVCb29sRmllbGQgPSBjdXN0b21GaWVsZE1hbmFnZXIuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLm9mZmVyVGt0J10udG9TdHJpbmcoKSkuZmlyc3QoKQogICAgCiAgICAvL1NldCBPUEFBX09GRkVSX1RLVD1ZZXMgb24ganVzdCBjcmVhdGVkIGxpbmtlZElzc3VlCiAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlCgogICAgZGVmIGZpZWxkQ29uZmlnID0gb2ZmZXJJc3N1ZUJvb2xGaWVsZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSkKICAgIGxvZy53YXJuICJmaWVsZENvbmZpZzogIiArIGZpZWxkQ29uZmlnCiAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICBvZmZlcklzc3VlQm9vbEZpZWxkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG9mZmVySXNzdWVCb29sRmllbGQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoJbWFpbnRlbmFuY2VJc3N1ZUZpZWxkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG1haW50ZW5hbmNlSXNzdWVGaWVsZCksIGlzc3VlLmtleS50b1N0cmluZygpKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQogICAgCiAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7CiAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGxpbmtlZElzc3VlKSAgICAKICAgIAogICAgbG9nLmRlYnVnICJvZmZlcklzc3VlRmllbGQ6ICIgKyBvZmZlcklzc3VlRmllbGQKICAgIGxvZy5kZWJ1ZyAibGlua2VkSXNzdWU6ICIgKyBsaW5rZWRJc3N1ZQogICAgb2ZmZXJJc3N1ZUZpZWxkLnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG9mZmVySXNzdWVGaWVsZCksIGxpbmtlZElzc3VlLmtleS50b1N0cmluZygpKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQogICAgbG9nLmRlYnVnICJ1cGRhdGVkOiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShvZmZlcklzc3VlRmllbGQpCiAgICAKICAgIGlmIChkZXN0U3RhdHVzT2JqZWN0Lm5hbWUgPT0gcHJvcGVydGllc1snd2Yub3BlbiddLnRvU3RyaW5nKCkpIHsKICAgICAgICAvLyBQcmVwYXJlIG91ciBpbnB1dCBmb3IgdGhlIHRyYW5zaXRpb24KICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKQogICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGggewogICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2sodHJ1ZSkKICAgICAgICB9CiAgICAgICAgLy8gVmFsaWRhdGUgdHJhbnNpdGlvbmluZyB0aGUgbGlua2VkIGlzc3VlIHRvICJTaWducyBOZWVkZWQiCiAgICAgICAgZGVmIHZhbGlkYXRpb25SZXN1bHQgPSBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCAocHJvcGVydGllc1snd2YudHIuYXNrUXVvdGUnXSA/IHByb3BlcnRpZXNbJ3dmLnRyLmFza1F1b3RlJ10udG9JbnRlZ2VyKCkgOiAxMSksIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKQogICAgICAgIGlmICh2YWxpZGF0aW9uUmVzdWx0LmlzVmFsaWQoKSkgewogICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIHZhbGlkYXRpb25SZXN1bHQpCiAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgbG9nLmRlYnVnKCJGYWlsZWQgdG8gdHJhbnNpdGlvbiB0YXNrICR7ZGVzdElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICBsb2cuZGVidWcoIlRyYW5zYXppb25lIGZhdHRhIikKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGxvZy5kZWJ1ZygiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2Rlc3RJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7dmFsaWRhdGlvblJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICB9CiAgICB9CiAgICAKfQ==</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE"></arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_23401</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="241" name="Riapri Tkt">
          <meta name="opsbar-sequence">20</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">dcdea165-76ee-4240-ba52-c437fa030551</arg>
                <arg name="FIELD_NOTES">YCFgT1A6IE9QQUFfU0FMRVNfT1JERVJfREFURSBhbmQgT1BBQV9QVVJDSEFTRV9PUkRFUl9EQVRFIHNob3VsZCBiZSBudWxsIGluIG9yZGVyIHRvIHJlb3BlbiB0aGUgdGlja2V0IC0gb3RoZXJ3aXNlIHRoZSB0aWNrZXQgaGFzIGFscmVhZHkgYmVlbiBhY2NvdW50ZWQgc28gaXQgY2Fubm90IGJlIHJlb3BlbmVk</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJjZlZhbHVlc1snT1BfU0FMRVNfT1JERVJfREFURSddID09IG51bGwgfHwgY2ZWYWx1ZXNbJ09QX1BVUkNIQVNFX09SREVSX0RBVEUnXSA9PSBudWxsIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="6">
              <post-functions>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_22659</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="field.copyFieldSource1"></arg>
                  <arg name="textValue">-1</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue">50</arg>
                  <arg name="workflowName-textValue">OPAA: PM Task Workflow</arg>
                  <arg name="performTransitionAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="scopeType">PARENT</arg>
                  <arg name="destination-scopeTarget">SUB_TASK</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitieslinkedtransition-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="integerValue">21</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.linkedtransition.LinkedTransitionFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                  <arg name="status"></arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue">50</arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_22693</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="field">resolution</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.15.1</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="1121" name="Genera Rapporto di Intervento FAAC" view="fieldscreen">
          <meta name="opsbar-sequence">10</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">19910</meta>
          <restrict-to>
            <conditions type="AND">
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">da6b0975-6a4b-46f7-a46f-15e624ccc794</arg>
                <arg name="FIELD_NOTES">YCFgQXZhaWxhYmxlIG9ubHkgaWYgbm8gT05TSVRFIFJFUE9SVCBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBleGlzdHMgb24gdGhlIHRpY2tldA==</arg>
                <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxubG9nLmRlYnVnIFwiT25TaXRlIFJlcG9ydCBwZXIgaXNzdWU6IFwiICsgaXNzdWUua2V5XG4vKiBSRVNUIEFQSSBwZXIgR2VuZXJhemlvbmUgQWxsZWdhdG8gUmFwcG9ydG8gZGkgSW50ZXJ2ZW50byAqL1xucmVxdWVzdE1ldGhvZCA9IFwiUFVUXCI7XG4vKlNjcmlwdCBWYXJpYWJsZXMqL1xuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0xNDA2MlwiKVxuXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5cbi8qUmltb3ppb25lIGFsbGVnYXRvIHJhcHBvcnRvIGRpIGludGVydmVudG8gYXBwZW5hIGNyZWF0byovXG4vKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG5cbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTtcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcblxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcblxuQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG5kZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG5cbi8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSBcIiBhcm91bmQgdmFsdWUgKi9cbmRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5OYW1lIExJS0UgXFxcIlJhcHBvcnRvIGRpIGludGVydmVudG9cXFwiIEFORCBBVVRPX0dFTkVSQVRFRD10cnVlIEFORCBcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpICsgXCIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSBcIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIpXCIpOyAvLyBTZWUgdGhlIGNvbXBsZXRlIGxpc3Qgb2YgcG9zc2libGUgSVFMIG9uIHRoZSBJbnNpZ2h0IFF1ZXJ5IExhbmd1YWdlIGRvY3VtZW50YXRpb24gcGFnZVxuLyogSWYgdGhpcyBpcyBhIG1hbmRhdG9yeSBmaWVsZCB5b3Ugc2hvdWxkIGJlIGFibGUgdG8gZG8gdGhpczogKi9cbmxvZy5kZWJ1ZyBcIklRTDogXCIgKyBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5OYW1lIExJS0UgXFxcIlJhcHBvcnRvIGRpIGludGVydmVudG9cXFwiIEFORCBcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpICsgXCIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSBcIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIpXCJcblxuLyohIURhIHJpbXVvdmVyZSBhcHBlbmEgcmlzb2x0aSBpIGJ1ZyEhKi9cbmlmKChvYmplY3RzID09IG51bGwgfHwgb2JqZWN0cy5zaXplPT0wKSAvKiYmICFpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0LnBsYW5uZWRNYWludGVuYW5jZSddKSovKXtcbiAgICBwYXNzZXNDb25kaXRpb24gPSB0cnVlXG59ZWxzZXtcbiAgICBwYXNzZXNDb25kaXRpb24gPSBmYWxzZVxufVxuIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.CustomScriptCondition</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">c83eed7c-052e-4c06-ac5e-c2925515cc02</arg>
                <arg name="FIELD_NOTES">YCFgTWFpbnRlbmFuY2UgVGlja2V0IE9SIFBNIFRpY2tldA==</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnTWFpbnRlbmFuY2UgVGlja2V0JyB8fCBpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXQnIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">9fe0fa5191d4b6a91ba7485380ff8d0a9fda8fe7</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IFJFU1QgQVBJOiBPUCBnZW5lcmF6aW9uZSBSYXBwb3J0byBkaSBpbnRlcnZlbnRv</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxubG9nLmRlYnVnIFwiT25TaXRlIFJlcG9ydCBwZXIgaXNzdWU6IFwiICsgaXNzdWUua2V5XG4vKiBSRVNUIEFQSSBwZXIgR2VuZXJhemlvbmUgQWxsZWdhdG8gUmFwcG9ydG8gZGkgSW50ZXJ2ZW50byAqL1xucmVxdWVzdE1ldGhvZCA9IFwiUFVUXCI7XG4vKlNjcmlwdCBWYXJpYWJsZXMqL1xuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0xNDA2MlwiKVxuXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5cbi8qUmltb3ppb25lIGFsbGVnYXRvIHJhcHBvcnRvIGRpIGludGVydmVudG8gYXBwZW5hIGNyZWF0byovXG4vKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG5cbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTtcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcblxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcblxuQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG5kZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG5cbi8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSBcIiBhcm91bmQgdmFsdWUgKi9cbmRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5OYW1lIExJS0UgXFxcIlJhcHBvcnRvIGRpIGludGVydmVudG9cXFwiIEFORCBBVVRPX0dFTkVSQVRFRCA9IHRydWUgQU5EIFwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyBcIiE9dHJ1ZSBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleSA9IFwiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIilcIik7IC8vIFNlZSB0aGUgY29tcGxldGUgbGlzdCBvZiBwb3NzaWJsZSBJUUwgb24gdGhlIEluc2lnaHQgUXVlcnkgTGFuZ3VhZ2UgZG9jdW1lbnRhdGlvbiBwYWdlXG4vKiBJZiB0aGlzIGlzIGEgbWFuZGF0b3J5IGZpZWxkIHlvdSBzaG91bGQgYmUgYWJsZSB0byBkbyB0aGlzOiAqL1xubG9nLmRlYnVnIFwiSVFMOiBcIiArIFwiXFxcIlwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuY2F0ZWdvcnlSZWYnXS50b1N0cmluZygpICsgXCJcXFwiLk5hbWUgTElLRSBcXFwiUmFwcG9ydG8gZGkgaW50ZXJ2ZW50b1xcXCIgQU5EIFwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyBcIiE9dHJ1ZSBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleSA9IFwiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIilcIlxuXG4vKiEhRGEgcmltdW92ZXJlIGFwcGVuYSByaXNvbHRpIGkgYnVnISEqL1xuaWYoKG9iamVjdHMgPT0gbnVsbCB8fCBvYmplY3RzLnNpemU9PTApIC8qJiYgIWlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQucGxhbm5lZE1haW50ZW5hbmNlJ10pKi8pe1xuICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL0FBL3RpY2tldC9cIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIvYXR0YWNobWVudC9vbnNpdGVcIlxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVcmw6IFwiICsgYmFzZVVSTFxuXG4gICAgVVJMIHVybFxuICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcblxuICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkdFTkVSQVRFLU9OU0lURVJFUE9SVFwiKVxuICAgICAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICB9XG5cbn1cbiIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeQppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQpDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRykKCklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTsKQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpOwpkZWYgcmVxdWVzdE1ldGhvZApkZWYgYmFzZVVSTApsb2cuZGVidWcgIk9uU2l0ZSBSZXBvcnQgcGVyIGlzc3VlOiAiICsgaXNzdWUua2V5Ci8qIFJFU1QgQVBJIHBlciBHZW5lcmF6aW9uZSBBbGxlZ2F0byBSYXBwb3J0byBkaSBJbnRlcnZlbnRvICovCnJlcXVlc3RNZXRob2QgPSAiUFVUIjsKCmJhc2VVUkwgPSAiaHR0cDovLyIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArICIvb3AvcmVzdC9hdXRvbWF0aW9uL0FBL3RpY2tldC8iICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyAiL2F0dGFjaG1lbnQvb25zaXRlIgpsb2cuZGVidWcgImJhc2VVcmw6ICIgKyBiYXNlVVJMCgpVUkwgdXJsCnVybCA9IG5ldyBVUkwoYmFzZVVSTCkKSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpOwpjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eSgiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL2pzb24iKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoIkFjY2VwdCIsICIqLyoiKTsKY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTsKY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpOwpjb25uZWN0aW9uLmNvbm5lY3QoKTsKbG9nLmRlYnVnICJSZXNwb25zZUNvZGU6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkKbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKCmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCmRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKQpkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpCgppZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoIjIwMCIpKXsKICAgIGxvZy5kZWJ1ZyAidXJsOiAiICsgdXJsCiAgICBsb2cuZGVidWcgIlJlc3BvbnNlQ29kZToiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKQogICAgbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKICAgIGVMaXN0RXJyb3JzLmFkZCgiRSIpCiAgICBlTGlzdEVycm9ycy5hZGQoIkdFTkVSQVRFLU9OU0lURVJFUE9SVCIpCiAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyAiICIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpKQogICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncykKICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycykKCiAgICBvdXRwdXQuYWRkKGVMaXN0KQogICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigneyJFIjoiJyArIG91dHB1dC50b1N0cmluZygpICsgJyJ9JykKICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiRSIsIG91dHB1dC50b1N0cmluZygpKQp9Cg==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">45747608-2046-4623-a20b-8410265ef0c3</arg>
              <arg name="FIELD_NOTES">YCFgUkVTVCBBUEk6IEdlbmVyYSByYXBwb3J0byBkaSBpbnRlcnZlbnRvIGNvbiB0ZW1wbGF0ZQ==</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGlua1xuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbi8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMzI1NTFcIilcblxuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuZGVmIHJlcXVlc3RNZXRob2RcbmRlZiBiYXNlVVJMXG5cbmRlZiB0a3RWaXNpYmlsaXR5ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEtUX1ZJU0lCSUxJVFlfS0VZXCIpXG5kZWYgdGVtcGxhdGVJZFxuaW50IERCTyA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuZGJvLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuXG5kZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuXG4vKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG4vKiBHZXQgSW5zaWdodCBPYmplY3QgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7XG5kZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBUeXBlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xuQ2xhc3Mgb2JqZWN0VHlwZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVGYWNhZGVcIik7XG5kZWYgb2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpO1xuLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbkNsYXNzIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5zZXJ2aWNlcy5tb2RlbC5mYWN0b3J5Lk9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5XCIpO1xuZGVmIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MpO1xuXG5kZWYgdGt0S2V5ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0a3RWaXNpYmlsaXR5KVswXVxuZGVmIHRrdE9iaktleSA9IHRrdEtleS50b1N0cmluZygpLnN1YnN0cmluZyh0a3RLZXkudG9TdHJpbmcoKS5sYXN0SW5kZXhPZignKCcpKzEsdGt0S2V5LnRvU3RyaW5nKCkubGFzdEluZGV4T2YoJyknKSlcblxuZGVmIGNvbXBhbnkgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGt0S2V5LmdldElkKCksIFwiQ09NUEFOWV9SRUZcIikuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpO1xubG9nLmRlYnVnIFwiY29tcGFueTogXCIgKyBjb21wYW55WzBdLmdldFZhbHVlKClcblxuZGVmIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBhbnlbMF0uZ2V0VmFsdWUoKSwgcHJvcGVydGllc1snaW9iai5jb250YWN0LmRiby5uYW1lJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpICBcbmRlZiBjb21wYW55TmFtZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxubG9nLmRlYnVnIFwiY29tcGFueU5hbWU6IFwiICsgY29tcGFueU5hbWVbMF0udmFsdWVcblxub2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcGFueVswXS5nZXRWYWx1ZSgpLCBcIkRFRkFVTFRfTEFOR1VBR0VcIikuY3JlYXRlTXV0YWJsZSgpICBcbmRlZiBkZWZMYW5ndWFnZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxubG9nLmRlYnVnIFwiZGVmTGFuZ3VhZ2U6IFwiICsgZGVmTGFuZ3VhZ2VbMF0udmFsdWVcblxuZGVmIG9iamVjdHMgPSBpcWxGYWNhZGUuZmluZE9iamVjdHNCeUlRTEFuZFNjaGVtYShEQk8sIFwiXFxcIlwiICsgKHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmF0dGFjaG1lbnRDYXRlZ29yeSddID8gcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuYXR0YWNobWVudENhdGVnb3J5J10udG9TdHJpbmcoKSA6IFwiQVRUQUNITUVOVF9DQVRFR09SWVwiKSArIFwiXFxcIi5cXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5uYW1lJ10udG9TdHJpbmcoKSArIFwiXFxcIiA9IFxcXCJcIiArIFwiUmFwcG9ydG8gZGkgaW50ZXJ2ZW50byAoRkFBQylcIiArIFwiXFxcIiBBTkQgXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSArIFwiIT10cnVlIEFORCBDT01QQU5ZIElTIE5PVCBFTVBUWSBBTkQgQ09NUEFOWS5OYW1lID0gXFxcIlwiICsgY29tcGFueU5hbWVbMF0udmFsdWUgKyBcIlxcXCIgQU5EIElTU1VFX1RZUEU9XFxcIlwiICsgaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZSArIFwiXFxcIiBBTkQgTEFOR1VBR0UgPSBcXFwiXCIgKyBkZWZMYW5ndWFnZVswXS52YWx1ZSArIFwiXFxcIlwiKTsgLy8gU2VlIHRoZSBjb21wbGV0ZSBsaXN0IG9mIHBvc3NpYmxlIElRTCBvbiB0aGUgSW5zaWdodCBRdWVyeSBMYW5ndWFnZSBkb2N1bWVudGF0aW9uIHBhZ2VcbmxvZy5pbmZvKFwiSW5zaWdodCBvYmplY3Q6IFwiICsgb2JqZWN0c1swXSk7XG5sb2cuZGVidWcgXCJcXFwiXCIgKyAocHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuYXR0YWNobWVudENhdGVnb3J5J10gPyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5hdHRhY2htZW50Q2F0ZWdvcnknXS50b1N0cmluZygpIDogXCJBVFRBQ0hNRU5UX0NBVEVHT1JZXCIpICsgXCJcXFwiLlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm5hbWUnXS50b1N0cmluZygpICsgXCJcXFwiID0gXFxcIlwiICsgXCJSYXBwb3J0byBkaSBpbnRlcnZlbnRvIChGQUFDKVwiICsgXCJcXFwiIEFORCBcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpICsgXCIhPXRydWUgQU5EIENPTVBBTlkgSVMgTk9UIEVNUFRZIEFORCBDT01QQU5ZLk5hbWUgPSBcXFwiXCIgKyBjb21wYW55TmFtZVswXS52YWx1ZSArIFwiXFxcIiBBTkQgSVNTVUVfVFlQRT1cXFwiXCIgKyBpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lICsgXCJcXFwiIEFORCBMQU5HVUFHRSA9IFxcXCJcIiArIGRlZkxhbmd1YWdlWzBdLnZhbHVlICsgXCJcXFwiXCJcblxuaWYoIW9iamVjdHNbMF0pe1xuICAgIC8qTmVzc3VuIGZpbGUgaW5kaXZpZHVhdG8gcmVzdGl0dWlzY28gZXJyb3JlICovXG4gICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgIGVMaXN0RXJyb3JzLmFkZChcIk1JU1NJTkctT05TSVRFUkVQT1JULVRFTVBMQVRFXCIpXG4gICAgZUxpc3RFcnJvcnMuYWRkKG51bGwpXG4gICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9Jylcbn1cblxuaWYob2JqZWN0c1swXSl7XG4gICAgbG9nLmRlYnVnIFwidGVtcGxhdGUgZGEgdXNhcmU6IFwiICsgb2JqZWN0c1swXS5nZXRJZCgpXG4gICAgdGVtcGxhdGVJZD1vYmplY3RzWzBdLmdldElkKClcbn1cblxuXG4vKiBSRVNUIEFQSSBwZXIgR2VuZXJhemlvbmUgUmFwcG9ydG8gZGkgaW50ZXJ2ZW50byAqL1xucmVxdWVzdE1ldGhvZCA9IFwiUFVUXCI7XG5cbi8qUGFyYW1ldGVyczogdHlwZSBpcyBvcHRpb25hbCAtIGl0IGNhbiBiZSBzZXQgdG8gV29yZCBvciBQREYqL1xuYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vQUEvdGlja2V0L1wiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIi9hdHRhY2htZW50L29uc2l0ZT90ZW1wbGF0ZUlkPVwiICsgdGVtcGxhdGVJZCArIFwiJnR5cGU9UERGXCJcbmxvZy5kZWJ1ZyBcImJhc2VVcmw6IFwiICsgYmFzZVVSTFxuXG5VUkwgdXJsXG51cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG5IdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG5jb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuY29ubmVjdGlvbi5jb25uZWN0KCk7XG5sb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG5sb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG5cbmlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgIGVMaXN0RXJyb3JzLmFkZChcIkdFTkVSQVRFLU9OU0lURVJFUE9SVFwiKVxuICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKSlcbiAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="disabled">false</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="7">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">442a396a-d2f9-4282-99b9-1de0b8f0afd4</arg>
                  <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIGxpbmtlZFRpY2tldHMgJiBGYXN0LVRyYW5zYWN0IHRoZW0=</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbkNhdGVnb3J5IGxvZyA9IENhdGVnb3J5LmdldEluc3RhbmNlKFwiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb25cIilcbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLldBUk4pXG5cbmxvZy53YXJuIFwiJHtpc3N1ZS5rZXl9IFRyYW5zYXppb25lIENvbXBsZXRlIC0gUG9zdCBGdW5jdGlvbiBjaGVjayBsaW5rZWRJc3N1ZXNcIlxuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5kZWYgYXV0b21hdGljYWxseUNsb3NlZCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUNsb3NlZCddLnRvU3RyaW5nKCkpWzBdXG5Jc3N1ZUluZGV4aW5nU2VydmljZSBcdGlzc3VlSW5kZXhpbmdTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KElzc3VlSW5kZXhpbmdTZXJ2aWNlKVxuXG5Jc3N1ZSBpc3N1ZSA9IGlzc3VlXG4vL1BlciB0ZXN0IGRhIGNvbnNvbGVcbi8vaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJPUFVULTI3NlwiKVxuXG5DUkVBVEVfT05TSVRFUkVQT1JUPXByb3BlcnRpZXNbJ3dmLnRyLmNyZWF0ZU9uc2l0ZVJlcG9ydCddID8gcHJvcGVydGllc1snd2YudHIuY3JlYXRlT25zaXRlUmVwb3J0J10gOiA3OTFcblxuZGVmIHVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcbmRlZiBpc3N1ZVNlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZVNlcnZpY2UoKVxuXG5sb2cud2FybiBcImlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCk6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKVxuXG5pZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpPT1udWxsIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkudG9TdHJpbmcoKS5lcXVhbHMoXCJOb1wiKSl7XG4gICAgLypPUC0xMDM4OiBzZSBobyBlc2VndWl0byBsYSBDb21wbGV0ZSBzdWwgdGlja2V0IFwicGFkcmVcIiB2ZXJpZmljbyBlIHNwb3N0byBpbiBhdXRvbWF0aWNvIGdsaSBldmVudHVhbGkgdGlja2V0IGNvbGxlZ2F0aSovXG4gICAgXG4gICAgbG9nLndhcm4gXCJ2ZXJpZmljbyBlIHNwb3N0byBpbiBhdXRvbWF0aWNvIGdsaSBldmVudHVhbGkgdGlja2V0IGNvbGxlZ2F0aVwiXG4gICAgXG4gICAgTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG4gICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgIC8qRXNlZ3VpcmUgdHJhbnNhemlvbmUgZGkgc3RhdG8gY29uIE9QQUFfQVVUT01BVElDQUxMWV9DTE9TRUQ9WWVzIGRlbGxhIHNvdXJjZUlzc3VlKi9cbiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZSA9IGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKVxuICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlU3RhdHVzID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzKClcbiAgICAgICAgICAgIGxvZy53YXJuIFwiSXNzdWUgY29uIHJlbGF0ZXNJbklzc3VlTGluayAke2xpbmtlZElzc3VlfSBjb24gc3RhdG8gJHtsaW5rZWRJc3N1ZVN0YXR1c31cIlxuICAgICAgICAgICAgZGVmIHRyYW5zaXRpb25JZFxuICAgICAgICAgICAgaWYobGlua2VkSXNzdWVTdGF0dXMubmFtZSA9PSAocHJvcGVydGllc1snd2YuY29tcGxldGVkVG9CZUNsb3NlZCddID8gcHJvcGVydGllc1snd2YuY29tcGxldGVkVG9CZUNsb3NlZCddLnRvU3RyaW5nKCkgOiBcIkNvbXBsZXRlZCBUbyBCZSBDbG9zZWRcIikpe1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb25JZD1DUkVBVEVfT05TSVRFUkVQT1JUXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHJhbnNpdGlvbklkPT1DUkVBVEVfT05TSVRFUkVQT1JUKXtcbiAgICAgICAgICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKVxuICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGgge1xuICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2soZmFsc2UpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSlcbiAgICAgICAgICAgICAgICAvL0NvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICAgICAgICAgICAgICAvL2lzc3VlSW5wdXRQYXJhbWV0ZXJzLmFkZEN1c3RvbUZpZWxkVmFsdWUoZmllbGRDb25maWcuZ2V0SWQoKSwgXCJZZXNcIikgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXG4gICAgICAgICAgICAgICAgZGVmIG1pID0gKE11dGFibGVJc3N1ZSkgbGlua2VkSXNzdWVcblxuICAgICAgICAgICAgICAgIGRlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcobGlua2VkSXNzdWUpXG4gICAgICAgICAgICAgICAgbG9nLndhcm4gXCJmaWVsZENvbmZpZzogXCIgKyBmaWVsZENvbmZpZ1xuICAgICAgICAgICAgICAgIGRlZiBjZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09IFwiWWVzXCIgfVxuICAgICAgICAgICAgICAgIGF1dG9tYXRpY2FsbHlDbG9zZWQudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG5cbiAgICAgICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChsaW5rZWRJc3N1ZSlcbiAgICAgICAgICAgICAgICBsb2cud2FybiBcIlVwZGF0ZWQgY3VzdG9tZmllbGQgLSBpc3N1ZSBsaW5rYXRhXCJcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvL2RlZiB2YWxpZGF0aW9uUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycylcbiAgICAgICAgICAgICAgICBpZiAoaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLnRvSW50ZWdlcigpLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgZGVmIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLnRvSW50ZWdlcigpLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpXG4gICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJGYWlsZWQgdG8gdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn1cIilcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlRyYW5zYXppb25lIGZhdHRhIDE2MSAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c31cIilcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259XCIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG4gICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsT3V0SXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHtcbiAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcblxuICAgICAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICBsb2cud2FybiBcIklzc3VlIGNvbiByZWxhdGVzT3V0SXNzdWVMaW5rXCJcbiAgICAgICAgICAgIC8qRXNlZ3VpcmUgdHJhbnNhemlvbmUgZGkgc3RhdG8gY29uIE9QQUFfQVVUT01BVElDQUxMWV9DTE9TRUQ9WWVzIGRlbGxhIGRlc3RpbmF0aW9uSXNzdWUqL1xuICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlID0gaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KClcbiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZVN0YXR1cyA9IGxpbmtlZElzc3VlLmdldFN0YXR1cygpXG4gICAgICAgICAgICBkZWYgdHJhbnNpdGlvbklkXG4gICAgICAgICAgICBsb2cud2FybiBcImxpbmtlZElzc3VlOiBcIiArIGxpbmtlZElzc3VlXG4gICAgICAgICAgICBsb2cud2FybiBcImxpbmtlZElzc3VlU3RhdHVzLm5hbWU6IFwiICsgbGlua2VkSXNzdWVTdGF0dXMubmFtZVxuICAgICAgICAgICAgaWYobGlua2VkSXNzdWVTdGF0dXMubmFtZSA9PSAocHJvcGVydGllc1snd2YuY29tcGxldGVkVG9CZUNsb3NlZCddID8gcHJvcGVydGllc1snd2YuY29tcGxldGVkVG9CZUNsb3NlZCddLnRvU3RyaW5nKCkgOiBcIkNvbXBsZXRlZCBUbyBCZSBDbG9zZWRcIikpe1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb25JZD1DUkVBVEVfT05TSVRFUkVQT1JUXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHJhbnNpdGlvbklkPT1DUkVBVEVfT05TSVRFUkVQT1JUKXtcbiAgICAgICAgICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKVxuICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGgge1xuICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2soZmFsc2UpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSlcbiAgICAgICAgICAgICAgICAvL0NvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICAgICAgICAgICAgICAvL2lzc3VlSW5wdXRQYXJhbWV0ZXJzLmFkZEN1c3RvbUZpZWxkVmFsdWUoZmllbGRDb25maWcuZ2V0SWQoKSwgXCJZZXNcIikgXG4gICAgICAgICAgICAgICAgLy9sb2cud2FybiBcInZhbGlkYXRlUmVzdWx0XCJcbiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcbiAgICAgICAgICAgICAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBsaW5rZWRJc3N1ZVxuXG4gICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSlcbiAgICAgICAgICAgICAgICBsb2cud2FybiBcImZpZWxkQ29uZmlnOiBcIiArIGZpZWxkQ29uZmlnXG4gICAgICAgICAgICAgICAgZGVmIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gXCJZZXNcIiB9XG4gICAgICAgICAgICAgICAgYXV0b21hdGljYWxseUNsb3NlZC51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcblxuICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGxpbmtlZElzc3VlKVxuICAgICAgICAgICAgICAgIGxvZy53YXJuIFwiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGFcIlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQudG9JbnRlZ2VyKCksIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgdHJhbnNpdGlvblxuICAgICAgICAgICAgICAgICAgICBkZWYgaXNzdWVSZXN1bHQgPSBpc3N1ZVNlcnZpY2UudHJhbnNpdGlvbih1c2VyLCBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQudG9JbnRlZ2VyKCksIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEgaXNzdWVSZXN1bHQuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIkZhaWxlZCB0byB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiVHJhbnNhemlvbmUgZmF0dGEgMjg1ICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn0sICR7bGlua2VkSXNzdWUuc3RhdHVzfVwiKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJDb3VsZCBub3QgdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmVycm9yQ29sbGVjdGlvbn1cIilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbn0iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlCmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZQppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQpDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5XQVJOKQoKbG9nLndhcm4gIiR7aXNzdWUua2V5fSBUcmFuc2F6aW9uZSBDb21wbGV0ZSAtIFBvc3QgRnVuY3Rpb24gY2hlY2sgbGlua2VkSXNzdWVzIgoKSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpOwpDdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7CmRlZiBhdXRvbWF0aWNhbGx5Q2xvc2VkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q2xvc2VkJ10udG9TdHJpbmcoKSlbMF0KSXNzdWVJbmRleGluZ1NlcnZpY2UgCWlzc3VlSW5kZXhpbmdTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KElzc3VlSW5kZXhpbmdTZXJ2aWNlKQoKSXNzdWUgaXNzdWUgPSBpc3N1ZQovL1BlciB0ZXN0IGRhIGNvbnNvbGUKLy9pc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZSgiT1BVVC0yNzYiKQoKU1RBUlRfUFJPR1JFU1M9cHJvcGVydGllc1snd2YudHIuc3RhcnRQcm9ncmVzcyddCkNPTVBMRVRFPXByb3BlcnRpZXNbJ3dmLnRyLmNvbXBsZXRlJ10KCmRlZiB1c2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpCmRlZiBpc3N1ZVNlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZVNlcnZpY2UoKQoKbG9nLndhcm4gImlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCk6ICIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpCgppZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpPT1udWxsIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkudG9TdHJpbmcoKS5lcXVhbHMoIk5vIikpewogICAgLypPUC0xMDM4OiBzZSBobyBlc2VndWl0byBsYSBDb21wbGV0ZSBzdWwgdGlja2V0ICJwYWRyZSIgdmVyaWZpY28gZSBzcG9zdG8gaW4gYXV0b21hdGljbyBnbGkgZXZlbnR1YWxpIHRpY2tldCBjb2xsZWdhdGkqLwogICAgCiAgICBsb2cud2FybiAidmVyaWZpY28gZSBzcG9zdG8gaW4gYXV0b21hdGljbyBnbGkgZXZlbnR1YWxpIHRpY2tldCBjb2xsZWdhdGkiCiAgICAKICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKQogICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykgewogICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7CgogICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgLypFc2VndWlyZSB0cmFuc2F6aW9uZSBkaSBzdGF0byBjb24gT1BBQV9BVVRPTUFUSUNBTExZX0NMT1NFRD1ZZXMgZGVsbGEgc291cmNlSXNzdWUqLwogICAgICAgICAgICBkZWYgbGlua2VkSXNzdWUgPSBpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkKICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlU3RhdHVzID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzKCkKICAgICAgICAgICAgbG9nLndhcm4gIklzc3VlIGNvbiByZWxhdGVzSW5Jc3N1ZUxpbmsgJHtsaW5rZWRJc3N1ZX0gY29uIHN0YXRvICR7bGlua2VkSXNzdWVTdGF0dXN9IgogICAgICAgICAgICBkZWYgdHJhbnNpdGlvbklkCiAgICAgICAgICAgIGlmKGxpbmtlZElzc3VlU3RhdHVzLm5hbWUgPT0gcHJvcGVydGllc1snd2YuY29uZmlybWVkQW5kUGxhbm5lZCddLnRvU3RyaW5nKCkpewogICAgICAgICAgICAgICAgdHJhbnNpdGlvbklkPVNUQVJUX1BST0dSRVNTCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYobGlua2VkSXNzdWVTdGF0dXMubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5pblByb2dyZXNzJ10udG9TdHJpbmcoKSl7CiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9Q09NUExFVEUKICAgICAgICAgICAgfQogICAgICAgICAgICBpZih0cmFuc2l0aW9uSWQ9PVNUQVJUX1BST0dSRVNTKXsKICAgICAgICAgICAgICAgIC8vIFByZXBhcmUgb3VyIGlucHV0IGZvciB0aGUgdHJhbnNpdGlvbgogICAgICAgICAgICAgICAgZGVmIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKCkKICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGggewogICAgICAgICAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayhmYWxzZSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSkKICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgIC8vaXNzdWVJbnB1dFBhcmFtZXRlcnMuYWRkQ3VzdG9tRmllbGRWYWx1ZShmaWVsZENvbmZpZy5nZXRJZCgpLCAiWWVzIikgCiAgICAgICAgICAgICAgICAvL2xvZy53YXJuICJpc3N1ZUlucHV0UGFyYW1ldGVyczogIiArIGlzc3VlSW5wdXRQYXJhbWV0ZXJzCiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlCgogICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgIGxvZy53YXJuICJmaWVsZENvbmZpZzogIiArIGZpZWxkQ29uZmlnCiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q2xvc2VkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoKICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTsKICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICBsb2cud2FybiAiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGEiCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vZGVmIHZhbGlkYXRpb25SZXN1bHQgPSBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKQogICAgICAgICAgICAgICAgaWYgKGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb24KICAgICAgICAgICAgICAgICAgICBkZWYgaXNzdWVSZXN1bHQgPSBpc3N1ZVNlcnZpY2UudHJhbnNpdGlvbih1c2VyLCBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKSkKICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIkZhaWxlZCB0byB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSIpCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJUcmFuc2F6aW9uZSBmYXR0YSA5NiAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c30iKQogICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9Q09NUExFVEUKICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKCkKICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2soZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy9maWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpCiAgICAgICAgICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksICJZZXMiKSAKICAgICAgICAgICAgICAgICAgICAgICAgLy92YWxpZGF0aW9uUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykKICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKICAgICAgICAgICAgICAgICAgICAgICAgbWkgPSAoTXV0YWJsZUlzc3VlKSBsaW5rZWRJc3N1ZQoKICAgICAgICAgICAgICAgICAgICAgICAgLy9maWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICAgICAgICAgIC8vbG9nLndhcm4gImZpZWxkQ29uZmlnOiAiICsgZmllbGRDb25maWcKICAgICAgICAgICAgICAgICAgICAgICAgLy9jZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy9hdXRvbWF0aWNhbGx5Q2xvc2VkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoKICAgICAgICAgICAgICAgICAgICAgICAgLy9Db21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgLy9sb2cud2FybiAiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGEiCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJUcmFuc2F6aW9uZSBmYXR0YSAxMjQgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSwgJHtsaW5rZWRJc3N1ZS5zdGF0dXN9IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJDb3VsZCBub3QgdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmVycm9yQ29sbGVjdGlvbn0iKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfWVsc2UgaWYgKHRyYW5zaXRpb25JZD09Q09NUExFVEUpewogICAgICAgICAgICAgICAgZGVmIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKCkKICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGggewogICAgICAgICAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayhmYWxzZSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSkKICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgIC8vaXNzdWVJbnB1dFBhcmFtZXRlcnMuYWRkQ3VzdG9tRmllbGRWYWx1ZShmaWVsZENvbmZpZy5nZXRJZCgpLCAiWWVzIikgCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKQogICAgICAgICAgICAgICAgZGVmIG1pID0gKE11dGFibGVJc3N1ZSkgbGlua2VkSXNzdWUKCiAgICAgICAgICAgICAgICBkZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGxpbmtlZElzc3VlKQogICAgICAgICAgICAgICAgbG9nLndhcm4gImZpZWxkQ29uZmlnOiAiICsgZmllbGRDb25maWcKICAgICAgICAgICAgICAgIGRlZiBjZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgIGF1dG9tYXRpY2FsbHlDbG9zZWQudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpCgogICAgICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpOwogICAgICAgICAgICAgICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgIGxvZy53YXJuICJVcGRhdGVkIGN1c3RvbWZpZWxkIC0gaXNzdWUgbGlua2F0YSIKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy9kZWYgdmFsaWRhdGlvblJlc3VsdCA9IGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpCiAgICAgICAgICAgICAgICBpZiAoaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuaXNWYWxpZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgdHJhbnNpdGlvbgogICAgICAgICAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpKQogICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIlRyYW5zYXppb25lIGZhdHRhIDE2MSAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c30iKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIkNvdWxkIG5vdCB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuZXJyb3JDb2xsZWN0aW9ufSIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICBMaXN0PElzc3VlTGluaz4gYWxsT3V0SXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldE91dHdhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKQogICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsT3V0SXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHsKICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpOwoKICAgICAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgIGxvZy53YXJuICJJc3N1ZSBjb24gcmVsYXRlc091dElzc3VlTGluayIKICAgICAgICAgICAgLypFc2VndWlyZSB0cmFuc2F6aW9uZSBkaSBzdGF0byBjb24gT1BBQV9BVVRPTUFUSUNBTExZX0NMT1NFRD1ZZXMgZGVsbGEgZGVzdGluYXRpb25Jc3N1ZSovCiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZSA9IGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpCiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZVN0YXR1cyA9IGxpbmtlZElzc3VlLmdldFN0YXR1cygpCiAgICAgICAgICAgIGRlZiB0cmFuc2l0aW9uSWQKICAgICAgICAgICAgbG9nLndhcm4gImxpbmtlZElzc3VlOiAiICsgbGlua2VkSXNzdWUKICAgICAgICAgICAgbG9nLndhcm4gImxpbmtlZElzc3VlU3RhdHVzLm5hbWU6ICIgKyBsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lCiAgICAgICAgICAgIGlmKGxpbmtlZElzc3VlU3RhdHVzLm5hbWUgPT0gIkNvbmZpcm1lZCBhbmQgUGxhbm5lZCIpewogICAgICAgICAgICAgICAgdHJhbnNpdGlvbklkPVNUQVJUX1BST0dSRVNTCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYobGlua2VkSXNzdWVTdGF0dXMubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5pblByb2dyZXNzJ10udG9TdHJpbmcoKSl7CiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9Q09NUExFVEUKICAgICAgICAgICAgfQogICAgICAgICAgICBsb2cud2FybiAidHJhbnNpdGlvbklkOiAiICsgdHJhbnNpdGlvbklkCiAgICAgICAgICAgIGlmKHRyYW5zaXRpb25JZD09U1RBUlRfUFJPR1JFU1MpewogICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKQogICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7CiAgICAgICAgICAgICAgICAgICAgc2V0U2tpcFNjcmVlbkNoZWNrKGZhbHNlKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy9kZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKQogICAgICAgICAgICAgICAgLy9Db21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gIlllcyIgfQogICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksICJZZXMiKSAKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpCiAgICAgICAgICAgICAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBsaW5rZWRJc3N1ZQoKICAgICAgICAgICAgICAgIGRlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICBsb2cud2FybiAiZmllbGRDb25maWc6ICIgKyBmaWVsZENvbmZpZwogICAgICAgICAgICAgICAgZGVmIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gIlllcyIgfQogICAgICAgICAgICAgICAgYXV0b21hdGljYWxseUNsb3NlZC51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSkKCiAgICAgICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7CiAgICAgICAgICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGxpbmtlZElzc3VlKQogICAgICAgICAgICAgICAgbG9nLndhcm4gIlVwZGF0ZWQgY3VzdG9tZmllbGQgLSBpc3N1ZSBsaW5rYXRhIgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvL2RlZiB2YWxpZGF0aW9uUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykKICAgICAgICAgICAgICAgIGxvZy53YXJuICJpc3N1ZUlucHV0UGFyYW1ldGVyczogIiArIGlzc3VlSW5wdXRQYXJhbWV0ZXJzCiAgICAgICAgICAgICAgICBpZiAoaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuaXNWYWxpZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgdHJhbnNpdGlvbgogICAgICAgICAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpKQogICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIlRyYW5zYXppb25lIGZhdHRhIDIxOCAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c30iKQogICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9Q09NUExFVEUKICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKCkKICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2soZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy9maWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpCiAgICAgICAgICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksICJZZXMiKSAKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpCiAgICAgICAgICAgICAgICAgICAgICAgIG1pID0gKE11dGFibGVJc3N1ZSkgbGlua2VkSXNzdWUKCiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4gImZpZWxkQ29uZmlnOiAiICsgZmllbGRDb25maWcKICAgICAgICAgICAgICAgICAgICAgICAgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9tYXRpY2FsbHlDbG9zZWQudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpCgogICAgICAgICAgICAgICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuICJVcGRhdGVkIGN1c3RvbWZpZWxkIC0gaXNzdWUgbGlua2F0YSIKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vdmFsaWRhdGlvblJlc3VsdCA9IGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJUcmFuc2F6aW9uZSBmYXR0YSAyNDggJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSwgJHtsaW5rZWRJc3N1ZS5zdGF0dXN9IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJDb3VsZCBub3QgdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmVycm9yQ29sbGVjdGlvbn0iKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICBsb2cud2FybiAiaXNzdWUgZGEgY29tcGxldGFyZSIKICAgICAgICAgICAgICAgIGRlZiBpc3N1ZUlucHV0UGFyYW1ldGVycyA9IGlzc3VlU2VydmljZS5uZXdJc3N1ZUlucHV0UGFyYW1ldGVycygpCiAgICAgICAgICAgICAgICBpc3N1ZUlucHV0UGFyYW1ldGVycy53aXRoIHsKICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2soZmFsc2UpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvL2RlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpCiAgICAgICAgICAgICAgICAvL0NvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICAvL2lzc3VlSW5wdXRQYXJhbWV0ZXJzLmFkZEN1c3RvbUZpZWxkVmFsdWUoZmllbGRDb25maWcuZ2V0SWQoKSwgIlllcyIpIAogICAgICAgICAgICAgICAgLy9sb2cud2FybiAidmFsaWRhdGVSZXN1bHQiCiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlCgogICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgIGxvZy53YXJuICJmaWVsZENvbmZpZzogIiArIGZpZWxkQ29uZmlnCiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q2xvc2VkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoKICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTsKICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICBsb2cud2FybiAiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGEiCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgICAgICAgICAgZGVmIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpCiAgICAgICAgICAgICAgICAgICAgaWYgKCEgaXNzdWVSZXN1bHQuaXNWYWxpZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJGYWlsZWQgdG8gdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn0iKQogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiVHJhbnNhemlvbmUgZmF0dGEgMjg1ICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn0sICR7bGlua2VkSXNzdWUuc3RhdHVzfSIpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCn0=</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE"></arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue">50</arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_22693</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="8" name="To be Quoted">
      <meta name="jira.status.id">14331</meta>
      <actions>
<common-action id="741" />
        <action id="251" name="Richiedi Preventivo a Fornitore" view="fieldscreen">
          <meta name="opsbar-sequence">10</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">19913</meta>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">38c5effd94ec08c894a28a7995b3e38d8a3edc57</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIFJlcXVpcmVkIEZpZWxkcyAmJiBOdW1iZXIgb2YgdGlja2V0cyBpbiB0aGUgbGFzdCA2MCBkYXlz</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5iYy5pc3N1ZS5zZWFyY2guU2VhcmNoU2VydmljZVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS51c2VyLnV0aWwuVXNlclV0aWxcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEud2ViLmJlYW4uUGFnZXJGaWx0ZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuanFsLnBhcnNlci5KcWxRdWVyeVBhcnNlclxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbi8vSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy0yNzYxXCIpXG5cbmRlZiBlcnJvcnMgPSBmYWxzZVxuZGVmIHdhcm5pbmdzID0gZmFsc2VcblxuZGVmIHRyYW5zaXRpb25DaGVjayA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY2hlY2tBbmRDb25maXJtJ10udG9TdHJpbmcoKSlbMF1cbmRlZiByZXBNYXRlcmlhbHMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnF1b3RlTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBnZW5Gcm9tUmVwYWlyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEtUX0dFTkVSQVRFRF9GUk9NX1JFUEFJUlwiKVswXVxuZGVmIGluc3RhbGxhdGlvbiA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXNzZXQnXS50b1N0cmluZygpKVswXVxuXG5kZWYgZXJyb3JNYW5kYXRvcnlGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWRGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiB3YXJuaW5nRW1wdHlGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KClcblxuLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzXG5DbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7ICBcbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG5kZWYgYXNzZXQgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGluc3RhbGxhdGlvbilcbmxvZy5kZWJ1ZyBcImFzc2V0OiBcIiArIGFzc2V0XG5hc3NldD1hc3NldC50b1N0cmluZygpXG5kZWYgYXNzZXRLZXkgPSBhc3NldC5zdWJzdHJpbmcoYXNzZXQubGFzdEluZGV4T2YoJygnKSsxLGFzc2V0Lmxhc3RJbmRleE9mKCcpJykpXG5kZWYgYXNzZXRPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oYXNzZXRLZXkpXG5cbi8vT1BBQV9SRVBMQUNFRF9NQVRFUklBTFNcbmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKSA9PSBcIlwiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSl7XG4gICAgbG9nLmRlYnVnIFwid2FybmluZ3MgdHJ1ZVwiXG4gICAgd2FybmluZ3MgPSB0cnVlXG4gICAgd2FybmluZ0VtcHR5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5xdW90ZU1hdGVyaWFscyddLnRvU3RyaW5nKCkpXG59ZWxzZXtcbiAgICAvL1ZlcmlmaWNvIGNoZSBjaSBzaWEgYWxtZW5vIHVuIGVsZW1lbnRvLCBkaSBxdWVsbGkgbGVnYXRpIG5lbCBjdXN0b21maWVsZCwgY29uIERFTEVURUQhPXRydWVcbiAgICBkZWYgYWxsRGVsZXRlZD10cnVlXG4gICAgZm9yKG9iaiBpbiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykpe1xuICAgICAgICBcbiAgICAgICAgb2JqPW9iai50b1N0cmluZygpXG4gICAgICAgIGRlZiBvYmpLZXkgPSBvYmouc3Vic3RyaW5nKG9iai5pbmRleE9mKCcoJykrMSxvYmouaW5kZXhPZignKScpKVxuICAgICAgICBkZWYgb2JqT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKG9iaktleSlcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG9iak9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5kZWxldGVkJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ob2JqT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmRlbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIGRlbGV0ZWQgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG4gICAgICAgICAgICBpZighZGVsZXRlZCl7XG4gICAgICAgICAgICAgICAgYWxsRGVsZXRlZD1mYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGFsbERlbGV0ZWQ9ZmFsc2VcbiAgICAgICAgfSAgICAgIFxuICAgICAgICAvL2xvZy5kZWJ1ZyBcIm9iajogXCIgKyBvYmpcbiAgICAgICAgLy9sb2cuZGVidWcgXCJhbGxEZWxldGVkOiBcIiArIGFsbERlbGV0ZWRcbiAgICB9XG4gICAgaWYoYWxsRGVsZXRlZCl7XG4gICAgICAgIHdhcm5pbmdzID0gdHJ1ZVxuICAgICAgICB3YXJuaW5nRW1wdHlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLnF1b3RlTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlcbiAgICB9XG59XG5cbmRlZiBqcWxRdWVyeVBhcnNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChKcWxRdWVyeVBhcnNlcilcbmRlZiBqcWxTZWFyY2ggPSBcInByb2plY3QgPSAnXCIgKyBpc3N1ZS5nZXRQcm9qZWN0T2JqZWN0KCkubmFtZSArIFwiJyBBTkQgXCIgK1xuICAgIFwiKGlzc3VldHlwZSBub3QgaW4gKFxcXCJOZXcgSW5zdGFsbGF0aW9uXFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0XFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1xcXCIpIE9SIGlzc3VldHlwZSBpbiAoXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1xcXCIpIEFORCBzdGF0dXMgPSBEb25lKSBcIiArXG4gICAgXCJBTkQgT1BfQVNTRVQgPSBcIiArIGFzc2V0S2V5ICsgXCIgQU5EICgoaXNzdWV0eXBlIG5vdCBpbiAoXFxcIk5ldyBJbnN0YWxsYXRpb25cXFwiLCBcXFwiUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXRcXFwiLCBcXFwiUGxhbm5lZCBNYWludGVuYW5jZSBUYXNrXFxcIikgQU5EIE9QX0VYRUNVVElPTl9EQVRFIElTIE5PVCBFTVBUWSBBTkQgT1BfRVhFQ1VUSU9OX0RBVEUgPj0gLTYwZCkgXCIgK1xuICAgIFwiT1IgKGlzc3VldHlwZSBpbiAoXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1xcXCIpIEFORCBpc3N1ZUZ1bmN0aW9uIGluIHN1YnRhc2tzT2YoXFxcIk9QX0VYRUNVVElPTl9EQVRFIElTIE5PVCBFTVBUWSBBTkQgT1BfRVhFQ1VUSU9OX0RBVEUgPj0gLTYwZFxcXCIpKSBPUiAoaXNzdWV0eXBlIG5vdCBpbiAoXFxcIk5ldyBJbnN0YWxsYXRpb25cXFwiLCBcXFwiUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXRcXFwiLCBcXFwiUGxhbm5lZCBNYWludGVuYW5jZSBUYXNrXFxcIikgQU5EIE9QX0VYRUNVVElPTl9EQVRFIElTIEVNUFRZIEFORCBPUF9QTEFOTkVEX0RBVEUgSVMgTk9UIEVNUFRZIEFORCBPUF9QTEFOTkVEX0RBVEUgPj0gLTYwZCkgXCIgK1xuICAgIFwiT1IgKGlzc3VldHlwZSBpbiAoXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1xcXCIpIEFORCBpc3N1ZUZ1bmN0aW9uIGluIHN1YnRhc2tzT2YoXFxcIk9QX0VYRUNVVElPTl9EQVRFIElTIEVNUFRZIEFORCBPUF9QTEFOTkVEX0RBVEUgSVMgTk9UIEVNUFRZIEFORCBPUF9QTEFOTkVEX0RBVEUgPj0gLTYwZFxcXCIpKSBPUiAoaXNzdWV0eXBlIG5vdCBpbiAoXFxcIk5ldyBJbnN0YWxsYXRpb25cXFwiLCBcXFwiUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXRcXFwiLCBcXFwiUGxhbm5lZCBNYWludGVuYW5jZSBUYXNrXFxcIikgQU5EIE9QX0VYRUNVVElPTl9EQVRFIElTIEVNUFRZIEFORCBPUF9QTEFOTkVEX0RBVEUgSVMgRU1QVFkgQU5EIE9QX1JFUVVFU1RFRF9EQVRFIElTIE5PVCBFTVBUWSBBTkQgT1BfUkVRVUVTVEVEX0RBVEUgPj0gLTYwZCkgXCIgK1xuICAgIFwiT1IgKGlzc3VldHlwZSBpbiAoXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1xcXCIpIEFORCBpc3N1ZUZ1bmN0aW9uIGluIHN1YnRhc2tzT2YoXFxcIk9QX0VYRUNVVElPTl9EQVRFIElTIEVNUFRZIEFORCBPUF9QTEFOTkVEX0RBVEUgSVMgRU1QVFkgQU5EIE9QX1JFUVVFU1RFRF9EQVRFIElTIE5PVCBFTVBUWSBBTkQgT1BfUkVRVUVTVEVEX0RBVEUgPj0gLTYwZFxcXCIpKSlcIlxuXG5cblxubG9nLmRlYnVnIGpxbFNlYXJjaFxuXG5kZWYgcXVlcnkgPSBqcWxRdWVyeVBhcnNlci5wYXJzZVF1ZXJ5KGpxbFNlYXJjaClcbmRlZiB1c2VyID0gQ29tcG9uZW50QWNjZXNzb3IuamlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dC5sb2dnZWRJblVzZXJcbmRlZiBzZWFyY2hTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KFNlYXJjaFNlcnZpY2UpXG5kZWYgc2VhcmNoID0gc2VhcmNoU2VydmljZS5zZWFyY2godXNlciwgcXVlcnksIFBhZ2VyRmlsdGVyLmdldFVubGltaXRlZEZpbHRlcigpKVxuZGVmIHRrdExpc3QgPSBcIlwiXG5kZWYgZGF0ZSA9IG5ldyBEYXRlKClcbmRlZiB3YXJuaW5nTnVtVGt0ID0gZmFsc2VcblxuaWYoc2VhcmNoLnJlc3VsdHMuc2l6ZSgpID49IDIpIHtcbiAgICB3YXJuaW5nTnVtVGt0ID0gdHJ1ZVxuICAgIHdhcm5pbmdzID0gdHJ1ZVxuICAgIC8vUHJlcGFybyBpbCB3YXJuaW5nIGRhIG1vc3RyYXJlIGFsbCd1dGVudGUgY29uIGlsIGRldHRhZ2xpbyBkZWxsZSBpc3N1ZSBnaVx1MDBlMCBlc2lzdGVudGlcbiAgICBmb3IoaSBpbiBzZWFyY2gucmVzdWx0cyl7XG4gICAgICAgIGlmKGkuc3RhdHVzLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMoXCJEb25lXCIpICYmIGkuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1wiKSl7XG4gICAgICAgICAgICBpZih0a3RMaXN0ICE9IFwiXCIpe1xuICAgICAgICAgICAgICAgIHRrdExpc3QgPSB0a3RMaXN0ICsgXCI7IFwiICsgaS5nZXRQYXJlbnRPYmplY3QoKS5rZXkudG9TdHJpbmcoKSArIFwiIChcIiArIGkuZ2V0UGFyZW50T2JqZWN0KCkuZ2V0SXNzdWVUeXBlKCkubmFtZSArIFwiKSBcIiArIGkuc3RhdHVzLm5hbWUudG9TdHJpbmcoKVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgdGt0TGlzdCA9IGkuZ2V0UGFyZW50T2JqZWN0KCkua2V5LnRvU3RyaW5nKCkgKyBcIiAoXCIgKyBpLmdldFBhcmVudE9iamVjdCgpLmdldElzc3VlVHlwZSgpLm5hbWUgKyBcIikgXCIgKyBpLnN0YXR1cy5uYW1lLnRvU3RyaW5nKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vdGt0TGlzdCA9IHRrdExpc3QgKyBcIlxcblwiICsgaS5nZXRQYXJlbnRPYmplY3QoKS5rZXkudG9TdHJpbmcoKSArIFwiIChcIiArIGkuZ2V0UGFyZW50T2JqZWN0KCkuZ2V0SXNzdWVUeXBlKCkubmFtZSArIFwiKSBcIiArIGkuc3RhdHVzLm5hbWUudG9TdHJpbmcoKVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGlmKGkuc3RhdHVzLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMoXCJDbG9zZWRcIikgJiYgIWkuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1wiKSl7XG4gICAgICAgICAgICAgICAgaWYodGt0TGlzdCAhPSBcIlwiKXtcbiAgICAgICAgICAgICAgICAgICAgdGt0TGlzdCA9IHRrdExpc3QgKyBcIjsgXCIgKyBpLmtleS50b1N0cmluZygpICsgXCIgKFwiICsgaS5nZXRJc3N1ZVR5cGUoKS5uYW1lICsgXCIpIFwiICsgaS5zdGF0dXMubmFtZS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIHRrdExpc3QgPSBpLmtleS50b1N0cmluZygpICsgXCIgKFwiICsgaS5nZXRJc3N1ZVR5cGUoKS5uYW1lICsgXCIpIFwiICsgaS5zdGF0dXMubmFtZS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vdGt0TGlzdCA9IHRrdExpc3QgKyBcIlxcblwiICsgaS5rZXkudG9TdHJpbmcoKSArIFwiIChcIiArIGkuZ2V0SXNzdWVUeXBlKCkubmFtZSArIFwiKSBcIiArIGkuc3RhdHVzLm5hbWUudG9TdHJpbmcoKVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgaWYodGt0TGlzdCAhPSBcIlwiKXtcbiAgICAgICAgICAgICAgICAgICAgdGt0TGlzdCA9IHRrdExpc3QgKyBcIjsgXCIgKyBpLmtleS50b1N0cmluZygpICsgXCIgKFwiICsgaS5nZXRJc3N1ZVR5cGUoKS5uYW1lICsgXCIpIFwiICsgaS5zdGF0dXMubmFtZS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIHRrdExpc3QgPSBpLmtleS50b1N0cmluZygpICsgXCIgKFwiICsgaS5nZXRJc3N1ZVR5cGUoKS5uYW1lICsgXCIpIFwiICsgaS5zdGF0dXMubmFtZS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vdGt0TGlzdCA9IHRrdExpc3QgKyBcIlxcblwiICsgaS5rZXkudG9TdHJpbmcoKSArIFwiIChcIiArIGkuZ2V0SXNzdWVUeXBlKCkubmFtZSArIFwiKSBcIiArIGkuc3RhdHVzLm5hbWUudG9TdHJpbmcoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGxvZy5kZWJ1ZyBcInRrdExpc3Q6IFwiICsgdGt0TGlzdFxufVxuXG5kZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG5sb2cuZGVidWcgXCJpc3N1ZTogXCIgKyBpc3N1ZVxubG9nLmRlYnVnIFwiaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShnZW5Gcm9tUmVwYWlyKTogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGdlbkZyb21SZXBhaXIpXG5pZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGdlbkZyb21SZXBhaXIpPT1udWxsIHx8ICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGdlbkZyb21SZXBhaXIpLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpKXtcbiAgICBpZiAoIWVycm9ycyAmJiAhd2FybmluZ3Mpe1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH1lbHNle1xuICAgICAgICBpZighZXJyb3JzICYmIHdhcm5pbmdzKXtcbiAgICAgICAgICAgIC8vU2UgY2kgc29ubyBzb2xvIHdhcm5pbmdzIHZlcmlmaWNvIHNlIGwndXRlbnRlIGhhIGdpXHUwMGUwIGRpY2hpYXJhdG8gZGkgdm9sZXIgcHJvc2VndWlyZSBjb211bnF1ZVxuICAgICAgICAgICAgLy8gLSB0cmFuc2l0aW9uIGZpZWxkIFwiT1BBQV9DSEVDS19BTkRfQ09ORklSTVwiPVwiWWVzXCJcbiAgICAgICAgICAgIC8vIC0gaW4gY2FzbyBjb250cmFyaW8gaW52aW8gaSB3YXJuaW5nIGEgRkVcblxuICAgICAgICAgICAgLy9sb2cuZGVidWcgXCJ0cmFuc2l0aW9uQ2hlY2s6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spXG4gICAgICAgICAgICAvL2xvZy5kZWJ1ZyBcInJlc3VsdDogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIilcbiAgICAgICAgICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuXHRcdFx0XHRkZWYgd0xpc3RDb25maXJtTXVsdGlwbGVUa3RzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYod2FybmluZ0VtcHR5RmllbGRzLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHkgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKFwiV1wiKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQoXCJDT05GSVJNX0VNUFRZX0ZJRUxEU1wiKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQobnVsbClcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKHdhcm5pbmdFbXB0eUZpZWxkcylcblxuICAgICAgICAgICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHkpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYod2FybmluZ051bVRrdCl7XG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybU11bHRpcGxlVGt0cy5hZGQoXCJXXCIpXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybU11bHRpcGxlVGt0cy5hZGQodGt0TGlzdClcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtTXVsdGlwbGVUa3RzLmFkZChcIk1PUkVfVEhBTl8yX1RLVFNfTEFTVF82MF9EQVlTXCIpXG4gICAgICAgICAgICAgICAgICAgIC8vd0xpc3RDb25maXJtTXVsdGlwbGVUa3RzLmFkZChudWxsKVxuXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1NdWx0aXBsZVRrdHMpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG91dHB1dC5hZGQod0xpc3QpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidGhyb3cgZXhjZXB0aW9uOiBcIiArIG91dHB1dC50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiV1wiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgICAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKFwiV1wiLCBvdXRwdXQudG9TdHJpbmcoKSkgICBcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICAgIGlmKGVycm9ycyAmJiAhd2FybmluZ3Mpe1xuICAgICAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICAgICAgICAgIGlmKGVycm9yTWFuZGF0b3J5RmllbGRzLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgIGRlZiBlTGlzdE1hbmRhdG9yeSA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChcIkVcIilcbiAgICAgICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoXCJNQU5EQVRPUllfRklFTERTXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKGVycm9yTWFuZGF0b3J5RmllbGRzKVxuICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdE1hbmRhdG9yeSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRocm93IGV4Y2VwdGlvbjogXCIgKyBvdXRwdXQudG9TdHJpbmcoKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJFXCIsIG91dHB1dC50b1N0cmluZygpKSAgIFxuICAgICAgICB9XG4gICAgICAgIGlmKGVycm9ycyAmJiB3YXJuaW5ncyl7XG4gICAgICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgZGVmIHdMaXN0Q29uZmlybU11bHRpcGxlVGt0cyA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihlcnJvck1hbmRhdG9yeUZpZWxkcy5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICBkZWYgZUxpc3RNYW5kYXRvcnkgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKFwiTUFOREFUT1JZX0ZJRUxEU1wiKVxuICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChudWxsKVxuICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChlcnJvck1hbmRhdG9yeUZpZWxkcylcbiAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RNYW5kYXRvcnkpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKHdhcm5pbmdFbXB0eUZpZWxkcy5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHkgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQoXCJXXCIpXG4gICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKFwiQ09ORklSTV9FTVBUWV9GSUVMRFNcIilcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQobnVsbClcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQod2FybmluZ0VtcHR5RmllbGRzKVxuXG4gICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZih3YXJuaW5nTnVtVGt0KXtcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1NdWx0aXBsZVRrdHMuYWRkKFwiV1wiKVxuICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybU11bHRpcGxlVGt0cy5hZGQodGt0TGlzdClcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1NdWx0aXBsZVRrdHMuYWRkKFwiTU9SRV9USEFOXzJfVEtUU19MQVNUXzYwX0RBWVNcIilcbiAgICAgICAgICAgICAgICAvL3dMaXN0Q29uZmlybU11bHRpcGxlVGt0cy5hZGQobnVsbClcblxuICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1NdWx0aXBsZVRrdHMpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwidGhyb3cgZXhjZXB0aW9uOiBcIiArIG91dHB1dC50b1N0cmluZygpXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJXRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJXRVwiLCBvdXRwdXQudG9TdHJpbmcoKSkgIFxuICAgICAgICB9XG4gICAgfVxufWVsc2V7XG4gICAgcmV0dXJuIHRydWVcbn1cbiIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZQppbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb24KaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3IKaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcgoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CmRlZiBDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRykKCklzc3VlIGlzc3VlID0gaXNzdWUKLy9Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7Ci8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoIkFBUy0yNzYxIikKCmRlZiBlcnJvcnMgPSBmYWxzZQpkZWYgd2FybmluZ3MgPSBmYWxzZQoKZGVmIHRyYW5zaXRpb25DaGVjayA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY2hlY2tBbmRDb25maXJtJ10udG9TdHJpbmcoKSlbMF0KZGVmIHJlcE1hdGVyaWFscyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YucXVvdGVNYXRlcmlhbHMnXS50b1N0cmluZygpKVswXQoKZGVmIGVycm9yTWFuZGF0b3J5RmllbGRzID0gbmV3IEFycmF5TGlzdCgpCmRlZiBlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWRGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIHdhcm5pbmdFbXB0eUZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKQoKLy9PUEFBX1JFUExBQ0VEX01BVEVSSUFMUwppZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscyk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykgPT0gIiIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpLnRvU3RyaW5nKCkuZXF1YWxzKCIiKSl7CiAgICBsb2cuZGVidWcgIndhcm5pbmdzIHRydWUiCiAgICB3YXJuaW5ncyA9IHRydWUKICAgIHdhcm5pbmdFbXB0eUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YucXVvdGVNYXRlcmlhbHMnXS50b1N0cmluZygpKQp9ZWxzZXsKICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50cwogICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGUiKTsgIAogICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSIpOwogICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTsKICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpOwoKICAgIC8vVmVyaWZpY28gY2hlIGNpIHNpYSBhbG1lbm8gdW4gZWxlbWVudG8sIGRpIHF1ZWxsaSBsZWdhdGkgbmVsIGN1c3RvbWZpZWxkLCBjb24gREVMRVRFRCE9dHJ1ZQogICAgZGVmIGFsbERlbGV0ZWQ9dHJ1ZQogICAgZm9yKG9iaiBpbiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykpewogICAgICAgIAogICAgICAgIG9iaj1vYmoudG9TdHJpbmcoKQogICAgICAgIGRlZiBvYmpLZXkgPSBvYmouc3Vic3RyaW5nKG9iai5pbmRleE9mKCcoJykrMSxvYmouaW5kZXhPZignKScpKQogICAgICAgIGRlZiBvYmpPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4ob2JqS2V5KQogICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihvYmpPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuZGVsZXRlZCddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ob2JqT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmRlbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkKICAgICAgICAgICAgZGVsZXRlZCA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkKICAgICAgICAgICAgaWYoIWRlbGV0ZWQpewogICAgICAgICAgICAgICAgYWxsRGVsZXRlZD1mYWxzZQogICAgICAgICAgICB9CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGFsbERlbGV0ZWQ9ZmFsc2UKICAgICAgICB9ICAgICAgCiAgICAgICAgLy9sb2cuZGVidWcgIm9iajogIiArIG9iagogICAgICAgIC8vbG9nLmRlYnVnICJhbGxEZWxldGVkOiAiICsgYWxsRGVsZXRlZAogICAgfQogICAgaWYoYWxsRGVsZXRlZCl7CiAgICAgICAgd2FybmluZ3MgPSB0cnVlCiAgICAgICAgd2FybmluZ0VtcHR5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5xdW90ZU1hdGVyaWFscyddLnRvU3RyaW5nKCkpCiAgICB9Cn0KCmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KCkKCmlmICghZXJyb3JzICYmICF3YXJuaW5ncyl7CiAgICByZXR1cm4gdHJ1ZQp9ZWxzZXsKICAgIGlmKCFlcnJvcnMgJiYgd2FybmluZ3MpewogICAgICAgIC8vU2UgY2kgc29ubyBzb2xvIHdhcm5pbmdzIHZlcmlmaWNvIHNlIGwndXRlbnRlIGhhIGdpw6AgZGljaGlhcmF0byBkaSB2b2xlciBwcm9zZWd1aXJlIGNvbXVucXVlCiAgICAgICAgLy8gLSB0cmFuc2l0aW9uIGZpZWxkICJPUEFBX0NIRUNLX0FORF9DT05GSVJNIj0iWWVzIgogICAgICAgIC8vIC0gaW4gY2FzbyBjb250cmFyaW8gaW52aW8gaSB3YXJuaW5nIGEgRkUKCiAgICAgICAgLy9sb2cuZGVidWcgInRyYW5zaXRpb25DaGVjazogIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKQogICAgICAgIC8vbG9nLmRlYnVnICJyZXN1bHQ6ICIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykudG9TdHJpbmcoKS5lcXVhbHMoIlllcyIpCiAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKSl7CiAgICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKQoKICAgICAgICAgICAgaWYod2FybmluZ0VtcHR5RmllbGRzLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgZGVmIHdMaXN0Q29uZmlybUVtcHR5ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQoIlciKQogICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKCJDT05GSVJNX0VNUFRZX0ZJRUxEUyIpCiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQobnVsbCkKICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZCh3YXJuaW5nRW1wdHlGaWVsZHMpCgogICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5KQogICAgICAgICAgICB9CgogICAgICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KQogICAgICAgICAgICBsb2cuZGVidWcgInRocm93IGV4Y2VwdGlvbjogIiArIG91dHB1dC50b1N0cmluZygpCiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3siVyI6IicgKyBvdXRwdXQudG9TdHJpbmcoKSArICcifScpCiAgICAgICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiVyIsIG91dHB1dC50b1N0cmluZygpKSAgIAogICAgICAgIH0KCiAgICB9CiAgICBpZihlcnJvcnMgJiYgIXdhcm5pbmdzKXsKICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KCkKCiAgICAgICAgaWYoZXJyb3JNYW5kYXRvcnlGaWVsZHMuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgIGRlZiBlTGlzdE1hbmRhdG9yeSA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoIkUiKQogICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoIk1BTkRBVE9SWV9GSUVMRFMiKQogICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQobnVsbCkKICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKGVycm9yTWFuZGF0b3J5RmllbGRzKQogICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RNYW5kYXRvcnkpCiAgICAgICAgfQoKICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KQogICAgICAgIGxvZy5kZWJ1ZyAidGhyb3cgZXhjZXB0aW9uOiAiICsgb3V0cHV0LnRvU3RyaW5nKCkKICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IkUiOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQogICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiRSIsIG91dHB1dC50b1N0cmluZygpKSAgIAogICAgfQogICAgaWYoZXJyb3JzICYmIHdhcm5pbmdzKXsKICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KCkKICAgICAgICBkZWYgd0xpc3QgPSBuZXcgQXJyYXlMaXN0KCkKICAgICAgICBpZihlcnJvck1hbmRhdG9yeUZpZWxkcy5zaXplKCkgPiAwKXsKICAgICAgICAgICAgZGVmIGVMaXN0TWFuZGF0b3J5ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZCgiRSIpCiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZCgiTUFOREFUT1JZX0ZJRUxEUyIpCiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChudWxsKQogICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoZXJyb3JNYW5kYXRvcnlGaWVsZHMpCiAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdE1hbmRhdG9yeSkKICAgICAgICB9CgogICAgICAgIGlmKHdhcm5pbmdFbXB0eUZpZWxkcy5zaXplKCkgPiAwKXsKICAgICAgICAgICAgZGVmIHdMaXN0Q29uZmlybUVtcHR5ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZCgiVyIpCiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZCgiQ09ORklSTV9FTVBUWV9GSUVMRFMiKQogICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQobnVsbCkKICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKHdhcm5pbmdFbXB0eUZpZWxkcykKCiAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eSkKICAgICAgICB9CgogICAgICAgIG91dHB1dC5hZGQoZUxpc3QpCiAgICAgICAgb3V0cHV0LmFkZCh3TGlzdCkKICAgICAgICBsb2cuZGVidWcgInRocm93IGV4Y2VwdGlvbjogIiArIG91dHB1dC50b1N0cmluZygpCiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigneyJXRSI6IicgKyBvdXRwdXQudG9TdHJpbmcoKSArICcifScpCiAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJXRSIsIG91dHB1dC50b1N0cmluZygpKSAgCiAgICB9Cn0K</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">c716134f-f724-43dd-894c-5175df3d3ed7</arg>
              <arg name="FIELD_NOTES">YCFgR2VuZXJhdGUgU04gZm9yIG9mZmVyIHRrdHM=</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuXG5kZWYgU04gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfU0FQX1NFUlZJQ0VfTk9USUZJQ0FUSU9OXCIpWzBdXG5kZWYgb2ZmZXIgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfT0ZGRVJfVEtUXCIpWzBdXG5kZWYgZ2VuZXJhdGVkRnJvbVJlcGFpciA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9US1RfR0VORVJBVEVEX0ZST01fUkVQQUlSXCIpWzBdXG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcblxuVVJMIHVybFxuSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvblxuXG5sb2cuZGVidWcgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShvZmZlcilcbmxvZy5kZWJ1ZyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG9mZmVyKS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKVxuaWYoKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZ2VuZXJhdGVkRnJvbVJlcGFpcikgPT0gbnVsbCB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGdlbmVyYXRlZEZyb21SZXBhaXIpLnRvU3RyaW5nKCkuZXF1YWxzKFwiTm9cIikpICYmIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUob2ZmZXIpLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpICYmIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoU04pID09IG51bGwgJiYgaXNzdWUuaXNzdWVUeXBlLm5hbWUgIT0gXCJQbGFubmVkIE1haW50ZW5hbmNlIFRpY2tldFwiKXtcbiAgICByZXF1ZXN0TWV0aG9kID0gXCJQT1NUXCI7XG5cbiAgICBkZWYgYm9keV9yZXEgPSBbXVxuICAgIGJvZHlfcmVxID0gW1xuICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleSxcbiAgICAgICAgXCJzdGF0dXNcIjogXCJPUEVcIlxuICAgIF0gXG5cbiAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS9hZnRlci9zYWxlcy9jcmVhdGUvc2VydmljZS9ub3RpZmljYXRpb25cIlxuXG4gICAgbG9nLmRlYnVnIFwiYmFzZVVSTCBTTjogXCIgKyBiYXNlVVJMXG4gICAgbG9nLmRlYnVnIFwiYm9keV9yZXEgU046IFwiICsgYm9keV9yZXFcbiAgICB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG4gICAgbG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG5cbiAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAxXCIpKXtcbiAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgXG4gICAgICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHRcbiAgICAgICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xuXG4gICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpXG4gICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgXG4gICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcbiAgICAgICAgbG9nLmRlYnVnIFwiZXJyb3JzOiBcIiArICBqc29uX29iamVjdC5lcnJvcnMudG9TdHJpbmcoKVxuXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtU0FQLVNOLVVQREFURVwiKVxuICAgICAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGpzb25fb2JqZWN0LmVycm9yc1swXSlcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcbiAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgIH1cbn1cbiAiLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">76c083d4-473d-4d2f-bb62-2d05ebae2bc9</arg>
              <arg name="FIELD_NOTES">YCFgT1AgRW1haWwgTm90aWZpY2F0aW9uOiBSRU1JTkRFUl9GT1JfU1VQUExJRVJfUVVPVEU=</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGluayBcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS51dGlsLkRlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlclxuaW1wb3J0IGphdmEuc3FsLlRpbWVzdGFtcFxuaW1wb3J0IGphdmEudGV4dC5TaW1wbGVEYXRlRm9ybWF0XG5pbXBvcnQgamF2YS50ZXh0LkRhdGVGb3JtYXRcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS51dGlsLklzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvblxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuZGVmIHJlcXVlc3RNZXRob2RcbmRlZiBiYXNlVVJMXG5cblVSTCB1cmxcbkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb25cbmRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGlzc3VlXG5kZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcblxuZGVmIHJlbWluZGVyRGF0ZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi53ZlJlbWluZGVyRm9yU1F1b3RlJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBnZW5lcmF0ZWRGcm9tUmVwYWlyID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1RLVF9HRU5FUkFURURfRlJPTV9SRVBBSVJcIilbMF1cblxuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShnZW5lcmF0ZWRGcm9tUmVwYWlyKSA9PSBudWxsIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZ2VuZXJhdGVkRnJvbVJlcGFpcikudG9TdHJpbmcoKS5lcXVhbHMoXCJOb1wiKSl7XG4gICAgcmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuICAgIGRlZiBib2R5X3JlcSA9IFtdXG5cbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgICAgIFwidGVtcGxhdGVOYW1lXCI6IHByb3BlcnRpZXNbJ3R0LnJlbWluZGVyVG9TJ10udG9TdHJpbmcoKSxcbiAgICAgICAgICAgIFwicGVjXCI6IGZhbHNlLFxuICAgICAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXlcbiAgICBdIFxuXG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvdHJhbnNhY3Rpb24vbWFpbC9zZW5kXCJcbiAgICB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG4gICAgbG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG5cbiAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpICYmICFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjA0XCIpKXtcbiAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcblxuICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG5cbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJTRU5ETUFJTFwiKVxuICAgICAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChqc29uX29iamVjdC5tZXNzYWdlKVxuICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgfVxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="9">
              <post-functions>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="fieldValue"></arg>
                  <arg name="preconditionMode-textValue">DISCARD</arg>
                  <arg name="fieldsList">customfield_23402</arg>
                </function>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="fieldValue">No</arg>
                  <arg name="preconditionMode-textValue">OR</arg>
                  <arg name="fieldsList">customfield_23402</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="append.value"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.value">%%CURRENT_DATETIME%%</arg>
                  <arg name="field.name">customfield_23603</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES">YCFgT1A6IFZhbG9yaXp6YXppb25lIGxpc3RpbmkgZm9ybml0b3Jl</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlCmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2UKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXIKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsCgpQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpCkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpCnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7Cglwcm9wZXJ0aWVzLmxvYWQoaXQpCn0KQ2F0ZWdvcnkgbG9nID0gQ2F0ZWdvcnkuZ2V0SW5zdGFuY2UoImNvbS5vbnJlc29sdmUuamlyYS5ncm9vdnkuUG9zdEZ1bmN0aW9uIikKbG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpCgpJc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7CkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTsKCklzc3VlSW5kZXhpbmdTZXJ2aWNlIAlpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSkKCmRlZiByZXF1ZXN0TWV0aG9kCmRlZiBiYXNlVVJMCgpsb2cuZGVidWcgIlZhbG9yaXp6YXppb25lIGxpc3RpbmkiCgovKiBSRVNUIEFQSSBwZXIgQ29udGFiaWxpenphemlvbmUgSW50ZXJ2ZW50byAqLwpyZXF1ZXN0TWV0aG9kID0gIkdFVCI7CgpiYXNlVVJMID0gImh0dHA6Ly8iICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyAiL29wL3Jlc3QvQUEvdGlja2V0L2lzc3VlS2V5LyIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArICIvY2xvc2U/cG9wdWxhdGVSYXRlcz1mYWxzZSZtYXRlcmlhbEF0dHJpYnV0ZT0iICsgcHJvcGVydGllc1snY2YucXVvdGVNYXRlcmlhbHMnXS50b1N0cmluZygpCmxvZy5kZWJ1ZyAiYmFzZVVybDogIiArIGJhc2VVUkwKCi8qRGVmaW5pcmUgcGFyYW1ldHJvIGRpIGlucHV0IHVuYXRhbnR1bT10cnVlfGZhbHNlIGluIGJhc2UgYWwgdmFsb3JlIGRlbGxhIHZhcmlhYmlsZSBib29sZWFuYSB1bmF0YW50dW0qLwpVUkwgdXJsID0gbmV3IFVSTChiYXNlVVJMKQpIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpOwpjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7CmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24vanNvbiIpOwpjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eSgiQWNjZXB0IiwgIiovKiIpOwpjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpOwpjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7CmNvbm5lY3Rpb24uY29ubmVjdCgpOwpsb2cuZGVidWcgIlJlc3BvbnNlQ29kZToiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKQpsb2cuZGVidWcgIlJlc3BvbnNlTWVzc2FnZToiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKQoKLy9Jc3N1ZUluZGV4aW5nU2VydmljZSBpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSkKLy9pc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGlzc3VlTWFuYWdlci5nZXRJc3N1ZU9iamVjdChpc3N1ZS5rZXkudG9TdHJpbmcoKSkpCgovL2RlZiB1bmFUYW50dW1SYXRlcyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoIk9QQUFfVU5BVEFOVFVNX1JBVEVTIilbMF0KLy9sb2cud2FybiAidW5hVGFudHVtUmF0ZXM6ICIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHVuYVRhbnR1bVJhdGVzKQoKZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKQpkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpCmRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KCkKCmlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscygiMjAwIikpewogICAgbG9nLmRlYnVnICJ1cmw6ICIgKyB1cmwKICAgIGxvZy5kZWJ1ZyAiUmVzcG9uc2VDb2RlOiIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpCiAgICBsb2cuZGVidWcgIlJlc3BvbnNlTWVzc2FnZToiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKQogICAgbG9nLmRlYnVnICJSZXNwb25zZTogIiArIGNvbm5lY3Rpb24KCiAgICBlTGlzdEVycm9ycy5hZGQoIkUiKQogICAgZUxpc3RFcnJvcnMuYWRkKCJPUC1US1QtQUNDT1VOVElORyIpCiAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyAiICIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpKQogICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncykKICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycykKCiAgICBvdXRwdXQuYWRkKGVMaXN0KQogICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiRSIsIG91dHB1dC50b1N0cmluZygpKQp9</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="disabled">true</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue">50</arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_22693</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="581" name="Converti in Manutenzione Riparativa">
          <meta name="opsbar-sequence">20</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_NOTES">YCFgQ2hhbmdlIHRvIE1haW50ZW5hbmNlIGlmIGlzc3VlIHR5cGUgPSBOZXcgSW5zdGFsbGF0aW9u</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgaXNzdWUuaXNzdWVUeXBlLm5hbWUgPT0gJ05ldyBJbnN0YWxsYXRpb24nfHx8</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="8">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">bee29a4ffd9e55a6f278af205f741799fc63bbef</arg>
                  <arg name="FIELD_NOTES">YCFgT1A6IENoYW5nZSBpc3N1ZSB0eXBlIGZyb20gTmV3IEluc3RhbGxhdGlvbiB0byBNYWludGVuYW5jZQ==</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3JcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaXNzdWV0eXBlLklzc3VlVHlwZVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG4vKiBEZWZpbmUgYSBMb2dnZXIgKi9cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5kZWYgY29uc3RhbnRzTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbnN0YW50c01hbmFnZXIoKVxuXG5Jc3N1ZVR5cGUgdGFyZ2V0SXNzdWVUeXBlID0gbnVsbFxuZGVmIGlzc3VlVHlwZVxuXG5sb2cuZGVidWcgXCJJc3N1ZVR5cGUgb2xkID0gXCIgKyBpc3N1ZS5pc3N1ZVR5cGUubmFtZVxubG9nLmRlYnVnIHByb3BlcnRpZXNbJ2l0Lm1haW50ZW5hbmNlJ10udG9TdHJpbmcoKVxuZGVmIGNvbGxlY3Rpb24gPSBjb25zdGFudHNNYW5hZ2VyLmdldEFsbElzc3VlVHlwZU9iamVjdHMoKVxuZGVmIGl0ZXJhdG9yID0gY29sbGVjdGlvbi5pdGVyYXRvcigpXG53aGlsZShpdGVyYXRvci5oYXNOZXh0KCkpe1xuXHRpc3N1ZVR5cGUgPSBpdGVyYXRvci5uZXh0KClcblx0aWYoaXNzdWVUeXBlLm5hbWUgPT0gKHByb3BlcnRpZXNbJ2l0Lm1haW50ZW5hbmNlJ10gPyBwcm9wZXJ0aWVzWydpdC5tYWludGVuYW5jZSddLnRvU3RyaW5nKCkgOiBcIk1haW50ZW5hbmNlIFRpY2tldFwiKSl7XG5cdFx0dGFyZ2V0SXNzdWVUeXBlID0gaXNzdWVUeXBlXG5cdH1cbn1cblxubG9nLmRlYnVnIHRhcmdldElzc3VlVHlwZS5uYW1lXG5pc3N1ZS5zZXRJc3N1ZVR5cGVPYmplY3QodGFyZ2V0SXNzdWVUeXBlKVxubG9nLmRlYnVnIFwiSXNzdWVUeXBlIG5ldyA9IFwiICsgaXNzdWUuaXNzdWVUeXBlLm5hbWUiLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3IKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaXNzdWV0eXBlLklzc3VlVHlwZQppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQoKLyogRGVmaW5lIGEgTG9nZ2VyICovCmRlZiBDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRykKCmRlZiBjb25zdGFudHNNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29uc3RhbnRzTWFuYWdlcigpCgpJc3N1ZSBpc3N1ZSA9IGlzc3VlICAvLyBUaGlzIHdoYXQgSSB3YXMgbG9va2luZyBmb3IgOi0pLiBBcyBzaW1wbGUgYXMgaXQgaXMsIGJ1dCBJIGRpZG4ndCBrbm93IHRoYXQuCgpJc3N1ZVR5cGUgdGFyZ2V0SXNzdWVUeXBlID0gbnVsbApkZWYgaXNzdWVUeXBlCgpsb2cuZGVidWcgIklzc3VlVHlwZSBvbGQgPSAiICsgaXNzdWUuaXNzdWVUeXBlLm5hbWUKbG9nLmRlYnVnIHByb3BlcnRpZXNbJ2l0Lm1haW50ZW5hbmNlJ10udG9TdHJpbmcoKQpkZWYgY29sbGVjdGlvbiA9IGNvbnN0YW50c01hbmFnZXIuZ2V0QWxsSXNzdWVUeXBlT2JqZWN0cygpCmRlZiBpdGVyYXRvciA9IGNvbGxlY3Rpb24uaXRlcmF0b3IoKQp3aGlsZShpdGVyYXRvci5oYXNOZXh0KCkpewoJaXNzdWVUeXBlID0gaXRlcmF0b3IubmV4dCgpCglpZihpc3N1ZVR5cGUubmFtZSA9PSAocHJvcGVydGllc1snaXQubWFpbnRlbmFuY2UnXSA/IHByb3BlcnRpZXNbJ2l0Lm1haW50ZW5hbmNlJ10udG9TdHJpbmcoKSA6ICJNYWludGVuYW5jZSBUaWNrZXQiKSl7CgkJdGFyZ2V0SXNzdWVUeXBlID0gaXNzdWVUeXBlCgl9Cn0KCmxvZy5kZWJ1ZyB0YXJnZXRJc3N1ZVR5cGUubmFtZQppc3N1ZS5zZXRJc3N1ZVR5cGVPYmplY3QodGFyZ2V0SXNzdWVUeXBlKQpsb2cuZGVidWcgIklzc3VlVHlwZSBuZXcgPSAiICsgaXNzdWUuaXNzdWVUeXBlLm5hbWU=</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE"></arg>
                </function>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.15.1</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="fieldValue">Maintenance Ticket</arg>
                  <arg name="preconditionMode-textValue">DISCARD</arg>
                  <arg name="fieldsList">issuetype</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="append.value"></arg>
                  <arg name="maxAllowed-integerValue">50</arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.value">Maintenance Ticket</arg>
                  <arg name="field.name">customfield_22716</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="append.value"></arg>
                  <arg name="maxAllowed-integerValue">50</arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.value">Maintenance Ticket</arg>
                  <arg name="field.name">summary</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="591" name="Converti in Nuova Installazione">
          <meta name="opsbar-sequence">10</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">58d7281a-ca18-4098-990f-76fde0470684</arg>
                <arg name="FIELD_NOTES">YCFgQ2hhbmdlIHRvIE5ldyBJbnN0YWxsYXRpb24gaWYgaXNzdWUgdHlwZSA9IE1haW50ZW5hbmNl</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnTWFpbnRlbmFuY2UgVGlja2V0JyIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="8">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">7918c0e3-5dc6-49c1-b2dc-dac5aa760ae0</arg>
                  <arg name="FIELD_NOTES">YCFgT1A6IENoYW5nZSBpc3N1ZSB0eXBlIGZyb20gTWFpbnRlbmFuY2UgdG8gTmV3IEluc3RhbGxhdGlvbg==</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3JcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaXNzdWV0eXBlLklzc3VlVHlwZVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG4vKiBEZWZpbmUgYSBMb2dnZXIgKi9cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5kZWYgY29uc3RhbnRzTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbnN0YW50c01hbmFnZXIoKVxuXG5Jc3N1ZVR5cGUgdGFyZ2V0SXNzdWVUeXBlID0gbnVsbFxuZGVmIGlzc3VlVHlwZVxuXG5sb2cuZGVidWcgXCJJc3N1ZVR5cGUgb2xkID0gXCIgKyBpc3N1ZS5pc3N1ZVR5cGUubmFtZVxuXG5kZWYgY29sbGVjdGlvbiA9IGNvbnN0YW50c01hbmFnZXIuZ2V0QWxsSXNzdWVUeXBlT2JqZWN0cygpXG5kZWYgaXRlcmF0b3IgPSBjb2xsZWN0aW9uLml0ZXJhdG9yKClcbndoaWxlKGl0ZXJhdG9yLmhhc05leHQoKSl7XG5cdGlzc3VlVHlwZSA9IGl0ZXJhdG9yLm5leHQoKVxuXHRpZihpc3N1ZVR5cGUubmFtZSA9PSBwcm9wZXJ0aWVzWydpdC5uZXdJbnN0YWxsYXRpb24nXS50b1N0cmluZygpKXtcblx0XHR0YXJnZXRJc3N1ZVR5cGUgPSBpc3N1ZVR5cGVcblx0fVxufVxuXG5sb2cuZGVidWcgdGFyZ2V0SXNzdWVUeXBlLm5hbWVcbmlzc3VlLnNldElzc3VlVHlwZU9iamVjdCh0YXJnZXRJc3N1ZVR5cGUpXG5sb2cuZGVidWcgXCJJc3N1ZVR5cGUgbmV3ID0gXCIgKyBpc3N1ZS5pc3N1ZVR5cGUubmFtZSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3IKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaXNzdWV0eXBlLklzc3VlVHlwZQppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQoKLyogRGVmaW5lIGEgTG9nZ2VyICovCmRlZiBDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRykKCmRlZiBjb25zdGFudHNNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29uc3RhbnRzTWFuYWdlcigpCgpJc3N1ZSBpc3N1ZSA9IGlzc3VlICAvLyBUaGlzIHdoYXQgSSB3YXMgbG9va2luZyBmb3IgOi0pLiBBcyBzaW1wbGUgYXMgaXQgaXMsIGJ1dCBJIGRpZG4ndCBrbm93IHRoYXQuCgpJc3N1ZVR5cGUgdGFyZ2V0SXNzdWVUeXBlID0gbnVsbApkZWYgaXNzdWVUeXBlCgpsb2cuZGVidWcgIklzc3VlVHlwZSBvbGQgPSAiICsgaXNzdWUuaXNzdWVUeXBlLm5hbWUKCmRlZiBjb2xsZWN0aW9uID0gY29uc3RhbnRzTWFuYWdlci5nZXRBbGxJc3N1ZVR5cGVPYmplY3RzKCkKZGVmIGl0ZXJhdG9yID0gY29sbGVjdGlvbi5pdGVyYXRvcigpCndoaWxlKGl0ZXJhdG9yLmhhc05leHQoKSl7Cglpc3N1ZVR5cGUgPSBpdGVyYXRvci5uZXh0KCkKCWlmKGlzc3VlVHlwZS5uYW1lID09IHByb3BlcnRpZXNbJ2l0Lm5ld0luc3RhbGxhdGlvbiddLnRvU3RyaW5nKCkpewoJCXRhcmdldElzc3VlVHlwZSA9IGlzc3VlVHlwZQoJfQp9Cgpsb2cuZGVidWcgdGFyZ2V0SXNzdWVUeXBlLm5hbWUKaXNzdWUuc2V0SXNzdWVUeXBlT2JqZWN0KHRhcmdldElzc3VlVHlwZSkKbG9nLmRlYnVnICJJc3N1ZVR5cGUgbmV3ID0gIiArIGlzc3VlLmlzc3VlVHlwZS5uYW1l</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE"></arg>
                </function>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.15.1</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="fieldValue">New Installation</arg>
                  <arg name="preconditionMode-textValue">DISCARD</arg>
                  <arg name="fieldsList">issuetype</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="append.value"></arg>
                  <arg name="maxAllowed-integerValue">50</arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.value">New Installation Ticket</arg>
                  <arg name="field.name">summary</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="append.value"></arg>
                  <arg name="maxAllowed-integerValue">50</arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.value">New Installation Ticket</arg>
                  <arg name="field.name">customfield_22716</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="601" name="Clona Tkt" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">20401</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">c659704c-9678-4844-9a05-6f3497e391e7</arg>
                <arg name="FIELD_NOTES">YCFgRW5hYmxlZCBvbmx5IGZvciBSZXBhaXIgYW5kIE5ldyBJbnN0YWxsYXRpb24=</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnTWFpbnRlbmFuY2UgVGlja2V0JyB8fCAoaXNzdWUuaXNzdWVUeXBlLm5hbWUgPT0gJ05ldyBJbnN0YWxsYXRpb24nICYmIGNmVmFsdWVzWydPUF9BU1NFVCddICE9IG51bGwpIiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="8">
              <post-functions>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="fieldValue">New Installation</arg>
                  <arg name="preconditionMode-textValue">DISCARD</arg>
                  <arg name="fieldsList">issuetype</arg>
                </function>
                <function type="class">
                  <arg name="field.existingAttachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="targetIssueTypeDefinedByCfSelection"></arg>
                  <arg name="issueTypeId">12301</arg>
                  <arg name="scopeType">ISSUE_LINKING</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="field.attachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="targetIssueType">SELECTED_ISSUE_TYPE</arg>
                  <arg name="scopeSource-jql"></arg>
                  <arg name="createIssueAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.copyTransitionComment">false</arg>
                  <arg name="targetProjectType">SAME</arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="transitionAttachmentsOperation">copy</arg>
                  <arg name="field.issueAssignTo">ASSIGN_TO_UNASSIGNED</arg>
                  <arg name="targetProjectSelectedCustomField"></arg>
                  <arg name="destination-scopeTarget">LINK_END</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiescreatelinkedissue-function</arg>
                  <arg name="scopeDestination-linkEnd">10003:OUTWARD</arg>
                  <arg name="field.enablingCustomFieldId"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="subFunctions">[{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_21909&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21909&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22600&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22600&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22822&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22822&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22601&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22601&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22603&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22603&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22663&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22663&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22634&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22634&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22651&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22651&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22700&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22700&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22606&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22606&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22607&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22607&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22629&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22629&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22652&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22652&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;description&quot;,&quot;destinationFieldId&quot;:&quot;description&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22627&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22627&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22620&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22620&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22668&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22668&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23602&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23203&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22814&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22814&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23237&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23237&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;issuekey&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23243&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;YES&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23238&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22702&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22702&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22703&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22703&quot;}}]</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.createlinkedissue.CreateLinkedIssueFunction</arg>
                  <arg name="projectId">11228</arg>
                </function>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="fieldValue">Maintenance Ticket</arg>
                  <arg name="preconditionMode-textValue">DISCARD</arg>
                  <arg name="fieldsList">issuetype</arg>
                </function>
                <function type="class">
                  <arg name="field.existingAttachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="targetIssueTypeDefinedByCfSelection"></arg>
                  <arg name="issueTypeId">13001</arg>
                  <arg name="scopeType">ISSUE_LINKING</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="field.attachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="targetIssueType">SELECTED_ISSUE_TYPE</arg>
                  <arg name="scopeSource-jql"></arg>
                  <arg name="createIssueAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.copyTransitionComment">false</arg>
                  <arg name="targetProjectType">SAME</arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="transitionAttachmentsOperation">copy</arg>
                  <arg name="field.issueAssignTo">ASSIGN_TO_UNASSIGNED</arg>
                  <arg name="targetProjectSelectedCustomField"></arg>
                  <arg name="destination-scopeTarget">LINK_END</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiescreatelinkedissue-function</arg>
                  <arg name="scopeDestination-linkEnd">10003:OUTWARD</arg>
                  <arg name="field.enablingCustomFieldId"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="subFunctions">[{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_21909&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21909&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22600&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22600&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22822&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22822&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22601&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22601&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22603&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22603&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22663&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22663&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22634&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22634&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22651&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22651&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22700&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22700&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22606&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22606&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22607&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22607&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22629&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22629&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22652&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22652&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;description&quot;,&quot;destinationFieldId&quot;:&quot;description&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22627&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22627&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22620&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22620&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22668&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22668&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23602&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23203&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22814&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22814&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23237&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23237&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;issuekey&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23243&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;YES&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23238&quot;}}]</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.createlinkedissue.CreateLinkedIssueFunction</arg>
                  <arg name="projectId">11228</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_23602</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="761" name="In Preventivazione - senza notifiche" view="fieldscreen">
          <meta name="opsbar-sequence">10</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">19913</meta>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">38c5effd94ec08c894a28a7995b3e38d8a3edc57</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIFJlcXVpcmVkIEZpZWxkcyAmJiBOdW1iZXIgb2YgdGlja2V0cyBpbiB0aGUgbGFzdCA2MCBkYXlz</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5iYy5pc3N1ZS5zZWFyY2guU2VhcmNoU2VydmljZVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS51c2VyLnV0aWwuVXNlclV0aWxcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEud2ViLmJlYW4uUGFnZXJGaWx0ZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuanFsLnBhcnNlci5KcWxRdWVyeVBhcnNlclxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbi8vSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy0yNzYxXCIpXG5cbmRlZiBlcnJvcnMgPSBmYWxzZVxuZGVmIHdhcm5pbmdzID0gZmFsc2VcblxuZGVmIHRyYW5zaXRpb25DaGVjayA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY2hlY2tBbmRDb25maXJtJ10udG9TdHJpbmcoKSlbMF1cbmRlZiByZXBNYXRlcmlhbHMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnF1b3RlTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBnZW5Gcm9tUmVwYWlyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEtUX0dFTkVSQVRFRF9GUk9NX1JFUEFJUlwiKVswXVxuZGVmIGluc3RhbGxhdGlvbiA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXNzZXQnXS50b1N0cmluZygpKVswXVxuXG5kZWYgZXJyb3JNYW5kYXRvcnlGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWRGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiB3YXJuaW5nRW1wdHlGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KClcblxuLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzXG5DbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7ICBcbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG5kZWYgYXNzZXQgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGluc3RhbGxhdGlvbilcbmxvZy5kZWJ1ZyBcImFzc2V0OiBcIiArIGFzc2V0XG5hc3NldD1hc3NldC50b1N0cmluZygpXG5kZWYgYXNzZXRLZXkgPSBhc3NldC5zdWJzdHJpbmcoYXNzZXQubGFzdEluZGV4T2YoJygnKSsxLGFzc2V0Lmxhc3RJbmRleE9mKCcpJykpXG5kZWYgYXNzZXRPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oYXNzZXRLZXkpXG5cbi8vT1BBQV9SRVBMQUNFRF9NQVRFUklBTFNcbmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKSA9PSBcIlwiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSl7XG4gICAgbG9nLmRlYnVnIFwid2FybmluZ3MgdHJ1ZVwiXG4gICAgd2FybmluZ3MgPSB0cnVlXG4gICAgd2FybmluZ0VtcHR5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5xdW90ZU1hdGVyaWFscyddLnRvU3RyaW5nKCkpXG59ZWxzZXtcbiAgICAvL1ZlcmlmaWNvIGNoZSBjaSBzaWEgYWxtZW5vIHVuIGVsZW1lbnRvLCBkaSBxdWVsbGkgbGVnYXRpIG5lbCBjdXN0b21maWVsZCwgY29uIERFTEVURUQhPXRydWVcbiAgICBkZWYgYWxsRGVsZXRlZD10cnVlXG4gICAgZm9yKG9iaiBpbiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykpe1xuICAgICAgICBcbiAgICAgICAgb2JqPW9iai50b1N0cmluZygpXG4gICAgICAgIGRlZiBvYmpLZXkgPSBvYmouc3Vic3RyaW5nKG9iai5pbmRleE9mKCcoJykrMSxvYmouaW5kZXhPZignKScpKVxuICAgICAgICBkZWYgb2JqT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKG9iaktleSlcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG9iak9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5kZWxldGVkJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ob2JqT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmRlbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIGRlbGV0ZWQgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG4gICAgICAgICAgICBpZighZGVsZXRlZCl7XG4gICAgICAgICAgICAgICAgYWxsRGVsZXRlZD1mYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGFsbERlbGV0ZWQ9ZmFsc2VcbiAgICAgICAgfSAgICAgIFxuICAgICAgICAvL2xvZy5kZWJ1ZyBcIm9iajogXCIgKyBvYmpcbiAgICAgICAgLy9sb2cuZGVidWcgXCJhbGxEZWxldGVkOiBcIiArIGFsbERlbGV0ZWRcbiAgICB9XG4gICAgaWYoYWxsRGVsZXRlZCl7XG4gICAgICAgIHdhcm5pbmdzID0gdHJ1ZVxuICAgICAgICB3YXJuaW5nRW1wdHlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLnF1b3RlTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlcbiAgICB9XG59XG5cbmRlZiBqcWxRdWVyeVBhcnNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChKcWxRdWVyeVBhcnNlcilcbmRlZiBqcWxTZWFyY2ggPSBcInByb2plY3QgPSAnXCIgKyBpc3N1ZS5nZXRQcm9qZWN0T2JqZWN0KCkubmFtZSArIFwiJyBBTkQgXCIgK1xuICAgIFwiKGlzc3VldHlwZSBub3QgaW4gKFxcXCJOZXcgSW5zdGFsbGF0aW9uXFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0XFxcIiwgXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1xcXCIpIE9SIGlzc3VldHlwZSBpbiAoXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1xcXCIpIEFORCBzdGF0dXMgPSBEb25lKSBcIiArXG4gICAgXCJBTkQgT1BfQVNTRVQgPSBcIiArIGFzc2V0S2V5ICsgXCIgQU5EICgoaXNzdWV0eXBlIG5vdCBpbiAoXFxcIk5ldyBJbnN0YWxsYXRpb25cXFwiLCBcXFwiUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXRcXFwiLCBcXFwiUGxhbm5lZCBNYWludGVuYW5jZSBUYXNrXFxcIikgQU5EIE9QX0VYRUNVVElPTl9EQVRFIElTIE5PVCBFTVBUWSBBTkQgT1BfRVhFQ1VUSU9OX0RBVEUgPj0gLTYwZCkgXCIgK1xuICAgIFwiT1IgKGlzc3VldHlwZSBpbiAoXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1xcXCIpIEFORCBpc3N1ZUZ1bmN0aW9uIGluIHN1YnRhc2tzT2YoXFxcIk9QX0VYRUNVVElPTl9EQVRFIElTIE5PVCBFTVBUWSBBTkQgT1BfRVhFQ1VUSU9OX0RBVEUgPj0gLTYwZFxcXCIpKSBPUiAoaXNzdWV0eXBlIG5vdCBpbiAoXFxcIk5ldyBJbnN0YWxsYXRpb25cXFwiLCBcXFwiUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXRcXFwiLCBcXFwiUGxhbm5lZCBNYWludGVuYW5jZSBUYXNrXFxcIikgQU5EIE9QX0VYRUNVVElPTl9EQVRFIElTIEVNUFRZIEFORCBPUF9QTEFOTkVEX0RBVEUgSVMgTk9UIEVNUFRZIEFORCBPUF9QTEFOTkVEX0RBVEUgPj0gLTYwZCkgXCIgK1xuICAgIFwiT1IgKGlzc3VldHlwZSBpbiAoXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1xcXCIpIEFORCBpc3N1ZUZ1bmN0aW9uIGluIHN1YnRhc2tzT2YoXFxcIk9QX0VYRUNVVElPTl9EQVRFIElTIEVNUFRZIEFORCBPUF9QTEFOTkVEX0RBVEUgSVMgTk9UIEVNUFRZIEFORCBPUF9QTEFOTkVEX0RBVEUgPj0gLTYwZFxcXCIpKSBPUiAoaXNzdWV0eXBlIG5vdCBpbiAoXFxcIk5ldyBJbnN0YWxsYXRpb25cXFwiLCBcXFwiUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXRcXFwiLCBcXFwiUGxhbm5lZCBNYWludGVuYW5jZSBUYXNrXFxcIikgQU5EIE9QX0VYRUNVVElPTl9EQVRFIElTIEVNUFRZIEFORCBPUF9QTEFOTkVEX0RBVEUgSVMgRU1QVFkgQU5EIE9QX1JFUVVFU1RFRF9EQVRFIElTIE5PVCBFTVBUWSBBTkQgT1BfUkVRVUVTVEVEX0RBVEUgPj0gLTYwZCkgXCIgK1xuICAgIFwiT1IgKGlzc3VldHlwZSBpbiAoXFxcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1xcXCIpIEFORCBpc3N1ZUZ1bmN0aW9uIGluIHN1YnRhc2tzT2YoXFxcIk9QX0VYRUNVVElPTl9EQVRFIElTIEVNUFRZIEFORCBPUF9QTEFOTkVEX0RBVEUgSVMgRU1QVFkgQU5EIE9QX1JFUVVFU1RFRF9EQVRFIElTIE5PVCBFTVBUWSBBTkQgT1BfUkVRVUVTVEVEX0RBVEUgPj0gLTYwZFxcXCIpKSlcIlxuXG5cblxubG9nLmRlYnVnIGpxbFNlYXJjaFxuXG5kZWYgcXVlcnkgPSBqcWxRdWVyeVBhcnNlci5wYXJzZVF1ZXJ5KGpxbFNlYXJjaClcbmRlZiB1c2VyID0gQ29tcG9uZW50QWNjZXNzb3IuamlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dC5sb2dnZWRJblVzZXJcbmRlZiBzZWFyY2hTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KFNlYXJjaFNlcnZpY2UpXG5kZWYgc2VhcmNoID0gc2VhcmNoU2VydmljZS5zZWFyY2godXNlciwgcXVlcnksIFBhZ2VyRmlsdGVyLmdldFVubGltaXRlZEZpbHRlcigpKVxuZGVmIHRrdExpc3QgPSBcIlwiXG5kZWYgZGF0ZSA9IG5ldyBEYXRlKClcbmRlZiB3YXJuaW5nTnVtVGt0ID0gZmFsc2VcblxuaWYoc2VhcmNoLnJlc3VsdHMuc2l6ZSgpID49IDIpIHtcbiAgICB3YXJuaW5nTnVtVGt0ID0gdHJ1ZVxuICAgIHdhcm5pbmdzID0gdHJ1ZVxuICAgIC8vUHJlcGFybyBpbCB3YXJuaW5nIGRhIG1vc3RyYXJlIGFsbCd1dGVudGUgY29uIGlsIGRldHRhZ2xpbyBkZWxsZSBpc3N1ZSBnaVx1MDBlMCBlc2lzdGVudGlcbiAgICBmb3IoaSBpbiBzZWFyY2gucmVzdWx0cyl7XG4gICAgICAgIGlmKGkuc3RhdHVzLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMoXCJEb25lXCIpICYmIGkuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1wiKSl7XG4gICAgICAgICAgICBpZih0a3RMaXN0ICE9IFwiXCIpe1xuICAgICAgICAgICAgICAgIHRrdExpc3QgPSB0a3RMaXN0ICsgXCI7IFwiICsgaS5nZXRQYXJlbnRPYmplY3QoKS5rZXkudG9TdHJpbmcoKSArIFwiIChcIiArIGkuZ2V0UGFyZW50T2JqZWN0KCkuZ2V0SXNzdWVUeXBlKCkubmFtZSArIFwiKSBcIiArIGkuc3RhdHVzLm5hbWUudG9TdHJpbmcoKVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgdGt0TGlzdCA9IGkuZ2V0UGFyZW50T2JqZWN0KCkua2V5LnRvU3RyaW5nKCkgKyBcIiAoXCIgKyBpLmdldFBhcmVudE9iamVjdCgpLmdldElzc3VlVHlwZSgpLm5hbWUgKyBcIikgXCIgKyBpLnN0YXR1cy5uYW1lLnRvU3RyaW5nKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vdGt0TGlzdCA9IHRrdExpc3QgKyBcIlxcblwiICsgaS5nZXRQYXJlbnRPYmplY3QoKS5rZXkudG9TdHJpbmcoKSArIFwiIChcIiArIGkuZ2V0UGFyZW50T2JqZWN0KCkuZ2V0SXNzdWVUeXBlKCkubmFtZSArIFwiKSBcIiArIGkuc3RhdHVzLm5hbWUudG9TdHJpbmcoKVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGlmKGkuc3RhdHVzLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMoXCJDbG9zZWRcIikgJiYgIWkuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1wiKSl7XG4gICAgICAgICAgICAgICAgaWYodGt0TGlzdCAhPSBcIlwiKXtcbiAgICAgICAgICAgICAgICAgICAgdGt0TGlzdCA9IHRrdExpc3QgKyBcIjsgXCIgKyBpLmtleS50b1N0cmluZygpICsgXCIgKFwiICsgaS5nZXRJc3N1ZVR5cGUoKS5uYW1lICsgXCIpIFwiICsgaS5zdGF0dXMubmFtZS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIHRrdExpc3QgPSBpLmtleS50b1N0cmluZygpICsgXCIgKFwiICsgaS5nZXRJc3N1ZVR5cGUoKS5uYW1lICsgXCIpIFwiICsgaS5zdGF0dXMubmFtZS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vdGt0TGlzdCA9IHRrdExpc3QgKyBcIlxcblwiICsgaS5rZXkudG9TdHJpbmcoKSArIFwiIChcIiArIGkuZ2V0SXNzdWVUeXBlKCkubmFtZSArIFwiKSBcIiArIGkuc3RhdHVzLm5hbWUudG9TdHJpbmcoKVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgaWYodGt0TGlzdCAhPSBcIlwiKXtcbiAgICAgICAgICAgICAgICAgICAgdGt0TGlzdCA9IHRrdExpc3QgKyBcIjsgXCIgKyBpLmtleS50b1N0cmluZygpICsgXCIgKFwiICsgaS5nZXRJc3N1ZVR5cGUoKS5uYW1lICsgXCIpIFwiICsgaS5zdGF0dXMubmFtZS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIHRrdExpc3QgPSBpLmtleS50b1N0cmluZygpICsgXCIgKFwiICsgaS5nZXRJc3N1ZVR5cGUoKS5uYW1lICsgXCIpIFwiICsgaS5zdGF0dXMubmFtZS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vdGt0TGlzdCA9IHRrdExpc3QgKyBcIlxcblwiICsgaS5rZXkudG9TdHJpbmcoKSArIFwiIChcIiArIGkuZ2V0SXNzdWVUeXBlKCkubmFtZSArIFwiKSBcIiArIGkuc3RhdHVzLm5hbWUudG9TdHJpbmcoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGxvZy5kZWJ1ZyBcInRrdExpc3Q6IFwiICsgdGt0TGlzdFxufVxuXG5kZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG5sb2cuZGVidWcgXCJpc3N1ZTogXCIgKyBpc3N1ZVxubG9nLmRlYnVnIFwiaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShnZW5Gcm9tUmVwYWlyKTogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGdlbkZyb21SZXBhaXIpXG5pZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGdlbkZyb21SZXBhaXIpPT1udWxsIHx8ICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGdlbkZyb21SZXBhaXIpLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpKXtcbiAgICBpZiAoIWVycm9ycyAmJiAhd2FybmluZ3Mpe1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH1lbHNle1xuICAgICAgICBpZighZXJyb3JzICYmIHdhcm5pbmdzKXtcbiAgICAgICAgICAgIC8vU2UgY2kgc29ubyBzb2xvIHdhcm5pbmdzIHZlcmlmaWNvIHNlIGwndXRlbnRlIGhhIGdpXHUwMGUwIGRpY2hpYXJhdG8gZGkgdm9sZXIgcHJvc2VndWlyZSBjb211bnF1ZVxuICAgICAgICAgICAgLy8gLSB0cmFuc2l0aW9uIGZpZWxkIFwiT1BBQV9DSEVDS19BTkRfQ09ORklSTVwiPVwiWWVzXCJcbiAgICAgICAgICAgIC8vIC0gaW4gY2FzbyBjb250cmFyaW8gaW52aW8gaSB3YXJuaW5nIGEgRkVcblxuICAgICAgICAgICAgLy9sb2cuZGVidWcgXCJ0cmFuc2l0aW9uQ2hlY2s6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spXG4gICAgICAgICAgICAvL2xvZy5kZWJ1ZyBcInJlc3VsdDogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIilcbiAgICAgICAgICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuXHRcdFx0XHRkZWYgd0xpc3RDb25maXJtTXVsdGlwbGVUa3RzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYod2FybmluZ0VtcHR5RmllbGRzLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHkgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKFwiV1wiKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQoXCJDT05GSVJNX0VNUFRZX0ZJRUxEU1wiKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQobnVsbClcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKHdhcm5pbmdFbXB0eUZpZWxkcylcblxuICAgICAgICAgICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHkpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYod2FybmluZ051bVRrdCl7XG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybU11bHRpcGxlVGt0cy5hZGQoXCJXXCIpXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybU11bHRpcGxlVGt0cy5hZGQodGt0TGlzdClcbiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtTXVsdGlwbGVUa3RzLmFkZChcIk1PUkVfVEhBTl8yX1RLVFNfTEFTVF82MF9EQVlTXCIpXG4gICAgICAgICAgICAgICAgICAgIC8vd0xpc3RDb25maXJtTXVsdGlwbGVUa3RzLmFkZChudWxsKVxuXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1NdWx0aXBsZVRrdHMpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG91dHB1dC5hZGQod0xpc3QpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidGhyb3cgZXhjZXB0aW9uOiBcIiArIG91dHB1dC50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiV1wiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgICAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKFwiV1wiLCBvdXRwdXQudG9TdHJpbmcoKSkgICBcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICAgIGlmKGVycm9ycyAmJiAhd2FybmluZ3Mpe1xuICAgICAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICAgICAgICAgIGlmKGVycm9yTWFuZGF0b3J5RmllbGRzLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgIGRlZiBlTGlzdE1hbmRhdG9yeSA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChcIkVcIilcbiAgICAgICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoXCJNQU5EQVRPUllfRklFTERTXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKGVycm9yTWFuZGF0b3J5RmllbGRzKVxuICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdE1hbmRhdG9yeSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRocm93IGV4Y2VwdGlvbjogXCIgKyBvdXRwdXQudG9TdHJpbmcoKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJFXCIsIG91dHB1dC50b1N0cmluZygpKSAgIFxuICAgICAgICB9XG4gICAgICAgIGlmKGVycm9ycyAmJiB3YXJuaW5ncyl7XG4gICAgICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgZGVmIHdMaXN0Q29uZmlybU11bHRpcGxlVGt0cyA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihlcnJvck1hbmRhdG9yeUZpZWxkcy5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICBkZWYgZUxpc3RNYW5kYXRvcnkgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKFwiTUFOREFUT1JZX0ZJRUxEU1wiKVxuICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChudWxsKVxuICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChlcnJvck1hbmRhdG9yeUZpZWxkcylcbiAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RNYW5kYXRvcnkpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKHdhcm5pbmdFbXB0eUZpZWxkcy5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHkgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQoXCJXXCIpXG4gICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKFwiQ09ORklSTV9FTVBUWV9GSUVMRFNcIilcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQobnVsbClcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQod2FybmluZ0VtcHR5RmllbGRzKVxuXG4gICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZih3YXJuaW5nTnVtVGt0KXtcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1NdWx0aXBsZVRrdHMuYWRkKFwiV1wiKVxuICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybU11bHRpcGxlVGt0cy5hZGQodGt0TGlzdClcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1NdWx0aXBsZVRrdHMuYWRkKFwiTU9SRV9USEFOXzJfVEtUU19MQVNUXzYwX0RBWVNcIilcbiAgICAgICAgICAgICAgICAvL3dMaXN0Q29uZmlybU11bHRpcGxlVGt0cy5hZGQobnVsbClcblxuICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1NdWx0aXBsZVRrdHMpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwidGhyb3cgZXhjZXB0aW9uOiBcIiArIG91dHB1dC50b1N0cmluZygpXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJXRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJXRVwiLCBvdXRwdXQudG9TdHJpbmcoKSkgIFxuICAgICAgICB9XG4gICAgfVxufWVsc2V7XG4gICAgcmV0dXJuIHRydWVcbn1cbiIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZQppbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb24KaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3IKaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcgoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CmRlZiBDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRykKCklzc3VlIGlzc3VlID0gaXNzdWUKLy9Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7Ci8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoIkFBUy0yNzYxIikKCmRlZiBlcnJvcnMgPSBmYWxzZQpkZWYgd2FybmluZ3MgPSBmYWxzZQoKZGVmIHRyYW5zaXRpb25DaGVjayA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY2hlY2tBbmRDb25maXJtJ10udG9TdHJpbmcoKSlbMF0KZGVmIHJlcE1hdGVyaWFscyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YucXVvdGVNYXRlcmlhbHMnXS50b1N0cmluZygpKVswXQoKZGVmIGVycm9yTWFuZGF0b3J5RmllbGRzID0gbmV3IEFycmF5TGlzdCgpCmRlZiBlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWRGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIHdhcm5pbmdFbXB0eUZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKQoKLy9PUEFBX1JFUExBQ0VEX01BVEVSSUFMUwppZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscyk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykgPT0gIiIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpLnRvU3RyaW5nKCkuZXF1YWxzKCIiKSl7CiAgICBsb2cuZGVidWcgIndhcm5pbmdzIHRydWUiCiAgICB3YXJuaW5ncyA9IHRydWUKICAgIHdhcm5pbmdFbXB0eUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YucXVvdGVNYXRlcmlhbHMnXS50b1N0cmluZygpKQp9ZWxzZXsKICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50cwogICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGUiKTsgIAogICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSIpOwogICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTsKICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpOwoKICAgIC8vVmVyaWZpY28gY2hlIGNpIHNpYSBhbG1lbm8gdW4gZWxlbWVudG8sIGRpIHF1ZWxsaSBsZWdhdGkgbmVsIGN1c3RvbWZpZWxkLCBjb24gREVMRVRFRCE9dHJ1ZQogICAgZGVmIGFsbERlbGV0ZWQ9dHJ1ZQogICAgZm9yKG9iaiBpbiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykpewogICAgICAgIAogICAgICAgIG9iaj1vYmoudG9TdHJpbmcoKQogICAgICAgIGRlZiBvYmpLZXkgPSBvYmouc3Vic3RyaW5nKG9iai5pbmRleE9mKCcoJykrMSxvYmouaW5kZXhPZignKScpKQogICAgICAgIGRlZiBvYmpPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4ob2JqS2V5KQogICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihvYmpPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuZGVsZXRlZCddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ob2JqT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmRlbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkKICAgICAgICAgICAgZGVsZXRlZCA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkKICAgICAgICAgICAgaWYoIWRlbGV0ZWQpewogICAgICAgICAgICAgICAgYWxsRGVsZXRlZD1mYWxzZQogICAgICAgICAgICB9CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGFsbERlbGV0ZWQ9ZmFsc2UKICAgICAgICB9ICAgICAgCiAgICAgICAgLy9sb2cuZGVidWcgIm9iajogIiArIG9iagogICAgICAgIC8vbG9nLmRlYnVnICJhbGxEZWxldGVkOiAiICsgYWxsRGVsZXRlZAogICAgfQogICAgaWYoYWxsRGVsZXRlZCl7CiAgICAgICAgd2FybmluZ3MgPSB0cnVlCiAgICAgICAgd2FybmluZ0VtcHR5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5xdW90ZU1hdGVyaWFscyddLnRvU3RyaW5nKCkpCiAgICB9Cn0KCmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KCkKCmlmICghZXJyb3JzICYmICF3YXJuaW5ncyl7CiAgICByZXR1cm4gdHJ1ZQp9ZWxzZXsKICAgIGlmKCFlcnJvcnMgJiYgd2FybmluZ3MpewogICAgICAgIC8vU2UgY2kgc29ubyBzb2xvIHdhcm5pbmdzIHZlcmlmaWNvIHNlIGwndXRlbnRlIGhhIGdpw6AgZGljaGlhcmF0byBkaSB2b2xlciBwcm9zZWd1aXJlIGNvbXVucXVlCiAgICAgICAgLy8gLSB0cmFuc2l0aW9uIGZpZWxkICJPUEFBX0NIRUNLX0FORF9DT05GSVJNIj0iWWVzIgogICAgICAgIC8vIC0gaW4gY2FzbyBjb250cmFyaW8gaW52aW8gaSB3YXJuaW5nIGEgRkUKCiAgICAgICAgLy9sb2cuZGVidWcgInRyYW5zaXRpb25DaGVjazogIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKQogICAgICAgIC8vbG9nLmRlYnVnICJyZXN1bHQ6ICIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykudG9TdHJpbmcoKS5lcXVhbHMoIlllcyIpCiAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKSl7CiAgICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKQoKICAgICAgICAgICAgaWYod2FybmluZ0VtcHR5RmllbGRzLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgZGVmIHdMaXN0Q29uZmlybUVtcHR5ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQoIlciKQogICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKCJDT05GSVJNX0VNUFRZX0ZJRUxEUyIpCiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQobnVsbCkKICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZCh3YXJuaW5nRW1wdHlGaWVsZHMpCgogICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5KQogICAgICAgICAgICB9CgogICAgICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KQogICAgICAgICAgICBsb2cuZGVidWcgInRocm93IGV4Y2VwdGlvbjogIiArIG91dHB1dC50b1N0cmluZygpCiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3siVyI6IicgKyBvdXRwdXQudG9TdHJpbmcoKSArICcifScpCiAgICAgICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiVyIsIG91dHB1dC50b1N0cmluZygpKSAgIAogICAgICAgIH0KCiAgICB9CiAgICBpZihlcnJvcnMgJiYgIXdhcm5pbmdzKXsKICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KCkKCiAgICAgICAgaWYoZXJyb3JNYW5kYXRvcnlGaWVsZHMuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgIGRlZiBlTGlzdE1hbmRhdG9yeSA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoIkUiKQogICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoIk1BTkRBVE9SWV9GSUVMRFMiKQogICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQobnVsbCkKICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKGVycm9yTWFuZGF0b3J5RmllbGRzKQogICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RNYW5kYXRvcnkpCiAgICAgICAgfQoKICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KQogICAgICAgIGxvZy5kZWJ1ZyAidGhyb3cgZXhjZXB0aW9uOiAiICsgb3V0cHV0LnRvU3RyaW5nKCkKICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IkUiOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQogICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiRSIsIG91dHB1dC50b1N0cmluZygpKSAgIAogICAgfQogICAgaWYoZXJyb3JzICYmIHdhcm5pbmdzKXsKICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KCkKICAgICAgICBkZWYgd0xpc3QgPSBuZXcgQXJyYXlMaXN0KCkKICAgICAgICBpZihlcnJvck1hbmRhdG9yeUZpZWxkcy5zaXplKCkgPiAwKXsKICAgICAgICAgICAgZGVmIGVMaXN0TWFuZGF0b3J5ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZCgiRSIpCiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZCgiTUFOREFUT1JZX0ZJRUxEUyIpCiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChudWxsKQogICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoZXJyb3JNYW5kYXRvcnlGaWVsZHMpCiAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdE1hbmRhdG9yeSkKICAgICAgICB9CgogICAgICAgIGlmKHdhcm5pbmdFbXB0eUZpZWxkcy5zaXplKCkgPiAwKXsKICAgICAgICAgICAgZGVmIHdMaXN0Q29uZmlybUVtcHR5ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZCgiVyIpCiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZCgiQ09ORklSTV9FTVBUWV9GSUVMRFMiKQogICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQobnVsbCkKICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKHdhcm5pbmdFbXB0eUZpZWxkcykKCiAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eSkKICAgICAgICB9CgogICAgICAgIG91dHB1dC5hZGQoZUxpc3QpCiAgICAgICAgb3V0cHV0LmFkZCh3TGlzdCkKICAgICAgICBsb2cuZGVidWcgInRocm93IGV4Y2VwdGlvbjogIiArIG91dHB1dC50b1N0cmluZygpCiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigneyJXRSI6IicgKyBvdXRwdXQudG9TdHJpbmcoKSArICcifScpCiAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJXRSIsIG91dHB1dC50b1N0cmluZygpKSAgCiAgICB9Cn0K</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">c716134f-f724-43dd-894c-5175df3d3ed7</arg>
              <arg name="FIELD_NOTES">YCFgR2VuZXJhdGUgU04gZm9yIG9mZmVyIHRrdHM=</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuXG5kZWYgU04gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfU0FQX1NFUlZJQ0VfTk9USUZJQ0FUSU9OXCIpWzBdXG5kZWYgb2ZmZXIgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfT0ZGRVJfVEtUXCIpWzBdXG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcblxuVVJMIHVybFxuSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvblxuXG5sb2cuZGVidWcgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShvZmZlcilcbmxvZy5kZWJ1ZyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG9mZmVyKS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKVxuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShvZmZlcikudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIikgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShTTikgPT0gbnVsbCAmJiBpc3N1ZS5pc3N1ZVR5cGUubmFtZSAhPSBcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0XCIpe1xuICAgIHJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcblxuICAgIGRlZiBib2R5X3JlcSA9IFtdXG4gICAgYm9keV9yZXEgPSBbXG4gICAgICAgIFwiaXNzdWVLZXlcIjogaXNzdWUua2V5LFxuICAgICAgICBcInN0YXR1c1wiOiBcIk9QRVwiXG4gICAgXSBcblxuICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL2FmdGVyL3NhbGVzL2NyZWF0ZS9zZXJ2aWNlL25vdGlmaWNhdGlvblwiXG5cbiAgICBsb2cuZGVidWcgXCJiYXNlVVJMIFNOOiBcIiArIGJhc2VVUkxcbiAgICBsb2cuZGVidWcgXCJib2R5X3JlcSBTTjogXCIgKyBib2R5X3JlcVxuICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cbiAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDFcIikpe1xuICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICBcbiAgICAgICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxuICAgICAgICBsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXG5cbiAgICAgICAgZGVmIGpzb25TbHVycGVyID0gbmV3IEpzb25TbHVycGVyKClcbiAgICAgICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcbiAgICAgICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICBcbiAgICAgICAgbG9nLmRlYnVnIFwibWVzc2FnZTogXCIgKyAganNvbl9vYmplY3QubWVzc2FnZVxuICAgICAgICBsb2cuZGVidWcgXCJlcnJvcnM6IFwiICsgIGpzb25fb2JqZWN0LmVycm9ycy50b1N0cmluZygpXG5cbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJPUC1TQVAtU04tVVBEQVRFXCIpXG4gICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsganNvbl9vYmplY3QuZXJyb3JzWzBdKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgfVxufVxuICIsInNjcmlwdFBhdGgiOm51bGx9</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="9">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES">YCFgT1A6IFZhbG9yaXp6YXppb25lIGxpc3RpbmkgZm9ybml0b3Jl</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlCmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2UKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXIKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsCgpQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpCkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpCnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7Cglwcm9wZXJ0aWVzLmxvYWQoaXQpCn0KQ2F0ZWdvcnkgbG9nID0gQ2F0ZWdvcnkuZ2V0SW5zdGFuY2UoImNvbS5vbnJlc29sdmUuamlyYS5ncm9vdnkuUG9zdEZ1bmN0aW9uIikKbG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpCgpJc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7CkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTsKCklzc3VlSW5kZXhpbmdTZXJ2aWNlIAlpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSkKCmRlZiByZXF1ZXN0TWV0aG9kCmRlZiBiYXNlVVJMCgpsb2cuZGVidWcgIlZhbG9yaXp6YXppb25lIGxpc3RpbmkiCgovKiBSRVNUIEFQSSBwZXIgQ29udGFiaWxpenphemlvbmUgSW50ZXJ2ZW50byAqLwpyZXF1ZXN0TWV0aG9kID0gIkdFVCI7CgpiYXNlVVJMID0gImh0dHA6Ly8iICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyAiL29wL3Jlc3QvQUEvdGlja2V0L2lzc3VlS2V5LyIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArICIvY2xvc2U/cG9wdWxhdGVSYXRlcz1mYWxzZSZtYXRlcmlhbEF0dHJpYnV0ZT0iICsgcHJvcGVydGllc1snY2YucXVvdGVNYXRlcmlhbHMnXS50b1N0cmluZygpCmxvZy5kZWJ1ZyAiYmFzZVVybDogIiArIGJhc2VVUkwKCi8qRGVmaW5pcmUgcGFyYW1ldHJvIGRpIGlucHV0IHVuYXRhbnR1bT10cnVlfGZhbHNlIGluIGJhc2UgYWwgdmFsb3JlIGRlbGxhIHZhcmlhYmlsZSBib29sZWFuYSB1bmF0YW50dW0qLwpVUkwgdXJsID0gbmV3IFVSTChiYXNlVVJMKQpIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpOwpjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7CmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24vanNvbiIpOwpjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eSgiQWNjZXB0IiwgIiovKiIpOwpjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpOwpjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7CmNvbm5lY3Rpb24uY29ubmVjdCgpOwpsb2cuZGVidWcgIlJlc3BvbnNlQ29kZToiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKQpsb2cuZGVidWcgIlJlc3BvbnNlTWVzc2FnZToiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKQoKLy9Jc3N1ZUluZGV4aW5nU2VydmljZSBpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSkKLy9pc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGlzc3VlTWFuYWdlci5nZXRJc3N1ZU9iamVjdChpc3N1ZS5rZXkudG9TdHJpbmcoKSkpCgovL2RlZiB1bmFUYW50dW1SYXRlcyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoIk9QQUFfVU5BVEFOVFVNX1JBVEVTIilbMF0KLy9sb2cud2FybiAidW5hVGFudHVtUmF0ZXM6ICIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHVuYVRhbnR1bVJhdGVzKQoKZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKQpkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpCmRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KCkKCmlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscygiMjAwIikpewogICAgbG9nLmRlYnVnICJ1cmw6ICIgKyB1cmwKICAgIGxvZy5kZWJ1ZyAiUmVzcG9uc2VDb2RlOiIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpCiAgICBsb2cuZGVidWcgIlJlc3BvbnNlTWVzc2FnZToiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKQogICAgbG9nLmRlYnVnICJSZXNwb25zZTogIiArIGNvbm5lY3Rpb24KCiAgICBlTGlzdEVycm9ycy5hZGQoIkUiKQogICAgZUxpc3RFcnJvcnMuYWRkKCJPUC1US1QtQUNDT1VOVElORyIpCiAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyAiICIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpKQogICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncykKICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycykKCiAgICBvdXRwdXQuYWRkKGVMaXN0KQogICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiRSIsIG91dHB1dC50b1N0cmluZygpKQp9</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="append.value"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.value">%%CURRENT_DATETIME%%</arg>
                  <arg name="field.name">customfield_22603</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue">50</arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_22693</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="9" name="Waiting for Supplier Quote">
      <meta name="jira.status.id">14332</meta>
      <actions>
<common-action id="741" />
        <action id="261" name="Preventivo Fornitore Inserito" view="fieldscreen">
          <meta name="opsbar-sequence">10</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">19914</meta>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">23e761954d70d711d1ee5515aaf85f7738768dd8</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIG1hbmRhdG9yeSBhdHRhY2htZW50czogUHJldmVudGl2byBGb3JuaXRvcmU=</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlCmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2UKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXIKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsCgpQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpCkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpCnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7Cglwcm9wZXJ0aWVzLmxvYWQoaXQpCn0KQ2F0ZWdvcnkgbG9nID0gQ2F0ZWdvcnkuZ2V0SW5zdGFuY2UoImNvbS5vbnJlc29sdmUuamlyYS5ncm9vdnkuUG9zdEZ1bmN0aW9uIikKbG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpCgpJc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7CkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTsKCklzc3VlSW5kZXhpbmdTZXJ2aWNlIAlpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSkKZGVmIGF1dG9tYXRpY2FsbHlDbG9zZWQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlDbG9zZWQnXS50b1N0cmluZygpKVswXQoKZGVmIHJlcXVlc3RNZXRob2QKZGVmIGJhc2VVUkwKCmludCBPUEFBID0gcHJvcGVydGllc1snaXNjaGVtYS5hYS5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKCkKaW50IERCTyA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuZGJvLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKQogCklzc3VlIGlzc3VlID0gaXNzdWUKCmRlZiBlcnJvcnMgPSBmYWxzZQpkZWYgd2FybmluZ3MgPSBmYWxzZQoKZGVmIGVycm9yTWFuZGF0b3J5RmllbGRzID0gbmV3IEFycmF5TGlzdCgpCgovKlJpbW96aW9uZSBhbGxlZ2F0byByYXBwb3J0byBkaSBpbnRlcnZlbnRvIGFwcGVuYSBjcmVhdG8qLwovKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovCkNsYXNzIGlxbEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuSVFMRmFjYWRlIik7IApkZWYgaXFsRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKGlxbEZhY2FkZUNsYXNzKTsKCi8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi8KQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGUiKTsKZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7CgovKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi8KQ2xhc3Mgb2JqZWN0VHlwZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUZhY2FkZSIpOwpkZWYgb2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpOwoKLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi8KQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSIpOwpkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpOwoKQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuc2VydmljZXMubW9kZWwuZmFjdG9yeS5PYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeSIpOwpkZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7CgovKiBTcGVjaWZ5IHRoZSBzY2hlbWEgaWQgYXMgd2VsbCBhcyB0aGUgSVFMIHRoYXQgd2lsbCBmZXRjaCBvYmplY3RzLiBJbiB0aGlzIGNhc2UgYWxsIG9iamVjdHMgd2l0aCBOYW1lIG1hdGNoaW5nIHRoZSB2YWx1ZUNGLCBiZSBzdXJlIHRvIGluY2x1ZGUgIiBhcm91bmQgdmFsdWUgKi8KZGVmIG9iamVjdHMgPSBpcWxGYWNhZGUuZmluZE9iamVjdHNCeUlRTEFuZFNjaGVtYShEQk8sICJcIiIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5jYXRlZ29yeVJlZiddLnRvU3RyaW5nKCkgKyAiXCIuXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkubmFtZSddLnRvU3RyaW5nKCkgKyAiXCIgPSBcIiIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5vYmpzLnByZXZGb3JuaXRvcmUnXS50b1N0cmluZygpICsgIlwiIEFORCAiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyAiIT10cnVlIEFORCBvYmplY3QgSEFWSU5HIGNvbm5lY3RlZFRpY2tldHMoa2V5ID0gIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgIikiKTsgLy8gU2VlIHRoZSBjb21wbGV0ZSBsaXN0IG9mIHBvc3NpYmxlIElRTCBvbiB0aGUgSW5zaWdodCBRdWVyeSBMYW5ndWFnZSBkb2N1bWVudGF0aW9uIHBhZ2UKLyogSWYgdGhpcyBpcyBhIG1hbmRhdG9yeSBmaWVsZCB5b3Ugc2hvdWxkIGJlIGFibGUgdG8gZG8gdGhpczogKi8KbG9nLmluZm8oIkluc2lnaHQgb2JqZWN0OiAiICsgb2JqZWN0c1swXSk7CmxvZy5kZWJ1ZyAiXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuY2F0ZWdvcnlSZWYnXS50b1N0cmluZygpICsgIlwiLlwiIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm5hbWUnXS50b1N0cmluZygpICsgIlwiID0gXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkub2Jqcy5wcmV2Rm9ybml0b3JlJ10udG9TdHJpbmcoKSArICJcIiBBTkQgIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpICsgIiE9dHJ1ZSBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleSA9ICIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArICIpIgoKaWYoIW9iamVjdHNbMF0pewogICAgLypOZXNzdW4gcHJldmVudGl2byBhbGxlZ2F0byovCiAgICBlcnJvcnMgPSB0cnVlCiAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkub2Jqcy5wcmV2Rm9ybml0b3JlJ10gPyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5vYmpzLnByZXZGb3JuaXRvcmUnXS50b1N0cmluZygpIDogIlByZXZlbnRpdm8gRm9ybml0b3JlIikKfQoKZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKQoKaWYgKCFlcnJvcnMgJiYgIXdhcm5pbmdzKXsKICAgIHJldHVybiB0cnVlCn1lbHNlewogICAgaWYoIWVycm9ycyAmJiB3YXJuaW5ncyl7CiAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKSl7CiAgICAgICAgICAgIC8vbG9nLmRlYnVnICJyZXR1cm4gdHJ1ZSIKICAgICAgICAgICAgcmV0dXJuIHRydWUKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgZGVmIHdMaXN0ID0gbmV3IEFycmF5TGlzdCgpCgogICAgICAgICAgICBpZih3YXJuaW5nRW1wdHlGaWVsZHMuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHkgPSBuZXcgQXJyYXlMaXN0KCkKICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZCgiVyIpCiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQoIkNPTkZJUk1fRU1QVFlfRklFTERTIikKICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChudWxsKQogICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKHdhcm5pbmdFbXB0eUZpZWxkcykKCiAgICAgICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHkpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG91dHB1dC5hZGQod0xpc3QpCiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3siVyI6IicgKyBvdXRwdXQudG9TdHJpbmcoKSArICcifScpCiAgICAgICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiVyIsIG91dHB1dC50b1N0cmluZygpKSAgIAogICAgICAgIH0KICAgIH0KICAgIGlmKGVycm9ycyAmJiAhd2FybmluZ3MpewogICAgICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgIAogICAgICAgIGlmKGVycm9yTWFuZGF0b3J5RmllbGRzLnNpemUoKSA+IDApewogICAgICAgICAgICBkZWYgZUxpc3RNYW5kYXRvcnkgPSBuZXcgQXJyYXlMaXN0KCkKICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKCJFIikKICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKCJNQU5EQVRPUllfQVRUQUNITUVOVFMiKQogICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQobnVsbCkKICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKGVycm9yTWFuZGF0b3J5RmllbGRzKQogICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RNYW5kYXRvcnkpCiAgICAgICAgfQogICAgICAgIAoJCW91dHB1dC5hZGQoZUxpc3QpCiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigneyJFIjoiJyArIG91dHB1dC50b1N0cmluZygpICsgJyJ9JykKICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oIkUiLCBvdXRwdXQudG9TdHJpbmcoKSkgICAKICAgIH0KICAgIGlmKGVycm9ycyAmJiB3YXJuaW5ncyl7CiAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgZGVmIHdMaXN0ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgCiAgICAgICAgaWYoZXJyb3JNYW5kYXRvcnlGaWVsZHMuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgIGRlZiBlTGlzdE1hbmRhdG9yeSA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoIkUiKQogICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoIk1BTkRBVE9SWV9BVFRBQ0hNRU5UUyIpCiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChudWxsKQogICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoZXJyb3JNYW5kYXRvcnlGaWVsZHMpCiAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdE1hbmRhdG9yeSkKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaWYod2FybmluZ0VtcHR5RmllbGRzLnNpemUoKSA+IDApewogICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHkgPSBuZXcgQXJyYXlMaXN0KCkKICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKCJXIikKICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKCJDT05GSVJNX0VNUFRZX0ZJRUxEUyIpCiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChudWxsKQogICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQod2FybmluZ0VtcHR5RmllbGRzKQoKICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5KQogICAgICAgIH0KICAgICAgICAKICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KQogICAgICAgIG91dHB1dC5hZGQod0xpc3QpCiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigneyJXRSI6IicgKyBvdXRwdXQudG9TdHJpbmcoKSArICcifScpCiAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJXRSIsIG91dHB1dC50b1N0cmluZygpKSAgCiAgICB9Cn0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">53480a627af4b00abaf5fd025ed6c011dab7e21e</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIFJlcXVpcmVkIEZpZWxkcyA=</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXJcbmltcG9ydCBncm9vdnkuanNvbi5Kc29uQnVpbGRlclxuaW1wb3J0IGdyb292eS5qc29uLlN0cmVhbWluZ0pzb25CdWlsZGVyXG5cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZFxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGlua1xuXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcblxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnlcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5Jc3N1ZSBpc3N1ZSA9IGlzc3VlXG4vL1BlciB0ZXN0IGRhIGNvbnNvbGVcbi8vSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy0yNzYxXCIpXG5cbmRlZiBlcnJvcnMgPSBmYWxzZVxuZGVmIHdhcm5pbmdzID0gZmFsc2VcbmRlZiByZWxhdGVzSW5Jc3N1ZUxpbms9ZmFsc2VcbmRlZiByZWxhdGVzT3V0SXNzdWVMaW5rPWZhbHNlXG5kZWYgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZUxpbmtlZCA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIHdMaXN0Q29uZmlybUVtcHR5UmF0ZVF1b3RlTGlua2VkID0gbmV3IEFycmF5TGlzdCgpXG5cbmRlZiByZXBNYXRlcmlhbHMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnF1b3RlTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBsYWJvdXJSYXRlcyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YucXVvdGVMYWJvdXJSYXRlcyddLnRvU3RyaW5nKCkpWzBdXG5kZWYgbHVtcFN1bU9mZmVyID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5sdW1wU3VtT2ZmZXInXS50b1N0cmluZygpKVswXVxuXG4vKkNvbmZlcm1hIHV0ZW50ZSBzdSB3YXJuaW5ncyovXG5kZWYgdHJhbnNpdGlvbkNoZWNrID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5jaGVja0FuZENvbmZpcm0nXS50b1N0cmluZygpKVswXVxuXG4vKkluc2lnaHQgU2NoZW1hIElEcyovXG5kZWYgREJPYmplY3RzID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8nXS50b1N0cmluZygpICsgXCItXCJcbmRlZiBPUEFBID0gcHJvcGVydGllc1snaXNjaGVtYS5hYSddLnRvU3RyaW5nKCkgKyBcIi1cIlxuXG4vKkFycmF5IHdhcm5pbmdzIGVkIGVycm9ycyBwZXIgbGEgaXNzdWUgcHJpbmNpcGFsZSwgdW5vIHBlciBvZ25pIHRpcG9sb2dpYSBkaSBlcnJvcmUgbyB3YXJuaW5nKi9cbmRlZiBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlTWF0U3VwcGxpZXIgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlUmF0ZVN1cHBsaWVyID0gbmV3IEFycmF5TGlzdCgpXG4vL2RlZiBpc3N1ZUVycm9yLi4uXG5cbi8qVmVyaWZpY2EgY2FtcGkgc3UgdGlja2V0IG9nZ2V0dG8gZGVsbGEgdHJhbnNhemlvbmUqL1xuLy9PUF9RVU9URV9NQVRFUklBTFNcbmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKSAhPSBcIlwiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpe1xuICAgIGxvZy5kZWJ1ZyBcIk1hdGVyaWFsaTogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscylcbiAgICAvKkNpY2xhcmUgdHV0dGkgZ2xpIG9nZ2V0dGkgYXNzb2NpYXRpIGFsIGNhbXBvKi9cbiAgICAvL2luc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHNcbiAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7ICBcbiAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTtcbiAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xuICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4gICAgZGVmIHJlcE1hdExpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscylcblxuICAgIGZvcihtYXQgaW4gcmVwTWF0TGlzdCl7XG4gICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdFxuICAgICAgICBkZWYgY29tcG9uZW50PW1hdC50b1N0cmluZygpXG4gICAgICAgIGRlZiBjb21wb25lbnRLZXkgPSBjb21wb25lbnQuc3Vic3RyaW5nKGNvbXBvbmVudC5pbmRleE9mKCcoJytPUEFBKSsxLGNvbXBvbmVudC5sZW5ndGgoKS0xKVxuICAgICAgICBkZWYgY29tcG9uZW50T2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGNvbXBvbmVudEtleSlcbiAgICAgICAgLy9nZXQgXCJERUxFVEVEXCIgZm9yIHRoYXQgY29tcG9uZW50XG5cdFx0ZGVmIG1hdERlbCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKSA/IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKSA6IFwiXCJcbiAgICAgICAgZGVmIG1hdERlbFZhbHVlID0gbWF0RGVsICE9IFwiXCIgPyBtYXREZWwuc3Vic3RyaW5nKG1hdERlbC5pbmRleE9mKCcoJykrMSxtYXREZWwuaW5kZXhPZignKScpKSA6IFwiXCJcblx0XHRsb2cuZGVidWcgXCJtYXRPYmo6IFwiICsgY29tcG9uZW50T2JqZWN0XG4gICAgICAgIGxvZy5kZWJ1ZyBcImRlbDogXCIgKyBtYXREZWxcbiAgICAgICAgLy9nZXQgXCJBUFBMSUVEX1RPXCIgZm9yIHRoYXQgY29tcG9uZW50XG4gICAgICAgIGRlZiBhcHBsaWVkVG8gPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkgYXMgQXJyYXlMaXN0XG4gICAgICAgIGRlZiBhcHBsaWVkVG9WYWx1ZVxuICAgICAgICBpZihhcHBsaWVkVG8uc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICBhcHBsaWVkVG8gPSBhcHBsaWVkVG8udG9TdHJpbmcoKVxuICAgICAgICAgICAgYXBwbGllZFRvVmFsdWUgPSBhcHBsaWVkVG8uc3Vic3RyaW5nKGFwcGxpZWRUby5pbmRleE9mKCcoJykrMSxhcHBsaWVkVG8uaW5kZXhPZignKScpKVxuICAgICAgICAgICAgLy9sb2cuZGVidWcgXCJhcHBsaWVkVG9WYWx1ZTogXCIgKyBhcHBsaWVkVG9WYWx1ZVxuICAgICAgICB9XG5cbiAgICAgICAgZGVmIG1hdE51bWJlclxuICAgICAgICBkZWYgbWF0TnVtYmVyS2V5XG4gICAgICAgIGRlZiBtYXROdW1iZXJWYWx1ZVxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50Lm1hdGVyaWFsUmVmJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgbWF0TnVtYmVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5tYXRlcmlhbFJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKSBhcyBBcnJheUxpc3RcbiAgICAgICAgICAgIGlmKG1hdE51bWJlci5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICBtYXROdW1iZXIgPSBtYXROdW1iZXIudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIG1hdE51bWJlcktleSA9IG1hdE51bWJlci5zdWJzdHJpbmcobWF0TnVtYmVyLmluZGV4T2YoJygnKSsxLG1hdE51bWJlci5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgZGVmIG1hdE51bWJlck9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihEQk9iamVjdHMgKyBtYXROdW1iZXJLZXkpXG4gICAgICAgICAgICAgICAgbWF0TnVtYmVyVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obWF0TnVtYmVyT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoubWF0ZXJpYWwubmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgbWF0TnVtYmVyVmFsdWUgPSBtYXROdW1iZXJWYWx1ZS5zdWJzdHJpbmcobWF0TnVtYmVyVmFsdWUuaW5kZXhPZignKCcpKzEsbWF0TnVtYmVyVmFsdWUuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZGVmIHNlcmlhbE51bWJlclxuICAgICAgICBkZWYgc2VyaWFsTnVtYmVyVmFsdWVcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5zZXJpYWxOdW1iZXInXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICBzZXJpYWxOdW1iZXIgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnNlcmlhbE51bWJlciddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKSBhcyBBcnJheUxpc3RcbiAgICAgICAgICAgIGlmKHNlcmlhbE51bWJlci5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICBzZXJpYWxOdW1iZXIgPSBzZXJpYWxOdW1iZXIudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIHNlcmlhbE51bWJlclZhbHVlID0gc2VyaWFsTnVtYmVyLnN1YnN0cmluZyhzZXJpYWxOdW1iZXIuaW5kZXhPZignKCcpKzEsc2VyaWFsTnVtYmVyLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgIH0gICAgICAgICAgICAgICBcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKChhcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscyhcIkJPVEhcIikgfHwgYXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoXCJTVVBQTElFUlwiKSkgJiYgIW1hdERlbFZhbHVlLmVxdWFscyhcInRydWVcIikpe1xuICAgICAgICAgICAgLy9nZXQgXCJUT1RBTF9BTU9VTlRfU1VQUExJRVJcIiBmb3IgdGhhdCBjb21wb25lbnRcbiAgICAgICAgICAgIGRlZiB0b3RTdXBwbGllclxuICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RTdXBwJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgIHRvdFN1cHBsaWVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RTdXBwJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZighdG90U3VwcGxpZXIgfHwgdG90U3VwcGxpZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscyhcIjAuMFwiKSl7XG4gICAgICAgICAgICAgICAgd2FybmluZ3M9dHJ1ZVxuICAgICAgICAgICAgICAgIGlzc3VlV2FybmluZ0VtcHR5UXVvdGVNYXRTdXBwbGllci5hZGQobWF0TnVtYmVyVmFsdWUudG9TdHJpbmcoKSArICgoIXNlcmlhbE51bWJlci50b1N0cmluZygpLmVxdWFscyhcIm51bGxcIikgJiYgIXNlcmlhbE51bWJlci50b1N0cmluZygpLmVxdWFscyhcIltdXCIpKSA/IFwiIChcIiArIHNlcmlhbE51bWJlclZhbHVlLnRvU3RyaW5nKCkgKyBcIilcIiA6IFwiXCIpKVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArIFwiIGlzc3VlV2FybmluZ0VtcHR5UXVvdGVNYXRTdXBwbGllcjogXCIgKyBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlTWF0U3VwcGxpZXJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSAgIFxuICAgIH0gICAgXG59ICBcblxuLy9PUEFBX0xBQk9VUl9SQVRFU1xuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcykhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxhYm91clJhdGVzKSAhPSBcIlwiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxhYm91clJhdGVzKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSl7XG4gICAgbG9nLmRlYnVnIFwiTGFib3VyIHJhdGVzOiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpXG4gICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovXG4gICAgLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzXG4gICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyAgXG4gICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XG4gICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbiAgICBkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcblxuICAgIGRlZiBsYWJvdXJSYXRlc0xpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxhYm91clJhdGVzKVxuXG4gICAgZm9yKGxiIGluIGxhYm91clJhdGVzTGlzdCl7XG4gICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdFxuICAgICAgICBkZWYgbGJSYXRlPWxiLnRvU3RyaW5nKClcbiAgICAgICAgZGVmIGxiUmF0ZUtleSA9IGxiUmF0ZS5zdWJzdHJpbmcobGJSYXRlLmluZGV4T2YoJygnKSsxLGxiUmF0ZS5pbmRleE9mKCcpJykpXG4gICAgICAgIGRlZiBsYlJhdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4obGJSYXRlS2V5KVxuICAgICAgICAvL2dldCBcIkRFTEVURURcIiBmb3IgdGhhdCByYXRlXG4gICAgICAgIGRlZiBsYkRlbCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKSA/IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKSA6IFwiXCJcbiAgICAgICAgZGVmIGxiRGVsVmFsdWUgPSBsYkRlbCAhPSBcIlwiID8gbGJEZWwuc3Vic3RyaW5nKGxiRGVsLmluZGV4T2YoJygnKSsxLGxiRGVsLmluZGV4T2YoJyknKSkgOiBcIlwiXG5cbiAgICAgICAgLy9nZXQgXCJBUFBMSUVEX1RPXCIgZm9yIHRoYXQgcmF0ZVxuICAgICAgICBkZWYgbGJBcHBsaWVkVG8gPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICBkZWYgbGJBcHBsaWVkVG9WYWx1ZSA9IGxiQXBwbGllZFRvLnN1YnN0cmluZyhsYkFwcGxpZWRUby5pbmRleE9mKCcoJykrMSxsYkFwcGxpZWRUby5pbmRleE9mKCcpJykpXG5cbiAgICAgICAgZGVmIGxiUmF0ZVJlZlxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5yYXRlUmVmJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgbGJSYXRlUmVmPW9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICB9XG5cbiAgICAgICAgZGVmIHRlY2hSZWZcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQudGVjaG5pY2lhblJlZiddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgIHRlY2hSZWY9b2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQudGVjaG5pY2lhblJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgIH1cblxuICAgICAgICBkZWYgbGJSYXRlUmVmS2V5XG4gICAgICAgIGRlZiBsYlJhdGVSZWZWYWx1ZVxuICAgICAgICBpZihsYlJhdGVSZWYuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICBsYlJhdGVSZWYgPSBsYlJhdGVSZWYudG9TdHJpbmcoKVxuICAgICAgICAgICAgbGJSYXRlUmVmS2V5ID0gbGJSYXRlUmVmLnN1YnN0cmluZyhsYlJhdGVSZWYubGFzdEluZGV4T2YoJygnKSsxLGxiUmF0ZVJlZi5sYXN0SW5kZXhPZi5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICBkZWYgbGJSYXRlUmVmT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKERCT2JqZWN0cyArIGxiUmF0ZVJlZktleSlcbiAgICAgICAgICAgIGxiUmF0ZVJlZlZhbHVlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZVJlZk9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnJhdGUuTmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICBsYlJhdGVSZWZWYWx1ZSA9IGxiUmF0ZVJlZlZhbHVlLnN1YnN0cmluZyhsYlJhdGVSZWZWYWx1ZS5sYXN0SW5kZXhPZignKCcpKzEsbGJSYXRlUmVmVmFsdWUubGFzdEluZGV4T2YoJyknKSlcbiAgICAgICAgfVxuXG4gICAgICAgIGRlZiB0ZWNoUmVmS2V5XG4gICAgICAgIGRlZiB0ZWNoUmVmVmFsdWVcbiAgICAgICAgaWYodGVjaFJlZil7XG4gICAgICAgICAgICB0ZWNoUmVmID0gdGVjaFJlZi50b1N0cmluZygpXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJ0ZWNoUmVmOiBcIiArIHRlY2hSZWZcbiAgICAgICAgICAgIHRlY2hSZWZLZXkgPSB0ZWNoUmVmLnN1YnN0cmluZyh0ZWNoUmVmLmxhc3RJbmRleE9mKCcoJykrMSx0ZWNoUmVmLmxhc3RJbmRleE9mKCcpJykpXG4gICAgICAgICAgICBkZWYgdGVjaFJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihPUEFBICsgdGVjaFJlZktleSlcbiAgICAgICAgICAgIHRlY2hSZWZWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoudGVjaG5pY2lhbi5uYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgIHRlY2hSZWZWYWx1ZSA9IGxiUmF0ZVJlZlZhbHVlLnN1YnN0cmluZyh0ZWNoUmVmVmFsdWUubGFzdEluZGV4T2YoJygnKSsxLHRlY2hSZWZWYWx1ZS5sYXN0SW5kZXhPZignKScpKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYoKGxiQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoXCJCT1RIXCIpIHx8IGxiQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoXCJTVVBQTElFUlwiKSkgJiYgIWxiRGVsVmFsdWUuZXF1YWxzKFwidHJ1ZVwiKSl7XG4gICAgICAgICAgICAvL2dldCBcIlRPVEFMX0FNT1VOVF9TVVBQTElFUlwiIGZvciB0aGF0IGNvbXBvbmVudFxuICAgICAgICAgICAgZGVmIHRvdFN1cHBsaWVyXG4gICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lib2oub25TaXRlUmF0ZVJlcG9ydC50b3RTdXBwbGllciddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgICAgICB0b3RTdXBwbGllciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaWJvai5vblNpdGVSYXRlUmVwb3J0LnRvdFN1cHBsaWVyJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZighdG90U3VwcGxpZXIgfHwgdG90U3VwcGxpZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscyhcIjAuMFwiKSl7XG4gICAgICAgICAgICAgICAgd2FybmluZ3M9dHJ1ZVxuICAgICAgICAgICAgICAgIGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlU3VwcGxpZXIuYWRkKGxiUmF0ZVJlZlZhbHVlLnRvU3RyaW5nKCkgKyBcIiAoXCIgKyB0ZWNoUmVmVmFsdWUudG9TdHJpbmcoKSArIFwiKVwiKVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArIFwiIGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlU3VwcGxpZXI6IFwiICsgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVTdXBwbGllclxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSAgICBcbn1cbmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcblxuaWYgKCFlcnJvcnMgJiYgIXdhcm5pbmdzKXtcbiAgICByZXR1cm4gdHJ1ZVxufWVsc2V7XG4gICAgaWYoIWVycm9ycyAmJiB3YXJuaW5ncyl7XG4gICAgICAgIC8vU2UgY2kgc29ubyBzb2xvIHdhcm5pbmdzIHZlcmlmaWNvIHNlIGwndXRlbnRlIGhhIGdpXHUwMGUwIGRpY2hpYXJhdG8gZGkgdm9sZXIgcHJvc2VndWlyZSBjb211bnF1ZVxuICAgICAgICAvLyAtIHRyYW5zaXRpb24gZmllbGQgXCJPUEFBX0NIRUNLX0FORF9DT05GSVJNXCI9XCJZZXNcIlxuICAgICAgICAvLyAtIGluIGNhc28gY29udHJhcmlvIGludmlvIGkgd2FybmluZyBhIEZFXG5cbiAgICAgICAgLy9sb2cuZGVidWcgXCJ0cmFuc2l0aW9uQ2hlY2s6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spXG4gICAgICAgIC8vbG9nLmRlYnVnIFwicmVzdWx0OiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKVxuICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIikpe1xuICAgICAgICAgICAgLy9sb2cuZGVidWcgXCJyZXR1cm4gdHJ1ZSAtIHRyYW5zaXRpb25DaGVjayA9IFllc1wiXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgICAgICAgICBpZihpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlUmF0ZVN1cHBsaWVyLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgXHRkZWYgd0xpc3RDb25maXJtRW1wdHlSYXRlID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZChcIldcIilcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKFwiU1VQUExJRVJfQ09ORklSTV9FTVBUWV9SQVRFU1wiKVxuICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQobnVsbClcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlU3VwcGxpZXIpXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eVJhdGUpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKGlzc3VlV2FybmluZ0VtcHR5UXVvdGVNYXRTdXBwbGllci5zaXplKCkgPiAwICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1PZmZlcikuZXF1YWxzKFwiWWVzXCIpKXtcbiAgICAgICAgICAgIFx0ZGVmIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChcIldcIilcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChcIlNVUFBMSUVSX0NPTkZJUk1fRU1QVFlfTUFUX1FVT1RFXCIpXG4gICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQobnVsbClcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlTWF0U3VwcGxpZXIpXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiV1wiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJXXCIsIG91dHB1dC50b1N0cmluZygpKSAgIFxuICAgICAgICB9XG5cbiAgICB9XG4gICAgaWYoZXJyb3JzICYmICF3YXJuaW5ncyl7XG4gICAgICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJFXCIsIG91dHB1dC50b1N0cmluZygpKSAgIFxuICAgIH1cbiAgICBpZihlcnJvcnMgJiYgd2FybmluZ3Mpe1xuICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZGVmIHdMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICAgICAgaWYoaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVTdXBwbGllci5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1FbXB0eVJhdGUgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoXCJXXCIpXG4gICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKFwiU1VQUExJRVJfQ09ORklSTV9FTVBUWV9SQVRFU1wiKVxuXHRcdFx0d0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZChudWxsKVxuICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZChpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlUmF0ZVN1cHBsaWVyKVxuXG4gICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHlSYXRlKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYoaXNzdWVXYXJuaW5nRW1wdHlRdW90ZU1hdFN1cHBsaWVyLnNpemUoKSA+IDAgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobHVtcFN1bU9mZmVyKS5lcXVhbHMoXCJZZXNcIikpe1xuICAgICAgICAgICAgZGVmIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKFwiV1wiKVxuICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoXCJTVVBQTElFUl9DT05GSVJNX0VNUFRZX01BVF9RVU9URVwiKVxuICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQobnVsbClcbiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKGlzc3VlV2FybmluZ0VtcHR5UXVvdGVNYXRTdXBwbGllcilcblxuICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUpXG4gICAgICAgIH1cblxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJXRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIldFXCIsIG91dHB1dC50b1N0cmluZygpKSAgXG4gICAgfVxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyCmltcG9ydCBncm9vdnkuanNvbi5Kc29uQnVpbGRlcgppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXIKCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWUKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWUKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGluawoKaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2UKCmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CmRlZiBDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRykKCklzc3VlIGlzc3VlID0gaXNzdWUKLy9QZXIgdGVzdCBkYSBjb25zb2xlCi8vSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpOwovL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKCJBQVMtMjc2MSIpCgpkZWYgZXJyb3JzID0gZmFsc2UKZGVmIHdhcm5pbmdzID0gZmFsc2UKZGVmIHJlbGF0ZXNJbklzc3VlTGluaz1mYWxzZQpkZWYgcmVsYXRlc091dElzc3VlTGluaz1mYWxzZQpkZWYgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZUxpbmtlZCA9IG5ldyBBcnJheUxpc3QoKQpkZWYgd0xpc3RDb25maXJtRW1wdHlSYXRlUXVvdGVMaW5rZWQgPSBuZXcgQXJyYXlMaXN0KCkKCmRlZiByZXBNYXRlcmlhbHMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnF1b3RlTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF0KZGVmIGxhYm91clJhdGVzID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5xdW90ZUxhYm91clJhdGVzJ10udG9TdHJpbmcoKSlbMF0KCi8qQ29uZmVybWEgdXRlbnRlIHN1IHdhcm5pbmdzKi8KZGVmIHRyYW5zaXRpb25DaGVjayA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY2hlY2tBbmRDb25maXJtJ10udG9TdHJpbmcoKSlbMF0KCi8qSW5zaWdodCBTY2hlbWEgSURzKi8KZGVmIERCT2JqZWN0cyA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuZGJvJ10udG9TdHJpbmcoKSArICItIgpkZWYgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEnXS50b1N0cmluZygpICsgIi0iCgovKkFycmF5IHdhcm5pbmdzIGVkIGVycm9ycyBwZXIgbGEgaXNzdWUgcHJpbmNpcGFsZSwgdW5vIHBlciBvZ25pIHRpcG9sb2dpYSBkaSBlcnJvcmUgbyB3YXJuaW5nKi8KZGVmIGlzc3VlV2FybmluZ0VtcHR5UXVvdGVNYXRTdXBwbGllciA9IG5ldyBBcnJheUxpc3QoKQpkZWYgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVTdXBwbGllciA9IG5ldyBBcnJheUxpc3QoKQovL2RlZiBpc3N1ZUVycm9yLi4uCgovKlZlcmlmaWNhIGNhbXBpIHN1IHRpY2tldCBvZ2dldHRvIGRlbGxhIHRyYW5zYXppb25lKi8KLy9PUF9RVU9URV9NQVRFUklBTFMKaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpIT1udWxsICYmIChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpICE9ICIiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgIGxvZy5kZWJ1ZyAiTWF0ZXJpYWxpOiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpCiAgICAvKkNpY2xhcmUgdHV0dGkgZ2xpIG9nZ2V0dGkgYXNzb2NpYXRpIGFsIGNhbXBvKi8KICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50cwogICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGUiKTsgIAogICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSIpOwogICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTsKICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpOwoKICAgIGRlZiByZXBNYXRMaXN0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpCgogICAgZm9yKG1hdCBpbiByZXBNYXRMaXN0KXsKICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3QKICAgICAgICBkZWYgY29tcG9uZW50PW1hdC50b1N0cmluZygpCiAgICAgICAgZGVmIGNvbXBvbmVudEtleSA9IGNvbXBvbmVudC5zdWJzdHJpbmcoY29tcG9uZW50LmluZGV4T2YoJygnK09QQUEpKzEsY29tcG9uZW50Lmxlbmd0aCgpLTEpCiAgICAgICAgZGVmIGNvbXBvbmVudE9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihjb21wb25lbnRLZXkpCiAgICAgICAgLy9nZXQgIkRFTEVURUQiIGZvciB0aGF0IGNvbXBvbmVudAoJCWRlZiBtYXREZWwgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSkgPyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkgOiAiIgogICAgICAgIGRlZiBtYXREZWxWYWx1ZSA9IG1hdERlbCAhPSAiIiA/IG1hdERlbC5zdWJzdHJpbmcobWF0RGVsLmluZGV4T2YoJygnKSsxLG1hdERlbC5pbmRleE9mKCcpJykpIDogIiIKCQlsb2cuZGVidWcgIm1hdE9iajogIiArIGNvbXBvbmVudE9iamVjdAogICAgICAgIGxvZy5kZWJ1ZyAiZGVsOiAiICsgbWF0RGVsCiAgICAgICAgLy9nZXQgIkFQUExJRURfVE8iIGZvciB0aGF0IGNvbXBvbmVudAogICAgICAgIGRlZiBhcHBsaWVkVG8gPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkgYXMgQXJyYXlMaXN0CiAgICAgICAgZGVmIGFwcGxpZWRUb1ZhbHVlCiAgICAgICAgaWYoYXBwbGllZFRvLnNpemUoKSA+IDApewogICAgICAgICAgICBhcHBsaWVkVG8gPSBhcHBsaWVkVG8udG9TdHJpbmcoKQogICAgICAgICAgICBhcHBsaWVkVG9WYWx1ZSA9IGFwcGxpZWRUby5zdWJzdHJpbmcoYXBwbGllZFRvLmluZGV4T2YoJygnKSsxLGFwcGxpZWRUby5pbmRleE9mKCcpJykpCiAgICAgICAgICAgIC8vbG9nLmRlYnVnICJhcHBsaWVkVG9WYWx1ZTogIiArIGFwcGxpZWRUb1ZhbHVlCiAgICAgICAgfQoKICAgICAgICBkZWYgbWF0TnVtYmVyCiAgICAgICAgZGVmIG1hdE51bWJlcktleQogICAgICAgIGRlZiBtYXROdW1iZXJWYWx1ZQogICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQubWF0ZXJpYWxSZWYnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgIG1hdE51bWJlciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQubWF0ZXJpYWxSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkgYXMgQXJyYXlMaXN0CiAgICAgICAgICAgIGlmKG1hdE51bWJlci5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgIG1hdE51bWJlciA9IG1hdE51bWJlci50b1N0cmluZygpCiAgICAgICAgICAgICAgICBtYXROdW1iZXJLZXkgPSBtYXROdW1iZXIuc3Vic3RyaW5nKG1hdE51bWJlci5pbmRleE9mKCcoJykrMSxtYXROdW1iZXIuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgZGVmIG1hdE51bWJlck9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihEQk9iamVjdHMgKyBtYXROdW1iZXJLZXkpCiAgICAgICAgICAgICAgICBtYXROdW1iZXJWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihtYXROdW1iZXJPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5tYXRlcmlhbC5uYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIG1hdE51bWJlclZhbHVlID0gbWF0TnVtYmVyVmFsdWUuc3Vic3RyaW5nKG1hdE51bWJlclZhbHVlLmluZGV4T2YoJygnKSsxLG1hdE51bWJlclZhbHVlLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZGVmIHNlcmlhbE51bWJlcgogICAgICAgIGRlZiBzZXJpYWxOdW1iZXJWYWx1ZQogICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuc2VyaWFsTnVtYmVyJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICBzZXJpYWxOdW1iZXIgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnNlcmlhbE51bWJlciddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKSBhcyBBcnJheUxpc3QKICAgICAgICAgICAgaWYoc2VyaWFsTnVtYmVyLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgc2VyaWFsTnVtYmVyID0gc2VyaWFsTnVtYmVyLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIHNlcmlhbE51bWJlclZhbHVlID0gc2VyaWFsTnVtYmVyLnN1YnN0cmluZyhzZXJpYWxOdW1iZXIuaW5kZXhPZignKCcpKzEsc2VyaWFsTnVtYmVyLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgfSAgICAgICAgICAgICAgIAogICAgICAgIH0KCiAgICAgICAgaWYoKGFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJCT1RIIikgfHwgYXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoIlNVUFBMSUVSIikpICYmICFtYXREZWxWYWx1ZS5lcXVhbHMoInRydWUiKSl7CiAgICAgICAgICAgIC8vZ2V0ICJUT1RBTF9BTU9VTlRfU1VQUExJRVIiIGZvciB0aGF0IGNvbXBvbmVudAogICAgICAgICAgICBkZWYgdG90U3VwcGxpZXIKICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RTdXBwJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgdG90U3VwcGxpZXIgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdFN1cHAnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkKICAgICAgICAgICAgfQogICAgICAgICAgICBpZighdG90U3VwcGxpZXIgfHwgdG90U3VwcGxpZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscygiMC4wIikpewogICAgICAgICAgICAgICAgd2FybmluZ3M9dHJ1ZQogICAgICAgICAgICAgICAgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZU1hdFN1cHBsaWVyLmFkZChtYXROdW1iZXJWYWx1ZS50b1N0cmluZygpICsgKCghc2VyaWFsTnVtYmVyLnRvU3RyaW5nKCkuZXF1YWxzKCJudWxsIikgJiYgIXNlcmlhbE51bWJlci50b1N0cmluZygpLmVxdWFscygiW10iKSkgPyAiICgiICsgc2VyaWFsTnVtYmVyVmFsdWUudG9TdHJpbmcoKSArICIpIiA6ICIiKSkKICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArICIgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZU1hdFN1cHBsaWVyOiAiICsgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZU1hdFN1cHBsaWVyCiAgICAgICAgICAgIH0KICAgICAgICB9ICAgCiAgICB9ICAgIAp9ICAKCi8vT1BBQV9MQUJPVVJfUkFURVMKaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcykhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxhYm91clJhdGVzKSAhPSAiIiAmJiAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcykudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgIGxvZy5kZWJ1ZyAiTGFib3VyIHJhdGVzOiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcykKICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qLwogICAgLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzCiAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZSIpOyAgCiAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CiAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpOwogICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7CgogICAgZGVmIGxhYm91clJhdGVzTGlzdCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpCgogICAgZm9yKGxiIGluIGxhYm91clJhdGVzTGlzdCl7CiAgICAgICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0CiAgICAgICAgZGVmIGxiUmF0ZT1sYi50b1N0cmluZygpCiAgICAgICAgZGVmIGxiUmF0ZUtleSA9IGxiUmF0ZS5zdWJzdHJpbmcobGJSYXRlLmluZGV4T2YoJygnKSsxLGxiUmF0ZS5pbmRleE9mKCcpJykpCiAgICAgICAgZGVmIGxiUmF0ZU9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihsYlJhdGVLZXkpCiAgICAgICAgLy9nZXQgIkRFTEVURUQiIGZvciB0aGF0IHJhdGUKICAgICAgICBkZWYgbGJEZWwgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSkgPyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkgOiAiIgogICAgICAgIGRlZiBsYkRlbFZhbHVlID0gbGJEZWwgIT0gIiIgPyBsYkRlbC5zdWJzdHJpbmcobGJEZWwuaW5kZXhPZignKCcpKzEsbGJEZWwuaW5kZXhPZignKScpKSA6ICIiCgogICAgICAgIC8vZ2V0ICJBUFBMSUVEX1RPIiBmb3IgdGhhdCByYXRlCiAgICAgICAgZGVmIGxiQXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuYXBwbGllZFRvJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICBkZWYgbGJBcHBsaWVkVG9WYWx1ZSA9IGxiQXBwbGllZFRvLnN1YnN0cmluZyhsYkFwcGxpZWRUby5pbmRleE9mKCcoJykrMSxsYkFwcGxpZWRUby5pbmRleE9mKCcpJykpCgogICAgICAgIGRlZiBsYlJhdGVSZWYKICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5yYXRlUmVmJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICBsYlJhdGVSZWY9b2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQucmF0ZVJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgfQoKICAgICAgICBkZWYgdGVjaFJlZgogICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnRlY2huaWNpYW5SZWYnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgIHRlY2hSZWY9b2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQudGVjaG5pY2lhblJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgfQoKICAgICAgICBkZWYgbGJSYXRlUmVmS2V5CiAgICAgICAgZGVmIGxiUmF0ZVJlZlZhbHVlCiAgICAgICAgaWYobGJSYXRlUmVmLnNpemUoKSA+IDApewogICAgICAgICAgICBsYlJhdGVSZWYgPSBsYlJhdGVSZWYudG9TdHJpbmcoKQogICAgICAgICAgICBsYlJhdGVSZWZLZXkgPSBsYlJhdGVSZWYuc3Vic3RyaW5nKGxiUmF0ZVJlZi5pbmRleE9mKCcoJykrMSxsYlJhdGVSZWYuaW5kZXhPZignKScpKQogICAgICAgICAgICBkZWYgbGJSYXRlUmVmT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKE9QQUEgKyBsYlJhdGVSZWZLZXkpCiAgICAgICAgICAgIGxiUmF0ZVJlZlZhbHVlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZVJlZk9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnJhdGUuTmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgICAgIGxiUmF0ZVJlZlZhbHVlID0gbGJSYXRlUmVmVmFsdWUuc3Vic3RyaW5nKGxiUmF0ZVJlZlZhbHVlLmluZGV4T2YoJygnKSsxLGxiUmF0ZVJlZlZhbHVlLmluZGV4T2YoJyknKSkKICAgICAgICB9CgogICAgICAgIGRlZiB0ZWNoUmVmS2V5CiAgICAgICAgZGVmIHRlY2hSZWZWYWx1ZQogICAgICAgIGlmKHRlY2hSZWYpewogICAgICAgICAgICB0ZWNoUmVmID0gdGVjaFJlZi50b1N0cmluZygpCiAgICAgICAgICAgIGxvZy5kZWJ1ZyAidGVjaFJlZjogIiArIHRlY2hSZWYKICAgICAgICAgICAgdGVjaFJlZktleSA9IHRlY2hSZWYuc3Vic3RyaW5nKHRlY2hSZWYuaW5kZXhPZignKCcpKzEsdGVjaFJlZi5pbmRleE9mKCcpJykpCiAgICAgICAgICAgIGRlZiB0ZWNoUmVmT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKE9QQUEgKyB0ZWNoUmVmS2V5KQogICAgICAgICAgICB0ZWNoUmVmVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaFJlZk9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2huaWNpYW4ubmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgICAgIHRlY2hSZWZWYWx1ZSA9IGxiUmF0ZVJlZlZhbHVlLnN1YnN0cmluZyh0ZWNoUmVmVmFsdWUuaW5kZXhPZignKCcpKzEsdGVjaFJlZlZhbHVlLmluZGV4T2YoJyknKSkKICAgICAgICB9CgogICAgICAgIGlmKChsYkFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJCT1RIIikgfHwgbGJBcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscygiU1VQUExJRVIiKSkgJiYgIWxiRGVsVmFsdWUuZXF1YWxzKCJ0cnVlIikpewogICAgICAgICAgICAvL2dldCAiVE9UQUxfQU1PVU5UX1NVUFBMSUVSIiBmb3IgdGhhdCBjb21wb25lbnQKICAgICAgICAgICAgZGVmIHRvdFN1cHBsaWVyCiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaWJvai5vblNpdGVSYXRlUmVwb3J0LnRvdFN1cHBsaWVyJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgdG90U3VwcGxpZXIgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lib2oub25TaXRlUmF0ZVJlcG9ydC50b3RTdXBwbGllciddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKCF0b3RTdXBwbGllciB8fCB0b3RTdXBwbGllclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKCIwLjAiKSl7CiAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlCiAgICAgICAgICAgICAgICBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlUmF0ZVN1cHBsaWVyLmFkZChsYlJhdGVSZWZWYWx1ZS50b1N0cmluZygpICsgIiAoIiArIHRlY2hSZWZWYWx1ZS50b1N0cmluZygpICsgIikiKQogICAgICAgICAgICAgICAgbG9nLmRlYnVnIGlzc3VlLmtleS50b1N0cmluZygpICsgIiBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlUmF0ZVN1cHBsaWVyOiAiICsgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVTdXBwbGllcgogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSAgICAKfQpkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpCgppZiAoIWVycm9ycyAmJiAhd2FybmluZ3MpewogICAgcmV0dXJuIHRydWUKfWVsc2V7CiAgICBpZighZXJyb3JzICYmIHdhcm5pbmdzKXsKICAgICAgICAvL1NlIGNpIHNvbm8gc29sbyB3YXJuaW5ncyB2ZXJpZmljbyBzZSBsJ3V0ZW50ZSBoYSBnacOgIGRpY2hpYXJhdG8gZGkgdm9sZXIgcHJvc2VndWlyZSBjb211bnF1ZQogICAgICAgIC8vIC0gdHJhbnNpdGlvbiBmaWVsZCAiT1BBQV9DSEVDS19BTkRfQ09ORklSTSI9IlllcyIKICAgICAgICAvLyAtIGluIGNhc28gY29udHJhcmlvIGludmlvIGkgd2FybmluZyBhIEZFCgogICAgICAgIC8vbG9nLmRlYnVnICJ0cmFuc2l0aW9uQ2hlY2s6ICIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykKICAgICAgICAvL2xvZy5kZWJ1ZyAicmVzdWx0OiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKQogICAgICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKS50b1N0cmluZygpLmVxdWFscygiWWVzIikpewogICAgICAgICAgICAvL2xvZy5kZWJ1ZyAicmV0dXJuIHRydWUgLSB0cmFuc2l0aW9uQ2hlY2sgPSBZZXMiCiAgICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKQoKICAgICAgICAgICAgaWYoaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVTdXBwbGllci5zaXplKCkgPiAwKXsKICAgICAgICAgICAgCWRlZiB3TGlzdENvbmZpcm1FbXB0eVJhdGUgPSBuZXcgQXJyYXlMaXN0KCkKICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoIlciKQogICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZCgiU1VQUExJRVJfQ09ORklSTV9FTVBUWV9SQVRFUyIpCiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKG51bGwpCiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlU3VwcGxpZXIpCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHlSYXRlKQogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBpZihpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlTWF0U3VwcGxpZXIuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgIAlkZWYgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZSA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoIlciKQogICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoIlNVUFBMSUVSX0NPTkZJUk1fRU1QVFlfTUFUX1FVT1RFIikKICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKG51bGwpCiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlTWF0U3VwcGxpZXIpCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZSkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgb3V0cHV0LmFkZCh3TGlzdCkKICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigneyJXIjoiJyArIG91dHB1dC50b1N0cmluZygpICsgJyJ9JykKICAgICAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJXIiwgb3V0cHV0LnRvU3RyaW5nKCkpICAgCiAgICAgICAgfQoKICAgIH0KICAgIGlmKGVycm9ycyAmJiAhd2FybmluZ3MpewogICAgICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKQoKICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KQogICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3siRSI6IicgKyBvdXRwdXQudG9TdHJpbmcoKSArICcifScpCiAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJFIiwgb3V0cHV0LnRvU3RyaW5nKCkpICAgCiAgICB9CiAgICBpZihlcnJvcnMgJiYgd2FybmluZ3MpewogICAgICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKQoKICAgICAgICBpZihpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlUmF0ZVN1cHBsaWVyLnNpemUoKSA+IDApewogICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHlSYXRlID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoIlciKQogICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKCJTVVBQTElFUl9DT05GSVJNX0VNUFRZX1JBVEVTIikKCQkJd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZChudWxsKQogICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlU3VwcGxpZXIpCgogICAgICAgICAgICB3TGlzdC5hZGQod0xpc3RDb25maXJtRW1wdHlSYXRlKQogICAgICAgIH0KCiAgICAgICAgaWYoaXNzdWVXYXJuaW5nRW1wdHlRdW90ZU1hdFN1cHBsaWVyLnNpemUoKSA+IDApewogICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZSA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZCgiVyIpCiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKCJTVVBQTElFUl9DT05GSVJNX0VNUFRZX01BVF9RVU9URSIpCiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKG51bGwpCiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKGlzc3VlV2FybmluZ0VtcHR5UXVvdGVNYXRTdXBwbGllcikKCiAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlKQogICAgICAgIH0KCiAgICAgICAgb3V0cHV0LmFkZChlTGlzdCkKICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KQogICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3siV0UiOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQogICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiV0UiLCBvdXRwdXQudG9TdHJpbmcoKSkgIAogICAgfQp9</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">ac4c9242-8ad3-4e5a-bddb-3e8e9e75fe1a</arg>
              <arg name="FIELD_NOTES">YCFgR2VuZXJhdGUgU04gZm9yIG9mZmVyIHRrdHMgLSBPUF9US1RfR0VORVJBVEVEX0ZST01fUkVQQUlSID0gWWVz</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuXG5kZWYgU04gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfU0FQX1NFUlZJQ0VfTk9USUZJQ0FUSU9OXCIpWzBdXG5kZWYgb2ZmZXIgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfT0ZGRVJfVEtUXCIpWzBdXG5kZWYgZ2VuZXJhdGVkRnJvbVJlcGFpciA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9US1RfR0VORVJBVEVEX0ZST01fUkVQQUlSXCIpWzBdXG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcblxuVVJMIHVybFxuSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvblxuXG5sb2cuZGVidWcgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShvZmZlcilcbmxvZy5kZWJ1ZyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG9mZmVyKS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKVxuaWYoKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZ2VuZXJhdGVkRnJvbVJlcGFpcikgIT0gbnVsbCAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGdlbmVyYXRlZEZyb21SZXBhaXIpLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpKSAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG9mZmVyKS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKSAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKFNOKSA9PSBudWxsICYmIGlzc3VlLmlzc3VlVHlwZS5uYW1lICE9IFwiUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXRcIil7XG4gICAgcmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuXG4gICAgZGVmIGJvZHlfcmVxID0gW11cbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXG4gICAgICAgIFwic3RhdHVzXCI6IFwiT1BFXCJcbiAgICBdIFxuXG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL3NlcnZpY2Uvbm90aWZpY2F0aW9uXCJcblxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxuICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNOOiBcIiArIGJvZHlfcmVxXG4gICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxuICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgIFxuICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG4gICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcblxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TTi1VUERBVEVcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICB9XG59XG4gIiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="10">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="field.type">8</arg>
                  <arg name="full.module.key">com.riadalabs.jira.plugins.insightinsight-post-function</arg>
                  <arg name="field.groovyScript">import com.atlassian.jira.component.ComponentAccessor
import com.atlassian.jira.issue.Issue
import com.atlassian.jira.issue.MutableIssue;
import com.atlassian.jira.event.type.EventDispatchOption;
import org.apache.log4j.Level

Properties relativePath = new Properties()
File relativePathFile = new File('/var/atlassian/application-data/jira/insightPathToScript.properties')
relativePathFile.withInputStream {
	relativePath.load(it)
}

Properties properties = new Properties()
File propertiesFile = new File('/var/atlassian/application-data/shared/scripts/opproject.properties')
propertiesFile.withInputStream {
                properties.load(it)
}

/* Get Insight Object Facade from plugin accessor */
Class objectFacadeClass = ComponentAccessor.getPluginAccessor().getClassLoader().findClass(&quot;com.riadalabs.jira.plugins.insight.channel.external.api.facade.ObjectFacade&quot;); 
def objectFacade = ComponentAccessor.getOSGiComponentInstanceOfType(objectFacadeClass);
  
/* Get Insight Object Type Facade from plugin accessor */
Class objectTypeFacadeClass = ComponentAccessor.getPluginAccessor().getClassLoader().findClass(&quot;com.riadalabs.jira.plugins.insight.channel.external.api.facade.ObjectTypeFacade&quot;); 
def objectTypeFacade = ComponentAccessor.getOSGiComponentInstanceOfType(objectTypeFacadeClass);
  
/* Get Insight Object Attribute Facade from plugin accessor */
Class objectTypeAttributeFacadeClass = ComponentAccessor.getPluginAccessor().getClassLoader().findClass(&quot;com.riadalabs.jira.plugins.insight.channel.external.api.facade.ObjectTypeAttributeFacade&quot;); 
def objectTypeAttributeFacade = ComponentAccessor.getOSGiComponentInstanceOfType(objectTypeAttributeFacadeClass);
  
Class objectAttributeBeanFactoryClass = ComponentAccessor.getPluginAccessor().getClassLoader().findClass(&quot;com.riadalabs.jira.plugins.insight.services.model.factory.ObjectAttributeBeanFactory&quot;); 
def objectAttributeBeanFactory = ComponentAccessor.getOSGiComponentInstanceOfType(objectAttributeBeanFactoryClass);

Issue issue = issue

def laborRates = issue.getCustomFieldValue(ComponentAccessor.getCustomFieldManager().getCustomFieldObjectByName(properties['cf.quoteLabourRates'].toString()))

def SUPPLIER_QTY=properties['iobj.onSiteRateReport.suppQty'].toString()
def SUPPLIER_QTY_ID=properties['iobj.onSiteRateReport.suppQty.id'].toString().toInteger()
def CUSTOMER_QTY=properties['iobj.onSiteRateReport.custQty'].toString()
def CUSTOMER_QTY_ID=properties['iobj.onSiteRateReport.custQty.id'].toString().toInteger()
def TECH_NUMBER=properties['iobj.onSiteRateReport.techNum'].toString()
def TECH_NUMBER_ID=properties['iobj.onSiteRateReport.techNum.id'].toString().toInteger()

if(laborRates){
    
    for(rate in laborRates){
        log.info rate.toString()
        def obTriage, quantity, techs
        if(objectFacade.loadObjectAttributeBean(rate.getId(), SUPPLIER_QTY)){
			obTriage = objectFacade.loadObjectAttributeBean(rate.getId(), SUPPLIER_QTY).createMutable()
			quantity = obTriage.getObjectAttributeValueBeans()[0].getValue().toString()
		}
        log.info &quot;quantity: &quot; + quantity
        
        if(objectFacade.loadObjectAttributeBean(rate.getId(), TECH_NUMBER)){
			obTriage = objectFacade.loadObjectAttributeBean(rate.getId(), TECH_NUMBER).createMutable()
			techs = obTriage.getObjectAttributeValueBeans()[0].getValue().toString()
		}
        log.info &quot;techs: &quot; + techs
        
        if(techs != null &amp;&amp; techs &gt; 0){        	
            
            def objectTypeAttributeBean = objectTypeAttributeFacade.loadObjectTypeAttributeBean(CUSTOMER_QTY_ID).createMutable() //The id of the attribute

            /* Create the new attribute bean based on the value */
            def newObjectAttributeBean = objectAttributeBeanFactory.createObjectAttributeBeanForObject(rate, objectTypeAttributeBean, quantity);
            /* Load the attribute bean */
            def objectAttributeBean = objectFacade.loadObjectAttributeBean(rate.getId(), quantity);
            if (objectAttributeBean != null) {
                /* If attribute exist reuse the old id for the new attribute */
                newObjectAttributeBean.setId(objectAttributeBean.getId());
            }
            /* Store the object attribute into Insight. */
            try {
                objectTypeAttributeBean = objectFacade.storeObjectAttributeBean(newObjectAttributeBean);
            } catch (Exception vie) {
                log.warn(&quot;Could not update object attribute due to validation exception:&quot; + vie.getMessage());
            }  
            
        }   
        
    }
}
   </arg>
                  <arg name="field.filepath"></arg>
                  <arg name="class.name">com.riadalabs.jira.plugins.insight.services.jira.postfunction.InsightPostFunction</arg>
                  <arg name="field.description">Copy QUANTITY_SUPPLIER to QUANTITY_CUSTOMER for Labour Rates (TECH_NUMBER != 0)</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">e77878de-a7ba-4bff-b4dd-17dc2ad17bbb</arg>
                  <arg name="FIELD_NOTES">YCFgQ2xlYXIgY2FjaGU=</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG4vKiBSRVNUIEFQSSBwZXIgR2VuZXJhemlvbmUgQWxsZWdhdG8gUmFwcG9ydG8gZGkgSW50ZXJ2ZW50byAqL1xucmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuLypTY3JpcHQgVmFyaWFibGVzKi9cbi8vUGVyIHRlc3QgZGEgY29uc29sZVxuLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIk9QVVQtMTQwNjJcIilcbmJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL2NsZWFyQ2FjaGUvZGF0YU9iamVjdFwiXG5kZWYgYm9keV9yZXEgPSBbXVxuVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbmNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5sb2cuZGVidWcgXCJib2R5X3JlcTogXCIgKyBib2R5X3JlcVxuY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxubG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5jb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbn0iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">a6604d0a-af28-40f6-84ec-7a2dc32df2b0</arg>
                  <arg name="FIELD_NOTES">YCFgT1AgRW1haWwgTm90aWZpY2F0aW9uOiBRVU9URV9GUk9NX1NVUFBMSUVSIC0gbWFudGVudXRhIGNvbWUgcG9zdCBmdW5jdGlvbiBwZXIgZXZpdGFyZSBkaSBnZW5lcmFyZSBibG9jY2hpIGFsIGZvcm5pdG9yZSBsZWdhdGkgYWxsJ2ludmlvIGRpIG5vdGlmaWNoZSBpbnRlcm5l</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnlcbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuZGVmIHJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuXG5kZWYgYm9keV9yZXEgPSBbXG5cdFwidGVtcGxhdGVOYW1lXCI6IHByb3BlcnRpZXNbJ3R0LnF1b3RlRnJvbVN1cHBsaWVyJ10udG9TdHJpbmcoKSxcblx0XCJwZWNcIjogZmFsc2UsXG4gICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXlcbl1cblxuZGVmIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL3RyYW5zYWN0aW9uL21haWwvc2VuZFwiXG5VUkwgdXJsXG51cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG5cbkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbmNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5jb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG5sb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbmNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG5sb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG5sb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG5sb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG5sb2cuZGVidWcgXCJnZXRSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG5cbiIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CkNhdGVnb3J5IGxvZyA9IENhdGVnb3J5LmdldEluc3RhbmNlKCJjb20ub25yZXNvbHZlLmppcmEuZ3Jvb3Z5LlBvc3RGdW5jdGlvbiIpCmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKQppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQpkZWYgcmVxdWVzdE1ldGhvZCA9ICJQT1NUIjsKCklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTsKQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpOwoKZGVmIGJvZHlfcmVxID0gWwoJInRlbXBsYXRlTmFtZSI6IHByb3BlcnRpZXNbJ3R0LmFjY2VwdGVkQnlTdXBwbGllciddLnRvU3RyaW5nKCksCgkicGVjIjogZmFsc2UsCiAgICAiaXNzdWVLZXkiOiBpc3N1ZS5rZXkKXQoKZGVmIGJhc2VVUkwgPSAiaHR0cDovLyIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArICIvb3AvcmVzdC9qaXJhL0FBL3RyYW5zYWN0aW9uL21haWwvc2VuZCIKVVJMIHVybAp1cmwgPSBuZXcgVVJMKGJhc2VVUkwpCgpIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpOwpjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7CmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04Iik7CmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KCJBY2NlcHQiLCAiKi8qIik7CmNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7CmNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTsKY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0KY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcigiVVRGLTgiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH0KbG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtCmNvbm5lY3Rpb24uY29ubmVjdCgpOwoKbG9nLmRlYnVnICJ1cmw6ICIgKyB1cmwKbG9nLmRlYnVnICJSZXNwb25zZUNvZGU6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkKbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKbG9nLmRlYnVnICJnZXRSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKCg==</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE"></arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">006d56d8-dd5b-4b7a-9db1-0b469bd12c47</arg>
                  <arg name="FIELD_NOTES">YCFgT1A6IENhbGN1bGF0ZSBPRkZFUl9DVVNUT01FUl9UT1RBTF9BTU9VTlQsIE9GRkVSX1NVUFBMSUVSX1RPVEFMX0FNT1VOVCArIF9NQVRFUklBTCBlIF9MQUJPVVI=</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnlcbmltcG9ydCBncm9vdnkuanNvbi5Kc29uQnVpbGRlclxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29uZmlnLnV0aWwuSmlyYUhvbWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvblxuaW1wb3J0IGphdmEudGV4dC5TaW1wbGVEYXRlRm9ybWF0XG5pbXBvcnQgamF2YS50ZXh0LlBhcnNlRXhjZXB0aW9uXG5pbXBvcnQgamF2YS50ZXh0LkRlY2ltYWxGb3JtYXRcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS51dGlsLklzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5cbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG4vKlNjcmlwdCBWYXJpYWJsZXMqL1xuLy9QZXIgUG9zdCBGdW5jdGlvblxuaXNzdWUgPSBpc3N1ZVxuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL0lzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKVxuLy9pc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIk9QVVQtMzM4MlwiKVxuXG4vKkluc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHMqL1xuQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyAgXG5DbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTtcbm9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbm9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XG4vKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuaXFsRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKGlxbEZhY2FkZUNsYXNzKTtcbkNsYXNzIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5zZXJ2aWNlcy5tb2RlbC5mYWN0b3J5Lk9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5XCIpO1xub2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpOyBcbm9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcblxuLypDT1NUQU5USSovXG5PUEFBPXByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXVxuLy9BdHRyaWJ1dGUgSURzXG5SQVRFX1RPVEFMX0FNT1VOVF9TVVBQTElFUj1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQudG90U3VwcC5pZCddXG5SQVRFX1RPVEFMX0FNT1VOVF9DVVNUT01FUj1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdC5pZCddXG5DT01QT05FTlRfVE9UQUxfQU1PVU5UX1NVUFBMSUVSPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdFN1cHAuaWQnXVxuQ09NUE9ORU5UX1RPVEFMX0FNT1VOVF9DVVNUT01FUj1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RDdXN0LmlkJ11cbi8vT2JqVHlwZSBJRHNcbk9OU0lURV9SQVRFX1JFUE9SVD1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQnXVxuQ09NUE9ORU5UPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50J11cblxuLypDdXN0b21maWVsZHMqL1xuZGVmIEN1c3RPZmZlclRvdCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY3VzdG9tZXJPZmZlclRvdEFtb3VudCddLnRvU3RyaW5nKCkpWzBdXG5kZWYgU3VwcE9mZmVyVG90ID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zdXBwbGllck9mZmVyVG90QW1vdW50J10udG9TdHJpbmcoKSlbMF1cblxuZGVmIEN1c3RPZmZlck1hdFRvdCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY3VzdG9tZXJPZmZlck1hdGVyaWFscyddLnRvU3RyaW5nKCkpWzBdXG5kZWYgU3VwcE9mZmVyTWF0VG90ID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zdXBwbGllck9mZmVyTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBDdXN0T2ZmZXJMYWJUb3QgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmN1c3RvbWVyT2ZmZXJMYWJvdXInXS50b1N0cmluZygpKVswXVxuZGVmIFN1cHBPZmZlckxhYlRvdCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yuc3VwcGxpZXJPZmZlckxhYm91ciddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiByZXBNYXRlcmlhbHMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnF1b3RlTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBsYWJvdXJSYXRlcyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YucXVvdGVMYWJvdXJSYXRlcyddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGlzc3VlXG5kZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcblxuLypWYXJpYWJsZXMqL1xuZGVmIGN1c3RvbWVyT2ZmZXJUb3QsIHN1cHBsaWVyT2ZmZXJUb3RcbmRvdWJsZSB0b3RBbW91bnRTdXBwbGllciA9IDBcbmRvdWJsZSB0b3RBbW91bnRDdXN0b21lciA9IDBcbmRlZiByZXBNYXRMaXN0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpXG5kZWYgbGFib3VyUmF0ZXNMaXN0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcylcblxuZGVmIHRvdEN1c3RNYXQgPSAwXG5kZWYgdG90Q3VzdExhYiA9IDBcbmRlZiB0b3RTdXBwTWF0ID0gMFxuZGVmIHRvdFN1cHBMYWI9IDBcblxuZm9yKG1hdCBpbiByZXBNYXRMaXN0KXtcbiAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5kIGdldCBvYmplY3RcbiAgICBkZWYgY29tcG9uZW50PW1hdC50b1N0cmluZygpXG4gICAgZGVmIGNvbXBvbmVudEtleSA9IGNvbXBvbmVudC5zdWJzdHJpbmcoY29tcG9uZW50Lmxhc3RJbmRleE9mKCcoJykrMSxjb21wb25lbnQubGFzdEluZGV4T2YoJyknKSlcbiAgICBkZWYgY29tcG9uZW50T2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGNvbXBvbmVudEtleSlcblxuICAgIC8vTUFURVJJQUxfUkVGXG4gICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50Lm1hdGVyaWFsUmVmJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgZGVmIG1hdGVyaWFsID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgXG4gICAgLy9ERUxFVEVEXG4gICAgZGVmIGRlbGV0ZWRcbiAgICBpZiAob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5kZWxldGVkJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuZGVsZXRlZCddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKVxuICAgIFx0ZGVsZXRlZCA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuICAgICAgICBkZWxldGVkID0gZGVsZXRlZFswXS5nZXRWYWx1ZSgpXG4gICAgfVxuICAgIFxuICAgIC8vVE9UQUxfQU1PVU5UX1NVUFBMSUVSXG4gICAgaWYoKGRlbGV0ZWQ9PW51bGwgfHwgZGVsZXRlZCE9dHJ1ZSkgJiYgb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RTdXBwJ10udG9TdHJpbmcoKSkhPW51bGwpe1xuICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQudG90U3VwcCddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICBkZWYgdG90U3VwcGxpZXIgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgdG90QW1vdW50U3VwcGxpZXIgPSB0b3RBbW91bnRTdXBwbGllciArIHRvdFN1cHBsaWVyWzBdLmdldFZhbHVlKCkudG9Eb3VibGUoKVxuICAgICAgICB0b3RTdXBwTWF0ID0gdG90U3VwcE1hdCArIHRvdFN1cHBsaWVyWzBdLmdldFZhbHVlKCkudG9Eb3VibGUoKVxuICAgIH1cbiAgICBcbiAgICAvL1RPVEFMX0FNT1VOVF9DVVNUT01FUlxuICAgIGlmKChkZWxldGVkPT1udWxsIHx8IGRlbGV0ZWQhPXRydWUpICYmIG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQudG90Q3VzdCddLnRvU3RyaW5nKCkpIT1udWxsKXtcbiAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdEN1c3QnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgZGVmIHRvdEN1c3RvbWVyID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgIHRvdEFtb3VudEN1c3RvbWVyID0gdG90QW1vdW50Q3VzdG9tZXIgKyB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvRG91YmxlKClcbiAgICAgICAgdG90Q3VzdE1hdCA9IHRvdEN1c3RNYXQgKyB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvRG91YmxlKClcbiAgICB9XG4gICAgICAgIFxuICAgIGlmIChtYXRlcmlhbCE9bnVsbCAmJiAoZGVsZXRlZD09bnVsbCB8fCBkZWxldGVkIT10cnVlKSl7IFxuICAgICAgICAvKlZlcmlmaWNvIHNlIHNpIHRyYXR0YSBkaSB1biBtYXRlcmlhbGUgU0FQIG8gTk8gU0FQKi9cbiAgICAgICAgbWF0ZXJpYWwgPSBtYXRlcmlhbC50b1N0cmluZygpXG4gICAgICAgIG1hdGVyaWFsS2V5ID0gbWF0ZXJpYWwuc3Vic3RyaW5nKG1hdGVyaWFsLmxhc3RJbmRleE9mKCcoJykrMSxtYXRlcmlhbC5sYXN0SW5kZXhPZignKScpKVxuXG4gICAgICAgIC8qTUFURVJJQUwgLSBTQVAqL1xuICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihtYXRlcmlhbEtleS50b0ludGVnZXIoKSwgcHJvcGVydGllc1snaW9iai5tYXRlcmlhbC5zYXAnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgc2FwID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG5cbiAgICAgICAgLypNQVRFUklBTCAtIE1BVE5SKi9cbiAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obWF0ZXJpYWxLZXkudG9JbnRlZ2VyKCksIHByb3BlcnRpZXNbJ2lvYmoubWF0ZXJpYWwubWF0bnInXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgbWF0bnIgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcblxuICAgICAgICBpZihzYXAhPW51bGwgJiYgbWF0bnIhPW51bGwpe1xuICAgICAgICAgICAgbWF0bnI9bWF0bnIudG9TdHJpbmcoKVxuICAgICAgICAgICAgbWF0bnIgPSBtYXRuci5zdWJzdHJpbmcobWF0bnIubGFzdEluZGV4T2YoJygnKSsxLG1hdG5yLmxhc3RJbmRleE9mKCcpJykpXG4gICAgICAgICAgICBzYXA9c2FwLnRvU3RyaW5nKClcbiAgICAgICAgICAgIHNhcCA9IHNhcC5zdWJzdHJpbmcoc2FwLmxhc3RJbmRleE9mKCcoJykrMSxzYXAubGFzdEluZGV4T2YoJyknKSlcblxuICAgICAgICAgICAgaWYoc2FwLmVxdWFsc0lnbm9yZUNhc2UoXCJ0cnVlXCIpKXtcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJNYXRlcmlhbGUgc2FwOiBcIiArIHNhcFxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiTWF0ZXJpYWxlIE5PTiBzYXA6IFwiICsgc2FwXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH1cbn1cblxuZm9yKHJhdGUgaW4gbGFib3VyUmF0ZXNMaXN0KXtcbiAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5kIGdldCBvYmplY3RcbiAgICBkZWYgbGFiUmF0ZT1yYXRlLnRvU3RyaW5nKClcbiAgICBkZWYgbGFiUmF0ZUtleSA9IGxhYlJhdGUuc3Vic3RyaW5nKGxhYlJhdGUubGFzdEluZGV4T2YoJygnKSsxLGxhYlJhdGUubGFzdEluZGV4T2YoJyknKSlcbiAgICBkZWYgbGFiUmF0ZU9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihsYWJSYXRlS2V5KVxuXG4gICAgLy9NQVRFUklBTF9SRUZcbiAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYWJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5yYXRlUmVmJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgZGVmIHJhdGVEZXNjID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgXG4gICAgLy9ERUxFVEVEXG4gICAgZGVmIGRlbGV0ZWRcbiAgICBpZiAob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxhYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKSl7XG4gICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxhYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICBcdGRlbGV0ZWQgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgZGVsZXRlZCA9IGRlbGV0ZWRbMF0uZ2V0VmFsdWUoKVxuICAgIH1cbiAgICBcbiAgICAvL1RPVEFMX0FNT1VOVF9TVVBQTElFUlxuICAgIGlmKChkZWxldGVkPT1udWxsIHx8IGRlbGV0ZWQhPXRydWUpICYmIG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYWJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lib2oub25TaXRlUmF0ZVJlcG9ydC50b3RTdXBwbGllciddLnRvU3RyaW5nKCkpIT1udWxsKXtcbiAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGFiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90U3VwcGxpZXInXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgZGVmIHRvdFN1cHBsaWVyID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgIHRvdEFtb3VudFN1cHBsaWVyID0gdG90QW1vdW50U3VwcGxpZXIgKyB0b3RTdXBwbGllclswXS5nZXRWYWx1ZSgpLnRvRG91YmxlKClcbiAgICAgICAgdG90U3VwcExhYiA9IHRvdFN1cHBMYWIgKyB0b3RTdXBwbGllclswXS5nZXRWYWx1ZSgpLnRvRG91YmxlKClcbiAgICB9XG4gICAgXG4gICAgLy9UT1RBTF9BTU9VTlRfQ1VTVE9NRVJcbiAgICBpZigoZGVsZXRlZD09bnVsbCB8fCBkZWxldGVkIT10cnVlKSAmJiBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGFiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdG9tZXInXS50b1N0cmluZygpKSE9bnVsbCl7XG4gICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxhYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaWJvai5vblNpdGVSYXRlUmVwb3J0LnRvdEN1c3RvbWVyJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgIGRlZiB0b3RDdXN0b21lciA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuICAgICAgICB0b3RBbW91bnRDdXN0b21lciA9IHRvdEFtb3VudEN1c3RvbWVyICsgdG90Q3VzdG9tZXJbMF0uZ2V0VmFsdWUoKS50b0RvdWJsZSgpXG4gICAgICAgIHRvdEN1c3RMYWIgPSB0b3RDdXN0TGFiICsgdG90Q3VzdG9tZXJbMF0uZ2V0VmFsdWUoKS50b0RvdWJsZSgpXG4gICAgfVxufVxuXG5cblxubG9nLmRlYnVnIFwiVE9UQUxFIE9GRkVSVEEgRk9STklUT1JFOiBcIiArIG5ldyBEZWNpbWFsRm9ybWF0KFwiIy4jI1wiKS5mb3JtYXQodG90QW1vdW50U3VwcGxpZXIpXG5sb2cuZGVidWcgXCJUT1RBTEUgT0ZGRVJUQSBDTElFTlRFOiBcIiArIG5ldyBEZWNpbWFsRm9ybWF0KFwiIy4jI1wiKS5mb3JtYXQodG90QW1vdW50Q3VzdG9tZXIpXG5cbklzc3VlQ2hhbmdlSG9sZGVyIGNoYW5nZUhvbGRlciA9IG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKVxuQ3VzdE9mZmVyVG90LnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKEN1c3RPZmZlclRvdCksdG90QW1vdW50Q3VzdG9tZXIudG9Eb3VibGUoKSksY2hhbmdlSG9sZGVyKVxuU3VwcE9mZmVyVG90LnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKFN1cHBPZmZlclRvdCksdG90QW1vdW50U3VwcGxpZXIudG9Eb3VibGUoKSksY2hhbmdlSG9sZGVyKVxuXG5DdXN0T2ZmZXJNYXRUb3QudXBkYXRlVmFsdWUobnVsbCwgaXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoQ3VzdE9mZmVyTWF0VG90KSx0b3RDdXN0TWF0LnRvRG91YmxlKCkpLGNoYW5nZUhvbGRlcilcblN1cHBPZmZlck1hdFRvdC51cGRhdGVWYWx1ZShudWxsLCBpc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShTdXBwT2ZmZXJNYXRUb3QpLHRvdFN1cHBNYXQudG9Eb3VibGUoKSksY2hhbmdlSG9sZGVyKVxuQ3VzdE9mZmVyTGFiVG90LnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKEN1c3RPZmZlckxhYlRvdCksdG90Q3VzdExhYi50b0RvdWJsZSgpKSxjaGFuZ2VIb2xkZXIpXG5TdXBwT2ZmZXJMYWJUb3QudXBkYXRlVmFsdWUobnVsbCwgaXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoU3VwcE9mZmVyTGFiVG90KSx0b3RTdXBwTGFiLnRvRG91YmxlKCkpLGNoYW5nZUhvbGRlcilcbiIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue">50</arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_22693</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="field2">customfield_22647</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="271" name="Quote Reminder">
          <meta name="opsbar-sequence">20</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <results>
            <unconditional-result old-status="null" status="null" step="9">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">0937d5c2-63f9-4330-9f2b-60f37a763628</arg>
                  <arg name="FIELD_NOTES">YCFgT1AgRW1haWwgTm90aWZpY2F0aW9uOiBSRU1JTkRFUl9GT1JfU1VQUExJRVJfUVVPVEUgKyBVcGRhdGUgZmllbGQgUkVNSU5ERVJfRk9SX1NVUFBMSUVSX1FVT1RFIHdpdGggbmV3IGR1ZSBkYXRl</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmsgXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXJcbmltcG9ydCBqYXZhLnNxbC5UaW1lc3RhbXBcbmltcG9ydCBqYXZhLnRleHQuU2ltcGxlRGF0ZUZvcm1hdFxuaW1wb3J0IGphdmEudGV4dC5EYXRlRm9ybWF0XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5Jc3N1ZUNoYW5nZUhvbGRlclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS51dGlsLkRlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5ldmVudC50eXBlLkV2ZW50RGlzcGF0Y2hPcHRpb25cbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG5VUkwgdXJsXG5IdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uXG5kZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBpc3N1ZVxuZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXG5cbmRlZiByZW1pbmRlckRhdGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yud2ZSZW1pbmRlckZvclNRdW90ZSddLnRvU3RyaW5nKCkpWzBdXG5cbnJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcbmRlZiBib2R5X3JlcSA9IFtdXG5cbmJvZHlfcmVxID0gW1xuICAgICAgICBcInRlbXBsYXRlTmFtZVwiOiBwcm9wZXJ0aWVzWyd0dC5yZW1pbmRlclRvUyddLnRvU3RyaW5nKCksXG4gICAgICAgIFwicGVjXCI6IGZhbHNlLFxuICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleVxuXSBcblxuYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvdHJhbnNhY3Rpb24vbWFpbC9zZW5kXCJcbnVybCA9IG5ldyBVUkwoYmFzZVVSTClcbmNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbmNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5jb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG5sb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbmNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG5kZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuXG5pZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikgJiYgIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDRcIikpe1xuICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuXG4gICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxuICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcbiAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcblxuICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICBlTGlzdEVycm9ycy5hZGQoXCJTRU5ETUFJTFwiKVxuICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKSlcbiAgICBlTGlzdEVycm9ycy5hZGQoanNvbl9vYmplY3QubWVzc2FnZSlcbiAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG4gICAgXG4gICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9Jylcbn1lbHNle1xuXG4gICAgZGVmIGRhdGUgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlbWluZGVyRGF0ZSlcbiAgICBEYXRlIG5ld1REViA9IG5ldyBEYXRlKClcbiAgICBcbiAgICBkZWYgbmV3RGF0ZWZvcm1hdCA9IG5ld1REVi5mb3JtYXQoJ01NL2RkL3l5eXknKVxuICAgIFNpbXBsZURhdGVGb3JtYXQgc2RmID0gbmV3IFNpbXBsZURhdGVGb3JtYXQoXCJNTS9kZC95eXl5XCIpO1xuXHRkZWYgY2FsID0gQ2FsZW5kYXIuZ2V0SW5zdGFuY2UoKVxuICAgIGNhbC5zZXRUaW1lKHNkZi5wYXJzZShuZXdEYXRlZm9ybWF0KSk7XG4gICAgY2FsLmFkZChDYWxlbmRhci5EQVRFLCArMik7IFxuXG4gICAgVGltZXN0YW1wIERlZlRERCA9IG5ldyBUaW1lc3RhbXAoY2FsLmdldFRpbWVJbk1pbGxpcygpKVxuIFxuICAgIG1pLnNldEN1c3RvbUZpZWxkVmFsdWUocmVtaW5kZXJEYXRlLCBEZWZUREQpO1xuXHRDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7IFxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWUKaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0OwppbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeQpDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRykKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGluayAKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIKaW1wb3J0IGphdmEuc3FsLlRpbWVzdGFtcAppbXBvcnQgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQKaW1wb3J0IGphdmEudGV4dC5EYXRlRm9ybWF0CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuSXNzdWVDaGFuZ2VIb2xkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS51dGlsLkRlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvbgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQpJc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7CkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTsKZGVmIHJlcXVlc3RNZXRob2QKZGVmIGJhc2VVUkwKClVSTCB1cmwKSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbgpkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBpc3N1ZQpkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKCmRlZiByZW1pbmRlckRhdGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yud2ZSZW1pbmRlckZvclNRdW90ZSddLnRvU3RyaW5nKCkpWzBdCgpyZXF1ZXN0TWV0aG9kID0gIlBPU1QiOwpkZWYgYm9keV9yZXEgPSBbXQoKYm9keV9yZXEgPSBbCiAgICAgICAgInRlbXBsYXRlTmFtZSI6IHByb3BlcnRpZXNbJ3R0LnJlbWluZGVyVG9TJ10udG9TdHJpbmcoKSwKICAgICAgICAicGVjIjogZmFsc2UsCiAgICAgICAgImlzc3VlS2V5IjogaXNzdWUua2V5Cl0gCgpiYXNlVVJMID0gImh0dHA6Ly8iICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyAiL29wL3Jlc3QvamlyYS9BQS90cmFuc2FjdGlvbi9tYWlsL3NlbmQiCnVybCA9IG5ldyBVUkwoYmFzZVVSTCkKY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpOwpjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eSgiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOCIpOwpjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eSgiQWNjZXB0IiwgIiovKiIpOwpjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpOwpjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7CmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtCmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoIlVURi04IikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9CmxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbQpjb25uZWN0aW9uLmNvbm5lY3QoKTsKCmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCmRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKQpkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpCgppZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoIjIwMCIpKXsKICAgIGxvZy5kZWJ1ZyAidXJsOiAiICsgdXJsCiAgICBsb2cuZGVidWcgIlJlc3BvbnNlQ29kZToiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKQogICAgbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKICAgIGVMaXN0RXJyb3JzLmFkZCgiRSIpCiAgICBlTGlzdEVycm9ycy5hZGQoIlNFTkRNQUlMIikKICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArICIgIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkpCiAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKQogICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKQoKICAgIG91dHB1dC5hZGQoZUxpc3QpCiAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJFIiwgb3V0cHV0LnRvU3RyaW5nKCkpCn1lbHNlewoKICAgIGRlZiBkYXRlID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZW1pbmRlckRhdGUpCiAgICBEYXRlIG5ld1REViA9IG5ldyBEYXRlKCkKICAgIAogICAgZGVmIG5ld0RhdGVmb3JtYXQgPSBuZXdURFYuZm9ybWF0KCdNTS9kZC95eXl5JykKICAgIFNpbXBsZURhdGVGb3JtYXQgc2RmID0gbmV3IFNpbXBsZURhdGVGb3JtYXQoIk1NL2RkL3l5eXkiKTsKCWRlZiBjYWwgPSBDYWxlbmRhci5nZXRJbnN0YW5jZSgpCiAgICBjYWwuc2V0VGltZShzZGYucGFyc2UobmV3RGF0ZWZvcm1hdCkpOwogICAgY2FsLmFkZChDYWxlbmRhci5EQVRFLCArMik7IAoKICAgIFRpbWVzdGFtcCBEZWZUREQgPSBuZXcgVGltZXN0YW1wKGNhbC5nZXRUaW1lSW5NaWxsaXMoKSkKIAogICAgbWkuc2V0Q3VzdG9tRmllbGRWYWx1ZShyZW1pbmRlckRhdGUsIERlZlRERCk7CglDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7IAp9</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="10" name="Supplier Quote Received">
      <meta name="jira.status.id">14333</meta>
      <actions>
        <action id="281" name="Invia Offerta al Cliente" view="fieldscreen">
          <meta name="opsbar-sequence">10</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">19926</meta>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">87c923e5bb5b4e6303d9b8ce896495c53f9b7957</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIFJlcXVpcmVkIEZpZWxkcw==</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyCmltcG9ydCBncm9vdnkuanNvbi5Kc29uQnVpbGRlcgppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXIKCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWUKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWUKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGluawoKaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2UKCmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CmRlZiBDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRykKIApJc3N1ZSBpc3N1ZSA9IGlzc3VlCi8vUGVyIHRlc3QgZGEgY29uc29sZQovL0lzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTsKLy9pc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZSgiQUFTLTI3NjEiKQoKZGVmIGVycm9ycyA9IGZhbHNlCmRlZiB3YXJuaW5ncyA9IGZhbHNlCmRlZiByZWxhdGVzSW5Jc3N1ZUxpbms9ZmFsc2UKZGVmIHJlbGF0ZXNPdXRJc3N1ZUxpbms9ZmFsc2UKZGVmIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGVMaW5rZWQgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIHdMaXN0Q29uZmlybUVtcHR5UmF0ZVF1b3RlTGlua2VkID0gbmV3IEFycmF5TGlzdCgpCgovKkNhbXBpIGNvbiBkYXRpIG9iYmxpZ2F0b3JpIHBlciB0aWNrZXQgbm9uIGEgY29ycG8qLwpkZWYgcmVwTWF0ZXJpYWxzID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5xdW90ZU1hdGVyaWFscyddLnRvU3RyaW5nKCkpWzBdCmRlZiBsYWJvdXJSYXRlcyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YucXVvdGVMYWJvdXJSYXRlcyddLnRvU3RyaW5nKCkpWzBdCgovKkNvbmZlcm1hIHV0ZW50ZSBzdSB3YXJuaW5ncyovCmRlZiB0cmFuc2l0aW9uQ2hlY2sgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmNoZWNrQW5kQ29uZmlybSddLnRvU3RyaW5nKCkpWzBdCmRlZiB0cmFuc2l0aW9uQ2hlY2tWYWx1ZSA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKQoKLypJbnNpZ2h0IFNjaGVtYSBJRHMqLwpkZWYgREJPYmplY3RzID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8nXS50b1N0cmluZygpICsgIi0iCmRlZiBPUEFBID0gcHJvcGVydGllc1snaXNjaGVtYS5hYSddLnRvU3RyaW5nKCkgKyAiLSIKCi8qQXJyYXkgd2FybmluZ3MgZWQgZXJyb3JzIHBlciBsYSBpc3N1ZSBwcmluY2lwYWxlLCB1bm8gcGVyIG9nbmkgdGlwb2xvZ2lhIGRpIGVycm9yZSBvIHdhcm5pbmcqLwpkZWYgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyID0gbmV3IEFycmF5TGlzdCgpCmRlZiBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyID0gbmV3IEFycmF5TGlzdCgpCgovKlZlcmlmaWNhIGNhbXBpIHN1IHRpY2tldCBvZ2dldHRvIGRlbGxhIHRyYW5zYXppb25lKi8KLy9PUF9RVU9URV9NQVRFUklBTFMKaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpIT1udWxsICYmIChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpICE9ICIiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgIC8vbG9nLmRlYnVnICJNYXRlcmlhbGk6ICIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykKICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qLwogICAgLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzCiAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZSIpOyAgCiAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CiAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpOwogICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7CgogICAgZGVmIHJlcE1hdExpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykKCiAgICBmb3IobWF0IGluIHJlcE1hdExpc3QpewogICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdAogICAgICAgIGRlZiBjb21wb25lbnQ9bWF0LnRvU3RyaW5nKCkKICAgICAgICAvL2RlZiBjb21wb25lbnRLZXkgPSBjb21wb25lbnQuc3Vic3RyaW5nKGNvbXBvbmVudC5pbmRleE9mKCcoJykrMSxjb21wb25lbnQuaW5kZXhPZignKScpKQogICAgICAgIGRlZiBjb21wb25lbnRLZXkgPSBjb21wb25lbnQuc3Vic3RyaW5nKGNvbXBvbmVudC5pbmRleE9mKCcoJytPUEFBKSsxLGNvbXBvbmVudC5sZW5ndGgoKS0xKQogICAgICAgIGRlZiBjb21wb25lbnRPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oY29tcG9uZW50S2V5KQoKICAgICAgICAvL2dldCAiQVBQTElFRF9UTyIgZm9yIHRoYXQgY29tcG9uZW50CiAgICAgICAgZGVmIGFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuYXBwbGllZFRvJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpIGFzIEFycmF5TGlzdAogICAgICAgIGRlZiBhcHBsaWVkVG9WYWx1ZQogICAgICAgIGlmKGFwcGxpZWRUby5zaXplKCkgPiAwKXsKICAgICAgICAgICAgYXBwbGllZFRvID0gYXBwbGllZFRvLnRvU3RyaW5nKCkKICAgICAgICAgICAgYXBwbGllZFRvVmFsdWUgPSBhcHBsaWVkVG8uc3Vic3RyaW5nKGFwcGxpZWRUby5pbmRleE9mKCcoJykrMSxhcHBsaWVkVG8uaW5kZXhPZignKScpKQogICAgICAgICAgICAvL2xvZy5kZWJ1ZyAiYXBwbGllZFRvVmFsdWU6ICIgKyBhcHBsaWVkVG9WYWx1ZQogICAgICAgIH0KICAgICAgICAvL2dldCAiREVMRVRFRCIgZm9yIHRoYXQgcmF0ZQogICAgICAgIGRlZiBkZWxldGVkCiAgICAgICAgZGVmIGRlbGV0ZWRWYWx1ZQogICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuZGVsZXRlZCddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgZGVsZXRlZCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuZGVsZXRlZCddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgICAgIGxvZy5kZWJ1ZyAiZGVsZXRlZDogIiArIGRlbGV0ZWQKICAgICAgICAgICAgaWYgKGRlbGV0ZWQpewogICAgICAgICAgICAgICAgZGVsZXRlZFZhbHVlID0gZGVsZXRlZC5zdWJzdHJpbmcoZGVsZXRlZC5pbmRleE9mKCcoJykrMSxkZWxldGVkLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZGVmIG1hdE51bWJlcgogICAgICAgIGRlZiBtYXROdW1iZXJLZXkKICAgICAgICBkZWYgbWF0TnVtYmVyVmFsdWUKICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50Lm1hdGVyaWFsUmVmJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICBtYXROdW1iZXIgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50Lm1hdGVyaWFsUmVmJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpIGFzIEFycmF5TGlzdAogICAgICAgICAgICBpZihtYXROdW1iZXIuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICBtYXROdW1iZXIgPSBtYXROdW1iZXIudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgbWF0TnVtYmVyS2V5ID0gbWF0TnVtYmVyLnN1YnN0cmluZyhtYXROdW1iZXIuaW5kZXhPZignKCcpKzEsbWF0TnVtYmVyLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIGRlZiBtYXROdW1iZXJPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oREJPYmplY3RzICsgbWF0TnVtYmVyS2V5KQogICAgICAgICAgICAgICAgbWF0TnVtYmVyVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obWF0TnVtYmVyT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoubWF0ZXJpYWwubmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgICAgICAgICBtYXROdW1iZXJWYWx1ZSA9IG1hdE51bWJlclZhbHVlLnN1YnN0cmluZyhtYXROdW1iZXJWYWx1ZS5pbmRleE9mKCcoJykrMSxtYXROdW1iZXJWYWx1ZS5pbmRleE9mKCcpJykpCiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGRlZiBzZXJpYWxOdW1iZXIKICAgICAgICBkZWYgc2VyaWFsTnVtYmVyVmFsdWUKICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnNlcmlhbE51bWJlciddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgc2VyaWFsTnVtYmVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5zZXJpYWxOdW1iZXInXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkgYXMgQXJyYXlMaXN0CiAgICAgICAgICAgIGlmKHNlcmlhbE51bWJlci5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgIHNlcmlhbE51bWJlciA9IHNlcmlhbE51bWJlci50b1N0cmluZygpCiAgICAgICAgICAgICAgICBzZXJpYWxOdW1iZXJWYWx1ZSA9IHNlcmlhbE51bWJlci5zdWJzdHJpbmcoc2VyaWFsTnVtYmVyLmluZGV4T2YoJygnKSsxLHNlcmlhbE51bWJlci5pbmRleE9mKCcpJykpCiAgICAgICAgICAgIH0gIAogICAgICAgIH0JCQkJCgogICAgICAgIGlmKChhcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscygiQk9USCIpIHx8IGFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJDVVNUT01FUiIpKSAmJiAhZGVsZXRlZFZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJ0cnVlIikpewogICAgICAgICAgICAvL2dldCAiVE9UQUxfQU1PVU5UX0NVU1RPTUVSIiBmb3IgdGhhdCBjb21wb25lbnQKICAgICAgICAgICAgZGVmIHRvdEN1c3RvbWVyIAogICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdEN1c3QnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICB0b3RDdXN0b21lciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQudG90Q3VzdCddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKCF0b3RDdXN0b21lciB8fCB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKCIwLjAiKSl7CiAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlCiAgICAgICAgICAgICAgICBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXIuYWRkKG1hdE51bWJlclZhbHVlLnRvU3RyaW5nKCkgKyAoKCFzZXJpYWxOdW1iZXIudG9TdHJpbmcoKS5lcXVhbHMoIm51bGwiKSAmJiAhc2VyaWFsTnVtYmVyLnRvU3RyaW5nKCkuZXF1YWxzKCJbXSIpKSA/ICIgKCIgKyBzZXJpYWxOdW1iZXJWYWx1ZS50b1N0cmluZygpICsgIikiIDogIiIpKSAgIAogICAgICAgICAgICAgICAgbG9nLmRlYnVnIGlzc3VlLmtleS50b1N0cmluZygpICsgIiBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXI6ICIgKyBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXIKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0gICAgCn0gIAoKLy9PUF9RVU9URV9MQUJPVVJfUkFURVMKaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcykhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxhYm91clJhdGVzKSAhPSAiIiAmJiAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcykudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgIGxvZy5kZWJ1ZyAiTGFib3VyIHJhdGVzOiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcykKICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qLwogICAgLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzCiAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZSIpOyAgCiAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CiAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpOwogICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7CgogICAgZGVmIGxhYm91clJhdGVzTGlzdCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpCgogICAgZm9yKGxiIGluIGxhYm91clJhdGVzTGlzdCl7CiAgICAgICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0CiAgICAgICAgZGVmIGxiUmF0ZT1sYi50b1N0cmluZygpCiAgICAgICAgZGVmIGxiUmF0ZUtleSA9IGxiUmF0ZS5zdWJzdHJpbmcobGJSYXRlLmluZGV4T2YoJygnKSsxLGxiUmF0ZS5pbmRleE9mKCcpJykpCiAgICAgICAgZGVmIGxiUmF0ZU9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihsYlJhdGVLZXkpCiAgICAgICAgLy9nZXQgIkFQUExJRURfVE8iIGZvciB0aGF0IHJhdGUKICAgICAgICBkZWYgbGJBcHBsaWVkVG8gPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgZGVmIGxiQXBwbGllZFRvVmFsdWUgPSBsYkFwcGxpZWRUby5zdWJzdHJpbmcobGJBcHBsaWVkVG8uaW5kZXhPZignKCcpKzEsbGJBcHBsaWVkVG8uaW5kZXhPZignKScpKQogICAgICAgIC8vZ2V0ICJERUxFVEVEIiBmb3IgdGhhdCByYXRlCiAgICAgICAgZGVmIGRlbGV0ZWQKICAgICAgICBkZWYgZGVsZXRlZFZhbHVlCiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5kZWxldGVkJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICBkZWxldGVkID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5kZWxldGVkJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgbG9nLmRlYnVnICJkZWxldGVkOiAiICsgZGVsZXRlZAogICAgICAgICAgICBpZiAoZGVsZXRlZCl7CiAgICAgICAgICAgICAgICBkZWxldGVkVmFsdWUgPSBkZWxldGVkLnN1YnN0cmluZyhkZWxldGVkLmluZGV4T2YoJygnKSsxLGRlbGV0ZWQuaW5kZXhPZignKScpKQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBkZWYgbGJSYXRlUmVmCiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQucmF0ZVJlZiddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgbGJSYXRlUmVmPW9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgIH0KICAgICAgICBsb2cuZGVidWcgImxiUmF0ZVJlZjogIiArIGxiUmF0ZVJlZgoKICAgICAgICBkZWYgdGVjaFJlZgogICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaWJvai5vblNpdGVSYXRlUmVwb3J0LnRlY2huaWNpYW5SZWYnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgIHRlY2hSZWY9b2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudGVjaG5pY2lhblJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgfQoKICAgICAgICBkZWYgbGJSYXRlUmVmS2V5CiAgICAgICAgZGVmIGxiUmF0ZVJlZlZhbHVlCiAgICAgICAgaWYobGJSYXRlUmVmICYmIGxiUmF0ZVJlZi5zaXplKCkgPiAwKXsKICAgICAgICAgICAgbGJSYXRlUmVmID0gbGJSYXRlUmVmLnRvU3RyaW5nKCkKICAgICAgICAgICAgbGJSYXRlUmVmS2V5ID0gbGJSYXRlUmVmLnN1YnN0cmluZyhsYlJhdGVSZWYuaW5kZXhPZignKCcpKzEsbGJSYXRlUmVmLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgZGVmIGxiUmF0ZVJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihPUEFBICsgbGJSYXRlUmVmS2V5KQogICAgICAgICAgICBsYlJhdGVSZWZWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5yYXRlLk5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICBsYlJhdGVSZWZWYWx1ZSA9IGxiUmF0ZVJlZlZhbHVlLnN1YnN0cmluZyhsYlJhdGVSZWZWYWx1ZS5pbmRleE9mKCcoJykrMSxsYlJhdGVSZWZWYWx1ZS5pbmRleE9mKCcpJykpCiAgICAgICAgfQoKICAgICAgICBkZWYgdGVjaFJlZktleQogICAgICAgIGRlZiB0ZWNoUmVmVmFsdWUKICAgICAgICBpZih0ZWNoUmVmKXsKICAgICAgICAgICAgdGVjaFJlZiA9IHRlY2hSZWYudG9TdHJpbmcoKQogICAgICAgICAgICBsb2cuZGVidWcgInRlY2hSZWY6ICIgKyB0ZWNoUmVmCiAgICAgICAgICAgIHRlY2hSZWZLZXkgPSB0ZWNoUmVmLnN1YnN0cmluZyh0ZWNoUmVmLmluZGV4T2YoJygnKSsxLHRlY2hSZWYuaW5kZXhPZignKScpKQogICAgICAgICAgICBkZWYgdGVjaFJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihPUEFBICsgdGVjaFJlZktleSkKICAgICAgICAgICAgdGVjaFJlZlZhbHVlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai50ZWNobmljaWFuLm5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICBpZih0ZWNoUmVmVmFsdWUpewogICAgICAgICAgICAgICAgdGVjaFJlZlZhbHVlID0gdGVjaFJlZlZhbHVlLnN1YnN0cmluZyh0ZWNoUmVmVmFsdWUuaW5kZXhPZignKCcpKzEsdGVjaFJlZlZhbHVlLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYoKGxiQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoIkJPVEgiKSB8fCBsYkFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJDVVNUT01FUiIpKSAmJiAhZGVsZXRlZFZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJ0cnVlIikpewogICAgICAgICAgICAvL2dldCAiVE9UQUxfQU1PVU5UX0NVU1RPTUVSIiBmb3IgdGhhdCBjb21wb25lbnQKICAgICAgICAgICAgZGVmIHRvdEN1c3RvbWVyCiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaWJvai5vblNpdGVSYXRlUmVwb3J0LnRvdEN1c3RvbWVyJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgdG90Q3VzdG9tZXI9b2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdG9tZXInXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkKICAgICAgICAgICAgfQogICAgICAgICAgICBpZighdG90Q3VzdG9tZXIgfHwgdG90Q3VzdG9tZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscygiMC4wIikpewogICAgICAgICAgICAgICAgd2FybmluZ3M9dHJ1ZQogICAgICAgICAgICAgICAgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lci5hZGQobGJSYXRlUmVmVmFsdWUudG9TdHJpbmcoKSkKICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArICIgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lcjogIiArIGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0gICAgCn0KCmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KCkKCmlmICghZXJyb3JzICYmICF3YXJuaW5ncyl7CglyZXR1cm4gdHJ1ZQp9ZWxzZXsKCWlmKCFlcnJvcnMgJiYgd2FybmluZ3MpewoJCS8vU2UgY2kgc29ubyBzb2xvIHdhcm5pbmdzIHZlcmlmaWNvIHNlIGwndXRlbnRlIGhhIGdpw6AgZGljaGlhcmF0byBkaSB2b2xlciBwcm9zZWd1aXJlIGNvbXVucXVlCgkJLy8gLSB0cmFuc2l0aW9uIGZpZWxkICJPUEFBX0NIRUNLX0FORF9DT05GSVJNIj0iWWVzIgoJCS8vIC0gaW4gY2FzbyBjb250cmFyaW8gaW52aW8gaSB3YXJuaW5nIGEgRkUKCgkJbG9nLmRlYnVnICJ0cmFuc2l0aW9uQ2hlY2s6ICIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykKCQkvL2xvZy5kZWJ1ZyAicmVzdWx0OiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKQoJCWlmKHRyYW5zaXRpb25DaGVja1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKSl7CgkJCWxvZy5kZWJ1ZyAicmV0dXJuIHRydWUgLSB0cmFuc2l0aW9uQ2hlY2sgPSBZZXMiCgkJCXJldHVybiB0cnVlCgkJfWVsc2V7CgkJCWRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKQoKCQkJaWYoaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lci5zaXplKCkgPiAwKXsKCQkJCWRlZiB3TGlzdENvbmZpcm1FbXB0eVJhdGUgPSBuZXcgQXJyYXlMaXN0KCkKCQkJCXdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoIlciKQoJCQkJd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZCgiQ1VTVE9NRVJfQ09ORklSTV9FTVBUWV9SQVRFUyIpCgkJCQl3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKG51bGwpCgkJCQl3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIpCgoJCQkJd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5UmF0ZSkKCQkJfQoKCQkJaWYoaXNzdWVXYXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyLnNpemUoKSA+IDApewoJCQkJZGVmIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUgPSBuZXcgQXJyYXlMaXN0KCkKCQkJCXdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKCJXIikKCQkJCXdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKCJDVVNUT01FUl9DT05GSVJNX0VNUFRZX01BVF9RVU9URSIpCgkJCQl3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChudWxsKQoJCQkJd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoaXNzdWVXYXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyKQoKCQkJCXdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlKQoJCQl9CgoJCQlvdXRwdXQuYWRkKHdMaXN0KQogICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IlciOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQoJCQkvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oIlciLCBvdXRwdXQudG9TdHJpbmcoKSkgICAKCQl9CgoJfQoJaWYoZXJyb3JzICYmICF3YXJuaW5ncyl7CgkJZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCgoJCW91dHB1dC5hZGQoZUxpc3QpCiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigneyJFIjoiJyArIG91dHB1dC50b1N0cmluZygpICsgJyJ9JykKCQkvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oIkUiLCBvdXRwdXQudG9TdHJpbmcoKSkgICAKCX0KCWlmKGVycm9ycyAmJiB3YXJuaW5ncyl7CgkJZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCgkJZGVmIHdMaXN0ID0gbmV3IEFycmF5TGlzdCgpCgoJCWlmKGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIuc2l6ZSgpID4gMCl7CgkJCWRlZiB3TGlzdENvbmZpcm1FbXB0eVJhdGUgPSBuZXcgQXJyYXlMaXN0KCkKCQkJd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZCgiVyIpCgkJCXdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoIkNVU1RPTUVSX0NPTkZJUk1fRU1QVFlfUkFURVMiKQoJCQl3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKG51bGwpCgkJCXdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lcikKCgkJCXdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eVJhdGUpCgkJfQoKCQlpZihpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXIuc2l6ZSgpID4gMCl7CgkJCWRlZiB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlID0gbmV3IEFycmF5TGlzdCgpCgkJCXdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKCJXIikKCQkJd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoIkNVU1RPTUVSX0NPTkZJUk1fRU1QVFlfTUFUX1FVT1RFIikKCQkJd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQobnVsbCkKCQkJd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoaXNzdWVXYXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyKQoKCQkJd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUpCgkJfQoJCQoJCW91dHB1dC5hZGQoZUxpc3QpCgkJb3V0cHV0LmFkZCh3TGlzdCkKICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IldFIjoiJyArIG91dHB1dC50b1N0cmluZygpICsgJyJ9JykKCQkvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oIldFIiwgb3V0cHV0LnRvU3RyaW5nKCkpICAKCX0KfQ==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="11">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">8df6d33b-0bf0-4116-b25c-f8be3f3e11c8</arg>
                  <arg name="FIELD_NOTES">YCFgT1A6IENhbGN1bGF0ZSBPRkZFUl9DVVNUT01FUl9UT1RBTF9BTU9VTlQsIE9GRkVSX1NVUFBMSUVSX1RPVEFMX0FNT1VOVCArIF9NQVRFUklBTCBlIF9MQUJPVVI=</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnlcbmltcG9ydCBncm9vdnkuanNvbi5Kc29uQnVpbGRlclxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29uZmlnLnV0aWwuSmlyYUhvbWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvblxuaW1wb3J0IGphdmEudGV4dC5TaW1wbGVEYXRlRm9ybWF0XG5pbXBvcnQgamF2YS50ZXh0LlBhcnNlRXhjZXB0aW9uXG5pbXBvcnQgamF2YS50ZXh0LkRlY2ltYWxGb3JtYXRcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS51dGlsLklzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5cbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG4vKlNjcmlwdCBWYXJpYWJsZXMqL1xuLy9QZXIgUG9zdCBGdW5jdGlvblxuaXNzdWUgPSBpc3N1ZVxuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL0lzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKVxuLy9pc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIk9QVVQtMzM4MlwiKVxuXG4vKkluc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHMqL1xuQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyAgXG5DbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTtcbm9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbm9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XG4vKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuaXFsRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKGlxbEZhY2FkZUNsYXNzKTtcbkNsYXNzIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5zZXJ2aWNlcy5tb2RlbC5mYWN0b3J5Lk9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5XCIpO1xub2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpOyBcbm9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcblxuLypDT1NUQU5USSovXG5PUEFBPXByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXVxuLy9BdHRyaWJ1dGUgSURzXG5SQVRFX1RPVEFMX0FNT1VOVF9TVVBQTElFUj1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQudG90U3VwcC5pZCddXG5SQVRFX1RPVEFMX0FNT1VOVF9DVVNUT01FUj1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdC5pZCddXG5DT01QT05FTlRfVE9UQUxfQU1PVU5UX1NVUFBMSUVSPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdFN1cHAuaWQnXVxuQ09NUE9ORU5UX1RPVEFMX0FNT1VOVF9DVVNUT01FUj1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RDdXN0LmlkJ11cbi8vT2JqVHlwZSBJRHNcbk9OU0lURV9SQVRFX1JFUE9SVD1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQnXVxuQ09NUE9ORU5UPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50J11cblxuLypDdXN0b21maWVsZHMqL1xuZGVmIEN1c3RPZmZlclRvdCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY3VzdG9tZXJPZmZlclRvdEFtb3VudCddLnRvU3RyaW5nKCkpWzBdXG5kZWYgU3VwcE9mZmVyVG90ID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zdXBwbGllck9mZmVyVG90QW1vdW50J10udG9TdHJpbmcoKSlbMF1cblxuZGVmIEN1c3RPZmZlck1hdFRvdCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY3VzdG9tZXJPZmZlck1hdGVyaWFscyddLnRvU3RyaW5nKCkpWzBdXG5kZWYgU3VwcE9mZmVyTWF0VG90ID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zdXBwbGllck9mZmVyTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBDdXN0T2ZmZXJMYWJUb3QgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmN1c3RvbWVyT2ZmZXJMYWJvdXInXS50b1N0cmluZygpKVswXVxuZGVmIFN1cHBPZmZlckxhYlRvdCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yuc3VwcGxpZXJPZmZlckxhYm91ciddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiByZXBNYXRlcmlhbHMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnF1b3RlTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBsYWJvdXJSYXRlcyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YucXVvdGVMYWJvdXJSYXRlcyddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGlzc3VlXG5kZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcblxuLypWYXJpYWJsZXMqL1xuZGVmIGN1c3RvbWVyT2ZmZXJUb3QsIHN1cHBsaWVyT2ZmZXJUb3RcbmRvdWJsZSB0b3RBbW91bnRTdXBwbGllciA9IDBcbmRvdWJsZSB0b3RBbW91bnRDdXN0b21lciA9IDBcbmRlZiByZXBNYXRMaXN0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpXG5kZWYgbGFib3VyUmF0ZXNMaXN0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcylcblxuZGVmIHRvdEN1c3RNYXQgPSAwXG5kZWYgdG90Q3VzdExhYiA9IDBcbmRlZiB0b3RTdXBwTWF0ID0gMFxuZGVmIHRvdFN1cHBMYWI9IDBcblxuZm9yKG1hdCBpbiByZXBNYXRMaXN0KXtcbiAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5kIGdldCBvYmplY3RcbiAgICBkZWYgY29tcG9uZW50PW1hdC50b1N0cmluZygpXG4gICAgZGVmIGNvbXBvbmVudEtleSA9IGNvbXBvbmVudC5zdWJzdHJpbmcoY29tcG9uZW50Lmxhc3RJbmRleE9mKCcoJykrMSxjb21wb25lbnQubGFzdEluZGV4T2YoJyknKSlcbiAgICBkZWYgY29tcG9uZW50T2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGNvbXBvbmVudEtleSlcblxuICAgIC8vTUFURVJJQUxfUkVGXG4gICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50Lm1hdGVyaWFsUmVmJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgZGVmIG1hdGVyaWFsID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgXG4gICAgLy9ERUxFVEVEXG4gICAgZGVmIGRlbGV0ZWRcbiAgICBpZiAob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5kZWxldGVkJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuZGVsZXRlZCddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKVxuICAgIFx0ZGVsZXRlZCA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuICAgICAgICBkZWxldGVkID0gZGVsZXRlZFswXS5nZXRWYWx1ZSgpXG4gICAgfVxuICAgIFxuICAgIC8vVE9UQUxfQU1PVU5UX1NVUFBMSUVSXG4gICAgaWYoKGRlbGV0ZWQ9PW51bGwgfHwgZGVsZXRlZCE9dHJ1ZSkgJiYgb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RTdXBwJ10udG9TdHJpbmcoKSkhPW51bGwpe1xuICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQudG90U3VwcCddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICBkZWYgdG90U3VwcGxpZXIgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgdG90QW1vdW50U3VwcGxpZXIgPSB0b3RBbW91bnRTdXBwbGllciArIHRvdFN1cHBsaWVyWzBdLmdldFZhbHVlKCkudG9Eb3VibGUoKVxuICAgICAgICB0b3RTdXBwTWF0ID0gdG90U3VwcE1hdCArIHRvdFN1cHBsaWVyWzBdLmdldFZhbHVlKCkudG9Eb3VibGUoKVxuICAgIH1cbiAgICBcbiAgICAvL1RPVEFMX0FNT1VOVF9DVVNUT01FUlxuICAgIGlmKChkZWxldGVkPT1udWxsIHx8IGRlbGV0ZWQhPXRydWUpICYmIG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQudG90Q3VzdCddLnRvU3RyaW5nKCkpIT1udWxsKXtcbiAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdEN1c3QnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgZGVmIHRvdEN1c3RvbWVyID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgIHRvdEFtb3VudEN1c3RvbWVyID0gdG90QW1vdW50Q3VzdG9tZXIgKyB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvRG91YmxlKClcbiAgICAgICAgdG90Q3VzdE1hdCA9IHRvdEN1c3RNYXQgKyB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvRG91YmxlKClcbiAgICB9XG4gICAgICAgIFxuICAgIGlmIChtYXRlcmlhbCE9bnVsbCAmJiAoZGVsZXRlZD09bnVsbCB8fCBkZWxldGVkIT10cnVlKSl7IFxuICAgICAgICAvKlZlcmlmaWNvIHNlIHNpIHRyYXR0YSBkaSB1biBtYXRlcmlhbGUgU0FQIG8gTk8gU0FQKi9cbiAgICAgICAgbWF0ZXJpYWwgPSBtYXRlcmlhbC50b1N0cmluZygpXG4gICAgICAgIG1hdGVyaWFsS2V5ID0gbWF0ZXJpYWwuc3Vic3RyaW5nKG1hdGVyaWFsLmxhc3RJbmRleE9mKCcoJykrMSxtYXRlcmlhbC5sYXN0SW5kZXhPZignKScpKVxuXG4gICAgICAgIC8qTUFURVJJQUwgLSBTQVAqL1xuICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihtYXRlcmlhbEtleS50b0ludGVnZXIoKSwgcHJvcGVydGllc1snaW9iai5tYXRlcmlhbC5zYXAnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgc2FwID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG5cbiAgICAgICAgLypNQVRFUklBTCAtIE1BVE5SKi9cbiAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obWF0ZXJpYWxLZXkudG9JbnRlZ2VyKCksIHByb3BlcnRpZXNbJ2lvYmoubWF0ZXJpYWwubWF0bnInXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgbWF0bnIgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcblxuICAgICAgICBpZihzYXAhPW51bGwgJiYgbWF0bnIhPW51bGwpe1xuICAgICAgICAgICAgbWF0bnI9bWF0bnIudG9TdHJpbmcoKVxuICAgICAgICAgICAgbWF0bnIgPSBtYXRuci5zdWJzdHJpbmcobWF0bnIubGFzdEluZGV4T2YoJygnKSsxLG1hdG5yLmxhc3RJbmRleE9mKCcpJykpXG4gICAgICAgICAgICBzYXA9c2FwLnRvU3RyaW5nKClcbiAgICAgICAgICAgIHNhcCA9IHNhcC5zdWJzdHJpbmcoc2FwLmxhc3RJbmRleE9mKCcoJykrMSxzYXAubGFzdEluZGV4T2YoJyknKSlcblxuICAgICAgICAgICAgaWYoc2FwLmVxdWFsc0lnbm9yZUNhc2UoXCJ0cnVlXCIpKXtcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJNYXRlcmlhbGUgc2FwOiBcIiArIHNhcFxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiTWF0ZXJpYWxlIE5PTiBzYXA6IFwiICsgc2FwXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH1cbn1cblxuZm9yKHJhdGUgaW4gbGFib3VyUmF0ZXNMaXN0KXtcbiAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5kIGdldCBvYmplY3RcbiAgICBkZWYgbGFiUmF0ZT1yYXRlLnRvU3RyaW5nKClcbiAgICBkZWYgbGFiUmF0ZUtleSA9IGxhYlJhdGUuc3Vic3RyaW5nKGxhYlJhdGUubGFzdEluZGV4T2YoJygnKSsxLGxhYlJhdGUubGFzdEluZGV4T2YoJyknKSlcbiAgICBkZWYgbGFiUmF0ZU9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihsYWJSYXRlS2V5KVxuXG4gICAgLy9NQVRFUklBTF9SRUZcbiAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYWJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5yYXRlUmVmJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgZGVmIHJhdGVEZXNjID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgXG4gICAgLy9ERUxFVEVEXG4gICAgZGVmIGRlbGV0ZWRcbiAgICBpZiAob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxhYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKSl7XG4gICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxhYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICBcdGRlbGV0ZWQgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgZGVsZXRlZCA9IGRlbGV0ZWRbMF0uZ2V0VmFsdWUoKVxuICAgIH1cbiAgICBcbiAgICAvL1RPVEFMX0FNT1VOVF9TVVBQTElFUlxuICAgIGlmKChkZWxldGVkPT1udWxsIHx8IGRlbGV0ZWQhPXRydWUpICYmIG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYWJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lib2oub25TaXRlUmF0ZVJlcG9ydC50b3RTdXBwbGllciddLnRvU3RyaW5nKCkpIT1udWxsKXtcbiAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGFiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90U3VwcGxpZXInXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgZGVmIHRvdFN1cHBsaWVyID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgIHRvdEFtb3VudFN1cHBsaWVyID0gdG90QW1vdW50U3VwcGxpZXIgKyB0b3RTdXBwbGllclswXS5nZXRWYWx1ZSgpLnRvRG91YmxlKClcbiAgICAgICAgdG90U3VwcExhYiA9IHRvdFN1cHBMYWIgKyB0b3RTdXBwbGllclswXS5nZXRWYWx1ZSgpLnRvRG91YmxlKClcbiAgICB9XG4gICAgXG4gICAgLy9UT1RBTF9BTU9VTlRfQ1VTVE9NRVJcbiAgICBpZigoZGVsZXRlZD09bnVsbCB8fCBkZWxldGVkIT10cnVlKSAmJiBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGFiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdG9tZXInXS50b1N0cmluZygpKSE9bnVsbCl7XG4gICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxhYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaWJvai5vblNpdGVSYXRlUmVwb3J0LnRvdEN1c3RvbWVyJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgIGRlZiB0b3RDdXN0b21lciA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuICAgICAgICB0b3RBbW91bnRDdXN0b21lciA9IHRvdEFtb3VudEN1c3RvbWVyICsgdG90Q3VzdG9tZXJbMF0uZ2V0VmFsdWUoKS50b0RvdWJsZSgpXG4gICAgICAgIHRvdEN1c3RMYWIgPSB0b3RDdXN0TGFiICsgdG90Q3VzdG9tZXJbMF0uZ2V0VmFsdWUoKS50b0RvdWJsZSgpXG4gICAgfVxufVxuXG5cblxubG9nLmRlYnVnIFwiVE9UQUxFIE9GRkVSVEEgRk9STklUT1JFOiBcIiArIG5ldyBEZWNpbWFsRm9ybWF0KFwiIy4jI1wiKS5mb3JtYXQodG90QW1vdW50U3VwcGxpZXIpXG5sb2cuZGVidWcgXCJUT1RBTEUgT0ZGRVJUQSBDTElFTlRFOiBcIiArIG5ldyBEZWNpbWFsRm9ybWF0KFwiIy4jI1wiKS5mb3JtYXQodG90QW1vdW50Q3VzdG9tZXIpXG5cbklzc3VlQ2hhbmdlSG9sZGVyIGNoYW5nZUhvbGRlciA9IG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKVxuQ3VzdE9mZmVyVG90LnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKEN1c3RPZmZlclRvdCksdG90QW1vdW50Q3VzdG9tZXIudG9Eb3VibGUoKSksY2hhbmdlSG9sZGVyKVxuU3VwcE9mZmVyVG90LnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKFN1cHBPZmZlclRvdCksdG90QW1vdW50U3VwcGxpZXIudG9Eb3VibGUoKSksY2hhbmdlSG9sZGVyKVxuXG5DdXN0T2ZmZXJNYXRUb3QudXBkYXRlVmFsdWUobnVsbCwgaXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoQ3VzdE9mZmVyTWF0VG90KSx0b3RDdXN0TWF0LnRvRG91YmxlKCkpLGNoYW5nZUhvbGRlcilcblN1cHBPZmZlck1hdFRvdC51cGRhdGVWYWx1ZShudWxsLCBpc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShTdXBwT2ZmZXJNYXRUb3QpLHRvdFN1cHBNYXQudG9Eb3VibGUoKSksY2hhbmdlSG9sZGVyKVxuQ3VzdE9mZmVyTGFiVG90LnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKEN1c3RPZmZlckxhYlRvdCksdG90Q3VzdExhYi50b0RvdWJsZSgpKSxjaGFuZ2VIb2xkZXIpXG5TdXBwT2ZmZXJMYWJUb3QudXBkYXRlVmFsdWUobnVsbCwgaXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoU3VwcE9mZmVyTGFiVG90KSx0b3RTdXBwTGFiLnRvRG91YmxlKCkpLGNoYW5nZUhvbGRlcilcbiIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
                <function type="class">
                  <arg name="field">customfield_22693</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.15.1</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="291" name="Genera Offerta - PDF" view="fieldscreen">
          <meta name="opsbar-sequence">20</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">19926</meta>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">87c923e5bb5b4e6303d9b8ce896495c53f9b7957</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIFJlcXVpcmVkIEZpZWxkcw==</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyCmltcG9ydCBncm9vdnkuanNvbi5Kc29uQnVpbGRlcgppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXIKCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWUKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWUKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGluawoKaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2UKCmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CmRlZiBDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRykKIApJc3N1ZSBpc3N1ZSA9IGlzc3VlCi8vUGVyIHRlc3QgZGEgY29uc29sZQovL0lzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTsKLy9pc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZSgiQUFTLTI3NjEiKQoKZGVmIGVycm9ycyA9IGZhbHNlCmRlZiB3YXJuaW5ncyA9IGZhbHNlCmRlZiByZWxhdGVzSW5Jc3N1ZUxpbms9ZmFsc2UKZGVmIHJlbGF0ZXNPdXRJc3N1ZUxpbms9ZmFsc2UKZGVmIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGVMaW5rZWQgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIHdMaXN0Q29uZmlybUVtcHR5UmF0ZVF1b3RlTGlua2VkID0gbmV3IEFycmF5TGlzdCgpCgovKkNhbXBpIGNvbiBkYXRpIG9iYmxpZ2F0b3JpIHBlciB0aWNrZXQgbm9uIGEgY29ycG8qLwpkZWYgcmVwTWF0ZXJpYWxzID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5xdW90ZU1hdGVyaWFscyddLnRvU3RyaW5nKCkpWzBdCmRlZiBsYWJvdXJSYXRlcyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YucXVvdGVMYWJvdXJSYXRlcyddLnRvU3RyaW5nKCkpWzBdCgovKkNvbmZlcm1hIHV0ZW50ZSBzdSB3YXJuaW5ncyovCmRlZiB0cmFuc2l0aW9uQ2hlY2sgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmNoZWNrQW5kQ29uZmlybSddLnRvU3RyaW5nKCkpWzBdCmRlZiB0cmFuc2l0aW9uQ2hlY2tWYWx1ZSA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKQoKLypJbnNpZ2h0IFNjaGVtYSBJRHMqLwpkZWYgREJPYmplY3RzID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8nXS50b1N0cmluZygpICsgIi0iCmRlZiBPUEFBID0gcHJvcGVydGllc1snaXNjaGVtYS5hYSddLnRvU3RyaW5nKCkgKyAiLSIKCi8qQXJyYXkgd2FybmluZ3MgZWQgZXJyb3JzIHBlciBsYSBpc3N1ZSBwcmluY2lwYWxlLCB1bm8gcGVyIG9nbmkgdGlwb2xvZ2lhIGRpIGVycm9yZSBvIHdhcm5pbmcqLwpkZWYgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyID0gbmV3IEFycmF5TGlzdCgpCmRlZiBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyID0gbmV3IEFycmF5TGlzdCgpCgovKlZlcmlmaWNhIGNhbXBpIHN1IHRpY2tldCBvZ2dldHRvIGRlbGxhIHRyYW5zYXppb25lKi8KLy9PUF9RVU9URV9NQVRFUklBTFMKaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpIT1udWxsICYmIChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpICE9ICIiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgIC8vbG9nLmRlYnVnICJNYXRlcmlhbGk6ICIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykKICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qLwogICAgLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzCiAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZSIpOyAgCiAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CiAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpOwogICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7CgogICAgZGVmIHJlcE1hdExpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykKCiAgICBmb3IobWF0IGluIHJlcE1hdExpc3QpewogICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdAogICAgICAgIGRlZiBjb21wb25lbnQ9bWF0LnRvU3RyaW5nKCkKICAgICAgICAvL2RlZiBjb21wb25lbnRLZXkgPSBjb21wb25lbnQuc3Vic3RyaW5nKGNvbXBvbmVudC5pbmRleE9mKCcoJykrMSxjb21wb25lbnQuaW5kZXhPZignKScpKQogICAgICAgIGRlZiBjb21wb25lbnRLZXkgPSBjb21wb25lbnQuc3Vic3RyaW5nKGNvbXBvbmVudC5pbmRleE9mKCcoJytPUEFBKSsxLGNvbXBvbmVudC5sZW5ndGgoKS0xKQogICAgICAgIGRlZiBjb21wb25lbnRPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oY29tcG9uZW50S2V5KQoKICAgICAgICAvL2dldCAiQVBQTElFRF9UTyIgZm9yIHRoYXQgY29tcG9uZW50CiAgICAgICAgZGVmIGFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuYXBwbGllZFRvJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpIGFzIEFycmF5TGlzdAogICAgICAgIGRlZiBhcHBsaWVkVG9WYWx1ZQogICAgICAgIGlmKGFwcGxpZWRUby5zaXplKCkgPiAwKXsKICAgICAgICAgICAgYXBwbGllZFRvID0gYXBwbGllZFRvLnRvU3RyaW5nKCkKICAgICAgICAgICAgYXBwbGllZFRvVmFsdWUgPSBhcHBsaWVkVG8uc3Vic3RyaW5nKGFwcGxpZWRUby5pbmRleE9mKCcoJykrMSxhcHBsaWVkVG8uaW5kZXhPZignKScpKQogICAgICAgICAgICAvL2xvZy5kZWJ1ZyAiYXBwbGllZFRvVmFsdWU6ICIgKyBhcHBsaWVkVG9WYWx1ZQogICAgICAgIH0KICAgICAgICAvL2dldCAiREVMRVRFRCIgZm9yIHRoYXQgcmF0ZQogICAgICAgIGRlZiBkZWxldGVkCiAgICAgICAgZGVmIGRlbGV0ZWRWYWx1ZQogICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuZGVsZXRlZCddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgZGVsZXRlZCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuZGVsZXRlZCddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgICAgIGxvZy5kZWJ1ZyAiZGVsZXRlZDogIiArIGRlbGV0ZWQKICAgICAgICAgICAgaWYgKGRlbGV0ZWQpewogICAgICAgICAgICAgICAgZGVsZXRlZFZhbHVlID0gZGVsZXRlZC5zdWJzdHJpbmcoZGVsZXRlZC5pbmRleE9mKCcoJykrMSxkZWxldGVkLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZGVmIG1hdE51bWJlcgogICAgICAgIGRlZiBtYXROdW1iZXJLZXkKICAgICAgICBkZWYgbWF0TnVtYmVyVmFsdWUKICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50Lm1hdGVyaWFsUmVmJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICBtYXROdW1iZXIgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50Lm1hdGVyaWFsUmVmJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpIGFzIEFycmF5TGlzdAogICAgICAgICAgICBpZihtYXROdW1iZXIuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICBtYXROdW1iZXIgPSBtYXROdW1iZXIudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgbWF0TnVtYmVyS2V5ID0gbWF0TnVtYmVyLnN1YnN0cmluZyhtYXROdW1iZXIuaW5kZXhPZignKCcpKzEsbWF0TnVtYmVyLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIGRlZiBtYXROdW1iZXJPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oREJPYmplY3RzICsgbWF0TnVtYmVyS2V5KQogICAgICAgICAgICAgICAgbWF0TnVtYmVyVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obWF0TnVtYmVyT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoubWF0ZXJpYWwubmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgICAgICAgICBtYXROdW1iZXJWYWx1ZSA9IG1hdE51bWJlclZhbHVlLnN1YnN0cmluZyhtYXROdW1iZXJWYWx1ZS5pbmRleE9mKCcoJykrMSxtYXROdW1iZXJWYWx1ZS5pbmRleE9mKCcpJykpCiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGRlZiBzZXJpYWxOdW1iZXIKICAgICAgICBkZWYgc2VyaWFsTnVtYmVyVmFsdWUKICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnNlcmlhbE51bWJlciddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgc2VyaWFsTnVtYmVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5zZXJpYWxOdW1iZXInXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkgYXMgQXJyYXlMaXN0CiAgICAgICAgICAgIGlmKHNlcmlhbE51bWJlci5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgIHNlcmlhbE51bWJlciA9IHNlcmlhbE51bWJlci50b1N0cmluZygpCiAgICAgICAgICAgICAgICBzZXJpYWxOdW1iZXJWYWx1ZSA9IHNlcmlhbE51bWJlci5zdWJzdHJpbmcoc2VyaWFsTnVtYmVyLmluZGV4T2YoJygnKSsxLHNlcmlhbE51bWJlci5pbmRleE9mKCcpJykpCiAgICAgICAgICAgIH0gIAogICAgICAgIH0JCQkJCgogICAgICAgIGlmKChhcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscygiQk9USCIpIHx8IGFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJDVVNUT01FUiIpKSAmJiAhZGVsZXRlZFZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJ0cnVlIikpewogICAgICAgICAgICAvL2dldCAiVE9UQUxfQU1PVU5UX0NVU1RPTUVSIiBmb3IgdGhhdCBjb21wb25lbnQKICAgICAgICAgICAgZGVmIHRvdEN1c3RvbWVyIAogICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdEN1c3QnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICB0b3RDdXN0b21lciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQudG90Q3VzdCddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKCF0b3RDdXN0b21lciB8fCB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKCIwLjAiKSl7CiAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlCiAgICAgICAgICAgICAgICBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXIuYWRkKG1hdE51bWJlclZhbHVlLnRvU3RyaW5nKCkgKyAoKCFzZXJpYWxOdW1iZXIudG9TdHJpbmcoKS5lcXVhbHMoIm51bGwiKSAmJiAhc2VyaWFsTnVtYmVyLnRvU3RyaW5nKCkuZXF1YWxzKCJbXSIpKSA/ICIgKCIgKyBzZXJpYWxOdW1iZXJWYWx1ZS50b1N0cmluZygpICsgIikiIDogIiIpKSAgIAogICAgICAgICAgICAgICAgbG9nLmRlYnVnIGlzc3VlLmtleS50b1N0cmluZygpICsgIiBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXI6ICIgKyBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXIKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0gICAgCn0gIAoKLy9PUF9RVU9URV9MQUJPVVJfUkFURVMKaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcykhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxhYm91clJhdGVzKSAhPSAiIiAmJiAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcykudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgIGxvZy5kZWJ1ZyAiTGFib3VyIHJhdGVzOiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcykKICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qLwogICAgLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzCiAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZSIpOyAgCiAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CiAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpOwogICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7CgogICAgZGVmIGxhYm91clJhdGVzTGlzdCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpCgogICAgZm9yKGxiIGluIGxhYm91clJhdGVzTGlzdCl7CiAgICAgICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0CiAgICAgICAgZGVmIGxiUmF0ZT1sYi50b1N0cmluZygpCiAgICAgICAgZGVmIGxiUmF0ZUtleSA9IGxiUmF0ZS5zdWJzdHJpbmcobGJSYXRlLmluZGV4T2YoJygnKSsxLGxiUmF0ZS5pbmRleE9mKCcpJykpCiAgICAgICAgZGVmIGxiUmF0ZU9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihsYlJhdGVLZXkpCiAgICAgICAgLy9nZXQgIkFQUExJRURfVE8iIGZvciB0aGF0IHJhdGUKICAgICAgICBkZWYgbGJBcHBsaWVkVG8gPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgZGVmIGxiQXBwbGllZFRvVmFsdWUgPSBsYkFwcGxpZWRUby5zdWJzdHJpbmcobGJBcHBsaWVkVG8uaW5kZXhPZignKCcpKzEsbGJBcHBsaWVkVG8uaW5kZXhPZignKScpKQogICAgICAgIC8vZ2V0ICJERUxFVEVEIiBmb3IgdGhhdCByYXRlCiAgICAgICAgZGVmIGRlbGV0ZWQKICAgICAgICBkZWYgZGVsZXRlZFZhbHVlCiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5kZWxldGVkJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICBkZWxldGVkID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5kZWxldGVkJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgbG9nLmRlYnVnICJkZWxldGVkOiAiICsgZGVsZXRlZAogICAgICAgICAgICBpZiAoZGVsZXRlZCl7CiAgICAgICAgICAgICAgICBkZWxldGVkVmFsdWUgPSBkZWxldGVkLnN1YnN0cmluZyhkZWxldGVkLmluZGV4T2YoJygnKSsxLGRlbGV0ZWQuaW5kZXhPZignKScpKQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBkZWYgbGJSYXRlUmVmCiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQucmF0ZVJlZiddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgbGJSYXRlUmVmPW9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgIH0KICAgICAgICBsb2cuZGVidWcgImxiUmF0ZVJlZjogIiArIGxiUmF0ZVJlZgoKICAgICAgICBkZWYgdGVjaFJlZgogICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaWJvai5vblNpdGVSYXRlUmVwb3J0LnRlY2huaWNpYW5SZWYnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgIHRlY2hSZWY9b2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudGVjaG5pY2lhblJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgfQoKICAgICAgICBkZWYgbGJSYXRlUmVmS2V5CiAgICAgICAgZGVmIGxiUmF0ZVJlZlZhbHVlCiAgICAgICAgaWYobGJSYXRlUmVmICYmIGxiUmF0ZVJlZi5zaXplKCkgPiAwKXsKICAgICAgICAgICAgbGJSYXRlUmVmID0gbGJSYXRlUmVmLnRvU3RyaW5nKCkKICAgICAgICAgICAgbGJSYXRlUmVmS2V5ID0gbGJSYXRlUmVmLnN1YnN0cmluZyhsYlJhdGVSZWYuaW5kZXhPZignKCcpKzEsbGJSYXRlUmVmLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgZGVmIGxiUmF0ZVJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihPUEFBICsgbGJSYXRlUmVmS2V5KQogICAgICAgICAgICBsYlJhdGVSZWZWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5yYXRlLk5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICBsYlJhdGVSZWZWYWx1ZSA9IGxiUmF0ZVJlZlZhbHVlLnN1YnN0cmluZyhsYlJhdGVSZWZWYWx1ZS5pbmRleE9mKCcoJykrMSxsYlJhdGVSZWZWYWx1ZS5pbmRleE9mKCcpJykpCiAgICAgICAgfQoKICAgICAgICBkZWYgdGVjaFJlZktleQogICAgICAgIGRlZiB0ZWNoUmVmVmFsdWUKICAgICAgICBpZih0ZWNoUmVmKXsKICAgICAgICAgICAgdGVjaFJlZiA9IHRlY2hSZWYudG9TdHJpbmcoKQogICAgICAgICAgICBsb2cuZGVidWcgInRlY2hSZWY6ICIgKyB0ZWNoUmVmCiAgICAgICAgICAgIHRlY2hSZWZLZXkgPSB0ZWNoUmVmLnN1YnN0cmluZyh0ZWNoUmVmLmluZGV4T2YoJygnKSsxLHRlY2hSZWYuaW5kZXhPZignKScpKQogICAgICAgICAgICBkZWYgdGVjaFJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihPUEFBICsgdGVjaFJlZktleSkKICAgICAgICAgICAgdGVjaFJlZlZhbHVlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai50ZWNobmljaWFuLm5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICBpZih0ZWNoUmVmVmFsdWUpewogICAgICAgICAgICAgICAgdGVjaFJlZlZhbHVlID0gdGVjaFJlZlZhbHVlLnN1YnN0cmluZyh0ZWNoUmVmVmFsdWUuaW5kZXhPZignKCcpKzEsdGVjaFJlZlZhbHVlLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYoKGxiQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoIkJPVEgiKSB8fCBsYkFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJDVVNUT01FUiIpKSAmJiAhZGVsZXRlZFZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJ0cnVlIikpewogICAgICAgICAgICAvL2dldCAiVE9UQUxfQU1PVU5UX0NVU1RPTUVSIiBmb3IgdGhhdCBjb21wb25lbnQKICAgICAgICAgICAgZGVmIHRvdEN1c3RvbWVyCiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaWJvai5vblNpdGVSYXRlUmVwb3J0LnRvdEN1c3RvbWVyJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgdG90Q3VzdG9tZXI9b2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdG9tZXInXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkKICAgICAgICAgICAgfQogICAgICAgICAgICBpZighdG90Q3VzdG9tZXIgfHwgdG90Q3VzdG9tZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscygiMC4wIikpewogICAgICAgICAgICAgICAgd2FybmluZ3M9dHJ1ZQogICAgICAgICAgICAgICAgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lci5hZGQobGJSYXRlUmVmVmFsdWUudG9TdHJpbmcoKSkKICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArICIgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lcjogIiArIGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0gICAgCn0KCmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KCkKCmlmICghZXJyb3JzICYmICF3YXJuaW5ncyl7CglyZXR1cm4gdHJ1ZQp9ZWxzZXsKCWlmKCFlcnJvcnMgJiYgd2FybmluZ3MpewoJCS8vU2UgY2kgc29ubyBzb2xvIHdhcm5pbmdzIHZlcmlmaWNvIHNlIGwndXRlbnRlIGhhIGdpw6AgZGljaGlhcmF0byBkaSB2b2xlciBwcm9zZWd1aXJlIGNvbXVucXVlCgkJLy8gLSB0cmFuc2l0aW9uIGZpZWxkICJPUEFBX0NIRUNLX0FORF9DT05GSVJNIj0iWWVzIgoJCS8vIC0gaW4gY2FzbyBjb250cmFyaW8gaW52aW8gaSB3YXJuaW5nIGEgRkUKCgkJbG9nLmRlYnVnICJ0cmFuc2l0aW9uQ2hlY2s6ICIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykKCQkvL2xvZy5kZWJ1ZyAicmVzdWx0OiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKQoJCWlmKHRyYW5zaXRpb25DaGVja1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKSl7CgkJCWxvZy5kZWJ1ZyAicmV0dXJuIHRydWUgLSB0cmFuc2l0aW9uQ2hlY2sgPSBZZXMiCgkJCXJldHVybiB0cnVlCgkJfWVsc2V7CgkJCWRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKQoKCQkJaWYoaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lci5zaXplKCkgPiAwKXsKCQkJCWRlZiB3TGlzdENvbmZpcm1FbXB0eVJhdGUgPSBuZXcgQXJyYXlMaXN0KCkKCQkJCXdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoIlciKQoJCQkJd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZCgiQ1VTVE9NRVJfQ09ORklSTV9FTVBUWV9SQVRFUyIpCgkJCQl3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKG51bGwpCgkJCQl3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIpCgoJCQkJd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5UmF0ZSkKCQkJfQoKCQkJaWYoaXNzdWVXYXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyLnNpemUoKSA+IDApewoJCQkJZGVmIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUgPSBuZXcgQXJyYXlMaXN0KCkKCQkJCXdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKCJXIikKCQkJCXdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKCJDVVNUT01FUl9DT05GSVJNX0VNUFRZX01BVF9RVU9URSIpCgkJCQl3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChudWxsKQoJCQkJd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoaXNzdWVXYXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyKQoKCQkJCXdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlKQoJCQl9CgoJCQlvdXRwdXQuYWRkKHdMaXN0KQogICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IlciOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQoJCQkvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oIlciLCBvdXRwdXQudG9TdHJpbmcoKSkgICAKCQl9CgoJfQoJaWYoZXJyb3JzICYmICF3YXJuaW5ncyl7CgkJZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCgoJCW91dHB1dC5hZGQoZUxpc3QpCiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigneyJFIjoiJyArIG91dHB1dC50b1N0cmluZygpICsgJyJ9JykKCQkvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oIkUiLCBvdXRwdXQudG9TdHJpbmcoKSkgICAKCX0KCWlmKGVycm9ycyAmJiB3YXJuaW5ncyl7CgkJZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCgkJZGVmIHdMaXN0ID0gbmV3IEFycmF5TGlzdCgpCgoJCWlmKGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIuc2l6ZSgpID4gMCl7CgkJCWRlZiB3TGlzdENvbmZpcm1FbXB0eVJhdGUgPSBuZXcgQXJyYXlMaXN0KCkKCQkJd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZCgiVyIpCgkJCXdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoIkNVU1RPTUVSX0NPTkZJUk1fRU1QVFlfUkFURVMiKQoJCQl3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKG51bGwpCgkJCXdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lcikKCgkJCXdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eVJhdGUpCgkJfQoKCQlpZihpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXIuc2l6ZSgpID4gMCl7CgkJCWRlZiB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlID0gbmV3IEFycmF5TGlzdCgpCgkJCXdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKCJXIikKCQkJd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoIkNVU1RPTUVSX0NPTkZJUk1fRU1QVFlfTUFUX1FVT1RFIikKCQkJd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQobnVsbCkKCQkJd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoaXNzdWVXYXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyKQoKCQkJd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUpCgkJfQoJCQoJCW91dHB1dC5hZGQoZUxpc3QpCgkJb3V0cHV0LmFkZCh3TGlzdCkKICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IldFIjoiJyArIG91dHB1dC50b1N0cmluZygpICsgJyJ9JykKCQkvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oIldFIiwgb3V0cHV0LnRvU3RyaW5nKCkpICAKCX0KfQ==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">f0e886b6a38b4c375023c581670d7765927ee07a</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IFJFU1QgQVBJOiBnZW5lcmF0ZSBPZmZlciBhdHRhY2htZW50</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CkNhdGVnb3J5IGxvZyA9IENhdGVnb3J5LmdldEluc3RhbmNlKCJjb20ub25yZXNvbHZlLmppcmEuZ3Jvb3Z5LlBvc3RGdW5jdGlvbiIpCmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKQoKSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpOwpDdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7CmRlZiByZXF1ZXN0TWV0aG9kCmRlZiBiYXNlVVJMCgpkZWYgY3VzdG9tZXIgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmN1c3RvbWVyJ10udG9TdHJpbmcoKSlbMF0KZGVmIHRlbXBsYXRlSWQKaW50IERCTyA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuZGJvLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKQoKLyogSW5kaXZpZHVhemlvbmUgVGVtcGxhdGUgb2ZmZXJ0YSBkYSBhcHBsaWNhcmUgKi8KLyogQ2FzbyAxKSBlc2lzdGUgdW5vIHNwZWNpZmljbyB0ZW1wbGF0ZSBwZXIgaWwgY2xpZW50ZSBzZWxlemlvbmF0byAtLT4gdXNvIHF1ZXN0byAqLwovKiBlbHNlIC0tPiB1c28gaWwgdGVtcGxhdGUgZGkgZGVmYXVsdDogQXR0YWNobWVudENhdGVnb3J5ID0gIk9mZmVydGEgQ2xpZW50ZSIgQU5EIENVU1RPTUVSX1JFRiBJUyBFTVBUWSBBTkQgREVGQVVMVD10cnVlCi8qUmltb3ppb25lIGFsbGVnYXRvIHJhcHBvcnRvIGRpIGludGVydmVudG8gYXBwZW5hIGNyZWF0byovCi8qIEdldCBJbnNpZ2h0IElRTCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi8KQ2xhc3MgaXFsRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGUiKTsgCmRlZiBpcWxGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUoaXFsRmFjYWRlQ2xhc3MpOwoKLyogR2V0IEluc2lnaHQgT2JqZWN0IEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqLwpDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZSIpOwpkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTsKCi8qIEdldCBJbnNpZ2h0IE9iamVjdCBUeXBlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqLwpDbGFzcyBvYmplY3RUeXBlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlIik7CmRlZiBvYmplY3RUeXBlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVGYWNhZGVDbGFzcyk7CgovKiBHZXQgSW5zaWdodCBPYmplY3QgQXR0cmlidXRlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqLwpDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CmRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7CgpDbGFzcyBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5zZXJ2aWNlcy5tb2RlbC5mYWN0b3J5Lk9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Iik7CmRlZiBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzKTsKCmRlZiBjdXN0b21lclZhbHVlID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0b21lcilbMF0udG9TdHJpbmcoKQpkZWYgY3VzdG9tZXJLZXkgPSBjdXN0b21lclZhbHVlLnN1YnN0cmluZyhjdXN0b21lclZhbHVlLmluZGV4T2YoJygnKSsxLGN1c3RvbWVyVmFsdWUuaW5kZXhPZignKScpKQoKZGVmIERPY3VzdG9tZXJPYmplY3RSZWYgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0b21lcilbMF0uZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jdXN0b21lci5jdXN0b21lclJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTsKbG9nLmRlYnVnICJET2N1c3RvbWVyT2JqZWN0UmVmOiAiICsgRE9jdXN0b21lck9iamVjdFJlZgoKZGVmIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKERPY3VzdG9tZXJPYmplY3RSZWZbMF0uZ2V0VmFsdWUoKSwgcHJvcGVydGllc1snaW9iai5jb250YWN0LmRiby5uYW1lJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpICAKZGVmIGN1c3RvbWVyTmFtZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQoKLyogU3BlY2lmeSB0aGUgc2NoZW1hIGlkIGFzIHdlbGwgYXMgdGhlIElRTCB0aGF0IHdpbGwgZmV0Y2ggb2JqZWN0cy4gSW4gdGhpcyBjYXNlIGFsbCBvYmplY3RzIHdpdGggTmFtZSBtYXRjaGluZyB0aGUgdmFsdWVDRiwgYmUgc3VyZSB0byBpbmNsdWRlICIgYXJvdW5kIHZhbHVlICovCmRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCAiXCIiICsgKHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmF0dGFjaG1lbnRDYXRlZ29yeSddID8gcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuYXR0YWNobWVudENhdGVnb3J5J10udG9TdHJpbmcoKSA6ICJBVFRBQ0hNRU5UX0NBVEVHT1JZIikgKyAiXCIuXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkubmFtZSddLnRvU3RyaW5nKCkgKyAiXCIgPSBcIiIgKyAocHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkub2Jqcy5vZmZDbGllbnRlJ10gPyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5vYmpzLm9mZkNsaWVudGUnXS50b1N0cmluZygpIDogIk9mZmVydGEgQ2xpZW50ZSIpICsgIlwiIEFORCAiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyAiIT10cnVlIEFORCBDVVNUT01FUl9SRUYgSVMgTk9UIEVNUFRZIEFORCBDVVNUT01FUl9SRUYuTmFtZSA9IFwiIiArIGN1c3RvbWVyTmFtZVswXS5nZXRWYWx1ZSgpICsgIlwiIik7IC8vIFNlZSB0aGUgY29tcGxldGUgbGlzdCBvZiBwb3NzaWJsZSBJUUwgb24gdGhlIEluc2lnaHQgUXVlcnkgTGFuZ3VhZ2UgZG9jdW1lbnRhdGlvbiBwYWdlCi8qIElmIHRoaXMgaXMgYSBtYW5kYXRvcnkgZmllbGQgeW91IHNob3VsZCBiZSBhYmxlIHRvIGRvIHRoaXM6ICovCmxvZy5pbmZvKCJJbnNpZ2h0IG9iamVjdDogIiArIG9iamVjdHNbMF0pOwpsb2cuZGVidWcgIlwiIiArIChwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5hdHRhY2htZW50Q2F0ZWdvcnknXSA/IHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmF0dGFjaG1lbnRDYXRlZ29yeSddLnRvU3RyaW5nKCkgOiAiQVRUQUNITUVOVF9DQVRFR09SWSIpICsgIlwiLlwiIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm5hbWUnXS50b1N0cmluZygpICsgIlwiID0gXCIiICsgKHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm9ianMub2ZmQ2xpZW50ZSddID8gcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkub2Jqcy5vZmZDbGllbnRlJ10udG9TdHJpbmcoKSA6ICJPZmZlcnRhIENsaWVudGUiKSArICJcIiBBTkQgIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpICsgIiE9dHJ1ZSBBTkQgQ1VTVE9NRVJfUkVGIElTIE5PVCBFTVBUWSBBTkQgQ1VTVE9NRVJfUkVGLk5hbWUgPSBcIiIgKyBjdXN0b21lck5hbWVbMF0uZ2V0VmFsdWUoKSArICJcIiIKCmlmKCFvYmplY3RzWzBdKXsKICAgIC8qTmVzc3VuIGZpbGUgaW5kaXZpZHVhdG8gcGVyIGlsIGNsaWVudGUgLSBjZXJjbyB0ZW1wbGF0ZSBnZW5lcmljbyAqLwogICAgb2JqZWN0cyA9IGlxbEZhY2FkZS5maW5kT2JqZWN0c0J5SVFMQW5kU2NoZW1hKERCTywgIlwiIiArIChwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5hdHRhY2htZW50Q2F0ZWdvcnknXSA/IHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmF0dGFjaG1lbnRDYXRlZ29yeSddLnRvU3RyaW5nKCkgOiAiQVRUQUNITUVOVF9DQVRFR09SWSIpICsgIlwiLlwiIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm5hbWUnXS50b1N0cmluZygpICsgIlwiID0gXCIiICsgKHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm9ianMub2ZmQ2xpZW50ZSddID8gcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkub2Jqcy5vZmZDbGllbnRlJ10udG9TdHJpbmcoKSA6ICJPZmZlcnRhIENsaWVudGUiKSArICJcIiBBTkQgIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpICsgIiE9dHJ1ZSBBTkQgQ1VTVE9NRVJfUkVGIElTIEVNUFRZIEFORCBERUZBVUxUPXRydWUiKTsgLy8gU2VlIHRoZSBjb21wbGV0ZSBsaXN0IG9mIHBvc3NpYmxlIElRTCBvbiB0aGUgSW5zaWdodCBRdWVyeSBMYW5ndWFnZSBkb2N1bWVudGF0aW9uIHBhZ2UKICAgIC8qIElmIHRoaXMgaXMgYSBtYW5kYXRvcnkgZmllbGQgeW91IHNob3VsZCBiZSBhYmxlIHRvIGRvIHRoaXM6ICovCiAgICBsb2cuaW5mbygiSW5zaWdodCBvYmplY3Q6ICIgKyBvYmplY3RzWzBdKTsKICAgIGxvZy5kZWJ1ZyAiXCIiICsgKHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmF0dGFjaG1lbnRDYXRlZ29yeSddID8gcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuYXR0YWNobWVudENhdGVnb3J5J10udG9TdHJpbmcoKSA6ICJBVFRBQ0hNRU5UX0NBVEVHT1JZIikgKyAiXCIuXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkubmFtZSddLnRvU3RyaW5nKCkgKyAiXCIgPSBcIiIgKyAocHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkub2Jqcy5vZmZDbGllbnRlJ10gPyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5vYmpzLm9mZkNsaWVudGUnXS50b1N0cmluZygpIDogIk9mZmVydGEgQ2xpZW50ZSIpICsgIlwiIEFORCAiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyAiIT10cnVlIEFORCBDVVNUT01FUl9SRUYgSVMgRU1QVFkgQU5EIERFRkFVTFQ9dHJ1ZSIKfQoKaWYob2JqZWN0c1swXSl7CiAgICBsb2cuZGVidWcgInRlbXBsYXRlIGRhIHVzYXJlOiAiICsgb2JqZWN0c1swXS5nZXRJZCgpCiAgICB0ZW1wbGF0ZUlkPW9iamVjdHNbMF0uZ2V0SWQoKQp9CgovKiBSRVNUIEFQSSBwZXIgR2VuZXJhemlvbmUgQWxsZWdhdG8gQ29uc3VudGl2byAqLwpyZXF1ZXN0TWV0aG9kID0gIlBVVCI7CgpiYXNlVVJMID0gImh0dHA6Ly8iICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyAiL29wL3Jlc3QvYXV0b21hdGlvbi90aWNrZXQvIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgIi9hdHRhY2htZW50L2dlbmVyaWM/dGVtcGxhdGVJZD0iICsgdGVtcGxhdGVJZCArICImdHlwZT1QREYmYXR0YWNobWVudEN1c3RvbUZpZWxkPSIgKyBwcm9wZXJ0aWVzWydjZi5vZmZlckF0dGFjaG1lbnRSZWYnXS50b1N0cmluZygpCgpsb2cuZGVidWcgImJhc2VVcmw6ICIgKyBiYXNlVVJMCgpVUkwgdXJsCnVybCA9IG5ldyBVUkwoYmFzZVVSTCkKSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpOwpjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eSgiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL2pzb24iKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoIkFjY2VwdCIsICIqLyoiKTsKY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTsKY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpOwpjb25uZWN0aW9uLmNvbm5lY3QoKTsKCmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCmRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKQpkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpCgppZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoIjIwMCIpKXsKICAgIGxvZy5kZWJ1ZyAidXJsOiAiICsgdXJsCiAgICBsb2cuZGVidWcgIlJlc3BvbnNlQ29kZToiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKQogICAgbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKICAgIGVMaXN0RXJyb3JzLmFkZCgiRSIpCiAgICBlTGlzdEVycm9ycy5hZGQoIkdFTkVSQVRFLUFDQ09VTlRJTkdSRVBPUlQiKQogICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgIiAiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKSkKICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpCiAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpCgogICAgb3V0cHV0LmFkZChlTGlzdCkKICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3siRSI6IicgKyBvdXRwdXQudG9TdHJpbmcoKSArICcifScpCiAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oIkUiLCBvdXRwdXQudG9TdHJpbmcoKSkKfQo=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="10">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
                <function type="class">
                  <arg name="field">customfield_22693</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.15.1</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="301" name="Genera Offerta - Word" view="fieldscreen">
          <meta name="opsbar-sequence">30</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">19926</meta>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">87c923e5bb5b4e6303d9b8ce896495c53f9b7957</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIFJlcXVpcmVkIEZpZWxkcw==</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyCmltcG9ydCBncm9vdnkuanNvbi5Kc29uQnVpbGRlcgppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXIKCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWUKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWUKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGluawoKaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2UKCmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CmRlZiBDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRykKIApJc3N1ZSBpc3N1ZSA9IGlzc3VlCi8vUGVyIHRlc3QgZGEgY29uc29sZQovL0lzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTsKLy9pc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZSgiQUFTLTI3NjEiKQoKZGVmIGVycm9ycyA9IGZhbHNlCmRlZiB3YXJuaW5ncyA9IGZhbHNlCmRlZiByZWxhdGVzSW5Jc3N1ZUxpbms9ZmFsc2UKZGVmIHJlbGF0ZXNPdXRJc3N1ZUxpbms9ZmFsc2UKZGVmIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGVMaW5rZWQgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIHdMaXN0Q29uZmlybUVtcHR5UmF0ZVF1b3RlTGlua2VkID0gbmV3IEFycmF5TGlzdCgpCgovKkNhbXBpIGNvbiBkYXRpIG9iYmxpZ2F0b3JpIHBlciB0aWNrZXQgbm9uIGEgY29ycG8qLwpkZWYgcmVwTWF0ZXJpYWxzID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5xdW90ZU1hdGVyaWFscyddLnRvU3RyaW5nKCkpWzBdCmRlZiBsYWJvdXJSYXRlcyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YucXVvdGVMYWJvdXJSYXRlcyddLnRvU3RyaW5nKCkpWzBdCgovKkNvbmZlcm1hIHV0ZW50ZSBzdSB3YXJuaW5ncyovCmRlZiB0cmFuc2l0aW9uQ2hlY2sgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmNoZWNrQW5kQ29uZmlybSddLnRvU3RyaW5nKCkpWzBdCmRlZiB0cmFuc2l0aW9uQ2hlY2tWYWx1ZSA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKQoKLypJbnNpZ2h0IFNjaGVtYSBJRHMqLwpkZWYgREJPYmplY3RzID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8nXS50b1N0cmluZygpICsgIi0iCmRlZiBPUEFBID0gcHJvcGVydGllc1snaXNjaGVtYS5hYSddLnRvU3RyaW5nKCkgKyAiLSIKCi8qQXJyYXkgd2FybmluZ3MgZWQgZXJyb3JzIHBlciBsYSBpc3N1ZSBwcmluY2lwYWxlLCB1bm8gcGVyIG9nbmkgdGlwb2xvZ2lhIGRpIGVycm9yZSBvIHdhcm5pbmcqLwpkZWYgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyID0gbmV3IEFycmF5TGlzdCgpCmRlZiBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlUmF0ZUN1c3RvbWVyID0gbmV3IEFycmF5TGlzdCgpCgovKlZlcmlmaWNhIGNhbXBpIHN1IHRpY2tldCBvZ2dldHRvIGRlbGxhIHRyYW5zYXppb25lKi8KLy9PUF9RVU9URV9NQVRFUklBTFMKaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpIT1udWxsICYmIChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpICE9ICIiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgIC8vbG9nLmRlYnVnICJNYXRlcmlhbGk6ICIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykKICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qLwogICAgLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzCiAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZSIpOyAgCiAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CiAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpOwogICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7CgogICAgZGVmIHJlcE1hdExpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykKCiAgICBmb3IobWF0IGluIHJlcE1hdExpc3QpewogICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdAogICAgICAgIGRlZiBjb21wb25lbnQ9bWF0LnRvU3RyaW5nKCkKICAgICAgICAvL2RlZiBjb21wb25lbnRLZXkgPSBjb21wb25lbnQuc3Vic3RyaW5nKGNvbXBvbmVudC5pbmRleE9mKCcoJykrMSxjb21wb25lbnQuaW5kZXhPZignKScpKQogICAgICAgIGRlZiBjb21wb25lbnRLZXkgPSBjb21wb25lbnQuc3Vic3RyaW5nKGNvbXBvbmVudC5pbmRleE9mKCcoJytPUEFBKSsxLGNvbXBvbmVudC5sZW5ndGgoKS0xKQogICAgICAgIGRlZiBjb21wb25lbnRPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oY29tcG9uZW50S2V5KQoKICAgICAgICAvL2dldCAiQVBQTElFRF9UTyIgZm9yIHRoYXQgY29tcG9uZW50CiAgICAgICAgZGVmIGFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuYXBwbGllZFRvJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpIGFzIEFycmF5TGlzdAogICAgICAgIGRlZiBhcHBsaWVkVG9WYWx1ZQogICAgICAgIGlmKGFwcGxpZWRUby5zaXplKCkgPiAwKXsKICAgICAgICAgICAgYXBwbGllZFRvID0gYXBwbGllZFRvLnRvU3RyaW5nKCkKICAgICAgICAgICAgYXBwbGllZFRvVmFsdWUgPSBhcHBsaWVkVG8uc3Vic3RyaW5nKGFwcGxpZWRUby5pbmRleE9mKCcoJykrMSxhcHBsaWVkVG8uaW5kZXhPZignKScpKQogICAgICAgICAgICAvL2xvZy5kZWJ1ZyAiYXBwbGllZFRvVmFsdWU6ICIgKyBhcHBsaWVkVG9WYWx1ZQogICAgICAgIH0KICAgICAgICAvL2dldCAiREVMRVRFRCIgZm9yIHRoYXQgcmF0ZQogICAgICAgIGRlZiBkZWxldGVkCiAgICAgICAgZGVmIGRlbGV0ZWRWYWx1ZQogICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuZGVsZXRlZCddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgZGVsZXRlZCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuZGVsZXRlZCddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgICAgIGxvZy5kZWJ1ZyAiZGVsZXRlZDogIiArIGRlbGV0ZWQKICAgICAgICAgICAgaWYgKGRlbGV0ZWQpewogICAgICAgICAgICAgICAgZGVsZXRlZFZhbHVlID0gZGVsZXRlZC5zdWJzdHJpbmcoZGVsZXRlZC5pbmRleE9mKCcoJykrMSxkZWxldGVkLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZGVmIG1hdE51bWJlcgogICAgICAgIGRlZiBtYXROdW1iZXJLZXkKICAgICAgICBkZWYgbWF0TnVtYmVyVmFsdWUKICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50Lm1hdGVyaWFsUmVmJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICBtYXROdW1iZXIgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50Lm1hdGVyaWFsUmVmJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpIGFzIEFycmF5TGlzdAogICAgICAgICAgICBpZihtYXROdW1iZXIuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICBtYXROdW1iZXIgPSBtYXROdW1iZXIudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgbWF0TnVtYmVyS2V5ID0gbWF0TnVtYmVyLnN1YnN0cmluZyhtYXROdW1iZXIuaW5kZXhPZignKCcpKzEsbWF0TnVtYmVyLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgICAgIGRlZiBtYXROdW1iZXJPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oREJPYmplY3RzICsgbWF0TnVtYmVyS2V5KQogICAgICAgICAgICAgICAgbWF0TnVtYmVyVmFsdWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obWF0TnVtYmVyT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoubWF0ZXJpYWwubmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgICAgICAgICBtYXROdW1iZXJWYWx1ZSA9IG1hdE51bWJlclZhbHVlLnN1YnN0cmluZyhtYXROdW1iZXJWYWx1ZS5pbmRleE9mKCcoJykrMSxtYXROdW1iZXJWYWx1ZS5pbmRleE9mKCcpJykpCiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGRlZiBzZXJpYWxOdW1iZXIKICAgICAgICBkZWYgc2VyaWFsTnVtYmVyVmFsdWUKICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnNlcmlhbE51bWJlciddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgc2VyaWFsTnVtYmVyID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5zZXJpYWxOdW1iZXInXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkgYXMgQXJyYXlMaXN0CiAgICAgICAgICAgIGlmKHNlcmlhbE51bWJlci5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgIHNlcmlhbE51bWJlciA9IHNlcmlhbE51bWJlci50b1N0cmluZygpCiAgICAgICAgICAgICAgICBzZXJpYWxOdW1iZXJWYWx1ZSA9IHNlcmlhbE51bWJlci5zdWJzdHJpbmcoc2VyaWFsTnVtYmVyLmluZGV4T2YoJygnKSsxLHNlcmlhbE51bWJlci5pbmRleE9mKCcpJykpCiAgICAgICAgICAgIH0gIAogICAgICAgIH0JCQkJCgogICAgICAgIGlmKChhcHBsaWVkVG9WYWx1ZS50b1N0cmluZygpLmVxdWFscygiQk9USCIpIHx8IGFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJDVVNUT01FUiIpKSAmJiAhZGVsZXRlZFZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJ0cnVlIikpewogICAgICAgICAgICAvL2dldCAiVE9UQUxfQU1PVU5UX0NVU1RPTUVSIiBmb3IgdGhhdCBjb21wb25lbnQKICAgICAgICAgICAgZGVmIHRvdEN1c3RvbWVyIAogICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdEN1c3QnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICB0b3RDdXN0b21lciA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQudG90Q3VzdCddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKCF0b3RDdXN0b21lciB8fCB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKCIwLjAiKSl7CiAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlCiAgICAgICAgICAgICAgICBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXIuYWRkKG1hdE51bWJlclZhbHVlLnRvU3RyaW5nKCkgKyAoKCFzZXJpYWxOdW1iZXIudG9TdHJpbmcoKS5lcXVhbHMoIm51bGwiKSAmJiAhc2VyaWFsTnVtYmVyLnRvU3RyaW5nKCkuZXF1YWxzKCJbXSIpKSA/ICIgKCIgKyBzZXJpYWxOdW1iZXJWYWx1ZS50b1N0cmluZygpICsgIikiIDogIiIpKSAgIAogICAgICAgICAgICAgICAgbG9nLmRlYnVnIGlzc3VlLmtleS50b1N0cmluZygpICsgIiBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXI6ICIgKyBpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXIKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0gICAgCn0gIAoKLy9PUF9RVU9URV9MQUJPVVJfUkFURVMKaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcykhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxhYm91clJhdGVzKSAhPSAiIiAmJiAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcykudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgIGxvZy5kZWJ1ZyAiTGFib3VyIHJhdGVzOiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcykKICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qLwogICAgLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzCiAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZSIpOyAgCiAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CiAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpOwogICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7CgogICAgZGVmIGxhYm91clJhdGVzTGlzdCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobGFib3VyUmF0ZXMpCgogICAgZm9yKGxiIGluIGxhYm91clJhdGVzTGlzdCl7CiAgICAgICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0CiAgICAgICAgZGVmIGxiUmF0ZT1sYi50b1N0cmluZygpCiAgICAgICAgZGVmIGxiUmF0ZUtleSA9IGxiUmF0ZS5zdWJzdHJpbmcobGJSYXRlLmluZGV4T2YoJygnKSsxLGxiUmF0ZS5pbmRleE9mKCcpJykpCiAgICAgICAgZGVmIGxiUmF0ZU9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihsYlJhdGVLZXkpCiAgICAgICAgLy9nZXQgIkFQUExJRURfVE8iIGZvciB0aGF0IHJhdGUKICAgICAgICBkZWYgbGJBcHBsaWVkVG8gPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgZGVmIGxiQXBwbGllZFRvVmFsdWUgPSBsYkFwcGxpZWRUby5zdWJzdHJpbmcobGJBcHBsaWVkVG8uaW5kZXhPZignKCcpKzEsbGJBcHBsaWVkVG8uaW5kZXhPZignKScpKQogICAgICAgIC8vZ2V0ICJERUxFVEVEIiBmb3IgdGhhdCByYXRlCiAgICAgICAgZGVmIGRlbGV0ZWQKICAgICAgICBkZWYgZGVsZXRlZFZhbHVlCiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5kZWxldGVkJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICBkZWxldGVkID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5kZWxldGVkJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgbG9nLmRlYnVnICJkZWxldGVkOiAiICsgZGVsZXRlZAogICAgICAgICAgICBpZiAoZGVsZXRlZCl7CiAgICAgICAgICAgICAgICBkZWxldGVkVmFsdWUgPSBkZWxldGVkLnN1YnN0cmluZyhkZWxldGVkLmluZGV4T2YoJygnKSsxLGRlbGV0ZWQuaW5kZXhPZignKScpKQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBkZWYgbGJSYXRlUmVmCiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQucmF0ZVJlZiddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgbGJSYXRlUmVmPW9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LnJhdGVSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgIH0KICAgICAgICBsb2cuZGVidWcgImxiUmF0ZVJlZjogIiArIGxiUmF0ZVJlZgoKICAgICAgICBkZWYgdGVjaFJlZgogICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaWJvai5vblNpdGVSYXRlUmVwb3J0LnRlY2huaWNpYW5SZWYnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgIHRlY2hSZWY9b2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudGVjaG5pY2lhblJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpCiAgICAgICAgfQoKICAgICAgICBkZWYgbGJSYXRlUmVmS2V5CiAgICAgICAgZGVmIGxiUmF0ZVJlZlZhbHVlCiAgICAgICAgaWYobGJSYXRlUmVmICYmIGxiUmF0ZVJlZi5zaXplKCkgPiAwKXsKICAgICAgICAgICAgbGJSYXRlUmVmID0gbGJSYXRlUmVmLnRvU3RyaW5nKCkKICAgICAgICAgICAgbGJSYXRlUmVmS2V5ID0gbGJSYXRlUmVmLnN1YnN0cmluZyhsYlJhdGVSZWYuaW5kZXhPZignKCcpKzEsbGJSYXRlUmVmLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgZGVmIGxiUmF0ZVJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihPUEFBICsgbGJSYXRlUmVmS2V5KQogICAgICAgICAgICBsYlJhdGVSZWZWYWx1ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5yYXRlLk5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICBsYlJhdGVSZWZWYWx1ZSA9IGxiUmF0ZVJlZlZhbHVlLnN1YnN0cmluZyhsYlJhdGVSZWZWYWx1ZS5pbmRleE9mKCcoJykrMSxsYlJhdGVSZWZWYWx1ZS5pbmRleE9mKCcpJykpCiAgICAgICAgfQoKICAgICAgICBkZWYgdGVjaFJlZktleQogICAgICAgIGRlZiB0ZWNoUmVmVmFsdWUKICAgICAgICBpZih0ZWNoUmVmKXsKICAgICAgICAgICAgdGVjaFJlZiA9IHRlY2hSZWYudG9TdHJpbmcoKQogICAgICAgICAgICBsb2cuZGVidWcgInRlY2hSZWY6ICIgKyB0ZWNoUmVmCiAgICAgICAgICAgIHRlY2hSZWZLZXkgPSB0ZWNoUmVmLnN1YnN0cmluZyh0ZWNoUmVmLmluZGV4T2YoJygnKSsxLHRlY2hSZWYuaW5kZXhPZignKScpKQogICAgICAgICAgICBkZWYgdGVjaFJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihPUEFBICsgdGVjaFJlZktleSkKICAgICAgICAgICAgdGVjaFJlZlZhbHVlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai50ZWNobmljaWFuLm5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKQogICAgICAgICAgICBpZih0ZWNoUmVmVmFsdWUpewogICAgICAgICAgICAgICAgdGVjaFJlZlZhbHVlID0gdGVjaFJlZlZhbHVlLnN1YnN0cmluZyh0ZWNoUmVmVmFsdWUuaW5kZXhPZignKCcpKzEsdGVjaFJlZlZhbHVlLmluZGV4T2YoJyknKSkKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYoKGxiQXBwbGllZFRvVmFsdWUudG9TdHJpbmcoKS5lcXVhbHMoIkJPVEgiKSB8fCBsYkFwcGxpZWRUb1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJDVVNUT01FUiIpKSAmJiAhZGVsZXRlZFZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJ0cnVlIikpewogICAgICAgICAgICAvL2dldCAiVE9UQUxfQU1PVU5UX0NVU1RPTUVSIiBmb3IgdGhhdCBjb21wb25lbnQKICAgICAgICAgICAgZGVmIHRvdEN1c3RvbWVyCiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaWJvai5vblNpdGVSYXRlUmVwb3J0LnRvdEN1c3RvbWVyJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgdG90Q3VzdG9tZXI9b2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdG9tZXInXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkKICAgICAgICAgICAgfQogICAgICAgICAgICBpZighdG90Q3VzdG9tZXIgfHwgdG90Q3VzdG9tZXJbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscygiMC4wIikpewogICAgICAgICAgICAgICAgd2FybmluZ3M9dHJ1ZQogICAgICAgICAgICAgICAgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lci5hZGQobGJSYXRlUmVmVmFsdWUudG9TdHJpbmcoKSkKICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArICIgaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lcjogIiArIGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0gICAgCn0KCmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KCkKCmlmICghZXJyb3JzICYmICF3YXJuaW5ncyl7CglyZXR1cm4gdHJ1ZQp9ZWxzZXsKCWlmKCFlcnJvcnMgJiYgd2FybmluZ3MpewoJCS8vU2UgY2kgc29ubyBzb2xvIHdhcm5pbmdzIHZlcmlmaWNvIHNlIGwndXRlbnRlIGhhIGdpw6AgZGljaGlhcmF0byBkaSB2b2xlciBwcm9zZWd1aXJlIGNvbXVucXVlCgkJLy8gLSB0cmFuc2l0aW9uIGZpZWxkICJPUEFBX0NIRUNLX0FORF9DT05GSVJNIj0iWWVzIgoJCS8vIC0gaW4gY2FzbyBjb250cmFyaW8gaW52aW8gaSB3YXJuaW5nIGEgRkUKCgkJbG9nLmRlYnVnICJ0cmFuc2l0aW9uQ2hlY2s6ICIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykKCQkvL2xvZy5kZWJ1ZyAicmVzdWx0OiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKQoJCWlmKHRyYW5zaXRpb25DaGVja1ZhbHVlLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKSl7CgkJCWxvZy5kZWJ1ZyAicmV0dXJuIHRydWUgLSB0cmFuc2l0aW9uQ2hlY2sgPSBZZXMiCgkJCXJldHVybiB0cnVlCgkJfWVsc2V7CgkJCWRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKQoKCQkJaWYoaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lci5zaXplKCkgPiAwKXsKCQkJCWRlZiB3TGlzdENvbmZpcm1FbXB0eVJhdGUgPSBuZXcgQXJyYXlMaXN0KCkKCQkJCXdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoIlciKQoJCQkJd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZCgiQ1VTVE9NRVJfQ09ORklSTV9FTVBUWV9SQVRFUyIpCgkJCQl3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKG51bGwpCgkJCQl3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIpCgoJCQkJd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5UmF0ZSkKCQkJfQoKCQkJaWYoaXNzdWVXYXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyLnNpemUoKSA+IDApewoJCQkJZGVmIHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUgPSBuZXcgQXJyYXlMaXN0KCkKCQkJCXdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKCJXIikKCQkJCXdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKCJDVVNUT01FUl9DT05GSVJNX0VNUFRZX01BVF9RVU9URSIpCgkJCQl3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlLmFkZChudWxsKQoJCQkJd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoaXNzdWVXYXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyKQoKCQkJCXdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlKQoJCQl9CgoJCQlvdXRwdXQuYWRkKHdMaXN0KQogICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IlciOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQoJCQkvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oIlciLCBvdXRwdXQudG9TdHJpbmcoKSkgICAKCQl9CgoJfQoJaWYoZXJyb3JzICYmICF3YXJuaW5ncyl7CgkJZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCgoJCW91dHB1dC5hZGQoZUxpc3QpCiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigneyJFIjoiJyArIG91dHB1dC50b1N0cmluZygpICsgJyJ9JykKCQkvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oIkUiLCBvdXRwdXQudG9TdHJpbmcoKSkgICAKCX0KCWlmKGVycm9ycyAmJiB3YXJuaW5ncyl7CgkJZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCgkJZGVmIHdMaXN0ID0gbmV3IEFycmF5TGlzdCgpCgoJCWlmKGlzc3VlV2FybmluZ0VtcHR5UXVvdGVSYXRlQ3VzdG9tZXIuc2l6ZSgpID4gMCl7CgkJCWRlZiB3TGlzdENvbmZpcm1FbXB0eVJhdGUgPSBuZXcgQXJyYXlMaXN0KCkKCQkJd0xpc3RDb25maXJtRW1wdHlSYXRlLmFkZCgiVyIpCgkJCXdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoIkNVU1RPTUVSX0NPTkZJUk1fRU1QVFlfUkFURVMiKQoJCQl3TGlzdENvbmZpcm1FbXB0eVJhdGUuYWRkKG51bGwpCgkJCXdMaXN0Q29uZmlybUVtcHR5UmF0ZS5hZGQoaXNzdWVXYXJuaW5nRW1wdHlRdW90ZVJhdGVDdXN0b21lcikKCgkJCXdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eVJhdGUpCgkJfQoKCQlpZihpc3N1ZVdhcm5pbmdFbXB0eVF1b3RlTWF0Q3VzdG9tZXIuc2l6ZSgpID4gMCl7CgkJCWRlZiB3TGlzdENvbmZpcm1FbXB0eU1hdFF1b3RlID0gbmV3IEFycmF5TGlzdCgpCgkJCXdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUuYWRkKCJXIikKCQkJd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoIkNVU1RPTUVSX0NPTkZJUk1fRU1QVFlfTUFUX1FVT1RFIikKCQkJd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQobnVsbCkKCQkJd0xpc3RDb25maXJtRW1wdHlNYXRRdW90ZS5hZGQoaXNzdWVXYXJuaW5nRW1wdHlRdW90ZU1hdEN1c3RvbWVyKQoKCQkJd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5TWF0UXVvdGUpCgkJfQoJCQoJCW91dHB1dC5hZGQoZUxpc3QpCgkJb3V0cHV0LmFkZCh3TGlzdCkKICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IldFIjoiJyArIG91dHB1dC50b1N0cmluZygpICsgJyJ9JykKCQkvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oIldFIiwgb3V0cHV0LnRvU3RyaW5nKCkpICAKCX0KfQ==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">0ed547676d78f1b77b55fb654d1a258e09977399</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IFJFU1QgQVBJOiBnZW5lcmF0ZSBPZmZlciBhdHRhY2htZW50IC0gV29yZA==</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CkNhdGVnb3J5IGxvZyA9IENhdGVnb3J5LmdldEluc3RhbmNlKCJjb20ub25yZXNvbHZlLmppcmEuZ3Jvb3Z5LlBvc3RGdW5jdGlvbiIpCmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKQoKSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpOwovL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKCJBQVMtMjc2MiIpCgpDdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7CmRlZiByZXF1ZXN0TWV0aG9kCmRlZiBiYXNlVVJMCgpkZWYgY3VzdG9tZXIgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmN1c3RvbWVyJ10udG9TdHJpbmcoKSlbMF0KZGVmIHRlbXBsYXRlSWQKaW50IERCTyA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuZGJvLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKQoKLyogSW5kaXZpZHVhemlvbmUgVGVtcGxhdGUgb2ZmZXJ0YSBkYSBhcHBsaWNhcmUgKi8KLyogQ2FzbyAxKSBlc2lzdGUgdW5vIHNwZWNpZmljbyB0ZW1wbGF0ZSBwZXIgaWwgY2xpZW50ZSBzZWxlemlvbmF0byAtLT4gdXNvIHF1ZXN0byAqLwovKiBlbHNlIC0tPiB1c28gaWwgdGVtcGxhdGUgZGkgZGVmYXVsdDogQXR0YWNobWVudENhdGVnb3J5ID0gIk9mZmVydGEgQ2xpZW50ZSIgQU5EIENVU1RPTUVSX1JFRiBJUyBFTVBUWSBBTkQgREVGQVVMVD10cnVlCi8qUmltb3ppb25lIGFsbGVnYXRvIHJhcHBvcnRvIGRpIGludGVydmVudG8gYXBwZW5hIGNyZWF0byovCi8qIEdldCBJbnNpZ2h0IElRTCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi8KQ2xhc3MgaXFsRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGUiKTsgCmRlZiBpcWxGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUoaXFsRmFjYWRlQ2xhc3MpOwoKLyogR2V0IEluc2lnaHQgT2JqZWN0IEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqLwpDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZSIpOwpkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTsKCi8qIEdldCBJbnNpZ2h0IE9iamVjdCBUeXBlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqLwpDbGFzcyBvYmplY3RUeXBlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlIik7CmRlZiBvYmplY3RUeXBlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVGYWNhZGVDbGFzcyk7CgovKiBHZXQgSW5zaWdodCBPYmplY3QgQXR0cmlidXRlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqLwpDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CmRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7CgpDbGFzcyBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5zZXJ2aWNlcy5tb2RlbC5mYWN0b3J5Lk9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Iik7CmRlZiBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzKTsKCmRlZiBjdXN0b21lclZhbHVlID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0b21lcilbMF0udG9TdHJpbmcoKQpkZWYgY3VzdG9tZXJLZXkgPSBjdXN0b21lclZhbHVlLnN1YnN0cmluZyhjdXN0b21lclZhbHVlLmluZGV4T2YoJygnKSsxLGN1c3RvbWVyVmFsdWUuaW5kZXhPZignKScpKQoKZGVmIERPY3VzdG9tZXJPYmplY3RSZWYgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0b21lcilbMF0uZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jdXN0b21lci5jdXN0b21lclJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTsKbG9nLmRlYnVnICJET2N1c3RvbWVyT2JqZWN0UmVmOiAiICsgRE9jdXN0b21lck9iamVjdFJlZgoKZGVmIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKERPY3VzdG9tZXJPYmplY3RSZWZbMF0uZ2V0VmFsdWUoKSwgcHJvcGVydGllc1snaW9iai5jb250YWN0LmRiby5uYW1lJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpICAKZGVmIGN1c3RvbWVyTmFtZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQoKLyogU3BlY2lmeSB0aGUgc2NoZW1hIGlkIGFzIHdlbGwgYXMgdGhlIElRTCB0aGF0IHdpbGwgZmV0Y2ggb2JqZWN0cy4gSW4gdGhpcyBjYXNlIGFsbCBvYmplY3RzIHdpdGggTmFtZSBtYXRjaGluZyB0aGUgdmFsdWVDRiwgYmUgc3VyZSB0byBpbmNsdWRlICIgYXJvdW5kIHZhbHVlICovCmRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCAiXCIiICsgKHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmF0dGFjaG1lbnRDYXRlZ29yeSddID8gcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuYXR0YWNobWVudENhdGVnb3J5J10udG9TdHJpbmcoKSA6ICJBVFRBQ0hNRU5UX0NBVEVHT1JZIikgKyAiXCIuXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkubmFtZSddLnRvU3RyaW5nKCkgKyAiXCIgPSBcIiIgKyAocHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkub2Jqcy5vZmZDbGllbnRlJ10gPyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5vYmpzLm9mZkNsaWVudGUnXS50b1N0cmluZygpIDogIk9mZmVydGEgQ2xpZW50ZSIpICsgIlwiIEFORCAiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyAiIT10cnVlIEFORCBDVVNUT01FUl9SRUYgSVMgTk9UIEVNUFRZIEFORCBDVVNUT01FUl9SRUYuTmFtZSA9IFwiIiArIGN1c3RvbWVyTmFtZVswXS5nZXRWYWx1ZSgpICsgIlwiIik7IC8vIFNlZSB0aGUgY29tcGxldGUgbGlzdCBvZiBwb3NzaWJsZSBJUUwgb24gdGhlIEluc2lnaHQgUXVlcnkgTGFuZ3VhZ2UgZG9jdW1lbnRhdGlvbiBwYWdlCi8qIElmIHRoaXMgaXMgYSBtYW5kYXRvcnkgZmllbGQgeW91IHNob3VsZCBiZSBhYmxlIHRvIGRvIHRoaXM6ICovCmxvZy5pbmZvKCJJbnNpZ2h0IG9iamVjdDogIiArIG9iamVjdHNbMF0pOwpsb2cuZGVidWcgIlwiIiArIChwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5hdHRhY2htZW50Q2F0ZWdvcnknXSA/IHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmF0dGFjaG1lbnRDYXRlZ29yeSddLnRvU3RyaW5nKCkgOiAiQVRUQUNITUVOVF9DQVRFR09SWSIpICsgIlwiLlwiIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm5hbWUnXS50b1N0cmluZygpICsgIlwiID0gXCIiICsgKHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm9ianMub2ZmQ2xpZW50ZSddID8gcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkub2Jqcy5vZmZDbGllbnRlJ10udG9TdHJpbmcoKSA6ICJPZmZlcnRhIENsaWVudGUiKSArICJcIiBBTkQgIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpICsgIiE9dHJ1ZSBBTkQgQ1VTVE9NRVJfUkVGIElTIE5PVCBFTVBUWSBBTkQgQ1VTVE9NRVJfUkVGLk5hbWUgPSBcIiIgKyBjdXN0b21lck5hbWVbMF0uZ2V0VmFsdWUoKSArICJcIiIKCmlmKCFvYmplY3RzWzBdKXsKICAgIC8qTmVzc3VuIGZpbGUgaW5kaXZpZHVhdG8gcGVyIGlsIGNsaWVudGUgLSBjZXJjbyB0ZW1wbGF0ZSBnZW5lcmljbyAqLwogICAgb2JqZWN0cyA9IGlxbEZhY2FkZS5maW5kT2JqZWN0c0J5SVFMQW5kU2NoZW1hKERCTywgIlwiIiArIChwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5hdHRhY2htZW50Q2F0ZWdvcnknXSA/IHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmF0dGFjaG1lbnRDYXRlZ29yeSddLnRvU3RyaW5nKCkgOiAiQVRUQUNITUVOVF9DQVRFR09SWSIpICsgIlwiLlwiIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm5hbWUnXS50b1N0cmluZygpICsgIlwiID0gXCIiICsgKHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm9ianMub2ZmQ2xpZW50ZSddID8gcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkub2Jqcy5vZmZDbGllbnRlJ10udG9TdHJpbmcoKSA6ICJPZmZlcnRhIENsaWVudGUiKSArICJcIiBBTkQgIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpICsgIiE9dHJ1ZSBBTkQgQ1VTVE9NRVJfUkVGIElTIEVNUFRZIEFORCBERUZBVUxUPXRydWUiKTsgLy8gU2VlIHRoZSBjb21wbGV0ZSBsaXN0IG9mIHBvc3NpYmxlIElRTCBvbiB0aGUgSW5zaWdodCBRdWVyeSBMYW5ndWFnZSBkb2N1bWVudGF0aW9uIHBhZ2UKICAgIC8qIElmIHRoaXMgaXMgYSBtYW5kYXRvcnkgZmllbGQgeW91IHNob3VsZCBiZSBhYmxlIHRvIGRvIHRoaXM6ICovCiAgICBsb2cuaW5mbygiSW5zaWdodCBvYmplY3Q6ICIgKyBvYmplY3RzWzBdKTsKICAgIGxvZy5kZWJ1ZyAiXCIiICsgKHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmF0dGFjaG1lbnRDYXRlZ29yeSddID8gcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuYXR0YWNobWVudENhdGVnb3J5J10udG9TdHJpbmcoKSA6ICJBVFRBQ0hNRU5UX0NBVEVHT1JZIikgKyAiXCIuXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkubmFtZSddLnRvU3RyaW5nKCkgKyAiXCIgPSBcIiIgKyAocHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkub2Jqcy5vZmZDbGllbnRlJ10gPyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5vYmpzLm9mZkNsaWVudGUnXS50b1N0cmluZygpIDogIk9mZmVydGEgQ2xpZW50ZSIpICsgIlwiIEFORCAiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyAiIT10cnVlIEFORCBDVVNUT01FUl9SRUYgSVMgRU1QVFkgQU5EIERFRkFVTFQ9dHJ1ZSIKfQoKaWYob2JqZWN0c1swXSl7CiAgICBsb2cuZGVidWcgInRlbXBsYXRlIGRhIHVzYXJlOiAiICsgb2JqZWN0c1swXS5nZXRJZCgpCiAgICB0ZW1wbGF0ZUlkPW9iamVjdHNbMF0uZ2V0SWQoKQp9CgoKLyogUkVTVCBBUEkgcGVyIEdlbmVyYXppb25lIEFsbGVnYXRvIENvbnN1bnRpdm8gKi8KcmVxdWVzdE1ldGhvZCA9ICJQVVQiOwoKYmFzZVVSTCA9ICJodHRwOi8vIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgIi9vcC9yZXN0L2F1dG9tYXRpb24vdGlja2V0LyIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArICIvYXR0YWNobWVudC9nZW5lcmljP3RlbXBsYXRlSWQ9IiArIHRlbXBsYXRlSWQgKyAiJnR5cGU9V29yZCZhdHRhY2htZW50Q3VzdG9tRmllbGQ9IiArIHByb3BlcnRpZXNbJ2NmLm9mZmVyQXR0YWNobWVudFJlZiddLnRvU3RyaW5nKCkKCmxvZy5kZWJ1ZyAiYmFzZVVybDogIiArIGJhc2VVUkwKClVSTCB1cmwKdXJsID0gbmV3IFVSTChiYXNlVVJMKQpIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpOwpjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7CmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24vanNvbiIpOwpjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eSgiQWNjZXB0IiwgIiovKiIpOwpjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpOwpjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7CmNvbm5lY3Rpb24uY29ubmVjdCgpOwoKZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKQpkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpCmRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KCkKCmlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscygiMjAwIikpewogICAgbG9nLmRlYnVnICJ1cmw6ICIgKyB1cmwKICAgIGxvZy5kZWJ1ZyAiUmVzcG9uc2VDb2RlOiIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpCiAgICBsb2cuZGVidWcgIlJlc3BvbnNlTWVzc2FnZToiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKQogICAgZUxpc3RFcnJvcnMuYWRkKCJFIikKICAgIGVMaXN0RXJyb3JzLmFkZCgiR0VORVJBVEUtQUNDT1VOVElOR1JFUE9SVCIpCiAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyAiICIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpKQogICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncykKICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycykKCiAgICBvdXRwdXQuYWRkKGVMaXN0KQogICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigneyJFIjoiJyArIG91dHB1dC50b1N0cmluZygpICsgJyJ9JykKICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiRSIsIG91dHB1dC50b1N0cmluZygpKQp9Cg==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="10">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
                <function type="class">
                  <arg name="field">customfield_22693</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.15.1</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="721" name="Riapri Preventivo Fornitore">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <results>
            <unconditional-result old-status="null" status="null" step="9">
              <post-functions>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_22673</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="field6">customfield_22678</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="field3">customfield_22674</arg>
                  <arg name="field2">customfield_22676</arg>
                  <arg name="field5">customfield_22675</arg>
                  <arg name="scopeSource-jql"></arg>
                  <arg name="field4">customfield_22677</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="11" name="Waiting for Customer Feedback">
      <meta name="jira.status.id">14334</meta>
      <actions>
        <action id="311" name="Offerta Accettata da Cliente">
          <meta name="opsbar-sequence">10</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">aa89ccbd-313b-4123-bde9-a6c67360c801</arg>
              <arg name="FIELD_NOTES">YCFgU0FQOiB1cGRhdGUgU04gc3RhdHVzICYgY3JlYXRlIFNP</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcblxuZGVmIHNhcFNOID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1NBUF9TRVJWSUNFX05PVElGSUNBVElPTlwiKVswXVxuZGVmIHJlcXVlc3RNZXRob2RcbmRlZiBiYXNlVVJMXG5cblVSTCB1cmxcbkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb25cblxuaWYoaXNzdWUuaXNzdWVUeXBlLm5hbWUgIT0gXCJQbGFubmVkIE1haW50ZW5hbmNlIFRpY2tldFwiICYmIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2FwU04pICE9IG51bGwpe1xuICAgIHJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcblxuICAgIGRlZiBib2R5X3JlcSA9IFtdXG4gICAgYm9keV9yZXEgPSBbXG4gICAgICAgIFwiaXNzdWVLZXlcIjogaXNzdWUua2V5LFxuICAgICAgICBcInN0YXR1c1wiOiBcIlBMQVwiXG4gICAgXSBcblxuICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL2FmdGVyL3NhbGVzL2NyZWF0ZS9zZXJ2aWNlL25vdGlmaWNhdGlvblwiXG5cbiAgICBsb2cuZGVidWcgXCJiYXNlVVJMIFNOOiBcIiArIGJhc2VVUkxcbiAgICBsb2cuZGVidWcgXCJib2R5X3JlcSBTTjogXCIgKyBib2R5X3JlcVxuICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cbiAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICBcbiAgICAgICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxuICAgICAgICBsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXG5cbiAgICAgICAgZGVmIGpzb25TbHVycGVyID0gbmV3IEpzb25TbHVycGVyKClcbiAgICAgICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcbiAgICAgICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICBcbiAgICAgICAgbG9nLmRlYnVnIFwibWVzc2FnZTogXCIgKyAganNvbl9vYmplY3QubWVzc2FnZVxuICAgICAgICBsb2cuZGVidWcgXCJlcnJvcnM6IFwiICsgIGpzb25fb2JqZWN0LmVycm9ycy50b1N0cmluZygpXG5cbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJPUC1TQVAtU04tVVBEQVRFXCIpXG4gICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsganNvbl9vYmplY3QuZXJyb3JzWzBdKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgfWVsc2V7XG4gICAgICAgIC8qKiBTRVJWSUNFIE9SREVSIENSRUFUSU9OICoqL1xuICAgICAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgICAgIFwiaXNzdWVLZXlcIjogaXNzdWUua2V5XG4gICAgICAgIF0gXG4gICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL2FmdGVyL3NhbGVzL2NyZWF0ZS9vci91cGRhdGUvc2VydmljZS9vcmRlclwiXG5cbiAgICAgICAgbG9nLmRlYnVnIFwiYmFzZVVSTCBTTzogXCIgKyBiYXNlVVJMXG4gICAgICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNPOiBcIiArIGJvZHlfcmVxXG4gICAgICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICAgICAgY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxuICAgICAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG5cbiAgICAgICAgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSAmJiAhY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHRcbiAgICBcdFx0bG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICAgICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcbiAgICAgICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJlcnJvcnM6IFwiICsgIGpzb25fb2JqZWN0LmVycm9ycy50b1N0cmluZygpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TTy1DUkVBVEVcIilcbiAgICAgICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsganNvbl9vYmplY3QuZXJyb3JzWzBdKVxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcbiAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgICAgICB9XG4gICAgfVxufVxuICIsInNjcmlwdFBhdGgiOm51bGx9</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="12">
              <post-functions>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="fieldValue">Yes</arg>
                  <arg name="preconditionMode-textValue">DISCARD</arg>
                  <arg name="fieldsList">customfield_22681</arg>
                </function>
                <function type="class">
                  <arg name="field.copyFieldSource2"></arg>
                  <arg name="field.copyFieldSource1">customfield_22683</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="field.createTargetValue1"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.copyFieldMode1">OVERWRITE</arg>
                  <arg name="field.copyFieldDestination1">customfield_22635</arg>
                  <arg name="field.copyFieldSeparator1"></arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiescopyValueFromOtherField-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.CopyValueFromOtherFieldPostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">38100fbf-8abd-4951-82c2-3defd3481f99</arg>
                  <arg name="FIELD_NOTES">YCFgT1A6IENhbGN1bGF0ZSBPRkZFUl9DVVNUT01FUl9UT1RBTF9BTU9VTlQsIE9GRkVSX1NVUFBMSUVSX1RPVEFMX0FNT1VOVCArIF9NQVRFUklBTCBlIF9MQUJPVVI=</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnlcbmltcG9ydCBncm9vdnkuanNvbi5Kc29uQnVpbGRlclxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29uZmlnLnV0aWwuSmlyYUhvbWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvblxuaW1wb3J0IGphdmEudGV4dC5TaW1wbGVEYXRlRm9ybWF0XG5pbXBvcnQgamF2YS50ZXh0LlBhcnNlRXhjZXB0aW9uXG5pbXBvcnQgamF2YS50ZXh0LkRlY2ltYWxGb3JtYXRcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS51dGlsLklzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5cbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG4vKlNjcmlwdCBWYXJpYWJsZXMqL1xuLy9QZXIgUG9zdCBGdW5jdGlvblxuaXNzdWUgPSBpc3N1ZVxuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL0lzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKVxuLy9pc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIk9QVVQtMzM4MlwiKVxuXG4vKkluc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHMqL1xuQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyAgXG5DbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTtcbm9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbm9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XG4vKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuaXFsRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKGlxbEZhY2FkZUNsYXNzKTtcbkNsYXNzIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5zZXJ2aWNlcy5tb2RlbC5mYWN0b3J5Lk9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5XCIpO1xub2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpOyBcbm9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcblxuLypDT1NUQU5USSovXG5PUEFBPXByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXVxuLy9BdHRyaWJ1dGUgSURzXG5SQVRFX1RPVEFMX0FNT1VOVF9TVVBQTElFUj1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQudG90U3VwcC5pZCddXG5SQVRFX1RPVEFMX0FNT1VOVF9DVVNUT01FUj1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdC5pZCddXG5DT01QT05FTlRfVE9UQUxfQU1PVU5UX1NVUFBMSUVSPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdFN1cHAuaWQnXVxuQ09NUE9ORU5UX1RPVEFMX0FNT1VOVF9DVVNUT01FUj1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RDdXN0LmlkJ11cbi8vT2JqVHlwZSBJRHNcbk9OU0lURV9SQVRFX1JFUE9SVD1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQnXVxuQ09NUE9ORU5UPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50J11cblxuLypDdXN0b21maWVsZHMqL1xuZGVmIEN1c3RPZmZlclRvdCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY3VzdG9tZXJPZmZlclRvdEFtb3VudCddLnRvU3RyaW5nKCkpWzBdXG5kZWYgU3VwcE9mZmVyVG90ID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zdXBwbGllck9mZmVyVG90QW1vdW50J10udG9TdHJpbmcoKSlbMF1cblxuZGVmIEN1c3RPZmZlck1hdFRvdCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY3VzdG9tZXJPZmZlck1hdGVyaWFscyddLnRvU3RyaW5nKCkpWzBdXG5kZWYgU3VwcE9mZmVyTWF0VG90ID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zdXBwbGllck9mZmVyTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBDdXN0T2ZmZXJMYWJUb3QgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmN1c3RvbWVyT2ZmZXJMYWJvdXInXS50b1N0cmluZygpKVswXVxuZGVmIFN1cHBPZmZlckxhYlRvdCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yuc3VwcGxpZXJPZmZlckxhYm91ciddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiByZXBNYXRlcmlhbHMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnF1b3RlTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBsYWJvdXJSYXRlcyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YucXVvdGVMYWJvdXJSYXRlcyddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGlzc3VlXG5kZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcblxuLypWYXJpYWJsZXMqL1xuZGVmIGN1c3RvbWVyT2ZmZXJUb3QsIHN1cHBsaWVyT2ZmZXJUb3RcbmRvdWJsZSB0b3RBbW91bnRTdXBwbGllciA9IDBcbmRvdWJsZSB0b3RBbW91bnRDdXN0b21lciA9IDBcbmRlZiByZXBNYXRMaXN0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpXG5kZWYgbGFib3VyUmF0ZXNMaXN0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsYWJvdXJSYXRlcylcblxuZGVmIHRvdEN1c3RNYXQgPSAwXG5kZWYgdG90Q3VzdExhYiA9IDBcbmRlZiB0b3RTdXBwTWF0ID0gMFxuZGVmIHRvdFN1cHBMYWI9IDBcblxuZm9yKG1hdCBpbiByZXBNYXRMaXN0KXtcbiAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5kIGdldCBvYmplY3RcbiAgICBkZWYgY29tcG9uZW50PW1hdC50b1N0cmluZygpXG4gICAgZGVmIGNvbXBvbmVudEtleSA9IGNvbXBvbmVudC5zdWJzdHJpbmcoY29tcG9uZW50Lmxhc3RJbmRleE9mKCcoJykrMSxjb21wb25lbnQubGFzdEluZGV4T2YoJyknKSlcbiAgICBkZWYgY29tcG9uZW50T2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGNvbXBvbmVudEtleSlcblxuICAgIC8vTUFURVJJQUxfUkVGXG4gICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50Lm1hdGVyaWFsUmVmJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgZGVmIG1hdGVyaWFsID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgXG4gICAgLy9ERUxFVEVEXG4gICAgZGVmIGRlbGV0ZWRcbiAgICBpZiAob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5kZWxldGVkJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuZGVsZXRlZCddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKVxuICAgIFx0ZGVsZXRlZCA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuICAgICAgICBkZWxldGVkID0gZGVsZXRlZFswXS5nZXRWYWx1ZSgpXG4gICAgfVxuICAgIFxuICAgIC8vVE9UQUxfQU1PVU5UX1NVUFBMSUVSXG4gICAgaWYoKGRlbGV0ZWQ9PW51bGwgfHwgZGVsZXRlZCE9dHJ1ZSkgJiYgb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RTdXBwJ10udG9TdHJpbmcoKSkhPW51bGwpe1xuICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQudG90U3VwcCddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICBkZWYgdG90U3VwcGxpZXIgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgdG90QW1vdW50U3VwcGxpZXIgPSB0b3RBbW91bnRTdXBwbGllciArIHRvdFN1cHBsaWVyWzBdLmdldFZhbHVlKCkudG9Eb3VibGUoKVxuICAgICAgICB0b3RTdXBwTWF0ID0gdG90U3VwcE1hdCArIHRvdFN1cHBsaWVyWzBdLmdldFZhbHVlKCkudG9Eb3VibGUoKVxuICAgIH1cbiAgICBcbiAgICAvL1RPVEFMX0FNT1VOVF9DVVNUT01FUlxuICAgIGlmKChkZWxldGVkPT1udWxsIHx8IGRlbGV0ZWQhPXRydWUpICYmIG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQudG90Q3VzdCddLnRvU3RyaW5nKCkpIT1udWxsKXtcbiAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdEN1c3QnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgZGVmIHRvdEN1c3RvbWVyID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgIHRvdEFtb3VudEN1c3RvbWVyID0gdG90QW1vdW50Q3VzdG9tZXIgKyB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvRG91YmxlKClcbiAgICAgICAgdG90Q3VzdE1hdCA9IHRvdEN1c3RNYXQgKyB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvRG91YmxlKClcbiAgICB9XG4gICAgICAgIFxuICAgIGlmIChtYXRlcmlhbCE9bnVsbCAmJiAoZGVsZXRlZD09bnVsbCB8fCBkZWxldGVkIT10cnVlKSl7IFxuICAgICAgICAvKlZlcmlmaWNvIHNlIHNpIHRyYXR0YSBkaSB1biBtYXRlcmlhbGUgU0FQIG8gTk8gU0FQKi9cbiAgICAgICAgbWF0ZXJpYWwgPSBtYXRlcmlhbC50b1N0cmluZygpXG4gICAgICAgIG1hdGVyaWFsS2V5ID0gbWF0ZXJpYWwuc3Vic3RyaW5nKG1hdGVyaWFsLmxhc3RJbmRleE9mKCcoJykrMSxtYXRlcmlhbC5sYXN0SW5kZXhPZignKScpKVxuXG4gICAgICAgIC8qTUFURVJJQUwgLSBTQVAqL1xuICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihtYXRlcmlhbEtleS50b0ludGVnZXIoKSwgcHJvcGVydGllc1snaW9iai5tYXRlcmlhbC5zYXAnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgc2FwID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG5cbiAgICAgICAgLypNQVRFUklBTCAtIE1BVE5SKi9cbiAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obWF0ZXJpYWxLZXkudG9JbnRlZ2VyKCksIHByb3BlcnRpZXNbJ2lvYmoubWF0ZXJpYWwubWF0bnInXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgbWF0bnIgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcblxuICAgICAgICBpZihzYXAhPW51bGwgJiYgbWF0bnIhPW51bGwpe1xuICAgICAgICAgICAgbWF0bnI9bWF0bnIudG9TdHJpbmcoKVxuICAgICAgICAgICAgbWF0bnIgPSBtYXRuci5zdWJzdHJpbmcobWF0bnIubGFzdEluZGV4T2YoJygnKSsxLG1hdG5yLmxhc3RJbmRleE9mKCcpJykpXG4gICAgICAgICAgICBzYXA9c2FwLnRvU3RyaW5nKClcbiAgICAgICAgICAgIHNhcCA9IHNhcC5zdWJzdHJpbmcoc2FwLmxhc3RJbmRleE9mKCcoJykrMSxzYXAubGFzdEluZGV4T2YoJyknKSlcblxuICAgICAgICAgICAgaWYoc2FwLmVxdWFsc0lnbm9yZUNhc2UoXCJ0cnVlXCIpKXtcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJNYXRlcmlhbGUgc2FwOiBcIiArIHNhcFxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiTWF0ZXJpYWxlIE5PTiBzYXA6IFwiICsgc2FwXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH1cbn1cblxuZm9yKHJhdGUgaW4gbGFib3VyUmF0ZXNMaXN0KXtcbiAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5kIGdldCBvYmplY3RcbiAgICBkZWYgbGFiUmF0ZT1yYXRlLnRvU3RyaW5nKClcbiAgICBkZWYgbGFiUmF0ZUtleSA9IGxhYlJhdGUuc3Vic3RyaW5nKGxhYlJhdGUubGFzdEluZGV4T2YoJygnKSsxLGxhYlJhdGUubGFzdEluZGV4T2YoJyknKSlcbiAgICBkZWYgbGFiUmF0ZU9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihsYWJSYXRlS2V5KVxuXG4gICAgLy9NQVRFUklBTF9SRUZcbiAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYWJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5yYXRlUmVmJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgZGVmIHJhdGVEZXNjID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgXG4gICAgLy9ERUxFVEVEXG4gICAgZGVmIGRlbGV0ZWRcbiAgICBpZiAob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxhYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKSl7XG4gICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxhYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICBcdGRlbGV0ZWQgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgZGVsZXRlZCA9IGRlbGV0ZWRbMF0uZ2V0VmFsdWUoKVxuICAgIH1cbiAgICBcbiAgICAvL1RPVEFMX0FNT1VOVF9TVVBQTElFUlxuICAgIGlmKChkZWxldGVkPT1udWxsIHx8IGRlbGV0ZWQhPXRydWUpICYmIG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYWJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lib2oub25TaXRlUmF0ZVJlcG9ydC50b3RTdXBwbGllciddLnRvU3RyaW5nKCkpIT1udWxsKXtcbiAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGFiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90U3VwcGxpZXInXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgZGVmIHRvdFN1cHBsaWVyID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgIHRvdEFtb3VudFN1cHBsaWVyID0gdG90QW1vdW50U3VwcGxpZXIgKyB0b3RTdXBwbGllclswXS5nZXRWYWx1ZSgpLnRvRG91YmxlKClcbiAgICAgICAgdG90U3VwcExhYiA9IHRvdFN1cHBMYWIgKyB0b3RTdXBwbGllclswXS5nZXRWYWx1ZSgpLnRvRG91YmxlKClcbiAgICB9XG4gICAgXG4gICAgLy9UT1RBTF9BTU9VTlRfQ1VTVE9NRVJcbiAgICBpZigoZGVsZXRlZD09bnVsbCB8fCBkZWxldGVkIT10cnVlKSAmJiBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGFiUmF0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdG9tZXInXS50b1N0cmluZygpKSE9bnVsbCl7XG4gICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxhYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaWJvai5vblNpdGVSYXRlUmVwb3J0LnRvdEN1c3RvbWVyJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgIGRlZiB0b3RDdXN0b21lciA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuICAgICAgICB0b3RBbW91bnRDdXN0b21lciA9IHRvdEFtb3VudEN1c3RvbWVyICsgdG90Q3VzdG9tZXJbMF0uZ2V0VmFsdWUoKS50b0RvdWJsZSgpXG4gICAgICAgIHRvdEN1c3RMYWIgPSB0b3RDdXN0TGFiICsgdG90Q3VzdG9tZXJbMF0uZ2V0VmFsdWUoKS50b0RvdWJsZSgpXG4gICAgfVxufVxuXG5cblxubG9nLmRlYnVnIFwiVE9UQUxFIE9GRkVSVEEgRk9STklUT1JFOiBcIiArIG5ldyBEZWNpbWFsRm9ybWF0KFwiIy4jI1wiKS5mb3JtYXQodG90QW1vdW50U3VwcGxpZXIpXG5sb2cuZGVidWcgXCJUT1RBTEUgT0ZGRVJUQSBDTElFTlRFOiBcIiArIG5ldyBEZWNpbWFsRm9ybWF0KFwiIy4jI1wiKS5mb3JtYXQodG90QW1vdW50Q3VzdG9tZXIpXG5cbklzc3VlQ2hhbmdlSG9sZGVyIGNoYW5nZUhvbGRlciA9IG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKVxuQ3VzdE9mZmVyVG90LnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKEN1c3RPZmZlclRvdCksdG90QW1vdW50Q3VzdG9tZXIudG9Eb3VibGUoKSksY2hhbmdlSG9sZGVyKVxuU3VwcE9mZmVyVG90LnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKFN1cHBPZmZlclRvdCksdG90QW1vdW50U3VwcGxpZXIudG9Eb3VibGUoKSksY2hhbmdlSG9sZGVyKVxuXG5DdXN0T2ZmZXJNYXRUb3QudXBkYXRlVmFsdWUobnVsbCwgaXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoQ3VzdE9mZmVyTWF0VG90KSx0b3RDdXN0TWF0LnRvRG91YmxlKCkpLGNoYW5nZUhvbGRlcilcblN1cHBPZmZlck1hdFRvdC51cGRhdGVWYWx1ZShudWxsLCBpc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShTdXBwT2ZmZXJNYXRUb3QpLHRvdFN1cHBNYXQudG9Eb3VibGUoKSksY2hhbmdlSG9sZGVyKVxuQ3VzdE9mZmVyTGFiVG90LnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKEN1c3RPZmZlckxhYlRvdCksdG90Q3VzdExhYi50b0RvdWJsZSgpKSxjaGFuZ2VIb2xkZXIpXG5TdXBwT2ZmZXJMYWJUb3QudXBkYXRlVmFsdWUobnVsbCwgaXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoU3VwcE9mZmVyTGFiVG90KSx0b3RTdXBwTGFiLnRvRG91YmxlKCkpLGNoYW5nZUhvbGRlcilcbiIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZQppbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb24KaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3IKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXIKaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyCmltcG9ydCBncm9vdnkuanNvbi5Kc29uU2x1cnBlcgppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb25maWcudXRpbC5KaXJhSG9tZQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvbgppbXBvcnQgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQKaW1wb3J0IGphdmEudGV4dC5QYXJzZUV4Y2VwdGlvbgppbXBvcnQgamF2YS50ZXh0LkRlY2ltYWxGb3JtYXQKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5Jc3N1ZUNoYW5nZUhvbGRlcgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyCgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQpkZWYgQ2F0ZWdvcnkgbG9nID0gQ2F0ZWdvcnkuZ2V0SW5zdGFuY2UoImNvbS5vbnJlc29sdmUuamlyYS5ncm9vdnkuUG9zdEZ1bmN0aW9uIikKbG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpCgovKlNjcmlwdCBWYXJpYWJsZXMqLwovL1BlciBQb3N0IEZ1bmN0aW9uCmlzc3VlID0gaXNzdWUKLy9QZXIgdGVzdCBkYSBjb25zb2xlCi8vSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpCi8vaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoIk9QVVQtMzM4MiIpCgovKkluc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHMqLwpDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZSIpOyAgCkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUiKTsKb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpOwpvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpOwovKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovCkNsYXNzIGlxbEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuSVFMRmFjYWRlIik7IAppcWxGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUoaXFsRmFjYWRlQ2xhc3MpOwpDbGFzcyBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5zZXJ2aWNlcy5tb2RlbC5mYWN0b3J5Lk9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Iik7Cm9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MpOwovKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi8KQ2xhc3Mgb2JqZWN0VHlwZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUZhY2FkZSIpOyAKb2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpOwoKLypDT1NUQU5USSovCk9QQUE9cHJvcGVydGllc1snaXNjaGVtYS5hYS5pZCddCi8vQXR0cmlidXRlIElEcwpSQVRFX1RPVEFMX0FNT1VOVF9TVVBQTElFUj1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQudG90U3VwcC5pZCddClJBVEVfVE9UQUxfQU1PVU5UX0NVU1RPTUVSPXByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC50b3RDdXN0LmlkJ10KQ09NUE9ORU5UX1RPVEFMX0FNT1VOVF9TVVBQTElFUj1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RTdXBwLmlkJ10KQ09NUE9ORU5UX1RPVEFMX0FNT1VOVF9DVVNUT01FUj1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RDdXN0LmlkJ10KLy9PYmpUeXBlIElEcwpPTlNJVEVfUkFURV9SRVBPUlQ9cHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0J10KQ09NUE9ORU5UPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50J10KCi8qQ3VzdG9tZmllbGRzKi8KZGVmIEN1c3RPZmZlclRvdCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY3VzdG9tZXJPZmZlclRvdEFtb3VudCddLnRvU3RyaW5nKCkpWzBdCmRlZiBTdXBwT2ZmZXJUb3QgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnN1cHBsaWVyT2ZmZXJUb3RBbW91bnQnXS50b1N0cmluZygpKVswXQoKZGVmIEN1c3RPZmZlck1hdFRvdCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY3VzdG9tZXJPZmZlck1hdGVyaWFscyddLnRvU3RyaW5nKCkpWzBdCmRlZiBTdXBwT2ZmZXJNYXRUb3QgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnN1cHBsaWVyT2ZmZXJNYXRlcmlhbHMnXS50b1N0cmluZygpKVswXQpkZWYgQ3VzdE9mZmVyTGFiVG90ID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5jdXN0b21lck9mZmVyTGFib3VyJ10udG9TdHJpbmcoKSlbMF0KZGVmIFN1cHBPZmZlckxhYlRvdCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yuc3VwcGxpZXJPZmZlckxhYm91ciddLnRvU3RyaW5nKCkpWzBdCgpkZWYgcmVwTWF0ZXJpYWxzID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5xdW90ZU1hdGVyaWFscyddLnRvU3RyaW5nKCkpWzBdCmRlZiBsYWJvdXJSYXRlcyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YucXVvdGVMYWJvdXJSYXRlcyddLnRvU3RyaW5nKCkpWzBdCgpkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBpc3N1ZQpkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKCi8qVmFyaWFibGVzKi8KZGVmIGN1c3RvbWVyT2ZmZXJUb3QsIHN1cHBsaWVyT2ZmZXJUb3QKZG91YmxlIHRvdEFtb3VudFN1cHBsaWVyID0gMApkb3VibGUgdG90QW1vdW50Q3VzdG9tZXIgPSAwCmRlZiByZXBNYXRMaXN0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpCmRlZiBsYWJvdXJSYXRlc0xpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGxhYm91clJhdGVzKQoKZGVmIHRvdEN1c3RNYXQgPSAwCmRlZiB0b3RDdXN0TGFiID0gMApkZWYgdG90U3VwcE1hdCA9IDAKZGVmIHRvdFN1cHBMYWI9IDAKCmZvcihtYXQgaW4gcmVwTWF0TGlzdCl7CiAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5kIGdldCBvYmplY3QKICAgIGRlZiBjb21wb25lbnQ9bWF0LnRvU3RyaW5nKCkKICAgIGRlZiBjb21wb25lbnRLZXkgPSBjb21wb25lbnQuc3Vic3RyaW5nKGNvbXBvbmVudC5pbmRleE9mKCcoJykrMSxjb21wb25lbnQuaW5kZXhPZignKScpKQogICAgZGVmIGNvbXBvbmVudE9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihjb21wb25lbnRLZXkpCgogICAgLy9NQVRFUklBTF9SRUYKICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5tYXRlcmlhbFJlZiddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKQogICAgZGVmIG1hdGVyaWFsID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpCiAgICAKICAgIC8vREVMRVRFRAogICAgZGVmIGRlbGV0ZWQKICAgIGlmIChvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmRlbGV0ZWQnXS50b1N0cmluZygpKSl7CiAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmRlbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkKICAgIAlkZWxldGVkID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpCiAgICAgICAgZGVsZXRlZCA9IGRlbGV0ZWRbMF0uZ2V0VmFsdWUoKQogICAgfQogICAgCiAgICAvL1RPVEFMX0FNT1VOVF9TVVBQTElFUgogICAgaWYoZGVsZXRlZD09bnVsbCB8fCBkZWxldGVkIT10cnVlKXsKICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQudG90U3VwcCddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKQogICAgICAgIGRlZiB0b3RTdXBwbGllciA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQogICAgICAgIHRvdEFtb3VudFN1cHBsaWVyID0gdG90QW1vdW50U3VwcGxpZXIgKyB0b3RTdXBwbGllclswXS5nZXRWYWx1ZSgpLnRvRG91YmxlKCkKICAgICAgICB0b3RTdXBwTWF0ID0gdG90U3VwcE1hdCArIHRvdFN1cHBsaWVyWzBdLmdldFZhbHVlKCkudG9Eb3VibGUoKQogICAgfQogICAgCiAgICAvL1RPVEFMX0FNT1VOVF9DVVNUT01FUgogICAgaWYoZGVsZXRlZD09bnVsbCB8fCBkZWxldGVkIT10cnVlKXsKICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQudG90Q3VzdCddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKQogICAgICAgIGRlZiB0b3RDdXN0b21lciA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQogICAgICAgIHRvdEFtb3VudEN1c3RvbWVyID0gdG90QW1vdW50Q3VzdG9tZXIgKyB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvRG91YmxlKCkKICAgICAgICB0b3RDdXN0TWF0ID0gdG90Q3VzdE1hdCArIHRvdEN1c3RvbWVyWzBdLmdldFZhbHVlKCkudG9Eb3VibGUoKQogICAgfQogICAgICAgIAogICAgaWYgKG1hdGVyaWFsIT1udWxsICYmIChkZWxldGVkPT1udWxsIHx8IGRlbGV0ZWQhPXRydWUpKXsgCiAgICAgICAgLypWZXJpZmljbyBzZSBzaSB0cmF0dGEgZGkgdW4gbWF0ZXJpYWxlIFNBUCBvIE5PIFNBUCovCiAgICAgICAgbWF0ZXJpYWwgPSBtYXRlcmlhbC50b1N0cmluZygpCiAgICAgICAgbWF0ZXJpYWxLZXkgPSBtYXRlcmlhbC5zdWJzdHJpbmcobWF0ZXJpYWwuaW5kZXhPZignKCcpKzEsbWF0ZXJpYWwuaW5kZXhPZignKScpKQoKICAgICAgICAvKk1BVEVSSUFMIC0gU0FQKi8KICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihtYXRlcmlhbEtleS50b0ludGVnZXIoKSwgcHJvcGVydGllc1snaW9iai5tYXRlcmlhbC5zYXAnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkKICAgICAgICBzYXAgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkKCiAgICAgICAgLypNQVRFUklBTCAtIE1BVE5SKi8KICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihtYXRlcmlhbEtleS50b0ludGVnZXIoKSwgcHJvcGVydGllc1snaW9iai5tYXRlcmlhbC5tYXRuciddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKQogICAgICAgIG1hdG5yID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpCgogICAgICAgIGlmKHNhcCE9bnVsbCAmJiBtYXRuciE9bnVsbCl7CiAgICAgICAgICAgIG1hdG5yPW1hdG5yLnRvU3RyaW5nKCkKICAgICAgICAgICAgbWF0bnIgPSBtYXRuci5zdWJzdHJpbmcobWF0bnIuaW5kZXhPZignKCcpKzEsbWF0bnIuaW5kZXhPZignKScpKQogICAgICAgICAgICBzYXA9c2FwLnRvU3RyaW5nKCkKICAgICAgICAgICAgc2FwID0gc2FwLnN1YnN0cmluZyhzYXAuaW5kZXhPZignKCcpKzEsc2FwLmluZGV4T2YoJyknKSkKCiAgICAgICAgICAgIGlmKHNhcC5lcXVhbHNJZ25vcmVDYXNlKCJ0cnVlIikpewogICAgICAgICAgICAgICAgbG9nLmRlYnVnICJNYXRlcmlhbGUgc2FwOiAiICsgc2FwCiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgbG9nLmRlYnVnICJNYXRlcmlhbGUgTk9OIHNhcDogIiArIHNhcAogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgIH0KfQoKZm9yKHJhdGUgaW4gbGFib3VyUmF0ZXNMaXN0KXsKICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmQgZ2V0IG9iamVjdAogICAgZGVmIGxhYlJhdGU9cmF0ZS50b1N0cmluZygpCiAgICBkZWYgbGFiUmF0ZUtleSA9IGxhYlJhdGUuc3Vic3RyaW5nKGxhYlJhdGUuaW5kZXhPZignKCcpKzEsbGFiUmF0ZS5pbmRleE9mKCcpJykpCiAgICBkZWYgbGFiUmF0ZU9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihsYWJSYXRlS2V5KQoKICAgIC8vTUFURVJJQUxfUkVGCiAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYWJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5yYXRlUmVmJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpCiAgICBkZWYgcmF0ZURlc2MgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkKICAgIAogICAgLy9ERUxFVEVECiAgICBkZWYgZGVsZXRlZAogICAgaWYgKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYWJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSkpewogICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxhYlJhdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0LmRlbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkKICAgIAlkZWxldGVkID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpCiAgICAgICAgZGVsZXRlZCA9IGRlbGV0ZWRbMF0uZ2V0VmFsdWUoKQogICAgfQogICAgCiAgICAvL1RPVEFMX0FNT1VOVF9TVVBQTElFUgogICAgaWYoZGVsZXRlZD09bnVsbCB8fCBkZWxldGVkIT10cnVlKXsKICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYWJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC50b3RTdXBwbGllciddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKQogICAgICAgIGRlZiB0b3RTdXBwbGllciA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQogICAgICAgIHRvdEFtb3VudFN1cHBsaWVyID0gdG90QW1vdW50U3VwcGxpZXIgKyB0b3RTdXBwbGllclswXS5nZXRWYWx1ZSgpLnRvRG91YmxlKCkKICAgICAgICB0b3RTdXBwTGFiID0gdG90U3VwcExhYiArIHRvdFN1cHBsaWVyWzBdLmdldFZhbHVlKCkudG9Eb3VibGUoKQogICAgfQogICAgCiAgICAvL1RPVEFMX0FNT1VOVF9DVVNUT01FUgogICAgaWYoZGVsZXRlZD09bnVsbCB8fCBkZWxldGVkIT10cnVlKXsKICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYWJSYXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC50b3RDdXN0b21lciddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKQogICAgICAgIGRlZiB0b3RDdXN0b21lciA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQogICAgICAgIHRvdEFtb3VudEN1c3RvbWVyID0gdG90QW1vdW50Q3VzdG9tZXIgKyB0b3RDdXN0b21lclswXS5nZXRWYWx1ZSgpLnRvRG91YmxlKCkKICAgICAgICB0b3RDdXN0TGFiID0gdG90Q3VzdExhYiArIHRvdEN1c3RvbWVyWzBdLmdldFZhbHVlKCkudG9Eb3VibGUoKQogICAgfQp9CgoKCmxvZy5kZWJ1ZyAiVE9UQUxFIE9GRkVSVEEgRk9STklUT1JFOiAiICsgbmV3IERlY2ltYWxGb3JtYXQoIiMuIyMiKS5mb3JtYXQodG90QW1vdW50U3VwcGxpZXIpCmxvZy5kZWJ1ZyAiVE9UQUxFIE9GRkVSVEEgQ0xJRU5URTogIiArIG5ldyBEZWNpbWFsRm9ybWF0KCIjLiMjIikuZm9ybWF0KHRvdEFtb3VudEN1c3RvbWVyKQoKSXNzdWVDaGFuZ2VIb2xkZXIgY2hhbmdlSG9sZGVyID0gbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpCkN1c3RPZmZlclRvdC51cGRhdGVWYWx1ZShudWxsLCBpc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShDdXN0T2ZmZXJUb3QpLHRvdEFtb3VudEN1c3RvbWVyKSxjaGFuZ2VIb2xkZXIpClN1cHBPZmZlclRvdC51cGRhdGVWYWx1ZShudWxsLCBpc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShTdXBwT2ZmZXJUb3QpLHRvdEFtb3VudFN1cHBsaWVyKSxjaGFuZ2VIb2xkZXIpCgpDdXN0T2ZmZXJNYXRUb3QudXBkYXRlVmFsdWUobnVsbCwgaXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoQ3VzdE9mZmVyTWF0VG90KSx0b3RDdXN0TWF0KSxjaGFuZ2VIb2xkZXIpClN1cHBPZmZlck1hdFRvdC51cGRhdGVWYWx1ZShudWxsLCBpc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShTdXBwT2ZmZXJNYXRUb3QpLHRvdFN1cHBNYXQpLGNoYW5nZUhvbGRlcikKQ3VzdE9mZmVyTGFiVG90LnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKEN1c3RPZmZlckxhYlRvdCksdG90Q3VzdExhYiksY2hhbmdlSG9sZGVyKQpTdXBwT2ZmZXJMYWJUb3QudXBkYXRlVmFsdWUobnVsbCwgaXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoU3VwcE9mZmVyTGFiVG90KSx0b3RTdXBwTGFiKSxjaGFuZ2VIb2xkZXIpCgogICAgICAgICAgICAK</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE"></arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">f66a5f06-1465-410f-b85d-1622703520c0</arg>
                  <arg name="FIELD_NOTES">YCFgT1A6IEdlbmVyYXRlIENvbXBvbmVudHMgJiBwb3B1bGF0ZSBPUEFBX1JFUExBQ0VEX01BVEVSSUFMUw==</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnlcbmltcG9ydCBncm9vdnkuanNvbi5Kc29uQnVpbGRlclxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29uZmlnLnV0aWwuSmlyYUhvbWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvblxuaW1wb3J0IGphdmEudGV4dC5TaW1wbGVEYXRlRm9ybWF0XG5pbXBvcnQgamF2YS50ZXh0LlBhcnNlRXhjZXB0aW9uXG5pbXBvcnQgamF2YS50ZXh0LkRlY2ltYWxGb3JtYXRcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS51dGlsLklzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5cbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG4vKlNjcmlwdCBWYXJpYWJsZXMqL1xuLy9QZXIgUG9zdCBGdW5jdGlvblxuaXNzdWUgPSBpc3N1ZVxuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL0lzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKVxuLy9pc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy00MDY0XCIpXG5cbi8qSW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50cyovXG5DbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7ICBcbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xub2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xub2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcbi8qIEdldCBJbnNpZ2h0IElRTCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIGlxbEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLklRTEZhY2FkZVwiKTsgXG5pcWxGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUoaXFsRmFjYWRlQ2xhc3MpO1xuQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG5vYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzKTtcbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBUeXBlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xuQ2xhc3Mgb2JqZWN0VHlwZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVGYWNhZGVcIik7IFxub2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpO1xuXG5kZWYgREJPPXByb3BlcnRpZXNbJ2lzY2hlbWEuZGJvLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuZGVmIE9QQUE9cHJvcGVydGllc1snaXNjaGVtYS5hYS5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbi8vQXR0cmlidXRlIElEc1xuZGVmIFJBVEVfVE9UQUxfQU1PVU5UX1NVUFBMSUVSPXByb3BlcnRpZXNbJ2lib2oub25TaXRlUmF0ZVJlcG9ydC50b3RTdXBwbGllci5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbmRlZiBSQVRFX1RPVEFMX0FNT1VOVF9DVVNUT01FUj1wcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdG9tZXIuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5kZWYgQ09NUE9ORU5UX1RPVEFMX0FNT1VOVF9TVVBQTElFUj1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RTdXBwLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuZGVmIENPTVBPTkVOVF9UT1RBTF9BTU9VTlRfQ1VTVE9NRVI9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQudG90Q3VzdC5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcblxuZGVmIENPTVBPTkVOVF9OQU1FPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50Lm5hbWUuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5kZWYgQ09NUE9ORU5UX0hBUkRXQVJFX1JFRj1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5oYXJkd2FyZVJlZi5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbmRlZiBDT01QT05FTlRfU0FQPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnNhcC5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbmRlZiBDT01QT05FTlRfU1VQUExJRURfQllfRkFBQz1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5zdXBwbGllZEJ5RmFhYy5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbmRlZiBDT01QT05FTlRfUVVBTlRJVFk9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQucXVhbnRpdHkuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5kZWYgQ09NUE9ORU5UX1FVT1RFX1JFUVVJUkVEPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnF1b3RlUmVxdWlyZWQuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5kZWYgQ09NUE9ORU5UX1NVUFBMSUVSX1FVT1RFX1RPX0ZBQUM9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQuc3VwcGxpZXJRdW90ZS5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbmRlZiBDT01QT05FTlRfRkFBQ19RVU9URV9UT19DVVNUT01FUj1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5jdXN0b21lclF1b3RlLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuZGVmIENPTVBPTkVOVF9BUFBMSUVEX1RPPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmFwcGxpZWRUby5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbmRlZiBDT01QT05FTlRfTUFURVJJQUxfUkVGPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50Lm1hdGVyaWFsUmVmLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuZGVmIENPTVBPTkVOVF9BQ0NPVU5USU5HX1NVUFBMSUVSX01BVEVSSUFMX1JFRj1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hY2NvdW50aW5nU3VwcE1hdFJlZi5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbmRlZiBDT01QT05FTlRfQUNDT1VOVElOR19DVVNUT01FUl9NQVRFUklBTF9SRUY9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQuYWNjb3VudGluZ0N1c3RNYXRSZWYuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5kZWYgQ09NUE9ORU5UX0ZST01fUVVPVEVfVEtUPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmZyb21RdW90ZVRrdC5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbmRlZiBDT01QT05FTlRfREVMRVRFRD1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5kZWxldGVkLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuICAgIFxuLy9PYmpUeXBlIElEc1xuZGVmIENPTVBPTkVOVD1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcblxuXG4vKkN1c3RvbWZpZWxkcyovXG5kZWYgcXVvdGVSZXBNYXRlcmlhbHMgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YucXVvdGVNYXRlcmlhbHMnXS50b1N0cmluZygpKVswXVxuZGVmIHJlcE1hdGVyaWFscyA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5yZXBsYWNlZE1hdGVyaWFscyddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGlzc3VlXG5kZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcblxuLypWYXJpYWJsZXMqL1xuZGVmIHJlcE1hdExpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHF1b3RlUmVwTWF0ZXJpYWxzKVxuZGVmIG9iakxpc3QgPSBuZXcgQXJyYXlMaXN0KClcblxuZm9yKG1hdCBpbiByZXBNYXRMaXN0KXtcblx0Ly9leHRyYWN0IGluc2lnaHQga2V5IGFuZCBnZXQgb2JqZWN0XG4gICAgZGVmIGNvbXBvbmVudD1tYXQudG9TdHJpbmcoKVxuICAgIGRlZiBjb21wb25lbnRLZXkgPSBjb21wb25lbnQuc3Vic3RyaW5nKGNvbXBvbmVudC5sYXN0SW5kZXhPZignKCcpKzEsY29tcG9uZW50Lmxhc3RJbmRleE9mKCcpJykpXG4gICAgZGVmIGNvbXBvbmVudE9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihjb21wb25lbnRLZXkpXG4gICAgXG4gICAgbG9nLmRlYnVnIFwiY29tcG9uZW50T2JqZWN0OiBcIiArIGNvbXBvbmVudE9iamVjdFxuICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5kZWxldGVkJ10udG9TdHJpbmcoKSkgPyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmRlbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkgOiBudWxsXG5cdGRlZiBkZWwgPSBvYlRyaWFnZSA/IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKSA6IG51bGxcblx0ZGVsPSBkZWwgPyBkZWxbMF0uZ2V0VmFsdWUoKSA6IGZhbHNlXG4gICAgbG9nLmRlYnVnIFwiZGVsZXRlZDogXCIgKyBkZWxcbiAgICBcbiAgICBpZighZGVsKXtcbiAgICAgICAgZGVmIG5ld09iakF0dHJpYnV0ZXNMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIGRlZiBpID0gMFxuXG4gICAgICAgIGRlZiBvYmplY3RUeXBlQ29tcG9uZW50ID0gb2JqZWN0VHlwZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUJlYW4oQ09NUE9ORU5UKTtcbiAgICAgICAgLyogQ3JlYXRlIGEgbmV3IHVuc2F2ZWQgb2JqZWN0IGJlYW4gKi9cbiAgICAgICAgZGVmIG5ld09iamVjdEJlYW4gPSBvYmplY3RUeXBlQ29tcG9uZW50LmNyZWF0ZU9iamVjdEJlYW4oKTtcblxuICAgICAgICAvKiBTZXQgdXAgdGhlIGF0dHJpYnV0ZSBsaXN0ICovXG4gICAgICAgIGRlZiBvYmplY3RBdHRyaWJ1dGVCZWFucyA9IG5ldyBBcnJheUxpc3QoKTtcblxuICAgICAgICAvKiBTZXQgdGhlIG5hbWUgb2YgdGhlIENvbXBvbmVudCAqL1xuICAgICAgICAvKk5vbWUgQ29tcG9uZW50Ki9cbiAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50Lm5hbWUnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgZGVmIGNvbXBOYW1lID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgIGNvbXBOYW1lPWNvbXBOYW1lWzBdLmdldFZhbHVlKClcbiAgICAgICAgbG9nLmRlYnVnIFwib2JqZWN0IG5hbWU6IFwiICsgY29tcE5hbWVcbiAgICAgICAgZGVmIG5hbWVPYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKENPTVBPTkVOVF9OQU1FKTsgLy8gVGhlIElEIG9mIHRoZSBvYmplY3QgdHlwZSBhdHRyaWJ1dGUgXCJOYW1lXCJcbiAgICAgICAgZGVmIG5hbWVPYmplY3RBdHRyaWJ1dGVCZWFuID0gbmV3T2JqZWN0QmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKG5hbWVPYmplY3RUeXBlQXR0cmlidXRlQmVhbik7IC8vIFRoaXMgaXMgdGhlIG5hbWUgb2JqZWN0IGF0dHJpYnV0ZSBmb3IgdGhlIG5ldyBvYmplY3RcbiAgICAgICAgZGVmIG5hbWVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4gPSBuYW1lT2JqZWN0QXR0cmlidXRlQmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTsgLy8gVGhpcyBpcyB0aGUgYWN0dWFsIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGVcbiAgICAgICAgbmFtZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbi5zZXRUZXh0VmFsdWVTaG9ydChjb21wTmFtZSk7IC8vIFNldCB0aGUgbmFtZVxuXG4gICAgICAgIGRlZiB2YWx1ZXMgPSBuYW1lT2JqZWN0QXR0cmlidXRlQmVhbi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7IFxuICAgICAgICB2YWx1ZXMuYWRkKG5hbWVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4pOyAvLyBBZGQgdGhlIHZhbHVlIHRvIHRoZSBvYmplY3QgYXR0cmlidXRlXG4gICAgICAgIGxvZy5kZWJ1ZyB2YWx1ZXNcbiAgICAgICAgbmFtZU9iamVjdEF0dHJpYnV0ZUJlYW4uc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyh2YWx1ZXMpOyBcbiAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKG5hbWVPYmplY3RBdHRyaWJ1dGVCZWFuKTtcblxuICAgICAgICAvKiBTZXQgdGhlIEhBUkRXQVJFX1JFRiBvZiB0aGUgbmV3IG9iaiAqL1xuICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuaGFyZHdhcmVSZWYnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgZGVmIGh3ID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgIGh3S2V5PWh3WzBdLmdldFZhbHVlKCkgICAgXG4gICAgICAgIGRlZiBId1JlZk9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oQ09NUE9ORU5UX0hBUkRXQVJFX1JFRik7IC8vIFRoZSBJRCBmb3IgdGhlIHJlZmVyZW5jZWQgb2JqZWN0IHR5cGVcbiAgICAgICAgSHdSZWZPYmplY3RBdHRyaWJ1dGVCZWFuID0gbmV3T2JqZWN0QmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKEh3UmVmT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4pOyBcbiAgICAgICAgSHdSZWZPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4gPSBId1JlZk9iamVjdEF0dHJpYnV0ZUJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7IC8vIFRoaXMgaXMgdGhlIGFjdHVhbCB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlXG4gICAgICAgIEh3UmVmT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuLnNldFJlZmVyZW5jZWRPYmplY3RCZWFuSWQoaHdLZXkpOyAvLyBTZXQgdGhlIElEXG5cbiAgICAgICAgdmFsdWVzID0gSHdSZWZPYmplY3RBdHRyaWJ1dGVCZWFuLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTsgXG4gICAgICAgIHZhbHVlcy5hZGQoSHdSZWZPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4pOyAvLyBBZGQgdGhlIHZhbHVlIHRvIHRoZSBvYmplY3QgYXR0cmlidXRlXG4gICAgICAgIGxvZy5kZWJ1ZyB2YWx1ZXNcbiAgICAgICAgSHdSZWZPYmplY3RBdHRyaWJ1dGVCZWFuLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWVzKTsgXG5cbiAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKEh3UmVmT2JqZWN0QXR0cmlidXRlQmVhbik7IC8vIEFkZCB0byB0aGUgbGlzdCBvZiBvYmplY3QgYXR0cmlidXRlc1xuXG4gICAgICAgIC8qIFNldCB0aGUgQ09NUE9ORU5UX1NBUCBmbGFnIG9mIHRoZSBIYXJkd2FyZSAqL1xuICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuc2FwJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgIGRlZiBzYXAgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgc2FwPXNhcFswXS5nZXRWYWx1ZSgpXG4gICAgICAgIGRlZiBjb21wU2FwT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihDT01QT05FTlRfU0FQKTsgLy8gVGhlIElEIG9mIHRoZSBvYmplY3QgdHlwZSBhdHRyaWJ1dGUgXCJESVNBQkxFRFwiXG4gICAgICAgIGRlZiBjb21wU2FwT2JqZWN0QXR0cmlidXRlQmVhbiA9IG5ld09iamVjdEJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihjb21wU2FwT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4pOyAvLyBUaGlzIGlzIHRoZSBuYW1lIG9iamVjdCBhdHRyaWJ1dGUgZm9yIHRoZSBuZXcgb2JqZWN0XG4gICAgICAgIGRlZiBjb21wU2FwT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuID0gY29tcFNhcE9iamVjdEF0dHJpYnV0ZUJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7IC8vIFRoaXMgaXMgdGhlIGFjdHVhbCB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlXG4gICAgICAgIGNvbXBTYXBPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4uc2V0Qm9vbGVhblZhbHVlKHNhcCk7IC8vIFNldCB0aGUgbmFtZVxuXG4gICAgICAgIHZhbHVlcyA9IGNvbXBTYXBPYmplY3RBdHRyaWJ1dGVCZWFuLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTsgXG4gICAgICAgIHZhbHVlcy5hZGQoY29tcFNhcE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbik7IC8vIEFkZCB0aGUgdmFsdWUgdG8gdGhlIG9iamVjdCBhdHRyaWJ1dGVcbiAgICAgICAgbG9nLmRlYnVnIHZhbHVlc1xuICAgICAgICBjb21wU2FwT2JqZWN0QXR0cmlidXRlQmVhbi5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKHZhbHVlcyk7IFxuICAgICAgICBvYmplY3RBdHRyaWJ1dGVCZWFucy5hZGQoY29tcFNhcE9iamVjdEF0dHJpYnV0ZUJlYW4pO1xuXG4gICAgICAgIC8qIFNldCB0aGUgREVMRVRFRCBmbGFnIG9mIHRoZSBIYXJkd2FyZSAqL1xuICAgICAgICBkZWYgZGVsZXRlZCBcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5kZWxldGVkJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmRlbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIGRlbGV0ZWQgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgICAgIGRlbGV0ZWQ9ZGVsZXRlZFswXS5nZXRWYWx1ZSgpXG4gICAgICAgIH1cbiAgICAgICAgaWYoZGVsZXRlZCE9bnVsbCl7XG4gICAgICAgICAgICBkZWYgZGVsZXRlZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oQ09NUE9ORU5UX0RFTEVURUQpOyAvLyBUaGUgSUQgb2YgdGhlIG9iamVjdCB0eXBlIGF0dHJpYnV0ZSBcIkRJU0FCTEVEXCJcbiAgICAgICAgICAgIGRlZiBkZWxldGVkT2JqZWN0QXR0cmlidXRlQmVhbiA9IG5ld09iamVjdEJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihkZWxldGVkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4pOyAvLyBUaGlzIGlzIHRoZSBuYW1lIG9iamVjdCBhdHRyaWJ1dGUgZm9yIHRoZSBuZXcgb2JqZWN0XG4gICAgICAgICAgICBkZWYgZGVsZXRlZE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbiA9IGRlbGV0ZWRPYmplY3RBdHRyaWJ1dGVCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpOyAvLyBUaGlzIGlzIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZVxuICAgICAgICAgICAgZGVsZXRlZE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbi5zZXRCb29sZWFuVmFsdWUoZGVsZXRlZCk7IC8vIFNldCB0aGUgbmFtZVxuXG4gICAgICAgICAgICB2YWx1ZXMgPSBkZWxldGVkT2JqZWN0QXR0cmlidXRlQmVhbi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7IFxuICAgICAgICAgICAgdmFsdWVzLmFkZChkZWxldGVkT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKTsgLy8gQWRkIHRoZSB2YWx1ZSB0byB0aGUgb2JqZWN0IGF0dHJpYnV0ZVxuICAgICAgICAgICAgbG9nLmRlYnVnIHZhbHVlc1xuICAgICAgICAgICAgZGVsZXRlZE9iamVjdEF0dHJpYnV0ZUJlYW4uc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyh2YWx1ZXMpOyBcbiAgICAgICAgICAgIG9iamVjdEF0dHJpYnV0ZUJlYW5zLmFkZChkZWxldGVkT2JqZWN0QXR0cmlidXRlQmVhbik7XG4gICAgICAgIH1cblxuICAgICAgICAvKk5vbWUgQ09NUE9ORU5UX1FVQU5USVRZKi9cbiAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnF1YW50aXR5J10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgIGRlZiBxdGEgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgcXRhPXF0YVswXS5nZXRWYWx1ZSgpXG4gICAgICAgIGRlZiBxdGFPYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKENPTVBPTkVOVF9RVUFOVElUWSk7IC8vIFRoZSBJRCBvZiB0aGUgb2JqZWN0IHR5cGUgYXR0cmlidXRlIFwiRElTQUJMRURcIlxuICAgICAgICBkZWYgcXRhT2JqZWN0QXR0cmlidXRlQmVhbiA9IG5ld09iamVjdEJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihxdGFPYmplY3RUeXBlQXR0cmlidXRlQmVhbik7IC8vIFRoaXMgaXMgdGhlIG5hbWUgb2JqZWN0IGF0dHJpYnV0ZSBmb3IgdGhlIG5ldyBvYmplY3RcbiAgICAgICAgZGVmIHF0YU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbiA9IHF0YU9iamVjdEF0dHJpYnV0ZUJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7IC8vIFRoaXMgaXMgdGhlIGFjdHVhbCB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlXG4gICAgICAgIHF0YU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbi5zZXREb3VibGVWYWx1ZShxdGEpOyAvLyBTZXQgdGhlIG5hbWVcblxuICAgICAgICB2YWx1ZXMgPSBxdGFPYmplY3RBdHRyaWJ1dGVCZWFuLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTsgXG4gICAgICAgIHZhbHVlcy5hZGQocXRhT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKTsgLy8gQWRkIHRoZSB2YWx1ZSB0byB0aGUgb2JqZWN0IGF0dHJpYnV0ZVxuICAgICAgICBsb2cuZGVidWcgdmFsdWVzXG4gICAgICAgIHF0YU9iamVjdEF0dHJpYnV0ZUJlYW4uc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyh2YWx1ZXMpOyBcbiAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKHF0YU9iamVjdEF0dHJpYnV0ZUJlYW4pO1xuXG4gICAgICAgIC8qTm9tZSBDT01QT05FTlRfUVVPVEVfUkVRVUlSRUQqL1xuICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQucXVvdGVSZXF1aXJlZCddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICBkZWYgcXVvdGVSZXEgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgcXVvdGVSZXE9cXVvdGVSZXFbMF0uZ2V0VmFsdWUoKVxuICAgICAgICBkZWYgcXVvdGVSZXFPYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKENPTVBPTkVOVF9RVU9URV9SRVFVSVJFRCk7IC8vIFRoZSBJRCBvZiB0aGUgb2JqZWN0IHR5cGUgYXR0cmlidXRlIFwiRElTQUJMRURcIlxuICAgICAgICBkZWYgcXVvdGVSZXFPYmplY3RBdHRyaWJ1dGVCZWFuID0gbmV3T2JqZWN0QmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKHF1b3RlUmVxT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4pOyAvLyBUaGlzIGlzIHRoZSBuYW1lIG9iamVjdCBhdHRyaWJ1dGUgZm9yIHRoZSBuZXcgb2JqZWN0XG4gICAgICAgIGRlZiBxdW90ZVJlcU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbiA9IHF1b3RlUmVxT2JqZWN0QXR0cmlidXRlQmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTsgLy8gVGhpcyBpcyB0aGUgYWN0dWFsIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGVcbiAgICAgICAgcXVvdGVSZXFPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4uc2V0Qm9vbGVhblZhbHVlKHF1b3RlUmVxKTsgLy8gU2V0IHRoZSBuYW1lXG5cbiAgICAgICAgdmFsdWVzID0gcXVvdGVSZXFPYmplY3RBdHRyaWJ1dGVCZWFuLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTsgXG4gICAgICAgIHZhbHVlcy5hZGQocXVvdGVSZXFPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4pOyAvLyBBZGQgdGhlIHZhbHVlIHRvIHRoZSBvYmplY3QgYXR0cmlidXRlXG4gICAgICAgIGxvZy5kZWJ1ZyB2YWx1ZXNcbiAgICAgICAgcXVvdGVSZXFPYmplY3RBdHRyaWJ1dGVCZWFuLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWVzKTsgXG4gICAgICAgIG9iamVjdEF0dHJpYnV0ZUJlYW5zLmFkZChxdW90ZVJlcU9iamVjdEF0dHJpYnV0ZUJlYW4pO1xuXG4gICAgICAgIC8qTm9tZSBDT01QT05FTlRfU1VQUExJRVJfUVVPVEVfVE9fRkFBQyovXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuc3VwcFF1b3RlJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnN1cHBRdW90ZSddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgZGVmIHN1cHBRdW90ZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuICAgICAgICAgICAgc3VwcFF1b3RlPXN1cHBRdW90ZVswXS5nZXRWYWx1ZSgpXG4gICAgICAgICAgICBkZWYgc3VwcFF1b3RlT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihDT01QT05FTlRfU1VQUExJRVJfUVVPVEVfVE9fRkFBQyk7IC8vIFRoZSBJRCBvZiB0aGUgb2JqZWN0IHR5cGUgYXR0cmlidXRlIFwiRElTQUJMRURcIlxuICAgICAgICAgICAgZGVmIHN1cHBRdW90ZU9iamVjdEF0dHJpYnV0ZUJlYW4gPSBuZXdPYmplY3RCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW4oc3VwcFF1b3RlT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4pOyAvLyBUaGlzIGlzIHRoZSBuYW1lIG9iamVjdCBhdHRyaWJ1dGUgZm9yIHRoZSBuZXcgb2JqZWN0XG4gICAgICAgICAgICBkZWYgc3VwcFF1b3RlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuID0gc3VwcFF1b3RlT2JqZWN0QXR0cmlidXRlQmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTsgLy8gVGhpcyBpcyB0aGUgYWN0dWFsIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGVcbiAgICAgICAgICAgIHN1cHBRdW90ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbi5zZXREb3VibGVWYWx1ZShzdXBwUXVvdGUpOyAvLyBTZXQgdGhlIG5hbWVcblxuICAgICAgICAgICAgdmFsdWVzID0gc3VwcFF1b3RlT2JqZWN0QXR0cmlidXRlQmVhbi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7IFxuICAgICAgICAgICAgdmFsdWVzLmFkZChzdXBwUXVvdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4pOyAvLyBBZGQgdGhlIHZhbHVlIHRvIHRoZSBvYmplY3QgYXR0cmlidXRlXG4gICAgICAgICAgICBsb2cuZGVidWcgdmFsdWVzXG4gICAgICAgICAgICBzdXBwUXVvdGVPYmplY3RBdHRyaWJ1dGVCZWFuLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWVzKTsgXG4gICAgICAgICAgICBvYmplY3RBdHRyaWJ1dGVCZWFucy5hZGQoc3VwcFF1b3RlT2JqZWN0QXR0cmlidXRlQmVhbik7XG4gICAgICAgIH1cbiAgICAgICBcbiAgICAgICAgLypOb21lIENPTVBPTkVOVF9GQUFDX1FVT1RFX1RPX0NVU1RPTUVSKi9cbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5jdXN0UXVvdGUnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuY3VzdFF1b3RlJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBkZWYgY3VzdFF1b3RlID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICBjdXN0UXVvdGU9Y3VzdFF1b3RlWzBdLmdldFZhbHVlKClcbiAgICAgICAgICAgIGRlZiBjdXN0UXVvdGVPYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKENPTVBPTkVOVF9GQUFDX1FVT1RFX1RPX0NVU1RPTUVSKTsgLy8gVGhlIElEIG9mIHRoZSBvYmplY3QgdHlwZSBhdHRyaWJ1dGUgXCJESVNBQkxFRFwiXG4gICAgICAgICAgICBkZWYgY3VzdFF1b3RlT2JqZWN0QXR0cmlidXRlQmVhbiA9IG5ld09iamVjdEJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihjdXN0UXVvdGVPYmplY3RUeXBlQXR0cmlidXRlQmVhbik7IC8vIFRoaXMgaXMgdGhlIG5hbWUgb2JqZWN0IGF0dHJpYnV0ZSBmb3IgdGhlIG5ldyBvYmplY3RcbiAgICAgICAgICAgIGRlZiBjdXN0UXVvdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4gPSBjdXN0UXVvdGVPYmplY3RBdHRyaWJ1dGVCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpOyAvLyBUaGlzIGlzIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZVxuICAgICAgICAgICAgY3VzdFF1b3RlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuLnNldERvdWJsZVZhbHVlKGN1c3RRdW90ZSk7IC8vIFNldCB0aGUgbmFtZVxuXG4gICAgICAgICAgICB2YWx1ZXMgPSBjdXN0UXVvdGVPYmplY3RBdHRyaWJ1dGVCZWFuLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTsgXG4gICAgICAgICAgICB2YWx1ZXMuYWRkKGN1c3RRdW90ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbik7IC8vIEFkZCB0aGUgdmFsdWUgdG8gdGhlIG9iamVjdCBhdHRyaWJ1dGVcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyB2YWx1ZXNcbiAgICAgICAgICAgIGN1c3RRdW90ZU9iamVjdEF0dHJpYnV0ZUJlYW4uc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyh2YWx1ZXMpOyBcbiAgICAgICAgICAgIG9iamVjdEF0dHJpYnV0ZUJlYW5zLmFkZChjdXN0UXVvdGVPYmplY3RBdHRyaWJ1dGVCZWFuKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLypOb21lIENPTVBPTkVOVF9BUFBMSUVEX1RPKi9cbiAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICBkZWYgYXBwbGllZFRvID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgIGFwcGxpZWRUbz1hcHBsaWVkVG9bMF0uZ2V0VmFsdWUoKVxuICAgICAgICBkZWYgYXBwbGllZFRvT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihDT01QT05FTlRfQVBQTElFRF9UTyk7IC8vIFRoZSBJRCBvZiB0aGUgb2JqZWN0IHR5cGUgYXR0cmlidXRlIFwiRElTQUJMRURcIlxuICAgICAgICBkZWYgYXBwbGllZFRvT2JqZWN0QXR0cmlidXRlQmVhbiA9IG5ld09iamVjdEJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihhcHBsaWVkVG9PYmplY3RUeXBlQXR0cmlidXRlQmVhbik7IC8vIFRoaXMgaXMgdGhlIG5hbWUgb2JqZWN0IGF0dHJpYnV0ZSBmb3IgdGhlIG5ldyBvYmplY3RcbiAgICAgICAgZGVmIGFwcGxpZWRUb09iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbiA9IGFwcGxpZWRUb09iamVjdEF0dHJpYnV0ZUJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7IC8vIFRoaXMgaXMgdGhlIGFjdHVhbCB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlXG4gICAgICAgIGFwcGxpZWRUb09iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbi5zZXRUZXh0VmFsdWUoYXBwbGllZFRvKTsgLy8gU2V0IHRoZSBuYW1lXG5cbiAgICAgICAgdmFsdWVzID0gYXBwbGllZFRvT2JqZWN0QXR0cmlidXRlQmVhbi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7IFxuICAgICAgICB2YWx1ZXMuYWRkKGFwcGxpZWRUb09iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbik7IC8vIEFkZCB0aGUgdmFsdWUgdG8gdGhlIG9iamVjdCBhdHRyaWJ1dGVcbiAgICAgICAgbG9nLmRlYnVnIHZhbHVlc1xuICAgICAgICBhcHBsaWVkVG9PYmplY3RBdHRyaWJ1dGVCZWFuLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWVzKTsgXG4gICAgICAgIG9iamVjdEF0dHJpYnV0ZUJlYW5zLmFkZChhcHBsaWVkVG9PYmplY3RBdHRyaWJ1dGVCZWFuKTtcblxuXG4gICAgICAgIC8qTm9tZSBDT01QT05FTlRfVE9UQUxfQU1PVU5UX1NVUFBMSUVSKi9cbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RTdXBwJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdFN1cHAnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIGRlZiB0b3RTdXBwID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICB0b3RTdXBwPXRvdFN1cHBbMF0uZ2V0VmFsdWUoKVxuICAgICAgICAgICAgZGVmIHRvdFN1cHBPYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKENPTVBPTkVOVF9UT1RBTF9BTU9VTlRfU1VQUExJRVIpOyAvLyBUaGUgSUQgb2YgdGhlIG9iamVjdCB0eXBlIGF0dHJpYnV0ZSBcIkRJU0FCTEVEXCJcbiAgICAgICAgICAgIGRlZiB0b3RTdXBwT2JqZWN0QXR0cmlidXRlQmVhbiA9IG5ld09iamVjdEJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbih0b3RTdXBwT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4pOyAvLyBUaGlzIGlzIHRoZSBuYW1lIG9iamVjdCBhdHRyaWJ1dGUgZm9yIHRoZSBuZXcgb2JqZWN0XG4gICAgICAgICAgICBkZWYgdG90U3VwcE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbiA9IHRvdFN1cHBPYmplY3RBdHRyaWJ1dGVCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpOyAvLyBUaGlzIGlzIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZVxuICAgICAgICAgICAgdG90U3VwcE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbi5zZXREb3VibGVWYWx1ZSh0b3RTdXBwKTsgLy8gU2V0IHRoZSBuYW1lXG5cbiAgICAgICAgICAgIHZhbHVlcyA9IHRvdFN1cHBPYmplY3RBdHRyaWJ1dGVCZWFuLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTsgXG4gICAgICAgICAgICB2YWx1ZXMuYWRkKHRvdFN1cHBPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4pOyAvLyBBZGQgdGhlIHZhbHVlIHRvIHRoZSBvYmplY3QgYXR0cmlidXRlXG4gICAgICAgICAgICBsb2cuZGVidWcgdmFsdWVzXG4gICAgICAgICAgICB0b3RTdXBwT2JqZWN0QXR0cmlidXRlQmVhbi5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKHZhbHVlcyk7IFxuICAgICAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKHRvdFN1cHBPYmplY3RBdHRyaWJ1dGVCZWFuKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLypOb21lIENPTVBPTkVOVF9UT1RBTF9BTU9VTlRfQ1VTVE9NRVIqL1xuICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQudG90Q3VzdCddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICBkZWYgdG90Q3VzdCA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuICAgICAgICB0b3RDdXN0PXRvdEN1c3RbMF0uZ2V0VmFsdWUoKVxuICAgICAgICBkZWYgdG90Q3VzdE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oQ09NUE9ORU5UX1RPVEFMX0FNT1VOVF9DVVNUT01FUik7IC8vIFRoZSBJRCBvZiB0aGUgb2JqZWN0IHR5cGUgYXR0cmlidXRlIFwiRElTQUJMRURcIlxuICAgICAgICBkZWYgdG90Q3VzdE9iamVjdEF0dHJpYnV0ZUJlYW4gPSBuZXdPYmplY3RCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW4odG90Q3VzdE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKTsgLy8gVGhpcyBpcyB0aGUgbmFtZSBvYmplY3QgYXR0cmlidXRlIGZvciB0aGUgbmV3IG9iamVjdFxuICAgICAgICBkZWYgdG90Q3VzdE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbiA9IHRvdEN1c3RPYmplY3RBdHRyaWJ1dGVCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpOyAvLyBUaGlzIGlzIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZVxuICAgICAgICB0b3RDdXN0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuLnNldERvdWJsZVZhbHVlKHRvdEN1c3QpOyAvLyBTZXQgdGhlIG5hbWVcblxuICAgICAgICB2YWx1ZXMgPSB0b3RDdXN0T2JqZWN0QXR0cmlidXRlQmVhbi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7IFxuICAgICAgICB2YWx1ZXMuYWRkKHRvdEN1c3RPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4pOyAvLyBBZGQgdGhlIHZhbHVlIHRvIHRoZSBvYmplY3QgYXR0cmlidXRlXG4gICAgICAgIGxvZy5kZWJ1ZyB2YWx1ZXNcbiAgICAgICAgdG90Q3VzdE9iamVjdEF0dHJpYnV0ZUJlYW4uc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyh2YWx1ZXMpOyBcbiAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKHRvdEN1c3RPYmplY3RBdHRyaWJ1dGVCZWFuKTtcblxuICAgICAgICAvKk5vbWUgQ09NUE9ORU5UX01BVEVSSUFMX1JFRiovXG4gICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5tYXRlcmlhbFJlZiddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICBkZWYgbWF0ZXJpYWwgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgbWF0ZXJpYWw9bWF0ZXJpYWxbMF0uZ2V0VmFsdWUoKVxuICAgICAgICBkZWYgbWF0UmVmT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihDT01QT05FTlRfTUFURVJJQUxfUkVGKTsgLy8gVGhlIElEIGZvciB0aGUgcmVmZXJlbmNlZCBvYmplY3QgdHlwZVxuICAgICAgICBtYXRSZWZPYmplY3RBdHRyaWJ1dGVCZWFuID0gbmV3T2JqZWN0QmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKG1hdFJlZk9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKTsgXG4gICAgICAgIG1hdFJlZk9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbiA9IG1hdFJlZk9iamVjdEF0dHJpYnV0ZUJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7IC8vIFRoaXMgaXMgdGhlIGFjdHVhbCB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlXG4gICAgICAgIG1hdFJlZk9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbi5zZXRSZWZlcmVuY2VkT2JqZWN0QmVhbklkKG1hdGVyaWFsKTsgLy8gU2V0IHRoZSBJRFxuXG4gICAgICAgIHZhbHVlcyA9IG1hdFJlZk9iamVjdEF0dHJpYnV0ZUJlYW4uZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpOyBcbiAgICAgICAgdmFsdWVzLmFkZChtYXRSZWZPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4pOyAvLyBBZGQgdGhlIHZhbHVlIHRvIHRoZSBvYmplY3QgYXR0cmlidXRlXG4gICAgICAgIGxvZy5kZWJ1ZyB2YWx1ZXNcbiAgICAgICAgbWF0UmVmT2JqZWN0QXR0cmlidXRlQmVhbi5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKHZhbHVlcyk7IFxuXG4gICAgICAgIG9iamVjdEF0dHJpYnV0ZUJlYW5zLmFkZChtYXRSZWZPYmplY3RBdHRyaWJ1dGVCZWFuKTsgLy8gQWRkIHRvIHRoZSBsaXN0IG9mIG9iamVjdCBhdHRyaWJ1dGVzXG5cblxuICAgICAgICBkZWYgbWF0ZXJpYWxTQVAgICAgICAgXG4gICAgICAgIGlmIChtYXRlcmlhbCE9bnVsbCl7XG4gICAgICAgICAgICAvKk1BVEVSSUFMIC0gU0FQKi9cbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG1hdGVyaWFsLnRvSW50ZWdlcigpLCBwcm9wZXJ0aWVzWydpb2JqLm1hdGVyaWFsLnNhcCddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgbWF0ZXJpYWxTQVAgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgICAgIG1hdGVyaWFsU0FQID0gbWF0ZXJpYWxTQVBbMF0uZ2V0VmFsdWUoKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwibWF0ZXJpYWxTQVA6IFwiICsgbWF0ZXJpYWxTQVBcbiAgICAgICAgfVxuXG4gICAgICAgIC8qTm9tZSBDT01QT05FTlRfU1VQUExJRURfQllfRkFBQyovXG4gICAgICAgIGRlZiBzdXBwbGllZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oQ09NUE9ORU5UX1NVUFBMSUVEX0JZX0ZBQUMpOyAvLyBUaGUgSUQgb2YgdGhlIG9iamVjdCB0eXBlIGF0dHJpYnV0ZSBcIkRJU0FCTEVEXCJcbiAgICAgICAgZGVmIHN1cHBsaWVkT2JqZWN0QXR0cmlidXRlQmVhbiA9IG5ld09iamVjdEJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihzdXBwbGllZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKTsgLy8gVGhpcyBpcyB0aGUgbmFtZSBvYmplY3QgYXR0cmlidXRlIGZvciB0aGUgbmV3IG9iamVjdFxuICAgICAgICBkZWYgc3VwcGxpZWRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4gPSBzdXBwbGllZE9iamVjdEF0dHJpYnV0ZUJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7IC8vIFRoaXMgaXMgdGhlIGFjdHVhbCB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlXG4gICAgICAgIGlmKG1hdGVyaWFsU0FQPT10cnVlKXtcbiAgICAgICAgICAgIHN1cHBsaWVkT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuLnNldFRleHRWYWx1ZShcIlllc1wiKTsgLy8gU2V0IHRoZSBuYW1lXG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgc3VwcGxpZWRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4uc2V0VGV4dFZhbHVlKFwiTm9cIik7IC8vIFNldCB0aGUgbmFtZVxuICAgICAgICB9XG5cbiAgICAgICAgdmFsdWVzID0gc3VwcGxpZWRPYmplY3RBdHRyaWJ1dGVCZWFuLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTsgXG4gICAgICAgIHZhbHVlcy5hZGQoc3VwcGxpZWRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4pOyAvLyBBZGQgdGhlIHZhbHVlIHRvIHRoZSBvYmplY3QgYXR0cmlidXRlXG4gICAgICAgIGxvZy5kZWJ1ZyB2YWx1ZXNcbiAgICAgICAgc3VwcGxpZWRPYmplY3RBdHRyaWJ1dGVCZWFuLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWVzKTsgXG4gICAgICAgIG9iamVjdEF0dHJpYnV0ZUJlYW5zLmFkZChzdXBwbGllZE9iamVjdEF0dHJpYnV0ZUJlYW4pO1xuXG4gICAgICAgIC8qTm9tZSBBQ0NPVU5USU5HX1NVUFBMSUVSX01BVEVSSUFMX1JFRiovXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuYWNjb3VudGluZ1N1cHBNYXRlcmlhbCddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hY2NvdW50aW5nU3VwcE1hdGVyaWFsJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBkZWYgYWNjTWF0U3VwcCA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuICAgICAgICAgICAgYWNjTWF0U3VwcD1hY2NNYXRTdXBwWzBdLmdldFZhbHVlKClcbiAgICAgICAgICAgIGRlZiBhY2NvdW50aW5nQ3VzdFJlZk9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oQ09NUE9ORU5UX0FDQ09VTlRJTkdfU1VQUExJRVJfTUFURVJJQUxfUkVGKTsgLy8gVGhlIElEIGZvciB0aGUgcmVmZXJlbmNlZCBvYmplY3QgdHlwZVxuICAgICAgICAgICAgYWNjb3VudGluZ0N1c3RSZWZPYmplY3RBdHRyaWJ1dGVCZWFuID0gbmV3T2JqZWN0QmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKGFjY291bnRpbmdDdXN0UmVmT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4pOyBcbiAgICAgICAgICAgIGFjY291bnRpbmdDdXN0UmVmT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuID0gYWNjb3VudGluZ0N1c3RSZWZPYmplY3RBdHRyaWJ1dGVCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpOyAvLyBUaGlzIGlzIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZVxuICAgICAgICAgICAgYWNjb3VudGluZ0N1c3RSZWZPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4uc2V0UmVmZXJlbmNlZE9iamVjdEJlYW5JZChhY2NNYXRTdXBwKTsgLy8gU2V0IHRoZSBJRFxuXG4gICAgICAgICAgICB2YWx1ZXMgPSBhY2NvdW50aW5nQ3VzdFJlZk9iamVjdEF0dHJpYnV0ZUJlYW4uZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpOyBcbiAgICAgICAgICAgIHZhbHVlcy5hZGQoYWNjb3VudGluZ0N1c3RSZWZPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4pOyAvLyBBZGQgdGhlIHZhbHVlIHRvIHRoZSBvYmplY3QgYXR0cmlidXRlXG4gICAgICAgICAgICBsb2cuZGVidWcgdmFsdWVzXG4gICAgICAgICAgICBhY2NvdW50aW5nQ3VzdFJlZk9iamVjdEF0dHJpYnV0ZUJlYW4uc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyh2YWx1ZXMpOyBcblxuICAgICAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKGFjY291bnRpbmdDdXN0UmVmT2JqZWN0QXR0cmlidXRlQmVhbik7IC8vIEFkZCB0byB0aGUgbGlzdCBvZiBvYmplY3QgYXR0cmlidXRlc1xuXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8qTm9tZSBDT01QT05FTlRfQUNDT1VOVElOR19DVVNUT01FUl9NQVRFUklBTF9SRUYqL1xuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmFjY291bnRpbmdDdXN0TWF0ZXJpYWwnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuYWNjb3VudGluZ0N1c3RNYXRlcmlhbCddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgZGVmIGFjY01hdEN1c3QgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgICAgIGFjY01hdEN1c3Q9YWNjTWF0Q3VzdFswXS5nZXRWYWx1ZSgpXG4gICAgICAgICAgICBkZWYgYWNjTWF0Q3VzdE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oQ09NUE9ORU5UX0FDQ09VTlRJTkdfQ1VTVE9NRVJfTUFURVJJQUxfUkVGKTsgLy8gVGhlIElEIGZvciB0aGUgcmVmZXJlbmNlZCBvYmplY3QgdHlwZVxuICAgICAgICAgICAgYWNjTWF0Q3VzdE9iamVjdEF0dHJpYnV0ZUJlYW4gPSBuZXdPYmplY3RCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW4oYWNjTWF0Q3VzdE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKTsgXG4gICAgICAgICAgICBhY2NNYXRDdXN0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuID0gYWNjTWF0Q3VzdE9iamVjdEF0dHJpYnV0ZUJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7IC8vIFRoaXMgaXMgdGhlIGFjdHVhbCB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlXG4gICAgICAgICAgICBhY2NNYXRDdXN0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuLnNldFJlZmVyZW5jZWRPYmplY3RCZWFuSWQoYWNjTWF0Q3VzdCk7IC8vIFNldCB0aGUgSURcblxuICAgICAgICAgICAgdmFsdWVzID0gYWNjTWF0Q3VzdE9iamVjdEF0dHJpYnV0ZUJlYW4uZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpOyBcbiAgICAgICAgICAgIHZhbHVlcy5hZGQoYWNjTWF0Q3VzdE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbik7IC8vIEFkZCB0aGUgdmFsdWUgdG8gdGhlIG9iamVjdCBhdHRyaWJ1dGVcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyB2YWx1ZXNcbiAgICAgICAgICAgIGFjY01hdEN1c3RPYmplY3RBdHRyaWJ1dGVCZWFuLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWVzKTsgXG5cbiAgICAgICAgICAgIG9iamVjdEF0dHJpYnV0ZUJlYW5zLmFkZChhY2NNYXRDdXN0T2JqZWN0QXR0cmlidXRlQmVhbik7IC8vIEFkZCB0byB0aGUgbGlzdCBvZiBvYmplY3QgYXR0cmlidXRlc1xuXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8qTm9tZSBDT01QT05FTlRfRlJPTV9RVU9URV9US1QqL1xuICAgICAgICBkZWYgZnJvbVF1b3RlT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihDT01QT05FTlRfRlJPTV9RVU9URV9US1QpOyAvLyBUaGUgSUQgb2YgdGhlIG9iamVjdCB0eXBlIGF0dHJpYnV0ZSBcIkRJU0FCTEVEXCJcbiAgICAgICAgZGVmIGZyb21RdW90ZU9iamVjdEF0dHJpYnV0ZUJlYW4gPSBuZXdPYmplY3RCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW4oZnJvbVF1b3RlT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4pOyAvLyBUaGlzIGlzIHRoZSBuYW1lIG9iamVjdCBhdHRyaWJ1dGUgZm9yIHRoZSBuZXcgb2JqZWN0XG4gICAgICAgIGRlZiBmcm9tUXVvdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4gPSBmcm9tUXVvdGVPYmplY3RBdHRyaWJ1dGVCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpOyAvLyBUaGlzIGlzIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZVxuICAgICAgICBpZihtYXRlcmlhbFNBUD09dHJ1ZSl7XG4gICAgICAgICAgICBmcm9tUXVvdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4uc2V0Qm9vbGVhblZhbHVlKHRydWUpOyAvLyBTZXQgdGhlIG5hbWVcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBmcm9tUXVvdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4uc2V0Qm9vbGVhblZhbHVlKGZhbHNlKTsgLy8gU2V0IHRoZSBuYW1lXG4gICAgICAgIH1cblxuICAgICAgICB2YWx1ZXMgPSBmcm9tUXVvdGVPYmplY3RBdHRyaWJ1dGVCZWFuLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTsgXG4gICAgICAgIHZhbHVlcy5hZGQoZnJvbVF1b3RlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKTsgLy8gQWRkIHRoZSB2YWx1ZSB0byB0aGUgb2JqZWN0IGF0dHJpYnV0ZVxuICAgICAgICBsb2cuZGVidWcgdmFsdWVzXG4gICAgICAgIGZyb21RdW90ZU9iamVjdEF0dHJpYnV0ZUJlYW4uc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyh2YWx1ZXMpOyBcbiAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKGZyb21RdW90ZU9iamVjdEF0dHJpYnV0ZUJlYW4pO1xuXG4gICAgICAgIGxvZy5kZWJ1ZyBcIm9iamVjdEF0dHJpYnV0ZUJlYW5zOiBcIiArIG9iamVjdEF0dHJpYnV0ZUJlYW5zXG4gICAgICAgIC8qIFNldCBhbGwgb2JqZWN0IGF0dHJpYnV0ZXMgdG8gdGhlIG9iamVjdCAqL1xuICAgICAgICBuZXdPYmplY3RCZWFuLnNldE9iamVjdEF0dHJpYnV0ZUJlYW5zKG9iamVjdEF0dHJpYnV0ZUJlYW5zKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbmV3T2JqZWN0QmVhbiA9IG9iamVjdEZhY2FkZS5zdG9yZU9iamVjdEJlYW4obmV3T2JqZWN0QmVhbik7XG4gICAgICAgICAgICBvYmpMaXN0LmFkZChuZXdPYmplY3RCZWFuKVxuICAgICAgICAgICAgbG9nLmRlYnVnKFwibmV3T2JqZWN0QmVhbjogXCIgKyBuZXdPYmplY3RCZWFuKTtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSkge1xuICAgICAgICAgICAgbG9nLndhcm4oXCJDb3VsZCBub3QgY3JlYXRlIGlzc3VlIGR1ZSB0byB2YWxpZGF0aW9uIGV4Y2VwdGlvbjpcIiArIHZpZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxufVxuXG5taS5zZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscywgb2JqTGlzdCk7XG5Db21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7XG4iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZQppbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb24KaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3IKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXIKaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyCmltcG9ydCBncm9vdnkuanNvbi5Kc29uU2x1cnBlcgppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb25maWcudXRpbC5KaXJhSG9tZQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvbgppbXBvcnQgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQKaW1wb3J0IGphdmEudGV4dC5QYXJzZUV4Y2VwdGlvbgppbXBvcnQgamF2YS50ZXh0LkRlY2ltYWxGb3JtYXQKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5Jc3N1ZUNoYW5nZUhvbGRlcgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyCgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQpkZWYgQ2F0ZWdvcnkgbG9nID0gQ2F0ZWdvcnkuZ2V0SW5zdGFuY2UoImNvbS5vbnJlc29sdmUuamlyYS5ncm9vdnkuUG9zdEZ1bmN0aW9uIikKbG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpCgovKlNjcmlwdCBWYXJpYWJsZXMqLwovL1BlciBQb3N0IEZ1bmN0aW9uCmlzc3VlID0gaXNzdWUKLy9QZXIgdGVzdCBkYSBjb25zb2xlCi8vSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpCi8vaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoIk9QVVQtMzM4MiIpCgovKkluc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHMqLwpDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZSIpOyAgCkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUiKTsKb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpOwpvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpOwovKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovCkNsYXNzIGlxbEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuSVFMRmFjYWRlIik7IAppcWxGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUoaXFsRmFjYWRlQ2xhc3MpOwpDbGFzcyBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5zZXJ2aWNlcy5tb2RlbC5mYWN0b3J5Lk9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Iik7Cm9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MpOwovKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi8KQ2xhc3Mgb2JqZWN0VHlwZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUZhY2FkZSIpOyAKb2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpOwoKZGVmIERCTz1wcm9wZXJ0aWVzWydpc2NoZW1hLmRiby5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKCkKZGVmIE9QQUE9cHJvcGVydGllc1snaXNjaGVtYS5hYS5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKCkKLy9BdHRyaWJ1dGUgSURzCmRlZiBSQVRFX1RPVEFMX0FNT1VOVF9TVVBQTElFUj1wcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90U3VwcGxpZXIuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpCmRlZiBSQVRFX1RPVEFMX0FNT1VOVF9DVVNUT01FUj1wcm9wZXJ0aWVzWydpYm9qLm9uU2l0ZVJhdGVSZXBvcnQudG90Q3VzdG9tZXIuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpCmRlZiBDT01QT05FTlRfVE9UQUxfQU1PVU5UX1NVUFBMSUVSPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdFN1cHAuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpCmRlZiBDT01QT05FTlRfVE9UQUxfQU1PVU5UX0NVU1RPTUVSPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdEN1c3QuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpCgpkZWYgQ09NUE9ORU5UX05BTUU9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQubmFtZS5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKCkKZGVmIENPTVBPTkVOVF9IQVJEV0FSRV9SRUY9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQuaGFyZHdhcmVSZWYuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpCmRlZiBDT01QT05FTlRfU0FQPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnNhcC5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKCkKZGVmIENPTVBPTkVOVF9TVVBQTElFRF9CWV9GQUFDPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnN1cHBsaWVkQnlGYWFjLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKQpkZWYgQ09NUE9ORU5UX1FVQU5USVRZPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnF1YW50aXR5LmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKQpkZWYgQ09NUE9ORU5UX1FVT1RFX1JFUVVJUkVEPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnF1b3RlUmVxdWlyZWQuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpCmRlZiBDT01QT05FTlRfU1VQUExJRVJfUVVPVEVfVE9fRkFBQz1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5zdXBwbGllclF1b3RlLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKQpkZWYgQ09NUE9ORU5UX0ZBQUNfUVVPVEVfVE9fQ1VTVE9NRVI9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQuY3VzdG9tZXJRdW90ZSddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKCkKZGVmIENPTVBPTkVOVF9BUFBMSUVEX1RPPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKCkKZGVmIENPTVBPTkVOVF9NQVRFUklBTF9SRUY9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQubWF0ZXJpYWxSZWYuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpCmRlZiBDT01QT05FTlRfQUNDT1VOVElOR19TVVBQTElFUl9NQVRFUklBTF9SRUY9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQuYWNjb3VudGluZ1N1cHBNYXRSZWYuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpCmRlZiBDT01QT05FTlRfQUNDT1VOVElOR19DVVNUT01FUl9NQVRFUklBTF9SRUY9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQuYWNjb3VudGluZ0N1c3RNYXRSZWYuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpCmRlZiBDT01QT05FTlRfRlJPTV9RVU9URV9US1Q9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQuZnJvbVF1b3RlVGt0LmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKQpkZWYgQ09NUE9ORU5UX0RFTEVURUQ9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQuZGVsZXRlZC5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKCkKICAgIAovL09ialR5cGUgSURzCmRlZiBDT01QT05FTlQ9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpCgoKLypDdXN0b21maWVsZHMqLwpkZWYgcXVvdGVSZXBNYXRlcmlhbHMgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YucXVvdGVNYXRlcmlhbHMnXS50b1N0cmluZygpKVswXQpkZWYgcmVwTWF0ZXJpYWxzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJlcGxhY2VkTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF0KCmRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGlzc3VlCmRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKQoKLypWYXJpYWJsZXMqLwpkZWYgcmVwTWF0TGlzdCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocXVvdGVSZXBNYXRlcmlhbHMpCmRlZiBvYmpMaXN0ID0gbmV3IEFycmF5TGlzdCgpCgpmb3IobWF0IGluIHJlcE1hdExpc3QpewoJLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZCBnZXQgb2JqZWN0CiAgICBkZWYgY29tcG9uZW50PW1hdC50b1N0cmluZygpCiAgICBkZWYgY29tcG9uZW50S2V5ID0gY29tcG9uZW50LnN1YnN0cmluZyhjb21wb25lbnQuaW5kZXhPZignKCcpKzEsY29tcG9uZW50LmluZGV4T2YoJyknKSkKICAgIGRlZiBjb21wb25lbnRPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oY29tcG9uZW50S2V5KQogICAgCiAgICBkZWYgbmV3T2JqQXR0cmlidXRlc0xpc3QgPSBuZXcgQXJyYXlMaXN0KCkKICAgIGRlZiBpID0gMAogICAgCiAgICBkZWYgb2JqZWN0VHlwZUNvbXBvbmVudCA9IG9iamVjdFR5cGVGYWNhZGUubG9hZE9iamVjdFR5cGVCZWFuKENPTVBPTkVOVCk7CiAgICAvKiBDcmVhdGUgYSBuZXcgdW5zYXZlZCBvYmplY3QgYmVhbiAqLwogICAgZGVmIG5ld09iamVjdEJlYW4gPSBvYmplY3RUeXBlQ29tcG9uZW50LmNyZWF0ZU9iamVjdEJlYW4oKTsKCiAgICAvKiBTZXQgdXAgdGhlIGF0dHJpYnV0ZSBsaXN0ICovCiAgICBkZWYgb2JqZWN0QXR0cmlidXRlQmVhbnMgPSBuZXcgQXJyYXlMaXN0KCk7CgogICAgLyogU2V0IHRoZSBuYW1lIG9mIHRoZSBDb21wb25lbnQgKi8KICAgIC8qTm9tZSBDb21wb25lbnQqLwogICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50Lm5hbWUnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkKCWRlZiBjb21wTmFtZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQoJY29tcE5hbWU9Y29tcE5hbWVbMF0uZ2V0VmFsdWUoKQogICAgbG9nLmRlYnVnICJvYmplY3QgbmFtZTogIiArIGNvbXBOYW1lCiAgICBkZWYgbmFtZU9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oQ09NUE9ORU5UX05BTUUpOyAvLyBUaGUgSUQgb2YgdGhlIG9iamVjdCB0eXBlIGF0dHJpYnV0ZSAiTmFtZSIKICAgIGRlZiBuYW1lT2JqZWN0QXR0cmlidXRlQmVhbiA9IG5ld09iamVjdEJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihuYW1lT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4pOyAvLyBUaGlzIGlzIHRoZSBuYW1lIG9iamVjdCBhdHRyaWJ1dGUgZm9yIHRoZSBuZXcgb2JqZWN0CiAgICBkZWYgbmFtZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbiA9IG5hbWVPYmplY3RBdHRyaWJ1dGVCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpOyAvLyBUaGlzIGlzIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZQogICAgbmFtZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbi5zZXRUZXh0VmFsdWVTaG9ydChjb21wTmFtZSk7IC8vIFNldCB0aGUgbmFtZQoKICAgIGRlZiB2YWx1ZXMgPSBuYW1lT2JqZWN0QXR0cmlidXRlQmVhbi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7IAogICAgdmFsdWVzLmFkZChuYW1lT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKTsgLy8gQWRkIHRoZSB2YWx1ZSB0byB0aGUgb2JqZWN0IGF0dHJpYnV0ZQoJbG9nLmRlYnVnIHZhbHVlcwogICAgbmFtZU9iamVjdEF0dHJpYnV0ZUJlYW4uc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyh2YWx1ZXMpOyAKCW9iamVjdEF0dHJpYnV0ZUJlYW5zLmFkZChuYW1lT2JqZWN0QXR0cmlidXRlQmVhbik7CiAgICAKICAgIC8qIFNldCB0aGUgSEFSRFdBUkVfUkVGIG9mIHRoZSBuZXcgb2JqICovCiAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuaGFyZHdhcmVSZWYnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkKCWRlZiBodyA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQoJaHdLZXk9aHdbMF0uZ2V0VmFsdWUoKSAgICAKICAgIGRlZiBId1JlZk9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oQ09NUE9ORU5UX0hBUkRXQVJFX1JFRik7IC8vIFRoZSBJRCBmb3IgdGhlIHJlZmVyZW5jZWQgb2JqZWN0IHR5cGUKICAgIEh3UmVmT2JqZWN0QXR0cmlidXRlQmVhbiA9IG5ld09iamVjdEJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihId1JlZk9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKTsgCiAgICBId1JlZk9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbiA9IEh3UmVmT2JqZWN0QXR0cmlidXRlQmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTsgLy8gVGhpcyBpcyB0aGUgYWN0dWFsIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGUKICAgIEh3UmVmT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuLnNldFJlZmVyZW5jZWRPYmplY3RCZWFuSWQoaHdLZXkpOyAvLyBTZXQgdGhlIElECgogICAgdmFsdWVzID0gSHdSZWZPYmplY3RBdHRyaWJ1dGVCZWFuLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTsgCiAgICB2YWx1ZXMuYWRkKEh3UmVmT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKTsgLy8gQWRkIHRoZSB2YWx1ZSB0byB0aGUgb2JqZWN0IGF0dHJpYnV0ZQoJbG9nLmRlYnVnIHZhbHVlcwogICAgSHdSZWZPYmplY3RBdHRyaWJ1dGVCZWFuLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWVzKTsgCgogICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKEh3UmVmT2JqZWN0QXR0cmlidXRlQmVhbik7IC8vIEFkZCB0byB0aGUgbGlzdCBvZiBvYmplY3QgYXR0cmlidXRlcwoKICAgIC8qIFNldCB0aGUgQ09NUE9ORU5UX1NBUCBmbGFnIG9mIHRoZSBIYXJkd2FyZSAqLwogICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnNhcCddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKQoJZGVmIHNhcCA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQoJc2FwPXNhcFswXS5nZXRWYWx1ZSgpCiAgICBkZWYgY29tcFNhcE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oQ09NUE9ORU5UX1NBUCk7IC8vIFRoZSBJRCBvZiB0aGUgb2JqZWN0IHR5cGUgYXR0cmlidXRlICJESVNBQkxFRCIKICAgIGRlZiBjb21wU2FwT2JqZWN0QXR0cmlidXRlQmVhbiA9IG5ld09iamVjdEJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihjb21wU2FwT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4pOyAvLyBUaGlzIGlzIHRoZSBuYW1lIG9iamVjdCBhdHRyaWJ1dGUgZm9yIHRoZSBuZXcgb2JqZWN0CiAgICBkZWYgY29tcFNhcE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbiA9IGNvbXBTYXBPYmplY3RBdHRyaWJ1dGVCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpOyAvLyBUaGlzIGlzIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZQogICAgY29tcFNhcE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbi5zZXRCb29sZWFuVmFsdWUoc2FwKTsgLy8gU2V0IHRoZSBuYW1lCgogICAgdmFsdWVzID0gY29tcFNhcE9iamVjdEF0dHJpYnV0ZUJlYW4uZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpOyAKICAgIHZhbHVlcy5hZGQoY29tcFNhcE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbik7IC8vIEFkZCB0aGUgdmFsdWUgdG8gdGhlIG9iamVjdCBhdHRyaWJ1dGUKCWxvZy5kZWJ1ZyB2YWx1ZXMKICAgIGNvbXBTYXBPYmplY3RBdHRyaWJ1dGVCZWFuLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWVzKTsgCglvYmplY3RBdHRyaWJ1dGVCZWFucy5hZGQoY29tcFNhcE9iamVjdEF0dHJpYnV0ZUJlYW4pOwogICAgCiAgICAvKiBTZXQgdGhlIERFTEVURUQgZmxhZyBvZiB0aGUgSGFyZHdhcmUgKi8KICAgIGRlZiBkZWxldGVkIAogICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5kZWxldGVkJ10udG9TdHJpbmcoKSkpewogICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5kZWxldGVkJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpCgkJZGVsZXRlZCA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQogICAgICAgIGRlbGV0ZWQ9ZGVsZXRlZFswXS5nZXRWYWx1ZSgpCiAgICB9CiAgICBpZihkZWxldGVkIT1udWxsKXsKICAgICAgICBkZWYgZGVsZXRlZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oQ09NUE9ORU5UX0RFTEVURUQpOyAvLyBUaGUgSUQgb2YgdGhlIG9iamVjdCB0eXBlIGF0dHJpYnV0ZSAiRElTQUJMRUQiCiAgICAgICAgZGVmIGRlbGV0ZWRPYmplY3RBdHRyaWJ1dGVCZWFuID0gbmV3T2JqZWN0QmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKGRlbGV0ZWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbik7IC8vIFRoaXMgaXMgdGhlIG5hbWUgb2JqZWN0IGF0dHJpYnV0ZSBmb3IgdGhlIG5ldyBvYmplY3QKICAgICAgICBkZWYgZGVsZXRlZE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbiA9IGRlbGV0ZWRPYmplY3RBdHRyaWJ1dGVCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpOyAvLyBUaGlzIGlzIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZQogICAgICAgIGRlbGV0ZWRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4uc2V0Qm9vbGVhblZhbHVlKGRlbGV0ZWQpOyAvLyBTZXQgdGhlIG5hbWUKCiAgICAgICAgdmFsdWVzID0gZGVsZXRlZE9iamVjdEF0dHJpYnV0ZUJlYW4uZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpOyAKICAgICAgICB2YWx1ZXMuYWRkKGRlbGV0ZWRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4pOyAvLyBBZGQgdGhlIHZhbHVlIHRvIHRoZSBvYmplY3QgYXR0cmlidXRlCgkJbG9nLmRlYnVnIHZhbHVlcwogICAgICAgIGRlbGV0ZWRPYmplY3RBdHRyaWJ1dGVCZWFuLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWVzKTsgCiAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKGRlbGV0ZWRPYmplY3RBdHRyaWJ1dGVCZWFuKTsKICAgIH0KICAgICAgICAgCiAgICAvKk5vbWUgQ09NUE9ORU5UX1FVQU5USVRZKi8KICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5xdWFudGl0eSddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKQoJZGVmIHF0YSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQoJcXRhPXF0YVswXS5nZXRWYWx1ZSgpCiAgICBkZWYgcXRhT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihDT01QT05FTlRfUVVBTlRJVFkpOyAvLyBUaGUgSUQgb2YgdGhlIG9iamVjdCB0eXBlIGF0dHJpYnV0ZSAiRElTQUJMRUQiCiAgICBkZWYgcXRhT2JqZWN0QXR0cmlidXRlQmVhbiA9IG5ld09iamVjdEJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihxdGFPYmplY3RUeXBlQXR0cmlidXRlQmVhbik7IC8vIFRoaXMgaXMgdGhlIG5hbWUgb2JqZWN0IGF0dHJpYnV0ZSBmb3IgdGhlIG5ldyBvYmplY3QKICAgIGRlZiBxdGFPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4gPSBxdGFPYmplY3RBdHRyaWJ1dGVCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpOyAvLyBUaGlzIGlzIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZQogICAgcXRhT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuLnNldERvdWJsZVZhbHVlKHF0YSk7IC8vIFNldCB0aGUgbmFtZQoKICAgIHZhbHVlcyA9IHF0YU9iamVjdEF0dHJpYnV0ZUJlYW4uZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpOyAKICAgIHZhbHVlcy5hZGQocXRhT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKTsgLy8gQWRkIHRoZSB2YWx1ZSB0byB0aGUgb2JqZWN0IGF0dHJpYnV0ZQoJbG9nLmRlYnVnIHZhbHVlcwogICAgcXRhT2JqZWN0QXR0cmlidXRlQmVhbi5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKHZhbHVlcyk7IAogICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKHF0YU9iamVjdEF0dHJpYnV0ZUJlYW4pOwogICAgCgkvKk5vbWUgQ09NUE9ORU5UX1FVT1RFX1JFUVVJUkVEKi8KICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5xdW90ZVJlcXVpcmVkJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpCglkZWYgcXVvdGVSZXEgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkKCXF1b3RlUmVxPXF1b3RlUmVxWzBdLmdldFZhbHVlKCkKICAgIGRlZiBxdW90ZVJlcU9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oQ09NUE9ORU5UX1FVT1RFX1JFUVVJUkVEKTsgLy8gVGhlIElEIG9mIHRoZSBvYmplY3QgdHlwZSBhdHRyaWJ1dGUgIkRJU0FCTEVEIgogICAgZGVmIHF1b3RlUmVxT2JqZWN0QXR0cmlidXRlQmVhbiA9IG5ld09iamVjdEJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihxdW90ZVJlcU9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKTsgLy8gVGhpcyBpcyB0aGUgbmFtZSBvYmplY3QgYXR0cmlidXRlIGZvciB0aGUgbmV3IG9iamVjdAogICAgZGVmIHF1b3RlUmVxT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuID0gcXVvdGVSZXFPYmplY3RBdHRyaWJ1dGVCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpOyAvLyBUaGlzIGlzIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZQogICAgcXVvdGVSZXFPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4uc2V0Qm9vbGVhblZhbHVlKHF1b3RlUmVxKTsgLy8gU2V0IHRoZSBuYW1lCgogICAgdmFsdWVzID0gcXVvdGVSZXFPYmplY3RBdHRyaWJ1dGVCZWFuLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTsgCiAgICB2YWx1ZXMuYWRkKHF1b3RlUmVxT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKTsgLy8gQWRkIHRoZSB2YWx1ZSB0byB0aGUgb2JqZWN0IGF0dHJpYnV0ZQoJbG9nLmRlYnVnIHZhbHVlcwogICAgcXVvdGVSZXFPYmplY3RBdHRyaWJ1dGVCZWFuLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWVzKTsgCiAgICBvYmplY3RBdHRyaWJ1dGVCZWFucy5hZGQocXVvdGVSZXFPYmplY3RBdHRyaWJ1dGVCZWFuKTsKICAgIAogICAgLypOb21lIENPTVBPTkVOVF9TVVBQTElFUl9RVU9URV9UT19GQUFDKi8KICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5zdXBwUXVvdGUnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkKCWRlZiBzdXBwUXVvdGUgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkKCXN1cHBRdW90ZT1zdXBwUXVvdGVbMF0uZ2V0VmFsdWUoKQogICAgZGVmIHN1cHBRdW90ZU9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oQ09NUE9ORU5UX1NVUFBMSUVSX1FVT1RFX1RPX0ZBQUMpOyAvLyBUaGUgSUQgb2YgdGhlIG9iamVjdCB0eXBlIGF0dHJpYnV0ZSAiRElTQUJMRUQiCiAgICBkZWYgc3VwcFF1b3RlT2JqZWN0QXR0cmlidXRlQmVhbiA9IG5ld09iamVjdEJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihzdXBwUXVvdGVPYmplY3RUeXBlQXR0cmlidXRlQmVhbik7IC8vIFRoaXMgaXMgdGhlIG5hbWUgb2JqZWN0IGF0dHJpYnV0ZSBmb3IgdGhlIG5ldyBvYmplY3QKICAgIGRlZiBzdXBwUXVvdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4gPSBzdXBwUXVvdGVPYmplY3RBdHRyaWJ1dGVCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpOyAvLyBUaGlzIGlzIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZQogICAgc3VwcFF1b3RlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuLnNldERvdWJsZVZhbHVlKHN1cHBRdW90ZSk7IC8vIFNldCB0aGUgbmFtZQoKICAgIHZhbHVlcyA9IHN1cHBRdW90ZU9iamVjdEF0dHJpYnV0ZUJlYW4uZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpOyAKICAgIHZhbHVlcy5hZGQoc3VwcFF1b3RlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKTsgLy8gQWRkIHRoZSB2YWx1ZSB0byB0aGUgb2JqZWN0IGF0dHJpYnV0ZQoJbG9nLmRlYnVnIHZhbHVlcwogICAgc3VwcFF1b3RlT2JqZWN0QXR0cmlidXRlQmVhbi5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKHZhbHVlcyk7IAogICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKHN1cHBRdW90ZU9iamVjdEF0dHJpYnV0ZUJlYW4pOwogICAJCgkvKk5vbWUgQ09NUE9ORU5UX0ZBQUNfUVVPVEVfVE9fQ1VTVE9NRVIqLwogICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmN1c3RRdW90ZSddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKQoJZGVmIGN1c3RRdW90ZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQoJY3VzdFF1b3RlPWN1c3RRdW90ZVswXS5nZXRWYWx1ZSgpCiAgICBkZWYgY3VzdFF1b3RlT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihDT01QT05FTlRfRkFBQ19RVU9URV9UT19DVVNUT01FUik7IC8vIFRoZSBJRCBvZiB0aGUgb2JqZWN0IHR5cGUgYXR0cmlidXRlICJESVNBQkxFRCIKICAgIGRlZiBjdXN0UXVvdGVPYmplY3RBdHRyaWJ1dGVCZWFuID0gbmV3T2JqZWN0QmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKGN1c3RRdW90ZU9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKTsgLy8gVGhpcyBpcyB0aGUgbmFtZSBvYmplY3QgYXR0cmlidXRlIGZvciB0aGUgbmV3IG9iamVjdAogICAgZGVmIGN1c3RRdW90ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbiA9IGN1c3RRdW90ZU9iamVjdEF0dHJpYnV0ZUJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7IC8vIFRoaXMgaXMgdGhlIGFjdHVhbCB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlCiAgICBjdXN0UXVvdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4uc2V0RG91YmxlVmFsdWUoY3VzdFF1b3RlKTsgLy8gU2V0IHRoZSBuYW1lCgogICAgdmFsdWVzID0gY3VzdFF1b3RlT2JqZWN0QXR0cmlidXRlQmVhbi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7IAogICAgdmFsdWVzLmFkZChjdXN0UXVvdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4pOyAvLyBBZGQgdGhlIHZhbHVlIHRvIHRoZSBvYmplY3QgYXR0cmlidXRlCglsb2cuZGVidWcgdmFsdWVzCiAgICBjdXN0UXVvdGVPYmplY3RBdHRyaWJ1dGVCZWFuLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWVzKTsgCiAgIAlvYmplY3RBdHRyaWJ1dGVCZWFucy5hZGQoY3VzdFF1b3RlT2JqZWN0QXR0cmlidXRlQmVhbik7CgoJLypOb21lIENPTVBPTkVOVF9BUFBMSUVEX1RPKi8KICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkKCWRlZiBhcHBsaWVkVG8gPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkKCWFwcGxpZWRUbz1hcHBsaWVkVG9bMF0uZ2V0VmFsdWUoKQogICAgZGVmIGFwcGxpZWRUb09iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oQ09NUE9ORU5UX0FQUExJRURfVE8pOyAvLyBUaGUgSUQgb2YgdGhlIG9iamVjdCB0eXBlIGF0dHJpYnV0ZSAiRElTQUJMRUQiCiAgICBkZWYgYXBwbGllZFRvT2JqZWN0QXR0cmlidXRlQmVhbiA9IG5ld09iamVjdEJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihhcHBsaWVkVG9PYmplY3RUeXBlQXR0cmlidXRlQmVhbik7IC8vIFRoaXMgaXMgdGhlIG5hbWUgb2JqZWN0IGF0dHJpYnV0ZSBmb3IgdGhlIG5ldyBvYmplY3QKICAgIGRlZiBhcHBsaWVkVG9PYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4gPSBhcHBsaWVkVG9PYmplY3RBdHRyaWJ1dGVCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpOyAvLyBUaGlzIGlzIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZQogICAgYXBwbGllZFRvT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuLnNldFRleHRWYWx1ZShhcHBsaWVkVG8pOyAvLyBTZXQgdGhlIG5hbWUKCiAgICB2YWx1ZXMgPSBhcHBsaWVkVG9PYmplY3RBdHRyaWJ1dGVCZWFuLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTsgCiAgICB2YWx1ZXMuYWRkKGFwcGxpZWRUb09iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbik7IC8vIEFkZCB0aGUgdmFsdWUgdG8gdGhlIG9iamVjdCBhdHRyaWJ1dGUKCWxvZy5kZWJ1ZyB2YWx1ZXMKICAgIGFwcGxpZWRUb09iamVjdEF0dHJpYnV0ZUJlYW4uc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyh2YWx1ZXMpOyAKICAgIG9iamVjdEF0dHJpYnV0ZUJlYW5zLmFkZChhcHBsaWVkVG9PYmplY3RBdHRyaWJ1dGVCZWFuKTsKCQogICAgCgkvKk5vbWUgQ09NUE9ORU5UX1RPVEFMX0FNT1VOVF9TVVBQTElFUiovCiAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQudG90U3VwcCddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKQoJZGVmIHRvdFN1cHAgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkKCXRvdFN1cHA9dG90U3VwcFswXS5nZXRWYWx1ZSgpCiAgICBkZWYgdG90U3VwcE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oQ09NUE9ORU5UX1RPVEFMX0FNT1VOVF9TVVBQTElFUik7IC8vIFRoZSBJRCBvZiB0aGUgb2JqZWN0IHR5cGUgYXR0cmlidXRlICJESVNBQkxFRCIKICAgIGRlZiB0b3RTdXBwT2JqZWN0QXR0cmlidXRlQmVhbiA9IG5ld09iamVjdEJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbih0b3RTdXBwT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4pOyAvLyBUaGlzIGlzIHRoZSBuYW1lIG9iamVjdCBhdHRyaWJ1dGUgZm9yIHRoZSBuZXcgb2JqZWN0CiAgICBkZWYgdG90U3VwcE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbiA9IHRvdFN1cHBPYmplY3RBdHRyaWJ1dGVCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpOyAvLyBUaGlzIGlzIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZQogICAgdG90U3VwcE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbi5zZXREb3VibGVWYWx1ZSh0b3RTdXBwKTsgLy8gU2V0IHRoZSBuYW1lCgogICAgdmFsdWVzID0gdG90U3VwcE9iamVjdEF0dHJpYnV0ZUJlYW4uZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpOyAKICAgIHZhbHVlcy5hZGQodG90U3VwcE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbik7IC8vIEFkZCB0aGUgdmFsdWUgdG8gdGhlIG9iamVjdCBhdHRyaWJ1dGUKCWxvZy5kZWJ1ZyB2YWx1ZXMKICAgIHRvdFN1cHBPYmplY3RBdHRyaWJ1dGVCZWFuLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWVzKTsgCiAgICBvYmplY3RBdHRyaWJ1dGVCZWFucy5hZGQodG90U3VwcE9iamVjdEF0dHJpYnV0ZUJlYW4pOwoJCgkvKk5vbWUgQ09NUE9ORU5UX1RPVEFMX0FNT1VOVF9DVVNUT01FUiovCiAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQudG90Q3VzdCddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKQoJZGVmIHRvdEN1c3QgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkKCXRvdEN1c3Q9dG90Q3VzdFswXS5nZXRWYWx1ZSgpCiAgICBkZWYgdG90Q3VzdE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oQ09NUE9ORU5UX1RPVEFMX0FNT1VOVF9DVVNUT01FUik7IC8vIFRoZSBJRCBvZiB0aGUgb2JqZWN0IHR5cGUgYXR0cmlidXRlICJESVNBQkxFRCIKICAgIGRlZiB0b3RDdXN0T2JqZWN0QXR0cmlidXRlQmVhbiA9IG5ld09iamVjdEJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbih0b3RDdXN0T2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4pOyAvLyBUaGlzIGlzIHRoZSBuYW1lIG9iamVjdCBhdHRyaWJ1dGUgZm9yIHRoZSBuZXcgb2JqZWN0CiAgICBkZWYgdG90Q3VzdE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbiA9IHRvdEN1c3RPYmplY3RBdHRyaWJ1dGVCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpOyAvLyBUaGlzIGlzIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZQogICAgdG90Q3VzdE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbi5zZXREb3VibGVWYWx1ZSh0b3RDdXN0KTsgLy8gU2V0IHRoZSBuYW1lCgogICAgdmFsdWVzID0gdG90Q3VzdE9iamVjdEF0dHJpYnV0ZUJlYW4uZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpOyAKICAgIHZhbHVlcy5hZGQodG90Q3VzdE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbik7IC8vIEFkZCB0aGUgdmFsdWUgdG8gdGhlIG9iamVjdCBhdHRyaWJ1dGUKCWxvZy5kZWJ1ZyB2YWx1ZXMKICAgIHRvdEN1c3RPYmplY3RBdHRyaWJ1dGVCZWFuLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWVzKTsgCiAgICBvYmplY3RBdHRyaWJ1dGVCZWFucy5hZGQodG90Q3VzdE9iamVjdEF0dHJpYnV0ZUJlYW4pOwogCgkvKk5vbWUgQ09NUE9ORU5UX01BVEVSSUFMX1JFRiovCiAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQubWF0ZXJpYWxSZWYnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkKCWRlZiBtYXRlcmlhbCA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQoJbWF0ZXJpYWw9bWF0ZXJpYWxbMF0uZ2V0VmFsdWUoKQogICAgZGVmIG1hdFJlZk9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oQ09NUE9ORU5UX01BVEVSSUFMX1JFRik7IC8vIFRoZSBJRCBmb3IgdGhlIHJlZmVyZW5jZWQgb2JqZWN0IHR5cGUKICAgIG1hdFJlZk9iamVjdEF0dHJpYnV0ZUJlYW4gPSBuZXdPYmplY3RCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW4obWF0UmVmT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4pOyAKICAgIG1hdFJlZk9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbiA9IG1hdFJlZk9iamVjdEF0dHJpYnV0ZUJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7IC8vIFRoaXMgaXMgdGhlIGFjdHVhbCB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlCiAgICBtYXRSZWZPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4uc2V0UmVmZXJlbmNlZE9iamVjdEJlYW5JZChtYXRlcmlhbCk7IC8vIFNldCB0aGUgSUQKCiAgICB2YWx1ZXMgPSBtYXRSZWZPYmplY3RBdHRyaWJ1dGVCZWFuLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTsgCiAgICB2YWx1ZXMuYWRkKG1hdFJlZk9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbik7IC8vIEFkZCB0aGUgdmFsdWUgdG8gdGhlIG9iamVjdCBhdHRyaWJ1dGUKCWxvZy5kZWJ1ZyB2YWx1ZXMKICAgIG1hdFJlZk9iamVjdEF0dHJpYnV0ZUJlYW4uc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyh2YWx1ZXMpOyAKCiAgICBvYmplY3RBdHRyaWJ1dGVCZWFucy5hZGQobWF0UmVmT2JqZWN0QXR0cmlidXRlQmVhbik7IC8vIEFkZCB0byB0aGUgbGlzdCBvZiBvYmplY3QgYXR0cmlidXRlcwogICAgICAgIAogICAgCiAgICBkZWYgbWF0ZXJpYWxTQVAgICAgICAgCglpZiAobWF0ZXJpYWwhPW51bGwpewogICAgICAgIC8qTUFURVJJQUwgLSBTQVAqLwogICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG1hdGVyaWFsLnRvSW50ZWdlcigpLCBwcm9wZXJ0aWVzWydpb2JqLm1hdGVyaWFsLnNhcCddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKQogICAgICAgIG1hdGVyaWFsU0FQID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpCiAgICAgICAgbWF0ZXJpYWxTQVAgPSBtYXRlcmlhbFNBUFswXS5nZXRWYWx1ZSgpCiAgICAgICAgbG9nLmRlYnVnICJtYXRlcmlhbFNBUDogIiArIG1hdGVyaWFsU0FQCiAgICB9CiAgICAgICAgICAgIAoJLypOb21lIENPTVBPTkVOVF9TVVBQTElFRF9CWV9GQUFDKi8KICAgIGRlZiBzdXBwbGllZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oQ09NUE9ORU5UX1NVUFBMSUVEX0JZX0ZBQUMpOyAvLyBUaGUgSUQgb2YgdGhlIG9iamVjdCB0eXBlIGF0dHJpYnV0ZSAiRElTQUJMRUQiCiAgICBkZWYgc3VwcGxpZWRPYmplY3RBdHRyaWJ1dGVCZWFuID0gbmV3T2JqZWN0QmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKHN1cHBsaWVkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4pOyAvLyBUaGlzIGlzIHRoZSBuYW1lIG9iamVjdCBhdHRyaWJ1dGUgZm9yIHRoZSBuZXcgb2JqZWN0CiAgICBkZWYgc3VwcGxpZWRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4gPSBzdXBwbGllZE9iamVjdEF0dHJpYnV0ZUJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7IC8vIFRoaXMgaXMgdGhlIGFjdHVhbCB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlCglpZihtYXRlcmlhbFNBUD09dHJ1ZSl7CiAgICAJc3VwcGxpZWRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4uc2V0VGV4dFZhbHVlKCJZZXMiKTsgLy8gU2V0IHRoZSBuYW1lCiAgICB9ZWxzZXsKICAgICAgICBzdXBwbGllZE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbi5zZXRUZXh0VmFsdWUoIk5vIik7IC8vIFNldCB0aGUgbmFtZQogICAgfQoKICAgIHZhbHVlcyA9IHN1cHBsaWVkT2JqZWN0QXR0cmlidXRlQmVhbi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7IAogICAgdmFsdWVzLmFkZChzdXBwbGllZE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbik7IC8vIEFkZCB0aGUgdmFsdWUgdG8gdGhlIG9iamVjdCBhdHRyaWJ1dGUKCWxvZy5kZWJ1ZyB2YWx1ZXMKICAgIHN1cHBsaWVkT2JqZWN0QXR0cmlidXRlQmVhbi5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKHZhbHVlcyk7IAogICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKHN1cHBsaWVkT2JqZWN0QXR0cmlidXRlQmVhbik7CiAgICAKICAgIC8qTm9tZSBBQ0NPVU5USU5HX1NVUFBMSUVSX01BVEVSSUFMX1JFRiovCiAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuYWNjb3VudGluZ1N1cHBNYXRlcmlhbCddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKQoJZGVmIGFjY01hdFN1cHAgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkKCWFjY01hdFN1cHA9YWNjTWF0U3VwcFswXS5nZXRWYWx1ZSgpCiAgICBkZWYgYWNjb3VudGluZ0N1c3RSZWZPYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKENPTVBPTkVOVF9BQ0NPVU5USU5HX1NVUFBMSUVSX01BVEVSSUFMX1JFRik7IC8vIFRoZSBJRCBmb3IgdGhlIHJlZmVyZW5jZWQgb2JqZWN0IHR5cGUKICAgIGFjY291bnRpbmdDdXN0UmVmT2JqZWN0QXR0cmlidXRlQmVhbiA9IG5ld09iamVjdEJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihhY2NvdW50aW5nQ3VzdFJlZk9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKTsgCiAgICBhY2NvdW50aW5nQ3VzdFJlZk9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbiA9IGFjY291bnRpbmdDdXN0UmVmT2JqZWN0QXR0cmlidXRlQmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTsgLy8gVGhpcyBpcyB0aGUgYWN0dWFsIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGUKICAgIGFjY291bnRpbmdDdXN0UmVmT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuLnNldFJlZmVyZW5jZWRPYmplY3RCZWFuSWQoYWNjTWF0U3VwcCk7IC8vIFNldCB0aGUgSUQKCiAgICB2YWx1ZXMgPSBhY2NvdW50aW5nQ3VzdFJlZk9iamVjdEF0dHJpYnV0ZUJlYW4uZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpOyAKICAgIHZhbHVlcy5hZGQoYWNjb3VudGluZ0N1c3RSZWZPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4pOyAvLyBBZGQgdGhlIHZhbHVlIHRvIHRoZSBvYmplY3QgYXR0cmlidXRlCglsb2cuZGVidWcgdmFsdWVzCiAgICBhY2NvdW50aW5nQ3VzdFJlZk9iamVjdEF0dHJpYnV0ZUJlYW4uc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyh2YWx1ZXMpOyAKCiAgICBvYmplY3RBdHRyaWJ1dGVCZWFucy5hZGQoYWNjb3VudGluZ0N1c3RSZWZPYmplY3RBdHRyaWJ1dGVCZWFuKTsgLy8gQWRkIHRvIHRoZSBsaXN0IG9mIG9iamVjdCBhdHRyaWJ1dGVzCiAgICAKCS8qTm9tZSBDT01QT05FTlRfQUNDT1VOVElOR19DVVNUT01FUl9NQVRFUklBTF9SRUYqLwogICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmFjY291bnRpbmdDdXN0TWF0ZXJpYWwnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkKCWRlZiBhY2NNYXRDdXN0ID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpCglhY2NNYXRDdXN0PWFjY01hdEN1c3RbMF0uZ2V0VmFsdWUoKQogICAgZGVmIGFjY01hdEN1c3RPYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKENPTVBPTkVOVF9BQ0NPVU5USU5HX0NVU1RPTUVSX01BVEVSSUFMX1JFRik7IC8vIFRoZSBJRCBmb3IgdGhlIHJlZmVyZW5jZWQgb2JqZWN0IHR5cGUKICAgIGFjY01hdEN1c3RPYmplY3RBdHRyaWJ1dGVCZWFuID0gbmV3T2JqZWN0QmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKGFjY01hdEN1c3RPYmplY3RUeXBlQXR0cmlidXRlQmVhbik7IAogICAgYWNjTWF0Q3VzdE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbiA9IGFjY01hdEN1c3RPYmplY3RBdHRyaWJ1dGVCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpOyAvLyBUaGlzIGlzIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZQogICAgYWNjTWF0Q3VzdE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbi5zZXRSZWZlcmVuY2VkT2JqZWN0QmVhbklkKGFjY01hdEN1c3QpOyAvLyBTZXQgdGhlIElECgogICAgdmFsdWVzID0gYWNjTWF0Q3VzdE9iamVjdEF0dHJpYnV0ZUJlYW4uZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpOyAKICAgIHZhbHVlcy5hZGQoYWNjTWF0Q3VzdE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbik7IC8vIEFkZCB0aGUgdmFsdWUgdG8gdGhlIG9iamVjdCBhdHRyaWJ1dGUKCWxvZy5kZWJ1ZyB2YWx1ZXMKICAgIGFjY01hdEN1c3RPYmplY3RBdHRyaWJ1dGVCZWFuLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWVzKTsgCgogICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKGFjY01hdEN1c3RPYmplY3RBdHRyaWJ1dGVCZWFuKTsgLy8gQWRkIHRvIHRoZSBsaXN0IG9mIG9iamVjdCBhdHRyaWJ1dGVzCiAgICAgICAgCgkvKk5vbWUgQ09NUE9ORU5UX0ZST01fUVVPVEVfVEtUKi8KCWRlZiBmcm9tUXVvdGVPYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKENPTVBPTkVOVF9GUk9NX1FVT1RFX1RLVCk7IC8vIFRoZSBJRCBvZiB0aGUgb2JqZWN0IHR5cGUgYXR0cmlidXRlICJESVNBQkxFRCIKICAgIGRlZiBmcm9tUXVvdGVPYmplY3RBdHRyaWJ1dGVCZWFuID0gbmV3T2JqZWN0QmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKGZyb21RdW90ZU9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKTsgLy8gVGhpcyBpcyB0aGUgbmFtZSBvYmplY3QgYXR0cmlidXRlIGZvciB0aGUgbmV3IG9iamVjdAogICAgZGVmIGZyb21RdW90ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbiA9IGZyb21RdW90ZU9iamVjdEF0dHJpYnV0ZUJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7IC8vIFRoaXMgaXMgdGhlIGFjdHVhbCB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlCiAgICBpZihtYXRlcmlhbFNBUD09dHJ1ZSl7CiAgICAgICAgZnJvbVF1b3RlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuLnNldEJvb2xlYW5WYWx1ZSh0cnVlKTsgLy8gU2V0IHRoZSBuYW1lCiAgICB9ZWxzZXsKICAgICAgICBmcm9tUXVvdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4uc2V0Qm9vbGVhblZhbHVlKGZhbHNlKTsgLy8gU2V0IHRoZSBuYW1lCiAgICB9CgogICAgdmFsdWVzID0gZnJvbVF1b3RlT2JqZWN0QXR0cmlidXRlQmVhbi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7IAogICAgdmFsdWVzLmFkZChmcm9tUXVvdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4pOyAvLyBBZGQgdGhlIHZhbHVlIHRvIHRoZSBvYmplY3QgYXR0cmlidXRlCglsb2cuZGVidWcgdmFsdWVzCiAgICBmcm9tUXVvdGVPYmplY3RBdHRyaWJ1dGVCZWFuLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWVzKTsgCiAgICBvYmplY3RBdHRyaWJ1dGVCZWFucy5hZGQoZnJvbVF1b3RlT2JqZWN0QXR0cmlidXRlQmVhbik7CiAgICAKICAgIGxvZy5kZWJ1ZyAib2JqZWN0QXR0cmlidXRlQmVhbnM6ICIgKyBvYmplY3RBdHRyaWJ1dGVCZWFucwogICAgLyogU2V0IGFsbCBvYmplY3QgYXR0cmlidXRlcyB0byB0aGUgb2JqZWN0ICovCiAgICBuZXdPYmplY3RCZWFuLnNldE9iamVjdEF0dHJpYnV0ZUJlYW5zKG9iamVjdEF0dHJpYnV0ZUJlYW5zKTsKCiAgICB0cnkgewogICAgIAluZXdPYmplY3RCZWFuID0gb2JqZWN0RmFjYWRlLnN0b3JlT2JqZWN0QmVhbihuZXdPYmplY3RCZWFuKTsKICAgICAgICBvYmpMaXN0LmFkZChuZXdPYmplY3RCZWFuKQogICAgIAlsb2cuZGVidWcoIm5ld09iamVjdEJlYW46ICIgKyBuZXdPYmplY3RCZWFuKTsKICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHsKICAgICAJbG9nLndhcm4oIkNvdWxkIG5vdCBjcmVhdGUgaXNzdWUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOiIgKyB2aWUuZ2V0TWVzc2FnZSgpKTsKICAgIH0KICAgIAp9CgptaS5zZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscywgb2JqTGlzdCk7CkNvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTsKICAgICAgICAgIA==</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="321" name="Offerta Rifiutata da Cliente">
          <meta name="opsbar-sequence">20</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <results>
            <unconditional-result old-status="null" status="null" step="13">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="331" name="Richiesta Preventivo Scaduta">
          <meta name="opsbar-sequence">30</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <results>
            <unconditional-result old-status="null" status="null" step="14">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="781" name="Riapri Offerta">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <results>
            <unconditional-result old-status="null" status="null" step="10">
              <post-functions>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_22673</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="field3">customfield_22675</arg>
                  <arg name="field2">customfield_22674</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="12" name="Required">
      <meta name="jira.status.id">14335</meta>
      <actions>
<common-action id="51" />
<common-action id="751" />
<common-action id="541" />
<common-action id="861" />
        <action id="711" name="Riapri Offerta">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <results>
            <unconditional-result old-status="null" status="null" step="11">
              <post-functions>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_22635</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="731" name="Modifica Impianto" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">20116</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">1675639b-1b66-4d8e-ba9b-3d496754f415</arg>
                <arg name="FIELD_NOTES">YCFgRW5hYmxlZCBvbmx5IGZvciBuZXcgaW5zdCB0aWNrZXRzIGluIG9yZGVyIHRvIGFzc2lnbiBBU1NFVCBhbmQgZ2VuZXJhdGUgKG9yIHJlLWdlbmVyYXRlKSBEb2Nz</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiIoaXNzdWUuaXNzdWVUeXBlLm5hbWUgPT0gJ05ldyBJbnN0YWxsYXRpb24nIHx8IChpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnTWFpbnRlbmFuY2UgVGlja2V0JyAmJiBjZlZhbHVlc1snT1BfRklSU1RfVElDS0VUJ10gPT0gXCJGaXJzdCBUaWNrZXRcIikpICYmIGNmVmFsdWVzWydPUF9BU1NFVCddICE9IG51bGwiLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">3039511e-90dd-490d-99ef-f8487b209eba</arg>
              <arg name="FIELD_NOTES">YCFgRGVsZXRlIHByZXZpb3VzIGF0dGFjaG1lbnRzIHJlbGF0ZWQgdG8gTkVXIEluc3RhbGxhdGlvbiBUS1QgR2VuZXJhdGlvbg==</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5cbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5kZWYgYXV0b21hdGljYWxseUNsb3NlZCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUNsb3NlZCddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG4vKlNjcmlwdCBWYXJpYWJsZXMqL1xuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0xNDA2MlwiKVxuXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5cbi8qUmltb3ppb25lIGFsbGVnYXRvIHJhcHBvcnRvIGRpIGludGVydmVudG8gYXBwZW5hIGNyZWF0byovXG4vKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG5cbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTtcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcblxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcblxuQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG5kZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG5cbi8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSBcIiBhcm91bmQgdmFsdWUgKi9cbmRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5cXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5uZXdJbnN0VGt0J10udG9TdHJpbmcoKSArIFwiXFxcIiA9IHRydWUgQU5EIFwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyBcIiE9dHJ1ZSBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleSA9IFwiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIilcIik7IC8vIFNlZSB0aGUgY29tcGxldGUgbGlzdCBvZiBwb3NzaWJsZSBJUUwgb24gdGhlIEluc2lnaHQgUXVlcnkgTGFuZ3VhZ2UgZG9jdW1lbnRhdGlvbiBwYWdlXG4vKiBJZiB0aGlzIGlzIGEgbWFuZGF0b3J5IGZpZWxkIHlvdSBzaG91bGQgYmUgYWJsZSB0byBkbyB0aGlzOiAqL1xubG9nLmRlYnVnIFwiSVFMOiBcIiArIFwiXFxcIlwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuY2F0ZWdvcnlSZWYnXS50b1N0cmluZygpICsgXCJcXFwiLlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm5ld0luc3RUa3QnXS50b1N0cmluZygpICsgXCJcXFwiID0gdHJ1ZSBBTkQgXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSArIFwiIT10cnVlIEFORCBvYmplY3QgSEFWSU5HIGNvbm5lY3RlZFRpY2tldHMoa2V5ID0gXCIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArIFwiKVwiXG5cbmZvcihpb2JqIGluIG9iamVjdHMpe1xuICAgIC8qIFVQREFURSBPSkJFQ1QgREVMRVRFRCBWQUxVRSAqL1xuICAgIGRlZiBvYmogPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oaW9iai5nZXRJZCgpKTtcbiAgICAgICAgXG4gICAgaW50IGF0dGFjaG1lbnREZWxldGVkID0gcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50LmRlbGV0ZWQuaWQnXSA/IHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudC5kZWxldGVkLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKSA6IDMyNjVcbiAgICBcbiAgICBhdHRyaWJUeXBlID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oYXR0YWNobWVudERlbGV0ZWQpOyBcblxuICAgIG5ld0F0dHJpYiA9IG9iai5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKGF0dHJpYlR5cGUpO1xuICAgIGRlZiBuZXdBdHRyaWJWYWx1ZSA9IG5ld0F0dHJpYi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTtcblxuICAgIHRyeSB7XG4gICAgXHRuZXdBdHRyaWJWYWx1ZS5zZXRWYWx1ZShhdHRyaWJUeXBlLCB0cnVlKTtcbiAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XG4gICAgIFx0bG9nLndhcm4oXCJTRVRJTlNJR0hUVkFMVUU6IFVuYWJsZSB0byBzZXQgYXR0cmlidXRlIFwiICsgYXR0cmliVHlwZSArIFwiIHRvIFwiICsgdG90YWxBbW91bnRTdXBwICsgXCIuIEV4aXRpbmcuXCIpO1xuICAgICBcdGxvZy53YXJuKFNFVElOU0lHSFRWQUxVRTogdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgIFx0cmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICBkZWYgYXR0cmliVmFsdWVzID0gbmV3QXR0cmliLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTtcbiAgICBhdHRyaWJWYWx1ZXMuYWRkKG5ld0F0dHJpYlZhbHVlKTtcbiAgICBuZXdBdHRyaWIuc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyhhdHRyaWJWYWx1ZXMpO1xuICAgICBcbiAgICB0cnkge1xuICAgIFx0bmV3QXR0cmliID0gb2JqZWN0RmFjYWRlLnN0b3JlT2JqZWN0QXR0cmlidXRlQmVhbihuZXdBdHRyaWIpO1xuICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHtcbiAgICBcdGxvZy53YXJuKFwiU0VUSU5TSUdIVFZBTFVFOiBVbmFibGUgdG8gc2F2ZSBjaGFuZ2VzLiBFeGl0aW5nLlwiKTtcbiAgICAgXHRsb2cud2FybihTRVRJTlNJR0hUVkFMVUU6IHZpZS5nZXRNZXNzYWdlKCkpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgbG9nLmluZm8oXCJTRVRJTlNJR0hUVkFMVUU6IFN1Y2Nlc3NmdWxseSBzYXZlZCB2YWx1ZVwiKTtcbn0iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">8d35339f-f6d9-4134-9c7e-8df9cec0081e</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IERvYyBUZW1wbGF0ZSBnZW5lcmF0aW9uIC0gc2UgTmV3IEluc3RhbGxhdGlvbiBPUiBGaXJzdCBUaWNrZXQgPSB0cnVl</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5Xb3JrZmxvd0V4Y2VwdGlvbjtcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvblxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyO1xuaW1wb3J0IGdyb292eS5qc29uLlN0cmVhbWluZ0pzb25CdWlsZGVyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5DdXN0b21GaWVsZE1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3I7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMuY29kZWMuYmluYXJ5LkJhc2U2NDtcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5XG5pbXBvcnQgZ3Jvb3Z5eC5uZXQuaHR0cC5IVFRQQnVpbGRlclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcblxuZGVmIHJlcXVlc3RNZXRob2RcbmRlZiBiYXNlVVJMXG5cbmRlZiBmaXJzdFRpY2tldCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuZmlyc3RUa3QnXS50b1N0cmluZygpKVswXVxuXG5sb2cuZGVidWcgaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZVxubG9nLmRlYnVnIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZmlyc3RUaWNrZXQpXG5cblxuLyogUkVTVCBBUEkgcGVyIEludmlvIE5vdGlmaWNhIEVtYWlsIE9OU0lURV9SRVBPUlQgKi9cbnJlcXVlc3RNZXRob2QgPSBcIkdFVFwiO1xuXG5pZihpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0Lm5ld0luc3RhbGxhdGlvbiddKSB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGZpcnN0VGlja2V0KSE9bnVsbCl7XG4gICAgZGVmIGZpcnN0X3RpY2tldD1mYWxzZVxuICAgIGRlZiB0ZW1wbGF0ZT1cIlwiXG4gICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShmaXJzdFRpY2tldCkhPW51bGwpe1xuICAgICAgICBmaXJzdF90aWNrZXQ9dHJ1ZVxuICAgICAgICB0ZW1wbGF0ZT1cIkZJUlNUX1RJQ0tFVCU3Q01BTlVGQUNUVVJFUlwiXG4gICAgfWVsc2V7XG4gICAgICAgIHRlbXBsYXRlPVwiTkVXX0lOU1RBTExBVElPTl9DUkVBVEVfVEtUJTdDTUFOVUZBQ1RVUkVSXCJcbiAgICB9XG4gICAgXG4gICAgaWYoaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5uZXdJbnN0YWxsYXRpb24nXSkpe1xuICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvYXV0b21hdGlvbi9kb2N1bWVudC9nZW5lcmF0aW9uL2NoZWNrP0lTU1VFX0tFWT1cIisgaXNzdWUua2V5ICtcIiZET0NfQ0FURUdPUlk9XCIgKyB0ZW1wbGF0ZSArIFwiJkVOQUJMRURfRk9SX0ZJUlNUX1RJQ0tFVD1cIitmaXJzdF90aWNrZXQrXCImSU1QT1JUX0ZST009XCJcbiAgICB9ZWxzZXtcbiAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vZG9jdW1lbnQvZ2VuZXJhdGlvbi9jaGVjaz9JU1NVRV9LRVk9XCIrIGlzc3VlLmtleSArXCImRE9DX0NBVEVHT1JZPVwiICsgdGVtcGxhdGUgKyBcIiZFTkFCTEVEX0ZPUl9GSVJTVF9USUNLRVQ9XCIrZmlyc3RfdGlja2V0K1wiJklNUE9SVF9GUk9NPU9QX0FTU0VUXCJcbiAgICB9XG4gICAgXG4gICAgbG9nLmRlYnVnIGJhc2VVUkxcbiAgICBVUkwgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cdGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICBcbiAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICBsb2cuZGVidWcgXCJFcnJvclN0cmVhbTogXCIgKyBjb25uZWN0aW9uLmdldEVycm9yU3RyZWFtKCkudG9TdHJpbmcoKVxuICAgICAgICBsb2cuZGVidWcgXCJnZXRIZWFkZXJGaWVsZHMoKTogXCIgKyBjb25uZWN0aW9uLmdldEhlYWRlckZpZWxkcygpXG4gICAgICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHRcbiAgICAgICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xuXG4gICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpXG4gICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgXG4gICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcblxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLURPQ1NcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5tZXNzYWdlKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgfVxufVxuIiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="12">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="13" name="Rejected">
      <meta name="jira.status.id">11436</meta>
      <actions>
        <action id="771" name="indietro">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <results>
            <unconditional-result old-status="null" status="null" step="10">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="14" name="Quote Expired">
      <meta name="jira.status.id">14336</meta>
    </step>
    <step id="16" name="Suspended">
      <meta name="jira.status.id">14337</meta>
      <actions>
<common-action id="371" />
      </actions>
    </step>
    <step id="17" name="Canceled">
      <meta name="jira.status.id">11728</meta>
      <actions>
<common-action id="371" />
      </actions>
    </step>
    <step id="18" name="Completed during Maintenance">
      <meta name="jira.status.id">14827</meta>
      <actions>
<common-action id="141" />
      </actions>
    </step>
    <step id="19" name="Assigned to Technician">
      <meta name="jira.status.id">14927</meta>
      <actions>
<common-action id="81" />
<common-action id="121" />
        <action id="871" name="Accetta Intervento" view="fieldscreen">
          <meta name="opsbar-sequence">10</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">19905</meta>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">9ea9661d5b7954626bd1f3b6b542df62f7afc3dd</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIGVycm9ycyAmIHdhcm5pbmdz</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5cblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQgICBcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFxuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5kZWYgQ2F0ZWdvcnkgbG9nID0gQ2F0ZWdvcnkuZ2V0SW5zdGFuY2UoXCJjb20ub25yZXNvbHZlLmppcmEuZ3Jvb3Z5LlBvc3RGdW5jdGlvblwiKVxuIFxuSXNzdWUgaXNzdWUgPSBpc3N1ZVxuXG5kZWYgZXJyb3JzID0gZmFsc2VcbmRlZiB3YXJuaW5ncyA9IGZhbHNlXG5cbmRlZiBzdXBwbGllckxhYmVsID0gcHJvcGVydGllc1snY2Yuc3VwcGxpZXInXSA/IHByb3BlcnRpZXNbJ2NmLnN1cHBsaWVyJ10udG9TdHJpbmcoKSA6IFwiT1BfU1VQUExJRVJcIlxuZGVmIHN1cHBsaWVyMSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShzdXBwbGllckxhYmVsKVswXVxuZGVmIHN1cHBsaWVyMiA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShzdXBwbGllckxhYmVsKVsxXVxuXG5kZWYgZXJyb3JNYW5kYXRvcnlGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiB3YXJuaW5nRW1wdHlGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KClcbiBcbi8vT1BfU1VQUExJRVJfUkVQQUlSIHZzIE9QX1NVUFBMSUVSX05FV0lOU1RcbmxvZy5kZWJ1ZyBcInN1cHBsaWVyTGFiZWw6IFwiICsgc3VwcGxpZXJMYWJlbFxubG9nLmRlYnVnIFwic3VwcGxpZXIxOiBcIiArIHN1cHBsaWVyMVxubG9nLmRlYnVnIFwic3VwcGxpZXIyOiBcIiArIHN1cHBsaWVyMlxuZGVmIHN1cHBsaWVyMWVtcHR5ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzdXBwbGllcjEpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzdXBwbGllcjEpID09IFwiXCIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzdXBwbGllcjEpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpXG5kZWYgc3VwcGxpZXIyZW1wdHkgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHN1cHBsaWVyMik9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHN1cHBsaWVyMikgPT0gXCJcIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHN1cHBsaWVyMikudG9TdHJpbmcoKS5lcXVhbHMoXCJcIilcbmxvZy5kZWJ1ZyBcInN1cHBsaWVyMWVtcHR5OiBcIiArIHN1cHBsaWVyMWVtcHR5XG5sb2cuZGVidWcgXCJzdXBwbGllcjJlbXB0eTogXCIgKyBzdXBwbGllcjJlbXB0eVxuaWYoKHN1cHBsaWVyMWVtcHR5KSAmJiAoc3VwcGxpZXIyZW1wdHkpKXtcblx0bG9nLmRlYnVnIFwic3VwcGxpZXIxZW1wdHkgJiYgc3VwcGxpZXIyZW1wdHlcIlxuICAgIGVycm9ycyA9IHRydWVcblx0ZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHN1cHBsaWVyTGFiZWwpXG4gICAgbG9nLmRlYnVnIFwiZXJyb3JNYW5kYXRvcnlGaWVsZHM6IFwiICsgZXJyb3JNYW5kYXRvcnlGaWVsZHNcbn1cblxuZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuXG5pZiAoIWVycm9ycyAmJiAhd2FybmluZ3Mpe1xuICAgIHJldHVybiB0cnVlXG59ZWxzZXtcbiAgICBpZighZXJyb3JzICYmIHdhcm5pbmdzKXtcbiAgICAgICAgZGVmIHdMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIFxuICAgICAgICBpZih3YXJuaW5nRW1wdHlGaWVsZHMuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHkgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChcIldcIilcbiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChcIkNPTkZJUk1fRU1QVFlfRklFTERTXCIpXG4gICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQobnVsbClcbiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZCh3YXJuaW5nRW1wdHlGaWVsZHMpXG5cbiAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eSlcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgb3V0cHV0LmFkZCh3TGlzdClcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiV1wiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIldcIiwgb3V0cHV0LnRvU3RyaW5nKCkpICAgXG4gICAgfVxuICAgIGlmKGVycm9ycyAmJiAhd2FybmluZ3Mpe1xuICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgXG4gICAgICAgIGlmKGVycm9yTWFuZGF0b3J5RmllbGRzLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgZGVmIGVMaXN0TWFuZGF0b3J5ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoXCJFXCIpXG4gICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoXCJNQU5EQVRPUllfRklFTERTXCIpXG4gICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQobnVsbClcbiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChlcnJvck1hbmRhdG9yeUZpZWxkcylcbiAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdE1hbmRhdG9yeSlcbiAgICAgICAgfVxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKFwiRVwiLCBvdXRwdXQudG9TdHJpbmcoKSkgICBcbiAgICB9XG4gICAgaWYoZXJyb3JzICYmIHdhcm5pbmdzKXtcbiAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICBcbiAgICAgICAgaWYoZXJyb3JNYW5kYXRvcnlGaWVsZHMuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICBkZWYgZUxpc3RNYW5kYXRvcnkgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChcIkVcIilcbiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChcIk1BTkRBVE9SWV9GSUVMRFNcIilcbiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChudWxsKVxuICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKGVycm9yTWFuZGF0b3J5RmllbGRzKVxuICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0TWFuZGF0b3J5KVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZih3YXJuaW5nRW1wdHlGaWVsZHMuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHkgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChcIldcIilcbiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChcIkNPTkZJUk1fRU1QVFlfRklFTERTXCIpXG4gICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQobnVsbClcbiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZCh3YXJuaW5nRW1wdHlGaWVsZHMpXG5cbiAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eSlcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgb3V0cHV0LmFkZCh3TGlzdClcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiV0VcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJXRVwiLCBvdXRwdXQudG9TdHJpbmcoKSkgIFxuICAgIH1cbn0iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZQppbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb24KaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3IKaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CmRlZiBDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQogCklzc3VlIGlzc3VlID0gaXNzdWUKCmRlZiBlcnJvcnMgPSBmYWxzZQpkZWYgd2FybmluZ3MgPSBmYWxzZQoKZGVmIHN1cHBsaWVyTGFiZWwgPSBwcm9wZXJ0aWVzWydjZi5zdXBwbGllciddID8gcHJvcGVydGllc1snY2Yuc3VwcGxpZXInXS50b1N0cmluZygpIDogIk9QX1NVUFBMSUVSIgpkZWYgc3VwcGxpZXIgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHN1cHBsaWVyTGFiZWwpWzBdCgpkZWYgZXJyb3JNYW5kYXRvcnlGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIHdhcm5pbmdFbXB0eUZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKQogCi8vT1BfU1VQUExJRVJfUkVQQUlSIHZzIE9QX1NVUFBMSUVSX05FV0lOU1QKbG9nLmRlYnVnICJzdXBwbGllckxhYmVsOiAiICsgc3VwcGxpZXJMYWJlbAppZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHN1cHBsaWVyKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc3VwcGxpZXIpID09ICIiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc3VwcGxpZXIpLnRvU3RyaW5nKCkuZXF1YWxzKCIiKSl7CgllcnJvcnMgPSB0cnVlCgllcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQoc3VwcGxpZXJMYWJlbCkKICAgIGxvZy5kZWJ1ZyAiZXJyb3JNYW5kYXRvcnlGaWVsZHM6ICIgKyBlcnJvck1hbmRhdG9yeUZpZWxkcwp9CgoKZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKQoKaWYgKCFlcnJvcnMgJiYgIXdhcm5pbmdzKXsKICAgIHJldHVybiB0cnVlCn1lbHNlewogICAgaWYoIWVycm9ycyAmJiB3YXJuaW5ncyl7CiAgICAgICAgZGVmIHdMaXN0ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgCiAgICAgICAgaWYod2FybmluZ0VtcHR5RmllbGRzLnNpemUoKSA+IDApewogICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHkgPSBuZXcgQXJyYXlMaXN0KCkKICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKCJXIikKICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKCJDT05GSVJNX0VNUFRZX0ZJRUxEUyIpCiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChudWxsKQogICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQod2FybmluZ0VtcHR5RmllbGRzKQoKICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5KQogICAgICAgIH0KICAgICAgICAKICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KQogICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3siVyI6IicgKyBvdXRwdXQudG9TdHJpbmcoKSArICcifScpCiAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJXIiwgb3V0cHV0LnRvU3RyaW5nKCkpICAgCiAgICB9CiAgICBpZihlcnJvcnMgJiYgIXdhcm5pbmdzKXsKICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KCkKICAgICAgICAKICAgICAgICBpZihlcnJvck1hbmRhdG9yeUZpZWxkcy5zaXplKCkgPiAwKXsKICAgICAgICAgICAgZGVmIGVMaXN0TWFuZGF0b3J5ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZCgiRSIpCiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZCgiTUFOREFUT1JZX0ZJRUxEUyIpCiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChudWxsKQogICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoZXJyb3JNYW5kYXRvcnlGaWVsZHMpCiAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdE1hbmRhdG9yeSkKICAgICAgICB9CiAgICAgICAgb3V0cHV0LmFkZChlTGlzdCkKICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IkUiOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQogICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiRSIsIG91dHB1dC50b1N0cmluZygpKSAgIAogICAgfQogICAgaWYoZXJyb3JzICYmIHdhcm5pbmdzKXsKICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KCkKICAgICAgICBkZWYgd0xpc3QgPSBuZXcgQXJyYXlMaXN0KCkKICAgICAgICAKICAgICAgICBpZihlcnJvck1hbmRhdG9yeUZpZWxkcy5zaXplKCkgPiAwKXsKICAgICAgICAgICAgZGVmIGVMaXN0TWFuZGF0b3J5ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZCgiRSIpCiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZCgiTUFOREFUT1JZX0ZJRUxEUyIpCiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChudWxsKQogICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoZXJyb3JNYW5kYXRvcnlGaWVsZHMpCiAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdE1hbmRhdG9yeSkKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaWYod2FybmluZ0VtcHR5RmllbGRzLnNpemUoKSA+IDApewogICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHkgPSBuZXcgQXJyYXlMaXN0KCkKICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKCJXIikKICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKCJDT05GSVJNX0VNUFRZX0ZJRUxEUyIpCiAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChudWxsKQogICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQod2FybmluZ0VtcHR5RmllbGRzKQoKICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5KQogICAgICAgIH0KICAgICAgICAKICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KQogICAgICAgIG91dHB1dC5hZGQod0xpc3QpCiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigneyJXRSI6IicgKyBvdXRwdXQudG9TdHJpbmcoKSArICcifScpCiAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJXRSIsIG91dHB1dC50b1N0cmluZygpKSAgCiAgICB9Cn0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">ebf32ca3-2ea4-4039-9460-4705d533e401</arg>
              <arg name="FIELD_NOTES">YCFgQ3JlYXRlIFNOIGZvciBvbGQgdGlja2V0cw==</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuXG5kZWYgU04gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfU0FQX1NFUlZJQ0VfTk9USUZJQ0FUSU9OXCIpWzBdXG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcblxuVVJMIHVybFxuSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvblxuXG5pZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKFNOKSA9PSBudWxsICYmIGlzc3VlLmlzc3VlVHlwZS5uYW1lICE9IFwiUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXRcIil7XG4gICAgcmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuXG4gICAgZGVmIGJvZHlfcmVxID0gW11cbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXG4gICAgICAgIFwic3RhdHVzXCI6IFwiT1BFXCJcbiAgICBdIFxuXG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL3NlcnZpY2Uvbm90aWZpY2F0aW9uXCJcblxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxuICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNOOiBcIiArIGJvZHlfcmVxXG4gICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxuICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgIFxuICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG4gICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcblxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TTi1VUERBVEVcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICB9XG59Iiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="20">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">5c617aad-7d1a-4805-8e97-6b2c635a187e</arg>
                  <arg name="FIELD_NOTES">YCFgT1A6IE5ldyBJbnN0YWxsYXRpb24gLSBDaGVjayBsaW5rZWRUaWNrZXRzICYgRmFzdC1UcmFuc2FjdCB0aGVt</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5sb2cud2FybiBcIiR7aXNzdWUua2V5fSBUcmFuc2F6aW9uZSBBQ0NFUFRFRCBCWSBTVVBQTElFUiAtIFBvc3QgRnVuY3Rpb24gY2hlY2sgbGlua2VkSXNzdWVzXCJcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuZGVmIGF1dG9tYXRpY2FsbHlDb25maXJtZWQgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUFjY2VwdGVkJ10gPyBwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5QWNjZXB0ZWQnXS50b1N0cmluZygpIDogXCJPUF9BVVRPTUFUSUNBTExZX0FDQ0VQVEVEXCIpWzBdXG5kZWYgcGxhbm5lZERhdGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9QTEFOTkVEX0RBVEVcIilbMF1cbmRlZiBwbGFubmVkSG91ciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1BMQU5ORURfSE9VUlwiKVswXVxuSXNzdWVJbmRleGluZ1NlcnZpY2UgXHRpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSlcblxuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL2lzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0yNzZcIilcblxuLypERVYqL1xuQUNDRVBUID0gcHJvcGVydGllc1snd2YudHIuYWNjZXB0J10gPyBwcm9wZXJ0aWVzWyd3Zi50ci5hY2NlcHQnXSA6IDcxXG5cbi8qUFJPRCovXG4vL0NPTkZJUk1fVE9fQ1VTVE9NRVJcblxuZGVmIHVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcbmRlZiBpc3N1ZVNlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZVNlcnZpY2UoKVxuZGVmIHJlcXVlc3RNZXRob2RcbmRlZiBiYXNlVVJMXG5cbi8qU2UgZXNlZ3VvIGxhIGNvbmZpcm0gdG8gY3VzdG9tZXIgc3UgdW4gdGlja2V0IGNvbiAxIG8gKyB0aWNrZXQgY29sbGVnYXRpLCB2ZXJpZmljbyBlIHNwb3N0byBpbiBhdXRvbWF0aWNvIGdsaSBldmVudHVhbGkgdGlja2V0IGNvbGxlZ2F0aSovXG5sb2cud2FybiBcInZlcmlmaWNvIGUgc3Bvc3RvIGluIGF1dG9tYXRpY28gZ2xpIGV2ZW50dWFsaSB0aWNrZXQgY29sbGVnYXRpXCJcblxuaWYoKGlzc3VlLmdldElzc3VlVHlwZSgpLmdldE5hbWUoKSA9PSBwcm9wZXJ0aWVzWydpdC5uZXdJbnN0YWxsYXRpb24nXS50b1N0cmluZygpIHx8IGlzc3VlLmdldElzc3VlVHlwZSgpLmdldE5hbWUoKSA9PSBcIk1haW50ZW5hbmNlIFRpY2tldFwiKSAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpPT1udWxsIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCkudG9TdHJpbmcoKS5lcXVhbHMoXCJOb1wiKSl7XG4gICAgTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG4gICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgIGxvZy53YXJuIFwiSXNzdWUgY29uIHJlbGF0ZXNJbklzc3VlTGlua1wiXG4gICAgICAgICAgICAvKkVzZWd1aXJlIHRyYW5zYXppb25lIGRpIHN0YXRvIGRlbGxhIHNvdXJjZUlzc3VlKi9cbiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZSA9IGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKVxuICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlU3RhdHVzID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzKClcbiAgICAgICAgICAgIGRlZiB0cmFuc2l0aW9uSWRcbiAgICAgICAgICAgIGlmKGxpbmtlZElzc3VlU3RhdHVzLm5hbWUgPT0gKHByb3BlcnRpZXNbJ3dmLmFzc2lnbmVkVG9TdXBwbGllciddID8gcHJvcGVydGllc1snd2YuYXNzaWduZWRUb1N1cHBsaWVyJ10udG9TdHJpbmcoKSA6IFwiQXNzaWduZWQgVG8gU3VwcGxpZXJcIikpe1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb25JZD1BQ0NFUFRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHRyYW5zaXRpb25JZD09QUNDRVBUKXtcbiAgICAgICAgICAgICAgICAvLyBQcmVwYXJlIG91ciBpbnB1dCBmb3IgdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKVxuICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGgge1xuICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2sodHJ1ZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy9kZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKVxuICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09IFwiWWVzXCIgfVxuICAgICAgICAgICAgICAgIC8vaXNzdWVJbnB1dFBhcmFtZXRlcnMuYWRkQ3VzdG9tRmllbGRWYWx1ZShmaWVsZENvbmZpZy5nZXRJZCgpLCBcIlllc1wiKSBcbiAgICAgICAgICAgICAgICAvL2xvZy53YXJuIFwiaXNzdWVJbnB1dFBhcmFtZXRlcnM6IFwiICsgaXNzdWVJbnB1dFBhcmFtZXRlcnNcbiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcbiAgICAgICAgICAgICAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBsaW5rZWRJc3N1ZVxuXG4gICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNvbmZpcm1lZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSlcbiAgICAgICAgICAgICAgICBsb2cud2FybiBcImZpZWxkQ29uZmlnOiBcIiArIGZpZWxkQ29uZmlnXG4gICAgICAgICAgICAgICAgZGVmIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gXCJZZXNcIiB9XG4gICAgICAgICAgICAgICAgYXV0b21hdGljYWxseUNvbmZpcm1lZC51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbGFubmVkRGF0ZSlcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbGFubmVkSG91cilcbiAgICAgICAgICAgICAgICBwbGFubmVkRGF0ZS51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbGFubmVkRGF0ZSksIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocGxhbm5lZERhdGUpKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuICAgICAgICAgICAgICAgIHBsYW5uZWRIb3VyLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBsYW5uZWRIb3VyKSwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbGFubmVkSG91cikpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG5cbiAgICAgICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChsaW5rZWRJc3N1ZSlcbiAgICAgICAgICAgICAgICBsb2cud2FybiBcIlVwZGF0ZWQgY3VzdG9tZmllbGQgLSBpc3N1ZSBsaW5rYXRhXCJcbiAgICAgICAgICAgICAgICBsb2cud2FybiBcImxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocGxhbm5lZERhdGUpOiBcIiArIGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocGxhbm5lZERhdGUpXG4gICAgICAgICAgICAgICAgbG9nLndhcm4gXCJsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBsYW5uZWRIb3VyKTogXCIgKyBsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBsYW5uZWRIb3VyKVxuXG4gICAgICAgICAgICAgICAgLy9kZWYgdmFsaWRhdGlvblJlc3VsdCA9IGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpXG4gICAgICAgICAgICAgICAgaWYgKGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZC50b0ludGVnZXIoKSwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSB0cmFuc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZC50b0ludGVnZXIoKSwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpKVxuICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259XCIpXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJUcmFuc2F6aW9uZSBmYXR0YSA3OSAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c31cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFJFU1QgQVBJIHBlciBwdWxpemlhIGNhY2hlIGlzc3VlIGxpbmthdGEgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RNZXRob2QgPSBcIkdFVFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgLypTY3JpcHQgVmFyaWFibGVzKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vUGVyIHRlc3QgZGEgY29uc29sZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy0zMjUzNVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vY2xlYXJDYWNoZS90aWNrZXRrZXkvXCIgKyBsaW5rZWRJc3N1ZS5rZXlcbiAgICAgICAgICAgICAgICAgICAgICAgIFVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgICAgICAgICAgICAgICAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIkNvdWxkIG5vdCB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG4gICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsT3V0SXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHtcbiAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcblxuICAgICAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICBsb2cud2FybiBcIklzc3VlIGNvbiByZWxhdGVzT3V0SXNzdWVMaW5rXCJcbiAgICAgICAgICAgIC8qRXNlZ3VpcmUgdHJhbnNhemlvbmUgZGkgc3RhdG8gZGVsbGEgZGVzdGluYXRpb25Jc3N1ZSovXG4gICAgICAgICAgICBkZWYgbGlua2VkSXNzdWUgPSBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKVxuICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlU3RhdHVzID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzKClcbiAgICAgICAgICAgIGRlZiB0cmFuc2l0aW9uSWRcbiAgICAgICAgICAgIGxvZy53YXJuIFwibGlua2VkSXNzdWU6IFwiICsgbGlua2VkSXNzdWVcbiAgICAgICAgICAgIGxvZy53YXJuIFwibGlua2VkSXNzdWVTdGF0dXMubmFtZTogXCIgKyBsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lXG4gICAgICAgICAgICBpZihsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lID09IChwcm9wZXJ0aWVzWyd3Zi5hc3NpZ25lZFRvU3VwcGxpZXInXSA/IHByb3BlcnRpZXNbJ3dmLmFzc2lnbmVkVG9TdXBwbGllciddLnRvU3RyaW5nKCkgOiBcIkFzc2lnbmVkIFRvIFN1cHBsaWVyXCIpKXtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9QUNDRVBUXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKHRyYW5zaXRpb25JZD09QUNDRVBUKXtcbiAgICAgICAgICAgICAgICAvLyBQcmVwYXJlIG91ciBpbnB1dCBmb3IgdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKVxuICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGgge1xuICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2sodHJ1ZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy9kZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKVxuICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09IFwiWWVzXCIgfVxuICAgICAgICAgICAgICAgIC8vaXNzdWVJbnB1dFBhcmFtZXRlcnMuYWRkQ3VzdG9tRmllbGRWYWx1ZShmaWVsZENvbmZpZy5nZXRJZCgpLCBcIlllc1wiKSBcblxuICAgICAgICAgICAgICAgIGRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlXG5cbiAgICAgICAgICAgICAgICBkZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLmdldFJlbGV2YW50Q29uZmlnKGxpbmtlZElzc3VlKVxuICAgICAgICAgICAgICAgIGxvZy53YXJuIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcbiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuXHRcdFx0XHRwbGFubmVkRGF0ZS51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbGFubmVkRGF0ZSksIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocGxhbm5lZERhdGUpKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuICAgICAgICAgICAgICAgIHBsYW5uZWRIb3VyLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBsYW5uZWRIb3VyKSwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbGFubmVkSG91cikpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpXG4gICAgICAgICAgICAgICAgbG9nLndhcm4gXCJVcGRhdGVkIGN1c3RvbWZpZWxkIC0gaXNzdWUgbGlua2F0YVwiXG4gICAgICAgICAgICAgICAgbG9nLndhcm4gXCJsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBsYW5uZWREYXRlKTogXCIgKyBsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBsYW5uZWREYXRlKVxuICAgICAgICAgICAgICAgIGxvZy53YXJuIFwibGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbGFubmVkSG91cik6IFwiICsgbGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbGFubmVkSG91cilcblxuICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQudG9JbnRlZ2VyKCksIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgdHJhbnNpdGlvblxuICAgICAgICAgICAgICAgICAgICBkZWYgaXNzdWVSZXN1bHQgPSBpc3N1ZVNlcnZpY2UudHJhbnNpdGlvbih1c2VyLCBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQudG9JbnRlZ2VyKCksIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEgaXNzdWVSZXN1bHQuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIkZhaWxlZCB0byB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiVHJhbnNhemlvbmUgZmF0dGEgMTIyICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn0sICR7bGlua2VkSXNzdWUuc3RhdHVzfVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLyogUkVTVCBBUEkgcGVyIHB1bGl6aWEgY2FjaGUgaXNzdWUgbGlua2F0YSAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdE1ldGhvZCA9IFwiR0VUXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKlNjcmlwdCBWYXJpYWJsZXMqL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTMyNTM1XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvYXV0b21hdGlvbi9jbGVhckNhY2hlL3RpY2tldGtleS9cIiArIGxpbmtlZElzc3VlLmtleVxuICAgICAgICAgICAgICAgICAgICAgICAgVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICAgICAgICAgICAgICAgICAgICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259XCIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICB9XG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlCmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZQppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQpDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5XQVJOKQoKbG9nLndhcm4gIiR7aXNzdWUua2V5fSBUcmFuc2F6aW9uZSBBQ0NFUFRFRCBCWSBTVVBQTElFUiAtIFBvc3QgRnVuY3Rpb24gY2hlY2sgbGlua2VkSXNzdWVzIgoKSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpOwpDdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7CmRlZiBhdXRvbWF0aWNhbGx5Q29uZmlybWVkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5QWNjZXB0ZWQnXSA/IHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlBY2NlcHRlZCddLnRvU3RyaW5nKCkgOiAiT1BfQVVUT01BVElDQUxMWV9BQ0NFUFRFRCIpWzBdCklzc3VlSW5kZXhpbmdTZXJ2aWNlIAlpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSkKCklzc3VlIGlzc3VlID0gaXNzdWUKLy9QZXIgdGVzdCBkYSBjb25zb2xlCi8vaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoIk9QVVQtMjc2IikKCi8qREVWKi8KQUNDRVBUID0gcHJvcGVydGllc1snd2YudHIuYWNjZXB0J10gPyBwcm9wZXJ0aWVzWyd3Zi50ci5hY2NlcHQnXSA6IDcxCgovKlBST0QqLwovL0NPTkZJUk1fVE9fQ1VTVE9NRVIKCmRlZiB1c2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpCmRlZiBpc3N1ZVNlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZVNlcnZpY2UoKQoKLypTZSBlc2VndW8gbGEgY29uZmlybSB0byBjdXN0b21lciBzdSB1biB0aWNrZXQgY29uIDEgbyArIHRpY2tldCBjb2xsZWdhdGksIHZlcmlmaWNvIGUgc3Bvc3RvIGluIGF1dG9tYXRpY28gZ2xpIGV2ZW50dWFsaSB0aWNrZXQgY29sbGVnYXRpKi8KbG9nLndhcm4gInZlcmlmaWNvIGUgc3Bvc3RvIGluIGF1dG9tYXRpY28gZ2xpIGV2ZW50dWFsaSB0aWNrZXQgY29sbGVnYXRpIgoKaWYoaXNzdWUuZ2V0SXNzdWVUeXBlKCkuZ2V0TmFtZSgpID09IHByb3BlcnRpZXNbJ2l0Lm5ld0luc3RhbGxhdGlvbiddLnRvU3RyaW5nKCkgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKT09bnVsbCB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDb25maXJtZWQpLnRvU3RyaW5nKCkuZXF1YWxzKCJObyIpKXsKICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKQogICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykgewogICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7CgogICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgbG9nLndhcm4gIklzc3VlIGNvbiByZWxhdGVzSW5Jc3N1ZUxpbmsiCiAgICAgICAgICAgIC8qRXNlZ3VpcmUgdHJhbnNhemlvbmUgZGkgc3RhdG8gZGVsbGEgc291cmNlSXNzdWUqLwogICAgICAgICAgICBkZWYgbGlua2VkSXNzdWUgPSBpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkKICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlU3RhdHVzID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzKCkKICAgICAgICAgICAgZGVmIHRyYW5zaXRpb25JZAogICAgICAgICAgICBpZihsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lID09IChwcm9wZXJ0aWVzWyd3Zi5hc3NpZ25lZFRvU3VwcGxpZXInXSA/IHByb3BlcnRpZXNbJ3dmLmFzc2lnbmVkVG9TdXBwbGllciddLnRvU3RyaW5nKCkgOiAiQXNzaWduZWQgVG8gU3VwcGxpZXIiKSl7CiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9QUNDRVBUCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYodHJhbnNpdGlvbklkPT1BQ0NFUFQpewogICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKQogICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7CiAgICAgICAgICAgICAgICAgICAgc2V0U2tpcFNjcmVlbkNoZWNrKHRydWUpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvL2RlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpCiAgICAgICAgICAgICAgICAvL0NvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICAvL2lzc3VlSW5wdXRQYXJhbWV0ZXJzLmFkZEN1c3RvbUZpZWxkVmFsdWUoZmllbGRDb25maWcuZ2V0SWQoKSwgIlllcyIpIAogICAgICAgICAgICAgICAgLy9sb2cud2FybiAiaXNzdWVJbnB1dFBhcmFtZXRlcnM6ICIgKyBpc3N1ZUlucHV0UGFyYW1ldGVycwogICAgICAgICAgICAgICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpCiAgICAgICAgICAgICAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBsaW5rZWRJc3N1ZQoKICAgICAgICAgICAgICAgIGRlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDb25maXJtZWQuZ2V0UmVsZXZhbnRDb25maWcobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICBsb2cud2FybiAiZmllbGRDb25maWc6ICIgKyBmaWVsZENvbmZpZwogICAgICAgICAgICAgICAgZGVmIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gIlllcyIgfQogICAgICAgICAgICAgICAgYXV0b21hdGljYWxseUNvbmZpcm1lZC51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q29uZmlybWVkKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSkKCiAgICAgICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7CiAgICAgICAgICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGxpbmtlZElzc3VlKQogICAgICAgICAgICAgICAgbG9nLndhcm4gIlVwZGF0ZWQgY3VzdG9tZmllbGQgLSBpc3N1ZSBsaW5rYXRhIgoKICAgICAgICAgICAgICAgIC8vZGVmIHZhbGlkYXRpb25SZXN1bHQgPSBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKQogICAgICAgICAgICAgICAgaWYgKGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb24KICAgICAgICAgICAgICAgICAgICBkZWYgaXNzdWVSZXN1bHQgPSBpc3N1ZVNlcnZpY2UudHJhbnNpdGlvbih1c2VyLCBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKSkKICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIkZhaWxlZCB0byB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSIpCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJUcmFuc2F6aW9uZSBmYXR0YSA3OSAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c30iKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIkNvdWxkIG5vdCB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuZXJyb3JDb2xsZWN0aW9ufSIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgTGlzdDxJc3N1ZUxpbms+IGFsbE91dElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSkKICAgIGZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbE91dElzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7CiAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTsKCiAgICAgICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICBsb2cud2FybiAiSXNzdWUgY29uIHJlbGF0ZXNPdXRJc3N1ZUxpbmsiCiAgICAgICAgICAgIC8qRXNlZ3VpcmUgdHJhbnNhemlvbmUgZGkgc3RhdG8gZGVsbGEgZGVzdGluYXRpb25Jc3N1ZSovCiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZSA9IGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpCiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZVN0YXR1cyA9IGxpbmtlZElzc3VlLmdldFN0YXR1cygpCiAgICAgICAgICAgIGRlZiB0cmFuc2l0aW9uSWQKICAgICAgICAgICAgbG9nLndhcm4gImxpbmtlZElzc3VlOiAiICsgbGlua2VkSXNzdWUKICAgICAgICAgICAgbG9nLndhcm4gImxpbmtlZElzc3VlU3RhdHVzLm5hbWU6ICIgKyBsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lCiAgICAgICAgICAgIGlmKGxpbmtlZElzc3VlU3RhdHVzLm5hbWUgPT0gKHByb3BlcnRpZXNbJ3dmLmFzc2lnbmVkVG9TdXBwbGllciddID8gcHJvcGVydGllc1snd2YuYXNzaWduZWRUb1N1cHBsaWVyJ10udG9TdHJpbmcoKSA6ICJBc3NpZ25lZCBUbyBTdXBwbGllciIpKXsKICAgICAgICAgICAgICAgIHRyYW5zaXRpb25JZD1BQ0NFUFQKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYodHJhbnNpdGlvbklkPT1BQ0NFUFQpewogICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKQogICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7CiAgICAgICAgICAgICAgICAgICAgc2V0U2tpcFNjcmVlbkNoZWNrKHRydWUpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvL2RlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpCiAgICAgICAgICAgICAgICAvL0NvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICAvL2lzc3VlSW5wdXRQYXJhbWV0ZXJzLmFkZEN1c3RvbUZpZWxkVmFsdWUoZmllbGRDb25maWcuZ2V0SWQoKSwgIlllcyIpIAoKICAgICAgICAgICAgICAgIGRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKQogICAgICAgICAgICAgICAgZGVmIG1pID0gKE11dGFibGVJc3N1ZSkgbGlua2VkSXNzdWUKCiAgICAgICAgICAgICAgICBkZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q29uZmlybWVkLmdldFJlbGV2YW50Q29uZmlnKGxpbmtlZElzc3VlKQogICAgICAgICAgICAgICAgbG9nLndhcm4gImZpZWxkQ29uZmlnOiAiICsgZmllbGRDb25maWcKICAgICAgICAgICAgICAgIGRlZiBjZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgIGF1dG9tYXRpY2FsbHlDb25maXJtZWQudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNvbmZpcm1lZCksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpCgogICAgICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpOwogICAgICAgICAgICAgICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgIGxvZy53YXJuICJVcGRhdGVkIGN1c3RvbWZpZWxkIC0gaXNzdWUgbGlua2F0YSIKCiAgICAgICAgICAgICAgICBpZiAoaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuaXNWYWxpZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgdHJhbnNpdGlvbgogICAgICAgICAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpKQogICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIlRyYW5zYXppb25lIGZhdHRhIDEyMiAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c30iKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIkNvdWxkIG5vdCB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuZXJyb3JDb2xsZWN0aW9ufSIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgfQogICAgfQp9</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE"></arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">c78e1ae3244cda5eddd8f7276fcd5db77569ce43</arg>
                  <arg name="FIELD_NOTES">YCFgT1A6IExpbmtlZCBUaWNrZXRzOiBjaGVjayBhbmQgbGluayByZWxhdGVkIGlzc3Vlcw==</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnlcbmltcG9ydCBncm9vdnkuanNvbi5Kc29uQnVpbGRlclxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29uZmlnLnV0aWwuSmlyYUhvbWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvblxuaW1wb3J0IGphdmEudGV4dC5TaW1wbGVEYXRlRm9ybWF0XG5pbXBvcnQgamF2YS50ZXh0LlBhcnNlRXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLnNlY3VyaXR5LkppcmFBdXRoZW50aWNhdGlvbkNvbnRleHRcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuYmMuaXNzdWUuSXNzdWVTZXJ2aWNlLklzc3VlUmVzdWx0XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmpxbC5wYXJzZXIuSnFsUXVlcnlQYXJzZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuYmMuaXNzdWUuc2VhcmNoLlNlYXJjaFNlcnZpY2VcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEudXNlci51dGlsLlVzZXJVdGlsXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLndlYi5iZWFuLlBhZ2VyRmlsdGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuTGlua0NvbGxlY3Rpb25JbXBsO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGluaztcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS51dGlsLkRlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlclxuXG5pbXBvcnQgZ3Jvb3Z5LnV0aWwubG9nZ2luZy5TbGY0alxuaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkNvbmN1cnJlbnRIYXNoTWFwXG5pbXBvcnQgamF2YXguYW5ub3RhdGlvbi5Qb3N0Q29uc3RydWN0XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5jYWNoZS5hbm5vdGF0aW9uLkNhY2hlYWJsZVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbi8qU2NyaXB0IFZhcmlhYmxlcyovXG4vL1BlciBQb3N0IEZ1bmN0aW9uXG5pc3N1ZSA9IGlzc3VlXG4vL1BlciB0ZXN0IGRhIGNvbnNvbGVcbi8vSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpXG4vL2lzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0yNDFcIilcblxuLypJbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzKi9cbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTsgIFxuQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XG5vYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XG5vYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuLyogR2V0IEluc2lnaHQgSVFMIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xuQ2xhc3MgaXFsRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuSVFMRmFjYWRlXCIpOyBcbmlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG5DbGFzcyBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuc2VydmljZXMubW9kZWwuZmFjdG9yeS5PYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeVwiKTtcbm9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MpO1xuLyogR2V0IEluc2lnaHQgT2JqZWN0IFR5cGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBvYmplY3RUeXBlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUZhY2FkZVwiKTsgXG5vYmplY3RUeXBlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVGYWNhZGVDbGFzcyk7XG5cbi8qQ3VzdG9tZmllbGRzKi9cbmRlZiBzdXBwbGllckNGID0gcHJvcGVydGllc1snY2Yuc3VwcGxpZXInXSA/IHByb3BlcnRpZXNbJ2NmLnN1cHBsaWVyJ10udG9TdHJpbmcoKSA6IFwiT1BfU1VQUExJRVJcIlxuZGVmIHN1cHBsaWVyRmllbGQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHN1cHBsaWVyQ0YpWzBdXG5kZWYgcGxhbm5lZERhdGUgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnBsYW5uZWREYXRlJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBzaXRlID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zaXRlJ10udG9TdHJpbmcoKSlbMF1cbmRlZiB3YnNQcmogPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLndic1ByaiddID8gcHJvcGVydGllc1snY2Yud2JzUHJqJ10udG9TdHJpbmcoKSA6IFwiT1BfV0JTX1BSSlwiKVswXVxubG9nLmRlYnVnIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc3VwcGxpZXJGaWVsZClcblxuSmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCBhdXRoQ29udGV4dCA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKVxuZGVmIGpxbFF1ZXJ5UGFyc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KEpxbFF1ZXJ5UGFyc2VyKVxuZGVmIHNlYXJjaFNlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoU2VhcmNoU2VydmljZSlcblVzZXJVdGlsIHVzZXJVdGlsID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0VXNlclV0aWwoKVxuZGVmIHVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5qaXJhQXV0aGVudGljYXRpb25Db250ZXh0LmxvZ2dlZEluVXNlclxuZGVmIHJlcXVlc3RNZXRob2RcbmRlZiBiYXNlVVJMXG5cbmRlZiBzdXBwbGllciA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc3VwcGxpZXJGaWVsZCkgPyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHN1cHBsaWVyRmllbGQpLmZpcnN0KCkudG9TdHJpbmcoKSA6IG51bGxcbmxvZy5kZWJ1ZyBcInN1cHBsaWVyOiBcIiArIHN1cHBsaWVyXG5cbmlmKHN1cHBsaWVyKXtcbiAgICAvL0xpbmsgaXNzdWVzIGFzc2lnbmVkIHRvIHRoZSBzYW1lIHZlbmRvclxuICAgIHN1cHBsaWVyID0gc3VwcGxpZXIuc3Vic3RyaW5nKDEsc3VwcGxpZXIuaW5kZXhPZignKCcpLTEpXG5cbiAgICBMaXN0PElzc3VlTGluaz4gYWxsSW5DdXJyZW50SXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpO1xuICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxPdXRDdXJyZW50SXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldE91dHdhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKTtcbiAgICBkZWYgYWxyZWFkeUxpbmtlZD1mYWxzZVxuXG4gICAgZGVmIGpxbFNlYXJjaCA9IFwicHJvamVjdCA9ICdcIiArIGlzc3VlLmdldFByb2plY3RPYmplY3QoKS5uYW1lICsgXCInIEFORCBpc3N1ZXR5cGUgPSAnXCIgKyBpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lICsgXCInIEFORCBrZXkgIT0gJ1wiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIicgQU5EICdPUF9TVVBQTElFUicgaW4gaXFsRnVuY3Rpb24oJ1wiICsgcHJvcGVydGllc1snaW9iai5zdXBwaW5zdC5zdXBwbGllclJlZiddLnRvU3RyaW5nKCkgKyBcIiBMSUtFIFxcXCJcIiArIHN1cHBsaWVyLnJlcGxhY2VBbGwoXCInXCIsXCJcXCdcIikgKyBcIlxcXCInKVwiICsgXCIgQU5EICdcIiArIHByb3BlcnRpZXNbJ2NmLnNpdGUnXS50b1N0cmluZygpICsgXCInID0gJ1wiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzaXRlKS5maXJzdCgpLnRvU3RyaW5nKCkucmVwbGFjZUFsbChcIidcIixcIlxcJ1wiKSArIFwiJyBBTkQgc3RhdHVzIElOICgnXCIgKyBwcm9wZXJ0aWVzWyd3Zi5hY2NlcHRlZEJ5U3VwcGxpZXInXS50b1N0cmluZygpICsgXCInKSBBTkQgXCIgKyAoaXNzdWUuaXNzdWVUeXBlLm5hbWUuZXF1YWxzKFwiTWFpbnRlbmFuY2UgVGlja2V0XCIpID8gKHByb3BlcnRpZXNbJ2NmLnBsYW5uZWREYXRlJ10udG9TdHJpbmcoKSArIFwiID49ICdcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocGxhbm5lZERhdGUpLmZvcm1hdChcInl5eXktTU0tZGQgSEg6bW1cIikgKyBcIicgQU5EIFwiICsgcHJvcGVydGllc1snY2YucGxhbm5lZERhdGUnXS50b1N0cmluZygpICsgXCIgPD0gJ1wiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbGFubmVkRGF0ZSkuZm9ybWF0KFwieXl5eS1NTS1kZFwiKS50b1N0cmluZygpICsgXCIgMjM6NTlcIiArIFwiJ1wiKSA6IChwcm9wZXJ0aWVzWydjZi53YnNQcmonXSA/IHByb3BlcnRpZXNbJ2NmLndic1ByaiddLnRvU3RyaW5nKCkgOiBcIk9QX1dCU19QUkpcIikgKyBcIiA9ICdcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUod2JzUHJqKSArIFwiJ1wiKVxuICAgIGxvZy5kZWJ1ZyBcInJpY2VyY2E6IFwiICsganFsU2VhcmNoXG4gICAgZGVmIHF1ZXJ5ID0ganFsUXVlcnlQYXJzZXIucGFyc2VRdWVyeShqcWxTZWFyY2gpXG4gICAgbG9nLmRlYnVnIFwicXVlcnk6IFwiICsgcXVlcnlcbiAgICBkZWYgc2VhcmNoID0gc2VhcmNoU2VydmljZS5zZWFyY2godXNlciwgcXVlcnksIFBhZ2VyRmlsdGVyLmdldFVubGltaXRlZEZpbHRlcigpKVxuICAgIGRlZiBmb3VuZD1mYWxzZVxuICAgIGRlZiBmb3VuZE91dHdhcmQ9ZmFsc2VcbiAgICBkZWYgbGlua2VkSXNzdWVcbiAgICBpZiAoc2VhcmNoLnJlc3VsdHMpIHtcdFxuICAgICAgICBmb3IgKGkgaW4gc2VhcmNoLnJlc3VsdHMuZmlyc3QoKSl7XG4gICAgICAgICAgICAvKlBlciBvZ25pIGlzc3VlIHJlc3RpdHVpdGEgZGFsbGEgcXVlcnkgSlFMIHZlcmlmaWNvIHNlIGhhIGdpXHUwMGUwIGRlaSBsaW5rIFJlbGF0ZXMgVG8qL1xuICAgICAgICAgICAgbG9nLmRlYnVnIGkua2V5XG5cbiAgICAgICAgICAgIGRlZiBpc3N1ZVNlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZVNlcnZpY2UoKVxuXG4gICAgICAgICAgICBMaXN0PElzc3VlTGluaz4gYWxsSW5Jc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0SW53YXJkTGlua3MoaS5nZXRJZCgpKTtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImFsbEluSXNzdWVMaW5rOiBcIiArIGFsbEluSXNzdWVMaW5rXG4gICAgICAgICAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxJbklzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgICAgICAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgICAgICAgICBkZWYgbGlua2VkSXNzdWVUZW1wID0gaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpXG4gICAgICAgICAgICAgICAgU3RyaW5nIHR5cGUgPSBsaW5rZWRJc3N1ZVRlbXAuZ2V0SXNzdWVUeXBlKCkuZ2V0TmFtZSgpO1xuXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiaXNzdWVsaW5rIFR5cGU6IFwiICsgaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwic291cmNlSXNzdWU6IFwiICsgaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiZGVzdGluYXRpb25Jc3N1ZTogXCIgKyBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKVxuXG4gICAgICAgICAgICAgICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkgJiYgaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpLmtleSE9aXNzdWUua2V5KXtcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidHJvdmF0byBpbldhcmRMaW5rIC0gcHJlbmRvIGxhIHNvdXJjZSBpc3N1ZSBcIiArIGxpbmtlZElzc3VlVGVtcCArIFwiIGUgbGEgbGVnbyBhbGxhIGlzc3VlIGNvcnJlbnRlIHNvbG8gc2Ugbm9uIFx1MDBlOCBnaVx1MDBlMCBsaW5rYXRhXCJcbiAgICAgICAgICAgICAgICAgICAgYWxyZWFkeUxpbmtlZD1mYWxzZVxuICAgICAgICAgICAgICAgICAgICBmb3IobGkgaW4gYWxsSW5DdXJyZW50SXNzdWVMaW5rKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGxpbmtlZElzc3VlVGVtcC5nZXRJZCgpID09IGxpLmdldFNvdXJjZU9iamVjdCgpLmdldElkKCkgfHwgbGlua2VkSXNzdWVUZW1wLmdldElkKCkgPT0gbGkuZ2V0RGVzdGluYXRpb25PYmplY3QoKS5nZXRJZCgpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHJlYWR5TGlua2VkPXRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmb3IobGkgaW4gYWxsT3V0Q3VycmVudElzc3VlTGluayl7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihsaW5rZWRJc3N1ZVRlbXAuZ2V0SWQoKSA9PSBsaS5nZXRTb3VyY2VPYmplY3QoKS5nZXRJZCgpIHx8IGxpbmtlZElzc3VlVGVtcC5nZXRJZCgpID09IGxpLmdldERlc3RpbmF0aW9uT2JqZWN0KCkuZ2V0SWQoKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxyZWFkeUxpbmtlZD10cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZm91bmQ9dHJ1ZVxuICAgICAgICAgICAgICAgICAgICBpZighYWxyZWFkeUxpbmtlZCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJub24gXHUwMGU4IGxpbmthdGEsIGxhIGxpbmtvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5jcmVhdGVJc3N1ZUxpbmsobGlua2VkSXNzdWVUZW1wLmdldElkKCksIGlzc3VlLmdldElkKCksIExvbmcucGFyc2VMb25nKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzSWQnXS50b1N0cmluZygpKSwgMSwgdXNlcik7IFxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBSRVNUIEFQSSBwZXIgcHVsaXppYSBjYWNoZSBpc3N1ZSBsaW5rYXRhICovXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0TWV0aG9kID0gXCJHRVRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qU2NyaXB0IFZhcmlhYmxlcyovXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1BlciB0ZXN0IGRhIGNvbnNvbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMzI1MzVcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL2NsZWFyQ2FjaGUvdGlja2V0a2V5L1wiICsgbGlua2VkSXNzdWVUZW1wLmtleVxuICAgICAgICAgICAgICAgICAgICAgICAgVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICAgICAgICAgICAgICAgICAgICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImdpXHUwMGUwIGxpbmthdGEsIG5vbiBsYSBsaW5rbyBkaSBudW92b1wiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGkuZ2V0SWQoKSk7XG4gICAgICAgICAgICBsb2cuZGVidWcgXCJhbGxPdXRJc3N1ZUxpbms6IFwiICsgYWxsT3V0SXNzdWVMaW5rXG4gICAgICAgICAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgICAgICAgICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG4gICAgICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlVGVtcCA9IGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpXG4gICAgICAgICAgICAgICAgU3RyaW5nIHR5cGUgPSBsaW5rZWRJc3N1ZVRlbXAuZ2V0SXNzdWVUeXBlKCkuZ2V0TmFtZSgpO1xuXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiaXNzdWVsaW5rIFR5cGU6IFwiICsgaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwic291cmNlSXNzdWU6IFwiICsgaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiZGVzdGluYXRpb25Jc3N1ZTogXCIgKyBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKVxuXG4gICAgICAgICAgICAgICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkgJiYgaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkua2V5IT1pc3N1ZS5rZXkpe1xuICAgICAgICAgICAgICAgICAgICBmb3VuZD10cnVlXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRyb3ZhdG8gb3V0V2FyZExpbmsgLSBwcmVuZG8gbGEgZGVzdGluYXRpb24gaXNzdWUgXCIgKyBsaW5rZWRJc3N1ZVRlbXAgKyBcIiBlIGxhIGxlZ28gYWxsYSBpc3N1ZSBjb3JyZW50ZSBzb2xvIHNlIG5vbiBcdTAwZTggZ2lcdTAwZTAgbGlua2F0YVwiXG5cbiAgICAgICAgICAgICAgICAgICAgYWxyZWFkeUxpbmtlZD1mYWxzZVxuICAgICAgICAgICAgICAgICAgICBmb3IobGkgaW4gYWxsSW5DdXJyZW50SXNzdWVMaW5rKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGxpbmtlZElzc3VlVGVtcC5nZXRJZCgpID09IGxpLmdldFNvdXJjZU9iamVjdCgpLmdldElkKCkgfHwgbGlua2VkSXNzdWVUZW1wLmdldElkKCkgPT0gbGkuZ2V0RGVzdGluYXRpb25PYmplY3QoKS5nZXRJZCgpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHJlYWR5TGlua2VkPXRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmb3IobGkgaW4gYWxsT3V0Q3VycmVudElzc3VlTGluayl7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihsaW5rZWRJc3N1ZVRlbXAuZ2V0SWQoKSA9PSBsaS5nZXRTb3VyY2VPYmplY3QoKS5nZXRJZCgpIHx8IGxpbmtlZElzc3VlVGVtcC5nZXRJZCgpID09IGxpLmdldERlc3RpbmF0aW9uT2JqZWN0KCkuZ2V0SWQoKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxyZWFkeUxpbmtlZD10cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZm91bmQ9dHJ1ZVxuICAgICAgICAgICAgICAgICAgICBpZighYWxyZWFkeUxpbmtlZCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJub24gXHUwMGU4IGxpbmthdGEsIGxhIGxpbmtvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5jcmVhdGVJc3N1ZUxpbmsoaXNzdWUuZ2V0SWQoKSwgbGlua2VkSXNzdWVUZW1wLmdldElkKCksIExvbmcucGFyc2VMb25nKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzSWQnXS50b1N0cmluZygpKSwgMSwgdXNlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFJFU1QgQVBJIHBlciBwdWxpemlhIGNhY2hlIGlzc3VlIGxpbmthdGEgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RNZXRob2QgPSBcIkdFVFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgLypTY3JpcHQgVmFyaWFibGVzKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vUGVyIHRlc3QgZGEgY29uc29sZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy0zMjUzNVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vY2xlYXJDYWNoZS90aWNrZXRrZXkvXCIgKyBsaW5rZWRJc3N1ZVRlbXAua2V5XG4gICAgICAgICAgICAgICAgICAgICAgICBVUkwgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgICAgICAgICAgICAgICAgICAgICAgSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImdpXHUwMGUwIGxpbmthdGEsIG5vbiBsYSBsaW5rbyBkaSBudW92b1wiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ZWxzZSBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSAmJiBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKS5rZXk9PWlzc3VlLmtleSl7XG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImlzc3VlIGdpXHUwMGUwIGxpbmthdGFcIlxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiQ3JlbyBsaW5rIHRyYSBsYSBpc3N1ZSBvZ2dldHRvIGRpIHRyYW5zaXRpb24gZSBsYSBpc3N1ZSByaXN1bHRhbnRlIGRhbCBmaWx0cm8gc2Ugbm9uIFx1MDBlOCBnaVx1MDBlMCBsaW5rYXRhXCJcbiAgICAgICAgICAgIGFscmVhZHlMaW5rZWQ9ZmFsc2VcbiAgICAgICAgICAgIGZvcihsaSBpbiBhbGxJbkN1cnJlbnRJc3N1ZUxpbmspe1xuICAgICAgICAgICAgICAgIGlmKGkuZ2V0SWQoKSA9PSBsaS5nZXRTb3VyY2VPYmplY3QoKS5nZXRJZCgpIHx8IGkuZ2V0SWQoKSA9PSBsaS5nZXREZXN0aW5hdGlvbk9iamVjdCgpLmdldElkKCkpe1xuICAgICAgICAgICAgICAgICAgICBhbHJlYWR5TGlua2VkPXRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IobGkgaW4gYWxsT3V0Q3VycmVudElzc3VlTGluayl7XG4gICAgICAgICAgICAgICAgaWYoaS5nZXRJZCgpID09IGxpLmdldFNvdXJjZU9iamVjdCgpLmdldElkKCkgfHwgaS5nZXRJZCgpID09IGxpLmdldERlc3RpbmF0aW9uT2JqZWN0KCkuZ2V0SWQoKSl7XG4gICAgICAgICAgICAgICAgICAgIGFscmVhZHlMaW5rZWQ9dHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKCFhbHJlYWR5TGlua2VkKXtcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJub24gXHUwMGU4IGxpbmthdGEsIGxhIGxpbmtvXCJcbiAgICAgICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuY3JlYXRlSXNzdWVMaW5rKGkuZ2V0SWQoKSwgaXNzdWUuZ2V0SWQoKSwgTG9uZy5wYXJzZUxvbmcocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXNJZCddLnRvU3RyaW5nKCkpLCAxLCB1c2VyKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvKiBSRVNUIEFQSSBwZXIgcHVsaXppYSBjYWNoZSBpc3N1ZSBsaW5rYXRhICovXG4gICAgICAgICAgICAgICAgcmVxdWVzdE1ldGhvZCA9IFwiR0VUXCI7XG4gICAgICAgICAgICAgICAgLypTY3JpcHQgVmFyaWFibGVzKi9cbiAgICAgICAgICAgICAgICAvL1BlciB0ZXN0IGRhIGNvbnNvbGVcbiAgICAgICAgICAgICAgICAvL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTMyNTM1XCIpXG4gICAgICAgICAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vY2xlYXJDYWNoZS90aWNrZXRrZXkvXCIgKyBpLmtleVxuICAgICAgICAgICAgICAgIFVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgICAgICAgICAgSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiZ2lcdTAwZTAgbGlua2F0YSwgbm9uIGxhIGxpbmtvIGRpIG51b3ZvXCJcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgIH1cblxuICAgIH0gZWxzZSB7XG4gICAgICAgIGxvZy5lcnJvcihcIkludmFsaWQgSlFMOiBcIiArIGpxbFNlYXJjaCk7XG4gICAgfSBcbn1lbHNle1xuICAgIC8vaG93IHRvIGxpbmsgaXNzdWVzIGFzc2lnbmVkIHRvIHRoZSBzYW1lIGludGVybmFsIHRlY2hzPyBkbyB3ZSB3YW50IHRvIGRvIGl0P1xufVxuIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZQppbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb24KaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3IKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXIKaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyCmltcG9ydCBncm9vdnkuanNvbi5Kc29uU2x1cnBlcgppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb25maWcudXRpbC5KaXJhSG9tZQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvbgppbXBvcnQgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQKaW1wb3J0IGphdmEudGV4dC5QYXJzZUV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLnNlY3VyaXR5LkppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5iYy5pc3N1ZS5Jc3N1ZVNlcnZpY2UuSXNzdWVSZXN1bHQKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5qcWwucGFyc2VyLkpxbFF1ZXJ5UGFyc2VyCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuYmMuaXNzdWUuc2VhcmNoLlNlYXJjaFNlcnZpY2UKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS51c2VyLnV0aWwuVXNlclV0aWwKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS53ZWIuYmVhbi5QYWdlckZpbHRlcgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuTGlua0NvbGxlY3Rpb25JbXBsOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWUKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS51dGlsLkRlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcgoKaW1wb3J0IGdyb292eS51dGlsLmxvZ2dpbmcuU2xmNGoKaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkNvbmN1cnJlbnRIYXNoTWFwCmltcG9ydCBqYXZheC5hbm5vdGF0aW9uLlBvc3RDb25zdHJ1Y3QKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuY2FjaGUuYW5ub3RhdGlvbi5DYWNoZWFibGUKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXIKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsCgpQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpCkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpCnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7Cglwcm9wZXJ0aWVzLmxvYWQoaXQpCn0KZGVmIENhdGVnb3J5IGxvZyA9IENhdGVnb3J5LmdldEluc3RhbmNlKCJjb20ub25yZXNvbHZlLmppcmEuZ3Jvb3Z5LlBvc3RGdW5jdGlvbiIpCmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKQoKLypTY3JpcHQgVmFyaWFibGVzKi8KLy9QZXIgUG9zdCBGdW5jdGlvbgppc3N1ZSA9IGlzc3VlCi8vUGVyIHRlc3QgZGEgY29uc29sZQovL0lzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKQovL2lzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKCJPUFVULTI0MSIpCgovKkluc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHMqLwpDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZSIpOyAgCkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUiKTsKb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpOwpvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpOwovKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovCkNsYXNzIGlxbEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuSVFMRmFjYWRlIik7IAppcWxGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUoaXFsRmFjYWRlQ2xhc3MpOwpDbGFzcyBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5zZXJ2aWNlcy5tb2RlbC5mYWN0b3J5Lk9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Iik7Cm9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MpOwovKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi8KQ2xhc3Mgb2JqZWN0VHlwZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUZhY2FkZSIpOyAKb2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpOwoKLypDdXN0b21maWVsZHMqLwpkZWYgc3VwcGxpZXJJbnN0YWxsYXRpb24gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnN1cHBsaWVyUmVwYWlyJ10udG9TdHJpbmcoKSlbMF0KZGVmIHN1cHBsaWVyTmV3SW5zdGFsbGF0aW9uID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zdXBwbGllck5ld0luc3RhbGxhdGlvbiddLnRvU3RyaW5nKCkpWzBdCmRlZiBwbGFubmVkRGF0ZSA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YucGxhbm5lZERhdGUnXS50b1N0cmluZygpKVswXQpkZWYgc2l0ZSA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yuc2l0ZSddLnRvU3RyaW5nKCkpWzBdCmRlZiB3YnNQcmogPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLndic1ByaiddID8gcHJvcGVydGllc1snY2Yud2JzUHJqJ10udG9TdHJpbmcoKSA6ICJPUF9XQlNfUFJKIilbMF0KbG9nLmRlYnVnIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc3VwcGxpZXJJbnN0YWxsYXRpb24pCgpKaXJhQXV0aGVudGljYXRpb25Db250ZXh0IGF1dGhDb250ZXh0ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpCmRlZiBqcWxRdWVyeVBhcnNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChKcWxRdWVyeVBhcnNlcikKZGVmIHNlYXJjaFNlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoU2VhcmNoU2VydmljZSkKVXNlclV0aWwgdXNlclV0aWwgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRVc2VyVXRpbCgpCmRlZiB1c2VyID0gQ29tcG9uZW50QWNjZXNzb3IuamlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dC5sb2dnZWRJblVzZXIKCmRlZiBzdXBwbGllciA9IChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHN1cHBsaWVySW5zdGFsbGF0aW9uKSA/IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc3VwcGxpZXJJbnN0YWxsYXRpb24pLmZpcnN0KCkudG9TdHJpbmcoKSA6IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc3VwcGxpZXJOZXdJbnN0YWxsYXRpb24pLmZpcnN0KCkudG9TdHJpbmcoKSkKbG9nLmRlYnVnICJzdXBwbGllcjogIiArIHN1cHBsaWVyCnN1cHBsaWVyID0gc3VwcGxpZXIuc3Vic3RyaW5nKDEsc3VwcGxpZXIuaW5kZXhPZignKCcpLTEpCgpMaXN0PElzc3VlTGluaz4gYWxsSW5DdXJyZW50SXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpOwpMaXN0PElzc3VlTGluaz4gYWxsT3V0Q3VycmVudElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSk7CmRlZiBhbHJlYWR5TGlua2VkPWZhbHNlCgpkZWYganFsU2VhcmNoID0gInByb2plY3QgPSAnIiArIGlzc3VlLmdldFByb2plY3RPYmplY3QoKS5uYW1lICsgIicgQU5EIGlzc3VldHlwZSA9ICciICsgaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZSArICInIEFORCBrZXkgIT0gJyIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArICInIEFORCAnIiArIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHN1cHBsaWVySW5zdGFsbGF0aW9uKSA/IHByb3BlcnRpZXNbJ2NmLnN1cHBsaWVyUmVwYWlyJ10udG9TdHJpbmcoKSA6IHByb3BlcnRpZXNbJ2NmLnN1cHBsaWVyTmV3SW5zdGFsbGF0aW9uJ10udG9TdHJpbmcoKSkgKyAiJyBpbiBpcWxGdW5jdGlvbignIiArIHByb3BlcnRpZXNbJ2lvYmouc3VwcGluc3Quc3VwcGxpZXJSZWYnXS50b1N0cmluZygpICsgIiBMSUtFIFwiIiArIHN1cHBsaWVyLnJlcGxhY2VBbGwoIiciLCJcJyIpICsgIlwiJykiICsgIiBBTkQgJyIgKyBwcm9wZXJ0aWVzWydjZi5zaXRlJ10udG9TdHJpbmcoKSArICInID0gJyIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNpdGUpLmZpcnN0KCkudG9TdHJpbmcoKS5yZXBsYWNlQWxsKCInIiwiXCciKSArICInIEFORCBzdGF0dXMgSU4gKCciICsgcHJvcGVydGllc1snd2YuYWNjZXB0ZWRCeVN1cHBsaWVyJ10udG9TdHJpbmcoKSArICInKSBBTkQgIiArIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHN1cHBsaWVySW5zdGFsbGF0aW9uKSA/IChwcm9wZXJ0aWVzWydjZi5wbGFubmVkRGF0ZSddLnRvU3RyaW5nKCkgKyAiID49ICciICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbGFubmVkRGF0ZSkuZm9ybWF0KCJ5eXl5LU1NLWRkIEhIOm1tIikgKyAiJyBBTkQgIiArIHByb3BlcnRpZXNbJ2NmLnBsYW5uZWREYXRlJ10udG9TdHJpbmcoKSArICIgPD0gJyIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBsYW5uZWREYXRlKS5mb3JtYXQoInl5eXktTU0tZGQiKS50b1N0cmluZygpICsgIiAyMzo1OSIgKyAiJyIpIDogKHByb3BlcnRpZXNbJ2NmLndic1ByaiddID8gcHJvcGVydGllc1snY2Yud2JzUHJqJ10udG9TdHJpbmcoKSA6ICJPUF9XQlNfUFJKIikgKyAiID0gJyIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHdic1ByaikgKyAiJyIpCmxvZy5kZWJ1ZyAicmljZXJjYTogIiArIGpxbFNlYXJjaApkZWYgcXVlcnkgPSBqcWxRdWVyeVBhcnNlci5wYXJzZVF1ZXJ5KGpxbFNlYXJjaCkKbG9nLmRlYnVnICJxdWVyeTogIiArIHF1ZXJ5CmRlZiBzZWFyY2ggPSBzZWFyY2hTZXJ2aWNlLnNlYXJjaCh1c2VyLCBxdWVyeSwgUGFnZXJGaWx0ZXIuZ2V0VW5saW1pdGVkRmlsdGVyKCkpCmRlZiBmb3VuZD1mYWxzZQpkZWYgZm91bmRPdXR3YXJkPWZhbHNlCmRlZiBsaW5rZWRJc3N1ZQppZiAoc2VhcmNoLnJlc3VsdHMpIHsJCiAgICBmb3IgKGkgaW4gc2VhcmNoLnJlc3VsdHMpewogICAgICAgIC8qUGVyIG9nbmkgaXNzdWUgcmVzdGl0dWl0YSBkYWxsYSBxdWVyeSBKUUwgdmVyaWZpY28gc2UgaGEgZ2nDoCBkZWkgbGluayBSZWxhdGVzIFRvKi8KICAgICAgICBsb2cuZGVidWcgaS5rZXkKCiAgICAgICAgZGVmIGlzc3VlU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlU2VydmljZSgpCgogICAgICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpLmdldElkKCkpOwogICAgICAgIGxvZy5kZWJ1ZyAiYWxsSW5Jc3N1ZUxpbms6ICIgKyBhbGxJbklzc3VlTGluawogICAgICAgIGZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbEluSXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHsKICAgICAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTsKICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlVGVtcCA9IGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKQogICAgICAgICAgICBTdHJpbmcgdHlwZSA9IGxpbmtlZElzc3VlVGVtcC5nZXRJc3N1ZVR5cGUoKS5nZXROYW1lKCk7CgogICAgICAgICAgICBsb2cuZGVidWcgImlzc3VlbGluayBUeXBlOiAiICsgaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpCgkJCWxvZy5kZWJ1ZyAic291cmNlSXNzdWU6ICIgKyBpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkKICAgICAgICAgICAgbG9nLmRlYnVnICJkZXN0aW5hdGlvbklzc3VlOiAiICsgaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpICYmIGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKS5rZXkhPWlzc3VlLmtleSl7CiAgICAgICAgICAgICAgICBsb2cuZGVidWcgInRyb3ZhdG8gaW5XYXJkTGluayAtIHByZW5kbyBsYSBzb3VyY2UgaXNzdWUgIiArIGxpbmtlZElzc3VlVGVtcCArICIgZSBsYSBsZWdvIGFsbGEgaXNzdWUgY29ycmVudGUgc29sbyBzZSBub24gw6ggZ2nDoCBsaW5rYXRhIgogICAgICAgICAgICAgICAgYWxyZWFkeUxpbmtlZD1mYWxzZQogICAgICAgICAgICAgICAgZm9yKGxpIGluIGFsbEluQ3VycmVudElzc3VlTGluayl7CiAgICAgICAgICAgICAgICAgICAgaWYobGlua2VkSXNzdWVUZW1wLmdldElkKCkgPT0gbGkuZ2V0U291cmNlT2JqZWN0KCkuZ2V0SWQoKSB8fCBsaW5rZWRJc3N1ZVRlbXAuZ2V0SWQoKSA9PSBsaS5nZXREZXN0aW5hdGlvbk9iamVjdCgpLmdldElkKCkpewogICAgICAgICAgICAgICAgICAgICAgICBhbHJlYWR5TGlua2VkPXRydWUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBmb3IobGkgaW4gYWxsT3V0Q3VycmVudElzc3VlTGluayl7CiAgICAgICAgICAgICAgICAgICAgaWYobGlua2VkSXNzdWVUZW1wLmdldElkKCkgPT0gbGkuZ2V0U291cmNlT2JqZWN0KCkuZ2V0SWQoKSB8fCBsaW5rZWRJc3N1ZVRlbXAuZ2V0SWQoKSA9PSBsaS5nZXREZXN0aW5hdGlvbk9iamVjdCgpLmdldElkKCkpewogICAgICAgICAgICAgICAgICAgICAgICBhbHJlYWR5TGlua2VkPXRydWUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBmb3VuZD10cnVlCiAgICAgICAgICAgICAgICBpZighYWxyZWFkeUxpbmtlZCl7CiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnICJub24gw6ggbGlua2F0YSwgbGEgbGlua28iCiAgICAgICAgICAgICAgICAgCUNvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5jcmVhdGVJc3N1ZUxpbmsobGlua2VkSXNzdWVUZW1wLmdldElkKCksIGlzc3VlLmdldElkKCksIExvbmcucGFyc2VMb25nKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzSWQnXS50b1N0cmluZygpKSwgMSwgdXNlcik7ICAgCiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgImdpw6AgbGlua2F0YSwgbm9uIGxhIGxpbmtvIGRpIG51b3ZvIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGkuZ2V0SWQoKSk7CiAgICAgICAgbG9nLmRlYnVnICJhbGxPdXRJc3N1ZUxpbms6ICIgKyBhbGxPdXRJc3N1ZUxpbmsKICAgICAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykgewogICAgICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpOwogICAgICAgICAgICBkZWYgbGlua2VkSXNzdWVUZW1wID0gaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkKICAgICAgICAgICAgU3RyaW5nIHR5cGUgPSBsaW5rZWRJc3N1ZVRlbXAuZ2V0SXNzdWVUeXBlKCkuZ2V0TmFtZSgpOwoKICAgICAgICAgICAgbG9nLmRlYnVnICJpc3N1ZWxpbmsgVHlwZTogIiArIGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKQoJCQlsb2cuZGVidWcgInNvdXJjZUlzc3VlOiAiICsgaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpCiAgICAgICAgICAgIGxvZy5kZWJ1ZyAiZGVzdGluYXRpb25Jc3N1ZTogIiArIGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpCiAgICAgICAgICAgIAogICAgICAgICAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSAmJiBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKS5rZXkhPWlzc3VlLmtleSl7CiAgICAgICAgICAgICAgICBmb3VuZD10cnVlCiAgICAgICAgICAgICAgICBsb2cuZGVidWcgInRyb3ZhdG8gb3V0V2FyZExpbmsgLSBwcmVuZG8gbGEgZGVzdGluYXRpb24gaXNzdWUgIiArIGxpbmtlZElzc3VlVGVtcCArICIgZSBsYSBsZWdvIGFsbGEgaXNzdWUgY29ycmVudGUgc29sbyBzZSBub24gw6ggZ2nDoCBsaW5rYXRhIgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBhbHJlYWR5TGlua2VkPWZhbHNlCiAgICAgICAgICAgICAgICBmb3IobGkgaW4gYWxsSW5DdXJyZW50SXNzdWVMaW5rKXsKICAgICAgICAgICAgICAgICAgICBpZihsaW5rZWRJc3N1ZVRlbXAuZ2V0SWQoKSA9PSBsaS5nZXRTb3VyY2VPYmplY3QoKS5nZXRJZCgpIHx8IGxpbmtlZElzc3VlVGVtcC5nZXRJZCgpID09IGxpLmdldERlc3RpbmF0aW9uT2JqZWN0KCkuZ2V0SWQoKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGFscmVhZHlMaW5rZWQ9dHJ1ZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZvcihsaSBpbiBhbGxPdXRDdXJyZW50SXNzdWVMaW5rKXsKICAgICAgICAgICAgICAgICAgICBpZihsaW5rZWRJc3N1ZVRlbXAuZ2V0SWQoKSA9PSBsaS5nZXRTb3VyY2VPYmplY3QoKS5nZXRJZCgpIHx8IGxpbmtlZElzc3VlVGVtcC5nZXRJZCgpID09IGxpLmdldERlc3RpbmF0aW9uT2JqZWN0KCkuZ2V0SWQoKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGFscmVhZHlMaW5rZWQ9dHJ1ZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZvdW5kPXRydWUKICAgICAgICAgICAgICAgIGlmKCFhbHJlYWR5TGlua2VkKXsKICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgIm5vbiDDqCBsaW5rYXRhLCBsYSBsaW5rbyIKICAgICAgICAgICAgICAgICAJQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmNyZWF0ZUlzc3VlTGluayhpc3N1ZS5nZXRJZCgpLCBsaW5rZWRJc3N1ZVRlbXAuZ2V0SWQoKSwgTG9uZy5wYXJzZUxvbmcocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXNJZCddLnRvU3RyaW5nKCkpLCAxLCB1c2VyKTsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyAiZ2nDoCBsaW5rYXRhLCBub24gbGEgbGlua28gZGkgbnVvdm8iCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH1lbHNlIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpICYmIGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpLmtleT09aXNzdWUua2V5KXsKICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyAiaXNzdWUgZ2nDoCBsaW5rYXRhIgogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgbG9nLmRlYnVnICJDcmVvIGxpbmsgdHJhIGxhIGlzc3VlIG9nZ2V0dG8gZGkgdHJhbnNpdGlvbiBlIGxhIGlzc3VlIHJpc3VsdGFudGUgZGFsIGZpbHRybyBzZSBub24gw6ggZ2nDoCBsaW5rYXRhIgogICAgICAgIGFscmVhZHlMaW5rZWQ9ZmFsc2UKICAgICAgICBmb3IobGkgaW4gYWxsSW5DdXJyZW50SXNzdWVMaW5rKXsKICAgICAgICAgICAgaWYoaS5nZXRJZCgpID09IGxpLmdldFNvdXJjZU9iamVjdCgpLmdldElkKCkgfHwgaS5nZXRJZCgpID09IGxpLmdldERlc3RpbmF0aW9uT2JqZWN0KCkuZ2V0SWQoKSl7CiAgICAgICAgICAgICAgICBhbHJlYWR5TGlua2VkPXRydWUKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmb3IobGkgaW4gYWxsT3V0Q3VycmVudElzc3VlTGluayl7CiAgICAgICAgICAgIGlmKGkuZ2V0SWQoKSA9PSBsaS5nZXRTb3VyY2VPYmplY3QoKS5nZXRJZCgpIHx8IGkuZ2V0SWQoKSA9PSBsaS5nZXREZXN0aW5hdGlvbk9iamVjdCgpLmdldElkKCkpewogICAgICAgICAgICAgICAgYWxyZWFkeUxpbmtlZD10cnVlCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYoIWFscmVhZHlMaW5rZWQpewogICAgICAgICAgICBsb2cuZGVidWcgIm5vbiDDqCBsaW5rYXRhLCBsYSBsaW5rbyIKICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmNyZWF0ZUlzc3VlTGluayhpLmdldElkKCksIGlzc3VlLmdldElkKCksIExvbmcucGFyc2VMb25nKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzSWQnXS50b1N0cmluZygpKSwgMSwgdXNlcik7CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGxvZy5kZWJ1ZyAiZ2nDoCBsaW5rYXRhLCBub24gbGEgbGlua28gZGkgbnVvdm8iCiAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgIAogICAgfQogICAgCn0gZWxzZSB7CiAgICBsb2cuZXJyb3IoIkludmFsaWQgSlFMOiAiICsganFsU2VhcmNoKTsKfSA=</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE"></arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">a6604d0a-af28-40f6-84ec-7a2dc32df2b0</arg>
                  <arg name="FIELD_NOTES">YCFgT1AgRW1haWwgTm90aWZpY2F0aW9uOiBBQ0NFUFRFRF9CWV9TVVBQTElFUiAtIG1hbnRlbnV0YSBjb21lIHBvc3QgZnVuY3Rpb24gcGVyIGV2aXRhcmUgZGkgZ2VuZXJhcmUgYmxvY2NoaSBhbCBmb3JuaXRvcmUgbGVnYXRpIGFsbCdpbnZpbyBkaSBub3RpZmljaGUgaW50ZXJuZQ==</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnlcbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuZGVmIHJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuXG5kZWYgYm9keV9yZXEgPSBbXG5cdFwidGVtcGxhdGVOYW1lXCI6IHByb3BlcnRpZXNbJ3R0LmFjY2VwdGVkQnlTdXBwbGllciddLnRvU3RyaW5nKCksXG5cdFwicGVjXCI6IGZhbHNlLFxuICAgIFwiaXNzdWVLZXlcIjogaXNzdWUua2V5XG5dXG5cbmRlZiBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS90cmFuc2FjdGlvbi9tYWlsL3NlbmRcIlxuVVJMIHVybFxudXJsID0gbmV3IFVSTChiYXNlVVJMKVxuXG5IdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbmNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG5jb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG5jb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxubG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5jb25uZWN0aW9uLmNvbm5lY3QoKTtcblxubG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxubG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxubG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxubG9nLmRlYnVnIFwiZ2V0UmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuXG4iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CkNhdGVnb3J5IGxvZyA9IENhdGVnb3J5LmdldEluc3RhbmNlKCJjb20ub25yZXNvbHZlLmppcmEuZ3Jvb3Z5LlBvc3RGdW5jdGlvbiIpCmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKQppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQpkZWYgcmVxdWVzdE1ldGhvZCA9ICJQT1NUIjsKCklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTsKQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpOwoKZGVmIGJvZHlfcmVxID0gWwoJInRlbXBsYXRlTmFtZSI6IHByb3BlcnRpZXNbJ3R0LmFjY2VwdGVkQnlTdXBwbGllciddLnRvU3RyaW5nKCksCgkicGVjIjogZmFsc2UsCiAgICAiaXNzdWVLZXkiOiBpc3N1ZS5rZXkKXQoKZGVmIGJhc2VVUkwgPSAiaHR0cDovLyIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArICIvb3AvcmVzdC9qaXJhL0FBL3RyYW5zYWN0aW9uL21haWwvc2VuZCIKVVJMIHVybAp1cmwgPSBuZXcgVVJMKGJhc2VVUkwpCgpIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpOwpjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7CmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04Iik7CmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KCJBY2NlcHQiLCAiKi8qIik7CmNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7CmNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTsKY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0KY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcigiVVRGLTgiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH0KbG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtCmNvbm5lY3Rpb24uY29ubmVjdCgpOwoKbG9nLmRlYnVnICJ1cmw6ICIgKyB1cmwKbG9nLmRlYnVnICJSZXNwb25zZUNvZGU6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkKbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKbG9nLmRlYnVnICJnZXRSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKCg==</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="1041" name="Modifica Pianificazione" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">20113</meta>
          <results>
            <unconditional-result old-status="null" status="null" step="19">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="1051" name="Clona Tkt" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">20401</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">c659704c-9678-4844-9a05-6f3497e391e7</arg>
                <arg name="FIELD_NOTES">YCFgRW5hYmxlZCBvbmx5IGZvciBSZXBhaXIgYW5kIE5ldyBJbnN0YWxsYXRpb24=</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnTWFpbnRlbmFuY2UgVGlja2V0JyB8fCAoaXNzdWUuaXNzdWVUeXBlLm5hbWUgPT0gJ05ldyBJbnN0YWxsYXRpb24nICYmIGNmVmFsdWVzWydPUF9BU1NFVCddICE9IG51bGwpIiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="19">
              <post-functions>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="fieldValue">New Installation</arg>
                  <arg name="preconditionMode-textValue">DISCARD</arg>
                  <arg name="fieldsList">issuetype</arg>
                </function>
                <function type="class">
                  <arg name="field.existingAttachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="targetIssueTypeDefinedByCfSelection"></arg>
                  <arg name="issueTypeId">12301</arg>
                  <arg name="scopeType">ISSUE_LINKING</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="field.attachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="targetIssueType">SELECTED_ISSUE_TYPE</arg>
                  <arg name="scopeSource-jql"></arg>
                  <arg name="createIssueAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.copyTransitionComment">false</arg>
                  <arg name="targetProjectType">SAME</arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="transitionAttachmentsOperation">copy</arg>
                  <arg name="field.issueAssignTo">ASSIGN_TO_UNASSIGNED</arg>
                  <arg name="targetProjectSelectedCustomField"></arg>
                  <arg name="destination-scopeTarget">LINK_END</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiescreatelinkedissue-function</arg>
                  <arg name="scopeDestination-linkEnd">10003:OUTWARD</arg>
                  <arg name="field.enablingCustomFieldId"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="subFunctions">[{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_21909&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21909&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22600&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22600&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22822&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22822&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22601&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22601&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22603&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22603&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22663&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22663&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22634&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22634&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22651&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22651&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22700&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22700&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22606&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22606&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22607&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22607&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22629&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22629&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22652&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22652&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;description&quot;,&quot;destinationFieldId&quot;:&quot;description&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22627&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22627&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22620&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22620&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22668&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22668&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23602&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23203&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22814&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22814&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23237&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23237&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;issuekey&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23243&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;YES&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23238&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22702&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22702&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22703&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22703&quot;}}]</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.createlinkedissue.CreateLinkedIssueFunction</arg>
                  <arg name="projectId">11228</arg>
                </function>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="fieldValue">Maintenance Ticket</arg>
                  <arg name="preconditionMode-textValue">DISCARD</arg>
                  <arg name="fieldsList">issuetype</arg>
                </function>
                <function type="class">
                  <arg name="field.existingAttachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="targetIssueTypeDefinedByCfSelection"></arg>
                  <arg name="issueTypeId">13001</arg>
                  <arg name="scopeType">ISSUE_LINKING</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="field.attachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="targetIssueType">SELECTED_ISSUE_TYPE</arg>
                  <arg name="scopeSource-jql"></arg>
                  <arg name="createIssueAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.copyTransitionComment">false</arg>
                  <arg name="targetProjectType">SAME</arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="transitionAttachmentsOperation">copy</arg>
                  <arg name="field.issueAssignTo">ASSIGN_TO_UNASSIGNED</arg>
                  <arg name="targetProjectSelectedCustomField"></arg>
                  <arg name="destination-scopeTarget">LINK_END</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiescreatelinkedissue-function</arg>
                  <arg name="scopeDestination-linkEnd">10003:OUTWARD</arg>
                  <arg name="field.enablingCustomFieldId"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="subFunctions">[{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_21909&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21909&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22600&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22600&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22822&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22822&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22601&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22601&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22603&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22603&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22663&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22663&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22634&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22634&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22651&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22651&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22700&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22700&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22606&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22606&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22607&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22607&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22629&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22629&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22652&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22652&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;description&quot;,&quot;destinationFieldId&quot;:&quot;description&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22627&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22627&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22620&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22620&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22668&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22668&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23602&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23203&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22814&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22814&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23237&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23237&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;issuekey&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23243&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;YES&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23238&quot;}}]</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.createlinkedissue.CreateLinkedIssueFunction</arg>
                  <arg name="projectId">11228</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_23602</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="20" name="Accepted by Technician">
      <meta name="jira.status.id">14928</meta>
      <actions>
<common-action id="111" />
<common-action id="101" />
<common-action id="91" />
<common-action id="121" />
<common-action id="931" />
        <action id="881" name="Clona Tkt" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">20401</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">c659704c-9678-4844-9a05-6f3497e391e7</arg>
                <arg name="FIELD_NOTES">YCFgRW5hYmxlZCBvbmx5IGZvciBSZXBhaXIgYW5kIE5ldyBJbnN0YWxsYXRpb24=</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnTWFpbnRlbmFuY2UgVGlja2V0JyB8fCAoaXNzdWUuaXNzdWVUeXBlLm5hbWUgPT0gJ05ldyBJbnN0YWxsYXRpb24nICYmIGNmVmFsdWVzWydPUF9BU1NFVCddICE9IG51bGwpIiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="20">
              <post-functions>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="fieldValue">New Installation</arg>
                  <arg name="preconditionMode-textValue">DISCARD</arg>
                  <arg name="fieldsList">issuetype</arg>
                </function>
                <function type="class">
                  <arg name="field.existingAttachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="targetIssueTypeDefinedByCfSelection"></arg>
                  <arg name="issueTypeId">12301</arg>
                  <arg name="scopeType">ISSUE_LINKING</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="field.attachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="targetIssueType">SELECTED_ISSUE_TYPE</arg>
                  <arg name="scopeSource-jql"></arg>
                  <arg name="createIssueAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.copyTransitionComment">false</arg>
                  <arg name="targetProjectType">SAME</arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="transitionAttachmentsOperation">copy</arg>
                  <arg name="field.issueAssignTo">ASSIGN_TO_UNASSIGNED</arg>
                  <arg name="targetProjectSelectedCustomField"></arg>
                  <arg name="destination-scopeTarget">LINK_END</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiescreatelinkedissue-function</arg>
                  <arg name="scopeDestination-linkEnd">10003:OUTWARD</arg>
                  <arg name="field.enablingCustomFieldId"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="subFunctions">[{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_21909&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21909&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22600&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22600&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22822&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22822&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22601&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22601&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22603&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22603&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22663&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22663&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22634&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22634&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22651&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22651&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22700&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22700&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22606&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22606&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22607&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22607&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22629&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22629&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22652&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22652&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;description&quot;,&quot;destinationFieldId&quot;:&quot;description&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22627&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22627&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22620&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22620&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22668&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22668&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23602&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23203&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22814&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22814&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23237&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23237&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;issuekey&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23243&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;YES&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23238&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22702&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22702&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22703&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22703&quot;}}]</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.createlinkedissue.CreateLinkedIssueFunction</arg>
                  <arg name="projectId">11228</arg>
                </function>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="fieldValue">Maintenance Ticket</arg>
                  <arg name="preconditionMode-textValue">DISCARD</arg>
                  <arg name="fieldsList">issuetype</arg>
                </function>
                <function type="class">
                  <arg name="field.existingAttachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="targetIssueTypeDefinedByCfSelection"></arg>
                  <arg name="issueTypeId">13001</arg>
                  <arg name="scopeType">ISSUE_LINKING</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="field.attachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="targetIssueType">SELECTED_ISSUE_TYPE</arg>
                  <arg name="scopeSource-jql"></arg>
                  <arg name="createIssueAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.copyTransitionComment">false</arg>
                  <arg name="targetProjectType">SAME</arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="transitionAttachmentsOperation">copy</arg>
                  <arg name="field.issueAssignTo">ASSIGN_TO_UNASSIGNED</arg>
                  <arg name="targetProjectSelectedCustomField"></arg>
                  <arg name="destination-scopeTarget">LINK_END</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiescreatelinkedissue-function</arg>
                  <arg name="scopeDestination-linkEnd">10003:OUTWARD</arg>
                  <arg name="field.enablingCustomFieldId"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="subFunctions">[{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_21909&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21909&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22600&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22600&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22822&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22822&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22601&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22601&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22603&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22603&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22663&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22663&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22634&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22634&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22651&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22651&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22700&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22700&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22606&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22606&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22607&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22607&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22629&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22629&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22652&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22652&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;description&quot;,&quot;destinationFieldId&quot;:&quot;description&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22627&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22627&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22620&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22620&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22668&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22668&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23602&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23203&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22814&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22814&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23237&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23237&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;issuekey&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23243&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;YES&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23238&quot;}}]</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.createlinkedissue.CreateLinkedIssueFunction</arg>
                  <arg name="projectId">11228</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_23602</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="891" name="Modifica Pianificazione" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">20113</meta>
          <results>
            <unconditional-result old-status="null" status="null" step="20">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="21" name="Traveling">
      <meta name="jira.status.id">14929</meta>
      <actions>
        <action id="941" name="End Traveling">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <results>
            <unconditional-result old-status="null" status="null" step="22">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="22" name="Technician OnSite">
      <meta name="jira.status.id">14930</meta>
      <actions>
        <action id="1061" name="Start Working">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <results>
            <unconditional-result old-status="null" status="null" step="25">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="23" name="Asset Confirmed">
      <meta name="jira.status.id">14931</meta>
      <actions>
<common-action id="111" />
      </actions>
    </step>
    <step id="24" name="Finalizing Work">
      <meta name="jira.status.id">14932</meta>
      <actions>
        <action id="981" name="Chiudi Rapporto di Intervento" view="fieldscreen">
          <meta name="opsbar-sequence">10</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">19910</meta>
          <restrict-to>
            <conditions type="OR">
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">e11c2942-0754-423c-8e92-d78a6375f221</arg>
                <arg name="FIELD_NOTES">YCFgTk9UIFBNIFRpY2tldA==</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="disabled">true</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5pc3N1ZVR5cGUubmFtZSAhPSAnUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXQnIiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
              <condition type="class">
                <arg name="RESOLUTION_FIELD_NAME">6</arg>
                <arg name="FIELD_FUNCTION_ID">fc8b9dd9-f011-4c94-85b2-3dad9c428711</arg>
                <arg name="FIELD_NOTES">YCFgRm9yIFBNIFRpY2tldHMgLSBhbGwgc3ViLXRhc2tzIG11c3QgYmUgcmVzb2x2ZWQ=</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.AllSubtasksResolvedCondition</arg>
                <arg name="disabled">true</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">fa37467a9382f8924cd169d5ba599dcb71925405</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIFJlcXVpcmVkIEZpZWxkcyAtIHNvbG8gZXJyb3JzLCBubyB3YXJuaW5ncw==</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5cblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcblxuLy9Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKClcbi8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMjUxMTJcIilcblxubG9nLmRlYnVnIFwiVHJhbnNhemlvbmUgQ29tcGxldGUgLSBQcmltbyB2YWxpZGF0b3JcIlxubG9nLmRlYnVnIFwiVHJhbnNhemlvbmUgQ29tcGxldGUgLSBQcmltbyB2YWxpZGF0b3IgLSBJc3N1ZTogXCIgKyBpc3N1ZVxuXG5kZWYgZXJyb3JzID0gZmFsc2VcbmRlZiB3YXJuaW5ncyA9IGZhbHNlXG5cbmRlZiBhdXRvbWF0aWNhbGx5Q2xvc2VkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q2xvc2VkJ10udG9TdHJpbmcoKSlbMF1cblxuZGVmIGFzc2V0ID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hc3NldCddLnRvU3RyaW5nKCkpWzBdXG5kZWYgYXNzZXRTdGF0dXNQcmUgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmFzc2V0U3RhdHVzUHJlJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBhc3NldFN0YXR1c1Bvc3QgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmFzc2V0U3RhdHVzUG9zdCddLnRvU3RyaW5nKCkpWzBdXG5kZWYgcmlzayA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yucmlza09uc2l0ZSddLnRvU3RyaW5nKCkpWzBdXG5kZWYgcmlza0Rlc2NyaXB0aW9uID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5yaXNrRGVzY3JpcHRpb24nXS50b1N0cmluZygpKVswXVxuZGVmIGN1c3RTaWduYXR1cmUgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmN1c3RvbWVyU2lnbmF0dXJlJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBjdXN0UmVmID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5jdXN0Q29udGFjdE9uc2l0ZSddLnRvU3RyaW5nKCkpWzBdXG4vL2RlZiB0ZWNoU2lnbmF0dXJlID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi50ZWNobmljaWFuU2lnbmF0dXJlJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBrbXMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmttcyddLnRvU3RyaW5nKCkpWzBdXG5kZWYgdHJhdmVsSCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YudHJhdmVsSG91cnMnXS50b1N0cmluZygpKVswXVxuZGVmIGV4ZWN1dGlvbkRhdGUgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmV4ZWN1dGlvbkRhdGUnXS50b1N0cmluZygpKVswXVxuZGVmIHRlY2hzT25zaXRlID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi50ZWNobmljaWFuc09uc2l0ZSddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiByZXBNYXRlcmlhbHMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJlcGxhY2VkTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF1cbmRlZiByZXFNYXRlcmlhbHMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJlcXVpcmVkTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF1cblxuZGVmIHRyYW5zaXRpb25DaGVjayA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY2hlY2tBbmRDb25maXJtJ10udG9TdHJpbmcoKSlbMF1cblxuZGVmIGx1bXBTdW1QcmljZSA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YubHVtcFN1bVByaWNlJ10udG9TdHJpbmcoKSlbMF1cblxuZGVmIGVycm9yTWFuZGF0b3J5RmllbGRzID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgZXJyb3JKb2JTdGFydGVkQ29tcGxldGVkRmllbGRzID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgZXJyb3JKb2JTdGFydGVkQ29tcGxldGVkdnNFeGVjdXRpb24gPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlcnJvckpvYlN0YXJ0ZWREYXRldnNDb21wbGV0ZWQgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlcnJvckdsb2JhbEV4ZWN1dGlvbkRhdGUgPSBmYWxzZVxuZGVmIGVycm9yVGVjaFNpZ25hdHVyZUZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIHdhcm5pbmdFbXB0eUZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVycm9yU3ViVGFza1Jlc29sdXRpb24gPSBmYWxzZVxuZGVmIGVycm9yVGVjaHNNaXNzaW5nID0gZmFsc2VcblxuZGVmIGV4ZWN1dGlvbkRhdGVEYXRlXG5cbi8qT1AtMTAzODogRXNlZ3VvIGxhIHZlcmlmaWNhIGRlaSBjYW1waSBvYmJsaWdhdG9yaSBzb2xvIHNlIGlsIHRpY2tldCBzdSBjdWkgc3RvIGVzZWd1ZW5kbyBsYSB0cmFuc2F6aW9uZSBub24gXHUwMGU4IHN0YXRvIGNoaXVzbyBpbiBhdXRvbWF0aWNvIGRhbCBzaXN0ZW1hKi9cbmxvZy5kZWJ1ZyBcImlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCk6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKVxubG9nLmRlYnVnIFwiY2hlY2s6IFwiICsgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIilcbmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCk9PW51bGwgfHwgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIikpe1xuICAgIC8vT1BBQV9MVU1QX1NVTV9QUklDRVxuICAgIGlmKCFpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0LnBsYW5uZWRNYWludGVuYW5jZSddKSAmJiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUHJpY2UpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUHJpY2UpID09IFwiXCIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShsdW1wU3VtUHJpY2UpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKSl7XG4gICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLmx1bXBTdW1QcmljZSddLnRvU3RyaW5nKCkpXG4gICAgfVxuXG4gICAgLy9PUEFBX1JFUExBQ0VEX01BVEVSSUFMU1xuICAgIGlmKCFpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0LnBsYW5uZWRNYWludGVuYW5jZSddKSAmJiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpID09IFwiXCIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcIndhcm5pbmdzIHRydWVcIlxuICAgICAgICB3YXJuaW5ncyA9IHRydWVcbiAgICAgICAgd2FybmluZ0VtcHR5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5yZXBsYWNlZE1hdGVyaWFscyddLnRvU3RyaW5nKCkpXG4gICAgfVxuICAgIC8vT1BBQV9SRVFVSVJFRF9NQVRFUklBTFNcbiAgICBpZighaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5wbGFubmVkTWFpbnRlbmFuY2UnXSkgJiYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVxTWF0ZXJpYWxzKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVxTWF0ZXJpYWxzKSA9PSBcIlwiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVxTWF0ZXJpYWxzKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSkpe1xuICAgICAgICBsb2cuZGVidWcgXCJ3YXJuaW5ncyB0cnVlXCJcbiAgICAgICAgd2FybmluZ3MgPSB0cnVlXG4gICAgICAgIHdhcm5pbmdFbXB0eUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YucmVxdWlyZWRNYXRlcmlhbHMnXS50b1N0cmluZygpKVxuICAgIH1cblxuXG4gICAgLy9PUEFBX0FTU0VUXG4gICAgaWYoIWlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQucGxhbm5lZE1haW50ZW5hbmNlJ10pICYmIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0KT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXQpID09IFwiXCIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldCkudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpKXtcbiAgICAgICAgZXJyb3JzID0gdHJ1ZVxuICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YuYXNzZXQnXS50b1N0cmluZygpKVxuICAgIH1cbiAgICAvL09QQUFfQVNTRVRfU1RBVFVTX1BSRVxuICAgIGlmKCFpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0LnBsYW5uZWRNYWludGVuYW5jZSddKSAmJiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldFN0YXR1c1ByZSk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0U3RhdHVzUHJlKSA9PSBcIlwiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXRTdGF0dXNQcmUpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKSl7XG4gICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLmFzc2V0U3RhdHVzUHJlJ10udG9TdHJpbmcoKSlcbiAgICB9XG4gICAgLy9PUEFBX0FTU0VUX1NUQVRVU19QT1NUXG4gICAgaWYoIWlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQucGxhbm5lZE1haW50ZW5hbmNlJ10pICYmIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0U3RhdHVzUG9zdCk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0U3RhdHVzUG9zdCkgPT0gXCJcIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0U3RhdHVzUG9zdCkudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpKXtcbiAgICAgICAgZXJyb3JzID0gdHJ1ZVxuICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YuYXNzZXRTdGF0dXNQb3N0J10udG9TdHJpbmcoKSlcbiAgICB9XG4gICAgLy9PUEFBX1JJU0tfT05TSVRFXG4gICAgaWYoIWlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQucGxhbm5lZE1haW50ZW5hbmNlJ10pICYmIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJpc2spPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyaXNrKSA9PSBcIlwiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmlzaykudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpKXtcbiAgICAgICAgZXJyb3JzID0gdHJ1ZVxuICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2Yucmlza09uc2l0ZSddLnRvU3RyaW5nKCkpXG4gICAgfVxuICAgIC8vT1BBQV9SSVNLX0RFU0NSSVBUSU9OXG4gICAgaWYoIWlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQucGxhbm5lZE1haW50ZW5hbmNlJ10pICYmIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJpc2spLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpICYmIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJpc2tEZXNjcmlwdGlvbik9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJpc2tEZXNjcmlwdGlvbikgPT0gXCJcIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJpc2tEZXNjcmlwdGlvbikudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpKSl7XG4gICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLnJpc2tEZXNjcmlwdGlvbiddLnRvU3RyaW5nKCkpXG4gICAgfVxuICAgIC8vT1BBQV9DVVNUT01FUl9TSUdOQVRVUkVcbiAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1c3RTaWduYXR1cmUpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0U2lnbmF0dXJlKSA9PSBcIlwiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VzdFNpZ25hdHVyZSkudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpe1xuICAgICAgICBlcnJvcnMgPSB0cnVlXG4gICAgICAgIGVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5jdXN0b21lclNpZ25hdHVyZSddLnRvU3RyaW5nKCkpXG4gICAgfVxuICAgIC8vT1BBQV9DVVNUT01FUl9DT05UQUNUX09OU0lURVxuICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VzdFJlZik9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1c3RSZWYpID09IFwiXCIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0UmVmKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSl7XG4gICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLmN1c3RDb250YWN0T25zaXRlJ10udG9TdHJpbmcoKSlcbiAgICB9XG4gICAgXG4gICAgLy9QTSBUSUNLRVQgLSBhbGwgc3ViLXRhc2tzIG11c3QgYmUgQ29tcGxldGVkXG4gICAgaWYoaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5wbGFubmVkTWFpbnRlbmFuY2UnXSkpe1xuICAgICAgICBkZWYgc3ViVGFza3MgPSBpc3N1ZS5nZXRTdWJUYXNrT2JqZWN0cygpXG5cbiAgICAgICAgaWYoc3ViVGFza3Mpe1xuICAgICAgICAgICAgc3ViVGFza3MuZWFjaCB7IC8vTG9vcCBlYWNoIHN1YnRhc2sgb2YgcGFyZW50IGlzc3VlXG4gICAgICAgICAgICAgICAgLy9JZiB0aGUgc3VidGFzayBpcyBcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1wiXG4gICAgICAgICAgICAgICAgaWYgKGl0Lmlzc3VlVHlwZS5uYW1lID09IFwiUGxhbm5lZCBNYWludGVuYW5jZSBUYXNrXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYoIWl0LmdldFJlc29sdXRpb24oKSB8fCBpdC5nZXRSZXNvbHV0aW9uKCkubmFtZSAhPSBcIkNvbXBsZXRlZFwiKXsgXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnMgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvclN1YlRhc2tSZXNvbHV0aW9uID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvL09QQUFfVEVDSE5JQ0lBTl9TSUdOQVRVUkVcbiAgICAvKlxuICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGVjaFNpZ25hdHVyZSk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hTaWduYXR1cmUpID09IFwiXCIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0ZWNoU2lnbmF0dXJlKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSl7XG4gICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLnRlY2huaWNpYW5TaWduYXR1cmUnXS50b1N0cmluZygpKVxuICAgIH1cbiAgICAqL1xuICAgIC8vMTUuMTIuMjAyMCBBRiAtIHRvbHRhIG9iYmxpZ2F0b3JpZXRcdTAwZTAgc3VpIGNhbXBpIE9QX0tNUyBlIE9QX1RSQVZFTF9IT1VSUyBwb2ljaFx1MDBlOCBvcmEgbGEgcmljaGllc3RhIHV0ZW50aSBcdTAwZTggZGkgaW1wbGVtZW50YXJlOlxuICAgIC8vQ2luemlhIFNhbGl0dXJvOiBkb3ZyZWJiZXJvIGVzc2VyZSBvYmJsaWdhdG9yaSBsYWRkb3ZlIGRhIGNvbnRyYXR0byBpbCBmb3JuaXRvcmUgbm9uIGhhIGlsIGRpcml0dG8gZmlzc28gZGkgY2hpYW1hdGFcbiAgICAvL09QQUFfS01TXG4gICAgLyppZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGttcyk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGttcykgPT0gXCJcIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGttcykudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpe1xuICAgICAgICBlcnJvcnMgPSB0cnVlXG4gICAgICAgIGVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5rbXMnXS50b1N0cmluZygpKVxuICAgIH0qL1xuICAgIC8vT1BBQV9UUkFWRUxfSE9VUlNcbiAgICAvKmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsSCk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYXZlbEgpID09IFwiXCIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmF2ZWxIKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSl7XG4gICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLnRyYXZlbEhvdXJzJ10udG9TdHJpbmcoKSlcbiAgICB9Ki9cbiAgICAvL09QQUFfRVhFQ1VUSU9OX0RBVEVcbiAgICAvKlRPRE86IGRhIGNvbW1lbnRhcmUgcXVhbmRvIHJpbXVvdmVyZW1vIGxhIGNvbXBpbGF6aW9uZSBkaSBleGVjdXRpb24gZGF0ZSBhbmNoZSBwZXIgcmVwYWlyKi9cbiAgICBpZighaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5wbGFubmVkTWFpbnRlbmFuY2UnXSkgJiYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZXhlY3V0aW9uRGF0ZSk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGV4ZWN1dGlvbkRhdGUpID09IFwiXCIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShleGVjdXRpb25EYXRlKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSkpe1xuICAgICAgICBlcnJvcnMgPSB0cnVlXG4gICAgICAgIGVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5leGVjdXRpb25EYXRlJ10udG9TdHJpbmcoKSlcbiAgICB9ZWxzZXtcbiAgICAgICAgaWYoIWlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQucGxhbm5lZE1haW50ZW5hbmNlJ10pKXtcbiAgICAgICAgICAgIGV4ZWN1dGlvbkRhdGVEYXRlID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShleGVjdXRpb25EYXRlKS5mb3JtYXQoJ2RkL01NL3l5eXknKVxuICAgICAgICB9XG5cdH1cbiAgICBcbiAgICBcbiAgICAvL0pvYiBTdGFydGVkICsgSm9iIENvbXBsZXRlZCBkaSBvZ25pIG9nZ2V0dG8gVGVjaF9PblNpdGVfUmVwb3J0IGFzc29jaWF0byBhbCBjYW1wbyBPUEFBX1RFQ0hTX09OU0lURVxuICAgIGRlZiBnbG9iYWxFeGVjRGF0ZVxuICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGVjaHNPbnNpdGUpIT1udWxsICYmIChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0ZWNoc09uc2l0ZSkgIT0gXCJcIiAmJiAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0ZWNoc09uc2l0ZSkudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpe1xuICAgICAgICAvKkNpY2xhcmUgdHV0dGkgZ2xpIG9nZ2V0dGkgYXNzb2NpYXRpIGFsIGNhbXBvKi9cbiAgICAgICAgLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzXG4gICAgICAgIENsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTsgIFxuICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTtcbiAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbiAgICAgICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XG5cbiAgICAgICAgZGVmIHRlY2hzT25zaXRlRmllbGQgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hzT25zaXRlKVxuXHRcdGxvZy5kZWJ1ZyBcInRlY2hzT25zaXRlRmllbGQ6IFwiICsgdGVjaHNPbnNpdGVGaWVsZFxuICAgICAgICBmb3IodGVjaG5pY2lhbiBpbiB0ZWNoc09uc2l0ZUZpZWxkKXtcbiAgICAgICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdFxuICAgICAgICAgICAgZGVmIHRlY2hPbnNpdGU9dGVjaG5pY2lhbi50b1N0cmluZygpXG4gICAgICAgICAgICBkZWYgdGVjaE9uc2l0ZUtleSA9IHRlY2hPbnNpdGUuc3Vic3RyaW5nKHRlY2hPbnNpdGUuaW5kZXhPZignKCcpKzEsdGVjaE9uc2l0ZS5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICBkZWYgdGVjaE9uc2l0ZU9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbih0ZWNoT25zaXRlS2V5KVxuICAgICAgICAgICAgLy9nZXQgXCJKb2IgU3RhcnRlZFwiIGZvciB0aGF0IFRlY2huaWNpYW5cbiAgICAgICAgICAgIGRlZiBvYlRyaWFnZVxuICAgICAgICAgICAgZGVmIHRlY2hKb2JTdGFydGVkXG4gICAgICAgICAgICBkZWYgdGVjaEpvYkNvbXBsZXRlZFxuICAgICAgICAgICAgZGVmIHRlY2hKb2JTdGFydGVkRGF0ZSwgdGVjaEpvYkNvbXBsZXRlZERhdGVcbiAgICAgICAgICAgIGRlZiB0ZWNoUmVmLCB0ZWNoLCB0ZWNoUmVmS2V5LCB0ZWNoUmVmT2JqZWN0LCB0ZWNoUmVmTmFtZVxuICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hPbnNpdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai50ZWNoT25TaXRlLmpvYlN0YXJ0ZWQnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaE9uc2l0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2hPblNpdGUuam9iU3RhcnRlZCddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgICAgIHRlY2hKb2JTdGFydGVkID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIHRlY2hKb2JTdGFydGVkRGF0ZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLmZvcm1hdCgnZGQvTU0veXl5eScpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRlY2hKb2JTdGFydGVkOiBcIiArIHRlY2hKb2JTdGFydGVkRGF0ZVxuICAgICAgICAgICAgLy9nZXQgXCJKb2IgQ29tcGxldGVkXCIgZm9yIHRoYXQgVGVjaG5pY2lhblxuICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hPbnNpdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai50ZWNoT25TaXRlLmpvYkNvbXBsZXRlZCddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoT25zaXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoudGVjaE9uU2l0ZS5qb2JDb21wbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICB0ZWNoSm9iQ29tcGxldGVkID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICB0ZWNoSm9iQ29tcGxldGVkRGF0ZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLmZvcm1hdCgnZGQvTU0veXl5eScpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRlY2hKb2JDb21wbGV0ZWQ6IFwiICsgdGVjaEpvYkNvbXBsZXRlZFxuICAgICAgICAgICAgLy9nZXQgXCJUZWNobmljaWFuX1JFRlwiIGZvciB0aGF0IFRlY2huaWNpYW5cbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRlY2hPbnNpdGVPYmplY3Q6IFwiICsgdGVjaE9uc2l0ZU9iamVjdFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaE9uc2l0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2hPbnNpdGUudGVjaG5pY2lhblJlZiddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoT25zaXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoudGVjaE9uc2l0ZS50ZWNobmljaWFuUmVmJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgdGVjaFJlZiA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgdGVjaCA9IHRlY2hSZWYudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRlY2g6IFwiICsgdGVjaFxuICAgICAgICAgICAgICAgIHRlY2hSZWZLZXkgPSB0ZWNoLnN1YnN0cmluZyh0ZWNoLmluZGV4T2YoJygnKSsxLHRlY2guaW5kZXhPZignKScpKVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRlY2hSZWZLZXk6IFwiICsgdGVjaFJlZktleVxuICAgICAgICAgICAgICAgIHRlY2hSZWZPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4ocHJvcGVydGllc1snaXNjaGVtYS5hYSddLnRvU3RyaW5nKCkgKyBcIi1cIiArIHRlY2hSZWZLZXkpXG4gICAgICAgICAgICAgICAgdGVjaFJlZk5hbWUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaFJlZk9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2huaWNpYW4ubmFtZSddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICBcdFx0bG9nLmRlYnVnIHRlY2hSZWZOYW1lXG4gICAgICAgICAgICBpZighdGVjaEpvYlN0YXJ0ZWQgfHwgIXRlY2hKb2JDb21wbGV0ZWQpe1xuICAgICAgICAgICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgICAgICAgICBlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWRGaWVsZHMuYWRkKHRlY2hSZWZOYW1lLnN1YnN0cmluZyh0ZWNoUmVmTmFtZS5pbmRleE9mKCcoJykrMSx0ZWNoUmVmTmFtZS5pbmRleE9mKCcpJykpKVxuICAgICAgICAgICAgfSAgICBcbiAgICAgICAgICAgIGlmKCFpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0LnBsYW5uZWRNYWludGVuYW5jZSddKSAmJiB0ZWNoSm9iU3RhcnRlZERhdGUgIT0gdGVjaEpvYkNvbXBsZXRlZERhdGUpe1xuICAgICAgICAgICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgICAgICAgICBlcnJvckpvYlN0YXJ0ZWREYXRldnNDb21wbGV0ZWQuYWRkKHRlY2hSZWZOYW1lLnN1YnN0cmluZyh0ZWNoUmVmTmFtZS5pbmRleE9mKCcoJykrMSx0ZWNoUmVmTmFtZS5pbmRleE9mKCcpJykpKVxuICAgICAgICAgICAgfVxuXHRcdFx0aWYoIWlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQucGxhbm5lZE1haW50ZW5hbmNlJ10pICYmIGV4ZWN1dGlvbkRhdGVEYXRlICE9IG51bGwgJiYgdGVjaEpvYlN0YXJ0ZWREYXRlICE9IGV4ZWN1dGlvbkRhdGVEYXRlKXtcbiAgICAgICAgICAgICAgICBlcnJvcnMgPSB0cnVlXG4gICAgICAgICAgICAgICAgZXJyb3JKb2JTdGFydGVkQ29tcGxldGVkdnNFeGVjdXRpb24uYWRkKHRlY2hSZWZOYW1lLnN1YnN0cmluZyh0ZWNoUmVmTmFtZS5pbmRleE9mKCcoJykrMSx0ZWNoUmVmTmFtZS5pbmRleE9mKCcpJykpKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihnbG9iYWxFeGVjRGF0ZT09bnVsbCAmJiB0ZWNoSm9iU3RhcnRlZERhdGUgPT0gdGVjaEpvYkNvbXBsZXRlZERhdGUpe1xuICAgICAgICAgICAgICAgIGdsb2JhbEV4ZWNEYXRlID0gdGVjaEpvYlN0YXJ0ZWREYXRlXG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBpZihnbG9iYWxFeGVjRGF0ZSE9bnVsbCAmJiBnbG9iYWxFeGVjRGF0ZSE9dGVjaEpvYlN0YXJ0ZWREYXRlKXtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JzPXRydWVcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JHbG9iYWxFeGVjdXRpb25EYXRlID0gdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgIH0gICAgXG4gICAgfWVsc2V7XG4gICAgICAgIGlmKGlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaXQucGxhbm5lZE1haW50ZW5hbmNlJ10pKXtcbiAgICAgICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgICAgIGVycm9yVGVjaHNNaXNzaW5nID0gdHJ1ZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGVmIHRlY2hTaWduRm91bmQ9ZmFsc2VcbiAgICAvL0Zpcm1hIGRpIGFsbWVubyB1biBvZ2dldHRvIFRlY2hfT25TaXRlX1JlcG9ydCBhc3NvY2lhdG8gYWwgY2FtcG8gT1BBQV9URUNIU19PTlNJVEVcbiAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hzT25zaXRlKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGVjaHNPbnNpdGUpICE9IFwiXCIgJiYgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGVjaHNPbnNpdGUpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKXtcbiAgICAgICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovXG4gICAgICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50c1xuICAgICAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7ICBcbiAgICAgICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XG4gICAgICAgIGRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XG4gICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4gICAgICAgIGRlZiB0ZWNoc09uc2l0ZUZpZWxkID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0ZWNoc09uc2l0ZSlcblx0XHRsb2cuZGVidWcgXCJ0ZWNoc09uc2l0ZUZpZWxkOiBcIiArIHRlY2hzT25zaXRlRmllbGRcbiAgICAgICAgZm9yKHRlY2huaWNpYW4gaW4gdGVjaHNPbnNpdGVGaWVsZCl7XG4gICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3RcbiAgICAgICAgICAgIGRlZiB0ZWNoT25zaXRlPXRlY2huaWNpYW4udG9TdHJpbmcoKVxuICAgICAgICAgICAgZGVmIHRlY2hPbnNpdGVLZXkgPSB0ZWNoT25zaXRlLnN1YnN0cmluZyh0ZWNoT25zaXRlLmluZGV4T2YoJygnKSsxLHRlY2hPbnNpdGUuaW5kZXhPZignKScpKVxuICAgICAgICAgICAgZGVmIHRlY2hPbnNpdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4odGVjaE9uc2l0ZUtleSlcbiAgICAgICAgICAgIC8vZ2V0IFwiSm9iIFN0YXJ0ZWRcIiBmb3IgdGhhdCBUZWNobmljaWFuXG4gICAgICAgICAgICBkZWYgb2JUcmlhZ2VcbiAgICAgICAgICAgIGRlZiB0ZWNoU2lnbmF0dXJlLCB0ZWNoU2lnbmF0dXJlQXR0clxuICAgICAgICAgICAgdGVjaFNpZ25hdHVyZUF0dHIgPSBwcm9wZXJ0aWVzWydpb2JqLnRlY2hPblNpdGUuc2lnbmF0dXJlJ10gPyBwcm9wZXJ0aWVzWydpb2JqLnRlY2hPblNpdGUuc2lnbmF0dXJlJ10udG9TdHJpbmcoKSA6IFwiVEVDSE5JQ0lBTl9TSUdOQVRVUkVcIlxuICAgICAgICAgICAgZGVmIHRlY2hSZWYsIHRlY2gsIHRlY2hSZWZLZXksIHRlY2hSZWZPYmplY3QsIHRlY2hSZWZOYW1lXG4gICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaE9uc2l0ZU9iamVjdC5nZXRJZCgpLCB0ZWNoU2lnbmF0dXJlQXR0cikpe1xuICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hPbnNpdGVPYmplY3QuZ2V0SWQoKSwgdGVjaFNpZ25hdHVyZUF0dHIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgICAgIHRlY2hTaWduYXR1cmUgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJ0ZWNoU2lnbmF0dXJlOiBcIiArIHRlY2hTaWduYXR1cmUgXG5cbiAgICAgICAgICAgIC8vZ2V0IFwiVGVjaG5pY2lhbl9SRUZcIiBmb3IgdGhhdCBUZWNobmljaWFuXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJ0ZWNoT25zaXRlT2JqZWN0OiBcIiArIHRlY2hPbnNpdGVPYmplY3RcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hPbnNpdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai50ZWNoT25zaXRlLnRlY2huaWNpYW5SZWYnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaE9uc2l0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2hPbnNpdGUudGVjaG5pY2lhblJlZiddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgICAgIHRlY2hSZWYgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIHRlY2ggPSB0ZWNoUmVmLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ0ZWNoOiBcIiArIHRlY2hcbiAgICAgICAgICAgICAgICB0ZWNoUmVmS2V5ID0gdGVjaC5zdWJzdHJpbmcodGVjaC5pbmRleE9mKCcoJykrMSx0ZWNoLmluZGV4T2YoJyknKSlcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ0ZWNoUmVmS2V5OiBcIiArIHRlY2hSZWZLZXlcbiAgICAgICAgICAgICAgICB0ZWNoUmVmT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEnXS50b1N0cmluZygpICsgXCItXCIgKyB0ZWNoUmVmS2V5KVxuICAgICAgICAgICAgICAgIHRlY2hSZWZOYW1lID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hSZWZPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai50ZWNobmljaWFuLm5hbWUnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgXHRcdGxvZy5kZWJ1ZyB0ZWNoUmVmTmFtZVxuXG4gICAgICAgICAgICBpZighdGVjaFNpZ25hdHVyZSAmJiAhdGVjaFNpZ25Gb3VuZCl7XG4gICAgICAgICAgICAgICAgZXJyb3JUZWNoU2lnbmF0dXJlRmllbGRzLmFkZCh0ZWNoUmVmTmFtZS5zdWJzdHJpbmcodGVjaFJlZk5hbWUuaW5kZXhPZignKCcpKzEsdGVjaFJlZk5hbWUuaW5kZXhPZignKScpKSlcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGlmKHRlY2hTaWduYXR1cmUpe1xuICAgICAgICAgICAgICAgICAgICB0ZWNoU2lnbkZvdW5kID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICBlcnJvclRlY2hTaWduYXR1cmVGaWVsZHMuY2xlYXIoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gICAgXG4gICAgICAgICB9XG4gICAgICAgIGlmKCF0ZWNoU2lnbkZvdW5kKXtcbiAgICAgICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgIGlmICghZXJyb3JzICYmICF3YXJuaW5ncyl7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfWVsc2V7XG4gICAgICAgIGlmKCFlcnJvcnMgJiYgd2FybmluZ3Mpe1xuICAgICAgICAgICAgLy9TZSBjaSBzb25vIHNvbG8gd2FybmluZ3MgdmVyaWZpY28gc2UgbCd1dGVudGUgaGEgZ2lcdTAwZTAgZGljaGlhcmF0byBkaSB2b2xlciBwcm9zZWd1aXJlIGNvbXVucXVlXG4gICAgICAgICAgICAvLyAtIHRyYW5zaXRpb24gZmllbGQgXCJPUEFBX0NIRUNLX0FORF9DT05GSVJNXCI9XCJZZXNcIlxuICAgICAgICAgICAgLy8gLSBpbiBjYXNvIGNvbnRyYXJpbyBpbnZpbyBpIHdhcm5pbmcgYSBGRVxuXG4gICAgICAgICAgICAvL2xvZy5kZWJ1ZyBcInRyYW5zaXRpb25DaGVjazogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaylcbiAgICAgICAgICAgIC8vbG9nLmRlYnVnIFwicmVzdWx0OiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKVxuICAgICAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpKXtcbiAgICAgICAgICAgICAgICAvL2xvZy5kZWJ1ZyBcInJldHVybiB0cnVlXCJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgZGVmIHdMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICAgICAgICAgICAgICBpZih3YXJuaW5nRW1wdHlGaWVsZHMuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1FbXB0eSA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQoXCJXXCIpXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChcIkNPTkZJUk1fRU1QVFlfRklFTERTXCIpXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChudWxsKVxuICAgICAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQod2FybmluZ0VtcHR5RmllbGRzKVxuXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eSlcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRocm93IGV4Y2VwdGlvbjogXCIgKyBvdXRwdXQudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIldcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgICAgICAgICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIldcIiwgb3V0cHV0LnRvU3RyaW5nKCkpICAgXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgICAgICBpZihlcnJvcnMgJiYgIXdhcm5pbmdzKXtcbiAgICAgICAgICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgICAgICAgICBpZihlcnJvck1hbmRhdG9yeUZpZWxkcy5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICBkZWYgZUxpc3RNYW5kYXRvcnkgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKFwiTUFOREFUT1JZX0ZJRUxEU1wiKVxuICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChudWxsKVxuICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChlcnJvck1hbmRhdG9yeUZpZWxkcylcbiAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RNYW5kYXRvcnkpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKGVycm9ySm9iU3RhcnRlZENvbXBsZXRlZEZpZWxkcy5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICBkZWYgZUxpc3RTdGFydEVuZCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKFwiRVwiKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKFwiTUlTU0lOR19PTlNJVEVfU1RBUlRfRU5EX0RFVEFJTFNcIilcbiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kLmFkZChudWxsKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKGVycm9ySm9iU3RhcnRlZENvbXBsZXRlZEZpZWxkcylcbiAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RTdGFydEVuZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoZXJyb3JKb2JTdGFydGVkQ29tcGxldGVkdnNFeGVjdXRpb24uc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0U3RhcnRFbmRFeGVjID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZEV4ZWMuYWRkKFwiRVwiKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmRFeGVjLmFkZChcIkVYRUNVVElPTl9EQVRFX1ZTX1RFQ0hfU1RBUlRfQ09NUExFVEVEXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZEV4ZWMuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZEV4ZWMuYWRkKGVycm9ySm9iU3RhcnRlZENvbXBsZXRlZHZzRXhlY3V0aW9uKVxuICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdFN0YXJ0RW5kRXhlYylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoZXJyb3JUZWNoU2lnbmF0dXJlRmllbGRzLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgIGRlZiBlTGlzdFRlY2hTaWduID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZUxpc3RUZWNoU2lnbi5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RUZWNoU2lnbi5hZGQoXCJNSVNTSU5HX1RFQ0hfU0lHTkFUVVJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RUZWNoU2lnbi5hZGQobnVsbClcbiAgICAgICAgICAgICAgICBlTGlzdFRlY2hTaWduLmFkZChlcnJvclRlY2hTaWduYXR1cmVGaWVsZHMpXG4gICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0VGVjaFNpZ24pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKGVycm9yU3ViVGFza1Jlc29sdXRpb24pe1xuICAgICAgICAgICAgICAgIGRlZiBlTGlzdFN1YlRhc2tDb21wbGV0ZWQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBlTGlzdFN1YlRhc2tDb21wbGV0ZWQuYWRkKFwiRVwiKVxuICAgICAgICAgICAgICAgIGVMaXN0U3ViVGFza0NvbXBsZXRlZC5hZGQoXCJTVUJUQVNLX05PVF9DT01QTEVURURcIilcbiAgICAgICAgICAgICAgICBlTGlzdFN1YlRhc2tDb21wbGV0ZWQuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0U3ViVGFza0NvbXBsZXRlZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoZXJyb3JUZWNoc01pc3Npbmcpe1xuICAgICAgICAgICAgICAgIGRlZiBlTGlzdFN1YlRhc2tDb21wbGV0ZWQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBlTGlzdFN1YlRhc2tDb21wbGV0ZWQuYWRkKFwiRVwiKVxuICAgICAgICAgICAgICAgIGVMaXN0U3ViVGFza0NvbXBsZXRlZC5hZGQoXCJNSVNTSU5HX1RFQ0hOSUNJQU5TXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RTdWJUYXNrQ29tcGxldGVkLmFkZChudWxsKVxuICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdFN1YlRhc2tDb21wbGV0ZWQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKGVycm9ySm9iU3RhcnRlZERhdGV2c0NvbXBsZXRlZC5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICBkZWYgZUxpc3RTdGFydEVuZCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKFwiRVwiKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKFwiVEVDSF9TVEFSVF9DT01QTEVURURfREFURVwiKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQoZXJyb3JKb2JTdGFydGVkRGF0ZXZzQ29tcGxldGVkKVxuICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdFN0YXJ0RW5kKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihlcnJvckdsb2JhbEV4ZWN1dGlvbkRhdGUpe1xuICAgICAgICAgICAgICAgIGRlZiBlTGlzdEV4ZWNEYXRlID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZUxpc3RFeGVjRGF0ZS5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RFeGVjRGF0ZS5hZGQoXCJFWEVDVVRJT05fREFURV9BTExfVEVDSFNcIilcbiAgICAgICAgICAgICAgICBlTGlzdEV4ZWNEYXRlLmFkZChudWxsKVxuICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdEV4ZWNEYXRlKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwidGhyb3cgZXhjZXB0aW9uOiBcIiArIG91dHB1dC50b1N0cmluZygpXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICAgICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIkVcIiwgb3V0cHV0LnRvU3RyaW5nKCkpICAgXG4gICAgICAgIH1cbiAgICAgICAgaWYoZXJyb3JzICYmIHdhcm5pbmdzKXtcbiAgICAgICAgICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgZGVmIHdMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICBpZihlcnJvck1hbmRhdG9yeUZpZWxkcy5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICBkZWYgZUxpc3RNYW5kYXRvcnkgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKFwiTUFOREFUT1JZX0ZJRUxEU1wiKVxuICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChudWxsKVxuICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChlcnJvck1hbmRhdG9yeUZpZWxkcylcbiAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RNYW5kYXRvcnkpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKGVycm9ySm9iU3RhcnRlZENvbXBsZXRlZEZpZWxkcy5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICBkZWYgZUxpc3RTdGFydEVuZCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKFwiRVwiKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKFwiTUlTU0lOR19PTlNJVEVfU1RBUlRfRU5EX0RFVEFJTFNcIilcbiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kLmFkZChudWxsKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKGVycm9ySm9iU3RhcnRlZENvbXBsZXRlZEZpZWxkcylcbiAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RTdGFydEVuZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoZXJyb3JKb2JTdGFydGVkQ29tcGxldGVkdnNFeGVjdXRpb24uc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0U3RhcnRFbmRFeGVjID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZEV4ZWMuYWRkKFwiRVwiKVxuICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmRFeGVjLmFkZChcIkVYRUNVVElPTl9EQVRFX1ZTX1RFQ0hfU1RBUlRfQ09NUExFVEVEXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZEV4ZWMuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZEV4ZWMuYWRkKGVycm9ySm9iU3RhcnRlZENvbXBsZXRlZHZzRXhlY3V0aW9uKVxuICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdFN0YXJ0RW5kRXhlYylcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihlcnJvclRlY2hTaWduYXR1cmVGaWVsZHMuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0VGVjaFNpZ24gPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBlTGlzdFRlY2hTaWduLmFkZChcIkVcIilcbiAgICAgICAgICAgICAgICBlTGlzdFRlY2hTaWduLmFkZChcIk1JU1NJTkdfVEVDSF9TSUdOQVRVUkVcIilcbiAgICAgICAgICAgICAgICBlTGlzdFRlY2hTaWduLmFkZChudWxsKVxuICAgICAgICAgICAgICAgIGVMaXN0VGVjaFNpZ24uYWRkKGVycm9yVGVjaFNpZ25hdHVyZUZpZWxkcylcbiAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RUZWNoU2lnbilcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoZXJyb3JTdWJUYXNrUmVzb2x1dGlvbil7XG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0U3ViVGFza0NvbXBsZXRlZCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGVMaXN0U3ViVGFza0NvbXBsZXRlZC5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RTdWJUYXNrQ29tcGxldGVkLmFkZChcIlNVQlRBU0tfTk9UX0NPTVBMRVRFRFwiKVxuICAgICAgICAgICAgICAgIGVMaXN0U3ViVGFza0NvbXBsZXRlZC5hZGQobnVsbClcbiAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RTdWJUYXNrQ29tcGxldGVkKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihlcnJvclRlY2hzTWlzc2luZyl7XG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0U3ViVGFza0NvbXBsZXRlZCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGVMaXN0U3ViVGFza0NvbXBsZXRlZC5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RTdWJUYXNrQ29tcGxldGVkLmFkZChcIk1JU1NJTkdfVEVDSE5JQ0lBTlNcIilcbiAgICAgICAgICAgICAgICBlTGlzdFN1YlRhc2tDb21wbGV0ZWQuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0U3ViVGFza0NvbXBsZXRlZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoZXJyb3JKb2JTdGFydGVkRGF0ZXZzQ29tcGxldGVkLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgIGRlZiBlTGlzdFN0YXJ0RW5kID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQoXCJURUNIX1NUQVJUX0NPTVBMRVRFRF9EQVRFXCIpXG4gICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQobnVsbClcbiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kLmFkZChlcnJvckpvYlN0YXJ0ZWREYXRldnNDb21wbGV0ZWQpXG4gICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0U3RhcnRFbmQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKGVycm9yR2xvYmFsRXhlY3V0aW9uRGF0ZSl7XG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0RXhlY0RhdGUgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBlTGlzdEV4ZWNEYXRlLmFkZChcIkVcIilcbiAgICAgICAgICAgICAgICBlTGlzdEV4ZWNEYXRlLmFkZChcIkVYRUNVVElPTl9EQVRFX0FMTF9URUNIU1wiKVxuICAgICAgICAgICAgICAgIGVMaXN0RXhlY0RhdGUuYWRkKG51bGwpXG4gICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXhlY0RhdGUpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKHdhcm5pbmdFbXB0eUZpZWxkcy5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgICAgICBkZWYgd0xpc3RDb25maXJtRW1wdHkgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQoXCJXXCIpXG4gICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKFwiQ09ORklSTV9FTVBUWV9GSUVMRFNcIilcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQobnVsbClcbiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQod2FybmluZ0VtcHR5RmllbGRzKVxuXG4gICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5KVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICAgICAgb3V0cHV0LmFkZCh3TGlzdClcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRocm93IGV4Y2VwdGlvbjogXCIgKyBvdXRwdXQudG9TdHJpbmcoKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiV0VcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgICAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKFwiV0VcIiwgb3V0cHV0LnRvU3RyaW5nKCkpICBcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZQppbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb24KaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3IKaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnkKaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CmRlZiBDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRykKCklzc3VlIGlzc3VlID0gaXNzdWUKCmxvZy5kZWJ1ZyAiVHJhbnNhemlvbmUgQ29tcGxldGUgLSBQcmltbyB2YWxpZGF0b3IiCmxvZy5kZWJ1ZyAiVHJhbnNhemlvbmUgQ29tcGxldGUgLSBQcmltbyB2YWxpZGF0b3IgLSBJc3N1ZTogIiArIGlzc3VlCgpkZWYgZXJyb3JzID0gZmFsc2UKZGVmIHdhcm5pbmdzID0gZmFsc2UKCmRlZiBhdXRvbWF0aWNhbGx5Q2xvc2VkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q2xvc2VkJ10udG9TdHJpbmcoKSlbMF0KCmRlZiBhc3NldCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXNzZXQnXS50b1N0cmluZygpKVswXQpkZWYgYXNzZXRTdGF0dXNQcmUgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmFzc2V0U3RhdHVzUHJlJ10udG9TdHJpbmcoKSlbMF0KZGVmIGFzc2V0U3RhdHVzUG9zdCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXNzZXRTdGF0dXNQb3N0J10udG9TdHJpbmcoKSlbMF0KZGVmIHJpc2sgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJpc2tPbnNpdGUnXS50b1N0cmluZygpKVswXQpkZWYgcmlza0Rlc2NyaXB0aW9uID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5yaXNrRGVzY3JpcHRpb24nXS50b1N0cmluZygpKVswXQpkZWYgY3VzdFNpZ25hdHVyZSA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY3VzdG9tZXJTaWduYXR1cmUnXS50b1N0cmluZygpKVswXQpkZWYgY3VzdFJlZiA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuY3VzdENvbnRhY3RPbnNpdGUnXS50b1N0cmluZygpKVswXQpkZWYgdGVjaFNpZ25hdHVyZSA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YudGVjaG5pY2lhblNpZ25hdHVyZSddLnRvU3RyaW5nKCkpWzBdCmRlZiBrbXMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmttcyddLnRvU3RyaW5nKCkpWzBdCmRlZiB0cmF2ZWxIID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi50cmF2ZWxIb3VycyddLnRvU3RyaW5nKCkpWzBdCmRlZiBleGVjdXRpb25EYXRlID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5leGVjdXRpb25EYXRlJ10udG9TdHJpbmcoKSlbMF0KZGVmIHRlY2hzT25zaXRlID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi50ZWNobmljaWFuc09uc2l0ZSddLnRvU3RyaW5nKCkpWzBdCgpkZWYgcmVwTWF0ZXJpYWxzID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5yZXBsYWNlZE1hdGVyaWFscyddLnRvU3RyaW5nKCkpWzBdCmRlZiByZXFNYXRlcmlhbHMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJlcXVpcmVkTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF0KCmRlZiB0cmFuc2l0aW9uQ2hlY2sgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmNoZWNrQW5kQ29uZmlybSddLnRvU3RyaW5nKCkpWzBdCgpkZWYgbHVtcFN1bVByaWNlID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5sdW1wU3VtUHJpY2UnXS50b1N0cmluZygpKVswXQoKZGVmIGVycm9yTWFuZGF0b3J5RmllbGRzID0gbmV3IEFycmF5TGlzdCgpCmRlZiBlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWRGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIHdhcm5pbmdFbXB0eUZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKQoKLypPUC0xMDM4OiBFc2VndW8gbGEgdmVyaWZpY2EgZGVpIGNhbXBpIG9iYmxpZ2F0b3JpIHNvbG8gc2UgaWwgdGlja2V0IHN1IGN1aSBzdG8gZXNlZ3VlbmRvIGxhIHRyYW5zYXppb25lIG5vbiDDqCBzdGF0byBjaGl1c28gaW4gYXV0b21hdGljbyBkYWwgc2lzdGVtYSovCmxvZy5kZWJ1ZyAiaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKTogIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkKbG9nLmRlYnVnICJjaGVjazogIiArICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKQppZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpPT1udWxsIHx8ICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKSl7CiAgICAvL09QQUFfTFVNUF9TVU1fUFJJQ0UKICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobHVtcFN1bVByaWNlKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobHVtcFN1bVByaWNlKSA9PSAiIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGx1bXBTdW1QcmljZSkudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICBlcnJvcnMgPSB0cnVlCiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLmx1bXBTdW1QcmljZSddLnRvU3RyaW5nKCkpCiAgICB9CgogICAgLy9PUEFBX1JFUExBQ0VEX01BVEVSSUFMUwogICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBNYXRlcmlhbHMpID09ICIiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwTWF0ZXJpYWxzKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgIGxvZy5kZWJ1ZyAid2FybmluZ3MgdHJ1ZSIKICAgICAgICB3YXJuaW5ncyA9IHRydWUKICAgICAgICB3YXJuaW5nRW1wdHlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLnJlcGxhY2VkTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSkKICAgIH0KICAgIC8vT1BBQV9SRVFVSVJFRF9NQVRFUklBTFMKICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVxTWF0ZXJpYWxzKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVxTWF0ZXJpYWxzKSA9PSAiIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcU1hdGVyaWFscykudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICBsb2cuZGVidWcgIndhcm5pbmdzIHRydWUiCiAgICAgICAgd2FybmluZ3MgPSB0cnVlCiAgICAgICAgd2FybmluZ0VtcHR5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5yZXF1aXJlZE1hdGVyaWFscyddLnRvU3RyaW5nKCkpCiAgICB9CgoKICAgIC8vT1BBQV9BU1NFVAogICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldCk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0KSA9PSAiIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0KS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgIGVycm9ycyA9IHRydWUKICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YuYXNzZXQnXS50b1N0cmluZygpKQogICAgfQogICAgLy9PUEFBX0FTU0VUX1NUQVRVU19QUkUKICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXRTdGF0dXNQcmUpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldFN0YXR1c1ByZSkgPT0gIiIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldFN0YXR1c1ByZSkudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICBlcnJvcnMgPSB0cnVlCiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLmFzc2V0U3RhdHVzUHJlJ10udG9TdHJpbmcoKSkKICAgIH0KICAgIC8vT1BBQV9BU1NFVF9TVEFUVVNfUE9TVAogICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldFN0YXR1c1Bvc3QpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldFN0YXR1c1Bvc3QpID09ICIiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXRTdGF0dXNQb3N0KS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgIGVycm9ycyA9IHRydWUKICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YuYXNzZXRTdGF0dXNQb3N0J10udG9TdHJpbmcoKSkKICAgIH0KICAgIC8vT1BBQV9SSVNLX09OU0lURQogICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyaXNrKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmlzaykgPT0gIiIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyaXNrKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgIGVycm9ycyA9IHRydWUKICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2Yucmlza09uc2l0ZSddLnRvU3RyaW5nKCkpCiAgICB9CiAgICAvL09QQUFfUklTS19ERVNDUklQVElPTgogICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyaXNrKS50b1N0cmluZygpLmVxdWFscygiWWVzIikgJiYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmlza0Rlc2NyaXB0aW9uKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmlza0Rlc2NyaXB0aW9uKSA9PSAiIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJpc2tEZXNjcmlwdGlvbikudG9TdHJpbmcoKS5lcXVhbHMoIiIpKSl7CiAgICAgICAgZXJyb3JzID0gdHJ1ZQogICAgICAgIGVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5yaXNrRGVzY3JpcHRpb24nXS50b1N0cmluZygpKQogICAgfQogICAgLy9PUEFBX0NVU1RPTUVSX1NJR05BVFVSRQogICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0U2lnbmF0dXJlKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VzdFNpZ25hdHVyZSkgPT0gIiIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0U2lnbmF0dXJlKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgIGVycm9ycyA9IHRydWUKICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YuY3VzdG9tZXJTaWduYXR1cmUnXS50b1N0cmluZygpKQogICAgfQogICAgLy9PUEFBX0NVU1RPTUVSX0NPTlRBQ1RfT05TSVRFCiAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1c3RSZWYpPT1udWxsIHx8IChTdHJpbmcpaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0UmVmKSA9PSAiIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1c3RSZWYpLnRvU3RyaW5nKCkuZXF1YWxzKCIiKSl7CiAgICAgICAgZXJyb3JzID0gdHJ1ZQogICAgICAgIGVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChwcm9wZXJ0aWVzWydjZi5jdXN0Q29udGFjdE9uc2l0ZSddLnRvU3RyaW5nKCkpCiAgICB9CiAgICAvL09QQUFfVEVDSE5JQ0lBTl9TSUdOQVRVUkUKICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGVjaFNpZ25hdHVyZSk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hTaWduYXR1cmUpID09ICIiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGVjaFNpZ25hdHVyZSkudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICBlcnJvcnMgPSB0cnVlCiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLnRlY2huaWNpYW5TaWduYXR1cmUnXS50b1N0cmluZygpKQogICAgfQogICAgLy8xNS4xMi4yMDIwIEFGIC0gdG9sdGEgb2JibGlnYXRvcmlldMOgIHN1aSBjYW1waSBPUF9LTVMgZSBPUF9UUkFWRUxfSE9VUlMgcG9pY2jDqCBvcmEgbGEgcmljaGllc3RhIHV0ZW50aSDDqCBkaSBpbXBsZW1lbnRhcmU6CiAgICAvL0NpbnppYSBTYWxpdHVybzogZG92cmViYmVybyBlc3NlcmUgb2JibGlnYXRvcmkgbGFkZG92ZSBkYSBjb250cmF0dG8gaWwgZm9ybml0b3JlIG5vbiBoYSBpbCBkaXJpdHRvIGZpc3NvIGRpIGNoaWFtYXRhCiAgICAvL09QQUFfS01TCiAgICAvKmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoa21zKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoa21zKSA9PSAiIiB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGttcykudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICBlcnJvcnMgPSB0cnVlCiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLmttcyddLnRvU3RyaW5nKCkpCiAgICB9Ki8KICAgIC8vT1BBQV9UUkFWRUxfSE9VUlMKICAgIC8qaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmF2ZWxIKT09bnVsbCB8fCAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhdmVsSCkgPT0gIiIgfHwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmF2ZWxIKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgIGVycm9ycyA9IHRydWUKICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQocHJvcGVydGllc1snY2YudHJhdmVsSG91cnMnXS50b1N0cmluZygpKQogICAgfSovCiAgICAvL09QQUFfRVhFQ1VUSU9OX0RBVEUKICAgIGlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZXhlY3V0aW9uRGF0ZSk9PW51bGwgfHwgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGV4ZWN1dGlvbkRhdGUpID09ICIiIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZXhlY3V0aW9uRGF0ZSkudG9TdHJpbmcoKS5lcXVhbHMoIiIpKXsKICAgICAgICBlcnJvcnMgPSB0cnVlCiAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKHByb3BlcnRpZXNbJ2NmLmV4ZWN1dGlvbkRhdGUnXS50b1N0cmluZygpKQogICAgfQoKICAgIC8vSm9iIFN0YXJ0ZWQgKyBKb2IgQ29tcGxldGVkIGRpIG9nbmkgb2dnZXR0byBUZWNoX09uU2l0ZV9SZXBvcnQgYXNzb2NpYXRvIGFsIGNhbXBvIE9QQUFfVEVDSFNfT05TSVRFCiAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hzT25zaXRlKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGVjaHNPbnNpdGUpICE9ICIiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hzT25zaXRlKS50b1N0cmluZygpLmVxdWFscygiIikpewogICAgICAgIC8qQ2ljbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBhc3NvY2lhdGkgYWwgY2FtcG8qLwogICAgICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50cwogICAgICAgIENsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlIik7ICAKICAgICAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CiAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTsKICAgICAgICBkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTsKCiAgICAgICAgZGVmIHRlY2hzT25zaXRlRmllbGQgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hzT25zaXRlKQoJCWxvZy5kZWJ1ZyAidGVjaHNPbnNpdGVGaWVsZDogIiArIHRlY2hzT25zaXRlRmllbGQKICAgICAgICBmb3IodGVjaG5pY2lhbiBpbiB0ZWNoc09uc2l0ZUZpZWxkKXsKICAgICAgICAgICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0CiAgICAgICAgICAgIGRlZiB0ZWNoT25zaXRlPXRlY2huaWNpYW4udG9TdHJpbmcoKQogICAgICAgICAgICBkZWYgdGVjaE9uc2l0ZUtleSA9IHRlY2hPbnNpdGUuc3Vic3RyaW5nKHRlY2hPbnNpdGUuaW5kZXhPZignKCcpKzEsdGVjaE9uc2l0ZS5pbmRleE9mKCcpJykpCiAgICAgICAgICAgIGRlZiB0ZWNoT25zaXRlT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHRlY2hPbnNpdGVLZXkpCiAgICAgICAgICAgIC8vZ2V0ICJKb2IgU3RhcnRlZCIgZm9yIHRoYXQgVGVjaG5pY2lhbgogICAgICAgICAgICBkZWYgb2JUcmlhZ2UKICAgICAgICAgICAgZGVmIHRlY2hKb2JTdGFydGVkCiAgICAgICAgICAgIGRlZiB0ZWNoSm9iQ29tcGxldGVkCiAgICAgICAgICAgIGRlZiB0ZWNoUmVmLCB0ZWNoLCB0ZWNoUmVmS2V5LCB0ZWNoUmVmT2JqZWN0LCB0ZWNoUmVmTmFtZQogICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaE9uc2l0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2hPblNpdGUuam9iU3RhcnRlZCddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHRlY2hPbnNpdGVPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai50ZWNoT25TaXRlLmpvYlN0YXJ0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkKICAgICAgICAgICAgICAgIHRlY2hKb2JTdGFydGVkID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgbG9nLmRlYnVnIHRlY2hKb2JTdGFydGVkIAogICAgICAgICAgICAvL2dldCAiSm9iIENvbXBsZXRlZCIgZm9yIHRoYXQgVGVjaG5pY2lhbgogICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaE9uc2l0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2hPblNpdGUuam9iQ29tcGxldGVkJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4odGVjaE9uc2l0ZU9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnRlY2hPblNpdGUuam9iQ29tcGxldGVkJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpCiAgICAgICAgICAgICAgICB0ZWNoSm9iQ29tcGxldGVkID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgbG9nLmRlYnVnIHRlY2hKb2JDb21wbGV0ZWQKICAgICAgICAgICAgLy9nZXQgIlRlY2huaWNpYW5fUkVGIiBmb3IgdGhhdCBUZWNobmljaWFuCiAgICAgICAgICAgIGxvZy5kZWJ1ZyAidGVjaE9uc2l0ZU9iamVjdDogIiArIHRlY2hPbnNpdGVPYmplY3QKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoT25zaXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoudGVjaE9uc2l0ZS50ZWNobmljaWFuUmVmJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoT25zaXRlT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoudGVjaE9uc2l0ZS50ZWNobmljaWFuUmVmJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpCiAgICAgICAgICAgICAgICB0ZWNoUmVmID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIHRlY2ggPSB0ZWNoUmVmLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyAidGVjaDogIiArIHRlY2gKICAgICAgICAgICAgICAgIHRlY2hSZWZLZXkgPSB0ZWNoLnN1YnN0cmluZyh0ZWNoLmluZGV4T2YoJygnKSsxLHRlY2guaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgbG9nLmRlYnVnICJ0ZWNoUmVmS2V5OiAiICsgdGVjaFJlZktleQogICAgICAgICAgICAgICAgdGVjaFJlZk9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihwcm9wZXJ0aWVzWydpc2NoZW1hLmFhJ10udG9TdHJpbmcoKSArICItIiArIHRlY2hSZWZLZXkpCiAgICAgICAgICAgICAgICB0ZWNoUmVmTmFtZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoUmVmT2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmoudGVjaG5pY2lhbi5uYW1lJ10udG9TdHJpbmcoKSkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnRvU3RyaW5nKCkKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgIAkJbG9nLmRlYnVnIHRlY2hSZWZOYW1lCgogICAgICAgICAgICBpZighdGVjaEpvYlN0YXJ0ZWQgfHwgIXRlY2hKb2JDb21wbGV0ZWQpewogICAgICAgICAgICAgICAgZXJyb3JzID0gdHJ1ZQogICAgICAgICAgICAgICAgZXJyb3JKb2JTdGFydGVkQ29tcGxldGVkRmllbGRzLmFkZCh0ZWNoUmVmTmFtZS5zdWJzdHJpbmcodGVjaFJlZk5hbWUuaW5kZXhPZignKCcpKzEsdGVjaFJlZk5hbWUuaW5kZXhPZignKScpKSkKICAgICAgICAgICAgfSAgICAKICAgICAgICAgfSAgICAKICAgIH0KCiAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpCgogICAgaWYgKCFlcnJvcnMgJiYgIXdhcm5pbmdzKXsKICAgICAgICByZXR1cm4gdHJ1ZQogICAgfWVsc2V7CiAgICAgICAgaWYoIWVycm9ycyAmJiB3YXJuaW5ncyl7CiAgICAgICAgICAgIC8vU2UgY2kgc29ubyBzb2xvIHdhcm5pbmdzIHZlcmlmaWNvIHNlIGwndXRlbnRlIGhhIGdpw6AgZGljaGlhcmF0byBkaSB2b2xlciBwcm9zZWd1aXJlIGNvbXVucXVlCiAgICAgICAgICAgIC8vIC0gdHJhbnNpdGlvbiBmaWVsZCAiT1BBQV9DSEVDS19BTkRfQ09ORklSTSI9IlllcyIKICAgICAgICAgICAgLy8gLSBpbiBjYXNvIGNvbnRyYXJpbyBpbnZpbyBpIHdhcm5pbmcgYSBGRQoKICAgICAgICAgICAgLy9sb2cuZGVidWcgInRyYW5zaXRpb25DaGVjazogIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKQogICAgICAgICAgICAvL2xvZy5kZWJ1ZyAicmVzdWx0OiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLnRvU3RyaW5nKCkuZXF1YWxzKCJZZXMiKQogICAgICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykudG9TdHJpbmcoKS5lcXVhbHMoIlllcyIpKXsKICAgICAgICAgICAgICAgIC8vbG9nLmRlYnVnICJyZXR1cm4gdHJ1ZSIKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgZGVmIHdMaXN0ID0gbmV3IEFycmF5TGlzdCgpCgogICAgICAgICAgICAgICAgaWYod2FybmluZ0VtcHR5RmllbGRzLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1FbXB0eSA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZCgiVyIpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKCJDT05GSVJNX0VNUFRZX0ZJRUxEUyIpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKG51bGwpCiAgICAgICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKHdhcm5pbmdFbXB0eUZpZWxkcykKCiAgICAgICAgICAgICAgICAgICAgd0xpc3QuYWRkKHdMaXN0Q29uZmlybUVtcHR5KQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIG91dHB1dC5hZGQod0xpc3QpCiAgICAgICAgICAgICAgICBsb2cuZGVidWcgInRocm93IGV4Y2VwdGlvbjogIiArIG91dHB1dC50b1N0cmluZygpCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IlciOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQogICAgICAgICAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJXIiwgb3V0cHV0LnRvU3RyaW5nKCkpICAgCiAgICAgICAgICAgIH0KCiAgICAgICAgfQogICAgICAgIGlmKGVycm9ycyAmJiAhd2FybmluZ3MpewogICAgICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KCkKCiAgICAgICAgICAgIGlmKGVycm9yTWFuZGF0b3J5RmllbGRzLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgZGVmIGVMaXN0TWFuZGF0b3J5ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoIkUiKQogICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKCJNQU5EQVRPUllfRklFTERTIikKICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChudWxsKQogICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKGVycm9yTWFuZGF0b3J5RmllbGRzKQogICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0TWFuZGF0b3J5KQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZihlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWRGaWVsZHMuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICBkZWYgZUxpc3RTdGFydEVuZCA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQoIkUiKQogICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQoIk1JU1NJTkdfT05TSVRFX1NUQVJUX0VORF9ERVRBSUxTIikKICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKG51bGwpCiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kLmFkZChlcnJvckpvYlN0YXJ0ZWRDb21wbGV0ZWRGaWVsZHMpCiAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RTdGFydEVuZCkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgb3V0cHV0LmFkZChlTGlzdCkKICAgICAgICAgICAgbG9nLmRlYnVnICJ0aHJvdyBleGNlcHRpb246ICIgKyBvdXRwdXQudG9TdHJpbmcoKQogICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IkUiOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQogICAgICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oIkUiLCBvdXRwdXQudG9TdHJpbmcoKSkgICAKICAgICAgICB9CiAgICAgICAgaWYoZXJyb3JzICYmIHdhcm5pbmdzKXsKICAgICAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICBpZihlcnJvck1hbmRhdG9yeUZpZWxkcy5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgIGRlZiBlTGlzdE1hbmRhdG9yeSA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKCJFIikKICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZCgiTUFOREFUT1JZX0ZJRUxEUyIpCiAgICAgICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQobnVsbCkKICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChlcnJvck1hbmRhdG9yeUZpZWxkcykKICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdE1hbmRhdG9yeSkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYoZXJyb3JKb2JTdGFydGVkQ29tcGxldGVkRmllbGRzLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgZGVmIGVMaXN0U3RhcnRFbmQgPSBuZXcgQXJyYXlMaXN0KCkKICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKCJFIikKICAgICAgICAgICAgICAgIGVMaXN0U3RhcnRFbmQuYWRkKCJNSVNTSU5HX09OU0lURV9TVEFSVF9FTkRfREVUQUlMUyIpCiAgICAgICAgICAgICAgICBlTGlzdFN0YXJ0RW5kLmFkZChudWxsKQogICAgICAgICAgICAgICAgZUxpc3RTdGFydEVuZC5hZGQoZXJyb3JKb2JTdGFydGVkQ29tcGxldGVkRmllbGRzKQogICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0U3RhcnRFbmQpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKHdhcm5pbmdFbXB0eUZpZWxkcy5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgIGRlZiB3TGlzdENvbmZpcm1FbXB0eSA9IG5ldyBBcnJheUxpc3QoKQogICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKCJXIikKICAgICAgICAgICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZCgiQ09ORklSTV9FTVBUWV9GSUVMRFMiKQogICAgICAgICAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKG51bGwpCiAgICAgICAgICAgICAgICB3TGlzdENvbmZpcm1FbXB0eS5hZGQod2FybmluZ0VtcHR5RmllbGRzKQoKICAgICAgICAgICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eSkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgb3V0cHV0LmFkZChlTGlzdCkKICAgICAgICAgICAgb3V0cHV0LmFkZCh3TGlzdCkKICAgICAgICAgICAgbG9nLmRlYnVnICJ0aHJvdyBleGNlcHRpb246ICIgKyBvdXRwdXQudG9TdHJpbmcoKQogICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IldFIjoiJyArIG91dHB1dC50b1N0cmluZygpICsgJyJ9JykKICAgICAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJXRSIsIG91dHB1dC50b1N0cmluZygpKSAgCiAgICAgICAgfQogICAgfQp9Cg==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">9fe0fa5191d4b6a91ba7485380ff8d0a9fda8fe7</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IFJFU1QgQVBJOiBPUCBnZW5lcmF6aW9uZSBSYXBwb3J0byBkaSBpbnRlcnZlbnRv</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxubG9nLmRlYnVnIFwiT25TaXRlIFJlcG9ydCBwZXIgaXNzdWU6IFwiICsgaXNzdWUua2V5XG4vKiBSRVNUIEFQSSBwZXIgR2VuZXJhemlvbmUgQWxsZWdhdG8gUmFwcG9ydG8gZGkgSW50ZXJ2ZW50byAqL1xucmVxdWVzdE1ldGhvZCA9IFwiUFVUXCI7XG4vKlNjcmlwdCBWYXJpYWJsZXMqL1xuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0xNDA2MlwiKVxuXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5cbi8qUmltb3ppb25lIGFsbGVnYXRvIHJhcHBvcnRvIGRpIGludGVydmVudG8gYXBwZW5hIGNyZWF0byovXG4vKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG5cbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTtcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcblxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcblxuQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG5kZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG5cbi8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSBcIiBhcm91bmQgdmFsdWUgKi9cbmRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5OYW1lIExJS0UgXFxcIlJhcHBvcnRvIGRpIGludGVydmVudG9cXFwiIEFORCBcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpICsgXCIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSBcIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIpXCIpOyAvLyBTZWUgdGhlIGNvbXBsZXRlIGxpc3Qgb2YgcG9zc2libGUgSVFMIG9uIHRoZSBJbnNpZ2h0IFF1ZXJ5IExhbmd1YWdlIGRvY3VtZW50YXRpb24gcGFnZVxuLyogSWYgdGhpcyBpcyBhIG1hbmRhdG9yeSBmaWVsZCB5b3Ugc2hvdWxkIGJlIGFibGUgdG8gZG8gdGhpczogKi9cbmxvZy5kZWJ1ZyBcIklRTDogXCIgKyBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5OYW1lIExJS0UgXFxcIlJhcHBvcnRvIGRpIGludGVydmVudG9cXFwiIEFORCBcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpICsgXCIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSBcIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIpXCJcblxuLyohIURhIHJpbXVvdmVyZSBhcHBlbmEgcmlzb2x0aSBpIGJ1ZyEhKi9cbmlmKChvYmplY3RzID09IG51bGwgfHwgb2JqZWN0cy5zaXplPT0wKSAmJiAhaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5wbGFubmVkTWFpbnRlbmFuY2UnXSkpe1xuICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL0FBL3RpY2tldC9cIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIvYXR0YWNobWVudC9vbnNpdGVcIlxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVcmw6IFwiICsgYmFzZVVSTFxuXG4gICAgVVJMIHVybFxuICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcblxuICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkdFTkVSQVRFLU9OU0lURVJFUE9SVFwiKVxuICAgICAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICB9XG5cbn1cbiIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeQppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQpDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRykKCklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTsKQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpOwpkZWYgcmVxdWVzdE1ldGhvZApkZWYgYmFzZVVSTApsb2cuZGVidWcgIk9uU2l0ZSBSZXBvcnQgcGVyIGlzc3VlOiAiICsgaXNzdWUua2V5Ci8qIFJFU1QgQVBJIHBlciBHZW5lcmF6aW9uZSBBbGxlZ2F0byBSYXBwb3J0byBkaSBJbnRlcnZlbnRvICovCnJlcXVlc3RNZXRob2QgPSAiUFVUIjsKCmJhc2VVUkwgPSAiaHR0cDovLyIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArICIvb3AvcmVzdC9hdXRvbWF0aW9uL0FBL3RpY2tldC8iICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyAiL2F0dGFjaG1lbnQvb25zaXRlIgpsb2cuZGVidWcgImJhc2VVcmw6ICIgKyBiYXNlVVJMCgpVUkwgdXJsCnVybCA9IG5ldyBVUkwoYmFzZVVSTCkKSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpOwpjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eSgiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL2pzb24iKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoIkFjY2VwdCIsICIqLyoiKTsKY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTsKY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpOwpjb25uZWN0aW9uLmNvbm5lY3QoKTsKbG9nLmRlYnVnICJSZXNwb25zZUNvZGU6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkKbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKCmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCmRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKQpkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpCgppZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoIjIwMCIpKXsKICAgIGxvZy5kZWJ1ZyAidXJsOiAiICsgdXJsCiAgICBsb2cuZGVidWcgIlJlc3BvbnNlQ29kZToiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKQogICAgbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKICAgIGVMaXN0RXJyb3JzLmFkZCgiRSIpCiAgICBlTGlzdEVycm9ycy5hZGQoIkdFTkVSQVRFLU9OU0lURVJFUE9SVCIpCiAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyAiICIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpKQogICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncykKICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycykKCiAgICBvdXRwdXQuYWRkKGVMaXN0KQogICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigneyJFIjoiJyArIG91dHB1dC50b1N0cmluZygpICsgJyJ9JykKICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiRSIsIG91dHB1dC50b1N0cmluZygpKQp9Cg==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">b734e2c5-1436-43e7-ba9d-53f2ba06c457</arg>
              <arg name="FIELD_NOTES">YCFgQ3JlYXRlIFNOICYgU08gZm9yIG9sZCB0aWNrZXRzICsgZm9yIENvbXBsZXRlZCBkdXJpbmcgTWFpbnRlbmFuY2U=</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xuXG5kZWYgU04gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfU0FQX1NFUlZJQ0VfTk9USUZJQ0FUSU9OXCIpWzBdXG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcblxuVVJMIHVybFxuSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvblxuXG5pZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKFNOKSA9PSBudWxsICYmIGlzc3VlLmlzc3VlVHlwZS5uYW1lICE9IFwiUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXRcIil7XG4gICAgcmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuXG4gICAgZGVmIGJvZHlfcmVxID0gW11cbiAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXG4gICAgICAgIFwic3RhdHVzXCI6IFwiSU5QXCJcbiAgICBdIFxuXG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL3NlcnZpY2Uvbm90aWZpY2F0aW9uXCJcblxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxuICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNOOiBcIiArIGJvZHlfcmVxXG4gICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxuICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgIFxuICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG4gICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcblxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TTi1VUERBVEVcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICB9ZWxzZXtcbiAgICAgICAgLyoqIFNFUlZJQ0UgT1JERVIgQ1JFQVRJT04gKiovXG4gICAgICAgIGJvZHlfcmVxID0gW1xuICAgICAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXlcbiAgICAgICAgXSBcbiAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL29yL3VwZGF0ZS9zZXJ2aWNlL29yZGVyXCJcblxuICAgICAgICBsb2cuZGVidWcgXCJiYXNlVVJMIFNPOiBcIiArIGJhc2VVUkxcbiAgICAgICAgbG9nLmRlYnVnIFwiYm9keV9yZXEgU086IFwiICsgYm9keV9yZXFcbiAgICAgICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgICAgICBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG4gICAgICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgICAgICBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAxXCIpICYmICFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxuICAgIFx0XHRsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICAgICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICBcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtU0FQLVNPLUNSRUFURVwiKVxuICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgIH1cbiAgICB9XG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">37c2d78492ac54794b8917d58342d465c219be98</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IFJFU1QgQVBJOiBPUCBFbWFpbCBOb3RpZmljYXRpb246IE9OU0lURV9SRVBPUlQgLSBvbmx5IElGIE9QQUFfQVVUT01BVElDQUxMWV9DTE9TRUQhPVllcyBBTkQgc2VuZE1haWwhPU5PIE1BSUwgQU5EIGNpIHNvbm8gdGlja2V0IGNvbGxlZ2F0aS4gLS0tLT4gRElTQUJMRUQgc3UgdHJhbnNhemlvbmUgY29tcGxldGUgLSB2aWVuZSBmYXR0byBtYW51YWxtZW50ZSBkYSBTRU5EIE9OU0lURSBSRVBPUlQ=</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGlua1xuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiBhdXRvbWF0aWNhbGx5Q2xvc2VkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q2xvc2VkJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBzZW5kTWFpbFRvID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zZW5kTWFpbFRvJ10udG9TdHJpbmcoKSlbMF1cbmRlZiBzZW5kTWFpbFRvUmVjID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zZW5kTWFpbFRvUmVjaXBpZW50cyddLnRvU3RyaW5nKCkpWzBdXG5kZWYgb25zaXRlUmVwb3J0RGF0ZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi53Zk9uc2l0ZVJlcG9ydCddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5kZWYgcmVsYXRlc0luSXNzdWVMaW5rPWZhbHNlXG5kZWYgcmVsYXRlc091dElzc3VlTGluaz1mYWxzZVxuZGVmIGxpbmtlZFRpY2tldHM9bmV3IEFycmF5TGlzdCgpXG5kZWYgYm9keV9yZXFcbmRlZiBzZW5kbWFpbD10cnVlXG5cbmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCk9PW51bGwgfHwgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIikpe1xuXG4gICAgLypPUC0xMDM4OiB2ZXJpZmljYSB0aWNrZXQgY29sbGVnYXRpKi9cbiAgICBMaXN0PElzc3VlTGluaz4gYWxsSW5Jc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0SW53YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxJbklzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG5cbiAgICAgICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgcmVsYXRlc0luSXNzdWVMaW5rPXRydWVcbiAgICAgICAgICAgIGxpbmtlZFRpY2tldHMuYWRkKGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKS50b1N0cmluZygpKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiSXNzdWUgY29uIHJlbGF0ZXNJbklzc3VlTGlua1wiXG4gICAgICAgIH1cbiAgICB9XG4gICAgTGlzdDxJc3N1ZUxpbms+IGFsbE91dElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuXG4gICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgIHJlbGF0ZXNPdXRJc3N1ZUxpbms9dHJ1ZVxuICAgICAgICAgICAgbGlua2VkVGlja2V0cy5hZGQoaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkudG9TdHJpbmcoKSlcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIklzc3VlIGNvbiByZWxhdGVzT3V0SXNzdWVMaW5rXCJcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBsb2cuZGVidWcgXCJpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCk6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKS50b1N0cmluZygpXG4gICAgaWYoKHJlbGF0ZXNJbklzc3VlTGluayB8fCByZWxhdGVzT3V0SXNzdWVMaW5rKSAmJiAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydjZi5vcHRpb24uc2VuZE1haWxUby5ub0VtYWlsJ10udG9TdHJpbmcoKSkgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydjZi5vcHRpb24uc2VuZE1haWxUby5jdXJyZW50UmVwb3J0J10udG9TdHJpbmcoKSkpe1xuICAgICAgICAvL09QLTEwMzg6IGludmlhcmUgc29sbyBsYSBtYWlsIGNvbiBpbCByYXBwb3J0byBkaSBpbnRlcnZlbnRvIGRlbCB0aWNrZXQgY29ycmVudGVcbiAgICAgICAgYm9keV9yZXEgPSBbXG4gICAgICAgICAgICBcInRlbXBsYXRlTmFtZVwiOiBwcm9wZXJ0aWVzWyd0dC5vblNpdGVSZXBvcnQnXS50b1N0cmluZygpLFxuICAgICAgICAgICAgXCJwZWNcIjogZmFsc2UsXG4gICAgICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleSxcbiAgICAgICAgICAgIFwiYWRkaXRpb25hbFJlY2lwaWVudHNcIjogaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvUmVjKS50b1N0cmluZygpXG4gICAgICAgIF1cbiAgICAgICAgLyozMS4wNy4yMDIwIEFGOiBuZWxsYSB0cmFuc2F6aW9uZSBjb21wbGV0ZSBOT04gaW52aWFyZSBtYWlsIGxhIG1haWwgcGVyIGkgdGlja2V0IGNvbiBjb2xsZWdhdGkgLSBpbCByYXBwb3J0byBkaSBpbnRlcnZlbnRvIGRlaSB0aWNrZXQgXCJmaWdsaVwiIHZpZW5lIGdlbmVyYXRvIGRvcG8gbCdpbnZpbyBkZWxsYSBtYWlsIHN1bCBcInBhZHJlXCIgcXVpbmRpIG5vbiB2ZXJyZWJiZSBpbmNsdXNvIG5lbGxhIG1haWwqL1xuICAgICAgICAvKkwnaW52aW8gZGVsbGEgbWFpbCB2ZXJyXHUwMGUwIGZhdHRvIHN1Y2Nlc3NpdmFtZW50ZSByaXNwZXR0byBhbGxhIGNoaXVzdXJhIGNvbiBcIlNlbmQgT25TaXRlIFJlcG9ydFwiKi9cbiAgICAgICAgc2VuZG1haWw9ZmFsc2VcbiAgICB9ZWxzZSBpZigocmVsYXRlc0luSXNzdWVMaW5rIHx8IHJlbGF0ZXNPdXRJc3N1ZUxpbmspICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLm5vRW1haWwnXS50b1N0cmluZygpKSAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLmN1cnJlbnRSZXBvcnQnXS50b1N0cmluZygpKSl7XG4gICAgICAgIC8vT1AtMTAzODogaW52aWFyZSBsYSBtYWlsIGNvbiB0dXR0aSBpIHJhcHBvcnRpIGRpIGludGVydmVudG8gZGVpIHRpY2tldCBjb2xsZWdhdGlcbiAgICAgICAgYm9keV9yZXEgPSBbXG4gICAgICAgICAgICBcInRlbXBsYXRlTmFtZVwiOiBwcm9wZXJ0aWVzWyd0dC5vblNpdGVSZXBvcnQnXS50b1N0cmluZygpLFxuICAgICAgICAgICAgXCJwZWNcIjogZmFsc2UsXG4gICAgICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleSxcbiAgICAgICAgICAgIFwibGlua2VkVGlja2V0c1wiOiBsaW5rZWRUaWNrZXRzLFxuICAgICAgICAgICAgXCJhZGRpdGlvbmFsUmVjaXBpZW50c1wiOiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG9SZWMpLnRvU3RyaW5nKClcbiAgICAgICAgXVxuICAgICAgICAvKjMxLjA3LjIwMjAgQUY6IG5lbGxhIHRyYW5zYXppb25lIGNvbXBsZXRlIE5PTiBpbnZpYXJlIG1haWwgbGEgbWFpbCBwZXIgaSB0aWNrZXQgY29uIGNvbGxlZ2F0aSAtIGlsIHJhcHBvcnRvIGRpIGludGVydmVudG8gZGVpIHRpY2tldCBcImZpZ2xpXCIgdmllbmUgZ2VuZXJhdG8gZG9wbyBsJ2ludmlvIGRlbGxhIG1haWwgc3VsIFwicGFkcmVcIiBxdWluZGkgbm9uIHZlcnJlYmJlIGluY2x1c28gbmVsbGEgbWFpbCovXG4gICAgICAgIC8qTCdpbnZpbyBkZWxsYSBtYWlsIHZlcnJcdTAwZTAgZmF0dG8gc3VjY2Vzc2l2YW1lbnRlIHJpc3BldHRvIGFsbGEgY2hpdXN1cmEgY29uIFwiU2VuZCBPblNpdGUgUmVwb3J0XCIqL1xuICAgICAgICBzZW5kbWFpbD1mYWxzZVxuICAgIH1lbHNlIGlmKCFyZWxhdGVzSW5Jc3N1ZUxpbmsgJiYgIXJlbGF0ZXNPdXRJc3N1ZUxpbmspe1xuICAgICAgICAvKkFGIDIwMjAwNzI5IC0gc3UgRkFBQyBTZXJ2aWNlIGxhIG5vdGlmaWNhIGNvbiBpbCByYXBwb3J0byBkaSBpbnRlcnZlbnRvIHZpZW5lIGludmlhdGEgc29sbyBzdSBlc3BsaWNpdGEgZGVjaXNpb25lIGRlbGwndXRlbnRlIC0gY2hlIHNwaW5nZXJcdTAwZTAgU0VORCBPTlNJVEUgUkVQT1JUIGRvcG8gYXZlciBjaGl1c28gaWwgdGlja2V0LiBRdWluZGkgc2Ugbm9uIGNpIHNvbm8gdGlja2V0IGNvbGxlZ2F0aSBzZXR0aWFtbyBzZW5kbWFpbD1mYWxzZSovXG4gICAgICAgIHNlbmRtYWlsPWZhbHNlXG4gICAgICAgIGJvZHlfcmVxID0gW1xuICAgICAgICAgICAgXCJ0ZW1wbGF0ZU5hbWVcIjogcHJvcGVydGllc1sndHQub25TaXRlUmVwb3J0J10udG9TdHJpbmcoKSxcbiAgICAgICAgICAgIFwicGVjXCI6IGZhbHNlLFxuICAgICAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXG4gICAgICAgICAgICBcImFkZGl0aW9uYWxSZWNpcGllbnRzXCI6IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUb1JlYykudG9TdHJpbmcoKVxuICAgICAgICBdXG4gICAgfWVsc2V7XG4gICAgICAgIC8vT1AtMTAzODogbm9uIGludmlhcmUgbGEgbWFpbFxuICAgICAgICBzZW5kbWFpbD1mYWxzZVxuICAgIH1cbiAgICBcbiAgICBsb2cuZGVidWcgXCJzZW5kbWFpbDogXCIgKyBzZW5kbWFpbFxuICAgIGlmKHNlbmRtYWlsKXtcbiAgICAgICAgLyogUkVTVCBBUEkgcGVyIEludmlvIE5vdGlmaWNhIEVtYWlsIE9OU0lURV9SRVBPUlQgKi9cbiAgICAgICAgcmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuXG4gICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL3RyYW5zYWN0aW9uL21haWwvc2VuZFwiXG4gICAgICAgIFVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgICAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgICAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxOiBcIiArIGJvZHlfcmVxXG4gICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cbiAgICAgICAgbG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuICAgICAgICBcbiAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgIC8vbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuXG4gICAgICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcblxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG4gICAgICAgICAgICBDbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuICAgICAgICAgICAgZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG5cbiAgICAgICAgICAgIC8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbiAgICAgICAgICAgIENsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTtcbiAgICAgICAgICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4gICAgICAgICAgICAvKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbiAgICAgICAgICAgIENsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpO1xuICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcblxuICAgICAgICAgICAgLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbiAgICAgICAgICAgIENsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcblxuICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG4gICAgICAgICAgICBkZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG5cbiAgICAgICAgICAgIC8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSBcIiBhcm91bmQgdmFsdWUgKi9cbiAgICAgICAgICAgIC8qUk9MTEJBQ0sqL1xuICAgICAgICAgICAgLypSaW1vemlvbmUgYWxsZWdhdG8gcmFwcG9ydG8gZGkgaW50ZXJ2ZW50byBhcHBlbmEgY3JlYXRvKi9cbiAgICAgICAgICAgIGRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5cXFwiTmFtZVxcXCIgPSBcXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5vYmpzLnJhcHBJbnRGQUFDJ10udG9TdHJpbmcoKSArIFwiXFxcIiBBTkQgXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSArIFwiIT10cnVlIEFORCBvYmplY3QgSEFWSU5HIGNvbm5lY3RlZFRpY2tldHMoa2V5ID0gXCIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArIFwiKVwiKTsgLy8gU2VlIHRoZSBjb21wbGV0ZSBsaXN0IG9mIHBvc3NpYmxlIElRTCBvbiB0aGUgSW5zaWdodCBRdWVyeSBMYW5ndWFnZSBkb2N1bWVudGF0aW9uIHBhZ2VcbiAgICAgICAgICAgIC8qIElmIHRoaXMgaXMgYSBtYW5kYXRvcnkgZmllbGQgeW91IHNob3VsZCBiZSBhYmxlIHRvIGRvIHRoaXM6ICovXG4gICAgICAgICAgICAvL2xvZy5pbmZvKFwiSW5zaWdodCBvYmplY3Q6IFwiICsgb2JqZWN0c1swXSk7XG5cbiAgICAgICAgICAgIGlmKG9iamVjdHNbMF0pe1xuICAgICAgICAgICAgICAgIC8qIFVQREFURSBPSkJFQ1QgREVMRVRFRCBWQUxVRSAqL1xuICAgICAgICAgICAgICAgIGRlZiBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihvYmplY3RzWzBdLmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkgIFxuICAgICAgICAgICAgICAgIGRlZiB2YWx1ZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuXG4gICAgICAgICAgICAgICAgZGVmIHZhbHVlQmVhbiA9IG9iVHJpYWdlLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpXG4gICAgICAgICAgICAgICAgdmFsdWVCZWFuLnNldFZhbHVlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlLmdldE9iamVjdFR5cGVBdHRyaWJ1dGVJZCgpKSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAvKkNsZWFuIGFjdHVhbCB2YWx1ZSovXG4gICAgICAgICAgICAgICAgdmFsdWUuY2xlYXIoKVxuICAgICAgICAgICAgICAgIHZhbHVlLmFkZCh2YWx1ZUJlYW4pO1xuICAgICAgICAgICAgICAgIG9iVHJpYWdlLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWUpXG5cbiAgICAgICAgICAgICAgICAvL1VwZGF0ZSBPSkJFQ1QgYXR0cmlidXRlIHZhbHVlXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiMS4gQ291bGQgbm90IHVwZGF0ZSBvYmplY3QgYXR0cmlidXRlIGR1ZSB0byB2YWxpZGF0aW9uIGV4Y2VwdGlvbjpcIiArIHZpZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLypSb2xsYmFjayBjb250YWJpbGl6emF6aW9uZSBpbnRlcnZlbnRvKi9cbiAgICAgICAgICAgIC8qQ2FuY2VsbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBPblNpdGVfUmF0ZV9SZXBvcnQgcmVnaXN0cmF0aSBuZWkgY2FtcGkgT1BBQV9MVU1QX1NVTV9SQVRFUywgT1BBQV9VTkFfVEFOVFVNX1JBVEVTLCBPUEFBX1RSQVZFTF9SQVRFUywgT1BBQV9MQUJPVVJfUkFURVMqL1xuICAgICAgICAgICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovXG5cbiAgICAgICAgICAgIC8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSBcIiBhcm91bmQgdmFsdWUgKi9cbiAgICAgICAgICAgIG9iamVjdHMgPSBpcWxGYWNhZGUuZmluZE9iamVjdHNCeUlRTEFuZFNjaGVtYShPUEFBLCBcIm9iamVjdFR5cGUgPSBcIiArIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydCddLnRvU3RyaW5nKCkgKyBcIiBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleT1cIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIpIEFORCBcXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVJhdGVSZXBvcnQuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyBcIlxcXCIgIT0gdHJ1ZVwiKTsgLy8gU2VlIHRoZSBjb21wbGV0ZSBsaXN0IG9mIHBvc3NpYmxlIElRTCBvbiB0aGUgSW5zaWdodCBRdWVyeSBMYW5ndWFnZSBkb2N1bWVudGF0aW9uIHBhZ2VcbiAgICAgICAgICAgIC8qIElmIHRoaXMgaXMgYSBtYW5kYXRvcnkgZmllbGQgeW91IHNob3VsZCBiZSBhYmxlIHRvIGRvIHRoaXM6ICovXG4gICAgICAgICAgICAvL2xvZy5pbmZvKFwiSW5zaWdodCBvYmplY3RzIGRhIGNhbmNlbGxhcmU6IFwiICsgb2JqZWN0cyk7XG5cbiAgICAgICAgICAgIGZvcihvYmogaW4gb2JqZWN0cyl7XG4gICAgICAgICAgICAgICAgLyogREVMRVRFIENPTk5FQ1RFRCBPQkpFQ1RTICovXG4gICAgICAgICAgICAgICAgb2JqZWN0RmFjYWRlLmRlbGV0ZU9iamVjdEJlYW4ob2JqLmdldElkKCkpOyAgXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qQ2FuY2VsbGFyZSBnbGkgaW1wb3J0aSBmb3JuaXRvcmUsIGNsaWVudGUgZSBpIHRvdGFsaSBzdSB0dXR0aSBnbGkgb2dnZXR0aSBDb21wb25lbnQgaW4gT1BBQV9SRVBMQUNFRF9NQVRFUklBTFMqL1xuICAgICAgICAgICAgZGVmIHJlcE1hdGVyaWFscyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YucmVwbGFjZWRNYXRlcmlhbHMnXS50b1N0cmluZygpKVswXVxuICAgICAgICAgICAgZGVmIHJlcE1hdExpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscylcblxuICAgICAgICAgICAgZm9yKG1hdCBpbiByZXBNYXRMaXN0KXtcbiAgICAgICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5kIGdldCBvYmplY3RcbiAgICAgICAgICAgICAgICBkZWYgY29tcG9uZW50PW1hdC50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgZGVmIGNvbXBvbmVudEtleSA9IGNvbXBvbmVudC5zdWJzdHJpbmcoY29tcG9uZW50LmluZGV4T2YoJygnKSsxLGNvbXBvbmVudC5pbmRleE9mKCcpJykpXG4gICAgICAgICAgICAgICAgZGVmIGNvbXBvbmVudE9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihjb21wb25lbnRLZXkpXG4gICAgICAgICAgICAgICAgLy9zZXQgXCJBUFBMSUVEX1RPXCIsIFwiQUNDT1VOVElOR19TVVBQTElFUl9NQVRFUklBTF9SRUZcIiwgXCJBQ0NPVU5USU5HX0NVU1RPTUVSX01BVEVSSUFMX1JFRlwiLCBcIlRPVEFMX0FNT1VOVF9TVVBQTElFUlwiLCBcIlRPVEFMX0FNT1VOVF9DVVNUT01FUlwiIHRvIG51bGwgZm9yIHRoYXQgY29tcG9uZW50XG5cbiAgICAgICAgICAgICAgICAvL0FQUExJRURfVE9cbiAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmFwcGxpZWRUbyddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgICAgICAgICAgICAgZGVmIG9iVHJpYWdlQXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICAgICAgZGVmIHZhbHVlQXBwbGllZFRvID0gb2JUcmlhZ2VBcHBsaWVkVG8uZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuIFwidmFsdWVBcHBsaWVkVG86IFwiICsgdmFsdWVBcHBsaWVkVG9cbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlQXBwbGllZFRvLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVBcHBsaWVkVG8uY2xlYXIoKSBcblxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZUFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5kZWxldGVPYmplY3RBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlQXBwbGllZFRvLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpeyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZXJyb3IoXCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOlwiICsgdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL0FDQ09VTlRJTkdfU1VQUExJRVJfTUFURVJJQUxfUkVGXG4gICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hY2NvdW50aW5nU3VwcE1hdGVyaWFsJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgICAgICBkZWYgb2JUcmlhZ2VNYXRTID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hY2NvdW50aW5nU3VwcE1hdGVyaWFsJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgICAgIGRlZiB2YWx1ZU1hdFMgPSBvYlRyaWFnZU1hdFMuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuIFwidmFsdWVNYXRTOiBcIiArIHZhbHVlTWF0U1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVNYXRTLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVNYXRTLmNsZWFyKCkgXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2VNYXRTID0gb2JqZWN0RmFjYWRlLmRlbGV0ZU9iamVjdEF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2VNYXRTLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpeyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZXJyb3IoXCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOlwiICsgdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL0FDQ09VTlRJTkdfQ1VTVE9NRVJfTUFURVJJQUxfUkVGXG4gICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hY2NvdW50aW5nQ3VzdE1hdGVyaWFsJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgICAgICBkZWYgb2JUcmlhZ2VNYXRDID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hY2NvdW50aW5nQ3VzdE1hdGVyaWFsJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgICAgIGRlZiB2YWx1ZU1hdEMgPSBvYlRyaWFnZU1hdEMuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuIFwidmFsdWVNYXRDOiBcIiArIHZhbHVlTWF0Q1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVNYXRDLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVNYXRDLmNsZWFyKCkgXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2VNYXRDID0gb2JqZWN0RmFjYWRlLmRlbGV0ZU9iamVjdEF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2VNYXRDLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpeyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZXJyb3IoXCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOlwiICsgdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy9UT1RBTF9BTU9VTlRfU1VQUExJRVJcbiAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdFN1cHAnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgICAgIGRlZiBvYlRyaWFnZVRvdFMgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdFN1cHAnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICAgICAgZGVmIHZhbHVlVG90UyA9IG9iVHJpYWdlVG90Uy5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4gXCJ2YWx1ZVRvdFM6IFwiICsgdmFsdWVUb3RTXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZVRvdFMuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVRvdFMuY2xlYXIoKSBcblxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZVRvdFMgPSBvYmplY3RGYWNhZGUuZGVsZXRlT2JqZWN0QXR0cmlidXRlQmVhbihvYlRyaWFnZVRvdFMuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSl7IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5lcnJvcihcIkNvdWxkIG5vdCB1cGRhdGUgb2JqZWN0IGF0dHJpYnV0ZSBkdWUgdG8gdmFsaWRhdGlvbiBleGNlcHRpb246XCIgKyB2aWUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vVE9UQUxfQU1PVU5UX0NVU1RPTUVSXG4gICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RDdXN0J10udG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgICAgICAgICBkZWYgb2JUcmlhZ2VUb3RDID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RDdXN0J10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgICAgIGRlZiB2YWx1ZVRvdEMgPSBvYlRyaWFnZVRvdEMuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuIFwidmFsdWVUb3RDOiBcIiArIHZhbHVlVG90Q1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVUb3RDLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVUb3RDLmNsZWFyKCkgXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2VUb3RDID0gb2JqZWN0RmFjYWRlLmRlbGV0ZU9iamVjdEF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2VUb3RDLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpeyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZXJyb3IoXCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOlwiICsgdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ICAgIFxuXG4gICAgICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgICAgICBsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXG5cbiAgICAgICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICAgICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICBcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiU0VORE1BSUxcIilcbiAgICAgICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKSlcbiAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChqc29uX29iamVjdC5tZXNzYWdlKVxuICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgLypMJ2VtYWlsIFx1MDBlOCBzdGF0YSBpbnZpYXRhIGNvcnJldHRhbWVudGUsIGFnZ2lvcm5vIGlsIGNhbXBvIE9OU0lURV9SRVBPUlQgY29uIGxhIGRhdGEgY29ycmVudGUqL1xuXG4gICAgICAgICAgICAvLyBsb2cud2FybiBcImlzc3VlIFwiK2lzc3VlLmdldEtleSgpXG4gICAgICAgICAgICBkZWYgY2Z2ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShvbnNpdGVSZXBvcnREYXRlKVxuICAgICAgICAgICAgaWYgKCFjZnYpIHtcbiAgICAgICAgICAgICAgZGVmIHQwICA9IG5ldyBqYXZhLnNxbC5UaW1lc3RhbXAoU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkpXG4gICAgICAgICAgICAgIGxvZy53YXJuIFwiU3RhcnRUaW1lID0+ICdcIit0MC50b1N0cmluZygpK1wiJ1wiXG4gICAgICAgICAgICAgIGRlZiBtdiA9IG5ldyBNb2RpZmllZFZhbHVlKG9uc2l0ZVJlcG9ydERhdGUsIHQwKVxuICAgICAgICAgICAgICBkZWYgY2ggPSBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKClcbiAgICAgICAgICAgICAgb25zaXRlUmVwb3J0RGF0ZS51cGRhdGVWYWx1ZShudWxsLCBpc3N1ZSwgbXYsIGNoKSBcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGxvZy53YXJuIFwiU3RhcnRUaW1lID09ICdcIitjZnYudG9TdHJpbmcoKStcIidcIlxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWUKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS51dGlsLkRlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvbgppbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeQppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyCmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbAoKUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKQpGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKQpwcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0gewoJcHJvcGVydGllcy5sb2FkKGl0KQp9CkNhdGVnb3J5IGxvZyA9IENhdGVnb3J5LmdldEluc3RhbmNlKCJjb20ub25yZXNvbHZlLmppcmEuZ3Jvb3Z5LlBvc3RGdW5jdGlvbiIpCmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKQoKSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpOwpDdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7CmRlZiBhdXRvbWF0aWNhbGx5Q2xvc2VkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q2xvc2VkJ10udG9TdHJpbmcoKSlbMF0KZGVmIHNlbmRNYWlsVG8gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnNlbmRNYWlsVG8nXS50b1N0cmluZygpKVswXQpkZWYgc2VuZE1haWxUb1JlYyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yuc2VuZE1haWxUb1JlY2lwaWVudHMnXS50b1N0cmluZygpKVswXQpkZWYgb25zaXRlUmVwb3J0RGF0ZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi53Zk9uc2l0ZVJlcG9ydCddLnRvU3RyaW5nKCkpWzBdCgpkZWYgcmVxdWVzdE1ldGhvZApkZWYgYmFzZVVSTAoKaW50IE9QQUEgPSBwcm9wZXJ0aWVzWydpc2NoZW1hLmFhLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKQppbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpCmRlZiByZWxhdGVzSW5Jc3N1ZUxpbms9ZmFsc2UKZGVmIHJlbGF0ZXNPdXRJc3N1ZUxpbms9ZmFsc2UKZGVmIGxpbmtlZFRpY2tldHM9bmV3IEFycmF5TGlzdCgpCmRlZiBib2R5X3JlcQpkZWYgc2VuZG1haWw9dHJ1ZQoKaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKT09bnVsbCB8fCAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKS50b1N0cmluZygpLmVxdWFscygiWWVzIikpewoKICAgIC8qT1AtMTAzODogdmVyaWZpY2EgdGlja2V0IGNvbGxlZ2F0aSovCiAgICBMaXN0PElzc3VlTGluaz4gYWxsSW5Jc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0SW53YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSkKICAgIGZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbEluSXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHsKICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpOwoKICAgICAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgIHJlbGF0ZXNJbklzc3VlTGluaz10cnVlCiAgICAgICAgICAgIGxpbmtlZFRpY2tldHMuYWRkKGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKS50b1N0cmluZygpKQogICAgICAgICAgICBsb2cuZGVidWcgIklzc3VlIGNvbiByZWxhdGVzSW5Jc3N1ZUxpbmsiCiAgICAgICAgfQogICAgfQogICAgTGlzdDxJc3N1ZUxpbms+IGFsbE91dElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSkKICAgIGZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbE91dElzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7CiAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTsKCiAgICAgICAgaWYoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNSZWxhdGVzJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICByZWxhdGVzT3V0SXNzdWVMaW5rPXRydWUKICAgICAgICAgICAgbGlua2VkVGlja2V0cy5hZGQoaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkudG9TdHJpbmcoKSkKICAgICAgICAgICAgbG9nLmRlYnVnICJJc3N1ZSBjb24gcmVsYXRlc091dElzc3VlTGluayIKICAgICAgICB9CiAgICB9CiAgICAKICAgIGxvZy5kZWJ1ZyAiaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKS50b1N0cmluZygpOiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvKS50b1N0cmluZygpCiAgICBpZigocmVsYXRlc0luSXNzdWVMaW5rIHx8IHJlbGF0ZXNPdXRJc3N1ZUxpbmspICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLm5vRW1haWwnXS50b1N0cmluZygpKSAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLmN1cnJlbnRSZXBvcnQnXS50b1N0cmluZygpKSl7CiAgICAgICAgLy9PUC0xMDM4OiBpbnZpYXJlIHNvbG8gbGEgbWFpbCBjb24gaWwgcmFwcG9ydG8gZGkgaW50ZXJ2ZW50byBkZWwgdGlja2V0IGNvcnJlbnRlCiAgICAgICAgYm9keV9yZXEgPSBbCiAgICAgICAgICAgICJ0ZW1wbGF0ZU5hbWUiOiBwcm9wZXJ0aWVzWyd0dC5vblNpdGVSZXBvcnQnXS50b1N0cmluZygpLAogICAgICAgICAgICAicGVjIjogZmFsc2UsCiAgICAgICAgICAgICJpc3N1ZUtleSI6IGlzc3VlLmtleSwKICAgICAgICAgICAgImFkZGl0aW9uYWxSZWNpcGllbnRzIjogaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvUmVjKS50b1N0cmluZygpCiAgICAgICAgXQogICAgICAgIC8qMzEuMDcuMjAyMCBBRjogbmVsbGEgdHJhbnNhemlvbmUgY29tcGxldGUgTk9OIGludmlhcmUgbWFpbCBsYSBtYWlsIHBlciBpIHRpY2tldCBjb24gY29sbGVnYXRpIC0gaWwgcmFwcG9ydG8gZGkgaW50ZXJ2ZW50byBkZWkgdGlja2V0ICJmaWdsaSIgdmllbmUgZ2VuZXJhdG8gZG9wbyBsJ2ludmlvIGRlbGxhIG1haWwgc3VsICJwYWRyZSIgcXVpbmRpIG5vbiB2ZXJyZWJiZSBpbmNsdXNvIG5lbGxhIG1haWwqLwogICAgICAgIC8qTCdpbnZpbyBkZWxsYSBtYWlsIHZlcnLDoCBmYXR0byBzdWNjZXNzaXZhbWVudGUgcmlzcGV0dG8gYWxsYSBjaGl1c3VyYSBjb24gIlNlbmQgT25TaXRlIFJlcG9ydCIqLwogICAgICAgIHNlbmRtYWlsPWZhbHNlCiAgICB9ZWxzZSBpZigocmVsYXRlc0luSXNzdWVMaW5rIHx8IHJlbGF0ZXNPdXRJc3N1ZUxpbmspICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLm5vRW1haWwnXS50b1N0cmluZygpKSAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlbmRNYWlsVG8pLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2NmLm9wdGlvbi5zZW5kTWFpbFRvLmN1cnJlbnRSZXBvcnQnXS50b1N0cmluZygpKSl7CiAgICAgICAgLy9PUC0xMDM4OiBpbnZpYXJlIGxhIG1haWwgY29uIHR1dHRpIGkgcmFwcG9ydGkgZGkgaW50ZXJ2ZW50byBkZWkgdGlja2V0IGNvbGxlZ2F0aQogICAgICAgIGJvZHlfcmVxID0gWwogICAgICAgICAgICAidGVtcGxhdGVOYW1lIjogcHJvcGVydGllc1sndHQub25TaXRlUmVwb3J0J10udG9TdHJpbmcoKSwKICAgICAgICAgICAgInBlYyI6IGZhbHNlLAogICAgICAgICAgICAiaXNzdWVLZXkiOiBpc3N1ZS5rZXksCiAgICAgICAgICAgICJsaW5rZWRUaWNrZXRzIjogbGlua2VkVGlja2V0cywKICAgICAgICAgICAgImFkZGl0aW9uYWxSZWNpcGllbnRzIjogaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzZW5kTWFpbFRvUmVjKS50b1N0cmluZygpCiAgICAgICAgXQogICAgICAgIC8qMzEuMDcuMjAyMCBBRjogbmVsbGEgdHJhbnNhemlvbmUgY29tcGxldGUgTk9OIGludmlhcmUgbWFpbCBsYSBtYWlsIHBlciBpIHRpY2tldCBjb24gY29sbGVnYXRpIC0gaWwgcmFwcG9ydG8gZGkgaW50ZXJ2ZW50byBkZWkgdGlja2V0ICJmaWdsaSIgdmllbmUgZ2VuZXJhdG8gZG9wbyBsJ2ludmlvIGRlbGxhIG1haWwgc3VsICJwYWRyZSIgcXVpbmRpIG5vbiB2ZXJyZWJiZSBpbmNsdXNvIG5lbGxhIG1haWwqLwogICAgICAgIC8qTCdpbnZpbyBkZWxsYSBtYWlsIHZlcnLDoCBmYXR0byBzdWNjZXNzaXZhbWVudGUgcmlzcGV0dG8gYWxsYSBjaGl1c3VyYSBjb24gIlNlbmQgT25TaXRlIFJlcG9ydCIqLwogICAgICAgIHNlbmRtYWlsPWZhbHNlCiAgICB9ZWxzZSBpZighcmVsYXRlc0luSXNzdWVMaW5rICYmICFyZWxhdGVzT3V0SXNzdWVMaW5rKXsKICAgICAgICAvKkFGIDIwMjAwNzI5IC0gc3UgRkFBQyBTZXJ2aWNlIGxhIG5vdGlmaWNhIGNvbiBpbCByYXBwb3J0byBkaSBpbnRlcnZlbnRvIHZpZW5lIGludmlhdGEgc29sbyBzdSBlc3BsaWNpdGEgZGVjaXNpb25lIGRlbGwndXRlbnRlIC0gY2hlIHNwaW5nZXLDoCBTRU5EIE9OU0lURSBSRVBPUlQgZG9wbyBhdmVyIGNoaXVzbyBpbCB0aWNrZXQuIFF1aW5kaSBzZSBub24gY2kgc29ubyB0aWNrZXQgY29sbGVnYXRpIHNldHRpYW1vIHNlbmRtYWlsPWZhbHNlKi8KICAgICAgICBzZW5kbWFpbD1mYWxzZQogICAgICAgIGJvZHlfcmVxID0gWwogICAgICAgICAgICAidGVtcGxhdGVOYW1lIjogcHJvcGVydGllc1sndHQub25TaXRlUmVwb3J0J10udG9TdHJpbmcoKSwKICAgICAgICAgICAgInBlYyI6IGZhbHNlLAogICAgICAgICAgICAiaXNzdWVLZXkiOiBpc3N1ZS5rZXksCiAgICAgICAgICAgICJhZGRpdGlvbmFsUmVjaXBpZW50cyI6IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2VuZE1haWxUb1JlYykudG9TdHJpbmcoKQogICAgICAgIF0KICAgIH1lbHNlewogICAgICAgIC8vT1AtMTAzODogbm9uIGludmlhcmUgbGEgbWFpbAogICAgICAgIHNlbmRtYWlsPWZhbHNlCiAgICB9CiAgICAKICAgIGxvZy5kZWJ1ZyAic2VuZG1haWw6ICIgKyBzZW5kbWFpbAogICAgaWYoc2VuZG1haWwpewogICAgICAgIC8qIFJFU1QgQVBJIHBlciBJbnZpbyBOb3RpZmljYSBFbWFpbCBPTlNJVEVfUkVQT1JUICovCiAgICAgICAgcmVxdWVzdE1ldGhvZCA9ICJQT1NUIjsKCiAgICAgICAgYmFzZVVSTCA9ICJodHRwOi8vIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgIi9vcC9yZXN0L2ppcmEvQUEvdHJhbnNhY3Rpb24vbWFpbC9zZW5kIgogICAgICAgIFVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpCiAgICAgICAgSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTsKICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7CiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLTgiKTsKICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eSgiQWNjZXB0IiwgIiovKiIpOwogICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7CiAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpOwogICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtCiAgICAgICAgbG9nLmRlYnVnICJib2R5X3JlcTogIiArIGJvZHlfcmVxCiAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcigiVVRGLTgiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH0KICAgICAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0KICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTsKICAgICAgICAKICAgICAgICBsb2cuZGVidWcgInVybDogIiArIHVybAogICAgICAgIGxvZy5kZWJ1ZyAiUmVzcG9uc2VDb2RlOiIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpCiAgICAgICAgLy9sb2cuZGVidWcgIlJlc3BvbnNlTWVzc2FnZToiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKQoKICAgICAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpCiAgICAgICAgZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKQoKICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoIjIwMCIpKXsKICAgICAgICAgICAgbG9nLmRlYnVnICJ1cmw6ICIgKyB1cmwKICAgICAgICAgICAgbG9nLmRlYnVnICJSZXNwb25zZUNvZGU6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkKICAgICAgICAgICAgbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKCiAgICAgICAgICAgIAogICAgICAgICAgICAvKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovCiAgICAgICAgICAgIENsYXNzIGlxbEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuSVFMRmFjYWRlIik7IAogICAgICAgICAgICBkZWYgaXFsRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKGlxbEZhY2FkZUNsYXNzKTsKCiAgICAgICAgICAgIC8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi8KICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGUiKTsKICAgICAgICAgICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7CgogICAgICAgICAgICAvKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi8KICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0VHlwZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUZhY2FkZSIpOwogICAgICAgICAgICBkZWYgb2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpOwoKICAgICAgICAgICAgLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi8KICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSIpOwogICAgICAgICAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpOwoKICAgICAgICAgICAgQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuc2VydmljZXMubW9kZWwuZmFjdG9yeS5PYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeSIpOwogICAgICAgICAgICBkZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7CgogICAgICAgICAgICAvKiBTcGVjaWZ5IHRoZSBzY2hlbWEgaWQgYXMgd2VsbCBhcyB0aGUgSVFMIHRoYXQgd2lsbCBmZXRjaCBvYmplY3RzLiBJbiB0aGlzIGNhc2UgYWxsIG9iamVjdHMgd2l0aCBOYW1lIG1hdGNoaW5nIHRoZSB2YWx1ZUNGLCBiZSBzdXJlIHRvIGluY2x1ZGUgIiBhcm91bmQgdmFsdWUgKi8KICAgICAgICAgICAgLypST0xMQkFDSyovCiAgICAgICAgICAgIC8qUmltb3ppb25lIGFsbGVnYXRvIHJhcHBvcnRvIGRpIGludGVydmVudG8gYXBwZW5hIGNyZWF0byovCiAgICAgICAgICAgIGRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCAiXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuY2F0ZWdvcnlSZWYnXS50b1N0cmluZygpICsgIlwiLlwiTmFtZVwiID0gXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkub2Jqcy5yYXBwSW50RkFBQyddLnRvU3RyaW5nKCkgKyAiXCIgQU5EICIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSArICIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSAiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyAiKSIpOyAvLyBTZWUgdGhlIGNvbXBsZXRlIGxpc3Qgb2YgcG9zc2libGUgSVFMIG9uIHRoZSBJbnNpZ2h0IFF1ZXJ5IExhbmd1YWdlIGRvY3VtZW50YXRpb24gcGFnZQogICAgICAgICAgICAvKiBJZiB0aGlzIGlzIGEgbWFuZGF0b3J5IGZpZWxkIHlvdSBzaG91bGQgYmUgYWJsZSB0byBkbyB0aGlzOiAqLwogICAgICAgICAgICAvL2xvZy5pbmZvKCJJbnNpZ2h0IG9iamVjdDogIiArIG9iamVjdHNbMF0pOwoKICAgICAgICAgICAgaWYob2JqZWN0c1swXSl7CiAgICAgICAgICAgICAgICAvKiBVUERBVEUgT0pCRUNUIERFTEVURUQgVkFMVUUgKi8KICAgICAgICAgICAgICAgIGRlZiBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihvYmplY3RzWzBdLmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkgIAogICAgICAgICAgICAgICAgZGVmIHZhbHVlID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpCgogICAgICAgICAgICAgICAgZGVmIHZhbHVlQmVhbiA9IG9iVHJpYWdlLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpCiAgICAgICAgICAgICAgICB2YWx1ZUJlYW4uc2V0VmFsdWUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2UuZ2V0T2JqZWN0VHlwZUF0dHJpYnV0ZUlkKCkpLCB0cnVlKQogICAgICAgICAgICAgICAgLypDbGVhbiBhY3R1YWwgdmFsdWUqLwogICAgICAgICAgICAgICAgdmFsdWUuY2xlYXIoKQogICAgICAgICAgICAgICAgdmFsdWUuYWRkKHZhbHVlQmVhbik7CiAgICAgICAgICAgICAgICBvYlRyaWFnZS5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKHZhbHVlKQoKICAgICAgICAgICAgICAgIC8vVXBkYXRlIE9KQkVDVCBhdHRyaWJ1dGUgdmFsdWUKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHsKICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiMS4gQ291bGQgbm90IHVwZGF0ZSBvYmplY3QgYXR0cmlidXRlIGR1ZSB0byB2YWxpZGF0aW9uIGV4Y2VwdGlvbjoiICsgdmllLmdldE1lc3NhZ2UoKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8qUm9sbGJhY2sgY29udGFiaWxpenphemlvbmUgaW50ZXJ2ZW50byovCiAgICAgICAgICAgIC8qQ2FuY2VsbGFyZSB0dXR0aSBnbGkgb2dnZXR0aSBPblNpdGVfUmF0ZV9SZXBvcnQgcmVnaXN0cmF0aSBuZWkgY2FtcGkgT1BBQV9MVU1QX1NVTV9SQVRFUywgT1BBQV9VTkFfVEFOVFVNX1JBVEVTLCBPUEFBX1RSQVZFTF9SQVRFUywgT1BBQV9MQUJPVVJfUkFURVMqLwogICAgICAgICAgICAvKkNpY2xhcmUgdHV0dGkgZ2xpIG9nZ2V0dGkgYXNzb2NpYXRpIGFsIGNhbXBvKi8KCiAgICAgICAgICAgIC8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSAiIGFyb3VuZCB2YWx1ZSAqLwogICAgICAgICAgICBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoT1BBQSwgIm9iamVjdFR5cGUgPSAiICsgcHJvcGVydGllc1snaW9iai5vblNpdGVSYXRlUmVwb3J0J10udG9TdHJpbmcoKSArICIgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXk9IiArIGlzc3VlLmtleS50b1N0cmluZygpICsgIikgQU5EIFwiIiArIHByb3BlcnRpZXNbJ2lvYmoub25TaXRlUmF0ZVJlcG9ydC5kZWxldGVkJ10udG9TdHJpbmcoKSArICJcIiAhPSB0cnVlIik7IC8vIFNlZSB0aGUgY29tcGxldGUgbGlzdCBvZiBwb3NzaWJsZSBJUUwgb24gdGhlIEluc2lnaHQgUXVlcnkgTGFuZ3VhZ2UgZG9jdW1lbnRhdGlvbiBwYWdlCiAgICAgICAgICAgIC8qIElmIHRoaXMgaXMgYSBtYW5kYXRvcnkgZmllbGQgeW91IHNob3VsZCBiZSBhYmxlIHRvIGRvIHRoaXM6ICovCiAgICAgICAgICAgIC8vbG9nLmluZm8oIkluc2lnaHQgb2JqZWN0cyBkYSBjYW5jZWxsYXJlOiAiICsgb2JqZWN0cyk7CgogICAgICAgICAgICBmb3Iob2JqIGluIG9iamVjdHMpewogICAgICAgICAgICAgICAgLyogREVMRVRFIENPTk5FQ1RFRCBPQkpFQ1RTICovCiAgICAgICAgICAgICAgICBvYmplY3RGYWNhZGUuZGVsZXRlT2JqZWN0QmVhbihvYmouZ2V0SWQoKSk7ICAKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLypDYW5jZWxsYXJlIGdsaSBpbXBvcnRpIGZvcm5pdG9yZSwgY2xpZW50ZSBlIGkgdG90YWxpIHN1IHR1dHRpIGdsaSBvZ2dldHRpIENvbXBvbmVudCBpbiBPUEFBX1JFUExBQ0VEX01BVEVSSUFMUyovCiAgICAgICAgICAgIGRlZiByZXBNYXRlcmlhbHMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJlcGxhY2VkTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF0KICAgICAgICAgICAgZGVmIHJlcE1hdExpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcE1hdGVyaWFscykKCiAgICAgICAgICAgIGZvcihtYXQgaW4gcmVwTWF0TGlzdCl7CiAgICAgICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5kIGdldCBvYmplY3QKICAgICAgICAgICAgICAgIGRlZiBjb21wb25lbnQ9bWF0LnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgIGRlZiBjb21wb25lbnRLZXkgPSBjb21wb25lbnQuc3Vic3RyaW5nKGNvbXBvbmVudC5pbmRleE9mKCcoJykrMSxjb21wb25lbnQuaW5kZXhPZignKScpKQogICAgICAgICAgICAgICAgZGVmIGNvbXBvbmVudE9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihjb21wb25lbnRLZXkpCiAgICAgICAgICAgICAgICAvL3NldCAiQVBQTElFRF9UTyIsICJBQ0NPVU5USU5HX1NVUFBMSUVSX01BVEVSSUFMX1JFRiIsICJBQ0NPVU5USU5HX0NVU1RPTUVSX01BVEVSSUFMX1JFRiIsICJUT1RBTF9BTU9VTlRfU1VQUExJRVIiLCAiVE9UQUxfQU1PVU5UX0NVU1RPTUVSIiB0byBudWxsIGZvciB0aGF0IGNvbXBvbmVudAoKICAgICAgICAgICAgICAgIC8vQVBQTElFRF9UTwogICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hcHBsaWVkVG8nXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICAgICAgZGVmIG9iVHJpYWdlQXBwbGllZFRvID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hcHBsaWVkVG8nXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkKICAgICAgICAgICAgICAgICAgICBkZWYgdmFsdWVBcHBsaWVkVG8gPSBvYlRyaWFnZUFwcGxpZWRUby5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkKICAgICAgICAgICAgICAgICAgICBsb2cud2FybiAidmFsdWVBcHBsaWVkVG86ICIgKyB2YWx1ZUFwcGxpZWRUbwogICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZUFwcGxpZWRUby5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVBcHBsaWVkVG8uY2xlYXIoKSAKCiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZUFwcGxpZWRUbyA9IG9iamVjdEZhY2FkZS5kZWxldGVPYmplY3RBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlQXBwbGllZFRvLmlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSl7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmVycm9yKCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOiIgKyB2aWUuZ2V0TWVzc2FnZSgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvL0FDQ09VTlRJTkdfU1VQUExJRVJfTUFURVJJQUxfUkVGCiAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmFjY291bnRpbmdTdXBwTWF0ZXJpYWwnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgICAgICAgICAgZGVmIG9iVHJpYWdlTWF0UyA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuYWNjb3VudGluZ1N1cHBNYXRlcmlhbCddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKQogICAgICAgICAgICAgICAgICAgIGRlZiB2YWx1ZU1hdFMgPSBvYlRyaWFnZU1hdFMuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpCiAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4gInZhbHVlTWF0UzogIiArIHZhbHVlTWF0UwogICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZU1hdFMuc2l6ZSgpID4gMCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlTWF0Uy5jbGVhcigpIAoKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iVHJpYWdlTWF0UyA9IG9iamVjdEZhY2FkZS5kZWxldGVPYmplY3RBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlTWF0Uy5pZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpeyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5lcnJvcigiQ291bGQgbm90IHVwZGF0ZSBvYmplY3QgYXR0cmlidXRlIGR1ZSB0byB2YWxpZGF0aW9uIGV4Y2VwdGlvbjoiICsgdmllLmdldE1lc3NhZ2UoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy9BQ0NPVU5USU5HX0NVU1RPTUVSX01BVEVSSUFMX1JFRgogICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hY2NvdW50aW5nQ3VzdE1hdGVyaWFsJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgICAgIGRlZiBvYlRyaWFnZU1hdEMgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmFjY291bnRpbmdDdXN0TWF0ZXJpYWwnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkKICAgICAgICAgICAgICAgICAgICBkZWYgdmFsdWVNYXRDID0gb2JUcmlhZ2VNYXRDLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQogICAgICAgICAgICAgICAgICAgIGxvZy53YXJuICJ2YWx1ZU1hdEM6ICIgKyB2YWx1ZU1hdEMKICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVNYXRDLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZU1hdEMuY2xlYXIoKSAKCiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZU1hdEMgPSBvYmplY3RGYWNhZGUuZGVsZXRlT2JqZWN0QXR0cmlidXRlQmVhbihvYlRyaWFnZU1hdEMuaWQpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKXsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZXJyb3IoIkNvdWxkIG5vdCB1cGRhdGUgb2JqZWN0IGF0dHJpYnV0ZSBkdWUgdG8gdmFsaWRhdGlvbiBleGNlcHRpb246IiArIHZpZS5nZXRNZXNzYWdlKCkpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvL1RPVEFMX0FNT1VOVF9TVVBQTElFUgogICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RTdXBwJ10udG9TdHJpbmcoKSkpewogICAgICAgICAgICAgICAgICAgIGRlZiBvYlRyaWFnZVRvdFMgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdFN1cHAnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkKICAgICAgICAgICAgICAgICAgICBkZWYgdmFsdWVUb3RTID0gb2JUcmlhZ2VUb3RTLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQogICAgICAgICAgICAgICAgICAgIGxvZy53YXJuICJ2YWx1ZVRvdFM6ICIgKyB2YWx1ZVRvdFMKICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVUb3RTLnNpemUoKSA+IDApewogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVRvdFMuY2xlYXIoKSAKCiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZVRvdFMgPSBvYmplY3RGYWNhZGUuZGVsZXRlT2JqZWN0QXR0cmlidXRlQmVhbihvYlRyaWFnZVRvdFMuaWQpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKXsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZXJyb3IoIkNvdWxkIG5vdCB1cGRhdGUgb2JqZWN0IGF0dHJpYnV0ZSBkdWUgdG8gdmFsaWRhdGlvbiBleGNlcHRpb246IiArIHZpZS5nZXRNZXNzYWdlKCkpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy9UT1RBTF9BTU9VTlRfQ1VTVE9NRVIKICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQudG90Q3VzdCddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgICAgICAgICBkZWYgb2JUcmlhZ2VUb3RDID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RDdXN0J10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpCiAgICAgICAgICAgICAgICAgICAgZGVmIHZhbHVlVG90QyA9IG9iVHJpYWdlVG90Qy5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkKICAgICAgICAgICAgICAgICAgICBsb2cud2FybiAidmFsdWVUb3RDOiAiICsgdmFsdWVUb3RDCiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlVG90Qy5zaXplKCkgPiAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVUb3RDLmNsZWFyKCkgCgogICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2VUb3RDID0gb2JqZWN0RmFjYWRlLmRlbGV0ZU9iamVjdEF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2VUb3RDLmlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSl7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmVycm9yKCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOiIgKyB2aWUuZ2V0TWVzc2FnZSgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSAgICAKCiAgICAgICAgICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQKICAgICAgICAgICAgbG9nLmRlYnVnICIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6ICIgKyBvdXRwdXRNc2cKCiAgICAgICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpCiAgICAgICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpCiAgICAgICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgCiAgICAgICAgICAgIGxvZy5kZWJ1ZyAibWVzc2FnZTogIiArICBqc29uX29iamVjdC5tZXNzYWdlCiAgICAgICAgICAgIAogICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoIkUiKQogICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoIlNFTkRNQUlMIikKICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgIiAiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKSkKICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGpzb25fb2JqZWN0Lm1lc3NhZ2UpCiAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycykKCiAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpCiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3siRSI6IicgKyBvdXRwdXQudG9TdHJpbmcoKSArICcifScpCiAgICAgICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigiRSIsIG91dHB1dC50b1N0cmluZygpKQogICAgICAgIH1lbHNlewogICAgICAgICAgICAvKkwnZW1haWwgw6ggc3RhdGEgaW52aWF0YSBjb3JyZXR0YW1lbnRlLCBhZ2dpb3JubyBpbCBjYW1wbyBPTlNJVEVfUkVQT1JUIGNvbiBsYSBkYXRhIGNvcnJlbnRlKi8KCiAgICAgICAgICAgIC8vIGxvZy53YXJuICJpc3N1ZSAiK2lzc3VlLmdldEtleSgpCiAgICAgICAgICAgIGRlZiBjZnYgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG9uc2l0ZVJlcG9ydERhdGUpCiAgICAgICAgICAgIGlmICghY2Z2KSB7CiAgICAgICAgICAgICAgZGVmIHQwICA9IG5ldyBqYXZhLnNxbC5UaW1lc3RhbXAoU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkpCiAgICAgICAgICAgICAgbG9nLndhcm4gIlN0YXJ0VGltZSA9PiAnIit0MC50b1N0cmluZygpKyInIgogICAgICAgICAgICAgIGRlZiBtdiA9IG5ldyBNb2RpZmllZFZhbHVlKG9uc2l0ZVJlcG9ydERhdGUsIHQwKQogICAgICAgICAgICAgIGRlZiBjaCA9IG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKQogICAgICAgICAgICAgIG9uc2l0ZVJlcG9ydERhdGUudXBkYXRlVmFsdWUobnVsbCwgaXNzdWUsIG12LCBjaCkgCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgbG9nLndhcm4gIlN0YXJ0VGltZSA9PSAnIitjZnYudG9TdHJpbmcoKSsiJyIKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQ==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">df15a75e93b4c124a70f49e69dbcae9d48e2e8e4</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IFJFU1QgQVBJOiBPUCBwZXIgY29uc3VudGl2YXppb25lIHRpY2tldA==</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5cbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5kZWYgYXV0b21hdGljYWxseUNsb3NlZCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUNsb3NlZCddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5ib29sZWFuIHVuYXRhbnR1bT10cnVlXG5cbi8qISFEYSByaW11b3ZlcmUgYXBwZW5hIHJpc29sdGkgaSBidWchISovXG4vL2lmKCFpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0LnBsYW5uZWRNYWludGVuYW5jZSddKSl7XG5cbiAgICAvKk9QLTEwMzg6IGxhIGNvbnRhYmlsaXp6YXppb25lIGRvdnJcdTAwZTAgcHJldmVkZXJlIGxlIHVuYXRhbnR1bSByYXRlcyBzb2xvIHNlIGlsIHRpY2tldCBub24gXHUwMGU4IHN0YXRvIGNoaXVzbyBpbiBhdXRvbWF0aWNvKi9cbiAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpIT1udWxsICYmIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIikpe1xuICAgICAgICB1bmF0YW50dW09ZmFsc2UgICAgXG4gICAgfVxuICAgIGxvZy5kZWJ1ZyBcIkNvbnN1bnRpdmF6aW9uZSB0aWNrZXQgXCIgKyBpc3N1ZS5rZXkgKyBcIiBjb24gdW5hdGFudHVtOiBcIiArIHVuYXRhbnR1bVxuXG4gICAgLyogUkVTVCBBUEkgcGVyIENvbnRhYmlsaXp6YXppb25lIEludGVydmVudG8gKi9cbiAgICByZXF1ZXN0TWV0aG9kID0gXCJHRVRcIjtcblxuICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9BQS90aWNrZXQvaXNzdWVLZXkvXCIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArIFwiL2Nsb3NlP3VtPVwiK3VuYXRhbnR1bS50b1N0cmluZygpXG4gICAgbG9nLmRlYnVnIFwiYmFzZVVybDogXCIgKyBiYXNlVVJMXG5cbiAgICAvKkRlZmluaXJlIHBhcmFtZXRybyBkaSBpbnB1dCB1bmF0YW50dW09dHJ1ZXxmYWxzZSBpbiBiYXNlIGFsIHZhbG9yZSBkZWxsYSB2YXJpYWJpbGUgYm9vbGVhbmEgdW5hdGFudHVtKi9cbiAgICBVUkwgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuXG4gICAgLy9Jc3N1ZUluZGV4aW5nU2VydmljZSBpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSlcbiAgICAvL2lzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgoaXNzdWVNYW5hZ2VyLmdldElzc3VlT2JqZWN0KGlzc3VlLmtleS50b1N0cmluZygpKSlcblxuICAgIC8vZGVmIHVuYVRhbnR1bVJhdGVzID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QQUFfVU5BVEFOVFVNX1JBVEVTXCIpWzBdXG4gICAgLy9sb2cud2FybiBcInVuYVRhbnR1bVJhdGVzOiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodW5hVGFudHVtUmF0ZXMpXG5cbiAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2U6IFwiICsgY29ubmVjdGlvblxuXG4gICAgICAgIC8qUk9MTEJBQ0sqL1xuICAgICAgICAvKlJpbW96aW9uZSBhbGxlZ2F0byByYXBwb3J0byBkaSBpbnRlcnZlbnRvIGFwcGVuYSBjcmVhdG8qL1xuICAgICAgICAvKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG4gICAgICAgIENsYXNzIGlxbEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLklRTEZhY2FkZVwiKTsgXG4gICAgICAgIGRlZiBpcWxGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUoaXFsRmFjYWRlQ2xhc3MpO1xuXG4gICAgICAgIC8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbiAgICAgICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpO1xuICAgICAgICBkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcblxuICAgICAgICAvKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbiAgICAgICAgQ2xhc3Mgb2JqZWN0VHlwZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVGYWNhZGVcIik7XG4gICAgICAgIGRlZiBvYmplY3RUeXBlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVGYWNhZGVDbGFzcyk7XG5cbiAgICAgICAgLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbiAgICAgICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XG4gICAgICAgIGRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XG5cbiAgICAgICAgQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG4gICAgICAgIGRlZiBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzKTtcblxuICAgICAgICAvKiBTcGVjaWZ5IHRoZSBzY2hlbWEgaWQgYXMgd2VsbCBhcyB0aGUgSVFMIHRoYXQgd2lsbCBmZXRjaCBvYmplY3RzLiBJbiB0aGlzIGNhc2UgYWxsIG9iamVjdHMgd2l0aCBOYW1lIG1hdGNoaW5nIHRoZSB2YWx1ZUNGLCBiZSBzdXJlIHRvIGluY2x1ZGUgXCIgYXJvdW5kIHZhbHVlICovXG4gICAgICAgIGRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5cXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5uYW1lJ10udG9TdHJpbmcoKSArIFwiXFxcIiA9IFxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm9ianMucmFwcEludEZBQUMnXS50b1N0cmluZygpICsgXCJcXFwiIEFORCBcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpICsgXCIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSBcIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIpXCIpOyAvLyBTZWUgdGhlIGNvbXBsZXRlIGxpc3Qgb2YgcG9zc2libGUgSVFMIG9uIHRoZSBJbnNpZ2h0IFF1ZXJ5IExhbmd1YWdlIGRvY3VtZW50YXRpb24gcGFnZVxuICAgICAgICAvKiBJZiB0aGlzIGlzIGEgbWFuZGF0b3J5IGZpZWxkIHlvdSBzaG91bGQgYmUgYWJsZSB0byBkbyB0aGlzOiAqL1xuICAgICAgICBsb2cuaW5mbyhcIkluc2lnaHQgb2JqZWN0OiBcIiArIG9iamVjdHNbMF0pO1xuXG4gICAgICAgIGlmKG9iamVjdHNbMF0pe1xuICAgICAgICAgICAgLyogVVBEQVRFIE9KQkVDVCBERUxFVEVEIFZBTFVFICovXG4gICAgICAgICAgICBkZWYgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ob2JqZWN0c1swXS5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpICBcbiAgICAgICAgICAgIGRlZiB2YWx1ZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuXG4gICAgICAgICAgICBkZWYgdmFsdWVCZWFuID0gb2JUcmlhZ2UuY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKClcbiAgICAgICAgICAgIHZhbHVlQmVhbi5zZXRWYWx1ZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihvYlRyaWFnZS5nZXRPYmplY3RUeXBlQXR0cmlidXRlSWQoKSksIHRydWUpXG4gICAgICAgICAgICAvKkNsZWFuIGFjdHVhbCB2YWx1ZSovXG4gICAgICAgICAgICB2YWx1ZS5jbGVhcigpXG4gICAgICAgICAgICB2YWx1ZS5hZGQodmFsdWVCZWFuKTtcbiAgICAgICAgICAgIG9iVHJpYWdlLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWUpXG5cbiAgICAgICAgICAgIC8vVXBkYXRlIE9KQkVDVCBhdHRyaWJ1dGUgdmFsdWVcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG9iVHJpYWdlKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHtcbiAgICAgICAgICAgICAgICBsb2cud2FybihcIkNvdWxkIG5vdCB1cGRhdGUgb2JqZWN0IGF0dHJpYnV0ZSBkdWUgdG8gdmFsaWRhdGlvbiBleGNlcHRpb246XCIgKyB2aWUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtVEtULUFDQ09VTlRJTkdcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgfWVsc2V7XG4gICAgICAgIC8qT1AtMTAzODogY29uc3VudGl2YXppb25lIHRlcm1pbmF0YSBjb3JyZXR0YW1lbnRlIC0gc2UgXHUwMGU4IHN0YXRhIGVzZWd1aXRhIGNvbiB1bmF0YW50dW09dHJ1ZSBzZXR0byBhIE5vIGlsIGNhbXBvIE9QQUFfQVVUT01BVElDQUxMWV9DTE9TRUQqL1xuICAgICAgICBpZih1bmF0YW50dW0pe1xuICAgICAgICAgICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXG4gICAgICAgICAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBpc3N1ZVxuXG4gICAgICAgICAgICBkZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcbiAgICAgICAgICAgIGRlZiBjZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09IFwiTm9cIiB9XG4gICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q2xvc2VkLnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuXG4gICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7XG4gICAgICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGlzc3VlKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIHByaW5jaXBhbGUgJHtpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpfVwiXG4gICAgICAgIH1cbiAgICB9XG4vL30iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
              <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlCmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2UKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXIKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsCgpQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpCkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpCnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7Cglwcm9wZXJ0aWVzLmxvYWQoaXQpCn0KQ2F0ZWdvcnkgbG9nID0gQ2F0ZWdvcnkuZ2V0SW5zdGFuY2UoImNvbS5vbnJlc29sdmUuamlyYS5ncm9vdnkuUG9zdEZ1bmN0aW9uIikKbG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpCgpJc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7CkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTsKCklzc3VlSW5kZXhpbmdTZXJ2aWNlIAlpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSkKZGVmIGF1dG9tYXRpY2FsbHlDbG9zZWQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlDbG9zZWQnXS50b1N0cmluZygpKVswXQoKZGVmIHJlcXVlc3RNZXRob2QKZGVmIGJhc2VVUkwKCmludCBPUEFBID0gcHJvcGVydGllc1snaXNjaGVtYS5hYS5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKCkKaW50IERCTyA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuZGJvLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKQpib29sZWFuIHVuYXRhbnR1bT10cnVlCgovKk9QLTEwMzg6IGxhIGNvbnRhYmlsaXp6YXppb25lIGRvdnLDoCBwcmV2ZWRlcmUgbGUgdW5hdGFudHVtIHJhdGVzIHNvbG8gc2UgaWwgdGlja2V0IG5vbiDDqCBzdGF0byBjaGl1c28gaW4gYXV0b21hdGljbyovCmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkhPW51bGwgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKS50b1N0cmluZygpLmVxdWFscygiWWVzIikpewoJdW5hdGFudHVtPWZhbHNlICAgIAp9CmxvZy5kZWJ1ZyAiQ29uc3VudGl2YXppb25lIHRpY2tldCAiICsgaXNzdWUua2V5ICsgIiBjb24gdW5hdGFudHVtOiAiICsgdW5hdGFudHVtCgovKiBSRVNUIEFQSSBwZXIgQ29udGFiaWxpenphemlvbmUgSW50ZXJ2ZW50byAqLwpyZXF1ZXN0TWV0aG9kID0gIkdFVCI7CgpiYXNlVVJMID0gImh0dHA6Ly8iICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyAiL29wL3Jlc3QvQUEvdGlja2V0L2lzc3VlS2V5LyIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArICIvY2xvc2U/dW09Iit1bmF0YW50dW0udG9TdHJpbmcoKQpsb2cuZGVidWcgImJhc2VVcmw6ICIgKyBiYXNlVVJMCgovKkRlZmluaXJlIHBhcmFtZXRybyBkaSBpbnB1dCB1bmF0YW50dW09dHJ1ZXxmYWxzZSBpbiBiYXNlIGFsIHZhbG9yZSBkZWxsYSB2YXJpYWJpbGUgYm9vbGVhbmEgdW5hdGFudHVtKi8KVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTCkKSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpOwpjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eSgiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL2pzb24iKTsKY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoIkFjY2VwdCIsICIqLyoiKTsKY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTsKY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpOwpjb25uZWN0aW9uLmNvbm5lY3QoKTsKbG9nLmRlYnVnICJSZXNwb25zZUNvZGU6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkKbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKCi8vSXNzdWVJbmRleGluZ1NlcnZpY2UgaXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpCi8vaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVPYmplY3QoaXNzdWUua2V5LnRvU3RyaW5nKCkpKQoKLy9kZWYgdW5hVGFudHVtUmF0ZXMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKCJPUEFBX1VOQVRBTlRVTV9SQVRFUyIpWzBdCi8vbG9nLndhcm4gInVuYVRhbnR1bVJhdGVzOiAiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1bmFUYW50dW1SYXRlcykKCmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KCkKZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpCmRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKQpkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpCgppZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoIjIwMCIpKXsKICAgIGxvZy5kZWJ1ZyAidXJsOiAiICsgdXJsCiAgICBsb2cuZGVidWcgIlJlc3BvbnNlQ29kZToiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKQogICAgbG9nLmRlYnVnICJSZXNwb25zZU1lc3NhZ2U6IiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkKICAgIGxvZy5kZWJ1ZyAiUmVzcG9uc2U6ICIgKyBjb25uZWN0aW9uCgogICAgLypST0xMQkFDSyovCiAgICAvKlJpbW96aW9uZSBhbGxlZ2F0byByYXBwb3J0byBkaSBpbnRlcnZlbnRvIGFwcGVuYSBjcmVhdG8qLwogICAgLyogR2V0IEluc2lnaHQgSVFMIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqLwogICAgQ2xhc3MgaXFsRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGUiKTsgCiAgICBkZWYgaXFsRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKGlxbEZhY2FkZUNsYXNzKTsKCiAgICAvKiBHZXQgSW5zaWdodCBPYmplY3QgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovCiAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZSIpOwogICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7CgogICAgLyogR2V0IEluc2lnaHQgT2JqZWN0IFR5cGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovCiAgICBDbGFzcyBvYmplY3RUeXBlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlIik7CiAgICBkZWYgb2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpOwoKICAgIC8qIEdldCBJbnNpZ2h0IE9iamVjdCBBdHRyaWJ1dGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovCiAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CiAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpOwoKICAgIENsYXNzIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkiKTsKICAgIGRlZiBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzKTsKCiAgICAvKiBTcGVjaWZ5IHRoZSBzY2hlbWEgaWQgYXMgd2VsbCBhcyB0aGUgSVFMIHRoYXQgd2lsbCBmZXRjaCBvYmplY3RzLiBJbiB0aGlzIGNhc2UgYWxsIG9iamVjdHMgd2l0aCBOYW1lIG1hdGNoaW5nIHRoZSB2YWx1ZUNGLCBiZSBzdXJlIHRvIGluY2x1ZGUgIiBhcm91bmQgdmFsdWUgKi8KICAgIGRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCAiXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuY2F0ZWdvcnlSZWYnXS50b1N0cmluZygpICsgIlwiLlwiIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm5hbWUnXS50b1N0cmluZygpICsgIlwiID0gXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkub2Jqcy5yYXBwSW50RkFBQyddLnRvU3RyaW5nKCkgKyAiXCIgQU5EICIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSArICIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSAiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyAiKSIpOyAvLyBTZWUgdGhlIGNvbXBsZXRlIGxpc3Qgb2YgcG9zc2libGUgSVFMIG9uIHRoZSBJbnNpZ2h0IFF1ZXJ5IExhbmd1YWdlIGRvY3VtZW50YXRpb24gcGFnZQogICAgLyogSWYgdGhpcyBpcyBhIG1hbmRhdG9yeSBmaWVsZCB5b3Ugc2hvdWxkIGJlIGFibGUgdG8gZG8gdGhpczogKi8KICAgIGxvZy5pbmZvKCJJbnNpZ2h0IG9iamVjdDogIiArIG9iamVjdHNbMF0pOwoKICAgIGlmKG9iamVjdHNbMF0pewogICAgICAgIC8qIFVQREFURSBPSkJFQ1QgREVMRVRFRCBWQUxVRSAqLwogICAgICAgIGRlZiBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihvYmplY3RzWzBdLmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkgIAogICAgICAgIGRlZiB2YWx1ZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKQoKICAgICAgICBkZWYgdmFsdWVCZWFuID0gb2JUcmlhZ2UuY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCkKICAgICAgICB2YWx1ZUJlYW4uc2V0VmFsdWUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2UuZ2V0T2JqZWN0VHlwZUF0dHJpYnV0ZUlkKCkpLCB0cnVlKQogICAgICAgIC8qQ2xlYW4gYWN0dWFsIHZhbHVlKi8KICAgICAgICB2YWx1ZS5jbGVhcigpCiAgICAgICAgdmFsdWUuYWRkKHZhbHVlQmVhbik7CiAgICAgICAgb2JUcmlhZ2Uuc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyh2YWx1ZSkKCiAgICAgICAgLy9VcGRhdGUgT0pCRUNUIGF0dHJpYnV0ZSB2YWx1ZQogICAgICAgIHRyeSB7CiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLnN0b3JlT2JqZWN0QXR0cmlidXRlQmVhbihvYlRyaWFnZSk7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSkgewogICAgICAgICAgICBsb2cud2FybigiQ291bGQgbm90IHVwZGF0ZSBvYmplY3QgYXR0cmlidXRlIGR1ZSB0byB2YWxpZGF0aW9uIGV4Y2VwdGlvbjoiICsgdmllLmdldE1lc3NhZ2UoKSk7CiAgICAgICAgfQogICAgfQoKICAgIGVMaXN0RXJyb3JzLmFkZCgiRSIpCiAgICBlTGlzdEVycm9ycy5hZGQoIk9QLVRLVC1BQ0NPVU5USU5HIikKICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArICIgIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkpCiAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKQogICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKQoKICAgIG91dHB1dC5hZGQoZUxpc3QpCiAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7IkUiOiInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnIn0nKQogICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCJFIiwgb3V0cHV0LnRvU3RyaW5nKCkpCn1lbHNlewogICAgLypPUC0xMDM4OiBjb25zdW50aXZhemlvbmUgdGVybWluYXRhIGNvcnJldHRhbWVudGUgLSBzZSDDqCBzdGF0YSBlc2VndWl0YSBjb24gdW5hdGFudHVtPXRydWUgc2V0dG8gYSBObyBpbCBjYW1wbyBPUEFBX0FVVE9NQVRJQ0FMTFlfQ0xPU0VEKi8KICAgIGlmKHVuYXRhbnR1bSl7CiAgICAgICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpCiAgICAgICAgZGVmIG1pID0gKE11dGFibGVJc3N1ZSkgaXNzdWUKCiAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSkKICAgICAgICBsb2cuZGVidWcgImZpZWxkQ29uZmlnOiAiICsgZmllbGRDb25maWcKICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiTm8iIH0KICAgICAgICBhdXRvbWF0aWNhbGx5Q2xvc2VkLnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoKICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7CiAgICAgICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChpc3N1ZSkKICAgICAgICBsb2cuZGVidWcgIlVwZGF0ZWQgY3VzdG9tZmllbGQgLSBpc3N1ZSBwcmluY2lwYWxlICR7aXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKX0iCiAgICB9Cn0K</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
              <arg name="FIELD_SCRIPT_FILE"></arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="6">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">81aa9673-d0a1-4cdb-9909-19371f018388</arg>
                  <arg name="FIELD_NOTES">YCFgUE0gVGlja2V0IC0gVXBkYXRlIEhBUkRXQVJFLk1BSU5URU5BTkNFX05FWFRfVElDS0VUX0RBVEUgKyBIQVJEV0FSRS5NQUlOVEVOQU5DRV9MQVNUX1RJQ0tFVF9EQVRF</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS51dGlsLkRlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5ldmVudC50eXBlLkV2ZW50RGlzcGF0Y2hPcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2U7XG5pbXBvcnQgb3JnLm9mYml6LmNvcmUuZW50aXR5LkRlbGVnYXRvckludGVyZmFjZVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS51dGlsLkJ1aWxkVXRpbHNJbmZvXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmlzc3VldHlwZS5Jc3N1ZVR5cGVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpXG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTIzNjkyXCIpXG5cbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTsgIFxuQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XG5kZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xuZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XG5cbmRlZiBhc3NldCA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0FTU0VUXCIpWzBdXG5kZWYgZXhlY3V0aW9uRGF0ZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0VYRUNVVElPTl9EQVRFXCIpWzBdXG5cbmxvZy5kZWJ1ZyBcIkRhdGEgZGkgZXNlY3V6aW9uZSBpbnRlcnZlbnRvOiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZXhlY3V0aW9uRGF0ZSlcblxuaWYoaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZSA9PSBcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0XCIpe1xuICAgIGRlZiBzdWJUYXNrcyA9IGlzc3VlLmdldFN1YlRhc2tPYmplY3RzKClcbiAgICBkZWYgaXRBc3NldCBcbiAgICBEYXRlIG5ld0RhdGVcblxuICAgIHN1YlRhc2tzLmVhY2gge1xuICAgICAgICBpZiAoaXQuZ2V0SXNzdWVUeXBlKCkubmFtZSA9PSBcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGFza1wiICYmIGl0LmdldFJlc29sdXRpb24oKSl7XG4gICAgICAgICAgICBsb2cuZGVidWcgXCJhc3NldDogXCIgKyBpdC5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0KVxuICAgICAgICAgICAgaXRBc3NldCA9IGl0LmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXQpWzBdLnRvU3RyaW5nKClcbiAgICAgICAgICAgIGl0QXNzZXRLZXkgPSBpdEFzc2V0LnN1YnN0cmluZyhpdEFzc2V0Lmxhc3RJbmRleE9mKCcoJykrMSwgaXRBc3NldC5sYXN0SW5kZXhPZignKScpKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiaXRBc3NldEtleTogXCIgKyBpdEFzc2V0S2V5XG5cbiAgICAgICAgICAgIGRlZiBvYlRyaWFnZVxuICAgICAgICAgICAgZGVmIGh3UE1udW1iZXJcbiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oaXRBc3NldEtleSkuZ2V0SWQoKSwgXCJQTEFOTkVEX01BSU5URU5BTkNFX1ZJU0lUU19OVU1cIikpe1xuICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihpdEFzc2V0S2V5KS5nZXRJZCgpLCBcIlBMQU5ORURfTUFJTlRFTkFOQ0VfVklTSVRTX05VTVwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICBod1BNbnVtYmVyID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImh3UE1udW1iZXI6IFwiICsgaHdQTW51bWJlclxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL0NoZWNrIEhBUkRXQVJFLlBMQU5ORURfTUFJTlRFTkFOQ0VfVklTSVRTX05VTVxuICAgICAgICAgICAgaWYoaHdQTW51bWJlcil7XG4gICAgICAgICAgICAgICAgbmV3RGF0ZSA9IChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGV4ZWN1dGlvbkRhdGUpICsgTWF0aC5yb3VuZCgzNjUvaHdQTW51bWJlci50b0ludGVnZXIoKSkudG9JbnRlZ2VyKCkpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwibmV3IGRhdGU6IFwiICsgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZXhlY3V0aW9uRGF0ZSkgKyBNYXRoLnJvdW5kKDM2NS9od1BNbnVtYmVyLnRvSW50ZWdlcigpKS50b0ludGVnZXIoKSlcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIC8vQ2hlY2sgSEFSRFdBUkUuQ1VTVE9NRVJfQ09OVFJBQ1RfUkVGLkNPTlRSQUNUX1RZUEVcbiAgICAgICAgICAgICAgICBkZWYgY29udHJhY3QsIGNvbnRyYWN0S2V5LCBjb250cmFjdE9iamVjdCwgY29udHJhY3RUeXBlLCBmcmVxdWVuY3ksIGZyZXFEYXlzLCBwYWNrLCBwbUluY2x1ZGVkXG4gICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihpdEFzc2V0S2V5KS5nZXRJZCgpLCBcIkNVU1RPTUVSX0NPTlRSQUNUX1JFRlwiKSl7XG4gICAgICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihpdEFzc2V0S2V5KS5nZXRJZCgpLCBcIkNVU1RPTUVSX0NPTlRSQUNUX1JFRlwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICAgICAgY29udHJhY3QgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKVxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJjb250cmFjdDogXCIgKyBjb250cmFjdFxuICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdCwgXCJDT05UUkFDVF9UWVBFXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgICAgICAgICBjb250cmFjdFR5cGUgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKVxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJjb250cmFjdFR5cGU6IFwiICsgY29udHJhY3RUeXBlXG5cbiAgICAgICAgICAgICAgICAgICAgaWYoY29udHJhY3RUeXBlLmVxdWFscyhcIk1BSU5URU5BTkNFIFRJQ0tFVCBDT05UUkFDVFwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdCwgXCJQTV9GUkVRVUVOQ1lfUkVGXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgZnJlcXVlbmN5ID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImZyZXF1ZW5jeTogXCIgKyBmcmVxdWVuY3lcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGZyZXF1ZW5jeSwgXCJEQVlTXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgZnJlcURheXMgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiZnJlcURheXM6IFwiICsgZnJlcURheXNcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0RhdGUgPSAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShleGVjdXRpb25EYXRlKSArIGZyZXFEYXlzLnRvSW50ZWdlcigpKVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwibmV3IGRhdGU6IFwiICsgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZXhlY3V0aW9uRGF0ZSkgKyBmcmVxRGF5cy50b0ludGVnZXIoKSlcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihjb250cmFjdFR5cGUuZXF1YWxzKFwiTUFJTlRFTkFOQ0UgRkVFIENPTlRSQUNUXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdCwgXCJQQUNLQUdFX1JFRlwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWNrID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJwYWNrOiBcIiArIHBhY2tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihmcmVxdWVuY3ksIFwiUE1fSU5DTFVERURcIikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG1JbmNsdWRlZCA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwicG1JbmNsdWRlZDogXCIgKyBwbUluY2x1ZGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3RGF0ZSA9IChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGV4ZWN1dGlvbkRhdGUpICsgcG1JbmNsdWRlZC50b0ludGVnZXIoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJuZXcgZGF0ZTogXCIgKyAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShleGVjdXRpb25EYXRlKSArIHBtSW5jbHVkZWQudG9JbnRlZ2VyKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRlZiBhc3NldE9iaiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihpdEFzc2V0S2V5KSAgICAgIFxuICAgICAgICAgICAgbG9nLmRlYnVnIFwibmV3RGF0ZTogXCIgKyBuZXdEYXRlXG4gICAgICAgICAgICBkZWYgb2JqID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGFzc2V0T2JqLmdldElkKCkpO1xuICAgICAgICAgICAgLyogQ3JlYXRlIGEgbmV3IHVuc2F2ZWQgb2JqZWN0IGJlYW4gLSBNQUlOVEVOQU5DRSBORVhUIFRJQ0tFVCBEQVRFKi9cbiAgICAgICAgICAgIGRlZiBhdHRyaWJUeXBlID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oMzc3Nyk7IFxuICAgICAgICAgICAgZGVmIG5ld0F0dHJpYiA9IG9iai5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKGF0dHJpYlR5cGUpO1xuICAgICAgICAgICAgZGVmIG5ld0F0dHJpYlZhbHVlID0gbmV3QXR0cmliLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpO1xuICAgICAgICAgICAgZGVmIG9iamVjdEF0dHJpYnV0ZUJlYW5zID0gbmV3IEFycmF5TGlzdCgpO1xuXG4gICAgICAgICAgICBuZXdBdHRyaWJWYWx1ZS5zZXREYXRlVmFsdWUobmV3RGF0ZSlcbiAgICAgICAgICAgIGRlZiBhdHRyaWJWYWx1ZXMgPSBuZXdBdHRyaWIuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpO1xuICAgICAgICAgICAgYXR0cmliVmFsdWVzLmFkZChuZXdBdHRyaWJWYWx1ZSk7XG4gICAgICAgICAgICBuZXdBdHRyaWIuc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyhhdHRyaWJWYWx1ZXMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvKiBDcmVhdGUgYSBuZXcgdW5zYXZlZCBvYmplY3QgYmVhbiAtIE1BSU5URU5BTkNFIExBU1QgVElDS0VUIERBVEUgKi9cbiAgICAgICAgICAgIGF0dHJpYlR5cGUgPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbigzNzc2KTsgXG4gICAgICAgICAgICBuZXdBdHRyaWIgPSBvYmouY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihhdHRyaWJUeXBlKTtcbiAgICAgICAgICAgIG5ld0F0dHJpYlZhbHVlID0gbmV3QXR0cmliLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpO1xuICAgICAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMgPSBuZXcgQXJyYXlMaXN0KCk7XG5cbiAgICAgICAgICAgIG5ld0F0dHJpYlZhbHVlLnNldERhdGVWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGV4ZWN1dGlvbkRhdGUpKVxuICAgICAgICAgICAgYXR0cmliVmFsdWVzID0gbmV3QXR0cmliLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTtcbiAgICAgICAgICAgIGF0dHJpYlZhbHVlcy5hZGQobmV3QXR0cmliVmFsdWUpO1xuICAgICAgICAgICAgbmV3QXR0cmliLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoYXR0cmliVmFsdWVzKTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBuZXdBdHRyaWIgPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG5ld0F0dHJpYik7XG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XG4gICAgICAgICAgICAgICAgbG9nLndhcm4oXCJVbmFibGUgdG8gc2F2ZSBjaGFuZ2VzLiBFeGl0aW5nLlwiKTtcbiAgICAgICAgICAgICAgICBsb2cud2Fybih2aWUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIGxpbmtlZFRpY2tldHMgJiBGYXN0LVRyYW5zYWN0IHRoZW0=</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlCmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZQppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lcgppbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGwKClByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKCkKRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJykKcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHsKCXByb3BlcnRpZXMubG9hZChpdCkKfQpDYXRlZ29yeSBsb2cgPSBDYXRlZ29yeS5nZXRJbnN0YW5jZSgiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb24iKQpsb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5XQVJOKQoKbG9nLndhcm4gIiR7aXNzdWUua2V5fSBUcmFuc2F6aW9uZSBDb21wbGV0ZSAtIFBvc3QgRnVuY3Rpb24gY2hlY2sgbGlua2VkSXNzdWVzIgoKSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpOwpDdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7CmRlZiBhdXRvbWF0aWNhbGx5Q2xvc2VkID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5hdXRvbWF0aWNhbGx5Q2xvc2VkJ10udG9TdHJpbmcoKSlbMF0KSXNzdWVJbmRleGluZ1NlcnZpY2UgCWlzc3VlSW5kZXhpbmdTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KElzc3VlSW5kZXhpbmdTZXJ2aWNlKQoKSXNzdWUgaXNzdWUgPSBpc3N1ZQovL1BlciB0ZXN0IGRhIGNvbnNvbGUKLy9pc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZSgiT1BVVC0yNzYiKQoKU1RBUlRfUFJPR1JFU1M9cHJvcGVydGllc1snd2YudHIuc3RhcnRQcm9ncmVzcyddCkNPTVBMRVRFPXByb3BlcnRpZXNbJ3dmLnRyLmNvbXBsZXRlJ10KCmRlZiB1c2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpCmRlZiBpc3N1ZVNlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZVNlcnZpY2UoKQoKbG9nLndhcm4gImlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCk6ICIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpCgppZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpPT1udWxsIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCkudG9TdHJpbmcoKS5lcXVhbHMoIk5vIikpewogICAgLypPUC0xMDM4OiBzZSBobyBlc2VndWl0byBsYSBDb21wbGV0ZSBzdWwgdGlja2V0ICJwYWRyZSIgdmVyaWZpY28gZSBzcG9zdG8gaW4gYXV0b21hdGljbyBnbGkgZXZlbnR1YWxpIHRpY2tldCBjb2xsZWdhdGkqLwogICAgCiAgICBsb2cud2FybiAidmVyaWZpY28gZSBzcG9zdG8gaW4gYXV0b21hdGljbyBnbGkgZXZlbnR1YWxpIHRpY2tldCBjb2xsZWdhdGkiCiAgICAKICAgIExpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKQogICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykgewogICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7CgogICAgICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUmVsYXRlcyddLnRvU3RyaW5nKCkpKXsKICAgICAgICAgICAgLypFc2VndWlyZSB0cmFuc2F6aW9uZSBkaSBzdGF0byBjb24gT1BBQV9BVVRPTUFUSUNBTExZX0NMT1NFRD1ZZXMgZGVsbGEgc291cmNlSXNzdWUqLwogICAgICAgICAgICBkZWYgbGlua2VkSXNzdWUgPSBpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkKICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlU3RhdHVzID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzKCkKICAgICAgICAgICAgbG9nLndhcm4gIklzc3VlIGNvbiByZWxhdGVzSW5Jc3N1ZUxpbmsgJHtsaW5rZWRJc3N1ZX0gY29uIHN0YXRvICR7bGlua2VkSXNzdWVTdGF0dXN9IgogICAgICAgICAgICBkZWYgdHJhbnNpdGlvbklkCiAgICAgICAgICAgIGlmKGxpbmtlZElzc3VlU3RhdHVzLm5hbWUgPT0gcHJvcGVydGllc1snd2YuY29uZmlybWVkQW5kUGxhbm5lZCddLnRvU3RyaW5nKCkpewogICAgICAgICAgICAgICAgdHJhbnNpdGlvbklkPVNUQVJUX1BST0dSRVNTCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYobGlua2VkSXNzdWVTdGF0dXMubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5pblByb2dyZXNzJ10udG9TdHJpbmcoKSl7CiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9Q09NUExFVEUKICAgICAgICAgICAgfQogICAgICAgICAgICBpZih0cmFuc2l0aW9uSWQ9PVNUQVJUX1BST0dSRVNTKXsKICAgICAgICAgICAgICAgIC8vIFByZXBhcmUgb3VyIGlucHV0IGZvciB0aGUgdHJhbnNpdGlvbgogICAgICAgICAgICAgICAgZGVmIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKCkKICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGggewogICAgICAgICAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayhmYWxzZSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSkKICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgIC8vaXNzdWVJbnB1dFBhcmFtZXRlcnMuYWRkQ3VzdG9tRmllbGRWYWx1ZShmaWVsZENvbmZpZy5nZXRJZCgpLCAiWWVzIikgCiAgICAgICAgICAgICAgICAvL2xvZy53YXJuICJpc3N1ZUlucHV0UGFyYW1ldGVyczogIiArIGlzc3VlSW5wdXRQYXJhbWV0ZXJzCiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlCgogICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgIGxvZy53YXJuICJmaWVsZENvbmZpZzogIiArIGZpZWxkQ29uZmlnCiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q2xvc2VkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoKICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTsKICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICBsb2cud2FybiAiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGEiCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vZGVmIHZhbGlkYXRpb25SZXN1bHQgPSBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKQogICAgICAgICAgICAgICAgaWYgKGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb24KICAgICAgICAgICAgICAgICAgICBkZWYgaXNzdWVSZXN1bHQgPSBpc3N1ZVNlcnZpY2UudHJhbnNpdGlvbih1c2VyLCBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKSkKICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIkZhaWxlZCB0byB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSIpCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJUcmFuc2F6aW9uZSBmYXR0YSA5NiAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c30iKQogICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9Q09NUExFVEUKICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKCkKICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2soZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy9maWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpCiAgICAgICAgICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksICJZZXMiKSAKICAgICAgICAgICAgICAgICAgICAgICAgLy92YWxpZGF0aW9uUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykKICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKICAgICAgICAgICAgICAgICAgICAgICAgbWkgPSAoTXV0YWJsZUlzc3VlKSBsaW5rZWRJc3N1ZQoKICAgICAgICAgICAgICAgICAgICAgICAgLy9maWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICAgICAgICAgIC8vbG9nLndhcm4gImZpZWxkQ29uZmlnOiAiICsgZmllbGRDb25maWcKICAgICAgICAgICAgICAgICAgICAgICAgLy9jZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy9hdXRvbWF0aWNhbGx5Q2xvc2VkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoKICAgICAgICAgICAgICAgICAgICAgICAgLy9Db21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgLy9sb2cud2FybiAiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGEiCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJUcmFuc2F6aW9uZSBmYXR0YSAxMjQgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSwgJHtsaW5rZWRJc3N1ZS5zdGF0dXN9IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJDb3VsZCBub3QgdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmVycm9yQ29sbGVjdGlvbn0iKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfWVsc2UgaWYgKHRyYW5zaXRpb25JZD09Q09NUExFVEUpewogICAgICAgICAgICAgICAgZGVmIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKCkKICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGggewogICAgICAgICAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayhmYWxzZSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSkKICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgIC8vaXNzdWVJbnB1dFBhcmFtZXRlcnMuYWRkQ3VzdG9tRmllbGRWYWx1ZShmaWVsZENvbmZpZy5nZXRJZCgpLCAiWWVzIikgCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKQogICAgICAgICAgICAgICAgZGVmIG1pID0gKE11dGFibGVJc3N1ZSkgbGlua2VkSXNzdWUKCiAgICAgICAgICAgICAgICBkZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGxpbmtlZElzc3VlKQogICAgICAgICAgICAgICAgbG9nLndhcm4gImZpZWxkQ29uZmlnOiAiICsgZmllbGRDb25maWcKICAgICAgICAgICAgICAgIGRlZiBjZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgIGF1dG9tYXRpY2FsbHlDbG9zZWQudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpCgogICAgICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpOwogICAgICAgICAgICAgICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgIGxvZy53YXJuICJVcGRhdGVkIGN1c3RvbWZpZWxkIC0gaXNzdWUgbGlua2F0YSIKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy9kZWYgdmFsaWRhdGlvblJlc3VsdCA9IGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpCiAgICAgICAgICAgICAgICBpZiAoaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuaXNWYWxpZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgdHJhbnNpdGlvbgogICAgICAgICAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpKQogICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIlRyYW5zYXppb25lIGZhdHRhIDE2MSAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c30iKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIkNvdWxkIG5vdCB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuZXJyb3JDb2xsZWN0aW9ufSIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICBMaXN0PElzc3VlTGluaz4gYWxsT3V0SXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldE91dHdhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKQogICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsT3V0SXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHsKICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpOwoKICAgICAgICBpZihpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1JlbGF0ZXMnXS50b1N0cmluZygpKSl7CiAgICAgICAgICAgIGxvZy53YXJuICJJc3N1ZSBjb24gcmVsYXRlc091dElzc3VlTGluayIKICAgICAgICAgICAgLypFc2VndWlyZSB0cmFuc2F6aW9uZSBkaSBzdGF0byBjb24gT1BBQV9BVVRPTUFUSUNBTExZX0NMT1NFRD1ZZXMgZGVsbGEgZGVzdGluYXRpb25Jc3N1ZSovCiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZSA9IGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpCiAgICAgICAgICAgIGRlZiBsaW5rZWRJc3N1ZVN0YXR1cyA9IGxpbmtlZElzc3VlLmdldFN0YXR1cygpCiAgICAgICAgICAgIGRlZiB0cmFuc2l0aW9uSWQKICAgICAgICAgICAgbG9nLndhcm4gImxpbmtlZElzc3VlOiAiICsgbGlua2VkSXNzdWUKICAgICAgICAgICAgbG9nLndhcm4gImxpbmtlZElzc3VlU3RhdHVzLm5hbWU6ICIgKyBsaW5rZWRJc3N1ZVN0YXR1cy5uYW1lCiAgICAgICAgICAgIGlmKGxpbmtlZElzc3VlU3RhdHVzLm5hbWUgPT0gIkNvbmZpcm1lZCBhbmQgUGxhbm5lZCIpewogICAgICAgICAgICAgICAgdHJhbnNpdGlvbklkPVNUQVJUX1BST0dSRVNTCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYobGlua2VkSXNzdWVTdGF0dXMubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5pblByb2dyZXNzJ10udG9TdHJpbmcoKSl7CiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9Q09NUExFVEUKICAgICAgICAgICAgfQogICAgICAgICAgICBsb2cud2FybiAidHJhbnNpdGlvbklkOiAiICsgdHJhbnNpdGlvbklkCiAgICAgICAgICAgIGlmKHRyYW5zaXRpb25JZD09U1RBUlRfUFJPR1JFU1MpewogICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKQogICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7CiAgICAgICAgICAgICAgICAgICAgc2V0U2tpcFNjcmVlbkNoZWNrKGZhbHNlKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy9kZWYgZmllbGRDb25maWcgPSBhdXRvbWF0aWNhbGx5Q2xvc2VkLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKQogICAgICAgICAgICAgICAgLy9Db21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gIlllcyIgfQogICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksICJZZXMiKSAKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpCiAgICAgICAgICAgICAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBsaW5rZWRJc3N1ZQoKICAgICAgICAgICAgICAgIGRlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICBsb2cud2FybiAiZmllbGRDb25maWc6ICIgKyBmaWVsZENvbmZpZwogICAgICAgICAgICAgICAgZGVmIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gIlllcyIgfQogICAgICAgICAgICAgICAgYXV0b21hdGljYWxseUNsb3NlZC51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhdXRvbWF0aWNhbGx5Q2xvc2VkKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSkKCiAgICAgICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7CiAgICAgICAgICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGxpbmtlZElzc3VlKQogICAgICAgICAgICAgICAgbG9nLndhcm4gIlVwZGF0ZWQgY3VzdG9tZmllbGQgLSBpc3N1ZSBsaW5rYXRhIgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvL2RlZiB2YWxpZGF0aW9uUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykKICAgICAgICAgICAgICAgIGxvZy53YXJuICJpc3N1ZUlucHV0UGFyYW1ldGVyczogIiArIGlzc3VlSW5wdXRQYXJhbWV0ZXJzCiAgICAgICAgICAgICAgICBpZiAoaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykuaXNWYWxpZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgdHJhbnNpdGlvbgogICAgICAgICAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpKQogICAgICAgICAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkgewogICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oIlRyYW5zYXppb25lIGZhdHRhIDIxOCAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259LCAke2xpbmtlZElzc3VlLnN0YXR1c30iKQogICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSWQ9Q09NUExFVEUKICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKCkKICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2soZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy9maWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpCiAgICAgICAgICAgICAgICAgICAgICAgIC8vQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09ICJZZXMiIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy9pc3N1ZUlucHV0UGFyYW1ldGVycy5hZGRDdXN0b21GaWVsZFZhbHVlKGZpZWxkQ29uZmlnLmdldElkKCksICJZZXMiKSAKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpCiAgICAgICAgICAgICAgICAgICAgICAgIG1pID0gKE11dGFibGVJc3N1ZSkgbGlua2VkSXNzdWUKCiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4gImZpZWxkQ29uZmlnOiAiICsgZmllbGRDb25maWcKICAgICAgICAgICAgICAgICAgICAgICAgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9tYXRpY2FsbHlDbG9zZWQudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXV0b21hdGljYWxseUNsb3NlZCksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpCgogICAgICAgICAgICAgICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuICJVcGRhdGVkIGN1c3RvbWZpZWxkIC0gaXNzdWUgbGlua2F0YSIKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vdmFsaWRhdGlvblJlc3VsdCA9IGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJUcmFuc2F6aW9uZSBmYXR0YSAyNDggJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufSwgJHtsaW5rZWRJc3N1ZS5zdGF0dXN9IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJDb3VsZCBub3QgdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIHRyYW5zaXRpb25JZCwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpLmVycm9yQ29sbGVjdGlvbn0iKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICBsb2cud2FybiAiaXNzdWUgZGEgY29tcGxldGFyZSIKICAgICAgICAgICAgICAgIGRlZiBpc3N1ZUlucHV0UGFyYW1ldGVycyA9IGlzc3VlU2VydmljZS5uZXdJc3N1ZUlucHV0UGFyYW1ldGVycygpCiAgICAgICAgICAgICAgICBpc3N1ZUlucHV0UGFyYW1ldGVycy53aXRoIHsKICAgICAgICAgICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2soZmFsc2UpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvL2RlZiBmaWVsZENvbmZpZyA9IGF1dG9tYXRpY2FsbHlDbG9zZWQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpCiAgICAgICAgICAgICAgICAvL0NvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICAvL2lzc3VlSW5wdXRQYXJhbWV0ZXJzLmFkZEN1c3RvbUZpZWxkVmFsdWUoZmllbGRDb25maWcuZ2V0SWQoKSwgIlllcyIpIAogICAgICAgICAgICAgICAgLy9sb2cud2FybiAidmFsaWRhdGVSZXN1bHQiCiAgICAgICAgICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKCkKICAgICAgICAgICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlCgogICAgICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gYXV0b21hdGljYWxseUNsb3NlZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSkKICAgICAgICAgICAgICAgIGxvZy53YXJuICJmaWVsZENvbmZpZzogIiArIGZpZWxkQ29uZmlnCiAgICAgICAgICAgICAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSAiWWVzIiB9CiAgICAgICAgICAgICAgICBhdXRvbWF0aWNhbGx5Q2xvc2VkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGF1dG9tYXRpY2FsbHlDbG9zZWQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKQoKICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTsKICAgICAgICAgICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpCiAgICAgICAgICAgICAgICBsb2cud2FybiAiVXBkYXRlZCBjdXN0b21maWVsZCAtIGlzc3VlIGxpbmthdGEiCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmIChpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5pc1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSB0cmFuc2l0aW9uCiAgICAgICAgICAgICAgICAgICAgZGVmIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgdHJhbnNpdGlvbklkLCBpc3N1ZUlucHV0UGFyYW1ldGVycykpCiAgICAgICAgICAgICAgICAgICAgaWYgKCEgaXNzdWVSZXN1bHQuaXNWYWxpZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKCJGYWlsZWQgdG8gdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn0iKQogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiVHJhbnNhemlvbmUgZmF0dGEgMjg1ICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn0sICR7bGlua2VkSXNzdWUuc3RhdHVzfSIpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBsb2cud2FybigiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCB0cmFuc2l0aW9uSWQsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKS5lcnJvckNvbGxlY3Rpb259IikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCn0=</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE"></arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue">50</arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_22693</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="1001" name="ReOpen Job">
          <meta name="opsbar-sequence">10</meta>
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <restrict-to>
            <conditions type="AND">
              <condition type="class">
                <arg name="FIELD_NOTES">YCFgT1BBQV9TQUxFU19PUkRFUl9EQVRFIGFuZCBPUEFBX1BVUkNIQVNFX09SREVSX0RBVEUgc2hvdWxkIGJlIG51bGwgaW4gb3JkZXIgdG8gcmVvcGVuIHRoZSB0aWNrZXQgLSBvdGhlcndpc2UgdGhlIHRpY2tldCBoYXMgYWxyZWFkeSBiZWVuIGFjY291bnRlZCBzbyBpdCBjYW5ub3QgYmUgcmVvcGVuZWQ=</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgY2ZWYWx1ZXNbJ09QX1NBTEVTX09SREVSX0RBVEUnXSA9PSBudWxsICYmIGNmVmFsdWVzWydPUF9QVVJDSEFTRV9PUkRFUl9EQVRFJ10gPT0gbnVsbHx8fA==</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
              </condition>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">e855fbdb-cb53-4bf8-922b-167760b6e692</arg>
                <arg name="FIELD_NOTES">YCFgTWFpbnRlbmFuY2UgVGlja2V0</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnTWFpbnRlbmFuY2UgVGlja2V0JyB8fCBpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnUGxhbm5lZCBNYWludGVuYW5jZSBUaWNrZXQnIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_PREVIEW_ISSUE"></arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="5">
              <post-functions>
                <function type="class">
                  <arg name="field">customfield_22693</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.15.1</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                </function>
                <function type="class">
                  <arg name="field">customfield_22660</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.15.1</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                </function>
                <function type="class">
                  <arg name="field">customfield_22644</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.15.1</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                </function>
                <function type="class">
                  <arg name="field">customfield_22641</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.15.1</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                </function>
                <function type="class">
                  <arg name="field">customfield_22666</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.15.1</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">93ee91428be862f784d2facaa9da5be13f63a66b</arg>
                  <arg name="FIELD_NOTES">YCFgT1A6IFJlbW92ZSBPblNpdGUgUmVwb3J0IEF0dGFjaG1lbnRz</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbkNhdGVnb3J5IGxvZyA9IENhdGVnb3J5LmdldEluc3RhbmNlKFwiY29tLm9ucmVzb2x2ZS5qaXJhLmdyb292eS5Qb3N0RnVuY3Rpb25cIilcbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5cbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5kZWYgYXV0b21hdGljYWxseUNsb3NlZCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUNsb3NlZCddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG4vKlNjcmlwdCBWYXJpYWJsZXMqL1xuLy9QZXIgUG9zdCBGdW5jdGlvblxuSXNzdWUgaXNzdWUgPSBpc3N1ZVxuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0xNDA2MlwiKVxuXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5cbi8qUmltb3ppb25lIGFsbGVnYXRvIHJhcHBvcnRvIGRpIGludGVydmVudG8gYXBwZW5hIGNyZWF0byovXG4vKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG5cbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTtcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcblxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcblxuQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG5kZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG5cbi8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSBcIiBhcm91bmQgdmFsdWUgKi9cbmRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIm9iamVjdFR5cGU9QXR0YWNobWVudCBBTkQgXFxcIlwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuY2F0ZWdvcnlSZWYnXS50b1N0cmluZygpICsgXCJcXFwiLlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm5hbWUnXS50b1N0cmluZygpICsgXCJcXFwiIElOIChcXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5vYmpzLnJhcHBJbnRGQUFDJ10udG9TdHJpbmcoKSArIFwiXFxcIixcXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5vYmpzLmNvbnN1bnRpdm8nXS50b1N0cmluZygpICsgXCJcXFwiKSBBTkQgQVVUT19HRU5FUkFURUQgPSB0cnVlIEFORCBcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmRlbGV0ZWQnXS50b1N0cmluZygpICsgXCIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSBcIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCIpXCIpOyAvLyBTZWUgdGhlIGNvbXBsZXRlIGxpc3Qgb2YgcG9zc2libGUgSVFMIG9uIHRoZSBJbnNpZ2h0IFF1ZXJ5IExhbmd1YWdlIGRvY3VtZW50YXRpb24gcGFnZVxuLyogSWYgdGhpcyBpcyBhIG1hbmRhdG9yeSBmaWVsZCB5b3Ugc2hvdWxkIGJlIGFibGUgdG8gZG8gdGhpczogKi9cbmxvZy5kZWJ1ZyBcIklRTDogXCIgKyBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5cXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5uYW1lJ10udG9TdHJpbmcoKSArIFwiXFxcIiBJTiAoXFxcIlwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkub2Jqcy5yYXBwSW50RkFBQyddLnRvU3RyaW5nKCkgKyBcIlxcXCIsXFxcIlwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkub2Jqcy5jb25zdW50aXZvJ10udG9TdHJpbmcoKSArIFwiXFxcIikgQU5EIFwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyBcIiE9dHJ1ZSBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleSA9IFwiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIilcIlxuXG5mb3IoaW9iaiBpbiBvYmplY3RzKXtcbiAgICAvKiBVUERBVEUgT0pCRUNUIERFTEVURUQgVkFMVUUgKi9cbiAgICBkZWYgb2JqID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGlvYmouZ2V0SWQoKSk7XG4gICAgICAgIFxuICAgIGludCBhdHRhY2htZW50RGVsZXRlZCA9IHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudC5kZWxldGVkLmlkJ10gPyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnQuZGVsZXRlZC5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKCkgOiAzMjY1XG4gICAgXG4gICAgYXR0cmliVHlwZSA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKGF0dGFjaG1lbnREZWxldGVkKTsgXG5cbiAgICBuZXdBdHRyaWIgPSBvYmouY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihhdHRyaWJUeXBlKTtcbiAgICBkZWYgbmV3QXR0cmliVmFsdWUgPSBuZXdBdHRyaWIuY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7XG5cbiAgICB0cnkge1xuICAgIFx0bmV3QXR0cmliVmFsdWUuc2V0VmFsdWUoYXR0cmliVHlwZSwgdHJ1ZSk7XG4gICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSkge1xuICAgICBcdGxvZy53YXJuKFwiU0VUSU5TSUdIVFZBTFVFOiBVbmFibGUgdG8gc2V0IGF0dHJpYnV0ZSBcIiArIGF0dHJpYlR5cGUgKyBcIiB0byBcIiArIHRvdGFsQW1vdW50U3VwcCArIFwiLiBFeGl0aW5nLlwiKTtcbiAgICAgXHRsb2cud2FybihTRVRJTlNJR0hUVkFMVUU6IHZpZS5nZXRNZXNzYWdlKCkpO1xuICAgICBcdHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgZGVmIGF0dHJpYlZhbHVlcyA9IG5ld0F0dHJpYi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7XG4gICAgYXR0cmliVmFsdWVzLmFkZChuZXdBdHRyaWJWYWx1ZSk7XG4gICAgbmV3QXR0cmliLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoYXR0cmliVmFsdWVzKTtcbiAgICAgXG4gICAgdHJ5IHtcbiAgICBcdG5ld0F0dHJpYiA9IG9iamVjdEZhY2FkZS5zdG9yZU9iamVjdEF0dHJpYnV0ZUJlYW4obmV3QXR0cmliKTtcbiAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XG4gICAgXHRsb2cud2FybihcIlNFVElOU0lHSFRWQUxVRTogVW5hYmxlIHRvIHNhdmUgY2hhbmdlcy4gRXhpdGluZy5cIik7XG4gICAgIFx0bG9nLndhcm4oU0VUSU5TSUdIVFZBTFVFOiB2aWUuZ2V0TWVzc2FnZSgpKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGxvZy5pbmZvKFwiU0VUSU5TSUdIVFZBTFVFOiBTdWNjZXNzZnVsbHkgc2F2ZWQgdmFsdWVcIik7XG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerrungroovy-function</arg>
                  <arg name="FIELD_INLINE_SCRIPT">YCFgaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyOwppbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDsKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlOwppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7CmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvbgppbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlCmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5CmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIKaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlCmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2UKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXIKaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsCgpQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpCkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpCnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7Cglwcm9wZXJ0aWVzLmxvYWQoaXQpCn0KQ2F0ZWdvcnkgbG9nID0gQ2F0ZWdvcnkuZ2V0SW5zdGFuY2UoImNvbS5vbnJlc29sdmUuamlyYS5ncm9vdnkuUG9zdEZ1bmN0aW9uIikKbG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpCgpJc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7CkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTsKCklzc3VlSW5kZXhpbmdTZXJ2aWNlIAlpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSkKZGVmIGF1dG9tYXRpY2FsbHlDbG9zZWQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmF1dG9tYXRpY2FsbHlDbG9zZWQnXS50b1N0cmluZygpKVswXQoKZGVmIHJlcXVlc3RNZXRob2QKZGVmIGJhc2VVUkwKCi8qU2NyaXB0IFZhcmlhYmxlcyovCi8vUGVyIFBvc3QgRnVuY3Rpb24KSXNzdWUgaXNzdWUgPSBpc3N1ZQovL1BlciB0ZXN0IGRhIGNvbnNvbGUKLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZSgiT1BVVC0xNDA2MiIpCgppbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpCmludCBEQk8gPSBwcm9wZXJ0aWVzWydpc2NoZW1hLmRiby5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKCkKCi8qUmltb3ppb25lIGFsbGVnYXRvIHJhcHBvcnRvIGRpIGludGVydmVudG8gYXBwZW5hIGNyZWF0byovCi8qIEdldCBJbnNpZ2h0IElRTCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi8KQ2xhc3MgaXFsRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGUiKTsgCmRlZiBpcWxGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUoaXFsRmFjYWRlQ2xhc3MpOwoKLyogR2V0IEluc2lnaHQgT2JqZWN0IEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqLwpDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZSIpOwpkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTsKCi8qIEdldCBJbnNpZ2h0IE9iamVjdCBUeXBlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqLwpDbGFzcyBvYmplY3RUeXBlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlIik7CmRlZiBvYmplY3RUeXBlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVGYWNhZGVDbGFzcyk7CgovKiBHZXQgSW5zaWdodCBPYmplY3QgQXR0cmlidXRlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqLwpDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlIik7CmRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7CgpDbGFzcyBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcygiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5zZXJ2aWNlcy5tb2RlbC5mYWN0b3J5Lk9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Iik7CmRlZiBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzKTsKCi8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSAiIGFyb3VuZCB2YWx1ZSAqLwpkZWYgb2JqZWN0cyA9IGlxbEZhY2FkZS5maW5kT2JqZWN0c0J5SVFMQW5kU2NoZW1hKERCTywgIlwiIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArICJcIi5cIiIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5uYW1lJ10udG9TdHJpbmcoKSArICJcIiBJTiAoXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkub2Jqcy5yYXBwSW50RkFBQyddLnRvU3RyaW5nKCkgKyAiXCIsXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkub2Jqcy5jb25zdW50aXZvJ10udG9TdHJpbmcoKSArICJcIikgQU5EICIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSArICIhPXRydWUgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXkgPSAiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyAiKSIpOyAvLyBTZWUgdGhlIGNvbXBsZXRlIGxpc3Qgb2YgcG9zc2libGUgSVFMIG9uIHRoZSBJbnNpZ2h0IFF1ZXJ5IExhbmd1YWdlIGRvY3VtZW50YXRpb24gcGFnZQovKiBJZiB0aGlzIGlzIGEgbWFuZGF0b3J5IGZpZWxkIHlvdSBzaG91bGQgYmUgYWJsZSB0byBkbyB0aGlzOiAqLwpsb2cuZGVidWcgIklRTDogIiArICJcIiIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5jYXRlZ29yeVJlZiddLnRvU3RyaW5nKCkgKyAiXCIuXCIiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkubmFtZSddLnRvU3RyaW5nKCkgKyAiXCIgSU4gKFwiIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm9ianMucmFwcEludEZBQUMnXS50b1N0cmluZygpICsgIlwiLFwiIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm9ianMuY29uc3VudGl2byddLnRvU3RyaW5nKCkgKyAiXCIpIEFORCAiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyAiIT10cnVlIEFORCBvYmplY3QgSEFWSU5HIGNvbm5lY3RlZFRpY2tldHMoa2V5ID0gIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgIikiCgpmb3IoaW9iaiBpbiBvYmplY3RzKXsKICAgIC8qIFVQREFURSBPSkJFQ1QgREVMRVRFRCBWQUxVRSAqLwogICAgZGVmIG9iaiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihpb2JqLmdldElkKCkpOwogICAgICAgIAogICAgaW50IGF0dGFjaG1lbnREZWxldGVkID0gcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50LmRlbGV0ZWQuaWQnXSA/IHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudC5kZWxldGVkLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKSA6IDMyNjUKICAgIAogICAgYXR0cmliVHlwZSA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKGF0dGFjaG1lbnREZWxldGVkKTsgCgogICAgbmV3QXR0cmliID0gb2JqLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW4oYXR0cmliVHlwZSk7CiAgICBkZWYgbmV3QXR0cmliVmFsdWUgPSBuZXdBdHRyaWIuY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7CgogICAgdHJ5IHsKICAgIAluZXdBdHRyaWJWYWx1ZS5zZXRWYWx1ZShhdHRyaWJUeXBlLCB0cnVlKTsKICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHsKICAgICAJbG9nLndhcm4oIlNFVElOU0lHSFRWQUxVRTogVW5hYmxlIHRvIHNldCBhdHRyaWJ1dGUgIiArIGF0dHJpYlR5cGUgKyAiIHRvICIgKyB0b3RhbEFtb3VudFN1cHAgKyAiLiBFeGl0aW5nLiIpOwogICAgIAlsb2cud2FybihTRVRJTlNJR0hUVkFMVUU6IHZpZS5nZXRNZXNzYWdlKCkpOwogICAgIAlyZXR1cm4gZmFsc2U7CiAgICB9CiAgICAKICAgIGRlZiBhdHRyaWJWYWx1ZXMgPSBuZXdBdHRyaWIuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpOwogICAgYXR0cmliVmFsdWVzLmFkZChuZXdBdHRyaWJWYWx1ZSk7CiAgICBuZXdBdHRyaWIuc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyhhdHRyaWJWYWx1ZXMpOwogICAgIAogICAgdHJ5IHsKICAgIAluZXdBdHRyaWIgPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG5ld0F0dHJpYik7CiAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7CiAgICAJbG9nLndhcm4oIlNFVElOU0lHSFRWQUxVRTogVW5hYmxlIHRvIHNhdmUgY2hhbmdlcy4gRXhpdGluZy4iKTsKICAgICAJbG9nLndhcm4oU0VUSU5TSUdIVFZBTFVFOiB2aWUuZ2V0TWVzc2FnZSgpKTsKICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGxvZy5pbmZvKCJTRVRJTlNJR0hUVkFMVUU6IFN1Y2Nlc3NmdWxseSBzYXZlZCB2YWx1ZSIpOwp9</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_SCRIPT_FILE"></arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">9750ea32-a13d-4474-8c20-074bb1967d78</arg>
                  <arg name="FIELD_NOTES">YCFgQ2xlYXIgY2FjaGU=</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG4vKiBSRVNUIEFQSSBwZXIgR2VuZXJhemlvbmUgQWxsZWdhdG8gUmFwcG9ydG8gZGkgSW50ZXJ2ZW50byAqL1xucmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuLypTY3JpcHQgVmFyaWFibGVzKi9cbi8vUGVyIHRlc3QgZGEgY29uc29sZVxuLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIk9QVVQtMTQwNjJcIilcbmJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL2NsZWFyQ2FjaGUvZGF0YU9iamVjdFwiXG5kZWYgYm9keV9yZXEgPSBbXVxuVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbmNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5sb2cuZGVidWcgXCJib2R5X3JlcTogXCIgKyBib2R5X3JlcVxuY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxubG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5jb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbn0iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="disabled">false</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="25" name="Asset Check">
      <meta name="jira.status.id">14730</meta>
      <actions>
        <action id="951" name="Confirm Asset">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <results>
            <unconditional-result old-status="null" status="null" step="23">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="1111" name="Modifica Impianto" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">20116</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">97dca225-7941-4128-9606-720aac90ae3d</arg>
                <arg name="FIELD_NOTES">YCFgRW5hYmxlZCBvbmx5IGZvciBuZXcgaW5zdCB0aWNrZXRzIGluIG9yZGVyIHRvIGFzc2lnbiBBU1NFVCBhbmQgZ2VuZXJhdGUgKG9yIHJlLWdlbmVyYXRlKSBEb2Nz</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiIoaXNzdWUuaXNzdWVUeXBlLm5hbWUgPT0gJ05ldyBJbnN0YWxsYXRpb24nIHx8IChpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSAnTWFpbnRlbmFuY2UgVGlja2V0JyAmJiBjZlZhbHVlc1snT1BfRklSU1RfVElDS0VUJ10gPT0gXCJGaXJzdCBUaWNrZXRcIikpICYmIGNmVmFsdWVzWydPUF9BU1NFVCddICE9IG51bGwiLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">14aa8006-ff99-4e5c-9191-91eeb349be66</arg>
              <arg name="FIELD_NOTES">YCFgRGVsZXRlIHByZXZpb3VzIGF0dGFjaG1lbnRzIHJlbGF0ZWQgdG8gTkVXIEluc3RhbGxhdGlvbiBUS1QgR2VuZXJhdGlvbg==</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5cbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5kZWYgYXV0b21hdGljYWxseUNsb3NlZCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuYXV0b21hdGljYWxseUNsb3NlZCddLnRvU3RyaW5nKCkpWzBdXG5cbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG4vKlNjcmlwdCBWYXJpYWJsZXMqL1xuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0xNDA2MlwiKVxuXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG5cbi8qUmltb3ppb25lIGFsbGVnYXRvIHJhcHBvcnRvIGRpIGludGVydmVudG8gYXBwZW5hIGNyZWF0byovXG4vKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxuZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG5cbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTtcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcblxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcblxuQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG5kZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG5cbi8qIFNwZWNpZnkgdGhlIHNjaGVtYSBpZCBhcyB3ZWxsIGFzIHRoZSBJUUwgdGhhdCB3aWxsIGZldGNoIG9iamVjdHMuIEluIHRoaXMgY2FzZSBhbGwgb2JqZWN0cyB3aXRoIE5hbWUgbWF0Y2hpbmcgdGhlIHZhbHVlQ0YsIGJlIHN1cmUgdG8gaW5jbHVkZSBcIiBhcm91bmQgdmFsdWUgKi9cbmRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5LmNhdGVnb3J5UmVmJ10udG9TdHJpbmcoKSArIFwiXFxcIi5cXFwiXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5uZXdJbnN0VGt0J10udG9TdHJpbmcoKSArIFwiXFxcIiA9IHRydWUgQU5EIFwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuZGVsZXRlZCddLnRvU3RyaW5nKCkgKyBcIiE9dHJ1ZSBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleSA9IFwiICsgaXNzdWUua2V5LnRvU3RyaW5nKCkgKyBcIilcIik7IC8vIFNlZSB0aGUgY29tcGxldGUgbGlzdCBvZiBwb3NzaWJsZSBJUUwgb24gdGhlIEluc2lnaHQgUXVlcnkgTGFuZ3VhZ2UgZG9jdW1lbnRhdGlvbiBwYWdlXG4vKiBJZiB0aGlzIGlzIGEgbWFuZGF0b3J5IGZpZWxkIHlvdSBzaG91bGQgYmUgYWJsZSB0byBkbyB0aGlzOiAqL1xubG9nLmRlYnVnIFwiSVFMOiBcIiArIFwiXFxcIlwiICsgcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50Q2F0ZWdvcnkuY2F0ZWdvcnlSZWYnXS50b1N0cmluZygpICsgXCJcXFwiLlxcXCJcIiArIHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudENhdGVnb3J5Lm5ld0luc3RUa3QnXS50b1N0cmluZygpICsgXCJcXFwiID0gdHJ1ZSBBTkQgXCIgKyBwcm9wZXJ0aWVzWydpb2JqLmF0dGFjaG1lbnRDYXRlZ29yeS5kZWxldGVkJ10udG9TdHJpbmcoKSArIFwiIT10cnVlIEFORCBvYmplY3QgSEFWSU5HIGNvbm5lY3RlZFRpY2tldHMoa2V5ID0gXCIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArIFwiKVwiXG5cbmZvcihpb2JqIGluIG9iamVjdHMpe1xuICAgIC8qIFVQREFURSBPSkJFQ1QgREVMRVRFRCBWQUxVRSAqL1xuICAgIGRlZiBvYmogPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oaW9iai5nZXRJZCgpKTtcbiAgICAgICAgXG4gICAgaW50IGF0dGFjaG1lbnREZWxldGVkID0gcHJvcGVydGllc1snaW9iai5hdHRhY2htZW50LmRlbGV0ZWQuaWQnXSA/IHByb3BlcnRpZXNbJ2lvYmouYXR0YWNobWVudC5kZWxldGVkLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKSA6IDMyNjVcbiAgICBcbiAgICBhdHRyaWJUeXBlID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oYXR0YWNobWVudERlbGV0ZWQpOyBcblxuICAgIG5ld0F0dHJpYiA9IG9iai5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKGF0dHJpYlR5cGUpO1xuICAgIGRlZiBuZXdBdHRyaWJWYWx1ZSA9IG5ld0F0dHJpYi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTtcblxuICAgIHRyeSB7XG4gICAgXHRuZXdBdHRyaWJWYWx1ZS5zZXRWYWx1ZShhdHRyaWJUeXBlLCB0cnVlKTtcbiAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XG4gICAgIFx0bG9nLndhcm4oXCJTRVRJTlNJR0hUVkFMVUU6IFVuYWJsZSB0byBzZXQgYXR0cmlidXRlIFwiICsgYXR0cmliVHlwZSArIFwiIHRvIFwiICsgdG90YWxBbW91bnRTdXBwICsgXCIuIEV4aXRpbmcuXCIpO1xuICAgICBcdGxvZy53YXJuKFNFVElOU0lHSFRWQUxVRTogdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgIFx0cmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICBkZWYgYXR0cmliVmFsdWVzID0gbmV3QXR0cmliLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTtcbiAgICBhdHRyaWJWYWx1ZXMuYWRkKG5ld0F0dHJpYlZhbHVlKTtcbiAgICBuZXdBdHRyaWIuc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyhhdHRyaWJWYWx1ZXMpO1xuICAgICBcbiAgICB0cnkge1xuICAgIFx0bmV3QXR0cmliID0gb2JqZWN0RmFjYWRlLnN0b3JlT2JqZWN0QXR0cmlidXRlQmVhbihuZXdBdHRyaWIpO1xuICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHtcbiAgICBcdGxvZy53YXJuKFwiU0VUSU5TSUdIVFZBTFVFOiBVbmFibGUgdG8gc2F2ZSBjaGFuZ2VzLiBFeGl0aW5nLlwiKTtcbiAgICAgXHRsb2cud2FybihTRVRJTlNJR0hUVkFMVUU6IHZpZS5nZXRNZXNzYWdlKCkpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgbG9nLmluZm8oXCJTRVRJTlNJR0hUVkFMVUU6IFN1Y2Nlc3NmdWxseSBzYXZlZCB2YWx1ZVwiKTtcbn0iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">a34dae8c-1a80-462f-8514-e46dbce5000f</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IERvYyBUZW1wbGF0ZSBnZW5lcmF0aW9uIC0gc2UgTmV3IEluc3RhbGxhdGlvbiBPUiBGaXJzdCBUaWNrZXQgPSB0cnVl</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5Xb3JrZmxvd0V4Y2VwdGlvbjtcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvblxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyO1xuaW1wb3J0IGdyb292eS5qc29uLlN0cmVhbWluZ0pzb25CdWlsZGVyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5DdXN0b21GaWVsZE1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3I7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMuY29kZWMuYmluYXJ5LkJhc2U2NDtcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5XG5pbXBvcnQgZ3Jvb3Z5eC5uZXQuaHR0cC5IVFRQQnVpbGRlclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcblxuZGVmIHJlcXVlc3RNZXRob2RcbmRlZiBiYXNlVVJMXG5cbmRlZiBmaXJzdFRpY2tldCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YuZmlyc3RUa3QnXS50b1N0cmluZygpKVswXVxuXG5sb2cuZGVidWcgaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZVxubG9nLmRlYnVnIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZmlyc3RUaWNrZXQpXG5cblxuLyogUkVTVCBBUEkgcGVyIEludmlvIE5vdGlmaWNhIEVtYWlsIE9OU0lURV9SRVBPUlQgKi9cbnJlcXVlc3RNZXRob2QgPSBcIkdFVFwiO1xuXG5pZihpc3N1ZS5nZXRJc3N1ZVR5cGUoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2l0Lm5ld0luc3RhbGxhdGlvbiddKSB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGZpcnN0VGlja2V0KSE9bnVsbCl7XG4gICAgZGVmIGZpcnN0X3RpY2tldD1mYWxzZVxuICAgIGRlZiB0ZW1wbGF0ZT1cIlwiXG4gICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShmaXJzdFRpY2tldCkhPW51bGwpe1xuICAgICAgICBmaXJzdF90aWNrZXQ9dHJ1ZVxuICAgICAgICB0ZW1wbGF0ZT1cIkZJUlNUX1RJQ0tFVCU3Q01BTlVGQUNUVVJFUlwiXG4gICAgfWVsc2V7XG4gICAgICAgIHRlbXBsYXRlPVwiTkVXX0lOU1RBTExBVElPTl9DUkVBVEVfVEtUJTdDTUFOVUZBQ1RVUkVSXCJcbiAgICB9XG4gICAgXG4gICAgaWYoaXNzdWUuZ2V0SXNzdWVUeXBlKCkubmFtZS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpdC5uZXdJbnN0YWxsYXRpb24nXSkpe1xuICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvYXV0b21hdGlvbi9kb2N1bWVudC9nZW5lcmF0aW9uL2NoZWNrP0lTU1VFX0tFWT1cIisgaXNzdWUua2V5ICtcIiZET0NfQ0FURUdPUlk9XCIgKyB0ZW1wbGF0ZSArIFwiJkVOQUJMRURfRk9SX0ZJUlNUX1RJQ0tFVD1cIitmaXJzdF90aWNrZXQrXCImSU1QT1JUX0ZST009XCJcbiAgICB9ZWxzZXtcbiAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vZG9jdW1lbnQvZ2VuZXJhdGlvbi9jaGVjaz9JU1NVRV9LRVk9XCIrIGlzc3VlLmtleSArXCImRE9DX0NBVEVHT1JZPVwiICsgdGVtcGxhdGUgKyBcIiZFTkFCTEVEX0ZPUl9GSVJTVF9USUNLRVQ9XCIrZmlyc3RfdGlja2V0K1wiJklNUE9SVF9GUk9NPU9QX0FTU0VUXCJcbiAgICB9XG4gICAgXG4gICAgbG9nLmRlYnVnIGJhc2VVUkxcbiAgICBVUkwgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cdGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICBcbiAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICBsb2cuZGVidWcgXCJFcnJvclN0cmVhbTogXCIgKyBjb25uZWN0aW9uLmdldEVycm9yU3RyZWFtKCkudG9TdHJpbmcoKVxuICAgICAgICBsb2cuZGVidWcgXCJnZXRIZWFkZXJGaWVsZHMoKTogXCIgKyBjb25uZWN0aW9uLmdldEhlYWRlckZpZWxkcygpXG4gICAgICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHRcbiAgICAgICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xuXG4gICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpXG4gICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgXG4gICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcblxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLURPQ1NcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5tZXNzYWdlKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgfVxufVxuIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="25">
              <post-functions>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdateissuestatus-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowcreatecomment-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowgeneratechangehistory-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowreindexissue-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
  </steps>
</workflow>
