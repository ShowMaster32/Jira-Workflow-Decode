<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE workflow PUBLIC "-//OpenSymphony Group//DTD OSWorkflow 2.8//EN" "http://www.opensymphony.com/osworkflow/workflow_2_8.dtd">
<workflow>
  <meta name="jira.description"></meta>
  <meta name="jira.update.author.key">JIRAUSER66010</meta>
  <meta name="jira.updated.date">1743532557775</meta>
  <initial-actions>
    <action id="1" name="Create">
      <validators>
        <validator name="" type="class">
          <arg name="permission">Create Issue</arg>
          <arg name="class.name">com.atlassian.jira.workflow.validator.PermissionValidator</arg>
        </validator>
      </validators>
      <results>
        <unconditional-result old-status="null" status="open" step="6">
          <post-functions>
            <function type="class">
              <arg name="field.copyFieldSource2"></arg>
              <arg name="field.copyFieldSource1">customfield_24200</arg>
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="maxAllowed-integerValue"></arg>
              <arg name="field.createTargetValue1"></arg>
              <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="field.copyFieldMode1">OVERWRITE</arg>
              <arg name="uuid">27deef27-5d37-4109-9af0-2ddb6fd43e39</arg>
              <arg name="field.copyFieldDestination1">customfield_24200</arg>
              <arg name="field.copyFieldSeparator1"></arg>
              <arg name="scopeType">PARENT</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiescopyValueFromOtherField-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="source-scopeTarget">PARENT</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.CopyValueFromOtherFieldPostFunction</arg>
              <arg name="scopeSource-jql"></arg>
            </function>
            <function type="class">
              <arg name="FIELD_SECURITY_LEVEL_ID">11600</arg>
              <arg name="FIELD_FUNCTION_ID">b147e317-65f4-48be-b1ac-48c5afcd21bd</arg>
              <arg name="FIELD_NOTES">YCFgU2V0ICJPcGVyYXRpb24gUG9ydGFsIC0gRkFBQyBTZXJ2aWNlIiBJc3N1ZSBTZWN1cml0eSBMZXZlbA==</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SetIssueSecurity</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SetIssueSecurity</arg>
              <arg name="FIELD_CONDITION"></arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
            </function>
            <function type="class">
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="append.value"></arg>
              <arg name="maxAllowed-integerValue"></arg>
              <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="field.value">MAINTENANCE_ENABLED</arg>
              <arg name="field.name">customfield_22814</arg>
              <arg name="scopeType">SAME</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
              <arg name="scopeSource-jql"></arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueCreateFunction</arg>
            </function>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">60128cc4-e32f-420c-91a3-919a2271e93f</arg>
              <arg name="FIELD_NOTES">YCFgQ3JlYXRlIG9iaiAiRHluYW1pYyBSaXNrIEFzc2Vzc21lbnQi</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiIgaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3JcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZVxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZTtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5ldmVudC50eXBlLkV2ZW50RGlzcGF0Y2hPcHRpb247XHJcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkxldmVsXHJcblxyXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXHJcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZSgnL3Zhci9hdGxhc3NpYW4vYXBwbGljYXRpb24tZGF0YS9zaGFyZWQvc2NyaXB0cy9vcHByb2plY3QucHJvcGVydGllcycpXHJcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XHJcblx0cHJvcGVydGllcy5sb2FkKGl0KVxyXG59XHJcbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cclxuQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyBcclxuZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XHJcbiAgXHJcbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBUeXBlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xyXG5DbGFzcyBvYmplY3RUeXBlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUZhY2FkZVwiKTsgXHJcbmRlZiBvYmplY3RUeXBlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVGYWNhZGVDbGFzcyk7XHJcbiAgXHJcbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBBdHRyaWJ1dGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXHJcbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpOyBcclxuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcclxuICBcclxuQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7IFxyXG5kZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XHJcblxyXG5Jc3N1ZSBpc3N1ZSA9IGlzc3VlXHJcblxyXG5kZWYgdGlja2V0VmlzS2V5ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RCeU5hbWUoXCJPUF9US1RfVklTSUJJTElUWV9LRVlcIilcclxuXHJcbi8vMzAuMDMuMjAyMiAtIG9yYSBtZXNzYSBjb25kaXppb25lIGZpc3NhIGluIGJhc2UgYWxsYSBjb21wYW55IGNvZGUsIGFnZ2l1bmdlcmUgZmxhZyBzdWxsJ29nZ2V0dG8gQ29tcGFueSBjaGUgbGEgYWJpbGl0aSBvIG1lbm8gYWxsYSBkeW5hbWljIHJpc2sgYXNzZXNzbWVudC4gU29sbyBzZSBsYSBjb21wYW55IHJlZmVyZW56aWF0YSBuZWxsYSB2aXNpYmlsaXR5IGtleSBcclxuLy9oYSBsYSBkeW5hbWljIHJpc2sgYXNzZXNzbWVudCBhdHRpdmEgZmFyZSBxdWFudG8gc290dG9cclxuaWYoIWlzc3VlLmdldElzc3VlVHlwZSgpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMoXCJQbGFubmVkIE1haW50ZW5hbmNlIFRpY2tldFwiKSAmJiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0aWNrZXRWaXNLZXkpWzBdLnRvU3RyaW5nKCkuY29udGFpbnMoXCIxMTA4XCIpIHx8IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGlja2V0VmlzS2V5KVswXS50b1N0cmluZygpLmNvbnRhaW5zKFwiMTE3OVwiKSB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRpY2tldFZpc0tleSlbMF0udG9TdHJpbmcoKS5jb250YWlucyhcIjEwNzhcIikpKXtcclxuICAgIFxyXG4gICAgZGVmIGR5bmFtaWNSaXNrRmllbGQgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdEJ5TmFtZShcIk9QX0FTU0VUX1JJU0tTX0FTU0VTU01FTlRcIilcclxuICAgIGRlZiBkeW5hbWljUmlzayA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RCeU5hbWUoXCJPUF9BU1NFVF9SSVNLU19BU1NFU1NNRU5UXCIpKVxyXG4gICAgZGVmIGR5bmFtaWNSaXNrT2JqZWN0cyA9IG5ldyBBcnJheUxpc3QoKTtcclxuICAgIFxyXG4gICAgZGVmIERZTkFNSUNfUklTS19PQkpfVFlQRT1wcm9wZXJ0aWVzWydpb2JqLmR5bmFtaWNSaXNrJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG4gICAgZGVmIERZTkFNSUNfUklTS19BVFRSX05BTUU9cHJvcGVydGllc1snaW9iai5keW5hbWljUmlzay5uYW1lLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG4gICAgZGVmIERZTkFNSUNfUklTS19BVFRSX0NPTVBMRVRFRD1wcm9wZXJ0aWVzWydpb2JqLmR5bmFtaWNSaXNrLmNvbXBsZXRlZC5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuICAgIFxyXG4gICAgZGVmIG9iamVjdEF0dHJpYnV0ZUJlYW5zID0gbmV3IEFycmF5TGlzdCgpO1xyXG4gICAgZGVmIG5hbWVPYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKERZTkFNSUNfUklTS19BVFRSX05BTUUpOyBcclxuICAgIGRlZiBjb21wbGV0ZWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKERZTkFNSUNfUklTS19BVFRSX0NPTVBMRVRFRCk7IFxyXG4gICAgXHJcbiAgICBkZWYgb2JqZWN0VHlwZUR5bmFtaWNSaXNrID0gb2JqZWN0VHlwZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUJlYW4oRFlOQU1JQ19SSVNLX09CSl9UWVBFKTtcclxuICAgIGRlZiBuZXdPYmplY3RCZWFuID0gb2JqZWN0VHlwZUR5bmFtaWNSaXNrLmNyZWF0ZU11dGFibGVPYmplY3RCZWFuKCk7XHJcbiAgICBcclxuICAgIG9iamVjdEF0dHJpYnV0ZUJlYW5zLmFkZChvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeS5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuRm9yT2JqZWN0KG5ld09iamVjdEJlYW4sIG5hbWVPYmplY3RUeXBlQXR0cmlidXRlQmVhbiwgaXNzdWUua2V5LnRvU3RyaW5nKCkpKTtcclxuICAgIG9iamVjdEF0dHJpYnV0ZUJlYW5zLmFkZChvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeS5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuRm9yT2JqZWN0KG5ld09iamVjdEJlYW4sIGNvbXBsZXRlZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuLCBcImZhbHNlXCIpKTtcclxuICAgIFxyXG4gICAgbmV3T2JqZWN0QmVhbi5zZXRPYmplY3RBdHRyaWJ1dGVCZWFucyhvYmplY3RBdHRyaWJ1dGVCZWFucyk7XHJcbiAgICAvKiBTdG9yZSB0aGUgb2JqZWN0IGludG8gSW5zaWdodC4gVGhlIG5ldyBPYmplY3RCZWFuIHdpbGwgYmUgdXBkYXRlZCB3aXRoIGFuIHVuaXF1ZSBJRCAqL1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBuZXdPYmplY3RCZWFuID0gb2JqZWN0RmFjYWRlLnN0b3JlT2JqZWN0QmVhbihuZXdPYmplY3RCZWFuKTtcclxuICAgICAgICBsb2cud2FybihcIm5ld09iamVjdEJlYW46IFwiICsgbmV3T2JqZWN0QmVhbik7XHJcbiAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XHJcbiAgICAgICAgbG9nLndhcm4oXCJDb3VsZCBub3QgY3JlYXRlIGlzc3VlIGR1ZSB0byB2YWxpZGF0aW9uIGV4Y2VwdGlvbjpcIiArIHZpZS5nZXRNZXNzYWdlKCkpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBkeW5hbWljUmlza09iamVjdHMuYWRkKG5ld09iamVjdEJlYW4pXHJcbiAgICBcclxuICAgIGxvZy5pbmZvIChcImR5bmFtaWNSaXNrT2JqZWN0czogXCIgKyBkeW5hbWljUmlza09iamVjdHMpXHJcbiAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcclxuICAgIFxyXG4gICAgaWYgKCFkeW5hbWljUmlza09iamVjdHMuaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgTXV0YWJsZUlzc3VlIG1pID0gKE11dGFibGVJc3N1ZSkgaXNzdWU7XHJcbiAgICAgICAgbWkuc2V0Q3VzdG9tRmllbGRWYWx1ZShkeW5hbWljUmlza0ZpZWxkLCBkeW5hbWljUmlza09iamVjdHMpO1xyXG4gICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTtcclxuICAgIH1cclxufSAgICAgIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">1</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">5eec2e6a-a9b1-4b1b-bbfc-a379ffb2a7fa</arg>
              <arg name="FIELD_NOTES">YCFgVXBkYXRlIFBhcmVudCBUaWNrZXQgT1BfUE1fSU5WT0xWRURfSU5TVEFMTEFUSU9OU19OVU1CRVIgZmllbGQgd2l0aCB0b3QgbnVtYiBvZiBzdWItdGFza3M=</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5kZWYgc3ViVGFza3NOdW0gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfUE1fSU5WT0xWRURfSU5TVEFMTEFUSU9OU19OVU1CRVJcIilbMF1cblxuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL2RlZiBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy0xNjU3NzZcIilcblxuZGVmIHBhcmVudFRrdCA9IGlzc3VlLmdldFBhcmVudE9iamVjdCgpXG5cbnN1YlRhc2tzTnVtLnVwZGF0ZVZhbHVlKG51bGwsIHBhcmVudFRrdCwgbmV3IE1vZGlmaWVkVmFsdWUocGFyZW50VGt0LmdldEN1c3RvbUZpZWxkVmFsdWUoc3ViVGFza3NOdW0pLCAoaXNzdWUuZ2V0UGFyZW50T2JqZWN0KCkuZ2V0U3ViVGFza09iamVjdHMoKS5maW5kQWxseyFpdC5nZXRTdGF0dXMoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKFwiUmVtb3ZlZFwiKX0uc2l6ZSgpKzEpLnRvRG91YmxlKCkpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG5sb2cuZGVidWcgaXNzdWUuZ2V0UGFyZW50T2JqZWN0KCkuZ2V0U3ViVGFza09iamVjdHMoKS5maW5kQWxseyFpdC5nZXRTdGF0dXMoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKFwiUmVtb3ZlZFwiKX0uc2l6ZSgpXG4iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
  </initial-actions>
  <global-actions>
    <action id="141" name="Eseguita con cartaceo">
      <meta name="jira.description"></meta>
      <meta name="jira.fieldscreen.id"></meta>
      <validators>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">32a67932-b290-4d96-9333-4b1480b4c5c8</arg>
          <arg name="FIELD_NOTES">YCFgU0FQOiB1cGRhdGUgU04gc3RhdHVzICYgVXBkYXRlIFNPICsgQ29uZmlybWF0aW9uIC0gRG8gbm90IHVwZGF0ZSBpZiBsYXN0IFBNIFRhc2sgY2xvc2Vk</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb25maWcuU3ViVGFza01hbmFnZXJcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGlua1xuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKClcbi8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtNTI4MjFcIilcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiBzdXBwbGllciA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yuc3VwcGxpZXInXSA/IHByb3BlcnRpZXNbJ2NmLnN1cHBsaWVyJ10udG9TdHJpbmcoKSA6IFwiT1BfU1VQUExJRVJcIilbMF1cbmRlZiBzYXBTTyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9TQVBfU0VSVklDRV9PUkRFUlwiKVswXVxuZGVmIHJlcXVlc3RNZXRob2RcbmRlZiBiYXNlVVJMXG5kZWYgYm9keV9yZXFcbmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cblN1YlRhc2tNYW5hZ2VyIHN1YlRhc2tNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0U3ViVGFza01hbmFnZXIoKTtcbkNvbGxlY3Rpb24gc3ViVGFza3MgPSBpc3N1ZS5nZXRQYXJlbnRPYmplY3QoKS5nZXRTdWJUYXNrT2JqZWN0cygpXG5kZWYgbGFzdCA9IHRydWVcbmlmICghc3ViVGFza3MuZW1wdHkpIHtcbiAgICBzdWJUYXNrcy5lYWNoIHtcbiAgICAgICAgaWYoIWl0LmdldFN0YXR1cygpLm5hbWUudG9TdHJpbmcoKS5lcXVhbHMoXCJEb25lXCIpICYmIGl0LmtleSAhPSBpc3N1ZS5rZXkpe1xuICAgICAgICAgICAgbGFzdD1mYWxzZVxuICAgICAgICAgICAgbG9nLmluZm8gXCJsYXN0XCJcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZighbGFzdCl7XG5cbiAgICAgICAgcmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuXG4gICAgICAgIGJvZHlfcmVxID0gW11cbiAgICAgICAgYm9keV9yZXEgPSBbXG4gICAgICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleSxcbiAgICAgICAgICAgIFwic3RhdHVzXCI6IFwiSU5QXCJcbiAgICAgICAgXSBcblxuICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS9hZnRlci9zYWxlcy9jcmVhdGUvc2VydmljZS9ub3RpZmljYXRpb25cIlxuXG4gICAgICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxuICAgICAgICBsb2cuZGVidWcgXCJib2R5X3JlcSBTTjogXCIgKyBib2R5X3JlcVxuICAgICAgICB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgICAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgICAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cbiAgICAgICAgbG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSAmJiAhY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSl7XG4gICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJTTl9VUERBVEVcIilcbiAgICAgICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKSlcbiAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAvKiogU0VSVklDRSBPUkRFUiBVUERBVEUgKiovXG4gICAgICAgICAgICBVUkwgdXJsXG4gICAgICAgICAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uXG5cbiAgICAgICAgICAgIGJvZHlfcmVxID0gW11cbiAgICAgICAgICAgIHJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcbiAgICAgICAgICAgIGJvZHlfcmVxID0gW1xuICAgICAgICAgICAgICAgIFwiaXNzdWVLZXlcIjogaXNzdWUua2V5LFxuICAgICAgICAgICAgICAgIFwiaW5jbHVkZVwiOiBcIkxBQk9VUlwiXG4gICAgICAgICAgICBdIFxuICAgICAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL29yL3VwZGF0ZS9zZXJ2aWNlL29yZGVyXCJcblxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiYmFzZVVSTCBTTzogXCIgKyBiYXNlVVJMXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJib2R5X3JlcSBTTzogXCIgKyBib2R5X3JlcVxuICAgICAgICAgICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgICAgICAgICAgY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgICAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgICAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICAgICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgICAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG5cbiAgICAgICAgICAgIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlNPIFJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSAmJiAhY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG5cbiAgICAgICAgICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xuXG4gICAgICAgICAgICAgICAgZGVmIGpzb25TbHVycGVyID0gbmV3IEpzb25TbHVycGVyKClcbiAgICAgICAgICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICAgICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwibWVzc2FnZTogXCIgKyAganNvbl9vYmplY3QubWVzc2FnZVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcblxuICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJPUC1TQVAtU08tQ1JFQVRFXCIpXG4gICAgICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcbiAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgLyoqIERBIEZBUkUgU0MgU09MTyBJTiBDQVNPIERJIFRFQ05JQ0kgSU5URVJOSSAqKi9cbiAgICAgICAgICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHN1cHBsaWVyKT09bnVsbCl7IC8qKiBzZSBPUF9TVVBQTElFUiA9IE5VTEwgaWwgdGlja2V0IGhhIHByb3NlZ3VpdG8gc3VsIGZsdXNzbyB0ZWNuaWNpIGludGVybmkgKiovXG5cbiAgICAgICAgICAgICAgICAgICAgYm9keV9yZXEgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleVxuICAgICAgICAgICAgICAgICAgICBdIFxuXG4gICAgICAgICAgICAgICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL2FmdGVyL3NhbGVzL2NyZWF0ZS9zZXJ2aWNlL29yZGVyL2NvbmZpcm1hdGlvblwiXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNDOiBcIiArIGJvZHlfcmVxXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU0M6IFwiICsgYmFzZVVSTFxuICAgICAgICAgICAgICAgICAgICB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgICAgICBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgICAgICBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiU0MgUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDFcIikgJiYgIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtU0FQLVNDLUNSRUFURVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9ZWxzZXtcbiAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzYXBTTykgPT0gbnVsbCl7XG4gICAgICAgICAgICAvKiogU0VSVklDRSBPUkRFUiBDUkVBVElPTiAqKi9cbiAgICAgICAgICAgIFVSTCB1cmxcbiAgICAgICAgICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb25cblxuICAgICAgICAgICAgYm9keV9yZXEgPSBbXVxuICAgICAgICAgICAgcmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuICAgICAgICAgICAgYm9keV9yZXEgPSBbXG4gICAgICAgICAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXG4gICAgICAgICAgICAgICAgXCJpbmNsdWRlXCI6IFwiTUFURVJJQUxTXCJcbiAgICAgICAgICAgIF0gXG4gICAgICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS9hZnRlci9zYWxlcy9jcmVhdGUvb3IvdXBkYXRlL3NlcnZpY2Uvb3JkZXJcIlxuXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJiYXNlVVJMIFNPOiBcIiArIGJhc2VVUkxcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNPOiBcIiArIGJvZHlfcmVxXG4gICAgICAgICAgICB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgICAgICBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgICAgICAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgICAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxuICAgICAgICAgICAgbG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgICAgICAgICAgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDFcIikgJiYgIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHRcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZGVmIGpzb25TbHVycGVyID0gbmV3IEpzb25TbHVycGVyKClcbiAgICAgICAgICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICAgICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwibWVzc2FnZTogXCIgKyAganNvbl9vYmplY3QubWVzc2FnZVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcblxuICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJTT19DUkVBVEVcIilcbiAgICAgICAgICAgICAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGpzb25fb2JqZWN0LmVycm9yc1swXSlcbiAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
      </validators>
      <results>
        <unconditional-result old-status="null" status="null" step="5">
          <post-functions>
            <function type="class">
              <arg name="field.name">resolution</arg>
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
              <arg name="field.value">6</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
    <action id="161" name="Canceled">
      <meta name="jira.description"></meta>
      <meta name="jira.fieldscreen.id"></meta>
      <results>
        <unconditional-result old-status="null" status="null" step="8">
          <post-functions>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">81773586-8020-4dd5-a0db-9b6a5eb4edbb</arg>
              <arg name="FIELD_NOTES">YCFgTG9nIFRpbWVzdGFtcCBmb3IgVGVjaCBhY3Rpdml0eSAmIFVwZGF0ZSBKb2IgQ29tcGxldGVkIC0gRG8gbm90IHVwZGF0ZSBKb2IgQ29tcGxldGVkIGZvciB0aGUgTEFTVCBQTSBUYXNrIGV4ZWN1dGVk</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiIgLyogLS0tLS0tLS0tLS0tLS0tLS0tIEFDVElPTiBFTkQgV09SS0lORyAtLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tIFRSQUNFX0FDVElPTl9TVEFUVVMgPSBXT1JLIC0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0gQUNUSU9OID0gSk9CX0NPTVBMRVRFRCAtLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuYmMuaXNzdWUuc2VhcmNoLlNlYXJjaFNlcnZpY2VcclxuaW1wb3J0IGphdmEudXRpbC5zdHJlYW0uQ29sbGVjdG9yc1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvbjtcclxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouTGV2ZWxcclxuaW1wb3J0IGphdmEuc3FsLlRpbWVzdGFtcFxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbmZpZy5TdWJUYXNrTWFuYWdlclxyXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cclxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyO1xyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmpxbC5wYXJzZXIuSnFsUXVlcnlQYXJzZXJcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS53ZWIuYmVhbi5QYWdlckZpbHRlclxyXG5pbXBvcnQgc3RhdGljIGphdmEubmV0Lkh0dHBVUkxDb25uZWN0aW9uLkhUVFBfT0tcclxuXHJcblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcclxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKCcvdmFyL2F0bGFzc2lhbi9hcHBsaWNhdGlvbi1kYXRhL3NoYXJlZC9zY3JpcHRzL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcclxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcclxuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXHJcbn1cclxuXHJcblxyXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXHJcbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTsgXHJcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xyXG4gIFxyXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cclxuQ2xhc3Mgb2JqZWN0VHlwZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVGYWNhZGVcIik7IFxyXG5kZWYgb2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpO1xyXG4gIFxyXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgQXR0cmlidXRlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xyXG5DbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTsgXHJcbmRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XHJcbiAgXHJcbkNsYXNzIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5zZXJ2aWNlcy5tb2RlbC5mYWN0b3J5Lk9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5XCIpOyBcclxuZGVmIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MpO1xyXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxyXG5kZWYgaXFsRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKGlxbEZhY2FkZUNsYXNzKTtcclxuZGVmIGpxbFF1ZXJ5UGFyc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KEpxbFF1ZXJ5UGFyc2VyKVxyXG5cclxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpXHJcbi8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMTk2MDY5XCIpXHJcblxyXG5kZWYgc2VhcmNoU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChTZWFyY2hTZXJ2aWNlKVxyXG5kZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxyXG4vKjI1LjExLjIyKi9cclxuZGVmIGxvY2FsVGltZVN0YW1wXHJcbmRlZiBsb2NhbERhdGVcclxuLyowMy4xMC4yMyovXHJcbmRlZiBEQVRFVElNRV9PRkZTRVQgPSBwcm9wZXJ0aWVzWyd3Zi50ci5kYXRldGltZXdpdGhvZmZzZXQnXS50b1N0cmluZygpXHJcbmxvZy5kZWJ1ZyBcIkRBVEVUSU1FX09GRlNFVDogXCIgKyBEQVRFVElNRV9PRkZTRVRcclxuaWYgKERBVEVUSU1FX09GRlNFVCAhPSBudWxsICYmIERBVEVUSU1FX09GRlNFVCAhPSAnbnVsbCcpe1xyXG5cclxuZGVmIHNpdGVDRiA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1NJVEVcIilbMF07XHJcbmRlZiBzaXRlLCBzaXRlS2V5LCBzaXRlT2JqZWN0LCB2aXNpYmlsaXR5LCB2aXNpYmlsaXR5S2V5XHJcbmlmIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNpdGVDRikgIT0gbnVsbCkge1xyXG4gICAgc2l0ZSA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2l0ZUNGKS50b1N0cmluZygpXHJcbiAgICBzaXRlS2V5ID0gc2l0ZS5zdWJzdHJpbmcoc2l0ZS5sYXN0SW5kZXhPZignKCcpICsgMSwgc2l0ZS5sYXN0SW5kZXhPZignKScpKVxyXG4gICAgc2l0ZU9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihzaXRlS2V5KVxyXG4gICAgdmlzaWJpbGl0eSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1RLVF9WSVNJQklMSVRZX0tFWVwiKVswXVxyXG4gICAgdmlzaWJpbGl0eUtleSA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodmlzaWJpbGl0eSlbMF0udG9TdHJpbmcoKS5zdWJzdHJpbmcoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh2aXNpYmlsaXR5KVswXS50b1N0cmluZygpLmxhc3RJbmRleE9mKCcoJykgKyAxLCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHZpc2liaWxpdHkpWzBdLnRvU3RyaW5nKCkubGFzdEluZGV4T2YoJyknKSlcclxufSBlbHNlIHtcclxuICAgIHZpc2liaWxpdHkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9JTkRJUkVDVF9KT0JfVEtUX1ZJU0lCSUxJVFlcIilbMF1cclxuICAgIHZpc2liaWxpdHlLZXkgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHZpc2liaWxpdHkpWzBdLnRvU3RyaW5nKCkuc3Vic3RyaW5nKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodmlzaWJpbGl0eSlbMF0udG9TdHJpbmcoKS5sYXN0SW5kZXhPZignKCcpICsgMSwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh2aXNpYmlsaXR5KVswXS50b1N0cmluZygpLmxhc3RJbmRleE9mKCcpJykpXHJcbn1cclxuZGVmIHRpbWVab25lXHJcbmRlZiBjb21wYW55UmVmID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbih2aXNpYmlsaXR5S2V5KS5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnZpc2liaWxpdHlLZXkuY29tcGFueVJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTtcclxubG9nLmluZm8gXCJjb21wYW55UmVmOiBcIiArIGNvbXBhbnlSZWZcclxuZGVmIGNvbXBhbnlSZWZJZCA9IGNvbXBhbnlSZWZbMF0uZ2V0UmVmZXJlbmNlZE9iamVjdEJlYW5JZCgpXHJcbmxvZy5kZWJ1ZyBcImNvbXBhbnlSZWZJZDpcIiArIGNvbXBhbnlSZWZJZFxyXG5pZiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzaXRlQ0YpICE9IG51bGwgJiYgb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHNpdGVPYmplY3QuZ2V0SWQoKSwgXCJTSVRFX1JFRlwiKSkge1xyXG4gICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oc2l0ZU9iamVjdC5nZXRJZCgpLCBcIlNJVEVfUkVGXCIpLmNyZWF0ZU11dGFibGUoKVxyXG4gICAgcyA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxyXG4gICAgcyA9IHMudG9TdHJpbmcoKVxyXG4gICAgc0tleSA9IHMuc3Vic3RyaW5nKHMubGFzdEluZGV4T2YoJygnKSArIDEsIHMubGFzdEluZGV4T2YoJyknKSlcclxuICAgIGlmIChvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oc0tleS50b0ludGVnZXIoKSwgXCJUSU1FX1pPTkVcIikpIHtcclxuICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihzS2V5LnRvSW50ZWdlcigpLCBcIlRJTUVfWk9ORVwiKS5jcmVhdGVNdXRhYmxlKClcclxuICAgICAgICB0aW1lWm9uZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxyXG4gICAgICAgIHRpbWVab25lID0gdGltZVpvbmVbMF0uZ2V0VmFsdWUoKVxyXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlRpbWVab25lIGRhIFNpdGU6IFwiICsgdGltZVpvbmVcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wYW55UmVmSWQudG9JbnRlZ2VyKCksIFwiVElNRV9aT05FXCIpKSB7XHJcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBhbnlSZWZJZC50b0ludGVnZXIoKSwgXCJUSU1FX1pPTkVcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICAgICAgICAgIHRpbWVab25lID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXHJcbiAgICAgICAgICAgIHRpbWVab25lID0gdGltZVpvbmVbMF0uZ2V0VmFsdWUoKVxyXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJUaW1lWm9uZSBkYSBDb21wYW55OiBcIiArIHRpbWVab25lXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IGVsc2Uge1xyXG4gICAgaWYgKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wYW55UmVmSWQudG9JbnRlZ2VyKCksIFwiVElNRV9aT05FXCIpKSB7XHJcbiAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcGFueVJlZklkLnRvSW50ZWdlcigpLCBcIlRJTUVfWk9ORVwiKS5jcmVhdGVNdXRhYmxlKClcclxuICAgICAgICB0aW1lWm9uZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxyXG4gICAgICAgIHRpbWVab25lID0gdGltZVpvbmVbMF0uZ2V0VmFsdWUoKVxyXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlRpbWVab25lIGRhIENvbXBhbnk6IFwiICsgdGltZVpvbmVcclxuICAgIH1cclxufVxyXG5pZiAoIXRpbWVab25lKSB7XHJcbiAgICB0aW1lWm9uZSA9IFwiRXVyb3BlL1JvbWVcIlxyXG59XHJcbmxvZy5kZWJ1ZyBcInRpbWVab25lOiBcIiArIHRpbWVab25lXHJcbmxvY2FsVGltZVN0YW1wID0gKG5ldyBUaW1lc3RhbXAoKG5ldyBEYXRlKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gVGltZVpvbmUuZ2V0RGVmYXVsdCgpLmdldFJhd09mZnNldCgpICsgVGltZVpvbmUuZ2V0VGltZVpvbmUodGltZVpvbmUudG9TdHJpbmcoKSkuZ2V0UmF3T2Zmc2V0KCkpKS50aW1lKSkudG9TdHJpbmcoKVxyXG5sb2NhbERhdGUgPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIFRpbWVab25lLmdldERlZmF1bHQoKS5nZXRSYXdPZmZzZXQoKSArIFRpbWVab25lLmdldFRpbWVab25lKHRpbWVab25lLnRvU3RyaW5nKCkpLmdldFJhd09mZnNldCgpKVxyXG5cclxufWVsc2V7XHJcblxyXG4gICAgbG9jYWxUaW1lU3RhbXAgPSAgKG5ldyBUaW1lc3RhbXAoKG5ldyBEYXRlKCkpLnRpbWUpKS50b1N0cmluZygpXHJcbiAgICBsb2NhbERhdGUgPSAgbmV3IERhdGUoKVxyXG5cclxufVxyXG5cclxubG9nLmRlYnVnIFwibG9jYWxUaW1lU3RhbXA6IFwiICsgbG9jYWxUaW1lU3RhbXBcclxubG9nLmRlYnVnIFwibG9jYWxEYXRlOiBcIiArIGxvY2FsRGF0ZVxyXG4vKjI1LjExLjIyKi9cclxuXHJcbmRlZiB0cm92YXRvPWZhbHNlLCByZW9wZW5lZD1mYWxzZVxyXG5mb3IgKHMgaW4gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnN1cHBsaWVyJ10udG9TdHJpbmcoKSkpe1xyXG4gICAgaWYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocykgIT0gbnVsbCl7XHJcbiAgICAgICAgdHJvdmF0bz10cnVlXHJcbiAgICB9XHJcbn1cclxuXHJcbmRlZiB1c2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXHJcblxyXG4vL1NlIGlsIHRpY2tldCBcdTAwZTggZXNlZ3VpdG8gZGEgdGVjbmljaSBpbnRlcm5pIGVzZWd1byBpbCB0cmFjZSBhdXRvbWF0aWNvIGRlaSB0ZW1waVxyXG5pZiAoIXRyb3ZhdG8pIHtcclxuICAgIFxyXG4gICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfQ1VSUkVOVF9VU0VSXCIpWzBdXHJcbiAgICBkZWYgb25TaXRlVGVjaHNUcmFjZUZpZWxkID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEVDSE5JQ0lBTl9BQ1RJVklUSUVTX1RSQUNFX1dPUktcIilbMF07XHJcbiAgICBkZWYgb25TaXRlVGVjaHNGaWVsZCA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1RFQ0hOSUNJQU5TX09OU0lURVwiKVswXTtcclxuICAgIGRlZiBvblNpdGVUZWNoT2JqZWN0cyA9IG5ldyBBcnJheUxpc3QoKTtcclxuICAgIGludCBPUEFBID0gcHJvcGVydGllc1snaXNjaGVtYS5hYS5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuICAgIGludCBEQk8gPSBwcm9wZXJ0aWVzWydpc2NoZW1hLmRiby5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuICAgIFxyXG4gICAgLyogLS0tLS0tLS0tLS0tIERFRklORSBBQ1RJT04gVE8gQkUgVFJBQ0VEIEFORCBTRVQgVE8gQkUgRE9ORSAtLS0tLS0tLS0tLS0tICovXHJcbiAgICBkZWYgQUNUSU9OID0gcHJvcGVydGllc1snd2YudHIuam9iQ29tcGxldGVkLmFjdGlvbiddLnRvU3RyaW5nKClcclxuICAgIGRlZiBTRVQgPSBwcm9wZXJ0aWVzWyd3Zi50ci5qb2JDb21wbGV0ZWQuc2V0J10udG9TdHJpbmcoKVxyXG4gICAgXHJcbiAgICBkZWYgT05TSVRFX1RFQ0hfUkVQT1JUX09CSl9UWVBFPXByb3BlcnRpZXNbJ2lvYmoub25TaXRlVGVjaFJlcG9ydCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuICAgIGRlZiBPTlNJVEVfVEVDSF9SRVBPUlRfQVRUUl9OQU1FPXByb3BlcnRpZXNbJ2lvYmoub25TaXRlVGVjaFJlcG9ydC5uYW1lLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG4gICAgZGVmIE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX1RFQ0hOSUNJQU5fUkVGPXByb3BlcnRpZXNbJ2lvYmoub25TaXRlVGVjaFJlcG9ydC50ZWNobmljaWFuUmVmLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG4gICAgZGVmIE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX0pPQl9DT01QTEVURUQ9cHJvcGVydGllc1snaW9iai5vblNpdGVUZWNoUmVwb3J0LmpvYkNvbXBsZXRlZC5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuICAgIGRlZiBPTlNJVEVfVEVDSF9SRVBPUlRfQVRUUl9KT0JfU1RBUlRFRD1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVRlY2hSZXBvcnQuam9iU3RhcnRlZC5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuICAgIGRlZiBPTlNJVEVfVEVDSF9SRVBPUlRfQVRUUl9UUkFDRV9BQ1RJT049cHJvcGVydGllc1snaW9iai5vblNpdGVUZWNoUmVwb3J0LnRyYWNlQWN0aW9uLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG4gICAgXHJcbiAgICBsb2cud2FybiBcIioqKioqKioqKioqKioqKioqKioqKiogQ09ORklSTSBBU1NFVCAqKioqKioqKioqKioqKioqKioqKioqXCJcclxuICAgIGRlZiB0ZWNobmljaWFucyA9IGlxbEZhY2FkZS5maW5kT2JqZWN0c0J5SVFMQW5kU2NoZW1hKE9QQUEsIFwib2JqZWN0VHlwZSA9IFRlY2huaWNpYW4gQU5EIFRFQ0hOSUNJQU5fUkVGLlRFQ0hfQUNDT1VOVCA9XFxcIlwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXJyZW50VXNlcikudG9TdHJpbmcoKSArIFwiXFxcIlwiKVxyXG4gICAgbG9nLmluZm8gXCJpcWw6IFwiICsgXCJvYmplY3RUeXBlID0gVGVjaG5pY2lhbiBBTkQgVEVDSE5JQ0lBTl9SRUYuVEVDSF9BQ0NPVU5UID1cXFwiXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1cnJlbnRVc2VyKS50b1N0cmluZygpICsgXCJcXFwiXCJcclxuICAgIFxyXG4gICAgZm9yICh0ZWNobmljaWFuIGluIHRlY2huaWNpYW5zKSB7XHJcbiAgICAgICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0XHJcbiAgICAgICAgZGVmIHRlY2g9dGVjaG5pY2lhbi50b1N0cmluZygpXHJcbiAgICAgICAgZGVmIHRlY2hLZXkgPSB0ZWNoLnN1YnN0cmluZyh0ZWNoLmxhc3RJbmRleE9mKCcoJykrMSx0ZWNoLmxhc3RJbmRleE9mKCcpJykpXHJcbiAgICAgICAgZGVmIHRlY2hOYW1lID0gdGVjaC5zdWJzdHJpbmcoMCx0ZWNoLmxhc3RJbmRleE9mKCcoJyktMSlcclxuICAgICAgICBkZWYgdGVjaE9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbih0ZWNoS2V5KVxyXG4gICAgICAgIGxvZy5pbmZvIFwidGVjaEtleTogXCIgKyB0ZWNoS2V5XHJcbiAgICAgICAgbG9nLmluZm8gKFwidGVjaE5hbWU6IFwiICsgdGVjaE5hbWUpXHJcbiAgICAgICAgbG9nLmluZm8gKFwidGVjaE9iamVjdDogXCIgKyB0ZWNoT2JqZWN0KVxyXG4gICAgICAgIGxvZy5pbmZvIFwiU0VUOiBcIiArU0VUXHJcbiAgICAgICAgaWYgKFNFVCA9PSBcIkpPQl9DT01QTEVURURcIikge1xyXG4gICAgICAgICAgICAvKlNFQVJDSCBPQkpFQ1QgVE8gQkUgVVBEQVRFRCovXHJcbiAgICAgICAgICAgIGRlZiBmaW5kVGVjaG9uc2l0ZVVybCA9IG5ldyBVUkwoXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzLmdldFByb3BlcnR5KFwiYXBpLmVudlwiKSArIFwiL29wL3Jlc3QvamlyYS9maW5kLWNvbm50ZWN0ZWRUaWNrZXQtdGVjaC1hY3Rpb24tc3RhcnRlZC1ub0NvbXBsZXRlZFwiKVxyXG4gICAgICAgICAgICBkZWYgYm9keV9yZXEgPSBbXHJcbiAgICAgICAgICAgICAgICBcImlzc3VlS2V5XCI6IFtpc3N1ZS5rZXldLFxyXG4gICAgICAgICAgICAgICAgXCJ0ZWNoS2V5XCI6IHRlY2hLZXksXHJcbiAgICAgICAgICAgICAgICBcInRyYWNlQWN0aW9uU3RhdHVzXCI6IEFDVElPTlxyXG4gICAgICAgICAgICBdIFxyXG5cclxuICAgICAgICAgICAgbG9nLmluZm8oXCJjYWxsaW5nIFVSTDogXCIgKyBib2R5X3JlcSlcclxuICAgICAgICAgICAgZGVmIGZpbmRUZWNob25zaXRlUmVxdWVzdCA9IChIdHRwVVJMQ29ubmVjdGlvbikgZmluZFRlY2hvbnNpdGVVcmwub3BlbkNvbm5lY3Rpb24oKVxyXG4gICAgICAgICAgICBmaW5kVGVjaG9uc2l0ZVJlcXVlc3Quc2V0UmVxdWVzdE1ldGhvZChcIlBPU1RcIik7XHJcbiAgICAgICAgICAgIGZpbmRUZWNob25zaXRlUmVxdWVzdC5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XHJcbiAgICAgICAgICAgIGZpbmRUZWNob25zaXRlUmVxdWVzdC5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XHJcbiAgICAgICAgICAgIGZpbmRUZWNob25zaXRlUmVxdWVzdC5zZXREb091dHB1dCh0cnVlKTtcclxuICAgICAgICAgICAgZmluZFRlY2hvbnNpdGVSZXF1ZXN0Lm91dHB1dFN0cmVhbVxyXG4gICAgICAgICAgICBmaW5kVGVjaG9uc2l0ZVJlcXVlc3Qub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cclxuICAgICAgICAgICAgbG9nLmRlYnVnIGZpbmRUZWNob25zaXRlUmVxdWVzdC5vdXRwdXRTdHJlYW1cclxuICAgICAgICAgICAgZmluZFRlY2hvbnNpdGVSZXF1ZXN0LmNvbm5lY3QoKTtcclxuICAgICAgICAgICAgZGVmIGZpbmRUZWNob25zaXRlU3RhdHVzQ29kZSA9IGZpbmRUZWNob25zaXRlUmVxdWVzdC5nZXRSZXNwb25zZUNvZGUoKVxyXG4gICAgICAgICAgICBkZWYgZmluZFRlY2hvbnNpdGVTdHJpbmcgPSBmaW5kVGVjaG9uc2l0ZVJlcXVlc3QuZ2V0SW5wdXRTdHJlYW0oKS5nZXRUZXh0KClcclxuICAgICAgICAgICAgbG9nLmluZm8oXCJmaW5kVGVjaG9uc2l0ZVN0YXR1c0NvZGU6IFwiICsgZmluZFRlY2hvbnNpdGVTdGF0dXNDb2RlKVxyXG4gICAgICAgICAgICBsb2cuaW5mbyhcImZpbmRUZWNob25zaXRlU3RyaW5nOiBcIiArIGZpbmRUZWNob25zaXRlU3RyaW5nKVxyXG5cclxuICAgICAgICAgICAgaWYgKGZpbmRUZWNob25zaXRlU3RhdHVzQ29kZSAhPSBIVFRQX09LKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiSU5ESVJFQ1RfSk9CIHJlcG9ydHMgZW5kcG9pbnQgcmV0dXJuZWQgcmVzcG9uc2UgY29kZSAhPSAyMDAgT0tcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIExpc3Qgb2JqZWN0cyA9IChMaXN0KSBqc29uU2x1cnBlci5wYXJzZVRleHQoZmluZFRlY2hvbnNpdGVTdHJpbmcpXHJcblxyXG4gICAgICAgICAgICBsb2cuaW5mbyhcIi0tLS0tLS0gb2JqZWN0cyAtLS0tLS0tLS0tIFwiK29iamVjdHMpXHJcbiAgICAgICAgICAgIC8vb2JqZWN0cyA9IGlxbEZhY2FkZS5maW5kT2JqZWN0c0J5SVFMQW5kU2NoZW1hKE9QQUEsIFwib2JqZWN0VHlwZSA9IE9uU2l0ZV9UZWNoX1JlcG9ydCBBTkQgVEVDSE5JQ0lBTl9SRUYgPVxcXCJcIiArIHRlY2hLZXkgKyBcIlxcXCIgQU5EIEpPQl9TVEFSVEVEIElTIE5PVCBFTVBUWSBBTkQgSk9CX0NPTVBMRVRFRCBJUyBFTVBUWSBBTkQgVFJBQ0VfQUNUSU9OX1NUQVRVUyA9IFxcXCJcIiArIEFDVElPTiArIFwiXFxcIiBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleT1cXFwiXCIgKyBpc3N1ZS5rZXkgKyBcIlxcXCIpXCIpXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvL2xvZy53YXJuIFwiaXFsOiBcIiArIFwib2JqZWN0VHlwZSA9IE9uU2l0ZV9UZWNoX1JlcG9ydCBBTkQgVEVDSE5JQ0lBTl9SRUYgPVxcXCJcIiArIHRlY2hLZXkgKyBcIlxcXCIgQU5EIEpPQl9TVEFSVEVEIElTIE5PVCBFTVBUWSBBTkQgSk9CX0NPTVBMRVRFRCBJUyBFTVBUWSBBTkQgVFJBQ0VfQUNUSU9OX1NUQVRVUyA9IFxcXCJcIiArIEFDVElPTiArIFwiXFxcIiBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleT1cXFwiXCIgKyBpc3N1ZS5rZXkgKyBcIlxcXCIpXCJcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICghb2JqZWN0cy5pc0VtcHR5KCkpIHtcclxuICAgICAgICAgICAgICAgIC8qVVBEQVRFIEpPQl9DT01QTEVURUQgT04gU0VMRUNURUQgT0JKRUNUKi8gICAgIFxyXG4gICAgICAgICAgICAgICAgLyozMC4wNi4yMDIyIEFGIFNlIFx1MDBlOCBsJ3VsdGltbyBzdWItdGFzayBhIGVzc2VyZSBjb21wbGV0YXRvIE5PTiBzYWx2byBpbCB0aW1lc3RhbXAgZGkgZmluZSBsYXZvcm8gY2hlIHZlcnJcdTAwZTAgY29tcGlsYXRvIGEgY2hpdXN1cmEgZGVsIHRpY2tldCBwYWRyZSovXHJcbiAgICAgICAgICAgICAgICBTdWJUYXNrTWFuYWdlciBzdWJUYXNrTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldFN1YlRhc2tNYW5hZ2VyKCk7XHJcbiAgICAgICAgICAgICAgICBDb2xsZWN0aW9uIHN1YlRhc2tzID0gaXNzdWUuZ2V0UGFyZW50T2JqZWN0KCkuZ2V0U3ViVGFza09iamVjdHMoKVxyXG4gICAgICAgICAgICAgICAgZGVmIGxhc3QgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICBpZiAoIXN1YlRhc2tzLmVtcHR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3ViVGFza3MuZWFjaCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXQuc3RhdHVzLm5hbWUuZXF1YWxzKFwiRG9uZVwiKSAmJiAhaXQuc3RhdHVzLm5hbWUuZXF1YWxzKFwiUmVtb3ZlZFwiKSAmJiAhaXQuc3RhdHVzLm5hbWUuZXF1YWxzKFwiUmVqZWN0ZWRcIikgJiYgIWl0LnN0YXR1cy5uYW1lLmVxdWFscyhcIkNhbmNlbGVkXCIpICYmICFpdC5rZXkuZXF1YWxzKGlzc3VlLmtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3QgPSBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmluZm8gXCJmb3VuZCBhbm90aGVyIHN1YnRhc2sgdGhhdCBpcyBub3QgaW4gc3RhdHVzIERvbmUsIFJlbW92ZWQsIFJlamVjdGVkLCBDYW5jZWxlZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghbGFzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWYgb2JqID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKG9iamVjdHNbMF0uaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJUeXBlID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfSk9CX0NPTVBMRVRFRCk7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cuaW5mbyBcImF0dHJpYlR5cGU6IFwiICsgYXR0cmliVHlwZS50b1N0cmluZygpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0F0dHJpYiA9IG9iai5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKGF0dHJpYlR5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWYgbmV3QXR0cmliVmFsdWUgPSBuZXdBdHRyaWIuY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3QXR0cmliVmFsdWUuc2V0RGF0ZVZhbHVlKGxvY2FsRGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiU0VUSU5TSUdIVFZBTFVFOiBVbmFibGUgdG8gc2V0IGF0dHJpYnV0ZSBcIiArIGF0dHJpYlR5cGUudG9TdHJpbmcoKSArIFwiIHRvIFwiICsgbG9jYWxUaW1lU3RhbXAgKyBcIi4gRXhpdGluZy5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlNFVElOU0lHSFRWQUxVRTogXCIgKyB2aWUuZ2V0TWVzc2FnZSgpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWYgYXR0cmliVmFsdWVzID0gbmV3QXR0cmliLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmliVmFsdWVzLmFkZChuZXdBdHRyaWJWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0F0dHJpYi5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKGF0dHJpYlZhbHVlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3QXR0cmliID0gb2JqZWN0RmFjYWRlLnN0b3JlT2JqZWN0QXR0cmlidXRlQmVhbihuZXdBdHRyaWIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlNFVElOU0lHSFRWQUxVRTogVW5hYmxlIHRvIHNhdmUgY2hhbmdlcy4gRXhpdGluZy5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlNFVElOU0lHSFRWQUxVRTogXCIgKyB2aWUuZ2V0TWVzc2FnZSgpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLypWZXJpZmljYXJlIHNlIHVuIGFsdHJvIFBNIFRhc2sgcHJpbWEgZGkgcXVlc3RvIGVyYSBzdGF0byBjb25zaWRlcmF0byB1bHRpbW8gKGFkIGVzLiBwZXJjaFx1MDBlOCBkb3BvIGF2ZXJsaSBjb21wbGV0YXRpIHR1dHRpIGhvIGZhdHRvIGFnZ2l1bmdpIGltcGlhbnRvKSovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qU2Ugc2ksIGFnZ2lvcm5hcmUgSk9CX0NPTVBMRVRFRCBzdWwgcHJlY2VkZW50ZSA9IGEgSk9CX1NUQVJURUQgZGkgcXVlbGxvIGNvcnJlbnRlIGUgY29uc2lkZXJhcmUgcXVlc3RvIGNvbWUgdWx0aW1vKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLypTRUFSQ0ggT0JKRUNUIFRPIEJFIFVQREFURUQqL1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0TGlzdDxTdHJpbmc+IG90aGVyU3VidGFza3MgPSBpc3N1ZS5nZXRQYXJlbnRPYmplY3QoKS5nZXRTdWJUYXNrT2JqZWN0cygpLnN0cmVhbSgpLmZpbHRlcihzIC0+ICFzLnN0YXR1cy5uYW1lLmVxdWFscyhcIlJlbW92ZWRcIikgJiYgIXMuc3RhdHVzLm5hbWUuZXF1YWxzKFwiUmVqZWN0ZWRcIikgJiYgIXMuc3RhdHVzLm5hbWUuZXF1YWxzKFwiQ2FuY2VsZWRcIikgJiYgIXMuZ2V0S2V5KCkuZXF1YWxzKGlzc3VlLmdldEtleSgpKSkubWFwKElzc3VlOjpnZXRLZXkpLmNvbGxlY3QoQ29sbGVjdG9ycy50b0xpc3QoKSlcclxuXHJcblx0XHRcdFx0XHRcdGlmICghb3RoZXJTdWJ0YXNrcy5pc0VtcHR5KCkpIHtcclxuXHRcdFx0XHRcdFx0ICAgIGJvZHlfcmVxID0gW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaXNzdWVLZXlcIjogb3RoZXJTdWJ0YXNrcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRlY2hLZXlcIjogdGVjaEtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRyYWNlQWN0aW9uU3RhdHVzXCI6IEFDVElPTlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxyXG5cdFx0XHRcdFx0XHQgICAgIFxyXG5cdFx0XHRcdFx0XHQgICAgbG9nLmluZm8oXCJjYWxsaW5nIFVSTDogXCIgKyBib2R5X3JlcSlcclxuXHRcdFx0XHRcdFx0ICAgIGZpbmRUZWNob25zaXRlUmVxdWVzdCA9IChIdHRwVVJMQ29ubmVjdGlvbikgZmluZFRlY2hvbnNpdGVVcmwub3BlbkNvbm5lY3Rpb24oKVxyXG5cdFx0XHRcdFx0XHRcdGZpbmRUZWNob25zaXRlUmVxdWVzdC5zZXRSZXF1ZXN0TWV0aG9kKFwiUE9TVFwiKTtcclxuXHRcdFx0XHRcdFx0XHRmaW5kVGVjaG9uc2l0ZVJlcXVlc3Quc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xyXG5cdFx0XHRcdFx0XHRcdGZpbmRUZWNob25zaXRlUmVxdWVzdC5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XHJcblx0XHRcdFx0XHRcdFx0ZmluZFRlY2hvbnNpdGVSZXF1ZXN0LnNldERvT3V0cHV0KHRydWUpO1xyXG5cdFx0XHRcdFx0XHRcdGZpbmRUZWNob25zaXRlUmVxdWVzdC5vdXRwdXRTdHJlYW1cclxuXHRcdFx0XHRcdFx0XHRmaW5kVGVjaG9uc2l0ZVJlcXVlc3Qub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cclxuXHRcdFx0XHRcdFx0XHRsb2cuZGVidWcgZmluZFRlY2hvbnNpdGVSZXF1ZXN0Lm91dHB1dFN0cmVhbVxyXG5cdFx0XHRcdFx0XHRcdGZpbmRUZWNob25zaXRlUmVxdWVzdC5jb25uZWN0KCk7XHJcblx0XHRcdFx0XHRcdCAgICBmaW5kVGVjaG9uc2l0ZVN0YXR1c0NvZGUgPSBmaW5kVGVjaG9uc2l0ZVJlcXVlc3QuZ2V0UmVzcG9uc2VDb2RlKClcclxuXHRcdFx0XHRcdFx0ICAgIGZpbmRUZWNob25zaXRlU3RyaW5nID0gZmluZFRlY2hvbnNpdGVSZXF1ZXN0LmdldElucHV0U3RyZWFtKCkuZ2V0VGV4dCgpXHJcblx0XHRcdFx0XHRcdCAgICBsb2cuaW5mbyhcImZpbmRUZWNob25zaXRlU3RhdHVzQ29kZTogXCIgKyBmaW5kVGVjaG9uc2l0ZVN0YXR1c0NvZGUpXHJcblx0XHRcdFx0XHRcdCAgICBsb2cuaW5mbyhcImZpbmRUZWNob25zaXRlU3RyaW5nOiBcIiArIGZpbmRUZWNob25zaXRlU3RyaW5nKVxyXG5cclxuXHRcdFx0XHRcdFx0ICAgIGlmIChmaW5kVGVjaG9uc2l0ZVN0YXR1c0NvZGUgIT0gSFRUUF9PSykge1xyXG5cdFx0XHRcdFx0XHRcdCAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiSU5ESVJFQ1RfSk9CIHJlcG9ydHMgZW5kcG9pbnQgcmV0dXJuZWQgcmVzcG9uc2UgY29kZSAhPSAyMDAgT0tcIik7XHJcblx0XHRcdFx0XHRcdCAgICB9XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQgICAgTGlzdCBsYXN0T2JqZWN0cyA9IChMaXN0KSBqc29uU2x1cnBlci5wYXJzZVRleHQoZmluZFRlY2hvbnNpdGVTdHJpbmcpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9sYXN0T2JqZWN0cyA9IGlxbEZhY2FkZS5maW5kT2JqZWN0c0J5SVFMQW5kU2NoZW1hKE9QQUEsIFwib2JqZWN0VHlwZSA9IE9uU2l0ZV9UZWNoX1JlcG9ydCBBTkQgVEVDSE5JQ0lBTl9SRUYgPVxcXCJcIiArIHRlY2hLZXkgKyBcIlxcXCIgQU5EIEpPQl9TVEFSVEVEIElTIE5PVCBFTVBUWSBBTkQgSk9CX0NPTVBMRVRFRCBJUyBFTVBUWSBBTkQgVFJBQ0VfQUNUSU9OX1NUQVRVUyA9IFxcXCJcIiArIEFDVElPTiArIFwiXFxcIiBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleSBJTiAoXCIgKyBpc3N1ZS5nZXRQYXJlbnRPYmplY3QoKS5nZXRTdWJUYXNrT2JqZWN0cygpLm1pbnVzKGlzc3VlKS50b1N0cmluZygpLnJlcGxhY2VBbGwoXCJbXFxcXFtcXFxcXV1cIiwgXCJcIikgKyBcIikpXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2xvZy53YXJuIFwiaXFsOiBcIiArIFwib2JqZWN0VHlwZSA9IE9uU2l0ZV9UZWNoX1JlcG9ydCBBTkQgVEVDSE5JQ0lBTl9SRUYgPVxcXCJcIiArIHRlY2hLZXkgKyBcIlxcXCIgQU5EIEpPQl9TVEFSVEVEIElTIE5PVCBFTVBUWSBBTkQgSk9CX0NPTVBMRVRFRCBJUyBFTVBUWSBBTkQgVFJBQ0VfQUNUSU9OX1NUQVRVUyA9IFxcXCJcIiArIEFDVElPTiArIFwiXFxcIiBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleSBJTiAoXCIgKyBpc3N1ZS5nZXRQYXJlbnRPYmplY3QoKS5nZXRTdWJUYXNrT2JqZWN0cygpLm1pbnVzKGlzc3VlKS50b1N0cmluZygpLnJlcGxhY2VBbGwoXCJbXFxcXFtcXFxcXV1cIiwgXCJcIikgKyBcIikpXCJcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxhc3RPYmplY3RzLmlzRW1wdHkoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBsYXN0T2JqZWN0c1swXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBsYXN0T2JqID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGxhc3RPYmplY3RzWzBdLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJUeXBlID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfSk9CX0NPTVBMRVRFRCk7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5pbmZvIFwiYXR0cmliVHlwZTogXCIgKyBhdHRyaWJUeXBlLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdBdHRyaWIgPSBsYXN0T2JqLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW4oYXR0cmliVHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIG5ld0F0dHJpYlZhbHVlID0gbmV3QXR0cmliLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLypHZXQgSk9CX1NUQVJURUQgZnJvbSBjdXJyZW50IG9iaiovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG9iamVjdHNbMF0uaWQsIFwiSk9CX1NUQVJURURcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIHN0YXJ0ZWQgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdBdHRyaWJWYWx1ZS5zZXREYXRlVmFsdWUoc3RhcnRlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlNFVElOU0lHSFRWQUxVRTogVW5hYmxlIHRvIHNldCBhdHRyaWJ1dGUgXCIgKyBhdHRyaWJUeXBlLnRvU3RyaW5nKCkgKyBcIiB0byBcIiArIGxvY2FsVGltZVN0YW1wICsgXCIuIEV4aXRpbmcuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlNFVElOU0lHSFRWQUxVRTogXCIgKyB2aWUuZ2V0TWVzc2FnZSgpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIGF0dHJpYlZhbHVlcyA9IG5ld0F0dHJpYi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmliVmFsdWVzLmFkZChuZXdBdHRyaWJWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3QXR0cmliLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoYXR0cmliVmFsdWVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0F0dHJpYiA9IG9iamVjdEZhY2FkZS5zdG9yZU9iamVjdEF0dHJpYnV0ZUJlYW4obmV3QXR0cmliKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiU0VUSU5TSUdIVFZBTFVFOiBVbmFibGUgdG8gc2F2ZSBjaGFuZ2VzLiBFeGl0aW5nLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJTRVRJTlNJR0hUVkFMVUU6IFwiICsgdmllLmdldE1lc3NhZ2UoKS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIGpxbFNlYXJjaCA9IFwicHJvamVjdCA9ICdcIiArIGlzc3VlLmdldFByb2plY3RPYmplY3QoKS5uYW1lICsgXCInIEFORCBpc3N1ZXR5cGUgSU4gKCdQbGFubmVkIE1haW50ZW5hbmNlIFRhc2snKSBBTkQga2V5ICE9ICdcIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCInIEFORCBPUF9URUNITklDSUFOX0FDVElWSVRJRVNfVFJBQ0VfV09SSyBJTiBpcWxGdW5jdGlvbignb2JqZWN0U2NoZW1hID0gXFxcIk9wZXJhdGlvbiBQb3J0YWwgQUFcXFwiIEFORCBvYmplY3RUeXBlID0gT25TaXRlX1RlY2hfUmVwb3J0IEFORCBLZXkgPSBPUEFBLVwiICsgbGFzdE9iamVjdHNbMF0uaWQgKyBcIicpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJyaWNlcmNhOiBcIiArIGpxbFNlYXJjaFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBxdWVyeSA9IGpxbFF1ZXJ5UGFyc2VyLnBhcnNlUXVlcnkoanFsU2VhcmNoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInF1ZXJ5OiBcIiArIHF1ZXJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIHNlYXJjaCA9IHNlYXJjaFNlcnZpY2Uuc2VhcmNoKHVzZXIsIHF1ZXJ5LCBQYWdlckZpbHRlci5nZXRVbmxpbWl0ZWRGaWx0ZXIoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWYgZm91bmQ9ZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWYgZm91bmRPdXR3YXJkPWZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlYXJjaC5yZXN1bHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vRXhlY3V0ZSB1cGRhdGUgU08gZSBTQyBvbiB0aGUgcmVzdWx0aW5nIGlzc3VlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBpID0gc2VhcmNoLnJlc3VsdHMuZmlyc3QoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWYgYmFzZVVSTFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqIFNFUlZJQ0UgT1JERVIgVVBEQVRFICoqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVUkwgdXJsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb25cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHlfcmVxID0gW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpc3N1ZUtleVwiOiBpLmtleVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS9hZnRlci9zYWxlcy9jcmVhdGUvb3IvdXBkYXRlL3NlcnZpY2Uvb3JkZXJcIlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiYmFzZVVSTCBTTzogXCIgKyBiYXNlVVJMXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNPOiBcIiArIGJvZHlfcmVxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKFwiUE9TVFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiU08gUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDFcIikgJiYgIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJlcnJvcnM6IFwiICsgIGpzb25fb2JqZWN0LmVycm9ycy50b1N0cmluZygpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtU0FQLVNPLUNSRUFURVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKiBEQSBGQVJFIFNDIFNPTE8gSU4gQ0FTTyBESSBURUNOSUNJIElOVEVSTkkgKiovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRyb3ZhdG8pIHsgLyoqIHNlIE9QX1NVUFBMSUVSID0gTlVMTCBpbCB0aWNrZXQgaGEgcHJvc2VndWl0byBzdWwgZmx1c3NvIHRlY25pY2kgaW50ZXJuaSAqKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5X3JlcSA9IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpc3N1ZUtleVwiOiBpLmtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdIFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS9hZnRlci9zYWxlcy9jcmVhdGUvc2VydmljZS9vcmRlci9jb25maXJtYXRpb25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNDOiBcIiArIGJvZHlfcmVxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiYmFzZVVSTCBTQzogXCIgKyBiYXNlVVJMXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKFwiUE9TVFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiU0MgUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSAmJiAhY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJPUC1TQVAtU0MtQ1JFQVRFXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsganNvbl9vYmplY3QuZXJyb3JzWzBdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5X3JlcSA9IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaXNzdWVLZXlcIjogaS5rZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInN0YXR1c1wiOiBcIkNMT1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL2FmdGVyL3NhbGVzL2NyZWF0ZS9zZXJ2aWNlL25vdGlmaWNhdGlvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNOOiBcIiArIGJvZHlfcmVxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChcIlBPU1RcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIlNOX1VQREFURVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHlfcmVxID0gW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImlzc3VlS2V5XCI6IGkua2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInN0YXR1c1wiOiBcIkNMT1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSBcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL3NlcnZpY2Uvbm90aWZpY2F0aW9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJib2R5X3JlcSBTTjogXCIgKyBib2R5X3JlcVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChcIlBPU1RcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJTTl9VUERBVEVcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblx0XHRcdFx0XHRcdH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvKkVSUk9SISEqL1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8qQ1JFQVRFIE5FVyBPQkpFQ1Q6IE9OU0lURV9URUNIX1JFUE9SVF9PQkpfVFlQRSovXHJcbiAgICAgICAgICAgIGRlZiBvYmplY3RUeXBlT25TaXRlVGVjaFJlcG9ydCA9IG9iamVjdFR5cGVGYWNhZGUubG9hZE9iamVjdFR5cGVCZWFuKE9OU0lURV9URUNIX1JFUE9SVF9PQkpfVFlQRSk7XHJcbiAgICAgICAgICAgIGRlZiBuZXdPYmplY3RCZWFuID0gb2JqZWN0VHlwZU9uU2l0ZVRlY2hSZXBvcnQuY3JlYXRlTXV0YWJsZU9iamVjdEJlYW4oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGRlZiBvYmplY3RBdHRyaWJ1dGVCZWFucyA9IG5ldyBBcnJheUxpc3QoKTtcclxuICAgICAgICAgICAgZGVmIG5hbWVPYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX05BTUUpOyBcclxuICAgICAgICAgICAgZGVmIHN0YXJ0ZWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX0pPQl9TVEFSVEVEKTsgXHJcbiAgICAgICAgICAgIGRlZiBhY3Rpb25PYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX1RSQUNFX0FDVElPTik7IFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5LmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW5Gb3JPYmplY3QobmV3T2JqZWN0QmVhbiwgbmFtZU9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuLCB0ZWNoTmFtZSkpO1xyXG4gICAgICAgICAgICBvYmplY3RBdHRyaWJ1dGVCZWFucy5hZGQob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkuY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbkZvck9iamVjdChuZXdPYmplY3RCZWFuLCBzdGFydGVkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4sIGxvY2FsVGltZVN0YW1wKSk7XHJcbiAgICAgICAgICAgIG9iamVjdEF0dHJpYnV0ZUJlYW5zLmFkZChvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeS5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuRm9yT2JqZWN0KG5ld09iamVjdEJlYW4sIGFjdGlvbk9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuLCBBQ1RJT04pKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG5ld09iamVjdEJlYW4uc2V0T2JqZWN0QXR0cmlidXRlQmVhbnMob2JqZWN0QXR0cmlidXRlQmVhbnMpO1xyXG4gICAgICAgICAgICAvKiBTdG9yZSB0aGUgb2JqZWN0IGludG8gSW5zaWdodC4gVGhlIG5ldyBPYmplY3RCZWFuIHdpbGwgYmUgdXBkYXRlZCB3aXRoIGFuIHVuaXF1ZSBJRCAqL1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgbmV3T2JqZWN0QmVhbiA9IG9iamVjdEZhY2FkZS5zdG9yZU9iamVjdEJlYW4obmV3T2JqZWN0QmVhbik7XHJcbiAgICAgICAgICAgICAgICBsb2cud2FybihcIm5ld09iamVjdEJlYW46IFwiICsgbmV3T2JqZWN0QmVhbik7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHtcclxuICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiQ291bGQgbm90IGNyZWF0ZSBpc3N1ZSBkdWUgdG8gdmFsaWRhdGlvbiBleGNlcHRpb246XCIgKyB2aWUuZ2V0TWVzc2FnZSgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLyogVXBkYXRlIFRFQ0hOSUNJQU5fUkVGIG9uIHRoZSBuZXdPYmplY3QgKi9cdFx0ICAgICAgICBcclxuICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfVEVDSE5JQ0lBTl9SRUYpLmNyZWF0ZU11dGFibGUoKSAvL1RoZSBpZCBvZiB0aGUgYXR0cmlidXRlXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvKiBDcmVhdGUgdGhlIG5ldyBhdHRyaWJ1dGUgYmVhbiBiYXNlZCBvbiB0aGUgdmFsdWUgKi9cclxuICAgICAgICAgICAgZGVmIG5ld09iamVjdEF0dHJpYnV0ZUJlYW4gPSBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeS5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuRm9yT2JqZWN0KG5ld09iamVjdEJlYW4sIG9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuLCB0ZWNoS2V5KTtcclxuICAgICAgICAgICAgLyogTG9hZCB0aGUgYXR0cmlidXRlIGJlYW4gKi9cclxuICAgICAgICAgICAgZGVmIG9iamVjdEF0dHJpYnV0ZUJlYW4gPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obmV3T2JqZWN0QmVhbi5nZXRJZCgpLCB0ZWNoS2V5KTtcclxuICAgICAgICAgICAgaWYgKG9iamVjdEF0dHJpYnV0ZUJlYW4gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgLyogSWYgYXR0cmlidXRlIGV4aXN0IHJldXNlIHRoZSBvbGQgaWQgZm9yIHRoZSBuZXcgYXR0cmlidXRlICovXHJcbiAgICAgICAgICAgICAgICBuZXdPYmplY3RBdHRyaWJ1dGVCZWFuLnNldElkKG9iamVjdEF0dHJpYnV0ZUJlYW4uZ2V0SWQoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLyogU3RvcmUgdGhlIG9iamVjdCBhdHRyaWJ1dGUgaW50byBJbnNpZ2h0LiAqL1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG5ld09iamVjdEF0dHJpYnV0ZUJlYW4pO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XHJcbiAgICAgICAgICAgICAgICBsb2cud2FybihcIkNvdWxkIG5vdCB1cGRhdGUgb2JqZWN0IGF0dHJpYnV0ZSBkdWUgdG8gdmFsaWRhdGlvbiBleGNlcHRpb246XCIgKyB2aWUuZ2V0TWVzc2FnZSgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgb25TaXRlVGVjaE9iamVjdHMuYWRkKG5ld09iamVjdEJlYW4pXHJcblxyXG4gICAgICAgICAgICBsb2cuaW5mbyAoXCJvblNpdGVUZWNoT2JqZWN0czogXCIgKyBvblNpdGVUZWNoT2JqZWN0cylcclxuXHJcbiAgICAgICAgICAgIGlmICghb25TaXRlVGVjaE9iamVjdHMuaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgICAgICAgICBNdXRhYmxlSXNzdWUgbWkgPSAoTXV0YWJsZUlzc3VlKSBpc3N1ZTtcclxuICAgICAgICAgICAgICAgIG1pLnNldEN1c3RvbUZpZWxkVmFsdWUob25TaXRlVGVjaHNUcmFjZUZpZWxkLCBvblNpdGVUZWNoT2JqZWN0cyk7XHJcbiAgICAgICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZSh1c2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBtaS5zZXRDdXN0b21GaWVsZFZhbHVlKG9uU2l0ZVRlY2hzRmllbGQsIG9uU2l0ZVRlY2hPYmplY3RzKTtcclxuICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKHVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
            </function>
            <function type="class">
              <arg name="field.name">resolution</arg>
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
              <arg name="field.value">10103</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
    <action id="171" name="Rejected">
      <meta name="jira.description"></meta>
      <meta name="jira.fieldscreen.id"></meta>
      <results>
        <unconditional-result old-status="null" status="null" step="9">
          <post-functions>
            <function type="class">
              <arg name="field.name">resolution</arg>
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
              <arg name="field.value">10103</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
            </function>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">8d09b726-03cc-4515-bffe-8a5f6410435d</arg>
              <arg name="FIELD_NOTES">YCFgTG9nIFRpbWVzdGFtcCBmb3IgVGVjaCBhY3Rpdml0eSAmIFVwZGF0ZSBKb2IgQ29tcGxldGVkIC0gRG8gbm90IHVwZGF0ZSBKb2IgQ29tcGxldGVkIGZvciB0aGUgTEFTVCBQTSBUYXNrIGV4ZWN1dGVk</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiIgLyogLS0tLS0tLS0tLS0tLS0tLS0tIEFDVElPTiBFTkQgV09SS0lORyAtLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tIFRSQUNFX0FDVElPTl9TVEFUVVMgPSBXT1JLIC0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0gQUNUSU9OID0gSk9CX0NPTVBMRVRFRCAtLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuYmMuaXNzdWUuc2VhcmNoLlNlYXJjaFNlcnZpY2VcclxuaW1wb3J0IGphdmEudXRpbC5zdHJlYW0uQ29sbGVjdG9yc1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvbjtcclxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouTGV2ZWxcclxuaW1wb3J0IGphdmEuc3FsLlRpbWVzdGFtcFxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbmZpZy5TdWJUYXNrTWFuYWdlclxyXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cclxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyO1xyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmpxbC5wYXJzZXIuSnFsUXVlcnlQYXJzZXJcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS53ZWIuYmVhbi5QYWdlckZpbHRlclxyXG5pbXBvcnQgc3RhdGljIGphdmEubmV0Lkh0dHBVUkxDb25uZWN0aW9uLkhUVFBfT0tcclxuXHJcblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcclxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKCcvdmFyL2F0bGFzc2lhbi9hcHBsaWNhdGlvbi1kYXRhL3NoYXJlZC9zY3JpcHRzL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcclxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcclxuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXHJcbn1cclxuXHJcblxyXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXHJcbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTsgXHJcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xyXG4gIFxyXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cclxuQ2xhc3Mgb2JqZWN0VHlwZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVGYWNhZGVcIik7IFxyXG5kZWYgb2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpO1xyXG4gIFxyXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgQXR0cmlidXRlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xyXG5DbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTsgXHJcbmRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XHJcbiAgXHJcbkNsYXNzIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5zZXJ2aWNlcy5tb2RlbC5mYWN0b3J5Lk9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5XCIpOyBcclxuZGVmIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MpO1xyXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxyXG5kZWYgaXFsRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKGlxbEZhY2FkZUNsYXNzKTtcclxuZGVmIGpxbFF1ZXJ5UGFyc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KEpxbFF1ZXJ5UGFyc2VyKVxyXG5cclxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpXHJcbi8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMTk2MDY5XCIpXHJcblxyXG5kZWYgc2VhcmNoU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChTZWFyY2hTZXJ2aWNlKVxyXG5kZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxyXG4vKjI1LjExLjIyKi9cclxuZGVmIGxvY2FsVGltZVN0YW1wXHJcbmRlZiBsb2NhbERhdGVcclxuLyowMy4xMC4yMyovXHJcbmRlZiBEQVRFVElNRV9PRkZTRVQgPSBwcm9wZXJ0aWVzWyd3Zi50ci5kYXRldGltZXdpdGhvZmZzZXQnXS50b1N0cmluZygpXHJcbmxvZy5kZWJ1ZyBcIkRBVEVUSU1FX09GRlNFVDogXCIgKyBEQVRFVElNRV9PRkZTRVRcclxuaWYgKERBVEVUSU1FX09GRlNFVCAhPSBudWxsICYmIERBVEVUSU1FX09GRlNFVCAhPSAnbnVsbCcpe1xyXG5cclxuZGVmIHNpdGVDRiA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1NJVEVcIilbMF07XHJcbmRlZiBzaXRlLCBzaXRlS2V5LCBzaXRlT2JqZWN0LCB2aXNpYmlsaXR5LCB2aXNpYmlsaXR5S2V5XHJcbmlmIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNpdGVDRikgIT0gbnVsbCkge1xyXG4gICAgc2l0ZSA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2l0ZUNGKS50b1N0cmluZygpXHJcbiAgICBzaXRlS2V5ID0gc2l0ZS5zdWJzdHJpbmcoc2l0ZS5sYXN0SW5kZXhPZignKCcpICsgMSwgc2l0ZS5sYXN0SW5kZXhPZignKScpKVxyXG4gICAgc2l0ZU9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihzaXRlS2V5KVxyXG4gICAgdmlzaWJpbGl0eSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1RLVF9WSVNJQklMSVRZX0tFWVwiKVswXVxyXG4gICAgdmlzaWJpbGl0eUtleSA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodmlzaWJpbGl0eSlbMF0udG9TdHJpbmcoKS5zdWJzdHJpbmcoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh2aXNpYmlsaXR5KVswXS50b1N0cmluZygpLmxhc3RJbmRleE9mKCcoJykgKyAxLCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHZpc2liaWxpdHkpWzBdLnRvU3RyaW5nKCkubGFzdEluZGV4T2YoJyknKSlcclxufSBlbHNlIHtcclxuICAgIHZpc2liaWxpdHkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9JTkRJUkVDVF9KT0JfVEtUX1ZJU0lCSUxJVFlcIilbMF1cclxuICAgIHZpc2liaWxpdHlLZXkgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHZpc2liaWxpdHkpWzBdLnRvU3RyaW5nKCkuc3Vic3RyaW5nKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodmlzaWJpbGl0eSlbMF0udG9TdHJpbmcoKS5sYXN0SW5kZXhPZignKCcpICsgMSwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh2aXNpYmlsaXR5KVswXS50b1N0cmluZygpLmxhc3RJbmRleE9mKCcpJykpXHJcbn1cclxuZGVmIHRpbWVab25lXHJcbmRlZiBjb21wYW55UmVmID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbih2aXNpYmlsaXR5S2V5KS5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnZpc2liaWxpdHlLZXkuY29tcGFueVJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTtcclxubG9nLmluZm8gXCJjb21wYW55UmVmOiBcIiArIGNvbXBhbnlSZWZcclxuZGVmIGNvbXBhbnlSZWZJZCA9IGNvbXBhbnlSZWZbMF0uZ2V0UmVmZXJlbmNlZE9iamVjdEJlYW5JZCgpXHJcbmxvZy5kZWJ1ZyBcImNvbXBhbnlSZWZJZDpcIiArIGNvbXBhbnlSZWZJZFxyXG5pZiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzaXRlQ0YpICE9IG51bGwgJiYgb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHNpdGVPYmplY3QuZ2V0SWQoKSwgXCJTSVRFX1JFRlwiKSkge1xyXG4gICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oc2l0ZU9iamVjdC5nZXRJZCgpLCBcIlNJVEVfUkVGXCIpLmNyZWF0ZU11dGFibGUoKVxyXG4gICAgcyA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxyXG4gICAgcyA9IHMudG9TdHJpbmcoKVxyXG4gICAgc0tleSA9IHMuc3Vic3RyaW5nKHMubGFzdEluZGV4T2YoJygnKSArIDEsIHMubGFzdEluZGV4T2YoJyknKSlcclxuICAgIGlmIChvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oc0tleS50b0ludGVnZXIoKSwgXCJUSU1FX1pPTkVcIikpIHtcclxuICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihzS2V5LnRvSW50ZWdlcigpLCBcIlRJTUVfWk9ORVwiKS5jcmVhdGVNdXRhYmxlKClcclxuICAgICAgICB0aW1lWm9uZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxyXG4gICAgICAgIHRpbWVab25lID0gdGltZVpvbmVbMF0uZ2V0VmFsdWUoKVxyXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlRpbWVab25lIGRhIFNpdGU6IFwiICsgdGltZVpvbmVcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wYW55UmVmSWQudG9JbnRlZ2VyKCksIFwiVElNRV9aT05FXCIpKSB7XHJcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBhbnlSZWZJZC50b0ludGVnZXIoKSwgXCJUSU1FX1pPTkVcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICAgICAgICAgIHRpbWVab25lID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXHJcbiAgICAgICAgICAgIHRpbWVab25lID0gdGltZVpvbmVbMF0uZ2V0VmFsdWUoKVxyXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJUaW1lWm9uZSBkYSBDb21wYW55OiBcIiArIHRpbWVab25lXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IGVsc2Uge1xyXG4gICAgaWYgKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wYW55UmVmSWQudG9JbnRlZ2VyKCksIFwiVElNRV9aT05FXCIpKSB7XHJcbiAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcGFueVJlZklkLnRvSW50ZWdlcigpLCBcIlRJTUVfWk9ORVwiKS5jcmVhdGVNdXRhYmxlKClcclxuICAgICAgICB0aW1lWm9uZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxyXG4gICAgICAgIHRpbWVab25lID0gdGltZVpvbmVbMF0uZ2V0VmFsdWUoKVxyXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlRpbWVab25lIGRhIENvbXBhbnk6IFwiICsgdGltZVpvbmVcclxuICAgIH1cclxufVxyXG5pZiAoIXRpbWVab25lKSB7XHJcbiAgICB0aW1lWm9uZSA9IFwiRXVyb3BlL1JvbWVcIlxyXG59XHJcbmxvZy5kZWJ1ZyBcInRpbWVab25lOiBcIiArIHRpbWVab25lXHJcbmxvY2FsVGltZVN0YW1wID0gKG5ldyBUaW1lc3RhbXAoKG5ldyBEYXRlKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gVGltZVpvbmUuZ2V0RGVmYXVsdCgpLmdldFJhd09mZnNldCgpICsgVGltZVpvbmUuZ2V0VGltZVpvbmUodGltZVpvbmUudG9TdHJpbmcoKSkuZ2V0UmF3T2Zmc2V0KCkpKS50aW1lKSkudG9TdHJpbmcoKVxyXG5sb2NhbERhdGUgPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIFRpbWVab25lLmdldERlZmF1bHQoKS5nZXRSYXdPZmZzZXQoKSArIFRpbWVab25lLmdldFRpbWVab25lKHRpbWVab25lLnRvU3RyaW5nKCkpLmdldFJhd09mZnNldCgpKVxyXG5cclxufWVsc2V7XHJcblxyXG4gICAgbG9jYWxUaW1lU3RhbXAgPSAgKG5ldyBUaW1lc3RhbXAoKG5ldyBEYXRlKCkpLnRpbWUpKS50b1N0cmluZygpXHJcbiAgICBsb2NhbERhdGUgPSAgbmV3IERhdGUoKVxyXG5cclxufVxyXG5cclxubG9nLmRlYnVnIFwibG9jYWxUaW1lU3RhbXA6IFwiICsgbG9jYWxUaW1lU3RhbXBcclxubG9nLmRlYnVnIFwibG9jYWxEYXRlOiBcIiArIGxvY2FsRGF0ZVxyXG4vKjI1LjExLjIyKi9cclxuXHJcbmRlZiB0cm92YXRvPWZhbHNlLCByZW9wZW5lZD1mYWxzZVxyXG5mb3IgKHMgaW4gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnN1cHBsaWVyJ10udG9TdHJpbmcoKSkpe1xyXG4gICAgaWYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocykgIT0gbnVsbCl7XHJcbiAgICAgICAgdHJvdmF0bz10cnVlXHJcbiAgICB9XHJcbn1cclxuXHJcbmRlZiB1c2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXHJcblxyXG4vL1NlIGlsIHRpY2tldCBcdTAwZTggZXNlZ3VpdG8gZGEgdGVjbmljaSBpbnRlcm5pIGVzZWd1byBpbCB0cmFjZSBhdXRvbWF0aWNvIGRlaSB0ZW1waVxyXG5pZiAoIXRyb3ZhdG8pIHtcclxuICAgIFxyXG4gICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfQ1VSUkVOVF9VU0VSXCIpWzBdXHJcbiAgICBkZWYgb25TaXRlVGVjaHNUcmFjZUZpZWxkID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEVDSE5JQ0lBTl9BQ1RJVklUSUVTX1RSQUNFX1dPUktcIilbMF07XHJcbiAgICBkZWYgb25TaXRlVGVjaHNGaWVsZCA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1RFQ0hOSUNJQU5TX09OU0lURVwiKVswXTtcclxuICAgIGRlZiBvblNpdGVUZWNoT2JqZWN0cyA9IG5ldyBBcnJheUxpc3QoKTtcclxuICAgIGludCBPUEFBID0gcHJvcGVydGllc1snaXNjaGVtYS5hYS5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuICAgIGludCBEQk8gPSBwcm9wZXJ0aWVzWydpc2NoZW1hLmRiby5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuICAgIFxyXG4gICAgLyogLS0tLS0tLS0tLS0tIERFRklORSBBQ1RJT04gVE8gQkUgVFJBQ0VEIEFORCBTRVQgVE8gQkUgRE9ORSAtLS0tLS0tLS0tLS0tICovXHJcbiAgICBkZWYgQUNUSU9OID0gcHJvcGVydGllc1snd2YudHIuam9iQ29tcGxldGVkLmFjdGlvbiddLnRvU3RyaW5nKClcclxuICAgIGRlZiBTRVQgPSBwcm9wZXJ0aWVzWyd3Zi50ci5qb2JDb21wbGV0ZWQuc2V0J10udG9TdHJpbmcoKVxyXG4gICAgXHJcbiAgICBkZWYgT05TSVRFX1RFQ0hfUkVQT1JUX09CSl9UWVBFPXByb3BlcnRpZXNbJ2lvYmoub25TaXRlVGVjaFJlcG9ydCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuICAgIGRlZiBPTlNJVEVfVEVDSF9SRVBPUlRfQVRUUl9OQU1FPXByb3BlcnRpZXNbJ2lvYmoub25TaXRlVGVjaFJlcG9ydC5uYW1lLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG4gICAgZGVmIE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX1RFQ0hOSUNJQU5fUkVGPXByb3BlcnRpZXNbJ2lvYmoub25TaXRlVGVjaFJlcG9ydC50ZWNobmljaWFuUmVmLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG4gICAgZGVmIE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX0pPQl9DT01QTEVURUQ9cHJvcGVydGllc1snaW9iai5vblNpdGVUZWNoUmVwb3J0LmpvYkNvbXBsZXRlZC5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuICAgIGRlZiBPTlNJVEVfVEVDSF9SRVBPUlRfQVRUUl9KT0JfU1RBUlRFRD1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVRlY2hSZXBvcnQuam9iU3RhcnRlZC5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuICAgIGRlZiBPTlNJVEVfVEVDSF9SRVBPUlRfQVRUUl9UUkFDRV9BQ1RJT049cHJvcGVydGllc1snaW9iai5vblNpdGVUZWNoUmVwb3J0LnRyYWNlQWN0aW9uLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG4gICAgXHJcbiAgICBsb2cud2FybiBcIioqKioqKioqKioqKioqKioqKioqKiogQ09ORklSTSBBU1NFVCAqKioqKioqKioqKioqKioqKioqKioqXCJcclxuICAgIGRlZiB0ZWNobmljaWFucyA9IGlxbEZhY2FkZS5maW5kT2JqZWN0c0J5SVFMQW5kU2NoZW1hKE9QQUEsIFwib2JqZWN0VHlwZSA9IFRlY2huaWNpYW4gQU5EIFRFQ0hOSUNJQU5fUkVGLlRFQ0hfQUNDT1VOVCA9XFxcIlwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXJyZW50VXNlcikudG9TdHJpbmcoKSArIFwiXFxcIlwiKVxyXG4gICAgbG9nLmluZm8gXCJpcWw6IFwiICsgXCJvYmplY3RUeXBlID0gVGVjaG5pY2lhbiBBTkQgVEVDSE5JQ0lBTl9SRUYuVEVDSF9BQ0NPVU5UID1cXFwiXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1cnJlbnRVc2VyKS50b1N0cmluZygpICsgXCJcXFwiXCJcclxuICAgIFxyXG4gICAgZm9yICh0ZWNobmljaWFuIGluIHRlY2huaWNpYW5zKSB7XHJcbiAgICAgICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0XHJcbiAgICAgICAgZGVmIHRlY2g9dGVjaG5pY2lhbi50b1N0cmluZygpXHJcbiAgICAgICAgZGVmIHRlY2hLZXkgPSB0ZWNoLnN1YnN0cmluZyh0ZWNoLmxhc3RJbmRleE9mKCcoJykrMSx0ZWNoLmxhc3RJbmRleE9mKCcpJykpXHJcbiAgICAgICAgZGVmIHRlY2hOYW1lID0gdGVjaC5zdWJzdHJpbmcoMCx0ZWNoLmxhc3RJbmRleE9mKCcoJyktMSlcclxuICAgICAgICBkZWYgdGVjaE9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbih0ZWNoS2V5KVxyXG4gICAgICAgIGxvZy5pbmZvIFwidGVjaEtleTogXCIgKyB0ZWNoS2V5XHJcbiAgICAgICAgbG9nLmluZm8gKFwidGVjaE5hbWU6IFwiICsgdGVjaE5hbWUpXHJcbiAgICAgICAgbG9nLmluZm8gKFwidGVjaE9iamVjdDogXCIgKyB0ZWNoT2JqZWN0KVxyXG4gICAgICAgIGxvZy5pbmZvIFwiU0VUOiBcIiArU0VUXHJcbiAgICAgICAgaWYgKFNFVCA9PSBcIkpPQl9DT01QTEVURURcIikge1xyXG4gICAgICAgICAgICAvKlNFQVJDSCBPQkpFQ1QgVE8gQkUgVVBEQVRFRCovXHJcbiAgICAgICAgICAgIGRlZiBmaW5kVGVjaG9uc2l0ZVVybCA9IG5ldyBVUkwoXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzLmdldFByb3BlcnR5KFwiYXBpLmVudlwiKSArIFwiL29wL3Jlc3QvamlyYS9maW5kLWNvbm50ZWN0ZWRUaWNrZXQtdGVjaC1hY3Rpb24tc3RhcnRlZC1ub0NvbXBsZXRlZFwiKVxyXG4gICAgICAgICAgICBkZWYgYm9keV9yZXEgPSBbXHJcbiAgICAgICAgICAgICAgICBcImlzc3VlS2V5XCI6IFtpc3N1ZS5rZXldLFxyXG4gICAgICAgICAgICAgICAgXCJ0ZWNoS2V5XCI6IHRlY2hLZXksXHJcbiAgICAgICAgICAgICAgICBcInRyYWNlQWN0aW9uU3RhdHVzXCI6IEFDVElPTlxyXG4gICAgICAgICAgICBdIFxyXG5cclxuICAgICAgICAgICAgbG9nLmluZm8oXCJjYWxsaW5nIFVSTDogXCIgKyBib2R5X3JlcSlcclxuICAgICAgICAgICAgZGVmIGZpbmRUZWNob25zaXRlUmVxdWVzdCA9IChIdHRwVVJMQ29ubmVjdGlvbikgZmluZFRlY2hvbnNpdGVVcmwub3BlbkNvbm5lY3Rpb24oKVxyXG4gICAgICAgICAgICBmaW5kVGVjaG9uc2l0ZVJlcXVlc3Quc2V0UmVxdWVzdE1ldGhvZChcIlBPU1RcIik7XHJcbiAgICAgICAgICAgIGZpbmRUZWNob25zaXRlUmVxdWVzdC5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XHJcbiAgICAgICAgICAgIGZpbmRUZWNob25zaXRlUmVxdWVzdC5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XHJcbiAgICAgICAgICAgIGZpbmRUZWNob25zaXRlUmVxdWVzdC5zZXREb091dHB1dCh0cnVlKTtcclxuICAgICAgICAgICAgZmluZFRlY2hvbnNpdGVSZXF1ZXN0Lm91dHB1dFN0cmVhbVxyXG4gICAgICAgICAgICBmaW5kVGVjaG9uc2l0ZVJlcXVlc3Qub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cclxuICAgICAgICAgICAgbG9nLmRlYnVnIGZpbmRUZWNob25zaXRlUmVxdWVzdC5vdXRwdXRTdHJlYW1cclxuICAgICAgICAgICAgZmluZFRlY2hvbnNpdGVSZXF1ZXN0LmNvbm5lY3QoKTtcclxuICAgICAgICAgICAgZGVmIGZpbmRUZWNob25zaXRlU3RhdHVzQ29kZSA9IGZpbmRUZWNob25zaXRlUmVxdWVzdC5nZXRSZXNwb25zZUNvZGUoKVxyXG4gICAgICAgICAgICBkZWYgZmluZFRlY2hvbnNpdGVTdHJpbmcgPSBmaW5kVGVjaG9uc2l0ZVJlcXVlc3QuZ2V0SW5wdXRTdHJlYW0oKS5nZXRUZXh0KClcclxuICAgICAgICAgICAgbG9nLmluZm8oXCJmaW5kVGVjaG9uc2l0ZVN0YXR1c0NvZGU6IFwiICsgZmluZFRlY2hvbnNpdGVTdGF0dXNDb2RlKVxyXG4gICAgICAgICAgICBsb2cuaW5mbyhcImZpbmRUZWNob25zaXRlU3RyaW5nOiBcIiArIGZpbmRUZWNob25zaXRlU3RyaW5nKVxyXG5cclxuICAgICAgICAgICAgaWYgKGZpbmRUZWNob25zaXRlU3RhdHVzQ29kZSAhPSBIVFRQX09LKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiSU5ESVJFQ1RfSk9CIHJlcG9ydHMgZW5kcG9pbnQgcmV0dXJuZWQgcmVzcG9uc2UgY29kZSAhPSAyMDAgT0tcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIExpc3Qgb2JqZWN0cyA9IChMaXN0KSBqc29uU2x1cnBlci5wYXJzZVRleHQoZmluZFRlY2hvbnNpdGVTdHJpbmcpXHJcblxyXG4gICAgICAgICAgICBsb2cuaW5mbyhcIi0tLS0tLS0gb2JqZWN0cyAtLS0tLS0tLS0tIFwiK29iamVjdHMpXHJcbiAgICAgICAgICAgIC8vb2JqZWN0cyA9IGlxbEZhY2FkZS5maW5kT2JqZWN0c0J5SVFMQW5kU2NoZW1hKE9QQUEsIFwib2JqZWN0VHlwZSA9IE9uU2l0ZV9UZWNoX1JlcG9ydCBBTkQgVEVDSE5JQ0lBTl9SRUYgPVxcXCJcIiArIHRlY2hLZXkgKyBcIlxcXCIgQU5EIEpPQl9TVEFSVEVEIElTIE5PVCBFTVBUWSBBTkQgSk9CX0NPTVBMRVRFRCBJUyBFTVBUWSBBTkQgVFJBQ0VfQUNUSU9OX1NUQVRVUyA9IFxcXCJcIiArIEFDVElPTiArIFwiXFxcIiBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleT1cXFwiXCIgKyBpc3N1ZS5rZXkgKyBcIlxcXCIpXCIpXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvL2xvZy53YXJuIFwiaXFsOiBcIiArIFwib2JqZWN0VHlwZSA9IE9uU2l0ZV9UZWNoX1JlcG9ydCBBTkQgVEVDSE5JQ0lBTl9SRUYgPVxcXCJcIiArIHRlY2hLZXkgKyBcIlxcXCIgQU5EIEpPQl9TVEFSVEVEIElTIE5PVCBFTVBUWSBBTkQgSk9CX0NPTVBMRVRFRCBJUyBFTVBUWSBBTkQgVFJBQ0VfQUNUSU9OX1NUQVRVUyA9IFxcXCJcIiArIEFDVElPTiArIFwiXFxcIiBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleT1cXFwiXCIgKyBpc3N1ZS5rZXkgKyBcIlxcXCIpXCJcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICghb2JqZWN0cy5pc0VtcHR5KCkpIHtcclxuICAgICAgICAgICAgICAgIC8qVVBEQVRFIEpPQl9DT01QTEVURUQgT04gU0VMRUNURUQgT0JKRUNUKi8gICAgIFxyXG4gICAgICAgICAgICAgICAgLyozMC4wNi4yMDIyIEFGIFNlIFx1MDBlOCBsJ3VsdGltbyBzdWItdGFzayBhIGVzc2VyZSBjb21wbGV0YXRvIE5PTiBzYWx2byBpbCB0aW1lc3RhbXAgZGkgZmluZSBsYXZvcm8gY2hlIHZlcnJcdTAwZTAgY29tcGlsYXRvIGEgY2hpdXN1cmEgZGVsIHRpY2tldCBwYWRyZSovXHJcbiAgICAgICAgICAgICAgICBTdWJUYXNrTWFuYWdlciBzdWJUYXNrTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldFN1YlRhc2tNYW5hZ2VyKCk7XHJcbiAgICAgICAgICAgICAgICBDb2xsZWN0aW9uIHN1YlRhc2tzID0gaXNzdWUuZ2V0UGFyZW50T2JqZWN0KCkuZ2V0U3ViVGFza09iamVjdHMoKVxyXG4gICAgICAgICAgICAgICAgZGVmIGxhc3QgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICBpZiAoIXN1YlRhc2tzLmVtcHR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3ViVGFza3MuZWFjaCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXQuc3RhdHVzLm5hbWUuZXF1YWxzKFwiRG9uZVwiKSAmJiAhaXQuc3RhdHVzLm5hbWUuZXF1YWxzKFwiUmVtb3ZlZFwiKSAmJiAhaXQuc3RhdHVzLm5hbWUuZXF1YWxzKFwiUmVqZWN0ZWRcIikgJiYgIWl0LnN0YXR1cy5uYW1lLmVxdWFscyhcIkNhbmNlbGVkXCIpICYmICFpdC5rZXkuZXF1YWxzKGlzc3VlLmtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3QgPSBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmluZm8gXCJmb3VuZCBhbm90aGVyIHN1YnRhc2sgdGhhdCBpcyBub3QgaW4gc3RhdHVzIERvbmUsIFJlbW92ZWQsIFJlamVjdGVkLCBDYW5jZWxlZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghbGFzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWYgb2JqID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKG9iamVjdHNbMF0uaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJUeXBlID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfSk9CX0NPTVBMRVRFRCk7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cuaW5mbyBcImF0dHJpYlR5cGU6IFwiICsgYXR0cmliVHlwZS50b1N0cmluZygpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0F0dHJpYiA9IG9iai5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKGF0dHJpYlR5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWYgbmV3QXR0cmliVmFsdWUgPSBuZXdBdHRyaWIuY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3QXR0cmliVmFsdWUuc2V0RGF0ZVZhbHVlKGxvY2FsRGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiU0VUSU5TSUdIVFZBTFVFOiBVbmFibGUgdG8gc2V0IGF0dHJpYnV0ZSBcIiArIGF0dHJpYlR5cGUudG9TdHJpbmcoKSArIFwiIHRvIFwiICsgbG9jYWxUaW1lU3RhbXAgKyBcIi4gRXhpdGluZy5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlNFVElOU0lHSFRWQUxVRTogXCIgKyB2aWUuZ2V0TWVzc2FnZSgpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWYgYXR0cmliVmFsdWVzID0gbmV3QXR0cmliLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmliVmFsdWVzLmFkZChuZXdBdHRyaWJWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0F0dHJpYi5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKGF0dHJpYlZhbHVlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3QXR0cmliID0gb2JqZWN0RmFjYWRlLnN0b3JlT2JqZWN0QXR0cmlidXRlQmVhbihuZXdBdHRyaWIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlNFVElOU0lHSFRWQUxVRTogVW5hYmxlIHRvIHNhdmUgY2hhbmdlcy4gRXhpdGluZy5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlNFVElOU0lHSFRWQUxVRTogXCIgKyB2aWUuZ2V0TWVzc2FnZSgpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLypWZXJpZmljYXJlIHNlIHVuIGFsdHJvIFBNIFRhc2sgcHJpbWEgZGkgcXVlc3RvIGVyYSBzdGF0byBjb25zaWRlcmF0byB1bHRpbW8gKGFkIGVzLiBwZXJjaFx1MDBlOCBkb3BvIGF2ZXJsaSBjb21wbGV0YXRpIHR1dHRpIGhvIGZhdHRvIGFnZ2l1bmdpIGltcGlhbnRvKSovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qU2Ugc2ksIGFnZ2lvcm5hcmUgSk9CX0NPTVBMRVRFRCBzdWwgcHJlY2VkZW50ZSA9IGEgSk9CX1NUQVJURUQgZGkgcXVlbGxvIGNvcnJlbnRlIGUgY29uc2lkZXJhcmUgcXVlc3RvIGNvbWUgdWx0aW1vKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLypTRUFSQ0ggT0JKRUNUIFRPIEJFIFVQREFURUQqL1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0TGlzdDxTdHJpbmc+IG90aGVyU3VidGFza3MgPSBpc3N1ZS5nZXRQYXJlbnRPYmplY3QoKS5nZXRTdWJUYXNrT2JqZWN0cygpLnN0cmVhbSgpLmZpbHRlcihzIC0+ICFzLnN0YXR1cy5uYW1lLmVxdWFscyhcIlJlbW92ZWRcIikgJiYgIXMuc3RhdHVzLm5hbWUuZXF1YWxzKFwiUmVqZWN0ZWRcIikgJiYgIXMuc3RhdHVzLm5hbWUuZXF1YWxzKFwiQ2FuY2VsZWRcIikgJiYgIXMuZ2V0S2V5KCkuZXF1YWxzKGlzc3VlLmdldEtleSgpKSkubWFwKElzc3VlOjpnZXRLZXkpLmNvbGxlY3QoQ29sbGVjdG9ycy50b0xpc3QoKSlcclxuXHJcblx0XHRcdFx0XHRcdGlmICghb3RoZXJTdWJ0YXNrcy5pc0VtcHR5KCkpIHtcclxuXHRcdFx0XHRcdFx0ICAgIGJvZHlfcmVxID0gW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaXNzdWVLZXlcIjogb3RoZXJTdWJ0YXNrcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRlY2hLZXlcIjogdGVjaEtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRyYWNlQWN0aW9uU3RhdHVzXCI6IEFDVElPTlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxyXG5cdFx0XHRcdFx0XHQgICAgIFxyXG5cdFx0XHRcdFx0XHQgICAgbG9nLmluZm8oXCJjYWxsaW5nIFVSTDogXCIgKyBib2R5X3JlcSlcclxuXHRcdFx0XHRcdFx0ICAgIGZpbmRUZWNob25zaXRlUmVxdWVzdCA9IChIdHRwVVJMQ29ubmVjdGlvbikgZmluZFRlY2hvbnNpdGVVcmwub3BlbkNvbm5lY3Rpb24oKVxyXG5cdFx0XHRcdFx0XHRcdGZpbmRUZWNob25zaXRlUmVxdWVzdC5zZXRSZXF1ZXN0TWV0aG9kKFwiUE9TVFwiKTtcclxuXHRcdFx0XHRcdFx0XHRmaW5kVGVjaG9uc2l0ZVJlcXVlc3Quc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xyXG5cdFx0XHRcdFx0XHRcdGZpbmRUZWNob25zaXRlUmVxdWVzdC5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XHJcblx0XHRcdFx0XHRcdFx0ZmluZFRlY2hvbnNpdGVSZXF1ZXN0LnNldERvT3V0cHV0KHRydWUpO1xyXG5cdFx0XHRcdFx0XHRcdGZpbmRUZWNob25zaXRlUmVxdWVzdC5vdXRwdXRTdHJlYW1cclxuXHRcdFx0XHRcdFx0XHRmaW5kVGVjaG9uc2l0ZVJlcXVlc3Qub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cclxuXHRcdFx0XHRcdFx0XHRsb2cuZGVidWcgZmluZFRlY2hvbnNpdGVSZXF1ZXN0Lm91dHB1dFN0cmVhbVxyXG5cdFx0XHRcdFx0XHRcdGZpbmRUZWNob25zaXRlUmVxdWVzdC5jb25uZWN0KCk7XHJcblx0XHRcdFx0XHRcdCAgICBmaW5kVGVjaG9uc2l0ZVN0YXR1c0NvZGUgPSBmaW5kVGVjaG9uc2l0ZVJlcXVlc3QuZ2V0UmVzcG9uc2VDb2RlKClcclxuXHRcdFx0XHRcdFx0ICAgIGZpbmRUZWNob25zaXRlU3RyaW5nID0gZmluZFRlY2hvbnNpdGVSZXF1ZXN0LmdldElucHV0U3RyZWFtKCkuZ2V0VGV4dCgpXHJcblx0XHRcdFx0XHRcdCAgICBsb2cuaW5mbyhcImZpbmRUZWNob25zaXRlU3RhdHVzQ29kZTogXCIgKyBmaW5kVGVjaG9uc2l0ZVN0YXR1c0NvZGUpXHJcblx0XHRcdFx0XHRcdCAgICBsb2cuaW5mbyhcImZpbmRUZWNob25zaXRlU3RyaW5nOiBcIiArIGZpbmRUZWNob25zaXRlU3RyaW5nKVxyXG5cclxuXHRcdFx0XHRcdFx0ICAgIGlmIChmaW5kVGVjaG9uc2l0ZVN0YXR1c0NvZGUgIT0gSFRUUF9PSykge1xyXG5cdFx0XHRcdFx0XHRcdCAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiSU5ESVJFQ1RfSk9CIHJlcG9ydHMgZW5kcG9pbnQgcmV0dXJuZWQgcmVzcG9uc2UgY29kZSAhPSAyMDAgT0tcIik7XHJcblx0XHRcdFx0XHRcdCAgICB9XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQgICAgTGlzdCBsYXN0T2JqZWN0cyA9IChMaXN0KSBqc29uU2x1cnBlci5wYXJzZVRleHQoZmluZFRlY2hvbnNpdGVTdHJpbmcpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9sYXN0T2JqZWN0cyA9IGlxbEZhY2FkZS5maW5kT2JqZWN0c0J5SVFMQW5kU2NoZW1hKE9QQUEsIFwib2JqZWN0VHlwZSA9IE9uU2l0ZV9UZWNoX1JlcG9ydCBBTkQgVEVDSE5JQ0lBTl9SRUYgPVxcXCJcIiArIHRlY2hLZXkgKyBcIlxcXCIgQU5EIEpPQl9TVEFSVEVEIElTIE5PVCBFTVBUWSBBTkQgSk9CX0NPTVBMRVRFRCBJUyBFTVBUWSBBTkQgVFJBQ0VfQUNUSU9OX1NUQVRVUyA9IFxcXCJcIiArIEFDVElPTiArIFwiXFxcIiBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleSBJTiAoXCIgKyBpc3N1ZS5nZXRQYXJlbnRPYmplY3QoKS5nZXRTdWJUYXNrT2JqZWN0cygpLm1pbnVzKGlzc3VlKS50b1N0cmluZygpLnJlcGxhY2VBbGwoXCJbXFxcXFtcXFxcXV1cIiwgXCJcIikgKyBcIikpXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2xvZy53YXJuIFwiaXFsOiBcIiArIFwib2JqZWN0VHlwZSA9IE9uU2l0ZV9UZWNoX1JlcG9ydCBBTkQgVEVDSE5JQ0lBTl9SRUYgPVxcXCJcIiArIHRlY2hLZXkgKyBcIlxcXCIgQU5EIEpPQl9TVEFSVEVEIElTIE5PVCBFTVBUWSBBTkQgSk9CX0NPTVBMRVRFRCBJUyBFTVBUWSBBTkQgVFJBQ0VfQUNUSU9OX1NUQVRVUyA9IFxcXCJcIiArIEFDVElPTiArIFwiXFxcIiBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleSBJTiAoXCIgKyBpc3N1ZS5nZXRQYXJlbnRPYmplY3QoKS5nZXRTdWJUYXNrT2JqZWN0cygpLm1pbnVzKGlzc3VlKS50b1N0cmluZygpLnJlcGxhY2VBbGwoXCJbXFxcXFtcXFxcXV1cIiwgXCJcIikgKyBcIikpXCJcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxhc3RPYmplY3RzLmlzRW1wdHkoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBsYXN0T2JqZWN0c1swXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBsYXN0T2JqID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGxhc3RPYmplY3RzWzBdLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJUeXBlID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfSk9CX0NPTVBMRVRFRCk7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5pbmZvIFwiYXR0cmliVHlwZTogXCIgKyBhdHRyaWJUeXBlLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdBdHRyaWIgPSBsYXN0T2JqLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW4oYXR0cmliVHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIG5ld0F0dHJpYlZhbHVlID0gbmV3QXR0cmliLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLypHZXQgSk9CX1NUQVJURUQgZnJvbSBjdXJyZW50IG9iaiovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG9iamVjdHNbMF0uaWQsIFwiSk9CX1NUQVJURURcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIHN0YXJ0ZWQgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdBdHRyaWJWYWx1ZS5zZXREYXRlVmFsdWUoc3RhcnRlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlNFVElOU0lHSFRWQUxVRTogVW5hYmxlIHRvIHNldCBhdHRyaWJ1dGUgXCIgKyBhdHRyaWJUeXBlLnRvU3RyaW5nKCkgKyBcIiB0byBcIiArIGxvY2FsVGltZVN0YW1wICsgXCIuIEV4aXRpbmcuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlNFVElOU0lHSFRWQUxVRTogXCIgKyB2aWUuZ2V0TWVzc2FnZSgpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIGF0dHJpYlZhbHVlcyA9IG5ld0F0dHJpYi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmliVmFsdWVzLmFkZChuZXdBdHRyaWJWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3QXR0cmliLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoYXR0cmliVmFsdWVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0F0dHJpYiA9IG9iamVjdEZhY2FkZS5zdG9yZU9iamVjdEF0dHJpYnV0ZUJlYW4obmV3QXR0cmliKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiU0VUSU5TSUdIVFZBTFVFOiBVbmFibGUgdG8gc2F2ZSBjaGFuZ2VzLiBFeGl0aW5nLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJTRVRJTlNJR0hUVkFMVUU6IFwiICsgdmllLmdldE1lc3NhZ2UoKS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIGpxbFNlYXJjaCA9IFwicHJvamVjdCA9ICdcIiArIGlzc3VlLmdldFByb2plY3RPYmplY3QoKS5uYW1lICsgXCInIEFORCBpc3N1ZXR5cGUgSU4gKCdQbGFubmVkIE1haW50ZW5hbmNlIFRhc2snKSBBTkQga2V5ICE9ICdcIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCInIEFORCBPUF9URUNITklDSUFOX0FDVElWSVRJRVNfVFJBQ0VfV09SSyBJTiBpcWxGdW5jdGlvbignb2JqZWN0U2NoZW1hID0gXFxcIk9wZXJhdGlvbiBQb3J0YWwgQUFcXFwiIEFORCBvYmplY3RUeXBlID0gT25TaXRlX1RlY2hfUmVwb3J0IEFORCBLZXkgPSBPUEFBLVwiICsgbGFzdE9iamVjdHNbMF0uaWQgKyBcIicpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJyaWNlcmNhOiBcIiArIGpxbFNlYXJjaFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBxdWVyeSA9IGpxbFF1ZXJ5UGFyc2VyLnBhcnNlUXVlcnkoanFsU2VhcmNoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInF1ZXJ5OiBcIiArIHF1ZXJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIHNlYXJjaCA9IHNlYXJjaFNlcnZpY2Uuc2VhcmNoKHVzZXIsIHF1ZXJ5LCBQYWdlckZpbHRlci5nZXRVbmxpbWl0ZWRGaWx0ZXIoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWYgZm91bmQ9ZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWYgZm91bmRPdXR3YXJkPWZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlYXJjaC5yZXN1bHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vRXhlY3V0ZSB1cGRhdGUgU08gZSBTQyBvbiB0aGUgcmVzdWx0aW5nIGlzc3VlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBpID0gc2VhcmNoLnJlc3VsdHMuZmlyc3QoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWYgYmFzZVVSTFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqIFNFUlZJQ0UgT1JERVIgVVBEQVRFICoqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVUkwgdXJsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb25cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHlfcmVxID0gW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpc3N1ZUtleVwiOiBpLmtleVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS9hZnRlci9zYWxlcy9jcmVhdGUvb3IvdXBkYXRlL3NlcnZpY2Uvb3JkZXJcIlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiYmFzZVVSTCBTTzogXCIgKyBiYXNlVVJMXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNPOiBcIiArIGJvZHlfcmVxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKFwiUE9TVFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiU08gUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDFcIikgJiYgIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJlcnJvcnM6IFwiICsgIGpzb25fb2JqZWN0LmVycm9ycy50b1N0cmluZygpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtU0FQLVNPLUNSRUFURVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKiBEQSBGQVJFIFNDIFNPTE8gSU4gQ0FTTyBESSBURUNOSUNJIElOVEVSTkkgKiovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRyb3ZhdG8pIHsgLyoqIHNlIE9QX1NVUFBMSUVSID0gTlVMTCBpbCB0aWNrZXQgaGEgcHJvc2VndWl0byBzdWwgZmx1c3NvIHRlY25pY2kgaW50ZXJuaSAqKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5X3JlcSA9IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpc3N1ZUtleVwiOiBpLmtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdIFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS9hZnRlci9zYWxlcy9jcmVhdGUvc2VydmljZS9vcmRlci9jb25maXJtYXRpb25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNDOiBcIiArIGJvZHlfcmVxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiYmFzZVVSTCBTQzogXCIgKyBiYXNlVVJMXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKFwiUE9TVFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiU0MgUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSAmJiAhY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJPUC1TQVAtU0MtQ1JFQVRFXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsganNvbl9vYmplY3QuZXJyb3JzWzBdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5X3JlcSA9IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaXNzdWVLZXlcIjogaS5rZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInN0YXR1c1wiOiBcIkNMT1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL2FmdGVyL3NhbGVzL2NyZWF0ZS9zZXJ2aWNlL25vdGlmaWNhdGlvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNOOiBcIiArIGJvZHlfcmVxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChcIlBPU1RcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIlNOX1VQREFURVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHlfcmVxID0gW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImlzc3VlS2V5XCI6IGkua2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInN0YXR1c1wiOiBcIkNMT1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSBcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL3NlcnZpY2Uvbm90aWZpY2F0aW9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJib2R5X3JlcSBTTjogXCIgKyBib2R5X3JlcVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChcIlBPU1RcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJTTl9VUERBVEVcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblx0XHRcdFx0XHRcdH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvKkVSUk9SISEqL1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8qQ1JFQVRFIE5FVyBPQkpFQ1Q6IE9OU0lURV9URUNIX1JFUE9SVF9PQkpfVFlQRSovXHJcbiAgICAgICAgICAgIGRlZiBvYmplY3RUeXBlT25TaXRlVGVjaFJlcG9ydCA9IG9iamVjdFR5cGVGYWNhZGUubG9hZE9iamVjdFR5cGVCZWFuKE9OU0lURV9URUNIX1JFUE9SVF9PQkpfVFlQRSk7XHJcbiAgICAgICAgICAgIGRlZiBuZXdPYmplY3RCZWFuID0gb2JqZWN0VHlwZU9uU2l0ZVRlY2hSZXBvcnQuY3JlYXRlTXV0YWJsZU9iamVjdEJlYW4oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGRlZiBvYmplY3RBdHRyaWJ1dGVCZWFucyA9IG5ldyBBcnJheUxpc3QoKTtcclxuICAgICAgICAgICAgZGVmIG5hbWVPYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX05BTUUpOyBcclxuICAgICAgICAgICAgZGVmIHN0YXJ0ZWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX0pPQl9TVEFSVEVEKTsgXHJcbiAgICAgICAgICAgIGRlZiBhY3Rpb25PYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX1RSQUNFX0FDVElPTik7IFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5LmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW5Gb3JPYmplY3QobmV3T2JqZWN0QmVhbiwgbmFtZU9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuLCB0ZWNoTmFtZSkpO1xyXG4gICAgICAgICAgICBvYmplY3RBdHRyaWJ1dGVCZWFucy5hZGQob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkuY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbkZvck9iamVjdChuZXdPYmplY3RCZWFuLCBzdGFydGVkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4sIGxvY2FsVGltZVN0YW1wKSk7XHJcbiAgICAgICAgICAgIG9iamVjdEF0dHJpYnV0ZUJlYW5zLmFkZChvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeS5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuRm9yT2JqZWN0KG5ld09iamVjdEJlYW4sIGFjdGlvbk9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuLCBBQ1RJT04pKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG5ld09iamVjdEJlYW4uc2V0T2JqZWN0QXR0cmlidXRlQmVhbnMob2JqZWN0QXR0cmlidXRlQmVhbnMpO1xyXG4gICAgICAgICAgICAvKiBTdG9yZSB0aGUgb2JqZWN0IGludG8gSW5zaWdodC4gVGhlIG5ldyBPYmplY3RCZWFuIHdpbGwgYmUgdXBkYXRlZCB3aXRoIGFuIHVuaXF1ZSBJRCAqL1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgbmV3T2JqZWN0QmVhbiA9IG9iamVjdEZhY2FkZS5zdG9yZU9iamVjdEJlYW4obmV3T2JqZWN0QmVhbik7XHJcbiAgICAgICAgICAgICAgICBsb2cud2FybihcIm5ld09iamVjdEJlYW46IFwiICsgbmV3T2JqZWN0QmVhbik7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHtcclxuICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiQ291bGQgbm90IGNyZWF0ZSBpc3N1ZSBkdWUgdG8gdmFsaWRhdGlvbiBleGNlcHRpb246XCIgKyB2aWUuZ2V0TWVzc2FnZSgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLyogVXBkYXRlIFRFQ0hOSUNJQU5fUkVGIG9uIHRoZSBuZXdPYmplY3QgKi9cdFx0ICAgICAgICBcclxuICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfVEVDSE5JQ0lBTl9SRUYpLmNyZWF0ZU11dGFibGUoKSAvL1RoZSBpZCBvZiB0aGUgYXR0cmlidXRlXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvKiBDcmVhdGUgdGhlIG5ldyBhdHRyaWJ1dGUgYmVhbiBiYXNlZCBvbiB0aGUgdmFsdWUgKi9cclxuICAgICAgICAgICAgZGVmIG5ld09iamVjdEF0dHJpYnV0ZUJlYW4gPSBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeS5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuRm9yT2JqZWN0KG5ld09iamVjdEJlYW4sIG9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuLCB0ZWNoS2V5KTtcclxuICAgICAgICAgICAgLyogTG9hZCB0aGUgYXR0cmlidXRlIGJlYW4gKi9cclxuICAgICAgICAgICAgZGVmIG9iamVjdEF0dHJpYnV0ZUJlYW4gPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obmV3T2JqZWN0QmVhbi5nZXRJZCgpLCB0ZWNoS2V5KTtcclxuICAgICAgICAgICAgaWYgKG9iamVjdEF0dHJpYnV0ZUJlYW4gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgLyogSWYgYXR0cmlidXRlIGV4aXN0IHJldXNlIHRoZSBvbGQgaWQgZm9yIHRoZSBuZXcgYXR0cmlidXRlICovXHJcbiAgICAgICAgICAgICAgICBuZXdPYmplY3RBdHRyaWJ1dGVCZWFuLnNldElkKG9iamVjdEF0dHJpYnV0ZUJlYW4uZ2V0SWQoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLyogU3RvcmUgdGhlIG9iamVjdCBhdHRyaWJ1dGUgaW50byBJbnNpZ2h0LiAqL1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG5ld09iamVjdEF0dHJpYnV0ZUJlYW4pO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XHJcbiAgICAgICAgICAgICAgICBsb2cud2FybihcIkNvdWxkIG5vdCB1cGRhdGUgb2JqZWN0IGF0dHJpYnV0ZSBkdWUgdG8gdmFsaWRhdGlvbiBleGNlcHRpb246XCIgKyB2aWUuZ2V0TWVzc2FnZSgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgb25TaXRlVGVjaE9iamVjdHMuYWRkKG5ld09iamVjdEJlYW4pXHJcblxyXG4gICAgICAgICAgICBsb2cuaW5mbyAoXCJvblNpdGVUZWNoT2JqZWN0czogXCIgKyBvblNpdGVUZWNoT2JqZWN0cylcclxuXHJcbiAgICAgICAgICAgIGlmICghb25TaXRlVGVjaE9iamVjdHMuaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgICAgICAgICBNdXRhYmxlSXNzdWUgbWkgPSAoTXV0YWJsZUlzc3VlKSBpc3N1ZTtcclxuICAgICAgICAgICAgICAgIG1pLnNldEN1c3RvbUZpZWxkVmFsdWUob25TaXRlVGVjaHNUcmFjZUZpZWxkLCBvblNpdGVUZWNoT2JqZWN0cyk7XHJcbiAgICAgICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZSh1c2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBtaS5zZXRDdXN0b21GaWVsZFZhbHVlKG9uU2l0ZVRlY2hzRmllbGQsIG9uU2l0ZVRlY2hPYmplY3RzKTtcclxuICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKHVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInNjcmlwdFBhdGgiOm51bGx9</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
    <action id="261" name="Removed">
      <meta name="jira.description"></meta>
      <meta name="jira.fieldscreen.id"></meta>
      <restrict-to>
        <conditions>
          <condition type="class">
            <arg name="FIELD_FUNCTION_ID">774f95a6-6a1f-40c0-bbda-dba593051be9</arg>
            <arg name="FIELD_INVERT_CONDITION"></arg>
            <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.UserCondition</arg>
            <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
            <arg name="FIELD_USER_IDS">arianna.fabbri|||atlassian_faac_service_desk</arg>
          </condition>
        </conditions>
      </restrict-to>
      <results>
        <unconditional-result old-status="null" status="null" step="11">
          <post-functions>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">cbd57251-e455-4a52-8a5f-a5bd31941d93</arg>
              <arg name="FIELD_NOTES">YCFgTG9nIFRpbWVzdGFtcCBmb3IgVGVjaCBhY3Rpdml0eSAmIFVwZGF0ZSBKb2IgQ29tcGxldGVkIC0gRG8gbm90IHVwZGF0ZSBKb2IgQ29tcGxldGVkIGZvciB0aGUgTEFTVCBQTSBUYXNrIGV4ZWN1dGVk</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiIgLyogLS0tLS0tLS0tLS0tLS0tLS0tIEFDVElPTiBFTkQgV09SS0lORyAtLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tIFRSQUNFX0FDVElPTl9TVEFUVVMgPSBXT1JLIC0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0gQUNUSU9OID0gSk9CX0NPTVBMRVRFRCAtLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuYmMuaXNzdWUuc2VhcmNoLlNlYXJjaFNlcnZpY2VcclxuaW1wb3J0IGphdmEudXRpbC5zdHJlYW0uQ29sbGVjdG9yc1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvbjtcclxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouTGV2ZWxcclxuaW1wb3J0IGphdmEuc3FsLlRpbWVzdGFtcFxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbmZpZy5TdWJUYXNrTWFuYWdlclxyXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cclxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyO1xyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmpxbC5wYXJzZXIuSnFsUXVlcnlQYXJzZXJcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS53ZWIuYmVhbi5QYWdlckZpbHRlclxyXG5pbXBvcnQgc3RhdGljIGphdmEubmV0Lkh0dHBVUkxDb25uZWN0aW9uLkhUVFBfT0tcclxuXHJcblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcclxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKCcvdmFyL2F0bGFzc2lhbi9hcHBsaWNhdGlvbi1kYXRhL3NoYXJlZC9zY3JpcHRzL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcclxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcclxuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXHJcbn1cclxuXHJcblxyXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXHJcbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTsgXHJcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xyXG4gIFxyXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cclxuQ2xhc3Mgb2JqZWN0VHlwZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVGYWNhZGVcIik7IFxyXG5kZWYgb2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpO1xyXG4gIFxyXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgQXR0cmlidXRlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xyXG5DbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTsgXHJcbmRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XHJcbiAgXHJcbkNsYXNzIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5zZXJ2aWNlcy5tb2RlbC5mYWN0b3J5Lk9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5XCIpOyBcclxuZGVmIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MpO1xyXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxyXG5kZWYgaXFsRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKGlxbEZhY2FkZUNsYXNzKTtcclxuZGVmIGpxbFF1ZXJ5UGFyc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KEpxbFF1ZXJ5UGFyc2VyKVxyXG5cclxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpXHJcbi8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMTk2MDY5XCIpXHJcblxyXG5kZWYgc2VhcmNoU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChTZWFyY2hTZXJ2aWNlKVxyXG5kZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxyXG4vKjI1LjExLjIyKi9cclxuZGVmIGxvY2FsVGltZVN0YW1wXHJcbmRlZiBsb2NhbERhdGVcclxuLyowMy4xMC4yMyovXHJcbmRlZiBEQVRFVElNRV9PRkZTRVQgPSBwcm9wZXJ0aWVzWyd3Zi50ci5kYXRldGltZXdpdGhvZmZzZXQnXS50b1N0cmluZygpXHJcbmxvZy5kZWJ1ZyBcIkRBVEVUSU1FX09GRlNFVDogXCIgKyBEQVRFVElNRV9PRkZTRVRcclxuaWYgKERBVEVUSU1FX09GRlNFVCAhPSBudWxsICYmIERBVEVUSU1FX09GRlNFVCAhPSAnbnVsbCcpe1xyXG5cclxuZGVmIHNpdGVDRiA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1NJVEVcIilbMF07XHJcbmRlZiBzaXRlLCBzaXRlS2V5LCBzaXRlT2JqZWN0LCB2aXNpYmlsaXR5LCB2aXNpYmlsaXR5S2V5XHJcbmlmIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNpdGVDRikgIT0gbnVsbCkge1xyXG4gICAgc2l0ZSA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2l0ZUNGKS50b1N0cmluZygpXHJcbiAgICBzaXRlS2V5ID0gc2l0ZS5zdWJzdHJpbmcoc2l0ZS5sYXN0SW5kZXhPZignKCcpICsgMSwgc2l0ZS5sYXN0SW5kZXhPZignKScpKVxyXG4gICAgc2l0ZU9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihzaXRlS2V5KVxyXG4gICAgdmlzaWJpbGl0eSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1RLVF9WSVNJQklMSVRZX0tFWVwiKVswXVxyXG4gICAgdmlzaWJpbGl0eUtleSA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodmlzaWJpbGl0eSlbMF0udG9TdHJpbmcoKS5zdWJzdHJpbmcoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh2aXNpYmlsaXR5KVswXS50b1N0cmluZygpLmxhc3RJbmRleE9mKCcoJykgKyAxLCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHZpc2liaWxpdHkpWzBdLnRvU3RyaW5nKCkubGFzdEluZGV4T2YoJyknKSlcclxufSBlbHNlIHtcclxuICAgIHZpc2liaWxpdHkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9JTkRJUkVDVF9KT0JfVEtUX1ZJU0lCSUxJVFlcIilbMF1cclxuICAgIHZpc2liaWxpdHlLZXkgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHZpc2liaWxpdHkpWzBdLnRvU3RyaW5nKCkuc3Vic3RyaW5nKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodmlzaWJpbGl0eSlbMF0udG9TdHJpbmcoKS5sYXN0SW5kZXhPZignKCcpICsgMSwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh2aXNpYmlsaXR5KVswXS50b1N0cmluZygpLmxhc3RJbmRleE9mKCcpJykpXHJcbn1cclxuZGVmIHRpbWVab25lXHJcbmRlZiBjb21wYW55UmVmID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbih2aXNpYmlsaXR5S2V5KS5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnZpc2liaWxpdHlLZXkuY29tcGFueVJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTtcclxubG9nLmluZm8gXCJjb21wYW55UmVmOiBcIiArIGNvbXBhbnlSZWZcclxuZGVmIGNvbXBhbnlSZWZJZCA9IGNvbXBhbnlSZWZbMF0uZ2V0UmVmZXJlbmNlZE9iamVjdEJlYW5JZCgpXHJcbmxvZy5kZWJ1ZyBcImNvbXBhbnlSZWZJZDpcIiArIGNvbXBhbnlSZWZJZFxyXG5pZiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzaXRlQ0YpICE9IG51bGwgJiYgb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHNpdGVPYmplY3QuZ2V0SWQoKSwgXCJTSVRFX1JFRlwiKSkge1xyXG4gICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oc2l0ZU9iamVjdC5nZXRJZCgpLCBcIlNJVEVfUkVGXCIpLmNyZWF0ZU11dGFibGUoKVxyXG4gICAgcyA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxyXG4gICAgcyA9IHMudG9TdHJpbmcoKVxyXG4gICAgc0tleSA9IHMuc3Vic3RyaW5nKHMubGFzdEluZGV4T2YoJygnKSArIDEsIHMubGFzdEluZGV4T2YoJyknKSlcclxuICAgIGlmIChvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oc0tleS50b0ludGVnZXIoKSwgXCJUSU1FX1pPTkVcIikpIHtcclxuICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihzS2V5LnRvSW50ZWdlcigpLCBcIlRJTUVfWk9ORVwiKS5jcmVhdGVNdXRhYmxlKClcclxuICAgICAgICB0aW1lWm9uZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxyXG4gICAgICAgIHRpbWVab25lID0gdGltZVpvbmVbMF0uZ2V0VmFsdWUoKVxyXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlRpbWVab25lIGRhIFNpdGU6IFwiICsgdGltZVpvbmVcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wYW55UmVmSWQudG9JbnRlZ2VyKCksIFwiVElNRV9aT05FXCIpKSB7XHJcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBhbnlSZWZJZC50b0ludGVnZXIoKSwgXCJUSU1FX1pPTkVcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICAgICAgICAgIHRpbWVab25lID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXHJcbiAgICAgICAgICAgIHRpbWVab25lID0gdGltZVpvbmVbMF0uZ2V0VmFsdWUoKVxyXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJUaW1lWm9uZSBkYSBDb21wYW55OiBcIiArIHRpbWVab25lXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IGVsc2Uge1xyXG4gICAgaWYgKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wYW55UmVmSWQudG9JbnRlZ2VyKCksIFwiVElNRV9aT05FXCIpKSB7XHJcbiAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcGFueVJlZklkLnRvSW50ZWdlcigpLCBcIlRJTUVfWk9ORVwiKS5jcmVhdGVNdXRhYmxlKClcclxuICAgICAgICB0aW1lWm9uZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxyXG4gICAgICAgIHRpbWVab25lID0gdGltZVpvbmVbMF0uZ2V0VmFsdWUoKVxyXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlRpbWVab25lIGRhIENvbXBhbnk6IFwiICsgdGltZVpvbmVcclxuICAgIH1cclxufVxyXG5pZiAoIXRpbWVab25lKSB7XHJcbiAgICB0aW1lWm9uZSA9IFwiRXVyb3BlL1JvbWVcIlxyXG59XHJcbmxvZy5kZWJ1ZyBcInRpbWVab25lOiBcIiArIHRpbWVab25lXHJcbmxvY2FsVGltZVN0YW1wID0gKG5ldyBUaW1lc3RhbXAoKG5ldyBEYXRlKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gVGltZVpvbmUuZ2V0RGVmYXVsdCgpLmdldFJhd09mZnNldCgpICsgVGltZVpvbmUuZ2V0VGltZVpvbmUodGltZVpvbmUudG9TdHJpbmcoKSkuZ2V0UmF3T2Zmc2V0KCkpKS50aW1lKSkudG9TdHJpbmcoKVxyXG5sb2NhbERhdGUgPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIFRpbWVab25lLmdldERlZmF1bHQoKS5nZXRSYXdPZmZzZXQoKSArIFRpbWVab25lLmdldFRpbWVab25lKHRpbWVab25lLnRvU3RyaW5nKCkpLmdldFJhd09mZnNldCgpKVxyXG5cclxufWVsc2V7XHJcblxyXG4gICAgbG9jYWxUaW1lU3RhbXAgPSAgKG5ldyBUaW1lc3RhbXAoKG5ldyBEYXRlKCkpLnRpbWUpKS50b1N0cmluZygpXHJcbiAgICBsb2NhbERhdGUgPSAgbmV3IERhdGUoKVxyXG5cclxufVxyXG5cclxubG9nLmRlYnVnIFwibG9jYWxUaW1lU3RhbXA6IFwiICsgbG9jYWxUaW1lU3RhbXBcclxubG9nLmRlYnVnIFwibG9jYWxEYXRlOiBcIiArIGxvY2FsRGF0ZVxyXG4vKjI1LjExLjIyKi9cclxuXHJcbmRlZiB0cm92YXRvPWZhbHNlLCByZW9wZW5lZD1mYWxzZVxyXG5mb3IgKHMgaW4gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnN1cHBsaWVyJ10udG9TdHJpbmcoKSkpe1xyXG4gICAgaWYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocykgIT0gbnVsbCl7XHJcbiAgICAgICAgdHJvdmF0bz10cnVlXHJcbiAgICB9XHJcbn1cclxuXHJcbmRlZiB1c2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXHJcblxyXG4vL1NlIGlsIHRpY2tldCBcdTAwZTggZXNlZ3VpdG8gZGEgdGVjbmljaSBpbnRlcm5pIGVzZWd1byBpbCB0cmFjZSBhdXRvbWF0aWNvIGRlaSB0ZW1waVxyXG5pZiAoIXRyb3ZhdG8pIHtcclxuICAgIFxyXG4gICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfQ1VSUkVOVF9VU0VSXCIpWzBdXHJcbiAgICBkZWYgb25TaXRlVGVjaHNUcmFjZUZpZWxkID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEVDSE5JQ0lBTl9BQ1RJVklUSUVTX1RSQUNFX1dPUktcIilbMF07XHJcbiAgICBkZWYgb25TaXRlVGVjaHNGaWVsZCA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1RFQ0hOSUNJQU5TX09OU0lURVwiKVswXTtcclxuICAgIGRlZiBvblNpdGVUZWNoT2JqZWN0cyA9IG5ldyBBcnJheUxpc3QoKTtcclxuICAgIGludCBPUEFBID0gcHJvcGVydGllc1snaXNjaGVtYS5hYS5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuICAgIGludCBEQk8gPSBwcm9wZXJ0aWVzWydpc2NoZW1hLmRiby5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuICAgIFxyXG4gICAgLyogLS0tLS0tLS0tLS0tIERFRklORSBBQ1RJT04gVE8gQkUgVFJBQ0VEIEFORCBTRVQgVE8gQkUgRE9ORSAtLS0tLS0tLS0tLS0tICovXHJcbiAgICBkZWYgQUNUSU9OID0gcHJvcGVydGllc1snd2YudHIuam9iQ29tcGxldGVkLmFjdGlvbiddLnRvU3RyaW5nKClcclxuICAgIGRlZiBTRVQgPSBwcm9wZXJ0aWVzWyd3Zi50ci5qb2JDb21wbGV0ZWQuc2V0J10udG9TdHJpbmcoKVxyXG4gICAgXHJcbiAgICBkZWYgT05TSVRFX1RFQ0hfUkVQT1JUX09CSl9UWVBFPXByb3BlcnRpZXNbJ2lvYmoub25TaXRlVGVjaFJlcG9ydCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuICAgIGRlZiBPTlNJVEVfVEVDSF9SRVBPUlRfQVRUUl9OQU1FPXByb3BlcnRpZXNbJ2lvYmoub25TaXRlVGVjaFJlcG9ydC5uYW1lLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG4gICAgZGVmIE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX1RFQ0hOSUNJQU5fUkVGPXByb3BlcnRpZXNbJ2lvYmoub25TaXRlVGVjaFJlcG9ydC50ZWNobmljaWFuUmVmLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG4gICAgZGVmIE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX0pPQl9DT01QTEVURUQ9cHJvcGVydGllc1snaW9iai5vblNpdGVUZWNoUmVwb3J0LmpvYkNvbXBsZXRlZC5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuICAgIGRlZiBPTlNJVEVfVEVDSF9SRVBPUlRfQVRUUl9KT0JfU1RBUlRFRD1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVRlY2hSZXBvcnQuam9iU3RhcnRlZC5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuICAgIGRlZiBPTlNJVEVfVEVDSF9SRVBPUlRfQVRUUl9UUkFDRV9BQ1RJT049cHJvcGVydGllc1snaW9iai5vblNpdGVUZWNoUmVwb3J0LnRyYWNlQWN0aW9uLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG4gICAgXHJcbiAgICBsb2cud2FybiBcIioqKioqKioqKioqKioqKioqKioqKiogQ09ORklSTSBBU1NFVCAqKioqKioqKioqKioqKioqKioqKioqXCJcclxuICAgIGRlZiB0ZWNobmljaWFucyA9IGlxbEZhY2FkZS5maW5kT2JqZWN0c0J5SVFMQW5kU2NoZW1hKE9QQUEsIFwib2JqZWN0VHlwZSA9IFRlY2huaWNpYW4gQU5EIFRFQ0hOSUNJQU5fUkVGLlRFQ0hfQUNDT1VOVCA9XFxcIlwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXJyZW50VXNlcikudG9TdHJpbmcoKSArIFwiXFxcIlwiKVxyXG4gICAgbG9nLmluZm8gXCJpcWw6IFwiICsgXCJvYmplY3RUeXBlID0gVGVjaG5pY2lhbiBBTkQgVEVDSE5JQ0lBTl9SRUYuVEVDSF9BQ0NPVU5UID1cXFwiXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1cnJlbnRVc2VyKS50b1N0cmluZygpICsgXCJcXFwiXCJcclxuICAgIFxyXG4gICAgZm9yICh0ZWNobmljaWFuIGluIHRlY2huaWNpYW5zKSB7XHJcbiAgICAgICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0XHJcbiAgICAgICAgZGVmIHRlY2g9dGVjaG5pY2lhbi50b1N0cmluZygpXHJcbiAgICAgICAgZGVmIHRlY2hLZXkgPSB0ZWNoLnN1YnN0cmluZyh0ZWNoLmxhc3RJbmRleE9mKCcoJykrMSx0ZWNoLmxhc3RJbmRleE9mKCcpJykpXHJcbiAgICAgICAgZGVmIHRlY2hOYW1lID0gdGVjaC5zdWJzdHJpbmcoMCx0ZWNoLmxhc3RJbmRleE9mKCcoJyktMSlcclxuICAgICAgICBkZWYgdGVjaE9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbih0ZWNoS2V5KVxyXG4gICAgICAgIGxvZy5pbmZvIFwidGVjaEtleTogXCIgKyB0ZWNoS2V5XHJcbiAgICAgICAgbG9nLmluZm8gKFwidGVjaE5hbWU6IFwiICsgdGVjaE5hbWUpXHJcbiAgICAgICAgbG9nLmluZm8gKFwidGVjaE9iamVjdDogXCIgKyB0ZWNoT2JqZWN0KVxyXG4gICAgICAgIGxvZy5pbmZvIFwiU0VUOiBcIiArU0VUXHJcbiAgICAgICAgaWYgKFNFVCA9PSBcIkpPQl9DT01QTEVURURcIikge1xyXG4gICAgICAgICAgICAvKlNFQVJDSCBPQkpFQ1QgVE8gQkUgVVBEQVRFRCovXHJcbiAgICAgICAgICAgIGRlZiBmaW5kVGVjaG9uc2l0ZVVybCA9IG5ldyBVUkwoXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzLmdldFByb3BlcnR5KFwiYXBpLmVudlwiKSArIFwiL29wL3Jlc3QvamlyYS9maW5kLWNvbm50ZWN0ZWRUaWNrZXQtdGVjaC1hY3Rpb24tc3RhcnRlZC1ub0NvbXBsZXRlZFwiKVxyXG4gICAgICAgICAgICBkZWYgYm9keV9yZXEgPSBbXHJcbiAgICAgICAgICAgICAgICBcImlzc3VlS2V5XCI6IFtpc3N1ZS5rZXldLFxyXG4gICAgICAgICAgICAgICAgXCJ0ZWNoS2V5XCI6IHRlY2hLZXksXHJcbiAgICAgICAgICAgICAgICBcInRyYWNlQWN0aW9uU3RhdHVzXCI6IEFDVElPTlxyXG4gICAgICAgICAgICBdIFxyXG5cclxuICAgICAgICAgICAgbG9nLmluZm8oXCJjYWxsaW5nIFVSTDogXCIgKyBib2R5X3JlcSlcclxuICAgICAgICAgICAgZGVmIGZpbmRUZWNob25zaXRlUmVxdWVzdCA9IChIdHRwVVJMQ29ubmVjdGlvbikgZmluZFRlY2hvbnNpdGVVcmwub3BlbkNvbm5lY3Rpb24oKVxyXG4gICAgICAgICAgICBmaW5kVGVjaG9uc2l0ZVJlcXVlc3Quc2V0UmVxdWVzdE1ldGhvZChcIlBPU1RcIik7XHJcbiAgICAgICAgICAgIGZpbmRUZWNob25zaXRlUmVxdWVzdC5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XHJcbiAgICAgICAgICAgIGZpbmRUZWNob25zaXRlUmVxdWVzdC5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XHJcbiAgICAgICAgICAgIGZpbmRUZWNob25zaXRlUmVxdWVzdC5zZXREb091dHB1dCh0cnVlKTtcclxuICAgICAgICAgICAgZmluZFRlY2hvbnNpdGVSZXF1ZXN0Lm91dHB1dFN0cmVhbVxyXG4gICAgICAgICAgICBmaW5kVGVjaG9uc2l0ZVJlcXVlc3Qub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cclxuICAgICAgICAgICAgbG9nLmRlYnVnIGZpbmRUZWNob25zaXRlUmVxdWVzdC5vdXRwdXRTdHJlYW1cclxuICAgICAgICAgICAgZmluZFRlY2hvbnNpdGVSZXF1ZXN0LmNvbm5lY3QoKTtcclxuICAgICAgICAgICAgZGVmIGZpbmRUZWNob25zaXRlU3RhdHVzQ29kZSA9IGZpbmRUZWNob25zaXRlUmVxdWVzdC5nZXRSZXNwb25zZUNvZGUoKVxyXG4gICAgICAgICAgICBkZWYgZmluZFRlY2hvbnNpdGVTdHJpbmcgPSBmaW5kVGVjaG9uc2l0ZVJlcXVlc3QuZ2V0SW5wdXRTdHJlYW0oKS5nZXRUZXh0KClcclxuICAgICAgICAgICAgbG9nLmluZm8oXCJmaW5kVGVjaG9uc2l0ZVN0YXR1c0NvZGU6IFwiICsgZmluZFRlY2hvbnNpdGVTdGF0dXNDb2RlKVxyXG4gICAgICAgICAgICBsb2cuaW5mbyhcImZpbmRUZWNob25zaXRlU3RyaW5nOiBcIiArIGZpbmRUZWNob25zaXRlU3RyaW5nKVxyXG5cclxuICAgICAgICAgICAgaWYgKGZpbmRUZWNob25zaXRlU3RhdHVzQ29kZSAhPSBIVFRQX09LKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiSU5ESVJFQ1RfSk9CIHJlcG9ydHMgZW5kcG9pbnQgcmV0dXJuZWQgcmVzcG9uc2UgY29kZSAhPSAyMDAgT0tcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIExpc3Qgb2JqZWN0cyA9IChMaXN0KSBqc29uU2x1cnBlci5wYXJzZVRleHQoZmluZFRlY2hvbnNpdGVTdHJpbmcpXHJcblxyXG4gICAgICAgICAgICBsb2cuaW5mbyhcIi0tLS0tLS0gb2JqZWN0cyAtLS0tLS0tLS0tIFwiK29iamVjdHMpXHJcbiAgICAgICAgICAgIC8vb2JqZWN0cyA9IGlxbEZhY2FkZS5maW5kT2JqZWN0c0J5SVFMQW5kU2NoZW1hKE9QQUEsIFwib2JqZWN0VHlwZSA9IE9uU2l0ZV9UZWNoX1JlcG9ydCBBTkQgVEVDSE5JQ0lBTl9SRUYgPVxcXCJcIiArIHRlY2hLZXkgKyBcIlxcXCIgQU5EIEpPQl9TVEFSVEVEIElTIE5PVCBFTVBUWSBBTkQgSk9CX0NPTVBMRVRFRCBJUyBFTVBUWSBBTkQgVFJBQ0VfQUNUSU9OX1NUQVRVUyA9IFxcXCJcIiArIEFDVElPTiArIFwiXFxcIiBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleT1cXFwiXCIgKyBpc3N1ZS5rZXkgKyBcIlxcXCIpXCIpXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvL2xvZy53YXJuIFwiaXFsOiBcIiArIFwib2JqZWN0VHlwZSA9IE9uU2l0ZV9UZWNoX1JlcG9ydCBBTkQgVEVDSE5JQ0lBTl9SRUYgPVxcXCJcIiArIHRlY2hLZXkgKyBcIlxcXCIgQU5EIEpPQl9TVEFSVEVEIElTIE5PVCBFTVBUWSBBTkQgSk9CX0NPTVBMRVRFRCBJUyBFTVBUWSBBTkQgVFJBQ0VfQUNUSU9OX1NUQVRVUyA9IFxcXCJcIiArIEFDVElPTiArIFwiXFxcIiBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleT1cXFwiXCIgKyBpc3N1ZS5rZXkgKyBcIlxcXCIpXCJcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICghb2JqZWN0cy5pc0VtcHR5KCkpIHtcclxuICAgICAgICAgICAgICAgIC8qVVBEQVRFIEpPQl9DT01QTEVURUQgT04gU0VMRUNURUQgT0JKRUNUKi8gICAgIFxyXG4gICAgICAgICAgICAgICAgLyozMC4wNi4yMDIyIEFGIFNlIFx1MDBlOCBsJ3VsdGltbyBzdWItdGFzayBhIGVzc2VyZSBjb21wbGV0YXRvIE5PTiBzYWx2byBpbCB0aW1lc3RhbXAgZGkgZmluZSBsYXZvcm8gY2hlIHZlcnJcdTAwZTAgY29tcGlsYXRvIGEgY2hpdXN1cmEgZGVsIHRpY2tldCBwYWRyZSovXHJcbiAgICAgICAgICAgICAgICBTdWJUYXNrTWFuYWdlciBzdWJUYXNrTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldFN1YlRhc2tNYW5hZ2VyKCk7XHJcbiAgICAgICAgICAgICAgICBDb2xsZWN0aW9uIHN1YlRhc2tzID0gaXNzdWUuZ2V0UGFyZW50T2JqZWN0KCkuZ2V0U3ViVGFza09iamVjdHMoKVxyXG4gICAgICAgICAgICAgICAgZGVmIGxhc3QgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICBpZiAoIXN1YlRhc2tzLmVtcHR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3ViVGFza3MuZWFjaCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXQuc3RhdHVzLm5hbWUuZXF1YWxzKFwiRG9uZVwiKSAmJiAhaXQuc3RhdHVzLm5hbWUuZXF1YWxzKFwiUmVtb3ZlZFwiKSAmJiAhaXQuc3RhdHVzLm5hbWUuZXF1YWxzKFwiUmVqZWN0ZWRcIikgJiYgIWl0LnN0YXR1cy5uYW1lLmVxdWFscyhcIkNhbmNlbGVkXCIpICYmICFpdC5rZXkuZXF1YWxzKGlzc3VlLmtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3QgPSBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmluZm8gXCJmb3VuZCBhbm90aGVyIHN1YnRhc2sgdGhhdCBpcyBub3QgaW4gc3RhdHVzIERvbmUsIFJlbW92ZWQsIFJlamVjdGVkLCBDYW5jZWxlZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghbGFzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWYgb2JqID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKG9iamVjdHNbMF0uaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJUeXBlID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfSk9CX0NPTVBMRVRFRCk7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cuaW5mbyBcImF0dHJpYlR5cGU6IFwiICsgYXR0cmliVHlwZS50b1N0cmluZygpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0F0dHJpYiA9IG9iai5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKGF0dHJpYlR5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWYgbmV3QXR0cmliVmFsdWUgPSBuZXdBdHRyaWIuY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3QXR0cmliVmFsdWUuc2V0RGF0ZVZhbHVlKGxvY2FsRGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiU0VUSU5TSUdIVFZBTFVFOiBVbmFibGUgdG8gc2V0IGF0dHJpYnV0ZSBcIiArIGF0dHJpYlR5cGUudG9TdHJpbmcoKSArIFwiIHRvIFwiICsgbG9jYWxUaW1lU3RhbXAgKyBcIi4gRXhpdGluZy5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlNFVElOU0lHSFRWQUxVRTogXCIgKyB2aWUuZ2V0TWVzc2FnZSgpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWYgYXR0cmliVmFsdWVzID0gbmV3QXR0cmliLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmliVmFsdWVzLmFkZChuZXdBdHRyaWJWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0F0dHJpYi5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKGF0dHJpYlZhbHVlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3QXR0cmliID0gb2JqZWN0RmFjYWRlLnN0b3JlT2JqZWN0QXR0cmlidXRlQmVhbihuZXdBdHRyaWIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlNFVElOU0lHSFRWQUxVRTogVW5hYmxlIHRvIHNhdmUgY2hhbmdlcy4gRXhpdGluZy5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlNFVElOU0lHSFRWQUxVRTogXCIgKyB2aWUuZ2V0TWVzc2FnZSgpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLypWZXJpZmljYXJlIHNlIHVuIGFsdHJvIFBNIFRhc2sgcHJpbWEgZGkgcXVlc3RvIGVyYSBzdGF0byBjb25zaWRlcmF0byB1bHRpbW8gKGFkIGVzLiBwZXJjaFx1MDBlOCBkb3BvIGF2ZXJsaSBjb21wbGV0YXRpIHR1dHRpIGhvIGZhdHRvIGFnZ2l1bmdpIGltcGlhbnRvKSovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qU2Ugc2ksIGFnZ2lvcm5hcmUgSk9CX0NPTVBMRVRFRCBzdWwgcHJlY2VkZW50ZSA9IGEgSk9CX1NUQVJURUQgZGkgcXVlbGxvIGNvcnJlbnRlIGUgY29uc2lkZXJhcmUgcXVlc3RvIGNvbWUgdWx0aW1vKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLypTRUFSQ0ggT0JKRUNUIFRPIEJFIFVQREFURUQqL1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0TGlzdDxTdHJpbmc+IG90aGVyU3VidGFza3MgPSBpc3N1ZS5nZXRQYXJlbnRPYmplY3QoKS5nZXRTdWJUYXNrT2JqZWN0cygpLnN0cmVhbSgpLmZpbHRlcihzIC0+ICFzLnN0YXR1cy5uYW1lLmVxdWFscyhcIlJlbW92ZWRcIikgJiYgIXMuc3RhdHVzLm5hbWUuZXF1YWxzKFwiUmVqZWN0ZWRcIikgJiYgIXMuc3RhdHVzLm5hbWUuZXF1YWxzKFwiQ2FuY2VsZWRcIikgJiYgIXMuZ2V0S2V5KCkuZXF1YWxzKGlzc3VlLmdldEtleSgpKSkubWFwKElzc3VlOjpnZXRLZXkpLmNvbGxlY3QoQ29sbGVjdG9ycy50b0xpc3QoKSlcclxuXHJcblx0XHRcdFx0XHRcdGlmICghb3RoZXJTdWJ0YXNrcy5pc0VtcHR5KCkpIHtcclxuXHRcdFx0XHRcdFx0ICAgIGJvZHlfcmVxID0gW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaXNzdWVLZXlcIjogb3RoZXJTdWJ0YXNrcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRlY2hLZXlcIjogdGVjaEtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRyYWNlQWN0aW9uU3RhdHVzXCI6IEFDVElPTlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxyXG5cdFx0XHRcdFx0XHQgICAgIFxyXG5cdFx0XHRcdFx0XHQgICAgbG9nLmluZm8oXCJjYWxsaW5nIFVSTDogXCIgKyBib2R5X3JlcSlcclxuXHRcdFx0XHRcdFx0ICAgIGZpbmRUZWNob25zaXRlUmVxdWVzdCA9IChIdHRwVVJMQ29ubmVjdGlvbikgZmluZFRlY2hvbnNpdGVVcmwub3BlbkNvbm5lY3Rpb24oKVxyXG5cdFx0XHRcdFx0XHRcdGZpbmRUZWNob25zaXRlUmVxdWVzdC5zZXRSZXF1ZXN0TWV0aG9kKFwiUE9TVFwiKTtcclxuXHRcdFx0XHRcdFx0XHRmaW5kVGVjaG9uc2l0ZVJlcXVlc3Quc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xyXG5cdFx0XHRcdFx0XHRcdGZpbmRUZWNob25zaXRlUmVxdWVzdC5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XHJcblx0XHRcdFx0XHRcdFx0ZmluZFRlY2hvbnNpdGVSZXF1ZXN0LnNldERvT3V0cHV0KHRydWUpO1xyXG5cdFx0XHRcdFx0XHRcdGZpbmRUZWNob25zaXRlUmVxdWVzdC5vdXRwdXRTdHJlYW1cclxuXHRcdFx0XHRcdFx0XHRmaW5kVGVjaG9uc2l0ZVJlcXVlc3Qub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cclxuXHRcdFx0XHRcdFx0XHRsb2cuZGVidWcgZmluZFRlY2hvbnNpdGVSZXF1ZXN0Lm91dHB1dFN0cmVhbVxyXG5cdFx0XHRcdFx0XHRcdGZpbmRUZWNob25zaXRlUmVxdWVzdC5jb25uZWN0KCk7XHJcblx0XHRcdFx0XHRcdCAgICBmaW5kVGVjaG9uc2l0ZVN0YXR1c0NvZGUgPSBmaW5kVGVjaG9uc2l0ZVJlcXVlc3QuZ2V0UmVzcG9uc2VDb2RlKClcclxuXHRcdFx0XHRcdFx0ICAgIGZpbmRUZWNob25zaXRlU3RyaW5nID0gZmluZFRlY2hvbnNpdGVSZXF1ZXN0LmdldElucHV0U3RyZWFtKCkuZ2V0VGV4dCgpXHJcblx0XHRcdFx0XHRcdCAgICBsb2cuaW5mbyhcImZpbmRUZWNob25zaXRlU3RhdHVzQ29kZTogXCIgKyBmaW5kVGVjaG9uc2l0ZVN0YXR1c0NvZGUpXHJcblx0XHRcdFx0XHRcdCAgICBsb2cuaW5mbyhcImZpbmRUZWNob25zaXRlU3RyaW5nOiBcIiArIGZpbmRUZWNob25zaXRlU3RyaW5nKVxyXG5cclxuXHRcdFx0XHRcdFx0ICAgIGlmIChmaW5kVGVjaG9uc2l0ZVN0YXR1c0NvZGUgIT0gSFRUUF9PSykge1xyXG5cdFx0XHRcdFx0XHRcdCAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiSU5ESVJFQ1RfSk9CIHJlcG9ydHMgZW5kcG9pbnQgcmV0dXJuZWQgcmVzcG9uc2UgY29kZSAhPSAyMDAgT0tcIik7XHJcblx0XHRcdFx0XHRcdCAgICB9XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQgICAgTGlzdCBsYXN0T2JqZWN0cyA9IChMaXN0KSBqc29uU2x1cnBlci5wYXJzZVRleHQoZmluZFRlY2hvbnNpdGVTdHJpbmcpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9sYXN0T2JqZWN0cyA9IGlxbEZhY2FkZS5maW5kT2JqZWN0c0J5SVFMQW5kU2NoZW1hKE9QQUEsIFwib2JqZWN0VHlwZSA9IE9uU2l0ZV9UZWNoX1JlcG9ydCBBTkQgVEVDSE5JQ0lBTl9SRUYgPVxcXCJcIiArIHRlY2hLZXkgKyBcIlxcXCIgQU5EIEpPQl9TVEFSVEVEIElTIE5PVCBFTVBUWSBBTkQgSk9CX0NPTVBMRVRFRCBJUyBFTVBUWSBBTkQgVFJBQ0VfQUNUSU9OX1NUQVRVUyA9IFxcXCJcIiArIEFDVElPTiArIFwiXFxcIiBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleSBJTiAoXCIgKyBpc3N1ZS5nZXRQYXJlbnRPYmplY3QoKS5nZXRTdWJUYXNrT2JqZWN0cygpLm1pbnVzKGlzc3VlKS50b1N0cmluZygpLnJlcGxhY2VBbGwoXCJbXFxcXFtcXFxcXV1cIiwgXCJcIikgKyBcIikpXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2xvZy53YXJuIFwiaXFsOiBcIiArIFwib2JqZWN0VHlwZSA9IE9uU2l0ZV9UZWNoX1JlcG9ydCBBTkQgVEVDSE5JQ0lBTl9SRUYgPVxcXCJcIiArIHRlY2hLZXkgKyBcIlxcXCIgQU5EIEpPQl9TVEFSVEVEIElTIE5PVCBFTVBUWSBBTkQgSk9CX0NPTVBMRVRFRCBJUyBFTVBUWSBBTkQgVFJBQ0VfQUNUSU9OX1NUQVRVUyA9IFxcXCJcIiArIEFDVElPTiArIFwiXFxcIiBBTkQgb2JqZWN0IEhBVklORyBjb25uZWN0ZWRUaWNrZXRzKGtleSBJTiAoXCIgKyBpc3N1ZS5nZXRQYXJlbnRPYmplY3QoKS5nZXRTdWJUYXNrT2JqZWN0cygpLm1pbnVzKGlzc3VlKS50b1N0cmluZygpLnJlcGxhY2VBbGwoXCJbXFxcXFtcXFxcXV1cIiwgXCJcIikgKyBcIikpXCJcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxhc3RPYmplY3RzLmlzRW1wdHkoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBsYXN0T2JqZWN0c1swXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBsYXN0T2JqID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGxhc3RPYmplY3RzWzBdLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJUeXBlID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfSk9CX0NPTVBMRVRFRCk7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5pbmZvIFwiYXR0cmliVHlwZTogXCIgKyBhdHRyaWJUeXBlLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdBdHRyaWIgPSBsYXN0T2JqLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW4oYXR0cmliVHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIG5ld0F0dHJpYlZhbHVlID0gbmV3QXR0cmliLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLypHZXQgSk9CX1NUQVJURUQgZnJvbSBjdXJyZW50IG9iaiovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG9iamVjdHNbMF0uaWQsIFwiSk9CX1NUQVJURURcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIHN0YXJ0ZWQgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdBdHRyaWJWYWx1ZS5zZXREYXRlVmFsdWUoc3RhcnRlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlNFVElOU0lHSFRWQUxVRTogVW5hYmxlIHRvIHNldCBhdHRyaWJ1dGUgXCIgKyBhdHRyaWJUeXBlLnRvU3RyaW5nKCkgKyBcIiB0byBcIiArIGxvY2FsVGltZVN0YW1wICsgXCIuIEV4aXRpbmcuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlNFVElOU0lHSFRWQUxVRTogXCIgKyB2aWUuZ2V0TWVzc2FnZSgpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIGF0dHJpYlZhbHVlcyA9IG5ld0F0dHJpYi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmliVmFsdWVzLmFkZChuZXdBdHRyaWJWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3QXR0cmliLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoYXR0cmliVmFsdWVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0F0dHJpYiA9IG9iamVjdEZhY2FkZS5zdG9yZU9iamVjdEF0dHJpYnV0ZUJlYW4obmV3QXR0cmliKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiU0VUSU5TSUdIVFZBTFVFOiBVbmFibGUgdG8gc2F2ZSBjaGFuZ2VzLiBFeGl0aW5nLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJTRVRJTlNJR0hUVkFMVUU6IFwiICsgdmllLmdldE1lc3NhZ2UoKS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIGpxbFNlYXJjaCA9IFwicHJvamVjdCA9ICdcIiArIGlzc3VlLmdldFByb2plY3RPYmplY3QoKS5uYW1lICsgXCInIEFORCBpc3N1ZXR5cGUgSU4gKCdQbGFubmVkIE1haW50ZW5hbmNlIFRhc2snKSBBTkQga2V5ICE9ICdcIiArIGlzc3VlLmtleS50b1N0cmluZygpICsgXCInIEFORCBPUF9URUNITklDSUFOX0FDVElWSVRJRVNfVFJBQ0VfV09SSyBJTiBpcWxGdW5jdGlvbignb2JqZWN0U2NoZW1hID0gXFxcIk9wZXJhdGlvbiBQb3J0YWwgQUFcXFwiIEFORCBvYmplY3RUeXBlID0gT25TaXRlX1RlY2hfUmVwb3J0IEFORCBLZXkgPSBPUEFBLVwiICsgbGFzdE9iamVjdHNbMF0uaWQgKyBcIicpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJyaWNlcmNhOiBcIiArIGpxbFNlYXJjaFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBxdWVyeSA9IGpxbFF1ZXJ5UGFyc2VyLnBhcnNlUXVlcnkoanFsU2VhcmNoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInF1ZXJ5OiBcIiArIHF1ZXJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIHNlYXJjaCA9IHNlYXJjaFNlcnZpY2Uuc2VhcmNoKHVzZXIsIHF1ZXJ5LCBQYWdlckZpbHRlci5nZXRVbmxpbWl0ZWRGaWx0ZXIoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWYgZm91bmQ9ZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWYgZm91bmRPdXR3YXJkPWZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlYXJjaC5yZXN1bHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vRXhlY3V0ZSB1cGRhdGUgU08gZSBTQyBvbiB0aGUgcmVzdWx0aW5nIGlzc3VlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBpID0gc2VhcmNoLnJlc3VsdHMuZmlyc3QoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWYgYmFzZVVSTFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqIFNFUlZJQ0UgT1JERVIgVVBEQVRFICoqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVUkwgdXJsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb25cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHlfcmVxID0gW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpc3N1ZUtleVwiOiBpLmtleVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS9hZnRlci9zYWxlcy9jcmVhdGUvb3IvdXBkYXRlL3NlcnZpY2Uvb3JkZXJcIlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiYmFzZVVSTCBTTzogXCIgKyBiYXNlVVJMXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNPOiBcIiArIGJvZHlfcmVxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKFwiUE9TVFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiU08gUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDFcIikgJiYgIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJlcnJvcnM6IFwiICsgIGpzb25fb2JqZWN0LmVycm9ycy50b1N0cmluZygpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtU0FQLVNPLUNSRUFURVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKiBEQSBGQVJFIFNDIFNPTE8gSU4gQ0FTTyBESSBURUNOSUNJIElOVEVSTkkgKiovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRyb3ZhdG8pIHsgLyoqIHNlIE9QX1NVUFBMSUVSID0gTlVMTCBpbCB0aWNrZXQgaGEgcHJvc2VndWl0byBzdWwgZmx1c3NvIHRlY25pY2kgaW50ZXJuaSAqKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5X3JlcSA9IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpc3N1ZUtleVwiOiBpLmtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdIFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS9hZnRlci9zYWxlcy9jcmVhdGUvc2VydmljZS9vcmRlci9jb25maXJtYXRpb25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNDOiBcIiArIGJvZHlfcmVxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiYmFzZVVSTCBTQzogXCIgKyBiYXNlVVJMXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKFwiUE9TVFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiU0MgUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSAmJiAhY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJPUC1TQVAtU0MtQ1JFQVRFXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsganNvbl9vYmplY3QuZXJyb3JzWzBdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5X3JlcSA9IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaXNzdWVLZXlcIjogaS5rZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInN0YXR1c1wiOiBcIkNMT1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL2FmdGVyL3NhbGVzL2NyZWF0ZS9zZXJ2aWNlL25vdGlmaWNhdGlvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNOOiBcIiArIGJvZHlfcmVxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChcIlBPU1RcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIlNOX1VQREFURVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHlfcmVxID0gW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImlzc3VlS2V5XCI6IGkua2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInN0YXR1c1wiOiBcIkNMT1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSBcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL3NlcnZpY2Uvbm90aWZpY2F0aW9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJib2R5X3JlcSBTTjogXCIgKyBib2R5X3JlcVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChcIlBPU1RcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJTTl9VUERBVEVcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblx0XHRcdFx0XHRcdH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvKkVSUk9SISEqL1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8qQ1JFQVRFIE5FVyBPQkpFQ1Q6IE9OU0lURV9URUNIX1JFUE9SVF9PQkpfVFlQRSovXHJcbiAgICAgICAgICAgIGRlZiBvYmplY3RUeXBlT25TaXRlVGVjaFJlcG9ydCA9IG9iamVjdFR5cGVGYWNhZGUubG9hZE9iamVjdFR5cGVCZWFuKE9OU0lURV9URUNIX1JFUE9SVF9PQkpfVFlQRSk7XHJcbiAgICAgICAgICAgIGRlZiBuZXdPYmplY3RCZWFuID0gb2JqZWN0VHlwZU9uU2l0ZVRlY2hSZXBvcnQuY3JlYXRlTXV0YWJsZU9iamVjdEJlYW4oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGRlZiBvYmplY3RBdHRyaWJ1dGVCZWFucyA9IG5ldyBBcnJheUxpc3QoKTtcclxuICAgICAgICAgICAgZGVmIG5hbWVPYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX05BTUUpOyBcclxuICAgICAgICAgICAgZGVmIHN0YXJ0ZWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX0pPQl9TVEFSVEVEKTsgXHJcbiAgICAgICAgICAgIGRlZiBhY3Rpb25PYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX1RSQUNFX0FDVElPTik7IFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5LmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW5Gb3JPYmplY3QobmV3T2JqZWN0QmVhbiwgbmFtZU9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuLCB0ZWNoTmFtZSkpO1xyXG4gICAgICAgICAgICBvYmplY3RBdHRyaWJ1dGVCZWFucy5hZGQob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkuY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbkZvck9iamVjdChuZXdPYmplY3RCZWFuLCBzdGFydGVkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4sIGxvY2FsVGltZVN0YW1wKSk7XHJcbiAgICAgICAgICAgIG9iamVjdEF0dHJpYnV0ZUJlYW5zLmFkZChvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeS5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuRm9yT2JqZWN0KG5ld09iamVjdEJlYW4sIGFjdGlvbk9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuLCBBQ1RJT04pKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG5ld09iamVjdEJlYW4uc2V0T2JqZWN0QXR0cmlidXRlQmVhbnMob2JqZWN0QXR0cmlidXRlQmVhbnMpO1xyXG4gICAgICAgICAgICAvKiBTdG9yZSB0aGUgb2JqZWN0IGludG8gSW5zaWdodC4gVGhlIG5ldyBPYmplY3RCZWFuIHdpbGwgYmUgdXBkYXRlZCB3aXRoIGFuIHVuaXF1ZSBJRCAqL1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgbmV3T2JqZWN0QmVhbiA9IG9iamVjdEZhY2FkZS5zdG9yZU9iamVjdEJlYW4obmV3T2JqZWN0QmVhbik7XHJcbiAgICAgICAgICAgICAgICBsb2cud2FybihcIm5ld09iamVjdEJlYW46IFwiICsgbmV3T2JqZWN0QmVhbik7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHtcclxuICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiQ291bGQgbm90IGNyZWF0ZSBpc3N1ZSBkdWUgdG8gdmFsaWRhdGlvbiBleGNlcHRpb246XCIgKyB2aWUuZ2V0TWVzc2FnZSgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLyogVXBkYXRlIFRFQ0hOSUNJQU5fUkVGIG9uIHRoZSBuZXdPYmplY3QgKi9cdFx0ICAgICAgICBcclxuICAgICAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfVEVDSE5JQ0lBTl9SRUYpLmNyZWF0ZU11dGFibGUoKSAvL1RoZSBpZCBvZiB0aGUgYXR0cmlidXRlXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvKiBDcmVhdGUgdGhlIG5ldyBhdHRyaWJ1dGUgYmVhbiBiYXNlZCBvbiB0aGUgdmFsdWUgKi9cclxuICAgICAgICAgICAgZGVmIG5ld09iamVjdEF0dHJpYnV0ZUJlYW4gPSBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeS5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuRm9yT2JqZWN0KG5ld09iamVjdEJlYW4sIG9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuLCB0ZWNoS2V5KTtcclxuICAgICAgICAgICAgLyogTG9hZCB0aGUgYXR0cmlidXRlIGJlYW4gKi9cclxuICAgICAgICAgICAgZGVmIG9iamVjdEF0dHJpYnV0ZUJlYW4gPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obmV3T2JqZWN0QmVhbi5nZXRJZCgpLCB0ZWNoS2V5KTtcclxuICAgICAgICAgICAgaWYgKG9iamVjdEF0dHJpYnV0ZUJlYW4gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgLyogSWYgYXR0cmlidXRlIGV4aXN0IHJldXNlIHRoZSBvbGQgaWQgZm9yIHRoZSBuZXcgYXR0cmlidXRlICovXHJcbiAgICAgICAgICAgICAgICBuZXdPYmplY3RBdHRyaWJ1dGVCZWFuLnNldElkKG9iamVjdEF0dHJpYnV0ZUJlYW4uZ2V0SWQoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLyogU3RvcmUgdGhlIG9iamVjdCBhdHRyaWJ1dGUgaW50byBJbnNpZ2h0LiAqL1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG5ld09iamVjdEF0dHJpYnV0ZUJlYW4pO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XHJcbiAgICAgICAgICAgICAgICBsb2cud2FybihcIkNvdWxkIG5vdCB1cGRhdGUgb2JqZWN0IGF0dHJpYnV0ZSBkdWUgdG8gdmFsaWRhdGlvbiBleGNlcHRpb246XCIgKyB2aWUuZ2V0TWVzc2FnZSgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgb25TaXRlVGVjaE9iamVjdHMuYWRkKG5ld09iamVjdEJlYW4pXHJcblxyXG4gICAgICAgICAgICBsb2cuaW5mbyAoXCJvblNpdGVUZWNoT2JqZWN0czogXCIgKyBvblNpdGVUZWNoT2JqZWN0cylcclxuXHJcbiAgICAgICAgICAgIGlmICghb25TaXRlVGVjaE9iamVjdHMuaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgICAgICAgICBNdXRhYmxlSXNzdWUgbWkgPSAoTXV0YWJsZUlzc3VlKSBpc3N1ZTtcclxuICAgICAgICAgICAgICAgIG1pLnNldEN1c3RvbUZpZWxkVmFsdWUob25TaXRlVGVjaHNUcmFjZUZpZWxkLCBvblNpdGVUZWNoT2JqZWN0cyk7XHJcbiAgICAgICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZSh1c2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBtaS5zZXRDdXN0b21GaWVsZFZhbHVlKG9uU2l0ZVRlY2hzRmllbGQsIG9uU2l0ZVRlY2hPYmplY3RzKTtcclxuICAgICAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKHVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInNjcmlwdFBhdGgiOm51bGx9</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
            </function>
            <function type="class">
              <arg name="field.name">resolution</arg>
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
              <arg name="field.value">10103</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
  </global-actions>
  <common-actions>
    <action id="41" name="Start Progress" view="fieldscreen">
      <meta name="jira.description"></meta>
      <meta name="jira.fieldscreen.id">19910</meta>
      <restrict-to>
        <conditions type="AND">
          <conditions type="OR">
            <condition type="class">
              <arg name="conditionList">3</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.33.0</arg>
              <arg name="comparisonType">1</arg>
              <arg name="class.name">com.googlecode.jsu.workflow.condition.ValueFieldCondition</arg>
              <arg name="uuid">f78b5e13-a779-44f3-bc72-27a44c6ee749</arg>
              <arg name="fieldValue"></arg>
              <arg name="fieldsList">customfield_23929</arg>
            </condition>
            <condition type="class">
              <arg name="FIELD_FUNCTION_ID">169f9e32-777e-4c33-ba96-d598a11d602e</arg>
              <arg name="FIELD_NOTES">YCFgQ3VycmVudCBzdGF0dXMgaXMgUmlza3MgQXNzZXNzbWVudA==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
              <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5nZXRTdGF0dXMoKS5uYW1lID09IFwiUmlza3MgQXNzZXNzbWVudFwiIiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
            </condition>
          </conditions>
          <condition type="class">
            <arg name="FIELD_FUNCTION_ID">519e584f-1e24-4d74-bbb9-ec343c3be7f1</arg>
            <arg name="FIELD_NOTES">YCFgRW5hYmxlZCBvbmx5IGlmIHBhcmVudCB0YXNrIGlzICJJbiBQcm9ncmVzcyIgYW5kIE9QX1RLVF9BU1NJR05FRF9UTyAhPSBBU1NJU1RBTlQ=</arg>
            <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
            <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXHJcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvblxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxyXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvbkJ1aWxkZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXHJcbmltcG9ydCBqYXZhLnRleHQuU2ltcGxlRGF0ZUZvcm1hdDtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZVxyXG5cclxuZGVmIGFzc2lnbmVkVG8gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEtUX0FTU0lHTkVEX1RPXCIpWzBdXHJcbmxvZy5kZWJ1ZyBcImlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzaWduZWRUbyk6IFwiICsgaXNzdWUuZ2V0UGFyZW50T2JqZWN0KCkuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NpZ25lZFRvKVxyXG5cclxuKChpc3N1ZS5wYXJlbnRPYmplY3Q/LnN0YXR1cz8ubmFtZSA9PSBcIkZpbmFsaXppbmcgV29ya1wiIHx8IGlzc3VlLnBhcmVudE9iamVjdD8uc3RhdHVzPy5uYW1lID09IFwiSW4gUHJvZ3Jlc3NcIikgJiYgIWlzc3VlLmdldFBhcmVudE9iamVjdCgpLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzaWduZWRUbykudG9TdHJpbmcoKS5lcXVhbHMoXCJBU1NJU1RBTlRcIikpIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
            <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
          </condition>
        </conditions>
      </restrict-to>
      <validators>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">da95600f-b12d-41a9-ba8a-97f002bd20c1</arg>
          <arg name="FIELD_NOTES">YCFgQ2hlY2sgUE0gb3BlcmF0aW9ucyBvbiBQTSB0YXNrICYmIFJlcXVpcmVkIGZpZWxkcyBpZiBSSVNLU19BU1NFU1NNRU5UIE5PVCBOVUxM</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5cblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcblxuLy9Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKClcbi8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtNDE1OVwiKVxuXG5sb2cuZGVidWcgXCJUcmFuc2F6aW9uZSBDb21wbGV0ZSAtIFByaW1vIHZhbGlkYXRvclwiXG5sb2cuZGVidWcgXCJUcmFuc2F6aW9uZSBDb21wbGV0ZSAtIFByaW1vIHZhbGlkYXRvciAtIElzc3VlOiBcIiArIGlzc3VlXG5cbmRlZiBlcnJvcnMgPSBmYWxzZVxuZGVmIHdhcm5pbmdzID0gZmFsc2VcbmRlZiBtaXNzaW5nUE1vcGVyYXRpb25zID0gZmFsc2VcblxuZGVmIHBtT3BlcmF0aW9ucyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9QTV9PUEVSQVRJT05TX09EU1wiKVswXVxuZGVmIGFzc2lnbmVkVG8gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEtUX0FTU0lHTkVEX1RPXCIpWzBdXG5cbmxvZy5kZWJ1ZyBcImlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocG1PcGVyYXRpb25zKTogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBtT3BlcmF0aW9ucylcbmxvZy5kZWJ1ZyBcImlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzaWduZWRUbyk6IFwiICsgaXNzdWUuZ2V0UGFyZW50T2JqZWN0KCkuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NpZ25lZFRvKVxuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbU9wZXJhdGlvbnMpPT1udWxsICYmICFpc3N1ZS5nZXRQYXJlbnRPYmplY3QoKS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2lnbmVkVG8pLnRvU3RyaW5nKCkuZXF1YWxzKFwiQVNTSVNUQU5UXCIpKXtcbiAgICBlcnJvcnM9dHJ1ZVxuICAgIG1pc3NpbmdQTW9wZXJhdGlvbnM9dHJ1ZVxufVxuXG5kZWYgdHJhbnNpdGlvbkNoZWNrID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5jaGVja0FuZENvbmZpcm0nXS50b1N0cmluZygpKVswXVxuZGVmIGR5bmFtaWNSaXNrc0FzcyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9BU1NFVF9SSVNLU19BU1NFU1NNRU5UXCIpWzBdXG5cbmRlZiBlcnJvck1hbmRhdG9yeUZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVycm9yUmVqZWN0ZWRUa3QgPSBmYWxzZVxuXG5pZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGR5bmFtaWNSaXNrc0FzcykhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGR5bmFtaWNSaXNrc0FzcykgIT0gXCJcIiAmJiAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShkeW5hbWljUmlza3NBc3MpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKXtcbiAgICAvKkNpY2xhcmUgdHV0dGkgZ2xpIG9nZ2V0dGkgYXNzb2NpYXRpIGFsIGNhbXBvKi9cbiAgICAvL2luc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHNcbiAgICBDbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7ICBcbiAgICBDbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTtcbiAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xuICAgIGRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG4gICAgZGVmIHJpc2tzQXNzZXNzbWVudCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZHluYW1pY1Jpc2tzQXNzKVxuICAgIGRlZiBkcmE1LCBkcmE2XG4gICAgbG9nLmRlYnVnIFwicmlza3NBc3Nlc3NtZW50OiBcIiArIHJpc2tzQXNzZXNzbWVudFxuICAgIGZvcihpIGluIHJpc2tzQXNzZXNzbWVudCl7XG4gICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdFxuICAgICAgICBkZWYgcmlzaz1pLnRvU3RyaW5nKClcbiAgICAgICAgZGVmIHJpc2tLZXkgPSByaXNrLnN1YnN0cmluZyhyaXNrLmxhc3RJbmRleE9mKCcoJykrMSxyaXNrLmxhc3RJbmRleE9mKCcpJykpXG4gICAgICAgIGRlZiByaXNrT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHJpc2tLZXkpXG5cbiAgICAgICAgZGVmIG9iVHJpYWdlXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihyaXNrT2JqZWN0LmdldElkKCksIFwiRFJBMVwiKT09bnVsbCl7XG4gICAgICAgICAgICBlcnJvcnM9dHJ1ZVxuICAgICAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKFwiRHluYW1pYyBSaXNrIEFzc2Vzc21lbnQgQ29tcGxldGVkIGZvciB0aGUgam9iXCIpXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQoRHluYW1pYyBSaXNrIEFzc2Vzc21lbnQgQ29tcGxldGVkIGZvciB0aGUgam9iKVwiXG4gICAgICAgIH1cblxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ocmlza09iamVjdC5nZXRJZCgpLCBcIkRSQTJcIik9PW51bGwpe1xuICAgICAgICAgICAgZXJyb3JzPXRydWVcbiAgICAgICAgICAgIGVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChcIkFsbCBoYXphcmRzIGNvdmVyZWQgYnkgdGhlIFJpc2sgQXNzZXNzbWVudD9cIilcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChBbGwgaGF6YXJkcyBjb3ZlcmVkIGJ5IHRoZSBSaXNrIEFzc2Vzc21lbnQ/KVwiXG4gICAgICAgIH1cblxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ocmlza09iamVjdC5nZXRJZCgpLCBcIkRSQTJcIikhPW51bGwgJiYgb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHJpc2tPYmplY3QuZ2V0SWQoKSwgXCJEUkEyXCIpLmNyZWF0ZU11dGFibGUoKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0udmFsdWUudG9TdHJpbmcoKT09XCJOT1wiICYmIChvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ocmlza09iamVjdC5nZXRJZCgpLCBcIkRSQTNcIik9PW51bGwgfHwgb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHJpc2tPYmplY3QuZ2V0SWQoKSwgXCJEUkEzXCIpLnRvU3RyaW5nKCk9PVwiXCIgKSl7XG4gICAgICAgICAgICBlcnJvcnM9dHJ1ZVxuICAgICAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKFwiQ29tcGxldGUgYWRkaXRpb25hbCBvdXRsaW5pbmcgaGF6YXJkcyBhbmQgY29udHJvbCBtZWFzdXJlc1wiKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKENvbXBsZXRlIGFkZGl0aW9uYWwgb3V0bGluaW5nIGhhemFyZHMgYW5kIGNvbnRyb2wgbWVhc3VyZXMpXCJcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihyaXNrT2JqZWN0LmdldElkKCksIFwiRFJBNFwiKT09bnVsbCl7XG4gICAgICAgICAgICBlcnJvcnM9dHJ1ZVxuICAgICAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKFwiTWV0aG9kIFN0YXRlbWVudCBhdmFpbGFibGUgZm9yIHRoZSBqb2I/XCIpXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQoTWV0aG9kIFN0YXRlbWVudCBhdmFpbGFibGUgZm9yIHRoZSBqb2I/KVwiXG4gICAgICAgIH1cblxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ocmlza09iamVjdC5nZXRJZCgpLCBcIkRSQTVcIik9PW51bGwpe1xuICAgICAgICAgICAgZXJyb3JzPXRydWVcbiAgICAgICAgICAgIGVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChcIkRvIHlvdSBoYXZlIHRoZSBjb3JyZWN0IHRvb2xzIGFuZCBQUEUgdG8gY2Fycnkgb3V0IHRoZSB0YXNrP1wiKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKERvIHlvdSBoYXZlIHRoZSBjb3JyZWN0IHRvb2xzIGFuZCBQUEUgdG8gY2Fycnkgb3V0IHRoZSB0YXNrPylcIlxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHJpc2tPYmplY3QuZ2V0SWQoKSwgXCJEUkE1XCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgZHJhNSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS52YWx1ZS50b1N0cmluZygpXG4gICAgICAgICAgICBpZihkcmE1LmVxdWFscyhcIk5PXCIpKXtcbiAgICAgICAgICAgICAgICBlcnJvclJlamVjdGVkVGt0PXRydWVcbiAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiZHJhNTogXCIgKyBkcmE1XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ocmlza09iamVjdC5nZXRJZCgpLCBcIkRSQTZcIik9PW51bGwpe1xuICAgICAgICAgICAgZXJyb3JzPXRydWVcbiAgICAgICAgICAgIGVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChcIkRvIHlvdSBoYXZlIGFsbCB0aGUgaW5mb3JtYXRpb24gYW5kIHRyYWluaW5nIHRvIGNvbXBsZXRlIHRoZSB0YXNrP1wiKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKERvIHlvdSBoYXZlIGFsbCB0aGUgaW5mb3JtYXRpb24gYW5kIHRyYWluaW5nIHRvIGNvbXBsZXRlIHRoZSB0YXNrPylcIlxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHJpc2tPYmplY3QuZ2V0SWQoKSwgXCJEUkE2XCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgZHJhNiA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS52YWx1ZS50b1N0cmluZygpXG4gICAgICAgICAgICBpZihkcmE2LmVxdWFscyhcIk5PXCIpKXtcbiAgICAgICAgICAgICAgICBlcnJvclJlamVjdGVkVGt0PXRydWVcbiAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiZHJhNjogXCIgKyBkcmE2XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsb2cuZGVidWcgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spXG4gICAgICAgIGxvZy5kZWJ1ZyBlcnJvck1hbmRhdG9yeUZpZWxkc1xuXG4gICAgfVxufVxuXG5cbmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcblxuaWYgKCFlcnJvcnMgJiYgIXdhcm5pbmdzKXtcbiAgICByZXR1cm4gdHJ1ZVxufWVsc2V7XG4gICAgaWYoIWVycm9ycyAmJiB3YXJuaW5ncyl7XG4gICAgICAgIC8vU2UgY2kgc29ubyBzb2xvIHdhcm5pbmdzIHZlcmlmaWNvIHNlIGwndXRlbnRlIGhhIGdpXHUwMGUwIGRpY2hpYXJhdG8gZGkgdm9sZXIgcHJvc2VndWlyZSBjb211bnF1ZVxuICAgICAgICAvLyAtIHRyYW5zaXRpb24gZmllbGQgXCJPUEFBX0NIRUNLX0FORF9DT05GSVJNXCI9XCJZZXNcIlxuICAgICAgICAvLyAtIGluIGNhc28gY29udHJhcmlvIGludmlvIGkgd2FybmluZyBhIEZFXG5cbiAgICAgICAgLy9sb2cuZGVidWcgXCJ0cmFuc2l0aW9uQ2hlY2s6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spXG4gICAgICAgIC8vbG9nLmRlYnVnIFwicmVzdWx0OiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKVxuICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIikpe1xuICAgICAgICAgICAgLy9sb2cuZGVidWcgXCJyZXR1cm4gdHJ1ZVwiXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgICAgICAgICBpZihlcnJvclJlamVjdGVkVGt0KXtcbiAgICAgICAgICAgICAgICBkZWYgZUxpc3RSZWplY3RlZCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGVMaXN0UmVqZWN0ZWQuYWRkKFwiV1wiKVxuICAgICAgICAgICAgICAgIGVMaXN0UmVqZWN0ZWQuYWRkKFwiUkVKRUNURURfRFVFX1RPX1JJU0tTX0FTU0VTU01FTlRcIilcbiAgICAgICAgICAgICAgICBlTGlzdFJlamVjdGVkLmFkZChudWxsKVxuICAgICAgICAgICAgICAgIHdMaXN0LmFkZChlTGlzdFJlamVjdGVkKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3V0cHV0LmFkZCh3TGlzdClcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRocm93IGV4Y2VwdGlvbjogXCIgKyBvdXRwdXQudG9TdHJpbmcoKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiV1wiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJXXCIsIG91dHB1dC50b1N0cmluZygpKSAgIFxuICAgICAgICB9XG5cbiAgICB9XG4gICAgaWYoZXJyb3JzICYmICF3YXJuaW5ncyl7XG4gICAgICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgICAgIGlmKGVycm9yTWFuZGF0b3J5RmllbGRzLnNpemUoKSA+IDApe1xuICAgICAgICAgICAgZGVmIGVMaXN0TWFuZGF0b3J5ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoXCJFXCIpXG4gICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoXCJNQU5EQVRPUllfRklFTERTXCIpXG4gICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQobnVsbClcbiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChlcnJvck1hbmRhdG9yeUZpZWxkcylcbiAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdE1hbmRhdG9yeSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKG1pc3NpbmdQTW9wZXJhdGlvbnMpe1xuICAgICAgICAgICAgZGVmIGVMaXN0U3ViVGFza0NvbXBsZXRlZCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgZUxpc3RTdWJUYXNrQ29tcGxldGVkLmFkZChcIkVcIilcbiAgICAgICAgICAgIGVMaXN0U3ViVGFza0NvbXBsZXRlZC5hZGQoXCJNSVNTSU5HX1BNX09QRVJBVElPTlNcIilcbiAgICAgICAgICAgIGVMaXN0U3ViVGFza0NvbXBsZXRlZC5hZGQobnVsbClcbiAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdFN1YlRhc2tDb21wbGV0ZWQpXG4gICAgICAgIH1cblxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICBsb2cuZGVidWcgXCJ0aHJvdyBleGNlcHRpb246IFwiICsgb3V0cHV0LnRvU3RyaW5nKClcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIkVcIiwgb3V0cHV0LnRvU3RyaW5nKCkpICBcblxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICBsb2cuZGVidWcgXCJ0aHJvdyBleGNlcHRpb246IFwiICsgb3V0cHV0LnRvU3RyaW5nKClcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIkVcIiwgb3V0cHV0LnRvU3RyaW5nKCkpICAgXG4gICAgfVxuICAgIGlmKGVycm9ycyAmJiB3YXJuaW5ncyl7XG4gICAgICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICBkZWYgd0xpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgaWYoZXJyb3JNYW5kYXRvcnlGaWVsZHMuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICBkZWYgZUxpc3RNYW5kYXRvcnkgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChcIkVcIilcbiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChcIk1BTkRBVE9SWV9GSUVMRFNcIilcbiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChudWxsKVxuICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKGVycm9yTWFuZGF0b3J5RmllbGRzKVxuICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0TWFuZGF0b3J5KVxuICAgICAgICB9XG5cbiAgICAgICAgaWYoZXJyb3JSZWplY3RlZFRrdCl7XG4gICAgICAgICAgICBkZWYgZUxpc3RSZWplY3RlZCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgZUxpc3RSZWplY3RlZC5hZGQoXCJXXCIpXG4gICAgICAgICAgICBlTGlzdFJlamVjdGVkLmFkZChcIlJFSkVDVEVEX0RVRV9UT19SSVNLU19BU1NFU1NNRU5UXCIpXG4gICAgICAgICAgICBlTGlzdFJlamVjdGVkLmFkZChudWxsKVxuICAgICAgICAgICAgd0xpc3QuYWRkKGVMaXN0UmVqZWN0ZWQpXG4gICAgICAgIH1cblxuICAgICAgICBpZihtaXNzaW5nUE1vcGVyYXRpb25zKXtcbiAgICAgICAgICAgIGRlZiBlTGlzdFN1YlRhc2tDb21wbGV0ZWQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIGVMaXN0U3ViVGFza0NvbXBsZXRlZC5hZGQoXCJFXCIpXG4gICAgICAgICAgICBlTGlzdFN1YlRhc2tDb21wbGV0ZWQuYWRkKFwiTUlTU0lOR19QTV9PUEVSQVRJT05TXCIpXG4gICAgICAgICAgICBlTGlzdFN1YlRhc2tDb21wbGV0ZWQuYWRkKG51bGwpXG4gICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RTdWJUYXNrQ29tcGxldGVkKVxuICAgICAgICB9XG5cbiAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgb3V0cHV0LmFkZCh3TGlzdClcbiAgICAgICAgbG9nLmRlYnVnIFwidGhyb3cgZXhjZXB0aW9uOiBcIiArIG91dHB1dC50b1N0cmluZygpXG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIldFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKFwiV0VcIiwgb3V0cHV0LnRvU3RyaW5nKCkpICBcbiAgICB9XG59XG4iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="disabled">true</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">b24b77fd-c8bd-438e-bfca-049838725b25</arg>
          <arg name="FIELD_NOTES">YCFgU0FQOiB1cGRhdGUgU04gc3RhdHVz</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG5VUkwgdXJsXG5IdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uXG5cbnJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcblxuZGVmIGJvZHlfcmVxID0gW11cbmJvZHlfcmVxID0gW1xuICAgIFwiaXNzdWVLZXlcIjogaXNzdWUua2V5LFxuICAgIFwic3RhdHVzXCI6IFwiSU5QXCJcbl0gXG5cbiAgICBcbmJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL2FmdGVyL3NhbGVzL2NyZWF0ZS9zZXJ2aWNlL25vdGlmaWNhdGlvblwiXG5cbmxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxubG9nLmRlYnVnIFwiYm9keV9yZXEgU046IFwiICsgYm9keV9yZXFcbnVybCA9IG5ldyBVUkwoYmFzZVVSTClcbmNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbmNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5jb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG5sb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbmNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG5kZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuXG5pZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikgJiYgIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDFcIikpe1xuICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICBlTGlzdEVycm9ycy5hZGQoXCJTTl9VUERBVEVcIilcbiAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkpXG4gICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcbiAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxufWVsc2V7XG4gICAgLyoqIFNFUlZJQ0UgT1JERVIgQ1JFQVRJT04gKiovXG4gICAgYm9keV9yZXEgPSBbXG4gICAgICAgIFwiaXNzdWVLZXlcIjogaXNzdWUua2V5XG4gICAgXSBcbiAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS9hZnRlci9zYWxlcy9jcmVhdGUvb3IvdXBkYXRlL3NlcnZpY2Uvb3JkZXJcIlxuXG4gICAgbG9nLmRlYnVnIFwiYmFzZVVSTCBTTzogXCIgKyBiYXNlVVJMXG4gICAgbG9nLmRlYnVnIFwiYm9keV9yZXEgU086IFwiICsgYm9keV9yZXFcbiAgICB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG4gICAgbG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG5cbiAgICBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDFcIikgJiYgIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xuICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICBcbiAgICAgICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxuICAgICAgICBsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXG4gICAgICAgIFxuICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG4gICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcblxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIlNPX0NSRUFURVwiKVxuICAgICAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGpzb25fb2JqZWN0LmVycm9yc1swXSlcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcbiAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgIH1cbn0iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="disabled">true</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">0beaf9db-411f-4805-a98b-8af2e6f07abc</arg>
          <arg name="FIELD_NOTES">YCFgT1AgOiB2YWxpZGF0b3IgYmFja2VuZCBjYWxs</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGRcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5DdXN0b21GaWVsZE1hbmFnZXJcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS53b3JrZmxvdy5KaXJhV29ya2Zsb3dcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuc2NyZWVuLkZpZWxkU2NyZWVuTGF5b3V0SXRlbVxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5zY3JlZW4uRmllbGRTY3JlZW5UYWJcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuRmllbGRNYW5hZ2VyXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLnNjcmVlbi5GaWVsZFNjcmVlblxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5zY3JlZW4uRmllbGRTY3JlZW5NYW5hZ2VyXHJcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LmxvYWRlci5BY3Rpb25EZXNjcmlwdG9yXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEud29ya2Zsb3cuV29ya2Zsb3dNYW5hZ2VyXHJcbmltcG9ydCBncm9vdnkuanNvbi5TdHJlYW1pbmdKc29uQnVpbGRlclxyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcclxuXHJcbmRlZiBiYXNlVVJMXHJcbmRlZiByZXNwb25zZUJvZHlcclxuXHJcbnRyeSB7XHJcbiAgICBQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXHJcbiAgICBGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxyXG4gICAgcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcclxuICAgICAgICBwcm9wZXJ0aWVzLmxvYWQoaXQpXHJcbiAgICB9XHJcblxyXG4gICAgZGVmIHNlcnZlckJhc2UgPSBTdHJpbmcuZm9ybWF0KFwiaHR0cDovLyVzL29wXCIsIHByb3BlcnRpZXNbJ2FwaS5lbnYnXSlcclxuICAgIGRlZiB0cmFuc2FjdGlvbkFjdGlvbiA9IFwidmFsaWRhdG9yc1wiXHJcblxyXG4gICAgVVJMIHVybFxyXG4gICAgZGVmIHJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIlxyXG5cclxuICAgIGJhc2VVUkwgPSBTdHJpbmcuZm9ybWF0KFwiJXMvcmVzdC9qaXJhL3dvcmtmbG93cy8lcy8lc1wiLCBzZXJ2ZXJCYXNlLCB0cmFuc2llbnRWYXJzLmFjdGlvbklkLCB0cmFuc2FjdGlvbkFjdGlvbilcclxuXHJcbiAgICBsb2cuZGVidWcoXCJDb21wb3NpbmcgYmFzZVVSTCBhcyAnJHtiYXNlVVJMfSdcIilcclxuXHJcbiAgICBXb3JrZmxvd01hbmFnZXIgd29ya2Zsb3dNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0V29ya2Zsb3dNYW5hZ2VyKClcclxuICAgIEppcmFXb3JrZmxvdyBqaXJhV29ya2Zsb3cgPSB3b3JrZmxvd01hbmFnZXIuZ2V0V29ya2Zsb3codHJhbnNpZW50VmFycy5pc3N1ZSlcclxuXHJcbiAgICBDdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKClcclxuXHJcbiAgICBsb2cuZGVidWcoamlyYVdvcmtmbG93LmdldE5hbWUoKSlcclxuXHJcbiAgICBBY3Rpb25EZXNjcmlwdG9yIGFkID0gd29ya2Zsb3dNYW5hZ2VyLmdldEFjdGlvbkRlc2NyaXB0b3IodHJhbnNpZW50VmFycy5pc3N1ZSwgdHJhbnNpZW50VmFycy5hY3Rpb25JZClcclxuXHJcbiAgICBsb2cuZGVidWcoXCJBY3Rpb25EZXNjcmlwdG9yIE5hbWU6ICR7YWQuZ2V0TmFtZSgpfVwiKSAvLyBHZW5lcmEgUmFwcG9ydG8gZGkgSW50ZXJ2ZW50byBGQUFDXHJcbiAgICBsb2cuZGVidWcoXCJBY3Rpb25EZXNjcmlwdG9yIE1ldGFBdHRyczogJHthZC5nZXRNZXRhQXR0cmlidXRlcygpfVwiKSAvLyB7b3BzYmFyLXNlcXVlbmNlPTEwLCBqaXJhLmRlc2NyaXB0aW9uPSwgamlyYS5maWVsZHNjcmVlbi5pZD0xOTkxMH1cclxuXHJcbiAgICBkZWYgYWRNZXRhID0gYWQuZ2V0TWV0YUF0dHJpYnV0ZXMoKVxyXG4gICAgU3RyaW5nIGZpZWxkU2NyZWVuSWQgPSBhZE1ldGEuZ2V0KFwiamlyYS5maWVsZHNjcmVlbi5pZFwiKTtcclxuICAgIGxvZy5kZWJ1ZyhcIkZpZWxkIHNjcmVlbiBpZDogJHtmaWVsZFNjcmVlbklkfVwiKVxyXG5cclxuICAgIE1hcDxTdHJpbmcsIE9iamVjdD4gY3VzdG9tRmllbGRNYXAgPSBuZXcgSGFzaE1hcDw+KClcclxuICAgIGlmIChmaWVsZFNjcmVlbklkKSB7XHJcbiAgICAgICAgRmllbGRTY3JlZW5NYW5hZ2VyIGZpZWxkU2NyZWVuTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChGaWVsZFNjcmVlbk1hbmFnZXIuY2xhc3MpO1xyXG4gICAgICAgIEZpZWxkU2NyZWVuIGZpZWxkU2NyZWVuID0gZmllbGRTY3JlZW5NYW5hZ2VyLmdldEZpZWxkU2NyZWVuKExvbmcudmFsdWVPZihmaWVsZFNjcmVlbklkLnRvU3RyaW5nKCkpKTtcclxuICAgICAgICBMaXN0PEZpZWxkU2NyZWVuVGFiPiBmc3RzID0gZmllbGRTY3JlZW4uZ2V0VGFicygpO1xyXG4gICAgICAgIGZvciAoRmllbGRTY3JlZW5UYWIgZnN0OiBmc3RzKSB7XHJcbiAgICAgICAgICAgIExpc3Q8RmllbGRTY3JlZW5MYXlvdXRJdGVtPiBxd2UgPSBmc3QuZ2V0RmllbGRTY3JlZW5MYXlvdXRJdGVtcygpO1xyXG4gICAgICAgICAgICBmb3IgKEZpZWxkU2NyZWVuTGF5b3V0SXRlbSBmc2xpOiBxd2UpIHtcclxuICAgICAgICAgICAgICAgIGlmIChmc2xpLmdldEZpZWxkSWQoKSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBDdXN0b21GaWVsZCBjdXN0b21GaWVsZCA9IGN1c3RvbUZpZWxkTWFuYWdlci5nZXRDdXN0b21GaWVsZE9iamVjdChmc2xpLmdldEZpZWxkSWQoKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VzdG9tRmllbGQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGVmIGN1c3RvbUZpZWxkVmFsdWUgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1c3RvbUZpZWxkKTtcclxuICAgICAgICAgICAgICAgIGN1c3RvbUZpZWxkTWFwLnB1dChmc2xpLmdldEZpZWxkSWQoKSwgY3VzdG9tRmllbGRWYWx1ZSA9PSBudWxsID8gbnVsbCA6IGN1c3RvbUZpZWxkVmFsdWUudG9TdHJpbmcoKSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGxvZy5kZWJ1ZyhcImN1c3RvbUZpZWxkTWFwOiAke2N1c3RvbUZpZWxkTWFwfVwiKVxyXG5cclxuICAgIGRlZiBib2R5UmVxID0gW1xyXG4gICAgICAgIFwiaXNzdWVUeXBlSWRcIjogaXNzdWUuaXNzdWVUeXBlSWQsXHJcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXHJcbiAgICAgICAgXCJhY3Rpb25OYW1lXCI6IGFkLmdldE5hbWUoKSxcclxuICAgICAgICBcImppcmFXb3JrZmxvd05hbWVcIjogamlyYVdvcmtmbG93LmdldE5hbWUoKSxcclxuICAgICAgICBcImN1c3RvbUZpZWxkTWFwXCI6IGN1c3RvbUZpZWxkTWFwLFxyXG4gICAgICAgIFwicHJvcGVydGllc1wiOiBwcm9wZXJ0aWVzXHJcbiAgICBdXHJcblxyXG4gICAgbG9nLmRlYnVnKFwiQ2FsbGluZyBbJHtyZXF1ZXN0TWV0aG9kfV0gJHtiYXNlVVJMfSB3aXRoIGJvZHkgJHtib2R5UmVxfVwiKVxyXG5cclxuICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcclxuICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pIHVybC5vcGVuQ29ubmVjdGlvbigpXHJcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZClcclxuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpXHJcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKVxyXG4gICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKVxyXG4gICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpXHJcbiAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikge1xyXG4gICAgICAgIG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keVJlcSlcclxuICAgIH1cclxuXHJcbiAgICBjb25uZWN0aW9uLmNvbm5lY3QoKVxyXG4gICAgZGVmIHJlc3BvbnNlQ29kZSA9IGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKVxyXG5cclxuICAgIGxvZy5kZWJ1ZyhcIlJlc3BvbnNlIEh0dHBTdGF0dXNDb2RlOiAke3Jlc3BvbnNlQ29kZX1cIilcclxuXHJcbiAgICAvLyBJZiBiYWNrZW5kIHJlcGxpZXMgd2l0aCAyMDAgdGhlbiB0aGUgY29uZGl0aW9uIGlzIHBhc3NlZFxyXG4gICAgaWYgKFwiMjAwXCIuZXF1YWxzKHJlc3BvbnNlQ29kZSkpIHtcclxuICAgICAgICBsb2cuZGVidWcoXCJWYWxpZGF0b3IgcGFzc2VkIVwiKVxyXG4gICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgcmVzcG9uc2VCb2R5ID0gKChIdHRwVVJMQ29ubmVjdGlvbikgY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxyXG4gICAgICAgIGxvZy5kZWJ1ZyhcIlZhbGlkYXRvciBub3QgcGFzc2VkLCByZXNwb25zZUJvZHk6ICR7cmVzcG9uc2VCb2R5fVwiKVxyXG5cclxuICAgICAgICAvLyB0ZXN0aW5nIHdpdGhvdXQgcmVkZXBsb3lpbmcgZWFjaCB0aW1lXHJcbiAgICAgICAgLy9yZXNwb25zZUJvZHkgPSAne1wiV1wiOiBcIltbW1csIENPTkZJUk1fUklTS19BTkFMWVNJUywgbnVsbF1dXVwifSdcclxuXHJcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihyZXNwb25zZUJvZHkpXHJcbiAgICB9XHJcbn0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XHJcbiAgICAvL1RoaXMgaXMgYW4gZXhjZXB0aW9uIGluIHRoZSBzY3JpcHRcclxuICAgIGxvZy5kZWJ1ZyhcIkV4Y2VwdGlvbiByYWlzZWQgY2FsbGluZyBlbmRwb2ludCAke2Jhc2VVUkx9XCIpXHJcbiAgICBsb2cuZXJyb3IoZSlcclxuICAgIGlmIChlIGluc3RhbmNlb2YgSW52YWxpZElucHV0RXhjZXB0aW9uKSB7XHJcbiAgICAgICAgdGhyb3cgZVxyXG4gICAgfVxyXG4gICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOiBcIltbWyBWYWxpZGF0b3IgZmFpbGVkIF1dXVwiIH0nKVxyXG59Iiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
      </validators>
      <results>
        <unconditional-result old-status="Not Done" status="Done" step="7">
          <post-functions>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">e6bbfb07-a70c-482d-b861-b5ad194fda33</arg>
              <arg name="FIELD_NOTES">YCFgQ3JlYXRlIG9iaiAiQ2hlY2tsaXN0IiAtIE5PVCBmb3IgQVNTSVNUQU5UIHRpY2tldHM=</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiIgaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3JcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZVxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZTtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5ldmVudC50eXBlLkV2ZW50RGlzcGF0Y2hPcHRpb247XHJcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkxldmVsXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyXHJcblxyXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXHJcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZSgnL3Zhci9hdGxhc3NpYW4vYXBwbGljYXRpb24tZGF0YS9zaGFyZWQvc2NyaXB0cy9vcHByb2plY3QucHJvcGVydGllcycpXHJcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XHJcblx0cHJvcGVydGllcy5sb2FkKGl0KVxyXG59XHJcbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cclxuQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyBcclxuZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XHJcbiAgXHJcbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBUeXBlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xyXG5DbGFzcyBvYmplY3RUeXBlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUZhY2FkZVwiKTsgXHJcbmRlZiBvYmplY3RUeXBlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVGYWNhZGVDbGFzcyk7XHJcbiAgXHJcbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBBdHRyaWJ1dGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXHJcbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpOyBcclxuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcclxuICBcclxuQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7IFxyXG5kZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XHJcbkNsYXNzIGlxbEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLklRTEZhY2FkZVwiKTsgXHJcbmRlZiBpcWxGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUoaXFsRmFjYWRlQ2xhc3MpO1xyXG5cclxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpXHJcbi8vaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMTk2OTM4XCIpXHJcblxyXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXHJcbmludCBEQk8gPSBwcm9wZXJ0aWVzWydpc2NoZW1hLmRiby5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuXHJcbmRlZiBhc3NldCA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0FTU0VUXCIpWzBdXHJcbmRlZiB0aWNrZXRWaXNLZXkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9US1RfVklTSUJJTElUWV9LRVlcIilbMF1cclxuZGVmIGNoZWNrbGlzdEZpZWxkID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfQVNTRVRfQ0hFQ0tMSVNUXCIpWzBdXHJcbmRlZiBhc3NpZ25lZFRvID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEtUX0FTU0lHTkVEX1RPXCIpWzBdXHJcblxyXG4vKjI3LjAxLjIwMjMgQUYgLSBNYXAgaXNzdWUgdHlwZSB0byBmaWx0ZXIgYXZhaWxhYmxlIGNoZWNrbGlzdHMqL1xyXG5kZWYgaXNzdWVUeXBlTWFwXHJcbmlmKGlzc3VlLmlzc3VlVHlwZS5uYW1lID09IFwiTWFpbnRlbmFuY2UgVGlja2V0XCIpe1xyXG4gICAgaXNzdWVUeXBlTWFwID0gXCJSRVBBSVJfVElDS0VUXCJcclxufVxyXG5pZihpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSBcIk5ldyBJbnN0YWxsYXRpb25cIil7XHJcbiAgICBpc3N1ZVR5cGVNYXAgPSBcIk5FV19JTlNUQUxMQVRJT05fVElDS0VUXCJcclxufVxyXG5pZihpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSBcIk1vZGVybml6YXRpb25cIil7XHJcbiAgICBpc3N1ZVR5cGVNYXAgPSBcIk1PREVSTklaQVRJT05cIlxyXG59XHJcbmlmKGlzc3VlLmlzc3VlVHlwZS5uYW1lID09IFwiUGxhbm5lZCBNYWludGVuYW5jZSBUYXNrXCIpe1xyXG4gICAgaXNzdWVUeXBlTWFwID0gXCJQTV9UQVNLXCJcclxufVxyXG4gICAgXHJcbi8vMzAuMDMuMjAyMiAtIG9yYSBtZXNzYSBjb25kaXppb25lIGZpc3NhIGluIGJhc2UgYWxsYSBjb21wYW55IGNvZGUsIGFnZ2l1bmdlcmUgZmxhZyBzdWxsJ29nZ2V0dG8gQ29tcGFueSBjaGUgbGEgYWJpbGl0aSBvIG1lbm8gYWxsYSBkeW5hbWljIHJpc2sgYXNzZXNzbWVudC4gU29sbyBzZSBsYSBjb21wYW55IHJlZmVyZW56aWF0YSBuZWxsYSB2aXNpYmlsaXR5IGtleSBcclxuLy9oYSBsYSBkeW5hbWljIHJpc2sgYXNzZXNzbWVudCBhdHRpdmEgZmFyZSBxdWFudG8gc290dG9cclxuLy8yNy4wMS4yMDIzIC0gQUYgLSB0b2x0YSBjb25kaXppb25lIGNoZSBsZWdhIGxhIGdlbmVyYXppb25lIGRlbGxhIGNoZWNrbGlzdCBhbCBjb2RpY2UgY29tcGFueSBvIGFsbGEgcHJlc2VuemEgZGVsbGEgZHluYW1pYyByaXNrcyBhc3Nlc3NtZW50IC0gc2UgY2kgc29ubyBlbGVtZW50aSBDaGVja2xpc3QgdmllbmUgY3JlYXRvLCB2aWNldmVyc2Egbm9uIHZpZW5lIGNyZWF0byBudWxsYVxyXG4vL2lmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGlja2V0VmlzS2V5KVswXS50b1N0cmluZygpLmNvbnRhaW5zKFwiMTE3OVwiKSB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRpY2tldFZpc0tleSlbMF0udG9TdHJpbmcoKS5jb250YWlucyhcIjEwNzhcIikpe1xyXG5cclxuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjaGVja2xpc3RGaWVsZCkgPT0gbnVsbCAmJiBpc3N1ZS5pc3N1ZVR5cGUubmFtZSAhPSBcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0XCIgJiYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzaWduZWRUbykgPT0gbnVsbCB8fCAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NpZ25lZFRvKS50b1N0cmluZygpLmVxdWFscyhcIkFTU0lTVEFOVFwiKSkpe1xyXG4gICAgbG9nLmluZm8gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldClbMF0udG9TdHJpbmcoKVxyXG4gICAgZGVmIGFzcz1pc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0KVswXS50b1N0cmluZygpXHJcbiAgICBkZWYgYXNzS2V5ID0gYXNzLnN1YnN0cmluZyhhc3MubGFzdEluZGV4T2YoJygnKSsxLGFzcy5sYXN0SW5kZXhPZignKScpKVxyXG4gICAgZGVmIGFzc05hbWUgPSBhc3Muc3Vic3RyaW5nKDAsYXNzLmxhc3RJbmRleE9mKCcoJyktMSlcclxuICAgIGRlZiBhc3NPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oYXNzS2V5KVxyXG4gICAgbG9nLmluZm8gXCJhc3NLZXk6IFwiICsgYXNzS2V5XHJcbiAgICBsb2cuaW5mbyAoXCJhc3NOYW1lOiBcIiArIGFzc05hbWUpXHJcbiAgICBsb2cuaW5mbyAoXCJhc3NPYmplY3Q6IFwiICsgYXNzT2JqZWN0KVxyXG4gICAgXHJcbiAgICBsb2cuaW5mbyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oYXNzT2JqZWN0LmdldElkKCksIFwiUFVCTElDX1BST0RVQ1RfVFlQRV9SRUZcIikudG9TdHJpbmcoKVxyXG4gICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oYXNzT2JqZWN0LmdldElkKCksIFwiUFVCTElDX1BST0RVQ1RfVFlQRV9SRUZcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICBwcm9kVHlwZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpXHJcbiAgICBsb2cuaW5mbyBwcm9kVHlwZS50b1N0cmluZygpXHJcblxyXG4gICAgbG9nLmluZm8gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0aWNrZXRWaXNLZXkpWzBdLnRvU3RyaW5nKClcclxuICAgIGRlZiB2aXM9aXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0aWNrZXRWaXNLZXkpWzBdLnRvU3RyaW5nKClcclxuICAgIGRlZiB2aXNLZXkgPSB2aXMuc3Vic3RyaW5nKHZpcy5sYXN0SW5kZXhPZignKCcpKzEsdmlzLmxhc3RJbmRleE9mKCcpJykpXHJcbiAgICBkZWYgb2JqZWN0cyA9IGlxbEZhY2FkZS5maW5kT2JqZWN0c0J5SVFMQW5kU2NoZW1hKE9QQUEsIFwib2JqZWN0VHlwZSA9IENoZWNrbGlzdHMgQU5EIElTU1VFX1RZUEUgSU4gKFwiICsgaXNzdWVUeXBlTWFwICsgXCIpIEFORCBQUk9EVUNUX1RZUEVfUkVGLktleSA9IERPLVwiICsgcHJvZFR5cGUudG9TdHJpbmcoKSArIFwiIEFORCBvYmplY3QgSEFWSU5HIG91dGJvdW5kUmVmZXJlbmNlcyhvYmplY3RUeXBlID0gQ29tcGFueSBBTkQgb2JqZWN0IEhBVklORyBpbmJvdW5kUmVmZXJlbmNlcyhvYmplY3RUeXBlID0gXFxcIlZpc2liaWxpdHkgS2V5XFxcIiBBTkQgS2V5ID0gXCIgKyB2aXNLZXkudG9TdHJpbmcoKSArIFwiKSlcIilcclxuICAgIGxvZy53YXJuIFwiaXFsOiBcIiArIFwib2JqZWN0VHlwZSA9IENoZWNrbGlzdHMgQU5EIElTU1VFX1RZUEUgSU4gKFwiICsgaXNzdWVUeXBlTWFwICsgXCIpIEFORCBQUk9EVUNUX1RZUEVfUkVGLktleSA9IERPLVwiICsgcHJvZFR5cGUudG9TdHJpbmcoKSArIFwiIEFORCBvYmplY3QgSEFWSU5HIG91dGJvdW5kUmVmZXJlbmNlcyhvYmplY3RUeXBlID0gQ29tcGFueSBBTkQgb2JqZWN0IEhBVklORyBpbmJvdW5kUmVmZXJlbmNlcyhvYmplY3RUeXBlID0gXFxcIlZpc2liaWxpdHkgS2V5XFxcIiBBTkQgS2V5ID0gXCIgKyB2aXNLZXkudG9TdHJpbmcoKSArIFwiKSlcIlxyXG5cclxuICAgIGlmKG9iamVjdHMuc2l6ZSgpID09IDApe1xyXG4gICAgICAgIG9iamVjdHMgPSBpcWxGYWNhZGUuZmluZE9iamVjdHNCeUlRTEFuZFNjaGVtYShPUEFBLCBcIm9iamVjdFR5cGUgPSBDaGVja2xpc3RzIEFORCBJU1NVRV9UWVBFIElOIChcIiArIGlzc3VlVHlwZU1hcCArIFwiKSBBTkQgREVGQVVMVCA9IHRydWUgQU5EIG9iamVjdCBIQVZJTkcgb3V0Ym91bmRSZWZlcmVuY2VzKG9iamVjdFR5cGUgPSBDb21wYW55IEFORCBvYmplY3QgSEFWSU5HIGluYm91bmRSZWZlcmVuY2VzKG9iamVjdFR5cGUgPSBcXFwiVmlzaWJpbGl0eSBLZXlcXFwiIEFORCBLZXkgPSBcIiArIHZpc0tleS50b1N0cmluZygpICsgXCIpKVwiKVxyXG4gICAgICAgIGxvZy53YXJuIFwiaXFsOiBcIiArIFwib2JqZWN0VHlwZSA9IENoZWNrbGlzdHMgQU5EIElTU1VFX1RZUEUgSU4gKFwiICsgaXNzdWVUeXBlTWFwICsgXCIpIEFORCBERUZBVUxUID0gdHJ1ZSBBTkQgb2JqZWN0IEhBVklORyBvdXRib3VuZFJlZmVyZW5jZXMob2JqZWN0VHlwZSA9IENvbXBhbnkgQU5EIG9iamVjdCBIQVZJTkcgaW5ib3VuZFJlZmVyZW5jZXMob2JqZWN0VHlwZSA9IFxcXCJWaXNpYmlsaXR5IEtleVxcXCIgQU5EIEtleSA9IFwiICsgdmlzS2V5LnRvU3RyaW5nKCkgKyBcIikpXCJcclxuICAgIH1cclxuXHJcbiAgICBpZihvYmplY3RzKXtcclxuICAgICAgICBsb2cuaW5mbyBvYmplY3RzWzBdLnRvU3RyaW5nKClcclxuICAgICAgICBcclxuICAgICAgICBsb2cuaW5mbyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ob2JqZWN0c1swXS5nZXRJZCgpLCBcIkNIRUNLTElTVF9OQU1FXCIpLnRvU3RyaW5nKClcclxuICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihvYmplY3RzWzBdLmdldElkKCksIFwiQ0hFQ0tMSVNUX05BTUVcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICAgICAgY2hlY2tsaXN0ID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKClcclxuICAgICAgICBsb2cuaW5mbyBjaGVja2xpc3QudG9TdHJpbmcoKS5yZXBsYWNlQWxsKCcgLSAnLCcnKS5yZXBsYWNlQWxsKCcgJywnJylcclxuICAgICAgICBcclxuICAgICAgICBkZWYgbmV3T2JqSWQgPSBwcm9wZXJ0aWVzWydpb2JqLicgKyBjaGVja2xpc3QudG9TdHJpbmcoKS5yZXBsYWNlQWxsKCcgLSAnLCcnKS5yZXBsYWNlQWxsKCcgJywnJykgKyAnLmlkJ10udG9JbnRlZ2VyKClcclxuICAgICAgICBsb2cuaW5mbyBcImlkOiBcIiArIHByb3BlcnRpZXNbJ2lvYmouJyArIGNoZWNrbGlzdC50b1N0cmluZygpLnJlcGxhY2VBbGwoJyAtICcsJycpLnJlcGxhY2VBbGwoJyAnLCcnKSArICcuaWQnXS50b1N0cmluZygpXHJcbiAgICAgICAgZGVmIG5ld09iak5hbWVJZCA9IHByb3BlcnRpZXNbJ2lvYmouJyArIGNoZWNrbGlzdC50b1N0cmluZygpLnJlcGxhY2VBbGwoJyAtICcsJycpLnJlcGxhY2VBbGwoJyAnLCcnKSArICcuTmFtZS5pZCddLnRvSW50ZWdlcigpXHJcbiAgICAgICAgZGVmIG5ld09iakNvbXBsZXRlZElkID0gcHJvcGVydGllc1snaW9iai4nICsgY2hlY2tsaXN0LnRvU3RyaW5nKCkucmVwbGFjZUFsbCgnIC0gJywnJykucmVwbGFjZUFsbCgnICcsJycpICsgJy5jb21wbGV0ZWQuaWQnXS50b0ludGVnZXIoKVxyXG4gICAgICAgIGxvZy5pbmZvIG5ld09iak5hbWVJZC50b1N0cmluZygpXHJcbiAgICAgICAgXHJcbiAgICAgICAgZGVmIGNoZWNrbGlzdE9iamVjdHMgPSBuZXcgQXJyYXlMaXN0KCk7XHJcbiAgICAgICAgZGVmIG9iamVjdEF0dHJpYnV0ZUJlYW5zID0gbmV3IEFycmF5TGlzdCgpO1xyXG4gICAgICAgIGRlZiBuYW1lT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihuZXdPYmpOYW1lSWQpOyBcclxuICAgICAgICBkZWYgY29tcGxldGVkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihuZXdPYmpDb21wbGV0ZWRJZCk7IFxyXG4gICAgICAgIFxyXG4gICAgICAgIGRlZiBvYmplY3RUeXBlQ2hlY2tsaXN0ID0gb2JqZWN0VHlwZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUJlYW4obmV3T2JqSWQpO1xyXG4gICAgICAgIGRlZiBuZXdPYmplY3RCZWFuID0gb2JqZWN0VHlwZUNoZWNrbGlzdC5jcmVhdGVNdXRhYmxlT2JqZWN0QmVhbigpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIG9iamVjdEF0dHJpYnV0ZUJlYW5zLmFkZChvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeS5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuRm9yT2JqZWN0KG5ld09iamVjdEJlYW4sIG5hbWVPYmplY3RUeXBlQXR0cmlidXRlQmVhbiwgaXNzdWUua2V5LnRvU3RyaW5nKCkpKTtcclxuICAgICAgICBvYmplY3RBdHRyaWJ1dGVCZWFucy5hZGQob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkuY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbkZvck9iamVjdChuZXdPYmplY3RCZWFuLCBjb21wbGV0ZWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbiwgXCJmYWxzZVwiKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbmV3T2JqZWN0QmVhbi5zZXRPYmplY3RBdHRyaWJ1dGVCZWFucyhvYmplY3RBdHRyaWJ1dGVCZWFucyk7XHJcbiAgICAgICAgLyogU3RvcmUgdGhlIG9iamVjdCBpbnRvIEluc2lnaHQuIFRoZSBuZXcgT2JqZWN0QmVhbiB3aWxsIGJlIHVwZGF0ZWQgd2l0aCBhbiB1bmlxdWUgSUQgKi9cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBuZXdPYmplY3RCZWFuID0gb2JqZWN0RmFjYWRlLnN0b3JlT2JqZWN0QmVhbihuZXdPYmplY3RCZWFuKTtcclxuICAgICAgICAgICAgbG9nLndhcm4oXCJuZXdPYmplY3RCZWFuOiBcIiArIG5ld09iamVjdEJlYW4pO1xyXG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHtcclxuICAgICAgICAgICAgbG9nLndhcm4oXCJDb3VsZCBub3QgY3JlYXRlIGlzc3VlIGR1ZSB0byB2YWxpZGF0aW9uIGV4Y2VwdGlvbjpcIiArIHZpZS5nZXRNZXNzYWdlKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjaGVja2xpc3RPYmplY3RzLmFkZChuZXdPYmplY3RCZWFuKVxyXG4gICAgICAgIFxyXG4gICAgICAgIGxvZy5pbmZvIChcImNoZWNrbGlzdE9iamVjdHM6IFwiICsgY2hlY2tsaXN0T2JqZWN0cylcclxuICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIWNoZWNrbGlzdE9iamVjdHMuaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgICAgIE11dGFibGVJc3N1ZSBtaSA9IChNdXRhYmxlSXNzdWUpIGlzc3VlO1xyXG4gICAgICAgICAgICBtaS5zZXRDdXN0b21GaWVsZFZhbHVlKGNoZWNrbGlzdEZpZWxkLCBjaGVja2xpc3RPYmplY3RzKTtcclxuICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSAgICAgIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
            </function>
            <function type="class">
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdateissuestatus-function</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowcreatecomment-function</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowgeneratechangehistory-function</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowreindexissue-function</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">83147c97-077d-4f1d-a5e0-b46805373d48</arg>
              <arg name="FIELD_ACTION">141 Eseguita con cartaceo</arg>
              <arg name="FIELD_NOTES">YCFgQXV0b21hdGljYWxseSBSZWplY3QgdGt0cyBiYXNlZCBvbiBEeW5hbWljIFJpc2tzIEFzc2Vzc21lbnQgcmVzdWx0</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.FasttrackTransition</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.FasttrackTransition</arg>
              <arg name="disabled">true</arg>
              <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXHJcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvblxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxyXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvbkJ1aWxkZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXHJcbmltcG9ydCBqYXZhLnRleHQuU2ltcGxlRGF0ZUZvcm1hdDtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZVxyXG5cclxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxyXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxyXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xyXG4gICAgcHJvcGVydGllcy5sb2FkKGl0KVxyXG59XHJcbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxyXG5cclxuLy9Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKClcclxuLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy00MTc1NVwiKVxyXG5cclxubG9nLmRlYnVnIFwiVHJhbnNhemlvbmUgQ09ORklSTSBBU1NFVCAtIElzc3VlOiBcIiArIGlzc3VlXHJcblxyXG5kZWYgZXJyb3JzID0gZmFsc2VcclxuZGVmIHdhcm5pbmdzID0gZmFsc2VcclxuXHJcbmRlZiB0cmFuc2l0aW9uQ2hlY2sgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmNoZWNrQW5kQ29uZmlybSddLnRvU3RyaW5nKCkpWzBdXHJcbmRlZiBkeW5hbWljUmlza3NBc3MgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfQVNTRVRfUklTS1NfQVNTRVNTTUVOVFwiKVswXVxyXG5cclxuZGVmIGVycm9yTWFuZGF0b3J5RmllbGRzID0gbmV3IEFycmF5TGlzdCgpXHJcbmRlZiBlcnJvclJlamVjdGVkVGt0ID0gZmFsc2VcclxuXHJcbmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZHluYW1pY1Jpc2tzQXNzKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZHluYW1pY1Jpc2tzQXNzKSAhPSBcIlwiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGR5bmFtaWNSaXNrc0FzcykudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpe1xyXG4gICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovXHJcbiAgICAvL2luc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHNcclxuICAgIENsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTsgIFxyXG4gICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XHJcbiAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xyXG4gICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XHJcblxyXG4gICAgZGVmIHJpc2tzQXNzZXNzbWVudCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZHluYW1pY1Jpc2tzQXNzKVxyXG4gICAgZGVmIGRyYTUsIGRyYTZcclxuXHJcbiAgICBmb3IoaSBpbiByaXNrc0Fzc2Vzc21lbnQpe1xyXG4gICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdFxyXG4gICAgICAgIGRlZiByaXNrPWkudG9TdHJpbmcoKVxyXG4gICAgICAgIGRlZiByaXNrS2V5ID0gcmlzay5zdWJzdHJpbmcocmlzay5sYXN0SW5kZXhPZignKCcpKzEscmlzay5sYXN0SW5kZXhPZignKScpKVxyXG4gICAgICAgIGRlZiByaXNrT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHJpc2tLZXkpXHJcblxyXG4gICAgICAgIGRlZiBvYlRyaWFnZVxyXG4gICAgICAgIFxyXG5cclxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ocmlza09iamVjdC5nZXRJZCgpLCBcIkRSQTVcIikhPW51bGwpe1xyXG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihyaXNrT2JqZWN0LmdldElkKCksIFwiRFJBNVwiKS5jcmVhdGVNdXRhYmxlKClcclxuICAgICAgICAgICAgZHJhNSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS52YWx1ZS50b1N0cmluZygpXHJcbiAgICAgICAgICAgIGlmKGRyYTUuZXF1YWxzKFwiTk9cIikpe1xyXG4gICAgICAgICAgICAgICAgZXJyb3JSZWplY3RlZFRrdD10cnVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihyaXNrT2JqZWN0LmdldElkKCksIFwiRFJBNlwiKSE9bnVsbCl7XHJcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHJpc2tPYmplY3QuZ2V0SWQoKSwgXCJEUkE2XCIpLmNyZWF0ZU11dGFibGUoKVxyXG4gICAgICAgICAgICBkcmE2ID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLnZhbHVlLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgaWYoZHJhNi5lcXVhbHMoXCJOT1wiKSl7XHJcbiAgICAgICAgICAgICAgICBlcnJvclJlamVjdGVkVGt0PXRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZXJyb3JSZWplY3RlZFRrdFxyXG59ZWxzZXtcclxuICAgIHJldHVybiBmYWxzZVxyXG59XHJcbiIsInNjcmlwdFBhdGgiOm51bGx9</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_TRANSITION_OPTIONS"></arg>
              <arg name="events"></arg>
              <arg name="FIELD_ADDITIONAL_SCRIPT"></arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
    <action id="201" name="Start Maintenance">
      <meta name="jira.description"></meta>
      <meta name="jira.fieldscreen.id"></meta>
      <restrict-to>
        <conditions>
          <condition type="class">
            <arg name="FIELD_FUNCTION_ID">a0e36b7d-84dd-4008-9e6c-fb58e808a064</arg>
            <arg name="FIELD_NOTES">YCFgRW5hYmxlZCBvbmx5IGlmIHBhcmVudCB0YXNrIGlzICJJbiBQcm9ncmVzcyIgQU5EIE9QX1RLVF9BU1NJR05FRF9UTyA9IEFTU0lTVEFOVCBBTkQgTk8gUmlza3MgQXNzZXNzbWVudCByZXF1aXJlZCAtLSBPUiBpZiBjdXJyZW50IHN0YXR1cyBpcyBSaXNrcyBBc3Nlc3NtZW50IEFORCBPUF9US1RfQVNTSUdORURfVE8gPSBBU1NJU1RBTlQgLS0gLypPUiBpZiBwYXJlbnQgdGFzayBpcyAiSW4gUHJvZ3Jlc3MiIEFORCBOTyBSaXNrcyBBc3Nlc3NtZW50IHJlcXVpcmVkKi8=</arg>
            <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
            <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXHJcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvblxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxyXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvbkJ1aWxkZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXHJcbmltcG9ydCBqYXZhLnRleHQuU2ltcGxlRGF0ZUZvcm1hdDtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZVxyXG5cclxuZGVmIGFzc2lnbmVkVG8gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEtUX0FTU0lHTkVEX1RPXCIpWzBdXHJcbmRlZiBwbU9wZXJhdGlvbnMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfUE1fT1BFUkFUSU9OU19PRFNcIilbMF1cclxuZGVmIHJpc2tzQXNzZXNzbWVudCA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0FTU0VUX1JJU0tTX0FTU0VTU01FTlRcIilbMF1cclxuLy9sb2cuZGVidWcgXCJpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2lnbmVkVG8pOiBcIiArIGlzc3VlLmdldFBhcmVudE9iamVjdCgpLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzaWduZWRUbylcclxuXHJcbi8vbG9nLmRlYnVnICgoaXNzdWUucGFyZW50T2JqZWN0Py5zdGF0dXM/Lm5hbWUudG9TdHJpbmcoKS5lcXVhbHMoXCJGaW5hbGl6aW5nIFdvcmtcIikgfHwgaXNzdWUucGFyZW50T2JqZWN0Py5zdGF0dXM/Lm5hbWUudG9TdHJpbmcoKS5lcXVhbHMoXCJJbiBQcm9ncmVzc1wiKSkgJiYgaXNzdWUuZ2V0UGFyZW50T2JqZWN0KCkuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NpZ25lZFRvKSAhPSBudWxsICYmIGlzc3VlLmdldFBhcmVudE9iamVjdCgpLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzaWduZWRUbykudG9TdHJpbmcoKS5lcXVhbHMoXCJBU1NJU1RBTlRcIikpXHJcblxyXG4oaXNzdWUuc3RhdHVzLm5hbWUgPT0gXCJSaXNrcyBBc3Nlc3NtZW50XCIgJiYgaXNzdWUuZ2V0UGFyZW50T2JqZWN0KCkuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NpZ25lZFRvKSAhPSBudWxsICYmIGlzc3VlLmdldFBhcmVudE9iamVjdCgpLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzaWduZWRUbykudG9TdHJpbmcoKS5lcXVhbHMoXCJBU1NJU1RBTlRcIikpIHx8XHJcbi8qKChpc3N1ZS5wYXJlbnRPYmplY3Q/LnN0YXR1cz8ubmFtZS50b1N0cmluZygpLmVxdWFscyhcIkZpbmFsaXppbmcgV29ya1wiKSB8fCBpc3N1ZS5wYXJlbnRPYmplY3Q/LnN0YXR1cz8ubmFtZS50b1N0cmluZygpLmVxdWFscyhcIkluIFByb2dyZXNzXCIpKSAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJpc2tzQXNzZXNzbWVudCkgPT0gbnVsbCkgfHwgKi9cclxuKChpc3N1ZS5wYXJlbnRPYmplY3Q/LnN0YXR1cz8ubmFtZS50b1N0cmluZygpLmVxdWFscyhcIkZpbmFsaXppbmcgV29ya1wiKSB8fCBpc3N1ZS5wYXJlbnRPYmplY3Q/LnN0YXR1cz8ubmFtZS50b1N0cmluZygpLmVxdWFscyhcIkluIFByb2dyZXNzXCIpKSAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJpc2tzQXNzZXNzbWVudCkgPT0gbnVsbCAmJiBpc3N1ZS5nZXRQYXJlbnRPYmplY3QoKS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2lnbmVkVG8pICE9IG51bGwgJiYgaXNzdWUuZ2V0UGFyZW50T2JqZWN0KCkuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NpZ25lZFRvKS50b1N0cmluZygpLmVxdWFscyhcIkFTU0lTVEFOVFwiKSkiLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
            <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
            <arg name="FIELD_PREVIEW_ISSUE">AAS-153459</arg>
          </condition>
        </conditions>
      </restrict-to>
      <validators>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">1e7898cd-ceab-4ba0-955d-6b0604bf8c9b</arg>
          <arg name="FIELD_NOTES">YCFgQ2hlY2sgUE0gb3BlcmF0aW9ucyBvbiBQTSB0YXNrICYmIFJlcXVpcmVkIGZpZWxkcyBpZiBSSVNLU19BU1NFU1NNRU5UIE5PVCBOVUxM</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXHJcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvblxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxyXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvbkJ1aWxkZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXHJcbmltcG9ydCBqYXZhLnRleHQuU2ltcGxlRGF0ZUZvcm1hdDtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZVxyXG5cclxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxyXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxyXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xyXG5cdHByb3BlcnRpZXMubG9hZChpdClcclxufVxyXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcclxuXHJcbi8vSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpXHJcbi8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtNDE1OVwiKVxyXG5cclxubG9nLmRlYnVnIFwiVHJhbnNhemlvbmUgQ29tcGxldGUgLSBQcmltbyB2YWxpZGF0b3JcIlxyXG5sb2cuZGVidWcgXCJUcmFuc2F6aW9uZSBDb21wbGV0ZSAtIFByaW1vIHZhbGlkYXRvciAtIElzc3VlOiBcIiArIGlzc3VlXHJcblxyXG5kZWYgZXJyb3JzID0gZmFsc2VcclxuZGVmIHdhcm5pbmdzID0gZmFsc2VcclxuZGVmIG1pc3NpbmdQTW9wZXJhdGlvbnMgPSBmYWxzZVxyXG5cclxuZGVmIHBtT3BlcmF0aW9ucyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9QTV9PUEVSQVRJT05TX09EU1wiKVswXVxyXG5kZWYgYXNzaWduZWRUbyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9US1RfQVNTSUdORURfVE9cIilbMF1cclxuXHJcbmxvZy5kZWJ1ZyBcImlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocG1PcGVyYXRpb25zKTogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBtT3BlcmF0aW9ucylcclxubG9nLmRlYnVnIFwiaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NpZ25lZFRvKTogXCIgKyBpc3N1ZS5nZXRQYXJlbnRPYmplY3QoKS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2lnbmVkVG8pXHJcbmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocG1PcGVyYXRpb25zKT09bnVsbCAmJiAhaXNzdWUuZ2V0UGFyZW50T2JqZWN0KCkuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NpZ25lZFRvKS50b1N0cmluZygpLmVxdWFscyhcIkFTU0lTVEFOVFwiKSl7XHJcbiAgICBlcnJvcnM9dHJ1ZVxyXG4gICAgbWlzc2luZ1BNb3BlcmF0aW9ucz10cnVlXHJcbn1cclxuXHJcbmRlZiB0cmFuc2l0aW9uQ2hlY2sgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmNoZWNrQW5kQ29uZmlybSddLnRvU3RyaW5nKCkpWzBdXHJcbmRlZiBkeW5hbWljUmlza3NBc3MgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfQVNTRVRfUklTS1NfQVNTRVNTTUVOVFwiKVswXVxyXG5cclxuZGVmIGVycm9yTWFuZGF0b3J5RmllbGRzID0gbmV3IEFycmF5TGlzdCgpXHJcbmRlZiBlcnJvclJlamVjdGVkVGt0ID0gZmFsc2VcclxuXHJcbmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZHluYW1pY1Jpc2tzQXNzKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZHluYW1pY1Jpc2tzQXNzKSAhPSBcIlwiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGR5bmFtaWNSaXNrc0FzcykudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpe1xyXG4gICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovXHJcbiAgICAvL2luc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHNcclxuICAgIENsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTsgIFxyXG4gICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XHJcbiAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xyXG4gICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XHJcblxyXG4gICAgZGVmIHJpc2tzQXNzZXNzbWVudCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZHluYW1pY1Jpc2tzQXNzKVxyXG4gICAgZGVmIGRyYTUsIGRyYTZcclxuICAgIGxvZy5kZWJ1ZyBcInJpc2tzQXNzZXNzbWVudDogXCIgKyByaXNrc0Fzc2Vzc21lbnRcclxuICAgIGZvcihpIGluIHJpc2tzQXNzZXNzbWVudCl7XHJcbiAgICAgICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0XHJcbiAgICAgICAgZGVmIHJpc2s9aS50b1N0cmluZygpXHJcbiAgICAgICAgZGVmIHJpc2tLZXkgPSByaXNrLnN1YnN0cmluZyhyaXNrLmxhc3RJbmRleE9mKCcoJykrMSxyaXNrLmxhc3RJbmRleE9mKCcpJykpXHJcbiAgICAgICAgZGVmIHJpc2tPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4ocmlza0tleSlcclxuXHJcbiAgICAgICAgZGVmIG9iVHJpYWdlXHJcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHJpc2tPYmplY3QuZ2V0SWQoKSwgXCJEUkExXCIpPT1udWxsKXtcclxuICAgICAgICAgICAgZXJyb3JzPXRydWVcclxuICAgICAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKFwiRHluYW1pYyBSaXNrIEFzc2Vzc21lbnQgQ29tcGxldGVkIGZvciB0aGUgam9iXCIpXHJcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChEeW5hbWljIFJpc2sgQXNzZXNzbWVudCBDb21wbGV0ZWQgZm9yIHRoZSBqb2IpXCJcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihyaXNrT2JqZWN0LmdldElkKCksIFwiRFJBMlwiKT09bnVsbCl7XHJcbiAgICAgICAgICAgIGVycm9ycz10cnVlXHJcbiAgICAgICAgICAgIGVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChcIkFsbCBoYXphcmRzIGNvdmVyZWQgYnkgdGhlIFJpc2sgQXNzZXNzbWVudD9cIilcclxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKEFsbCBoYXphcmRzIGNvdmVyZWQgYnkgdGhlIFJpc2sgQXNzZXNzbWVudD8pXCJcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihyaXNrT2JqZWN0LmdldElkKCksIFwiRFJBMlwiKSE9bnVsbCAmJiBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ocmlza09iamVjdC5nZXRJZCgpLCBcIkRSQTJcIikuY3JlYXRlTXV0YWJsZSgpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS52YWx1ZS50b1N0cmluZygpPT1cIk5PXCIgJiYgKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihyaXNrT2JqZWN0LmdldElkKCksIFwiRFJBM1wiKT09bnVsbCB8fCBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ocmlza09iamVjdC5nZXRJZCgpLCBcIkRSQTNcIikudG9TdHJpbmcoKT09XCJcIiApKXtcclxuICAgICAgICAgICAgZXJyb3JzPXRydWVcclxuICAgICAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKFwiQ29tcGxldGUgYWRkaXRpb25hbCBvdXRsaW5pbmcgaGF6YXJkcyBhbmQgY29udHJvbCBtZWFzdXJlc1wiKVxyXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQoQ29tcGxldGUgYWRkaXRpb25hbCBvdXRsaW5pbmcgaGF6YXJkcyBhbmQgY29udHJvbCBtZWFzdXJlcylcIlxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHJpc2tPYmplY3QuZ2V0SWQoKSwgXCJEUkE0XCIpPT1udWxsKXtcclxuICAgICAgICAgICAgZXJyb3JzPXRydWVcclxuICAgICAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKFwiTWV0aG9kIFN0YXRlbWVudCBhdmFpbGFibGUgZm9yIHRoZSBqb2I/XCIpXHJcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChNZXRob2QgU3RhdGVtZW50IGF2YWlsYWJsZSBmb3IgdGhlIGpvYj8pXCJcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihyaXNrT2JqZWN0LmdldElkKCksIFwiRFJBNVwiKT09bnVsbCl7XHJcbiAgICAgICAgICAgIGVycm9ycz10cnVlXHJcbiAgICAgICAgICAgIGVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChcIkRvIHlvdSBoYXZlIHRoZSBjb3JyZWN0IHRvb2xzIGFuZCBQUEUgdG8gY2Fycnkgb3V0IHRoZSB0YXNrP1wiKVxyXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQoRG8geW91IGhhdmUgdGhlIGNvcnJlY3QgdG9vbHMgYW5kIFBQRSB0byBjYXJyeSBvdXQgdGhlIHRhc2s/KVwiXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHJpc2tPYmplY3QuZ2V0SWQoKSwgXCJEUkE1XCIpLmNyZWF0ZU11dGFibGUoKVxyXG4gICAgICAgICAgICBkcmE1ID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLnZhbHVlLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgaWYoZHJhNS5lcXVhbHMoXCJOT1wiKSl7XHJcbiAgICAgICAgICAgICAgICBlcnJvclJlamVjdGVkVGt0PXRydWVcclxuICAgICAgICAgICAgICAgIHdhcm5pbmdzPXRydWVcclxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImRyYTU6IFwiICsgZHJhNVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ocmlza09iamVjdC5nZXRJZCgpLCBcIkRSQTZcIik9PW51bGwpe1xyXG4gICAgICAgICAgICBlcnJvcnM9dHJ1ZVxyXG4gICAgICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQoXCJEbyB5b3UgaGF2ZSBhbGwgdGhlIGluZm9ybWF0aW9uIGFuZCB0cmFpbmluZyB0byBjb21wbGV0ZSB0aGUgdGFzaz9cIilcclxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKERvIHlvdSBoYXZlIGFsbCB0aGUgaW5mb3JtYXRpb24gYW5kIHRyYWluaW5nIHRvIGNvbXBsZXRlIHRoZSB0YXNrPylcIlxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihyaXNrT2JqZWN0LmdldElkKCksIFwiRFJBNlwiKS5jcmVhdGVNdXRhYmxlKClcclxuICAgICAgICAgICAgZHJhNiA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS52YWx1ZS50b1N0cmluZygpXHJcbiAgICAgICAgICAgIGlmKGRyYTYuZXF1YWxzKFwiTk9cIikpe1xyXG4gICAgICAgICAgICAgICAgZXJyb3JSZWplY3RlZFRrdD10cnVlXHJcbiAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlXHJcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJkcmE2OiBcIiArIGRyYTZcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbG9nLmRlYnVnIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKVxyXG4gICAgICAgIGxvZy5kZWJ1ZyBlcnJvck1hbmRhdG9yeUZpZWxkc1xyXG5cclxuICAgIH1cclxufVxyXG5cclxuXHJcbmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcclxuXHJcbmlmICghZXJyb3JzICYmICF3YXJuaW5ncyl7XHJcbiAgICByZXR1cm4gdHJ1ZVxyXG59ZWxzZXtcclxuICAgIGlmKCFlcnJvcnMgJiYgd2FybmluZ3Mpe1xyXG4gICAgICAgIC8vU2UgY2kgc29ubyBzb2xvIHdhcm5pbmdzIHZlcmlmaWNvIHNlIGwndXRlbnRlIGhhIGdpXHUwMGUwIGRpY2hpYXJhdG8gZGkgdm9sZXIgcHJvc2VndWlyZSBjb211bnF1ZVxyXG4gICAgICAgIC8vIC0gdHJhbnNpdGlvbiBmaWVsZCBcIk9QQUFfQ0hFQ0tfQU5EX0NPTkZJUk1cIj1cIlllc1wiXHJcbiAgICAgICAgLy8gLSBpbiBjYXNvIGNvbnRyYXJpbyBpbnZpbyBpIHdhcm5pbmcgYSBGRVxyXG5cclxuICAgICAgICAvL2xvZy5kZWJ1ZyBcInRyYW5zaXRpb25DaGVjazogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaylcclxuICAgICAgICAvL2xvZy5kZWJ1ZyBcInJlc3VsdDogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIilcclxuICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIikpe1xyXG4gICAgICAgICAgICAvL2xvZy5kZWJ1ZyBcInJldHVybiB0cnVlXCJcclxuICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgZGVmIHdMaXN0ID0gbmV3IEFycmF5TGlzdCgpXHJcblxyXG4gICAgICAgICAgICBpZihlcnJvclJlamVjdGVkVGt0KXtcclxuICAgICAgICAgICAgICAgIGRlZiBlTGlzdFJlamVjdGVkID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgICAgICAgICBlTGlzdFJlamVjdGVkLmFkZChcIldcIilcclxuICAgICAgICAgICAgICAgIGVMaXN0UmVqZWN0ZWQuYWRkKFwiUkVKRUNURURfRFVFX1RPX1JJU0tTX0FTU0VTU01FTlRcIilcclxuICAgICAgICAgICAgICAgIGVMaXN0UmVqZWN0ZWQuYWRkKG51bGwpXHJcbiAgICAgICAgICAgICAgICB3TGlzdC5hZGQoZUxpc3RSZWplY3RlZClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KVxyXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJ0aHJvdyBleGNlcHRpb246IFwiICsgb3V0cHV0LnRvU3RyaW5nKClcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiV1wiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXHJcbiAgICAgICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIldcIiwgb3V0cHV0LnRvU3RyaW5nKCkpICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuICAgIGlmKGVycm9ycyAmJiAhd2FybmluZ3Mpe1xyXG4gICAgICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxyXG5cclxuICAgICAgICBpZihlcnJvck1hbmRhdG9yeUZpZWxkcy5zaXplKCkgPiAwKXtcclxuICAgICAgICAgICAgZGVmIGVMaXN0TWFuZGF0b3J5ID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChcIkVcIilcclxuICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKFwiTUFOREFUT1JZX0ZJRUxEU1wiKVxyXG4gICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQobnVsbClcclxuICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKGVycm9yTWFuZGF0b3J5RmllbGRzKVxyXG4gICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RNYW5kYXRvcnkpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihtaXNzaW5nUE1vcGVyYXRpb25zKXtcclxuICAgICAgICAgICAgZGVmIGVMaXN0U3ViVGFza0NvbXBsZXRlZCA9IG5ldyBBcnJheUxpc3QoKVxyXG4gICAgICAgICAgICBlTGlzdFN1YlRhc2tDb21wbGV0ZWQuYWRkKFwiRVwiKVxyXG4gICAgICAgICAgICBlTGlzdFN1YlRhc2tDb21wbGV0ZWQuYWRkKFwiTUlTU0lOR19QTV9PUEVSQVRJT05TXCIpXHJcbiAgICAgICAgICAgIGVMaXN0U3ViVGFza0NvbXBsZXRlZC5hZGQobnVsbClcclxuICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0U3ViVGFza0NvbXBsZXRlZClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXHJcbiAgICAgICAgbG9nLmRlYnVnIFwidGhyb3cgZXhjZXB0aW9uOiBcIiArIG91dHB1dC50b1N0cmluZygpXHJcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXHJcbiAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKFwiRVwiLCBvdXRwdXQudG9TdHJpbmcoKSkgIFxyXG5cclxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxyXG4gICAgICAgIGxvZy5kZWJ1ZyBcInRocm93IGV4Y2VwdGlvbjogXCIgKyBvdXRwdXQudG9TdHJpbmcoKVxyXG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxyXG4gICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIkVcIiwgb3V0cHV0LnRvU3RyaW5nKCkpICAgXHJcbiAgICB9XHJcbiAgICBpZihlcnJvcnMgJiYgd2FybmluZ3Mpe1xyXG4gICAgICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxyXG4gICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKVxyXG4gICAgICAgIGlmKGVycm9yTWFuZGF0b3J5RmllbGRzLnNpemUoKSA+IDApe1xyXG4gICAgICAgICAgICBkZWYgZUxpc3RNYW5kYXRvcnkgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKFwiRVwiKVxyXG4gICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoXCJNQU5EQVRPUllfRklFTERTXCIpXHJcbiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChudWxsKVxyXG4gICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoZXJyb3JNYW5kYXRvcnlGaWVsZHMpXHJcbiAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdE1hbmRhdG9yeSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKGVycm9yUmVqZWN0ZWRUa3Qpe1xyXG4gICAgICAgICAgICBkZWYgZUxpc3RSZWplY3RlZCA9IG5ldyBBcnJheUxpc3QoKVxyXG4gICAgICAgICAgICBlTGlzdFJlamVjdGVkLmFkZChcIldcIilcclxuICAgICAgICAgICAgZUxpc3RSZWplY3RlZC5hZGQoXCJSRUpFQ1RFRF9EVUVfVE9fUklTS1NfQVNTRVNTTUVOVFwiKVxyXG4gICAgICAgICAgICBlTGlzdFJlamVjdGVkLmFkZChudWxsKVxyXG4gICAgICAgICAgICB3TGlzdC5hZGQoZUxpc3RSZWplY3RlZClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKG1pc3NpbmdQTW9wZXJhdGlvbnMpe1xyXG4gICAgICAgICAgICBkZWYgZUxpc3RTdWJUYXNrQ29tcGxldGVkID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgICAgIGVMaXN0U3ViVGFza0NvbXBsZXRlZC5hZGQoXCJFXCIpXHJcbiAgICAgICAgICAgIGVMaXN0U3ViVGFza0NvbXBsZXRlZC5hZGQoXCJNSVNTSU5HX1BNX09QRVJBVElPTlNcIilcclxuICAgICAgICAgICAgZUxpc3RTdWJUYXNrQ29tcGxldGVkLmFkZChudWxsKVxyXG4gICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RTdWJUYXNrQ29tcGxldGVkKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcclxuICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KVxyXG4gICAgICAgIGxvZy5kZWJ1ZyBcInRocm93IGV4Y2VwdGlvbjogXCIgKyBvdXRwdXQudG9TdHJpbmcoKVxyXG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIldFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcclxuICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJXRVwiLCBvdXRwdXQudG9TdHJpbmcoKSkgIFxyXG4gICAgfVxyXG59XHJcbiIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="disabled">true</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">e8c6556e-6560-4bee-8b97-fc1f556f1d4a</arg>
          <arg name="FIELD_NOTES">YCFgU0FQOiB1cGRhdGUgU04gc3RhdHVz</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XHJcbmltcG9ydCBncm9vdnkuanNvbi5TdHJlYW1pbmdKc29uQnVpbGRlcjtcclxuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxyXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XHJcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5XHJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXHJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxyXG5cclxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxyXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxyXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xyXG5cdHByb3BlcnRpZXMubG9hZChpdClcclxufVxyXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGlua1xyXG5cclxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xyXG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XHJcbmRlZiByZXF1ZXN0TWV0aG9kXHJcbmRlZiBiYXNlVVJMXHJcblxyXG5VUkwgdXJsXHJcbkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb25cclxuXHJcbnJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcclxuXHJcbmRlZiBib2R5X3JlcSA9IFtdXHJcbmJvZHlfcmVxID0gW1xyXG4gICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXHJcbiAgICBcInN0YXR1c1wiOiBcIklOUFwiXHJcbl0gXHJcblxyXG4gICAgXHJcbmJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL2FmdGVyL3NhbGVzL2NyZWF0ZS9zZXJ2aWNlL25vdGlmaWNhdGlvblwiXHJcblxyXG5sb2cuZGVidWcgXCJiYXNlVVJMIFNOOiBcIiArIGJhc2VVUkxcclxubG9nLmRlYnVnIFwiYm9keV9yZXEgU046IFwiICsgYm9keV9yZXFcclxudXJsID0gbmV3IFVSTChiYXNlVVJMKVxyXG5jb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xyXG5jb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XHJcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xyXG5jb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcclxuY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcclxuY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xyXG5jb25uZWN0aW9uLm91dHB1dFN0cmVhbVxyXG5jb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XHJcbmxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxyXG5jb25uZWN0aW9uLmNvbm5lY3QoKTtcclxuXHJcbmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcclxuZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXHJcbmRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxyXG5kZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXHJcblxyXG5pZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikgJiYgIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDFcIikpe1xyXG4gICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxyXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxyXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxyXG4gICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxyXG4gICAgZUxpc3RFcnJvcnMuYWRkKFwiU05fVVBEQVRFXCIpXHJcbiAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkpXHJcbiAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxyXG4gICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxyXG5cclxuICAgIG91dHB1dC5hZGQoZUxpc3QpXHJcbiAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcclxufWVsc2V7XHJcbiAgICAvKiogU0VSVklDRSBPUkRFUiBDUkVBVElPTiAqKi9cclxuICAgIGJvZHlfcmVxID0gW1xyXG4gICAgICAgIFwiaXNzdWVLZXlcIjogaXNzdWUua2V5XHJcbiAgICBdIFxyXG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL29yL3VwZGF0ZS9zZXJ2aWNlL29yZGVyXCJcclxuXHJcbiAgICBsb2cuZGVidWcgXCJiYXNlVVJMIFNPOiBcIiArIGJhc2VVUkxcclxuICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNPOiBcIiArIGJvZHlfcmVxXHJcbiAgICB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXHJcbiAgICBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xyXG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xyXG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XHJcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcclxuICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XHJcbiAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XHJcbiAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxyXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxyXG4gICAgbG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXHJcbiAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcclxuXHJcbiAgICBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxyXG4gICAgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXHJcblxyXG4gICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAxXCIpICYmICFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcclxuICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXHJcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxyXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcclxuICAgICAgICBcclxuICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XHJcbiAgICAgICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xyXG4gICAgICAgIFxyXG4gICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXHJcbiAgICAgICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcclxuICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxyXG4gICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcclxuICAgICAgICBsb2cuZGVidWcgXCJlcnJvcnM6IFwiICsgIGpzb25fb2JqZWN0LmVycm9ycy50b1N0cmluZygpXHJcblxyXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcclxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJTT19DUkVBVEVcIilcclxuICAgICAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGpzb25fb2JqZWN0LmVycm9yc1swXSlcclxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxyXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcclxuXHJcbiAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcclxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcclxuICAgIH1cclxufSIsInNjcmlwdFBhdGgiOm51bGx9</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="disabled">true</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">07a8cfa1-a0bb-40df-90b6-40fdefc1ac46</arg>
          <arg name="FIELD_NOTES">YCFgT3BlcmF0aW9uUG9ydGFsIC0gQ2FsbCB0byBCRSB2YWxpZGF0b3I=</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGRcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5DdXN0b21GaWVsZE1hbmFnZXJcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS53b3JrZmxvdy5KaXJhV29ya2Zsb3dcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuc2NyZWVuLkZpZWxkU2NyZWVuTGF5b3V0SXRlbVxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5zY3JlZW4uRmllbGRTY3JlZW5UYWJcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuRmllbGRNYW5hZ2VyXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLnNjcmVlbi5GaWVsZFNjcmVlblxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5zY3JlZW4uRmllbGRTY3JlZW5NYW5hZ2VyXHJcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LmxvYWRlci5BY3Rpb25EZXNjcmlwdG9yXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEud29ya2Zsb3cuV29ya2Zsb3dNYW5hZ2VyXHJcbmltcG9ydCBncm9vdnkuanNvbi5TdHJlYW1pbmdKc29uQnVpbGRlclxyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcclxuXHJcbmRlZiBiYXNlVVJMXHJcbmRlZiByZXNwb25zZUJvZHlcclxuXHJcbnRyeSB7XHJcbiAgICBQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXHJcbiAgICBGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxyXG4gICAgcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcclxuICAgICAgICBwcm9wZXJ0aWVzLmxvYWQoaXQpXHJcbiAgICB9XHJcblxyXG4gICAgZGVmIHNlcnZlckJhc2UgPSBTdHJpbmcuZm9ybWF0KFwiaHR0cDovLyVzL29wXCIsIHByb3BlcnRpZXNbJ2FwaS5lbnYnXSlcclxuICAgIGRlZiB0cmFuc2FjdGlvbkFjdGlvbiA9IFwidmFsaWRhdG9yc1wiXHJcblxyXG4gICAgVVJMIHVybFxyXG4gICAgZGVmIHJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIlxyXG5cclxuICAgIGJhc2VVUkwgPSBTdHJpbmcuZm9ybWF0KFwiJXMvcmVzdC9qaXJhL3dvcmtmbG93cy8lcy8lc1wiLCBzZXJ2ZXJCYXNlLCB0cmFuc2llbnRWYXJzLmFjdGlvbklkLCB0cmFuc2FjdGlvbkFjdGlvbilcclxuXHJcbiAgICBsb2cuZGVidWcoXCJDb21wb3NpbmcgYmFzZVVSTCBhcyAnJHtiYXNlVVJMfSdcIilcclxuXHJcbiAgICBXb3JrZmxvd01hbmFnZXIgd29ya2Zsb3dNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0V29ya2Zsb3dNYW5hZ2VyKClcclxuICAgIEppcmFXb3JrZmxvdyBqaXJhV29ya2Zsb3cgPSB3b3JrZmxvd01hbmFnZXIuZ2V0V29ya2Zsb3codHJhbnNpZW50VmFycy5pc3N1ZSlcclxuXHJcbiAgICBDdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKClcclxuXHJcbiAgICBsb2cuZGVidWcoamlyYVdvcmtmbG93LmdldE5hbWUoKSlcclxuXHJcbiAgICBBY3Rpb25EZXNjcmlwdG9yIGFkID0gd29ya2Zsb3dNYW5hZ2VyLmdldEFjdGlvbkRlc2NyaXB0b3IodHJhbnNpZW50VmFycy5pc3N1ZSwgdHJhbnNpZW50VmFycy5hY3Rpb25JZClcclxuXHJcbiAgICBsb2cuZGVidWcoXCJBY3Rpb25EZXNjcmlwdG9yIE5hbWU6ICR7YWQuZ2V0TmFtZSgpfVwiKSAvLyBHZW5lcmEgUmFwcG9ydG8gZGkgSW50ZXJ2ZW50byBGQUFDXHJcbiAgICBsb2cuZGVidWcoXCJBY3Rpb25EZXNjcmlwdG9yIE1ldGFBdHRyczogJHthZC5nZXRNZXRhQXR0cmlidXRlcygpfVwiKSAvLyB7b3BzYmFyLXNlcXVlbmNlPTEwLCBqaXJhLmRlc2NyaXB0aW9uPSwgamlyYS5maWVsZHNjcmVlbi5pZD0xOTkxMH1cclxuXHJcbiAgICBkZWYgYWRNZXRhID0gYWQuZ2V0TWV0YUF0dHJpYnV0ZXMoKVxyXG4gICAgU3RyaW5nIGZpZWxkU2NyZWVuSWQgPSBhZE1ldGEuZ2V0KFwiamlyYS5maWVsZHNjcmVlbi5pZFwiKTtcclxuICAgIGxvZy5kZWJ1ZyhcIkZpZWxkIHNjcmVlbiBpZDogJHtmaWVsZFNjcmVlbklkfVwiKVxyXG5cclxuICAgIE1hcDxTdHJpbmcsIE9iamVjdD4gY3VzdG9tRmllbGRNYXAgPSBuZXcgSGFzaE1hcDw+KClcclxuICAgIGlmIChmaWVsZFNjcmVlbklkKSB7XHJcbiAgICAgICAgRmllbGRTY3JlZW5NYW5hZ2VyIGZpZWxkU2NyZWVuTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChGaWVsZFNjcmVlbk1hbmFnZXIuY2xhc3MpO1xyXG4gICAgICAgIEZpZWxkU2NyZWVuIGZpZWxkU2NyZWVuID0gZmllbGRTY3JlZW5NYW5hZ2VyLmdldEZpZWxkU2NyZWVuKExvbmcudmFsdWVPZihmaWVsZFNjcmVlbklkLnRvU3RyaW5nKCkpKTtcclxuICAgICAgICBMaXN0PEZpZWxkU2NyZWVuVGFiPiBmc3RzID0gZmllbGRTY3JlZW4uZ2V0VGFicygpO1xyXG4gICAgICAgIGZvciAoRmllbGRTY3JlZW5UYWIgZnN0OiBmc3RzKSB7XHJcbiAgICAgICAgICAgIExpc3Q8RmllbGRTY3JlZW5MYXlvdXRJdGVtPiBxd2UgPSBmc3QuZ2V0RmllbGRTY3JlZW5MYXlvdXRJdGVtcygpO1xyXG4gICAgICAgICAgICBmb3IgKEZpZWxkU2NyZWVuTGF5b3V0SXRlbSBmc2xpOiBxd2UpIHtcclxuICAgICAgICAgICAgICAgIGlmIChmc2xpLmdldEZpZWxkSWQoKSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBDdXN0b21GaWVsZCBjdXN0b21GaWVsZCA9IGN1c3RvbUZpZWxkTWFuYWdlci5nZXRDdXN0b21GaWVsZE9iamVjdChmc2xpLmdldEZpZWxkSWQoKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VzdG9tRmllbGQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGVmIGN1c3RvbUZpZWxkVmFsdWUgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1c3RvbUZpZWxkKTtcclxuICAgICAgICAgICAgICAgIGN1c3RvbUZpZWxkTWFwLnB1dChmc2xpLmdldEZpZWxkSWQoKSwgY3VzdG9tRmllbGRWYWx1ZSA9PSBudWxsID8gbnVsbCA6IGN1c3RvbUZpZWxkVmFsdWUudG9TdHJpbmcoKSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGxvZy5kZWJ1ZyhcImN1c3RvbUZpZWxkTWFwOiAke2N1c3RvbUZpZWxkTWFwfVwiKVxyXG5cclxuICAgIGRlZiBib2R5UmVxID0gW1xyXG4gICAgICAgIFwiaXNzdWVLZXlcIjogaXNzdWUua2V5LFxyXG4gICAgICAgIFwiYWN0aW9uTmFtZVwiOiBhZC5nZXROYW1lKCksXHJcbiAgICAgICAgXCJqaXJhV29ya2Zsb3dOYW1lXCI6IGppcmFXb3JrZmxvdy5nZXROYW1lKCksXHJcbiAgICAgICAgXCJjdXN0b21GaWVsZE1hcFwiOiBjdXN0b21GaWVsZE1hcCxcclxuICAgICAgICBcInByb3BlcnRpZXNcIjogcHJvcGVydGllc1xyXG4gICAgXVxyXG5cclxuICAgIGxvZy5kZWJ1ZyhcIkNhbGxpbmcgWyR7cmVxdWVzdE1ldGhvZH1dICR7YmFzZVVSTH0gd2l0aCBib2R5ICR7Ym9keVJlcX1cIilcclxuXHJcbiAgICB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXHJcbiAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKSB1cmwub3BlbkNvbm5lY3Rpb24oKVxyXG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpXHJcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKVxyXG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIilcclxuICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSlcclxuICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKVxyXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHtcclxuICAgICAgICBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlSZXEpXHJcbiAgICB9XHJcblxyXG4gICAgY29ubmVjdGlvbi5jb25uZWN0KClcclxuICAgIGRlZiByZXNwb25zZUNvZGUgPSBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKClcclxuXHJcbiAgICBsb2cuZGVidWcoXCJSZXNwb25zZSBIdHRwU3RhdHVzQ29kZTogJHtyZXNwb25zZUNvZGV9XCIpXHJcblxyXG4gICAgLy8gSWYgYmFja2VuZCByZXBsaWVzIHdpdGggMjAwIHRoZW4gdGhlIGNvbmRpdGlvbiBpcyBwYXNzZWRcclxuICAgIGlmIChcIjIwMFwiLmVxdWFscyhyZXNwb25zZUNvZGUpKSB7XHJcbiAgICAgICAgbG9nLmRlYnVnKFwiVmFsaWRhdG9yIHBhc3NlZCFcIilcclxuICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgIHJlc3BvbnNlQm9keSA9ICgoSHR0cFVSTENvbm5lY3Rpb24pIGNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHRcclxuICAgICAgICBsb2cuZGVidWcoXCJWYWxpZGF0b3Igbm90IHBhc3NlZCwgcmVzcG9uc2VCb2R5OiAke3Jlc3BvbnNlQm9keX1cIilcclxuXHJcbiAgICAgICAgLy8gdGVzdGluZyB3aXRob3V0IHJlZGVwbG95aW5nIGVhY2ggdGltZVxyXG4gICAgICAgIC8vcmVzcG9uc2VCb2R5ID0gJ3tcIldcIjogXCJbW1tXLCBDT05GSVJNX1JJU0tfQU5BTFlTSVMsIG51bGxdXV1cIn0nXHJcblxyXG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24ocmVzcG9uc2VCb2R5KVxyXG4gICAgfVxyXG59IGNhdGNoIChFeGNlcHRpb24gZSkge1xyXG4gICAgLy9UaGlzIGlzIGFuIGV4Y2VwdGlvbiBpbiB0aGUgc2NyaXB0XHJcbiAgICBsb2cuZGVidWcoXCJFeGNlcHRpb24gcmFpc2VkIGNhbGxpbmcgZW5kcG9pbnQgJHtiYXNlVVJMfVwiKVxyXG4gICAgbG9nLmVycm9yKGUpXHJcbiAgICBpZiAoZSBpbnN0YW5jZW9mIEludmFsaWRJbnB1dEV4Y2VwdGlvbikge1xyXG4gICAgICAgIHRocm93IGVcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjogXCJbW1sgVmFsaWRhdG9yIGZhaWxlZCBdXV1cIiB9JylcclxufSIsInNjcmlwdFBhdGgiOm51bGx9</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
      </validators>
      <results>
        <unconditional-result old-status="Not Done" status="Done" step="4">
          <post-functions>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">214ff8cf-8a1b-49c7-b960-9195e3954c57</arg>
              <arg name="FIELD_NOTES">YCFgQ3JlYXRlIG9iaiAiQ2hlY2tsaXN0IiAtIE5PVCBmb3IgQVNTSVNUQU5UIHRpY2tldHM=</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiIgaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3JcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZVxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZTtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5ldmVudC50eXBlLkV2ZW50RGlzcGF0Y2hPcHRpb247XHJcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkxldmVsXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyXHJcblxyXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXHJcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZSgnL3Zhci9hdGxhc3NpYW4vYXBwbGljYXRpb24tZGF0YS9zaGFyZWQvc2NyaXB0cy9vcHByb2plY3QucHJvcGVydGllcycpXHJcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XHJcblx0cHJvcGVydGllcy5sb2FkKGl0KVxyXG59XHJcbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cclxuQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyBcclxuZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XHJcbiAgXHJcbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBUeXBlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xyXG5DbGFzcyBvYmplY3RUeXBlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUZhY2FkZVwiKTsgXHJcbmRlZiBvYmplY3RUeXBlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVGYWNhZGVDbGFzcyk7XHJcbiAgXHJcbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBBdHRyaWJ1dGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXHJcbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpOyBcclxuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcclxuICBcclxuQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7IFxyXG5kZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XHJcbkNsYXNzIGlxbEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLklRTEZhY2FkZVwiKTsgXHJcbmRlZiBpcWxGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUoaXFsRmFjYWRlQ2xhc3MpO1xyXG5cclxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpXHJcbi8vaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMTk2OTM4XCIpXHJcblxyXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXHJcbmludCBEQk8gPSBwcm9wZXJ0aWVzWydpc2NoZW1hLmRiby5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuXHJcbmRlZiBhc3NldCA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0FTU0VUXCIpWzBdXHJcbmRlZiB0aWNrZXRWaXNLZXkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9US1RfVklTSUJJTElUWV9LRVlcIilbMF1cclxuZGVmIGNoZWNrbGlzdEZpZWxkID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfQVNTRVRfQ0hFQ0tMSVNUXCIpWzBdXHJcbmRlZiBhc3NpZ25lZFRvID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEtUX0FTU0lHTkVEX1RPXCIpWzBdXHJcblxyXG4vKjI3LjAxLjIwMjMgQUYgLSBNYXAgaXNzdWUgdHlwZSB0byBmaWx0ZXIgYXZhaWxhYmxlIGNoZWNrbGlzdHMqL1xyXG5kZWYgaXNzdWVUeXBlTWFwXHJcbmlmKGlzc3VlLmlzc3VlVHlwZS5uYW1lID09IFwiTWFpbnRlbmFuY2UgVGlja2V0XCIpe1xyXG4gICAgaXNzdWVUeXBlTWFwID0gXCJSRVBBSVJfVElDS0VUXCJcclxufVxyXG5pZihpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSBcIk5ldyBJbnN0YWxsYXRpb25cIil7XHJcbiAgICBpc3N1ZVR5cGVNYXAgPSBcIk5FV19JTlNUQUxMQVRJT05fVElDS0VUXCJcclxufVxyXG5pZihpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSBcIk1vZGVybml6YXRpb25cIil7XHJcbiAgICBpc3N1ZVR5cGVNYXAgPSBcIk1PREVSTklaQVRJT05cIlxyXG59XHJcbmlmKGlzc3VlLmlzc3VlVHlwZS5uYW1lID09IFwiUGxhbm5lZCBNYWludGVuYW5jZSBUYXNrXCIpe1xyXG4gICAgaXNzdWVUeXBlTWFwID0gXCJQTV9UQVNLXCJcclxufVxyXG4gICAgXHJcbi8vMzAuMDMuMjAyMiAtIG9yYSBtZXNzYSBjb25kaXppb25lIGZpc3NhIGluIGJhc2UgYWxsYSBjb21wYW55IGNvZGUsIGFnZ2l1bmdlcmUgZmxhZyBzdWxsJ29nZ2V0dG8gQ29tcGFueSBjaGUgbGEgYWJpbGl0aSBvIG1lbm8gYWxsYSBkeW5hbWljIHJpc2sgYXNzZXNzbWVudC4gU29sbyBzZSBsYSBjb21wYW55IHJlZmVyZW56aWF0YSBuZWxsYSB2aXNpYmlsaXR5IGtleSBcclxuLy9oYSBsYSBkeW5hbWljIHJpc2sgYXNzZXNzbWVudCBhdHRpdmEgZmFyZSBxdWFudG8gc290dG9cclxuLy8yNy4wMS4yMDIzIC0gQUYgLSB0b2x0YSBjb25kaXppb25lIGNoZSBsZWdhIGxhIGdlbmVyYXppb25lIGRlbGxhIGNoZWNrbGlzdCBhbCBjb2RpY2UgY29tcGFueSBvIGFsbGEgcHJlc2VuemEgZGVsbGEgZHluYW1pYyByaXNrcyBhc3Nlc3NtZW50IC0gc2UgY2kgc29ubyBlbGVtZW50aSBDaGVja2xpc3QgdmllbmUgY3JlYXRvLCB2aWNldmVyc2Egbm9uIHZpZW5lIGNyZWF0byBudWxsYVxyXG4vL2lmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGlja2V0VmlzS2V5KVswXS50b1N0cmluZygpLmNvbnRhaW5zKFwiMTE3OVwiKSB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRpY2tldFZpc0tleSlbMF0udG9TdHJpbmcoKS5jb250YWlucyhcIjEwNzhcIikpe1xyXG5cclxuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjaGVja2xpc3RGaWVsZCkgPT0gbnVsbCAmJiBpc3N1ZS5pc3N1ZVR5cGUubmFtZSAhPSBcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0XCIgJiYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzaWduZWRUbykgPT0gbnVsbCB8fCAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NpZ25lZFRvKS50b1N0cmluZygpLmVxdWFscyhcIkFTU0lTVEFOVFwiKSkpe1xyXG4gICAgbG9nLmluZm8gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldClbMF0udG9TdHJpbmcoKVxyXG4gICAgZGVmIGFzcz1pc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0KVswXS50b1N0cmluZygpXHJcbiAgICBkZWYgYXNzS2V5ID0gYXNzLnN1YnN0cmluZyhhc3MubGFzdEluZGV4T2YoJygnKSsxLGFzcy5sYXN0SW5kZXhPZignKScpKVxyXG4gICAgZGVmIGFzc05hbWUgPSBhc3Muc3Vic3RyaW5nKDAsYXNzLmxhc3RJbmRleE9mKCcoJyktMSlcclxuICAgIGRlZiBhc3NPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oYXNzS2V5KVxyXG4gICAgbG9nLmluZm8gXCJhc3NLZXk6IFwiICsgYXNzS2V5XHJcbiAgICBsb2cuaW5mbyAoXCJhc3NOYW1lOiBcIiArIGFzc05hbWUpXHJcbiAgICBsb2cuaW5mbyAoXCJhc3NPYmplY3Q6IFwiICsgYXNzT2JqZWN0KVxyXG4gICAgXHJcbiAgICBsb2cuaW5mbyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oYXNzT2JqZWN0LmdldElkKCksIFwiUFVCTElDX1BST0RVQ1RfVFlQRV9SRUZcIikudG9TdHJpbmcoKVxyXG4gICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oYXNzT2JqZWN0LmdldElkKCksIFwiUFVCTElDX1BST0RVQ1RfVFlQRV9SRUZcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICBwcm9kVHlwZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpXHJcbiAgICBsb2cuaW5mbyBwcm9kVHlwZS50b1N0cmluZygpXHJcblxyXG4gICAgbG9nLmluZm8gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0aWNrZXRWaXNLZXkpWzBdLnRvU3RyaW5nKClcclxuICAgIGRlZiB2aXM9aXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0aWNrZXRWaXNLZXkpWzBdLnRvU3RyaW5nKClcclxuICAgIGRlZiB2aXNLZXkgPSB2aXMuc3Vic3RyaW5nKHZpcy5sYXN0SW5kZXhPZignKCcpKzEsdmlzLmxhc3RJbmRleE9mKCcpJykpXHJcbiAgICBkZWYgb2JqZWN0cyA9IGlxbEZhY2FkZS5maW5kT2JqZWN0c0J5SVFMQW5kU2NoZW1hKE9QQUEsIFwib2JqZWN0VHlwZSA9IENoZWNrbGlzdHMgQU5EIElTU1VFX1RZUEUgSU4gKFwiICsgaXNzdWVUeXBlTWFwICsgXCIpIEFORCBQUk9EVUNUX1RZUEVfUkVGLktleSA9IERPLVwiICsgcHJvZFR5cGUudG9TdHJpbmcoKSArIFwiIEFORCBvYmplY3QgSEFWSU5HIG91dGJvdW5kUmVmZXJlbmNlcyhvYmplY3RUeXBlID0gQ29tcGFueSBBTkQgb2JqZWN0IEhBVklORyBpbmJvdW5kUmVmZXJlbmNlcyhvYmplY3RUeXBlID0gXFxcIlZpc2liaWxpdHkgS2V5XFxcIiBBTkQgS2V5ID0gXCIgKyB2aXNLZXkudG9TdHJpbmcoKSArIFwiKSlcIilcclxuICAgIGxvZy53YXJuIFwiaXFsOiBcIiArIFwib2JqZWN0VHlwZSA9IENoZWNrbGlzdHMgQU5EIElTU1VFX1RZUEUgSU4gKFwiICsgaXNzdWVUeXBlTWFwICsgXCIpIEFORCBQUk9EVUNUX1RZUEVfUkVGLktleSA9IERPLVwiICsgcHJvZFR5cGUudG9TdHJpbmcoKSArIFwiIEFORCBvYmplY3QgSEFWSU5HIG91dGJvdW5kUmVmZXJlbmNlcyhvYmplY3RUeXBlID0gQ29tcGFueSBBTkQgb2JqZWN0IEhBVklORyBpbmJvdW5kUmVmZXJlbmNlcyhvYmplY3RUeXBlID0gXFxcIlZpc2liaWxpdHkgS2V5XFxcIiBBTkQgS2V5ID0gXCIgKyB2aXNLZXkudG9TdHJpbmcoKSArIFwiKSlcIlxyXG5cclxuICAgIGlmKG9iamVjdHMuc2l6ZSgpID09IDApe1xyXG4gICAgICAgIG9iamVjdHMgPSBpcWxGYWNhZGUuZmluZE9iamVjdHNCeUlRTEFuZFNjaGVtYShPUEFBLCBcIm9iamVjdFR5cGUgPSBDaGVja2xpc3RzIEFORCBJU1NVRV9UWVBFIElOIChcIiArIGlzc3VlVHlwZU1hcCArIFwiKSBBTkQgREVGQVVMVCA9IHRydWUgQU5EIG9iamVjdCBIQVZJTkcgb3V0Ym91bmRSZWZlcmVuY2VzKG9iamVjdFR5cGUgPSBDb21wYW55IEFORCBvYmplY3QgSEFWSU5HIGluYm91bmRSZWZlcmVuY2VzKG9iamVjdFR5cGUgPSBcXFwiVmlzaWJpbGl0eSBLZXlcXFwiIEFORCBLZXkgPSBcIiArIHZpc0tleS50b1N0cmluZygpICsgXCIpKVwiKVxyXG4gICAgICAgIGxvZy53YXJuIFwiaXFsOiBcIiArIFwib2JqZWN0VHlwZSA9IENoZWNrbGlzdHMgQU5EIElTU1VFX1RZUEUgSU4gKFwiICsgaXNzdWVUeXBlTWFwICsgXCIpIEFORCBERUZBVUxUID0gdHJ1ZSBBTkQgb2JqZWN0IEhBVklORyBvdXRib3VuZFJlZmVyZW5jZXMob2JqZWN0VHlwZSA9IENvbXBhbnkgQU5EIG9iamVjdCBIQVZJTkcgaW5ib3VuZFJlZmVyZW5jZXMob2JqZWN0VHlwZSA9IFxcXCJWaXNpYmlsaXR5IEtleVxcXCIgQU5EIEtleSA9IFwiICsgdmlzS2V5LnRvU3RyaW5nKCkgKyBcIikpXCJcclxuICAgIH1cclxuXHJcbiAgICBpZihvYmplY3RzKXtcclxuICAgICAgICBsb2cuaW5mbyBvYmplY3RzWzBdLnRvU3RyaW5nKClcclxuICAgICAgICBcclxuICAgICAgICBsb2cuaW5mbyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ob2JqZWN0c1swXS5nZXRJZCgpLCBcIkNIRUNLTElTVF9OQU1FXCIpLnRvU3RyaW5nKClcclxuICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihvYmplY3RzWzBdLmdldElkKCksIFwiQ0hFQ0tMSVNUX05BTUVcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICAgICAgY2hlY2tsaXN0ID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKClcclxuICAgICAgICBsb2cuaW5mbyBjaGVja2xpc3QudG9TdHJpbmcoKS5yZXBsYWNlQWxsKCcgLSAnLCcnKS5yZXBsYWNlQWxsKCcgJywnJylcclxuICAgICAgICBcclxuICAgICAgICBkZWYgbmV3T2JqSWQgPSBwcm9wZXJ0aWVzWydpb2JqLicgKyBjaGVja2xpc3QudG9TdHJpbmcoKS5yZXBsYWNlQWxsKCcgLSAnLCcnKS5yZXBsYWNlQWxsKCcgJywnJykgKyAnLmlkJ10udG9JbnRlZ2VyKClcclxuICAgICAgICBsb2cuaW5mbyBcImlkOiBcIiArIHByb3BlcnRpZXNbJ2lvYmouJyArIGNoZWNrbGlzdC50b1N0cmluZygpLnJlcGxhY2VBbGwoJyAtICcsJycpLnJlcGxhY2VBbGwoJyAnLCcnKSArICcuaWQnXS50b1N0cmluZygpXHJcbiAgICAgICAgZGVmIG5ld09iak5hbWVJZCA9IHByb3BlcnRpZXNbJ2lvYmouJyArIGNoZWNrbGlzdC50b1N0cmluZygpLnJlcGxhY2VBbGwoJyAtICcsJycpLnJlcGxhY2VBbGwoJyAnLCcnKSArICcuTmFtZS5pZCddLnRvSW50ZWdlcigpXHJcbiAgICAgICAgZGVmIG5ld09iakNvbXBsZXRlZElkID0gcHJvcGVydGllc1snaW9iai4nICsgY2hlY2tsaXN0LnRvU3RyaW5nKCkucmVwbGFjZUFsbCgnIC0gJywnJykucmVwbGFjZUFsbCgnICcsJycpICsgJy5jb21wbGV0ZWQuaWQnXS50b0ludGVnZXIoKVxyXG4gICAgICAgIGxvZy5pbmZvIG5ld09iak5hbWVJZC50b1N0cmluZygpXHJcbiAgICAgICAgXHJcbiAgICAgICAgZGVmIGNoZWNrbGlzdE9iamVjdHMgPSBuZXcgQXJyYXlMaXN0KCk7XHJcbiAgICAgICAgZGVmIG9iamVjdEF0dHJpYnV0ZUJlYW5zID0gbmV3IEFycmF5TGlzdCgpO1xyXG4gICAgICAgIGRlZiBuYW1lT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihuZXdPYmpOYW1lSWQpOyBcclxuICAgICAgICBkZWYgY29tcGxldGVkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihuZXdPYmpDb21wbGV0ZWRJZCk7IFxyXG4gICAgICAgIFxyXG4gICAgICAgIGRlZiBvYmplY3RUeXBlQ2hlY2tsaXN0ID0gb2JqZWN0VHlwZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUJlYW4obmV3T2JqSWQpO1xyXG4gICAgICAgIGRlZiBuZXdPYmplY3RCZWFuID0gb2JqZWN0VHlwZUNoZWNrbGlzdC5jcmVhdGVNdXRhYmxlT2JqZWN0QmVhbigpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIG9iamVjdEF0dHJpYnV0ZUJlYW5zLmFkZChvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeS5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuRm9yT2JqZWN0KG5ld09iamVjdEJlYW4sIG5hbWVPYmplY3RUeXBlQXR0cmlidXRlQmVhbiwgaXNzdWUua2V5LnRvU3RyaW5nKCkpKTtcclxuICAgICAgICBvYmplY3RBdHRyaWJ1dGVCZWFucy5hZGQob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkuY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbkZvck9iamVjdChuZXdPYmplY3RCZWFuLCBjb21wbGV0ZWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbiwgXCJmYWxzZVwiKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbmV3T2JqZWN0QmVhbi5zZXRPYmplY3RBdHRyaWJ1dGVCZWFucyhvYmplY3RBdHRyaWJ1dGVCZWFucyk7XHJcbiAgICAgICAgLyogU3RvcmUgdGhlIG9iamVjdCBpbnRvIEluc2lnaHQuIFRoZSBuZXcgT2JqZWN0QmVhbiB3aWxsIGJlIHVwZGF0ZWQgd2l0aCBhbiB1bmlxdWUgSUQgKi9cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBuZXdPYmplY3RCZWFuID0gb2JqZWN0RmFjYWRlLnN0b3JlT2JqZWN0QmVhbihuZXdPYmplY3RCZWFuKTtcclxuICAgICAgICAgICAgbG9nLndhcm4oXCJuZXdPYmplY3RCZWFuOiBcIiArIG5ld09iamVjdEJlYW4pO1xyXG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHtcclxuICAgICAgICAgICAgbG9nLndhcm4oXCJDb3VsZCBub3QgY3JlYXRlIGlzc3VlIGR1ZSB0byB2YWxpZGF0aW9uIGV4Y2VwdGlvbjpcIiArIHZpZS5nZXRNZXNzYWdlKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjaGVja2xpc3RPYmplY3RzLmFkZChuZXdPYmplY3RCZWFuKVxyXG4gICAgICAgIFxyXG4gICAgICAgIGxvZy5pbmZvIChcImNoZWNrbGlzdE9iamVjdHM6IFwiICsgY2hlY2tsaXN0T2JqZWN0cylcclxuICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIWNoZWNrbGlzdE9iamVjdHMuaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgICAgIE11dGFibGVJc3N1ZSBtaSA9IChNdXRhYmxlSXNzdWUpIGlzc3VlO1xyXG4gICAgICAgICAgICBtaS5zZXRDdXN0b21GaWVsZFZhbHVlKGNoZWNrbGlzdEZpZWxkLCBjaGVja2xpc3RPYmplY3RzKTtcclxuICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSAgICAgIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
            </function>
            <function type="class">
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdateissuestatus-function</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowcreatecomment-function</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowgeneratechangehistory-function</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowreindexissue-function</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">0beb416e-cd06-497d-8927-d550c9363082</arg>
              <arg name="FIELD_ACTION">141 Eseguita con cartaceo</arg>
              <arg name="FIELD_NOTES">YCFgQXV0b21hdGljYWxseSBSZWplY3QgdGt0cyBiYXNlZCBvbiBEeW5hbWljIFJpc2tzIEFzc2Vzc21lbnQgcmVzdWx0</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.FasttrackTransition</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.FasttrackTransition</arg>
              <arg name="disabled">true</arg>
              <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXHJcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvblxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxyXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvbkJ1aWxkZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXHJcbmltcG9ydCBqYXZhLnRleHQuU2ltcGxlRGF0ZUZvcm1hdDtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZVxyXG5cclxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxyXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxyXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xyXG4gICAgcHJvcGVydGllcy5sb2FkKGl0KVxyXG59XHJcbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxyXG5cclxuLy9Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKClcclxuLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy00MTc1NVwiKVxyXG5cclxubG9nLmRlYnVnIFwiVHJhbnNhemlvbmUgQ09ORklSTSBBU1NFVCAtIElzc3VlOiBcIiArIGlzc3VlXHJcblxyXG5kZWYgZXJyb3JzID0gZmFsc2VcclxuZGVmIHdhcm5pbmdzID0gZmFsc2VcclxuXHJcbmRlZiB0cmFuc2l0aW9uQ2hlY2sgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmNoZWNrQW5kQ29uZmlybSddLnRvU3RyaW5nKCkpWzBdXHJcbmRlZiBkeW5hbWljUmlza3NBc3MgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfQVNTRVRfUklTS1NfQVNTRVNTTUVOVFwiKVswXVxyXG5cclxuZGVmIGVycm9yTWFuZGF0b3J5RmllbGRzID0gbmV3IEFycmF5TGlzdCgpXHJcbmRlZiBlcnJvclJlamVjdGVkVGt0ID0gZmFsc2VcclxuXHJcbmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZHluYW1pY1Jpc2tzQXNzKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZHluYW1pY1Jpc2tzQXNzKSAhPSBcIlwiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGR5bmFtaWNSaXNrc0FzcykudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpe1xyXG4gICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovXHJcbiAgICAvL2luc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHNcclxuICAgIENsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTsgIFxyXG4gICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XHJcbiAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xyXG4gICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XHJcblxyXG4gICAgZGVmIHJpc2tzQXNzZXNzbWVudCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZHluYW1pY1Jpc2tzQXNzKVxyXG4gICAgZGVmIGRyYTUsIGRyYTZcclxuXHJcbiAgICBmb3IoaSBpbiByaXNrc0Fzc2Vzc21lbnQpe1xyXG4gICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdFxyXG4gICAgICAgIGRlZiByaXNrPWkudG9TdHJpbmcoKVxyXG4gICAgICAgIGRlZiByaXNrS2V5ID0gcmlzay5zdWJzdHJpbmcocmlzay5sYXN0SW5kZXhPZignKCcpKzEscmlzay5sYXN0SW5kZXhPZignKScpKVxyXG4gICAgICAgIGRlZiByaXNrT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHJpc2tLZXkpXHJcblxyXG4gICAgICAgIGRlZiBvYlRyaWFnZVxyXG4gICAgICAgIFxyXG5cclxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ocmlza09iamVjdC5nZXRJZCgpLCBcIkRSQTVcIikhPW51bGwpe1xyXG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihyaXNrT2JqZWN0LmdldElkKCksIFwiRFJBNVwiKS5jcmVhdGVNdXRhYmxlKClcclxuICAgICAgICAgICAgZHJhNSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS52YWx1ZS50b1N0cmluZygpXHJcbiAgICAgICAgICAgIGlmKGRyYTUuZXF1YWxzKFwiTk9cIikpe1xyXG4gICAgICAgICAgICAgICAgZXJyb3JSZWplY3RlZFRrdD10cnVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihyaXNrT2JqZWN0LmdldElkKCksIFwiRFJBNlwiKSE9bnVsbCl7XHJcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHJpc2tPYmplY3QuZ2V0SWQoKSwgXCJEUkE2XCIpLmNyZWF0ZU11dGFibGUoKVxyXG4gICAgICAgICAgICBkcmE2ID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLnZhbHVlLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgaWYoZHJhNi5lcXVhbHMoXCJOT1wiKSl7XHJcbiAgICAgICAgICAgICAgICBlcnJvclJlamVjdGVkVGt0PXRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZXJyb3JSZWplY3RlZFRrdFxyXG59ZWxzZXtcclxuICAgIHJldHVybiBmYWxzZVxyXG59XHJcbiIsInNjcmlwdFBhdGgiOm51bGx9</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_TRANSITION_OPTIONS"></arg>
              <arg name="events"></arg>
              <arg name="FIELD_ADDITIONAL_SCRIPT"></arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
  </common-actions>
  <steps>
    <step id="3" name="Confirmed and Planned">
      <meta name="jira.status.id">14329</meta>
      <actions>
<common-action id="41" />
<common-action id="201" />
        <action id="111" name="Genera Operazioni di Manutenzione ODS">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">56d285d0-3b7f-4146-a3ed-b1319013939d</arg>
                <arg name="FIELD_NOTES">YCFgUE0gVGFzayBzZW56YSBQTSBvcGVyYXRpb25zIE5PTiBBU1NJU1RBTlQgKGkgdGt0IGFzc2lzdGFudCBOT04gZGV2b25vIHJpcGV0ZXJlIGxlIFBNIE9wZXJhdGlvbnMp</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="disabled">false</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXHJcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvblxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxyXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvbkJ1aWxkZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXHJcbmltcG9ydCBqYXZhLnRleHQuU2ltcGxlRGF0ZUZvcm1hdDtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZVxyXG5cclxuZGVmIGFzc2lnbmVkVG8gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEtUX0FTU0lHTkVEX1RPXCIpWzBdXHJcbmRlZiBwbU9wZXJhdGlvbnMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfUE1fT1BFUkFUSU9OU19PRFNcIilbMF1cclxubG9nLmRlYnVnIFwiaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NpZ25lZFRvKTogXCIgKyBpc3N1ZS5nZXRQYXJlbnRPYmplY3QoKS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2lnbmVkVG8pXHJcblxyXG5pc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBtT3BlcmF0aW9ucykgPT0gbnVsbCAmJiAoaXNzdWUuZ2V0UGFyZW50T2JqZWN0KCkuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NpZ25lZFRvKSA9PSBudWxsIHx8ICFpc3N1ZS5nZXRQYXJlbnRPYmplY3QoKS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2lnbmVkVG8pLnRvU3RyaW5nKCkuZXF1YWxzKFwiQVNTSVNUQU5UXCIpKSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">36237cda-1b88-49eb-8e62-354285079ef6</arg>
              <arg name="FIELD_NOTES">YCFgUE0gVGFzazogZ2VuZXJhIG9wZXJhemlvbmkgZGkgbWFudXRlbnppb25l</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZVxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG5kZWYgcG1PcGVyYXRpb25zID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9QTV9PUEVSQVRJT05TX09EU1wiKVswXSlcbmlmKHBtT3BlcmF0aW9ucyA9PSBudWxsKXtcblxuICAgIC8qIFJFU1QgQVBJIHBlciBwdWxpemlhIGNhY2hlIGlzc3VlIGxpbmthdGEgKi9cbiAgICByZXF1ZXN0TWV0aG9kID0gXCJQVVRcIjtcbiAgICAvKlNjcmlwdCBWYXJpYWJsZXMqL1xuICAgIC8vUGVyIHRlc3QgZGEgY29uc29sZVxuICAgIC8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMzI1MzVcIilcbiAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS9wbS1zdWJ0YXNrL1wiICsgaXNzdWUua2V5ICsgXCIvb3BlcmF0aW9uc1wiXG4gICAgVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICBIdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcblxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgfVxuICAgIElzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG4gICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChpc3N1ZSlcbn0iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">6c1c89cf-5218-4613-a288-008b311ebe3c</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXJcclxuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEud29ya2Zsb3cuSmlyYVdvcmtmbG93XHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLnNjcmVlbi5GaWVsZFNjcmVlbkxheW91dEl0ZW1cclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuc2NyZWVuLkZpZWxkU2NyZWVuVGFiXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkZpZWxkTWFuYWdlclxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5zY3JlZW4uRmllbGRTY3JlZW5cclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuc2NyZWVuLkZpZWxkU2NyZWVuTWFuYWdlclxyXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5sb2FkZXIuQWN0aW9uRGVzY3JpcHRvclxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLndvcmtmbG93LldvcmtmbG93TWFuYWdlclxyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XHJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyO1xyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGw7XHJcblxyXG5kZWYgcmVxdWVzdE1ldGhvZFxyXG5kZWYgYmFzZVVSTFxyXG5kZWYgcmVzcG9uc2VDb2RlXHJcbmRlZiByZXNwb25zZU1lc3NhZ2VcclxuZGVmIGJvZHlSZXEgPSBbXVxyXG5kZWYgYnJcclxuTWFwPFN0cmluZywgT2JqZWN0PiBjdXN0b21GaWVsZE1hcCA9IG5ldyBIYXNoTWFwPFN0cmluZyxPYmplY3Q+KCk7XHJcblxyXG50cnkge1xyXG4gICAgUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxyXG4gICAgRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcclxuICAgIHByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XHJcbiAgICAgICAgcHJvcGVydGllcy5sb2FkKGl0KVxyXG4gICAgfVxyXG5cclxuICAgIGRlZiBzZXJ2ZXJCYXNlID0gU3RyaW5nLmZvcm1hdChcImh0dHA6Ly8lcy9vcFwiLCBwcm9wZXJ0aWVzWydhcGkuZW52J10pXHJcbiAgICBkZWYgdHJhbnNhY3Rpb25BY3Rpb24gPSBcInZhbGlkYXRvcnNcIlxyXG5cclxuICAgIFVSTCB1cmxcclxuICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb25cclxuICAgIHJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcclxuXHJcbiAgICBiYXNlVVJMID0gU3RyaW5nLmZvcm1hdChcIiVzL3Jlc3QvamlyYS93b3JrZmxvd3MvJXMvJXNcIiwgc2VydmVyQmFzZSwgdHJhbnNpZW50VmFycy5hY3Rpb25JZCwgdHJhbnNhY3Rpb25BY3Rpb24pO1xyXG5cclxuICAgIGxvZy5kZWJ1ZyBiYXNlVVJMO1xyXG5cclxuICAgIFdvcmtmbG93TWFuYWdlciB3b3JrZmxvd01hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRXb3JrZmxvd01hbmFnZXIoKTtcclxuICAgIEppcmFXb3JrZmxvdyBqaXJhV29ya2Zsb3cgPSB3b3JrZmxvd01hbmFnZXIuZ2V0V29ya2Zsb3codHJhbnNpZW50VmFycy5pc3N1ZSk7XHJcblxyXG4gICAgQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xyXG4gICAgXHJcbiAgICBsb2cuZGVidWcgamlyYVdvcmtmbG93LmdldE5hbWUoKTtcclxuICAgIFxyXG4gICAgQWN0aW9uRGVzY3JpcHRvciBhZCA9IHdvcmtmbG93TWFuYWdlci5nZXRBY3Rpb25EZXNjcmlwdG9yKHRyYW5zaWVudFZhcnMuaXNzdWUsIHRyYW5zaWVudFZhcnMuYWN0aW9uSWQpO1xyXG5cclxuICAgIGxvZy5kZWJ1ZyBhZC5nZXROYW1lKCkgICAgICAgICAgICAgIC8vR2VuZXJhIE9wZXJhemlvbmkgZGkgTWFudXRlbnppb25lIE9EU1xyXG4gICAgbG9nLmRlYnVnIGFkLmdldE1ldGFBdHRyaWJ1dGVzKCkgICAgLy97b3BzYmFyLXNlcXVlbmNlPTEwLCBqaXJhLmRlc2NyaXB0aW9uPSwgamlyYS5maWVsZHNjcmVlbi5pZD0xOTkxMH1cclxuXHJcbiAgICBkZWYgYWRNZXRhID0gYWQuZ2V0TWV0YUF0dHJpYnV0ZXMoKTtcclxuICAgIGRlZiBmaWVsZFNjcmVlbklkID0gYWRNZXRhLmdldChcImppcmEuZmllbGRzY3JlZW4uaWRcIik7XHJcbiAgICBsb2cuZGVidWcgXCJGaWVsZCBzY3JlZW4gaWQ6IFwiICsgZmllbGRTY3JlZW5JZFxyXG5cclxuICAgIGlmKGZpZWxkU2NyZWVuSWQgIT0gbnVsbCAmJiBmaWVsZFNjcmVlbklkICE9IFwiXCIpIHtcclxuICAgICAgICBGaWVsZFNjcmVlbk1hbmFnZXIgZmllbGRTY3JlZW5NYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KEZpZWxkU2NyZWVuTWFuYWdlci5jbGFzcyk7XHJcbiAgICAgICAgRmllbGRTY3JlZW4gZmllbGRTY3JlZW4gPSBmaWVsZFNjcmVlbk1hbmFnZXIuZ2V0RmllbGRTY3JlZW4oTG9uZy52YWx1ZU9mKGZpZWxkU2NyZWVuSWQudG9TdHJpbmcoKSkpO1xyXG4gICAgICAgIExpc3Q8RmllbGRTY3JlZW5UYWI+IGZzdHMgPSBmaWVsZFNjcmVlbi5nZXRUYWJzKCk7XHJcbiAgICAgICAgZm9yIChGaWVsZFNjcmVlblRhYiBmc3QgOiBmc3RzKSB7XHJcbiAgICAgICAgICAgIExpc3Q8RmllbGRTY3JlZW5MYXlvdXRJdGVtPiBxd2UgPSBmc3QuZ2V0RmllbGRTY3JlZW5MYXlvdXRJdGVtcygpO1xyXG4gICAgICAgICAgICBmb3IgKEZpZWxkU2NyZWVuTGF5b3V0SXRlbSBmc2xpIDogcXdlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZnNsaS5nZXRGaWVsZElkKCkgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgQ3VzdG9tRmllbGQgY3VzdG9tRmllbGQgPSBjdXN0b21GaWVsZE1hbmFnZXIuZ2V0Q3VzdG9tRmllbGRPYmplY3QoZnNsaS5nZXRGaWVsZElkKCkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1c3RvbUZpZWxkID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRlZiBjdXN0b21GaWVsZFZhbHVlID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0b21GaWVsZCk7XHJcbiAgICAgICAgICAgICAgICBjdXN0b21GaWVsZE1hcC5wdXQoZnNsaS5nZXRGaWVsZElkKCksIGN1c3RvbUZpZWxkVmFsdWUgPT0gbnVsbCA/IG51bGwgOiBjdXN0b21GaWVsZFZhbHVlLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY3VzdG9tRmllbGRNYXAgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgbG9nLmRlYnVnIGN1c3RvbUZpZWxkTWFwXHJcblxyXG4gICAgYm9keVJlcSA9IFsgXHJcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXHJcbiAgICAgICAgXCJhY3Rpb25OYW1lXCI6IGFkLmdldE5hbWUoKSxcclxuICAgICAgICBcImppcmFXb3JrZmxvd05hbWVcIjogamlyYVdvcmtmbG93LmdldE5hbWUoKSxcclxuICAgICAgICBcImN1c3RvbUZpZWxkTWFwXCI6IGN1c3RvbUZpZWxkTWFwLFxyXG4gICAgICAgIFwicHJvcGVydGllc1wiOiBwcm9wZXJ0aWVzXHJcbiAgICBdIFxyXG5cclxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxyXG4gICAgbG9nLmRlYnVnIFwiYm9keVJlcSBTTjogXCIgKyBib2R5UmVxXHJcblxyXG4gICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxyXG4gICAgY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcclxuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcclxuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xyXG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XHJcbiAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xyXG4gICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xyXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5UmVxKSB9XHJcbiAgICBcclxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xyXG4gICAgcmVzcG9uc2VDb2RlID0gY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpICAgIFxyXG4gICAgICAgIFxyXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2UgSHR0cFN0YXR1c0NvZGU6IFwiICsgcmVzcG9uc2VDb2RlXHJcbiAgICAgICAgXHJcbiAgICAvLyBJZiBiYWNrZW5kIHJlcGxpZXMgd2l0aCAyMDAgdGhlbiB0aGUgY29uZGl0aW9uIGlzIHBhc3NlZCAgICBcclxuICAgIGlmKFwiMjAwXCIuZXF1YWxzKHJlc3BvbnNlQ29kZSkpe1xyXG4gICAgICAgIGxvZy5kZWJ1ZyBcIk9LXCJcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy9UaGlzIGlzIGEgYmFja2VuZCBlcnJvci4uIGxvZ1xyXG4gICAgICAgIGxvZy5kZWJ1ZyBcIkJhY2tlbmQgZXJyb3JcIlxyXG5cclxuICAgICAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxyXG5cclxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXHJcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVJST1JcIikgLy9pZiBkeW5hbWljLCBiZXR0ZXJcclxuICAgICAgICBlTGlzdEVycm9ycy5hZGQobnVsbCkgICAvL2l0IHNvdW5kcyBpdCBpcyB1c2VkIGFzIHNlcGFyYXRvclxyXG5cclxuICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XHJcbiAgICAgICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xyXG5cclxuICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxyXG4gICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpXHJcbiAgICAgICAgaWYoanNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXApe1xyXG4gICAgICAgICAgICAvL2Vycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsganNvbl9vYmplY3QubWVzc2FnZSlcclxuICAgICAgICAgICAgaWYoanNvbl9vYmplY3QuZXJyb3JzIGluc3RhbmNlb2YgTGlzdCl7XHJcbiAgICAgICAgICAgICAgICBmb3IoZGVmIGN1ciA6IChMaXN0KWpzb25fb2JqZWN0LmVycm9ycyl7XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjdXIudG9TdHJpbmcoKSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVycm9yTXNncy5hZGQoanNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAgIH0gICAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcclxuICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXHJcblxyXG4gICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXHJcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXHJcbiAgICB9XHJcbn0gY2F0Y2ggKEV4Y2VwdGlvbiBlKXtcclxuICAgIC8vVGhpcyBpcyBhbiBleGNlcHRpb24gaW4gdGhlIHNjcmlwdFxyXG4gICAgbG9nLmRlYnVnIFwiRXhjZXB0aW9uIHJhaXNlZFwiXHJcbiAgICBsb2cuZXJyb3IgZVxyXG4gICAgaWYoZSBpbnN0YW5jZW9mIEludmFsaWRJbnB1dEV4Y2VwdGlvbil7XHJcbiAgICAgICAgdGhyb3cgZTtcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJWYWxpZGF0b3JzIGZhaWxlZFwiKTtcclxufVxyXG4iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="3">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="131" name="Back to Open">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">bd043487-de88-4d19-be05-d40a8c6c131b</arg>
                <arg name="FIELD_INVERT_CONDITION"></arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.UserCondition</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_USER_IDS">arianna.fabbri</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="6">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="181" name="Risks Assessment" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">19910</meta>
          <restrict-to>
            <conditions type="AND">
              <condition type="class">
                <arg name="conditionList">6</arg>
                <arg name="jsuWorkflowParamsVersion-textValue">2.33.0</arg>
                <arg name="comparisonType">1</arg>
                <arg name="class.name">com.googlecode.jsu.workflow.condition.ValueFieldCondition</arg>
                <arg name="uuid">f78b5e13-a779-44f3-bc72-27a44c6ee749</arg>
                <arg name="fieldValue"></arg>
                <arg name="fieldsList">customfield_23929</arg>
              </condition>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">519e584f-1e24-4d74-bbb9-ec343c3be7f1</arg>
                <arg name="FIELD_NOTES">YCFgRW5hYmxlZCBvbmx5IGlmIHBhcmVudCB0YXNrIGlzICJJbiBQcm9ncmVzcyIgb3IgIkZpbmFsaXppbmcgV29yayI=</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpc3N1ZS5wYXJlbnRPYmplY3Q/LnN0YXR1cz8ubmFtZSA9PSBcIkluIFByb2dyZXNzXCIgfHwgaXNzdWUucGFyZW50T2JqZWN0Py5zdGF0dXM/Lm5hbWUgPT0gXCJGaW5hbGl6aW5nIFdvcmtcIiIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">da95600f-b12d-41a9-ba8a-97f002bd20c1</arg>
              <arg name="FIELD_NOTES">YCFgQ2hlY2sgUE0gb3BlcmF0aW9ucyBvbiBQTSB0YXNr</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5cblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcblxuLy9Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKClcbi8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtNDE1OVwiKVxuXG5sb2cuZGVidWcgXCJUcmFuc2F6aW9uZSBDb21wbGV0ZSAtIFByaW1vIHZhbGlkYXRvclwiXG5sb2cuZGVidWcgXCJUcmFuc2F6aW9uZSBDb21wbGV0ZSAtIFByaW1vIHZhbGlkYXRvciAtIElzc3VlOiBcIiArIGlzc3VlXG5cbmRlZiBlcnJvcnMgPSBmYWxzZVxuZGVmIHdhcm5pbmdzID0gZmFsc2VcblxuZGVmIHBtT3BlcmF0aW9ucyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9QTV9PUEVSQVRJT05TX09EU1wiKVswXVxuZGVmIGFzc2lnbmVkVG8gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEtUX0FTU0lHTkVEX1RPXCIpWzBdXG5cbmxvZy5kZWJ1ZyBcImlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocG1PcGVyYXRpb25zKTogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBtT3BlcmF0aW9ucylcbmxvZy5kZWJ1ZyBcImlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzaWduZWRUbyk6IFwiICsgaXNzdWUuZ2V0UGFyZW50T2JqZWN0KCkuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NpZ25lZFRvKVxuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbU9wZXJhdGlvbnMpPT1udWxsICYmICFpc3N1ZS5nZXRQYXJlbnRPYmplY3QoKS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2lnbmVkVG8pLnRvU3RyaW5nKCkuZXF1YWxzKFwiQVNTSVNUQU5UXCIpKXtcbiAgICBlcnJvcnM9dHJ1ZVxufVxuXG5kZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG5cbmlmICghZXJyb3JzKXtcbiAgICByZXR1cm4gdHJ1ZVxufWVsc2V7XG4gICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpICAgICAgICAgICBcbiAgICBkZWYgZUxpc3RTdWJUYXNrQ29tcGxldGVkID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZUxpc3RTdWJUYXNrQ29tcGxldGVkLmFkZChcIkVcIilcbiAgICBlTGlzdFN1YlRhc2tDb21wbGV0ZWQuYWRkKFwiTUlTU0lOR19QTV9PUEVSQVRJT05TXCIpXG4gICAgZUxpc3RTdWJUYXNrQ29tcGxldGVkLmFkZChudWxsKVxuICAgIGVMaXN0LmFkZChlTGlzdFN1YlRhc2tDb21wbGV0ZWQpXG5cbiAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgIGxvZy5kZWJ1ZyBcInRocm93IGV4Y2VwdGlvbjogXCIgKyBvdXRwdXQudG9TdHJpbmcoKVxuICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIkVcIiwgb3V0cHV0LnRvU3RyaW5nKCkpICAgXG59XG4iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">b24b77fd-c8bd-438e-bfca-049838725b25</arg>
              <arg name="FIELD_NOTES">YCFgU0FQOiB1cGRhdGUgU04gc3RhdHVz</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG5VUkwgdXJsXG5IdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uXG5cbnJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcblxuZGVmIGJvZHlfcmVxID0gW11cbmJvZHlfcmVxID0gW1xuICAgIFwiaXNzdWVLZXlcIjogaXNzdWUua2V5LFxuICAgIFwic3RhdHVzXCI6IFwiSU5QXCJcbl0gXG5cbmJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL2FmdGVyL3NhbGVzL2NyZWF0ZS9zZXJ2aWNlL25vdGlmaWNhdGlvblwiXG51cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG5jb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbmNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG5jb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG5jb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxubG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5jb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuc3RhcnRzV2l0aChcIjIwXCIpKXtcbiAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgZUxpc3RFcnJvcnMuYWRkKFwiU05fVVBEQVRFXCIpXG4gICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpKVxuICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9Jylcbn1cblxuIiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">0465e2d8-92f8-467a-abce-bd2394e9db31</arg>
              <arg name="FIELD_NOTES">YCFgQ2FsbCBGU00gYmFja2VuZA==</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGRcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5DdXN0b21GaWVsZE1hbmFnZXJcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS53b3JrZmxvdy5KaXJhV29ya2Zsb3dcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuc2NyZWVuLkZpZWxkU2NyZWVuTGF5b3V0SXRlbVxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5zY3JlZW4uRmllbGRTY3JlZW5UYWJcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuRmllbGRNYW5hZ2VyXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLnNjcmVlbi5GaWVsZFNjcmVlblxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5zY3JlZW4uRmllbGRTY3JlZW5NYW5hZ2VyXHJcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LmxvYWRlci5BY3Rpb25EZXNjcmlwdG9yXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEud29ya2Zsb3cuV29ya2Zsb3dNYW5hZ2VyXHJcbmltcG9ydCBncm9vdnkuanNvbi5TdHJlYW1pbmdKc29uQnVpbGRlcjtcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXI7XHJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbDtcclxuXHJcbmRlZiBiYXNlVVJMXHJcbmRlZiByZXNwb25zZUJvZHlcclxuXHJcbnRyeSB7XHJcbiAgICBQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXHJcbiAgICBGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxyXG4gICAgcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcclxuICAgICAgICBwcm9wZXJ0aWVzLmxvYWQoaXQpXHJcbiAgICB9XHJcblxyXG4gICAgZGVmIHNlcnZlckJhc2UgPSBTdHJpbmcuZm9ybWF0KFwiaHR0cDovLyVzL29wXCIsIHByb3BlcnRpZXNbJ2FwaS5lbnYnXSlcclxuICAgIGRlZiB0cmFuc2FjdGlvbkFjdGlvbiA9IFwidmFsaWRhdG9yc1wiXHJcblxyXG4gICAgVVJMIHVybFxyXG4gICAgZGVmIHJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcclxuXHJcbiAgICBiYXNlVVJMID0gU3RyaW5nLmZvcm1hdChcIiVzL3Jlc3QvamlyYS93b3JrZmxvd3MvJXMvJXNcIiwgc2VydmVyQmFzZSwgdHJhbnNpZW50VmFycy5hY3Rpb25JZCwgdHJhbnNhY3Rpb25BY3Rpb24pO1xyXG5cclxuICAgIGxvZy5kZWJ1ZyhcIkNvbXBvc2luZyBiYXNlVVJMIGFzICcke2Jhc2VVUkx9J1wiKTtcclxuXHJcbiAgICBXb3JrZmxvd01hbmFnZXIgd29ya2Zsb3dNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0V29ya2Zsb3dNYW5hZ2VyKCk7XHJcbiAgICBKaXJhV29ya2Zsb3cgamlyYVdvcmtmbG93ID0gd29ya2Zsb3dNYW5hZ2VyLmdldFdvcmtmbG93KHRyYW5zaWVudFZhcnMuaXNzdWUpO1xyXG5cclxuICAgIEN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcclxuICAgIFxyXG4gICAgbG9nLmRlYnVnKCBqaXJhV29ya2Zsb3cuZ2V0TmFtZSgpKVxyXG4gICAgXHJcbiAgICBBY3Rpb25EZXNjcmlwdG9yIGFkID0gd29ya2Zsb3dNYW5hZ2VyLmdldEFjdGlvbkRlc2NyaXB0b3IodHJhbnNpZW50VmFycy5pc3N1ZSwgdHJhbnNpZW50VmFycy5hY3Rpb25JZCk7XHJcblxyXG4gICAgbG9nLmRlYnVnKFwiQWN0aW9uRGVzY3JpcHRvciBOYW1lOiAke2FkLmdldE5hbWUoKX1cIikgICAgICAgICAgICAgICAgICAgICAvLyBHZW5lcmEgUmFwcG9ydG8gZGkgSW50ZXJ2ZW50byBGQUFDXHJcbiAgICBsb2cuZGVidWcoXCJBY3Rpb25EZXNjcmlwdG9yIE1ldGFBdHRyczogJHthZC5nZXRNZXRhQXR0cmlidXRlcygpfVwiKSAgICAgIC8vIHtvcHNiYXItc2VxdWVuY2U9MTAsIGppcmEuZGVzY3JpcHRpb249LCBqaXJhLmZpZWxkc2NyZWVuLmlkPTE5OTEwfVxyXG5cclxuICAgIGRlZiBhZE1ldGEgPSBhZC5nZXRNZXRhQXR0cmlidXRlcygpO1xyXG4gICAgZGVmIGZpZWxkU2NyZWVuSWQgPSBMb25nLnZhbHVlT2YoYWRNZXRhLmdldChcImppcmEuZmllbGRzY3JlZW4uaWRcIikudG9TdHJpbmcoKSk7XHJcbiAgICBsb2cuZGVidWcoXCJGaWVsZCBzY3JlZW4gaWQ6ICR7ZmllbGRTY3JlZW5JZH1cIilcclxuXHJcbiAgICBNYXA8U3RyaW5nLCBPYmplY3Q+IGN1c3RvbUZpZWxkTWFwID0gbmV3IEhhc2hNYXA8U3RyaW5nLE9iamVjdD4oKTtcclxuXHJcbiAgICBGaWVsZFNjcmVlbk1hbmFnZXIgZmllbGRTY3JlZW5NYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KEZpZWxkU2NyZWVuTWFuYWdlci5jbGFzcyk7XHJcbiAgICBGaWVsZFNjcmVlbiBmaWVsZFNjcmVlbiA9IGZpZWxkU2NyZWVuTWFuYWdlci5nZXRGaWVsZFNjcmVlbihmaWVsZFNjcmVlbklkKTtcclxuICAgIGZvcihGaWVsZFNjcmVlblRhYiBmc3QgOiBmaWVsZFNjcmVlbi5nZXRUYWJzKCkpe1xyXG4gICAgICAgIExpc3Q8RmllbGRTY3JlZW5MYXlvdXRJdGVtPiBxd2UgPSBmc3QuZ2V0RmllbGRTY3JlZW5MYXlvdXRJdGVtcygpO1xyXG4gICAgICAgIGZvciAoRmllbGRTY3JlZW5MYXlvdXRJdGVtIGZzbGk6IHF3ZSl7XHJcbiAgICAgICAgICAgIGlmIChmc2xpLmdldEZpZWxkSWQoKSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBDdXN0b21GaWVsZCBjdXN0b21GaWVsZCA9IGN1c3RvbUZpZWxkTWFuYWdlci5nZXRDdXN0b21GaWVsZE9iamVjdChmc2xpLmdldEZpZWxkSWQoKSk7XHJcbiAgICAgICAgICAgIGlmIChjdXN0b21GaWVsZCA9PSBudWxsKXtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRlZiBjdXN0b21GaWVsZFZhbHVlID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0b21GaWVsZCk7XHJcbiAgICAgICAgICAgIGN1c3RvbUZpZWxkTWFwLnB1dChmc2xpLmdldEZpZWxkSWQoKSwgY3VzdG9tRmllbGRWYWx1ZSA9PSBudWxsID8gbnVsbCA6IGN1c3RvbUZpZWxkVmFsdWUudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgfSAgICBcclxuICAgIH1cclxuXHJcbiAgICBsb2cuZGVidWcoXCJjdXN0b21GaWVsZE1hcDogJHtjdXN0b21GaWVsZE1hcH1cIilcclxuXHJcbiAgICBkZWYgYm9keVJlcSA9IFsgXHJcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXHJcbiAgICAgICAgXCJhY3Rpb25OYW1lXCI6IGFkLmdldE5hbWUoKSxcclxuICAgICAgICBcImppcmFXb3JrZmxvd05hbWVcIjogamlyYVdvcmtmbG93LmdldE5hbWUoKSxcclxuICAgICAgICBcImN1c3RvbUZpZWxkTWFwXCI6IGN1c3RvbUZpZWxkTWFwLFxyXG4gICAgICAgIFwicHJvcGVydGllc1wiOiBwcm9wZXJ0aWVzXHJcbiAgICBdO1xyXG5cclxuICAgIGxvZy5kZWJ1ZyhcIkNhbGxpbmcgWyR7cmVxdWVzdE1ldGhvZH1dICR7YmFzZVVSTH0gd2l0aCBib2R5ICR7Ym9keVJlcX1cIik7XHJcblxyXG4gICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxyXG4gICAgSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbikgdXJsLm9wZW5Db25uZWN0aW9uKCk7XHJcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XHJcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcclxuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xyXG4gICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcclxuICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcclxuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keVJlcSkgfVxyXG4gICAgXHJcbiAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcclxuICAgIGRlZiByZXNwb25zZUNvZGUgPSBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkgICAgXHJcbiAgICAgICAgXHJcbiAgICBsb2cuZGVidWcoXCJSZXNwb25zZSBIdHRwU3RhdHVzQ29kZTogJHtyZXNwb25zZUNvZGV9XCIpXHJcbiAgICAgICAgXHJcbiAgICAvLyBJZiBiYWNrZW5kIHJlcGxpZXMgd2l0aCAyMDAgdGhlbiB0aGUgY29uZGl0aW9uIGlzIHBhc3NlZCAgICBcclxuICAgIGlmKFwiMjAwXCIuZXF1YWxzKHJlc3BvbnNlQ29kZSkpe1xyXG4gICAgICAgIGxvZy5kZWJ1ZyhcIlZhbGlkYXRvciBwYXNzZWQhXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBMaXN0PFN0cmluZz4gb3V0cHV0RXJyb3JzID0gbmV3IEFycmF5TGlzdDw+KCk7XHJcbiAgICAgICAgTGlzdDxTdHJpbmc+IG91dHB1dFdhcm5pbmdzID0gbmV3IEFycmF5TGlzdDw+KCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmVzcG9uc2VCb2R5ID0gKChIdHRwVVJMQ29ubmVjdGlvbikgY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDtcclxuICAgICAgICBsb2cuZGVidWcoXCJWYWxpZGF0b3Igbm90IHBhc3NlZCwgcmVzcG9uc2VCb2R5OiAke3Jlc3BvbnNlQm9keX1cIik7XHJcblxyXG4gICAgICAgIC8vIHRlc3Rpbmcgd2l0aG91dCByZWRlcGxveWluZyBlYWNoIHRpbWVcclxuICAgICAgICAvL3Jlc3BvbnNlQm9keSA9ICd7XCJXXCI6IFwiW1tbVywgQ09ORklSTV9SSVNLX0FOQUxZU0lTLCBudWxsXV1dXCJ9J1xyXG5cclxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKHJlc3BvbnNlQm9keSk7XHJcbiAgICB9XHJcbn0gY2F0Y2ggKEV4Y2VwdGlvbiBlKXtcclxuICAgIC8vVGhpcyBpcyBhbiBleGNlcHRpb24gaW4gdGhlIHNjcmlwdFxyXG4gICAgbG9nLmRlYnVnKFwiRXhjZXB0aW9uIHJhaXNlZCBjYWxsaW5nIGVuZHBvaW50ICR7YmFzZVVSTH1cIilcclxuICAgIGxvZy5lcnJvcihlKVxyXG4gICAgaWYgKGUgaW5zdGFuY2VvZiBJbnZhbGlkSW5wdXRFeGNlcHRpb24pe1xyXG4gICAgICAgIHRocm93IGU7XHJcbiAgICB9XHJcbiAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6IFwiW1tbIFZhbGlkYXRvciBmYWlsZWQgXV1dXCIgfScpO1xyXG59Iiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="10">
              <post-functions>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">5227bd43-2025-46c0-9798-81f69a361004</arg>
                  <arg name="FIELD_NOTES">YCFgQ3JlYXRlIG9iaiAiQ2hlY2tsaXN0IiAtIE5PVCBmb3IgQVNTSVNUQU5UIHRpY2tldHM=</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiIgaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3JcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZVxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZTtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5ldmVudC50eXBlLkV2ZW50RGlzcGF0Y2hPcHRpb247XHJcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkxldmVsXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyXHJcblxyXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXHJcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZSgnL3Zhci9hdGxhc3NpYW4vYXBwbGljYXRpb24tZGF0YS9zaGFyZWQvc2NyaXB0cy9vcHByb2plY3QucHJvcGVydGllcycpXHJcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XHJcblx0cHJvcGVydGllcy5sb2FkKGl0KVxyXG59XHJcbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cclxuQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyBcclxuZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XHJcbiAgXHJcbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBUeXBlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xyXG5DbGFzcyBvYmplY3RUeXBlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUZhY2FkZVwiKTsgXHJcbmRlZiBvYmplY3RUeXBlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVGYWNhZGVDbGFzcyk7XHJcbiAgXHJcbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBBdHRyaWJ1dGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXHJcbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpOyBcclxuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcclxuICBcclxuQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7IFxyXG5kZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XHJcbkNsYXNzIGlxbEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLklRTEZhY2FkZVwiKTsgXHJcbmRlZiBpcWxGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUoaXFsRmFjYWRlQ2xhc3MpO1xyXG5cclxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpXHJcbi8vaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMTk2OTM4XCIpXHJcblxyXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXHJcbmludCBEQk8gPSBwcm9wZXJ0aWVzWydpc2NoZW1hLmRiby5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuXHJcbmRlZiBhc3NldCA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0FTU0VUXCIpWzBdXHJcbmRlZiB0aWNrZXRWaXNLZXkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9US1RfVklTSUJJTElUWV9LRVlcIilbMF1cclxuZGVmIGNoZWNrbGlzdEZpZWxkID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfQVNTRVRfQ0hFQ0tMSVNUXCIpWzBdXHJcbmRlZiBhc3NpZ25lZFRvID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEtUX0FTU0lHTkVEX1RPXCIpWzBdXHJcblxyXG4vKjI3LjAxLjIwMjMgQUYgLSBNYXAgaXNzdWUgdHlwZSB0byBmaWx0ZXIgYXZhaWxhYmxlIGNoZWNrbGlzdHMqL1xyXG5kZWYgaXNzdWVUeXBlTWFwXHJcbmlmKGlzc3VlLmlzc3VlVHlwZS5uYW1lID09IFwiTWFpbnRlbmFuY2UgVGlja2V0XCIpe1xyXG4gICAgaXNzdWVUeXBlTWFwID0gXCJSRVBBSVJfVElDS0VUXCJcclxufVxyXG5pZihpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSBcIk5ldyBJbnN0YWxsYXRpb25cIil7XHJcbiAgICBpc3N1ZVR5cGVNYXAgPSBcIk5FV19JTlNUQUxMQVRJT05fVElDS0VUXCJcclxufVxyXG5pZihpc3N1ZS5pc3N1ZVR5cGUubmFtZSA9PSBcIk1vZGVybml6YXRpb25cIil7XHJcbiAgICBpc3N1ZVR5cGVNYXAgPSBcIk1PREVSTklaQVRJT05cIlxyXG59XHJcbmlmKGlzc3VlLmlzc3VlVHlwZS5uYW1lID09IFwiUGxhbm5lZCBNYWludGVuYW5jZSBUYXNrXCIpe1xyXG4gICAgaXNzdWVUeXBlTWFwID0gXCJQTV9UQVNLXCJcclxufVxyXG4gICAgXHJcbi8vMzAuMDMuMjAyMiAtIG9yYSBtZXNzYSBjb25kaXppb25lIGZpc3NhIGluIGJhc2UgYWxsYSBjb21wYW55IGNvZGUsIGFnZ2l1bmdlcmUgZmxhZyBzdWxsJ29nZ2V0dG8gQ29tcGFueSBjaGUgbGEgYWJpbGl0aSBvIG1lbm8gYWxsYSBkeW5hbWljIHJpc2sgYXNzZXNzbWVudC4gU29sbyBzZSBsYSBjb21wYW55IHJlZmVyZW56aWF0YSBuZWxsYSB2aXNpYmlsaXR5IGtleSBcclxuLy9oYSBsYSBkeW5hbWljIHJpc2sgYXNzZXNzbWVudCBhdHRpdmEgZmFyZSBxdWFudG8gc290dG9cclxuLy8yNy4wMS4yMDIzIC0gQUYgLSB0b2x0YSBjb25kaXppb25lIGNoZSBsZWdhIGxhIGdlbmVyYXppb25lIGRlbGxhIGNoZWNrbGlzdCBhbCBjb2RpY2UgY29tcGFueSBvIGFsbGEgcHJlc2VuemEgZGVsbGEgZHluYW1pYyByaXNrcyBhc3Nlc3NtZW50IC0gc2UgY2kgc29ubyBlbGVtZW50aSBDaGVja2xpc3QgdmllbmUgY3JlYXRvLCB2aWNldmVyc2Egbm9uIHZpZW5lIGNyZWF0byBudWxsYVxyXG4vL2lmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGlja2V0VmlzS2V5KVswXS50b1N0cmluZygpLmNvbnRhaW5zKFwiMTE3OVwiKSB8fCBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRpY2tldFZpc0tleSlbMF0udG9TdHJpbmcoKS5jb250YWlucyhcIjEwNzhcIikpe1xyXG5cclxuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjaGVja2xpc3RGaWVsZCkgPT0gbnVsbCAmJiBpc3N1ZS5pc3N1ZVR5cGUubmFtZSAhPSBcIlBsYW5uZWQgTWFpbnRlbmFuY2UgVGlja2V0XCIgJiYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzaWduZWRUbykgPT0gbnVsbCB8fCAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NpZ25lZFRvKS50b1N0cmluZygpLmVxdWFscyhcIkFTU0lTVEFOVFwiKSkpe1xyXG4gICAgbG9nLmluZm8gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldClbMF0udG9TdHJpbmcoKVxyXG4gICAgZGVmIGFzcz1pc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0KVswXS50b1N0cmluZygpXHJcbiAgICBkZWYgYXNzS2V5ID0gYXNzLnN1YnN0cmluZyhhc3MubGFzdEluZGV4T2YoJygnKSsxLGFzcy5sYXN0SW5kZXhPZignKScpKVxyXG4gICAgZGVmIGFzc05hbWUgPSBhc3Muc3Vic3RyaW5nKDAsYXNzLmxhc3RJbmRleE9mKCcoJyktMSlcclxuICAgIGRlZiBhc3NPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oYXNzS2V5KVxyXG4gICAgbG9nLmluZm8gXCJhc3NLZXk6IFwiICsgYXNzS2V5XHJcbiAgICBsb2cuaW5mbyAoXCJhc3NOYW1lOiBcIiArIGFzc05hbWUpXHJcbiAgICBsb2cuaW5mbyAoXCJhc3NPYmplY3Q6IFwiICsgYXNzT2JqZWN0KVxyXG4gICAgXHJcbiAgICBsb2cuaW5mbyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oYXNzT2JqZWN0LmdldElkKCksIFwiUFVCTElDX1BST0RVQ1RfVFlQRV9SRUZcIikudG9TdHJpbmcoKVxyXG4gICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oYXNzT2JqZWN0LmdldElkKCksIFwiUFVCTElDX1BST0RVQ1RfVFlQRV9SRUZcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICBwcm9kVHlwZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpXHJcbiAgICBsb2cuaW5mbyBwcm9kVHlwZS50b1N0cmluZygpXHJcblxyXG4gICAgbG9nLmluZm8gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0aWNrZXRWaXNLZXkpWzBdLnRvU3RyaW5nKClcclxuICAgIGRlZiB2aXM9aXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0aWNrZXRWaXNLZXkpWzBdLnRvU3RyaW5nKClcclxuICAgIGRlZiB2aXNLZXkgPSB2aXMuc3Vic3RyaW5nKHZpcy5sYXN0SW5kZXhPZignKCcpKzEsdmlzLmxhc3RJbmRleE9mKCcpJykpXHJcbiAgICBkZWYgb2JqZWN0cyA9IGlxbEZhY2FkZS5maW5kT2JqZWN0c0J5SVFMQW5kU2NoZW1hKE9QQUEsIFwib2JqZWN0VHlwZSA9IENoZWNrbGlzdHMgQU5EIElTU1VFX1RZUEUgSU4gKFwiICsgaXNzdWVUeXBlTWFwICsgXCIpIEFORCBQUk9EVUNUX1RZUEVfUkVGLktleSA9IERPLVwiICsgcHJvZFR5cGUudG9TdHJpbmcoKSArIFwiIEFORCBvYmplY3QgSEFWSU5HIG91dGJvdW5kUmVmZXJlbmNlcyhvYmplY3RUeXBlID0gQ29tcGFueSBBTkQgb2JqZWN0IEhBVklORyBpbmJvdW5kUmVmZXJlbmNlcyhvYmplY3RUeXBlID0gXFxcIlZpc2liaWxpdHkgS2V5XFxcIiBBTkQgS2V5ID0gXCIgKyB2aXNLZXkudG9TdHJpbmcoKSArIFwiKSlcIilcclxuICAgIGxvZy53YXJuIFwiaXFsOiBcIiArIFwib2JqZWN0VHlwZSA9IENoZWNrbGlzdHMgQU5EIElTU1VFX1RZUEUgSU4gKFwiICsgaXNzdWVUeXBlTWFwICsgXCIpIEFORCBQUk9EVUNUX1RZUEVfUkVGLktleSA9IERPLVwiICsgcHJvZFR5cGUudG9TdHJpbmcoKSArIFwiIEFORCBvYmplY3QgSEFWSU5HIG91dGJvdW5kUmVmZXJlbmNlcyhvYmplY3RUeXBlID0gQ29tcGFueSBBTkQgb2JqZWN0IEhBVklORyBpbmJvdW5kUmVmZXJlbmNlcyhvYmplY3RUeXBlID0gXFxcIlZpc2liaWxpdHkgS2V5XFxcIiBBTkQgS2V5ID0gXCIgKyB2aXNLZXkudG9TdHJpbmcoKSArIFwiKSlcIlxyXG5cclxuICAgIGlmKG9iamVjdHMuc2l6ZSgpID09IDApe1xyXG4gICAgICAgIG9iamVjdHMgPSBpcWxGYWNhZGUuZmluZE9iamVjdHNCeUlRTEFuZFNjaGVtYShPUEFBLCBcIm9iamVjdFR5cGUgPSBDaGVja2xpc3RzIEFORCBJU1NVRV9UWVBFIElOIChcIiArIGlzc3VlVHlwZU1hcCArIFwiKSBBTkQgREVGQVVMVCA9IHRydWUgQU5EIG9iamVjdCBIQVZJTkcgb3V0Ym91bmRSZWZlcmVuY2VzKG9iamVjdFR5cGUgPSBDb21wYW55IEFORCBvYmplY3QgSEFWSU5HIGluYm91bmRSZWZlcmVuY2VzKG9iamVjdFR5cGUgPSBcXFwiVmlzaWJpbGl0eSBLZXlcXFwiIEFORCBLZXkgPSBcIiArIHZpc0tleS50b1N0cmluZygpICsgXCIpKVwiKVxyXG4gICAgICAgIGxvZy53YXJuIFwiaXFsOiBcIiArIFwib2JqZWN0VHlwZSA9IENoZWNrbGlzdHMgQU5EIElTU1VFX1RZUEUgSU4gKFwiICsgaXNzdWVUeXBlTWFwICsgXCIpIEFORCBERUZBVUxUID0gdHJ1ZSBBTkQgb2JqZWN0IEhBVklORyBvdXRib3VuZFJlZmVyZW5jZXMob2JqZWN0VHlwZSA9IENvbXBhbnkgQU5EIG9iamVjdCBIQVZJTkcgaW5ib3VuZFJlZmVyZW5jZXMob2JqZWN0VHlwZSA9IFxcXCJWaXNpYmlsaXR5IEtleVxcXCIgQU5EIEtleSA9IFwiICsgdmlzS2V5LnRvU3RyaW5nKCkgKyBcIikpXCJcclxuICAgIH1cclxuXHJcbiAgICBpZihvYmplY3RzKXtcclxuICAgICAgICBsb2cuaW5mbyBvYmplY3RzWzBdLnRvU3RyaW5nKClcclxuICAgICAgICBcclxuICAgICAgICBsb2cuaW5mbyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ob2JqZWN0c1swXS5nZXRJZCgpLCBcIkNIRUNLTElTVF9OQU1FXCIpLnRvU3RyaW5nKClcclxuICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihvYmplY3RzWzBdLmdldElkKCksIFwiQ0hFQ0tMSVNUX05BTUVcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICAgICAgY2hlY2tsaXN0ID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKClcclxuICAgICAgICBsb2cuaW5mbyBjaGVja2xpc3QudG9TdHJpbmcoKS5yZXBsYWNlQWxsKCcgLSAnLCcnKS5yZXBsYWNlQWxsKCcgJywnJylcclxuICAgICAgICBcclxuICAgICAgICBkZWYgbmV3T2JqSWQgPSBwcm9wZXJ0aWVzWydpb2JqLicgKyBjaGVja2xpc3QudG9TdHJpbmcoKS5yZXBsYWNlQWxsKCcgLSAnLCcnKS5yZXBsYWNlQWxsKCcgJywnJykgKyAnLmlkJ10udG9JbnRlZ2VyKClcclxuICAgICAgICBsb2cuaW5mbyBcImlkOiBcIiArIHByb3BlcnRpZXNbJ2lvYmouJyArIGNoZWNrbGlzdC50b1N0cmluZygpLnJlcGxhY2VBbGwoJyAtICcsJycpLnJlcGxhY2VBbGwoJyAnLCcnKSArICcuaWQnXS50b1N0cmluZygpXHJcbiAgICAgICAgZGVmIG5ld09iak5hbWVJZCA9IHByb3BlcnRpZXNbJ2lvYmouJyArIGNoZWNrbGlzdC50b1N0cmluZygpLnJlcGxhY2VBbGwoJyAtICcsJycpLnJlcGxhY2VBbGwoJyAnLCcnKSArICcuTmFtZS5pZCddLnRvSW50ZWdlcigpXHJcbiAgICAgICAgZGVmIG5ld09iakNvbXBsZXRlZElkID0gcHJvcGVydGllc1snaW9iai4nICsgY2hlY2tsaXN0LnRvU3RyaW5nKCkucmVwbGFjZUFsbCgnIC0gJywnJykucmVwbGFjZUFsbCgnICcsJycpICsgJy5jb21wbGV0ZWQuaWQnXS50b0ludGVnZXIoKVxyXG4gICAgICAgIGxvZy5pbmZvIG5ld09iak5hbWVJZC50b1N0cmluZygpXHJcbiAgICAgICAgXHJcbiAgICAgICAgZGVmIGNoZWNrbGlzdE9iamVjdHMgPSBuZXcgQXJyYXlMaXN0KCk7XHJcbiAgICAgICAgZGVmIG9iamVjdEF0dHJpYnV0ZUJlYW5zID0gbmV3IEFycmF5TGlzdCgpO1xyXG4gICAgICAgIGRlZiBuYW1lT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihuZXdPYmpOYW1lSWQpOyBcclxuICAgICAgICBkZWYgY29tcGxldGVkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihuZXdPYmpDb21wbGV0ZWRJZCk7IFxyXG4gICAgICAgIFxyXG4gICAgICAgIGRlZiBvYmplY3RUeXBlQ2hlY2tsaXN0ID0gb2JqZWN0VHlwZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUJlYW4obmV3T2JqSWQpO1xyXG4gICAgICAgIGRlZiBuZXdPYmplY3RCZWFuID0gb2JqZWN0VHlwZUNoZWNrbGlzdC5jcmVhdGVNdXRhYmxlT2JqZWN0QmVhbigpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIG9iamVjdEF0dHJpYnV0ZUJlYW5zLmFkZChvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeS5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuRm9yT2JqZWN0KG5ld09iamVjdEJlYW4sIG5hbWVPYmplY3RUeXBlQXR0cmlidXRlQmVhbiwgaXNzdWUua2V5LnRvU3RyaW5nKCkpKTtcclxuICAgICAgICBvYmplY3RBdHRyaWJ1dGVCZWFucy5hZGQob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkuY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbkZvck9iamVjdChuZXdPYmplY3RCZWFuLCBjb21wbGV0ZWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbiwgXCJmYWxzZVwiKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbmV3T2JqZWN0QmVhbi5zZXRPYmplY3RBdHRyaWJ1dGVCZWFucyhvYmplY3RBdHRyaWJ1dGVCZWFucyk7XHJcbiAgICAgICAgLyogU3RvcmUgdGhlIG9iamVjdCBpbnRvIEluc2lnaHQuIFRoZSBuZXcgT2JqZWN0QmVhbiB3aWxsIGJlIHVwZGF0ZWQgd2l0aCBhbiB1bmlxdWUgSUQgKi9cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBuZXdPYmplY3RCZWFuID0gb2JqZWN0RmFjYWRlLnN0b3JlT2JqZWN0QmVhbihuZXdPYmplY3RCZWFuKTtcclxuICAgICAgICAgICAgbG9nLndhcm4oXCJuZXdPYmplY3RCZWFuOiBcIiArIG5ld09iamVjdEJlYW4pO1xyXG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHtcclxuICAgICAgICAgICAgbG9nLndhcm4oXCJDb3VsZCBub3QgY3JlYXRlIGlzc3VlIGR1ZSB0byB2YWxpZGF0aW9uIGV4Y2VwdGlvbjpcIiArIHZpZS5nZXRNZXNzYWdlKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjaGVja2xpc3RPYmplY3RzLmFkZChuZXdPYmplY3RCZWFuKVxyXG4gICAgICAgIFxyXG4gICAgICAgIGxvZy5pbmZvIChcImNoZWNrbGlzdE9iamVjdHM6IFwiICsgY2hlY2tsaXN0T2JqZWN0cylcclxuICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIWNoZWNrbGlzdE9iamVjdHMuaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgICAgIE11dGFibGVJc3N1ZSBtaSA9IChNdXRhYmxlSXNzdWUpIGlzc3VlO1xyXG4gICAgICAgICAgICBtaS5zZXRDdXN0b21GaWVsZFZhbHVlKGNoZWNrbGlzdEZpZWxkLCBjaGVja2xpc3RPYmplY3RzKTtcclxuICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSAgICAgIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="disabled">true</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="append.value"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.value">%%CURRENT_DATETIME%%</arg>
                  <arg name="uuid">3c8b59b8-8f1c-42c4-80b7-e41c4489cf6a</arg>
                  <arg name="field.name">customfield_22628</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.33.0</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdateissuestatus-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowcreatecomment-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowgeneratechangehistory-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowreindexissue-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="221" name="Clear OP_SUPPLIER">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">92c7bf91-5f62-49c4-bba0-b13767297b6d</arg>
                <arg name="FIELD_INVERT_CONDITION"></arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.UserCondition</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_USER_IDS">arianna.fabbri</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="3">
              <post-functions>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="uuid">bc2c77b9-422d-4c36-9198-94c3d5bcc1cb</arg>
                  <arg name="field">customfield_23235</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.33.0</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="field2">customfield_22813</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="281" name="Set Security">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">1b7d5faf-f701-433b-bfff-28879be13db0</arg>
                <arg name="FIELD_INVERT_CONDITION"></arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.UserCondition</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_USER_IDS">arianna.fabbri|||JIRAUSER58800</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="3">
              <post-functions>
                <function type="class">
                  <arg name="FIELD_SECURITY_LEVEL_ID">11600</arg>
                  <arg name="FIELD_FUNCTION_ID">006f388b-2114-4b75-aba7-ff0b7afc0cb2</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SetIssueSecurity</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SetIssueSecurity</arg>
                  <arg name="FIELD_CONDITION"></arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="4" name="In Progress">
      <meta name="jira.status.id">3</meta>
      <actions>
        <action id="51" name="Maintenance Completed" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">20204</meta>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">4c38acf4-2d87-4197-a86b-51b844dcbe39</arg>
              <arg name="FIELD_NOTES">YCFgQ2hlY2sgUklTS19ERVNDUklQVElPTiBpZiBSSVNLIEZPVU5EID0gdHJ1ZSBBTkQgZmllbGRzIHJlcXVpcmVkIGFuZCBtb2Rlcm5pemF0aW9uIG1hdGVyaWFscw==</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvblxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3JcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvbkJ1aWxkZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXJcbmltcG9ydCBqYXZhLnRleHQuU2ltcGxlRGF0ZUZvcm1hdDtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBqYXZhLnV0aWwuTWFwO1xuXG5cblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xuICAgIHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKVxuLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy02NTcxNjFcIilcblxuQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpO1xuZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XG5cbmRlZiBlcnJvcnMgPSBmYWxzZVxuZGVmIHdhcm5pbmdzID0gZmFsc2VcbmRlZiByaXNrRm91bmQgPSBmYWxzZVxuZGVmIGpvYkNvbXBsZXRlZCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9QTV9KT0JfUkVTT0xVVElPTlwiKVswXVxuZGVmIHJlcU1hdGVyaWFscyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YucmVxdWlyZWRNYXRlcmlhbHMnXS50b1N0cmluZygpKVswXVxuZGVmIG1vZE1hdGVyaWFscyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9NT0RFUk5JWkFUSU9OX01BVEVSSUFMU1wiKVswXVxuZGVmIGVycm9yRmllbGRzVG9CZUVtcHR5ID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgcmVxQW5kTW9kZXJyb3IgPSBmYWxzZVxuZGVmIGVycm9yTWFuZGF0b3J5RmllbGRzID0gZmFsc2VcblxuXG5kZWYgcmVxdWVzdE1ldGhvZCA9IFwiR0VUXCJcbmRlZiBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvYXV0b21hdGlvbi9BQS90aWNrZXQvXCIrIGlzc3VlICtcIi9nZXRSaXNrRm91bmRXaXRoRGVzY3JpcHRpb25cIlxuXG5cbmxvZy5kZWJ1ZyBiYXNlVVJMXG5VUkwgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbmNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbmNvbm5lY3Rpb24uY29ubmVjdCgpO1xuXG5cbmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5sb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG5cblxuaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgIGxvZy5kZWJ1ZyBcIkVycm9yU3RyZWFtOiBcIiArIGNvbm5lY3Rpb24uZ2V0RXJyb3JTdHJlYW0oKS50b1N0cmluZygpXG4gICAgbG9nLmRlYnVnIFwiZ2V0SGVhZGVyRmllbGRzKCk6IFwiICsgY29ubmVjdGlvbi5nZXRIZWFkZXJGaWVsZHMoKVxuICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHRcbiAgICBsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXG5cblxuICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcbiAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcblxuXG4gICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgIGVMaXN0RXJyb3JzLmFkZChcIk1BTkRBVE9SWV9SSVNLX0RFVEFJTFNcIilcbiAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGpzb25fb2JqZWN0Lm1lc3NhZ2UpXG4gICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcbiAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cblxuICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIkVcIiwgb3V0cHV0LnRvU3RyaW5nKCkpXG59XG5cblxuZGVmIGpzb25TbHVycGVyID0gbmV3IEpzb25TbHVycGVyKClcbmRlZiBqc29uX29iamVjdF9yZXNwID0ganNvblNsdXJwZXIucGFyc2UoY29ubmVjdGlvbi5nZXRJbnB1dFN0cmVhbSgpKVxuXG5cbnJpc2tGb3VuZCA9ICgoTWFwPFN0cmluZyxTdHJpbmc+KWpzb25fb2JqZWN0X3Jlc3ApLmdldChcIlJJU0tGT1VORFwiKTtcblxuXG5cbmlmKHJpc2tGb3VuZCA9PSBcInRydWVcIil7XG4gICAgZXJyb3JzID0gdHJ1ZVxuICAgIGVycm9yTWFuZGF0b3J5RmllbGRzID0gdHJ1ZVxufVxuXG4vL0pPQl9DT01QTEVURURcbiAvKkFGIDIxLjAzLjIwMjMgU29sbyBpbiBjYXNvIGRpIE9QX1BNX0pPQl9SRVNPTFVUSU9OID0gSk9CX0NPTVBMRVRFRCB2ZXJpZmljbyBjaGUgbm9uIGNpIHNpYW5vIG1hdGVyaWFsaSBuZWxsZSBcbnNlemlvbmkgUkVRVUlSRUQgTUFURVJJQUxTIGUgTU9ERVJOSVpBVElPTiovXG4gaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShqb2JDb21wbGV0ZWQpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMV9KT0JfQ09NUExFVEVEXCIpKXtcbiAgICAvL09QX1JFUVVJUkVEX01BVEVSSUFMUyBNVVNUIEJFIEVNUFRZXG4gICAgaWYoKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVxTWF0ZXJpYWxzKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVxTWF0ZXJpYWxzKSAhPSBcIlwiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcU1hdGVyaWFscykudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpKXtcbiAgICAgICAgZm9yKHJlcSBpbiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcU1hdGVyaWFscykpe1xuICAgICAgICAgICAgLypjaGVjayBERUxFVEVEIC0gSUYgQVQgTEVBU1QgMSBPQkogV0lUSCBERUxFVEVEPWZhbHNlIC0tPiBFUlJPUiovXG4gICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ocmVxLmdldElkKCksIFwiREVMRVRFRFwiKSl7XG4gICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHJlcS5nZXRJZCgpLCBcIkRFTEVURURcIikuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLnZhbHVlIT10cnVlKXtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JzID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICBlcnJvckZpZWxkc1RvQmVFbXB0eS5hZGQocHJvcGVydGllc1snY2YucmVxdWlyZWRNYXRlcmlhbHMnXS50b1N0cmluZygpKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgICAgICAgICBlcnJvckZpZWxkc1RvQmVFbXB0eS5hZGQocHJvcGVydGllc1snY2YucmVxdWlyZWRNYXRlcmlhbHMnXS50b1N0cmluZygpKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vT1BfTU9ERVJOSVpBVElPTl9NQVRFUklBTFMgTVVTVCBCRSBFTVBUWVxuICAgIGlmKChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG1vZE1hdGVyaWFscykhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG1vZE1hdGVyaWFscykgIT0gXCJcIiAmJiAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShtb2RNYXRlcmlhbHMpLnRvU3RyaW5nKCkuZXF1YWxzKFwiXCIpKSl7XG4gICAgICAgIGZvcihyZXEgaW4gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShtb2RNYXRlcmlhbHMpKXtcbiAgICAgICAgICAgIC8qY2hlY2sgREVMRVRFRCAtIElGIEFUIExFQVNUIDEgT0JKIFdJVEggREVMRVRFRD1mYWxzZSAtLT4gRVJST1IqL1xuICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHJlcS5nZXRJZCgpLCBcIkRFTEVURURcIikpe1xuICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihyZXEuZ2V0SWQoKSwgXCJERUxFVEVEXCIpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS52YWx1ZSE9dHJ1ZSl7XG4gICAgICAgICAgICAgICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBlcnJvcnMgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYoZXJyb3JzKXtcbiAgICAgICAgICAgIGVycm9yRmllbGRzVG9CZUVtcHR5LmFkZChcIk9QX01PREVSTklaQVRJT05fTUFURVJJQUxTXCIpXG4gICAgICAgIH1cbiAgICB9XG4gfSAgIFxuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShqb2JDb21wbGV0ZWQpLnRvU3RyaW5nKCkuZXF1YWxzKFwiM19RVU9UQVRJT05cIikpe1xuICAgIC8vMjEuMDMuMjAyMyBBRiBTZSBzZWxlemlvbm8gM19RVU9UQVRJT04gcG9zc286XG4gICAgLy8gLSBub24gY29tcGlsYXJlIG5lc3N1bmEgc2V6aW9uZSBkaSBtYXRlcmlhbGkgLS0+IHBlciBnZW5lcmFyZSBxdW90ZWQgd29yayBkaSBzb2xhIG1hbm9kb3BlcmFcbiAgICAvLyAtIGNvbXBpbGFyZSBsYSBzZXppb25lIHJlcSBtYXRlcmlhbHMgLS0+IHBlciBnZW5lcmFyZSBxdW90ZWQgd29yayBkaSBtYXRlcmlhbGkgZSBtYW5vZG9wZXJhXG4gICAgLy8gLSBjb21waWxhcmUgbGEgc2V6aW9uZSBtb2Rlcm5pemF0aW9uIC0tPiBwZXIgZ2VuZXJhcmUgcXVvdGVkIHdvcmsgZGkgdGlwbyBtb2Rlcm5pemF0aW9uXG4gICAgLy8gTk9OIFx1MDBlOCBwb3NzaWJpbGUgY29tcGlsYXJlIHNpYSBtb2Rlcm5pemF0aW9uIGNoZSByZXEgbWF0ZXJpYWxzXG4gICAgZGVmIGFsbERlbGV0ZWQ9dHJ1ZSwgYWxsRGVsZXRlZE1vZD10cnVlXG4gICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXFNYXRlcmlhbHMpIT1udWxsICYmIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUobW9kTWF0ZXJpYWxzKSE9bnVsbCl7XG4gICAgICAgIC8vMjguMDIuMjAyMyAtIEVycm9yZSBzZSBjaSBzb25vIHNpYSByZXEgY2hlIG1vZCBtYXRlcmlhbHMgbm9uIGRlbGV0ZWQgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICBmb3IocmVxIGluIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVxTWF0ZXJpYWxzKSl7XG4gICAgICAgICAgICAvKmNoZWNrIERFTEVURUQgLSBJRiBBVCBMRUFTVCAxIE9CSiBXSVRIIERFTEVURUQ9ZmFsc2UgLS0+IEVSUk9SKi9cbiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihyZXEuZ2V0SWQoKSwgXCJERUxFVEVEXCIpKXtcbiAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ocmVxLmdldElkKCksIFwiREVMRVRFRFwiKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0udmFsdWUhPXRydWUpe1xuICAgICAgICAgICAgICAgICAgICBhbGxEZWxldGVkPWZhbHNlXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgYWxsRGVsZXRlZD1mYWxzZVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yKG1vZCBpbiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG1vZE1hdGVyaWFscykpe1xuICAgICAgICAgICAgLypjaGVjayBERUxFVEVEIC0gSUYgQVQgTEVBU1QgMSBPQkogV0lUSCBERUxFVEVEPWZhbHNlIC0tPiBFUlJPUiovXG4gICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obW9kLmdldElkKCksIFwiREVMRVRFRFwiKSl7XG4gICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG1vZC5nZXRJZCgpLCBcIkRFTEVURURcIikuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLnZhbHVlIT10cnVlKXtcbiAgICAgICAgICAgICAgICAgICAgYWxsRGVsZXRlZE1vZD1mYWxzZVxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGFsbERlbGV0ZWRNb2Q9ZmFsc2VcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmKCFhbGxEZWxldGVkICYmICFhbGxEZWxldGVkTW9kKXtcbiAgICAgICAgICAgIGVycm9ycyA9IHRydWVcbiAgICAgICAgICAgIHJlcUFuZE1vZGVycm9yID0gdHJ1ZVxuICAgICAgICB9XG4gICAgfVxuIH1cblxuIGlmICghZXJyb3JzICYmICF3YXJuaW5ncyl7XG4gICAgcmV0dXJuIHRydWVcbiB9ZWxzZXtcbiAgICBpZihlcnJvcnMgJiYgIXdhcm5pbmdzKXtcbiAgICAgICAgaWYoZXJyb3JGaWVsZHNUb0JlRW1wdHkuc2l6ZSgpID4gMCl7XG4gICAgICAgICAgICBkZWYgZUxpc3RFbXB0eSA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgZUxpc3RFbXB0eS5hZGQoXCJFXCIpXG4gICAgICAgICAgICBlTGlzdEVtcHR5LmFkZChcIlFVT1RBVElPTl9GSUVMRFNfVE9fQkVfRU1QVFlcIilcbiAgICAgICAgICAgIGVMaXN0RW1wdHkuYWRkKG51bGwpXG4gICAgICAgICAgICBlTGlzdEVtcHR5LmFkZChlcnJvckZpZWxkc1RvQmVFbXB0eSlcbiAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdEVtcHR5KVxuICAgICAgICB9XG4gICAgICAgIGlmKHJlcUFuZE1vZGVycm9yKXtcbiAgICAgICAgICAgIGRlZiBlTGlzdEVycm9yUmVxQW5kTW9kZXJyb3IgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIGVMaXN0RXJyb3JSZXFBbmRNb2RlcnJvci5hZGQoXCJFXCIpXG4gICAgICAgICAgICBlTGlzdEVycm9yUmVxQW5kTW9kZXJyb3IuYWRkKFwiU0VMRUNUX1JFUVVJUkVEX09SX01PREVSTklaQVRJT05fUEFSVFNcIilcbiAgICAgICAgICAgIGVMaXN0RXJyb3JSZXFBbmRNb2RlcnJvci5hZGQobnVsbClcbiAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9yUmVxQW5kTW9kZXJyb3IpXG4gICAgICAgIH1cbiAgICAgICAgaWYoZXJyb3JNYW5kYXRvcnlGaWVsZHMpe1xuICAgICAgICAgICAgZGVmIGVMaXN0TWFuZGF0b3J5ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoXCJFXCIpXG4gICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoXCJNQU5EQVRPUllfUklTS19ERVRBSUxTXCIpXG4gICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQobnVsbClcbiAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdE1hbmRhdG9yeSlcbiAgICAgICAgfVxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICBsb2cuZGVidWcgXCJ0aHJvdyBleGNlcHRpb246IFwiICsgb3V0cHV0LnRvU3RyaW5nKClcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIkVcIiwgb3V0cHV0LnRvU3RyaW5nKCkpICAgXG4gICAgfVxuICAgIGlmKGVycm9ycyAmJiB3YXJuaW5ncyl7XG4gICAgICAgIGRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICBpZihlcnJvckZpZWxkc1RvQmVFbXB0eS5zaXplKCkgPiAwKXtcbiAgICAgICAgICAgIGRlZiBlTGlzdEVtcHR5ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICBlTGlzdEVtcHR5LmFkZChcIkVcIilcbiAgICAgICAgICAgIGVMaXN0RW1wdHkuYWRkKFwiUVVPVEFUSU9OX0ZJRUxEU19UT19CRV9FTVBUWVwiKVxuICAgICAgICAgICAgZUxpc3RFbXB0eS5hZGQobnVsbClcbiAgICAgICAgICAgIGVMaXN0RW1wdHkuYWRkKGVycm9yRmllbGRzVG9CZUVtcHR5KVxuICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RW1wdHkpXG4gICAgICAgIH1cbiAgICAgICAgaWYocmVxQW5kTW9kZXJyb3Ipe1xuICAgICAgICAgICAgZGVmIGVMaXN0RXJyb3JSZXFBbmRNb2RlcnJvciA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgZUxpc3RFcnJvclJlcUFuZE1vZGVycm9yLmFkZChcIkVcIilcbiAgICAgICAgICAgIGVMaXN0RXJyb3JSZXFBbmRNb2RlcnJvci5hZGQoXCJTRUxFQ1RfUkVRVUlSRURfT1JfTU9ERVJOSVpBVElPTl9QQVJUU1wiKVxuICAgICAgICAgICAgZUxpc3RFcnJvclJlcUFuZE1vZGVycm9yLmFkZChudWxsKVxuICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JSZXFBbmRNb2RlcnJvcilcbiAgICAgICAgfVxuICAgICAgICBpZihlcnJvck1hbmRhdG9yeUZpZWxkcyl7XG4gICAgICAgICAgICBkZWYgZUxpc3RNYW5kYXRvcnkgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChcIkVcIilcbiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChcIk1BTkRBVE9SWV9SSVNLX0RFVEFJTFNcIilcbiAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChudWxsKVxuICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0TWFuZGF0b3J5KVxuICAgICAgICB9XG4gICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgIG91dHB1dC5hZGQod0xpc3QpXG4gICAgICAgIGxvZy5kZWJ1ZyBcInRocm93IGV4Y2VwdGlvbjogXCIgKyBvdXRwdXQudG9TdHJpbmcoKVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJXRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIldFXCIsIG91dHB1dC50b1N0cmluZygpKSAgXG4gICAgfVxuIH0iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">3cfcef78-5d10-4849-85dd-55c3e0e0b17a</arg>
              <arg name="FIELD_NOTES">YCFgTG9nIFRpbWVzdGFtcCBmb3IgVGVjaCBhY3Rpdml0eSAmIFVwZGF0ZSBKb2IgQ29tcGxldGVkIC0gRG8gbm90IHVwZGF0ZSBKb2IgQ29tcGxldGVkIGZvciB0aGUgTEFTVCBQTSBUYXNrIGV4ZWN1dGVk</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiIvKiAtLS0tLS0tLS0tLS0tLS0tLS0gQUNUSU9OIEVORCBXT1JLSU5HIC0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0gVFJBQ0VfQUNUSU9OX1NUQVRVUyA9IFdPUksgLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLSBBQ1RJT04gPSBKT0JfQ09NUExFVEVEIC0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5iYy5pc3N1ZS5zZWFyY2guU2VhcmNoU2VydmljZVxyXG5pbXBvcnQgamF2YS51dGlsLnN0cmVhbS5Db2xsZWN0b3JzXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVcclxuaW1wb3J0IGphdmEuc3FsLlRpbWVzdGFtcFxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbmZpZy5TdWJUYXNrTWFuYWdlclxyXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cclxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyO1xyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmpxbC5wYXJzZXIuSnFsUXVlcnlQYXJzZXJcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS53ZWIuYmVhbi5QYWdlckZpbHRlclxyXG5pbXBvcnQgc3RhdGljIGphdmEubmV0Lkh0dHBVUkxDb25uZWN0aW9uLkhUVFBfT0tcclxuXHJcblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcclxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKCcvdmFyL2F0bGFzc2lhbi9hcHBsaWNhdGlvbi1kYXRhL3NoYXJlZC9zY3JpcHRzL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcclxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcclxuICAgIHByb3BlcnRpZXMubG9hZChpdClcclxufVxyXG5cclxuXHJcbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cclxuQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyBcclxuZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XHJcbiAgXHJcbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBUeXBlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xyXG5DbGFzcyBvYmplY3RUeXBlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUZhY2FkZVwiKTsgXHJcbmRlZiBvYmplY3RUeXBlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVGYWNhZGVDbGFzcyk7XHJcbiAgXHJcbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBBdHRyaWJ1dGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXHJcbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpOyBcclxuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcclxuICBcclxuQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7IFxyXG5kZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XHJcbkNsYXNzIGlxbEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLklRTEZhY2FkZVwiKTsgXHJcbmRlZiBpcWxGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUoaXFsRmFjYWRlQ2xhc3MpO1xyXG5kZWYganFsUXVlcnlQYXJzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSnFsUXVlcnlQYXJzZXIpXHJcblxyXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKClcclxuLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy0xOTYwNjlcIilcclxuXHJcbmRlZiBzZWFyY2hTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KFNlYXJjaFNlcnZpY2UpXHJcbmRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXHJcbi8qMjUuMTEuMjIqL1xyXG5kZWYgbG9jYWxUaW1lU3RhbXBcclxuZGVmIGxvY2FsRGF0ZVxyXG4vKjAzLjEwLjIzKi9cclxuZGVmIERBVEVUSU1FX09GRlNFVCA9IHByb3BlcnRpZXNbJ3dmLnRyLmRhdGV0aW1ld2l0aG9mZnNldCddLnRvU3RyaW5nKClcclxubG9nLmRlYnVnIFwiREFURVRJTUVfT0ZGU0VUOiBcIiArIERBVEVUSU1FX09GRlNFVFxyXG5pZiAoREFURVRJTUVfT0ZGU0VUICE9IG51bGwgJiYgREFURVRJTUVfT0ZGU0VUICE9ICdudWxsJyl7XHJcblxyXG4gICAgZGVmIHNpdGVDRiA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1NJVEVcIilbMF07XHJcbiAgICBkZWYgc2l0ZSwgc2l0ZUtleSwgc2l0ZU9iamVjdCwgdmlzaWJpbGl0eSwgdmlzaWJpbGl0eUtleVxyXG4gICAgaWYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2l0ZUNGKSAhPSBudWxsKSB7XHJcbiAgICAgICAgc2l0ZSA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2l0ZUNGKS50b1N0cmluZygpXHJcbiAgICAgICAgc2l0ZUtleSA9IHNpdGUuc3Vic3RyaW5nKHNpdGUubGFzdEluZGV4T2YoJygnKSArIDEsIHNpdGUubGFzdEluZGV4T2YoJyknKSlcclxuICAgICAgICBzaXRlT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHNpdGVLZXkpXHJcbiAgICAgICAgdmlzaWJpbGl0eSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1RLVF9WSVNJQklMSVRZX0tFWVwiKVswXVxyXG4gICAgICAgIHZpc2liaWxpdHlLZXkgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHZpc2liaWxpdHkpWzBdLnRvU3RyaW5nKCkuc3Vic3RyaW5nKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodmlzaWJpbGl0eSlbMF0udG9TdHJpbmcoKS5sYXN0SW5kZXhPZignKCcpICsgMSwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh2aXNpYmlsaXR5KVswXS50b1N0cmluZygpLmxhc3RJbmRleE9mKCcpJykpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZpc2liaWxpdHkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9JTkRJUkVDVF9KT0JfVEtUX1ZJU0lCSUxJVFlcIilbMF1cclxuICAgICAgICB2aXNpYmlsaXR5S2V5ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh2aXNpYmlsaXR5KVswXS50b1N0cmluZygpLnN1YnN0cmluZyhpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHZpc2liaWxpdHkpWzBdLnRvU3RyaW5nKCkubGFzdEluZGV4T2YoJygnKSArIDEsIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodmlzaWJpbGl0eSlbMF0udG9TdHJpbmcoKS5sYXN0SW5kZXhPZignKScpKVxyXG4gICAgfVxyXG4gICAgZGVmIHRpbWVab25lXHJcbiAgICBkZWYgY29tcGFueVJlZiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4odmlzaWJpbGl0eUtleSkuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai52aXNpYmlsaXR5S2V5LmNvbXBhbnlSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7XHJcbiAgICBsb2cuaW5mbyBcImNvbXBhbnlSZWY6IFwiICsgY29tcGFueVJlZlxyXG4gICAgZGVmIGNvbXBhbnlSZWZJZCA9IGNvbXBhbnlSZWZbMF0uZ2V0UmVmZXJlbmNlZE9iamVjdEJlYW5JZCgpXHJcbiAgICBsb2cuZGVidWcgXCJjb21wYW55UmVmSWQ6XCIgKyBjb21wYW55UmVmSWRcclxuICAgIGlmIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNpdGVDRikgIT0gbnVsbCAmJiBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oc2l0ZU9iamVjdC5nZXRJZCgpLCBcIlNJVEVfUkVGXCIpKSB7XHJcbiAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oc2l0ZU9iamVjdC5nZXRJZCgpLCBcIlNJVEVfUkVGXCIpLmNyZWF0ZU11dGFibGUoKVxyXG4gICAgICAgIHMgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcclxuICAgICAgICBzID0gcy50b1N0cmluZygpXHJcbiAgICAgICAgc0tleSA9IHMuc3Vic3RyaW5nKHMubGFzdEluZGV4T2YoJygnKSArIDEsIHMubGFzdEluZGV4T2YoJyknKSlcclxuICAgICAgICBpZiAob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHNLZXkudG9JbnRlZ2VyKCksIFwiVElNRV9aT05FXCIpKSB7XHJcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHNLZXkudG9JbnRlZ2VyKCksIFwiVElNRV9aT05FXCIpLmNyZWF0ZU11dGFibGUoKVxyXG4gICAgICAgICAgICB0aW1lWm9uZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxyXG4gICAgICAgICAgICB0aW1lWm9uZSA9IHRpbWVab25lWzBdLmdldFZhbHVlKClcclxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiVGltZVpvbmUgZGEgU2l0ZTogXCIgKyB0aW1lWm9uZVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcGFueVJlZklkLnRvSW50ZWdlcigpLCBcIlRJTUVfWk9ORVwiKSkge1xyXG4gICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcGFueVJlZklkLnRvSW50ZWdlcigpLCBcIlRJTUVfWk9ORVwiKS5jcmVhdGVNdXRhYmxlKClcclxuICAgICAgICAgICAgICAgIHRpbWVab25lID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXHJcbiAgICAgICAgICAgICAgICB0aW1lWm9uZSA9IHRpbWVab25lWzBdLmdldFZhbHVlKClcclxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlRpbWVab25lIGRhIENvbXBhbnk6IFwiICsgdGltZVpvbmVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wYW55UmVmSWQudG9JbnRlZ2VyKCksIFwiVElNRV9aT05FXCIpKSB7XHJcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBhbnlSZWZJZC50b0ludGVnZXIoKSwgXCJUSU1FX1pPTkVcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICAgICAgICAgIHRpbWVab25lID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXHJcbiAgICAgICAgICAgIHRpbWVab25lID0gdGltZVpvbmVbMF0uZ2V0VmFsdWUoKVxyXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJUaW1lWm9uZSBkYSBDb21wYW55OiBcIiArIHRpbWVab25lXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKCF0aW1lWm9uZSkge1xyXG4gICAgICAgIHRpbWVab25lID0gXCJFdXJvcGUvUm9tZVwiXHJcbiAgICB9XHJcbiAgICBsb2cuZGVidWcgXCJ0aW1lWm9uZTogXCIgKyB0aW1lWm9uZVxyXG4gICAgbG9jYWxUaW1lU3RhbXAgPSAobmV3IFRpbWVzdGFtcCgobmV3IERhdGUobmV3IERhdGUoKS5nZXRUaW1lKCkgLSBUaW1lWm9uZS5nZXREZWZhdWx0KCkuZ2V0UmF3T2Zmc2V0KCkgKyBUaW1lWm9uZS5nZXRUaW1lWm9uZSh0aW1lWm9uZS50b1N0cmluZygpKS5nZXRSYXdPZmZzZXQoKSkpLnRpbWUpKS50b1N0cmluZygpXHJcbiAgICBsb2NhbERhdGUgPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIFRpbWVab25lLmdldERlZmF1bHQoKS5nZXRSYXdPZmZzZXQoKSArIFRpbWVab25lLmdldFRpbWVab25lKHRpbWVab25lLnRvU3RyaW5nKCkpLmdldFJhd09mZnNldCgpKVxyXG5cclxufSBlbHNle1xyXG4gICAgbG9jYWxUaW1lU3RhbXAgPSAgKG5ldyBUaW1lc3RhbXAoKG5ldyBEYXRlKCkpLnRpbWUpKS50b1N0cmluZygpXHJcbiAgICBsb2NhbERhdGUgPSAgbmV3IERhdGUoKVxyXG59XHJcblxyXG5sb2cuZGVidWcgXCJsb2NhbFRpbWVTdGFtcDogXCIgKyBsb2NhbFRpbWVTdGFtcFxyXG5sb2cuZGVidWcgXCJsb2NhbERhdGU6IFwiICsgbG9jYWxEYXRlXHJcbi8qMjUuMTEuMjIqL1xyXG5cclxuZGVmIHRyb3ZhdG89ZmFsc2UsIHJlb3BlbmVkPWZhbHNlXHJcbmZvciAocyBpbiBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yuc3VwcGxpZXInXS50b1N0cmluZygpKSl7XHJcbiAgICBpZiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzKSAhPSBudWxsKXtcclxuICAgICAgICB0cm92YXRvPXRydWVcclxuICAgIH1cclxufVxyXG5cclxuZGVmIHVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcclxuXHJcbi8vU2UgaWwgdGlja2V0IFx1MDBlOCBlc2VndWl0byBkYSB0ZWNuaWNpIGludGVybmkgZXNlZ3VvIGlsIHRyYWNlIGF1dG9tYXRpY28gZGVpIHRlbXBpXHJcbmlmICghdHJvdmF0bykge1xyXG4gICAgXHJcbiAgICBkZWYgb3BNYW51YWxseVJlb3BlbmVkQ2YgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9NQU5VQUxMWV9SRU9QRU5FRFwiKVswXTtcclxuICAgIFN0cmluZyBvcE1hbnVhbGx5UmVvcGVuZWQgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG9wTWFudWFsbHlSZW9wZW5lZENmKS50b1N0cmluZygpO1xyXG4gICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfQ1VSUkVOVF9VU0VSXCIpWzBdO1xyXG4gICAgZGVmIG9uU2l0ZVRlY2hzVHJhY2VGaWVsZCA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1RFQ0hOSUNJQU5fQUNUSVZJVElFU19UUkFDRV9XT1JLXCIpWzBdO1xyXG4gICAgZGVmIG9uU2l0ZVRlY2hzRmllbGQgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9URUNITklDSUFOU19PTlNJVEVcIilbMF07XHJcbiAgICBkZWYgb25TaXRlVGVjaE9iamVjdHMgPSBuZXcgQXJyYXlMaXN0KCk7XHJcbiAgICBpbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXHJcbiAgICBpbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXHJcbiAgICBcclxuICAgIC8qIC0tLS0tLS0tLS0tLSBERUZJTkUgQUNUSU9OIFRPIEJFIFRSQUNFRCBBTkQgU0VUIFRPIEJFIERPTkUgLS0tLS0tLS0tLS0tLSAqL1xyXG4gICAgZGVmIEFDVElPTiA9IHByb3BlcnRpZXNbJ3dmLnRyLmpvYkNvbXBsZXRlZC5hY3Rpb24nXS50b1N0cmluZygpIC8vIFdPUktcclxuICAgIGRlZiBTRVQgPSBwcm9wZXJ0aWVzWyd3Zi50ci5qb2JDb21wbGV0ZWQuc2V0J10udG9TdHJpbmcoKSAgICAgICAvLyBKT0JfQ09NUExFVEVEXHJcbiAgICBcclxuICAgIGRlZiBPTlNJVEVfVEVDSF9SRVBPUlRfT0JKX1RZUEU9cHJvcGVydGllc1snaW9iai5vblNpdGVUZWNoUmVwb3J0J10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG4gICAgZGVmIE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX05BTUU9cHJvcGVydGllc1snaW9iai5vblNpdGVUZWNoUmVwb3J0Lm5hbWUuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXHJcbiAgICBkZWYgT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfVEVDSE5JQ0lBTl9SRUY9cHJvcGVydGllc1snaW9iai5vblNpdGVUZWNoUmVwb3J0LnRlY2huaWNpYW5SZWYuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXHJcbiAgICBkZWYgT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfSk9CX0NPTVBMRVRFRD1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVRlY2hSZXBvcnQuam9iQ29tcGxldGVkLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG4gICAgZGVmIE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX0pPQl9TVEFSVEVEPXByb3BlcnRpZXNbJ2lvYmoub25TaXRlVGVjaFJlcG9ydC5qb2JTdGFydGVkLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG4gICAgZGVmIE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX1RSQUNFX0FDVElPTj1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVRlY2hSZXBvcnQudHJhY2VBY3Rpb24uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXHJcbiAgICBcclxuICAgIGxvZy53YXJuIFwiKioqKioqKioqKioqKioqKioqKioqKiBDT05GSVJNIEFTU0VUICoqKioqKioqKioqKioqKioqKioqKipcIlxyXG4gICAgZGVmIHRlY2huaWNpYW5zID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoT1BBQSwgXCJvYmplY3RUeXBlID0gVGVjaG5pY2lhbiBBTkQgVEVDSE5JQ0lBTl9SRUYuVEVDSF9BQ0NPVU5UID1cXFwiXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1cnJlbnRVc2VyKS50b1N0cmluZygpICsgXCJcXFwiXCIpXHJcbiAgICBsb2cuaW5mbyBcImlxbDogXCIgKyBcIm9iamVjdFR5cGUgPSBUZWNobmljaWFuIEFORCBURUNITklDSUFOX1JFRi5URUNIX0FDQ09VTlQgPVxcXCJcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VycmVudFVzZXIpLnRvU3RyaW5nKCkgKyBcIlxcXCJcIlxyXG4gICAgXHJcbiAgICBmb3IgKHRlY2huaWNpYW4gaW4gdGVjaG5pY2lhbnMpIHtcclxuICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3RcclxuICAgICAgICBkZWYgdGVjaD10ZWNobmljaWFuLnRvU3RyaW5nKClcclxuICAgICAgICBkZWYgdGVjaEtleSA9IHRlY2guc3Vic3RyaW5nKHRlY2gubGFzdEluZGV4T2YoJygnKSArIDEsIHRlY2gubGFzdEluZGV4T2YoJyknKSlcclxuICAgICAgICBkZWYgdGVjaE5hbWUgPSB0ZWNoLnN1YnN0cmluZygwLCB0ZWNoLmxhc3RJbmRleE9mKCcoJykgLSAxKVxyXG4gICAgICAgIGRlZiB0ZWNoT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHRlY2hLZXkpXHJcbiAgICAgICAgbG9nLmluZm8gXCJ0ZWNoS2V5OiBcIiArIHRlY2hLZXlcclxuICAgICAgICBsb2cuaW5mbyBcInRlY2hOYW1lOiBcIiArIHRlY2hOYW1lXHJcbiAgICAgICAgbG9nLmluZm8gXCJ0ZWNoT2JqZWN0OiBcIiArIHRlY2hPYmplY3RcclxuICAgICAgICBsb2cuaW5mbyBcIlNFVDogXCIgK1NFVFxyXG4gICAgICAgIC8vU0VBUkNIIE9CSkVDVCBUTyBCRSBVUERBVEVEXHJcblxyXG4gICAgICAgIExpc3Qgb2JqZWN0cyA9IGZpbmRPbnNpdGVUZWNoQnlJc3N1ZUFuZEtleShbaXNzdWUua2V5XSwgdGVjaEtleSwgcHJvcGVydGllcylcclxuICAgICAgICBsb2cuaW5mbyhcIi0tLS0tLS0gb2JqZWN0cyAtLS0tLS0tLS0tIFwiK29iamVjdHMpXHJcblxyXG4gICAgICAgIGlmICghb2JqZWN0cy5pc0VtcHR5KCkpIHtcclxuICAgICAgICAgICAgLypVUERBVEUgSk9CX0NPTVBMRVRFRCBPTiBTRUxFQ1RFRCBPQkpFQ1QqLyAgICAgXHJcbiAgICAgICAgICAgIC8qMzAuMDYuMjAyMiBBRiBTZSBcdTAwZTggbCd1bHRpbW8gc3ViLXRhc2sgYSBlc3NlcmUgY29tcGxldGF0byBOT04gc2Fsdm8gaWwgdGltZXN0YW1wIGRpIGZpbmUgbGF2b3JvIGNoZSB2ZXJyXHUwMGUwIGNvbXBpbGF0byBhIGNoaXVzdXJhIGRlbCB0aWNrZXQgcGFkcmUqL1xyXG4gICAgICAgICAgICBTdWJUYXNrTWFuYWdlciBzdWJUYXNrTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldFN1YlRhc2tNYW5hZ2VyKCk7XHJcbiAgICAgICAgICAgIENvbGxlY3Rpb24gc3ViVGFza3MgPSBpc3N1ZS5nZXRQYXJlbnRPYmplY3QoKS5nZXRTdWJUYXNrT2JqZWN0cygpXHJcbiAgICAgICAgICAgIGRlZiBsYXN0ID0gdHJ1ZVxyXG4gICAgICAgICAgICBpZiAoIXN1YlRhc2tzLmVtcHR5KSB7XHJcbiAgICAgICAgICAgICAgICBMaXN0IHN1YnRhc2tTdGF0dXNDb25kaXRpb24gPSBbIFwiRG9uZVwiLCBcIlJlbW92ZWRcIiwgXCJSZWplY3RlZFwiLCBcIkNhbmNlbGVkXCJdXHJcbiAgICAgICAgICAgICAgICBzdWJUYXNrcy5lYWNoIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXN1YnRhc2tTdGF0dXNDb25kaXRpb24uY29udGFpbnMoaXQuc3RhdHVzLm5hbWUpICYmICFpdC5rZXkuZXF1YWxzKGlzc3VlLmtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdCA9IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5pbmZvIFwiZm91bmQgYW5vdGhlciBzdWJ0YXNrICgke2l0LmtleX0pIHRoYXQgaXMgbm90IGluIHN0YXR1cyBEb25lLCBSZW1vdmVkLCBSZWplY3RlZCwgQ2FuY2VsZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWxhc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWYgb2JqID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKG9iamVjdHNbMF0uaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYlR5cGUgPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihPTlNJVEVfVEVDSF9SRVBPUlRfQVRUUl9KT0JfQ09NUExFVEVEKTsgXHJcbiAgICAgICAgICAgICAgICAgICAgbG9nLmluZm8gXCJhdHRyaWJUeXBlOiBcIiArIGF0dHJpYlR5cGUudG9TdHJpbmcoKVxyXG4gICAgICAgICAgICAgICAgICAgIG5ld0F0dHJpYiA9IG9iai5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKGF0dHJpYlR5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZiBuZXdBdHRyaWJWYWx1ZSA9IG5ld0F0dHJpYi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTtcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdBdHRyaWJWYWx1ZS5zZXREYXRlVmFsdWUobG9jYWxEYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiU0VUSU5TSUdIVFZBTFVFOiBVbmFibGUgdG8gc2V0IGF0dHJpYnV0ZSBcIiArIGF0dHJpYlR5cGUudG9TdHJpbmcoKSArIFwiIHRvIFwiICsgbG9jYWxUaW1lU3RhbXAgKyBcIi4gRXhpdGluZy5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiU0VUSU5TSUdIVFZBTFVFOiBcIiArIHZpZS5nZXRNZXNzYWdlKCkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmIGF0dHJpYlZhbHVlcyA9IG5ld0F0dHJpYi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXR0cmliVmFsdWVzLmFkZChuZXdBdHRyaWJWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3QXR0cmliLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoYXR0cmliVmFsdWVzKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdBdHRyaWIgPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG5ld0F0dHJpYik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIlNFVElOU0lHSFRWQUxVRTogVW5hYmxlIHRvIHNhdmUgY2hhbmdlcy4gRXhpdGluZy5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiU0VUSU5TSUdIVFZBTFVFOiBcIiArIHZpZS5nZXRNZXNzYWdlKCkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qVmVyaWZpY2FyZSBzZSB1biBhbHRybyBQTSBUYXNrIHByaW1hIGRpIHF1ZXN0byBlcmEgc3RhdG8gY29uc2lkZXJhdG8gdWx0aW1vIChhZCBlcy4gcGVyY2hcdTAwZTggZG9wbyBhdmVybGkgY29tcGxldGF0aSB0dXR0aSBobyBmYXR0byBhZ2dpdW5naSBpbXBpYW50bykqL1xyXG4gICAgICAgICAgICAgICAgICAgIC8qU2Ugc2ksIGFnZ2lvcm5hcmUgSk9CX0NPTVBMRVRFRCBzdWwgcHJlY2VkZW50ZSA9IGEgSk9CX1NUQVJURUQgZGkgcXVlbGxvIGNvcnJlbnRlIGUgY29uc2lkZXJhcmUgcXVlc3RvIGNvbWUgdWx0aW1vKi9cclxuICAgICAgICAgICAgICAgICAgICAvKlNFQVJDSCBPQkpFQ1QgVE8gQkUgVVBEQVRFRCovXHJcbiAgICAgICAgICAgICAgICAgICAgTGlzdDxTdHJpbmc+IG90aGVyU3VidGFza3MgPSBpc3N1ZS5nZXRQYXJlbnRPYmplY3QoKS5nZXRTdWJUYXNrT2JqZWN0cygpLnN0cmVhbSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIocyAtPiAhcy5zdGF0dXMubmFtZS5lcXVhbHMoXCJSZW1vdmVkXCIpICYmICAhcy5zdGF0dXMubmFtZS5lcXVhbHMoXCJSZWplY3RlZFwiKSAmJiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICFzLnN0YXR1cy5uYW1lLmVxdWFscyhcIkNhbmNlbGVkXCIpICYmICFzLmdldEtleSgpLmVxdWFscyhpc3N1ZS5nZXRLZXkoKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoSXNzdWU6OmdldEtleSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmNvbGxlY3QoQ29sbGVjdG9ycy50b0xpc3QoKSlcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvdGhlclN1YnRhc2tzLmlzRW1wdHkoKSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgTGlzdCBsYXN0T2JqZWN0cyA9IGZpbmRPbnNpdGVUZWNoQnlJc3N1ZUFuZEtleShvdGhlclN1YnRhc2tzLCB0ZWNoS2V5LCBwcm9wZXJ0aWVzKTsgLy8gaW4gY2FzbyBkaSBlcnJvcmUgc2NvcHBpYVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsYXN0T2JqZWN0cy5pc0VtcHR5KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBsYXN0T2JqZWN0c1swXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIGxhc3RPYmogPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4obGFzdE9iamVjdHNbMF0uaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmliVHlwZSA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX0pPQl9DT01QTEVURUQpOyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5pbmZvIFwiYXR0cmliVHlwZTogXCIgKyBhdHRyaWJUeXBlLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0F0dHJpYiA9IGxhc3RPYmouY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihhdHRyaWJUeXBlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBuZXdBdHRyaWJWYWx1ZSA9IG5ld0F0dHJpYi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKkdldCBKT0JfU1RBUlRFRCBmcm9tIGN1cnJlbnQgb2JqKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihvYmplY3RzWzBdLmlkLCBcIkpPQl9TVEFSVEVEXCIpLmNyZWF0ZU11dGFibGUoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIHN0YXJ0ZWQgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3QXR0cmliVmFsdWUuc2V0RGF0ZVZhbHVlKHN0YXJ0ZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiU0VUSU5TSUdIVFZBTFVFOiBVbmFibGUgdG8gc2V0IGF0dHJpYnV0ZSBcIiArIGF0dHJpYlR5cGUudG9TdHJpbmcoKSArIFwiIHRvIFwiICsgbG9jYWxUaW1lU3RhbXAgKyBcIi4gRXhpdGluZy5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJTRVRJTlNJR0hUVkFMVUU6IFwiICsgdmllLmdldE1lc3NhZ2UoKS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIGF0dHJpYlZhbHVlcyA9IG5ld0F0dHJpYi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJWYWx1ZXMuYWRkKG5ld0F0dHJpYlZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0F0dHJpYi5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKGF0dHJpYlZhbHVlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdBdHRyaWIgPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG5ld0F0dHJpYik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJTRVRJTlNJR0hUVkFMVUU6IFVuYWJsZSB0byBzYXZlIGNoYW5nZXMuIEV4aXRpbmcuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiU0VUSU5TSUdIVFZBTFVFOiBcIiArIHZpZS5nZXRNZXNzYWdlKCkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBqcWxTZWFyY2ggPSBcInByb2plY3QgPSAnXCIgKyBpc3N1ZS5nZXRQcm9qZWN0T2JqZWN0KCkubmFtZSArIFwiJyBBTkQgaXNzdWV0eXBlIElOICgnUGxhbm5lZCBNYWludGVuYW5jZSBUYXNrJykgQU5EIGtleSAhPSAnXCIgKyBpc3N1ZS5rZXkudG9TdHJpbmcoKSArIFwiJyBBTkQgT1BfVEVDSE5JQ0lBTl9BQ1RJVklUSUVTX1RSQUNFX1dPUksgSU4gaXFsRnVuY3Rpb24oJ29iamVjdFNjaGVtYSA9IFxcXCJPcGVyYXRpb24gUG9ydGFsIEFBXFxcIiBBTkQgb2JqZWN0VHlwZSA9IE9uU2l0ZV9UZWNoX1JlcG9ydCBBTkQgS2V5ID0gT1BBQS1cIiArIGxhc3RPYmplY3RzWzBdLmlkICsgXCInKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJyaWNlcmNhOiBcIiArIGpxbFNlYXJjaFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIHF1ZXJ5ID0ganFsUXVlcnlQYXJzZXIucGFyc2VRdWVyeShqcWxTZWFyY2gpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJxdWVyeTogXCIgKyBxdWVyeVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIHNlYXJjaCA9IHNlYXJjaFNlcnZpY2Uuc2VhcmNoKHVzZXIsIHF1ZXJ5LCBQYWdlckZpbHRlci5nZXRVbmxpbWl0ZWRGaWx0ZXIoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBmb3VuZD1mYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIGZvdW5kT3V0d2FyZD1mYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIGxpbmtlZElzc3VlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VhcmNoLnJlc3VsdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0V4ZWN1dGUgdXBkYXRlIFNPIGUgU0Mgb24gdGhlIHJlc3VsdGluZyBpc3N1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBpID0gc2VhcmNoLnJlc3VsdHMuZmlyc3QoKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPUFAtNjEyMSA6IGRhIGZhcmUgc29sbyBxdWFuZG8gaWwgdGlja2V0IG5vbiBcdTAwZTggc3RhdG8gcmlhcGVydG8gbWFudWFsbWVudGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIVwiWWVzXCIuZXF1YWxzKG9wTWFudWFsbHlSZW9wZW5lZCkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxDcmVhdGVPclVwZGF0ZVNlcnZpY2VPcmRlcihpLmtleSwgcHJvcGVydGllcyk7ICAgICAgLy8gaW4gY2FzbyBkaSBlcnJvcmUgc2NvcHBpYVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsQ3JlYXRlU2VydmljZU9yZGVyQ29uZmlybWF0aW9uKGkua2V5LCBwcm9wZXJ0aWVzKTsgIC8vIGluIGNhc28gZGkgZXJyb3JlIHNjb3BwaWFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbENyZWF0ZVNlcnZpY2VOb3RpZmljYXRpb24oaS5rZXksIHByb3BlcnRpZXMpOyAgICAgICAgICAgLy8gaW4gY2FzbyBkaSBlcnJvcmUgc2NvcHBpYVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvKkVSUk9SISEqL1xyXG4gICAgICAgICAgICBsb2cuZXJyb3IoXCJFUlJPUiEhXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuTGlzdCBmaW5kT25zaXRlVGVjaEJ5SXNzdWVBbmRLZXkoTGlzdDxTdHJpbmc+IGlzc3VlS2V5cywgU3RyaW5nIHRlY2hLZXksIFByb3BlcnRpZXMgcHJvcGVydGllcykge1xyXG4gICAgU3RyaW5nIEFDVElPTiA9IHByb3BlcnRpZXNbJ3dmLnRyLmpvYkNvbXBsZXRlZC5hY3Rpb24nXS50b1N0cmluZygpIC8vIFdPUktcclxuICAgIFVSTCBmaW5kVGVjaG9uc2l0ZVVybCA9IG5ldyBVUkwoXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzLmdldFByb3BlcnR5KFwiYXBpLmVudlwiKSArIFwiL29wL3Jlc3QvamlyYS9maW5kLWNvbm50ZWN0ZWRUaWNrZXQtdGVjaC1hY3Rpb24tc3RhcnRlZC1ub0NvbXBsZXRlZFwiKVxyXG4gICAgTWFwIGJvZHlfcmVxID0gW1xyXG4gICAgICAgIFwiaXNzdWVLZXlcIjogaXNzdWVLZXlzLFxyXG4gICAgICAgIFwidGVjaEtleVwiOiB0ZWNoS2V5LFxyXG4gICAgICAgIFwidHJhY2VBY3Rpb25TdGF0dXNcIjogQUNUSU9OIC8vIFdPUktcclxuICAgIF0gXHJcblxyXG4gICAgbG9nLmluZm8oXCJjYWxsaW5nIFVSTDogXCIgKyBib2R5X3JlcSlcclxuICAgIGRlZiBmaW5kVGVjaG9uc2l0ZVJlcXVlc3QgPSAoSHR0cFVSTENvbm5lY3Rpb24pIGZpbmRUZWNob25zaXRlVXJsLm9wZW5Db25uZWN0aW9uKClcclxuICAgIGZpbmRUZWNob25zaXRlUmVxdWVzdC5zZXRSZXF1ZXN0TWV0aG9kKFwiUE9TVFwiKTtcclxuICAgIGZpbmRUZWNob25zaXRlUmVxdWVzdC5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XHJcbiAgICBmaW5kVGVjaG9uc2l0ZVJlcXVlc3Quc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xyXG4gICAgZmluZFRlY2hvbnNpdGVSZXF1ZXN0LnNldERvT3V0cHV0KHRydWUpO1xyXG4gICAgZmluZFRlY2hvbnNpdGVSZXF1ZXN0Lm91dHB1dFN0cmVhbVxyXG4gICAgZmluZFRlY2hvbnNpdGVSZXF1ZXN0Lm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XHJcbiAgICBsb2cuZGVidWcgZmluZFRlY2hvbnNpdGVSZXF1ZXN0Lm91dHB1dFN0cmVhbVxyXG4gICAgZmluZFRlY2hvbnNpdGVSZXF1ZXN0LmNvbm5lY3QoKTtcclxuICAgIGRlZiBmaW5kVGVjaG9uc2l0ZVN0YXR1c0NvZGUgPSBmaW5kVGVjaG9uc2l0ZVJlcXVlc3QuZ2V0UmVzcG9uc2VDb2RlKClcclxuICAgIGRlZiBmaW5kVGVjaG9uc2l0ZVN0cmluZyA9IGZpbmRUZWNob25zaXRlUmVxdWVzdC5nZXRJbnB1dFN0cmVhbSgpLmdldFRleHQoKVxyXG4gICAgbG9nLmluZm8oXCJmaW5kVGVjaG9uc2l0ZVN0YXR1c0NvZGU6IFwiICsgZmluZFRlY2hvbnNpdGVTdGF0dXNDb2RlKVxyXG4gICAgbG9nLmluZm8oXCJmaW5kVGVjaG9uc2l0ZVN0cmluZzogXCIgKyBmaW5kVGVjaG9uc2l0ZVN0cmluZylcclxuXHJcbiAgICBpZiAoZmluZFRlY2hvbnNpdGVTdGF0dXNDb2RlICE9IEhUVFBfT0spIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiSU5ESVJFQ1RfSk9CIHJlcG9ydHMgZW5kcG9pbnQgcmV0dXJuZWQgcmVzcG9uc2UgY29kZSAhPSAyMDAgT0tcIik7XHJcbiAgICB9XHJcbiAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxyXG4gICAgcmV0dXJuIChMaXN0KSBqc29uU2x1cnBlci5wYXJzZVRleHQoZmluZFRlY2hvbnNpdGVTdHJpbmcpO1xyXG59XHJcblxyXG52b2lkIGNhbGxDcmVhdGVPclVwZGF0ZVNlcnZpY2VPcmRlcihTdHJpbmcgaXNzdWVLZXksIFByb3BlcnRpZXMgcHJvcGVydGllcykge1xyXG4gICAgLyoqIFNFUlZJQ0UgT1JERVIgVVBEQVRFICoqL1xyXG4gICAgTWFwIGJvZHlfcmVxID0gW1xyXG4gICAgICAgIFwiaXNzdWVLZXlcIjogaXNzdWVLZXlcclxuICAgIF0gXHJcbiAgICBTdHJpbmcgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL29yL3VwZGF0ZS9zZXJ2aWNlL29yZGVyXCJcclxuXHJcbiAgICBsb2cuZGVidWcgXCJiYXNlVVJMIFNPOiBcIiArIGJhc2VVUkxcclxuICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNPOiBcIiArIGJvZHlfcmVxXHJcbiAgICBVUkwgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxyXG4gICAgSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcclxuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChcIlBPU1RcIik7XHJcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcclxuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xyXG4gICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcclxuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXHJcbiAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XHJcbiAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cclxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xyXG5cclxuICAgIExpc3Qgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICBMaXN0IGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICBMaXN0IGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICBMaXN0IGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxyXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxyXG4gICAgbG9nLmRlYnVnIFwiU08gUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxyXG4gICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAxXCIpICYmICFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKSB7XHJcbiAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxyXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcclxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXHJcblxyXG4gICAgICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHRcclxuICAgICAgICBsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXHJcblxyXG4gICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXHJcbiAgICAgICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcclxuICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxyXG4gICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcclxuICAgICAgICBsb2cuZGVidWcgXCJlcnJvcnM6IFwiICsgIGpzb25fb2JqZWN0LmVycm9ycy50b1N0cmluZygpXHJcblxyXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcclxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJPUC1TQVAtU08tQ1JFQVRFXCIpXHJcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXHJcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcclxuICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXHJcblxyXG4gICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXHJcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXHJcbiAgICB9XHJcbn1cclxuXHJcbnZvaWQgY2FsbENyZWF0ZVNlcnZpY2VPcmRlckNvbmZpcm1hdGlvbihTdHJpbmcgaXNzdWVLZXksIFByb3BlcnRpZXMgcHJvcGVydGllcykge1xyXG4gICAgTWFwIGJvZHlfcmVxID0gW1xyXG4gICAgICAgIFwiaXNzdWVLZXlcIjogaXNzdWVLZXksXHJcbiAgICBdIFxyXG5cclxuICAgIFN0cmluZyBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS9hZnRlci9zYWxlcy9jcmVhdGUvc2VydmljZS9vcmRlci9jb25maXJtYXRpb25cIlxyXG4gICAgbG9nLmRlYnVnIFwiYm9keV9yZXEgU0M6IFwiICsgYm9keV9yZXFcclxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU0M6IFwiICsgYmFzZVVSTFxyXG4gICAgVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcclxuICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XHJcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QoXCJQT1NUXCIpO1xyXG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XHJcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcclxuICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XHJcbiAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxyXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxyXG4gICAgbG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXHJcbiAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcclxuXHJcbiAgICBMaXN0IG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxyXG4gICAgTGlzdCBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxyXG4gICAgTGlzdCBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxyXG4gICAgTGlzdCBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgIGxvZy5kZWJ1ZyBcIlNDIFJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcclxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSAmJiAhY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSkge1xyXG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcclxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXHJcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxyXG5cclxuICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XHJcbiAgICAgICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xyXG5cclxuICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxyXG4gICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpXHJcbiAgICAgICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICBcclxuICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXHJcbiAgICAgICAgbG9nLmRlYnVnIFwiZXJyb3JzOiBcIiArICBqc29uX29iamVjdC5lcnJvcnMudG9TdHJpbmcoKVxyXG4gICAgXHJcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxyXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TQy1DUkVBVEVcIilcclxuICAgICAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGpzb25fb2JqZWN0LmVycm9yc1swXSlcclxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxyXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcclxuXHJcbiAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcclxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcclxuICAgIH1cclxufVxyXG5cclxudm9pZCBjYWxsQ3JlYXRlU2VydmljZU5vdGlmaWNhdGlvbihTdHJpbmcgaXNzdWVLZXksIFByb3BlcnRpZXMgcHJvcGVydGllcykge1xyXG4gICAgTWFwIGJvZHlfcmVxID0gW1xyXG4gICAgICAgIFwiaXNzdWVLZXlcIjogaS5rZXksXHJcbiAgICAgICAgXCJzdGF0dXNcIjogXCJDTE9cIlxyXG4gICAgXVxyXG5cclxuICAgIFN0cmluZyBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS9hZnRlci9zYWxlcy9jcmVhdGUvc2VydmljZS9ub3RpZmljYXRpb25cIlxyXG4gICAgbG9nLmRlYnVnIFwiYm9keV9yZXEgU046IFwiICsgYm9keV9yZXFcclxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxyXG4gICAgVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcclxuICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XHJcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QoXCJQT1NUXCIpO1xyXG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XHJcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcclxuICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XHJcbiAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxyXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxyXG4gICAgbG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXHJcbiAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcclxuXHJcbiAgICBMaXN0IG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxyXG4gICAgTGlzdCBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxyXG4gICAgTGlzdCBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxyXG4gICAgTGlzdCBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcclxuXHJcbiAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpIHtcclxuICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXHJcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxyXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcclxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXHJcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiU05fVVBEQVRFXCIpXHJcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpKVxyXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXHJcbiAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxyXG5cclxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxyXG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxyXG4gICAgfVxyXG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">5da0be63-d7e9-42df-b2d7-82f837a60fb5</arg>
              <arg name="FIELD_NOTES">YCFgU0FQOiB1cGRhdGUgU04gc3RhdHVzICYgVXBkYXRlIFNPICsgQ29uZmlybWF0aW9uIC0gSWYgbGFzdCBQTSBUYXNrIGNsb3NlZDogZG8gbm90IHVwZGF0ZSBTQVAgU08gZm9yIExBQk9VUiwgdXBkYXRlIFNBUCBTTyBzZW5kaW5nIG9ubHkgTUFURVJJQUxT</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5XG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbmZpZy5TdWJUYXNrTWFuYWdlclxuaW1wb3J0IHN0YXRpYyBqYXZhLm5ldC5IdHRwVVJMQ29ubmVjdGlvbi5IVFRQX09LXG5cblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcblxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpXG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTQxNTY2XCIpXG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XG5kZWYgc3VwcGxpZXIgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnN1cHBsaWVyJ10gPyBwcm9wZXJ0aWVzWydjZi5zdXBwbGllciddLnRvU3RyaW5nKCkgOiBcIk9QX1NVUFBMSUVSXCIpWzBdXG5kZWYgcmVxdWVzdE1ldGhvZFxuZGVmIGJhc2VVUkxcblxuZGVmIHRyb3ZhdG8gPSBmYWxzZVxuZGVmIGludGVybmFsU3VwcGxpZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9JTlRFUk5BTF9TVVBQTElFUlwiKVswXVxuZGVmIG9wTWFudWFsbHlSZW9wZW5lZCA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX01BTlVBTExZX1JFT1BFTkVEXCIpWzBdXG5cbmZvciAocyBpbiBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yuc3VwcGxpZXInXS50b1N0cmluZygpKSkge1xuICAgIGlmIChpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHMpICE9IG51bGwgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzKSAhPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGludGVybmFsU3VwcGxpZXIpKSB7XG4gICAgICAgIHRyb3ZhdG8gPSB0cnVlXG4gICAgfVxufVxuXG5TdWJUYXNrTWFuYWdlciBzdWJUYXNrTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldFN1YlRhc2tNYW5hZ2VyKCk7XG5Db2xsZWN0aW9uPElzc3VlPiBzdWJUYXNrcyA9IGlzc3VlLmdldFBhcmVudE9iamVjdCgpLmdldFN1YlRhc2tPYmplY3RzKClcbmRlZiBsYXN0ID0gdHJ1ZVxuc3ViVGFza3MuZWFjaCB7XG4gICAgaWYgKCFpdC5zdGF0dXMubmFtZS5lcXVhbHMoXCJEb25lXCIpICYmICFpdC5zdGF0dXMubmFtZS5lcXVhbHMoXCJSZW1vdmVkXCIpICYmICFpdC5zdGF0dXMubmFtZS5lcXVhbHMoXCJSZWplY3RlZFwiKSAmJiAhaXQuc3RhdHVzLm5hbWUuZXF1YWxzKFwiQ2FuY2VsZWRcIikgJiYgIWl0LmtleS5lcXVhbHMoaXNzdWUua2V5KSkge1xuICAgICAgICBsYXN0ID0gZmFsc2VcbiAgICB9XG59XG5cbmxvZy5pbmZvKFwiW1wiICsgaXNzdWUua2V5ICsgXCJdIHRoaXMgUGxhbm5lZCBNYWludGVuYW5jZSBUYXNrIGlzIFwiICsgKGxhc3QgPyBcIlwiIDogXCJOT1QgXCIpICsgXCJ0aGUgbGFzdCBzdWJ0YXNrXCIpXG5cbmRlZiBvcE1hbnVhbGx5UmVvcGVuZWRWYWx1ZSA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUob3BNYW51YWxseVJlb3BlbmVkKVxuXG5pZiAob3BNYW51YWxseVJlb3BlbmVkVmFsdWUgIT0gbnVsbCAmJiBvcE1hbnVhbGx5UmVvcGVuZWRWYWx1ZS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKSkge1xuICAgIC8vIE9QX01BTlVBTExZX1JFT1BFTkVEIGlzIFwiWWVzXCJcbiAgICBpZiAoIWxhc3QpIHtcbiAgICAgICAgbG9nLmluZm8oXCJbXCIgKyBpc3N1ZS5rZXkgKyBcIl0gdGhpcyBQbGFubmVkIE1haW50ZW5hbmNlIFRhc2sgaXMgbWFudWFsbHkgcmVvcGVuZWQgYW5kIGl0J3Mgbm90IHRoZSBsYXN0IHN1YnRhc2ssIHVwZGF0ZSBzZXJ2aWNlIG5vdGlmaWNhdGlvbiBhbmQgZXhpdFwiKVxuXG4gICAgICAgIGRlZiBib2R5X3JlcSA9IFtcbiAgICAgICAgICAgIFwiaXNzdWVLZXlcIjogaXNzdWUua2V5LFxuICAgICAgICAgICAgXCJzdGF0dXNcIjogXCJDTE9cIlxuICAgICAgICBdXG5cbiAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL3NlcnZpY2Uvbm90aWZpY2F0aW9uXCJcbiAgICAgICAgbG9nLmRlYnVnIFwiVVJMIFNOOiBcIiArIGJhc2VVUkxcbiAgICAgICAgbG9nLmRlYnVnIFwicmVxdWVzdCBib2R5IG9mIFNOOiBcIiArIGJvZHlfcmVxXG4gICAgICAgIFVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pIHVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QoXCJQT1NUXCIpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cbiAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG5cbiAgICAgICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgICAgICBpZiAoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSAhPSBIVFRQX09LKSB7XG4gICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJTTl9VUERBVEVcIilcbiAgICAgICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKSlcbiAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICAgICAgfVxuICAgIH1cbn0gZWxzZSB7XG4gICAgLy8gT1BfTUFOVUFMTFlfUkVPUEVORUQgaXMgTk9UIFwiWWVzXCJcbiAgICBpZiAoIWxhc3QpIHtcbiAgICAgICAgLyoqIFNFUlZJQ0UgT1JERVIgVVBEQVRFICoqL1xuICAgICAgICBVUkwgdXJsXG4gICAgICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb25cblxuICAgICAgICBkZWYgYm9keV9yZXEgPSBbXG4gICAgICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleVxuICAgICAgICBdXG4gICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL2FmdGVyL3NhbGVzL2NyZWF0ZS9vci91cGRhdGUvc2VydmljZS9vcmRlclwiXG5cbiAgICAgICAgbG9nLmRlYnVnIFwiYmFzZVVSTCBTTzogXCIgKyBiYXNlVVJMXG4gICAgICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNPOiBcIiArIGJvZHlfcmVxXG4gICAgICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICAgICAgY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbikgdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChcIlBPU1RcIik7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxuICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgICAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICBkZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlNPIFJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAxXCIpICYmICFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKSB7XG4gICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG5cbiAgICAgICAgICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHRcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcblxuICAgICAgICAgICAgZGVmIGpzb25TbHVycGVyID0gbmV3IEpzb25TbHVycGVyKClcbiAgICAgICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpXG4gICAgICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICAgICAgbG9nLmRlYnVnIFwibWVzc2FnZTogXCIgKyAganNvbl9vYmplY3QubWVzc2FnZVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiZXJyb3JzOiBcIiArICBqc29uX29iamVjdC5lcnJvcnMudG9TdHJpbmcoKVxuXG4gICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJPUC1TQVAtU08tQ1JFQVRFXCIpXG4gICAgICAgICAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGpzb25fb2JqZWN0LmVycm9yc1swXSlcbiAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8qKiBEQSBGQVJFIFNDIFNPTE8gSU4gQ0FTTyBESSBURUNOSUNJIElOVEVSTkkgKiovXG4gICAgICAgICAgICBpZiAoIXRyb3ZhdG8pIHsgLyoqIHNlIE9QX1NVUFBMSUVSID0gTlVMTCBpbCB0aWNrZXQgaGEgcHJvc2VndWl0byBzdWwgZmx1c3NvIHRlY25pY2kgaW50ZXJuaSAqKi9cblxuICAgICAgICAgICAgICAgIGJvZHlfcmVxID0gW1xuICAgICAgICAgICAgICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleSxcbiAgICAgICAgICAgICAgICBdXG5cbiAgICAgICAgICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS9hZnRlci9zYWxlcy9jcmVhdGUvc2VydmljZS9vcmRlci9jb25maXJtYXRpb25cIlxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNDOiBcIiArIGJvZHlfcmVxXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiYmFzZVVSTCBTQzogXCIgKyBiYXNlVVJMXG4gICAgICAgICAgICAgICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pIHVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChcIlBPU1RcIik7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG5cbiAgICAgICAgICAgICAgICBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiU0MgUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSAmJiAhY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSkge1xuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuXG4gICAgICAgICAgICAgICAgICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHRcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xuXG4gICAgICAgICAgICAgICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgICAgICAgICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpXG4gICAgICAgICAgICAgICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiZXJyb3JzOiBcIiArICBqc29uX29iamVjdC5lcnJvcnMudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJPUC1TQVAtU0MtQ1JFQVRFXCIpXG4gICAgICAgICAgICAgICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsganNvbl9vYmplY3QuZXJyb3JzWzBdKVxuICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICAgICAgICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYm9keV9yZXEgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3RhdHVzXCI6IFwiQ0xPXCJcbiAgICAgICAgICAgICAgICAgICAgXVxuXG4gICAgICAgICAgICAgICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL2FmdGVyL3NhbGVzL2NyZWF0ZS9zZXJ2aWNlL25vdGlmaWNhdGlvblwiXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNOOiBcIiArIGJvZHlfcmVxXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxuICAgICAgICAgICAgICAgICAgICB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pIHVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QoXCJQT1NUXCIpO1xuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgICAgIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgICAgIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiU05fVVBEQVRFXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICAgICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJvZHlfcmVxID0gW1xuICAgICAgICAgICAgICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleSxcbiAgICAgICAgICAgICAgICAgICAgXCJzdGF0dXNcIjogXCJDTE9cIlxuICAgICAgICAgICAgICAgIF1cblxuICAgICAgICAgICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL2FmdGVyL3NhbGVzL2NyZWF0ZS9zZXJ2aWNlL25vdGlmaWNhdGlvblwiXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiYm9keV9yZXEgU046IFwiICsgYm9keV9yZXFcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJiYXNlVVJMIFNOOiBcIiArIGJhc2VVUkxcbiAgICAgICAgICAgICAgICB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbikgdXJsLm9wZW5Db25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKFwiUE9TVFwiKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgICAgICAgICAgICAgIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcblxuICAgICAgICAgICAgICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSkge1xuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIlNOX1VQREFURVwiKVxuICAgICAgICAgICAgICAgICAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkpXG4gICAgICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICAvLzE4LjAzLjIwMjQgLSBpZiBsYXN0IC0tPiBzZW5kIHRvIFNBUCBvbmx5IHBhcnRzIC0gbm8gbGFib3VyIChpdCB3aWxsIGJlIHNlbnQgYXQgdGhlIHBhcmVudCB0aWNrZXQgY2xvc3VyZSlcbiAgICAgICAgLyoqIFNFUlZJQ0UgT1JERVIgVVBEQVRFICoqL1xuICAgICAgICBVUkwgdXJsXG4gICAgICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb25cblxuICAgICAgICBkZWYgYm9keV9yZXEgPSBbXG4gICAgICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleSxcbiAgICAgICAgICAgIFwiaW5jbHVkZVwiOlwiTUFURVJJQUxTXCJcbiAgICAgICAgXVxuICAgICAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS9hZnRlci9zYWxlcy9jcmVhdGUvb3IvdXBkYXRlL3NlcnZpY2Uvb3JkZXJcIlxuXG4gICAgICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU086IFwiICsgYmFzZVVSTFxuICAgICAgICBsb2cuZGVidWcgXCJib2R5X3JlcSBTTzogXCIgKyBib2R5X3JlcVxuICAgICAgICB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pIHVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QoXCJQT1NUXCIpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cbiAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG5cbiAgICAgICAgZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIGRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuICAgICAgICBsb2cuZGVidWcgXCJTTyBSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSAmJiAhY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSkge1xuICAgICAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxuXG4gICAgICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgICAgICAgICBsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXG5cbiAgICAgICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXG4gICAgICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgICAgICAgICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICBcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcblxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtU0FQLVNPLUNSRUFURVwiKVxuICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="disabled">false</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="5">
              <post-functions>
                <function type="class">
                  <arg name="field.name">resolution</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
                  <arg name="field.value">6</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">3d910af6-4e19-48fc-91c2-ef43a546b15e</arg>
                  <arg name="FIELD_NOTES">YCFgVXBkYXRlIENPTVBMRVRFRCBvbiBSaXNrIEFzc2Vzc21lbnQ=</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiIgIGltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWU7XHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uO1xyXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5MZXZlbFxyXG5pbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wXHJcblxyXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXHJcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZSgnL3Zhci9hdGxhc3NpYW4vYXBwbGljYXRpb24tZGF0YS9zaGFyZWQvc2NyaXB0cy9vcHByb2plY3QucHJvcGVydGllcycpXHJcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XHJcblx0cHJvcGVydGllcy5sb2FkKGl0KVxyXG59XHJcbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cclxuQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyBcclxuZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XHJcbiAgXHJcbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBUeXBlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xyXG5DbGFzcyBvYmplY3RUeXBlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUZhY2FkZVwiKTsgXHJcbmRlZiBvYmplY3RUeXBlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVGYWNhZGVDbGFzcyk7XHJcbiAgXHJcbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBBdHRyaWJ1dGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXHJcbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpOyBcclxuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcclxuICBcclxuQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7IFxyXG5kZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XHJcbkNsYXNzIGlxbEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLklRTEZhY2FkZVwiKTsgXHJcbmRlZiBpcWxGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUoaXFsRmFjYWRlQ2xhc3MpO1xyXG5cclxuSXNzdWUgaXNzdWUgPSBpc3N1ZVxyXG5cclxuZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfQ1VSUkVOVF9VU0VSXCIpWzBdXHJcbmRlZiByaXNrQXNzRmllbGQgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9BU1NFVF9SSVNLU19BU1NFU1NNRU5UXCIpWzBdO1xyXG5kZWYgY2hlY2tsaXN0RmllbGQgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9BU1NFVF9DSEVDS0xJU1RcIilbMF07XHJcblxyXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXHJcbmludCBEQk8gPSBwcm9wZXJ0aWVzWydpc2NoZW1hLmRiby5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuXHJcbmxvZy53YXJuIFwiKioqKioqKioqKioqKioqKioqKioqKiBSSVNLUyBBU1NFU1NNRU5UICoqKioqKioqKioqKioqKioqKioqKipcIlxyXG5sb2cuaW5mbyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJpc2tBc3NGaWVsZCkudG9TdHJpbmcoKSBcclxucmlza0Fzc09iaiA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmlza0Fzc0ZpZWxkKVxyXG5cclxuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyaXNrQXNzRmllbGQpICE9IG51bGwpe1xyXG4gICAgLy9kZWYgb2JqID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKG9iamVjdHNbMF0uZ2V0SWQoKSk7XHJcbiAgICBkZWYgcj1yaXNrQXNzT2JqLnRvU3RyaW5nKClcclxuICAgIGRlZiByS2V5ID0gci5zdWJzdHJpbmcoci5sYXN0SW5kZXhPZignKCcpKzEsci5sYXN0SW5kZXhPZignKScpKVxyXG4gICAgZGVmIHJOYW1lID0gci5zdWJzdHJpbmcoMCxyLmxhc3RJbmRleE9mKCcoJyktMSlcclxuICAgIGRlZiByT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHJLZXkpICAgIFxyXG4gICAgaW50IGF0dHJpYnV0ZUlEIFxyXG4gICAgcmlza0Fzc09iai5vYmplY3RBdHRyaWJ1dGVCZWFucy5lYWNoIHtcclxuICAgICAgICBpdC5vYmplY3RUeXBlQXR0cmlidXRlSWQuZWFjaHtcclxuICAgICAgICAgICAgbG9nLmluZm8gXCJpdDogXCIgKyBpdFxyXG4gICAgICAgICAgICBpZihvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihpdCkubmFtZSA9PSBcIkNPTVBMRVRFRFwiKXtcclxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZUlEID0gaXRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkZWYgYXR0cmliVHlwZSA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKGF0dHJpYnV0ZUlEKTsgXHJcbiAgICBsb2cuaW5mbyBcImF0dHJpYlR5cGU6IFwiICsgYXR0cmliVHlwZS50b1N0cmluZygpXHJcbiAgICBkZWYgb2JqID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHJPYmplY3QuZ2V0SWQoKSk7XHJcbiAgICBkZWYgbmV3QXR0cmliID0gb2JqLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW4oYXR0cmliVHlwZSk7XHJcbiAgICBkZWYgbmV3QXR0cmliVmFsdWUgPSBuZXdBdHRyaWIuY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBuZXdBdHRyaWJWYWx1ZS5zZXRCb29sZWFuVmFsdWUodHJ1ZSk7XHJcbiAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XHJcbiAgICAgICAgbG9nLndhcm4oXCJTRVRJTlNJR0hUVkFMVUU6IFVuYWJsZSB0byBzZXQgYXR0cmlidXRlIFwiICsgYXR0cmliVHlwZS50b1N0cmluZygpICsgXCIgdG8gdHJ1ZS4gRXhpdGluZy5cIik7XHJcbiAgICAgICAgbG9nLndhcm4oXCJTRVRJTlNJR0hUVkFMVUU6IFwiICsgdmllLmdldE1lc3NhZ2UoKS50b1N0cmluZygpKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgZGVmIGF0dHJpYlZhbHVlcyA9IG5ld0F0dHJpYi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7XHJcbiAgICBhdHRyaWJWYWx1ZXMuYWRkKG5ld0F0dHJpYlZhbHVlKTtcclxuICAgIG5ld0F0dHJpYi5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKGF0dHJpYlZhbHVlcyk7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBuZXdBdHRyaWIgPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG5ld0F0dHJpYik7XHJcbiAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XHJcbiAgICAgICAgbG9nLndhcm4oXCJTRVRJTlNJR0hUVkFMVUU6IFVuYWJsZSB0byBzYXZlIGNoYW5nZXMuIEV4aXRpbmcuXCIpO1xyXG4gICAgICAgIGxvZy53YXJuKFwiU0VUSU5TSUdIVFZBTFVFOiBcIiArIHZpZS5nZXRNZXNzYWdlKCkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSBcclxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">d0ff0e0c-0d1c-4309-b2d2-89ce8055a4a1</arg>
                  <arg name="FIELD_NOTES">YCFgQ2hlY2sgYW5kIGZpbGwgaW4gT1BfUE1fQVNTRVRfUklTS1NfUkVTVUxUIC0gT1BfQVNTRVRfVE9fQkVfU1RPUFBFRA==</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcbiAgICBwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcblxuLy9Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKClcbi8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMjM2NzhcIilcblxuZGVmIHJpc2sgPSBmYWxzZVxuZGVmIGNoZWNrID0gZmFsc2VcbmRlZiBjb21wbGV0ZWQgPSB0cnVlXG5kZWYgbm90X2NvbXBsZXRlZCA9IDBcblxuSXNzdWVJbmRleGluZ1NlcnZpY2UgXHRpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSlcbmRlZiBhc3NldCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9BU1NFVFwiKVswXVxuZGVmIGN1c3RvbWVyID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0NVU1RPTUVSXCIpWzBdXG5kZWYgcG1zdGF0dXMgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9QTV9BU1NFVF9SSVNLU19SRVNVTFRcIilbMF1cbmRlZiBwbVN0b3BBc3NldCA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0FTU0VUX1RPX0JFX1NUT1BQRURcIilbMF1cblxuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldCkhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0KSAhPSBcIlwiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0KS50b1N0cmluZygpLmVxdWFscyhcIlwiKSl7XG4gICAgLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzXG4gICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyAgXG4gICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XG4gICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbiAgICBkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcblxuICAgIGRlZiBwbUFzc2V0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldClcbiAgICBsb2cuZGVidWcgXCJwbUFzc2V0OiBcIiArIHBtQXNzZXRcblxuICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdFxuICAgIGRlZiBpbnN0YWxsYXRpb249cG1Bc3NldC50b1N0cmluZygpXG4gICAgZGVmIGluc3RhbGxhdGlvbktleSA9IGluc3RhbGxhdGlvbi5zdWJzdHJpbmcoaW5zdGFsbGF0aW9uLmxhc3RJbmRleE9mKCcoJykrMSxpbnN0YWxsYXRpb24ubGFzdEluZGV4T2YoJyknKSlcbiAgICBkZWYgaW5zdGFsbGF0aW9uT2JqID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGluc3RhbGxhdGlvbktleSlcbiAgICBsb2cuZGVidWcgXCJpbnN0YWxsYXRpb25PYmo6IFwiICsgaW5zdGFsbGF0aW9uT2JqXG4gICAgbG9nLmRlYnVnIFwiaW5zdGFsbGF0aW9uT2JqLmdldElkKCk6IFwiICsgaW5zdGFsbGF0aW9uT2JqLmdldElkKClcbiAgICBkZWYgb2JUcmlhZ2VcbiAgICBkZWYgcHJvZFR5cGUsIHVzY2l0YVNpY3VyZXp6YSwgc2ZvbmRhbWVudG8sIGFudGVTZm9uZGFubywgc2ZvbmRhbWVudG9Pc3RhY29saSwgc2ZvbmRhbWVudG9GZXJtYSwgYmF0dGVyaWUsIGFudGljYWR1dGFDYXJ0ZXIsIGFudGljYWR1dGFGdW56aW9uYW50aSwgcmFkYXIsIHJhZGFyRnVuemlvbmFudGksIHNlbnNvcmlQcmVzZW56YSwgc2Vuc29yaVByZXNlbnphTGF0aSwgZm90b2NlbGx1bGUsIGZvdG9jZWxsdWxlRnVuemlvbmFudGksIHNjaGlhY2NpYW1lbnRvLCBjZXNvaWFtZW50bywgYWx0cmlSaXNjaGksIGZvcnphSW1wYXR0b1xuXG4gICAgLy9USVBPIElNUElBTlRPXG4gICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBST0RVQ1RfRkFNSUxZX1JFRlwiKSl7XG4gICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBST0RVQ1RfRkFNSUxZX1JFRlwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgZGVmIHByb2RUeXBlSWQgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKVxuICAgICAgICBwcm9kVHlwZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihwcm9kVHlwZUlkLCBcIk5hbWVcIikuY3JlYXRlTXV0YWJsZSgpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKClcbiAgICB9XG4gICAgbG9nLmRlYnVnIFwicHJvZFR5cGU6IFwiICsgcHJvZFR5cGVcbiAgICBkZWYgc3RhdHVzXG4gICAgZGVmIHRvYmVTdG9wcGVkID0gZmFsc2VcbiAgICBkZWYgY2ZOZXdWYWx1ZSwgZmllbGRDb25maWdcbiAgICBcbiAgICBkZWYgdGZSaXNjaGksIHRmSW1waWFudG9BTm9ybWFcbiAgICBpZighcHJvZFR5cGUuZXF1YWxzKFwiUE9SVEUgQVVUT01BVElDSEVcIikgJiYgIXByb2RUeXBlLmVxdWFscyhcIkNBTkNFTExJIEFVVE9NQVRJQ0lcIikgJiYgIXByb2RUeXBlLmVxdWFscyhcIkJBUlJJRVJFXCIpKXtcbiAgICAgICAgLy9BTFRSSSBSSVNDSElcbiAgICAgICAgLy9URl9SSVNDSElfUklMRVZBVElcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlRGX1JJU0NISV9SSUxFVkFUSVwiKSl7XG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJURl9SSVNDSElfUklMRVZBVElcIikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICB0ZlJpc2NoaSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgICBsb2cuZGVidWcgXCJ0ZlJpc2NoaTogXCIgKyB0ZlJpc2NoaVxuICAgICAgICBcbiAgICAgICAgLy9JTVBJQU5UTyBOT04gQSBOT1JNQVxuICAgICAgICAvL1RGX0lNUElBTlRPX0FfTk9STUFcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlRGX0lNUElBTlRPX0FfTk9STUFcIikpe1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiVEZfSU1QSUFOVE9fQV9OT1JNQVwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIHRmSW1waWFudG9BTm9ybWEgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG4gICAgICAgIH1cbiAgICAgICAgbG9nLmRlYnVnIFwidGZJbXBpYW50b0FOb3JtYTogXCIgKyB0ZkltcGlhbnRvQU5vcm1hXG4gICAgICAgIFxuICAgICAgICBpZih0ZlJpc2NoaSE9bnVsbCB8fCB0ZkltcGlhbnRvQU5vcm1hLnRvU3RyaW5nKCkuZXF1YWxzKFwiTk9cIikpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJpc2sgPSB0cnVlXG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmlzayl7XG4gICAgICAgICAgICBzdGF0dXMgPSBcIlJJU0tfREVURUNURURcIlxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHN0YXR1cyA9IFwiUklTS19BTkFMWVNJU19PS1wiXG4gICAgICAgIH1cbiAgICAgICAgbG9nLmRlYnVnIFwic3RhdHVzOiBcIiArIHN0YXR1c1xuICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcbiAgICAgICAgZGVmIG1pID0gKE11dGFibGVJc3N1ZSkgaXNzdWVcblxuICAgICAgICBmaWVsZENvbmZpZyA9IHBtc3RhdHVzLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKVxuICAgICAgICAvL2xvZy53YXJuIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcbiAgICAgICAgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBzdGF0dXMgfVxuXG4gICAgICAgIHBtc3RhdHVzLnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBtc3RhdHVzKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcbiAgICAgICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChpc3N1ZSlcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIC8vUE9SVEUgQVVUT01BVElDSEVcbiAgICBpZihwcm9kVHlwZS5lcXVhbHMoXCJQT1JURSBBVVRPTUFUSUNIRVwiKSl7XG4gICAgICAgIC8vQVx0UE9SVEVfVVNDSVRBX1NJQ1VSRVpaQVxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiUE9SVEVfVVNDSVRBX1NJQ1VSRVpaQVwiKSl7XG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJQT1JURV9VU0NJVEFfU0lDVVJFWlpBXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgdXNjaXRhU2ljdXJlenphID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICB9XG4gICAgICAgIGxvZy5kZWJ1ZyBcInVzY2l0YVNpY3VyZXp6YTogXCIgKyB1c2NpdGFTaWN1cmV6emFcblxuICAgICAgICAvL0JcdFBPUlRFX1NGT05EQU1FTlRPXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJQT1JURV9TRk9OREFNRU5UT1wiKSl7XG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJQT1JURV9TRk9OREFNRU5UT1wiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIHNmb25kYW1lbnRvID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICB9XG4gICAgICAgIGxvZy5kZWJ1ZyBcInNmb25kYW1lbnRvOiBcIiArIHNmb25kYW1lbnRvXG5cbiAgICAgICAgLy9DXHRQT1JURV9TRk9OREFNRU5UT19BTlRFX1BPU0laSU9ORVxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiUE9SVEVfU0ZPTkRBTUVOVE9fQU5URV9QT1NJWklPTkVcIikpe1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiUE9SVEVfU0ZPTkRBTUVOVE9fQU5URV9QT1NJWklPTkVcIikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBhbnRlU2ZvbmRhbm8gPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG4gICAgICAgIH1cbiAgICAgICAgbG9nLmRlYnVnIFwiYW50ZVNmb25kYW5vOiBcIiArIGFudGVTZm9uZGFub1xuXG4gICAgICAgIC8vRFx0UE9SVEVfT1NUQUNPTElfU0ZPTkRBTUVOVE9cbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBPUlRFX09TVEFDT0xJX1NGT05EQU1FTlRPXCIpKXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBPUlRFX09TVEFDT0xJX1NGT05EQU1FTlRPXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgc2ZvbmRhbWVudG9Pc3RhY29saSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgICBsb2cuZGVidWcgXCJzZm9uZGFtZW50b09zdGFjb2xpOiBcIiArIHNmb25kYW1lbnRvT3N0YWNvbGlcblxuICAgICAgICAvL0VcdFBPUlRFX0RJU1BPU0lUSVZPX1NUT1BcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBPUlRFX0RJU1BPU0lUSVZPX1NUT1BcIikpe1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiUE9SVEVfRElTUE9TSVRJVk9fU1RPUFwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIHNmb25kYW1lbnRvRmVybWEgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG4gICAgICAgIH1cbiAgICAgICAgbG9nLmRlYnVnIFwic2ZvbmRhbWVudG9GZXJtYTogXCIgKyBzZm9uZGFtZW50b0Zlcm1hXG5cbiAgICAgICAgLy9GXHRQT1JURV9CQVRURVJJRV9FTUVSR0VOWkFcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBPUlRFX0JBVFRFUklFX0VNRVJHRU5aQVwiKSl7XG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJQT1JURV9CQVRURVJJRV9FTUVSR0VOWkFcIikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBiYXR0ZXJpZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgICBsb2cuZGVidWcgXCJiYXR0ZXJpZTogXCIgKyBiYXR0ZXJpZVxuXG4gICAgICAgIC8vR1x0UE9SVEVfRElTUE9TSVRJVk9fQU5USUNBRFVUQV9DQVJURVJcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBPUlRFX0RJU1BPU0lUSVZPX0FOVElDQURVVEFfQ0FSVEVSXCIpKXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBPUlRFX0RJU1BPU0lUSVZPX0FOVElDQURVVEFfQ0FSVEVSXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgYW50aWNhZHV0YUNhcnRlciA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgICBsb2cuZGVidWcgXCJhbnRpY2FkdXRhQ2FydGVyOiBcIiArIGFudGljYWR1dGFDYXJ0ZXJcblxuICAgICAgICAvL0hcdFBPUlRFX0FOVElDQURVVEFfQ0FSVEVSX0ZVTlpJT05BTlRFXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJQT1JURV9BTlRJQ0FEVVRBX0NBUlRFUl9GVU5aSU9OQU5URVwiKSl7XG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJQT1JURV9BTlRJQ0FEVVRBX0NBUlRFUl9GVU5aSU9OQU5URVwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIGFudGljYWR1dGFGdW56aW9uYW50aSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgICBsb2cuZGVidWcgXCJhbnRpY2FkdXRhRnVuemlvbmFudGk6IFwiICsgYW50aWNhZHV0YUZ1bnppb25hbnRpXG5cbiAgICAgICAgLy9JXHRQT1JURV9SQURBUl9UWVBFXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJQT1JURV9SQURBUl9UWVBFXCIpKXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBPUlRFX1JBREFSX1RZUEVcIikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICByYWRhciA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgICBsb2cuZGVidWcgXCJyYWRhcjogXCIgKyByYWRhclxuXG4gICAgICAgIC8vTFx0UE9SVEVfUkFEQVJfRlVOWklPTkFOVElcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBPUlRFX1JBREFSX0ZVTlpJT05BTlRJXCIpKXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBPUlRFX1JBREFSX0ZVTlpJT05BTlRJXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgcmFkYXJGdW56aW9uYW50aSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgICBsb2cuZGVidWcgXCJyYWRhckZ1bnppb25hbnRpOiBcIiArIHJhZGFyRnVuemlvbmFudGlcblxuICAgICAgICAvL01cdFBPUlRFX1BSRVNFTlpBXzUwTU1fQU5URV9NT0JJTElcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBPUlRFX1BSRVNFTlpBXzUwTU1fQU5URV9NT0JJTElcIikpe1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiUE9SVEVfUFJFU0VOWkFfNTBNTV9BTlRFX01PQklMSVwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIHNlbnNvcmlQcmVzZW56YSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgICBsb2cuZGVidWcgXCJzZW5zb3JpUHJlc2VuemE6IFwiICsgc2Vuc29yaVByZXNlbnphXG5cbiAgICAgICAgLy9OXHRQT1JURV9QUkVTRU5aQV81ME1NX0FOVEVfTU9CSUxJX0xBVElcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBPUlRFX1BSRVNFTlpBXzUwTU1fQU5URV9NT0JJTElfTEFUSVwiKSl7XG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJQT1JURV9QUkVTRU5aQV81ME1NX0FOVEVfTU9CSUxJX0xBVElcIikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBzZW5zb3JpUHJlc2VuemFMYXRpID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICB9XG4gICAgICAgIGxvZy5kZWJ1ZyBcInNlbnNvcmlQcmVzZW56YUxhdGk6IFwiICsgc2Vuc29yaVByZXNlbnphTGF0aVxuXG4gICAgICAgIC8vT1x0UE9SVEVfRk9UT0NFTExVTEVcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBPUlRFX0ZPVE9DRUxMVUxFXCIpKXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBPUlRFX0ZPVE9DRUxMVUxFXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgZm90b2NlbGx1bGUgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG4gICAgICAgIH1cbiAgICAgICAgbG9nLmRlYnVnIFwiZm90b2NlbGx1bGU6IFwiICsgZm90b2NlbGx1bGVcblxuICAgICAgICAvL1BcdFBPUlRFX0ZPVE9DRUxMVUxFX0ZVTlpJT05BTlRJXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJQT1JURV9GT1RPQ0VMTFVMRV9GVU5aSU9OQU5USVwiKSl7XG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJQT1JURV9GT1RPQ0VMTFVMRV9GVU5aSU9OQU5USVwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIGZvdG9jZWxsdWxlRnVuemlvbmFudGkgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG4gICAgICAgIH1cbiAgICAgICAgbG9nLmRlYnVnIFwiZm90b2NlbGx1bGVGdW56aW9uYW50aTogXCIgKyBmb3RvY2VsbHVsZUZ1bnppb25hbnRpXG5cbiAgICAgICAgLy9RXHRQT1JURV9QUk9URVpJT05FX1NDSElBQ0NJQU1FTlRPXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJQT1JURV9QUk9URVpJT05FX1NDSElBQ0NJQU1FTlRPXCIpKXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBPUlRFX1BST1RFWklPTkVfU0NISUFDQ0lBTUVOVE9cIikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBzY2hpYWNjaWFtZW50byA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgICBsb2cuZGVidWcgXCJzY2hpYWNjaWFtZW50bzogXCIgKyBzY2hpYWNjaWFtZW50b1xuXG4gICAgICAgIC8vUlx0UE9SVEVfUFJPVEVaSU9ORV9DRVNPSUFNRU5UT1xuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiUE9SVEVfUFJPVEVaSU9ORV9DRVNPSUFNRU5UT1wiKSl7XG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJQT1JURV9QUk9URVpJT05FX0NFU09JQU1FTlRPXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgY2Vzb2lhbWVudG8gPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG4gICAgICAgIH1cbiAgICAgICAgbG9nLmRlYnVnIFwiY2Vzb2lhbWVudG86IFwiICsgY2Vzb2lhbWVudG9cblxuICAgICAgICAvL1NcdFBPUlRFX0FMVFJJX1JJU0NISV9EQV9TRUdOQUxBUkVcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBPUlRFX0FMVFJJX1JJU0NISVwiKSl7XG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJQT1JURV9BTFRSSV9SSVNDSElcIikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBhbHRyaVJpc2NoaSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgICBsb2cuZGVidWcgXCJhbHRyaVJpc2NoaTogXCIgKyBhbHRyaVJpc2NoaVxuXG4gICAgICAgIC8vVFx0UE9SVEVfRk9SWkFfSU1QQVRUT19ORUlfTElNSVRJXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJQT1JURV9GT1JaQV9JTVBBVFRPX05FSV9MSU1JVElcIikpe1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiUE9SVEVfRk9SWkFfSU1QQVRUT19ORUlfTElNSVRJXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgZm9yemFJbXBhdHRvID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICB9XG4gICAgICAgIGxvZy5kZWJ1ZyBcImZvcnphSW1wYXR0bzogXCIgKyBmb3J6YUltcGF0dG8gICBcbiAgICAgICAgXG5cbiAgICAgICAgbG9nLmRlYnVnIFwiY3VzdG9tZXI6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0b21lcikudG9TdHJpbmcoKVxuICAgICAgICBpZihcbiAgICAgICAgICAgICh1c2NpdGFTaWN1cmV6emEudG9TdHJpbmcoKS5lcXVhbHMoXCJTSVwiKSAmJiBzZm9uZGFtZW50by50b1N0cmluZygpLmVxdWFscyhcIk5FU1NVTk9cIikpIHx8XG4gICAgICAgICAgICAodXNjaXRhU2ljdXJlenphLnRvU3RyaW5nKCkuZXF1YWxzKFwiU0lcIikgJiYgc2ZvbmRhbWVudG8udG9TdHJpbmcoKS5lcXVhbHMoXCJTRk9OREFNRU5UTyBNRUNDQU5JQ09cIikgJiYgKGFudGVTZm9uZGFuby50b1N0cmluZygpLmVxdWFscyhcIk5PXCIpIHx8IHNmb25kYW1lbnRvT3N0YWNvbGkudG9TdHJpbmcoKS5lcXVhbHMoXCJTSVwiKSB8fCBzZm9uZGFtZW50b0Zlcm1hLnRvU3RyaW5nKCkuZXF1YWxzKFwiTk9cIikpKSB8fFxuICAgICAgICAgICAgKHVzY2l0YVNpY3VyZXp6YS50b1N0cmluZygpLmVxdWFscyhcIlNJXCIpICYmIHNmb25kYW1lbnRvLnRvU3RyaW5nKCkuZXF1YWxzKFwiUklET05EQU5URVwiKSAmJiBiYXR0ZXJpZS50b1N0cmluZygpLmVxdWFscyhcIk5PXCIpKSB8fFxuICAgICAgICAgICAgYW50aWNhZHV0YUNhcnRlci50b1N0cmluZygpLmVxdWFscyhcIk5PXCIpIHx8XG4gICAgICAgICAgICAoYW50aWNhZHV0YUNhcnRlci50b1N0cmluZygpLmVxdWFscyhcIlNJXCIpICYmIGFudGljYWR1dGFGdW56aW9uYW50aS50b1N0cmluZygpLmVxdWFscyhcIk5PXCIpKSB8fFxuICAgICAgICAgICAgKChyYWRhci50b1N0cmluZygpLmVxdWFscyhcIk1PVklNRU5UTyBFIFBSRVNFTlpBXCIpIHx8IHJhZGFyLnRvU3RyaW5nKCkuZXF1YWxzKFwiU09MTyBNT1ZJTUVOVE9cIikpICYmIHJhZGFyRnVuemlvbmFudGkudG9TdHJpbmcoKS5lcXVhbHMoXCJOT1wiKSkgfHxcbiAgICAgICAgICAgIChyYWRhci50b1N0cmluZygpLmVxdWFscyhcIk1PVklNRU5UTyBFIFBSRVNFTlpBXCIpICYmIChzZW5zb3JpUHJlc2VuemEudG9TdHJpbmcoKS5lcXVhbHMoXCJOT1wiKSB8fCBzZW5zb3JpUHJlc2VuemFMYXRpLnRvU3RyaW5nKCkuZXF1YWxzKFwiTk9cIikpKSB8fCBcbiAgICAgICAgICAgIChyYWRhci50b1N0cmluZygpLmVxdWFscyhcIlNPTE8gTU9WSU1FTlRPXCIpICYmIGZvdG9jZWxsdWxlLnRvU3RyaW5nKCkuZXF1YWxzKFwiU0lcIikgJiYgZm90b2NlbGx1bGVGdW56aW9uYW50aS50b1N0cmluZygpLmVxdWFscyhcIk5PXCIpKSB8fFxuICAgICAgICAgICAgc2NoaWFjY2lhbWVudG8udG9TdHJpbmcoKS5lcXVhbHMoXCJOT1wiKSB8fFxuICAgICAgICAgICAgY2Vzb2lhbWVudG8udG9TdHJpbmcoKS5lcXVhbHMoXCJOT1wiKSB8fFxuICAgICAgICAgICAgYWx0cmlSaXNjaGkudG9TdHJpbmcoKS5lcXVhbHMoXCJTSVwiKSB8fFxuICAgICAgICAgICAgLy9zb2xvIHBlciBjbGllbnRlIEFMTEVBTlpBIDMuMFxuICAgICAgICAgICAgKGZvcnphSW1wYXR0by50b1N0cmluZygpLmVxdWFscyhcIk5PXCIpICYmIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VzdG9tZXIpLnRvU3RyaW5nKCkuY29udGFpbnMoXCJBTExFQU5aQVwiKSlcbiAgICAgICAgKXtcbiAgICAgICAgICAgIHJpc2sgPSB0cnVlXG4gICAgICAgIH1cblxuICAgICAgICBcbiAgICAgICAgaWYgKHJpc2spe1xuICAgICAgICAgICAgc3RhdHVzID0gXCJSSVNLX0RFVEVDVEVEXCJcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBzdGF0dXMgPSBcIlJJU0tfQU5BTFlTSVNfT0tcIlxuICAgICAgICB9XG4gICAgICAgIGxvZy5kZWJ1ZyBcInN0YXR1czogXCIgKyBzdGF0dXNcbiAgICAgICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXG4gICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGlzc3VlXG5cbiAgICAgICAgZmllbGRDb25maWcgPSBwbXN0YXR1cy5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSlcbiAgICAgICAgLy9sb2cud2FybiBcImZpZWxkQ29uZmlnOiBcIiArIGZpZWxkQ29uZmlnXG4gICAgICAgIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gc3RhdHVzIH1cblxuICAgICAgICBwbXN0YXR1cy51cGRhdGVWYWx1ZShudWxsLCBpc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbXN0YXR1cyksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG4gICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgoaXNzdWUpXG5cdFx0LypcbiAgICAgICAgaWYoXG4gICAgICAgICAgICByYWRhckZ1bnppb25hbnRpLnRvU3RyaW5nKCkuZXF1YWxzKFwiTk9cIikgfHxcbiAgICAgICAgICAgIChyYWRhci50b1N0cmluZygpLmVxdWFscyhcIlNPTE8gTU9WSU1FTlRPXCIpICYmIGZvdG9jZWxsdWxlLnRvU3RyaW5nKCkuZXF1YWxzKFwiTk9cIikpIHx8XG4gICAgICAgICAgICAoZm9yemFJbXBhdHRvLnRvU3RyaW5nKCkuZXF1YWxzKFwiTk9cIikgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0b21lcikudG9TdHJpbmcoKS5jb250YWlucyhcIkFMTEVBTlpBXCIpKSB8fFxuICAgICAgICAgICAgKHNmb25kYW1lbnRvLnRvU3RyaW5nKCkuZXF1YWxzKFwiUklET05EQU5URVwiKSAmJiBiYXR0ZXJpZS50b1N0cmluZygpLmVxdWFscyhcIk5PXCIpKVxuICAgICAgICApe1xuICAgICAgICAgICAgdG9iZVN0b3BwZWQgPSB0cnVlXG4gICAgICAgIH0qL1xuICAgIH1cbiAgICBcbiAgICBkZWYgY2FuY2VsbG9Vb21vUHJlc2VudGUsIGNhbmNlbGxvQW50aWNhZHV0YSwgY2FuY2VsbG9BbnRpY2FkdXRhRnVuemlvbmFudGUsIGNhbmNlbGxvRXh0cmFjb3JzYSwgY2FuY2VsbG9FeHRyYWNvcnNhRnVuemlvbmFudGUsIGNhbmNlbGxvQWx0cmlSaXNjaGksIGNhbmNlbGxvUmlzY2hpLCBjYW5jZWxsb0Nvc3RlRnVuemlvbmFudGksIGNhbmNlbGxvQ29zdGUsIGNhbmNlbGxvSW1wYXR0b1xuICAgIC8vQ0FOQ0VMTEkgQVVUT01BVElDSVxuICAgIGlmKHByb2RUeXBlLmVxdWFscyhcIkNBTkNFTExJIEFVVE9NQVRJQ0lcIikpe1xuICAgICAgICAvLzEuIENBTkNFTExPX01BQ0NISU5BX1VPTU9fUFJFU0VOVEVcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIkNBTkNFTExPX01BQ0NISU5BX1VPTU9fUFJFU0VOVEVcIikpe1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiQ0FOQ0VMTE9fTUFDQ0hJTkFfVU9NT19QUkVTRU5URVwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIGNhbmNlbGxvVW9tb1ByZXNlbnRlID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICB9XG4gICAgICAgIGxvZy5kZWJ1ZyBcImNhbmNlbGxvVW9tb1ByZXNlbnRlOiBcIiArIGNhbmNlbGxvVW9tb1ByZXNlbnRlXG5cbiAgICAgICAgLy8yLiBDQU5DRUxMT19ESVNQT1NJVElWSV9BTlRJQ0FEVVRBXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJDQU5DRUxMT19ESVNQT1NJVElWSV9BTlRJQ0FEVVRBXCIpKXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIkNBTkNFTExPX0RJU1BPU0lUSVZJX0FOVElDQURVVEFcIikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBjYW5jZWxsb0FudGljYWR1dGEgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG4gICAgICAgIH1cbiAgICAgICAgbG9nLmRlYnVnIFwiY2FuY2VsbG9BbnRpY2FkdXRhOiBcIiArIGNhbmNlbGxvQW50aWNhZHV0YVxuXG4gICAgICAgIC8vMy4gQ0FOQ0VMTE9fQU5USUNBRFVUQV9GVU5aSU9OQU5URVxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiQ0FOQ0VMTE9fQU5USUNBRFVUQV9GVU5aSU9OQU5URVwiKSl7XG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJDQU5DRUxMT19BTlRJQ0FEVVRBX0ZVTlpJT05BTlRFXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgY2FuY2VsbG9BbnRpY2FkdXRhRnVuemlvbmFudGUgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG4gICAgICAgIH1cbiAgICAgICAgbG9nLmRlYnVnIFwiY2FuY2VsbG9BbnRpY2FkdXRhRnVuemlvbmFudGU6IFwiICsgY2FuY2VsbG9BbnRpY2FkdXRhRnVuemlvbmFudGVcblxuICAgICAgICAvLzQuIENBTkNFTExPX0FSUkVTVE9fRVhUUkFDT1JTQVxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiQ0FOQ0VMTE9fQVJSRVNUT19FWFRSQUNPUlNBXCIpKXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIkNBTkNFTExPX0FSUkVTVE9fRVhUUkFDT1JTQVwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIGNhbmNlbGxvRXh0cmFjb3JzYSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgICBsb2cuZGVidWcgXCJjYW5jZWxsb0V4dHJhY29yc2E6IFwiICsgY2FuY2VsbG9FeHRyYWNvcnNhXG5cbiAgICAgICAgLy81LiBDQU5DRUxMT19BUlJFU1RPX0VYVFJBQ09SU0FfRlVOWklPTkFOVElcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIkNBTkNFTExPX0FSUkVTVE9fRVhUUkFDT1JTQV9GVU5aSU9OQU5USVwiKSl7XG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJDQU5DRUxMT19BUlJFU1RPX0VYVFJBQ09SU0FfRlVOWklPTkFOVElcIikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBjYW5jZWxsb0V4dHJhY29yc2FGdW56aW9uYW50ZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgICBsb2cuZGVidWcgXCJjYW5jZWxsb0V4dHJhY29yc2FGdW56aW9uYW50ZTogXCIgKyBjYW5jZWxsb0V4dHJhY29yc2FGdW56aW9uYW50ZVxuXG4gICAgICAgIC8vNi4gQ0FOQ0VMTE9fQUxUUklfUklTQ0hJXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJDQU5DRUxMT19BTFRSSV9SSVNDSElcIikpe1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiQ0FOQ0VMTE9fQUxUUklfUklTQ0hJXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgY2FuY2VsbG9BbHRyaVJpc2NoaSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgICBsb2cuZGVidWcgXCJjYW5jZWxsb0FsdHJpUmlzY2hpOiBcIiArIGNhbmNlbGxvQWx0cmlSaXNjaGlcblxuICAgICAgICAvLzcuIENBTkNFTExPX1JJU0NISV9SSUxFVkFUSVxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiQ0FOQ0VMTE9fUklTQ0hJX1JJTEVWQVRJXCIpKXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIkNBTkNFTExPX1JJU0NISV9SSUxFVkFUSVwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIGNhbmNlbGxvUmlzY2hpID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICB9XG4gICAgICAgIGxvZy5kZWJ1ZyBcImNhbmNlbGxvUmlzY2hpOiBcIiArIGNhbmNlbGxvUmlzY2hpXG5cbiAgICAgICAgLy84LiBDQU5DRUxMT19DT1NURV9TSUNVUkVaWkFcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIkNBTkNFTExPX0NPU1RFX1NJQ1VSRVpaQVwiKSl7XG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJDQU5DRUxMT19DT1NURV9TSUNVUkVaWkFcIikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBjYW5jZWxsb0Nvc3RlID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICB9XG4gICAgICAgIGxvZy5kZWJ1ZyBcImNhbmNlbGxvQ29zdGU6IFwiICsgY2FuY2VsbG9Db3N0ZVxuXG4gICAgICAgIC8vOS4gQ0FOQ0VMTE9fQ09TVEVfRlVOWklPTkFOVElcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIkNBTkNFTExPX0NPU1RFX0ZVTlpJT05BTlRJXCIpKXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIkNBTkNFTExPX0NPU1RFX0ZVTlpJT05BTlRJXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgY2FuY2VsbG9Db3N0ZUZ1bnppb25hbnRpID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICB9XG4gICAgICAgIGxvZy5kZWJ1ZyBcImNhbmNlbGxvQ29zdGVGdW56aW9uYW50aTogXCIgKyBjYW5jZWxsb0Nvc3RlRnVuemlvbmFudGlcblxuICAgICAgICAvLzEwLiBDQU5DRUxMT19WQUxPUkVfSU1QQVRUT1xuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiQ0FOQ0VMTE9fRk9SWkFfSU1QQVRUT19ORUlfTElNSVRJXCIpKXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIkNBTkNFTExPX0ZPUlpBX0lNUEFUVE9fTkVJX0xJTUlUSVwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIGNhbmNlbGxvSW1wYXR0byA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgICBsb2cuZGVidWcgXCJjYW5jZWxsb0ltcGF0dG86IFwiICsgY2FuY2VsbG9JbXBhdHRvXG5cbiAgICAgICAgaWYoY2FuY2VsbG9Vb21vUHJlc2VudGUudG9TdHJpbmcoKS5lcXVhbHMoXCJTSVwiKSAmJiBcbiAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgY2FuY2VsbG9BbnRpY2FkdXRhLnRvU3RyaW5nKCkuZXF1YWxzKFwiTk9cIikgfHwgXG4gICAgICAgICAgICAgICAoY2FuY2VsbG9BbnRpY2FkdXRhLnRvU3RyaW5nKCkuZXF1YWxzKFwiU0lcIikgJiYgY2FuY2VsbG9BbnRpY2FkdXRhRnVuemlvbmFudGUudG9TdHJpbmcoKS5lcXVhbHMoXCJOT1wiKSkgfHwgXG4gICAgICAgICAgICAgICBjYW5jZWxsb0V4dHJhY29yc2EudG9TdHJpbmcoKS5lcXVhbHMoXCJOT1wiKSB8fCBcbiAgICAgICAgICAgICAgIChjYW5jZWxsb0V4dHJhY29yc2EudG9TdHJpbmcoKS5lcXVhbHMoXCJTSVwiKSAmJiBjYW5jZWxsb0V4dHJhY29yc2FGdW56aW9uYW50ZS50b1N0cmluZygpLmVxdWFscyhcIk5PXCIpKSB8fFxuICAgICAgICAgICAgICAgY2FuY2VsbG9BbHRyaVJpc2NoaS50b1N0cmluZygpLmVxdWFscyhcIlNJXCIpXG4gICAgICAgICAgICkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJpc2sgPSB0cnVlXG4gICAgICAgIH1cblxuICAgICAgICBpZihjYW5jZWxsb1VvbW9QcmVzZW50ZS50b1N0cmluZygpLmVxdWFscyhcIk5PXCIpICYmIFxuICAgICAgICAgICAoXG4gICAgICAgICAgICAgICBjYW5jZWxsb1Jpc2NoaSAhPSBudWxsIHx8IFxuICAgICAgICAgICAgICAgY2FuY2VsbG9Db3N0ZS50b1N0cmluZygpLmVxdWFscyhcIk5PXCIpIHx8XG4gICAgICAgICAgICAgICAoY2FuY2VsbG9Db3N0ZS50b1N0cmluZygpLmVxdWFscyhcIlNJXCIpICYmIGNhbmNlbGxvQ29zdGVGdW56aW9uYW50aS50b1N0cmluZygpLmVxdWFscyhcIk5PXCIpKSB8fCBcbiAgICAgICAgICAgICAgIGNhbmNlbGxvQW50aWNhZHV0YS50b1N0cmluZygpLmVxdWFscyhcIk5PXCIpIHx8IFxuICAgICAgICAgICAgICAgKGNhbmNlbGxvQW50aWNhZHV0YS50b1N0cmluZygpLmVxdWFscyhcIlNJXCIpICYmIGNhbmNlbGxvQW50aWNhZHV0YUZ1bnppb25hbnRlLnRvU3RyaW5nKCkuZXF1YWxzKFwiTk9cIikpIHx8IFxuICAgICAgICAgICAgICAgY2FuY2VsbG9FeHRyYWNvcnNhLnRvU3RyaW5nKCkuZXF1YWxzKFwiTk9cIikgfHwgXG4gICAgICAgICAgICAgICAoY2FuY2VsbG9FeHRyYWNvcnNhLnRvU3RyaW5nKCkuZXF1YWxzKFwiU0lcIikgJiYgY2FuY2VsbG9FeHRyYWNvcnNhRnVuemlvbmFudGUudG9TdHJpbmcoKS5lcXVhbHMoXCJOT1wiKSkgfHxcbiAgICAgICAgICAgICAgIGNhbmNlbGxvQWx0cmlSaXNjaGkudG9TdHJpbmcoKS5lcXVhbHMoXCJTSVwiKSB8fFxuICAgICAgICAgICAgICAgY2FuY2VsbG9JbXBhdHRvLnRvU3RyaW5nKCkuZXF1YWxzKFwiTk9cIilcbiAgICAgICAgICAgKSlcbiAgICAgICAge1xuICAgICAgICAgICAgcmlzayA9IHRydWVcbiAgICAgICAgfVxuXG5cbiAgICAgICAgaWYgKHJpc2spe1xuICAgICAgICAgICAgc3RhdHVzID0gXCJSSVNLX0RFVEVDVEVEXCJcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBzdGF0dXMgPSBcIlJJU0tfQU5BTFlTSVNfT0tcIlxuICAgICAgICB9XG4gICAgICAgIGxvZy5kZWJ1ZyBcInN0YXR1czogXCIgKyBzdGF0dXNcbiAgICAgICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXG4gICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGlzc3VlXG5cbiAgICAgICAgZmllbGRDb25maWcgPSBwbXN0YXR1cy5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSlcbiAgICAgICAgLy9sb2cud2FybiBcImZpZWxkQ29uZmlnOiBcIiArIGZpZWxkQ29uZmlnXG4gICAgICAgIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gc3RhdHVzIH1cblxuICAgICAgICBwbXN0YXR1cy51cGRhdGVWYWx1ZShudWxsLCBpc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbXN0YXR1cyksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG4gICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgoaXNzdWUpXG5cbiAgICB9XG4gICAgZGVmIGJhcnJpZXJhVW9tb1ByZXNlbnRlLCBiYXJyaWVyYVJpc2NoaSwgYmFycmllcmFBbHRyaVJpc2NoaSwgYmFycmllcmFGb3RvY2VsbHVsZSwgYmFycmllcmFGb3RvY2VsbHVsZUZ1bnppb25hbnRpLCBiYXJyaWVyYVBhc3NhZ2dpb1BlZG9uYWxlLCBiYXJyaWVyYVBhc3NhZ2dpb1BlZG9uYWxlU2VnbmFsYXRvLCBiYXJyaWVyYUludmVyc2lvbmUsIGJhcnJpZXJhSW1wYXR0b1xuICAgIC8vQkFSUklFUkVcbiAgICBpZihwcm9kVHlwZS5lcXVhbHMoXCJCQVJSSUVSRVwiKSl7XG4gICAgICAgIC8vMS4gQkFSUklFUkFfTUFDQ0hJTkFfVU9NT19QUkVTRU5URVxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiQkFSUklFUkFfTUFDQ0hJTkFfVU9NT19QUkVTRU5URVwiKSl7XG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJCQVJSSUVSQV9NQUNDSElOQV9VT01PX1BSRVNFTlRFXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgYmFycmllcmFVb21vUHJlc2VudGUgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG4gICAgICAgIH1cbiAgICAgICAgbG9nLmRlYnVnIFwiYmFycmllcmFVb21vUHJlc2VudGU6IFwiICsgYmFycmllcmFVb21vUHJlc2VudGVcblxuICAgICAgICAvLzIuIEJBUlJJRVJBX0FMVFJJX1JJU0NISVxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiQkFSUklFUkFfQUxUUklfUklTQ0hJXCIpKXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIkJBUlJJRVJBX0FMVFJJX1JJU0NISVwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIGJhcnJpZXJhQWx0cmlSaXNjaGkgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG4gICAgICAgIH1cbiAgICAgICAgbG9nLmRlYnVnIFwiYmFycmllcmFBbHRyaVJpc2NoaTogXCIgKyBiYXJyaWVyYUFsdHJpUmlzY2hpXG4gICAgICAgIFxuICAgICAgICAvLzMuIEJBUlJJRVJBX1JJU0NISVxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiQkFSUklFUkFfUklTQ0hJXCIpKXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIkJBUlJJRVJBX1JJU0NISVwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIGJhcnJpZXJhUmlzY2hpID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICB9XG4gICAgICAgIGxvZy5kZWJ1ZyBcImJhcnJpZXJhUmlzY2hpOiBcIiArIGJhcnJpZXJhUmlzY2hpXG4gICAgICAgIFxuICAgICAgICAvLzQuIEJBUlJJRVJBX0ZPVE9DRUxMVUxFXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJCQVJSSUVSQV9GT1RPQ0VMTFVMRVwiKSl7XG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJCQVJSSUVSQV9GT1RPQ0VMTFVMRVwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIGJhcnJpZXJhRm90b2NlbGx1bGUgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG4gICAgICAgIH1cbiAgICAgICAgbG9nLmRlYnVnIFwiYmFycmllcmFGb3RvY2VsbHVsZTogXCIgKyBiYXJyaWVyYUZvdG9jZWxsdWxlXG5cbiAgICAgICAgLy81LiBDQU5DRUxMT19BTlRJQ0FEVVRBX0ZVTlpJT05BTlRFXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJCQVJSSUVSQV9GT1RPQ0VMTFVMRV9GVU5aSU9OQU5USVwiKSl7XG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJCQVJSSUVSQV9GT1RPQ0VMTFVMRV9GVU5aSU9OQU5USVwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIGJhcnJpZXJhRm90b2NlbGx1bGVGdW56aW9uYW50aSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgICBsb2cuZGVidWcgXCJiYXJyaWVyYUZvdG9jZWxsdWxlRnVuemlvbmFudGk6IFwiICsgYmFycmllcmFGb3RvY2VsbHVsZUZ1bnppb25hbnRpXG5cbiAgICAgICAgLy82LiBCQVJSSUVSQV9QQVNTQUdHSU9fUEVET05BTEVcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIkJBUlJJRVJBX1BBU1NBR0dJT19QRURPTkFMRVwiKSl7XG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJCQVJSSUVSQV9QQVNTQUdHSU9fUEVET05BTEVcIikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBiYXJyaWVyYVBhc3NhZ2dpb1BlZG9uYWxlID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICB9XG4gICAgICAgIGxvZy5kZWJ1ZyBcImJhcnJpZXJhUGFzc2FnZ2lvUGVkb25hbGU6IFwiICsgYmFycmllcmFQYXNzYWdnaW9QZWRvbmFsZVxuICAgICAgICBcbiAgICAgICAgLy83LiBCQVJSSUVSQV9QQVNTQUdHSU9fUEVET05BTEVfU0VHUkVHQVRPXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJCQVJSSUVSQV9QQVNTQUdHSU9fUEVET05BTEVfU0VHUkVHQVRPXCIpKXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIkJBUlJJRVJBX1BBU1NBR0dJT19QRURPTkFMRV9TRUdSRUdBVE9cIikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBiYXJyaWVyYVBhc3NhZ2dpb1BlZG9uYWxlU2VnbmFsYXRvID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICB9XG4gICAgICAgIGxvZy5kZWJ1ZyBcImJhcnJpZXJhUGFzc2FnZ2lvUGVkb25hbGVTZWduYWxhdG86IFwiICsgYmFycmllcmFQYXNzYWdnaW9QZWRvbmFsZVNlZ25hbGF0b1xuICAgICAgICBcbiAgICAgICAgLy84LiBCQVJSSUVSQV9JTlZFUlNJT05FX1NVX09TVEFDT0xPXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJCQVJSSUVSQV9JTlZFUlNJT05FX1NVX09TVEFDT0xPXCIpKXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIkJBUlJJRVJBX0lOVkVSU0lPTkVfU1VfT1NUQUNPTE9cIikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBiYXJyaWVyYUludmVyc2lvbmUgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG4gICAgICAgIH1cbiAgICAgICAgbG9nLmRlYnVnIFwiYmFycmllcmFJbnZlcnNpb25lOiBcIiArIGJhcnJpZXJhSW52ZXJzaW9uZVxuICAgICAgICBcbiAgICAgICAgLy85LiBCQVJSSUVSQV9WQUxPUkVfSU1QQVRUT1xuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiQkFSUklFUkFfVkFMT1JFX0lNUEFUVE9cIikpe1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiQkFSUklFUkFfVkFMT1JFX0lNUEFUVE9cIikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBiYXJyaWVyYUltcGF0dG8gPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG4gICAgICAgIH1cbiAgICAgICAgbG9nLmRlYnVnIFwiYmFycmllcmFJbXBhdHRvOiBcIiArIGJhcnJpZXJhSW1wYXR0b1xuXG4gICAgICAgIGlmKGJhcnJpZXJhVW9tb1ByZXNlbnRlLnRvU3RyaW5nKCkuZXF1YWxzKFwiU0lcIikgJiYgYmFycmllcmFBbHRyaVJpc2NoaS50b1N0cmluZygpLmVxdWFscyhcIlNJXCIpKVxuICAgICAgICB7XG4gICAgICAgICAgICByaXNrID0gdHJ1ZVxuICAgICAgICB9XG5cbiAgICAgICAgaWYoYmFycmllcmFVb21vUHJlc2VudGUudG9TdHJpbmcoKS5lcXVhbHMoXCJOT1wiKSAmJiBcbiAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgYmFycmllcmFSaXNjaGkgIT0gbnVsbCB8fCBcbiAgICAgICAgICAgICAgIGJhcnJpZXJhRm90b2NlbGx1bGUudG9TdHJpbmcoKS5lcXVhbHMoXCJOT1wiKSB8fFxuICAgICAgICAgICAgICAgKGJhcnJpZXJhRm90b2NlbGx1bGUudG9TdHJpbmcoKS5lcXVhbHMoXCJTSVwiKSAmJiBiYXJyaWVyYUZvdG9jZWxsdWxlRnVuemlvbmFudGkudG9TdHJpbmcoKS5lcXVhbHMoXCJOT1wiKSkgfHwgXG4gICAgICAgICAgICAgICBiYXJyaWVyYVBhc3NhZ2dpb1BlZG9uYWxlLnRvU3RyaW5nKCkuZXF1YWxzKFwiTk9cIikgfHwgXG4gICAgICAgICAgICAgICAoYmFycmllcmFQYXNzYWdnaW9QZWRvbmFsZS50b1N0cmluZygpLmVxdWFscyhcIlNJXCIpICYmIGJhcnJpZXJhUGFzc2FnZ2lvUGVkb25hbGVTZWduYWxhdG8udG9TdHJpbmcoKS5lcXVhbHMoXCJOT1wiKSkgfHwgXG4gICAgICAgICAgICAgICBiYXJyaWVyYUludmVyc2lvbmUudG9TdHJpbmcoKS5lcXVhbHMoXCJOT1wiKSB8fCBcbiAgICAgICAgICAgICAgIGJhcnJpZXJhQWx0cmlSaXNjaGkudG9TdHJpbmcoKS5lcXVhbHMoXCJTSVwiKSB8fFxuICAgICAgICAgICAgICAgYmFycmllcmFJbXBhdHRvLnRvU3RyaW5nKCkuZXF1YWxzKFwiTk9cIilcbiAgICAgICAgICAgKSlcbiAgICAgICAge1xuICAgICAgICAgICAgcmlzayA9IHRydWVcbiAgICAgICAgfVxuXG5cbiAgICAgICAgaWYgKHJpc2spe1xuICAgICAgICAgICAgc3RhdHVzID0gXCJSSVNLX0RFVEVDVEVEXCJcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBzdGF0dXMgPSBcIlJJU0tfQU5BTFlTSVNfT0tcIlxuICAgICAgICB9XG4gICAgICAgIGxvZy5kZWJ1ZyBcInN0YXR1czogXCIgKyBzdGF0dXNcbiAgICAgICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXG4gICAgICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGlzc3VlXG5cbiAgICAgICAgZmllbGRDb25maWcgPSBwbXN0YXR1cy5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSlcbiAgICAgICAgLy9sb2cud2FybiBcImZpZWxkQ29uZmlnOiBcIiArIGZpZWxkQ29uZmlnXG4gICAgICAgIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gc3RhdHVzIH1cblxuICAgICAgICBwbXN0YXR1cy51cGRhdGVWYWx1ZShudWxsLCBpc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbXN0YXR1cyksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG4gICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgoaXNzdWUpXG4gICAgfVxuICAgIFxuICAgIGlmKHRvYmVTdG9wcGVkKXtcbiAgICAgICAgZmllbGRDb25maWcgPSBwbVN0b3BBc3NldC5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSlcbiAgICAgICAgLy9sb2cud2FybiBcImZpZWxkQ29uZmlnOiBcIiArIGZpZWxkQ29uZmlnXG4gICAgICAgIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gXCJZRVNcIiB9XG5cbiAgICAgICAgcG1TdG9wQXNzZXQudXBkYXRlVmFsdWUobnVsbCwgaXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocG1TdG9wQXNzZXQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGlzc3VlKVxuICAgIH1lbHNle1xuICAgICAgICBmaWVsZENvbmZpZyA9IHBtU3RvcEFzc2V0LmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKVxuICAgICAgICAvL2xvZy53YXJuIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcbiAgICAgICAgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIk5PXCIgfVxuXG4gICAgICAgIHBtU3RvcEFzc2V0LnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBtU3RvcEFzc2V0KSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcbiAgICAgICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChpc3N1ZSlcbiAgICB9XG5cbn0iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">1124ddc0-cc6a-4547-83f0-1f4955ae1cac</arg>
                  <arg name="FIELD_NOTES">YCFgQ2hlY2sgYW5kIGZpbGwgaW4gT1BfUE1fQVNTRVRfUkVTVUxU</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyO1xuaW1wb3J0IGphdmEudXRpbC5NYXA7XG5cblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcblxuLy9Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKClcbi8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMjI2MTg2XCIpXG5cbmRlZiByaXNrID0gZmFsc2VcbmRlZiBjaGVjayA9IGZhbHNlXG5kZWYgY29tcGxldGVkID0gdHJ1ZVxuZGVmIG5vdF9jb21wbGV0ZWQgPSAwXG5cbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5kZWYgcG1zdGF0dXMgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9QTV9BU1NFVF9SRVNVTFRcIilbMF1cblxuZGVmIHJlcXVlc3RNZXRob2QgPSBcIkdFVFwiXG5kZWYgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vQUEvdGlja2V0L1wiKyBpc3N1ZSArXCIvZ2V0Umlza0RldGVjdGVkXCJcblxubG9nLmRlYnVnIGJhc2VVUkxcblVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG5IdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG5jb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xuY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuY29ubmVjdGlvbi5jb25uZWN0KCk7XG5cbmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbmRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG5sb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG5cbmlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICBsb2cuZGVidWcgXCJFcnJvclN0cmVhbTogXCIgKyBjb25uZWN0aW9uLmdldEVycm9yU3RyZWFtKCkudG9TdHJpbmcoKVxuICAgIGxvZy5kZWJ1ZyBcImdldEhlYWRlckZpZWxkcygpOiBcIiArIGNvbm5lY3Rpb24uZ2V0SGVhZGVyRmllbGRzKClcbiAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XG4gICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xuXG4gICAgZGVmIGpzb25TbHVycGVyID0gbmV3IEpzb25TbHVycGVyKClcbiAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxuICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgXG4gICAgbG9nLmRlYnVnIFwibWVzc2FnZTogXCIgKyAganNvbl9vYmplY3QubWVzc2FnZVxuXG4gICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNFVC1QTS1SRVNVTFRTXCIpXG4gICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5tZXNzYWdlKVxuICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxuXG4gICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKFwiRVwiLCBvdXRwdXQudG9TdHJpbmcoKSlcbn1cblxuZGVmIHN0YXR1c1xuZGVmIGpzb25TbHVycGVyID0gbmV3IEpzb25TbHVycGVyKClcbmRlZiBqc29uX29iamVjdF9yZXNwID0ganNvblNsdXJwZXIucGFyc2UoY29ubmVjdGlvbi5nZXRJbnB1dFN0cmVhbSgpKVxuXG5yaXNrID0gKChNYXA8U3RyaW5nLFN0cmluZz4panNvbl9vYmplY3RfcmVzcCkuZ2V0KFwiREFOR0VST1VTXCIpO1xuaWYgKHJpc2sgPT0gXCJ0cnVlXCIpe1xuICAgIGxvZy5kZWJ1ZyBcIlJpc2sgdmFsdWU6XCIgKyByaXNrXG4gICAgc3RhdHVzID0gXCJSSVNLX0RFVEVDVEVEXCJcbn1lbHNle1xuICAgIGNvbXBsZXRlZCA9ICgoTWFwPFN0cmluZyxTdHJpbmc+KWpzb25fb2JqZWN0X3Jlc3ApLmdldChcIkNPTVBMRVRFRFwiKTtcbiAgICBsb2cuZGVidWcgXCJDb21wbGV0ZWQgdmFsdWU6XCIgKyBjb21wbGV0ZWRcbiAgICBpZihjb21wbGV0ZWQgPT0gXCJmYWxzZVwiKXtcbiAgICAgICAgc3RhdHVzID0gXCJNQUlOVEVOQU5DRV9LT1wiXG4gICAgfWVsc2V7XG4gICAgICAgIHN0YXR1cyA9IFwiTUFJTlRFTkFOQ0VfT0tcIlxuICAgIH1cbn1cblxuZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXG5kZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBpc3N1ZVxuXG5kZWYgZmllbGRDb25maWcgPSBwbXN0YXR1cy5nZXRSZWxldmFudENvbmZpZyhpc3N1ZSlcbi8vbG9nLndhcm4gXCJmaWVsZENvbmZpZzogXCIgKyBmaWVsZENvbmZpZ1xuZGVmIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gc3RhdHVzIH1cblxucG1zdGF0dXMudXBkYXRlVmFsdWUobnVsbCwgaXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocG1zdGF0dXMpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChpc3N1ZSkgICAgIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_COPY_ORGANIZATIONS"></arg>
                  <arg name="FIELD_COPY_SUBTASKS"></arg>
                  <arg name="FIELD_NOTES">YCFgRlNNOiBjcmVhdGUgbmV3IFJlcGFpciBpZiBjaGFyZ2FibGUgc3BhcmVzIGhhdmUgYmVlbiBhZGRlZA==</arg>
                  <arg name="FIELD_COPY_COMMENTS"></arg>
                  <arg name="FIELD_COPY_FIELDS">COPY_CUSTOM_FIELDS</arg>
                  <arg name="FIELD_LINK_TYPE">10801</arg>
                  <arg name="FIELD_FUNCTION_ID">48439710-eeb7-4e16-8b91-724f16735dd3</arg>
                  <arg name="FIELD_TARGET_ISSUE_TYPE">13001</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CloneIssue</arg>
                  <arg name="FIELD_USER_KEY"></arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CloneIssue</arg>
                  <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXHJcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvblxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxyXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvbkJ1aWxkZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXHJcbmltcG9ydCBqYXZhLnRleHQuU2ltcGxlRGF0ZUZvcm1hdDtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZVxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZTtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5ldmVudC50eXBlLkV2ZW50RGlzcGF0Y2hPcHRpb25cclxuXHJcblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcclxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcclxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcclxuICAgIHByb3BlcnRpZXMubG9hZChpdClcclxufVxyXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcclxuXHJcbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKVxyXG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTU5NjY5XCIpXHJcbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cclxuQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyBcclxuZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XHJcbiAgXHJcbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBUeXBlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xyXG5DbGFzcyBvYmplY3RUeXBlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUZhY2FkZVwiKTsgXHJcbmRlZiBvYmplY3RUeXBlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVGYWNhZGVDbGFzcyk7XHJcbiAgXHJcbi8qIEdldCBJbnNpZ2h0IE9iamVjdCBBdHRyaWJ1dGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXHJcbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpOyBcclxuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcclxuICBcclxuQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7IFxyXG5kZWYgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XHJcbkNsYXNzIGlxbEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLklRTEZhY2FkZVwiKTsgXHJcbmRlZiBpcWxGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUoaXFsRmFjYWRlQ2xhc3MpO1xyXG5cclxuZGVmIHJlcGxhY2VkTWF0ZXJpYWxzID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1JFUExBQ0VEX01BVEVSSUFMU1wiKVswXVxyXG5kZWYgY2hhcmdhYmxlU3BhcmVzID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1BNX0NIQVJHQUJMRV9TUEFSRVNcIilbMF1cclxuZGVmIGFzc2V0ID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0FTU0VUXCIpWzBdXHJcbmRlZiByZXBhaXJMaW5rZWQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfTUFJTlRFTkFOQ0VfTElOS0VEX0lTU1VFXCIpWzBdXHJcblxyXG5cclxuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBhaXJMaW5rZWQpID09IG51bGwpe1xyXG5cclxuICAgIC8qQ2hlY2sgYXNzZXQncyBDb250cmFjdCBUeXBlKi9cclxuICAgIGRlZiBhTmFtZSA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXQpXHJcbiAgICBsb2cuZGVidWcgYU5hbWVcclxuICAgIGRlZiBhS2V5ID0gYU5hbWUudG9TdHJpbmcoKS5zdWJzdHJpbmcoYU5hbWUudG9TdHJpbmcoKS5sYXN0SW5kZXhPZignKCcpKzEsYU5hbWUudG9TdHJpbmcoKS5sYXN0SW5kZXhPZignKScpKVxyXG4gICAgZGVmIGFPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oYUtleSlcclxuICAgIC8vZ2V0IFwiQ1VTVE9NRVJfQ09OVFJBQ1RfUkVGXCJcclxuICAgIGRlZiBjb250cmFjdElkLCBmZWVDb250cmFjdD1mYWxzZVxyXG4gICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGFPYmplY3QuZ2V0SWQoKSwgXCJDVVNUT01FUl9DT05UUkFDVF9SRUZcIikpe1xyXG4gICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGFPYmplY3QuZ2V0SWQoKSwgXCJDVVNUT01FUl9DT05UUkFDVF9SRUZcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICAgICAgY29udHJhY3RJZCA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpXHJcblxyXG4gICAgICAgIC8qTG9hZCBDb250cmFjdCBhbmQgY2hlY2sgaWYgaXQgaXMgYSBNQUlOVEVOQU5DRSBGRUUgQ09OVFJBQ1QqL1xyXG4gICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbnRyYWN0SWQsIFwiQ09OVFJBQ1RfVFlQRVwiKS5jcmVhdGVNdXRhYmxlKClcclxuICAgICAgICBpZihvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscyhcIk1BSU5URU5BTkNFIEZFRSBDT05UUkFDVFwiKSl7XHJcbiAgICAgICAgICAgIGZlZUNvbnRyYWN0PXRydWVcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxvZy5kZWJ1ZyBjb250cmFjdElkXHJcbiAgICAgICAgbG9nLmRlYnVnIGZlZUNvbnRyYWN0XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgSWYgdGhlIGNvbnRyYWN0IGxpbmtlZCB0byB0aGUgYXNzZXQgaXMgTUFJTlRFTkFOQ0UgRkVFIENPTlRSQUNUXHJcbiAgICAgICAgMS4gY2hlY2sgZm9yIGVhY2ggc3BhcmUgaW4gdGhlIHRpY2tldCBpZiB0aGUgc2VsZWN0ZWQgXCJSZXBsYWNlIFJlYXNvblwiIGlzIG9uZSBvZiB0aG9zZSB0aGF0IG1ha2UgdGhlIHBhcnQgY2hhcmdhYmxlIFxyXG4gICAgICAgIC0tPiBpZiBhdCBsZWFzdCBvbmUgcGFydCBpcyBjaGFyZ2FibGUgLS0+IGEgbmV3IHJlcGFpciB0aWNrZXQgaGFzIHRvIGJlIGNyZWF0ZWRcclxuICAgICAgICAtLT4gaWYgbm8gb25lIG9mIHRoZSBzZWxlY3RlZCBcIlJlcGxhY2UgUmVhc29uXCIgbWFrZXMgdGhlIHBhcnQgY2hhcmdhYmxlIC0tPiBcclxuICAgICAgICAyLiBmb3IgZWFjaCBzcGFyZSBub3QgY2hhcmdhYmxlIGR1ZSB0byB0aGUgXCJSZXBsYWNlIFJlYXNvblwiIGNoZWNrIGlmIGl0IGlzIGluY2x1ZGVkIG9yIG5vdCBpbiB0aGUgY3VzdG9tZXIgY29udHJhY3RcclxuICAgICAgICAtLT4gaWYgYXQgbGVhc3Qgb25lIHBhcnQgaXMgbm90IGluY2x1ZGVkIC0tPiBhIG5ldyByZXBhaXIgdGlja2V0IGhhcyB0byBiZSBjcmVhdGVkXHJcbiAgICAgICAgLS0+IGlmIGFsbCBwYXJ0cyBhcmUgaW5jbHVkZWQgbm8gdGlja2V0IGhhcyB0byBiZSBjcmVhdGVkXHJcblxyXG4gICAgICAgIElmIHRoZSBjb250cmFjdCBsaW5rZWQgdG8gdGhlIGFzc2V0IGlzIE1BSU5URU5BTkNFIFRJQ0tFVCBDT05UUkFDVCAtLT4gYWxsIGxvZ2dlZCBzcGFyZXMgYXJlIGNoYXJnYWJsZSAtLT4gYSBuZXcgcmVwYWlyIHRpY2tldCBoYXMgdG8gYmUgY3JlYXRlZFxyXG4gICAgICAgICovXHJcbiAgICAgICAgZGVmIG1hdGVyaWFscyA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwbGFjZWRNYXRlcmlhbHMpXHJcbiAgICAgICAgZGVmIHRvQmVDaGFyZ2VkID0gZmFsc2VcclxuXHJcbiAgICAgICAgaWYoZmVlQ29udHJhY3Qpe1xyXG5cclxuICAgICAgICAgICAgZm9yKG0gaW4gbWF0ZXJpYWxzKXtcclxuICAgICAgICAgICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmQgZ2V0IG9iamVjdFxyXG4gICAgICAgICAgICAgICAgbT1tLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgICAgIGRlZiBtS2V5ID0gbS5zdWJzdHJpbmcobS5sYXN0SW5kZXhPZignKCcpKzEsbS5sYXN0SW5kZXhPZignKScpKVxyXG4gICAgICAgICAgICAgICAgZGVmIG1PYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4obUtleSlcclxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIi0tLS0tLS0tLS0tLS0tLS0tLS0tIENvbXBvbWVudDogXCIgKyBtICsgXCItLS0tLS0tLS0tLS0tLS0tLS0tLS1cIlxyXG4gICAgICAgICAgICAgICAgZGVmIG1hdENvZGUsIG1hdE9ialxyXG4gICAgICAgICAgICAgICAgLy9HZXQgQ29tcG9uZW50J3MgTUFURVJJQUxfUkVGXHJcbiAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obU9iamVjdC5nZXRJZCgpLCBcIk1BVEVSSUFMX1JFRlwiKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obU9iamVjdC5nZXRJZCgpLCBcIk1BVEVSSUFMX1JFRlwiKS5jcmVhdGVNdXRhYmxlKClcclxuICAgICAgICAgICAgICAgICAgICBtYXRPYmogPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKVxyXG4gICAgICAgICAgICAgICAgICAgIG1hdENvZGUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCksIFwiTUFUTlJcIikuY3JlYXRlTXV0YWJsZSgpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJtYXRPYmo6IFwiICsgbWF0T2JqXHJcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJtYXRDb2RlOiBcIiArIG1hdENvZGVcclxuICAgICAgICAgICAgICAgIC8vZ2V0IFwiUmVwbGFjZSBSZWFzb25cIiBmb3IgdGhhdCBUZWNobmljaWFuXHJcbiAgICAgICAgICAgICAgICBkZWYgb2JUcmlhZ2VcclxuICAgICAgICAgICAgICAgIGRlZiByZXBsYWNlUmVhc29uXHJcbiAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obU9iamVjdC5nZXRJZCgpLCBcIlBST0JMRU1fUkVGXCIpKXtcclxuICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihtT2JqZWN0LmdldElkKCksIFwiUFJPQkxFTV9SRUZcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVwbGFjZVJlYXNvbiA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qQ2hlY2sgaWYgdGhlIHNlbGVjdGVkIHByb2JsZW0gaXMgb25lIG9mIHRoZSBFeGNsdXNpb25zIHNlbGVjdGVkIGluIHRoZSBjb250cmFjdCBwYWNrYWdlKi9cclxuICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdElkLCBcIlBBQ0tBR0VfUkVGXCIpLmNyZWF0ZU11dGFibGUoKVxyXG4gICAgICAgICAgICAgICAgICAgIGRlZiBwYWNrYWdlSWQgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihwYWNrYWdlSWQsIFwiQUxMX1JFUEFJUl9JTkNMVURFRF9FWENMVVNJT05TXCIpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ocGFja2FnZUlkLCBcIkFMTF9SRVBBSVJfSU5DTFVERURfRVhDTFVTSU9OU1wiKS5jcmVhdGVNdXRhYmxlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLypDaGVjayBpZiBhdCBsZWFzdCBvbmUgZXhjbHVzaW9uIGhhcyBiZWVuIHNlbGVjdGVkKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYob2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpLnNpemUoKSA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChlIGluIG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLypDaGVjayBpZiB0aGUgc2VsZWN0ZWQgXCJSZXBsYWNlIFJlYXNvblwiIGlzIGluY2x1ZGVkIGluIENvbnRyYWN0IEV4Y3BldGlvbnMqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGUuZ2V0VmFsdWUoKSA9PSByZXBsYWNlUmVhc29uKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9CZUNoYXJnZWQ9dHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ0cm92YXRvIHNwYXJlIGVzY2x1c28gZGFsIGNvbnRyYXR0b1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBkZWYgbWF0SW5Db250cmFjdD1mYWxzZSwgbWF0SW5QYWNrYWdlPWZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYodG9CZUNoYXJnZWQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKkNoZWNrIGlmIHRoZSBwYXJ0IGlzIGluY2x1ZGVkIGluIHRoZSBjb250cmFjdCBwYWNrYWdlIG9yIGluIHRoZSBjb250cmFjdCAtIFNQQVJFU19JTkNMVURFRCAvIFNQQVJFU19JTkNMVURFRCovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdElkLCBcIlNQQVJFU19JTkNMVURFRFwiKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb250cmFjdElkLCBcIlNQQVJFU19JTkNMVURFRFwiKS5jcmVhdGVNdXRhYmxlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBzcGFyZUluQ29udHJhY3QgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInNwYXJlSW5Db250cmFjdDogXCIgKyBzcGFyZUluQ29udHJhY3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAocyBpbiBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qQ2hlY2sgaWYgdGhlIHNlbGVjdGVkIFwiUmVwbGFjZSBSZWFzb25cIiBpcyBpbmNsdWRlZCBpbiBDb250cmFjdCBFeGNwZXRpb25zKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihzLmdldFZhbHVlKCkgPT0gbWF0T2JqKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0SW5Db250cmFjdCA9IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidHJvdmF0byBzcGFyZSBpbmNsdXNvIG5lbCBjb250cmF0dG9cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ocGFja2FnZUlkLCBcIlNQQVJFU19JTkNMVURFRFwiKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihwYWNrYWdlSWQsIFwiU1BBUkVTX0lOQ0xVREVEXCIpLmNyZWF0ZU11dGFibGUoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIHNwYXJlSW5QYWNrYWdlID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJzcGFyZUluUGFja2FnZTogXCIgKyBzcGFyZUluUGFja2FnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChzIGluIG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLypDaGVjayBpZiB0aGUgc2VsZWN0ZWQgXCJSZXBsYWNlIFJlYXNvblwiIGlzIGluY2x1ZGVkIGluIENvbnRyYWN0IEV4Y3BldGlvbnMqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHMuZ2V0VmFsdWUoKSA9PSBtYXRPYmope1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRJblBhY2thZ2UgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRyb3ZhdG8gc3BhcmUgaW5jbHVzbyBuZWwgcGFjY2hldHRvXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIW1hdEluQ29udHJhY3QgJiYgIW1hdEluUGFja2FnZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJtYXRlcmlhbGUgTk9OIGluY2x1c28gbmVsIGNvbnRyYXR0byBlIG5lbCBwYWNjaGV0dG8gLS0+IGRhIGZhdHR1cmFyZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b0JlQ2hhcmdlZD10cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdEluQ29udHJhY3Q9ZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0SW5QYWNrYWdlPWZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9CZUNoYXJnZWQ9dHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcGxhY2VkTWF0ZXJpYWxzKSAhPSBudWxsKXtcclxuICAgICAgICAgICAgICAgIHRvQmVDaGFyZ2VkPXRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZGVmIHVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcclxuICAgICAgICBNdXRhYmxlSXNzdWUgbWkgPSAoTXV0YWJsZUlzc3VlKSBpc3N1ZTtcclxuICAgICAgICBkZWYgZmllbGRDb25maWcgPSBjaGFyZ2FibGVTcGFyZXMuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpXHJcbiAgICAgICAgLy9sb2cud2FybiBcImZpZWxkQ29uZmlnOiBcIiArIGZpZWxkQ29uZmlnXHJcbiAgICAgICAgZGVmIGNmTmV3VmFsdWVcclxuICAgICAgICBpZih0b0JlQ2hhcmdlZCl7XHJcbiAgICAgICAgICAgIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gXCJZZXNcIiB9XHJcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImdlbmVyYXRlIHJlcGFpclwiXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gXCJOb1wiIH1cclxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiZG8gbm90IGdlbmVyYXRlIHJlcGFpclwiXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgICAgICBtaS5zZXRDdXN0b21GaWVsZFZhbHVlKGNoYXJnYWJsZVNwYXJlcywgY2ZOZXdWYWx1ZSk7XHJcbiAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUodXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7XHJcblxyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgbG9nLmRlYnVnIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwbGFjZWRNYXRlcmlhbHMpXHJcbiAgICAgICAgaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBsYWNlZE1hdGVyaWFscykgIT0gbnVsbCl7XHJcbiAgICAgICAgICAgIGRlZiB0b0JlQ2hhcmdlZD10cnVlXHJcblxyXG4gICAgICAgICAgICBkZWYgdXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxyXG4gICAgICAgICAgICBNdXRhYmxlSXNzdWUgbWkgPSAoTXV0YWJsZUlzc3VlKSBpc3N1ZTtcclxuICAgICAgICAgICAgZGVmIGZpZWxkQ29uZmlnID0gY2hhcmdhYmxlU3BhcmVzLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKVxyXG4gICAgICAgICAgICAvL2xvZy53YXJuIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcclxuICAgICAgICAgICAgZGVmIGNmTmV3VmFsdWVcclxuICAgICAgICAgICAgaWYodG9CZUNoYXJnZWQpe1xyXG4gICAgICAgICAgICAgICAgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cclxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImdlbmVyYXRlIHJlcGFpclwiXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gXCJOb1wiIH1cclxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImRvIG5vdCBnZW5lcmF0ZSByZXBhaXJcIlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbWkuc2V0Q3VzdG9tRmllbGRWYWx1ZShjaGFyZ2FibGVTcGFyZXMsIGNmTmV3VmFsdWUpO1xyXG4gICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZSh1c2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                  <arg name="FIELD_TARGET_PROJECT">AAS</arg>
                  <arg name="FIELD_SELECTED_FIELDS">customfield_22607|||customfield_22602|||customfield_23237|||customfield_22600|||customfield_22822|||customfield_22629|||customfield_22814|||customfield_22601|||customfield_22813|||customfield_22613|||customfield_23203|||customfield_21909|||customfield_22700|||customfield_23918</arg>
                  <arg name="FIELD_ADDITIONAL_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXHJcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvblxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxyXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvbkJ1aWxkZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXHJcbmltcG9ydCBqYXZhLnRleHQuU2ltcGxlRGF0ZUZvcm1hdDtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZVxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZTtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5ldmVudC50eXBlLkV2ZW50RGlzcGF0Y2hPcHRpb25cclxuXHJcblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcclxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcclxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcclxuICAgIHByb3BlcnRpZXMubG9hZChpdClcclxufVxyXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcclxuXHJcbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKVxyXG5cclxuLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy0yMDA2NTVcIilcclxuLy9Jc3N1ZSBzb3VyY2VJc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy02MzI0OVwiKVxyXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXHJcbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTsgXHJcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xyXG4gIFxyXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cclxuQ2xhc3Mgb2JqZWN0VHlwZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVGYWNhZGVcIik7IFxyXG5kZWYgb2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpO1xyXG4gIFxyXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgQXR0cmlidXRlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xyXG5DbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTsgXHJcbmRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XHJcbiAgXHJcbkNsYXNzIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5zZXJ2aWNlcy5tb2RlbC5mYWN0b3J5Lk9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5XCIpOyBcclxuZGVmIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MpO1xyXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxyXG5kZWYgaXFsRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKGlxbEZhY2FkZUNsYXNzKTtcclxuXHJcbmRlZiByZXBsYWNlZE1hdGVyaWFscyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9SRVBMQUNFRF9NQVRFUklBTFNcIilbMF1cclxuZGVmIGNoYXJnYWJsZVNwYXJlcyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9QTV9DSEFSR0FCTEVfU1BBUkVTXCIpWzBdXHJcbmRlZiByZXBhaXJJc3N1ZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX01BSU5URU5BTkNFX0xJTktFRF9JU1NVRVwiKVswXVxyXG5kZWYgdGVjaE9uU2l0ZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1RFQ0hOSUNJQU5TX09OU0lURVwiKVswXVxyXG5kZWYgYXNzZXQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfQVNTRVRcIilbMF1cclxuXHJcbmRlZiBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKVxyXG5cclxuLypDaGVjayBhc3NldCdzIENvbnRyYWN0IFR5cGUqL1xyXG5kZWYgYU5hbWUgPSBzb3VyY2VJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0KVxyXG5sb2cuZGVidWcgYU5hbWVcclxuZGVmIGFLZXkgPSBhTmFtZS50b1N0cmluZygpLnN1YnN0cmluZyhhTmFtZS50b1N0cmluZygpLmxhc3RJbmRleE9mKCcoJykrMSxhTmFtZS50b1N0cmluZygpLmxhc3RJbmRleE9mKCcpJykpXHJcbmRlZiBhT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGFLZXkpXHJcbmxvZy5kZWJ1ZyBcImFPYmplY3Q6IFwiICsgb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGFPYmplY3QuZ2V0SWQoKSwgXCJDVVNUT01FUl9DT05UUkFDVF9SRUZcIilcclxuZGVmIGNvbXBvbmVudHNUb0NoYXJnZSA9IG5ldyBBcnJheUxpc3QoKVxyXG5cclxuLy9nZXQgXCJDVVNUT01FUl9DT05UUkFDVF9SRUZcIlxyXG5kZWYgY29udHJhY3RJZCwgZmVlQ29udHJhY3Q9ZmFsc2VcclxuZGVmIG1hdGVyaWFscyA9IHNvdXJjZUlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocmVwbGFjZWRNYXRlcmlhbHMpXHJcbmRlZiB0b0JlQ2hhcmdlZCA9IGZhbHNlXHJcbmlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihhT2JqZWN0LmdldElkKCksIFwiQ1VTVE9NRVJfQ09OVFJBQ1RfUkVGXCIpKXtcclxuICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGFPYmplY3QuZ2V0SWQoKSwgXCJDVVNUT01FUl9DT05UUkFDVF9SRUZcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICBjb250cmFjdElkID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKClcclxuXHJcbiAgICAvKkxvYWQgQ29udHJhY3QgYW5kIGNoZWNrIGlmIGl0IGlzIGEgTUFJTlRFTkFOQ0UgRkVFIENPTlRSQUNUKi9cclxuICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbnRyYWN0SWQsIFwiQ09OVFJBQ1RfVFlQRVwiKS5jcmVhdGVNdXRhYmxlKClcclxuICAgIGlmKG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiTUFJTlRFTkFOQ0UgRkVFIENPTlRSQUNUXCIpKXtcclxuICAgICAgICBmZWVDb250cmFjdD10cnVlXHJcbiAgICB9XHJcblxyXG4gICAgbG9nLmRlYnVnIGNvbnRyYWN0SWRcclxuICAgIGxvZy5kZWJ1ZyBmZWVDb250cmFjdFxyXG5cclxuICAgIC8qXHJcbiAgICBJZiB0aGUgY29udHJhY3QgbGlua2VkIHRvIHRoZSBhc3NldCBpcyBNQUlOVEVOQU5DRSBGRUUgQ09OVFJBQ1RcclxuICAgIDEuIGNoZWNrIGZvciBlYWNoIHNwYXJlIGluIHRoZSB0aWNrZXQgaWYgdGhlIHNlbGVjdGVkIFwiUmVwbGFjZSBSZWFzb25cIiBpcyBvbmUgb2YgdGhvc2UgdGhhdCBtYWtlIHRoZSBwYXJ0IGNoYXJnYWJsZSBcclxuICAgIC0tPiBpZiBhdCBsZWFzdCBvbmUgcGFydCBpcyBjaGFyZ2FibGUgLS0+IGEgbmV3IHJlcGFpciB0aWNrZXQgaGFzIHRvIGJlIGNyZWF0ZWRcclxuICAgIC0tPiBpZiBubyBvbmUgb2YgdGhlIHNlbGVjdGVkIFwiUmVwbGFjZSBSZWFzb25cIiBtYWtlcyB0aGUgcGFydCBjaGFyZ2FibGUgLS0+IFxyXG4gICAgMi4gZm9yIGVhY2ggc3BhcmUgbm90IGNoYXJnYWJsZSBkdWUgdG8gdGhlIFwiUmVwbGFjZSBSZWFzb25cIiBjaGVjayBpZiBpdCBpcyBpbmNsdWRlZCBvciBub3QgaW4gdGhlIGN1c3RvbWVyIGNvbnRyYWN0XHJcbiAgICAtLT4gaWYgYXQgbGVhc3Qgb25lIHBhcnQgaXMgbm90IGluY2x1ZGVkIC0tPiBhIG5ldyByZXBhaXIgdGlja2V0IGhhcyB0byBiZSBjcmVhdGVkXHJcbiAgICAtLT4gaWYgYWxsIHBhcnRzIGFyZSBpbmNsdWRlZCBubyB0aWNrZXQgaGFzIHRvIGJlIGNyZWF0ZWRcclxuXHJcbiAgICBJZiB0aGUgY29udHJhY3QgbGlua2VkIHRvIHRoZSBhc3NldCBpcyBNQUlOVEVOQU5DRSBUSUNLRVQgQ09OVFJBQ1QgLS0+IGFsbCBsb2dnZWQgc3BhcmVzIGFyZSBjaGFyZ2FibGUgLS0+IGEgbmV3IHJlcGFpciB0aWNrZXQgaGFzIHRvIGJlIGNyZWF0ZWRcclxuICAgICovXHJcblxyXG4gICAgaWYoZmVlQ29udHJhY3Qpe1xyXG5cclxuICAgICAgICBmb3IobSBpbiBtYXRlcmlhbHMpe1xyXG4gICAgICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5kIGdldCBvYmplY3RcclxuICAgICAgICAgICAgbT1tLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgZGVmIG1LZXkgPSBtLnN1YnN0cmluZyhtLmxhc3RJbmRleE9mKCcoJykrMSxtLmxhc3RJbmRleE9mKCcpJykpXHJcbiAgICAgICAgICAgIGRlZiBtT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKG1LZXkpXHJcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIi0tLS0tLS0tLS0tLS0tLS0tLS0tIENvbXBvbWVudDogXCIgKyBtICsgXCItLS0tLS0tLS0tLS0tLS0tLS0tLS1cIlxyXG4gICAgICAgICAgICBkZWYgbWF0Q29kZSwgbWF0T2JqXHJcbiAgICAgICAgICAgIGRlZiBkZWxldGVkID0gZmFsc2VcclxuICAgICAgICAgICAgZGVmIGRpc2FibGVkID0gZmFsc2VcclxuXHJcbiAgICAgICAgICAgIC8vR2V0IENvbXBvbmVudCdzIERFTEVURUQgZmxhZ1xyXG4gICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obU9iamVjdC5nZXRJZCgpLCBcIkRFTEVURURcIikpe1xyXG4gICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obU9iamVjdC5nZXRJZCgpLCBcIkRFTEVURURcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICAgICAgICAgICAgICBkZWxldGVkID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJkZWxldGVkOiBcIiArIGRlbGV0ZWRcclxuXHJcbiAgICAgICAgICAgIC8vR2V0IENvbXBvbmVudCdzIERJU0FCTEVEIGZsYWdcclxuICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG1PYmplY3QuZ2V0SWQoKSwgXCJESVNBQkxFRFwiKSl7XHJcbiAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihtT2JqZWN0LmdldElkKCksIFwiRElTQUJMRURcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICAgICAgICAgICAgICBkaXNhYmxlZCA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiZGVsZXRlZDogXCIgKyBkZWxldGVkXHJcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImRpc2FibGVkOiBcIiArIGRpc2FibGVkXHJcblxyXG4gICAgICAgICAgICBpZighZGVsZXRlZCAmJiAhZGlzYWJsZWQpe1xyXG4gICAgICAgICAgICAgICAgLy9HZXQgQ29tcG9uZW50J3MgTUFURVJJQUxfUkVGXHJcbiAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obU9iamVjdC5nZXRJZCgpLCBcIk1BVEVSSUFMX1JFRlwiKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obU9iamVjdC5nZXRJZCgpLCBcIk1BVEVSSUFMX1JFRlwiKS5jcmVhdGVNdXRhYmxlKClcclxuICAgICAgICAgICAgICAgICAgICBtYXRPYmogPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKVxyXG4gICAgICAgICAgICAgICAgICAgIG1hdENvZGUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ob2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCksIFwiTUFUTlJcIikuY3JlYXRlTXV0YWJsZSgpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJtYXRPYmo6IFwiICsgbWF0T2JqXHJcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJtYXRDb2RlOiBcIiArIG1hdENvZGVcclxuXHJcbiAgICAgICAgICAgICAgICAvL2dldCBcIlJlcGxhY2UgUmVhc29uXCIgZm9yIHRoYXQgVGVjaG5pY2lhblxyXG4gICAgICAgICAgICAgICAgZGVmIG9iVHJpYWdlXHJcbiAgICAgICAgICAgICAgICBkZWYgcmVwbGFjZVJlYXNvblxyXG4gICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG1PYmplY3QuZ2V0SWQoKSwgXCJQUk9CTEVNX1JFRlwiKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obU9iamVjdC5nZXRJZCgpLCBcIlBST0JMRU1fUkVGXCIpLmNyZWF0ZU11dGFibGUoKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlcGxhY2VSZWFzb24gPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKkNoZWNrIGlmIHRoZSBzZWxlY3RlZCBwcm9ibGVtIGlzIG9uZSBvZiB0aGUgRXhjbHVzaW9ucyBzZWxlY3RlZCBpbiB0aGUgY29udHJhY3QgcGFja2FnZSovXHJcbiAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29udHJhY3RJZCwgXCJQQUNLQUdFX1JFRlwiKS5jcmVhdGVNdXRhYmxlKClcclxuICAgICAgICAgICAgICAgICAgICBkZWYgcGFja2FnZUlkID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKClcclxuICAgICAgICAgICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ocGFja2FnZUlkLCBcIkFMTF9SRVBBSVJfSU5DTFVERURfRVhDTFVTSU9OU1wiKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHBhY2thZ2VJZCwgXCJBTExfUkVQQUlSX0lOQ0xVREVEX0VYQ0xVU0lPTlNcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qQ2hlY2sgaWYgYXQgbGVhc3Qgb25lIGV4Y2x1c2lvbiBoYXMgYmVlbiBzZWxlY3RlZCovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS5zaXplKCkgPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoZSBpbiBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qQ2hlY2sgaWYgdGhlIHNlbGVjdGVkIFwiUmVwbGFjZSBSZWFzb25cIiBpcyBpbmNsdWRlZCBpbiBDb250cmFjdCBFeGNwZXRpb25zKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihlLmdldFZhbHVlKCkgPT0gcmVwbGFjZVJlYXNvbil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvQmVDaGFyZ2VkPXRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiTWF0ZXJpYWxlOiBcIiArIG0gKyBcIiBzb3N0aXR1aXRvIHBlciBcIiArIG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudHNUb0NoYXJnZS5hZGQobU9iamVjdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmIG1hdEluQ29udHJhY3Q9ZmFsc2UsIG1hdEluUGFja2FnZT1mYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCF0b0JlQ2hhcmdlZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qQ2hlY2sgaWYgdGhlIHBhcnQgaXMgaW5jbHVkZWQgaW4gdGhlIGNvbnRyYWN0IHBhY2thZ2Ugb3IgaW4gdGhlIGNvbnRyYWN0IC0gU1BBUkVTX0lOQ0xVREVEIC8gU1BBUkVTX0lOQ0xVREVEKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbnRyYWN0SWQsIFwiU1BBUkVTX0lOQ0xVREVEXCIpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbnRyYWN0SWQsIFwiU1BBUkVTX0lOQ0xVREVEXCIpLmNyZWF0ZU11dGFibGUoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmIHNwYXJlSW5Db250cmFjdCA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwic3BhcmVJbkNvbnRyYWN0OiBcIiArIHNwYXJlSW5Db250cmFjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChzIGluIG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLypDaGVjayBpZiB0aGUgc2VsZWN0ZWQgXCJSZXBsYWNlIFJlYXNvblwiIGlzIGluY2x1ZGVkIGluIENvbnRyYWN0IEV4Y3BldGlvbnMqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHMuZ2V0VmFsdWUoKSA9PSBtYXRPYmope1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRJbkNvbnRyYWN0ID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ0cm92YXRvIHNwYXJlIGluY2x1c28gbmVsIGNvbnRyYXR0b1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFtYXRJbkNvbnRyYWN0ICYmIG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihwYWNrYWdlSWQsIFwiU1BBUkVTX0lOQ0xVREVEXCIpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHBhY2thZ2VJZCwgXCJTUEFSRVNfSU5DTFVERURcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWYgc3BhcmVJblBhY2thZ2UgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInNwYXJlSW5QYWNrYWdlOiBcIiArIHNwYXJlSW5QYWNrYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHMgaW4gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKkNoZWNrIGlmIHRoZSBzZWxlY3RlZCBcIlJlcGxhY2UgUmVhc29uXCIgaXMgaW5jbHVkZWQgaW4gQ29udHJhY3QgRXhjcGV0aW9ucyovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocy5nZXRWYWx1ZSgpID09IG1hdE9iail7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdEluUGFja2FnZSA9IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidHJvdmF0byBzcGFyZSBpbmNsdXNvIG5lbCBwYWNjaGV0dG9cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZighbWF0SW5Db250cmFjdCAmJiAhbWF0SW5QYWNrYWdlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIk1hdGVyaWFsZTogXCIgKyBtICsgXCIgbm9uIGluY2x1c28gblx1MDBlOCBuZWwgY29udHJhdHRvIG5cdTAwZTggbmVsIHBhY2NoZXR0b1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRzVG9DaGFyZ2UuYWRkKG1PYmplY3QpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0SW5Db250cmFjdD1mYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRJblBhY2thZ2U9ZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdG9CZUNoYXJnZWQ9ZmFsc2UgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1lbHNle1xyXG4gICAgICAgIC8qMDcuMDMuMjAyMyBBRiAtIHNlIGlsIGNvbnRyYXR0byBub24gXHUwMGU4IGEgcGFjY2hldHRvIC0tPiB0dXR0aSBpIG1hdGVyaWFsaSBzb25vIGRhIGZhdHR1cmFyZSAqL1xyXG4gICAgICAgIGZvcihtIGluIG1hdGVyaWFscyl7XHJcbiAgICAgICAgICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmQgZ2V0IG9iamVjdFxyXG4gICAgICAgICAgICBtPW0udG9TdHJpbmcoKVxyXG4gICAgICAgICAgICBkZWYgbUtleSA9IG0uc3Vic3RyaW5nKG0ubGFzdEluZGV4T2YoJygnKSsxLG0ubGFzdEluZGV4T2YoJyknKSlcclxuICAgICAgICAgICAgZGVmIG1PYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4obUtleSlcclxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiLS0tLS0tLS0tLS0tLS0tLS0tLS0gQ29tcG9tZW50OiBcIiArIG0gKyBcIi0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiXHJcbiAgICAgICAgICAgIGRlZiBtYXRDb2RlLCBtYXRPYmpcclxuICAgICAgICAgICAgZGVmIGRlbGV0ZWQgPSBmYWxzZVxyXG4gICAgICAgICAgICBkZWYgZGlzYWJsZWQgPSBmYWxzZVxyXG5cclxuICAgICAgICAgICAgLy9HZXQgQ29tcG9uZW50J3MgREVMRVRFRCBmbGFnXHJcbiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihtT2JqZWN0LmdldElkKCksIFwiREVMRVRFRFwiKSl7XHJcbiAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihtT2JqZWN0LmdldElkKCksIFwiREVMRVRFRFwiKS5jcmVhdGVNdXRhYmxlKClcclxuICAgICAgICAgICAgICAgIGRlbGV0ZWQgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImRlbGV0ZWQ6IFwiICsgZGVsZXRlZFxyXG5cclxuICAgICAgICAgICAgLy9HZXQgQ29tcG9uZW50J3MgRElTQUJMRUQgZmxhZ1xyXG4gICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obU9iamVjdC5nZXRJZCgpLCBcIkRJU0FCTEVEXCIpKXtcclxuICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG1PYmplY3QuZ2V0SWQoKSwgXCJESVNBQkxFRFwiKS5jcmVhdGVNdXRhYmxlKClcclxuICAgICAgICAgICAgICAgIGRpc2FibGVkID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJkZWxldGVkOiBcIiArIGRlbGV0ZWRcclxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiZGlzYWJsZWQ6IFwiICsgZGlzYWJsZWRcclxuXHJcbiAgICAgICAgICAgIGlmKCFkZWxldGVkICYmICFkaXNhYmxlZCl7XHJcbiAgICAgICAgICAgICAgICAvL0dldCBDb21wb25lbnQncyBNQVRFUklBTF9SRUZcclxuICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihtT2JqZWN0LmdldElkKCksIFwiTUFURVJJQUxfUkVGXCIpKXtcclxuICAgICAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihtT2JqZWN0LmdldElkKCksIFwiTUFURVJJQUxfUkVGXCIpLmNyZWF0ZU11dGFibGUoKVxyXG4gICAgICAgICAgICAgICAgICAgIG1hdE9iaiA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgbWF0Q29kZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKSwgXCJNQVROUlwiKS5jcmVhdGVNdXRhYmxlKCkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIm1hdE9iajogXCIgKyBtYXRPYmpcclxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIm1hdENvZGU6IFwiICsgbWF0Q29kZVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudHNUb0NoYXJnZS5hZGQobU9iamVjdClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gICAgICAgIFxyXG4gICAgfVxyXG4gICAgbG9nLmRlYnVnIFwiSU4gUE9TVCAtIEVORCBDSEVDS1wiXHJcbiAgICBsb2cuZGVidWcgXCJjb21wb25lbnRzVG9DaGFyZ2U6IFwiICsgY29tcG9uZW50c1RvQ2hhcmdlXHJcbiAgICAvL1VwZGF0ZSBPUF9SRVBMQUNFRF9NQVRFUklBTFMgc2V0dGluZyBvbmx5IHRoZSBvbmVzIGluY2x1ZGVkIGluIGNvbXBvbmVudHNUb0NoYXJnZS5hZGQobU9iamVjdC5nZXRJZCgpKVxyXG5cclxuICAgIGlmICghY29tcG9uZW50c1RvQ2hhcmdlLmlzRW1wdHkoKSkge1xyXG4gICAgICAgIGxvZy5kZWJ1ZyBcInVwZGF0ZSByZXBsYWNlZCBtYXRlcmlhbHMgXCIgKyBjb21wb25lbnRzVG9DaGFyZ2VcclxuICAgICAgICBkZWYgY2YgPSBjdXN0b21GaWVsZE1hbmFnZXIuZ2V0Q3VzdG9tRmllbGRPYmplY3RzKGlzc3VlKS5maW5kIHtpdC5uYW1lID09ICdPUF9SRVBMQUNFRF9NQVRFUklBTFMnfVxyXG4gICAgICAgIGlzc3VlLnNldEN1c3RvbUZpZWxkVmFsdWUoY2YsIGNvbXBvbmVudHNUb0NoYXJnZSlcclxuICAgIH1cclxufWVsc2V7XHJcbiAgICAvKkFGIDI3LjAyLjIwMjMgc2UgbCdpbXBpYW50byBOT04gaGEgKyBjb250cmF0dG8gKGNhc28gYW5vbWFsbyBtYSBwb3NzaWJpbGUgc2UgdmllbmUgcmltb3NzYSBsJ2Fzc29jaWF6aW9uZSBjb250cmF0dG8gZG9wbyBsYSBnZW5lcmF6aW9uZSBkZWwgdGlja2V0IFBNKSB0dXR0aSBpIGNvbXBvbmVudGkgc29ubyBjaGFyZ2FibGUgKi9cclxuICAgIGZvcihtIGluIG1hdGVyaWFscyl7XHJcbiAgICAgICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZCBnZXQgb2JqZWN0XHJcbiAgICAgICAgbT1tLnRvU3RyaW5nKClcclxuICAgICAgICBkZWYgbUtleSA9IG0uc3Vic3RyaW5nKG0ubGFzdEluZGV4T2YoJygnKSsxLG0ubGFzdEluZGV4T2YoJyknKSlcclxuICAgICAgICBkZWYgbU9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihtS2V5KVxyXG4gICAgICAgIGxvZy5kZWJ1ZyBcIi0tLS0tLS0tLS0tLS0tLS0tLS0tIENvbXBvbWVudDogXCIgKyBtICsgXCItLS0tLS0tLS0tLS0tLS0tLS0tLS1cIlxyXG4gICAgICAgIGRlZiBtYXRDb2RlLCBtYXRPYmpcclxuICAgICAgICBkZWYgZGVsZXRlZCA9IGZhbHNlXHJcbiAgICAgICAgZGVmIGRpc2FibGVkID0gZmFsc2VcclxuXHJcbiAgICAgICAgLy9HZXQgQ29tcG9uZW50J3MgREVMRVRFRCBmbGFnXHJcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG1PYmplY3QuZ2V0SWQoKSwgXCJERUxFVEVEXCIpKXtcclxuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obU9iamVjdC5nZXRJZCgpLCBcIkRFTEVURURcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICAgICAgICAgIGRlbGV0ZWQgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKVxyXG4gICAgICAgIH1cclxuICAgICAgICBsb2cuZGVidWcgXCJkZWxldGVkOiBcIiArIGRlbGV0ZWRcclxuXHJcbiAgICAgICAgLy9HZXQgQ29tcG9uZW50J3MgRElTQUJMRUQgZmxhZ1xyXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihtT2JqZWN0LmdldElkKCksIFwiRElTQUJMRURcIikpe1xyXG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihtT2JqZWN0LmdldElkKCksIFwiRElTQUJMRURcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICAgICAgICAgIGRpc2FibGVkID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKClcclxuICAgICAgICB9XHJcbiAgICAgICAgbG9nLmRlYnVnIFwiZGVsZXRlZDogXCIgKyBkZWxldGVkXHJcbiAgICAgICAgbG9nLmRlYnVnIFwiZGlzYWJsZWQ6IFwiICsgZGlzYWJsZWRcclxuXHJcbiAgICAgICAgaWYoIWRlbGV0ZWQgJiYgIWRpc2FibGVkKXtcclxuICAgICAgICAgICAgLy9HZXQgQ29tcG9uZW50J3MgTUFURVJJQUxfUkVGXHJcbiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihtT2JqZWN0LmdldElkKCksIFwiTUFURVJJQUxfUkVGXCIpKXtcclxuICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG1PYmplY3QuZ2V0SWQoKSwgXCJNQVRFUklBTF9SRUZcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICAgICAgICAgICAgICBtYXRPYmogPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKVxyXG4gICAgICAgICAgICAgICAgbWF0Q29kZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKSwgXCJNQVROUlwiKS5jcmVhdGVNdXRhYmxlKCkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJtYXRPYmo6IFwiICsgbWF0T2JqXHJcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIm1hdENvZGU6IFwiICsgbWF0Q29kZVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdG9CZUNoYXJnZWQ9dHJ1ZVxyXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJNYXRlcmlhbGU6IFwiICsgbSArIFwiIHNvc3RpdHVpdG8gcGVyIFwiICsgb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKClcclxuICAgICAgICAgICAgY29tcG9uZW50c1RvQ2hhcmdlLmFkZChtT2JqZWN0KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBsb2cuZGVidWcgXCItLS0gTk8gQ09OVFJBQ1QgLS0tXCJcclxuICAgIGxvZy5kZWJ1ZyBcImNvbXBvbmVudHNUb0NoYXJnZTogXCIgKyBjb21wb25lbnRzVG9DaGFyZ2VcclxuICAgIC8vVXBkYXRlIE9QX1JFUExBQ0VEX01BVEVSSUFMUyBzZXR0aW5nIG9ubHkgdGhlIG9uZXMgaW5jbHVkZWQgaW4gY29tcG9uZW50c1RvQ2hhcmdlLmFkZChtT2JqZWN0LmdldElkKCkpXHJcblxyXG4gICAgaWYgKCFjb21wb25lbnRzVG9DaGFyZ2UuaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgbG9nLmRlYnVnIFwidXBkYXRlIHJlcGxhY2VkIG1hdGVyaWFscyAoXCIgKyBpc3N1ZS5rZXkgKyBcIilcIiArIGNvbXBvbmVudHNUb0NoYXJnZVxyXG4gICAgICAgIGRlZiBjZiA9IGN1c3RvbUZpZWxkTWFuYWdlci5nZXRDdXN0b21GaWVsZE9iamVjdHMoaXNzdWUpLmZpbmQge2l0Lm5hbWUgPT0gJ09QX1JFUExBQ0VEX01BVEVSSUFMUyd9XHJcbiAgICAgICAgaXNzdWUuc2V0Q3VzdG9tRmllbGRWYWx1ZShjZiwgY29tcG9uZW50c1RvQ2hhcmdlKVxyXG4gICAgfVxyXG59XHJcblxyXG5pc3N1ZS5zdW1tYXJ5ID0gXCJNYWludGVuYW5jZSBUaWNrZXRcIlxyXG5kZWYgY2ZSZXBvcnRlciA9IGN1c3RvbUZpZWxkTWFuYWdlci5nZXRDdXN0b21GaWVsZE9iamVjdHMoaXNzdWUpLmZpbmQge2l0Lm5hbWUgPT0gJ09QX1JFUE9SVEVSJ31cclxuaXNzdWUuc2V0Q3VzdG9tRmllbGRWYWx1ZShjZlJlcG9ydGVyLCBzb3VyY2VJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGNmUmVwb3J0ZXIpKVxyXG5cclxuLypBRiAwNy4wMi4yMDIzIC0gc2UgaWwgUE0gVGFzayBcdTAwZTggZXNlZ3VpdG8gZGEgdW4gdXRlbnRlIGRpIGJhY2tvZmZpY2Ugbm9uIHNpIGNyZWFubyBnbGkgb2dnZXR0aSBkYSByZWZlcmVuemlhcmUgbmVpIGNhbXBpIE9QX1RFQ0hOSUNJQU5TX09OU0lURSBlICpUUkFDRSAvICpUUkFDRV9XT1JLIC0gSW4gcXVlc3RvIGNhc28gbCd1bmljbyByaWZlcmltZW50byBhaSB0ZW1waSBkaSBlc2VjdXppb25lIGRlbCB0aWNla3QgKG5lbCBzdW8gaW5zaWVtZSkgXHJcblx1MDBlOCBsJ29nZ2V0dG8gY29tcGlsYXRvIG1hbnVhbG1lbnRlIGRhbCBiYWNrb2ZmaWNlIG5lbCBjYW1wbyBPUF9URUNITklDSUFOU19PTlNJVEUgZGVsIFBNIFRpY2tldCBwYWRyZSAtIGwndXRlbnRlIGNoZSBjb250YWJpbGl6emEgaWwgdGlja2V0IGRldmUgZXNzZXJlIGNvbnNhcGV2b2xlIGNoZSBpIHRlbXBpIHRyYWNjaWF0aSBzdWwgdGlja2V0IGRpIFJlcGFpciBldmVudHVhbG1lbnRlIHNjYXRlbmF0byBkYWkgbWF0ZXJpYWxpIHNvc3RpdHVpdGlcclxuY29udGVyclx1MDBlMCB1biB0ZW1wbyBkaSBtZG8gcGFyaSBhbCB0ZW1wbyB0b3RhbGUgdHJhY2NpYXRvIHN1bCBQTSBUaWNrZWV0IC0gbmVsIGNhc28gaW4gY3VpIHZhZGEgY29udGFiaWxpenphdGEgdW5hIG1kbyBpbmZlcmlvcmUgdmEgbW9kaWZpY2F0YSBsYSBxdWFudGl0XHUwMGUwIGRlbGxhIHRhcmlmZmEgZGkgbWRvIGFwcGxpY2F0YSBpbiBmYXNlIGRpIGNoaXVzdXJhIGRlbCB0aWNrZXQqL1xyXG5pZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hPblNpdGUpID09IG51bGwpe1xyXG4gICAgaXNzdWUuc2V0Q3VzdG9tRmllbGRWYWx1ZSh0ZWNoT25TaXRlLCBzb3VyY2VJc3N1ZS5nZXRQYXJlbnRPYmplY3QoKS5nZXRDdXN0b21GaWVsZFZhbHVlKHRlY2hPblNpdGUpKSAgXHJcbn1cclxuXHJcbmRlZiBjZkdlbmVyYXRlZEZyb21QTSA9IGN1c3RvbUZpZWxkTWFuYWdlci5nZXRDdXN0b21GaWVsZE9iamVjdHMoaXNzdWUpLmZpbmQge2l0Lm5hbWUgPT0gJ09QX1RLVF9HRU5FUkFURURfRlJPTV9QTSd9XHJcbmRlZiBjZk5ld1ZhbHVlXHJcbmRlZiBmaWVsZENvbmZpZyA9IGNmR2VuZXJhdGVkRnJvbVBNLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKVxyXG5jZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09IFwiWWVzXCIgfVxyXG5pc3N1ZS5zZXRDdXN0b21GaWVsZFZhbHVlKGNmR2VuZXJhdGVkRnJvbVBNLCBjZk5ld1ZhbHVlKVxyXG5cclxuZGVmIHBtSXNzdWVGaWVsZCA9IGN1c3RvbUZpZWxkTWFuYWdlci5nZXRDdXN0b21GaWVsZE9iamVjdHMoaXNzdWUpLmZpbmQge2l0Lm5hbWUgPT0gJ09QX1BNX0xJTktFRF9JU1NVRSd9XHJcbmRlZiBvZmZlckZyb21SZXBhaXIgPSAgY3VzdG9tRmllbGRNYW5hZ2VyLmdldEN1c3RvbUZpZWxkT2JqZWN0cyhpc3N1ZSkuZmluZCB7aXQubmFtZSA9PSAnT1BfVEtUX0dFTkVSQVRFRF9GUk9NX1BNJ31cclxuXHJcbmZpZWxkQ29uZmlnID0gb2ZmZXJGcm9tUmVwYWlyLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKVxyXG5jZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09IFwiWWVzXCIgfVxyXG5pc3N1ZS5zZXRDdXN0b21GaWVsZFZhbHVlKHBtSXNzdWVGaWVsZCwgc291cmNlSXNzdWUua2V5LnRvU3RyaW5nKCkpXHJcbmlzc3VlLnNldEN1c3RvbUZpZWxkVmFsdWUob2ZmZXJGcm9tUmVwYWlyLCBjZk5ld1ZhbHVlKVxyXG5cclxuZGVmIGV4ZWN1dGlvbkRhdGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9FWEVDVVRJT05fREFURVwiKVswXVxyXG5cclxuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBsYWNlZE1hdGVyaWFscykhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcGxhY2VkTWF0ZXJpYWxzKSAhPSBcIlwiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcGxhY2VkTWF0ZXJpYWxzKS50b1N0cmluZygpLmVxdWFscyhcIlwiKSl7XHJcbiAgICAvKkNpY2xhcmUgdHV0dGkgZ2xpIG9nZ2V0dGkgYXNzb2NpYXRpIGFsIGNhbXBvKi9cclxuICAgIC8vaW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50c1xyXG4gICAgRGF0ZSByZXBsYWNlZE9uXHJcbiAgICBtYXRlcmlhbHMgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcGxhY2VkTWF0ZXJpYWxzKVxyXG4gICAgZm9yKG0gaW4gbWF0ZXJpYWxzKXtcclxuICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3RcclxuICAgICAgICBkZWYgbWF0PW0udG9TdHJpbmcoKVxyXG4gICAgICAgIGRlZiBtYXRLZXkgPSBtYXQuc3Vic3RyaW5nKG1hdC5sYXN0SW5kZXhPZignKCcpKzEsbWF0Lmxhc3RJbmRleE9mKCcpJykpXHJcbiAgICAgICAgZGVmIG1hdE9iaiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihtYXRLZXkpXHJcbiAgICAgICAgZGVmIG9iVHJpYWdlXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG1hdE9iai5nZXRJZCgpLCBcIklOU1RBTExBVElPTl9EQVRFXCIpKXtcclxuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obWF0T2JqLmdldElkKCksIFwiSU5TVEFMTEFUSU9OX0RBVEVcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICAgICAgICAgIHJlcGxhY2VkT24gPSAoRGF0ZSkgb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKClcclxuICAgICAgICB9ICAgICAgICBcclxuICAgIH0gICAgXHJcbiAgICBpc3N1ZS5zZXRDdXN0b21GaWVsZFZhbHVlKGV4ZWN1dGlvbkRhdGUsIHJlcGxhY2VkT24udG9UaW1lc3RhbXAoKSlcclxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
                  <arg name="events"></arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">f4557d40-9640-47ad-ad04-1972ca6b2217</arg>
                  <arg name="FIELD_NOTES">YCFgT1A6IFVwZGF0ZSBzdGF0dXMgb24ganVzdCBjcmVhdGVkIFJlcGFpciBpc3N1ZQ==</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXHJcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvblxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxyXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvbkJ1aWxkZXJcclxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyXHJcbmltcG9ydCBncm9vdnkuanNvbi5TdHJlYW1pbmdKc29uQnVpbGRlclxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbmZpZy51dGlsLkppcmFIb21lXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uXHJcbmltcG9ydCBqYXZhLnRleHQuU2ltcGxlRGF0ZUZvcm1hdFxyXG5pbXBvcnQgamF2YS50ZXh0LlBhcnNlRXhjZXB0aW9uXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29uZmlnLnByb3BlcnRpZXMuQVBLZXlzXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5MaW5rQ29sbGVjdGlvbkltcGw7XHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbms7XHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXHJcbmltcG9ydCBqYXZhLnNxbC5UaW1lc3RhbXBcclxuXHJcblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcclxubG9nLmRlYnVnIFwiUGVyY29yc28gcHJvcGVydGllczogXCIgKyBTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpXHJcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXHJcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XHJcblx0cHJvcGVydGllcy5sb2FkKGl0KVxyXG59XHJcblxyXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcclxuSXNzdWVJbmRleGluZ1NlcnZpY2UgXHRpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSlcclxuXHJcbi8qU2NyaXB0IFZhcmlhYmxlcyovXHJcbi8vUGVyIFBvc3QgRnVuY3Rpb25cclxuaXNzdWUgPSBpc3N1ZVxyXG4vL1BlciB0ZXN0IGRhIGNvbnNvbGVcclxuLy9Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKClcclxuLy9pc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIk9QVVQtMjU3XCIpXHJcbmxvZy5kZWJ1ZyBcIklzc3VlOiBcIiArIGlzc3VlXHJcbmRlZiBmb3VuZD1mYWxzZVxyXG5kZWYgbGlua2VkSXNzdWVcclxuZGVmIGlzc3VlU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlU2VydmljZSgpXHJcblxyXG5kZWYgb2ZmZXJGcm9tUmVwYWlyID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1RLVF9HRU5FUkFURURfRlJPTV9QTVwiKVswXVxyXG5cclxuZGVmIGN1cnJlbnRVc2VyVHJhbnNpdGlvbiA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9DVVJSRU5UX1VTRVJfR0VORVJBVEVfUkVQQUlSX1FVT1RFXCIpWzBdXHJcblxyXG5MaXN0PElzc3VlTGluaz4gYWxsSW5Jc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0SW53YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSk7XHJcbmxvZy5kZWJ1ZyBcImFsbEluSXNzdWVMaW5rOiBcIiArIGFsbEluSXNzdWVMaW5rXHJcbmZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbEluSXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHtcclxuICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XHJcbiAgICBkZWYgbGlua2VkSXNzdWVUZW1wID0gaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpXHJcbiAgICBTdHJpbmcgdHlwZSA9IGxpbmtlZElzc3VlVGVtcC5nZXRJc3N1ZVR5cGUoKS5nZXROYW1lKCk7XHJcblxyXG4gICAgbG9nLmRlYnVnKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKSkgXHJcbiAgICBcclxuICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzRGVmZWN0J10udG9TdHJpbmcoKSkpe1xyXG4gICAgICAgIGxpbmtlZElzc3VlPWxpbmtlZElzc3VlVGVtcFxyXG4gICAgICAgIGxvZy5kZWJ1ZyBcImxpbmtlZCBpc3N1ZTogXCIgKyBsaW5rZWRJc3N1ZVxyXG4gICAgICAgIC8vbG9nLmRlYnVnIFwibGlua2VkIGlzc3VlIHN0YXR1czogXCIgKyBsaW5rZWRJc3N1ZS5nZXRTdGF0dXNPYmplY3QoKS5uYW1lXHJcbiAgICAgICAgaWYobGlua2VkSXNzdWUuZ2V0U3RhdHVzT2JqZWN0KCkubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5vcGVuJ10udG9TdHJpbmcoKSl7XHJcbiAgICAgICAgICAgIGZvdW5kPXRydWVcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbkxpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpO1xyXG5sb2cuZGVidWcgXCJhbGxPdXRJc3N1ZUxpbms6IFwiICsgYWxsT3V0SXNzdWVMaW5rXHJcbmZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbE91dElzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XHJcbiAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xyXG4gICAgZGVmIGxpbmtlZElzc3VlVGVtcCA9IGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpXHJcbiAgICBTdHJpbmcgdHlwZSA9IGxpbmtlZElzc3VlVGVtcC5nZXRJc3N1ZVR5cGUoKS5nZXROYW1lKCk7XHJcblxyXG4gICAgbG9nLmRlYnVnKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKSkgXHJcbiAgICBcclxuICAgIGlmKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzRGVmZWN0J10udG9TdHJpbmcoKSkpe1xyXG4gICAgICAgIGxpbmtlZElzc3VlPWxpbmtlZElzc3VlVGVtcFxyXG4gICAgICAgIGxvZy5kZWJ1ZyBcImxpbmtlZCBpc3N1ZTogXCIgKyBsaW5rZWRJc3N1ZVxyXG4gICAgICAgIC8vbG9nLmRlYnVnIFwibGlua2VkIGlzc3VlIHN0YXR1czogXCIgKyBsaW5rZWRJc3N1ZS5nZXRTdGF0dXNPYmplY3QoKS5uYW1lXHJcbiAgICAgICAgaWYobGlua2VkSXNzdWUuZ2V0U3RhdHVzT2JqZWN0KCkubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5vcGVuJ10udG9TdHJpbmcoKSl7XHJcbiAgICAgICAgICAgIGZvdW5kPXRydWVcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLy9sb2cuZGVidWcgXCJmb3VuZDogXCIgKyBmb3VuZFxyXG5cclxuaWYoZm91bmQpe1xyXG5cdGRlZiBkZXN0U3RhdHVzT2JqZWN0ID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzT2JqZWN0KClcclxuICAgIC8vbG9nLmRlYnVnIFwiZGVzdFN0YXR1c09iamVjdDogXCIgKyBkZXN0U3RhdHVzT2JqZWN0XHJcbiAgICAvL2xvZy5kZWJ1ZyBcImxpbmtlZElzc3VlOiBcIiArIGxpbmtlZElzc3VlXHJcbiAgICBkZWYgdXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxyXG5cdC8vIElzIHRoZSBzdGF0dXMgb2YgdGhlIGxpbmtlZCBpc3N1ZSBcIkluc3RhbGxpbmdcIiA/XHJcbiAgICBcclxuICAgIGRlZiBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5jdXN0b21GaWVsZE1hbmFnZXJcclxuICAgIGRlZiBtYWludGVuYW5jZUlzc3VlRmllbGQgPSBjdXN0b21GaWVsZE1hbmFnZXIuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLm1haW50ZW5hbmNlTGlua2VkSXNzdWUnXSA/IHByb3BlcnRpZXNbJ2NmLm1haW50ZW5hbmNlTGlua2VkSXNzdWUnXS50b1N0cmluZygpIDogXCJPUF9NQUlOVEVOQU5DRV9MSU5LRURfSVNTVUVcIikuZmlyc3QoKVxyXG4gICAgXHJcbiAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcclxuICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlXHJcbiAgIFxyXG4gICAgbWFpbnRlbmFuY2VJc3N1ZUZpZWxkLnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG1haW50ZW5hbmNlSXNzdWVGaWVsZCksIGxpbmtlZElzc3VlLmtleS50b1N0cmluZygpKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxyXG4gICAgXHJcbiAgICBpZiAoZGVzdFN0YXR1c09iamVjdC5uYW1lID09IHByb3BlcnRpZXNbJ3dmLm9wZW4nXS50b1N0cmluZygpKSB7XHJcbiAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uXHJcbiAgICAgICAgZGVmIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKClcclxuICAgICAgICBpc3N1ZUlucHV0UGFyYW1ldGVycy53aXRoIHtcclxuICAgICAgICAgICAgc2V0U2tpcFNjcmVlbkNoZWNrKHRydWUpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFZhbGlkYXRlIHRyYW5zaXRpb25pbmcgdGhlIGxpbmtlZCBpc3N1ZSB0byBcIlNpZ25zIE5lZWRlZFwiXHJcbiAgICAgICAgZGVmIHZhbGlkYXRpb25SZXN1bHQgPSBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCA4MzEsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKVxyXG4gICAgICAgIGlmICh2YWxpZGF0aW9uUmVzdWx0LmlzVmFsaWQoKSkge1xyXG4gICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSB0cmFuc2l0aW9uXHJcbiAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIHZhbGlkYXRpb25SZXN1bHQpXHJcbiAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkge1xyXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnKFwiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259XCIpXHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnKFwiVHJhbnNhemlvbmUgZmF0dGFcIilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyhcIkNvdWxkIG5vdCB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7dmFsaWRhdGlvblJlc3VsdC5lcnJvckNvbGxlY3Rpb259XCIpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbn0iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">de214eee-f1d5-4b5e-9d94-e4aed63a38e7</arg>
                  <arg name="FIELD_NOTES">YCFgQ2xlYXIgY2FjaGU=</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XHJcbmltcG9ydCBncm9vdnkuanNvbi5TdHJlYW1pbmdKc29uQnVpbGRlcjtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5DdXN0b21GaWVsZE1hbmFnZXI7XHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3I7XHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXHJcbmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMuY29kZWMuYmluYXJ5LkJhc2U2NDtcclxuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXHJcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5XHJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXHJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxyXG5cclxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxyXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxyXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xyXG5cdHByb3BlcnRpZXMubG9hZChpdClcclxufVxyXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcclxuXHJcbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcclxuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xyXG5kZWYgcmVxdWVzdE1ldGhvZFxyXG5kZWYgYmFzZVVSTFxyXG5cclxuLyogUkVTVCBBUEkgcGVyIEdlbmVyYXppb25lIEFsbGVnYXRvIFJhcHBvcnRvIGRpIEludGVydmVudG8gKi9cclxucmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xyXG4vKlNjcmlwdCBWYXJpYWJsZXMqL1xyXG4vL1BlciB0ZXN0IGRhIGNvbnNvbGVcclxuLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIk9QVVQtMTQwNjJcIilcclxuYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vY2xlYXJDYWNoZS9kYXRhT2JqZWN0XCJcclxuZGVmIGJvZHlfcmVxID0gW11cclxuVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcclxuSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcclxuY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xyXG5jb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcclxuY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XHJcbmNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XHJcbmNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcclxuY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cclxubG9nLmRlYnVnIFwiYm9keV9yZXE6IFwiICsgYm9keV9yZXFcclxuY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxyXG5sb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cclxuY29ubmVjdGlvbi5jb25uZWN0KCk7XHJcblxyXG5pZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xyXG4gICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxyXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxyXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxyXG59Iiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="conditionList">6</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.43.0</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="uuid">f6159d3c-3503-47be-9a74-1e049850b0c1</arg>
                  <arg name="fieldValue"></arg>
                  <arg name="preconditionMode-textValue">DISCARD</arg>
                  <arg name="fieldsList">customfield_22609</arg>
                </function>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.43.0</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="uuid">5a3e276c-208b-4dd3-b234-0ee4c8543081</arg>
                  <arg name="fieldValue"></arg>
                  <arg name="preconditionMode-textValue">AND</arg>
                  <arg name="fieldsList">customfield_22657</arg>
                </function>
                <function type="class">
                  <arg name="field.existingAttachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="targetIssueTypeDefinedByCfSelection"></arg>
                  <arg name="uuid">ede3c31a-1c8e-406b-bb01-6cfb4159d0f1</arg>
                  <arg name="issueTypeId">13001</arg>
                  <arg name="scopeType">ISSUE_LINKING</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.43.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="field.attachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="targetIssueType">SELECTED_ISSUE_TYPE</arg>
                  <arg name="scopeSource-jql"></arg>
                  <arg name="createIssueAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.copyTransitionComment">false</arg>
                  <arg name="targetProjectType">SAME</arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="transitionAttachmentsOperation">copy</arg>
                  <arg name="field.issueAssignTo">ASSIGN_TO_UNASSIGNED</arg>
                  <arg name="targetProjectSelectedCustomField"></arg>
                  <arg name="destination-scopeTarget">LINK_END</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiescreatelinkedissue-function</arg>
                  <arg name="scopeDestination-linkEnd">11100:OUTWARD</arg>
                  <arg name="field.enablingCustomFieldId">customfield_22609</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
                  <arg name="subFunctions">[{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:false,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22609&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22658&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22600&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22600&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22822&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22822&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22601&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22601&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22602&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22602&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22813&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22813&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23235&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23235&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22651&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22651&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22700&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22700&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22607&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22607&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;priority&quot;,&quot;destinationFieldId&quot;:&quot;priority&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23203&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23203&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23237&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23237&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_21909&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21909&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Yes&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22681&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23401&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21908&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Maintenance Ticket&quot;,&quot;destinationFieldId&quot;:&quot;summary&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Yes&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23409&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22649&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22629&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23607&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23607&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_25704&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23906&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_25703&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23907&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_25705&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23908&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_25706&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23909&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_25707&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22689&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_25708&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22691&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22690&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22690&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Yes&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23409&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Maintenance Ticket&quot;,&quot;destinationFieldId&quot;:&quot;summary&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23401&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23237&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;REPAIR_ENABLED&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22814&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22614&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22614&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22635&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22635&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Yes&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23402&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_25709&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23917&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Key&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22763&quot;}}]</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.createlinkedissue.CreateLinkedIssueFunction</arg>
                  <arg name="projectId">22601</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">71a4764e-ec7c-4759-97f5-5775b6c349ed</arg>
                  <arg name="FIELD_NOTES">YCFgT1A6IFVwZGF0ZSBzdGF0dXMgb24ganVzdCBjcmVhdGVkIFJlcGFpciBRdW90YXRpb24gaXNzdWUgJiYgR2VuZXJhdGUgT1BfUVVPVEVfTUFURVJJQUxTIGZyb20gT1BfUkVRVUlSRURfTUFURVJJQUxT</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnlcbmltcG9ydCBncm9vdnkuanNvbi5Kc29uQnVpbGRlclxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29uZmlnLnV0aWwuSmlyYUhvbWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvblxuaW1wb3J0IGphdmEudGV4dC5TaW1wbGVEYXRlRm9ybWF0XG5pbXBvcnQgamF2YS50ZXh0LlBhcnNlRXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbmZpZy5wcm9wZXJ0aWVzLkFQS2V5c1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLkxpbmtDb2xsZWN0aW9uSW1wbDtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbms7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxubG9nLmRlYnVnIFwiUGVyY29yc28gcHJvcGVydGllczogXCIgKyBTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5cbi8qSW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50cyovXG4gQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyAgXG5DbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTtcbiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XG4gb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcbiAvKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG4gQ2xhc3MgaXFsRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuSVFMRmFjYWRlXCIpOyBcbmlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG4gQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG4gb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG4gLyogR2V0IEluc2lnaHQgT2JqZWN0IFR5cGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG4gQ2xhc3Mgb2JqZWN0VHlwZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVGYWNhZGVcIik7IFxub2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpO1xuXG4vKlNjcmlwdCBWYXJpYWJsZXMqL1xuLy9QZXIgUG9zdCBGdW5jdGlvblxuaXNzdWUgPSBpc3N1ZVxuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL0lzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKVxuLy9pc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIk9QVVQtMjU3XCIpXG5sb2cuZGVidWcgXCJJc3N1ZTogXCIgKyBpc3N1ZVxuZGVmIGZvdW5kPWZhbHNlXG5kZWYgbGlua2VkSXNzdWVcbmRlZiBpc3N1ZVNlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZVNlcnZpY2UoKVxuZGVmIGdyb3VwTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEdyb3VwTWFuYWdlcigpXG5kZWYgdXNlck1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRVc2VyTWFuYWdlcigpXG5kZWYgb2ZmZXJGcm9tUmVwYWlyID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1RLVF9HRU5FUkFURURfRlJPTV9QTVwiKVswXVxuZGVmIGN1cnJlbnRVc2VyVHJhbnNpdGlvbiA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9DVVJSRU5UX1VTRVJfR0VORVJBVEVfUkVQQUlSX1FVT1RFXCIpWzBdXG5kZWYgdHJhbnNpdGlvbkNoZWNrID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfQ0hFQ0tfQU5EX0NPTkZJUk1cIilbMF1cblN0cmluZyBzdXBwbGllckFkbSA9IFwiT1BST0xFX0FBX1NVUFBMSUVSX0FETVwiXG5TdHJpbmcgc3VwcGxpZXJUZWNoID0gXCJPUFJPTEVfQUFfU1VQUExJRVJfVEVDSFwiXG5MaXN0PElzc3VlTGluaz4gYWxsT3V0SXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldE91dHdhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKTtcbmxvZy5kZWJ1ZyBcImFsbE91dElzc3VlTGluazogXCIgKyBhbGxPdXRJc3N1ZUxpbmtcbmZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbE91dElzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcbiAgICBkZWYgbGlua2VkSXNzdWVUZW1wID0gaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KClcbiAgICBTdHJpbmcgdHlwZSA9IGxpbmtlZElzc3VlVGVtcC5nZXRJc3N1ZVR5cGUoKS5nZXROYW1lKCk7XG5cbiAgICBsb2cuZGVidWcoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpKSBcbiAgICBcbiAgICBpZiggaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkgIT0gbnVsbCAmJiBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKS5nZXRJc3N1ZVR5cGUoKS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMoXCJNYWludGVuYW5jZSBUaWNrZXRcIikgJiYgaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNQcm9ibGVtJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICBsaW5rZWRJc3N1ZT1saW5rZWRJc3N1ZVRlbXBcbiAgICAgICAgbG9nLmRlYnVnIFwibGlua2VkIGlzc3VlOiBcIiArIGxpbmtlZElzc3VlXG4gICAgICAgIC8vbG9nLmRlYnVnIFwibGlua2VkIGlzc3VlIHN0YXR1czogXCIgKyBsaW5rZWRJc3N1ZS5nZXRTdGF0dXNPYmplY3QoKS5uYW1lXG4gICAgICAgIGlmKGxpbmtlZElzc3VlLmdldFN0YXR1c09iamVjdCgpLm5hbWUgPT0gcHJvcGVydGllc1snd2Yub3BlbiddLnRvU3RyaW5nKCkpe1xuICAgICAgICAgICAgZm91bmQ9dHJ1ZVxuICAgICAgICB9XG4gICAgfVxufVxuXG5MaXN0PElzc3VlTGluaz4gYWxsSW5Jc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0SW53YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSk7XG5sb2cuZGVidWcgXCJhbGxJbklzc3VlTGluazogXCIgKyBhbGxJbklzc3VlTGlua1xuZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG4gICAgZGVmIGxpbmtlZElzc3VlVGVtcCA9IGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKVxuICAgIFN0cmluZyB0eXBlID0gbGlua2VkSXNzdWVUZW1wLmdldElzc3VlVHlwZSgpLmdldE5hbWUoKTtcblxuICAgIGxvZy5kZWJ1Zyhpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkpIFxuICAgIFxuICAgIGlmKGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKSAhPSBudWxsICYmIGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKS5nZXRJc3N1ZVR5cGUoKS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMoXCJNYWludGVuYW5jZSBUaWNrZXRcIikgJiYgaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNQcm9ibGVtJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICBsaW5rZWRJc3N1ZT1saW5rZWRJc3N1ZVRlbXBcbiAgICAgICAgbG9nLmRlYnVnIFwibGlua2VkIGlzc3VlOiBcIiArIGxpbmtlZElzc3VlXG4gICAgICAgIC8vbG9nLmRlYnVnIFwibGlua2VkIGlzc3VlIHN0YXR1czogXCIgKyBsaW5rZWRJc3N1ZS5nZXRTdGF0dXNPYmplY3QoKS5uYW1lXG4gICAgICAgIGlmKGxpbmtlZElzc3VlLmdldFN0YXR1c09iamVjdCgpLm5hbWUgPT0gcHJvcGVydGllc1snd2Yub3BlbiddLnRvU3RyaW5nKCkpe1xuICAgICAgICAgICAgZm91bmQ9dHJ1ZVxuICAgICAgICB9XG4gICAgfVxufVxuLy9sb2cuZGVidWcgXCJmb3VuZDogXCIgKyBmb3VuZFxuXG5pZihmb3VuZCl7XG5cdGRlZiBkZXN0U3RhdHVzT2JqZWN0ID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzT2JqZWN0KClcbiAgICAvL2xvZy5kZWJ1ZyBcImRlc3RTdGF0dXNPYmplY3Q6IFwiICsgZGVzdFN0YXR1c09iamVjdFxuICAgIC8vbG9nLmRlYnVnIFwibGlua2VkSXNzdWU6IFwiICsgbGlua2VkSXNzdWVcbiAgICBkZWYgdXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuXHQvLyBJcyB0aGUgc3RhdHVzIG9mIHRoZSBsaW5rZWQgaXNzdWUgXCJJbnN0YWxsaW5nXCIgP1xuICAgIFxuICAgIGRlZiBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5jdXN0b21GaWVsZE1hbmFnZXJcbiAgICBkZWYgcG1Jc3N1ZUZpZWxkID0gY3VzdG9tRmllbGRNYW5hZ2VyLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1BNX0xJTktFRF9JU1NVRVwiKS5maXJzdCgpXG4gICAgZGVmIG9mZmVySXNzdWVGaWVsZCA9IGN1c3RvbUZpZWxkTWFuYWdlci5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9PRkZFUl9MSU5LRURfSVNTVUVcIikuZmlyc3QoKVxuICAgIGRlZiBvZmZlcklzc3VlQm9vbEZpZWxkID0gY3VzdG9tRmllbGRNYW5hZ2VyLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5vZmZlclRrdCddLnRvU3RyaW5nKCkpLmZpcnN0KClcblx0XG5cdCAgLy8xMy4wMi4yMDIzIEFGIC0gZ2VuZXJhIENvbXBvbmVudCBkYSBsaW5rYXJlIG5lbCBjYW1wbyBPUF9RVU9URV9NQVRFUklBTFMgcGFydGVuZG8gZGEgcXVlbGxpIGFnZ2l1bnRpIG5lbCBjYW1wbyBPUF9SRVFVSVJFRF9NQVRFUklBTFMgLSBnZW5lcmlhbW8gbnVvdmkgb2dnZXR0aSBDb21wb25lbnQgcGVyIGV2aXRhcmUgY2hlIG1vZGlmaWNoZSBmYXR0ZSBzdWwgdGlja2V0IGRpIHF1b3RhdGlvbiBcbiAgICAvL3ZhZGFubyBhIG1vZGlmaWNhcmUgbGEgcmljaGllc3RhIGluaXppYWxtZW50ZSBmYXR0YSBkYWwgdGVjbmljbyBzdWwgdGlja2V0IG9yaWdpbmFsZVxuICAgIGRlZiBDT01QT05FTlRfVE9UQUxfQU1PVU5UX1NVUFBMSUVSPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdFN1cHAuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG4gICAgZGVmIENPTVBPTkVOVF9UT1RBTF9BTU9VTlRfQ1VTVE9NRVI9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQudG90Q3VzdC5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbiAgICBkZWYgQ09NUE9ORU5UX05BTUU9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQubmFtZS5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbiAgICBkZWYgQ09NUE9ORU5UX0hBUkRXQVJFX1JFRj1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5oYXJkd2FyZVJlZi5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbiAgICBkZWYgQ09NUE9ORU5UX1NBUD1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5zYXAuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG4gICAgZGVmIENPTVBPTkVOVF9TVVBQTElFRF9CWV9GQUFDPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnN1cHBsaWVkQnlGYWFjLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuICAgIGRlZiBDT01QT05FTlRfUVVBTlRJVFk9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQucXVhbnRpdHkuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG4gICAgZGVmIENPTVBPTkVOVF9RVU9URURfUVVBTlRJVFk9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQucXVvdGVkUXVhbnRpdHkuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG4gICAgZGVmIENPTVBPTkVOVF9RVU9URV9SRVFVSVJFRD1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5xdW90ZVJlcXVpcmVkLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuICAgIGRlZiBDT01QT05FTlRfU1VQUExJRVJfUVVPVEVfVE9fRkFBQz1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5zdXBwbGllclF1b3RlLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuICAgIGRlZiBDT01QT05FTlRfRkFBQ19RVU9URV9UT19DVVNUT01FUj1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5jdXN0b21lclF1b3RlLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuICAgIGRlZiBDT01QT05FTlRfQVBQTElFRF9UTz1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hcHBsaWVkVG8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG4gICAgZGVmIENPTVBPTkVOVF9NQVRFUklBTF9SRUY9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQubWF0ZXJpYWxSZWYuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG4gICAgZGVmIENPTVBPTkVOVF9BQ0NPVU5USU5HX1NVUFBMSUVSX01BVEVSSUFMX1JFRj1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hY2NvdW50aW5nU3VwcE1hdFJlZi5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbiAgICBkZWYgQ09NUE9ORU5UX0FDQ09VTlRJTkdfQ1VTVE9NRVJfTUFURVJJQUxfUkVGPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmFjY291bnRpbmdDdXN0TWF0UmVmLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuICAgIGRlZiBDT01QT05FTlRfRlJPTV9RVU9URV9US1Q9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQuZnJvbVF1b3RlVGt0LmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuICAgIGRlZiBDT01QT05FTlRfREVMRVRFRD1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5kZWxldGVkLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuICAgIGRlZiBDT01QT05FTlRfTk9URT1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5ub3RlLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuICAgIGRlZiBDT01QT05FTlRfQUNDT1VOVElOR19JTkRJQ0FUT1I9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQuYWNjb3VudGluZ0luZGljYXRvci5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbiAgICBkZWYgQ09NUE9ORU5UX1FVT1RFX09CSl9JRD1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5xdW90ZU9iaklkLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuICAgIGRlZiBDT01QT05FTlRfVEtUX0NPTVBBTlk9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQudGt0Q29tcGFueS5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbiAgICAvL09ialR5cGUgSURzXG4gICAgZGVmIENPTVBPTkVOVD1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbiAgICAvKkN1c3RvbWZpZWxkcyovXG4gICAgZGVmIHF1b3RlTWF0ZXJpYWxzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnF1b3RlTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF1cbiAgICBkZWYgcmVxTWF0ZXJpYWxzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJlcXVpcmVkTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF1cbiAgICAvKlZhcmlhYmxlcyovXG4gICAgZGVmIHJlcU1hdExpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcU1hdGVyaWFscylcbiAgICBkZWYgb2JqTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlXG4gICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXG4gICAgZm9yKG1hdCBpbiByZXFNYXRMaXN0KXtcbiAgICAgICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZCBnZXQgb2JqZWN0XG4gICAgICAgIGRlZiBjb21wb25lbnQ9bWF0LnRvU3RyaW5nKClcbiAgICAgICAgZGVmIGNvbXBvbmVudEtleSA9IGNvbXBvbmVudC5zdWJzdHJpbmcoY29tcG9uZW50Lmxhc3RJbmRleE9mKCcoJykrMSxjb21wb25lbnQubGFzdEluZGV4T2YoJyknKSlcbiAgICAgICAgZGVmIGNvbXBvbmVudE9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihjb21wb25lbnRLZXkpXG4gICAgICAgIFxuICAgICAgICBsb2cuZGVidWcgXCJjb21wb25lbnRPYmplY3Q6IFwiICsgY29tcG9uZW50T2JqZWN0XG4gICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5kZWxldGVkJ10udG9TdHJpbmcoKSkgPyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmRlbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkgOiBudWxsXG4gICAgICAgIGRlZiBkZWwgPSBvYlRyaWFnZSA/IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKSA6IG51bGxcbiAgICAgICAgZGVsPSBkZWwgPyBkZWxbMF0uZ2V0VmFsdWUoKSA6IGZhbHNlXG4gICAgICAgIGxvZy5kZWJ1ZyBcImRlbGV0ZWQ6IFwiICsgZGVsXG4gICAgICAgIFxuICAgICAgICBpZighZGVsKXtcbiAgICAgICAgICAgIGRlZiBuZXdPYmpBdHRyaWJ1dGVzTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgZGVmIGkgPSAwXG4gICAgICAgICAgICBkZWYgb2JqZWN0VHlwZUNvbXBvbmVudCA9IG9iamVjdFR5cGVGYWNhZGUubG9hZE9iamVjdFR5cGVCZWFuKENPTVBPTkVOVCk7XG4gICAgICAgICAgICAvKiBDcmVhdGUgYSBuZXcgdW5zYXZlZCBvYmplY3QgYmVhbiAqL1xuICAgICAgICAgICAgZGVmIG5ld09iamVjdEJlYW4gPSBvYmplY3RUeXBlQ29tcG9uZW50LmNyZWF0ZU9iamVjdEJlYW4oKTtcbiAgICAgICAgICAgIC8qIFNldCB1cCB0aGUgYXR0cmlidXRlIGxpc3QgKi9cbiAgICAgICAgICAgIGRlZiBvYmplY3RBdHRyaWJ1dGVCZWFucyA9IG5ldyBBcnJheUxpc3QoKTtcbiAgICAgICAgICAgIC8qIFNldCB0aGUgbmFtZSBvZiB0aGUgQ29tcG9uZW50ICovXG4gICAgICAgICAgICAvKk5vbWUgQ29tcG9uZW50Ki9cbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5uYW1lJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBkZWYgY29tcE5hbWUgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgICAgIGNvbXBOYW1lPWNvbXBOYW1lWzBdLmdldFZhbHVlKClcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIm9iamVjdCBuYW1lOiBcIiArIGNvbXBOYW1lXG4gICAgICAgICAgICBkZWYgbmFtZU9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oQ09NUE9ORU5UX05BTUUpOyAvLyBUaGUgSUQgb2YgdGhlIG9iamVjdCB0eXBlIGF0dHJpYnV0ZSBcIk5hbWVcIlxuICAgICAgICAgICAgZGVmIG5hbWVPYmplY3RBdHRyaWJ1dGVCZWFuID0gbmV3T2JqZWN0QmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKG5hbWVPYmplY3RUeXBlQXR0cmlidXRlQmVhbik7IC8vIFRoaXMgaXMgdGhlIG5hbWUgb2JqZWN0IGF0dHJpYnV0ZSBmb3IgdGhlIG5ldyBvYmplY3RcbiAgICAgICAgICAgIGRlZiBuYW1lT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuID0gbmFtZU9iamVjdEF0dHJpYnV0ZUJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7IC8vVGhpcyBpcyB0aGUgYWN0dWFsIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGVcbiAgICAgICAgICAgIG5hbWVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4uc2V0VGV4dFZhbHVlU2hvcnQoY29tcE5hbWUpOyAvLyBTZXQgdGhlIG5hbWVcbiAgICAgICAgICAgIGRlZiB2YWx1ZXMgPSBuYW1lT2JqZWN0QXR0cmlidXRlQmVhbi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7IFxuICAgICAgICAgICAgdmFsdWVzLmFkZChuYW1lT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKTsgLy8gQWRkIHRoZSB2YWx1ZSB0byB0aGUgb2JqZWN0IGF0dHJpYnV0ZVxuICAgICAgICAgICAgbG9nLmRlYnVnIHZhbHVlc1xuICAgICAgICAgICAgbmFtZU9iamVjdEF0dHJpYnV0ZUJlYW4uc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyh2YWx1ZXMpOyBcbiAgICAgICAgICAgIG9iamVjdEF0dHJpYnV0ZUJlYW5zLmFkZChuYW1lT2JqZWN0QXR0cmlidXRlQmVhbik7XG4gICAgICAgICAgICAvKiBTZXQgdGhlIEhBUkRXQVJFX1JFRiBvZiB0aGUgbmV3IG9iaiAqL1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmhhcmR3YXJlUmVmJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBkZWYgaHcgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgICAgIGh3S2V5PWh3WzBdLmdldFZhbHVlKCkgICAgXG4gICAgICAgICAgICBkZWYgSHdSZWZPYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKENPTVBPTkVOVF9IQVJEV0FSRV9SRUYpOyAvLyBUaGUgSUQgZm9yIHRoZSByZWZlcmVuY2VkIG9iamVjdCB0eXBlXG4gICAgICAgICAgICBkZWYgSHdSZWZPYmplY3RBdHRyaWJ1dGVCZWFuID0gbmV3T2JqZWN0QmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKEh3UmVmT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4pOyBcbiAgICAgICAgICAgIGRlZiBId1JlZk9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbiA9IEh3UmVmT2JqZWN0QXR0cmlidXRlQmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTsgLy9UaGlzIGlzIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZVxuICAgICAgICAgICAgSHdSZWZPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4uc2V0UmVmZXJlbmNlZE9iamVjdEJlYW5JZChod0tleSk7IC8vIFNldCB0aGUgSURcbiAgICAgICAgICAgIHZhbHVlcyA9IEh3UmVmT2JqZWN0QXR0cmlidXRlQmVhbi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7IFxuICAgICAgICAgICAgdmFsdWVzLmFkZChId1JlZk9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbik7IC8vIEFkZCB0aGUgdmFsdWUgdG8gdGhlIG9iamVjdCBhdHRyaWJ1dGVcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyB2YWx1ZXNcbiAgICAgICAgICAgIEh3UmVmT2JqZWN0QXR0cmlidXRlQmVhbi5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKHZhbHVlcyk7IFxuICAgICAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKEh3UmVmT2JqZWN0QXR0cmlidXRlQmVhbik7IC8vIEFkZCB0byB0aGUgbGlzdCBvZiBvYmplY3QgYXR0cmlidXRlc1xuICAgICAgICAgICAgLyogU2V0IHRoZSBDT01QT05FTlRfU0FQIGZsYWcgb2YgdGhlIEhhcmR3YXJlICovXG4gICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnNhcCddLnRvU3RyaW5nKCkpICE9IG51bGwpe1xuICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5zYXAnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICBkZWYgc2FwID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgc2FwPXNhcFswXS5nZXRWYWx1ZSgpXG4gICAgICAgICAgICAgICAgZGVmIGNvbXBTYXBPYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKENPTVBPTkVOVF9TQVApOyAvLyBUaGUgSUQgb2YgdGhlIG9iamVjdCB0eXBlIGF0dHJpYnV0ZSBcIkRJU0FCTEVEXCJcbiAgICAgICAgICAgICAgICBkZWYgY29tcFNhcE9iamVjdEF0dHJpYnV0ZUJlYW4gPSBuZXdPYmplY3RCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcFNhcE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKTsgLy8gVGhpcyBpcyB0aGUgbmFtZSBvYmplY3QgYXR0cmlidXRlIGZvciB0aGUgbmV3IG9iamVjdFxuICAgICAgICAgICAgICAgIGRlZiBjb21wU2FwT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuID0gY29tcFNhcE9iamVjdEF0dHJpYnV0ZUJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7IC8vIFRoaXMgaXMgdGhlIGFjdHVhbCB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlXG4gICAgICAgICAgICAgICAgY29tcFNhcE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbi5zZXRCb29sZWFuVmFsdWUoc2FwKTsgLy8gU2V0IHRoZSBuYW1lXG4gICAgICAgICAgICAgICAgdmFsdWVzID0gY29tcFNhcE9iamVjdEF0dHJpYnV0ZUJlYW4uZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpOyBcbiAgICAgICAgICAgICAgICB2YWx1ZXMuYWRkKGNvbXBTYXBPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4pOyAvLyBBZGQgdGhlIHZhbHVlIHRvIHRoZSBvYmplY3QgYXR0cmlidXRlXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIHZhbHVlc1xuICAgICAgICAgICAgICAgIGNvbXBTYXBPYmplY3RBdHRyaWJ1dGVCZWFuLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWVzKTsgXG4gICAgICAgICAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKGNvbXBTYXBPYmplY3RBdHRyaWJ1dGVCZWFuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qIFNldCB0aGUgREVMRVRFRCBmbGFnIG9mIHRoZSBIYXJkd2FyZSAqL1xuICAgICAgICAgICAgZGVmIGRlbGV0ZWQgXG4gICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmRlbGV0ZWQnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmRlbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICBkZWxldGVkID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgZGVsZXRlZD1kZWxldGVkWzBdLmdldFZhbHVlKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKGRlbGV0ZWQhPW51bGwpe1xuICAgICAgICAgICAgICAgIGRlZiBkZWxldGVkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihDT01QT05FTlRfREVMRVRFRCk7IC8vIFRoZSBJRCBvZiB0aGUgb2JqZWN0IHR5cGUgYXR0cmlidXRlIFwiRElTQUJMRURcIlxuICAgICAgICAgICAgICAgIGRlZiBkZWxldGVkT2JqZWN0QXR0cmlidXRlQmVhbiA9IG5ld09iamVjdEJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihkZWxldGVkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4pOyAvLyBUaGlzIGlzIHRoZSBuYW1lIG9iamVjdCBhdHRyaWJ1dGUgZm9yIHRoZSBuZXcgb2JqZWN0XG4gICAgICAgICAgICAgICAgZGVmIGRlbGV0ZWRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4gPSBkZWxldGVkT2JqZWN0QXR0cmlidXRlQmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTsgLy8gVGhpcyBpcyB0aGUgYWN0dWFsIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICBkZWxldGVkT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuLnNldEJvb2xlYW5WYWx1ZShkZWxldGVkKTsgLy8gU2V0IHRoZSBuYW1lXG4gICAgICAgICAgICAgICAgdmFsdWVzID0gZGVsZXRlZE9iamVjdEF0dHJpYnV0ZUJlYW4uZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpOyBcbiAgICAgICAgICAgICAgICB2YWx1ZXMuYWRkKGRlbGV0ZWRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4pOyAvLyBBZGQgdGhlIHZhbHVlIHRvIHRoZSBvYmplY3QgYXR0cmlidXRlXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIHZhbHVlc1xuICAgICAgICAgICAgICAgIGRlbGV0ZWRPYmplY3RBdHRyaWJ1dGVCZWFuLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWVzKTsgXG4gICAgICAgICAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKGRlbGV0ZWRPYmplY3RBdHRyaWJ1dGVCZWFuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qTm9tZSBDT01QT05FTlRfUVVBTlRJVFkqL1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnF1YW50aXR5J10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBkZWYgcXRhID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICBxdGE9cXRhWzBdLmdldFZhbHVlKClcbiAgICAgICAgICAgIGRlZiBxdGFPYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKENPTVBPTkVOVF9RVUFOVElUWSk7IC8vIFRoZSBJRCBvZiB0aGUgb2JqZWN0IHR5cGUgYXR0cmlidXRlIFwiRElTQUJMRURcIlxuICAgICAgICAgICAgZGVmIHF0YU9iamVjdEF0dHJpYnV0ZUJlYW4gPSBuZXdPYmplY3RCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW4ocXRhT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4pOyAvLyBUaGlzIGlzIHRoZSBuYW1lIG9iamVjdCBhdHRyaWJ1dGUgZm9yIHRoZSBuZXcgb2JqZWN0XG4gICAgICAgICAgICBkZWYgcXRhT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuID0gcXRhT2JqZWN0QXR0cmlidXRlQmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTsgLy8gVGhpcyBpcyB0aGUgYWN0dWFsIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGVcbiAgICAgICAgICAgIHF0YU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbi5zZXREb3VibGVWYWx1ZShxdGEpOyAvLyBTZXQgdGhlIG5hbWVcbiAgICAgICAgICAgIHZhbHVlcyA9IHF0YU9iamVjdEF0dHJpYnV0ZUJlYW4uZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpOyBcbiAgICAgICAgICAgIHZhbHVlcy5hZGQocXRhT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKTsgLy8gQWRkIHRoZSB2YWx1ZSB0byB0aGUgb2JqZWN0IGF0dHJpYnV0ZVxuICAgICAgICAgICAgbG9nLmRlYnVnIHZhbHVlc1xuICAgICAgICAgICAgcXRhT2JqZWN0QXR0cmlidXRlQmVhbi5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKHZhbHVlcyk7IFxuICAgICAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKHF0YU9iamVjdEF0dHJpYnV0ZUJlYW4pO1xuICAgICAgICAgICAgLypOb21lIENPTVBPTkVOVF9OT1RFKi9cbiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQubm90ZSddLnRvU3RyaW5nKCkpICE9IG51bGwpe1xuICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5ub3RlJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgZGVmIG5vdGUgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgICAgICAgICBub3RlPW5vdGVbMF0uZ2V0VmFsdWUoKVxuICAgICAgICAgICAgICAgIGRlZiBub3RlT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihDT01QT05FTlRfTk9URSk7IC8vIFRoZSBJRCBvZiB0aGUgb2JqZWN0IHR5cGUgYXR0cmlidXRlIFwiRElTQUJMRURcIlxuICAgICAgICAgICAgICAgIGRlZiBub3RlT2JqZWN0QXR0cmlidXRlQmVhbiA9IG5ld09iamVjdEJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihub3RlT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4pOyAvLyBUaGlzIGlzIHRoZSBuYW1lIG9iamVjdCBhdHRyaWJ1dGUgZm9yIHRoZSBuZXcgb2JqZWN0XG4gICAgICAgICAgICAgICAgZGVmIG5vdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4gPSBub3RlT2JqZWN0QXR0cmlidXRlQmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTsgLy8gVGhpcyBpcyB0aGUgYWN0dWFsIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICBub3RlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuLnNldFRleHRWYWx1ZShub3RlKVxuICAgICAgICAgICAgICAgIHZhbHVlcyA9IG5vdGVPYmplY3RBdHRyaWJ1dGVCZWFuLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTsgXG4gICAgICAgICAgICAgICAgdmFsdWVzLmFkZChub3RlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKTsgLy8gQWRkIHRoZSB2YWx1ZSB0byB0aGUgb2JqZWN0IGF0dHJpYnV0ZVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyB2YWx1ZXNcbiAgICAgICAgICAgICAgICBub3RlT2JqZWN0QXR0cmlidXRlQmVhbi5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKHZhbHVlcylcbiAgICAgICAgICAgICAgICBvYmplY3RBdHRyaWJ1dGVCZWFucy5hZGQobm90ZU9iamVjdEF0dHJpYnV0ZUJlYW4pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKk5vbWUgQ09NUE9ORU5UX1RLVF9DT01QQU5ZKi9cbiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQudGt0Q29tcGFueSddLnRvU3RyaW5nKCkpICE9IG51bGwpe1xuICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50a3RDb21wYW55J10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgZGVmIHRrdENvbXBhbnkgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgICAgICAgICB0a3RDb21wYW55PXRrdENvbXBhbnlbMF0uZ2V0VmFsdWUoKVxuICAgICAgICAgICAgICAgIGRlZiB0a3RDb21wYW55T2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihDT01QT05FTlRfVEtUX0NPTVBBTlkpOyAvLyBUaGUgSUQgb2YgdGhlIG9iamVjdCB0eXBlIGF0dHJpYnV0ZSBcIkRJU0FCTEVEXCJcbiAgICAgICAgICAgICAgICBkZWYgdGt0Q29tcGFueU9iamVjdEF0dHJpYnV0ZUJlYW4gPSBuZXdPYmplY3RCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW4odGt0Q29tcGFueU9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKTsgLy8gVGhpcyBpcyB0aGUgbmFtZSBvYmplY3QgYXR0cmlidXRlIGZvciB0aGUgbmV3IG9iamVjdFxuICAgICAgICAgICAgICAgIGRlZiB0a3RDb21wYW55T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuID0gdGt0Q29tcGFueU9iamVjdEF0dHJpYnV0ZUJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7IC8vIFRoaXMgaXMgdGhlIGFjdHVhbCB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlXG4gICAgICAgICAgICAgICAgdGt0Q29tcGFueU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbi5zZXRUZXh0VmFsdWUodGt0Q29tcGFueSlcbiAgICAgICAgICAgICAgICB2YWx1ZXMgPSB0a3RDb21wYW55T2JqZWN0QXR0cmlidXRlQmVhbi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7IFxuICAgICAgICAgICAgICAgIHZhbHVlcy5hZGQodGt0Q29tcGFueU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbik7IC8vIEFkZCB0aGUgdmFsdWUgdG8gdGhlIG9iamVjdCBhdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgdmFsdWVzXG4gICAgICAgICAgICAgICAgdGt0Q29tcGFueU9iamVjdEF0dHJpYnV0ZUJlYW4uc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyh2YWx1ZXMpXG4gICAgICAgICAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKHRrdENvbXBhbnlPYmplY3RBdHRyaWJ1dGVCZWFuKSAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAvKk5vbWUgQ09NUE9ORU5UX1FVT1RFX1JFUVVJUkVEKi9cbiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQucXVvdGVSZXF1aXJlZCddLnRvU3RyaW5nKCkpICE9IG51bGwpe1xuICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5xdW90ZVJlcXVpcmVkJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgZGVmIHF1b3RlUmVxID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgcXVvdGVSZXE9cXVvdGVSZXFbMF0uZ2V0VmFsdWUoKVxuICAgICAgICAgICAgICAgIGRlZiBxdW90ZVJlcU9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oQ09NUE9ORU5UX1FVT1RFX1JFUVVJUkVEKTsgLy8gVGhlIElEIG9mIHRoZSBvYmplY3QgdHlwZSBhdHRyaWJ1dGUgXCJESVNBQkxFRFwiXG4gICAgICAgICAgICAgICAgZGVmIHF1b3RlUmVxT2JqZWN0QXR0cmlidXRlQmVhbiA9IG5ld09iamVjdEJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihxdW90ZVJlcU9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKTsgLy8gVGhpcyBpcyB0aGUgbmFtZSBvYmplY3QgYXR0cmlidXRlIGZvciB0aGUgbmV3IG9iamVjdFxuICAgICAgICAgICAgICAgIGRlZiBxdW90ZVJlcU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbiA9IHF1b3RlUmVxT2JqZWN0QXR0cmlidXRlQmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTsgLy8gVGhpcyBpcyB0aGUgYWN0dWFsIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICBxdW90ZVJlcU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbi5zZXRCb29sZWFuVmFsdWUocXVvdGVSZXEpOyAvLyBTZXQgdGhlIG5hbWVcbiAgICAgICAgICAgICAgICB2YWx1ZXMgPSBxdW90ZVJlcU9iamVjdEF0dHJpYnV0ZUJlYW4uZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpOyBcbiAgICAgICAgICAgICAgICB2YWx1ZXMuYWRkKHF1b3RlUmVxT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKTsgLy8gQWRkIHRoZSB2YWx1ZSB0byB0aGUgb2JqZWN0IGF0dHJpYnV0ZVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyB2YWx1ZXNcbiAgICAgICAgICAgICAgICBxdW90ZVJlcU9iamVjdEF0dHJpYnV0ZUJlYW4uc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyh2YWx1ZXMpOyBcbiAgICAgICAgICAgICAgICBvYmplY3RBdHRyaWJ1dGVCZWFucy5hZGQocXVvdGVSZXFPYmplY3RBdHRyaWJ1dGVCZWFuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qTm9tZSBBQ0NPVU5USU5HX0lORElDQVRPUiovXG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuYWNjb3V0aW5nSW5kaWNhdG9yJ10udG9TdHJpbmcoKSkgIT0gbnVsbCA/IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuYWNjb3V0aW5nSW5kaWNhdG9yJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpIDogbnVsbFxuICAgICAgICAgICAgaWYob2JUcmlhZ2Upe1xuICAgICAgICAgICAgICAgIGRlZiBhY2NvdW50aW5nSW5kaWNhdG9yID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgYWNjb3VudGluZ0luZGljYXRvcj1hY2NvdW50aW5nSW5kaWNhdG9yWzBdLmdldFZhbHVlKClcbiAgICAgICAgICAgICAgICBkZWYgYWNjb3VudGluZ0luZGljYXRvck9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oQ09NUE9ORU5UX0FDQ09VTlRJTkdfSU5ESUNBVE9SKTsgLy8gVGhlIElEIG9mIHRoZSBvYmplY3QgdHlwZSBhdHRyaWJ1dGUgXCJESVNBQkxFRFwiXG4gICAgICAgICAgICAgICAgZGVmIGFjY291bnRpbmdJbmRpY2F0b3JPYmplY3RBdHRyaWJ1dGVCZWFuID0gbmV3T2JqZWN0QmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKGFjY291bnRpbmdJbmRpY2F0b3JPYmplY3RUeXBlQXR0cmlidXRlQmVhbik7IC8vIFRoaXMgaXMgdGhlIG5hbWUgb2JqZWN0IGF0dHJpYnV0ZSBmb3IgdGhlIG5ldyBvYmplY3RcbiAgICAgICAgICAgICAgICBkZWYgYWNjb3VudGluZ0luZGljYXRvck9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbiA9IGFjY291bnRpbmdJbmRpY2F0b3JPYmplY3RBdHRyaWJ1dGVCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpOyAvLyBUaGlzIGlzIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZVxuICAgICAgICAgICAgICAgIGFjY291bnRpbmdJbmRpY2F0b3JPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4uc2V0VGV4dFZhbHVlKGFjY291bnRpbmdJbmRpY2F0b3IpOyAvLyBTZXQgdGhlIG5hbWVcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHZhbHVlcyA9IGFjY291bnRpbmdJbmRpY2F0b3JPYmplY3RBdHRyaWJ1dGVCZWFuLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTsgXG4gICAgICAgICAgICAgICAgdmFsdWVzLmFkZChhY2NvdW50aW5nSW5kaWNhdG9yT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKTsgLy8gQWRkIHRoZSB2YWx1ZSB0byB0aGUgb2JqZWN0IGF0dHJpYnV0ZVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyB2YWx1ZXNcbiAgICAgICAgICAgICAgICBhY2NvdW50aW5nSW5kaWNhdG9yT2JqZWN0QXR0cmlidXRlQmVhbi5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKHZhbHVlcyk7IFxuICAgICAgICAgICAgICAgIG9iamVjdEF0dHJpYnV0ZUJlYW5zLmFkZChhY2NvdW50aW5nSW5kaWNhdG9yT2JqZWN0QXR0cmlidXRlQmVhbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8qTm9tZSBDT01QT05FTlRfTUFURVJJQUxfUkVGKi9cbiAgICAgICAgICAgIGRlZiBtYXRlcmlhbFNBUCBcbiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQubWF0ZXJpYWxSZWYnXS50b1N0cmluZygpKSAhPSBudWxsKXtcbiAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQubWF0ZXJpYWxSZWYnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICBkZWYgbWF0ZXJpYWwgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgICAgICAgICBtYXRlcmlhbD1tYXRlcmlhbFswXS5nZXRWYWx1ZSgpXG4gICAgICAgICAgICAgICAgZGVmIG1hdFJlZk9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oQ09NUE9ORU5UX01BVEVSSUFMX1JFRik7IC8vIFRoZSBJRCBmb3IgdGhlIHJlZmVyZW5jZWQgb2JqZWN0IHR5cGVcbiAgICAgICAgICAgICAgICBtYXRSZWZPYmplY3RBdHRyaWJ1dGVCZWFuID0gbmV3T2JqZWN0QmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKG1hdFJlZk9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKTsgXG4gICAgICAgICAgICAgICAgbWF0UmVmT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuID0gbWF0UmVmT2JqZWN0QXR0cmlidXRlQmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTsgLy8gVGhpcyBpcyB0aGUgYWN0dWFsIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICBtYXRSZWZPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4uc2V0UmVmZXJlbmNlZE9iamVjdEJlYW5JZChtYXRlcmlhbCk7IC8vIFNldCB0aGUgSURcbiAgICAgICAgICAgICAgICB2YWx1ZXMgPSBtYXRSZWZPYmplY3RBdHRyaWJ1dGVCZWFuLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTsgXG4gICAgICAgICAgICAgICAgdmFsdWVzLmFkZChtYXRSZWZPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4pOyAvLyBBZGQgdGhlIHZhbHVlIHRvIHRoZSBvYmplY3QgYXR0cmlidXRlXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIHZhbHVlc1xuICAgICAgICAgICAgICAgIG1hdFJlZk9iamVjdEF0dHJpYnV0ZUJlYW4uc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyh2YWx1ZXMpOyBcbiAgICAgICAgICAgICAgICBvYmplY3RBdHRyaWJ1dGVCZWFucy5hZGQobWF0UmVmT2JqZWN0QXR0cmlidXRlQmVhbik7IC8vIEFkZCB0byB0aGUgbGlzdCBvZiBvYmplY3QgYXR0cmlidXRlc1xuICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKG1hdGVyaWFsIT1udWxsKXtcbiAgICAgICAgICAgICAgICAgICAgLypNQVRFUklBTCAtIFNBUCovXG4gICAgICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihtYXRlcmlhbC50b0ludGVnZXIoKSwgcHJvcGVydGllc1snaW9iai5tYXRlcmlhbC5zYXAnXS50b1N0cmluZygpKSAhPSBudWxsKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG1hdGVyaWFsLnRvSW50ZWdlcigpLCBwcm9wZXJ0aWVzWydpb2JqLm1hdGVyaWFsLnNhcCddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWxTQVAgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsU0FQID0gbWF0ZXJpYWxTQVBbMF0uZ2V0VmFsdWUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwibWF0ZXJpYWxTQVA6IFwiICsgbWF0ZXJpYWxTQVBcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbFNBUCA9IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKk5vbWUgQ09NUE9ORU5UX1NVUFBMSUVEX0JZX0ZBQUMqL1xuICAgICAgICAgICAgZGVmIHN1cHBsaWVkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihDT01QT05FTlRfU1VQUExJRURfQllfRkFBQyk7IC8vIFRoZSBJRCBvZiB0aGUgb2JqZWN0IHR5cGUgYXR0cmlidXRlIFwiRElTQUJMRURcIlxuICAgICAgICAgICAgZGVmIHN1cHBsaWVkT2JqZWN0QXR0cmlidXRlQmVhbiA9IG5ld09iamVjdEJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihzdXBwbGllZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKTsgLy8gVGhpcyBpcyB0aGUgbmFtZSBvYmplY3QgYXR0cmlidXRlIGZvciB0aGUgbmV3IG9iamVjdFxuICAgICAgICAgICAgZGVmIHN1cHBsaWVkT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuID0gc3VwcGxpZWRPYmplY3RBdHRyaWJ1dGVCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpOyAvLyBUaGlzIGlzIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZVxuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIFwiU1VQUExJRURfQllfRkFBQ1wiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIGRlZiBzdXBwbGllZCA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuICAgICAgICAgICAgc3VwcGxpZWQ9c3VwcGxpZWRbMF0uZ2V0VmFsdWUoKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwic3VwcGxpZWQ6IFwiICsgc3VwcGxpZWRcbiAgICAgICAgICAgIGlmKHN1cHBsaWVkID09IG51bGwgJiYgbWF0ZXJpYWxTQVA9PXRydWUpe1xuICAgICAgICAgICAgICAgIHN1cHBsaWVkT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuLnNldFRleHRWYWx1ZShcIlllc1wiKTsgLy8gU2V0IHRoZSBuYW1lXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihzdXBwbGllZCA9PSBudWxsICYmIG1hdGVyaWFsU0FQPT1mYWxzZSl7XG4gICAgICAgICAgICAgICAgc3VwcGxpZWRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4uc2V0VGV4dFZhbHVlKFwiTm9cIik7IC8vIFNldCB0aGUgbmFtZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoc3VwcGxpZWQgIT0gbnVsbCAmJiBzdXBwbGllZD09XCJZZXNcIil7XG4gICAgICAgICAgICAgICAgc3VwcGxpZWRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4uc2V0VGV4dFZhbHVlKFwiWWVzXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoc3VwcGxpZWQgIT0gbnVsbCAmJiBzdXBwbGllZD09XCJOb1wiKXtcbiAgICAgICAgICAgICAgICBzdXBwbGllZE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbi5zZXRUZXh0VmFsdWUoXCJOb1wiKTtcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJzZXQgbm9cIlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YWx1ZXMgPSBzdXBwbGllZE9iamVjdEF0dHJpYnV0ZUJlYW4uZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpOyBcbiAgICAgICAgICAgIHZhbHVlcy5hZGQoc3VwcGxpZWRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4pOyAvLyBBZGQgdGhlIHZhbHVlIHRvIHRoZSBvYmplY3QgYXR0cmlidXRlXG4gICAgICAgICAgICBsb2cuZGVidWcgdmFsdWVzXG4gICAgICAgICAgICBzdXBwbGllZE9iamVjdEF0dHJpYnV0ZUJlYW4uc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyh2YWx1ZXMpOyBcbiAgICAgICAgICAgIG9iamVjdEF0dHJpYnV0ZUJlYW5zLmFkZChzdXBwbGllZE9iamVjdEF0dHJpYnV0ZUJlYW4pO1xuICAgICAgICAgICAgLypOb21lIENPTVBPTkVOVF9GUk9NX1FVT1RFX1RLVCovXG4gICAgICAgICAgICAvKjA4LjAzLjIwMjMgQUYgZGEgbm9uIHNldHRhcmUgc3VnbGkgb2dnZXR0aSBDb21wb25lbnQgbGVnYXRpIGFsIGNhbXBvIE9QX1FVT1RFX01BVEVSSUFMUyAtIFx1MDBlOCB1biBhdHRyaWJ1dG8gc2V0dGF0byBzb2xvIHN1Z2xpIG9nZ2V0dGkgQ29tcG9uZW50IGxlZ2F0aSBhbCBjYW1wbyBPUF9SRVBMQUNFRF9NQVRFUklBTFMgLSBxdWFuZG8gZ2VuZXJhdGkgaW4gY29waWEgZGEgb2dnZXR0aSBpbiBPUF9RVU9URV9NQVRFUklBTFMqL1xuIC8vICAgICAgICAgICAgZGVmIGZyb21RdW90ZU9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oQ09NUE9ORU5UX0ZST01fUVVPVEVfVEtUKTsgLy8gVGhlIElEIG9mIHRoZSBvYmplY3QgdHlwZSBhdHRyaWJ1dGUgXCJESVNBQkxFRFwiXG4gLy8gICAgICAgICAgICBkZWYgZnJvbVF1b3RlT2JqZWN0QXR0cmlidXRlQmVhbiA9IG5ld09iamVjdEJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihmcm9tUXVvdGVPYmplY3RUeXBlQXR0cmlidXRlQmVhbik7IC8vIFRoaXMgaXMgdGhlIG5hbWUgb2JqZWN0IGF0dHJpYnV0ZSBmb3IgdGhlIG5ldyBvYmplY3RcbiAvLyAgICAgICAgICAgIGRlZiBmcm9tUXVvdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4gPSBmcm9tUXVvdGVPYmplY3RBdHRyaWJ1dGVCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpOyAvLyBUaGlzIGlzIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZVxuIC8vICAgICAgICAgICAgaWYobWF0ZXJpYWxTQVA9PXRydWUpe1xuIC8vICAgICAgICAgICAgICAgIGZyb21RdW90ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbi5zZXRCb29sZWFuVmFsdWUodHJ1ZSk7IC8vIFNldCB0aGUgbmFtZVxuIC8vICAgICAgICAgICAgfWVsc2V7XG4gLy8gICAgICAgICAgICAgICAgZnJvbVF1b3RlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuLnNldEJvb2xlYW5WYWx1ZShmYWxzZSk7IC8vIFNldCB0aGUgbmFtZVxuIC8vICAgICAgICAgICAgfVxuIC8vICAgICAgICAgICAgdmFsdWVzID0gZnJvbVF1b3RlT2JqZWN0QXR0cmlidXRlQmVhbi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7IFxuLy8gICAgICAgICAgICB2YWx1ZXMuYWRkKGZyb21RdW90ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbik7IC8vIEFkZCB0aGUgdmFsdWUgdG8gdGhlIG9iamVjdCBhdHRyaWJ1dGVcbiAvLyAgICAgICAgICAgIGxvZy5kZWJ1ZyB2YWx1ZXNcbiAvLyAgICAgICAgICAgIGZyb21RdW90ZU9iamVjdEF0dHJpYnV0ZUJlYW4uc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyh2YWx1ZXMpOyBcbi8vICAgICAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKGZyb21RdW90ZU9iamVjdEF0dHJpYnV0ZUJlYW4pO1xuICAgICAgICAgICAgbG9nLmRlYnVnIFwib2JqZWN0QXR0cmlidXRlQmVhbnM6IFwiICsgb2JqZWN0QXR0cmlidXRlQmVhbnNcbiAgICAgICAgICAgIC8qIFNldCBhbGwgb2JqZWN0IGF0dHJpYnV0ZXMgdG8gdGhlIG9iamVjdCAqL1xuICAgICAgICAgICAgbmV3T2JqZWN0QmVhbi5zZXRPYmplY3RBdHRyaWJ1dGVCZWFucyhvYmplY3RBdHRyaWJ1dGVCZWFucyk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIG5ld09iamVjdEJlYW4gPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RCZWFuKG5ld09iamVjdEJlYW4pO1xuICAgICAgICAgICAgICAgIG9iakxpc3QuYWRkKG5ld09iamVjdEJlYW4pXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnKFwibmV3T2JqZWN0QmVhbjogXCIgKyBuZXdPYmplY3RCZWFuKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHtcbiAgICAgICAgICAgICAgICBsb2cud2FybihcIkNvdWxkIG5vdCBjcmVhdGUgaXNzdWUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOlwiICsgdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKjEzLjAyLjIwMjMgQUYgLSBhbCB0ZXJtaW5lIGRlbGxhIGNyZWF6aW9uZSBkZWwgbnVvdm8gb2dnZXR0byBsbyBhZ2dpb3JubyBpbXBvc3RhbmRvIGxhIHN1YSBrZXkgbmVsbCdhdHRyaWJ1dG8gUVVPVEVfT0JKX0lEKi9cbiAgICAgICAgICAgIGRlZiBvYmpUb1VwZGF0ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihuZXdPYmplY3RCZWFuLmdldElkKCkpO1xuICAgICAgICAgICAgLyogQ3JlYXRlIGEgbmV3IHVuc2F2ZWQgb2JqZWN0IGJlYW4gKi9cbiAgICAgICAgICAgIGRlZiBxdW90ZU9iaklkYXR0cmliVHlwZSA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnF1b3RlT2JqSWQuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpKTsgXG4gICAgICAgICAgICBkZWYgcXVvdGVPYmpJZG5ld0F0dHJpYiA9IG9ialRvVXBkYXRlLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW4ocXVvdGVPYmpJZGF0dHJpYlR5cGUpO1xuICAgICAgICAgICAgZGVmIHF1b3RlT2JqSWRuZXdBdHRyaWJWYWx1ZSA9IHF1b3RlT2JqSWRuZXdBdHRyaWIuY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7XG4gICAgICAgICAgICBxdW90ZU9iaklkbmV3QXR0cmliVmFsdWUuc2V0VmFsdWUocXVvdGVPYmpJZGF0dHJpYlR5cGUsIG5ld09iamVjdEJlYW4uZ2V0SWQoKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGRlZiBxdW90ZU9iaklkYXR0cmliVmFsdWVzID0gcXVvdGVPYmpJZG5ld0F0dHJpYi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7XG4gICAgICAgICAgICBxdW90ZU9iaklkYXR0cmliVmFsdWVzLmFkZChxdW90ZU9iaklkbmV3QXR0cmliVmFsdWUpO1xuICAgICAgICAgICAgcXVvdGVPYmpJZG5ld0F0dHJpYi5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKHF1b3RlT2JqSWRhdHRyaWJWYWx1ZXMpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBxdW90ZU9iaklkbmV3QXR0cmliID0gb2JqZWN0RmFjYWRlLnN0b3JlT2JqZWN0QXR0cmlidXRlQmVhbihxdW90ZU9iaklkbmV3QXR0cmliKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHtcbiAgICAgICAgICAgICAgICBsb2cud2FybihcIlVuYWJsZSB0byBzYXZlIGNoYW5nZXMuIEV4aXRpbmcuXCIpO1xuICAgICAgICAgICAgICAgIGxvZy53YXJuKHZpZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSAgICAgICAgXG4gICAgfVxuICAgIG1pLnNldEN1c3RvbUZpZWxkVmFsdWUocXVvdGVNYXRlcmlhbHMsIG9iakxpc3QpO1xuICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsZmFsc2UpO1xuICAgIFxuICAgIC8vU2V0IE9QQUFfT0ZGRVJfVEtUPVllcyBvbiBqdXN0IGNyZWF0ZWQgbGlua2VkSXNzdWVcbiAgIFxuICAgIGRlZiBmaWVsZENvbmZpZyA9IG9mZmVyRnJvbVJlcGFpci5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSlcbiAgICAvL2xvZy53YXJuIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcbiAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICBsb2cuZGVidWcgXCJ0cmFuc2l0aW9uIGZpZWxkIHZhbHVlOiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VycmVudFVzZXJUcmFuc2l0aW9uKVxuICAgIC8vbG9nLmRlYnVnIFwiY3VycmVudFVzZXJUcmFuc2l0aW9uOiBcIiArIGN1cnJlbnRVc2VyVHJhbnNpdGlvblxuICAgIHBtSXNzdWVGaWVsZC51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbUlzc3VlRmllbGQpLCBpc3N1ZS5rZXkudG9TdHJpbmcoKSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcbiAgICBvZmZlckZyb21SZXBhaXIudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUob2ZmZXJJc3N1ZUJvb2xGaWVsZCksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG4gICAgXG5cbiAgICBmaWVsZENvbmZpZyA9IG9mZmVySXNzdWVCb29sRmllbGQuZ2V0UmVsZXZhbnRDb25maWcobGlua2VkSXNzdWUpXG4gICAgLy9sb2cud2FybiBcImZpZWxkQ29uZmlnOiBcIiArIGZpZWxkQ29uZmlnXG4gICAgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICBvZmZlcklzc3VlQm9vbEZpZWxkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG9mZmVySXNzdWVCb29sRmllbGQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuICAgIFxuICAgIGRlZiB1c2VyVHJhbnNpdGlvbiA9IHVzZXJNYW5hZ2VyLmdldFVzZXJCeU5hbWUoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXJyZW50VXNlclRyYW5zaXRpb24pLnRvU3RyaW5nKCkpXG5cdGxvZy5kZWJ1ZyBcInVzZXJUcmFuc2l0aW9uOiBcIiArIHVzZXJUcmFuc2l0aW9uXG4gICAgaWYgKHVzZXJUcmFuc2l0aW9uICE9IG51bGwgJiYgKGdyb3VwTWFuYWdlci5nZXRVc2Vyc0luR3JvdXAoc3VwcGxpZXJBZG0pLmNvbnRhaW5zKHVzZXJUcmFuc2l0aW9uKSB8fCBncm91cE1hbmFnZXIuZ2V0VXNlcnNJbkdyb3VwKHN1cHBsaWVyVGVjaCkuY29udGFpbnModXNlclRyYW5zaXRpb24pKSkge1xuICAgICAgICAvLyBUcmFuc2l0aW9uIGV4ZWN1dGVkIGJ5IGV4dGVybmFsIHVzZXIgLS0+IHRvIGJlIGFkZGVkIGFsc28gaW50ZXJuYWwgdGVjaHMgcm9sZSBncm91cHNcbiAgICAgICAgLy8gRW1haWwgaGFzIG5vdCB0byBiZSBzZW50XG4gICAgICAgIC8vIFNOIHdpbGwgYmUgY3JlYXRlZCBhcyBzb29uIGFzIHRoZSBxdW90YXRpb24gaGFzIGJlZW4gY29uZmlybWVkIC0gdG8gYmUgY2hlY2tlZCB3aGVuIHRvIGNyZWF0ZSBTTiBpZiBubyBxdW90YXRpb24gZnJvbSBzdXBwbGllciBpcyBuZWVkZWQgLSB3aGVuIHRoZSBxdW90YXRpb24gaGFzIGJlZW4gc2VudCB0byB0aGUgY3VzdG9tZXI/XG4gICAgICAgIGxvZy5kZWJ1ZyBcImluIHV0ZW50ZSBzdXBwbGllclwiXG4gICAgICAgIHRyYW5zaXRpb25DaGVjay51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuICAgICAgICBvZmZlckZyb21SZXBhaXIudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUob2ZmZXJGcm9tUmVwYWlyKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcblx0fVxuICAgIFxuICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTtcbiAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGxpbmtlZElzc3VlKSAgICBcbiAgICBcbiAgICBvZmZlcklzc3VlRmllbGQudXBkYXRlVmFsdWUobnVsbCwgaXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUob2ZmZXJJc3N1ZUZpZWxkKSwgbGlua2VkSXNzdWUua2V5LnRvU3RyaW5nKCkpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG4gICAgXG4gICAgaWYgKGRlc3RTdGF0dXNPYmplY3QubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5vcGVuJ10udG9TdHJpbmcoKSkge1xuICAgICAgICAvLyBQcmVwYXJlIG91ciBpbnB1dCBmb3IgdGhlIHRyYW5zaXRpb25cbiAgICAgICAgZGVmIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKClcbiAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7XG4gICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2sodHJ1ZSlcbiAgICAgICAgfVxuICAgICAgICAvLyBWYWxpZGF0ZSB0cmFuc2l0aW9uaW5nIHRoZSBsaW5rZWQgaXNzdWUgdG8gXCJTaWducyBOZWVkZWRcIlxuICAgICAgICBkZWYgdmFsaWRhdGlvblJlc3VsdCA9IGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIDIxMjEsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKVxuICAgICAgICBpZiAodmFsaWRhdGlvblJlc3VsdC5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIHZhbGlkYXRpb25SZXN1bHQpXG4gICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcoXCJGYWlsZWQgdG8gdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn1cIilcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyhcIlRyYW5zYXppb25lIGZhdHRhXCIpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsb2cuZGVidWcoXCJDb3VsZCBub3QgdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke3ZhbGlkYXRpb25SZXN1bHQuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICB9XG4gICAgfVxuICAgIFxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.43.0</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="uuid">272c2d8d-f060-4f14-8338-da156805b688</arg>
                  <arg name="fieldValue">3_QUOTATION</arg>
                  <arg name="preconditionMode-textValue">DISCARD</arg>
                  <arg name="fieldsList">customfield_26601</arg>
                </function>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.43.0</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="uuid">862f38a4-ef1c-49a0-8ab3-544e80586b36</arg>
                  <arg name="fieldValue"></arg>
                  <arg name="preconditionMode-textValue">AND</arg>
                  <arg name="fieldsList">customfield_22609</arg>
                </function>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.43.0</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="uuid">b76f1d4f-63b0-415b-bcfc-af422cf9b00b</arg>
                  <arg name="fieldValue"></arg>
                  <arg name="preconditionMode-textValue">AND</arg>
                  <arg name="fieldsList">customfield_23923</arg>
                </function>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.43.0</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="uuid">1d7ba252-ce05-414c-95d0-33000263f5bd</arg>
                  <arg name="fieldValue"></arg>
                  <arg name="preconditionMode-textValue">AND</arg>
                  <arg name="fieldsList">customfield_22657</arg>
                </function>
                <function type="class">
                  <arg name="field.existingAttachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="targetIssueTypeDefinedByCfSelection"></arg>
                  <arg name="uuid">ede3c31a-1c8e-406b-bb01-6cfb4159d0f1</arg>
                  <arg name="issueTypeId">13001</arg>
                  <arg name="scopeType">ISSUE_LINKING</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.43.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="field.attachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="targetIssueType">SELECTED_ISSUE_TYPE</arg>
                  <arg name="scopeSource-jql"></arg>
                  <arg name="createIssueAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.copyTransitionComment">false</arg>
                  <arg name="targetProjectType">SAME</arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="transitionAttachmentsOperation">copy</arg>
                  <arg name="field.issueAssignTo">ASSIGN_TO_UNASSIGNED</arg>
                  <arg name="targetProjectSelectedCustomField"></arg>
                  <arg name="destination-scopeTarget">LINK_END</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiescreatelinkedissue-function</arg>
                  <arg name="scopeDestination-linkEnd">11100:OUTWARD</arg>
                  <arg name="field.enablingCustomFieldId">customfield_22609</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
                  <arg name="subFunctions">[{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:false,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22609&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22658&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22600&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22600&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22822&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22822&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22601&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22601&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22602&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22602&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22813&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22813&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23235&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23235&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22651&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22651&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22700&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22700&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22607&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22607&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;priority&quot;,&quot;destinationFieldId&quot;:&quot;priority&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23203&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23203&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23237&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23237&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_21909&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21909&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Yes&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22681&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23401&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21908&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Maintenance Ticket&quot;,&quot;destinationFieldId&quot;:&quot;summary&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Yes&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23409&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22649&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22629&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23607&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23607&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_25704&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23906&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_25703&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23907&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_25705&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23908&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_25706&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23909&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_25707&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22689&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_25708&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22691&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22690&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22690&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Yes&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23409&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Maintenance Ticket&quot;,&quot;destinationFieldId&quot;:&quot;summary&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23401&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23237&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;REPAIR_ENABLED&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22814&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22614&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22614&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22635&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22635&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Yes&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23402&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_25709&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23917&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Key&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22763&quot;}}]</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.createlinkedissue.CreateLinkedIssueFunction</arg>
                  <arg name="projectId">22601</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">71a4764e-ec7c-4759-97f5-5775b6c349ed</arg>
                  <arg name="FIELD_NOTES">YCFgT1A6IFVwZGF0ZSBzdGF0dXMgb24ganVzdCBjcmVhdGVkIFJlcGFpciBRdW90YXRpb24gaXNzdWUgJiYgR2VuZXJhdGUgT1BfUVVPVEVfTUFURVJJQUxTIGZyb20gT1BfUkVRVUlSRURfTUFURVJJQUxT</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnlcbmltcG9ydCBncm9vdnkuanNvbi5Kc29uQnVpbGRlclxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29uZmlnLnV0aWwuSmlyYUhvbWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvblxuaW1wb3J0IGphdmEudGV4dC5TaW1wbGVEYXRlRm9ybWF0XG5pbXBvcnQgamF2YS50ZXh0LlBhcnNlRXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbmZpZy5wcm9wZXJ0aWVzLkFQS2V5c1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLkxpbmtDb2xsZWN0aW9uSW1wbDtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbms7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxubG9nLmRlYnVnIFwiUGVyY29yc28gcHJvcGVydGllczogXCIgKyBTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5cbi8qSW5zaWdodCBjbGFzc2VzICYgY29tcG9uZW50cyovXG4gQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyAgXG5DbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTtcbiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XG4gb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcbiAvKiBHZXQgSW5zaWdodCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG4gQ2xhc3MgaXFsRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuSVFMRmFjYWRlXCIpOyBcbmlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XG4gQ2xhc3Mgb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LnNlcnZpY2VzLm1vZGVsLmZhY3RvcnkuT2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlcIik7XG4gb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnlDbGFzcyk7XG4gLyogR2V0IEluc2lnaHQgT2JqZWN0IFR5cGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXG4gQ2xhc3Mgb2JqZWN0VHlwZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVGYWNhZGVcIik7IFxub2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpO1xuXG4vKlNjcmlwdCBWYXJpYWJsZXMqL1xuLy9QZXIgUG9zdCBGdW5jdGlvblxuaXNzdWUgPSBpc3N1ZVxuLy9QZXIgdGVzdCBkYSBjb25zb2xlXG4vL0lzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKVxuLy9pc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIk9QVVQtMjU3XCIpXG5sb2cuZGVidWcgXCJJc3N1ZTogXCIgKyBpc3N1ZVxuZGVmIGZvdW5kPWZhbHNlXG5kZWYgbGlua2VkSXNzdWVcbmRlZiBpc3N1ZVNlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZVNlcnZpY2UoKVxuZGVmIGdyb3VwTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEdyb3VwTWFuYWdlcigpXG5kZWYgdXNlck1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRVc2VyTWFuYWdlcigpXG5kZWYgb2ZmZXJGcm9tUmVwYWlyID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1RLVF9HRU5FUkFURURfRlJPTV9QTVwiKVswXVxuZGVmIGN1cnJlbnRVc2VyVHJhbnNpdGlvbiA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9DVVJSRU5UX1VTRVJfR0VORVJBVEVfUkVQQUlSX1FVT1RFXCIpWzBdXG5kZWYgdHJhbnNpdGlvbkNoZWNrID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfQ0hFQ0tfQU5EX0NPTkZJUk1cIilbMF1cblN0cmluZyBzdXBwbGllckFkbSA9IFwiT1BST0xFX0FBX1NVUFBMSUVSX0FETVwiXG5TdHJpbmcgc3VwcGxpZXJUZWNoID0gXCJPUFJPTEVfQUFfU1VQUExJRVJfVEVDSFwiXG5MaXN0PElzc3VlTGluaz4gYWxsT3V0SXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldE91dHdhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKTtcbmxvZy5kZWJ1ZyBcImFsbE91dElzc3VlTGluazogXCIgKyBhbGxPdXRJc3N1ZUxpbmtcbmZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbE91dElzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcbiAgICBkZWYgbGlua2VkSXNzdWVUZW1wID0gaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KClcbiAgICBTdHJpbmcgdHlwZSA9IGxpbmtlZElzc3VlVGVtcC5nZXRJc3N1ZVR5cGUoKS5nZXROYW1lKCk7XG5cbiAgICBsb2cuZGVidWcoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpKSBcbiAgICBcbiAgICBpZiggaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkgIT0gbnVsbCAmJiBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKS5nZXRJc3N1ZVR5cGUoKS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMoXCJNYWludGVuYW5jZSBUaWNrZXRcIikgJiYgaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNQcm9ibGVtJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICBsaW5rZWRJc3N1ZT1saW5rZWRJc3N1ZVRlbXBcbiAgICAgICAgbG9nLmRlYnVnIFwibGlua2VkIGlzc3VlOiBcIiArIGxpbmtlZElzc3VlXG4gICAgICAgIC8vbG9nLmRlYnVnIFwibGlua2VkIGlzc3VlIHN0YXR1czogXCIgKyBsaW5rZWRJc3N1ZS5nZXRTdGF0dXNPYmplY3QoKS5uYW1lXG4gICAgICAgIGlmKGxpbmtlZElzc3VlLmdldFN0YXR1c09iamVjdCgpLm5hbWUgPT0gcHJvcGVydGllc1snd2Yub3BlbiddLnRvU3RyaW5nKCkpe1xuICAgICAgICAgICAgZm91bmQ9dHJ1ZVxuICAgICAgICB9XG4gICAgfVxufVxuXG5MaXN0PElzc3VlTGluaz4gYWxsSW5Jc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0SW53YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSk7XG5sb2cuZGVidWcgXCJhbGxJbklzc3VlTGluazogXCIgKyBhbGxJbklzc3VlTGlua1xuZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG4gICAgZGVmIGxpbmtlZElzc3VlVGVtcCA9IGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKVxuICAgIFN0cmluZyB0eXBlID0gbGlua2VkSXNzdWVUZW1wLmdldElzc3VlVHlwZSgpLmdldE5hbWUoKTtcblxuICAgIGxvZy5kZWJ1Zyhpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkpIFxuICAgIFxuICAgIGlmKGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKSAhPSBudWxsICYmIGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKS5nZXRJc3N1ZVR5cGUoKS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMoXCJNYWludGVuYW5jZSBUaWNrZXRcIikgJiYgaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNQcm9ibGVtJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICBsaW5rZWRJc3N1ZT1saW5rZWRJc3N1ZVRlbXBcbiAgICAgICAgbG9nLmRlYnVnIFwibGlua2VkIGlzc3VlOiBcIiArIGxpbmtlZElzc3VlXG4gICAgICAgIC8vbG9nLmRlYnVnIFwibGlua2VkIGlzc3VlIHN0YXR1czogXCIgKyBsaW5rZWRJc3N1ZS5nZXRTdGF0dXNPYmplY3QoKS5uYW1lXG4gICAgICAgIGlmKGxpbmtlZElzc3VlLmdldFN0YXR1c09iamVjdCgpLm5hbWUgPT0gcHJvcGVydGllc1snd2Yub3BlbiddLnRvU3RyaW5nKCkpe1xuICAgICAgICAgICAgZm91bmQ9dHJ1ZVxuICAgICAgICB9XG4gICAgfVxufVxuLy9sb2cuZGVidWcgXCJmb3VuZDogXCIgKyBmb3VuZFxuXG5pZihmb3VuZCl7XG5cdGRlZiBkZXN0U3RhdHVzT2JqZWN0ID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzT2JqZWN0KClcbiAgICAvL2xvZy5kZWJ1ZyBcImRlc3RTdGF0dXNPYmplY3Q6IFwiICsgZGVzdFN0YXR1c09iamVjdFxuICAgIC8vbG9nLmRlYnVnIFwibGlua2VkSXNzdWU6IFwiICsgbGlua2VkSXNzdWVcbiAgICBkZWYgdXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuXHQvLyBJcyB0aGUgc3RhdHVzIG9mIHRoZSBsaW5rZWQgaXNzdWUgXCJJbnN0YWxsaW5nXCIgP1xuICAgIFxuICAgIGRlZiBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5jdXN0b21GaWVsZE1hbmFnZXJcbiAgICBkZWYgcG1Jc3N1ZUZpZWxkID0gY3VzdG9tRmllbGRNYW5hZ2VyLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1BNX0xJTktFRF9JU1NVRVwiKS5maXJzdCgpXG4gICAgZGVmIG9mZmVySXNzdWVGaWVsZCA9IGN1c3RvbUZpZWxkTWFuYWdlci5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9PRkZFUl9MSU5LRURfSVNTVUVcIikuZmlyc3QoKVxuICAgIGRlZiBvZmZlcklzc3VlQm9vbEZpZWxkID0gY3VzdG9tRmllbGRNYW5hZ2VyLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5vZmZlclRrdCddLnRvU3RyaW5nKCkpLmZpcnN0KClcblx0XG5cdCAgLy8xMy4wMi4yMDIzIEFGIC0gZ2VuZXJhIENvbXBvbmVudCBkYSBsaW5rYXJlIG5lbCBjYW1wbyBPUF9RVU9URV9NQVRFUklBTFMgcGFydGVuZG8gZGEgcXVlbGxpIGFnZ2l1bnRpIG5lbCBjYW1wbyBPUF9SRVFVSVJFRF9NQVRFUklBTFMgLSBnZW5lcmlhbW8gbnVvdmkgb2dnZXR0aSBDb21wb25lbnQgcGVyIGV2aXRhcmUgY2hlIG1vZGlmaWNoZSBmYXR0ZSBzdWwgdGlja2V0IGRpIHF1b3RhdGlvbiBcbiAgICAvL3ZhZGFubyBhIG1vZGlmaWNhcmUgbGEgcmljaGllc3RhIGluaXppYWxtZW50ZSBmYXR0YSBkYWwgdGVjbmljbyBzdWwgdGlja2V0IG9yaWdpbmFsZVxuICAgIGRlZiBDT01QT05FTlRfVE9UQUxfQU1PVU5UX1NVUFBMSUVSPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdFN1cHAuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG4gICAgZGVmIENPTVBPTkVOVF9UT1RBTF9BTU9VTlRfQ1VTVE9NRVI9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQudG90Q3VzdC5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbiAgICBkZWYgQ09NUE9ORU5UX05BTUU9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQubmFtZS5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbiAgICBkZWYgQ09NUE9ORU5UX0hBUkRXQVJFX1JFRj1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5oYXJkd2FyZVJlZi5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbiAgICBkZWYgQ09NUE9ORU5UX1NBUD1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5zYXAuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG4gICAgZGVmIENPTVBPTkVOVF9TVVBQTElFRF9CWV9GQUFDPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnN1cHBsaWVkQnlGYWFjLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuICAgIGRlZiBDT01QT05FTlRfUVVBTlRJVFk9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQucXVhbnRpdHkuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG4gICAgZGVmIENPTVBPTkVOVF9RVU9URURfUVVBTlRJVFk9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQucXVvdGVkUXVhbnRpdHkuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG4gICAgZGVmIENPTVBPTkVOVF9RVU9URV9SRVFVSVJFRD1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5xdW90ZVJlcXVpcmVkLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuICAgIGRlZiBDT01QT05FTlRfU1VQUExJRVJfUVVPVEVfVE9fRkFBQz1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5zdXBwbGllclF1b3RlLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuICAgIGRlZiBDT01QT05FTlRfRkFBQ19RVU9URV9UT19DVVNUT01FUj1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5jdXN0b21lclF1b3RlLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuICAgIGRlZiBDT01QT05FTlRfQVBQTElFRF9UTz1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hcHBsaWVkVG8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG4gICAgZGVmIENPTVBPTkVOVF9NQVRFUklBTF9SRUY9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQubWF0ZXJpYWxSZWYuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG4gICAgZGVmIENPTVBPTkVOVF9BQ0NPVU5USU5HX1NVUFBMSUVSX01BVEVSSUFMX1JFRj1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hY2NvdW50aW5nU3VwcE1hdFJlZi5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbiAgICBkZWYgQ09NUE9ORU5UX0FDQ09VTlRJTkdfQ1VTVE9NRVJfTUFURVJJQUxfUkVGPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmFjY291bnRpbmdDdXN0TWF0UmVmLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuICAgIGRlZiBDT01QT05FTlRfRlJPTV9RVU9URV9US1Q9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQuZnJvbVF1b3RlVGt0LmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuICAgIGRlZiBDT01QT05FTlRfREVMRVRFRD1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5kZWxldGVkLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuICAgIGRlZiBDT01QT05FTlRfTk9URT1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5ub3RlLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuICAgIGRlZiBDT01QT05FTlRfQUNDT1VOVElOR19JTkRJQ0FUT1I9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQuYWNjb3VudGluZ0luZGljYXRvci5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbiAgICBkZWYgQ09NUE9ORU5UX1FVT1RFX09CSl9JRD1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5xdW90ZU9iaklkLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuICAgIGRlZiBDT01QT05FTlRfVEtUX0NPTVBBTlk9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQudGt0Q29tcGFueS5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbiAgICAvL09ialR5cGUgSURzXG4gICAgZGVmIENPTVBPTkVOVD1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbiAgICAvKkN1c3RvbWZpZWxkcyovXG4gICAgZGVmIHF1b3RlTWF0ZXJpYWxzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnF1b3RlTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF1cbiAgICBkZWYgcmVxTWF0ZXJpYWxzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnJlcXVpcmVkTWF0ZXJpYWxzJ10udG9TdHJpbmcoKSlbMF1cbiAgICAvKlZhcmlhYmxlcyovXG4gICAgZGVmIHJlcU1hdExpc3QgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHJlcU1hdGVyaWFscylcbiAgICBkZWYgb2JqTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlXG4gICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXG4gICAgZm9yKG1hdCBpbiByZXFNYXRMaXN0KXtcbiAgICAgICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZCBnZXQgb2JqZWN0XG4gICAgICAgIGRlZiBjb21wb25lbnQ9bWF0LnRvU3RyaW5nKClcbiAgICAgICAgZGVmIGNvbXBvbmVudEtleSA9IGNvbXBvbmVudC5zdWJzdHJpbmcoY29tcG9uZW50Lmxhc3RJbmRleE9mKCcoJykrMSxjb21wb25lbnQubGFzdEluZGV4T2YoJyknKSlcbiAgICAgICAgZGVmIGNvbXBvbmVudE9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihjb21wb25lbnRLZXkpXG4gICAgICAgIFxuICAgICAgICBsb2cuZGVidWcgXCJjb21wb25lbnRPYmplY3Q6IFwiICsgY29tcG9uZW50T2JqZWN0XG4gICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5kZWxldGVkJ10udG9TdHJpbmcoKSkgPyBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmRlbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkgOiBudWxsXG4gICAgICAgIGRlZiBkZWwgPSBvYlRyaWFnZSA/IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKSA6IG51bGxcbiAgICAgICAgZGVsPSBkZWwgPyBkZWxbMF0uZ2V0VmFsdWUoKSA6IGZhbHNlXG4gICAgICAgIGxvZy5kZWJ1ZyBcImRlbGV0ZWQ6IFwiICsgZGVsXG4gICAgICAgIFxuICAgICAgICBpZighZGVsKXtcbiAgICAgICAgICAgIGRlZiBuZXdPYmpBdHRyaWJ1dGVzTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgZGVmIGkgPSAwXG4gICAgICAgICAgICBkZWYgb2JqZWN0VHlwZUNvbXBvbmVudCA9IG9iamVjdFR5cGVGYWNhZGUubG9hZE9iamVjdFR5cGVCZWFuKENPTVBPTkVOVCk7XG4gICAgICAgICAgICAvKiBDcmVhdGUgYSBuZXcgdW5zYXZlZCBvYmplY3QgYmVhbiAqL1xuICAgICAgICAgICAgZGVmIG5ld09iamVjdEJlYW4gPSBvYmplY3RUeXBlQ29tcG9uZW50LmNyZWF0ZU9iamVjdEJlYW4oKTtcbiAgICAgICAgICAgIC8qIFNldCB1cCB0aGUgYXR0cmlidXRlIGxpc3QgKi9cbiAgICAgICAgICAgIGRlZiBvYmplY3RBdHRyaWJ1dGVCZWFucyA9IG5ldyBBcnJheUxpc3QoKTtcbiAgICAgICAgICAgIC8qIFNldCB0aGUgbmFtZSBvZiB0aGUgQ29tcG9uZW50ICovXG4gICAgICAgICAgICAvKk5vbWUgQ29tcG9uZW50Ki9cbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5uYW1lJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBkZWYgY29tcE5hbWUgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgICAgIGNvbXBOYW1lPWNvbXBOYW1lWzBdLmdldFZhbHVlKClcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIm9iamVjdCBuYW1lOiBcIiArIGNvbXBOYW1lXG4gICAgICAgICAgICBkZWYgbmFtZU9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oQ09NUE9ORU5UX05BTUUpOyAvLyBUaGUgSUQgb2YgdGhlIG9iamVjdCB0eXBlIGF0dHJpYnV0ZSBcIk5hbWVcIlxuICAgICAgICAgICAgZGVmIG5hbWVPYmplY3RBdHRyaWJ1dGVCZWFuID0gbmV3T2JqZWN0QmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKG5hbWVPYmplY3RUeXBlQXR0cmlidXRlQmVhbik7IC8vIFRoaXMgaXMgdGhlIG5hbWUgb2JqZWN0IGF0dHJpYnV0ZSBmb3IgdGhlIG5ldyBvYmplY3RcbiAgICAgICAgICAgIGRlZiBuYW1lT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuID0gbmFtZU9iamVjdEF0dHJpYnV0ZUJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7IC8vVGhpcyBpcyB0aGUgYWN0dWFsIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGVcbiAgICAgICAgICAgIG5hbWVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4uc2V0VGV4dFZhbHVlU2hvcnQoY29tcE5hbWUpOyAvLyBTZXQgdGhlIG5hbWVcbiAgICAgICAgICAgIGRlZiB2YWx1ZXMgPSBuYW1lT2JqZWN0QXR0cmlidXRlQmVhbi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7IFxuICAgICAgICAgICAgdmFsdWVzLmFkZChuYW1lT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKTsgLy8gQWRkIHRoZSB2YWx1ZSB0byB0aGUgb2JqZWN0IGF0dHJpYnV0ZVxuICAgICAgICAgICAgbG9nLmRlYnVnIHZhbHVlc1xuICAgICAgICAgICAgbmFtZU9iamVjdEF0dHJpYnV0ZUJlYW4uc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyh2YWx1ZXMpOyBcbiAgICAgICAgICAgIG9iamVjdEF0dHJpYnV0ZUJlYW5zLmFkZChuYW1lT2JqZWN0QXR0cmlidXRlQmVhbik7XG4gICAgICAgICAgICAvKiBTZXQgdGhlIEhBUkRXQVJFX1JFRiBvZiB0aGUgbmV3IG9iaiAqL1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmhhcmR3YXJlUmVmJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBkZWYgaHcgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgICAgIGh3S2V5PWh3WzBdLmdldFZhbHVlKCkgICAgXG4gICAgICAgICAgICBkZWYgSHdSZWZPYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKENPTVBPTkVOVF9IQVJEV0FSRV9SRUYpOyAvLyBUaGUgSUQgZm9yIHRoZSByZWZlcmVuY2VkIG9iamVjdCB0eXBlXG4gICAgICAgICAgICBkZWYgSHdSZWZPYmplY3RBdHRyaWJ1dGVCZWFuID0gbmV3T2JqZWN0QmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKEh3UmVmT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4pOyBcbiAgICAgICAgICAgIGRlZiBId1JlZk9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbiA9IEh3UmVmT2JqZWN0QXR0cmlidXRlQmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTsgLy9UaGlzIGlzIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZVxuICAgICAgICAgICAgSHdSZWZPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4uc2V0UmVmZXJlbmNlZE9iamVjdEJlYW5JZChod0tleSk7IC8vIFNldCB0aGUgSURcbiAgICAgICAgICAgIHZhbHVlcyA9IEh3UmVmT2JqZWN0QXR0cmlidXRlQmVhbi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7IFxuICAgICAgICAgICAgdmFsdWVzLmFkZChId1JlZk9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbik7IC8vIEFkZCB0aGUgdmFsdWUgdG8gdGhlIG9iamVjdCBhdHRyaWJ1dGVcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyB2YWx1ZXNcbiAgICAgICAgICAgIEh3UmVmT2JqZWN0QXR0cmlidXRlQmVhbi5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKHZhbHVlcyk7IFxuICAgICAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKEh3UmVmT2JqZWN0QXR0cmlidXRlQmVhbik7IC8vIEFkZCB0byB0aGUgbGlzdCBvZiBvYmplY3QgYXR0cmlidXRlc1xuICAgICAgICAgICAgLyogU2V0IHRoZSBDT01QT05FTlRfU0FQIGZsYWcgb2YgdGhlIEhhcmR3YXJlICovXG4gICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnNhcCddLnRvU3RyaW5nKCkpICE9IG51bGwpe1xuICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5zYXAnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICBkZWYgc2FwID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgc2FwPXNhcFswXS5nZXRWYWx1ZSgpXG4gICAgICAgICAgICAgICAgZGVmIGNvbXBTYXBPYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKENPTVBPTkVOVF9TQVApOyAvLyBUaGUgSUQgb2YgdGhlIG9iamVjdCB0eXBlIGF0dHJpYnV0ZSBcIkRJU0FCTEVEXCJcbiAgICAgICAgICAgICAgICBkZWYgY29tcFNhcE9iamVjdEF0dHJpYnV0ZUJlYW4gPSBuZXdPYmplY3RCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcFNhcE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKTsgLy8gVGhpcyBpcyB0aGUgbmFtZSBvYmplY3QgYXR0cmlidXRlIGZvciB0aGUgbmV3IG9iamVjdFxuICAgICAgICAgICAgICAgIGRlZiBjb21wU2FwT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuID0gY29tcFNhcE9iamVjdEF0dHJpYnV0ZUJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7IC8vIFRoaXMgaXMgdGhlIGFjdHVhbCB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlXG4gICAgICAgICAgICAgICAgY29tcFNhcE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbi5zZXRCb29sZWFuVmFsdWUoc2FwKTsgLy8gU2V0IHRoZSBuYW1lXG4gICAgICAgICAgICAgICAgdmFsdWVzID0gY29tcFNhcE9iamVjdEF0dHJpYnV0ZUJlYW4uZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpOyBcbiAgICAgICAgICAgICAgICB2YWx1ZXMuYWRkKGNvbXBTYXBPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4pOyAvLyBBZGQgdGhlIHZhbHVlIHRvIHRoZSBvYmplY3QgYXR0cmlidXRlXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIHZhbHVlc1xuICAgICAgICAgICAgICAgIGNvbXBTYXBPYmplY3RBdHRyaWJ1dGVCZWFuLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWVzKTsgXG4gICAgICAgICAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKGNvbXBTYXBPYmplY3RBdHRyaWJ1dGVCZWFuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qIFNldCB0aGUgREVMRVRFRCBmbGFnIG9mIHRoZSBIYXJkd2FyZSAqL1xuICAgICAgICAgICAgZGVmIGRlbGV0ZWQgXG4gICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmRlbGV0ZWQnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmRlbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICBkZWxldGVkID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgZGVsZXRlZD1kZWxldGVkWzBdLmdldFZhbHVlKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKGRlbGV0ZWQhPW51bGwpe1xuICAgICAgICAgICAgICAgIGRlZiBkZWxldGVkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihDT01QT05FTlRfREVMRVRFRCk7IC8vIFRoZSBJRCBvZiB0aGUgb2JqZWN0IHR5cGUgYXR0cmlidXRlIFwiRElTQUJMRURcIlxuICAgICAgICAgICAgICAgIGRlZiBkZWxldGVkT2JqZWN0QXR0cmlidXRlQmVhbiA9IG5ld09iamVjdEJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihkZWxldGVkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4pOyAvLyBUaGlzIGlzIHRoZSBuYW1lIG9iamVjdCBhdHRyaWJ1dGUgZm9yIHRoZSBuZXcgb2JqZWN0XG4gICAgICAgICAgICAgICAgZGVmIGRlbGV0ZWRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4gPSBkZWxldGVkT2JqZWN0QXR0cmlidXRlQmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTsgLy8gVGhpcyBpcyB0aGUgYWN0dWFsIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICBkZWxldGVkT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuLnNldEJvb2xlYW5WYWx1ZShkZWxldGVkKTsgLy8gU2V0IHRoZSBuYW1lXG4gICAgICAgICAgICAgICAgdmFsdWVzID0gZGVsZXRlZE9iamVjdEF0dHJpYnV0ZUJlYW4uZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpOyBcbiAgICAgICAgICAgICAgICB2YWx1ZXMuYWRkKGRlbGV0ZWRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4pOyAvLyBBZGQgdGhlIHZhbHVlIHRvIHRoZSBvYmplY3QgYXR0cmlidXRlXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIHZhbHVlc1xuICAgICAgICAgICAgICAgIGRlbGV0ZWRPYmplY3RBdHRyaWJ1dGVCZWFuLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWVzKTsgXG4gICAgICAgICAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKGRlbGV0ZWRPYmplY3RBdHRyaWJ1dGVCZWFuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qTm9tZSBDT01QT05FTlRfUVVBTlRJVFkqL1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnF1YW50aXR5J10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBkZWYgcXRhID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICBxdGE9cXRhWzBdLmdldFZhbHVlKClcbiAgICAgICAgICAgIGRlZiBxdGFPYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKENPTVBPTkVOVF9RVUFOVElUWSk7IC8vIFRoZSBJRCBvZiB0aGUgb2JqZWN0IHR5cGUgYXR0cmlidXRlIFwiRElTQUJMRURcIlxuICAgICAgICAgICAgZGVmIHF0YU9iamVjdEF0dHJpYnV0ZUJlYW4gPSBuZXdPYmplY3RCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW4ocXRhT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4pOyAvLyBUaGlzIGlzIHRoZSBuYW1lIG9iamVjdCBhdHRyaWJ1dGUgZm9yIHRoZSBuZXcgb2JqZWN0XG4gICAgICAgICAgICBkZWYgcXRhT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuID0gcXRhT2JqZWN0QXR0cmlidXRlQmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTsgLy8gVGhpcyBpcyB0aGUgYWN0dWFsIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGVcbiAgICAgICAgICAgIHF0YU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbi5zZXREb3VibGVWYWx1ZShxdGEpOyAvLyBTZXQgdGhlIG5hbWVcbiAgICAgICAgICAgIHZhbHVlcyA9IHF0YU9iamVjdEF0dHJpYnV0ZUJlYW4uZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpOyBcbiAgICAgICAgICAgIHZhbHVlcy5hZGQocXRhT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKTsgLy8gQWRkIHRoZSB2YWx1ZSB0byB0aGUgb2JqZWN0IGF0dHJpYnV0ZVxuICAgICAgICAgICAgbG9nLmRlYnVnIHZhbHVlc1xuICAgICAgICAgICAgcXRhT2JqZWN0QXR0cmlidXRlQmVhbi5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKHZhbHVlcyk7IFxuICAgICAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKHF0YU9iamVjdEF0dHJpYnV0ZUJlYW4pO1xuICAgICAgICAgICAgLypOb21lIENPTVBPTkVOVF9OT1RFKi9cbiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQubm90ZSddLnRvU3RyaW5nKCkpICE9IG51bGwpe1xuICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5ub3RlJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgZGVmIG5vdGUgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgICAgICAgICBub3RlPW5vdGVbMF0uZ2V0VmFsdWUoKVxuICAgICAgICAgICAgICAgIGRlZiBub3RlT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihDT01QT05FTlRfTk9URSk7IC8vIFRoZSBJRCBvZiB0aGUgb2JqZWN0IHR5cGUgYXR0cmlidXRlIFwiRElTQUJMRURcIlxuICAgICAgICAgICAgICAgIGRlZiBub3RlT2JqZWN0QXR0cmlidXRlQmVhbiA9IG5ld09iamVjdEJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihub3RlT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4pOyAvLyBUaGlzIGlzIHRoZSBuYW1lIG9iamVjdCBhdHRyaWJ1dGUgZm9yIHRoZSBuZXcgb2JqZWN0XG4gICAgICAgICAgICAgICAgZGVmIG5vdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4gPSBub3RlT2JqZWN0QXR0cmlidXRlQmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTsgLy8gVGhpcyBpcyB0aGUgYWN0dWFsIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICBub3RlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuLnNldFRleHRWYWx1ZShub3RlKVxuICAgICAgICAgICAgICAgIHZhbHVlcyA9IG5vdGVPYmplY3RBdHRyaWJ1dGVCZWFuLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTsgXG4gICAgICAgICAgICAgICAgdmFsdWVzLmFkZChub3RlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKTsgLy8gQWRkIHRoZSB2YWx1ZSB0byB0aGUgb2JqZWN0IGF0dHJpYnV0ZVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyB2YWx1ZXNcbiAgICAgICAgICAgICAgICBub3RlT2JqZWN0QXR0cmlidXRlQmVhbi5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKHZhbHVlcylcbiAgICAgICAgICAgICAgICBvYmplY3RBdHRyaWJ1dGVCZWFucy5hZGQobm90ZU9iamVjdEF0dHJpYnV0ZUJlYW4pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKk5vbWUgQ09NUE9ORU5UX1RLVF9DT01QQU5ZKi9cbiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQudGt0Q29tcGFueSddLnRvU3RyaW5nKCkpICE9IG51bGwpe1xuICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50a3RDb21wYW55J10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgZGVmIHRrdENvbXBhbnkgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgICAgICAgICB0a3RDb21wYW55PXRrdENvbXBhbnlbMF0uZ2V0VmFsdWUoKVxuICAgICAgICAgICAgICAgIGRlZiB0a3RDb21wYW55T2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihDT01QT05FTlRfVEtUX0NPTVBBTlkpOyAvLyBUaGUgSUQgb2YgdGhlIG9iamVjdCB0eXBlIGF0dHJpYnV0ZSBcIkRJU0FCTEVEXCJcbiAgICAgICAgICAgICAgICBkZWYgdGt0Q29tcGFueU9iamVjdEF0dHJpYnV0ZUJlYW4gPSBuZXdPYmplY3RCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW4odGt0Q29tcGFueU9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKTsgLy8gVGhpcyBpcyB0aGUgbmFtZSBvYmplY3QgYXR0cmlidXRlIGZvciB0aGUgbmV3IG9iamVjdFxuICAgICAgICAgICAgICAgIGRlZiB0a3RDb21wYW55T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuID0gdGt0Q29tcGFueU9iamVjdEF0dHJpYnV0ZUJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7IC8vIFRoaXMgaXMgdGhlIGFjdHVhbCB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlXG4gICAgICAgICAgICAgICAgdGt0Q29tcGFueU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbi5zZXRUZXh0VmFsdWUodGt0Q29tcGFueSlcbiAgICAgICAgICAgICAgICB2YWx1ZXMgPSB0a3RDb21wYW55T2JqZWN0QXR0cmlidXRlQmVhbi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7IFxuICAgICAgICAgICAgICAgIHZhbHVlcy5hZGQodGt0Q29tcGFueU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbik7IC8vIEFkZCB0aGUgdmFsdWUgdG8gdGhlIG9iamVjdCBhdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgdmFsdWVzXG4gICAgICAgICAgICAgICAgdGt0Q29tcGFueU9iamVjdEF0dHJpYnV0ZUJlYW4uc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyh2YWx1ZXMpXG4gICAgICAgICAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKHRrdENvbXBhbnlPYmplY3RBdHRyaWJ1dGVCZWFuKSAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAvKk5vbWUgQ09NUE9ORU5UX1FVT1RFX1JFUVVJUkVEKi9cbiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQucXVvdGVSZXF1aXJlZCddLnRvU3RyaW5nKCkpICE9IG51bGwpe1xuICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5xdW90ZVJlcXVpcmVkJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgZGVmIHF1b3RlUmVxID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgcXVvdGVSZXE9cXVvdGVSZXFbMF0uZ2V0VmFsdWUoKVxuICAgICAgICAgICAgICAgIGRlZiBxdW90ZVJlcU9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oQ09NUE9ORU5UX1FVT1RFX1JFUVVJUkVEKTsgLy8gVGhlIElEIG9mIHRoZSBvYmplY3QgdHlwZSBhdHRyaWJ1dGUgXCJESVNBQkxFRFwiXG4gICAgICAgICAgICAgICAgZGVmIHF1b3RlUmVxT2JqZWN0QXR0cmlidXRlQmVhbiA9IG5ld09iamVjdEJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihxdW90ZVJlcU9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKTsgLy8gVGhpcyBpcyB0aGUgbmFtZSBvYmplY3QgYXR0cmlidXRlIGZvciB0aGUgbmV3IG9iamVjdFxuICAgICAgICAgICAgICAgIGRlZiBxdW90ZVJlcU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbiA9IHF1b3RlUmVxT2JqZWN0QXR0cmlidXRlQmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTsgLy8gVGhpcyBpcyB0aGUgYWN0dWFsIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICBxdW90ZVJlcU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbi5zZXRCb29sZWFuVmFsdWUocXVvdGVSZXEpOyAvLyBTZXQgdGhlIG5hbWVcbiAgICAgICAgICAgICAgICB2YWx1ZXMgPSBxdW90ZVJlcU9iamVjdEF0dHJpYnV0ZUJlYW4uZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpOyBcbiAgICAgICAgICAgICAgICB2YWx1ZXMuYWRkKHF1b3RlUmVxT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKTsgLy8gQWRkIHRoZSB2YWx1ZSB0byB0aGUgb2JqZWN0IGF0dHJpYnV0ZVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyB2YWx1ZXNcbiAgICAgICAgICAgICAgICBxdW90ZVJlcU9iamVjdEF0dHJpYnV0ZUJlYW4uc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyh2YWx1ZXMpOyBcbiAgICAgICAgICAgICAgICBvYmplY3RBdHRyaWJ1dGVCZWFucy5hZGQocXVvdGVSZXFPYmplY3RBdHRyaWJ1dGVCZWFuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qTm9tZSBBQ0NPVU5USU5HX0lORElDQVRPUiovXG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuYWNjb3V0aW5nSW5kaWNhdG9yJ10udG9TdHJpbmcoKSkgIT0gbnVsbCA/IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuYWNjb3V0aW5nSW5kaWNhdG9yJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpIDogbnVsbFxuICAgICAgICAgICAgaWYob2JUcmlhZ2Upe1xuICAgICAgICAgICAgICAgIGRlZiBhY2NvdW50aW5nSW5kaWNhdG9yID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgYWNjb3VudGluZ0luZGljYXRvcj1hY2NvdW50aW5nSW5kaWNhdG9yWzBdLmdldFZhbHVlKClcbiAgICAgICAgICAgICAgICBkZWYgYWNjb3VudGluZ0luZGljYXRvck9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oQ09NUE9ORU5UX0FDQ09VTlRJTkdfSU5ESUNBVE9SKTsgLy8gVGhlIElEIG9mIHRoZSBvYmplY3QgdHlwZSBhdHRyaWJ1dGUgXCJESVNBQkxFRFwiXG4gICAgICAgICAgICAgICAgZGVmIGFjY291bnRpbmdJbmRpY2F0b3JPYmplY3RBdHRyaWJ1dGVCZWFuID0gbmV3T2JqZWN0QmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKGFjY291bnRpbmdJbmRpY2F0b3JPYmplY3RUeXBlQXR0cmlidXRlQmVhbik7IC8vIFRoaXMgaXMgdGhlIG5hbWUgb2JqZWN0IGF0dHJpYnV0ZSBmb3IgdGhlIG5ldyBvYmplY3RcbiAgICAgICAgICAgICAgICBkZWYgYWNjb3VudGluZ0luZGljYXRvck9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbiA9IGFjY291bnRpbmdJbmRpY2F0b3JPYmplY3RBdHRyaWJ1dGVCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpOyAvLyBUaGlzIGlzIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZVxuICAgICAgICAgICAgICAgIGFjY291bnRpbmdJbmRpY2F0b3JPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4uc2V0VGV4dFZhbHVlKGFjY291bnRpbmdJbmRpY2F0b3IpOyAvLyBTZXQgdGhlIG5hbWVcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHZhbHVlcyA9IGFjY291bnRpbmdJbmRpY2F0b3JPYmplY3RBdHRyaWJ1dGVCZWFuLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTsgXG4gICAgICAgICAgICAgICAgdmFsdWVzLmFkZChhY2NvdW50aW5nSW5kaWNhdG9yT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKTsgLy8gQWRkIHRoZSB2YWx1ZSB0byB0aGUgb2JqZWN0IGF0dHJpYnV0ZVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyB2YWx1ZXNcbiAgICAgICAgICAgICAgICBhY2NvdW50aW5nSW5kaWNhdG9yT2JqZWN0QXR0cmlidXRlQmVhbi5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKHZhbHVlcyk7IFxuICAgICAgICAgICAgICAgIG9iamVjdEF0dHJpYnV0ZUJlYW5zLmFkZChhY2NvdW50aW5nSW5kaWNhdG9yT2JqZWN0QXR0cmlidXRlQmVhbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8qTm9tZSBDT01QT05FTlRfTUFURVJJQUxfUkVGKi9cbiAgICAgICAgICAgIGRlZiBtYXRlcmlhbFNBUCBcbiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQubWF0ZXJpYWxSZWYnXS50b1N0cmluZygpKSAhPSBudWxsKXtcbiAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQubWF0ZXJpYWxSZWYnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICBkZWYgbWF0ZXJpYWwgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgICAgICAgICBtYXRlcmlhbD1tYXRlcmlhbFswXS5nZXRWYWx1ZSgpXG4gICAgICAgICAgICAgICAgZGVmIG1hdFJlZk9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oQ09NUE9ORU5UX01BVEVSSUFMX1JFRik7IC8vIFRoZSBJRCBmb3IgdGhlIHJlZmVyZW5jZWQgb2JqZWN0IHR5cGVcbiAgICAgICAgICAgICAgICBtYXRSZWZPYmplY3RBdHRyaWJ1dGVCZWFuID0gbmV3T2JqZWN0QmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKG1hdFJlZk9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKTsgXG4gICAgICAgICAgICAgICAgbWF0UmVmT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuID0gbWF0UmVmT2JqZWN0QXR0cmlidXRlQmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTsgLy8gVGhpcyBpcyB0aGUgYWN0dWFsIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICBtYXRSZWZPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4uc2V0UmVmZXJlbmNlZE9iamVjdEJlYW5JZChtYXRlcmlhbCk7IC8vIFNldCB0aGUgSURcbiAgICAgICAgICAgICAgICB2YWx1ZXMgPSBtYXRSZWZPYmplY3RBdHRyaWJ1dGVCZWFuLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTsgXG4gICAgICAgICAgICAgICAgdmFsdWVzLmFkZChtYXRSZWZPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4pOyAvLyBBZGQgdGhlIHZhbHVlIHRvIHRoZSBvYmplY3QgYXR0cmlidXRlXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIHZhbHVlc1xuICAgICAgICAgICAgICAgIG1hdFJlZk9iamVjdEF0dHJpYnV0ZUJlYW4uc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyh2YWx1ZXMpOyBcbiAgICAgICAgICAgICAgICBvYmplY3RBdHRyaWJ1dGVCZWFucy5hZGQobWF0UmVmT2JqZWN0QXR0cmlidXRlQmVhbik7IC8vIEFkZCB0byB0aGUgbGlzdCBvZiBvYmplY3QgYXR0cmlidXRlc1xuICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKG1hdGVyaWFsIT1udWxsKXtcbiAgICAgICAgICAgICAgICAgICAgLypNQVRFUklBTCAtIFNBUCovXG4gICAgICAgICAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihtYXRlcmlhbC50b0ludGVnZXIoKSwgcHJvcGVydGllc1snaW9iai5tYXRlcmlhbC5zYXAnXS50b1N0cmluZygpKSAhPSBudWxsKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG1hdGVyaWFsLnRvSW50ZWdlcigpLCBwcm9wZXJ0aWVzWydpb2JqLm1hdGVyaWFsLnNhcCddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWxTQVAgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsU0FQID0gbWF0ZXJpYWxTQVBbMF0uZ2V0VmFsdWUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwibWF0ZXJpYWxTQVA6IFwiICsgbWF0ZXJpYWxTQVBcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbFNBUCA9IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKk5vbWUgQ09NUE9ORU5UX1NVUFBMSUVEX0JZX0ZBQUMqL1xuICAgICAgICAgICAgZGVmIHN1cHBsaWVkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihDT01QT05FTlRfU1VQUExJRURfQllfRkFBQyk7IC8vIFRoZSBJRCBvZiB0aGUgb2JqZWN0IHR5cGUgYXR0cmlidXRlIFwiRElTQUJMRURcIlxuICAgICAgICAgICAgZGVmIHN1cHBsaWVkT2JqZWN0QXR0cmlidXRlQmVhbiA9IG5ld09iamVjdEJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihzdXBwbGllZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKTsgLy8gVGhpcyBpcyB0aGUgbmFtZSBvYmplY3QgYXR0cmlidXRlIGZvciB0aGUgbmV3IG9iamVjdFxuICAgICAgICAgICAgZGVmIHN1cHBsaWVkT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuID0gc3VwcGxpZWRPYmplY3RBdHRyaWJ1dGVCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpOyAvLyBUaGlzIGlzIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZVxuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIFwiU1VQUExJRURfQllfRkFBQ1wiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIGRlZiBzdXBwbGllZCA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuICAgICAgICAgICAgc3VwcGxpZWQ9c3VwcGxpZWRbMF0uZ2V0VmFsdWUoKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwic3VwcGxpZWQ6IFwiICsgc3VwcGxpZWRcbiAgICAgICAgICAgIGlmKHN1cHBsaWVkID09IG51bGwgJiYgbWF0ZXJpYWxTQVA9PXRydWUpe1xuICAgICAgICAgICAgICAgIHN1cHBsaWVkT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuLnNldFRleHRWYWx1ZShcIlllc1wiKTsgLy8gU2V0IHRoZSBuYW1lXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihzdXBwbGllZCA9PSBudWxsICYmIG1hdGVyaWFsU0FQPT1mYWxzZSl7XG4gICAgICAgICAgICAgICAgc3VwcGxpZWRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4uc2V0VGV4dFZhbHVlKFwiTm9cIik7IC8vIFNldCB0aGUgbmFtZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoc3VwcGxpZWQgIT0gbnVsbCAmJiBzdXBwbGllZD09XCJZZXNcIil7XG4gICAgICAgICAgICAgICAgc3VwcGxpZWRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4uc2V0VGV4dFZhbHVlKFwiWWVzXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoc3VwcGxpZWQgIT0gbnVsbCAmJiBzdXBwbGllZD09XCJOb1wiKXtcbiAgICAgICAgICAgICAgICBzdXBwbGllZE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbi5zZXRUZXh0VmFsdWUoXCJOb1wiKTtcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJzZXQgbm9cIlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YWx1ZXMgPSBzdXBwbGllZE9iamVjdEF0dHJpYnV0ZUJlYW4uZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpOyBcbiAgICAgICAgICAgIHZhbHVlcy5hZGQoc3VwcGxpZWRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4pOyAvLyBBZGQgdGhlIHZhbHVlIHRvIHRoZSBvYmplY3QgYXR0cmlidXRlXG4gICAgICAgICAgICBsb2cuZGVidWcgdmFsdWVzXG4gICAgICAgICAgICBzdXBwbGllZE9iamVjdEF0dHJpYnV0ZUJlYW4uc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyh2YWx1ZXMpOyBcbiAgICAgICAgICAgIG9iamVjdEF0dHJpYnV0ZUJlYW5zLmFkZChzdXBwbGllZE9iamVjdEF0dHJpYnV0ZUJlYW4pO1xuICAgICAgICAgICAgLypOb21lIENPTVBPTkVOVF9GUk9NX1FVT1RFX1RLVCovXG4gICAgICAgICAgICAvKjA4LjAzLjIwMjMgQUYgZGEgbm9uIHNldHRhcmUgc3VnbGkgb2dnZXR0aSBDb21wb25lbnQgbGVnYXRpIGFsIGNhbXBvIE9QX1FVT1RFX01BVEVSSUFMUyAtIFx1MDBlOCB1biBhdHRyaWJ1dG8gc2V0dGF0byBzb2xvIHN1Z2xpIG9nZ2V0dGkgQ29tcG9uZW50IGxlZ2F0aSBhbCBjYW1wbyBPUF9SRVBMQUNFRF9NQVRFUklBTFMgLSBxdWFuZG8gZ2VuZXJhdGkgaW4gY29waWEgZGEgb2dnZXR0aSBpbiBPUF9RVU9URV9NQVRFUklBTFMqL1xuIC8vICAgICAgICAgICAgZGVmIGZyb21RdW90ZU9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oQ09NUE9ORU5UX0ZST01fUVVPVEVfVEtUKTsgLy8gVGhlIElEIG9mIHRoZSBvYmplY3QgdHlwZSBhdHRyaWJ1dGUgXCJESVNBQkxFRFwiXG4gLy8gICAgICAgICAgICBkZWYgZnJvbVF1b3RlT2JqZWN0QXR0cmlidXRlQmVhbiA9IG5ld09iamVjdEJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihmcm9tUXVvdGVPYmplY3RUeXBlQXR0cmlidXRlQmVhbik7IC8vIFRoaXMgaXMgdGhlIG5hbWUgb2JqZWN0IGF0dHJpYnV0ZSBmb3IgdGhlIG5ldyBvYmplY3RcbiAvLyAgICAgICAgICAgIGRlZiBmcm9tUXVvdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4gPSBmcm9tUXVvdGVPYmplY3RBdHRyaWJ1dGVCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpOyAvLyBUaGlzIGlzIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZVxuIC8vICAgICAgICAgICAgaWYobWF0ZXJpYWxTQVA9PXRydWUpe1xuIC8vICAgICAgICAgICAgICAgIGZyb21RdW90ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbi5zZXRCb29sZWFuVmFsdWUodHJ1ZSk7IC8vIFNldCB0aGUgbmFtZVxuIC8vICAgICAgICAgICAgfWVsc2V7XG4gLy8gICAgICAgICAgICAgICAgZnJvbVF1b3RlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuLnNldEJvb2xlYW5WYWx1ZShmYWxzZSk7IC8vIFNldCB0aGUgbmFtZVxuIC8vICAgICAgICAgICAgfVxuIC8vICAgICAgICAgICAgdmFsdWVzID0gZnJvbVF1b3RlT2JqZWN0QXR0cmlidXRlQmVhbi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7IFxuLy8gICAgICAgICAgICB2YWx1ZXMuYWRkKGZyb21RdW90ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbik7IC8vIEFkZCB0aGUgdmFsdWUgdG8gdGhlIG9iamVjdCBhdHRyaWJ1dGVcbiAvLyAgICAgICAgICAgIGxvZy5kZWJ1ZyB2YWx1ZXNcbiAvLyAgICAgICAgICAgIGZyb21RdW90ZU9iamVjdEF0dHJpYnV0ZUJlYW4uc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyh2YWx1ZXMpOyBcbi8vICAgICAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKGZyb21RdW90ZU9iamVjdEF0dHJpYnV0ZUJlYW4pO1xuICAgICAgICAgICAgbG9nLmRlYnVnIFwib2JqZWN0QXR0cmlidXRlQmVhbnM6IFwiICsgb2JqZWN0QXR0cmlidXRlQmVhbnNcbiAgICAgICAgICAgIC8qIFNldCBhbGwgb2JqZWN0IGF0dHJpYnV0ZXMgdG8gdGhlIG9iamVjdCAqL1xuICAgICAgICAgICAgbmV3T2JqZWN0QmVhbi5zZXRPYmplY3RBdHRyaWJ1dGVCZWFucyhvYmplY3RBdHRyaWJ1dGVCZWFucyk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIG5ld09iamVjdEJlYW4gPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RCZWFuKG5ld09iamVjdEJlYW4pO1xuICAgICAgICAgICAgICAgIG9iakxpc3QuYWRkKG5ld09iamVjdEJlYW4pXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnKFwibmV3T2JqZWN0QmVhbjogXCIgKyBuZXdPYmplY3RCZWFuKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHtcbiAgICAgICAgICAgICAgICBsb2cud2FybihcIkNvdWxkIG5vdCBjcmVhdGUgaXNzdWUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOlwiICsgdmllLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKjEzLjAyLjIwMjMgQUYgLSBhbCB0ZXJtaW5lIGRlbGxhIGNyZWF6aW9uZSBkZWwgbnVvdm8gb2dnZXR0byBsbyBhZ2dpb3JubyBpbXBvc3RhbmRvIGxhIHN1YSBrZXkgbmVsbCdhdHRyaWJ1dG8gUVVPVEVfT0JKX0lEKi9cbiAgICAgICAgICAgIGRlZiBvYmpUb1VwZGF0ZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihuZXdPYmplY3RCZWFuLmdldElkKCkpO1xuICAgICAgICAgICAgLyogQ3JlYXRlIGEgbmV3IHVuc2F2ZWQgb2JqZWN0IGJlYW4gKi9cbiAgICAgICAgICAgIGRlZiBxdW90ZU9iaklkYXR0cmliVHlwZSA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnF1b3RlT2JqSWQuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpKTsgXG4gICAgICAgICAgICBkZWYgcXVvdGVPYmpJZG5ld0F0dHJpYiA9IG9ialRvVXBkYXRlLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW4ocXVvdGVPYmpJZGF0dHJpYlR5cGUpO1xuICAgICAgICAgICAgZGVmIHF1b3RlT2JqSWRuZXdBdHRyaWJWYWx1ZSA9IHF1b3RlT2JqSWRuZXdBdHRyaWIuY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7XG4gICAgICAgICAgICBxdW90ZU9iaklkbmV3QXR0cmliVmFsdWUuc2V0VmFsdWUocXVvdGVPYmpJZGF0dHJpYlR5cGUsIG5ld09iamVjdEJlYW4uZ2V0SWQoKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGRlZiBxdW90ZU9iaklkYXR0cmliVmFsdWVzID0gcXVvdGVPYmpJZG5ld0F0dHJpYi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7XG4gICAgICAgICAgICBxdW90ZU9iaklkYXR0cmliVmFsdWVzLmFkZChxdW90ZU9iaklkbmV3QXR0cmliVmFsdWUpO1xuICAgICAgICAgICAgcXVvdGVPYmpJZG5ld0F0dHJpYi5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKHF1b3RlT2JqSWRhdHRyaWJWYWx1ZXMpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBxdW90ZU9iaklkbmV3QXR0cmliID0gb2JqZWN0RmFjYWRlLnN0b3JlT2JqZWN0QXR0cmlidXRlQmVhbihxdW90ZU9iaklkbmV3QXR0cmliKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHtcbiAgICAgICAgICAgICAgICBsb2cud2FybihcIlVuYWJsZSB0byBzYXZlIGNoYW5nZXMuIEV4aXRpbmcuXCIpO1xuICAgICAgICAgICAgICAgIGxvZy53YXJuKHZpZS5nZXRNZXNzYWdlKCkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSAgICAgICAgXG4gICAgfVxuICAgIG1pLnNldEN1c3RvbUZpZWxkVmFsdWUocXVvdGVNYXRlcmlhbHMsIG9iakxpc3QpO1xuICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsZmFsc2UpO1xuICAgIFxuICAgIC8vU2V0IE9QQUFfT0ZGRVJfVEtUPVllcyBvbiBqdXN0IGNyZWF0ZWQgbGlua2VkSXNzdWVcbiAgIFxuICAgIGRlZiBmaWVsZENvbmZpZyA9IG9mZmVyRnJvbVJlcGFpci5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSlcbiAgICAvL2xvZy53YXJuIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcbiAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICBsb2cuZGVidWcgXCJ0cmFuc2l0aW9uIGZpZWxkIHZhbHVlOiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VycmVudFVzZXJUcmFuc2l0aW9uKVxuICAgIC8vbG9nLmRlYnVnIFwiY3VycmVudFVzZXJUcmFuc2l0aW9uOiBcIiArIGN1cnJlbnRVc2VyVHJhbnNpdGlvblxuICAgIHBtSXNzdWVGaWVsZC51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbUlzc3VlRmllbGQpLCBpc3N1ZS5rZXkudG9TdHJpbmcoKSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcbiAgICBvZmZlckZyb21SZXBhaXIudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUob2ZmZXJJc3N1ZUJvb2xGaWVsZCksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG4gICAgXG5cbiAgICBmaWVsZENvbmZpZyA9IG9mZmVySXNzdWVCb29sRmllbGQuZ2V0UmVsZXZhbnRDb25maWcobGlua2VkSXNzdWUpXG4gICAgLy9sb2cud2FybiBcImZpZWxkQ29uZmlnOiBcIiArIGZpZWxkQ29uZmlnXG4gICAgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICBvZmZlcklzc3VlQm9vbEZpZWxkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG9mZmVySXNzdWVCb29sRmllbGQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuICAgIFxuICAgIGRlZiB1c2VyVHJhbnNpdGlvbiA9IHVzZXJNYW5hZ2VyLmdldFVzZXJCeU5hbWUoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXJyZW50VXNlclRyYW5zaXRpb24pLnRvU3RyaW5nKCkpXG5cdGxvZy5kZWJ1ZyBcInVzZXJUcmFuc2l0aW9uOiBcIiArIHVzZXJUcmFuc2l0aW9uXG4gICAgaWYgKHVzZXJUcmFuc2l0aW9uICE9IG51bGwgJiYgKGdyb3VwTWFuYWdlci5nZXRVc2Vyc0luR3JvdXAoc3VwcGxpZXJBZG0pLmNvbnRhaW5zKHVzZXJUcmFuc2l0aW9uKSB8fCBncm91cE1hbmFnZXIuZ2V0VXNlcnNJbkdyb3VwKHN1cHBsaWVyVGVjaCkuY29udGFpbnModXNlclRyYW5zaXRpb24pKSkge1xuICAgICAgICAvLyBUcmFuc2l0aW9uIGV4ZWN1dGVkIGJ5IGV4dGVybmFsIHVzZXIgLS0+IHRvIGJlIGFkZGVkIGFsc28gaW50ZXJuYWwgdGVjaHMgcm9sZSBncm91cHNcbiAgICAgICAgLy8gRW1haWwgaGFzIG5vdCB0byBiZSBzZW50XG4gICAgICAgIC8vIFNOIHdpbGwgYmUgY3JlYXRlZCBhcyBzb29uIGFzIHRoZSBxdW90YXRpb24gaGFzIGJlZW4gY29uZmlybWVkIC0gdG8gYmUgY2hlY2tlZCB3aGVuIHRvIGNyZWF0ZSBTTiBpZiBubyBxdW90YXRpb24gZnJvbSBzdXBwbGllciBpcyBuZWVkZWQgLSB3aGVuIHRoZSBxdW90YXRpb24gaGFzIGJlZW4gc2VudCB0byB0aGUgY3VzdG9tZXI/XG4gICAgICAgIGxvZy5kZWJ1ZyBcImluIHV0ZW50ZSBzdXBwbGllclwiXG4gICAgICAgIHRyYW5zaXRpb25DaGVjay51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuICAgICAgICBvZmZlckZyb21SZXBhaXIudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUob2ZmZXJGcm9tUmVwYWlyKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcblx0fVxuICAgIFxuICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTtcbiAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGxpbmtlZElzc3VlKSAgICBcbiAgICBcbiAgICBvZmZlcklzc3VlRmllbGQudXBkYXRlVmFsdWUobnVsbCwgaXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUob2ZmZXJJc3N1ZUZpZWxkKSwgbGlua2VkSXNzdWUua2V5LnRvU3RyaW5nKCkpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG4gICAgXG4gICAgaWYgKGRlc3RTdGF0dXNPYmplY3QubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5vcGVuJ10udG9TdHJpbmcoKSkge1xuICAgICAgICAvLyBQcmVwYXJlIG91ciBpbnB1dCBmb3IgdGhlIHRyYW5zaXRpb25cbiAgICAgICAgZGVmIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKClcbiAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7XG4gICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2sodHJ1ZSlcbiAgICAgICAgfVxuICAgICAgICAvLyBWYWxpZGF0ZSB0cmFuc2l0aW9uaW5nIHRoZSBsaW5rZWQgaXNzdWUgdG8gXCJTaWducyBOZWVkZWRcIlxuICAgICAgICBkZWYgdmFsaWRhdGlvblJlc3VsdCA9IGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIDIxMjEsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKVxuICAgICAgICBpZiAodmFsaWRhdGlvblJlc3VsdC5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIHZhbGlkYXRpb25SZXN1bHQpXG4gICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcoXCJGYWlsZWQgdG8gdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn1cIilcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyhcIlRyYW5zYXppb25lIGZhdHRhXCIpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsb2cuZGVidWcoXCJDb3VsZCBub3QgdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke3ZhbGlkYXRpb25SZXN1bHQuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICB9XG4gICAgfVxuICAgIFxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.33.0</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="uuid">5a3e276c-208b-4dd3-b234-0ee4c8543081</arg>
                  <arg name="fieldValue"></arg>
                  <arg name="preconditionMode-textValue">DISCARD</arg>
                  <arg name="fieldsList">customfield_23922</arg>
                </function>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.43.0</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="uuid">c7a5a898-34e6-4ea9-8eac-1f99ac5d1d27</arg>
                  <arg name="fieldValue">3_QUOTATION</arg>
                  <arg name="preconditionMode-textValue">AND</arg>
                  <arg name="fieldsList">customfield_26601</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">00edbe12-4a7a-49dc-b5c0-c3f556043537</arg>
                  <arg name="FIELD_NOTES">YCFgQ2xlYXIgY2FjaGU=</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG4vKiBSRVNUIEFQSSBwZXIgR2VuZXJhemlvbmUgQWxsZWdhdG8gUmFwcG9ydG8gZGkgSW50ZXJ2ZW50byAqL1xucmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuLypTY3JpcHQgVmFyaWFibGVzKi9cbi8vUGVyIHRlc3QgZGEgY29uc29sZVxuLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIk9QVVQtMTQwNjJcIilcbmJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL2NsZWFyQ2FjaGUvZGF0YU9iamVjdFwiXG5kZWYgYm9keV9yZXEgPSBbXVxuVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbmNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5sb2cuZGVidWcgXCJib2R5X3JlcTogXCIgKyBib2R5X3JlcVxuY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxubG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5jb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbn0iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="field.existingAttachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="targetIssueTypeDefinedByCfSelection"></arg>
                  <arg name="uuid">ede3c31a-1c8e-406b-bb01-6cfb4159d0f1</arg>
                  <arg name="issueTypeId">13401</arg>
                  <arg name="scopeType">ISSUE_LINKING</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.43.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="field.attachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="targetIssueType">SELECTED_ISSUE_TYPE</arg>
                  <arg name="scopeSource-jql"></arg>
                  <arg name="createIssueAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.copyTransitionComment">false</arg>
                  <arg name="targetProjectType">SAME</arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="transitionAttachmentsOperation">copy</arg>
                  <arg name="field.issueAssignTo">ASSIGN_TO_UNASSIGNED</arg>
                  <arg name="targetProjectSelectedCustomField"></arg>
                  <arg name="destination-scopeTarget">LINK_END</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiescreatelinkedissue-function</arg>
                  <arg name="scopeDestination-linkEnd">11100:OUTWARD</arg>
                  <arg name="field.enablingCustomFieldId">customfield_23923</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
                  <arg name="subFunctions">[{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:false,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23923&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22658&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22600&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22600&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22822&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22822&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22601&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22601&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22602&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22602&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22813&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22813&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23235&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23235&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22651&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22651&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22700&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22700&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22607&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22607&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;priority&quot;,&quot;destinationFieldId&quot;:&quot;priority&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22814&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22814&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23203&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23203&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23237&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23237&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_21909&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21909&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;issuekey&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22629&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Yes&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22681&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23401&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21908&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Maintenance Ticket&quot;,&quot;destinationFieldId&quot;:&quot;summary&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Yes&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23409&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22649&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22629&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23237&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23401&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23607&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23607&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23237&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21908&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_25704&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23906&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_25703&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23907&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_25705&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23908&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_25706&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23909&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_25707&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22689&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_25708&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22691&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22690&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22690&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Yes&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23409&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Maintenance Ticket&quot;,&quot;destinationFieldId&quot;:&quot;summary&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23401&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23237&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;REPAIR_ENABLED&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22814&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22635&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22635&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Yes&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23402&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_25709&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23917&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Key&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22763&quot;}}]</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.createlinkedissue.CreateLinkedIssueFunction</arg>
                  <arg name="projectId">22601</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">71a4764e-ec7c-4759-97f5-5775b6c349ed</arg>
                  <arg name="FIELD_NOTES">YCFgT1A6IFVwZGF0ZSBzdGF0dXMgb24ganVzdCBjcmVhdGVkIFJlcGFpciBRdW90YXRpb24gKE1vZGVybml6YXRpb24pIGlzc3VlICYmIEdlbmVyYXRlIE9QX1FVT1RFX01BVEVSSUFMUyAgZnJvbSBPUF9NT0RFUk5JWkFUSU9OX01BVEVSSUFMUw==</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnlcbmltcG9ydCBncm9vdnkuanNvbi5Kc29uQnVpbGRlclxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29uZmlnLnV0aWwuSmlyYUhvbWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvblxuaW1wb3J0IGphdmEudGV4dC5TaW1wbGVEYXRlRm9ybWF0XG5pbXBvcnQgamF2YS50ZXh0LlBhcnNlRXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbmZpZy5wcm9wZXJ0aWVzLkFQS2V5c1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLkxpbmtDb2xsZWN0aW9uSW1wbDtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbms7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxubG9nLmRlYnVnIFwiUGVyY29yc28gcHJvcGVydGllczogXCIgKyBTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG4gLypJbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzKi9cbiAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyBcbiAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XG4gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xuIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XG4gLyogR2V0IEluc2lnaHQgSVFMIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xuIENsYXNzIGlxbEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLklRTEZhY2FkZVwiKTsgXG4gaXFsRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKGlxbEZhY2FkZUNsYXNzKTtcbiBDbGFzcyBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuc2VydmljZXMubW9kZWwuZmFjdG9yeS5PYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeVwiKTtcbiBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzKTtcbiAvKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cbiBDbGFzcyBvYmplY3RUeXBlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUZhY2FkZVwiKTsgXG4gb2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpO1xuLypTY3JpcHQgVmFyaWFibGVzKi9cbi8vUGVyIFBvc3QgRnVuY3Rpb25cbmlzc3VlID0gaXNzdWVcbi8vUGVyIHRlc3QgZGEgY29uc29sZVxuLy9Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKClcbi8vaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJPUFVULTI1N1wiKVxubG9nLmRlYnVnIFwiSXNzdWU6IFwiICsgaXNzdWVcbmRlZiBmb3VuZD1mYWxzZVxuZGVmIGxpbmtlZElzc3VlXG5kZWYgaXNzdWVTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVTZXJ2aWNlKClcbmRlZiBncm91cE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRHcm91cE1hbmFnZXIoKVxuZGVmIHVzZXJNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0VXNlck1hbmFnZXIoKVxuZGVmIG9mZmVyRnJvbVJlcGFpciA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9US1RfR0VORVJBVEVEX0ZST01fUE1cIilbMF1cblxuZGVmIGN1cnJlbnRVc2VyVHJhbnNpdGlvbiA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9DVVJSRU5UX1VTRVJfR0VORVJBVEVfUkVQQUlSX1FVT1RFXCIpWzBdXG5kZWYgdHJhbnNpdGlvbkNoZWNrID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfQ0hFQ0tfQU5EX0NPTkZJUk1cIilbMF1cblN0cmluZyBzdXBwbGllckFkbSA9IFwiT1BST0xFX0FBX1NVUFBMSUVSX0FETVwiXG5TdHJpbmcgc3VwcGxpZXJUZWNoID0gXCJPUFJPTEVfQUFfU1VQUExJRVJfVEVDSFwiXG5cbkxpc3Q8SXNzdWVMaW5rPiBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpO1xubG9nLmRlYnVnIFwiYWxsT3V0SXNzdWVMaW5rOiBcIiArIGFsbE91dElzc3VlTGlua1xuZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsT3V0SXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHtcbiAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuICAgIGRlZiBsaW5rZWRJc3N1ZVRlbXAgPSBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKVxuICAgIFN0cmluZyB0eXBlID0gbGlua2VkSXNzdWVUZW1wLmdldElzc3VlVHlwZSgpLmdldE5hbWUoKTtcblxuICAgIGxvZy5kZWJ1Zyhpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkpIFxuICAgIFxuICAgIGlmKGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpICE9IG51bGwgJiYgaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkuZ2V0SXNzdWVUeXBlKCkuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiTW9kZXJuaXphdGlvblwiKSAmJiBpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMocHJvcGVydGllc1snaWwubGlua2VkVGt0c1Byb2JsZW0nXS50b1N0cmluZygpKSl7XG4gICAgICAgIGxpbmtlZElzc3VlPWxpbmtlZElzc3VlVGVtcFxuICAgICAgICBsb2cuZGVidWcgXCJsaW5rZWQgaXNzdWU6IFwiICsgbGlua2VkSXNzdWVcbiAgICAgICAgLy9sb2cuZGVidWcgXCJsaW5rZWQgaXNzdWUgc3RhdHVzOiBcIiArIGxpbmtlZElzc3VlLmdldFN0YXR1c09iamVjdCgpLm5hbWVcbiAgICAgICAgaWYobGlua2VkSXNzdWUuZ2V0U3RhdHVzT2JqZWN0KCkubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5vcGVuJ10udG9TdHJpbmcoKSl7XG4gICAgICAgICAgICBmb3VuZD10cnVlXG4gICAgICAgIH1cbiAgICB9XG59XG5cbkxpc3Q8SXNzdWVMaW5rPiBhbGxJbklzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRJbndhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKTtcbmxvZy5kZWJ1ZyBcImFsbEluSXNzdWVMaW5rOiBcIiArIGFsbEluSXNzdWVMaW5rXG5mb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxJbklzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcbiAgICBkZWYgbGlua2VkSXNzdWVUZW1wID0gaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpXG4gICAgU3RyaW5nIHR5cGUgPSBsaW5rZWRJc3N1ZVRlbXAuZ2V0SXNzdWVUeXBlKCkuZ2V0TmFtZSgpO1xuXG4gICAgbG9nLmRlYnVnKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKSkgXG4gICAgXG4gICAgaWYoaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpICE9IG51bGwgJiYgaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpLmdldElzc3VlVHlwZSgpLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhcIk1vZGVybml6YXRpb25cIikgJiYgaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNQcm9ibGVtJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICBsaW5rZWRJc3N1ZT1saW5rZWRJc3N1ZVRlbXBcbiAgICAgICAgbG9nLmRlYnVnIFwibGlua2VkIGlzc3VlOiBcIiArIGxpbmtlZElzc3VlXG4gICAgICAgIC8vbG9nLmRlYnVnIFwibGlua2VkIGlzc3VlIHN0YXR1czogXCIgKyBsaW5rZWRJc3N1ZS5nZXRTdGF0dXNPYmplY3QoKS5uYW1lXG4gICAgICAgIGlmKGxpbmtlZElzc3VlLmdldFN0YXR1c09iamVjdCgpLm5hbWUgPT0gcHJvcGVydGllc1snd2Yub3BlbiddLnRvU3RyaW5nKCkpe1xuICAgICAgICAgICAgZm91bmQ9dHJ1ZVxuICAgICAgICB9XG4gICAgfVxufVxuLy9sb2cuZGVidWcgXCJmb3VuZDogXCIgKyBmb3VuZFxuXG5pZihmb3VuZCl7XG5cdGRlZiBkZXN0U3RhdHVzT2JqZWN0ID0gbGlua2VkSXNzdWUuZ2V0U3RhdHVzT2JqZWN0KClcbiAgICAvL2xvZy5kZWJ1ZyBcImRlc3RTdGF0dXNPYmplY3Q6IFwiICsgZGVzdFN0YXR1c09iamVjdFxuICAgIC8vbG9nLmRlYnVnIFwibGlua2VkSXNzdWU6IFwiICsgbGlua2VkSXNzdWVcbiAgICBkZWYgdXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuXHQvLyBJcyB0aGUgc3RhdHVzIG9mIHRoZSBsaW5rZWQgaXNzdWUgXCJJbnN0YWxsaW5nXCIgP1xuICAgIFxuICAgIGRlZiBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5jdXN0b21GaWVsZE1hbmFnZXJcbiAgICBkZWYgcG1Jc3N1ZUZpZWxkID0gY3VzdG9tRmllbGRNYW5hZ2VyLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1BNX0xJTktFRF9JU1NVRVwiKS5maXJzdCgpXG4gICAgZGVmIG9mZmVySXNzdWVGaWVsZCA9IGN1c3RvbUZpZWxkTWFuYWdlci5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9NT0RFUk5JWkFUSU9OX0xJTktFRF9JU1NVRVwiKS5maXJzdCgpXG4gICAgZGVmIG9mZmVySXNzdWVCb29sRmllbGQgPSBjdXN0b21GaWVsZE1hbmFnZXIuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLm9mZmVyVGt0J10udG9TdHJpbmcoKSkuZmlyc3QoKVxuICAgIFxuICAgIC8vU2V0IE9QQUFfT0ZGRVJfVEtUPVllcyBvbiBqdXN0IGNyZWF0ZWQgbGlua2VkSXNzdWVcbiAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcbiAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBsaW5rZWRJc3N1ZVxuXHRcblx0ICAvLzI4LjAyLjIwMjMgQUYgLSBnZW5lcmEgQ29tcG9uZW50IGRhIGxpbmthcmUgbmVsIGNhbXBvIE9QX1FVT1RFX01BVEVSSUFMUyBwYXJ0ZW5kbyBkYSBxdWVsbGkgYWdnaXVudGkgbmVsIGNhbXBvIE9QX01PREVSTklaQVRJT05fTUFURVJJQUxTIC0gZ2VuZXJpYW1vIG51b3ZpIG9nZ2V0dGkgQ29tcG9uZW50IHBlciBldml0YXJlIGNoZSBtb2RpZmljaGUgZmF0dGUgc3VsIHRpY2tldCBkaSBxdW90YXRpb24gXG4gICAgLy92YWRhbm8gYSBtb2RpZmljYXJlIGxhIHJpY2hpZXN0YSBpbml6aWFsbWVudGUgZmF0dGEgZGFsIHRlY25pY28gc3VsIHRpY2tldCBvcmlnaW5hbGVcbiAgICBkZWYgQ09NUE9ORU5UX1RPVEFMX0FNT1VOVF9TVVBQTElFUj1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50b3RTdXBwLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuICAgIGRlZiBDT01QT05FTlRfVE9UQUxfQU1PVU5UX0NVU1RPTUVSPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRvdEN1c3QuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG4gICAgZGVmIENPTVBPTkVOVF9OQU1FPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50Lm5hbWUuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG4gICAgZGVmIENPTVBPTkVOVF9IQVJEV0FSRV9SRUY9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQuaGFyZHdhcmVSZWYuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG4gICAgZGVmIENPTVBPTkVOVF9TQVA9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQuc2FwLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuICAgIGRlZiBDT01QT05FTlRfU1VQUExJRURfQllfRkFBQz1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5zdXBwbGllZEJ5RmFhYy5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbiAgICBkZWYgQ09NUE9ORU5UX1FVQU5USVRZPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnF1YW50aXR5LmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuICAgIGRlZiBDT01QT05FTlRfUVVPVEVEX1FVQU5USVRZPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnF1b3RlZFF1YW50aXR5LmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuICAgIGRlZiBDT01QT05FTlRfUVVPVEVfUkVRVUlSRUQ9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQucXVvdGVSZXF1aXJlZC5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbiAgICBkZWYgQ09NUE9ORU5UX1NVUFBMSUVSX1FVT1RFX1RPX0ZBQUM9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQuc3VwcGxpZXJRdW90ZS5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbiAgICBkZWYgQ09NUE9ORU5UX0ZBQUNfUVVPVEVfVE9fQ1VTVE9NRVI9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQuY3VzdG9tZXJRdW90ZS5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbiAgICBkZWYgQ09NUE9ORU5UX0FQUExJRURfVE89cHJvcGVydGllc1snaW9iai5jb21wb25lbnQuYXBwbGllZFRvLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuICAgIGRlZiBDT01QT05FTlRfTUFURVJJQUxfUkVGPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50Lm1hdGVyaWFsUmVmLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxuICAgIGRlZiBDT01QT05FTlRfQUNDT1VOVElOR19TVVBQTElFUl9NQVRFUklBTF9SRUY9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQuYWNjb3VudGluZ1N1cHBNYXRSZWYuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG4gICAgZGVmIENPTVBPTkVOVF9BQ0NPVU5USU5HX0NVU1RPTUVSX01BVEVSSUFMX1JFRj1wcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hY2NvdW50aW5nQ3VzdE1hdFJlZi5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbiAgICBkZWYgQ09NUE9ORU5UX0ZST01fUVVPVEVfVEtUPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmZyb21RdW90ZVRrdC5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbiAgICBkZWYgQ09NUE9ORU5UX0RFTEVURUQ9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQuZGVsZXRlZC5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbiAgICBkZWYgQ09NUE9ORU5UX05PVEU9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQubm90ZS5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbiAgICBkZWYgQ09NUE9ORU5UX0FDQ09VTlRJTkdfSU5ESUNBVE9SPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmFjY291bnRpbmdJbmRpY2F0b3IuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG4gICAgZGVmIENPTVBPTkVOVF9RVU9URV9PQkpfSUQ9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQucXVvdGVPYmpJZC5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcbiAgICBkZWYgQ09NUE9ORU5UX1RLVF9DT01QQU5ZPXByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRrdENvbXBhbnkuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG4gICAgLy9PYmpUeXBlIElEc1xuICAgIGRlZiBDT01QT05FTlQ9cHJvcGVydGllc1snaW9iai5jb21wb25lbnQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXG4gICAgLypDdXN0b21maWVsZHMqL1xuICAgIGRlZiBxdW90ZU1hdGVyaWFscyA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5xdW90ZU1hdGVyaWFscyddLnRvU3RyaW5nKCkpWzBdXG4gICAgZGVmIHJlcU1hdGVyaWFscyA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX01PREVSTklaQVRJT05fTUFURVJJQUxTXCIpWzBdXG4gICAgLypWYXJpYWJsZXMqL1xuICAgIGRlZiByZXFNYXRMaXN0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXFNYXRlcmlhbHMpXG4gICAgZGVmIG9iakxpc3QgPSBuZXcgQXJyYXlMaXN0KClcbiAgICBmb3IobWF0IGluIHJlcU1hdExpc3Qpe1xuICAgICAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5kIGdldCBvYmplY3RcbiAgICAgICAgZGVmIGNvbXBvbmVudD1tYXQudG9TdHJpbmcoKVxuICAgICAgICBkZWYgY29tcG9uZW50S2V5ID0gY29tcG9uZW50LnN1YnN0cmluZyhjb21wb25lbnQubGFzdEluZGV4T2YoJygnKSsxLGNvbXBvbmVudC5sYXN0SW5kZXhPZignKScpKVxuICAgICAgICBkZWYgY29tcG9uZW50T2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGNvbXBvbmVudEtleSlcbiAgICAgICAgXG4gICAgICAgIGxvZy5kZWJ1ZyBcImNvbXBvbmVudE9iamVjdDogXCIgKyBjb21wb25lbnRPYmplY3RcbiAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmRlbGV0ZWQnXS50b1N0cmluZygpKSA/IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuZGVsZXRlZCddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKSA6IG51bGxcbiAgICAgICAgZGVmIGRlbCA9IG9iVHJpYWdlID8gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpIDogbnVsbFxuICAgICAgICBkZWw9IGRlbCA/IGRlbFswXS5nZXRWYWx1ZSgpIDogZmFsc2VcbiAgICAgICAgbG9nLmRlYnVnIFwiZGVsZXRlZDogXCIgKyBkZWxcbiAgICAgICAgXG4gICAgICAgIGlmKCFkZWwpe1xuICAgICAgICAgICAgZGVmIG5ld09iakF0dHJpYnV0ZXNMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICBkZWYgaSA9IDBcbiAgICAgICAgICAgIGRlZiBvYmplY3RUeXBlQ29tcG9uZW50ID0gb2JqZWN0VHlwZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUJlYW4oQ09NUE9ORU5UKTtcbiAgICAgICAgICAgIC8qIENyZWF0ZSBhIG5ldyB1bnNhdmVkIG9iamVjdCBiZWFuICovXG4gICAgICAgICAgICBkZWYgbmV3T2JqZWN0QmVhbiA9IG9iamVjdFR5cGVDb21wb25lbnQuY3JlYXRlT2JqZWN0QmVhbigpO1xuICAgICAgICAgICAgLyogU2V0IHVwIHRoZSBhdHRyaWJ1dGUgbGlzdCAqL1xuICAgICAgICAgICAgZGVmIG9iamVjdEF0dHJpYnV0ZUJlYW5zID0gbmV3IEFycmF5TGlzdCgpO1xuICAgICAgICAgICAgLyogU2V0IHRoZSBuYW1lIG9mIHRoZSBDb21wb25lbnQgKi9cbiAgICAgICAgICAgIC8qTm9tZSBDb21wb25lbnQqL1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50Lm5hbWUnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIGRlZiBjb21wTmFtZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuICAgICAgICAgICAgY29tcE5hbWU9Y29tcE5hbWVbMF0uZ2V0VmFsdWUoKVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwib2JqZWN0IG5hbWU6IFwiICsgY29tcE5hbWVcbiAgICAgICAgICAgIGRlZiBuYW1lT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihDT01QT05FTlRfTkFNRSk7IC8vIFRoZSBJRCBvZiB0aGUgb2JqZWN0IHR5cGUgYXR0cmlidXRlIFwiTmFtZVwiXG4gICAgICAgICAgICBkZWYgbmFtZU9iamVjdEF0dHJpYnV0ZUJlYW4gPSBuZXdPYmplY3RCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW4obmFtZU9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKTsgLy8gVGhpcyBpcyB0aGUgbmFtZSBvYmplY3QgYXR0cmlidXRlIGZvciB0aGUgbmV3IG9iamVjdFxuICAgICAgICAgICAgZGVmIG5hbWVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4gPSBuYW1lT2JqZWN0QXR0cmlidXRlQmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTsgLy9UaGlzIGlzIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZVxuICAgICAgICAgICAgbmFtZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbi5zZXRUZXh0VmFsdWVTaG9ydChjb21wTmFtZSk7IC8vIFNldCB0aGUgbmFtZVxuICAgICAgICAgICAgZGVmIHZhbHVlcyA9IG5hbWVPYmplY3RBdHRyaWJ1dGVCZWFuLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTsgXG4gICAgICAgICAgICB2YWx1ZXMuYWRkKG5hbWVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4pOyAvLyBBZGQgdGhlIHZhbHVlIHRvIHRoZSBvYmplY3QgYXR0cmlidXRlXG4gICAgICAgICAgICBsb2cuZGVidWcgdmFsdWVzXG4gICAgICAgICAgICBuYW1lT2JqZWN0QXR0cmlidXRlQmVhbi5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKHZhbHVlcyk7IFxuICAgICAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKG5hbWVPYmplY3RBdHRyaWJ1dGVCZWFuKTtcbiAgICAgICAgICAgIC8qIFNldCB0aGUgSEFSRFdBUkVfUkVGIG9mIHRoZSBuZXcgb2JqICovXG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai5jb21wb25lbnQuaGFyZHdhcmVSZWYnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIGRlZiBodyA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuICAgICAgICAgICAgaHdLZXk9aHdbMF0uZ2V0VmFsdWUoKSAgICBcbiAgICAgICAgICAgIGRlZiBId1JlZk9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oQ09NUE9ORU5UX0hBUkRXQVJFX1JFRik7IC8vIFRoZSBJRCBmb3IgdGhlIHJlZmVyZW5jZWQgb2JqZWN0IHR5cGVcbiAgICAgICAgICAgIGRlZiBId1JlZk9iamVjdEF0dHJpYnV0ZUJlYW4gPSBuZXdPYmplY3RCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW4oSHdSZWZPYmplY3RUeXBlQXR0cmlidXRlQmVhbik7IFxuICAgICAgICAgICAgZGVmIEh3UmVmT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuID0gSHdSZWZPYmplY3RBdHRyaWJ1dGVCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpOyAvLyBUaGlzIGlzIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZVxuICAgICAgICAgICAgSHdSZWZPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4uc2V0UmVmZXJlbmNlZE9iamVjdEJlYW5JZChod0tleSk7IC8vIFNldCB0aGUgSURcbiAgICAgICAgICAgIHZhbHVlcyA9IEh3UmVmT2JqZWN0QXR0cmlidXRlQmVhbi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7IFxuICAgICAgICAgICAgdmFsdWVzLmFkZChId1JlZk9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbik7IC8vIEFkZCB0aGUgdmFsdWUgdG8gdGhlIG9iamVjdCBhdHRyaWJ1dGVcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyB2YWx1ZXNcbiAgICAgICAgICAgIEh3UmVmT2JqZWN0QXR0cmlidXRlQmVhbi5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKHZhbHVlcyk7IFxuICAgICAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKEh3UmVmT2JqZWN0QXR0cmlidXRlQmVhbik7IC8vIEFkZCB0byB0aGUgbGlzdCBvZiBvYmplY3QgYXR0cmlidXRlc1xuICAgICAgICAgICAgLyogU2V0IHRoZSBDT01QT05FTlRfU0FQIGZsYWcgb2YgdGhlIEhhcmR3YXJlICovXG4gICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnNhcCddLnRvU3RyaW5nKCkpICE9IG51bGwpe1xuICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5zYXAnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICBkZWYgc2FwID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgc2FwPXNhcFswXS5nZXRWYWx1ZSgpXG4gICAgICAgICAgICAgICAgZGVmIGNvbXBTYXBPYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKENPTVBPTkVOVF9TQVApOyAvLyBUaGUgSUQgb2YgdGhlIG9iamVjdCB0eXBlIGF0dHJpYnV0ZSBcIkRJU0FCTEVEXCJcbiAgICAgICAgICAgICAgICBkZWYgY29tcFNhcE9iamVjdEF0dHJpYnV0ZUJlYW4gPSBuZXdPYmplY3RCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcFNhcE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKTsgLy8gVGhpcyBpcyB0aGUgbmFtZSBvYmplY3QgYXR0cmlidXRlIGZvciB0aGUgbmV3IG9iamVjdFxuICAgICAgICAgICAgICAgIGRlZiBjb21wU2FwT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuID0gY29tcFNhcE9iamVjdEF0dHJpYnV0ZUJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7IC8vIFRoaXMgaXMgdGhlIGFjdHVhbCB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlXG4gICAgICAgICAgICAgICAgY29tcFNhcE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbi5zZXRCb29sZWFuVmFsdWUoc2FwKTsgLy8gU2V0IHRoZSBuYW1lXG4gICAgICAgICAgICAgICAgdmFsdWVzID0gY29tcFNhcE9iamVjdEF0dHJpYnV0ZUJlYW4uZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpOyBcbiAgICAgICAgICAgICAgICB2YWx1ZXMuYWRkKGNvbXBTYXBPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4pOyAvLyBBZGQgdGhlIHZhbHVlIHRvIHRoZSBvYmplY3QgYXR0cmlidXRlXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIHZhbHVlc1xuICAgICAgICAgICAgICAgIGNvbXBTYXBPYmplY3RBdHRyaWJ1dGVCZWFuLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWVzKTsgXG4gICAgICAgICAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKGNvbXBTYXBPYmplY3RBdHRyaWJ1dGVCZWFuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qIFNldCB0aGUgREVMRVRFRCBmbGFnIG9mIHRoZSBIYXJkd2FyZSAqL1xuICAgICAgICAgICAgZGVmIGRlbGV0ZWQgXG4gICAgICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmRlbGV0ZWQnXS50b1N0cmluZygpKSl7XG4gICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LmRlbGV0ZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICBkZWxldGVkID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgZGVsZXRlZD1kZWxldGVkWzBdLmdldFZhbHVlKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKGRlbGV0ZWQhPW51bGwpe1xuICAgICAgICAgICAgICAgIGRlZiBkZWxldGVkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihDT01QT05FTlRfREVMRVRFRCk7IC8vIFRoZSBJRCBvZiB0aGUgb2JqZWN0IHR5cGUgYXR0cmlidXRlIFwiRElTQUJMRURcIlxuICAgICAgICAgICAgICAgIGRlZiBkZWxldGVkT2JqZWN0QXR0cmlidXRlQmVhbiA9IG5ld09iamVjdEJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihkZWxldGVkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4pOyAvLyBUaGlzIGlzIHRoZSBuYW1lIG9iamVjdCBhdHRyaWJ1dGUgZm9yIHRoZSBuZXcgb2JqZWN0XG4gICAgICAgICAgICAgICAgZGVmIGRlbGV0ZWRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4gPSBkZWxldGVkT2JqZWN0QXR0cmlidXRlQmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTsgLy8gVGhpcyBpcyB0aGUgYWN0dWFsIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICBkZWxldGVkT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuLnNldEJvb2xlYW5WYWx1ZShkZWxldGVkKTsgLy8gU2V0IHRoZSBuYW1lXG4gICAgICAgICAgICAgICAgdmFsdWVzID0gZGVsZXRlZE9iamVjdEF0dHJpYnV0ZUJlYW4uZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpOyBcbiAgICAgICAgICAgICAgICB2YWx1ZXMuYWRkKGRlbGV0ZWRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4pOyAvLyBBZGQgdGhlIHZhbHVlIHRvIHRoZSBvYmplY3QgYXR0cmlidXRlXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIHZhbHVlc1xuICAgICAgICAgICAgICAgIGRlbGV0ZWRPYmplY3RBdHRyaWJ1dGVCZWFuLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWVzKTsgXG4gICAgICAgICAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKGRlbGV0ZWRPYmplY3RBdHRyaWJ1dGVCZWFuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qTm9tZSBDT01QT05FTlRfUVVBTlRJVFkqL1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnF1YW50aXR5J10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBkZWYgcXRhID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICBxdGE9cXRhWzBdLmdldFZhbHVlKClcbiAgICAgICAgICAgIGRlZiBxdGFPYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKENPTVBPTkVOVF9RVUFOVElUWSk7IC8vIFRoZSBJRCBvZiB0aGUgb2JqZWN0IHR5cGUgYXR0cmlidXRlIFwiRElTQUJMRURcIlxuICAgICAgICAgICAgZGVmIHF0YU9iamVjdEF0dHJpYnV0ZUJlYW4gPSBuZXdPYmplY3RCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW4ocXRhT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4pOy8vIFRoaXMgaXMgdGhlIG5hbWUgb2JqZWN0IGF0dHJpYnV0ZSBmb3IgdGhlIG5ldyBvYmplY3RcbiAgICAgICAgICAgIGRlZiBxdGFPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4gPSBxdGFPYmplY3RBdHRyaWJ1dGVCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpOyAvLyBUaGlzIGlzIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZVxuICAgICAgICAgICAgcXRhT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuLnNldERvdWJsZVZhbHVlKHF0YSk7IC8vIFNldCB0aGUgbmFtZVxuICAgICAgICAgICAgdmFsdWVzID0gcXRhT2JqZWN0QXR0cmlidXRlQmVhbi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7IFxuICAgICAgICAgICAgdmFsdWVzLmFkZChxdGFPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4pOyAvLyBBZGQgdGhlIHZhbHVlIHRvIHRoZSBvYmplY3QgYXR0cmlidXRlXG4gICAgICAgICAgICBsb2cuZGVidWcgdmFsdWVzXG4gICAgICAgICAgICBxdGFPYmplY3RBdHRyaWJ1dGVCZWFuLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWVzKTsgXG4gICAgICAgICAgICBvYmplY3RBdHRyaWJ1dGVCZWFucy5hZGQocXRhT2JqZWN0QXR0cmlidXRlQmVhbik7XG4gICAgICAgICAgICAvKk5vbWUgQ09NUE9ORU5UX05PVEUqL1xuICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5ub3RlJ10udG9TdHJpbmcoKSkgIT0gbnVsbCl7XG4gICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50Lm5vdGUnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICBkZWYgbm90ZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuICAgICAgICAgICAgICAgIG5vdGU9bm90ZVswXS5nZXRWYWx1ZSgpXG4gICAgICAgICAgICAgICAgZGVmIG5vdGVPYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKENPTVBPTkVOVF9OT1RFKTsgLy8gVGhlIElEIG9mIHRoZSBvYmplY3QgdHlwZSBhdHRyaWJ1dGUgXCJESVNBQkxFRFwiXG4gICAgICAgICAgICAgICAgZGVmIG5vdGVPYmplY3RBdHRyaWJ1dGVCZWFuID0gbmV3T2JqZWN0QmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKG5vdGVPYmplY3RUeXBlQXR0cmlidXRlQmVhbik7IC8vIFRoaXMgaXMgdGhlIG5hbWUgb2JqZWN0IGF0dHJpYnV0ZSBmb3IgdGhlIG5ldyBvYmplY3RcbiAgICAgICAgICAgICAgICBkZWYgbm90ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbiA9IG5vdGVPYmplY3RBdHRyaWJ1dGVCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpOyAvLyBUaGlzIGlzIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZVxuICAgICAgICAgICAgICAgIG5vdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4uc2V0VGV4dFZhbHVlKG5vdGUpXG4gICAgICAgICAgICAgICAgdmFsdWVzID0gbm90ZU9iamVjdEF0dHJpYnV0ZUJlYW4uZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpOyBcbiAgICAgICAgICAgICAgICB2YWx1ZXMuYWRkKG5vdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4pOyAvLyBBZGQgdGhlIHZhbHVlIHRvIHRoZSBvYmplY3QgYXR0cmlidXRlXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIHZhbHVlc1xuICAgICAgICAgICAgICAgIG5vdGVPYmplY3RBdHRyaWJ1dGVCZWFuLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWVzKVxuICAgICAgICAgICAgICAgIG9iamVjdEF0dHJpYnV0ZUJlYW5zLmFkZChub3RlT2JqZWN0QXR0cmlidXRlQmVhbilcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qTm9tZSBDT01QT05FTlRfVEtUX0NPTVBBTlkqL1xuICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC50a3RDb21wYW55J10udG9TdHJpbmcoKSkgIT0gbnVsbCl7XG4gICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnRrdENvbXBhbnknXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICBkZWYgdGt0Q29tcGFueSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuICAgICAgICAgICAgICAgIHRrdENvbXBhbnk9dGt0Q29tcGFueVswXS5nZXRWYWx1ZSgpXG4gICAgICAgICAgICAgICAgZGVmIHRrdENvbXBhbnlPYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKENPTVBPTkVOVF9US1RfQ09NUEFOWSk7IC8vIFRoZSBJRCBvZiB0aGUgb2JqZWN0IHR5cGUgYXR0cmlidXRlIFwiRElTQUJMRURcIlxuICAgICAgICAgICAgICAgIGRlZiB0a3RDb21wYW55T2JqZWN0QXR0cmlidXRlQmVhbiA9IG5ld09iamVjdEJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbih0a3RDb21wYW55T2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4pOyAvLyBUaGlzIGlzIHRoZSBuYW1lIG9iamVjdCBhdHRyaWJ1dGUgZm9yIHRoZSBuZXcgb2JqZWN0XG4gICAgICAgICAgICAgICAgZGVmIHRrdENvbXBhbnlPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4gPSB0a3RDb21wYW55T2JqZWN0QXR0cmlidXRlQmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTsgLy8gVGhpcyBpcyB0aGUgYWN0dWFsIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICB0a3RDb21wYW55T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuLnNldFRleHRWYWx1ZSh0a3RDb21wYW55KVxuICAgICAgICAgICAgICAgIHZhbHVlcyA9IHRrdENvbXBhbnlPYmplY3RBdHRyaWJ1dGVCZWFuLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTsgXG4gICAgICAgICAgICAgICAgdmFsdWVzLmFkZCh0a3RDb21wYW55T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKTsgLy8gQWRkIHRoZSB2YWx1ZSB0byB0aGUgb2JqZWN0IGF0dHJpYnV0ZVxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyB2YWx1ZXNcbiAgICAgICAgICAgICAgICB0a3RDb21wYW55T2JqZWN0QXR0cmlidXRlQmVhbi5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKHZhbHVlcylcbiAgICAgICAgICAgICAgICBvYmplY3RBdHRyaWJ1dGVCZWFucy5hZGQodGt0Q29tcGFueU9iamVjdEF0dHJpYnV0ZUJlYW4pICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIC8qTm9tZSBDT01QT05FTlRfUVVPVEVfUkVRVUlSRUQqL1xuICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5xdW90ZVJlcXVpcmVkJ10udG9TdHJpbmcoKSkgIT0gbnVsbCl7XG4gICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcG9uZW50T2JqZWN0LmdldElkKCksIHByb3BlcnRpZXNbJ2lvYmouY29tcG9uZW50LnF1b3RlUmVxdWlyZWQnXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgICAgICBkZWYgcXVvdGVSZXEgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgICAgICAgICBxdW90ZVJlcT1xdW90ZVJlcVswXS5nZXRWYWx1ZSgpXG4gICAgICAgICAgICAgICAgZGVmIHF1b3RlUmVxT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihDT01QT05FTlRfUVVPVEVfUkVRVUlSRUQpOyAvLyBUaGUgSUQgb2YgdGhlIG9iamVjdCB0eXBlIGF0dHJpYnV0ZSBcIkRJU0FCTEVEXCJcbiAgICAgICAgICAgICAgICBkZWYgcXVvdGVSZXFPYmplY3RBdHRyaWJ1dGVCZWFuID0gbmV3T2JqZWN0QmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKHF1b3RlUmVxT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4pOyAvLyBUaGlzIGlzIHRoZSBuYW1lIG9iamVjdCBhdHRyaWJ1dGUgZm9yIHRoZSBuZXcgb2JqZWN0XG4gICAgICAgICAgICAgICAgZGVmIHF1b3RlUmVxT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuID0gcXVvdGVSZXFPYmplY3RBdHRyaWJ1dGVCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpOyAvLyBUaGlzIGlzIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZVxuICAgICAgICAgICAgICAgIHF1b3RlUmVxT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuLnNldEJvb2xlYW5WYWx1ZShxdW90ZVJlcSk7IC8vIFNldCB0aGUgbmFtZVxuICAgICAgICAgICAgICAgIHZhbHVlcyA9IHF1b3RlUmVxT2JqZWN0QXR0cmlidXRlQmVhbi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7IFxuICAgICAgICAgICAgICAgIHZhbHVlcy5hZGQocXVvdGVSZXFPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4pOyAvLyBBZGQgdGhlIHZhbHVlIHRvIHRoZSBvYmplY3QgYXR0cmlidXRlXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIHZhbHVlc1xuICAgICAgICAgICAgICAgIHF1b3RlUmVxT2JqZWN0QXR0cmlidXRlQmVhbi5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKHZhbHVlcyk7IFxuICAgICAgICAgICAgICAgIG9iamVjdEF0dHJpYnV0ZUJlYW5zLmFkZChxdW90ZVJlcU9iamVjdEF0dHJpYnV0ZUJlYW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLypOb21lIEFDQ09VTlRJTkdfSU5ESUNBVE9SKi9cbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hY2NvdXRpbmdJbmRpY2F0b3InXS50b1N0cmluZygpKSAhPSBudWxsID8gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5hY2NvdXRpbmdJbmRpY2F0b3InXS50b1N0cmluZygpKS5jcmVhdGVNdXRhYmxlKCkgOiBudWxsXG4gICAgICAgICAgICBpZihvYlRyaWFnZSl7XG4gICAgICAgICAgICAgICAgZGVmIGFjY291bnRpbmdJbmRpY2F0b3IgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcbiAgICAgICAgICAgICAgICBhY2NvdW50aW5nSW5kaWNhdG9yPWFjY291bnRpbmdJbmRpY2F0b3JbMF0uZ2V0VmFsdWUoKVxuICAgICAgICAgICAgICAgIGRlZiBhY2NvdW50aW5nSW5kaWNhdG9yT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihDT01QT05FTlRfQUNDT1VOVElOR19JTkRJQ0FUT1IpOyAvLyBUaGUgSUQgb2YgdGhlIG9iamVjdCB0eXBlIGF0dHJpYnV0ZSBcIkRJU0FCTEVEXCJcbiAgICAgICAgICAgICAgICBkZWYgYWNjb3VudGluZ0luZGljYXRvck9iamVjdEF0dHJpYnV0ZUJlYW4gPSBuZXdPYmplY3RCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW4oYWNjb3VudGluZ0luZGljYXRvck9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKTsgLy8gVGhpcyBpcyB0aGUgbmFtZSBvYmplY3QgYXR0cmlidXRlIGZvciB0aGUgbmV3IG9iamVjdFxuICAgICAgICAgICAgICAgIGRlZiBhY2NvdW50aW5nSW5kaWNhdG9yT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuID0gYWNjb3VudGluZ0luZGljYXRvck9iamVjdEF0dHJpYnV0ZUJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7IC8vIFRoaXMgaXMgdGhlIGFjdHVhbCB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlXG4gICAgICAgICAgICAgICAgYWNjb3VudGluZ0luZGljYXRvck9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbi5zZXRUZXh0VmFsdWUoYWNjb3VudGluZ0luZGljYXRvcik7IC8vIFNldCB0aGUgbmFtZVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdmFsdWVzID0gYWNjb3VudGluZ0luZGljYXRvck9iamVjdEF0dHJpYnV0ZUJlYW4uZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpOyBcbiAgICAgICAgICAgICAgICB2YWx1ZXMuYWRkKGFjY291bnRpbmdJbmRpY2F0b3JPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4pOyAvLyBBZGQgdGhlIHZhbHVlIHRvIHRoZSBvYmplY3QgYXR0cmlidXRlXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIHZhbHVlc1xuICAgICAgICAgICAgICAgIGFjY291bnRpbmdJbmRpY2F0b3JPYmplY3RBdHRyaWJ1dGVCZWFuLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnModmFsdWVzKTsgXG4gICAgICAgICAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKGFjY291bnRpbmdJbmRpY2F0b3JPYmplY3RBdHRyaWJ1dGVCZWFuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLypOb21lIENPTVBPTkVOVF9NQVRFUklBTF9SRUYqL1xuICAgICAgICAgICAgZGVmIG1hdGVyaWFsU0FQIFxuICAgICAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5tYXRlcmlhbFJlZiddLnRvU3RyaW5nKCkpICE9IG51bGwpe1xuICAgICAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBvbmVudE9iamVjdC5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLmNvbXBvbmVudC5tYXRlcmlhbFJlZiddLnRvU3RyaW5nKCkpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgICAgIGRlZiBtYXRlcmlhbCA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxuICAgICAgICAgICAgICAgIG1hdGVyaWFsPW1hdGVyaWFsWzBdLmdldFZhbHVlKClcbiAgICAgICAgICAgICAgICBkZWYgbWF0UmVmT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihDT01QT05FTlRfTUFURVJJQUxfUkVGKTsgLy8gVGhlIElEIGZvciB0aGUgcmVmZXJlbmNlZCBvYmplY3QgdHlwZVxuICAgICAgICAgICAgICAgIG1hdFJlZk9iamVjdEF0dHJpYnV0ZUJlYW4gPSBuZXdPYmplY3RCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW4obWF0UmVmT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4pOyBcbiAgICAgICAgICAgICAgICBtYXRSZWZPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4gPSBtYXRSZWZPYmplY3RBdHRyaWJ1dGVCZWFuLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpOyAvLyBUaGlzIGlzIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZVxuICAgICAgICAgICAgICAgIG1hdFJlZk9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbi5zZXRSZWZlcmVuY2VkT2JqZWN0QmVhbklkKG1hdGVyaWFsKTsgLy8gU2V0IHRoZSBJRFxuICAgICAgICAgICAgICAgIHZhbHVlcyA9IG1hdFJlZk9iamVjdEF0dHJpYnV0ZUJlYW4uZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpOyBcbiAgICAgICAgICAgICAgICB2YWx1ZXMuYWRkKG1hdFJlZk9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbik7IC8vIEFkZCB0aGUgdmFsdWUgdG8gdGhlIG9iamVjdCBhdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgdmFsdWVzXG4gICAgICAgICAgICAgICAgbWF0UmVmT2JqZWN0QXR0cmlidXRlQmVhbi5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKHZhbHVlcyk7IFxuICAgICAgICAgICAgICAgIG9iamVjdEF0dHJpYnV0ZUJlYW5zLmFkZChtYXRSZWZPYmplY3RBdHRyaWJ1dGVCZWFuKTsgLy8gQWRkIHRvIHRoZSBsaXN0IG9mIG9iamVjdCBhdHRyaWJ1dGVzXG4gICAgICBcbiAgICAgICAgICAgICAgICBpZiAobWF0ZXJpYWwhPW51bGwpe1xuICAgICAgICAgICAgICAgICAgICAvKk1BVEVSSUFMIC0gU0FQKi9cbiAgICAgICAgICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obWF0ZXJpYWwudG9JbnRlZ2VyKCksIHByb3BlcnRpZXNbJ2lvYmoubWF0ZXJpYWwuc2FwJ10udG9TdHJpbmcoKSkuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsU0FQID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsU0FQID0gbWF0ZXJpYWxTQVBbMF0uZ2V0VmFsdWUoKVxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJtYXRlcmlhbFNBUDogXCIgKyBtYXRlcmlhbFNBUFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qTm9tZSBDT01QT05FTlRfU1VQUExJRURfQllfRkFBQyovXG4gICAgICAgICAgICBkZWYgc3VwcGxpZWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKENPTVBPTkVOVF9TVVBQTElFRF9CWV9GQUFDKTsgLy8gVGhlIElEIG9mIHRoZSBvYmplY3QgdHlwZSBhdHRyaWJ1dGUgXCJESVNBQkxFRFwiXG4gICAgICAgICAgICBkZWYgc3VwcGxpZWRPYmplY3RBdHRyaWJ1dGVCZWFuID0gbmV3T2JqZWN0QmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKHN1cHBsaWVkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4pOyAvLyBUaGlzIGlzIHRoZSBuYW1lIG9iamVjdCBhdHRyaWJ1dGUgZm9yIHRoZSBuZXcgb2JqZWN0XG4gICAgICAgICAgICBkZWYgc3VwcGxpZWRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4gPSBzdXBwbGllZE9iamVjdEF0dHJpYnV0ZUJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7IC8vIFRoaXMgaXMgdGhlIGFjdHVhbCB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlXG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wb25lbnRPYmplY3QuZ2V0SWQoKSwgXCJTVVBQTElFRF9CWV9GQUFDXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgZGVmIHN1cHBsaWVkID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXG4gICAgICAgICAgICBzdXBwbGllZD1zdXBwbGllZFswXS5nZXRWYWx1ZSgpXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJzdXBwbGllZDogXCIgKyBzdXBwbGllZFxuICAgICAgICAgICAgaWYoc3VwcGxpZWQgPT0gbnVsbCAmJiBtYXRlcmlhbFNBUD09dHJ1ZSl7XG4gICAgICAgICAgICAgICAgc3VwcGxpZWRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4uc2V0VGV4dFZhbHVlKFwiWWVzXCIpOyAvLyBTZXQgdGhlIG5hbWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHN1cHBsaWVkID09IG51bGwgJiYgbWF0ZXJpYWxTQVA9PWZhbHNlKXtcbiAgICAgICAgICAgICAgICBzdXBwbGllZE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbi5zZXRUZXh0VmFsdWUoXCJOb1wiKTsgLy8gU2V0IHRoZSBuYW1lXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihzdXBwbGllZCAhPSBudWxsICYmIHN1cHBsaWVkPT1cIlllc1wiKXtcbiAgICAgICAgICAgICAgICBzdXBwbGllZE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbi5zZXRUZXh0VmFsdWUoXCJZZXNcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihzdXBwbGllZCAhPSBudWxsICYmIHN1cHBsaWVkPT1cIk5vXCIpe1xuICAgICAgICAgICAgICAgIHN1cHBsaWVkT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuLnNldFRleHRWYWx1ZShcIk5vXCIpO1xuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInNldCBub1wiXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhbHVlcyA9IHN1cHBsaWVkT2JqZWN0QXR0cmlidXRlQmVhbi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7IFxuICAgICAgICAgICAgdmFsdWVzLmFkZChzdXBwbGllZE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbik7IC8vIEFkZCB0aGUgdmFsdWUgdG8gdGhlIG9iamVjdCBhdHRyaWJ1dGVcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyB2YWx1ZXNcbiAgICAgICAgICAgIHN1cHBsaWVkT2JqZWN0QXR0cmlidXRlQmVhbi5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKHZhbHVlcyk7IFxuICAgICAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKHN1cHBsaWVkT2JqZWN0QXR0cmlidXRlQmVhbik7XG4gICAgICAgICAgICAvKk5vbWUgQ09NUE9ORU5UX0ZST01fUVVPVEVfVEtUKi9cbiAgICAgICAgICAgIC8qMDguMDMuMjAyMyBBRiBkYSBub24gc2V0dGFyZSBzdWdsaSBvZ2dldHRpIENvbXBvbmVudCBsZWdhdGkgYWwgY2FtcG8gT1BfUVVPVEVfTUFURVJJQUxTIC0gXHUwMGU4IHVuIGF0dHJpYnV0byBzZXR0YXRvIHNvbG8gc3VnbGkgb2dnZXR0aSBDb21wb25lbnQgbGVnYXRpIGFsIGNhbXBvIE9QX1JFUExBQ0VEX01BVEVSSUFMUyAtIHF1YW5kbyBnZW5lcmF0aSBpbiBjb3BpYSBkYSBvZ2dldHRpIGluIE9QX1FVT1RFX01BVEVSSUFMUyovXG4gLy8gICAgICAgICAgICBkZWYgZnJvbVF1b3RlT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihDT01QT05FTlRfRlJPTV9RVU9URV9US1QpOyAvLyBUaGUgSUQgb2YgdGhlIG9iamVjdCB0eXBlIGF0dHJpYnV0ZSBcIkRJU0FCTEVEXCJcbiAvLyAgICAgICAgICAgIGRlZiBmcm9tUXVvdGVPYmplY3RBdHRyaWJ1dGVCZWFuID0gbmV3T2JqZWN0QmVhbi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKGZyb21RdW90ZU9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKTsgLy8gVGhpcyBpcyB0aGUgbmFtZSBvYmplY3QgYXR0cmlidXRlIGZvciB0aGUgbmV3IG9iamVjdFxuIC8vICAgICAgICAgICAgZGVmIGZyb21RdW90ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbiA9IGZyb21RdW90ZU9iamVjdEF0dHJpYnV0ZUJlYW4uY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7IC8vIFRoaXMgaXMgdGhlIGFjdHVhbCB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlXG4gLy8gICAgICAgICAgICBpZihtYXRlcmlhbFNBUD09dHJ1ZSl7XG4gLy8gICAgICAgICAgICAgICAgZnJvbVF1b3RlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuLnNldEJvb2xlYW5WYWx1ZSh0cnVlKTsgLy8gU2V0IHRoZSBuYW1lXG4gLy8gICAgICAgICAgICB9ZWxzZXtcbiAvLyAgICAgICAgICAgICAgICBmcm9tUXVvdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4uc2V0Qm9vbGVhblZhbHVlKGZhbHNlKTsgLy8gU2V0IHRoZSBuYW1lXG4gLy8gICAgICAgICAgICB9XG4gLy8gICAgICAgICAgICB2YWx1ZXMgPSBmcm9tUXVvdGVPYmplY3RBdHRyaWJ1dGVCZWFuLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTsgXG4vLyAgICAgICAgICAgIHZhbHVlcy5hZGQoZnJvbVF1b3RlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKTsgLy8gQWRkIHRoZSB2YWx1ZSB0byB0aGUgb2JqZWN0IGF0dHJpYnV0ZVxuIC8vICAgICAgICAgICAgbG9nLmRlYnVnIHZhbHVlc1xuIC8vICAgICAgICAgICAgZnJvbVF1b3RlT2JqZWN0QXR0cmlidXRlQmVhbi5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKHZhbHVlcyk7IFxuLy8gICAgICAgICAgICBvYmplY3RBdHRyaWJ1dGVCZWFucy5hZGQoZnJvbVF1b3RlT2JqZWN0QXR0cmlidXRlQmVhbik7XG4gICAgICAgICAgICBsb2cuZGVidWcgXCJvYmplY3RBdHRyaWJ1dGVCZWFuczogXCIgKyBvYmplY3RBdHRyaWJ1dGVCZWFuc1xuICAgICAgICAgICAgLyogU2V0IGFsbCBvYmplY3QgYXR0cmlidXRlcyB0byB0aGUgb2JqZWN0ICovXG4gICAgICAgICAgICBuZXdPYmplY3RCZWFuLnNldE9iamVjdEF0dHJpYnV0ZUJlYW5zKG9iamVjdEF0dHJpYnV0ZUJlYW5zKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbmV3T2JqZWN0QmVhbiA9IG9iamVjdEZhY2FkZS5zdG9yZU9iamVjdEJlYW4obmV3T2JqZWN0QmVhbik7XG4gICAgICAgICAgICAgICAgb2JqTGlzdC5hZGQobmV3T2JqZWN0QmVhbilcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcoXCJuZXdPYmplY3RCZWFuOiBcIiArIG5ld09iamVjdEJlYW4pO1xuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSkge1xuICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiQ291bGQgbm90IGNyZWF0ZSBpc3N1ZSBkdWUgdG8gdmFsaWRhdGlvbiBleGNlcHRpb246XCIgKyB2aWUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qMTMuMDIuMjAyMyBBRiAtIGFsIHRlcm1pbmUgZGVsbGEgY3JlYXppb25lIGRlbCBudW92byBvZ2dldHRvIGxvIGFnZ2lvcm5vIGltcG9zdGFuZG8gbGEgc3VhIGtleSBuZWxsJ2F0dHJpYnV0byBRVU9URV9PQkpfSUQqL1xuICAgICAgICAgICAgZGVmIG9ialRvVXBkYXRlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKG5ld09iamVjdEJlYW4uZ2V0SWQoKSk7XG4gICAgICAgICAgICAvKiBDcmVhdGUgYSBuZXcgdW5zYXZlZCBvYmplY3QgYmVhbiAqL1xuICAgICAgICAgICAgZGVmIHF1b3RlT2JqSWRhdHRyaWJUeXBlID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4ocHJvcGVydGllc1snaW9iai5jb21wb25lbnQucXVvdGVPYmpJZC5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKCkpOyBcbiAgICAgICAgICAgIGRlZiBxdW90ZU9iaklkbmV3QXR0cmliID0gb2JqVG9VcGRhdGUuY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihxdW90ZU9iaklkYXR0cmliVHlwZSk7XG4gICAgICAgICAgICBkZWYgcXVvdGVPYmpJZG5ld0F0dHJpYlZhbHVlID0gcXVvdGVPYmpJZG5ld0F0dHJpYi5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTtcbiAgICAgICAgICAgIHF1b3RlT2JqSWRuZXdBdHRyaWJWYWx1ZS5zZXRWYWx1ZShxdW90ZU9iaklkYXR0cmliVHlwZSwgbmV3T2JqZWN0QmVhbi5nZXRJZCgpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgZGVmIHF1b3RlT2JqSWRhdHRyaWJWYWx1ZXMgPSBxdW90ZU9iaklkbmV3QXR0cmliLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTtcbiAgICAgICAgICAgIHF1b3RlT2JqSWRhdHRyaWJWYWx1ZXMuYWRkKHF1b3RlT2JqSWRuZXdBdHRyaWJWYWx1ZSk7XG4gICAgICAgICAgICBxdW90ZU9iaklkbmV3QXR0cmliLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMocXVvdGVPYmpJZGF0dHJpYlZhbHVlcyk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHF1b3RlT2JqSWRuZXdBdHRyaWIgPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKHF1b3RlT2JqSWRuZXdBdHRyaWIpO1xuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSkge1xuICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiVW5hYmxlIHRvIHNhdmUgY2hhbmdlcy4gRXhpdGluZy5cIik7XG4gICAgICAgICAgICAgICAgbG9nLndhcm4odmllLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9ICAgICAgICBcbiAgICB9XG4gICAgbWkuc2V0Q3VzdG9tRmllbGRWYWx1ZShxdW90ZU1hdGVyaWFscywgb2JqTGlzdCk7XG4gICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCxmYWxzZSk7XG4gICAgXG4gICAgZGVmIGZpZWxkQ29uZmlnID0gb2ZmZXJGcm9tUmVwYWlyLmdldFJlbGV2YW50Q29uZmlnKGxpbmtlZElzc3VlKVxuICAgIC8vbG9nLndhcm4gXCJmaWVsZENvbmZpZzogXCIgKyBmaWVsZENvbmZpZ1xuICAgIGRlZiBjZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09IFwiWWVzXCIgfVxuICAgIGxvZy5kZWJ1ZyBcInRyYW5zaXRpb24gZmllbGQgdmFsdWU6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXJyZW50VXNlclRyYW5zaXRpb24pXG4gICAgLy9sb2cuZGVidWcgXCJjdXJyZW50VXNlclRyYW5zaXRpb246IFwiICsgY3VycmVudFVzZXJUcmFuc2l0aW9uXG4gICAgcG1Jc3N1ZUZpZWxkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBtSXNzdWVGaWVsZCksIGlzc3VlLmtleS50b1N0cmluZygpKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuICAgIG9mZmVyRnJvbVJlcGFpci51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShvZmZlcklzc3VlQm9vbEZpZWxkKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcbiAgICBcbiAgICBmaWVsZENvbmZpZyA9IG9mZmVySXNzdWVCb29sRmllbGQuZ2V0UmVsZXZhbnRDb25maWcobGlua2VkSXNzdWUpXG4gICAgLy9sb2cud2FybiBcImZpZWxkQ29uZmlnOiBcIiArIGZpZWxkQ29uZmlnXG4gICAgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICBvZmZlcklzc3VlQm9vbEZpZWxkLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG9mZmVySXNzdWVCb29sRmllbGQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuICAgIFxuICAgIGRlZiB1c2VyVHJhbnNpdGlvbiA9IHVzZXJNYW5hZ2VyLmdldFVzZXJCeU5hbWUoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXJyZW50VXNlclRyYW5zaXRpb24pLnRvU3RyaW5nKCkpXG5cdGxvZy5kZWJ1ZyBcInVzZXJUcmFuc2l0aW9uOiBcIiArIHVzZXJUcmFuc2l0aW9uXG4gICAgaWYgKHVzZXJUcmFuc2l0aW9uICE9IG51bGwgJiYgKGdyb3VwTWFuYWdlci5nZXRVc2Vyc0luR3JvdXAoc3VwcGxpZXJBZG0pLmNvbnRhaW5zKHVzZXJUcmFuc2l0aW9uKSB8fCBncm91cE1hbmFnZXIuZ2V0VXNlcnNJbkdyb3VwKHN1cHBsaWVyVGVjaCkuY29udGFpbnModXNlclRyYW5zaXRpb24pKSkge1xuICAgICAgICAvLyBUcmFuc2l0aW9uIGV4ZWN1dGVkIGJ5IGV4dGVybmFsIHVzZXIgLS0+IHRvIGJlIGFkZGVkIGFsc28gaW50ZXJuYWwgdGVjaHMgcm9sZSBncm91cHNcbiAgICAgICAgLy8gRW1haWwgaGFzIG5vdCB0byBiZSBzZW50XG4gICAgICAgIC8vIFNOIHdpbGwgYmUgY3JlYXRlZCBhcyBzb29uIGFzIHRoZSBxdW90YXRpb24gaGFzIGJlZW4gY29uZmlybWVkIC0gdG8gYmUgY2hlY2tlZCB3aGVuIHRvIGNyZWF0ZSBTTiBpZiBubyBxdW90YXRpb24gZnJvbSBzdXBwbGllciBpcyBuZWVkZWQgLSB3aGVuIHRoZSBxdW90YXRpb24gaGFzIGJlZW4gc2VudCB0byB0aGUgY3VzdG9tZXI/XG4gICAgICAgIGxvZy5kZWJ1ZyBcImluIHV0ZW50ZSBzdXBwbGllclwiXG4gICAgICAgIHRyYW5zaXRpb25DaGVjay51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuICAgICAgICBvZmZlckZyb21SZXBhaXIudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUob2ZmZXJGcm9tUmVwYWlyKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcblx0fVxuICAgIFxuICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKGN1cnJlbnRVc2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTtcbiAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGxpbmtlZElzc3VlKSAgICBcbiAgICBcbiAgICBvZmZlcklzc3VlRmllbGQudXBkYXRlVmFsdWUobnVsbCwgaXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUob2ZmZXJJc3N1ZUZpZWxkKSwgbGlua2VkSXNzdWUua2V5LnRvU3RyaW5nKCkpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG4gICAgXG4gICAgaWYgKGRlc3RTdGF0dXNPYmplY3QubmFtZSA9PSBwcm9wZXJ0aWVzWyd3Zi5vcGVuJ10udG9TdHJpbmcoKSkge1xuICAgICAgICAvLyBQcmVwYXJlIG91ciBpbnB1dCBmb3IgdGhlIHRyYW5zaXRpb25cbiAgICAgICAgZGVmIGlzc3VlSW5wdXRQYXJhbWV0ZXJzID0gaXNzdWVTZXJ2aWNlLm5ld0lzc3VlSW5wdXRQYXJhbWV0ZXJzKClcbiAgICAgICAgaXNzdWVJbnB1dFBhcmFtZXRlcnMud2l0aCB7XG4gICAgICAgICAgICBzZXRTa2lwU2NyZWVuQ2hlY2sodHJ1ZSlcbiAgICAgICAgfVxuICAgICAgICAvLyBWYWxpZGF0ZSB0cmFuc2l0aW9uaW5nIHRoZSBsaW5rZWQgaXNzdWUgdG8gXCJTaWducyBOZWVkZWRcIlxuICAgICAgICBkZWYgdmFsaWRhdGlvblJlc3VsdCA9IGlzc3VlU2VydmljZS52YWxpZGF0ZVRyYW5zaXRpb24odXNlciwgbGlua2VkSXNzdWUuaWQsIDIxMjEsIGlzc3VlSW5wdXRQYXJhbWV0ZXJzKVxuICAgICAgICBpZiAodmFsaWRhdGlvblJlc3VsdC5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHRyYW5zaXRpb25cbiAgICAgICAgICAgIGRlZiBpc3N1ZVJlc3VsdCA9IGlzc3VlU2VydmljZS50cmFuc2l0aW9uKHVzZXIsIHZhbGlkYXRpb25SZXN1bHQpXG4gICAgICAgICAgICBpZiAoISBpc3N1ZVJlc3VsdC5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcoXCJGYWlsZWQgdG8gdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke2lzc3VlUmVzdWx0LmVycm9yQ29sbGVjdGlvbn1cIilcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyhcIlRyYW5zYXppb25lIGZhdHRhXCIpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsb2cuZGVidWcoXCJDb3VsZCBub3QgdHJhbnNpdGlvbiB0YXNrICR7bGlua2VkSXNzdWUua2V5fSwgZXJyb3JzOiAke3ZhbGlkYXRpb25SZXN1bHQuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICB9XG4gICAgfVxuICAgIFxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">00edbe12-4a7a-49dc-b5c0-c3f556043537</arg>
                  <arg name="FIELD_NOTES">YCFgQ2xlYXIgY2FjaGU=</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG4vKiBSRVNUIEFQSSBwZXIgR2VuZXJhemlvbmUgQWxsZWdhdG8gUmFwcG9ydG8gZGkgSW50ZXJ2ZW50byAqL1xucmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuLypTY3JpcHQgVmFyaWFibGVzKi9cbi8vUGVyIHRlc3QgZGEgY29uc29sZVxuLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIk9QVVQtMTQwNjJcIilcbmJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL2NsZWFyQ2FjaGUvZGF0YU9iamVjdFwiXG5kZWYgYm9keV9yZXEgPSBbXVxuVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbmNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5sb2cuZGVidWcgXCJib2R5X3JlcTogXCIgKyBib2R5X3JlcVxuY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxubG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5jb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbn0iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_23401</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="81" name="Modifica Analisi dei Rischi">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">545a177d-7402-4393-ad16-ddacdcc93582</arg>
                <arg name="FIELD_NOTES">YCFgT1BfVEtUX0FTU0lHTkVEX1RPICE9IEFTU0lTVEFOVA==</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXHJcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvblxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxyXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvbkJ1aWxkZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXHJcbmltcG9ydCBqYXZhLnRleHQuU2ltcGxlRGF0ZUZvcm1hdDtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZVxyXG5cclxuZGVmIGFzc2lnbmVkVG8gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEtUX0FTU0lHTkVEX1RPXCIpWzBdXHJcbmxvZy5kZWJ1ZyBcImlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzaWduZWRUbyk6IFwiICsgaXNzdWUuZ2V0UGFyZW50T2JqZWN0KCkuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NpZ25lZFRvKVxyXG5cclxuIWlzc3VlLmdldFBhcmVudE9iamVjdCgpLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzaWduZWRUbykudG9TdHJpbmcoKS5lcXVhbHMoXCJBU1NJU1RBTlRcIikiLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="7">
              <post-functions>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue">50</arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field">customfield_23411</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.25.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="field3">customfield_23601</arg>
                  <arg name="field2">customfield_23600</arg>
                  <arg name="scopeSource-jql"></arg>
                  <arg name="field4">customfield_22693</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="241" name="Clear OP_SUPPLIER">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">92c7bf91-5f62-49c4-bba0-b13767297b6d</arg>
                <arg name="FIELD_INVERT_CONDITION"></arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.UserCondition</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_USER_IDS">arianna.fabbri</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="4">
              <post-functions>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="uuid">bc2c77b9-422d-4c36-9198-94c3d5bcc1cb</arg>
                  <arg name="field">customfield_23235</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.33.0</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="field2">customfield_22813</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="331" name="Genera Operazioni di Manutenzione ODS">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">a7f76fba-0345-4820-a2e4-606ba2b00e30</arg>
                <arg name="FIELD_NOTES">YCFgUE0gVGFzayBzZW56YSBQTSBvcGVyYXRpb25zIE5PTiBBU1NJU1RBTlQgKGkgdGt0IGFzc2lzdGFudCBOT04gZGV2b25vIHJpcGV0ZXJlIGxlIFBNIE9wZXJhdGlvbnMp</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="disabled">false</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXHJcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvblxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxyXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvbkJ1aWxkZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXHJcbmltcG9ydCBqYXZhLnRleHQuU2ltcGxlRGF0ZUZvcm1hdDtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZVxyXG5cclxuZGVmIGFzc2lnbmVkVG8gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEtUX0FTU0lHTkVEX1RPXCIpWzBdXHJcbmRlZiBwbU9wZXJhdGlvbnMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfUE1fT1BFUkFUSU9OU19PRFNcIilbMF1cclxubG9nLmRlYnVnIFwiaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NpZ25lZFRvKTogXCIgKyBpc3N1ZS5nZXRQYXJlbnRPYmplY3QoKS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2lnbmVkVG8pXHJcblxyXG5pc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBtT3BlcmF0aW9ucykgPT0gbnVsbCAmJiAoaXNzdWUuZ2V0UGFyZW50T2JqZWN0KCkuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NpZ25lZFRvKSA9PSBudWxsIHx8ICFpc3N1ZS5nZXRQYXJlbnRPYmplY3QoKS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2lnbmVkVG8pLnRvU3RyaW5nKCkuZXF1YWxzKFwiQVNTSVNUQU5UXCIpKSIsInNjcmlwdFBhdGgiOm51bGx9</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">8b47115e-3d2f-45b3-8019-a9a7d45a9ae4</arg>
              <arg name="FIELD_NOTES">YCFgUE0gVGFzazogZ2VuZXJhIG9wZXJhemlvbmkgZGkgbWFudXRlbnppb25l</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XHJcbmltcG9ydCBncm9vdnkuanNvbi5TdHJlYW1pbmdKc29uQnVpbGRlcjtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5DdXN0b21GaWVsZE1hbmFnZXI7XHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3I7XHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXHJcbmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMuY29kZWMuYmluYXJ5LkJhc2U2NDtcclxuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXHJcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5XHJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXHJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXHJcblxyXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXHJcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXHJcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XHJcblx0cHJvcGVydGllcy5sb2FkKGl0KVxyXG59XHJcbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxyXG5cclxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xyXG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XHJcbmRlZiByZXF1ZXN0TWV0aG9kXHJcbmRlZiBiYXNlVVJMXHJcblxyXG5kZWYgcG1PcGVyYXRpb25zID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9QTV9PUEVSQVRJT05TX09EU1wiKVswXSlcclxuaWYocG1PcGVyYXRpb25zID09IG51bGwpe1xyXG5cclxuICAgIC8qIFJFU1QgQVBJIHBlciBwdWxpemlhIGNhY2hlIGlzc3VlIGxpbmthdGEgKi9cclxuICAgIHJlcXVlc3RNZXRob2QgPSBcIlBVVFwiO1xyXG4gICAgLypTY3JpcHQgVmFyaWFibGVzKi9cclxuICAgIC8vUGVyIHRlc3QgZGEgY29uc29sZVxyXG4gICAgLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy0zMjUzNVwiKVxyXG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvcG0tc3VidGFzay9cIiArIGlzc3VlLmtleSArIFwiL29wZXJhdGlvbnNcIlxyXG4gICAgVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcclxuICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XHJcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XHJcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcclxuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xyXG4gICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcclxuICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcclxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xyXG4gICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxyXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxyXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxyXG5cclxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XHJcbiAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxyXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcclxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXHJcbiAgICB9XHJcbiAgICBJc3N1ZUluZGV4aW5nU2VydmljZSBcdGlzc3VlSW5kZXhpbmdTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KElzc3VlSW5kZXhpbmdTZXJ2aWNlKVxyXG4gICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChpc3N1ZSlcclxufSIsInNjcmlwdFBhdGgiOm51bGx9</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">3f04f6dd-7343-490f-aa00-b6c36291a7d0</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXJcclxuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEud29ya2Zsb3cuSmlyYVdvcmtmbG93XHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLnNjcmVlbi5GaWVsZFNjcmVlbkxheW91dEl0ZW1cclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuc2NyZWVuLkZpZWxkU2NyZWVuVGFiXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkZpZWxkTWFuYWdlclxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5zY3JlZW4uRmllbGRTY3JlZW5cclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuc2NyZWVuLkZpZWxkU2NyZWVuTWFuYWdlclxyXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5sb2FkZXIuQWN0aW9uRGVzY3JpcHRvclxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLndvcmtmbG93LldvcmtmbG93TWFuYWdlclxyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XHJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyO1xyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGw7XHJcblxyXG5kZWYgcmVxdWVzdE1ldGhvZFxyXG5kZWYgYmFzZVVSTFxyXG5kZWYgcmVzcG9uc2VDb2RlXHJcbmRlZiByZXNwb25zZU1lc3NhZ2VcclxuZGVmIGJvZHlSZXEgPSBbXVxyXG5kZWYgYnJcclxuTWFwPFN0cmluZywgT2JqZWN0PiBjdXN0b21GaWVsZE1hcCA9IG5ldyBIYXNoTWFwPFN0cmluZyxPYmplY3Q+KCk7XHJcblxyXG50cnkge1xyXG4gICAgUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxyXG4gICAgRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcclxuICAgIHByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XHJcbiAgICAgICAgcHJvcGVydGllcy5sb2FkKGl0KVxyXG4gICAgfVxyXG5cclxuICAgIGRlZiBzZXJ2ZXJCYXNlID0gU3RyaW5nLmZvcm1hdChcImh0dHA6Ly8lcy9vcFwiLCBwcm9wZXJ0aWVzWydhcGkuZW52J10pXHJcbiAgICBkZWYgdHJhbnNhY3Rpb25BY3Rpb24gPSBcInZhbGlkYXRvcnNcIlxyXG5cclxuICAgIFVSTCB1cmxcclxuICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb25cclxuICAgIHJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcclxuXHJcbiAgICBiYXNlVVJMID0gU3RyaW5nLmZvcm1hdChcIiVzL3Jlc3QvamlyYS93b3JrZmxvd3MvJXMvJXNcIiwgc2VydmVyQmFzZSwgdHJhbnNpZW50VmFycy5hY3Rpb25JZCwgdHJhbnNhY3Rpb25BY3Rpb24pO1xyXG5cclxuICAgIGxvZy5kZWJ1ZyBiYXNlVVJMO1xyXG5cclxuICAgIFdvcmtmbG93TWFuYWdlciB3b3JrZmxvd01hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRXb3JrZmxvd01hbmFnZXIoKTtcclxuICAgIEppcmFXb3JrZmxvdyBqaXJhV29ya2Zsb3cgPSB3b3JrZmxvd01hbmFnZXIuZ2V0V29ya2Zsb3codHJhbnNpZW50VmFycy5pc3N1ZSk7XHJcblxyXG4gICAgQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xyXG4gICAgXHJcbiAgICBsb2cuZGVidWcgamlyYVdvcmtmbG93LmdldE5hbWUoKTtcclxuICAgIFxyXG4gICAgQWN0aW9uRGVzY3JpcHRvciBhZCA9IHdvcmtmbG93TWFuYWdlci5nZXRBY3Rpb25EZXNjcmlwdG9yKHRyYW5zaWVudFZhcnMuaXNzdWUsIHRyYW5zaWVudFZhcnMuYWN0aW9uSWQpO1xyXG5cclxuICAgIGxvZy5kZWJ1ZyBhZC5nZXROYW1lKCkgICAgICAgICAgICAgIC8vR2VuZXJhIE9wZXJhemlvbmkgZGkgTWFudXRlbnppb25lIE9EU1xyXG4gICAgbG9nLmRlYnVnIGFkLmdldE1ldGFBdHRyaWJ1dGVzKCkgICAgLy97b3BzYmFyLXNlcXVlbmNlPTEwLCBqaXJhLmRlc2NyaXB0aW9uPSwgamlyYS5maWVsZHNjcmVlbi5pZD0xOTkxMH1cclxuXHJcbiAgICBkZWYgYWRNZXRhID0gYWQuZ2V0TWV0YUF0dHJpYnV0ZXMoKTtcclxuICAgIGRlZiBmaWVsZFNjcmVlbklkID0gYWRNZXRhLmdldChcImppcmEuZmllbGRzY3JlZW4uaWRcIik7XHJcbiAgICBsb2cuZGVidWcgXCJGaWVsZCBzY3JlZW4gaWQ6IFwiICsgZmllbGRTY3JlZW5JZFxyXG5cclxuICAgIGlmKGZpZWxkU2NyZWVuSWQgIT0gbnVsbCAmJiBmaWVsZFNjcmVlbklkICE9IFwiXCIpIHtcclxuICAgICAgICBGaWVsZFNjcmVlbk1hbmFnZXIgZmllbGRTY3JlZW5NYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KEZpZWxkU2NyZWVuTWFuYWdlci5jbGFzcyk7XHJcbiAgICAgICAgRmllbGRTY3JlZW4gZmllbGRTY3JlZW4gPSBmaWVsZFNjcmVlbk1hbmFnZXIuZ2V0RmllbGRTY3JlZW4oTG9uZy52YWx1ZU9mKGZpZWxkU2NyZWVuSWQudG9TdHJpbmcoKSkpO1xyXG4gICAgICAgIExpc3Q8RmllbGRTY3JlZW5UYWI+IGZzdHMgPSBmaWVsZFNjcmVlbi5nZXRUYWJzKCk7XHJcbiAgICAgICAgZm9yIChGaWVsZFNjcmVlblRhYiBmc3QgOiBmc3RzKSB7XHJcbiAgICAgICAgICAgIExpc3Q8RmllbGRTY3JlZW5MYXlvdXRJdGVtPiBxd2UgPSBmc3QuZ2V0RmllbGRTY3JlZW5MYXlvdXRJdGVtcygpO1xyXG4gICAgICAgICAgICBmb3IgKEZpZWxkU2NyZWVuTGF5b3V0SXRlbSBmc2xpIDogcXdlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZnNsaS5nZXRGaWVsZElkKCkgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgQ3VzdG9tRmllbGQgY3VzdG9tRmllbGQgPSBjdXN0b21GaWVsZE1hbmFnZXIuZ2V0Q3VzdG9tRmllbGRPYmplY3QoZnNsaS5nZXRGaWVsZElkKCkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1c3RvbUZpZWxkID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRlZiBjdXN0b21GaWVsZFZhbHVlID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0b21GaWVsZCk7XHJcbiAgICAgICAgICAgICAgICBjdXN0b21GaWVsZE1hcC5wdXQoZnNsaS5nZXRGaWVsZElkKCksIGN1c3RvbUZpZWxkVmFsdWUgPT0gbnVsbCA/IG51bGwgOiBjdXN0b21GaWVsZFZhbHVlLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY3VzdG9tRmllbGRNYXAgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgbG9nLmRlYnVnIGN1c3RvbUZpZWxkTWFwXHJcblxyXG4gICAgYm9keVJlcSA9IFsgXHJcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXHJcbiAgICAgICAgXCJhY3Rpb25OYW1lXCI6IGFkLmdldE5hbWUoKSxcclxuICAgICAgICBcImppcmFXb3JrZmxvd05hbWVcIjogamlyYVdvcmtmbG93LmdldE5hbWUoKSxcclxuICAgICAgICBcImN1c3RvbUZpZWxkTWFwXCI6IGN1c3RvbUZpZWxkTWFwLFxyXG4gICAgICAgIFwicHJvcGVydGllc1wiOiBwcm9wZXJ0aWVzXHJcbiAgICBdIFxyXG5cclxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxyXG4gICAgbG9nLmRlYnVnIFwiYm9keVJlcSBTTjogXCIgKyBib2R5UmVxXHJcblxyXG4gICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxyXG4gICAgY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcclxuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcclxuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xyXG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XHJcbiAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xyXG4gICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xyXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5UmVxKSB9XHJcbiAgICBcclxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xyXG4gICAgcmVzcG9uc2VDb2RlID0gY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpICAgIFxyXG4gICAgICAgIFxyXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2UgSHR0cFN0YXR1c0NvZGU6IFwiICsgcmVzcG9uc2VDb2RlXHJcbiAgICAgICAgXHJcbiAgICAvLyBJZiBiYWNrZW5kIHJlcGxpZXMgd2l0aCAyMDAgdGhlbiB0aGUgY29uZGl0aW9uIGlzIHBhc3NlZCAgICBcclxuICAgIGlmKFwiMjAwXCIuZXF1YWxzKHJlc3BvbnNlQ29kZSkpe1xyXG4gICAgICAgIGxvZy5kZWJ1ZyBcIk9LXCJcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy9UaGlzIGlzIGEgYmFja2VuZCBlcnJvci4uIGxvZ1xyXG4gICAgICAgIGxvZy5kZWJ1ZyBcIkJhY2tlbmQgZXJyb3JcIlxyXG5cclxuICAgICAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxyXG5cclxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXHJcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVJST1JcIikgLy9pZiBkeW5hbWljLCBiZXR0ZXJcclxuICAgICAgICBlTGlzdEVycm9ycy5hZGQobnVsbCkgICAvL2l0IHNvdW5kcyBpdCBpcyB1c2VkIGFzIHNlcGFyYXRvclxyXG5cclxuICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XHJcbiAgICAgICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xyXG5cclxuICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxyXG4gICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpXHJcbiAgICAgICAgaWYoanNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXApe1xyXG4gICAgICAgICAgICAvL2Vycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsganNvbl9vYmplY3QubWVzc2FnZSlcclxuICAgICAgICAgICAgaWYoanNvbl9vYmplY3QuZXJyb3JzIGluc3RhbmNlb2YgTGlzdCl7XHJcbiAgICAgICAgICAgICAgICBmb3IoZGVmIGN1ciA6IChMaXN0KWpzb25fb2JqZWN0LmVycm9ycyl7XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjdXIudG9TdHJpbmcoKSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVycm9yTXNncy5hZGQoanNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAgIH0gICAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcclxuICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXHJcblxyXG4gICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXHJcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXHJcbiAgICB9XHJcbn0gY2F0Y2ggKEV4Y2VwdGlvbiBlKXtcclxuICAgIC8vVGhpcyBpcyBhbiBleGNlcHRpb24gaW4gdGhlIHNjcmlwdFxyXG4gICAgbG9nLmRlYnVnIFwiRXhjZXB0aW9uIHJhaXNlZFwiXHJcbiAgICBsb2cuZXJyb3IgZVxyXG4gICAgaWYoZSBpbnN0YW5jZW9mIEludmFsaWRJbnB1dEV4Y2VwdGlvbil7XHJcbiAgICAgICAgdGhyb3cgZTtcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJWYWxpZGF0b3JzIGZhaWxlZFwiKTtcclxufVxyXG4iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="Not Done" status="Done" step="4">
              <post-functions>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdateissuestatus-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowcreatecomment-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowgeneratechangehistory-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowreindexissue-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="5" name="Done">
      <meta name="jira.status.id">10007</meta>
      <actions>
        <action id="71" name="Riapri Manutenzione" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">20400</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">7d8ccd98-77a0-4688-93c3-e444762d6232</arg>
                <arg name="FIELD_NOTES">YCFgTm90IGF2YWlsYWJsZSBpZiBwYXJlbnQgdGlja2V0IGhhcyBiZWVuIGNsb3NlZCBvciBjb21wbGV0ZWQgb3Igc3VzcGVuZGVkIG9yIGNhbmNlbGVk</arg>
                <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJkZWYgc3RhdHVzVG9CbG9jayA9IFsgXCJDb21wbGV0ZWQgdG8gYmUgQ2xvc2VkXCIsIFwiQ2xvc2VkXCIsIFwiU3VzcGVuZGVkXCIsIFwiQ2FuY2VsZWRcIl07XHJcblN0cmluZyBwYXJlbnRPYmpTdGF0dXNOYW1lID0gaXNzdWUucGFyZW50T2JqZWN0Py5zdGF0dXM/Lm5hbWU7XHJcbmxvZy5pbmZvKFwicGFyZW50T2JqU3RhdHVzTmFtZSA9ICR7cGFyZW50T2JqU3RhdHVzTmFtZX1cIilcclxucGFzc2VzQ29uZGl0aW9uID0gIXN0YXR1c1RvQmxvY2suY29udGFpbnMocGFyZW50T2JqU3RhdHVzTmFtZSk7Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.CustomScriptCondition</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">b608faa9-b27a-4578-b2c5-21e4edfab8fb</arg>
              <arg name="FIELD_NOTES">YCFgQ29uZmlybSBSZW9wZW4=</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXHJcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvblxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxyXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvbkJ1aWxkZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXHJcbmltcG9ydCBqYXZhLnRleHQuU2ltcGxlRGF0ZUZvcm1hdDtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZVxyXG5cclxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxyXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxyXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xyXG5cdHByb3BlcnRpZXMubG9hZChpdClcclxufVxyXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcclxuXHJcbmRlZiB3TGlzdCA9IG5ldyBBcnJheUxpc3QoKVxyXG5kZWYgdHJhbnNpdGlvbkNoZWNrID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5jaGVja0FuZENvbmZpcm0nXS50b1N0cmluZygpKVswXVxyXG5kZWYgd2FybmluZ0VtcHR5RmllbGRzID0gbmV3IEFycmF5TGlzdCgpXHJcbmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcclxuZGVmIHJlcXVpcmVkRmllbGRzID0gbmV3IEFycmF5TGlzdCgpXHJcblxyXG5sb2cuZGVidWcgcHJvcGVydGllc0ZpbGVcclxubG9nLmRlYnVnIHByb3BlcnRpZXNbJ2NmLnN1cHBsaWVyJ10udG9TdHJpbmcoKVxyXG5kZWYgdHJvdmF0bz1mYWxzZVxyXG5mb3IgKHMgaW4gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLnN1cHBsaWVyJ10udG9TdHJpbmcoKSkpe1xyXG4gICAgaWYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocykgIT0gbnVsbCl7XHJcbiAgICAgICAgdHJvdmF0bz10cnVlXHJcbiAgICB9XHJcbn1cclxuXHJcbi8vU2UgaWwgdGlja2V0IFx1MDBlOCBzdGF0byBlc2VndWl0byBkYSBmb3JuaXRvcmUgbGEgcmlhcGVydHVyYSBub24gZGV0ZXJtaW5hIGFsY3VuIHdhcm5pbmcuXHJcbmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKS50b1N0cmluZygpLmVxdWFscyhcIlllc1wiKSB8fCB0cm92YXRvKXtcclxuICAgIC8vbG9nLmRlYnVnIFwicmV0dXJuIHRydWVcIlxyXG4gICAgcmV0dXJuIHRydWVcclxufWVsc2V7XHJcbiAgICAgICAgZGVmIHdMaXN0Q29uZmlybUVtcHR5ID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKFwiV1wiKVxyXG4gICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChcIkNPTkZJUk1fUkVPUEVOXCIpXHJcbiAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKG51bGwpXHJcblxyXG4gICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eSlcclxuXHJcbiAgICAgICAgb3V0cHV0LmFkZCh3TGlzdClcclxuICAgICAgICBsb2cuZGVidWcgXCJ0aHJvdyBleGNlcHRpb246IFwiICsgb3V0cHV0LnRvU3RyaW5nKClcclxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJXXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcclxufSIsInNjcmlwdFBhdGgiOm51bGx9</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">55b452ad-e5af-46ca-a948-dfb76b57fa1b</arg>
              <arg name="FIELD_NOTES">YCFgU0FQOiB1cGRhdGUgU04gc3RhdHVzIHRvIElOUA==</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XHJcbmltcG9ydCBncm9vdnkuanNvbi5TdHJlYW1pbmdKc29uQnVpbGRlcjtcclxuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxyXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XHJcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5XHJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXHJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbmZpZy5TdWJUYXNrTWFuYWdlclxyXG5cclxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxyXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxyXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xyXG5cdHByb3BlcnRpZXMubG9hZChpdClcclxufVxyXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGlua1xyXG5cclxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpXHJcbi8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMjM5ODI0XCIpXHJcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcclxuZGVmIHN1cHBsaWVyID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5zdXBwbGllciddID8gcHJvcGVydGllc1snY2Yuc3VwcGxpZXInXS50b1N0cmluZygpIDogXCJPUF9TVVBQTElFUlwiKVswXVxyXG5kZWYgcmVxdWVzdE1ldGhvZFxyXG5kZWYgYmFzZVVSTFxyXG5VUkwgdXJsXHJcbkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb25cclxuXHJcbmRlZiBib2R5X3JlcSA9IFtdXHJcbnJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcclxuXHJcbmJvZHlfcmVxID0gW1xyXG4gICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXHJcbiAgICBcInN0YXR1c1wiOiBcIklOUFwiXHJcbl0gXHJcblxyXG5iYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS9hZnRlci9zYWxlcy9jcmVhdGUvc2VydmljZS9ub3RpZmljYXRpb25cIlxyXG5sb2cuZGVidWcgXCJib2R5X3JlcSBTTjogXCIgKyBib2R5X3JlcVxyXG5sb2cuZGVidWcgXCJiYXNlVVJMIFNOOiBcIiArIGJhc2VVUkxcclxudXJsID0gbmV3IFVSTChiYXNlVVJMKVxyXG5jb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xyXG5jb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XHJcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xyXG5jb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcclxuY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcclxuY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xyXG5jb25uZWN0aW9uLm91dHB1dFN0cmVhbVxyXG5jb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XHJcbmxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxyXG5jb25uZWN0aW9uLmNvbm5lY3QoKTtcclxuXHJcbmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcclxuZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXHJcbmRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxyXG5kZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXHJcblxyXG5pZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xyXG4gICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxyXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxyXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxyXG4gICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxyXG4gICAgZUxpc3RFcnJvcnMuYWRkKFwiU05fVVBEQVRFXCIpXHJcbiAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKCkpXHJcbiAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxyXG4gICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxyXG5cclxuICAgIG91dHB1dC5hZGQoZUxpc3QpXHJcbiAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcclxufSIsInNjcmlwdFBhdGgiOm51bGx9</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="4">
              <post-functions>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="append.value"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.value">Yes</arg>
                  <arg name="uuid">672cccb0-e1e5-4af5-9fda-db824d27d198</arg>
                  <arg name="field.name">customfield_23925</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.43.0</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">abdc5f30-4e69-401f-b00b-a66eb9ce6634</arg>
                  <arg name="FIELD_NOTES">YCFgSGlkZSBpc3N1ZXMgZXZlbnR1YWxseSBjcmVhdGVkIGZvciByZXBsYWNlZCBtYXRlcmlhbHMgYW5kIHJlcXVpcmVkIG1hdGVyaWFscw==</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS51dGlsLkRlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5ldmVudC50eXBlLkV2ZW50RGlzcGF0Y2hPcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2U7XG5pbXBvcnQgb3JnLm9mYml6LmNvcmUuZW50aXR5LkRlbGVnYXRvckludGVyZmFjZVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS51dGlsLkJ1aWxkVXRpbHNJbmZvXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmlzc3VldHlwZS5Jc3N1ZVR5cGVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29uZmlnLlJlc29sdXRpb25NYW5hZ2VyXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKVxuLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy01ODc4NlwiKVxuXG4vL2ZpbmRpbmcgdGhlIGlzc3VlIHlvdSB3YW50IHRvIGRlbGV0ZVxuZGVmIHJlcGFpclRrdEZpZWxkID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfTUFJTlRFTkFOQ0VfTElOS0VEX0lTU1VFXCIpWzBdXG5kZWYgbW9kZXJuaXphdGlvblRrdEZpZWxkID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfTU9ERVJOSVpBVElPTl9MSU5LRURfSVNTVUVcIilbMF1cbmRlZiBvZmZlclRrdEZpZWxkID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfUVVPVEVfTElOS0VEX0lTU1VFXCIpWzBdXG5kZWYgcmVwYWlyVGt0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShyZXBhaXJUa3RGaWVsZClcbmRlZiBvZmZlclRrdCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUob2ZmZXJUa3RGaWVsZClcbmRlZiBtb2Rlcm5pemF0aW9uVGt0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShtb2Rlcm5pemF0aW9uVGt0RmllbGQpXG5Jc3N1ZUluZGV4aW5nU2VydmljZSBcdGlzc3VlSW5kZXhpbmdTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KElzc3VlSW5kZXhpbmdTZXJ2aWNlKVxuZGVmIGRlbGVnYXRvckludGVyZmFjZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChEZWxlZ2F0b3JJbnRlcmZhY2UpXG5kZWYgYnVpbGRVdGlsc0luZm8gPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoQnVpbGRVdGlsc0luZm8pXG5kZWYgY29uc3RhbnRzTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbnN0YW50c01hbmFnZXIoKVxuXG5kZWYgY3VzdG9tZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9DVVNUT01FUlwiKVswXVxuZGVmIHNpdGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9TSVRFXCIpWzBdXG5kZWYgYXNzZXQgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9BU1NFVFwiKVswXVxuZGVmIHN1cHBsaWVyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfU1VQUExJRVJcIilcbmRlZiB2aXNLZXkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9US1RfVklTSUJJTElUWV9LRVlcIilbMF1cbmRlZiBkZWxldGVkRnJvbSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0RFTEVURURfRlJPTV9JU1NVRVwiKVswXVxubG9nLmRlYnVnIFwicmVwYWlyVGt0IHRvIGJlIGRlbGV0ZWQ6IFwiICsgcmVwYWlyVGt0XG5sb2cuZGVidWcgXCJvZmZlclRrdCB0byBiZSBkZWxldGVkOiBcIiArIG9mZmVyVGt0XG5sb2cuZGVidWcgXCJtb2Rlcm5pemF0aW9uVGt0IHRvIGJlIGRlbGV0ZWQ6IFwiICsgbW9kZXJuaXphdGlvblRrdFxuXG5kZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5qaXJhQXV0aGVudGljYXRpb25Db250ZXh0LmxvZ2dlZEluVXNlclxuZGVmIHJlc29sdXRpb25NYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KFJlc29sdXRpb25NYW5hZ2VyKVxuTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rXG5MaXN0PElzc3VlTGluaz4gYWxsT3V0SXNzdWVMaW5rXG5cbmlmKHJlcGFpclRrdCl7XG4gICAgZGVsZXRlZEZyb20udXBkYXRlVmFsdWUobnVsbCwgaXNzdWVNYW5hZ2VyLmdldElzc3VlT2JqZWN0KHJlcGFpclRrdCksIG5ldyBNb2RpZmllZFZhbHVlKGlzc3VlTWFuYWdlci5nZXRJc3N1ZU9iamVjdChyZXBhaXJUa3QpLmdldEN1c3RvbUZpZWxkVmFsdWUoZGVsZXRlZEZyb20pLCBpc3N1ZS5rZXkpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG4gICAgY3VzdG9tZXIudXBkYXRlVmFsdWUobnVsbCwgaXNzdWVNYW5hZ2VyLmdldElzc3VlT2JqZWN0KHJlcGFpclRrdCksIG5ldyBNb2RpZmllZFZhbHVlKGlzc3VlTWFuYWdlci5nZXRJc3N1ZU9iamVjdChyZXBhaXJUa3QpLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VzdG9tZXIpLCBudWxsKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuICAgIHNpdGUudXBkYXRlVmFsdWUobnVsbCwgaXNzdWVNYW5hZ2VyLmdldElzc3VlT2JqZWN0KHJlcGFpclRrdCksIG5ldyBNb2RpZmllZFZhbHVlKGlzc3VlTWFuYWdlci5nZXRJc3N1ZU9iamVjdChyZXBhaXJUa3QpLmdldEN1c3RvbUZpZWxkVmFsdWUoc2l0ZSksIG51bGwpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG4gICAgYXNzZXQudXBkYXRlVmFsdWUobnVsbCwgaXNzdWVNYW5hZ2VyLmdldElzc3VlT2JqZWN0KHJlcGFpclRrdCksIG5ldyBNb2RpZmllZFZhbHVlKGlzc3VlTWFuYWdlci5nZXRJc3N1ZU9iamVjdChyZXBhaXJUa3QpLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXQpLCBudWxsKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuICAgIHZpc0tleS51cGRhdGVWYWx1ZShudWxsLCBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVPYmplY3QocmVwYWlyVGt0KSwgbmV3IE1vZGlmaWVkVmFsdWUoaXNzdWVNYW5hZ2VyLmdldElzc3VlT2JqZWN0KHJlcGFpclRrdCkuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh2aXNLZXkpLCBudWxsKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuICAgIGZvcihjcyBpbiBzdXBwbGllcil7XG4gICAgICAgIGNzLnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlTWFuYWdlci5nZXRJc3N1ZU9iamVjdChyZXBhaXJUa3QpLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVPYmplY3QocmVwYWlyVGt0KS5nZXRDdXN0b21GaWVsZFZhbHVlKGNzKSwgbnVsbCksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcbiAgICB9XG4gICAgXG4gICAgYWxsSW5Jc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0SW53YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gaW5JdGVyYXRvciA9IGFsbEluSXNzdWVMaW5rLml0ZXJhdG9yKCk7IGluSXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgaW5JdGVyYXRvci5uZXh0KCk7XG5cbiAgICAgICAgbG9nLndhcm4gXCJJc3N1ZSBjb24gcmVsYXRlc0luSXNzdWVMaW5rXCJcbiAgICAgICAgLypFc2VndWlyZSB0cmFuc2F6aW9uZSBkaSBzdGF0byBkZWxsYSBkZXN0aW5hdGlvbklzc3VlKi9cbiAgICAgICAgZGVmIGxpbmtlZElzc3VlID0gaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpXG4gICAgICAgIGxvZy5kZWJ1ZyBcInJlcGFpclRrdC50b1N0cmluZygpOiBcIiArIHJlcGFpclRrdC50b1N0cmluZygpXG4gICAgICAgIGlmKGxpbmtlZElzc3VlLnRvU3RyaW5nKCkgPT0gcmVwYWlyVGt0LnRvU3RyaW5nKCkpe1xuICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuaXNzdWVMaW5rTWFuYWdlci5yZW1vdmVJc3N1ZUxpbmsoaXNzdWVMaW5rLCBjdXJyZW50VXNlcilcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFsbE91dElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gaW5JdGVyYXRvciA9IGFsbE91dElzc3VlTGluay5pdGVyYXRvcigpOyBpbkl0ZXJhdG9yLmhhc05leHQoKTspIHtcbiAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIGluSXRlcmF0b3IubmV4dCgpO1xuXG4gICAgICAgIGxvZy53YXJuIFwiSXNzdWUgY29uIHJlbGF0ZXNPdXRJc3N1ZUxpbmtcIlxuICAgICAgICAvKkVzZWd1aXJlIHRyYW5zYXppb25lIGRpIHN0YXRvIGRlbGxhIGRlc3RpbmF0aW9uSXNzdWUqL1xuICAgICAgICBkZWYgbGlua2VkSXNzdWUgPSBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKVxuICAgICAgICBsb2cuZGVidWcgXCJyZXBhaXJUa3QudG9TdHJpbmcoKTogXCIgKyByZXBhaXJUa3QudG9TdHJpbmcoKVxuICAgICAgICBpZihsaW5rZWRJc3N1ZS50b1N0cmluZygpID09IHJlcGFpclRrdC50b1N0cmluZygpKXtcbiAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmlzc3VlTGlua01hbmFnZXIucmVtb3ZlSXNzdWVMaW5rKGlzc3VlTGluaywgY3VycmVudFVzZXIpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXBhaXJUa3Quc2V0UmVzb2x1dGlvbihyZXNvbHV0aW9uTWFuYWdlci5nZXRSZXNvbHV0aW9uQnlOYW1lKFwiQ2FuY2VsZWRcIikpXG4gICAgcmVwYWlyVGt0LnN0b3JlKClcbiBcdGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgoaXNzdWVNYW5hZ2VyLmdldElzc3VlT2JqZWN0KHJlcGFpclRrdCkpXG59XG5cbmlmKG9mZmVyVGt0KXtcbiAgICBsb2cuZGVidWcgXCJpbiBvZmZlclRrdFwiXG4gICAgZGVsZXRlZEZyb20udXBkYXRlVmFsdWUobnVsbCwgaXNzdWVNYW5hZ2VyLmdldElzc3VlT2JqZWN0KG9mZmVyVGt0KSwgbmV3IE1vZGlmaWVkVmFsdWUoaXNzdWVNYW5hZ2VyLmdldElzc3VlT2JqZWN0KG9mZmVyVGt0KS5nZXRDdXN0b21GaWVsZFZhbHVlKGRlbGV0ZWRGcm9tKSwgaXNzdWUua2V5KSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuICAgIGN1c3RvbWVyLnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlTWFuYWdlci5nZXRJc3N1ZU9iamVjdChvZmZlclRrdCksIG5ldyBNb2RpZmllZFZhbHVlKGlzc3VlTWFuYWdlci5nZXRJc3N1ZU9iamVjdChvZmZlclRrdCkuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0b21lciksIG51bGwpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG4gICAgc2l0ZS51cGRhdGVWYWx1ZShudWxsLCBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVPYmplY3Qob2ZmZXJUa3QpLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVPYmplY3Qob2ZmZXJUa3QpLmdldEN1c3RvbUZpZWxkVmFsdWUoc2l0ZSksIG51bGwpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG4gICAgYXNzZXQudXBkYXRlVmFsdWUobnVsbCwgaXNzdWVNYW5hZ2VyLmdldElzc3VlT2JqZWN0KG9mZmVyVGt0KSwgbmV3IE1vZGlmaWVkVmFsdWUoaXNzdWVNYW5hZ2VyLmdldElzc3VlT2JqZWN0KG9mZmVyVGt0KS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0KSwgbnVsbCksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcbiAgICB2aXNLZXkudXBkYXRlVmFsdWUobnVsbCwgaXNzdWVNYW5hZ2VyLmdldElzc3VlT2JqZWN0KG9mZmVyVGt0KSwgbmV3IE1vZGlmaWVkVmFsdWUoaXNzdWVNYW5hZ2VyLmdldElzc3VlT2JqZWN0KG9mZmVyVGt0KS5nZXRDdXN0b21GaWVsZFZhbHVlKHZpc0tleSksIG51bGwpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG4gICAgZm9yKGNzIGluIHN1cHBsaWVyKXtcbiAgICAgICAgY3MudXBkYXRlVmFsdWUobnVsbCwgaXNzdWVNYW5hZ2VyLmdldElzc3VlT2JqZWN0KG9mZmVyVGt0KSwgbmV3IE1vZGlmaWVkVmFsdWUoaXNzdWVNYW5hZ2VyLmdldElzc3VlT2JqZWN0KG9mZmVyVGt0KS5nZXRDdXN0b21GaWVsZFZhbHVlKGNzKSwgbnVsbCksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcbiAgICB9XG4gICAgXG4gICAgYWxsSW5Jc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0SW53YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gaW5JdGVyYXRvciA9IGFsbEluSXNzdWVMaW5rLml0ZXJhdG9yKCk7IGluSXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgICAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgaW5JdGVyYXRvci5uZXh0KCk7XG5cbiAgICAgICAgbG9nLndhcm4gXCJJc3N1ZSBjb24gcmVsYXRlc0luSXNzdWVMaW5rXCJcbiAgICAgICAgLypFc2VndWlyZSB0cmFuc2F6aW9uZSBkaSBzdGF0byBkZWxsYSBkZXN0aW5hdGlvbklzc3VlKi9cbiAgICAgICAgZGVmIGxpbmtlZElzc3VlID0gaXNzdWVMaW5rLmdldFNvdXJjZU9iamVjdCgpXG4gICAgICAgIGxvZy5kZWJ1ZyBcIm9mZmVyVGt0LnRvU3RyaW5nKCk6IFwiICsgb2ZmZXJUa3QudG9TdHJpbmcoKVxuICAgICAgICBsb2cuZGVidWcgXCJsaW5rZWRJc3N1ZTogXCIgKyBsaW5rZWRJc3N1ZVxuICAgICAgICBpZihsaW5rZWRJc3N1ZS50b1N0cmluZygpID09IG9mZmVyVGt0LnRvU3RyaW5nKCkpe1xuICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuaXNzdWVMaW5rTWFuYWdlci5yZW1vdmVJc3N1ZUxpbmsoaXNzdWVMaW5rLCBjdXJyZW50VXNlcilcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFsbE91dElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSlcbiAgICBmb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gaW5JdGVyYXRvciA9IGFsbE91dElzc3VlTGluay5pdGVyYXRvcigpOyBpbkl0ZXJhdG9yLmhhc05leHQoKTspIHtcbiAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIGluSXRlcmF0b3IubmV4dCgpO1xuXG4gICAgICAgIGxvZy53YXJuIFwiSXNzdWUgY29uIHJlbGF0ZXNPdXRJc3N1ZUxpbmtcIlxuICAgICAgICAvKkVzZWd1aXJlIHRyYW5zYXppb25lIGRpIHN0YXRvIGRlbGxhIGRlc3RpbmF0aW9uSXNzdWUqL1xuICAgICAgICBkZWYgbGlua2VkSXNzdWUgPSBpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKVxuICAgICAgICBsb2cuZGVidWcgXCJvZmZlclRrdC50b1N0cmluZygpOiBcIiArIG9mZmVyVGt0LnRvU3RyaW5nKClcbiAgICAgICAgbG9nLmRlYnVnIFwibGlua2VkSXNzdWU6IFwiICsgbGlua2VkSXNzdWVcbiAgICAgICAgaWYobGlua2VkSXNzdWUudG9TdHJpbmcoKSA9PSBvZmZlclRrdC50b1N0cmluZygpKXtcbiAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmlzc3VlTGlua01hbmFnZXIucmVtb3ZlSXNzdWVMaW5rKGlzc3VlTGluaywgY3VycmVudFVzZXIpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvZmZlclRrdC5zZXRSZXNvbHV0aW9uKHJlc29sdXRpb25NYW5hZ2VyLmdldFJlc29sdXRpb25CeU5hbWUoXCJDYW5jZWxlZFwiKSlcbiAgICBvZmZlclRrdC5zdG9yZSgpXG4gXHRpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGlzc3VlTWFuYWdlci5nZXRJc3N1ZU9iamVjdChvZmZlclRrdCkpXG59XG5cbmlmKG1vZGVybml6YXRpb25Ua3Qpe1xuICAgIGRlbGV0ZWRGcm9tLnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlTWFuYWdlci5nZXRJc3N1ZU9iamVjdChtb2Rlcm5pemF0aW9uVGt0KSwgbmV3IE1vZGlmaWVkVmFsdWUoaXNzdWVNYW5hZ2VyLmdldElzc3VlT2JqZWN0KG1vZGVybml6YXRpb25Ua3QpLmdldEN1c3RvbUZpZWxkVmFsdWUoZGVsZXRlZEZyb20pLCBpc3N1ZS5rZXkpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG4gICAgY3VzdG9tZXIudXBkYXRlVmFsdWUobnVsbCwgaXNzdWVNYW5hZ2VyLmdldElzc3VlT2JqZWN0KG1vZGVybml6YXRpb25Ua3QpLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVPYmplY3QobW9kZXJuaXphdGlvblRrdCkuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0b21lciksIG51bGwpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG4gICAgc2l0ZS51cGRhdGVWYWx1ZShudWxsLCBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVPYmplY3QobW9kZXJuaXphdGlvblRrdCksIG5ldyBNb2RpZmllZFZhbHVlKGlzc3VlTWFuYWdlci5nZXRJc3N1ZU9iamVjdChtb2Rlcm5pemF0aW9uVGt0KS5nZXRDdXN0b21GaWVsZFZhbHVlKHNpdGUpLCBudWxsKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuICAgIGFzc2V0LnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlTWFuYWdlci5nZXRJc3N1ZU9iamVjdChtb2Rlcm5pemF0aW9uVGt0KSwgbmV3IE1vZGlmaWVkVmFsdWUoaXNzdWVNYW5hZ2VyLmdldElzc3VlT2JqZWN0KG1vZGVybml6YXRpb25Ua3QpLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXQpLCBudWxsKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuICAgIHZpc0tleS51cGRhdGVWYWx1ZShudWxsLCBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVPYmplY3QobW9kZXJuaXphdGlvblRrdCksIG5ldyBNb2RpZmllZFZhbHVlKGlzc3VlTWFuYWdlci5nZXRJc3N1ZU9iamVjdChtb2Rlcm5pemF0aW9uVGt0KS5nZXRDdXN0b21GaWVsZFZhbHVlKHZpc0tleSksIG51bGwpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG4gICAgZm9yKGNzIGluIHN1cHBsaWVyKXtcbiAgICAgICAgY3MudXBkYXRlVmFsdWUobnVsbCwgaXNzdWVNYW5hZ2VyLmdldElzc3VlT2JqZWN0KG1vZGVybml6YXRpb25Ua3QpLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVPYmplY3QobW9kZXJuaXphdGlvblRrdCkuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjcyksIG51bGwpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG4gICAgfVxuICAgIFxuICAgIGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG4gICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IGluSXRlcmF0b3IgPSBhbGxJbklzc3VlTGluay5pdGVyYXRvcigpOyBpbkl0ZXJhdG9yLmhhc05leHQoKTspIHtcbiAgICAgICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIGluSXRlcmF0b3IubmV4dCgpO1xuXG4gICAgICAgIGxvZy53YXJuIFwiSXNzdWUgY29uIHJlbGF0ZXNJbklzc3VlTGlua1wiXG4gICAgICAgIC8qRXNlZ3VpcmUgdHJhbnNhemlvbmUgZGkgc3RhdG8gZGVsbGEgZGVzdGluYXRpb25Jc3N1ZSovXG4gICAgICAgIGRlZiBsaW5rZWRJc3N1ZSA9IGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKVxuICAgICAgICBsb2cuZGVidWcgXCJtb2Rlcm5pemF0aW9uVGt0LnRvU3RyaW5nKCk6IFwiICsgbW9kZXJuaXphdGlvblRrdC50b1N0cmluZygpXG4gICAgICAgIGlmKGxpbmtlZElzc3VlLnRvU3RyaW5nKCkgPT0gbW9kZXJuaXphdGlvblRrdC50b1N0cmluZygpKXtcbiAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmlzc3VlTGlua01hbmFnZXIucmVtb3ZlSXNzdWVMaW5rKGlzc3VlTGluaywgY3VycmVudFVzZXIpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhbGxPdXRJc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0T3V0d2FyZExpbmtzKGlzc3VlLmdldElkKCkpXG4gICAgZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IGluSXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgaW5JdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBpbkl0ZXJhdG9yLm5leHQoKTtcblxuICAgICAgICBsb2cud2FybiBcIklzc3VlIGNvbiByZWxhdGVzT3V0SXNzdWVMaW5rXCJcbiAgICAgICAgLypFc2VndWlyZSB0cmFuc2F6aW9uZSBkaSBzdGF0byBkZWxsYSBkZXN0aW5hdGlvbklzc3VlKi9cbiAgICAgICAgZGVmIGxpbmtlZElzc3VlID0gaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KClcbiAgICAgICAgbG9nLmRlYnVnIFwibW9kZXJuaXphdGlvblRrdC50b1N0cmluZygpOiBcIiArIG1vZGVybml6YXRpb25Ua3QudG9TdHJpbmcoKVxuICAgICAgICBpZihsaW5rZWRJc3N1ZS50b1N0cmluZygpID09IG1vZGVybml6YXRpb25Ua3QudG9TdHJpbmcoKSl7XG4gICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5pc3N1ZUxpbmtNYW5hZ2VyLnJlbW92ZUlzc3VlTGluayhpc3N1ZUxpbmssIGN1cnJlbnRVc2VyKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgbW9kZXJuaXphdGlvblRrdC5zZXRSZXNvbHV0aW9uKHJlc29sdXRpb25NYW5hZ2VyLmdldFJlc29sdXRpb25CeU5hbWUoXCJDYW5jZWxlZFwiKSlcbiAgICBtb2Rlcm5pemF0aW9uVGt0LnN0b3JlKClcbiBcdGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgoaXNzdWVNYW5hZ2VyLmdldElzc3VlT2JqZWN0KG1vZGVybml6YXRpb25Ua3QpKVxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="disabled">true</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">0a6b8edc-fe5d-475d-ad18-c45d3ab183eb</arg>
                  <arg name="FIELD_NOTES">YCFgQ2xlYXIgY2FjaGU=</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG4vKiBSRVNUIEFQSSBwZXIgR2VuZXJhemlvbmUgQWxsZWdhdG8gUmFwcG9ydG8gZGkgSW50ZXJ2ZW50byAqL1xucmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuLypTY3JpcHQgVmFyaWFibGVzKi9cbi8vUGVyIHRlc3QgZGEgY29uc29sZVxuLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIk9QVVQtMTQwNjJcIilcbmJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL2NsZWFyQ2FjaGUvZGF0YU9iamVjdFwiXG5kZWYgYm9keV9yZXEgPSBbXVxuVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbmNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5sb2cuZGVidWcgXCJib2R5X3JlcTogXCIgKyBib2R5X3JlcVxuY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxubG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5jb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbn0iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="disabled">true</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue">50</arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="uuid">7f450205-af42-43f8-b48f-99d8bf922011</arg>
                  <arg name="field">customfield_23410</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.43.0</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="field3">resolution</arg>
                  <arg name="field2">customfield_23411</arg>
                  <arg name="scopeSource-jql"></arg>
                  <arg name="field4">customfield_22693</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="151" name="Update SN/SO">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">966eceb6-5b0d-4823-9779-1c13ed57eee9</arg>
                <arg name="FIELD_INVERT_CONDITION"></arg>
                <arg name="FIELD_NOTES">YCFgRW5hYmxlZCBmb3IgYXJpYW5uYS5mYWJicmk=</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.UserCondition</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_USER_IDS">arianna.fabbri</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">830e4fa6-bc1b-4339-b964-3db55e8b236b</arg>
              <arg name="FIELD_NOTES">YCFgU0FQOiB1cGRhdGUgU04gc3RhdHVzICYgVXBkYXRlIFNPICsgQ29uZmlybWF0aW9uIC0gRG8gbm90IHVwZGF0ZSBpZiBsYXN0IFBNIFRhc2sgY2xvc2Vk</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb25maWcuU3ViVGFza01hbmFnZXJcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XG5cdHByb3BlcnRpZXMubG9hZChpdClcbn1cbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLklzc3VlTGlua1xuXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKClcbi8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtNDE1NjZcIilcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiBzdXBwbGllciA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yuc3VwcGxpZXInXSA/IHByb3BlcnRpZXNbJ2NmLnN1cHBsaWVyJ10udG9TdHJpbmcoKSA6IFwiT1BfU1VQUExJRVJcIilbMF1cbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG5TdWJUYXNrTWFuYWdlciBzdWJUYXNrTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldFN1YlRhc2tNYW5hZ2VyKCk7XG5Db2xsZWN0aW9uIHN1YlRhc2tzID0gaXNzdWUuZ2V0UGFyZW50T2JqZWN0KCkuZ2V0U3ViVGFza09iamVjdHMoKVxuZGVmIGxhc3QgPSB0cnVlXG5pZiAoIXN1YlRhc2tzLmVtcHR5KSB7XG4gICAgc3ViVGFza3MuZWFjaCB7XG4gICAgICAgIGlmKCFpdC5nZXRTdGF0dXMoKS5uYW1lLnRvU3RyaW5nKCkuZXF1YWxzKFwiRG9uZVwiKSAmJiBpdC5rZXkgIT0gaXNzdWUua2V5KXtcbiAgICAgICAgICAgIGxhc3Q9ZmFsc2VcbiAgICAgICAgICAgIGxvZy5pbmZvIFwibGFzdFwiXG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYoIWxhc3Qpe1xuICAgICAgICAvKiogU0VSVklDRSBPUkRFUiBVUERBVEUgKiovXG4gICAgICAgIFVSTCB1cmxcbiAgICAgICAgSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvblxuXG4gICAgICAgIGRlZiBib2R5X3JlcSA9IFtdXG4gICAgICAgIHJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcbiAgICAgICAgYm9keV9yZXEgPSBbXVxuICAgICAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgICAgIFwiaXNzdWVLZXlcIjogaXNzdWUua2V5LFxuICAgICAgICAgICAgXCJpbmNsdWRlXCI6IFwiTEFCT1VSXCJcbiAgICAgICAgXSBcbiAgICAgICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL29yL3VwZGF0ZS9zZXJ2aWNlL29yZGVyXCJcblxuICAgICAgICBsb2cuZGVidWcgXCJiYXNlVVJMIFNPOiBcIiArIGJhc2VVUkxcbiAgICAgICAgbG9nLmRlYnVnIFwiYm9keV9yZXEgU086IFwiICsgYm9keV9yZXFcbiAgICAgICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxuICAgICAgICBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xuICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG4gICAgICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxuICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuICAgICAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIGRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICBkZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlNPIFJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAxXCIpICYmICFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcblxuICAgICAgICAgICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xuXG4gICAgICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxuICAgICAgICAgICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcbiAgICAgICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJlcnJvcnM6IFwiICsgIGpzb25fb2JqZWN0LmVycm9ycy50b1N0cmluZygpXG5cbiAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcbiAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TTy1DUkVBVEVcIilcbiAgICAgICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsganNvbl9vYmplY3QuZXJyb3JzWzBdKVxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcbiAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIC8qKiBEQSBGQVJFIFNDIFNPTE8gSU4gQ0FTTyBESSBURUNOSUNJIElOVEVSTkkgKiovXG4gICAgICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHN1cHBsaWVyKT09bnVsbCl7IC8qKiBzZSBPUF9TVVBQTElFUiA9IE5VTEwgaWwgdGlja2V0IGhhIHByb3NlZ3VpdG8gc3VsIGZsdXNzbyB0ZWNuaWNpIGludGVybmkgKiovXG5cbiAgICAgICAgICAgICAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgICAgICAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXG4gICAgICAgICAgICAgICAgXSBcblxuICAgICAgICAgICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL2FmdGVyL3NhbGVzL2NyZWF0ZS9zZXJ2aWNlL29yZGVyL2NvbmZpcm1hdGlvblwiXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiYm9keV9yZXEgU0M6IFwiICsgYm9keV9yZXFcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJiYXNlVVJMIFNDOiBcIiArIGJhc2VVUkxcbiAgICAgICAgICAgICAgICB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG5cbiAgICAgICAgICAgICAgICBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcbiAgICAgICAgICAgICAgICBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxuICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiU0MgUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSAmJiAhY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG5cbiAgICAgICAgICAgICAgICAgICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXG5cbiAgICAgICAgICAgICAgICAgICAgZGVmIGpzb25TbHVycGVyID0gbmV3IEpzb25TbHVycGVyKClcbiAgICAgICAgICAgICAgICAgICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICBcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwibWVzc2FnZTogXCIgKyAganNvbl9vYmplY3QubWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJlcnJvcnM6IFwiICsgIGpzb25fb2JqZWN0LmVycm9ycy50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TQy1DUkVBVEVcIilcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXG4gICAgICAgICAgICAgICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXG4gICAgICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59Iiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="5">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="211" name="Clear OP_SUPPLIER">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">92c7bf91-5f62-49c4-bba0-b13767297b6d</arg>
                <arg name="FIELD_INVERT_CONDITION"></arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.UserCondition</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_USER_IDS">arianna.fabbri</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="5">
              <post-functions>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="uuid">bc2c77b9-422d-4c36-9198-94c3d5bcc1cb</arg>
                  <arg name="field">customfield_23235</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.33.0</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="field2">customfield_22813</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="271" name="Maintenance Completed - Rifai" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">20204</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">6478ebc1-073e-417a-9a74-f32b52233da8</arg>
                <arg name="FIELD_INVERT_CONDITION"></arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.UserCondition</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_USER_IDS">arianna.fabbri</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="5">
              <post-functions>
                <function type="class">
                  <arg name="field.existingAttachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="targetIssueTypeDefinedByCfSelection"></arg>
                  <arg name="uuid">ede3c31a-1c8e-406b-bb01-6cfb4159d0f1</arg>
                  <arg name="issueTypeId">13001</arg>
                  <arg name="scopeType">ISSUE_LINKING</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.33.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="field.attachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="targetIssueType">SELECTED_ISSUE_TYPE</arg>
                  <arg name="scopeSource-jql"></arg>
                  <arg name="createIssueAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.copyTransitionComment">false</arg>
                  <arg name="targetProjectType">SAME</arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="transitionAttachmentsOperation">copy</arg>
                  <arg name="field.issueAssignTo">ASSIGN_TO_UNASSIGNED</arg>
                  <arg name="targetProjectSelectedCustomField"></arg>
                  <arg name="destination-scopeTarget">LINK_END</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiescreatelinkedissue-function</arg>
                  <arg name="scopeDestination-linkEnd">11100:OUTWARD</arg>
                  <arg name="field.enablingCustomFieldId">customfield_22609</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="subFunctions">[{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22609&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22658&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22600&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22600&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22822&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22822&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22601&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22601&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22602&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22602&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22813&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22813&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23235&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23235&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22651&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22651&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22700&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22700&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22607&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22607&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;priority&quot;,&quot;destinationFieldId&quot;:&quot;priority&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23203&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23203&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23237&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23237&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_21909&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21909&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Yes&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22681&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23401&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21908&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Maintenance Ticket&quot;,&quot;destinationFieldId&quot;:&quot;summary&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Yes&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23409&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22649&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22629&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23607&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23607&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23906&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23906&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23907&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23907&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23908&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23908&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23909&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23909&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22689&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22689&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22691&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22691&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22690&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22690&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Yes&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23409&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Maintenance Ticket&quot;,&quot;destinationFieldId&quot;:&quot;summary&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23401&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23237&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;REPAIR_ENABLED&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22814&quot;}}]</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.createlinkedissue.CreateLinkedIssueFunction</arg>
                  <arg name="projectId">11228</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">71a4764e-ec7c-4759-97f5-5775b6c349ed</arg>
                  <arg name="FIELD_NOTES">YCFgT1A6IFVwZGF0ZSBzdGF0dXMgb24ganVzdCBjcmVhdGVkIFJlcGFpciBRdW90YXRpb24gaXNzdWU=</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnlcbmltcG9ydCBncm9vdnkuanNvbi5Kc29uQnVpbGRlclxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29uZmlnLnV0aWwuSmlyYUhvbWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvblxuaW1wb3J0IGphdmEudGV4dC5TaW1wbGVEYXRlRm9ybWF0XG5pbXBvcnQgamF2YS50ZXh0LlBhcnNlRXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbmZpZy5wcm9wZXJ0aWVzLkFQS2V5c1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLkxpbmtDb2xsZWN0aW9uSW1wbDtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbms7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxubG9nLmRlYnVnIFwiUGVyY29yc28gcHJvcGVydGllczogXCIgKyBTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5cbi8qU2NyaXB0IFZhcmlhYmxlcyovXG4vL1BlciBQb3N0IEZ1bmN0aW9uXG5pc3N1ZSA9IGlzc3VlXG4vL1BlciB0ZXN0IGRhIGNvbnNvbGVcbi8vSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpXG4vL2lzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0yNTdcIilcbmxvZy5kZWJ1ZyBcIklzc3VlOiBcIiArIGlzc3VlXG5kZWYgZm91bmQ9ZmFsc2VcbmRlZiBsaW5rZWRJc3N1ZVxuZGVmIGlzc3VlU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlU2VydmljZSgpXG5kZWYgZ3JvdXBNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0R3JvdXBNYW5hZ2VyKClcbmRlZiB1c2VyTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldFVzZXJNYW5hZ2VyKClcbmRlZiBvZmZlckZyb21SZXBhaXIgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEtUX0dFTkVSQVRFRF9GUk9NX1BNXCIpWzBdXG5cbmRlZiBjdXJyZW50VXNlclRyYW5zaXRpb24gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfQ1VSUkVOVF9VU0VSX0dFTkVSQVRFX1JFUEFJUl9RVU9URVwiKVswXVxuZGVmIHRyYW5zaXRpb25DaGVjayA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0NIRUNLX0FORF9DT05GSVJNXCIpWzBdXG5TdHJpbmcgc3VwcGxpZXJBZG0gPSBcIk9QUk9MRV9BQV9TVVBQTElFUl9BRE1cIlxuU3RyaW5nIHN1cHBsaWVyVGVjaCA9IFwiT1BST0xFX0FBX1NVUFBMSUVSX1RFQ0hcIlxuTGlzdDxJc3N1ZUxpbms+IGFsbE91dElzc3VlTGluayA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTGlua01hbmFnZXIoKS5nZXRPdXR3YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSk7XG5sb2cuZGVidWcgXCJhbGxPdXRJc3N1ZUxpbms6IFwiICsgYWxsT3V0SXNzdWVMaW5rXG5mb3IgKEl0ZXJhdG9yPElzc3VlTGluaz4gb3V0SXRlcmF0b3IgPSBhbGxPdXRJc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG4gICAgZGVmIGxpbmtlZElzc3VlVGVtcCA9IGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpXG4gICAgU3RyaW5nIHR5cGUgPSBsaW5rZWRJc3N1ZVRlbXAuZ2V0SXNzdWVUeXBlKCkuZ2V0TmFtZSgpO1xuXG4gICAgbG9nLmRlYnVnKGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKSkgXG4gICAgXG4gICAgaWYoIGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpICE9IG51bGwgJiYgaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KCkuZ2V0SXNzdWVUeXBlKCkuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiTWFpbnRlbmFuY2UgVGlja2V0XCIpICYmIGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUHJvYmxlbSddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgbGlua2VkSXNzdWU9bGlua2VkSXNzdWVUZW1wXG4gICAgICAgIGxvZy5kZWJ1ZyBcImxpbmtlZCBpc3N1ZTogXCIgKyBsaW5rZWRJc3N1ZVxuICAgICAgICAvL2xvZy5kZWJ1ZyBcImxpbmtlZCBpc3N1ZSBzdGF0dXM6IFwiICsgbGlua2VkSXNzdWUuZ2V0U3RhdHVzT2JqZWN0KCkubmFtZVxuICAgICAgICBpZihsaW5rZWRJc3N1ZS5nZXRTdGF0dXNPYmplY3QoKS5uYW1lID09IHByb3BlcnRpZXNbJ3dmLm9wZW4nXS50b1N0cmluZygpKXtcbiAgICAgICAgICAgIGZvdW5kPXRydWVcbiAgICAgICAgfVxuICAgIH1cbn1cblxuTGlzdDxJc3N1ZUxpbms+IGFsbEluSXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldElud2FyZExpbmtzKGlzc3VlLmdldElkKCkpO1xubG9nLmRlYnVnIFwiYWxsSW5Jc3N1ZUxpbms6IFwiICsgYWxsSW5Jc3N1ZUxpbmtcbmZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbEluSXNzdWVMaW5rLml0ZXJhdG9yKCk7IG91dEl0ZXJhdG9yLmhhc05leHQoKTspIHtcbiAgICBJc3N1ZUxpbmsgaXNzdWVMaW5rID0gKElzc3VlTGluaykgb3V0SXRlcmF0b3IubmV4dCgpO1xuICAgIGRlZiBsaW5rZWRJc3N1ZVRlbXAgPSBpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KClcbiAgICBTdHJpbmcgdHlwZSA9IGxpbmtlZElzc3VlVGVtcC5nZXRJc3N1ZVR5cGUoKS5nZXROYW1lKCk7XG5cbiAgICBsb2cuZGVidWcoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpKSBcbiAgICBcbiAgICBpZihpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkgIT0gbnVsbCAmJiBpc3N1ZUxpbmsuZ2V0U291cmNlT2JqZWN0KCkuZ2V0SXNzdWVUeXBlKCkuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiTWFpbnRlbmFuY2UgVGlja2V0XCIpICYmIGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUHJvYmxlbSddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgbGlua2VkSXNzdWU9bGlua2VkSXNzdWVUZW1wXG4gICAgICAgIGxvZy5kZWJ1ZyBcImxpbmtlZCBpc3N1ZTogXCIgKyBsaW5rZWRJc3N1ZVxuICAgICAgICAvL2xvZy5kZWJ1ZyBcImxpbmtlZCBpc3N1ZSBzdGF0dXM6IFwiICsgbGlua2VkSXNzdWUuZ2V0U3RhdHVzT2JqZWN0KCkubmFtZVxuICAgICAgICBpZihsaW5rZWRJc3N1ZS5nZXRTdGF0dXNPYmplY3QoKS5uYW1lID09IHByb3BlcnRpZXNbJ3dmLm9wZW4nXS50b1N0cmluZygpKXtcbiAgICAgICAgICAgIGZvdW5kPXRydWVcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vbG9nLmRlYnVnIFwiZm91bmQ6IFwiICsgZm91bmRcblxuaWYoZm91bmQpe1xuXHRkZWYgZGVzdFN0YXR1c09iamVjdCA9IGxpbmtlZElzc3VlLmdldFN0YXR1c09iamVjdCgpXG4gICAgLy9sb2cuZGVidWcgXCJkZXN0U3RhdHVzT2JqZWN0OiBcIiArIGRlc3RTdGF0dXNPYmplY3RcbiAgICAvL2xvZy5kZWJ1ZyBcImxpbmtlZElzc3VlOiBcIiArIGxpbmtlZElzc3VlXG4gICAgZGVmIHVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcblx0Ly8gSXMgdGhlIHN0YXR1cyBvZiB0aGUgbGlua2VkIGlzc3VlIFwiSW5zdGFsbGluZ1wiID9cbiAgICBcbiAgICBkZWYgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuY3VzdG9tRmllbGRNYW5hZ2VyXG4gICAgZGVmIHBtSXNzdWVGaWVsZCA9IGN1c3RvbUZpZWxkTWFuYWdlci5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9QTV9MSU5LRURfSVNTVUVcIikuZmlyc3QoKVxuICAgIGRlZiBvZmZlcklzc3VlRmllbGQgPSBjdXN0b21GaWVsZE1hbmFnZXIuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfUVVPVEVfTElOS0VEX0lTU1VFXCIpLmZpcnN0KClcbiAgICBkZWYgb2ZmZXJJc3N1ZUJvb2xGaWVsZCA9IGN1c3RvbUZpZWxkTWFuYWdlci5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2Yub2ZmZXJUa3QnXS50b1N0cmluZygpKS5maXJzdCgpXG4gICAgXG4gICAgLy9TZXQgT1BBQV9PRkZFUl9US1Q9WWVzIG9uIGp1c3QgY3JlYXRlZCBsaW5rZWRJc3N1ZVxuICAgIGRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuICAgIGRlZiBtaSA9IChNdXRhYmxlSXNzdWUpIGxpbmtlZElzc3VlXG5cbiAgICBkZWYgZmllbGRDb25maWcgPSBvZmZlckZyb21SZXBhaXIuZ2V0UmVsZXZhbnRDb25maWcobGlua2VkSXNzdWUpXG4gICAgLy9sb2cud2FybiBcImZpZWxkQ29uZmlnOiBcIiArIGZpZWxkQ29uZmlnXG4gICAgZGVmIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gXCJZZXNcIiB9XG4gICAgbG9nLmRlYnVnIFwidHJhbnNpdGlvbiBmaWVsZCB2YWx1ZTogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1cnJlbnRVc2VyVHJhbnNpdGlvbilcbiAgICAvL2xvZy5kZWJ1ZyBcImN1cnJlbnRVc2VyVHJhbnNpdGlvbjogXCIgKyBjdXJyZW50VXNlclRyYW5zaXRpb25cbiAgICBwbUlzc3VlRmllbGQudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocG1Jc3N1ZUZpZWxkKSwgaXNzdWUua2V5LnRvU3RyaW5nKCkpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG4gICAgb2ZmZXJGcm9tUmVwYWlyLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG9mZmVySXNzdWVCb29sRmllbGQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuICAgIFxuICAgIGZpZWxkQ29uZmlnID0gb2ZmZXJJc3N1ZUJvb2xGaWVsZC5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSlcbiAgICAvL2xvZy53YXJuIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcbiAgICBjZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09IFwiWWVzXCIgfVxuICAgIG9mZmVySXNzdWVCb29sRmllbGQudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUob2ZmZXJJc3N1ZUJvb2xGaWVsZCksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG4gICAgXG4gICAgZGVmIHVzZXJUcmFuc2l0aW9uID0gdXNlck1hbmFnZXIuZ2V0VXNlckJ5TmFtZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1cnJlbnRVc2VyVHJhbnNpdGlvbikudG9TdHJpbmcoKSlcblx0bG9nLmRlYnVnIFwidXNlclRyYW5zaXRpb246IFwiICsgdXNlclRyYW5zaXRpb25cbiAgICBpZiAodXNlclRyYW5zaXRpb24gIT0gbnVsbCAmJiAoZ3JvdXBNYW5hZ2VyLmdldFVzZXJzSW5Hcm91cChzdXBwbGllckFkbSkuY29udGFpbnModXNlclRyYW5zaXRpb24pIHx8IGdyb3VwTWFuYWdlci5nZXRVc2Vyc0luR3JvdXAoc3VwcGxpZXJUZWNoKS5jb250YWlucyh1c2VyVHJhbnNpdGlvbikpKSB7XG4gICAgICAgIC8vIFRyYW5zaXRpb24gZXhlY3V0ZWQgYnkgZXh0ZXJuYWwgdXNlciAtLT4gdG8gYmUgYWRkZWQgYWxzbyBpbnRlcm5hbCB0ZWNocyByb2xlIGdyb3Vwc1xuICAgICAgICAvLyBFbWFpbCBoYXMgbm90IHRvIGJlIHNlbnRcbiAgICAgICAgLy8gU04gd2lsbCBiZSBjcmVhdGVkIGFzIHNvb24gYXMgdGhlIHF1b3RhdGlvbiBoYXMgYmVlbiBjb25maXJtZWQgLSB0byBiZSBjaGVja2VkIHdoZW4gdG8gY3JlYXRlIFNOIGlmIG5vIHF1b3RhdGlvbiBmcm9tIHN1cHBsaWVyIGlzIG5lZWRlZCAtIHdoZW4gdGhlIHF1b3RhdGlvbiBoYXMgYmVlbiBzZW50IHRvIHRoZSBjdXN0b21lcj9cbiAgICAgICAgbG9nLmRlYnVnIFwiaW4gdXRlbnRlIHN1cHBsaWVyXCJcbiAgICAgICAgdHJhbnNpdGlvbkNoZWNrLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjayksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG4gICAgICAgIG9mZmVyRnJvbVJlcGFpci51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShvZmZlckZyb21SZXBhaXIpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuXHR9XG4gICAgXG4gICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUoY3VycmVudFVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xuICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgobGlua2VkSXNzdWUpICAgIFxuICAgIFxuICAgIG9mZmVySXNzdWVGaWVsZC51cGRhdGVWYWx1ZShudWxsLCBpc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShvZmZlcklzc3VlRmllbGQpLCBsaW5rZWRJc3N1ZS5rZXkudG9TdHJpbmcoKSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcbiAgICBcbiAgICBpZiAoZGVzdFN0YXR1c09iamVjdC5uYW1lID09IHByb3BlcnRpZXNbJ3dmLm9wZW4nXS50b1N0cmluZygpKSB7XG4gICAgICAgIC8vIFByZXBhcmUgb3VyIGlucHV0IGZvciB0aGUgdHJhbnNpdGlvblxuICAgICAgICBkZWYgaXNzdWVJbnB1dFBhcmFtZXRlcnMgPSBpc3N1ZVNlcnZpY2UubmV3SXNzdWVJbnB1dFBhcmFtZXRlcnMoKVxuICAgICAgICBpc3N1ZUlucHV0UGFyYW1ldGVycy53aXRoIHtcbiAgICAgICAgICAgIHNldFNraXBTY3JlZW5DaGVjayh0cnVlKVxuICAgICAgICB9XG4gICAgICAgIC8vIFZhbGlkYXRlIHRyYW5zaXRpb25pbmcgdGhlIGxpbmtlZCBpc3N1ZSB0byBcIlNpZ25zIE5lZWRlZFwiXG4gICAgICAgIGRlZiB2YWxpZGF0aW9uUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnZhbGlkYXRlVHJhbnNpdGlvbih1c2VyLCBsaW5rZWRJc3N1ZS5pZCwgMjEyMSwgaXNzdWVJbnB1dFBhcmFtZXRlcnMpXG4gICAgICAgIGlmICh2YWxpZGF0aW9uUmVzdWx0LmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgdHJhbnNpdGlvblxuICAgICAgICAgICAgZGVmIGlzc3VlUmVzdWx0ID0gaXNzdWVTZXJ2aWNlLnRyYW5zaXRpb24odXNlciwgdmFsaWRhdGlvblJlc3VsdClcbiAgICAgICAgICAgIGlmICghIGlzc3VlUmVzdWx0LmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyhcIkZhaWxlZCB0byB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7aXNzdWVSZXN1bHQuZXJyb3JDb2xsZWN0aW9ufVwiKVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnKFwiVHJhbnNhemlvbmUgZmF0dGFcIilcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyhcIkNvdWxkIG5vdCB0cmFuc2l0aW9uIHRhc2sgJHtsaW5rZWRJc3N1ZS5rZXl9LCBlcnJvcnM6ICR7dmFsaWRhdGlvblJlc3VsdC5lcnJvckNvbGxlY3Rpb259XCIpXG4gICAgICAgIH1cbiAgICB9XG4gICAgXG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">00edbe12-4a7a-49dc-b5c0-c3f556043537</arg>
                  <arg name="FIELD_NOTES">YCFgQ2xlYXIgY2FjaGU=</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG4vKiBSRVNUIEFQSSBwZXIgR2VuZXJhemlvbmUgQWxsZWdhdG8gUmFwcG9ydG8gZGkgSW50ZXJ2ZW50byAqL1xucmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuLypTY3JpcHQgVmFyaWFibGVzKi9cbi8vUGVyIHRlc3QgZGEgY29uc29sZVxuLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIk9QVVQtMTQwNjJcIilcbmJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL2NsZWFyQ2FjaGUvZGF0YU9iamVjdFwiXG5kZWYgYm9keV9yZXEgPSBbXVxuVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbmNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5sb2cuZGVidWcgXCJib2R5X3JlcTogXCIgKyBib2R5X3JlcVxuY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxubG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5jb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbn0iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="field.existingAttachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="targetIssueTypeDefinedByCfSelection"></arg>
                  <arg name="uuid">ede3c31a-1c8e-406b-bb01-6cfb4159d0f1</arg>
                  <arg name="issueTypeId">13401</arg>
                  <arg name="scopeType">ISSUE_LINKING</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.33.0</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="field.attachmentEnablingCustomFieldId">NEVER</arg>
                  <arg name="targetIssueType">SELECTED_ISSUE_TYPE</arg>
                  <arg name="scopeSource-jql"></arg>
                  <arg name="createIssueAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.copyTransitionComment">false</arg>
                  <arg name="targetProjectType">SAME</arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="transitionAttachmentsOperation">copy</arg>
                  <arg name="field.issueAssignTo">ASSIGN_TO_UNASSIGNED</arg>
                  <arg name="targetProjectSelectedCustomField"></arg>
                  <arg name="destination-scopeTarget">LINK_END</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiescreatelinkedissue-function</arg>
                  <arg name="scopeDestination-linkEnd">11100:OUTWARD</arg>
                  <arg name="field.enablingCustomFieldId">customfield_23923</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="subFunctions">[{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22609&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22658&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22600&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22600&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22822&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22822&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22601&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22601&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22602&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22602&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22813&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22813&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23235&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23235&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22651&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22651&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22700&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22700&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22607&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22607&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;priority&quot;,&quot;destinationFieldId&quot;:&quot;priority&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22814&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22814&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23203&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23203&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23237&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23237&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_21909&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21909&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;issuekey&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22629&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Yes&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22681&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23401&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21908&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Maintenance Ticket&quot;,&quot;destinationFieldId&quot;:&quot;summary&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Yes&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23409&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22649&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22629&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23237&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23401&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23607&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23607&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23237&quot;,&quot;destinationFieldId&quot;:&quot;customfield_21908&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23906&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23906&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23907&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23907&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23908&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23908&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_23909&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23909&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22689&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22689&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22691&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22691&quot;}},{&quot;type&quot;:&quot;CopyFieldFromOriginToNew&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceFieldId&quot;:&quot;customfield_22690&quot;,&quot;destinationFieldId&quot;:&quot;customfield_22690&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Yes&quot;,&quot;destinationFieldId&quot;:&quot;customfield_23409&quot;}},{&quot;type&quot;:&quot;SetField&quot;,&quot;enabled&quot;:true,&quot;config&quot;:{&quot;concatenationMode&quot;:&quot;OVERWRITE&quot;,&quot;sourceValue&quot;:&quot;Maintenance Ticket&quot;,&quot;destinationFieldId&quot;:&quot;summary&quot;}}]</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.createlinkedissue.CreateLinkedIssueFunction</arg>
                  <arg name="projectId">11228</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">71a4764e-ec7c-4759-97f5-5775b6c349ed</arg>
                  <arg name="FIELD_NOTES">YCFgT1A6IFVwZGF0ZSBzdGF0dXMgb24ganVzdCBjcmVhdGVkIFJlcGFpciBRdW90YXRpb24gaXNzdWU=</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouQ2F0ZWdvcnlcbmltcG9ydCBncm9vdnkuanNvbi5Kc29uQnVpbGRlclxuaW1wb3J0IGdyb292eS5qc29uLkpzb25TbHVycGVyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29uZmlnLnV0aWwuSmlyYUhvbWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvblxuaW1wb3J0IGphdmEudGV4dC5TaW1wbGVEYXRlRm9ybWF0XG5pbXBvcnQgamF2YS50ZXh0LlBhcnNlRXhjZXB0aW9uXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbmZpZy5wcm9wZXJ0aWVzLkFQS2V5c1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5saW5rLkxpbmtDb2xsZWN0aW9uSW1wbDtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbms7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk1vZGlmaWVkVmFsdWVcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUudXRpbC5EZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGxcblxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxubG9nLmRlYnVnIFwiUGVyY29yc28gcHJvcGVydGllczogXCIgKyBTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxuXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcbklzc3VlSW5kZXhpbmdTZXJ2aWNlIFx0aXNzdWVJbmRleGluZ1NlcnZpY2UgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoSXNzdWVJbmRleGluZ1NlcnZpY2UpXG5cbi8qU2NyaXB0IFZhcmlhYmxlcyovXG4vL1BlciBQb3N0IEZ1bmN0aW9uXG5pc3N1ZSA9IGlzc3VlXG4vL1BlciB0ZXN0IGRhIGNvbnNvbGVcbi8vSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpXG4vL2lzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiT1BVVC0yNTdcIilcbmxvZy5kZWJ1ZyBcIklzc3VlOiBcIiArIGlzc3VlXG5kZWYgZm91bmQ9ZmFsc2VcbmRlZiBsaW5rZWRJc3N1ZVxuZGVmIGlzc3VlU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlU2VydmljZSgpXG5kZWYgZ3JvdXBNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0R3JvdXBNYW5hZ2VyKClcbmRlZiB1c2VyTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldFVzZXJNYW5hZ2VyKClcbmRlZiBvZmZlckZyb21SZXBhaXIgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEtUX0dFTkVSQVRFRF9GUk9NX1BNXCIpWzBdXG5cbmRlZiBjdXJyZW50VXNlclRyYW5zaXRpb24gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfQ1VSUkVOVF9VU0VSX0dFTkVSQVRFX1JFUEFJUl9RVU9URVwiKVswXVxuZGVmIHRyYW5zaXRpb25DaGVjayA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0NIRUNLX0FORF9DT05GSVJNXCIpWzBdXG5TdHJpbmcgc3VwcGxpZXJBZG0gPSBcIk9QUk9MRV9BQV9TVVBQTElFUl9BRE1cIlxuU3RyaW5nIHN1cHBsaWVyVGVjaCA9IFwiT1BST0xFX0FBX1NVUFBMSUVSX1RFQ0hcIlxuXG5MaXN0PElzc3VlTGluaz4gYWxsT3V0SXNzdWVMaW5rID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVMaW5rTWFuYWdlcigpLmdldE91dHdhcmRMaW5rcyhpc3N1ZS5nZXRJZCgpKTtcbmxvZy5kZWJ1ZyBcImFsbE91dElzc3VlTGluazogXCIgKyBhbGxPdXRJc3N1ZUxpbmtcbmZvciAoSXRlcmF0b3I8SXNzdWVMaW5rPiBvdXRJdGVyYXRvciA9IGFsbE91dElzc3VlTGluay5pdGVyYXRvcigpOyBvdXRJdGVyYXRvci5oYXNOZXh0KCk7KSB7XG4gICAgSXNzdWVMaW5rIGlzc3VlTGluayA9IChJc3N1ZUxpbmspIG91dEl0ZXJhdG9yLm5leHQoKTtcbiAgICBkZWYgbGlua2VkSXNzdWVUZW1wID0gaXNzdWVMaW5rLmdldERlc3RpbmF0aW9uT2JqZWN0KClcbiAgICBTdHJpbmcgdHlwZSA9IGxpbmtlZElzc3VlVGVtcC5nZXRJc3N1ZVR5cGUoKS5nZXROYW1lKCk7XG5cbiAgICBsb2cuZGVidWcoaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpKSBcbiAgICBcbiAgICBpZihpc3N1ZUxpbmsuZ2V0RGVzdGluYXRpb25PYmplY3QoKSAhPSBudWxsICYmIGlzc3VlTGluay5nZXREZXN0aW5hdGlvbk9iamVjdCgpLmdldElzc3VlVHlwZSgpLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhcIk1vZGVybml6YXRpb25cIikgJiYgaXNzdWVMaW5rLmlzc3VlTGlua1R5cGUuZ2V0TmFtZSgpLnRvU3RyaW5nKCkuZXF1YWxzKHByb3BlcnRpZXNbJ2lsLmxpbmtlZFRrdHNQcm9ibGVtJ10udG9TdHJpbmcoKSkpe1xuICAgICAgICBsaW5rZWRJc3N1ZT1saW5rZWRJc3N1ZVRlbXBcbiAgICAgICAgbG9nLmRlYnVnIFwibGlua2VkIGlzc3VlOiBcIiArIGxpbmtlZElzc3VlXG4gICAgICAgIC8vbG9nLmRlYnVnIFwibGlua2VkIGlzc3VlIHN0YXR1czogXCIgKyBsaW5rZWRJc3N1ZS5nZXRTdGF0dXNPYmplY3QoKS5uYW1lXG4gICAgICAgIGlmKGxpbmtlZElzc3VlLmdldFN0YXR1c09iamVjdCgpLm5hbWUgPT0gcHJvcGVydGllc1snd2Yub3BlbiddLnRvU3RyaW5nKCkpe1xuICAgICAgICAgICAgZm91bmQ9dHJ1ZVxuICAgICAgICB9XG4gICAgfVxufVxuXG5MaXN0PElzc3VlTGluaz4gYWxsSW5Jc3N1ZUxpbmsgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZUxpbmtNYW5hZ2VyKCkuZ2V0SW53YXJkTGlua3MoaXNzdWUuZ2V0SWQoKSk7XG5sb2cuZGVidWcgXCJhbGxJbklzc3VlTGluazogXCIgKyBhbGxJbklzc3VlTGlua1xuZm9yIChJdGVyYXRvcjxJc3N1ZUxpbms+IG91dEl0ZXJhdG9yID0gYWxsSW5Jc3N1ZUxpbmsuaXRlcmF0b3IoKTsgb3V0SXRlcmF0b3IuaGFzTmV4dCgpOykge1xuICAgIElzc3VlTGluayBpc3N1ZUxpbmsgPSAoSXNzdWVMaW5rKSBvdXRJdGVyYXRvci5uZXh0KCk7XG4gICAgZGVmIGxpbmtlZElzc3VlVGVtcCA9IGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKVxuICAgIFN0cmluZyB0eXBlID0gbGlua2VkSXNzdWVUZW1wLmdldElzc3VlVHlwZSgpLmdldE5hbWUoKTtcblxuICAgIGxvZy5kZWJ1Zyhpc3N1ZUxpbmsuaXNzdWVMaW5rVHlwZS5nZXROYW1lKCkpIFxuICAgIFxuICAgIGlmKGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKSAhPSBudWxsICYmIGlzc3VlTGluay5nZXRTb3VyY2VPYmplY3QoKS5nZXRJc3N1ZVR5cGUoKS5nZXROYW1lKCkudG9TdHJpbmcoKS5lcXVhbHMoXCJNb2Rlcm5pemF0aW9uXCIpICYmIGlzc3VlTGluay5pc3N1ZUxpbmtUeXBlLmdldE5hbWUoKS50b1N0cmluZygpLmVxdWFscyhwcm9wZXJ0aWVzWydpbC5saW5rZWRUa3RzUHJvYmxlbSddLnRvU3RyaW5nKCkpKXtcbiAgICAgICAgbGlua2VkSXNzdWU9bGlua2VkSXNzdWVUZW1wXG4gICAgICAgIGxvZy5kZWJ1ZyBcImxpbmtlZCBpc3N1ZTogXCIgKyBsaW5rZWRJc3N1ZVxuICAgICAgICAvL2xvZy5kZWJ1ZyBcImxpbmtlZCBpc3N1ZSBzdGF0dXM6IFwiICsgbGlua2VkSXNzdWUuZ2V0U3RhdHVzT2JqZWN0KCkubmFtZVxuICAgICAgICBpZihsaW5rZWRJc3N1ZS5nZXRTdGF0dXNPYmplY3QoKS5uYW1lID09IHByb3BlcnRpZXNbJ3dmLm9wZW4nXS50b1N0cmluZygpKXtcbiAgICAgICAgICAgIGZvdW5kPXRydWVcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vbG9nLmRlYnVnIFwiZm91bmQ6IFwiICsgZm91bmRcblxuaWYoZm91bmQpe1xuXHRkZWYgZGVzdFN0YXR1c09iamVjdCA9IGxpbmtlZElzc3VlLmdldFN0YXR1c09iamVjdCgpXG4gICAgLy9sb2cuZGVidWcgXCJkZXN0U3RhdHVzT2JqZWN0OiBcIiArIGRlc3RTdGF0dXNPYmplY3RcbiAgICAvL2xvZy5kZWJ1ZyBcImxpbmtlZElzc3VlOiBcIiArIGxpbmtlZElzc3VlXG4gICAgZGVmIHVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcblx0Ly8gSXMgdGhlIHN0YXR1cyBvZiB0aGUgbGlua2VkIGlzc3VlIFwiSW5zdGFsbGluZ1wiID9cbiAgICBcbiAgICBkZWYgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuY3VzdG9tRmllbGRNYW5hZ2VyXG4gICAgZGVmIHBtSXNzdWVGaWVsZCA9IGN1c3RvbUZpZWxkTWFuYWdlci5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9QTV9MSU5LRURfSVNTVUVcIikuZmlyc3QoKVxuICAgIGRlZiBvZmZlcklzc3VlRmllbGQgPSBjdXN0b21GaWVsZE1hbmFnZXIuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfTU9ERVJOSVpBVElPTl9MSU5LRURfSVNTVUVcIikuZmlyc3QoKVxuICAgIGRlZiBvZmZlcklzc3VlQm9vbEZpZWxkID0gY3VzdG9tRmllbGRNYW5hZ2VyLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5vZmZlclRrdCddLnRvU3RyaW5nKCkpLmZpcnN0KClcbiAgICBcbiAgICAvL1NldCBPUEFBX09GRkVSX1RLVD1ZZXMgb24ganVzdCBjcmVhdGVkIGxpbmtlZElzc3VlXG4gICAgZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXG4gICAgZGVmIG1pID0gKE11dGFibGVJc3N1ZSkgbGlua2VkSXNzdWVcblxuICAgIGRlZiBmaWVsZENvbmZpZyA9IG9mZmVyRnJvbVJlcGFpci5nZXRSZWxldmFudENvbmZpZyhsaW5rZWRJc3N1ZSlcbiAgICAvL2xvZy53YXJuIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcbiAgICBkZWYgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIlllc1wiIH1cbiAgICBsb2cuZGVidWcgXCJ0cmFuc2l0aW9uIGZpZWxkIHZhbHVlOiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VycmVudFVzZXJUcmFuc2l0aW9uKVxuICAgIC8vbG9nLmRlYnVnIFwiY3VycmVudFVzZXJUcmFuc2l0aW9uOiBcIiArIGN1cnJlbnRVc2VyVHJhbnNpdGlvblxuICAgIHBtSXNzdWVGaWVsZC51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbUlzc3VlRmllbGQpLCBpc3N1ZS5rZXkudG9TdHJpbmcoKSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcbiAgICBvZmZlckZyb21SZXBhaXIudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUob2ZmZXJJc3N1ZUJvb2xGaWVsZCksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG4gICAgXG4gICAgZmllbGRDb25maWcgPSBvZmZlcklzc3VlQm9vbEZpZWxkLmdldFJlbGV2YW50Q29uZmlnKGxpbmtlZElzc3VlKVxuICAgIC8vbG9nLndhcm4gXCJmaWVsZENvbmZpZzogXCIgKyBmaWVsZENvbmZpZ1xuICAgIGNmTmV3VmFsdWUgPSBDb21wb25lbnRBY2Nlc3Nvci5vcHRpb25zTWFuYWdlci5nZXRPcHRpb25zKGZpZWxkQ29uZmlnKT8uZmluZCB7IGl0LnRvU3RyaW5nKCkgPT0gXCJZZXNcIiB9XG4gICAgb2ZmZXJJc3N1ZUJvb2xGaWVsZC51cGRhdGVWYWx1ZShudWxsLCBsaW5rZWRJc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUobGlua2VkSXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShvZmZlcklzc3VlQm9vbEZpZWxkKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcbiAgICBcbiAgICBkZWYgdXNlclRyYW5zaXRpb24gPSB1c2VyTWFuYWdlci5nZXRVc2VyQnlOYW1lKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VycmVudFVzZXJUcmFuc2l0aW9uKS50b1N0cmluZygpKVxuXHRsb2cuZGVidWcgXCJ1c2VyVHJhbnNpdGlvbjogXCIgKyB1c2VyVHJhbnNpdGlvblxuICAgIGlmICh1c2VyVHJhbnNpdGlvbiAhPSBudWxsICYmIChncm91cE1hbmFnZXIuZ2V0VXNlcnNJbkdyb3VwKHN1cHBsaWVyQWRtKS5jb250YWlucyh1c2VyVHJhbnNpdGlvbikgfHwgZ3JvdXBNYW5hZ2VyLmdldFVzZXJzSW5Hcm91cChzdXBwbGllclRlY2gpLmNvbnRhaW5zKHVzZXJUcmFuc2l0aW9uKSkpIHtcbiAgICAgICAgLy8gVHJhbnNpdGlvbiBleGVjdXRlZCBieSBleHRlcm5hbCB1c2VyIC0tPiB0byBiZSBhZGRlZCBhbHNvIGludGVybmFsIHRlY2hzIHJvbGUgZ3JvdXBzXG4gICAgICAgIC8vIEVtYWlsIGhhcyBub3QgdG8gYmUgc2VudFxuICAgICAgICAvLyBTTiB3aWxsIGJlIGNyZWF0ZWQgYXMgc29vbiBhcyB0aGUgcXVvdGF0aW9uIGhhcyBiZWVuIGNvbmZpcm1lZCAtIHRvIGJlIGNoZWNrZWQgd2hlbiB0byBjcmVhdGUgU04gaWYgbm8gcXVvdGF0aW9uIGZyb20gc3VwcGxpZXIgaXMgbmVlZGVkIC0gd2hlbiB0aGUgcXVvdGF0aW9uIGhhcyBiZWVuIHNlbnQgdG8gdGhlIGN1c3RvbWVyP1xuICAgICAgICBsb2cuZGVidWcgXCJpbiB1dGVudGUgc3VwcGxpZXJcIlxuICAgICAgICB0cmFuc2l0aW9uQ2hlY2sudXBkYXRlVmFsdWUobnVsbCwgbGlua2VkSXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGxpbmtlZElzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcbiAgICAgICAgb2ZmZXJGcm9tUmVwYWlyLnVwZGF0ZVZhbHVlKG51bGwsIGxpbmtlZElzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShsaW5rZWRJc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG9mZmVyRnJvbVJlcGFpciksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG5cdH1cbiAgICBcbiAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZShjdXJyZW50VXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7XG4gICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChsaW5rZWRJc3N1ZSkgICAgXG4gICAgXG4gICAgb2ZmZXJJc3N1ZUZpZWxkLnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKG9mZmVySXNzdWVGaWVsZCksIGxpbmtlZElzc3VlLmtleS50b1N0cmluZygpKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuICAgIFxuICAgIGlmIChkZXN0U3RhdHVzT2JqZWN0Lm5hbWUgPT0gcHJvcGVydGllc1snd2Yub3BlbiddLnRvU3RyaW5nKCkpIHtcbiAgICAgICAgLy8gUHJlcGFyZSBvdXIgaW5wdXQgZm9yIHRoZSB0cmFuc2l0aW9uXG4gICAgICAgIGRlZiBpc3N1ZUlucHV0UGFyYW1ldGVycyA9IGlzc3VlU2VydmljZS5uZXdJc3N1ZUlucHV0UGFyYW1ldGVycygpXG4gICAgICAgIGlzc3VlSW5wdXRQYXJhbWV0ZXJzLndpdGgge1xuICAgICAgICAgICAgc2V0U2tpcFNjcmVlbkNoZWNrKHRydWUpXG4gICAgICAgIH1cbiAgICAgICAgLy8gVmFsaWRhdGUgdHJhbnNpdGlvbmluZyB0aGUgbGlua2VkIGlzc3VlIHRvIFwiU2lnbnMgTmVlZGVkXCJcbiAgICAgICAgZGVmIHZhbGlkYXRpb25SZXN1bHQgPSBpc3N1ZVNlcnZpY2UudmFsaWRhdGVUcmFuc2l0aW9uKHVzZXIsIGxpbmtlZElzc3VlLmlkLCAyMTIxLCBpc3N1ZUlucHV0UGFyYW1ldGVycylcbiAgICAgICAgaWYgKHZhbGlkYXRpb25SZXN1bHQuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSB0cmFuc2l0aW9uXG4gICAgICAgICAgICBkZWYgaXNzdWVSZXN1bHQgPSBpc3N1ZVNlcnZpY2UudHJhbnNpdGlvbih1c2VyLCB2YWxpZGF0aW9uUmVzdWx0KVxuICAgICAgICAgICAgaWYgKCEgaXNzdWVSZXN1bHQuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnKFwiRmFpbGVkIHRvIHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHtpc3N1ZVJlc3VsdC5lcnJvckNvbGxlY3Rpb259XCIpXG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcoXCJUcmFuc2F6aW9uZSBmYXR0YVwiKVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbG9nLmRlYnVnKFwiQ291bGQgbm90IHRyYW5zaXRpb24gdGFzayAke2xpbmtlZElzc3VlLmtleX0sIGVycm9yczogJHt2YWxpZGF0aW9uUmVzdWx0LmVycm9yQ29sbGVjdGlvbn1cIilcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbn0iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">00edbe12-4a7a-49dc-b5c0-c3f556043537</arg>
                  <arg name="FIELD_NOTES">YCFgQ2xlYXIgY2FjaGU=</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG4vKiBSRVNUIEFQSSBwZXIgR2VuZXJhemlvbmUgQWxsZWdhdG8gUmFwcG9ydG8gZGkgSW50ZXJ2ZW50byAqL1xucmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuLypTY3JpcHQgVmFyaWFibGVzKi9cbi8vUGVyIHRlc3QgZGEgY29uc29sZVxuLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIk9QVVQtMTQwNjJcIilcbmJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL2NsZWFyQ2FjaGUvZGF0YU9iamVjdFwiXG5kZWYgYm9keV9yZXEgPSBbXVxuVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbmNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5sb2cuZGVidWcgXCJib2R5X3JlcTogXCIgKyBib2R5X3JlcVxuY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxubG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5jb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbn0iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="291" name="Set Security">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">1b7d5faf-f701-433b-bfff-28879be13db0</arg>
                <arg name="FIELD_INVERT_CONDITION"></arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.UserCondition</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_USER_IDS">arianna.fabbri|||JIRAUSER58800</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="5">
              <post-functions>
                <function type="class">
                  <arg name="FIELD_SECURITY_LEVEL_ID">11600</arg>
                  <arg name="FIELD_FUNCTION_ID">006f388b-2114-4b75-aba7-ff0b7afc0cb2</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SetIssueSecurity</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SetIssueSecurity</arg>
                  <arg name="FIELD_CONDITION"></arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="6" name="Open">
      <meta name="jira.status.id">1</meta>
      <actions>
        <action id="31" name="Confirm and Plan">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">f831b08d-05d9-4e70-bd3c-40fbd9da208c</arg>
              <arg name="FIELD_NOTES">YCFgU0FQOiB1cGRhdGUgU04gc3RhdHVz</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmxpbmsuSXNzdWVMaW5rXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG5VUkwgdXJsXG5IdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uXG5cbnJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcblxuZGVmIGJvZHlfcmVxID0gW11cbmJvZHlfcmVxID0gW1xuICAgIFwiaXNzdWVLZXlcIjogaXNzdWUua2V5LFxuICAgIFwic3RhdHVzXCI6IFwiUExBXCJcbl0gXG5cbmRlZiBzZXJ2aWNlTm90aWZpY2F0aW9uID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfU0FQX1NFUlZJQ0VfTk9USUZJQ0FUSU9OXCIpWzBdXG5pZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNlcnZpY2VOb3RpZmljYXRpb24pICE9IG51bGwpe1xuICAgICAgICBcbiAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS9hZnRlci9zYWxlcy9jcmVhdGUvc2VydmljZS9ub3RpZmljYXRpb25cIlxuXG4gICAgbG9nLmRlYnVnIFwiYmFzZVVSTCBTTjogXCIgKyBiYXNlVVJMXG4gICAgbG9nLmRlYnVnIFwiYm9keV9yZXEgU046IFwiICsgYm9keV9yZXFcbiAgICB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG4gICAgY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbiAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XG4gICAgbG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG4gICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG5cbiAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpICYmICFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAxXCIpKXtcbiAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJTTl9VUERBVEVcIilcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpKVxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxuICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXG5cbiAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgfWVsc2V7XG4gICAgICAgIC8qKiBTRVJWSUNFIE9SREVSIENSRUFUSU9OICoqL1xuICAgICAgICBib2R5X3JlcSA9IFtcbiAgICAgICAgICAgIFwiaXNzdWVLZXlcIjogaXNzdWUua2V5XG4gICAgICAgIF0gXG4gICAgICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL2FmdGVyL3NhbGVzL2NyZWF0ZS9vci91cGRhdGUvc2VydmljZS9vcmRlclwiXG5cbiAgICAgICAgbG9nLmRlYnVnIFwiYmFzZVVSTCBTTzogXCIgKyBiYXNlVVJMXG4gICAgICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNPOiBcIiArIGJvZHlfcmVxXG4gICAgICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbiAgICAgICAgY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuICAgICAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICAgICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG4gICAgICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbiAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICAgICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxuICAgICAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cbiAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XG5cbiAgICAgICAgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxuXG4gICAgICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSAmJiAhY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XG4gICAgICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHRcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVmIGpzb25TbHVycGVyID0gbmV3IEpzb25TbHVycGVyKClcbiAgICAgICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpXG4gICAgICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxuICAgICAgICAgICAgbG9nLmRlYnVnIFwibWVzc2FnZTogXCIgKyAganNvbl9vYmplY3QubWVzc2FnZVxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiZXJyb3JzOiBcIiArICBqc29uX29iamVjdC5lcnJvcnMudG9TdHJpbmcoKVxuXG4gICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXG4gICAgICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJTT19DUkVBVEVcIilcbiAgICAgICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsganNvbl9vYmplY3QuZXJyb3JzWzBdKVxuICAgICAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcbiAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcblxuICAgICAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxuICAgICAgICB9XG4gICAgfVxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="Not Done" status="Done" step="3">
              <post-functions>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdateissuestatus-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowcreatecomment-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowgeneratechangehistory-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">e05070cf-b7e1-4333-a13e-22d55ac3d7d1</arg>
                  <arg name="FIELD_NOTES">YCFgQ2xlYXIgY2FjaGU=</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG4vKiBSRVNUIEFQSSBwZXIgR2VuZXJhemlvbmUgQWxsZWdhdG8gUmFwcG9ydG8gZGkgSW50ZXJ2ZW50byAqL1xucmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xuLypTY3JpcHQgVmFyaWFibGVzKi9cbi8vUGVyIHRlc3QgZGEgY29uc29sZVxuLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIk9QVVQtMTQwNjJcIilcbmJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL2NsZWFyQ2FjaGUvZGF0YU9iamVjdFwiXG5kZWYgYm9keV9yZXEgPSBbXVxuVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcbkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xuY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcbmNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcbmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5sb2cuZGVidWcgXCJib2R5X3JlcTogXCIgKyBib2R5X3JlcVxuY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxubG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXG5jb25uZWN0aW9uLmNvbm5lY3QoKTtcblxuaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbn0iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowreindexissue-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="101" name="Genera Operazioni di Manutenzione">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">56d285d0-3b7f-4146-a3ed-b1319013939d</arg>
                <arg name="FIELD_NOTES">YCFgUE0gVGFzayBzZW56YSBQTSBvcGVyYXRpb25z</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="disabled">false</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJjZlZhbHVlc1snT1BfUE1fT1BFUkFUSU9OU19PRFMnXSA9PSBudWxsIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">36237cda-1b88-49eb-8e62-354285079ef6</arg>
              <arg name="FIELD_NOTES">YCFgUE0gVGFzazogZ2VuZXJhIG9wZXJhemlvbmkgZGkgbWFudXRlbnppb25l</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLkN1c3RvbUZpZWxkTWFuYWdlcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2RlYy5iaW5hcnkuQmFzZTY0O1xuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcblx0cHJvcGVydGllcy5sb2FkKGl0KVxufVxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXG5cbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcbkN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcbmRlZiByZXF1ZXN0TWV0aG9kXG5kZWYgYmFzZVVSTFxuXG4vKiBSRVNUIEFQSSBwZXIgcHVsaXppYSBjYWNoZSBpc3N1ZSBsaW5rYXRhICovXG5yZXF1ZXN0TWV0aG9kID0gXCJQVVRcIjtcbi8qU2NyaXB0IFZhcmlhYmxlcyovXG4vL1BlciB0ZXN0IGRhIGNvbnNvbGVcbi8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMzI1MzVcIilcbmJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL3BtLXN1YnRhc2svXCIgKyBpc3N1ZS5rZXkgKyBcIi9vcGVyYXRpb25zXCJcblVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXG5IdHRwVVJMQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xuY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xuY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG5jb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcbmNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XG5jb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XG5jb25uZWN0aW9uLmNvbm5lY3QoKTtcbmxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcbmxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcbmxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcblxuaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcbiAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcbn0iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">56673115-3813-4abf-96a6-27892999a488</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXJcclxuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEud29ya2Zsb3cuSmlyYVdvcmtmbG93XHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLnNjcmVlbi5GaWVsZFNjcmVlbkxheW91dEl0ZW1cclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuc2NyZWVuLkZpZWxkU2NyZWVuVGFiXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkZpZWxkTWFuYWdlclxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5zY3JlZW4uRmllbGRTY3JlZW5cclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuc2NyZWVuLkZpZWxkU2NyZWVuTWFuYWdlclxyXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5sb2FkZXIuQWN0aW9uRGVzY3JpcHRvclxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLndvcmtmbG93LldvcmtmbG93TWFuYWdlclxyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XHJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyO1xyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGw7XHJcblxyXG5kZWYgcmVxdWVzdE1ldGhvZFxyXG5kZWYgYmFzZVVSTFxyXG5kZWYgcmVzcG9uc2VDb2RlXHJcbmRlZiByZXNwb25zZU1lc3NhZ2VcclxuZGVmIGJvZHlSZXEgPSBbXVxyXG5kZWYgYnJcclxuTWFwPFN0cmluZywgT2JqZWN0PiBjdXN0b21GaWVsZE1hcCA9IG5ldyBIYXNoTWFwPFN0cmluZyxPYmplY3Q+KCk7XHJcblxyXG50cnkge1xyXG4gICAgUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxyXG4gICAgRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcclxuICAgIHByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XHJcbiAgICAgICAgcHJvcGVydGllcy5sb2FkKGl0KVxyXG4gICAgfVxyXG5cclxuICAgIGRlZiBzZXJ2ZXJCYXNlID0gU3RyaW5nLmZvcm1hdChcImh0dHA6Ly8lcy9vcFwiLCBwcm9wZXJ0aWVzWydhcGkuZW52J10pXHJcbiAgICBkZWYgdHJhbnNhY3Rpb25BY3Rpb24gPSBcInZhbGlkYXRvcnNcIlxyXG5cclxuICAgIFVSTCB1cmxcclxuICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb25cclxuICAgIHJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcclxuXHJcbiAgICBiYXNlVVJMID0gU3RyaW5nLmZvcm1hdChcIiVzL3Jlc3QvamlyYS93b3JrZmxvd3MvJXMvJXNcIiwgc2VydmVyQmFzZSwgdHJhbnNpZW50VmFycy5hY3Rpb25JZCwgdHJhbnNhY3Rpb25BY3Rpb24pO1xyXG5cclxuICAgIGxvZy5kZWJ1ZyBiYXNlVVJMO1xyXG5cclxuICAgIFdvcmtmbG93TWFuYWdlciB3b3JrZmxvd01hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRXb3JrZmxvd01hbmFnZXIoKTtcclxuICAgIEppcmFXb3JrZmxvdyBqaXJhV29ya2Zsb3cgPSB3b3JrZmxvd01hbmFnZXIuZ2V0V29ya2Zsb3codHJhbnNpZW50VmFycy5pc3N1ZSk7XHJcblxyXG4gICAgQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xyXG4gICAgXHJcbiAgICBsb2cuZGVidWcgamlyYVdvcmtmbG93LmdldE5hbWUoKTtcclxuICAgIFxyXG4gICAgQWN0aW9uRGVzY3JpcHRvciBhZCA9IHdvcmtmbG93TWFuYWdlci5nZXRBY3Rpb25EZXNjcmlwdG9yKHRyYW5zaWVudFZhcnMuaXNzdWUsIHRyYW5zaWVudFZhcnMuYWN0aW9uSWQpO1xyXG5cclxuICAgIGxvZy5kZWJ1ZyBhZC5nZXROYW1lKCkgICAgICAgICAgICAgIC8vR2VuZXJhIE9wZXJhemlvbmkgZGkgTWFudXRlbnppb25lXHJcbiAgICBsb2cuZGVidWcgYWQuZ2V0TWV0YUF0dHJpYnV0ZXMoKSAgICAvL3tvcHNiYXItc2VxdWVuY2U9MTAsIGppcmEuZGVzY3JpcHRpb249LCBqaXJhLmZpZWxkc2NyZWVuLmlkPTE5OTEwfVxyXG5cclxuICAgIGRlZiBhZE1ldGEgPSBhZC5nZXRNZXRhQXR0cmlidXRlcygpO1xyXG4gICAgZGVmIGZpZWxkU2NyZWVuSWQgPSBhZE1ldGEuZ2V0KFwiamlyYS5maWVsZHNjcmVlbi5pZFwiKTtcclxuICAgIGxvZy5kZWJ1ZyBcIkZpZWxkIHNjcmVlbiBpZDogXCIgKyBmaWVsZFNjcmVlbklkXHJcblxyXG4gICAgaWYoZmllbGRTY3JlZW5JZCAhPSBudWxsICYmIGZpZWxkU2NyZWVuSWQgIT0gXCJcIikge1xyXG4gICAgICAgIEZpZWxkU2NyZWVuTWFuYWdlciBmaWVsZFNjcmVlbk1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDb21wb25lbnQoRmllbGRTY3JlZW5NYW5hZ2VyLmNsYXNzKTtcclxuICAgICAgICBGaWVsZFNjcmVlbiBmaWVsZFNjcmVlbiA9IGZpZWxkU2NyZWVuTWFuYWdlci5nZXRGaWVsZFNjcmVlbihMb25nLnZhbHVlT2YoZmllbGRTY3JlZW5JZC50b1N0cmluZygpKSk7XHJcbiAgICAgICAgTGlzdDxGaWVsZFNjcmVlblRhYj4gZnN0cyA9IGZpZWxkU2NyZWVuLmdldFRhYnMoKTtcclxuICAgICAgICBmb3IgKEZpZWxkU2NyZWVuVGFiIGZzdCA6IGZzdHMpIHtcclxuICAgICAgICAgICAgTGlzdDxGaWVsZFNjcmVlbkxheW91dEl0ZW0+IHF3ZSA9IGZzdC5nZXRGaWVsZFNjcmVlbkxheW91dEl0ZW1zKCk7XHJcbiAgICAgICAgICAgIGZvciAoRmllbGRTY3JlZW5MYXlvdXRJdGVtIGZzbGkgOiBxd2UpIHtcclxuICAgICAgICAgICAgICAgIGlmIChmc2xpLmdldEZpZWxkSWQoKSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBDdXN0b21GaWVsZCBjdXN0b21GaWVsZCA9IGN1c3RvbUZpZWxkTWFuYWdlci5nZXRDdXN0b21GaWVsZE9iamVjdChmc2xpLmdldEZpZWxkSWQoKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VzdG9tRmllbGQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGVmIGN1c3RvbUZpZWxkVmFsdWUgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1c3RvbUZpZWxkKTtcclxuICAgICAgICAgICAgICAgIGN1c3RvbUZpZWxkTWFwLnB1dChmc2xpLmdldEZpZWxkSWQoKSwgY3VzdG9tRmllbGRWYWx1ZSA9PSBudWxsID8gbnVsbCA6IGN1c3RvbUZpZWxkVmFsdWUudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBjdXN0b21GaWVsZE1hcCA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBsb2cuZGVidWcgY3VzdG9tRmllbGRNYXBcclxuXHJcbiAgICBib2R5UmVxID0gWyBcclxuICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleSxcclxuICAgICAgICBcImFjdGlvbk5hbWVcIjogYWQuZ2V0TmFtZSgpLFxyXG4gICAgICAgIFwiamlyYVdvcmtmbG93TmFtZVwiOiBqaXJhV29ya2Zsb3cuZ2V0TmFtZSgpLFxyXG4gICAgICAgIFwiY3VzdG9tRmllbGRNYXBcIjogY3VzdG9tRmllbGRNYXAsXHJcbiAgICAgICAgXCJwcm9wZXJ0aWVzXCI6IHByb3BlcnRpZXNcclxuICAgIF0gXHJcblxyXG4gICAgbG9nLmRlYnVnIFwiYmFzZVVSTCBTTjogXCIgKyBiYXNlVVJMXHJcbiAgICBsb2cuZGVidWcgXCJib2R5UmVxIFNOOiBcIiArIGJvZHlSZXFcclxuXHJcbiAgICB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXHJcbiAgICBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xyXG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xyXG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XHJcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcclxuICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XHJcbiAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XHJcbiAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlSZXEpIH1cclxuICAgIFxyXG4gICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XHJcbiAgICByZXNwb25zZUNvZGUgPSBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkgICAgXHJcbiAgICAgICAgXHJcbiAgICBsb2cuZGVidWcgXCJSZXNwb25zZSBIdHRwU3RhdHVzQ29kZTogXCIgKyByZXNwb25zZUNvZGVcclxuICAgICAgICBcclxuICAgIC8vIElmIGJhY2tlbmQgcmVwbGllcyB3aXRoIDIwMCB0aGVuIHRoZSBjb25kaXRpb24gaXMgcGFzc2VkICAgIFxyXG4gICAgaWYoXCIyMDBcIi5lcXVhbHMocmVzcG9uc2VDb2RlKSl7XHJcbiAgICAgICAgbG9nLmRlYnVnIFwiT0tcIlxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvL1RoaXMgaXMgYSBiYWNrZW5kIGVycm9yLi4gbG9nXHJcbiAgICAgICAgbG9nLmRlYnVnIFwiQmFja2VuZCBlcnJvclwiXHJcblxyXG4gICAgICAgIGRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgICAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgICAgICBkZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgICAgICBkZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXHJcblxyXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcclxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFUlJPUlwiKSAvL2lmIGR5bmFtaWMsIGJldHRlclxyXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChudWxsKSAgIC8vaXQgc291bmRzIGl0IGlzIHVzZWQgYXMgc2VwYXJhdG9yXHJcblxyXG4gICAgICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHRcclxuICAgICAgICBsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXHJcblxyXG4gICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXHJcbiAgICAgICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcclxuICAgICAgICBpZihqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCl7XHJcbiAgICAgICAgICAgIC8vZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5tZXNzYWdlKVxyXG4gICAgICAgICAgICBpZihqc29uX29iamVjdC5lcnJvcnMgaW5zdGFuY2VvZiBMaXN0KXtcclxuICAgICAgICAgICAgICAgIGZvcihkZWYgY3VyIDogKExpc3QpanNvbl9vYmplY3QuZXJyb3JzKXtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvck1zZ3MuYWRkKGN1ci50b1N0cmluZygpKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChqc29uX29iamVjdC5lcnJvcnMudG9TdHJpbmcoKSlcclxuICAgICAgICAgICAgfSAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxyXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcclxuXHJcbiAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcclxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcclxuICAgIH1cclxufSBjYXRjaCAoRXhjZXB0aW9uIGUpe1xyXG4gICAgLy9UaGlzIGlzIGFuIGV4Y2VwdGlvbiBpbiB0aGUgc2NyaXB0XHJcbiAgICBsb2cuZGVidWcgXCJFeGNlcHRpb24gcmFpc2VkXCJcclxuICAgIGxvZy5lcnJvciBlXHJcbiAgICBpZihlIGluc3RhbmNlb2YgSW52YWxpZElucHV0RXhjZXB0aW9uKXtcclxuICAgICAgICB0aHJvdyBlO1xyXG4gICAgfVxyXG4gICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIlZhbGlkYXRvcnMgZmFpbGVkXCIpO1xyXG59XHJcbiIsInNjcmlwdFBhdGgiOm51bGx9</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="6">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="231" name="Clear OP_SUPPLIER">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">92c7bf91-5f62-49c4-bba0-b13767297b6d</arg>
                <arg name="FIELD_INVERT_CONDITION"></arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.UserCondition</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_USER_IDS">arianna.fabbri</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="6">
              <post-functions>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="uuid">bc2c77b9-422d-4c36-9198-94c3d5bcc1cb</arg>
                  <arg name="field">customfield_23235</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.33.0</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="field2">customfield_22813</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="7" name="Asset Check">
      <meta name="jira.status.id">14730</meta>
      <actions>
        <action id="61" name="Check Completed" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">20400</meta>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">d776b1a4-116c-43ec-b6a8-f2045af9fc90</arg>
              <arg name="FIELD_NOTES">YCFgT1A6IENoZWNrIFJlcXVpcmVkIEZpZWxkcw==</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXHJcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvblxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxyXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvbkJ1aWxkZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXHJcbmltcG9ydCBqYXZhLnRleHQuU2ltcGxlRGF0ZUZvcm1hdDtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZVxyXG5cclxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxyXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxyXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xyXG4gICAgcHJvcGVydGllcy5sb2FkKGl0KVxyXG59XHJcbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxyXG5cclxuLy9Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKClcclxuLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy00MTc1NVwiKVxyXG5cclxubG9nLmRlYnVnIFwiVHJhbnNhemlvbmUgQ09ORklSTSBBU1NFVCAtIElzc3VlOiBcIiArIGlzc3VlXHJcblxyXG5kZWYgZXJyb3JzID0gZmFsc2VcclxuZGVmIHdhcm5pbmdzID0gZmFsc2VcclxuXHJcbmRlZiB0cmFuc2l0aW9uQ2hlY2sgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKHByb3BlcnRpZXNbJ2NmLmNoZWNrQW5kQ29uZmlybSddLnRvU3RyaW5nKCkpWzBdXHJcbmRlZiBkeW5hbWljUmlza3NBc3MgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfQVNTRVRfUklTS1NfQVNTRVNTTUVOVFwiKVswXVxyXG5cclxuZGVmIGVycm9yTWFuZGF0b3J5RmllbGRzID0gbmV3IEFycmF5TGlzdCgpXHJcbmRlZiBlcnJvclJlamVjdGVkVGt0ID0gZmFsc2VcclxuXHJcbmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZHluYW1pY1Jpc2tzQXNzKSE9bnVsbCAmJiAoU3RyaW5nKWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZHluYW1pY1Jpc2tzQXNzKSAhPSBcIlwiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGR5bmFtaWNSaXNrc0FzcykudG9TdHJpbmcoKS5lcXVhbHMoXCJcIikpe1xyXG4gICAgLypDaWNsYXJlIHR1dHRpIGdsaSBvZ2dldHRpIGFzc29jaWF0aSBhbCBjYW1wbyovXHJcbiAgICAvL2luc2lnaHQgY2xhc3NlcyAmIGNvbXBvbmVudHNcclxuICAgIENsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTsgIFxyXG4gICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XHJcbiAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xyXG4gICAgZGVmIG9iamVjdEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RGYWNhZGVDbGFzcyk7XHJcblxyXG4gICAgZGVmIHJpc2tzQXNzZXNzbWVudCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZHluYW1pY1Jpc2tzQXNzKVxyXG4gICAgZGVmIGRyYTUsIGRyYTZcclxuICAgIGxvZy5kZWJ1ZyBcInJpc2tzQXNzZXNzbWVudDogXCIgKyByaXNrc0Fzc2Vzc21lbnRcclxuICAgIGZvcihpIGluIHJpc2tzQXNzZXNzbWVudCl7XHJcbiAgICAgICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0XHJcbiAgICAgICAgZGVmIHJpc2s9aS50b1N0cmluZygpXHJcbiAgICAgICAgZGVmIHJpc2tLZXkgPSByaXNrLnN1YnN0cmluZyhyaXNrLmxhc3RJbmRleE9mKCcoJykrMSxyaXNrLmxhc3RJbmRleE9mKCcpJykpXHJcbiAgICAgICAgZGVmIHJpc2tPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4ocmlza0tleSlcclxuXHJcbiAgICAgICAgZGVmIG9iVHJpYWdlXHJcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHJpc2tPYmplY3QuZ2V0SWQoKSwgXCJEUkExXCIpPT1udWxsKXtcclxuICAgICAgICAgICAgZXJyb3JzPXRydWVcclxuICAgICAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKFwiRHluYW1pYyBSaXNrIEFzc2Vzc21lbnQgQ29tcGxldGVkIGZvciB0aGUgam9iXCIpXHJcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChEeW5hbWljIFJpc2sgQXNzZXNzbWVudCBDb21wbGV0ZWQgZm9yIHRoZSBqb2IpXCJcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihyaXNrT2JqZWN0LmdldElkKCksIFwiRFJBMlwiKT09bnVsbCl7XHJcbiAgICAgICAgICAgIGVycm9ycz10cnVlXHJcbiAgICAgICAgICAgIGVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChcIkFsbCBoYXphcmRzIGNvdmVyZWQgYnkgdGhlIFJpc2sgQXNzZXNzbWVudD9cIilcclxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKEFsbCBoYXphcmRzIGNvdmVyZWQgYnkgdGhlIFJpc2sgQXNzZXNzbWVudD8pXCJcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihyaXNrT2JqZWN0LmdldElkKCksIFwiRFJBMlwiKSE9bnVsbCAmJiBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ocmlza09iamVjdC5nZXRJZCgpLCBcIkRSQTJcIikuY3JlYXRlTXV0YWJsZSgpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS52YWx1ZS50b1N0cmluZygpPT1cIk5PXCIgJiYgKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihyaXNrT2JqZWN0LmdldElkKCksIFwiRFJBM1wiKT09bnVsbCB8fCBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ocmlza09iamVjdC5nZXRJZCgpLCBcIkRSQTNcIikudG9TdHJpbmcoKT09XCJcIiApKXtcclxuICAgICAgICAgICAgZXJyb3JzPXRydWVcclxuICAgICAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKFwiQ29tcGxldGUgYWRkaXRpb25hbCBvdXRsaW5pbmcgaGF6YXJkcyBhbmQgY29udHJvbCBtZWFzdXJlc1wiKVxyXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQoQ29tcGxldGUgYWRkaXRpb25hbCBvdXRsaW5pbmcgaGF6YXJkcyBhbmQgY29udHJvbCBtZWFzdXJlcylcIlxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHJpc2tPYmplY3QuZ2V0SWQoKSwgXCJEUkE0XCIpPT1udWxsKXtcclxuICAgICAgICAgICAgZXJyb3JzPXRydWVcclxuICAgICAgICAgICAgZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKFwiTWV0aG9kIFN0YXRlbWVudCBhdmFpbGFibGUgZm9yIHRoZSBqb2I/XCIpXHJcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChNZXRob2QgU3RhdGVtZW50IGF2YWlsYWJsZSBmb3IgdGhlIGpvYj8pXCJcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihyaXNrT2JqZWN0LmdldElkKCksIFwiRFJBNVwiKT09bnVsbCl7XHJcbiAgICAgICAgICAgIGVycm9ycz10cnVlXHJcbiAgICAgICAgICAgIGVycm9yTWFuZGF0b3J5RmllbGRzLmFkZChcIkRvIHlvdSBoYXZlIHRoZSBjb3JyZWN0IHRvb2xzIGFuZCBQUEUgdG8gY2Fycnkgb3V0IHRoZSB0YXNrP1wiKVxyXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQoRG8geW91IGhhdmUgdGhlIGNvcnJlY3QgdG9vbHMgYW5kIFBQRSB0byBjYXJyeSBvdXQgdGhlIHRhc2s/KVwiXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHJpc2tPYmplY3QuZ2V0SWQoKSwgXCJEUkE1XCIpLmNyZWF0ZU11dGFibGUoKVxyXG4gICAgICAgICAgICBkcmE1ID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLnZhbHVlLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgaWYoZHJhNS5lcXVhbHMoXCJOT1wiKSl7XHJcbiAgICAgICAgICAgICAgICBlcnJvclJlamVjdGVkVGt0PXRydWVcclxuICAgICAgICAgICAgICAgIHdhcm5pbmdzPXRydWVcclxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImRyYTU6IFwiICsgZHJhNVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ocmlza09iamVjdC5nZXRJZCgpLCBcIkRSQTZcIik9PW51bGwpe1xyXG4gICAgICAgICAgICBlcnJvcnM9dHJ1ZVxyXG4gICAgICAgICAgICBlcnJvck1hbmRhdG9yeUZpZWxkcy5hZGQoXCJEbyB5b3UgaGF2ZSBhbGwgdGhlIGluZm9ybWF0aW9uIGFuZCB0cmFpbmluZyB0byBjb21wbGV0ZSB0aGUgdGFzaz9cIilcclxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiZXJyb3JNYW5kYXRvcnlGaWVsZHMuYWRkKERvIHlvdSBoYXZlIGFsbCB0aGUgaW5mb3JtYXRpb24gYW5kIHRyYWluaW5nIHRvIGNvbXBsZXRlIHRoZSB0YXNrPylcIlxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihyaXNrT2JqZWN0LmdldElkKCksIFwiRFJBNlwiKS5jcmVhdGVNdXRhYmxlKClcclxuICAgICAgICAgICAgZHJhNiA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS52YWx1ZS50b1N0cmluZygpXHJcbiAgICAgICAgICAgIGlmKGRyYTYuZXF1YWxzKFwiTk9cIikpe1xyXG4gICAgICAgICAgICAgICAgZXJyb3JSZWplY3RlZFRrdD10cnVlXHJcbiAgICAgICAgICAgICAgICB3YXJuaW5ncz10cnVlXHJcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJkcmE2OiBcIiArIGRyYTZcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbG9nLmRlYnVnIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKVxyXG4gICAgICAgIGxvZy5kZWJ1ZyBlcnJvck1hbmRhdG9yeUZpZWxkc1xyXG5cclxuICAgICAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXHJcblxyXG4gICAgICAgIGlmICghZXJyb3JzICYmICF3YXJuaW5ncyl7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGlmKCFlcnJvcnMgJiYgd2FybmluZ3Mpe1xyXG4gICAgICAgICAgICAgICAgLy9TZSBjaSBzb25vIHNvbG8gd2FybmluZ3MgdmVyaWZpY28gc2UgbCd1dGVudGUgaGEgZ2lcdTAwZTAgZGljaGlhcmF0byBkaSB2b2xlciBwcm9zZWd1aXJlIGNvbXVucXVlXHJcbiAgICAgICAgICAgICAgICAvLyAtIHRyYW5zaXRpb24gZmllbGQgXCJPUEFBX0NIRUNLX0FORF9DT05GSVJNXCI9XCJZZXNcIlxyXG4gICAgICAgICAgICAgICAgLy8gLSBpbiBjYXNvIGNvbnRyYXJpbyBpbnZpbyBpIHdhcm5pbmcgYSBGRVxyXG5cclxuICAgICAgICAgICAgICAgIC8vbG9nLmRlYnVnIFwidHJhbnNpdGlvbkNoZWNrOiBcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodHJhbnNpdGlvbkNoZWNrKVxyXG4gICAgICAgICAgICAgICAgLy9sb2cuZGVidWcgXCJyZXN1bHQ6IFwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpXHJcbiAgICAgICAgICAgICAgICBpZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRyYW5zaXRpb25DaGVjaykudG9TdHJpbmcoKS5lcXVhbHMoXCJZZXNcIikpe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vbG9nLmRlYnVnIFwicmV0dXJuIHRydWVcIlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBkZWYgd0xpc3QgPSBuZXcgQXJyYXlMaXN0KClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZXJyb3JSZWplY3RlZFRrdCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBlTGlzdFJlamVjdGVkID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVMaXN0UmVqZWN0ZWQuYWRkKFwiV1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlTGlzdFJlamVjdGVkLmFkZChcIlJFSkVDVEVEX0RVRV9UT19SSVNLU19BU1NFU1NNRU5UXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVMaXN0UmVqZWN0ZWQuYWRkKG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdMaXN0LmFkZChlTGlzdFJlamVjdGVkKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KVxyXG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcInRocm93IGV4Y2VwdGlvbjogXCIgKyBvdXRwdXQudG9TdHJpbmcoKVxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIldcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbihcIldcIiwgb3V0cHV0LnRvU3RyaW5nKCkpICAgXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKGVycm9ycyAmJiAhd2FybmluZ3Mpe1xyXG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXHJcblxyXG4gICAgICAgICAgICAgICAgaWYoZXJyb3JNYW5kYXRvcnlGaWVsZHMuc2l6ZSgpID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmIGVMaXN0TWFuZGF0b3J5ID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKFwiRVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChcIk1BTkRBVE9SWV9GSUVMRFNcIilcclxuICAgICAgICAgICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQobnVsbClcclxuICAgICAgICAgICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoZXJyb3JNYW5kYXRvcnlGaWVsZHMpXHJcbiAgICAgICAgICAgICAgICAgICAgZUxpc3QuYWRkKGVMaXN0TWFuZGF0b3J5KVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXHJcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJ0aHJvdyBleGNlcHRpb246IFwiICsgb3V0cHV0LnRvU3RyaW5nKClcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxyXG4gICAgICAgICAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKFwiRVwiLCBvdXRwdXQudG9TdHJpbmcoKSkgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihlcnJvcnMgJiYgd2FybmluZ3Mpe1xyXG4gICAgICAgICAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgICAgICAgICBkZWYgd0xpc3QgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgICAgICAgICAgICAgIGlmKGVycm9yTWFuZGF0b3J5RmllbGRzLnNpemUoKSA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZiBlTGlzdE1hbmRhdG9yeSA9IG5ldyBBcnJheUxpc3QoKVxyXG4gICAgICAgICAgICAgICAgICAgIGVMaXN0TWFuZGF0b3J5LmFkZChcIkVcIilcclxuICAgICAgICAgICAgICAgICAgICBlTGlzdE1hbmRhdG9yeS5hZGQoXCJNQU5EQVRPUllfRklFTERTXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgZUxpc3RNYW5kYXRvcnkuYWRkKGVycm9yTWFuZGF0b3J5RmllbGRzKVxyXG4gICAgICAgICAgICAgICAgICAgIGVMaXN0LmFkZChlTGlzdE1hbmRhdG9yeSlcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZihlcnJvclJlamVjdGVkVGt0KXtcclxuICAgICAgICAgICAgICAgICAgICBkZWYgZUxpc3RSZWplY3RlZCA9IG5ldyBBcnJheUxpc3QoKVxyXG4gICAgICAgICAgICAgICAgICAgIGVMaXN0UmVqZWN0ZWQuYWRkKFwiV1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIGVMaXN0UmVqZWN0ZWQuYWRkKFwiUkVKRUNURURfRFVFX1RPX1JJU0tTX0FTU0VTU01FTlRcIilcclxuICAgICAgICAgICAgICAgICAgICBlTGlzdFJlamVjdGVkLmFkZChudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHdMaXN0LmFkZChlTGlzdFJlamVjdGVkKVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXHJcbiAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KVxyXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwidGhyb3cgZXhjZXB0aW9uOiBcIiArIG91dHB1dC50b1N0cmluZygpXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJXRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXHJcbiAgICAgICAgICAgICAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJXRVwiLCBvdXRwdXQudG9TdHJpbmcoKSkgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59ZWxzZXtcclxuICAgIHJldHVybiB0cnVlXHJcbn1cclxuIiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">8ab72aa0-1422-40dd-9c13-8008a9e2b0dd</arg>
              <arg name="FIELD_NOTES">YCFgQ29uZmlybSBSaXNrIEFuYWx5c2lz</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQ7XG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5cblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcblxuZGVmIHdMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG5kZWYgdHJhbnNpdGlvbkNoZWNrID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi5jaGVja0FuZENvbmZpcm0nXS50b1N0cmluZygpKVswXVxuZGVmIHdhcm5pbmdFbXB0eUZpZWxkcyA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxuZGVmIGN1c3RvbWVyID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0NVU1RPTUVSXCIpWzBdXG5kZWYgYXNzZXQgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfQVNTRVRcIilbMF1cbmRlZiBzZm9uZGFtZW50bywgYmF0dGVyaWUsIHJhZGFyLCByYWRhckZ1bnppb25hbnRpLCBmb3RvY2VsbHVsZSwgZm9yemFJbXBhdHRvXG5kZWYgcmVxdWlyZWRGaWVsZHMgPSBuZXcgQXJyYXlMaXN0KClcblxuLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzXG5DbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7ICBcbkNsYXNzIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlXCIpO1xuZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xuXG5kZWYgcG1Bc3NldCA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoYXNzZXQpXG5sb2cuZGVidWcgXCJwbUFzc2V0OiBcIiArIHBtQXNzZXRcblxuLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0XG5kZWYgaW5zdGFsbGF0aW9uPXBtQXNzZXQudG9TdHJpbmcoKVxuZGVmIGluc3RhbGxhdGlvbktleSA9IGluc3RhbGxhdGlvbi5zdWJzdHJpbmcoaW5zdGFsbGF0aW9uLmxhc3RJbmRleE9mKCcoJykrMSxpbnN0YWxsYXRpb24ubGFzdEluZGV4T2YoJyknKSlcbmRlZiBpbnN0YWxsYXRpb25PYmogPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oaW5zdGFsbGF0aW9uS2V5KVxubG9nLmRlYnVnIFwiaW5zdGFsbGF0aW9uT2JqOiBcIiArIGluc3RhbGxhdGlvbk9ialxubG9nLmRlYnVnIFwiaW5zdGFsbGF0aW9uT2JqLmdldElkKCk6IFwiICsgaW5zdGFsbGF0aW9uT2JqLmdldElkKClcbmRlZiBvYlRyaWFnZSwgcHJvZFR5cGVcblxuLy9USVBPIElNUElBTlRPXG5pZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiUFVCTElDX1BST0RVQ1RfRkFNSUxZX1JFRlwiKSl7XG4gICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiUFVCTElDX1BST0RVQ1RfRkFNSUxZX1JFRlwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICBkZWYgcHJvZFR5cGVJZCA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpXG4gICAgcHJvZFR5cGUgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ocHJvZFR5cGVJZCwgXCJOYW1lXCIpLmNyZWF0ZU11dGFibGUoKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG59XG5sb2cuZGVidWcgXCJwcm9kVHlwZTogXCIgKyBwcm9kVHlwZVxuZGVmIHN0YXR1c1xuZGVmIHRvYmVTdG9wcGVkID0gZmFsc2VcbmRlZiBjZk5ld1ZhbHVlLCBmaWVsZENvbmZpZ1xuXG4vL1BPUlRFIEFVVE9NQVRJQ0hFXG5pZihwcm9kVHlwZS5lcXVhbHMoXCJQT1JURSBBVVRPTUFUSUNIRVwiKSl7XG5cbiAgICAvL0lcdFBPUlRFX1JBREFSX1RZUEVcbiAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiUE9SVEVfUkFEQVJfVFlQRVwiKSl7XG4gICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBPUlRFX1JBREFSX1RZUEVcIikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgIHJhZGFyID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgIH1cbiAgICBsb2cuZGVidWcgXCJyYWRhcjogXCIgKyByYWRhclxuICAgIC8vT1x0UE9SVEVfRk9UT0NFTExVTEVcbiAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiUE9SVEVfRk9UT0NFTExVTEVcIikpe1xuICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJQT1JURV9GT1RPQ0VMTFVMRVwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgZm90b2NlbGx1bGUgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG4gICAgfVxuICAgIGxvZy5kZWJ1ZyBcImZvdG9jZWxsdWxlOiBcIiArIGZvdG9jZWxsdWxlXG4gICAgLy9UXHRQT1JURV9GT1JaQV9JTVBBVFRPX05FSV9MSU1JVElcbiAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiUE9SVEVfRk9SWkFfSU1QQVRUT19ORUlfTElNSVRJXCIpKXtcbiAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiUE9SVEVfRk9SWkFfSU1QQVRUT19ORUlfTElNSVRJXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICBmb3J6YUltcGF0dG8gPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG4gICAgfVxuICAgIGxvZy5kZWJ1ZyBcImZvcnphSW1wYXR0bzogXCIgKyBmb3J6YUltcGF0dG9cbiAgICAvL0ZcdFBPUlRFX0JBVFRFUklFX0VNRVJHRU5aQVxuICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJQT1JURV9CQVRURVJJRV9FTUVSR0VOWkFcIikpe1xuICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJQT1JURV9CQVRURVJJRV9FTUVSR0VOWkFcIikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgIGJhdHRlcmllID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgIH1cbiAgICBsb2cuZGVidWcgXCJiYXR0ZXJpZTogXCIgKyBiYXR0ZXJpZVxuICAgIC8vQlx0UE9SVEVfU0ZPTkRBTUVOVE9cbiAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiUE9SVEVfU0ZPTkRBTUVOVE9cIikpe1xuICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJQT1JURV9TRk9OREFNRU5UT1wiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgc2ZvbmRhbWVudG8gPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG4gICAgfVxuICAgIGxvZy5kZWJ1ZyBcInNmb25kYW1lbnRvOiBcIiArIHNmb25kYW1lbnRvXG4gICAgLy9MXHRQT1JURV9SQURBUl9GVU5aSU9OQU5USVxuICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJQT1JURV9SQURBUl9GVU5aSU9OQU5USVwiKSl7XG4gICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBPUlRFX1JBREFSX0ZVTlpJT05BTlRJXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICByYWRhckZ1bnppb25hbnRpID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgIH1cbn1cblxuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0cmFuc2l0aW9uQ2hlY2spLnRvU3RyaW5nKCkuZXF1YWxzKFwiWWVzXCIpKXtcbiAgICAvL2xvZy5kZWJ1ZyBcInJldHVybiB0cnVlXCJcbiAgICByZXR1cm4gdHJ1ZVxufWVsc2V7XG4vKlxuICAgIGlmKCBwcm9kVHlwZS5lcXVhbHMoXCJQT1JURSBBVVRPTUFUSUNIRVwiKSAmJiAoXG4gICAgICAgIHJhZGFyRnVuemlvbmFudGkudG9TdHJpbmcoKS5lcXVhbHMoXCJOT1wiKSB8fFxuICAgICAgICAocmFkYXIudG9TdHJpbmcoKS5lcXVhbHMoXCJTT0xPIE1PVklNRU5UT1wiKSAmJiBmb3RvY2VsbHVsZS50b1N0cmluZygpLmVxdWFscyhcIk5PXCIpKSB8fFxuICAgICAgICAoZm9yemFJbXBhdHRvLnRvU3RyaW5nKCkuZXF1YWxzKFwiTk9cIikgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0b21lcikudG9TdHJpbmcoKS5jb250YWlucyhcIkFMTEVBTlpBXCIpKSB8fFxuICAgICAgICAoc2ZvbmRhbWVudG8udG9TdHJpbmcoKS5lcXVhbHMoXCJSSURPTkRBTlRFXCIpICYmIGJhdHRlcmllLnRvU3RyaW5nKCkuZXF1YWxzKFwiTk9cIikpKVxuICAgICl7XG4gICAgICAgIHJlcXVpcmVkRmllbGRzLmFkZChcIk9QX0FTU0VUX1NUT1BQRURcIilcbiAgICAgICAgZGVmIGZMaXN0ID0gbmV3IEFycmF5TGlzdCgpXG5cbiAgICAgICAgZGVmIGZMaXN0RGV0YWlsID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIGZMaXN0RGV0YWlsLmFkZChcIkZcIilcbiAgICAgICAgZkxpc3REZXRhaWwuYWRkKFwiVVNFUl9JTlBVVF9TVE9QX0FTU0VUXCIpXG4gICAgICAgIGZMaXN0RGV0YWlsLmFkZChudWxsKVxuICAgICAgICBmTGlzdERldGFpbC5hZGQocmVxdWlyZWRGaWVsZHMpXG4gICAgICAgIGZMaXN0LmFkZChmTGlzdERldGFpbClcblxuICAgICAgICBvdXRwdXQuYWRkKGZMaXN0KVxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJGXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcbiAgICAgICAgLy90aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKFwiRlwiLCBvdXRwdXQudG9TdHJpbmcoKSkgICBcblxuICAgICAgICAgICAgXG4gICAgfWVsc2V7Ki9cbiAgICAgICAgZGVmIHdMaXN0Q29uZmlybUVtcHR5ID0gbmV3IEFycmF5TGlzdCgpXG4gICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChcIldcIilcbiAgICAgICAgd0xpc3RDb25maXJtRW1wdHkuYWRkKFwiQ09ORklSTV9SSVNLX0FOQUxZU0lTXCIpXG4gICAgICAgIHdMaXN0Q29uZmlybUVtcHR5LmFkZChudWxsKVxuXG4gICAgICAgIHdMaXN0LmFkZCh3TGlzdENvbmZpcm1FbXB0eSlcblxuICAgICAgICBvdXRwdXQuYWRkKHdMaXN0KVxuICAgICAgICBsb2cuZGVidWcgXCJ0aHJvdyBleGNlcHRpb246IFwiICsgb3V0cHV0LnRvU3RyaW5nKClcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiV1wiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXG4gICAgLy99XG4gICAgXG4gICAgXG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">b3b3e533-3478-4dec-85eb-5fed7a6f02ec</arg>
              <arg name="FIELD_NOTES">YCFgT3BlcmF0aW9uUG9ydGFsIC0gQ2FsbCB0byBCRSB2YWxpZGF0b3I=</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuQ3VzdG9tRmllbGRcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5DdXN0b21GaWVsZE1hbmFnZXJcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS53b3JrZmxvdy5KaXJhV29ya2Zsb3dcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuc2NyZWVuLkZpZWxkU2NyZWVuTGF5b3V0SXRlbVxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5zY3JlZW4uRmllbGRTY3JlZW5UYWJcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuRmllbGRNYW5hZ2VyXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLnNjcmVlbi5GaWVsZFNjcmVlblxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5zY3JlZW4uRmllbGRTY3JlZW5NYW5hZ2VyXHJcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LmxvYWRlci5BY3Rpb25EZXNjcmlwdG9yXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEud29ya2Zsb3cuV29ya2Zsb3dNYW5hZ2VyXHJcbmltcG9ydCBncm9vdnkuanNvbi5TdHJlYW1pbmdKc29uQnVpbGRlcjtcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXI7XHJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbDtcclxuXHJcbmRlZiBiYXNlVVJMXHJcbmRlZiByZXNwb25zZUJvZHlcclxuXHJcbnRyeSB7XHJcbiAgICBQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXHJcbiAgICBGaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxyXG4gICAgcHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcclxuICAgICAgICBwcm9wZXJ0aWVzLmxvYWQoaXQpXHJcbiAgICB9XHJcblxyXG4gICAgZGVmIHNlcnZlckJhc2UgPSBTdHJpbmcuZm9ybWF0KFwiaHR0cDovLyVzL29wXCIsIHByb3BlcnRpZXNbJ2FwaS5lbnYnXSlcclxuICAgIGRlZiB0cmFuc2FjdGlvbkFjdGlvbiA9IFwidmFsaWRhdG9yc1wiXHJcblxyXG4gICAgVVJMIHVybFxyXG4gICAgZGVmIHJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcclxuXHJcbiAgICBiYXNlVVJMID0gU3RyaW5nLmZvcm1hdChcIiVzL3Jlc3QvamlyYS93b3JrZmxvd3MvJXMvJXNcIiwgc2VydmVyQmFzZSwgdHJhbnNpZW50VmFycy5hY3Rpb25JZCwgdHJhbnNhY3Rpb25BY3Rpb24pO1xyXG5cclxuICAgIGxvZy5kZWJ1ZyhcIkNvbXBvc2luZyBiYXNlVVJMIGFzICcke2Jhc2VVUkx9J1wiKTtcclxuXHJcbiAgICBXb3JrZmxvd01hbmFnZXIgd29ya2Zsb3dNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0V29ya2Zsb3dNYW5hZ2VyKCk7XHJcbiAgICBKaXJhV29ya2Zsb3cgamlyYVdvcmtmbG93ID0gd29ya2Zsb3dNYW5hZ2VyLmdldFdvcmtmbG93KHRyYW5zaWVudFZhcnMuaXNzdWUpO1xyXG5cclxuICAgIEN1c3RvbUZpZWxkTWFuYWdlciBjdXN0b21GaWVsZE1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKTtcclxuICAgIFxyXG4gICAgbG9nLmRlYnVnKCBqaXJhV29ya2Zsb3cuZ2V0TmFtZSgpKVxyXG4gICAgXHJcbiAgICBBY3Rpb25EZXNjcmlwdG9yIGFkID0gd29ya2Zsb3dNYW5hZ2VyLmdldEFjdGlvbkRlc2NyaXB0b3IodHJhbnNpZW50VmFycy5pc3N1ZSwgdHJhbnNpZW50VmFycy5hY3Rpb25JZCk7XHJcblxyXG4gICAgbG9nLmRlYnVnKFwiQWN0aW9uRGVzY3JpcHRvciBOYW1lOiAke2FkLmdldE5hbWUoKX1cIikgICAgICAgICAgICAgICAgICAgICAvLyBHZW5lcmEgUmFwcG9ydG8gZGkgSW50ZXJ2ZW50byBGQUFDXHJcbiAgICBsb2cuZGVidWcoXCJBY3Rpb25EZXNjcmlwdG9yIE1ldGFBdHRyczogJHthZC5nZXRNZXRhQXR0cmlidXRlcygpfVwiKSAgICAgIC8vIHtvcHNiYXItc2VxdWVuY2U9MTAsIGppcmEuZGVzY3JpcHRpb249LCBqaXJhLmZpZWxkc2NyZWVuLmlkPTE5OTEwfVxyXG5cclxuICAgIGRlZiBhZE1ldGEgPSBhZC5nZXRNZXRhQXR0cmlidXRlcygpO1xyXG4gICAgZGVmIGZpZWxkU2NyZWVuSWQgPSBMb25nLnZhbHVlT2YoYWRNZXRhLmdldChcImppcmEuZmllbGRzY3JlZW4uaWRcIikudG9TdHJpbmcoKSk7XHJcbiAgICBsb2cuZGVidWcoXCJGaWVsZCBzY3JlZW4gaWQ6ICR7ZmllbGRTY3JlZW5JZH1cIilcclxuXHJcbiAgICBNYXA8U3RyaW5nLCBPYmplY3Q+IGN1c3RvbUZpZWxkTWFwID0gbmV3IEhhc2hNYXA8U3RyaW5nLE9iamVjdD4oKTtcclxuXHJcbiAgICBGaWVsZFNjcmVlbk1hbmFnZXIgZmllbGRTY3JlZW5NYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KEZpZWxkU2NyZWVuTWFuYWdlci5jbGFzcyk7XHJcbiAgICBGaWVsZFNjcmVlbiBmaWVsZFNjcmVlbiA9IGZpZWxkU2NyZWVuTWFuYWdlci5nZXRGaWVsZFNjcmVlbihmaWVsZFNjcmVlbklkKTtcclxuICAgIGZvcihGaWVsZFNjcmVlblRhYiBmc3QgOiBmaWVsZFNjcmVlbi5nZXRUYWJzKCkpe1xyXG4gICAgICAgIExpc3Q8RmllbGRTY3JlZW5MYXlvdXRJdGVtPiBxd2UgPSBmc3QuZ2V0RmllbGRTY3JlZW5MYXlvdXRJdGVtcygpO1xyXG4gICAgICAgIGZvciAoRmllbGRTY3JlZW5MYXlvdXRJdGVtIGZzbGk6IHF3ZSl7XHJcbiAgICAgICAgICAgIGlmIChmc2xpLmdldEZpZWxkSWQoKSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBDdXN0b21GaWVsZCBjdXN0b21GaWVsZCA9IGN1c3RvbUZpZWxkTWFuYWdlci5nZXRDdXN0b21GaWVsZE9iamVjdChmc2xpLmdldEZpZWxkSWQoKSk7XHJcbiAgICAgICAgICAgIGlmIChjdXN0b21GaWVsZCA9PSBudWxsKXtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRlZiBjdXN0b21GaWVsZFZhbHVlID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0b21GaWVsZCk7XHJcbiAgICAgICAgICAgIGN1c3RvbUZpZWxkTWFwLnB1dChmc2xpLmdldEZpZWxkSWQoKSwgY3VzdG9tRmllbGRWYWx1ZSA9PSBudWxsID8gbnVsbCA6IGN1c3RvbUZpZWxkVmFsdWUudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgfSAgICBcclxuICAgIH1cclxuXHJcbiAgICBsb2cuZGVidWcoXCJjdXN0b21GaWVsZE1hcDogJHtjdXN0b21GaWVsZE1hcH1cIilcclxuXHJcbiAgICBkZWYgYm9keVJlcSA9IFsgXHJcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXHJcbiAgICAgICAgXCJhY3Rpb25OYW1lXCI6IGFkLmdldE5hbWUoKSxcclxuICAgICAgICBcImppcmFXb3JrZmxvd05hbWVcIjogamlyYVdvcmtmbG93LmdldE5hbWUoKSxcclxuICAgICAgICBcImN1c3RvbUZpZWxkTWFwXCI6IGN1c3RvbUZpZWxkTWFwLFxyXG4gICAgICAgIFwicHJvcGVydGllc1wiOiBwcm9wZXJ0aWVzXHJcbiAgICBdO1xyXG5cclxuICAgIGxvZy5kZWJ1ZyhcIkNhbGxpbmcgWyR7cmVxdWVzdE1ldGhvZH1dICR7YmFzZVVSTH0gd2l0aCBib2R5ICR7Ym9keVJlcX1cIik7XHJcblxyXG4gICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxyXG4gICAgSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbikgdXJsLm9wZW5Db25uZWN0aW9uKCk7XHJcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XHJcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcclxuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xyXG4gICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcclxuICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcclxuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keVJlcSkgfVxyXG4gICAgXHJcbiAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcclxuICAgIGRlZiByZXNwb25zZUNvZGUgPSBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkgICAgXHJcbiAgICAgICAgXHJcbiAgICBsb2cuZGVidWcoXCJSZXNwb25zZSBIdHRwU3RhdHVzQ29kZTogJHtyZXNwb25zZUNvZGV9XCIpXHJcbiAgICAgICAgXHJcbiAgICAvLyBJZiBiYWNrZW5kIHJlcGxpZXMgd2l0aCAyMDAgdGhlbiB0aGUgY29uZGl0aW9uIGlzIHBhc3NlZCAgICBcclxuICAgIGlmKFwiMjAwXCIuZXF1YWxzKHJlc3BvbnNlQ29kZSkpe1xyXG4gICAgICAgIGxvZy5kZWJ1ZyhcIlZhbGlkYXRvciBwYXNzZWQhXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBMaXN0PFN0cmluZz4gb3V0cHV0RXJyb3JzID0gbmV3IEFycmF5TGlzdDw+KCk7XHJcbiAgICAgICAgTGlzdDxTdHJpbmc+IG91dHB1dFdhcm5pbmdzID0gbmV3IEFycmF5TGlzdDw+KCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmVzcG9uc2VCb2R5ID0gKChIdHRwVVJMQ29ubmVjdGlvbikgY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDtcclxuICAgICAgICBsb2cuZGVidWcoXCJWYWxpZGF0b3Igbm90IHBhc3NlZCwgcmVzcG9uc2VCb2R5OiAke3Jlc3BvbnNlQm9keX1cIik7XHJcblxyXG4gICAgICAgIC8vIHRlc3Rpbmcgd2l0aG91dCByZWRlcGxveWluZyBlYWNoIHRpbWVcclxuICAgICAgICAvL3Jlc3BvbnNlQm9keSA9ICd7XCJXXCI6IFwiW1tbVywgQ09ORklSTV9SSVNLX0FOQUxZU0lTLCBudWxsXV1dXCJ9J1xyXG5cclxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKHJlc3BvbnNlQm9keSk7XHJcbiAgICB9XHJcbn0gY2F0Y2ggKEV4Y2VwdGlvbiBlKXtcclxuICAgIC8vVGhpcyBpcyBhbiBleGNlcHRpb24gaW4gdGhlIHNjcmlwdFxyXG4gICAgbG9nLmRlYnVnKFwiRXhjZXB0aW9uIHJhaXNlZCBjYWxsaW5nIGVuZHBvaW50ICR7YmFzZVVSTH1cIilcclxuICAgIGxvZy5lcnJvcihlKVxyXG4gICAgaWYgKGUgaW5zdGFuY2VvZiBJbnZhbGlkSW5wdXRFeGNlcHRpb24pe1xyXG4gICAgICAgIHRocm93IGU7XHJcbiAgICB9XHJcbiAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6IFwiW1tbIFZhbGlkYXRvciBmYWlsZWQgXV1dXCIgfScpO1xyXG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="4">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">d0ff0e0c-0d1c-4309-b2d2-89ce8055a4a1</arg>
                  <arg name="FIELD_NOTES">YCFgQ2hlY2sgYW5kIGZpbGwgaW4gT1BfUE1fQVNTRVRfUklTS1NfUkVTVUxUIC0gT1BfQVNTRVRfVE9fQkVfU1RPUFBFRA==</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5JbnZhbGlkSW5wdXRFeGNlcHRpb25cbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxuaW1wb3J0IGdyb292eS5qc29uLkpzb25CdWlsZGVyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Nb2RpZmllZFZhbHVlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxuXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoU2NyaXB0UnVubmVySW1wbC5nZXRQbHVnaW5Db21wb25lbnQoU2NyaXB0UnVubmVyKS5nZXRSb290c0ZvckRpc3BsYXkoKSArICcvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcbiAgICBwcm9wZXJ0aWVzLmxvYWQoaXQpXG59XG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcblxuLy9Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKClcbi8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMjM2NzhcIilcblxuZGVmIHJpc2sgPSBmYWxzZVxuZGVmIGNoZWNrID0gZmFsc2VcbmRlZiBjb21wbGV0ZWQgPSB0cnVlXG5kZWYgbm90X2NvbXBsZXRlZCA9IDBcblxuSXNzdWVJbmRleGluZ1NlcnZpY2UgXHRpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSlcbmRlZiBhc3NldCA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9BU1NFVFwiKVswXVxuZGVmIGN1c3RvbWVyID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0NVU1RPTUVSXCIpWzBdXG5kZWYgcG1zdGF0dXMgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9QTV9BU1NFVF9SSVNLU19SRVNVTFRcIilbMF1cbmRlZiBwbVN0b3BBc3NldCA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0FTU0VUX1RPX0JFX1NUT1BQRURcIilbMF1cblxuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldCkhPW51bGwgJiYgKFN0cmluZylpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0KSAhPSBcIlwiICYmICFpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2V0KS50b1N0cmluZygpLmVxdWFscyhcIlwiKSl7XG4gICAgLy9pbnNpZ2h0IGNsYXNzZXMgJiBjb21wb25lbnRzXG4gICAgQ2xhc3Mgb2JqZWN0RmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0RmFjYWRlXCIpOyAgXG4gICAgQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7XG4gICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzKTtcbiAgICBkZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcblxuICAgIGRlZiBwbUFzc2V0ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NldClcbiAgICBsb2cuZGVidWcgXCJwbUFzc2V0OiBcIiArIHBtQXNzZXRcblxuICAgIC8vZXh0cmFjdCBpbnNpZ2h0IGtleSBhbmcgZ2V0IG9iamVjdFxuICAgIGRlZiBpbnN0YWxsYXRpb249cG1Bc3NldC50b1N0cmluZygpXG4gICAgZGVmIGluc3RhbGxhdGlvbktleSA9IGluc3RhbGxhdGlvbi5zdWJzdHJpbmcoaW5zdGFsbGF0aW9uLmxhc3RJbmRleE9mKCcoJykrMSxpbnN0YWxsYXRpb24ubGFzdEluZGV4T2YoJyknKSlcbiAgICBkZWYgaW5zdGFsbGF0aW9uT2JqID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGluc3RhbGxhdGlvbktleSlcbiAgICBsb2cuZGVidWcgXCJpbnN0YWxsYXRpb25PYmo6IFwiICsgaW5zdGFsbGF0aW9uT2JqXG4gICAgbG9nLmRlYnVnIFwiaW5zdGFsbGF0aW9uT2JqLmdldElkKCk6IFwiICsgaW5zdGFsbGF0aW9uT2JqLmdldElkKClcbiAgICBkZWYgb2JUcmlhZ2VcbiAgICBkZWYgcHJvZFR5cGUsIHVzY2l0YVNpY3VyZXp6YSwgc2ZvbmRhbWVudG8sIGFudGVTZm9uZGFubywgc2ZvbmRhbWVudG9Pc3RhY29saSwgc2ZvbmRhbWVudG9GZXJtYSwgYmF0dGVyaWUsIGFudGljYWR1dGFDYXJ0ZXIsIGFudGljYWR1dGFGdW56aW9uYW50aSwgcmFkYXIsIHJhZGFyRnVuemlvbmFudGksIHNlbnNvcmlQcmVzZW56YSwgc2Vuc29yaVByZXNlbnphTGF0aSwgZm90b2NlbGx1bGUsIGZvdG9jZWxsdWxlRnVuemlvbmFudGksIHNjaGlhY2NpYW1lbnRvLCBjZXNvaWFtZW50bywgYWx0cmlSaXNjaGksIGZvcnphSW1wYXR0b1xuXG4gICAgLy9USVBPIElNUElBTlRPXG4gICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBVQkxJQ19QUk9EVUNUX0ZBTUlMWV9SRUZcIikpe1xuICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJQVUJMSUNfUFJPRFVDVF9GQU1JTFlfUkVGXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICBkZWYgcHJvZFR5cGVJZCA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpXG4gICAgICAgIHByb2RUeXBlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHByb2RUeXBlSWQsIFwiTmFtZVwiKS5jcmVhdGVNdXRhYmxlKCkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgIH1cbiAgICBsb2cuZGVidWcgXCJwcm9kVHlwZTogXCIgKyBwcm9kVHlwZVxuICAgIGRlZiBzdGF0dXNcbiAgICBkZWYgdG9iZVN0b3BwZWQgPSBmYWxzZVxuICAgIGRlZiBjZk5ld1ZhbHVlLCBmaWVsZENvbmZpZ1xuICAgIFxuICAgIGRlZiB0ZlJpc2NoaSwgdGZJbXBpYW50b0FOb3JtYVxuICAgIGlmKCFwcm9kVHlwZS5lcXVhbHMoXCJQT1JURSBBVVRPTUFUSUNIRVwiKSAmJiAhcHJvZFR5cGUuZXF1YWxzKFwiQ0FOQ0VMTEkgQVVUT01BVElDSVwiKSAmJiAhcHJvZFR5cGUuZXF1YWxzKFwiQkFSUklFUkVcIikpe1xuICAgICAgICAvL0FMVFJJIFJJU0NISVxuICAgICAgICAvL1RGX1JJU0NISV9SSUxFVkFUSVxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiVEZfUklTQ0hJX1JJTEVWQVRJXCIpKXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlRGX1JJU0NISV9SSUxFVkFUSVwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIHRmUmlzY2hpID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICB9XG4gICAgICAgIGxvZy5kZWJ1ZyBcInRmUmlzY2hpOiBcIiArIHRmUmlzY2hpXG4gICAgICAgIFxuICAgICAgICAvL0lNUElBTlRPIE5PTiBBIE5PUk1BXG4gICAgICAgIC8vVEZfSU1QSUFOVE9fQV9OT1JNQVxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiVEZfSU1QSUFOVE9fQV9OT1JNQVwiKSl7XG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJURl9JTVBJQU5UT19BX05PUk1BXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgdGZJbXBpYW50b0FOb3JtYSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgICBsb2cuZGVidWcgXCJ0ZkltcGlhbnRvQU5vcm1hOiBcIiArIHRmSW1waWFudG9BTm9ybWFcbiAgICAgICAgXG4gICAgICAgIGlmKHRmUmlzY2hpIT1udWxsIHx8IHRmSW1waWFudG9BTm9ybWEudG9TdHJpbmcoKS5lcXVhbHMoXCJOT1wiKSlcbiAgICAgICAge1xuICAgICAgICAgICAgcmlzayA9IHRydWVcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyaXNrKXtcbiAgICAgICAgICAgIHN0YXR1cyA9IFwiUklTS19ERVRFQ1RFRFwiXG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgc3RhdHVzID0gXCJSSVNLX0FOQUxZU0lTX09LXCJcbiAgICAgICAgfVxuICAgICAgICBsb2cuZGVidWcgXCJzdGF0dXM6IFwiICsgc3RhdHVzXG4gICAgICAgIGRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxuICAgICAgICBkZWYgbWkgPSAoTXV0YWJsZUlzc3VlKSBpc3N1ZVxuXG4gICAgICAgIGZpZWxkQ29uZmlnID0gcG1zdGF0dXMuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpXG4gICAgICAgIC8vbG9nLndhcm4gXCJmaWVsZENvbmZpZzogXCIgKyBmaWVsZENvbmZpZ1xuICAgICAgICBjZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09IHN0YXR1cyB9XG5cbiAgICAgICAgcG1zdGF0dXMudXBkYXRlVmFsdWUobnVsbCwgaXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocG1zdGF0dXMpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGlzc3VlKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgLy9QT1JURSBBVVRPTUFUSUNIRVxuICAgIGlmKHByb2RUeXBlLmVxdWFscyhcIlBPUlRFIEFVVE9NQVRJQ0hFXCIpKXtcbiAgICAgICAgLy9BXHRQT1JURV9VU0NJVEFfU0lDVVJFWlpBXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJQT1JURV9VU0NJVEFfU0lDVVJFWlpBXCIpKXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBPUlRFX1VTQ0lUQV9TSUNVUkVaWkFcIikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICB1c2NpdGFTaWN1cmV6emEgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG4gICAgICAgIH1cbiAgICAgICAgbG9nLmRlYnVnIFwidXNjaXRhU2ljdXJlenphOiBcIiArIHVzY2l0YVNpY3VyZXp6YVxuXG4gICAgICAgIC8vQlx0UE9SVEVfU0ZPTkRBTUVOVE9cbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBPUlRFX1NGT05EQU1FTlRPXCIpKXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBPUlRFX1NGT05EQU1FTlRPXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgc2ZvbmRhbWVudG8gPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG4gICAgICAgIH1cbiAgICAgICAgbG9nLmRlYnVnIFwic2ZvbmRhbWVudG86IFwiICsgc2ZvbmRhbWVudG9cblxuICAgICAgICAvL0NcdFBPUlRFX1NGT05EQU1FTlRPX0FOVEVfUE9TSVpJT05FXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJQT1JURV9TRk9OREFNRU5UT19BTlRFX1BPU0laSU9ORVwiKSl7XG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJQT1JURV9TRk9OREFNRU5UT19BTlRFX1BPU0laSU9ORVwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIGFudGVTZm9uZGFubyA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgICBsb2cuZGVidWcgXCJhbnRlU2ZvbmRhbm86IFwiICsgYW50ZVNmb25kYW5vXG5cbiAgICAgICAgLy9EXHRQT1JURV9PU1RBQ09MSV9TRk9OREFNRU5UT1xuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiUE9SVEVfT1NUQUNPTElfU0ZPTkRBTUVOVE9cIikpe1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiUE9SVEVfT1NUQUNPTElfU0ZPTkRBTUVOVE9cIikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBzZm9uZGFtZW50b09zdGFjb2xpID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICB9XG4gICAgICAgIGxvZy5kZWJ1ZyBcInNmb25kYW1lbnRvT3N0YWNvbGk6IFwiICsgc2ZvbmRhbWVudG9Pc3RhY29saVxuXG4gICAgICAgIC8vRVx0UE9SVEVfRElTUE9TSVRJVk9fU1RPUFxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiUE9SVEVfRElTUE9TSVRJVk9fU1RPUFwiKSl7XG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJQT1JURV9ESVNQT1NJVElWT19TVE9QXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgc2ZvbmRhbWVudG9GZXJtYSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgICBsb2cuZGVidWcgXCJzZm9uZGFtZW50b0Zlcm1hOiBcIiArIHNmb25kYW1lbnRvRmVybWFcblxuICAgICAgICAvL0ZcdFBPUlRFX0JBVFRFUklFX0VNRVJHRU5aQVxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiUE9SVEVfQkFUVEVSSUVfRU1FUkdFTlpBXCIpKXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBPUlRFX0JBVFRFUklFX0VNRVJHRU5aQVwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIGJhdHRlcmllID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICB9XG4gICAgICAgIGxvZy5kZWJ1ZyBcImJhdHRlcmllOiBcIiArIGJhdHRlcmllXG5cbiAgICAgICAgLy9HXHRQT1JURV9ESVNQT1NJVElWT19BTlRJQ0FEVVRBX0NBUlRFUlxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiUE9SVEVfRElTUE9TSVRJVk9fQU5USUNBRFVUQV9DQVJURVJcIikpe1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiUE9SVEVfRElTUE9TSVRJVk9fQU5USUNBRFVUQV9DQVJURVJcIikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBhbnRpY2FkdXRhQ2FydGVyID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICB9XG4gICAgICAgIGxvZy5kZWJ1ZyBcImFudGljYWR1dGFDYXJ0ZXI6IFwiICsgYW50aWNhZHV0YUNhcnRlclxuXG4gICAgICAgIC8vSFx0UE9SVEVfQU5USUNBRFVUQV9DQVJURVJfRlVOWklPTkFOVEVcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBPUlRFX0FOVElDQURVVEFfQ0FSVEVSX0ZVTlpJT05BTlRFXCIpKXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBPUlRFX0FOVElDQURVVEFfQ0FSVEVSX0ZVTlpJT05BTlRFXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgYW50aWNhZHV0YUZ1bnppb25hbnRpID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICB9XG4gICAgICAgIGxvZy5kZWJ1ZyBcImFudGljYWR1dGFGdW56aW9uYW50aTogXCIgKyBhbnRpY2FkdXRhRnVuemlvbmFudGlcblxuICAgICAgICAvL0lcdFBPUlRFX1JBREFSX1RZUEVcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBPUlRFX1JBREFSX1RZUEVcIikpe1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiUE9SVEVfUkFEQVJfVFlQRVwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIHJhZGFyID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICB9XG4gICAgICAgIGxvZy5kZWJ1ZyBcInJhZGFyOiBcIiArIHJhZGFyXG5cbiAgICAgICAgLy9MXHRQT1JURV9SQURBUl9GVU5aSU9OQU5USVxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiUE9SVEVfUkFEQVJfRlVOWklPTkFOVElcIikpe1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiUE9SVEVfUkFEQVJfRlVOWklPTkFOVElcIikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICByYWRhckZ1bnppb25hbnRpID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICB9XG4gICAgICAgIGxvZy5kZWJ1ZyBcInJhZGFyRnVuemlvbmFudGk6IFwiICsgcmFkYXJGdW56aW9uYW50aVxuXG4gICAgICAgIC8vTVx0UE9SVEVfUFJFU0VOWkFfNTBNTV9BTlRFX01PQklMSVxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiUE9SVEVfUFJFU0VOWkFfNTBNTV9BTlRFX01PQklMSVwiKSl7XG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJQT1JURV9QUkVTRU5aQV81ME1NX0FOVEVfTU9CSUxJXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgc2Vuc29yaVByZXNlbnphID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICB9XG4gICAgICAgIGxvZy5kZWJ1ZyBcInNlbnNvcmlQcmVzZW56YTogXCIgKyBzZW5zb3JpUHJlc2VuemFcblxuICAgICAgICAvL05cdFBPUlRFX1BSRVNFTlpBXzUwTU1fQU5URV9NT0JJTElfTEFUSVxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiUE9SVEVfUFJFU0VOWkFfNTBNTV9BTlRFX01PQklMSV9MQVRJXCIpKXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBPUlRFX1BSRVNFTlpBXzUwTU1fQU5URV9NT0JJTElfTEFUSVwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIHNlbnNvcmlQcmVzZW56YUxhdGkgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG4gICAgICAgIH1cbiAgICAgICAgbG9nLmRlYnVnIFwic2Vuc29yaVByZXNlbnphTGF0aTogXCIgKyBzZW5zb3JpUHJlc2VuemFMYXRpXG5cbiAgICAgICAgLy9PXHRQT1JURV9GT1RPQ0VMTFVMRVxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiUE9SVEVfRk9UT0NFTExVTEVcIikpe1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiUE9SVEVfRk9UT0NFTExVTEVcIikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBmb3RvY2VsbHVsZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgICBsb2cuZGVidWcgXCJmb3RvY2VsbHVsZTogXCIgKyBmb3RvY2VsbHVsZVxuXG4gICAgICAgIC8vUFx0UE9SVEVfRk9UT0NFTExVTEVfRlVOWklPTkFOVElcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBPUlRFX0ZPVE9DRUxMVUxFX0ZVTlpJT05BTlRJXCIpKXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBPUlRFX0ZPVE9DRUxMVUxFX0ZVTlpJT05BTlRJXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgZm90b2NlbGx1bGVGdW56aW9uYW50aSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgICBsb2cuZGVidWcgXCJmb3RvY2VsbHVsZUZ1bnppb25hbnRpOiBcIiArIGZvdG9jZWxsdWxlRnVuemlvbmFudGlcblxuICAgICAgICAvL1FcdFBPUlRFX1BST1RFWklPTkVfU0NISUFDQ0lBTUVOVE9cbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBPUlRFX1BST1RFWklPTkVfU0NISUFDQ0lBTUVOVE9cIikpe1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiUE9SVEVfUFJPVEVaSU9ORV9TQ0hJQUNDSUFNRU5UT1wiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIHNjaGlhY2NpYW1lbnRvID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICB9XG4gICAgICAgIGxvZy5kZWJ1ZyBcInNjaGlhY2NpYW1lbnRvOiBcIiArIHNjaGlhY2NpYW1lbnRvXG5cbiAgICAgICAgLy9SXHRQT1JURV9QUk9URVpJT05FX0NFU09JQU1FTlRPXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJQT1JURV9QUk9URVpJT05FX0NFU09JQU1FTlRPXCIpKXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBPUlRFX1BST1RFWklPTkVfQ0VTT0lBTUVOVE9cIikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBjZXNvaWFtZW50byA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgICBsb2cuZGVidWcgXCJjZXNvaWFtZW50bzogXCIgKyBjZXNvaWFtZW50b1xuXG4gICAgICAgIC8vU1x0UE9SVEVfQUxUUklfUklTQ0hJX0RBX1NFR05BTEFSRVxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiUE9SVEVfQUxUUklfUklTQ0hJXCIpKXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBPUlRFX0FMVFJJX1JJU0NISVwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIGFsdHJpUmlzY2hpID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICB9XG4gICAgICAgIGxvZy5kZWJ1ZyBcImFsdHJpUmlzY2hpOiBcIiArIGFsdHJpUmlzY2hpXG5cbiAgICAgICAgLy9UXHRQT1JURV9GT1JaQV9JTVBBVFRPX05FSV9MSU1JVElcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIlBPUlRFX0ZPUlpBX0lNUEFUVE9fTkVJX0xJTUlUSVwiKSl7XG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJQT1JURV9GT1JaQV9JTVBBVFRPX05FSV9MSU1JVElcIikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBmb3J6YUltcGF0dG8gPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG4gICAgICAgIH1cbiAgICAgICAgbG9nLmRlYnVnIFwiZm9yemFJbXBhdHRvOiBcIiArIGZvcnphSW1wYXR0byAgIFxuICAgICAgICBcblxuICAgICAgICBsb2cuZGVidWcgXCJjdXN0b21lcjogXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1c3RvbWVyKS50b1N0cmluZygpXG4gICAgICAgIGlmKFxuICAgICAgICAgICAgKHVzY2l0YVNpY3VyZXp6YS50b1N0cmluZygpLmVxdWFscyhcIlNJXCIpICYmIHNmb25kYW1lbnRvLnRvU3RyaW5nKCkuZXF1YWxzKFwiTkVTU1VOT1wiKSkgfHxcbiAgICAgICAgICAgICh1c2NpdGFTaWN1cmV6emEudG9TdHJpbmcoKS5lcXVhbHMoXCJTSVwiKSAmJiBzZm9uZGFtZW50by50b1N0cmluZygpLmVxdWFscyhcIlNGT05EQU1FTlRPIE1FQ0NBTklDT1wiKSAmJiAoYW50ZVNmb25kYW5vLnRvU3RyaW5nKCkuZXF1YWxzKFwiTk9cIikgfHwgc2ZvbmRhbWVudG9Pc3RhY29saS50b1N0cmluZygpLmVxdWFscyhcIlNJXCIpIHx8IHNmb25kYW1lbnRvRmVybWEudG9TdHJpbmcoKS5lcXVhbHMoXCJOT1wiKSkpIHx8XG4gICAgICAgICAgICAodXNjaXRhU2ljdXJlenphLnRvU3RyaW5nKCkuZXF1YWxzKFwiU0lcIikgJiYgc2ZvbmRhbWVudG8udG9TdHJpbmcoKS5lcXVhbHMoXCJSSURPTkRBTlRFXCIpICYmIGJhdHRlcmllLnRvU3RyaW5nKCkuZXF1YWxzKFwiTk9cIikpIHx8XG4gICAgICAgICAgICBhbnRpY2FkdXRhQ2FydGVyLnRvU3RyaW5nKCkuZXF1YWxzKFwiTk9cIikgfHxcbiAgICAgICAgICAgIChhbnRpY2FkdXRhQ2FydGVyLnRvU3RyaW5nKCkuZXF1YWxzKFwiU0lcIikgJiYgYW50aWNhZHV0YUZ1bnppb25hbnRpLnRvU3RyaW5nKCkuZXF1YWxzKFwiTk9cIikpIHx8XG4gICAgICAgICAgICAoKHJhZGFyLnRvU3RyaW5nKCkuZXF1YWxzKFwiTU9WSU1FTlRPIEUgUFJFU0VOWkFcIikgfHwgcmFkYXIudG9TdHJpbmcoKS5lcXVhbHMoXCJTT0xPIE1PVklNRU5UT1wiKSkgJiYgcmFkYXJGdW56aW9uYW50aS50b1N0cmluZygpLmVxdWFscyhcIk5PXCIpKSB8fFxuICAgICAgICAgICAgKHJhZGFyLnRvU3RyaW5nKCkuZXF1YWxzKFwiTU9WSU1FTlRPIEUgUFJFU0VOWkFcIikgJiYgKHNlbnNvcmlQcmVzZW56YS50b1N0cmluZygpLmVxdWFscyhcIk5PXCIpIHx8IHNlbnNvcmlQcmVzZW56YUxhdGkudG9TdHJpbmcoKS5lcXVhbHMoXCJOT1wiKSkpIHx8IFxuICAgICAgICAgICAgKHJhZGFyLnRvU3RyaW5nKCkuZXF1YWxzKFwiU09MTyBNT1ZJTUVOVE9cIikgJiYgZm90b2NlbGx1bGUudG9TdHJpbmcoKS5lcXVhbHMoXCJTSVwiKSAmJiBmb3RvY2VsbHVsZUZ1bnppb25hbnRpLnRvU3RyaW5nKCkuZXF1YWxzKFwiTk9cIikpIHx8XG4gICAgICAgICAgICBzY2hpYWNjaWFtZW50by50b1N0cmluZygpLmVxdWFscyhcIk5PXCIpIHx8XG4gICAgICAgICAgICBjZXNvaWFtZW50by50b1N0cmluZygpLmVxdWFscyhcIk5PXCIpIHx8XG4gICAgICAgICAgICBhbHRyaVJpc2NoaS50b1N0cmluZygpLmVxdWFscyhcIlNJXCIpIHx8XG4gICAgICAgICAgICAvL3NvbG8gcGVyIGNsaWVudGUgQUxMRUFOWkEgMy4wXG4gICAgICAgICAgICAoZm9yemFJbXBhdHRvLnRvU3RyaW5nKCkuZXF1YWxzKFwiTk9cIikgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0b21lcikudG9TdHJpbmcoKS5jb250YWlucyhcIkFMTEVBTlpBXCIpKVxuICAgICAgICApe1xuICAgICAgICAgICAgcmlzayA9IHRydWVcbiAgICAgICAgfVxuXG4gICAgICAgIFxuICAgICAgICBpZiAocmlzayl7XG4gICAgICAgICAgICBzdGF0dXMgPSBcIlJJU0tfREVURUNURURcIlxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHN0YXR1cyA9IFwiUklTS19BTkFMWVNJU19PS1wiXG4gICAgICAgIH1cbiAgICAgICAgbG9nLmRlYnVnIFwic3RhdHVzOiBcIiArIHN0YXR1c1xuICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcbiAgICAgICAgZGVmIG1pID0gKE11dGFibGVJc3N1ZSkgaXNzdWVcblxuICAgICAgICBmaWVsZENvbmZpZyA9IHBtc3RhdHVzLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKVxuICAgICAgICAvL2xvZy53YXJuIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcbiAgICAgICAgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBzdGF0dXMgfVxuXG4gICAgICAgIHBtc3RhdHVzLnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBtc3RhdHVzKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcbiAgICAgICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChpc3N1ZSlcblx0XHQvKlxuICAgICAgICBpZihcbiAgICAgICAgICAgIHJhZGFyRnVuemlvbmFudGkudG9TdHJpbmcoKS5lcXVhbHMoXCJOT1wiKSB8fFxuICAgICAgICAgICAgKHJhZGFyLnRvU3RyaW5nKCkuZXF1YWxzKFwiU09MTyBNT1ZJTUVOVE9cIikgJiYgZm90b2NlbGx1bGUudG9TdHJpbmcoKS5lcXVhbHMoXCJOT1wiKSkgfHxcbiAgICAgICAgICAgIChmb3J6YUltcGF0dG8udG9TdHJpbmcoKS5lcXVhbHMoXCJOT1wiKSAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1c3RvbWVyKS50b1N0cmluZygpLmNvbnRhaW5zKFwiQUxMRUFOWkFcIikpIHx8XG4gICAgICAgICAgICAoc2ZvbmRhbWVudG8udG9TdHJpbmcoKS5lcXVhbHMoXCJSSURPTkRBTlRFXCIpICYmIGJhdHRlcmllLnRvU3RyaW5nKCkuZXF1YWxzKFwiTk9cIikpXG4gICAgICAgICl7XG4gICAgICAgICAgICB0b2JlU3RvcHBlZCA9IHRydWVcbiAgICAgICAgfSovXG4gICAgfVxuICAgIFxuICAgIGRlZiBjYW5jZWxsb1VvbW9QcmVzZW50ZSwgY2FuY2VsbG9BbnRpY2FkdXRhLCBjYW5jZWxsb0FudGljYWR1dGFGdW56aW9uYW50ZSwgY2FuY2VsbG9FeHRyYWNvcnNhLCBjYW5jZWxsb0V4dHJhY29yc2FGdW56aW9uYW50ZSwgY2FuY2VsbG9BbHRyaVJpc2NoaSwgY2FuY2VsbG9SaXNjaGksIGNhbmNlbGxvQ29zdGVGdW56aW9uYW50aSwgY2FuY2VsbG9Db3N0ZSwgY2FuY2VsbG9JbXBhdHRvXG4gICAgLy9DQU5DRUxMSSBBVVRPTUFUSUNJXG4gICAgaWYocHJvZFR5cGUuZXF1YWxzKFwiQ0FOQ0VMTEkgQVVUT01BVElDSVwiKSl7XG4gICAgICAgIC8vMS4gQ0FOQ0VMTE9fTUFDQ0hJTkFfVU9NT19QUkVTRU5URVxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiQ0FOQ0VMTE9fTUFDQ0hJTkFfVU9NT19QUkVTRU5URVwiKSl7XG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJDQU5DRUxMT19NQUNDSElOQV9VT01PX1BSRVNFTlRFXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgY2FuY2VsbG9Vb21vUHJlc2VudGUgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG4gICAgICAgIH1cbiAgICAgICAgbG9nLmRlYnVnIFwiY2FuY2VsbG9Vb21vUHJlc2VudGU6IFwiICsgY2FuY2VsbG9Vb21vUHJlc2VudGVcblxuICAgICAgICAvLzIuIENBTkNFTExPX0RJU1BPU0lUSVZJX0FOVElDQURVVEFcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIkNBTkNFTExPX0RJU1BPU0lUSVZJX0FOVElDQURVVEFcIikpe1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiQ0FOQ0VMTE9fRElTUE9TSVRJVklfQU5USUNBRFVUQVwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIGNhbmNlbGxvQW50aWNhZHV0YSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgICBsb2cuZGVidWcgXCJjYW5jZWxsb0FudGljYWR1dGE6IFwiICsgY2FuY2VsbG9BbnRpY2FkdXRhXG5cbiAgICAgICAgLy8zLiBDQU5DRUxMT19BTlRJQ0FEVVRBX0ZVTlpJT05BTlRFXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJDQU5DRUxMT19BTlRJQ0FEVVRBX0ZVTlpJT05BTlRFXCIpKXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIkNBTkNFTExPX0FOVElDQURVVEFfRlVOWklPTkFOVEVcIikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBjYW5jZWxsb0FudGljYWR1dGFGdW56aW9uYW50ZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgICBsb2cuZGVidWcgXCJjYW5jZWxsb0FudGljYWR1dGFGdW56aW9uYW50ZTogXCIgKyBjYW5jZWxsb0FudGljYWR1dGFGdW56aW9uYW50ZVxuXG4gICAgICAgIC8vNC4gQ0FOQ0VMTE9fQVJSRVNUT19FWFRSQUNPUlNBXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJDQU5DRUxMT19BUlJFU1RPX0VYVFJBQ09SU0FcIikpe1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiQ0FOQ0VMTE9fQVJSRVNUT19FWFRSQUNPUlNBXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgY2FuY2VsbG9FeHRyYWNvcnNhID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICB9XG4gICAgICAgIGxvZy5kZWJ1ZyBcImNhbmNlbGxvRXh0cmFjb3JzYTogXCIgKyBjYW5jZWxsb0V4dHJhY29yc2FcblxuICAgICAgICAvLzUuIENBTkNFTExPX0FSUkVTVE9fRVhUUkFDT1JTQV9GVU5aSU9OQU5USVxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiQ0FOQ0VMTE9fQVJSRVNUT19FWFRSQUNPUlNBX0ZVTlpJT05BTlRJXCIpKXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIkNBTkNFTExPX0FSUkVTVE9fRVhUUkFDT1JTQV9GVU5aSU9OQU5USVwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIGNhbmNlbGxvRXh0cmFjb3JzYUZ1bnppb25hbnRlID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICB9XG4gICAgICAgIGxvZy5kZWJ1ZyBcImNhbmNlbGxvRXh0cmFjb3JzYUZ1bnppb25hbnRlOiBcIiArIGNhbmNlbGxvRXh0cmFjb3JzYUZ1bnppb25hbnRlXG5cbiAgICAgICAgLy82LiBDQU5DRUxMT19BTFRSSV9SSVNDSElcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIkNBTkNFTExPX0FMVFJJX1JJU0NISVwiKSl7XG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJDQU5DRUxMT19BTFRSSV9SSVNDSElcIikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBjYW5jZWxsb0FsdHJpUmlzY2hpID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICB9XG4gICAgICAgIGxvZy5kZWJ1ZyBcImNhbmNlbGxvQWx0cmlSaXNjaGk6IFwiICsgY2FuY2VsbG9BbHRyaVJpc2NoaVxuXG4gICAgICAgIC8vNy4gQ0FOQ0VMTE9fUklTQ0hJX1JJTEVWQVRJXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJDQU5DRUxMT19SSVNDSElfUklMRVZBVElcIikpe1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiQ0FOQ0VMTE9fUklTQ0hJX1JJTEVWQVRJXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgY2FuY2VsbG9SaXNjaGkgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG4gICAgICAgIH1cbiAgICAgICAgbG9nLmRlYnVnIFwiY2FuY2VsbG9SaXNjaGk6IFwiICsgY2FuY2VsbG9SaXNjaGlcblxuICAgICAgICAvLzguIENBTkNFTExPX0NPU1RFX1NJQ1VSRVpaQVxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiQ0FOQ0VMTE9fQ09TVEVfU0lDVVJFWlpBXCIpKXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIkNBTkNFTExPX0NPU1RFX1NJQ1VSRVpaQVwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIGNhbmNlbGxvQ29zdGUgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG4gICAgICAgIH1cbiAgICAgICAgbG9nLmRlYnVnIFwiY2FuY2VsbG9Db3N0ZTogXCIgKyBjYW5jZWxsb0Nvc3RlXG5cbiAgICAgICAgLy85LiBDQU5DRUxMT19DT1NURV9GVU5aSU9OQU5USVxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiQ0FOQ0VMTE9fQ09TVEVfRlVOWklPTkFOVElcIikpe1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiQ0FOQ0VMTE9fQ09TVEVfRlVOWklPTkFOVElcIikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBjYW5jZWxsb0Nvc3RlRnVuemlvbmFudGkgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG4gICAgICAgIH1cbiAgICAgICAgbG9nLmRlYnVnIFwiY2FuY2VsbG9Db3N0ZUZ1bnppb25hbnRpOiBcIiArIGNhbmNlbGxvQ29zdGVGdW56aW9uYW50aVxuXG4gICAgICAgIC8vMTAuIENBTkNFTExPX1ZBTE9SRV9JTVBBVFRPXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJDQU5DRUxMT19GT1JaQV9JTVBBVFRPX05FSV9MSU1JVElcIikpe1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiQ0FOQ0VMTE9fRk9SWkFfSU1QQVRUT19ORUlfTElNSVRJXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgY2FuY2VsbG9JbXBhdHRvID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICB9XG4gICAgICAgIGxvZy5kZWJ1ZyBcImNhbmNlbGxvSW1wYXR0bzogXCIgKyBjYW5jZWxsb0ltcGF0dG9cblxuICAgICAgICBpZihjYW5jZWxsb1VvbW9QcmVzZW50ZS50b1N0cmluZygpLmVxdWFscyhcIlNJXCIpICYmIFxuICAgICAgICAgICAoXG4gICAgICAgICAgICAgICBjYW5jZWxsb0FudGljYWR1dGEudG9TdHJpbmcoKS5lcXVhbHMoXCJOT1wiKSB8fCBcbiAgICAgICAgICAgICAgIChjYW5jZWxsb0FudGljYWR1dGEudG9TdHJpbmcoKS5lcXVhbHMoXCJTSVwiKSAmJiBjYW5jZWxsb0FudGljYWR1dGFGdW56aW9uYW50ZS50b1N0cmluZygpLmVxdWFscyhcIk5PXCIpKSB8fCBcbiAgICAgICAgICAgICAgIGNhbmNlbGxvRXh0cmFjb3JzYS50b1N0cmluZygpLmVxdWFscyhcIk5PXCIpIHx8IFxuICAgICAgICAgICAgICAgKGNhbmNlbGxvRXh0cmFjb3JzYS50b1N0cmluZygpLmVxdWFscyhcIlNJXCIpICYmIGNhbmNlbGxvRXh0cmFjb3JzYUZ1bnppb25hbnRlLnRvU3RyaW5nKCkuZXF1YWxzKFwiTk9cIikpIHx8XG4gICAgICAgICAgICAgICBjYW5jZWxsb0FsdHJpUmlzY2hpLnRvU3RyaW5nKCkuZXF1YWxzKFwiU0lcIilcbiAgICAgICAgICAgKSlcbiAgICAgICAge1xuICAgICAgICAgICAgcmlzayA9IHRydWVcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKGNhbmNlbGxvVW9tb1ByZXNlbnRlLnRvU3RyaW5nKCkuZXF1YWxzKFwiTk9cIikgJiYgXG4gICAgICAgICAgIChcbiAgICAgICAgICAgICAgIGNhbmNlbGxvUmlzY2hpICE9IG51bGwgfHwgXG4gICAgICAgICAgICAgICBjYW5jZWxsb0Nvc3RlLnRvU3RyaW5nKCkuZXF1YWxzKFwiTk9cIikgfHxcbiAgICAgICAgICAgICAgIChjYW5jZWxsb0Nvc3RlLnRvU3RyaW5nKCkuZXF1YWxzKFwiU0lcIikgJiYgY2FuY2VsbG9Db3N0ZUZ1bnppb25hbnRpLnRvU3RyaW5nKCkuZXF1YWxzKFwiTk9cIikpIHx8IFxuICAgICAgICAgICAgICAgY2FuY2VsbG9BbnRpY2FkdXRhLnRvU3RyaW5nKCkuZXF1YWxzKFwiTk9cIikgfHwgXG4gICAgICAgICAgICAgICAoY2FuY2VsbG9BbnRpY2FkdXRhLnRvU3RyaW5nKCkuZXF1YWxzKFwiU0lcIikgJiYgY2FuY2VsbG9BbnRpY2FkdXRhRnVuemlvbmFudGUudG9TdHJpbmcoKS5lcXVhbHMoXCJOT1wiKSkgfHwgXG4gICAgICAgICAgICAgICBjYW5jZWxsb0V4dHJhY29yc2EudG9TdHJpbmcoKS5lcXVhbHMoXCJOT1wiKSB8fCBcbiAgICAgICAgICAgICAgIChjYW5jZWxsb0V4dHJhY29yc2EudG9TdHJpbmcoKS5lcXVhbHMoXCJTSVwiKSAmJiBjYW5jZWxsb0V4dHJhY29yc2FGdW56aW9uYW50ZS50b1N0cmluZygpLmVxdWFscyhcIk5PXCIpKSB8fFxuICAgICAgICAgICAgICAgY2FuY2VsbG9BbHRyaVJpc2NoaS50b1N0cmluZygpLmVxdWFscyhcIlNJXCIpIHx8XG4gICAgICAgICAgICAgICBjYW5jZWxsb0ltcGF0dG8udG9TdHJpbmcoKS5lcXVhbHMoXCJOT1wiKVxuICAgICAgICAgICApKVxuICAgICAgICB7XG4gICAgICAgICAgICByaXNrID0gdHJ1ZVxuICAgICAgICB9XG5cblxuICAgICAgICBpZiAocmlzayl7XG4gICAgICAgICAgICBzdGF0dXMgPSBcIlJJU0tfREVURUNURURcIlxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHN0YXR1cyA9IFwiUklTS19BTkFMWVNJU19PS1wiXG4gICAgICAgIH1cbiAgICAgICAgbG9nLmRlYnVnIFwic3RhdHVzOiBcIiArIHN0YXR1c1xuICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcbiAgICAgICAgZGVmIG1pID0gKE11dGFibGVJc3N1ZSkgaXNzdWVcblxuICAgICAgICBmaWVsZENvbmZpZyA9IHBtc3RhdHVzLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKVxuICAgICAgICAvL2xvZy53YXJuIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcbiAgICAgICAgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBzdGF0dXMgfVxuXG4gICAgICAgIHBtc3RhdHVzLnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBtc3RhdHVzKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcbiAgICAgICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChpc3N1ZSlcblxuICAgIH1cbiAgICBkZWYgYmFycmllcmFVb21vUHJlc2VudGUsIGJhcnJpZXJhUmlzY2hpLCBiYXJyaWVyYUFsdHJpUmlzY2hpLCBiYXJyaWVyYUZvdG9jZWxsdWxlLCBiYXJyaWVyYUZvdG9jZWxsdWxlRnVuemlvbmFudGksIGJhcnJpZXJhUGFzc2FnZ2lvUGVkb25hbGUsIGJhcnJpZXJhUGFzc2FnZ2lvUGVkb25hbGVTZWduYWxhdG8sIGJhcnJpZXJhSW52ZXJzaW9uZSwgYmFycmllcmFJbXBhdHRvXG4gICAgLy9CQVJSSUVSRVxuICAgIGlmKHByb2RUeXBlLmVxdWFscyhcIkJBUlJJRVJFXCIpKXtcbiAgICAgICAgLy8xLiBCQVJSSUVSQV9NQUNDSElOQV9VT01PX1BSRVNFTlRFXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJCQVJSSUVSQV9NQUNDSElOQV9VT01PX1BSRVNFTlRFXCIpKXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIkJBUlJJRVJBX01BQ0NISU5BX1VPTU9fUFJFU0VOVEVcIikuY3JlYXRlTXV0YWJsZSgpXG4gICAgICAgICAgICBiYXJyaWVyYVVvbW9QcmVzZW50ZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgICBsb2cuZGVidWcgXCJiYXJyaWVyYVVvbW9QcmVzZW50ZTogXCIgKyBiYXJyaWVyYVVvbW9QcmVzZW50ZVxuXG4gICAgICAgIC8vMi4gQkFSUklFUkFfQUxUUklfUklTQ0hJXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJCQVJSSUVSQV9BTFRSSV9SSVNDSElcIikpe1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiQkFSUklFUkFfQUxUUklfUklTQ0hJXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgYmFycmllcmFBbHRyaVJpc2NoaSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgICBsb2cuZGVidWcgXCJiYXJyaWVyYUFsdHJpUmlzY2hpOiBcIiArIGJhcnJpZXJhQWx0cmlSaXNjaGlcbiAgICAgICAgXG4gICAgICAgIC8vMy4gQkFSUklFUkFfUklTQ0hJXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJCQVJSSUVSQV9SSVNDSElcIikpe1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiQkFSUklFUkFfUklTQ0hJXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgYmFycmllcmFSaXNjaGkgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG4gICAgICAgIH1cbiAgICAgICAgbG9nLmRlYnVnIFwiYmFycmllcmFSaXNjaGk6IFwiICsgYmFycmllcmFSaXNjaGlcbiAgICAgICAgXG4gICAgICAgIC8vNC4gQkFSUklFUkFfRk9UT0NFTExVTEVcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIkJBUlJJRVJBX0ZPVE9DRUxMVUxFXCIpKXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIkJBUlJJRVJBX0ZPVE9DRUxMVUxFXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgYmFycmllcmFGb3RvY2VsbHVsZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgICBsb2cuZGVidWcgXCJiYXJyaWVyYUZvdG9jZWxsdWxlOiBcIiArIGJhcnJpZXJhRm90b2NlbGx1bGVcblxuICAgICAgICAvLzUuIENBTkNFTExPX0FOVElDQURVVEFfRlVOWklPTkFOVEVcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIkJBUlJJRVJBX0ZPVE9DRUxMVUxFX0ZVTlpJT05BTlRJXCIpKXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIkJBUlJJRVJBX0ZPVE9DRUxMVUxFX0ZVTlpJT05BTlRJXCIpLmNyZWF0ZU11dGFibGUoKVxuICAgICAgICAgICAgYmFycmllcmFGb3RvY2VsbHVsZUZ1bnppb25hbnRpID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxuICAgICAgICB9XG4gICAgICAgIGxvZy5kZWJ1ZyBcImJhcnJpZXJhRm90b2NlbGx1bGVGdW56aW9uYW50aTogXCIgKyBiYXJyaWVyYUZvdG9jZWxsdWxlRnVuemlvbmFudGlcblxuICAgICAgICAvLzYuIEJBUlJJRVJBX1BBU1NBR0dJT19QRURPTkFMRVxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiQkFSUklFUkFfUEFTU0FHR0lPX1BFRE9OQUxFXCIpKXtcbiAgICAgICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIkJBUlJJRVJBX1BBU1NBR0dJT19QRURPTkFMRVwiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIGJhcnJpZXJhUGFzc2FnZ2lvUGVkb25hbGUgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG4gICAgICAgIH1cbiAgICAgICAgbG9nLmRlYnVnIFwiYmFycmllcmFQYXNzYWdnaW9QZWRvbmFsZTogXCIgKyBiYXJyaWVyYVBhc3NhZ2dpb1BlZG9uYWxlXG4gICAgICAgIFxuICAgICAgICAvLzcuIEJBUlJJRVJBX1BBU1NBR0dJT19QRURPTkFMRV9TRUdSRUdBVE9cbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIkJBUlJJRVJBX1BBU1NBR0dJT19QRURPTkFMRV9TRUdSRUdBVE9cIikpe1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiQkFSUklFUkFfUEFTU0FHR0lPX1BFRE9OQUxFX1NFR1JFR0FUT1wiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIGJhcnJpZXJhUGFzc2FnZ2lvUGVkb25hbGVTZWduYWxhdG8gPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXG4gICAgICAgIH1cbiAgICAgICAgbG9nLmRlYnVnIFwiYmFycmllcmFQYXNzYWdnaW9QZWRvbmFsZVNlZ25hbGF0bzogXCIgKyBiYXJyaWVyYVBhc3NhZ2dpb1BlZG9uYWxlU2VnbmFsYXRvXG4gICAgICAgIFxuICAgICAgICAvLzguIEJBUlJJRVJBX0lOVkVSU0lPTkVfU1VfT1NUQUNPTE9cbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluc3RhbGxhdGlvbk9iai5nZXRJZCgpLCBcIkJBUlJJRVJBX0lOVkVSU0lPTkVfU1VfT1NUQUNPTE9cIikpe1xuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5zdGFsbGF0aW9uT2JqLmdldElkKCksIFwiQkFSUklFUkFfSU5WRVJTSU9ORV9TVV9PU1RBQ09MT1wiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIGJhcnJpZXJhSW52ZXJzaW9uZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgICBsb2cuZGVidWcgXCJiYXJyaWVyYUludmVyc2lvbmU6IFwiICsgYmFycmllcmFJbnZlcnNpb25lXG4gICAgICAgIFxuICAgICAgICAvLzkuIEJBUlJJRVJBX1ZBTE9SRV9JTVBBVFRPXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJCQVJSSUVSQV9WQUxPUkVfSU1QQVRUT1wiKSl7XG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbnN0YWxsYXRpb25PYmouZ2V0SWQoKSwgXCJCQVJSSUVSQV9WQUxPUkVfSU1QQVRUT1wiKS5jcmVhdGVNdXRhYmxlKClcbiAgICAgICAgICAgIGJhcnJpZXJhSW1wYXR0byA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgICBsb2cuZGVidWcgXCJiYXJyaWVyYUltcGF0dG86IFwiICsgYmFycmllcmFJbXBhdHRvXG5cbiAgICAgICAgaWYoYmFycmllcmFVb21vUHJlc2VudGUudG9TdHJpbmcoKS5lcXVhbHMoXCJTSVwiKSAmJiBiYXJyaWVyYUFsdHJpUmlzY2hpLnRvU3RyaW5nKCkuZXF1YWxzKFwiU0lcIikpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJpc2sgPSB0cnVlXG4gICAgICAgIH1cblxuICAgICAgICBpZihiYXJyaWVyYVVvbW9QcmVzZW50ZS50b1N0cmluZygpLmVxdWFscyhcIk5PXCIpICYmIFxuICAgICAgICAgICAoXG4gICAgICAgICAgICAgICBiYXJyaWVyYVJpc2NoaSAhPSBudWxsIHx8IFxuICAgICAgICAgICAgICAgYmFycmllcmFGb3RvY2VsbHVsZS50b1N0cmluZygpLmVxdWFscyhcIk5PXCIpIHx8XG4gICAgICAgICAgICAgICAoYmFycmllcmFGb3RvY2VsbHVsZS50b1N0cmluZygpLmVxdWFscyhcIlNJXCIpICYmIGJhcnJpZXJhRm90b2NlbGx1bGVGdW56aW9uYW50aS50b1N0cmluZygpLmVxdWFscyhcIk5PXCIpKSB8fCBcbiAgICAgICAgICAgICAgIGJhcnJpZXJhUGFzc2FnZ2lvUGVkb25hbGUudG9TdHJpbmcoKS5lcXVhbHMoXCJOT1wiKSB8fCBcbiAgICAgICAgICAgICAgIChiYXJyaWVyYVBhc3NhZ2dpb1BlZG9uYWxlLnRvU3RyaW5nKCkuZXF1YWxzKFwiU0lcIikgJiYgYmFycmllcmFQYXNzYWdnaW9QZWRvbmFsZVNlZ25hbGF0by50b1N0cmluZygpLmVxdWFscyhcIk5PXCIpKSB8fCBcbiAgICAgICAgICAgICAgIGJhcnJpZXJhSW52ZXJzaW9uZS50b1N0cmluZygpLmVxdWFscyhcIk5PXCIpIHx8IFxuICAgICAgICAgICAgICAgYmFycmllcmFBbHRyaVJpc2NoaS50b1N0cmluZygpLmVxdWFscyhcIlNJXCIpIHx8XG4gICAgICAgICAgICAgICBiYXJyaWVyYUltcGF0dG8udG9TdHJpbmcoKS5lcXVhbHMoXCJOT1wiKVxuICAgICAgICAgICApKVxuICAgICAgICB7XG4gICAgICAgICAgICByaXNrID0gdHJ1ZVxuICAgICAgICB9XG5cblxuICAgICAgICBpZiAocmlzayl7XG4gICAgICAgICAgICBzdGF0dXMgPSBcIlJJU0tfREVURUNURURcIlxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHN0YXR1cyA9IFwiUklTS19BTkFMWVNJU19PS1wiXG4gICAgICAgIH1cbiAgICAgICAgbG9nLmRlYnVnIFwic3RhdHVzOiBcIiArIHN0YXR1c1xuICAgICAgICBkZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcbiAgICAgICAgZGVmIG1pID0gKE11dGFibGVJc3N1ZSkgaXNzdWVcblxuICAgICAgICBmaWVsZENvbmZpZyA9IHBtc3RhdHVzLmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKVxuICAgICAgICAvL2xvZy53YXJuIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcbiAgICAgICAgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBzdGF0dXMgfVxuXG4gICAgICAgIHBtc3RhdHVzLnVwZGF0ZVZhbHVlKG51bGwsIGlzc3VlLCBuZXcgTW9kaWZpZWRWYWx1ZShpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBtc3RhdHVzKSwgY2ZOZXdWYWx1ZSksIG5ldyBEZWZhdWx0SXNzdWVDaGFuZ2VIb2xkZXIoKSlcbiAgICAgICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChpc3N1ZSlcbiAgICB9XG4gICAgXG4gICAgaWYodG9iZVN0b3BwZWQpe1xuICAgICAgICBmaWVsZENvbmZpZyA9IHBtU3RvcEFzc2V0LmdldFJlbGV2YW50Q29uZmlnKGlzc3VlKVxuICAgICAgICAvL2xvZy53YXJuIFwiZmllbGRDb25maWc6IFwiICsgZmllbGRDb25maWdcbiAgICAgICAgY2ZOZXdWYWx1ZSA9IENvbXBvbmVudEFjY2Vzc29yLm9wdGlvbnNNYW5hZ2VyLmdldE9wdGlvbnMoZmllbGRDb25maWcpPy5maW5kIHsgaXQudG9TdHJpbmcoKSA9PSBcIllFU1wiIH1cblxuICAgICAgICBwbVN0b3BBc3NldC51cGRhdGVWYWx1ZShudWxsLCBpc3N1ZSwgbmV3IE1vZGlmaWVkVmFsdWUoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShwbVN0b3BBc3NldCksIGNmTmV3VmFsdWUpLCBuZXcgRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyKCkpXG4gICAgICAgIGlzc3VlSW5kZXhpbmdTZXJ2aWNlLnJlSW5kZXgoaXNzdWUpXG4gICAgfWVsc2V7XG4gICAgICAgIGZpZWxkQ29uZmlnID0gcG1TdG9wQXNzZXQuZ2V0UmVsZXZhbnRDb25maWcoaXNzdWUpXG4gICAgICAgIC8vbG9nLndhcm4gXCJmaWVsZENvbmZpZzogXCIgKyBmaWVsZENvbmZpZ1xuICAgICAgICBjZk5ld1ZhbHVlID0gQ29tcG9uZW50QWNjZXNzb3Iub3B0aW9uc01hbmFnZXIuZ2V0T3B0aW9ucyhmaWVsZENvbmZpZyk/LmZpbmQgeyBpdC50b1N0cmluZygpID09IFwiTk9cIiB9XG5cbiAgICAgICAgcG1TdG9wQXNzZXQudXBkYXRlVmFsdWUobnVsbCwgaXNzdWUsIG5ldyBNb2RpZmllZFZhbHVlKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUocG1TdG9wQXNzZXQpLCBjZk5ld1ZhbHVlKSwgbmV3IERlZmF1bHRJc3N1ZUNoYW5nZUhvbGRlcigpKVxuICAgICAgICBpc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGlzc3VlKVxuICAgIH1cblxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="disabled">true</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="121" name="Back to Conf&amp;Planned">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <results>
            <unconditional-result old-status="null" status="null" step="3">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="341" name="Genera Operazioni di Manutenzione ODS">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">7837ddc9-2bc7-4753-a1ad-2f15075bbddc</arg>
                <arg name="FIELD_NOTES">YCFgUE0gVGFzayBzZW56YSBQTSBvcGVyYXRpb25zIE5PTiBBU1NJU1RBTlQgKGkgdGt0IGFzc2lzdGFudCBOT04gZGV2b25vIHJpcGV0ZXJlIGxlIFBNIE9wZXJhdGlvbnMp</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="disabled">false</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXHJcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvblxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxyXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvbkJ1aWxkZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXHJcbmltcG9ydCBqYXZhLnRleHQuU2ltcGxlRGF0ZUZvcm1hdDtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZVxyXG5cclxuZGVmIGFzc2lnbmVkVG8gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEtUX0FTU0lHTkVEX1RPXCIpWzBdXHJcbmRlZiBwbU9wZXJhdGlvbnMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfUE1fT1BFUkFUSU9OU19PRFNcIilbMF1cclxubG9nLmRlYnVnIFwiaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NpZ25lZFRvKTogXCIgKyBpc3N1ZS5nZXRQYXJlbnRPYmplY3QoKS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2lnbmVkVG8pXHJcblxyXG5pc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBtT3BlcmF0aW9ucykgPT0gbnVsbCAmJiAoaXNzdWUuZ2V0UGFyZW50T2JqZWN0KCkuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NpZ25lZFRvKSA9PSBudWxsIHx8ICFpc3N1ZS5nZXRQYXJlbnRPYmplY3QoKS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2lnbmVkVG8pLnRvU3RyaW5nKCkuZXF1YWxzKFwiQVNTSVNUQU5UXCIpKSIsInNjcmlwdFBhdGgiOm51bGx9</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">8b9939c3-4e05-46fa-a583-7e053e5251af</arg>
              <arg name="FIELD_NOTES">YCFgUE0gVGFzazogZ2VuZXJhIG9wZXJhemlvbmkgZGkgbWFudXRlbnppb25l</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XHJcbmltcG9ydCBncm9vdnkuanNvbi5TdHJlYW1pbmdKc29uQnVpbGRlcjtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5DdXN0b21GaWVsZE1hbmFnZXI7XHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3I7XHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXHJcbmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMuY29kZWMuYmluYXJ5LkJhc2U2NDtcclxuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXHJcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5XHJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXHJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXHJcblxyXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXHJcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXHJcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XHJcblx0cHJvcGVydGllcy5sb2FkKGl0KVxyXG59XHJcbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxyXG5cclxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xyXG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XHJcbmRlZiByZXF1ZXN0TWV0aG9kXHJcbmRlZiBiYXNlVVJMXHJcblxyXG5kZWYgcG1PcGVyYXRpb25zID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9QTV9PUEVSQVRJT05TX09EU1wiKVswXSlcclxuaWYocG1PcGVyYXRpb25zID09IG51bGwpe1xyXG5cclxuICAgIC8qIFJFU1QgQVBJIHBlciBwdWxpemlhIGNhY2hlIGlzc3VlIGxpbmthdGEgKi9cclxuICAgIHJlcXVlc3RNZXRob2QgPSBcIlBVVFwiO1xyXG4gICAgLypTY3JpcHQgVmFyaWFibGVzKi9cclxuICAgIC8vUGVyIHRlc3QgZGEgY29uc29sZVxyXG4gICAgLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy0zMjUzNVwiKVxyXG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvcG0tc3VidGFzay9cIiArIGlzc3VlLmtleSArIFwiL29wZXJhdGlvbnNcIlxyXG4gICAgVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcclxuICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XHJcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XHJcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcclxuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xyXG4gICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcclxuICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcclxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xyXG4gICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxyXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxyXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxyXG5cclxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XHJcbiAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxyXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcclxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXHJcbiAgICB9XHJcbiAgICBJc3N1ZUluZGV4aW5nU2VydmljZSBcdGlzc3VlSW5kZXhpbmdTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KElzc3VlSW5kZXhpbmdTZXJ2aWNlKVxyXG4gICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChpc3N1ZSlcclxufSIsInNjcmlwdFBhdGgiOm51bGx9</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">0870052d-fbad-4ee4-aa1a-8d4cacc9726e</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXJcclxuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEud29ya2Zsb3cuSmlyYVdvcmtmbG93XHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLnNjcmVlbi5GaWVsZFNjcmVlbkxheW91dEl0ZW1cclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuc2NyZWVuLkZpZWxkU2NyZWVuVGFiXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkZpZWxkTWFuYWdlclxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5zY3JlZW4uRmllbGRTY3JlZW5cclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuc2NyZWVuLkZpZWxkU2NyZWVuTWFuYWdlclxyXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5sb2FkZXIuQWN0aW9uRGVzY3JpcHRvclxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLndvcmtmbG93LldvcmtmbG93TWFuYWdlclxyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XHJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyO1xyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGw7XHJcblxyXG5kZWYgcmVxdWVzdE1ldGhvZFxyXG5kZWYgYmFzZVVSTFxyXG5kZWYgcmVzcG9uc2VDb2RlXHJcbmRlZiByZXNwb25zZU1lc3NhZ2VcclxuZGVmIGJvZHlSZXEgPSBbXVxyXG5kZWYgYnJcclxuTWFwPFN0cmluZywgT2JqZWN0PiBjdXN0b21GaWVsZE1hcCA9IG5ldyBIYXNoTWFwPFN0cmluZyxPYmplY3Q+KCk7XHJcblxyXG50cnkge1xyXG4gICAgUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxyXG4gICAgRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcclxuICAgIHByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XHJcbiAgICAgICAgcHJvcGVydGllcy5sb2FkKGl0KVxyXG4gICAgfVxyXG5cclxuICAgIGRlZiBzZXJ2ZXJCYXNlID0gU3RyaW5nLmZvcm1hdChcImh0dHA6Ly8lcy9vcFwiLCBwcm9wZXJ0aWVzWydhcGkuZW52J10pXHJcbiAgICBkZWYgdHJhbnNhY3Rpb25BY3Rpb24gPSBcInZhbGlkYXRvcnNcIlxyXG5cclxuICAgIFVSTCB1cmxcclxuICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb25cclxuICAgIHJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcclxuXHJcbiAgICBiYXNlVVJMID0gU3RyaW5nLmZvcm1hdChcIiVzL3Jlc3QvamlyYS93b3JrZmxvd3MvJXMvJXNcIiwgc2VydmVyQmFzZSwgdHJhbnNpZW50VmFycy5hY3Rpb25JZCwgdHJhbnNhY3Rpb25BY3Rpb24pO1xyXG5cclxuICAgIGxvZy5kZWJ1ZyBiYXNlVVJMO1xyXG5cclxuICAgIFdvcmtmbG93TWFuYWdlciB3b3JrZmxvd01hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRXb3JrZmxvd01hbmFnZXIoKTtcclxuICAgIEppcmFXb3JrZmxvdyBqaXJhV29ya2Zsb3cgPSB3b3JrZmxvd01hbmFnZXIuZ2V0V29ya2Zsb3codHJhbnNpZW50VmFycy5pc3N1ZSk7XHJcblxyXG4gICAgQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xyXG4gICAgXHJcbiAgICBsb2cuZGVidWcgamlyYVdvcmtmbG93LmdldE5hbWUoKTtcclxuICAgIFxyXG4gICAgQWN0aW9uRGVzY3JpcHRvciBhZCA9IHdvcmtmbG93TWFuYWdlci5nZXRBY3Rpb25EZXNjcmlwdG9yKHRyYW5zaWVudFZhcnMuaXNzdWUsIHRyYW5zaWVudFZhcnMuYWN0aW9uSWQpO1xyXG5cclxuICAgIGxvZy5kZWJ1ZyBhZC5nZXROYW1lKCkgICAgICAgICAgICAgIC8vR2VuZXJhIE9wZXJhemlvbmkgZGkgTWFudXRlbnppb25lIE9EU1xyXG4gICAgbG9nLmRlYnVnIGFkLmdldE1ldGFBdHRyaWJ1dGVzKCkgICAgLy97b3BzYmFyLXNlcXVlbmNlPTEwLCBqaXJhLmRlc2NyaXB0aW9uPSwgamlyYS5maWVsZHNjcmVlbi5pZD0xOTkxMH1cclxuXHJcbiAgICBkZWYgYWRNZXRhID0gYWQuZ2V0TWV0YUF0dHJpYnV0ZXMoKTtcclxuICAgIGRlZiBmaWVsZFNjcmVlbklkID0gYWRNZXRhLmdldChcImppcmEuZmllbGRzY3JlZW4uaWRcIik7XHJcbiAgICBsb2cuZGVidWcgXCJGaWVsZCBzY3JlZW4gaWQ6IFwiICsgZmllbGRTY3JlZW5JZFxyXG5cclxuICAgIGlmKGZpZWxkU2NyZWVuSWQgIT0gbnVsbCAmJiBmaWVsZFNjcmVlbklkICE9IFwiXCIpIHtcclxuICAgICAgICBGaWVsZFNjcmVlbk1hbmFnZXIgZmllbGRTY3JlZW5NYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KEZpZWxkU2NyZWVuTWFuYWdlci5jbGFzcyk7XHJcbiAgICAgICAgRmllbGRTY3JlZW4gZmllbGRTY3JlZW4gPSBmaWVsZFNjcmVlbk1hbmFnZXIuZ2V0RmllbGRTY3JlZW4oTG9uZy52YWx1ZU9mKGZpZWxkU2NyZWVuSWQudG9TdHJpbmcoKSkpO1xyXG4gICAgICAgIExpc3Q8RmllbGRTY3JlZW5UYWI+IGZzdHMgPSBmaWVsZFNjcmVlbi5nZXRUYWJzKCk7XHJcbiAgICAgICAgZm9yIChGaWVsZFNjcmVlblRhYiBmc3QgOiBmc3RzKSB7XHJcbiAgICAgICAgICAgIExpc3Q8RmllbGRTY3JlZW5MYXlvdXRJdGVtPiBxd2UgPSBmc3QuZ2V0RmllbGRTY3JlZW5MYXlvdXRJdGVtcygpO1xyXG4gICAgICAgICAgICBmb3IgKEZpZWxkU2NyZWVuTGF5b3V0SXRlbSBmc2xpIDogcXdlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZnNsaS5nZXRGaWVsZElkKCkgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgQ3VzdG9tRmllbGQgY3VzdG9tRmllbGQgPSBjdXN0b21GaWVsZE1hbmFnZXIuZ2V0Q3VzdG9tRmllbGRPYmplY3QoZnNsaS5nZXRGaWVsZElkKCkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1c3RvbUZpZWxkID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRlZiBjdXN0b21GaWVsZFZhbHVlID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0b21GaWVsZCk7XHJcbiAgICAgICAgICAgICAgICBjdXN0b21GaWVsZE1hcC5wdXQoZnNsaS5nZXRGaWVsZElkKCksIGN1c3RvbUZpZWxkVmFsdWUgPT0gbnVsbCA/IG51bGwgOiBjdXN0b21GaWVsZFZhbHVlLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY3VzdG9tRmllbGRNYXAgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgbG9nLmRlYnVnIGN1c3RvbUZpZWxkTWFwXHJcblxyXG4gICAgYm9keVJlcSA9IFsgXHJcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXHJcbiAgICAgICAgXCJhY3Rpb25OYW1lXCI6IGFkLmdldE5hbWUoKSxcclxuICAgICAgICBcImppcmFXb3JrZmxvd05hbWVcIjogamlyYVdvcmtmbG93LmdldE5hbWUoKSxcclxuICAgICAgICBcImN1c3RvbUZpZWxkTWFwXCI6IGN1c3RvbUZpZWxkTWFwLFxyXG4gICAgICAgIFwicHJvcGVydGllc1wiOiBwcm9wZXJ0aWVzXHJcbiAgICBdIFxyXG5cclxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxyXG4gICAgbG9nLmRlYnVnIFwiYm9keVJlcSBTTjogXCIgKyBib2R5UmVxXHJcblxyXG4gICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxyXG4gICAgY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcclxuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcclxuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xyXG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XHJcbiAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xyXG4gICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xyXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5UmVxKSB9XHJcbiAgICBcclxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xyXG4gICAgcmVzcG9uc2VDb2RlID0gY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpICAgIFxyXG4gICAgICAgIFxyXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2UgSHR0cFN0YXR1c0NvZGU6IFwiICsgcmVzcG9uc2VDb2RlXHJcbiAgICAgICAgXHJcbiAgICAvLyBJZiBiYWNrZW5kIHJlcGxpZXMgd2l0aCAyMDAgdGhlbiB0aGUgY29uZGl0aW9uIGlzIHBhc3NlZCAgICBcclxuICAgIGlmKFwiMjAwXCIuZXF1YWxzKHJlc3BvbnNlQ29kZSkpe1xyXG4gICAgICAgIGxvZy5kZWJ1ZyBcIk9LXCJcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy9UaGlzIGlzIGEgYmFja2VuZCBlcnJvci4uIGxvZ1xyXG4gICAgICAgIGxvZy5kZWJ1ZyBcIkJhY2tlbmQgZXJyb3JcIlxyXG5cclxuICAgICAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxyXG5cclxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXHJcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVJST1JcIikgLy9pZiBkeW5hbWljLCBiZXR0ZXJcclxuICAgICAgICBlTGlzdEVycm9ycy5hZGQobnVsbCkgICAvL2l0IHNvdW5kcyBpdCBpcyB1c2VkIGFzIHNlcGFyYXRvclxyXG5cclxuICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XHJcbiAgICAgICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xyXG5cclxuICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxyXG4gICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpXHJcbiAgICAgICAgaWYoanNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXApe1xyXG4gICAgICAgICAgICAvL2Vycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsganNvbl9vYmplY3QubWVzc2FnZSlcclxuICAgICAgICAgICAgaWYoanNvbl9vYmplY3QuZXJyb3JzIGluc3RhbmNlb2YgTGlzdCl7XHJcbiAgICAgICAgICAgICAgICBmb3IoZGVmIGN1ciA6IChMaXN0KWpzb25fb2JqZWN0LmVycm9ycyl7XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjdXIudG9TdHJpbmcoKSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVycm9yTXNncy5hZGQoanNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAgIH0gICAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcclxuICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXHJcblxyXG4gICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXHJcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXHJcbiAgICB9XHJcbn0gY2F0Y2ggKEV4Y2VwdGlvbiBlKXtcclxuICAgIC8vVGhpcyBpcyBhbiBleGNlcHRpb24gaW4gdGhlIHNjcmlwdFxyXG4gICAgbG9nLmRlYnVnIFwiRXhjZXB0aW9uIHJhaXNlZFwiXHJcbiAgICBsb2cuZXJyb3IgZVxyXG4gICAgaWYoZSBpbnN0YW5jZW9mIEludmFsaWRJbnB1dEV4Y2VwdGlvbil7XHJcbiAgICAgICAgdGhyb3cgZTtcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJWYWxpZGF0b3JzIGZhaWxlZFwiKTtcclxufVxyXG4iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="Not Done" status="Done" step="7">
              <post-functions>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdateissuestatus-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowcreatecomment-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowgeneratechangehistory-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowreindexissue-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="8" name="Canceled">
      <meta name="jira.status.id">11728</meta>
      <actions>
        <action id="251" name="Recupera Ticket">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <results>
            <unconditional-result old-status="null" status="null" step="6">
              <post-functions>
                <function type="class">
                  <arg name="field.name">resolution</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
                  <arg name="field.value"></arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="321" name="Set Security">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">1b7d5faf-f701-433b-bfff-28879be13db0</arg>
                <arg name="FIELD_INVERT_CONDITION"></arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.UserCondition</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_USER_IDS">arianna.fabbri|||JIRAUSER58800</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="8">
              <post-functions>
                <function type="class">
                  <arg name="FIELD_SECURITY_LEVEL_ID">11600</arg>
                  <arg name="FIELD_FUNCTION_ID">006f388b-2114-4b75-aba7-ff0b7afc0cb2</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SetIssueSecurity</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SetIssueSecurity</arg>
                  <arg name="FIELD_CONDITION"></arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="9" name="Rejected">
      <meta name="jira.status.id">11436</meta>
      <actions>
        <action id="301" name="Set Security">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">1b7d5faf-f701-433b-bfff-28879be13db0</arg>
                <arg name="FIELD_INVERT_CONDITION"></arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.UserCondition</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_USER_IDS">arianna.fabbri|||JIRAUSER58800</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="9">
              <post-functions>
                <function type="class">
                  <arg name="FIELD_SECURITY_LEVEL_ID">11600</arg>
                  <arg name="FIELD_FUNCTION_ID">006f388b-2114-4b75-aba7-ff0b7afc0cb2</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SetIssueSecurity</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SetIssueSecurity</arg>
                  <arg name="FIELD_CONDITION"></arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="10" name="Risks Assessment">
      <meta name="jira.status.id">15228</meta>
      <actions>
<common-action id="41" />
<common-action id="201" />
        <action id="351" name="Genera Operazioni di Manutenzione ODS">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">552ba1da-de56-4386-aba4-d68c6b072866</arg>
                <arg name="FIELD_NOTES">YCFgUE0gVGFzayBzZW56YSBQTSBvcGVyYXRpb25zIE5PTiBBU1NJU1RBTlQgKGkgdGt0IGFzc2lzdGFudCBOT04gZGV2b25vIHJpcGV0ZXJlIGxlIFBNIE9wZXJhdGlvbnMp</arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.SimpleScriptedCondition</arg>
                <arg name="disabled">false</arg>
                <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXHJcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvblxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxyXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvbkJ1aWxkZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTW9kaWZpZWRWYWx1ZVxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLnV0aWwuRGVmYXVsdElzc3VlQ2hhbmdlSG9sZGVyXHJcbmltcG9ydCBqYXZhLnRleHQuU2ltcGxlRGF0ZUZvcm1hdDtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5pbmRleC5Jc3N1ZUluZGV4aW5nU2VydmljZVxyXG5cclxuZGVmIGFzc2lnbmVkVG8gPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEtUX0FTU0lHTkVEX1RPXCIpWzBdXHJcbmRlZiBwbU9wZXJhdGlvbnMgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfUE1fT1BFUkFUSU9OU19PRFNcIilbMF1cclxubG9nLmRlYnVnIFwiaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NpZ25lZFRvKTogXCIgKyBpc3N1ZS5nZXRQYXJlbnRPYmplY3QoKS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2lnbmVkVG8pXHJcblxyXG5pc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHBtT3BlcmF0aW9ucykgPT0gbnVsbCAmJiAoaXNzdWUuZ2V0UGFyZW50T2JqZWN0KCkuZ2V0Q3VzdG9tRmllbGRWYWx1ZShhc3NpZ25lZFRvKSA9PSBudWxsIHx8ICFpc3N1ZS5nZXRQYXJlbnRPYmplY3QoKS5nZXRDdXN0b21GaWVsZFZhbHVlKGFzc2lnbmVkVG8pLnRvU3RyaW5nKCkuZXF1YWxzKFwiQVNTSVNUQU5UXCIpKSIsInNjcmlwdFBhdGgiOm51bGx9</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">108a0c19-913e-4bc0-b3cc-ca4f9f18411f</arg>
              <arg name="FIELD_NOTES">YCFgUE0gVGFzazogZ2VuZXJhIG9wZXJhemlvbmkgZGkgbWFudXRlbnppb25l</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XHJcbmltcG9ydCBncm9vdnkuanNvbi5TdHJlYW1pbmdKc29uQnVpbGRlcjtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5DdXN0b21GaWVsZE1hbmFnZXI7XHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3I7XHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWU7XHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlXHJcbmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMuY29kZWMuYmluYXJ5LkJhc2U2NDtcclxuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXHJcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5XHJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXHJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmluZGV4Lklzc3VlSW5kZXhpbmdTZXJ2aWNlXHJcblxyXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXHJcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXHJcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XHJcblx0cHJvcGVydGllcy5sb2FkKGl0KVxyXG59XHJcbmxvZy5zZXRMZXZlbChvcmcuYXBhY2hlLmxvZzRqLkxldmVsLkRFQlVHKVxyXG5cclxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpO1xyXG5DdXN0b21GaWVsZE1hbmFnZXIgY3VzdG9tRmllbGRNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCk7XHJcbmRlZiByZXF1ZXN0TWV0aG9kXHJcbmRlZiBiYXNlVVJMXHJcblxyXG5kZWYgcG1PcGVyYXRpb25zID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9QTV9PUEVSQVRJT05TX09EU1wiKVswXSlcclxuaWYocG1PcGVyYXRpb25zID09IG51bGwpe1xyXG5cclxuICAgIC8qIFJFU1QgQVBJIHBlciBwdWxpemlhIGNhY2hlIGlzc3VlIGxpbmthdGEgKi9cclxuICAgIHJlcXVlc3RNZXRob2QgPSBcIlBVVFwiO1xyXG4gICAgLypTY3JpcHQgVmFyaWFibGVzKi9cclxuICAgIC8vUGVyIHRlc3QgZGEgY29uc29sZVxyXG4gICAgLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy0zMjUzNVwiKVxyXG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvcG0tc3VidGFzay9cIiArIGlzc3VlLmtleSArIFwiL29wZXJhdGlvbnNcIlxyXG4gICAgVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcclxuICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XHJcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XHJcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcclxuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xyXG4gICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcclxuICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcclxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xyXG4gICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxyXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxyXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxyXG5cclxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XHJcbiAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxyXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcclxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXHJcbiAgICB9XHJcbiAgICBJc3N1ZUluZGV4aW5nU2VydmljZSBcdGlzc3VlSW5kZXhpbmdTZXJ2aWNlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KElzc3VlSW5kZXhpbmdTZXJ2aWNlKVxyXG4gICAgaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChpc3N1ZSlcclxufSIsInNjcmlwdFBhdGgiOm51bGx9</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">2a6bb4a1-8923-479f-a196-7b64e7901962</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXJcclxuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkN1c3RvbUZpZWxkXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEud29ya2Zsb3cuSmlyYVdvcmtmbG93XHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLnNjcmVlbi5GaWVsZFNjcmVlbkxheW91dEl0ZW1cclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuc2NyZWVuLkZpZWxkU2NyZWVuVGFiXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuZmllbGRzLkZpZWxkTWFuYWdlclxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5zY3JlZW4uRmllbGRTY3JlZW5cclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5maWVsZHMuc2NyZWVuLkZpZWxkU2NyZWVuTWFuYWdlclxyXG5pbXBvcnQgY29tLm9wZW5zeW1waG9ueS53b3JrZmxvdy5sb2FkZXIuQWN0aW9uRGVzY3JpcHRvclxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLndvcmtmbG93LldvcmtmbG93TWFuYWdlclxyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uU3RyZWFtaW5nSnNvbkJ1aWxkZXI7XHJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyO1xyXG5pbXBvcnQgY29tLm9ucmVzb2x2ZS5zY3JpcHRydW5uZXIucnVubmVyLlNjcmlwdFJ1bm5lckltcGw7XHJcblxyXG5kZWYgcmVxdWVzdE1ldGhvZFxyXG5kZWYgYmFzZVVSTFxyXG5kZWYgcmVzcG9uc2VDb2RlXHJcbmRlZiByZXNwb25zZU1lc3NhZ2VcclxuZGVmIGJvZHlSZXEgPSBbXVxyXG5kZWYgYnJcclxuTWFwPFN0cmluZywgT2JqZWN0PiBjdXN0b21GaWVsZE1hcCA9IG5ldyBIYXNoTWFwPFN0cmluZyxPYmplY3Q+KCk7XHJcblxyXG50cnkge1xyXG4gICAgUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxyXG4gICAgRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcclxuICAgIHByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XHJcbiAgICAgICAgcHJvcGVydGllcy5sb2FkKGl0KVxyXG4gICAgfVxyXG5cclxuICAgIGRlZiBzZXJ2ZXJCYXNlID0gU3RyaW5nLmZvcm1hdChcImh0dHA6Ly8lcy9vcFwiLCBwcm9wZXJ0aWVzWydhcGkuZW52J10pXHJcbiAgICBkZWYgdHJhbnNhY3Rpb25BY3Rpb24gPSBcInZhbGlkYXRvcnNcIlxyXG5cclxuICAgIFVSTCB1cmxcclxuICAgIEh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb25cclxuICAgIHJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcclxuXHJcbiAgICBiYXNlVVJMID0gU3RyaW5nLmZvcm1hdChcIiVzL3Jlc3QvamlyYS93b3JrZmxvd3MvJXMvJXNcIiwgc2VydmVyQmFzZSwgdHJhbnNpZW50VmFycy5hY3Rpb25JZCwgdHJhbnNhY3Rpb25BY3Rpb24pO1xyXG5cclxuICAgIGxvZy5kZWJ1ZyBiYXNlVVJMO1xyXG5cclxuICAgIFdvcmtmbG93TWFuYWdlciB3b3JrZmxvd01hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRXb3JrZmxvd01hbmFnZXIoKTtcclxuICAgIEppcmFXb3JrZmxvdyBqaXJhV29ya2Zsb3cgPSB3b3JrZmxvd01hbmFnZXIuZ2V0V29ya2Zsb3codHJhbnNpZW50VmFycy5pc3N1ZSk7XHJcblxyXG4gICAgQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xyXG4gICAgXHJcbiAgICBsb2cuZGVidWcgamlyYVdvcmtmbG93LmdldE5hbWUoKTtcclxuICAgIFxyXG4gICAgQWN0aW9uRGVzY3JpcHRvciBhZCA9IHdvcmtmbG93TWFuYWdlci5nZXRBY3Rpb25EZXNjcmlwdG9yKHRyYW5zaWVudFZhcnMuaXNzdWUsIHRyYW5zaWVudFZhcnMuYWN0aW9uSWQpO1xyXG5cclxuICAgIGxvZy5kZWJ1ZyBhZC5nZXROYW1lKCkgICAgICAgICAgICAgIC8vR2VuZXJhIE9wZXJhemlvbmkgZGkgTWFudXRlbnppb25lIE9EU1xyXG4gICAgbG9nLmRlYnVnIGFkLmdldE1ldGFBdHRyaWJ1dGVzKCkgICAgLy97b3BzYmFyLXNlcXVlbmNlPTEwLCBqaXJhLmRlc2NyaXB0aW9uPSwgamlyYS5maWVsZHNjcmVlbi5pZD0xOTkxMH1cclxuXHJcbiAgICBkZWYgYWRNZXRhID0gYWQuZ2V0TWV0YUF0dHJpYnV0ZXMoKTtcclxuICAgIGRlZiBmaWVsZFNjcmVlbklkID0gYWRNZXRhLmdldChcImppcmEuZmllbGRzY3JlZW4uaWRcIik7XHJcbiAgICBsb2cuZGVidWcgXCJGaWVsZCBzY3JlZW4gaWQ6IFwiICsgZmllbGRTY3JlZW5JZFxyXG5cclxuICAgIGlmKGZpZWxkU2NyZWVuSWQgIT0gbnVsbCAmJiBmaWVsZFNjcmVlbklkICE9IFwiXCIpIHtcclxuICAgICAgICBGaWVsZFNjcmVlbk1hbmFnZXIgZmllbGRTY3JlZW5NYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q29tcG9uZW50KEZpZWxkU2NyZWVuTWFuYWdlci5jbGFzcyk7XHJcbiAgICAgICAgRmllbGRTY3JlZW4gZmllbGRTY3JlZW4gPSBmaWVsZFNjcmVlbk1hbmFnZXIuZ2V0RmllbGRTY3JlZW4oTG9uZy52YWx1ZU9mKGZpZWxkU2NyZWVuSWQudG9TdHJpbmcoKSkpO1xyXG4gICAgICAgIExpc3Q8RmllbGRTY3JlZW5UYWI+IGZzdHMgPSBmaWVsZFNjcmVlbi5nZXRUYWJzKCk7XHJcbiAgICAgICAgZm9yIChGaWVsZFNjcmVlblRhYiBmc3QgOiBmc3RzKSB7XHJcbiAgICAgICAgICAgIExpc3Q8RmllbGRTY3JlZW5MYXlvdXRJdGVtPiBxd2UgPSBmc3QuZ2V0RmllbGRTY3JlZW5MYXlvdXRJdGVtcygpO1xyXG4gICAgICAgICAgICBmb3IgKEZpZWxkU2NyZWVuTGF5b3V0SXRlbSBmc2xpIDogcXdlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZnNsaS5nZXRGaWVsZElkKCkgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgQ3VzdG9tRmllbGQgY3VzdG9tRmllbGQgPSBjdXN0b21GaWVsZE1hbmFnZXIuZ2V0Q3VzdG9tRmllbGRPYmplY3QoZnNsaS5nZXRGaWVsZElkKCkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1c3RvbUZpZWxkID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRlZiBjdXN0b21GaWVsZFZhbHVlID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXN0b21GaWVsZCk7XHJcbiAgICAgICAgICAgICAgICBjdXN0b21GaWVsZE1hcC5wdXQoZnNsaS5nZXRGaWVsZElkKCksIGN1c3RvbUZpZWxkVmFsdWUgPT0gbnVsbCA/IG51bGwgOiBjdXN0b21GaWVsZFZhbHVlLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY3VzdG9tRmllbGRNYXAgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgbG9nLmRlYnVnIGN1c3RvbUZpZWxkTWFwXHJcblxyXG4gICAgYm9keVJlcSA9IFsgXHJcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXHJcbiAgICAgICAgXCJhY3Rpb25OYW1lXCI6IGFkLmdldE5hbWUoKSxcclxuICAgICAgICBcImppcmFXb3JrZmxvd05hbWVcIjogamlyYVdvcmtmbG93LmdldE5hbWUoKSxcclxuICAgICAgICBcImN1c3RvbUZpZWxkTWFwXCI6IGN1c3RvbUZpZWxkTWFwLFxyXG4gICAgICAgIFwicHJvcGVydGllc1wiOiBwcm9wZXJ0aWVzXHJcbiAgICBdIFxyXG5cclxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU046IFwiICsgYmFzZVVSTFxyXG4gICAgbG9nLmRlYnVnIFwiYm9keVJlcSBTTjogXCIgKyBib2R5UmVxXHJcblxyXG4gICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxyXG4gICAgY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcclxuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcclxuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xyXG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XHJcbiAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xyXG4gICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xyXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5UmVxKSB9XHJcbiAgICBcclxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xyXG4gICAgcmVzcG9uc2VDb2RlID0gY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpICAgIFxyXG4gICAgICAgIFxyXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2UgSHR0cFN0YXR1c0NvZGU6IFwiICsgcmVzcG9uc2VDb2RlXHJcbiAgICAgICAgXHJcbiAgICAvLyBJZiBiYWNrZW5kIHJlcGxpZXMgd2l0aCAyMDAgdGhlbiB0aGUgY29uZGl0aW9uIGlzIHBhc3NlZCAgICBcclxuICAgIGlmKFwiMjAwXCIuZXF1YWxzKHJlc3BvbnNlQ29kZSkpe1xyXG4gICAgICAgIGxvZy5kZWJ1ZyBcIk9LXCJcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy9UaGlzIGlzIGEgYmFja2VuZCBlcnJvci4uIGxvZ1xyXG4gICAgICAgIGxvZy5kZWJ1ZyBcIkJhY2tlbmQgZXJyb3JcIlxyXG5cclxuICAgICAgICBkZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxyXG5cclxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXHJcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVJST1JcIikgLy9pZiBkeW5hbWljLCBiZXR0ZXJcclxuICAgICAgICBlTGlzdEVycm9ycy5hZGQobnVsbCkgICAvL2l0IHNvdW5kcyBpdCBpcyB1c2VkIGFzIHNlcGFyYXRvclxyXG5cclxuICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XHJcbiAgICAgICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xyXG5cclxuICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxyXG4gICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpXHJcbiAgICAgICAgaWYoanNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXApe1xyXG4gICAgICAgICAgICAvL2Vycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsganNvbl9vYmplY3QubWVzc2FnZSlcclxuICAgICAgICAgICAgaWYoanNvbl9vYmplY3QuZXJyb3JzIGluc3RhbmNlb2YgTGlzdCl7XHJcbiAgICAgICAgICAgICAgICBmb3IoZGVmIGN1ciA6IChMaXN0KWpzb25fb2JqZWN0LmVycm9ycyl7XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2dzLmFkZChjdXIudG9TdHJpbmcoKSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVycm9yTXNncy5hZGQoanNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAgIH0gICAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcclxuICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXHJcblxyXG4gICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXHJcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXHJcbiAgICB9XHJcbn0gY2F0Y2ggKEV4Y2VwdGlvbiBlKXtcclxuICAgIC8vVGhpcyBpcyBhbiBleGNlcHRpb24gaW4gdGhlIHNjcmlwdFxyXG4gICAgbG9nLmRlYnVnIFwiRXhjZXB0aW9uIHJhaXNlZFwiXHJcbiAgICBsb2cuZXJyb3IgZVxyXG4gICAgaWYoZSBpbnN0YW5jZW9mIEludmFsaWRJbnB1dEV4Y2VwdGlvbil7XHJcbiAgICAgICAgdGhyb3cgZTtcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJWYWxpZGF0b3JzIGZhaWxlZFwiKTtcclxufVxyXG4iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="Not Done" status="Done" step="10">
              <post-functions>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdateissuestatus-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowcreatecomment-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowgeneratechangehistory-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowreindexissue-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowfireevent-function</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="11" name="Removed">
      <meta name="jira.status.id">15327</meta>
      <actions>
        <action id="311" name="Set Security">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">1b7d5faf-f701-433b-bfff-28879be13db0</arg>
                <arg name="FIELD_INVERT_CONDITION"></arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.UserCondition</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_USER_IDS">arianna.fabbri|||JIRAUSER58800</arg>
              </condition>
            </conditions>
          </restrict-to>
          <results>
            <unconditional-result old-status="null" status="null" step="11">
              <post-functions>
                <function type="class">
                  <arg name="FIELD_SECURITY_LEVEL_ID">11600</arg>
                  <arg name="FIELD_FUNCTION_ID">006f388b-2114-4b75-aba7-ff0b7afc0cb2</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SetIssueSecurity</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SetIssueSecurity</arg>
                  <arg name="FIELD_CONDITION"></arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
  </steps>
</workflow>
