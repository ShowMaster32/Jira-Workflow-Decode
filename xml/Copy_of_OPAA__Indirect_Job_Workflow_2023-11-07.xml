<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE workflow PUBLIC "-//OpenSymphony Group//DTD OSWorkflow 2.8//EN" "http://www.opensymphony.com/osworkflow/workflow_2_8.dtd">
<workflow>
  <meta name="jira.description"></meta>
  <meta name="jira.update.author.key">JIRAUSER64223</meta>
  <meta name="jira.updated.date">1699345252197</meta>
  <initial-actions>
    <action id="1" name="Create">
      <validators>
        <validator name="" type="class">
          <arg name="permission">Create Issue</arg>
          <arg name="class.name">com.atlassian.jira.workflow.validator.PermissionValidator</arg>
        </validator>
      </validators>
      <results>
        <unconditional-result old-status="null" status="open" step="1">
          <post-functions>
            <function type="class">
              <arg name="field.name">summary</arg>
              <arg name="full.module.key">com.atlassian.jira.plugin.system.workflowupdate-issue-field-function</arg>
              <arg name="field.value">Indirect Job</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueFieldFunction</arg>
            </function>
            <function type="class">
              <arg name="FIELD_SECURITY_LEVEL_ID">11600</arg>
              <arg name="FIELD_FUNCTION_ID">6af852cf-8696-4225-82fb-53efd0188c8c</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SetIssueSecurity</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.SetIssueSecurity</arg>
              <arg name="FIELD_CONDITION"></arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueCreateFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">1</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">075180fb-a378-467a-85fa-b8c888915a10</arg>
              <arg name="FIELD_NOTES">YCFgQ29tcGxldGUgT1BfSU5ESVJFQ1RfSk9CIGZvciBUUkFWRUwgSE9NRSBsb2dzIGFycml2aW5nIGZyb20gbW9iaWxl</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvbjtcclxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouTGV2ZWxcclxuaW1wb3J0IGphdmEuc3FsLlRpbWVzdGFtcFxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxyXG5cclxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxyXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoJy92YXIvYXRsYXNzaWFuL2FwcGxpY2F0aW9uLWRhdGEvc2hhcmVkL3NjcmlwdHMvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxyXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xyXG5cdHByb3BlcnRpZXMubG9hZChpdClcclxufVxyXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXHJcbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTsgXHJcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xyXG4gIFxyXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cclxuQ2xhc3Mgb2JqZWN0VHlwZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVGYWNhZGVcIik7IFxyXG5kZWYgb2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpO1xyXG4gIFxyXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgQXR0cmlidXRlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xyXG5DbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTsgXHJcbmRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XHJcbiAgXHJcbkNsYXNzIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5zZXJ2aWNlcy5tb2RlbC5mYWN0b3J5Lk9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5XCIpOyBcclxuZGVmIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MpO1xyXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxyXG5kZWYgaXFsRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKGlxbEZhY2FkZUNsYXNzKTtcclxuXHJcbmRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0NVUlJFTlRfVVNFUlwiKVswXVxyXG5kZWYgdGt0RnJvbU1vYmlsZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1RLVF9GUk9NX01PQklMRVwiKVswXTtcclxuZGVmIHRrdFZpc0tleSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1RLVF9WSVNJQklMSVRZX0tFWVwiKVswXTtcclxuXHJcbmRlZiBpbmRpcmVjdFRhc2sgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9JTkRJUkVDVF9KT0JcIilbMF07XHJcbmludCBPUEFBID0gcHJvcGVydGllc1snaXNjaGVtYS5hYS5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuaW50IERCTyA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuZGJvLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG5cclxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpXHJcbi8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtNDE5MThcIilcclxuXHJcbmRlZiB1c2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXHJcbmRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIm9iamVjdFR5cGUgPSBDb21wYW55IEFORCBvYmplY3QgSEFWSU5HIG91dGJvdW5kUmVmZXJlbmNlcyhvYmplY3RUeXBlID0gU3VwcGxpZXIgQU5EIG9iamVjdCBIQVZJTkcgaW5ib3VuZFJlZmVyZW5jZXMob2JqZWN0VHlwZSA9IFN1cHBsaWVyX1RlY2huaWNpYW4gQU5EIFRFQ0hfQUNDT1VOVCA9IFxcXCJcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VycmVudFVzZXIpLnRvU3RyaW5nKCkgKyBcIlxcXCIpKVwiKVxyXG5sb2cuZGVidWcgXCJpcWw6IFwiICsgXCJvYmplY3RUeXBlPUNvbXBhbnkgQU5EIG9iamVjdCBIQVZJTkcgb3V0Ym91bmRSZWZlcmVuY2VzKG9iamVjdFR5cGUgPSBTdXBwbGllciBBTkQgb2JqZWN0IEhBVklORyBpbmJvdW5kUmVmZXJlbmNlcyhvYmplY3RUeXBlID0gU3VwcGxpZXJfVGVjaG5pY2lhbiBBTkQgVEVDSF9BQ0NPVU5UID0gXFxcIlwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXJyZW50VXNlcikudG9TdHJpbmcoKSArIFwiXFxcIikpXCJcclxuXHJcbmlmKG9iamVjdHMgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0a3RGcm9tTW9iaWxlKS50b1N0cmluZygpLmVxdWFscyhcIlRSQVZFTF9IT01FXCIpKXtcclxuICAgIGxvZy5kZWJ1ZyBvYmplY3RzWzBdXHJcbiAgICBcclxuICAgIGRlZiBjb21wYW55PW9iamVjdHNbMF0udG9TdHJpbmcoKVxyXG4gICAgZGVmIGNvbXBhbnlLZXkgPSBjb21wYW55LnN1YnN0cmluZyhjb21wYW55Lmxhc3RJbmRleE9mKCcoJykrMSxjb21wYW55Lmxhc3RJbmRleE9mKCcpJykpXHJcbiAgICBkZWYgY29tcGFueU5hbWUgPSBjb21wYW55LnN1YnN0cmluZygwLGNvbXBhbnkubGFzdEluZGV4T2YoJygnKS0xKVxyXG4gICAgZGVmIGNvbXBhbnlPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oY29tcGFueUtleSlcclxuICAgIGxvZy5pbmZvIFwidGVjaEtleTogXCIgKyBjb21wYW55S2V5XHJcbiAgICBsb2cuaW5mbyAoXCJ0ZWNoTmFtZTogXCIgKyBjb21wYW55TmFtZSlcclxuICAgIGxvZy5pbmZvIChcInRlY2hPYmplY3Q6IFwiICsgY29tcGFueU9iamVjdClcclxuICAgIFxyXG4gICAgb2JqZWN0cyA9IGlxbEZhY2FkZS5maW5kT2JqZWN0c0J5SVFMQW5kU2NoZW1hKERCTywgXCJvYmplY3RUeXBlID0gXFxcIkluZGlyZWN0IFRhc2tcXFwiIEFORCBDT01QQU5ZX1JFRi5LZXkgPSBcIiArIGNvbXBhbnlLZXkudG9TdHJpbmcoKSArIFwiIEFORCBUUkFWRUxfSE9NRSA9IHRydWVcIilcclxuICAgIGxvZy5kZWJ1ZyBcImlxbDogXCIgKyBcIm9iamVjdFR5cGUgPSBcXFwiSW5kaXJlY3QgVGFza1xcXCIgQU5EIENPTVBBTllfUkVGLktleSA9IFwiICsgY29tcGFueUtleS50b1N0cmluZygpICsgXCIgQU5EIFRSQVZFTF9IT01FID0gdHJ1ZVwiXHJcblxyXG4gICAgaWYob2JqZWN0cyl7XHJcbiAgICAgICAgbG9nLmRlYnVnIG9iamVjdHNbMF1cclxuICAgICAgICBkZWYgaW5kVGFza0xpc3QgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgIFx0aW5kVGFza0xpc3QuYWRkKG9iamVjdHNbMF0pXHJcbiAgICAgICAgXHJcbiAgICAgICAgTXV0YWJsZUlzc3VlIG1pID0gKE11dGFibGVJc3N1ZSkgaXNzdWU7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbWkuc2V0Q3VzdG9tRmllbGRWYWx1ZShpbmRpcmVjdFRhc2ssIGluZFRhc2tMaXN0KTtcclxuICAgIFx0Q29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUodXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7XHJcbiAgICB9XHJcbn0iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
            </function>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">5c3ef646-602e-4205-a405-e79da25fde50</arg>
              <arg name="FIELD_NOTES">YCFgSW5oZXJpdCBTQVBfU0VSVklDRV9PUkRFUiBmcm9tIHNlbGVjdGVkICJJbmRpcmVjdCBUYXNrIiArIGNvbXBsZXRlIE9QX1RFQ0hOSUNJQU5TX09OU0lURSArIGNvbXBsZXRlIE9QX0lOVEVSTkFMX1NVUFBMSUVS</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvbjtcclxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouTGV2ZWxcclxuaW1wb3J0IGphdmEuc3FsLlRpbWVzdGFtcFxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxyXG5cclxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxyXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoJy92YXIvYXRsYXNzaWFuL2FwcGxpY2F0aW9uLWRhdGEvc2hhcmVkL3NjcmlwdHMvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxyXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xyXG5cdHByb3BlcnRpZXMubG9hZChpdClcclxufVxyXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXHJcbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTsgXHJcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xyXG4gIFxyXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cclxuQ2xhc3Mgb2JqZWN0VHlwZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVGYWNhZGVcIik7IFxyXG5kZWYgb2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpO1xyXG4gIFxyXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgQXR0cmlidXRlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xyXG5DbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTsgXHJcbmRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XHJcbiAgXHJcbkNsYXNzIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5zZXJ2aWNlcy5tb2RlbC5mYWN0b3J5Lk9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5XCIpOyBcclxuZGVmIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MpO1xyXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxyXG5kZWYgaXFsRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKGlxbEZhY2FkZUNsYXNzKTtcclxuXHJcbmRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0NVUlJFTlRfVVNFUlwiKVswXVxyXG5kZWYgc2FwU2VydmljZU9yZGVyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfU0FQX1NFUlZJQ0VfT1JERVJcIilbMF07XHJcbmRlZiBpbnRlcm5hbFN1cHBsaWVyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfSU5URVJOQUxfU1VQUExJRVJcIilbMF07XHJcblxyXG5kZWYgdGt0RnJvbU1vYmlsZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1RLVF9GUk9NX01PQklMRVwiKVswXTtcclxuXHJcbmRlZiBqb2JTdGFydCA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0lORElSRUNUX0pPQl9TVEFSVEVEXCIpWzBdO1xyXG5kZWYgam9iQ29tcGxldGVkID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfSU5ESVJFQ1RfSk9CX0NPTVBMRVRFRFwiKVswXTtcclxuZGVmIHRrdFZpc2liaWxpdHkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9JTkRJUkVDVF9KT0JfVEtUX1ZJU0lCSUxJVFlcIilbMF1cclxuXHJcbmRlZiBvblNpdGVUZWNoc1RyYWNlRmllbGQgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9URUNITklDSUFOX0FDVElWSVRJRVNfVFJBQ0VcIilbMF07XHJcbmRlZiBvblNpdGVUZWNoc1dvcmtUcmFjZUZpZWxkID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEVDSE5JQ0lBTl9BQ1RJVklUSUVTX1RSQUNFX1dPUktcIilbMF07XHJcblxyXG5kZWYgaW5kaXJlY3RUYXNrID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfSU5ESVJFQ1RfSk9CXCIpWzBdO1xyXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXHJcbmludCBEQk8gPSBwcm9wZXJ0aWVzWydpc2NoZW1hLmRiby5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuXHJcbmRlZiBPTlNJVEVfVEVDSF9SRVBPUlRfT0JKX1RZUEU9cHJvcGVydGllc1snaW9iai5vblNpdGVUZWNoUmVwb3J0J10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG5kZWYgT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfTkFNRT1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVRlY2hSZXBvcnQubmFtZS5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuZGVmIE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX1RFQ0hOSUNJQU5fUkVGPXByb3BlcnRpZXNbJ2lvYmoub25TaXRlVGVjaFJlcG9ydC50ZWNobmljaWFuUmVmLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG5kZWYgT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfU1VQUExJRVJfUkVGPXByb3BlcnRpZXNbJ2lvYmoub25TaXRlVGVjaFJlcG9ydC5zdXBwbGllclJlZi5pZCddID8gcHJvcGVydGllc1snaW9iai5vblNpdGVUZWNoUmVwb3J0LnN1cHBsaWVyUmVmLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKSA6IDMwNzNcclxuZGVmIE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX0pPQl9TVEFSVEVEPXByb3BlcnRpZXNbJ2lvYmoub25TaXRlVGVjaFJlcG9ydC5qb2JTdGFydGVkLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG5kZWYgT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfSk9CX0NPTVBMRVRFRD1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVRlY2hSZXBvcnQuam9iQ29tcGxldGVkLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG5kZWYgT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfVFJBQ0VfQUNUSU9OPXByb3BlcnRpZXNbJ2lvYmoub25TaXRlVGVjaFJlcG9ydC50cmFjZUFjdGlvbi5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuXHJcbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKVxyXG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTQyMjY1XCIpXHJcbmRlZiBpbmRUYXNrID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShpbmRpcmVjdFRhc2spXHJcbmluZFRhc2sgPSBpbmRUYXNrWzBdLnRvU3RyaW5nKClcclxuaW5kVGFzayA9IGluZFRhc2suc3Vic3RyaW5nKGluZFRhc2subGFzdEluZGV4T2YoJygnKSsxLGluZFRhc2subGFzdEluZGV4T2YoJyknKSlcclxuXHJcbmRlZiBpbmRUYXNrT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGluZFRhc2spXHJcbmxvZy5kZWJ1ZyBpbmRUYXNrT2JqZWN0XHJcbmRlZiBpbmRUYXNrU08gPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5kVGFza09iamVjdC5nZXRJZCgpLCBcIlNBUF9TRVJWSUNFX09SREVSXCIpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxyXG5kZWYgT25TaXRlVGVjaE9iamVjdHMgPSBuZXcgQXJyYXlMaXN0KCk7XHJcblxyXG5sb2cuZGVidWcgXCJTZXJ2aWNlIE9yZGVyOiBcIiArIGluZFRhc2tTT1swXS5nZXRWYWx1ZSgpXHJcblxyXG5kZWYgdXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEppcmFBdXRoZW50aWNhdGlvbkNvbnRleHQoKS5nZXRMb2dnZWRJblVzZXIoKVxyXG5cclxuTXV0YWJsZUlzc3VlIG1pID0gKE11dGFibGVJc3N1ZSkgaXNzdWU7XHJcbm1pLnNldEN1c3RvbUZpZWxkVmFsdWUoc2FwU2VydmljZU9yZGVyLCBpbmRUYXNrU09bMF0uZ2V0VmFsdWUoKSk7XHJcbkNvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKHVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xyXG5kZWYgb25TaXRlVGVjaHNGaWVsZCA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShwcm9wZXJ0aWVzWydjZi50ZWNobmljaWFuc09uc2l0ZSddLnRvU3RyaW5nKCkpWzBdO1xyXG5kZWYgb2JqZWN0cyA9IGlxbEZhY2FkZS5maW5kT2JqZWN0c0J5SVFMQW5kU2NoZW1hKE9QQUEsIFwib2JqZWN0VHlwZSA9IFRlY2huaWNpYW4gQU5EIFRFQ0hOSUNJQU5fUkVGLlRFQ0hfQUNDT1VOVCA9XFxcIlwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXJyZW50VXNlcikudG9TdHJpbmcoKSArIFwiXFxcIlwiKVxyXG5sb2cud2FybiBcImlxbDogXCIgKyBcIm9iamVjdFR5cGUgPSBUZWNobmljaWFuIEFORCBURUNITklDSUFOX1JFRi5URUNIX0FDQ09VTlQgPVxcXCJcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VycmVudFVzZXIpLnRvU3RyaW5nKCkgKyBcIlxcXCJcIlxyXG5cclxuaWYoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0a3RGcm9tTW9iaWxlKS50b1N0cmluZygpLmVxdWFscyhcIlRSQVZFTF9IT01FXCIpKXtcclxuICAgIGRlZiBpbmRUYXNrVmlzaWJpbGl0eSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihpbmRUYXNrT2JqZWN0LmdldElkKCksIFwiREVGQVVMVF9WSVNJQklMSVRZXCIpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxyXG5cdGRlZiB2aXNpYmlsaXR5S2V5ID0gbmV3IEFycmF5TGlzdCgpXHJcblx0dmlzaWJpbGl0eUtleS5hZGQob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKGluZFRhc2tWaXNpYmlsaXR5WzBdLmdldFZhbHVlKCkpKVxyXG4gICAgbWkuc2V0Q3VzdG9tRmllbGRWYWx1ZSh0a3RWaXNpYmlsaXR5LCB2aXNpYmlsaXR5S2V5KTtcclxuICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKHVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xyXG59XHJcblxyXG5pZihvYmplY3RzICYmIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGt0RnJvbU1vYmlsZSkudG9TdHJpbmcoKS5lcXVhbHMoXCJUUkFWRUxfSE9NRVwiKSl7XHJcbiAgICBsb2cuZGVidWcgb2JqZWN0c1swXVxyXG5cclxuICAgIC8qMDIuMTIuMjIqL1xyXG4gICAgZGVmIHNpdGVDRiA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1NJVEVcIilbMF07XHJcbiAgICBkZWYgc2l0ZSwgc2l0ZUtleSwgc2l0ZU9iamVjdCwgdmlzaWJpbGl0eSwgdmlzaWJpbGl0eUtleVxyXG4gICAgaWYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2l0ZUNGKSAhPSBudWxsKSB7XHJcbiAgICAgICAgc2l0ZSA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2l0ZUNGKS50b1N0cmluZygpXHJcbiAgICAgICAgc2l0ZUtleSA9IHNpdGUuc3Vic3RyaW5nKHNpdGUubGFzdEluZGV4T2YoJygnKSArIDEsIHNpdGUubGFzdEluZGV4T2YoJyknKSlcclxuICAgICAgICBzaXRlT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHNpdGVLZXkpXHJcbiAgICAgICAgdmlzaWJpbGl0eSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1RLVF9WSVNJQklMSVRZX0tFWVwiKVswXVxyXG4gICAgICAgIHZpc2liaWxpdHlLZXkgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHZpc2liaWxpdHkpWzBdLnRvU3RyaW5nKCkuc3Vic3RyaW5nKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodmlzaWJpbGl0eSlbMF0udG9TdHJpbmcoKS5sYXN0SW5kZXhPZignKCcpICsgMSwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh2aXNpYmlsaXR5KVswXS50b1N0cmluZygpLmxhc3RJbmRleE9mKCcpJykpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZpc2liaWxpdHkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9JTkRJUkVDVF9KT0JfVEtUX1ZJU0lCSUxJVFlcIilbMF1cclxuICAgICAgICBsb2cuZGVidWcgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh2aXNpYmlsaXR5KVxyXG4gICAgICAgIHZpc2liaWxpdHlLZXkgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHZpc2liaWxpdHkpWzBdLnRvU3RyaW5nKCkuc3Vic3RyaW5nKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodmlzaWJpbGl0eSlbMF0udG9TdHJpbmcoKS5sYXN0SW5kZXhPZignKCcpICsgMSwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh2aXNpYmlsaXR5KVswXS50b1N0cmluZygpLmxhc3RJbmRleE9mKCcpJykpXHJcbiAgICB9XHJcbiAgICBkZWYgdGltZVpvbmVcclxuICAgIGRlZiBjb21wYW55UmVmID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbih2aXNpYmlsaXR5S2V5KS5nZXRJZCgpLCBwcm9wZXJ0aWVzWydpb2JqLnZpc2liaWxpdHlLZXkuY29tcGFueVJlZiddLnRvU3RyaW5nKCkpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKTtcclxuICAgIGxvZy5pbmZvIFwiY29tcGFueVJlZjogXCIgKyBjb21wYW55UmVmXHJcbiAgICBkZWYgY29tcGFueVJlZklkID0gY29tcGFueVJlZlswXS5nZXRSZWZlcmVuY2VkT2JqZWN0QmVhbklkKClcclxuICAgIGxvZy5kZWJ1ZyBcImNvbXBhbnlSZWZJZDpcIiArIGNvbXBhbnlSZWZJZFxyXG4gICAgaWYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2l0ZUNGKSAhPSBudWxsICYmIG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihzaXRlT2JqZWN0LmdldElkKCksIFwiU0lURV9SRUZcIikpIHtcclxuICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihzaXRlT2JqZWN0LmdldElkKCksIFwiU0lURV9SRUZcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICAgICAgcyA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxyXG4gICAgICAgIHMgPSBzLnRvU3RyaW5nKClcclxuICAgICAgICBzS2V5ID0gcy5zdWJzdHJpbmcocy5sYXN0SW5kZXhPZignKCcpICsgMSwgcy5sYXN0SW5kZXhPZignKScpKVxyXG4gICAgICAgIGlmIChvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oc0tleS50b0ludGVnZXIoKSwgXCJUSU1FX1pPTkVcIikpIHtcclxuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oc0tleS50b0ludGVnZXIoKSwgXCJUSU1FX1pPTkVcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICAgICAgICAgIHRpbWVab25lID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpXHJcbiAgICAgICAgICAgIHRpbWVab25lID0gdGltZVpvbmVbMF0uZ2V0VmFsdWUoKVxyXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJUaW1lWm9uZSBkYSBTaXRlOiBcIiArIHRpbWVab25lXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wYW55UmVmSWQudG9JbnRlZ2VyKCksIFwiVElNRV9aT05FXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wYW55UmVmSWQudG9JbnRlZ2VyKCksIFwiVElNRV9aT05FXCIpLmNyZWF0ZU11dGFibGUoKVxyXG4gICAgICAgICAgICAgICAgdGltZVpvbmUgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcclxuICAgICAgICAgICAgICAgIHRpbWVab25lID0gdGltZVpvbmVbMF0uZ2V0VmFsdWUoKVxyXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiVGltZVpvbmUgZGEgQ29tcGFueTogXCIgKyB0aW1lWm9uZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBhbnlSZWZJZC50b0ludGVnZXIoKSwgXCJUSU1FX1pPTkVcIikpIHtcclxuICAgICAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcGFueVJlZklkLnRvSW50ZWdlcigpLCBcIlRJTUVfWk9ORVwiKS5jcmVhdGVNdXRhYmxlKClcclxuICAgICAgICAgICAgdGltZVpvbmUgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcclxuICAgICAgICAgICAgdGltZVpvbmUgPSB0aW1lWm9uZVswXS5nZXRWYWx1ZSgpXHJcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcIlRpbWVab25lIGRhIENvbXBhbnk6IFwiICsgdGltZVpvbmVcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoIXRpbWVab25lKSB7XHJcbiAgICAgICAgdGltZVpvbmUgPSBcIkV1cm9wZS9Sb21lXCJcclxuICAgIH1cclxuICAgIGxvZy5kZWJ1ZyBcInRpbWVab25lOiBcIiArIHRpbWVab25lXHJcbiAgICBkZWYgc3RhcnRlZEF0ID0gKFRpbWVzdGFtcCkgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShqb2JTdGFydClcclxuICAgIGRlZiBjb21wbGV0ZWRkQXQgPSAoVGltZXN0YW1wKSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGpvYkNvbXBsZXRlZClcclxuICAgIGRlZiBsb2NhbFRpbWVTdGFtcCA9IChuZXcgVGltZXN0YW1wKChuZXcgRGF0ZShzdGFydGVkQXQuZ2V0VGltZSgpIC0gVGltZVpvbmUuZ2V0RGVmYXVsdCgpLmdldFJhd09mZnNldCgpICsgVGltZVpvbmUuZ2V0VGltZVpvbmUodGltZVpvbmUudG9TdHJpbmcoKSkuZ2V0UmF3T2Zmc2V0KCkpKS50aW1lKSlcclxuICAgIGRlZiBsb2NhbERhdGUgPSBuZXcgRGF0ZShzdGFydGVkQXQuZ2V0VGltZSgpIC0gVGltZVpvbmUuZ2V0RGVmYXVsdCgpLmdldFJhd09mZnNldCgpICsgVGltZVpvbmUuZ2V0VGltZVpvbmUodGltZVpvbmUudG9TdHJpbmcoKSkuZ2V0UmF3T2Zmc2V0KCkpXHJcbiAgICBkZWYgZW5kTG9jYWxUaW1lU3RhbXAgPSAobmV3IFRpbWVzdGFtcCgobmV3IERhdGUoY29tcGxldGVkZEF0LmdldFRpbWUoKSAtIFRpbWVab25lLmdldERlZmF1bHQoKS5nZXRSYXdPZmZzZXQoKSArIFRpbWVab25lLmdldFRpbWVab25lKHRpbWVab25lLnRvU3RyaW5nKCkpLmdldFJhd09mZnNldCgpKSkudGltZSkpXHJcbiAgICBkZWYgZW5kTG9jYWxEYXRlID0gbmV3IERhdGUoY29tcGxldGVkZEF0LmdldFRpbWUoKSAtIFRpbWVab25lLmdldERlZmF1bHQoKS5nZXRSYXdPZmZzZXQoKSArIFRpbWVab25lLmdldFRpbWVab25lKHRpbWVab25lLnRvU3RyaW5nKCkpLmdldFJhd09mZnNldCgpKVxyXG4gICAgLyowMi4xMi4yMiovXHJcblxyXG4gICAgLy9leHRyYWN0IGluc2lnaHQga2V5IGFuZyBnZXQgb2JqZWN0XHJcbiAgICBkZWYgdGVjaD1vYmplY3RzWzBdLnRvU3RyaW5nKClcclxuICAgIGRlZiB0ZWNoS2V5ID0gdGVjaC5zdWJzdHJpbmcodGVjaC5sYXN0SW5kZXhPZignKCcpKzEsdGVjaC5sYXN0SW5kZXhPZignKScpKVxyXG4gICAgZGVmIHRlY2hOYW1lID0gdGVjaC5zdWJzdHJpbmcoMCx0ZWNoLmxhc3RJbmRleE9mKCcoJyktMSlcclxuICAgIGRlZiB0ZWNoT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHRlY2hLZXkpXHJcbiAgICBsb2cuaW5mbyBcInRlY2hLZXk6IFwiICsgdGVjaEtleVxyXG4gICAgbG9nLmluZm8gKFwidGVjaE5hbWU6IFwiICsgdGVjaE5hbWUpXHJcbiAgICBsb2cuaW5mbyAoXCJ0ZWNoT2JqZWN0OiBcIiArIHRlY2hPYmplY3QpXHJcblxyXG4gICAgZGVmIG9iamVjdFR5cGVPblNpdGVUZWNoUmVwb3J0ID0gb2JqZWN0VHlwZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUJlYW4oT05TSVRFX1RFQ0hfUkVQT1JUX09CSl9UWVBFKTtcclxuICAgIGRlZiBuZXdPYmplY3RCZWFuID0gb2JqZWN0VHlwZU9uU2l0ZVRlY2hSZXBvcnQuY3JlYXRlTXV0YWJsZU9iamVjdEJlYW4oKTtcclxuXHJcbiAgICBkZWYgb2JqZWN0QXR0cmlidXRlQmVhbnMgPSBuZXcgQXJyYXlMaXN0KCk7XHJcbiAgICBkZWYgbmFtZU9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfTkFNRSk7IFxyXG4gICAgbG9nLmRlYnVnIG5hbWVPYmplY3RUeXBlQXR0cmlidXRlQmVhblxyXG4gICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5LmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW5Gb3JPYmplY3QobmV3T2JqZWN0QmVhbiwgbmFtZU9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuLCB0ZWNoTmFtZSkpO1xyXG5cclxuXHRkZWYgYWN0aW9uT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihPTlNJVEVfVEVDSF9SRVBPUlRfQVRUUl9UUkFDRV9BQ1RJT04pOyBcclxuXHRvYmplY3RBdHRyaWJ1dGVCZWFucy5hZGQob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkuY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbkZvck9iamVjdChuZXdPYmplY3RCZWFuLCBhY3Rpb25PYmplY3RUeXBlQXR0cmlidXRlQmVhbiwgXCJJTkRJUkVDVF9KT0JcIikpO1xyXG5cclxuICAgIG5ld09iamVjdEJlYW4uc2V0T2JqZWN0QXR0cmlidXRlQmVhbnMob2JqZWN0QXR0cmlidXRlQmVhbnMpO1xyXG4gICAgLyogU3RvcmUgdGhlIG9iamVjdCBpbnRvIEluc2lnaHQuIFRoZSBuZXcgT2JqZWN0QmVhbiB3aWxsIGJlIHVwZGF0ZWQgd2l0aCBhbiB1bmlxdWUgSUQgKi9cclxuICAgIHRyeSB7XHJcbiAgICAgICAgbmV3T2JqZWN0QmVhbiA9IG9iamVjdEZhY2FkZS5zdG9yZU9iamVjdEJlYW4obmV3T2JqZWN0QmVhbik7XHJcbiAgICAgICAgbG9nLndhcm4oXCJuZXdPYmplY3RCZWFuOiBcIiArIG5ld09iamVjdEJlYW4pO1xyXG4gICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSkge1xyXG4gICAgICAgIGxvZy53YXJuKFwiQ291bGQgbm90IGNyZWF0ZSBpc3N1ZSBkdWUgdG8gdmFsaWRhdGlvbiBleGNlcHRpb246XCIgKyB2aWUuZ2V0TWVzc2FnZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiBVcGRhdGUgVEVDSE5JQ0lBTl9SRUYgb24gdGhlIG5ld09iamVjdCAqL1x0XHQgICAgICAgIFxyXG4gICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfVEVDSE5JQ0lBTl9SRUYpLmNyZWF0ZU11dGFibGUoKSAvL1RoZSBpZCBvZiB0aGUgYXR0cmlidXRlXHJcblxyXG4gICAgLyogQ3JlYXRlIHRoZSBuZXcgYXR0cmlidXRlIGJlYW4gYmFzZWQgb24gdGhlIHZhbHVlICovXHJcbiAgICBkZWYgbmV3T2JqZWN0QXR0cmlidXRlQmVhbiA9IG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5LmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW5Gb3JPYmplY3QobmV3T2JqZWN0QmVhbiwgb2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4sIHRlY2hLZXkpO1xyXG4gICAgLyogTG9hZCB0aGUgYXR0cmlidXRlIGJlYW4gKi9cclxuICAgIGRlZiBvYmplY3RBdHRyaWJ1dGVCZWFuID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG5ld09iamVjdEJlYW4uZ2V0SWQoKSwgdGVjaEtleSk7XHJcbiAgICBpZiAob2JqZWN0QXR0cmlidXRlQmVhbiAhPSBudWxsKSB7XHJcbiAgICAgICAgLyogSWYgYXR0cmlidXRlIGV4aXN0IHJldXNlIHRoZSBvbGQgaWQgZm9yIHRoZSBuZXcgYXR0cmlidXRlICovXHJcbiAgICAgICAgbmV3T2JqZWN0QXR0cmlidXRlQmVhbi5zZXRJZChvYmplY3RBdHRyaWJ1dGVCZWFuLmdldElkKCkpO1xyXG4gICAgfVxyXG4gICAgLyogU3RvcmUgdGhlIG9iamVjdCBhdHRyaWJ1dGUgaW50byBJbnNpZ2h0LiAqL1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBvYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdEZhY2FkZS5zdG9yZU9iamVjdEF0dHJpYnV0ZUJlYW4obmV3T2JqZWN0QXR0cmlidXRlQmVhbik7XHJcbiAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XHJcbiAgICAgICAgbG9nLndhcm4oXCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOlwiICsgdmllLmdldE1lc3NhZ2UoKSk7XHJcbiAgICB9ICBcclxuXHJcbiAgICAvKlVwZGF0ZSBKT0JfU1RBUlRFRCAtIEpPQl9DT01QTEVURUQgb24gdGhlIG5ldyBvYmplY3QqL1xyXG4gICAgZGVmIG9iaiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihuZXdPYmplY3RCZWFuLmdldElkKCkpO1xyXG4gICAgbG9nLmRlYnVnIG9ialxyXG4gICAgXHJcbiAgICBkZWYgSm9iU3RhcnRlZFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfSk9CX1NUQVJURUQpOyBcclxuICAgIGRlZiBKb2JDb21wbGV0ZWRUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX0pPQl9DT01QTEVURUQpOyBcclxuXHRkZWYgYWN0aW9uVHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihPTlNJVEVfVEVDSF9SRVBPUlRfQVRUUl9UUkFDRV9BQ1RJT04pOyBcclxuICAgICAgICBcclxuICAgIGxvZy5pbmZvIFwiYXR0cmliVHlwZTogXCIgKyBKb2JTdGFydGVkVHlwZUF0dHJpYnV0ZUJlYW4udG9TdHJpbmcoKVxyXG4gICAgZGVmIG5ld0F0dHJpYlMgPSBvYmouY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihKb2JTdGFydGVkVHlwZUF0dHJpYnV0ZUJlYW4pO1xyXG4gICAgZGVmIG5ld0F0dHJpYlZhbHVlUyA9IG5ld0F0dHJpYlMuY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBuZXdBdHRyaWJWYWx1ZVMuc2V0RGF0ZVZhbHVlKGxvY2FsRGF0ZSk7XHJcbiAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XHJcbiAgICAgICAgbG9nLndhcm4oXCJTRVRJTlNJR0hUVkFMVUU6IFVuYWJsZSB0byBzZXQgYXR0cmlidXRlIFwiICsgYXR0cmliVHlwZS50b1N0cmluZygpICsgXCIgdG8gXCIgKyBsb2NhbERhdGUudG9TdHJpbmcoKSArIFwiLiBFeGl0aW5nLlwiKTtcclxuICAgICAgICBsb2cud2FybihcIlNFVElOU0lHSFRWQUxVRTogXCIgKyB2aWUuZ2V0TWVzc2FnZSgpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBkZWYgYXR0cmliVmFsdWVzUyA9IG5ld0F0dHJpYlMuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpO1xyXG4gICAgYXR0cmliVmFsdWVzUy5hZGQobmV3QXR0cmliVmFsdWVTKTtcclxuICAgIG5ld0F0dHJpYlMuc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyhhdHRyaWJWYWx1ZXNTKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIG5ld0F0dHJpYlMgPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG5ld0F0dHJpYlMpO1xyXG4gICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSkge1xyXG4gICAgICAgIGxvZy53YXJuKFwiU0VUSU5TSUdIVFZBTFVFOiBVbmFibGUgdG8gc2F2ZSBjaGFuZ2VzLiBFeGl0aW5nLlwiKTtcclxuICAgICAgICBsb2cud2FybihcIlNFVElOU0lHSFRWQUxVRTogXCIgKyB2aWUuZ2V0TWVzc2FnZSgpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgbG9nLmluZm8gXCJhdHRyaWJUeXBlOiBcIiArIEpvYkNvbXBsZXRlZFR5cGVBdHRyaWJ1dGVCZWFuLnRvU3RyaW5nKClcclxuICAgIGRlZiBuZXdBdHRyaWJDID0gb2JqLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW4oSm9iQ29tcGxldGVkVHlwZUF0dHJpYnV0ZUJlYW4pO1xyXG4gICAgZGVmIG5ld0F0dHJpYlZhbHVlQyA9IG5ld0F0dHJpYkMuY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBuZXdBdHRyaWJWYWx1ZUMuc2V0RGF0ZVZhbHVlKGVuZExvY2FsRGF0ZSk7XHJcbiAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XHJcbiAgICAgICAgbG9nLndhcm4oXCJTRVRJTlNJR0hUVkFMVUU6IFVuYWJsZSB0byBzZXQgYXR0cmlidXRlIFwiICsgYXR0cmliVHlwZS50b1N0cmluZygpICsgXCIgdG8gXCIgKyBlbmRMb2NhbERhdGUudG9TdHJpbmcoKSArIFwiLiBFeGl0aW5nLlwiKTtcclxuICAgICAgICBsb2cud2FybihcIlNFVElOU0lHSFRWQUxVRTogXCIgKyB2aWUuZ2V0TWVzc2FnZSgpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBkZWYgYXR0cmliVmFsdWVzQyA9IG5ld0F0dHJpYkMuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpO1xyXG4gICAgYXR0cmliVmFsdWVzQy5hZGQobmV3QXR0cmliVmFsdWVDKTtcclxuICAgIG5ld0F0dHJpYkMuc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyhhdHRyaWJWYWx1ZXNDKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIG5ld0F0dHJpYkMgPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG5ld0F0dHJpYkMpO1xyXG4gICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSkge1xyXG4gICAgICAgIGxvZy53YXJuKFwiU0VUSU5TSUdIVFZBTFVFOiBVbmFibGUgdG8gc2F2ZSBjaGFuZ2VzLiBFeGl0aW5nLlwiKTtcclxuICAgICAgICBsb2cud2FybihcIlNFVElOU0lHSFRWQUxVRTogXCIgKyB2aWUuZ2V0TWVzc2FnZSgpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKiBVcGRhdGUgU1VQUExJRVJfUkVGIG9uIHRoZSBuZXdPYmplY3QgKi9cdFxyXG4gICAgLyogR2V0IFNVUFBMSUVSX1JFRiBmcm9tIFRlY2ggKi9cclxuICAgIGRlZiBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoT2JqZWN0LmdldElkKCksIChwcm9wZXJ0aWVzWydpb2JqLnRlY2hPbnNpdGUuc3VwcGxpZXJSZWYnXSA/IHByb3BlcnRpZXNbJ2lvYmoudGVjaE9uc2l0ZS5zdXBwbGllclJlZiddLnRvU3RyaW5nKCkgOiBcIlNVUFBMSUVSX1JFRlwiKSkuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICBkZWYgc3VwcFJlZiA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXHJcbiAgICBkZWYgc3VwcCA9IHN1cHBSZWYudG9TdHJpbmcoKVxyXG4gICAgbG9nLmluZm8gXCJzdXBwOiBcIiArIHN1cHBcclxuICAgIGRlZiBzdXBwUmVmSWQgPSBzdXBwLnN1YnN0cmluZyhzdXBwLmxhc3RJbmRleE9mKCcoJykrMSxzdXBwLmxhc3RJbmRleE9mKCcpJykpXHJcbiAgICBsb2cuaW5mbyBcInN1cHBSZWZJZDogXCIgKyBzdXBwUmVmSWRcclxuICAgIGRlZiBzdXBwUmVmS2V5ID0gcHJvcGVydGllc1snaXNjaGVtYS5hYSddLnRvU3RyaW5nKCkgKyBcIi1cIiArIHN1cHBSZWZJZFxyXG4gICAgbG9nLmluZm8gXCJzdXBwUmVmS2V5OiBcIiArIHN1cHBSZWZLZXlcclxuICAgIGRlZiBzdXBwUmVmT2JqID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEnXS50b1N0cmluZygpICsgXCItXCIgKyBzdXBwUmVmSWQpXHJcbiAgICBsb2cuaW5mbyBcInN1cHBSZWZPYmo6IFwiICsgc3VwcFJlZk9ialxyXG4gICAgXHJcbiAgICBkZWYgc3VwcExpc3QgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgIHN1cHBMaXN0LmFkZChzdXBwUmVmT2JqKVxyXG5cclxuICAgIG1pLnNldEN1c3RvbUZpZWxkVmFsdWUoaW50ZXJuYWxTdXBwbGllciwgc3VwcExpc3QpO1xyXG4gICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUodXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7XHJcbiAgICBcclxuICAgIGRlZiBzdXBwT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihPTlNJVEVfVEVDSF9SRVBPUlRfQVRUUl9TVVBQTElFUl9SRUYpLmNyZWF0ZU11dGFibGUoKSAvL1RoZSBpZCBvZiB0aGUgYXR0cmlidXRlXHJcblxyXG4gICAgLyogQ3JlYXRlIHRoZSBuZXcgYXR0cmlidXRlIGJlYW4gYmFzZWQgb24gdGhlIHZhbHVlICovXHJcbiAgICBuZXdPYmplY3RBdHRyaWJ1dGVCZWFuID0gb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkuY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbkZvck9iamVjdChuZXdPYmplY3RCZWFuLCBzdXBwT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4sIHN1cHBSZWZLZXkpO1xyXG4gICAgLyogTG9hZCB0aGUgYXR0cmlidXRlIGJlYW4gKi9cclxuICAgIG9iamVjdEF0dHJpYnV0ZUJlYW4gPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obmV3T2JqZWN0QmVhbi5nZXRJZCgpLCBzdXBwUmVmS2V5KTtcclxuICAgIGlmIChvYmplY3RBdHRyaWJ1dGVCZWFuICE9IG51bGwpIHtcclxuICAgICAgICAvKiBJZiBhdHRyaWJ1dGUgZXhpc3QgcmV1c2UgdGhlIG9sZCBpZCBmb3IgdGhlIG5ldyBhdHRyaWJ1dGUgKi9cclxuICAgICAgICBuZXdPYmplY3RBdHRyaWJ1dGVCZWFuLnNldElkKG9iamVjdEF0dHJpYnV0ZUJlYW4uZ2V0SWQoKSk7XHJcbiAgICB9XHJcbiAgICAvKiBTdG9yZSB0aGUgb2JqZWN0IGF0dHJpYnV0ZSBpbnRvIEluc2lnaHQuICovXHJcbiAgICB0cnkge1xyXG4gICAgICAgIG9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0RmFjYWRlLnN0b3JlT2JqZWN0QXR0cmlidXRlQmVhbihuZXdPYmplY3RBdHRyaWJ1dGVCZWFuKTtcclxuICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHtcclxuICAgICAgICBsb2cud2FybihcIkNvdWxkIG5vdCB1cGRhdGUgb2JqZWN0IGF0dHJpYnV0ZSBkdWUgdG8gdmFsaWRhdGlvbiBleGNlcHRpb246XCIgKyB2aWUuZ2V0TWVzc2FnZSgpKTtcclxuICAgIH0gIFxyXG5cclxuICAgIE9uU2l0ZVRlY2hPYmplY3RzLmFkZChuZXdPYmplY3RCZWFuKVxyXG5cclxuICAgIGxvZy5pbmZvIChcIk9uU2l0ZVRlY2hPYmplY3RzOiBcIiArIE9uU2l0ZVRlY2hPYmplY3RzKVxyXG4gICAgXHJcbiAgICBpZiAoIU9uU2l0ZVRlY2hPYmplY3RzLmlzRW1wdHkoKSkge1xyXG4gICAgICAgIG1pLnNldEN1c3RvbUZpZWxkVmFsdWUob25TaXRlVGVjaHNGaWVsZCwgT25TaXRlVGVjaE9iamVjdHMpO1xyXG4gICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKHVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xyXG5cclxuICAgICAgICBtaS5zZXRDdXN0b21GaWVsZFZhbHVlKG9uU2l0ZVRlY2hzVHJhY2VGaWVsZCwgT25TaXRlVGVjaE9iamVjdHMpO1xyXG4gICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKHVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIG1pLnNldEN1c3RvbUZpZWxkVmFsdWUob25TaXRlVGVjaHNXb3JrVHJhY2VGaWVsZCwgT25TaXRlVGVjaE9iamVjdHMpO1xyXG4gICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKHVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xyXG5cclxuICAgICAgICBtaS5zZXRDdXN0b21GaWVsZFZhbHVlKGpvYlN0YXJ0LCBsb2NhbFRpbWVTdGFtcCk7XHJcbiAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUodXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7XHJcblxyXG4gICAgICAgIG1pLnNldEN1c3RvbUZpZWxkVmFsdWUoam9iQ29tcGxldGVkLCBlbmRMb2NhbFRpbWVTdGFtcCk7XHJcbiAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUodXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7XHJcbiAgICB9ICBcclxufWVsc2V7XHJcbiAgICAvKlRpY2tldCBjcmVhdG8gZGEgYmFja29mZmljZSovXHJcbiAgICAvKkVzdHJhcnJlIENvbXBhbnkgZSBJbnRlcm5hbCBTdXBwbGllciBkYWwgT1BfSU5ESVJFQ1RfSk9CX1RLVF9WSVNJQklMSVRZKi9cclxuICAgIGxvZy5kZWJ1ZyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRrdFZpc2liaWxpdHkpXHJcbiAgICBkZWYgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0a3RWaXNpYmlsaXR5KVswXS5nZXRJZCgpLCBcIkNPTVBBTllfUkVGXCIpLmNyZWF0ZU11dGFibGUoKVxyXG4gICAgZGVmIGNvbXBhbnlSZWYgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKVxyXG5cclxuICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBhbnlSZWYsIFwiU1VQUExJRVJfUkVGXCIpLmNyZWF0ZU11dGFibGUoKVxyXG4gICAgZGVmIHN1cHBSZWZJZCA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKClcclxuICAgIGxvZy5pbmZvIFwic3VwcFJlZklkOiBcIiArIHN1cHBSZWZJZFxyXG4gICAgZGVmIHN1cHBSZWZLZXkgPSBwcm9wZXJ0aWVzWydpc2NoZW1hLmRibyddLnRvU3RyaW5nKCkgKyBcIi1cIiArIHN1cHBSZWZJZFxyXG5cclxuICAgIG9iamVjdHMgPSBpcWxGYWNhZGUuZmluZE9iamVjdHNCeUlRTEFuZFNjaGVtYShPUEFBLCBcIm9iamVjdFR5cGUgPSBTdXBwbGllciBBTkQgU1VQUExJRVJfUkVGID1cXFwiXCIgKyBzdXBwUmVmS2V5ICsgXCJcXFwiXCIpXHJcbiAgICBsb2cud2FybiBcImlxbDogXCIgKyBcIm9iamVjdFR5cGUgPSBTdXBwbGllciBBTkQgU1VQUExJRVJfUkVGID1cXFwiXCIgKyBzdXBwUmVmS2V5ICsgXCJcXFwiXCJcclxuXHJcbiAgICBpZihvYmplY3RzKXtcclxuICAgICAgICBsb2cuZGVidWcgb2JqZWN0c1swXVxyXG5cclxuICAgICAgICBkZWYgc3VwcExpc3QgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgICAgICBzdXBwTGlzdC5hZGQob2JqZWN0c1swXSlcclxuXHJcbiAgICAgICAgbWkuc2V0Q3VzdG9tRmllbGRWYWx1ZShpbnRlcm5hbFN1cHBsaWVyLCBzdXBwTGlzdCk7XHJcbiAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUodXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7XHJcbiAgICB9IFxyXG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
            </function>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">23ba69ed-2399-4e0c-8fe4-a9c26c55b908</arg>
              <arg name="FIELD_NOTES">YCFgUG9wb2xhdGUgT1BfSU5URVJOQUxfVEVDSE5JQ0lBTlMgZnJvbSBpc3N1ZSdzIE9QX0NVUlJFTlRfVVNFUg==</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvcjtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZTtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5NdXRhYmxlSXNzdWU7XHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuZXZlbnQudHlwZS5FdmVudERpc3BhdGNoT3B0aW9uO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlcjtcclxuaW1wb3J0IGNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuc2VydmljZXMubW9kZWwuT2JqZWN0QmVhbjtcclxuaW1wb3J0IGNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZTtcclxuaW1wb3J0IGNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLklRTEZhY2FkZTtcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXHJcblxyXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcclxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxyXG5TdHJpbmcgcGF0aERpclByb3BlcnRpZXMgPSBTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpXHJcbmxvZy5kZWJ1ZyBcIlBlcmNvcnNvIHByb3BlcnRpZXM6ICR7cGF0aERpclByb3BlcnRpZXN9XCJcclxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFwiJHtwYXRoRGlyUHJvcGVydGllc30vb3Bwcm9qZWN0LnByb3BlcnRpZXNcIilcclxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcclxuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXHJcbn1cclxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xyXG5DbGFzczxPYmplY3RGYWNhZGU+IG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKVxyXG5kZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcclxuXHJcbi8qIEdldCBJUUwgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXHJcbkNsYXNzPElRTEZhY2FkZT4gaXFsRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuSVFMRmFjYWRlXCIpO1xyXG5kZWYgaXFsRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKGlxbEZhY2FkZUNsYXNzKTtcclxuXHJcbi8vIGRlYnVnZ2luZ1xyXG4vL0lzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKVxyXG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTIyNjE2M1wiKVxyXG5cclxuaW50IE9QQUEgPSBwcm9wZXJ0aWVzWydpc2NoZW1hLmFhLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG5sb2cuZGVidWcgXCJTY2hlbWFzIGZvdW5kOiBPUEFBPSR7T1BBQX0vXCJcclxuXHJcbmRlZiBjdXJyZW50T1BVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfQ1VSUkVOVF9VU0VSXCIpWzBdXHJcbmRlZiBpbnRlcm5hbFRlY2ggPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9JTlRFUk5BTF9URUNITklDSUFOU1wiKVswXVxyXG5cclxubG9nLmRlYnVnIFwiY3VycmVudE9QVXNlcjogJHtjdXJyZW50T1BVc2VyfVwiXHJcbmxvZy5kZWJ1ZyBcImludGVybmFsVGVjaDogJHtpbnRlcm5hbFRlY2h9XCJcclxuXHJcblN0cmluZyBjdXJyZW50T1BVc2VyVmFsdWUgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1cnJlbnRPUFVzZXIpXHJcbmxvZy5kZWJ1ZyBcImN1cnJlbnRPUFVzZXJWYWx1ZTogJHtjdXJyZW50T1BVc2VyVmFsdWV9XCJcclxuaWYgKGN1cnJlbnRPUFVzZXJWYWx1ZSA9PSBudWxsKSB7XHJcbiAgICBsb2cuZXJyb3IgXCI9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVwiXHJcbiAgICBsb2cuZXJyb3IgXCJObyBkYXRhIGZvdW5kIGZvciAnJHtjdXJyZW50T1BVc2VyfScgb24gaXNzdWUgJyR7aXNzdWV9J1wiXHJcbiAgICBsb2cuZXJyb3IgXCI9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVwiXHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbi8vIC0tLSBHZXN0aW9uZSBPUF9JTlRFUk5BTF9URUNITklDSUFOUyA6IHJlY3VwZXJvIGwnb2dnZXR0byBkZWwgdGVjaG5pY2lhbiBhIHBhcnRpcmUgZGEgT1BfQ1VSUkVOVF9VU0VSIHBlciBwb3BvbGFyZSBpbCBjYW1wb1xyXG5sb2cuaW5mbyBcIk1hbmFnaW5nICR7aW50ZXJuYWxUZWNofSA6IHVwZGF0aW5nIGl0IGZyb20gJHtjdXJyZW50T1BVc2VyfSwgcmV0cmlldmluZyBpdCB3aXRoIGZvbGxvd2luZyBJUUwuLi5cIlxyXG5maW5hbCBTdHJpbmcgSVFMX0ZJTkRfT0JKID0gXCJvYmplY3RUeXBlID0gVGVjaG5pY2lhbiBBTkQgVEVDSE5JQ0lBTl9SRUYuVEVDSF9BQ0NPVU5UID0gXFxcIiR7Y3VycmVudE9QVXNlclZhbHVlfVxcXCJcIlxyXG5sb2cuaW5mbyBcIklRTDogJHtJUUxfRklORF9PQkp9XCJcclxuTGlzdDxPYmplY3RCZWFuPiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoT1BBQSwgSVFMX0ZJTkRfT0JKKVxyXG5sb2cuaW5mbyBcIkZvdW5kIGFycmF5IG9mIHRlY2huaWNpYW5zOiAke29iamVjdHN9XCJcclxuaWYgKG9iamVjdHMgIT0gbnVsbCAmJiAhb2JqZWN0cy5pc0VtcHR5KCkpe1xyXG4gICAgZGVmIG9iakFycmF5ID0gbmV3IEFycmF5TGlzdCgpXHJcblxyXG4gICAgT2JqZWN0QmVhbiBmaXJzdE9iaiA9IG9iamVjdHNbMF07XHJcbiAgICBsb2cuZGVidWcgXCJHZXR0aW5nIGZpcnN0IHRlY2huaWNpYW4gZm91bmQ6ICR7Zmlyc3RPYmp9IChpZDogJHtmaXJzdE9iai5pZH0pXCJcclxuICAgIGRlZiBvYmogPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oZmlyc3RPYmouaWQpXHJcbiAgICBvYmpBcnJheS5hZGQob2JqKVxyXG5cclxuICAgIE11dGFibGVJc3N1ZSBtaSA9IChNdXRhYmxlSXNzdWUpIGlzc3VlO1xyXG4gICAgZGVmIHVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcclxuICAgIG1pLnNldEN1c3RvbUZpZWxkVmFsdWUoaW50ZXJuYWxUZWNoLCBvYmpBcnJheSk7XHJcbiAgICBsb2cuZGVidWcgXCJVcGRhdGluZyBpc3N1ZSAke2lzc3VlfSB3aXRoICR7aW50ZXJuYWxUZWNofSA9ICR7b2JqfVwiXHJcbiAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZSh1c2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTtcclxufSBlbHNlIHtcclxuICAgIGxvZy5lcnJvciBcIj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XCJcclxuICAgIGxvZy5lcnJvciBcIk5vIHRlY2huaWNpYW5zIGZvdW5kIGZvciAnJHtjdXJyZW50T1BVc2VyVmFsdWV9JywgdGhlIGN1c3RvbWZpZWxkICR7aW50ZXJuYWxUZWNofSB3b250IGJlIHVwZGF0ZWRcIlxyXG4gICAgbG9nLmVycm9yIFwiPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cIlxyXG59Iiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
            </function>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">c6841979-f503-445c-a9d1-cfe22f4fcced</arg>
              <arg name="FIELD_ACTION">31 Assign to Technician</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.FasttrackTransition</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.FasttrackTransition</arg>
              <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLnVzZXIuQXBwbGljYXRpb25Vc2VyXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5jb21wb25lbnQuQ29tcG9uZW50QWNjZXNzb3JcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXHJcblxyXG5sb2cuc2V0TGV2ZWwob3JnLmFwYWNoZS5sb2c0ai5MZXZlbC5ERUJVRylcclxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxyXG5TdHJpbmcgcGF0aERpclByb3BlcnRpZXMgPSBTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpXHJcbmxvZy5kZWJ1ZyBcIlBlcmNvcnNvIHByb3BlcnRpZXM6ICR7cGF0aERpclByb3BlcnRpZXN9XCJcclxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFwiJHtwYXRoRGlyUHJvcGVydGllc30vb3Bwcm9qZWN0LnByb3BlcnRpZXNcIilcclxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcclxuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXHJcbn1cclxuXHJcbi8vIERlYnVnZ2luZyBwdXJwb3Nlc1xyXG4vL0lzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKVxyXG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTIyNjE2M1wiKVxyXG5cclxuLy8gLS0tIFJldHJpZXZlIEN1c3RvbWZpZWxkcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuZGVmIGdyb3VwTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEdyb3VwTWFuYWdlcigpXHJcbmRlZiB1c2VyTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldFVzZXJNYW5hZ2VyKClcclxuZGVmIGN1cnJlbnRPUFVzZXJDUyA9ICBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9DVVJSRU5UX1VTRVJcIilbMF1cclxuZGVmIHRrdEZyb21Nb2JpbGUgPSAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEtUX0ZST01fTU9CSUxFXCIpWzBdXHJcblxyXG4vLyAtLS0gUmV0cmlldmUgdmFsdWVzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5maW5hbCBTdHJpbmcgY3VycmVudE9QVXNyVmFsdWUgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1cnJlbnRPUFVzZXJDUylcclxuZmluYWwgU3RyaW5nIHRrdEZyb21Nb2JpbGVWYWx1ZSA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGt0RnJvbU1vYmlsZSlcclxubG9nLmRlYnVnIFwiY3VycmVudFVzclZhbHVlIDogJHtjdXJyZW50T1BVc3JWYWx1ZX1cIlxyXG5sb2cuZGVidWcgXCJ0a3RGcm9tTW9iaWxlVmFsdWUgOiAke3RrdEZyb21Nb2JpbGVWYWx1ZX1cIlxyXG5cclxuZmluYWwgU3RyaW5nIHNlcnZpY2VUZWNoID0gXCJPUFJPTEVfQUFfU0VSVklDRVRFQ0hcIlxyXG5BcHBsaWNhdGlvblVzZXIgY3VycmVudE9QVXNlciA9IHVzZXJNYW5hZ2VyLmdldFVzZXJCeU5hbWUoY3VycmVudE9QVXNyVmFsdWUpXHJcblxyXG5maW5hbCBib29sZWFuIGlzTm90VHJhdmVsSG9tZSA9ICFcIlRSQVZFTF9IT01FXCIuZXF1YWxzKHRrdEZyb21Nb2JpbGVWYWx1ZSlcclxuZmluYWwgYm9vbGVhbiBpc0N1cnJlbnRPUFVzZXJJblNlcnZpY2V0ZWNoR3JvdXAgPSBjdXJyZW50T1BVc2VyICE9IG51bGwgJiYgZ3JvdXBNYW5hZ2VyLmdldFVzZXJzSW5Hcm91cChzZXJ2aWNlVGVjaCkuY29udGFpbnMoY3VycmVudE9QVXNlcilcclxuZmluYWwgYm9vbGVhbiBwcm9jZWVkVG9OZXh0ID0gaXNOb3RUcmF2ZWxIb21lICYmIGlzQ3VycmVudE9QVXNlckluU2VydmljZXRlY2hHcm91cFxyXG5sb2cuZGVidWcgXCJDb25kaXRpb24gcmVzb2x2ZWQgYXMgJHtwcm9jZWVkVG9OZXh0fTogKGlzTm90VHJhdmVsSG9tZTogJHtpc05vdFRyYXZlbEhvbWV9ICYmIGlzQ3VycmVudE9QVXNlckluU2VydmljZXRlY2hHcm91cDogJHtpc0N1cnJlbnRPUFVzZXJJblNlcnZpY2V0ZWNoR3JvdXB9KVwiXHJcbnJldHVybiBwcm9jZWVkVG9OZXh0Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_TRANSITION_OPTIONS">FIELD_SKIP_CONDITIONS|||FIELD_SKIP_PERMISSIONS|||FIELD_SKIP_VALIDATORS</arg>
              <arg name="FIELD_ADDITIONAL_SCRIPT"></arg>
              <arg name="events"></arg>
            </function>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">39101844-24ad-46de-9116-8f7bd9de5e9f</arg>
              <arg name="FIELD_ACTION">11 Stop Working</arg>
              <arg name="FIELD_NOTES">YCFg</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.FasttrackTransition</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.FasttrackTransition</arg>
              <arg name="FIELD_CONDITION">YCFgeyJzY3JpcHQiOiJkZWYgb3BUa3RGcm9tTW9iaWxlVmFsdWUgPSBjZlZhbHVlc1snT1BfVEtUX0ZST01fTU9CSUxFJ10/LnZhbHVlXHJcbmxvZy5kZWJ1ZyBcIk9QX1RLVF9GUk9NX01PQklMRSA9ICR7b3BUa3RGcm9tTW9iaWxlVmFsdWV9XCJcclxuXHJcbnJldHVybiBvcFRrdEZyb21Nb2JpbGVWYWx1ZSA9PSAnVFJBVkVMX0hPTUUnIiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
              <arg name="FIELD_TRANSITION_OPTIONS">FIELD_SKIP_CONDITIONS|||FIELD_SKIP_PERMISSIONS</arg>
              <arg name="events"></arg>
              <arg name="FIELD_ADDITIONAL_SCRIPT"></arg>
            </function>
            <function type="class">
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="maxAllowed-integerValue"></arg>
              <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="uuid">63e942dd-71be-4dae-9846-2b4863cbd27e</arg>
              <arg name="field">customfield_23237</arg>
              <arg name="scopeType">SAME</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.33.0</arg>
              <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
              <arg name="scopeSource-jql"></arg>
            </function>
            <function type="class">
              <arg name="conditionList">3</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.33.0</arg>
              <arg name="comparisonType">1</arg>
              <arg name="precondition">true</arg>
              <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
              <arg name="preconditionNegateResult-booleanValue"></arg>
              <arg name="uuid">f2e432c3-7408-4cdb-8165-35b70273e3a2</arg>
              <arg name="fieldValue">TRAVEL_HOME</arg>
              <arg name="preconditionMode-textValue">DISCARD</arg>
              <arg name="fieldsList">customfield_23933</arg>
            </function>
            <function type="class">
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="append.value"></arg>
              <arg name="maxAllowed-integerValue"></arg>
              <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="field.value">%%CURRENT_DATETIME%%</arg>
              <arg name="uuid">fdd23588-3270-4566-a5a5-053895638c08</arg>
              <arg name="field.name">customfield_22628</arg>
              <arg name="scopeType">SAME</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.33.0</arg>
              <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
              <arg name="scopeSource-jql"></arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
  </initial-actions>
  <global-actions>
    <action id="51" name="Rejected">
      <meta name="jira.description"></meta>
      <meta name="jira.fieldscreen.id"></meta>
      <results>
        <unconditional-result old-status="null" status="null" step="5">
          <post-functions>
            <function type="class">
              <arg name="FIELD_FUNCTION_ID">6f1f7ccc-7fa5-4172-a401-dfe2a3b8f28a</arg>
              <arg name="FIELD_NOTES">YCFgIFVwZGF0ZSBKT0JfQ09NUExFVEVEIG9uIElORElSRUNUIFRBU0sgJiYgVXBkYXRlIFNPIA==</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XHJcbmltcG9ydCBncm9vdnkuanNvbi5TdHJlYW1pbmdKc29uQnVpbGRlcjtcclxuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxyXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XHJcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5XHJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXHJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxyXG5pbXBvcnQgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQgXHJcbmltcG9ydCBqYXZhLnV0aWwuRGF0ZVxyXG5pbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5ldmVudC50eXBlLkV2ZW50RGlzcGF0Y2hPcHRpb25cclxuXHJcblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcclxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcclxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcclxuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXHJcbn1cclxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcclxuXHJcbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcclxuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xyXG5cclxuZGVmIHNhcFNOID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1NBUF9TRVJWSUNFX05PVElGSUNBVElPTlwiKVswXVxyXG5kZWYgcmVxdWVzdE1ldGhvZFxyXG5kZWYgYmFzZVVSTFxyXG5cclxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xyXG5DbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7IFxyXG5kZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcclxuICBcclxuLyogR2V0IEluc2lnaHQgT2JqZWN0IFR5cGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXHJcbkNsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpOyBcclxuZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcclxuICBcclxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cclxuQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7IFxyXG5kZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xyXG4gIFxyXG5DbGFzcyBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuc2VydmljZXMubW9kZWwuZmFjdG9yeS5PYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeVwiKTsgXHJcbmRlZiBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzKTtcclxuQ2xhc3MgaXFsRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuSVFMRmFjYWRlXCIpOyBcclxuZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XHJcblxyXG5Jc3N1ZUluZGV4aW5nU2VydmljZSBpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSlcclxuLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy01OTUxNFwiKVxyXG5cclxuZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfQ1VSUkVOVF9VU0VSXCIpWzBdXHJcbmRlZiBvblNpdGVUZWNoc1RyYWNlRmllbGQgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9URUNITklDSUFOX0FDVElWSVRJRVNfVFJBQ0VcIilbMF07XHJcbmRlZiBvblNpdGVUZWNoc1RyYXZlbEZpZWxkID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEVDSE5JQ0lBTl9UUkFWRUxcIilbMF07XHJcbmRlZiB0a3RGcm9tTW9iaWxlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEtUX0ZST01fTU9CSUxFXCIpWzBdXHJcbmRlZiB0a3RKb2JTdGFydGVkID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfSU5ESVJFQ1RfSk9CX1NUQVJURURcIilbMF1cclxuZGVmIHRrdEpvYkNvbXBsZXRlZCA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0lORElSRUNUX0pPQl9DT01QTEVURURcIilbMF1cclxuZGVmIHVzZXJMYW5ndWFnZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0NVUlJFTlRVU0VSX0xBTkdVQUdFXCIpXHJcbmRlZiBkb2NMYW5ndWFnZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0RPQ19HRU5FUkFUSU9OX0xBTkdVQUdFXCIpXHJcblxyXG5kZWYgT25TaXRlVGVjaE9iamVjdHMgPSBuZXcgQXJyYXlMaXN0KCk7XHJcbmludCBPUEFBID0gcHJvcGVydGllc1snaXNjaGVtYS5hYS5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuaW50IERCTyA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuZGJvLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG5cclxuLyoyNS4xMS4yMiovXHJcbmRlZiBsb2NhbFRpbWVTdGFtcFxyXG5kZWYgbG9jYWxEYXRlXHJcbi8qMDMuMTAuMjMqL1xyXG5kZWYgREFURVRJTUVfT0ZGU0VUID0gcHJvcGVydGllc1snd2YudHIuZGF0ZXRpbWV3aXRob2Zmc2V0J10udG9TdHJpbmcoKVxyXG5sb2cuZGVidWcgXCJEQVRFVElNRV9PRkZTRVQ6IFwiICsgREFURVRJTUVfT0ZGU0VUXHJcbmlmIChEQVRFVElNRV9PRkZTRVQgIT0gbnVsbCAmJiBEQVRFVElNRV9PRkZTRVQgIT0gJ251bGwnKXtcclxuXHJcbmRlZiBzaXRlQ0YgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9TSVRFXCIpWzBdO1xyXG5kZWYgc2l0ZSwgc2l0ZUtleSwgc2l0ZU9iamVjdCwgdmlzaWJpbGl0eSwgdmlzaWJpbGl0eUtleVxyXG5pZiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzaXRlQ0YpICE9IG51bGwpIHtcclxuICAgIHNpdGUgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNpdGVDRikudG9TdHJpbmcoKVxyXG4gICAgc2l0ZUtleSA9IHNpdGUuc3Vic3RyaW5nKHNpdGUubGFzdEluZGV4T2YoJygnKSArIDEsIHNpdGUubGFzdEluZGV4T2YoJyknKSlcclxuICAgIHNpdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oc2l0ZUtleSlcclxuICAgIHZpc2liaWxpdHkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9US1RfVklTSUJJTElUWV9LRVlcIilbMF1cclxuICAgIHZpc2liaWxpdHlLZXkgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHZpc2liaWxpdHkpWzBdLnRvU3RyaW5nKCkuc3Vic3RyaW5nKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodmlzaWJpbGl0eSlbMF0udG9TdHJpbmcoKS5sYXN0SW5kZXhPZignKCcpICsgMSwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh2aXNpYmlsaXR5KVswXS50b1N0cmluZygpLmxhc3RJbmRleE9mKCcpJykpXHJcbn0gZWxzZSB7XHJcbiAgICB2aXNpYmlsaXR5ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfSU5ESVJFQ1RfSk9CX1RLVF9WSVNJQklMSVRZXCIpWzBdXHJcbiAgICB2aXNpYmlsaXR5S2V5ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh2aXNpYmlsaXR5KVswXS50b1N0cmluZygpLnN1YnN0cmluZyhpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHZpc2liaWxpdHkpWzBdLnRvU3RyaW5nKCkubGFzdEluZGV4T2YoJygnKSArIDEsIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodmlzaWJpbGl0eSlbMF0udG9TdHJpbmcoKS5sYXN0SW5kZXhPZignKScpKVxyXG59XHJcbmRlZiB0aW1lWm9uZVxyXG5kZWYgY29tcGFueVJlZiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4odmlzaWJpbGl0eUtleSkuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai52aXNpYmlsaXR5S2V5LmNvbXBhbnlSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7XHJcbmxvZy5pbmZvIFwiY29tcGFueVJlZjogXCIgKyBjb21wYW55UmVmXHJcbmRlZiBjb21wYW55UmVmSWQgPSBjb21wYW55UmVmWzBdLmdldFJlZmVyZW5jZWRPYmplY3RCZWFuSWQoKVxyXG5sb2cuZGVidWcgXCJjb21wYW55UmVmSWQ6XCIgKyBjb21wYW55UmVmSWRcclxuaWYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2l0ZUNGKSAhPSBudWxsICYmIG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihzaXRlT2JqZWN0LmdldElkKCksIFwiU0lURV9SRUZcIikpIHtcclxuICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHNpdGVPYmplY3QuZ2V0SWQoKSwgXCJTSVRFX1JFRlwiKS5jcmVhdGVNdXRhYmxlKClcclxuICAgIHMgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcclxuICAgIHMgPSBzLnRvU3RyaW5nKClcclxuICAgIHNLZXkgPSBzLnN1YnN0cmluZyhzLmxhc3RJbmRleE9mKCcoJykgKyAxLCBzLmxhc3RJbmRleE9mKCcpJykpXHJcbiAgICBpZiAob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHNLZXkudG9JbnRlZ2VyKCksIFwiVElNRV9aT05FXCIpKSB7XHJcbiAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oc0tleS50b0ludGVnZXIoKSwgXCJUSU1FX1pPTkVcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICAgICAgdGltZVpvbmUgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcclxuICAgICAgICB0aW1lWm9uZSA9IHRpbWVab25lWzBdLmdldFZhbHVlKClcclxuICAgICAgICBsb2cuZGVidWcgXCJUaW1lWm9uZSBkYSBTaXRlOiBcIiArIHRpbWVab25lXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcGFueVJlZklkLnRvSW50ZWdlcigpLCBcIlRJTUVfWk9ORVwiKSkge1xyXG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wYW55UmVmSWQudG9JbnRlZ2VyKCksIFwiVElNRV9aT05FXCIpLmNyZWF0ZU11dGFibGUoKVxyXG4gICAgICAgICAgICB0aW1lWm9uZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxyXG4gICAgICAgICAgICB0aW1lWm9uZSA9IHRpbWVab25lWzBdLmdldFZhbHVlKClcclxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiVGltZVpvbmUgZGEgQ29tcGFueTogXCIgKyB0aW1lWm9uZVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSBlbHNlIHtcclxuICAgIGlmIChvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcGFueVJlZklkLnRvSW50ZWdlcigpLCBcIlRJTUVfWk9ORVwiKSkge1xyXG4gICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBhbnlSZWZJZC50b0ludGVnZXIoKSwgXCJUSU1FX1pPTkVcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICAgICAgdGltZVpvbmUgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcclxuICAgICAgICB0aW1lWm9uZSA9IHRpbWVab25lWzBdLmdldFZhbHVlKClcclxuICAgICAgICBsb2cuZGVidWcgXCJUaW1lWm9uZSBkYSBDb21wYW55OiBcIiArIHRpbWVab25lXHJcbiAgICB9XHJcbn1cclxuaWYgKCF0aW1lWm9uZSkge1xyXG4gICAgdGltZVpvbmUgPSBcIkV1cm9wZS9Sb21lXCJcclxufVxyXG5sb2cuZGVidWcgXCJ0aW1lWm9uZTogXCIgKyB0aW1lWm9uZVxyXG5sb2NhbFRpbWVTdGFtcCA9IChuZXcgVGltZXN0YW1wKChuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIFRpbWVab25lLmdldERlZmF1bHQoKS5nZXRSYXdPZmZzZXQoKSArIFRpbWVab25lLmdldFRpbWVab25lKHRpbWVab25lLnRvU3RyaW5nKCkpLmdldFJhd09mZnNldCgpKSkudGltZSkpLnRvU3RyaW5nKClcclxubG9jYWxEYXRlID0gbmV3IERhdGUobmV3IERhdGUoKS5nZXRUaW1lKCkgLSBUaW1lWm9uZS5nZXREZWZhdWx0KCkuZ2V0UmF3T2Zmc2V0KCkgKyBUaW1lWm9uZS5nZXRUaW1lWm9uZSh0aW1lWm9uZS50b1N0cmluZygpKS5nZXRSYXdPZmZzZXQoKSlcclxuXHJcbn1lbHNle1xyXG5cclxuICAgIGxvY2FsVGltZVN0YW1wID0gIChuZXcgVGltZXN0YW1wKChuZXcgRGF0ZSgpKS50aW1lKSkudG9TdHJpbmcoKVxyXG4gICAgbG9jYWxEYXRlID0gIG5ldyBEYXRlKClcclxuXHJcbn1cclxuXHJcbmxvZy5kZWJ1ZyBsb2NhbFRpbWVTdGFtcFxyXG5sb2cuZGVidWcgbG9jYWxEYXRlXHJcbi8qMjUuMTEuMjIqL1xyXG5cclxuLyogLS0tLS0tLS0tLS0tIERFRklORSBBQ1RJT04gVE8gQkUgVFJBQ0VEIEFORCBTRVQgVE8gQkUgRE9ORSAtLS0tLS0tLS0tLS0tICovXHJcbmRlZiBBQ1RJT04gPSBwcm9wZXJ0aWVzWyd3Zi50ci5pbmRpcmVjdFRhc2suYWN0aW9uJ10udG9TdHJpbmcoKVxyXG5kZWYgU0VUID0gcHJvcGVydGllc1snd2YudHIuZW5kSW5kaXJlY3RUYXNrLnNldCddLnRvU3RyaW5nKClcclxuXHJcbmRlZiBPTlNJVEVfVEVDSF9SRVBPUlRfT0JKX1RZUEU9cHJvcGVydGllc1snaW9iai5vblNpdGVUZWNoUmVwb3J0J10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG5kZWYgT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfTkFNRT1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVRlY2hSZXBvcnQubmFtZS5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuZGVmIE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX1RFQ0hOSUNJQU5fUkVGPXByb3BlcnRpZXNbJ2lvYmoub25TaXRlVGVjaFJlcG9ydC50ZWNobmljaWFuUmVmLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG5kZWYgT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfSk9CX0NPTVBMRVRFRD1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVRlY2hSZXBvcnQuam9iQ29tcGxldGVkLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG5kZWYgT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfSk9CX1NUQVJURUQ9cHJvcGVydGllc1snaW9iai5vblNpdGVUZWNoUmVwb3J0LmpvYlN0YXJ0ZWQuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXHJcbmRlZiBPTlNJVEVfVEVDSF9SRVBPUlRfQVRUUl9UUkFDRV9BQ1RJT049cHJvcGVydGllc1snaW9iai5vblNpdGVUZWNoUmVwb3J0LnRyYWNlQWN0aW9uLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG5cclxuZGVmIGRhdGVUb2RheSA9IG5ldyBTaW1wbGVEYXRlRm9ybWF0KFwiTS9kZC95eXl5XCIpLmZvcm1hdChsb2NhbERhdGUpIFxyXG5kZWYgbGFzdEFjdGl2aXR5LCBqb2JDb21wbGV0ZWRcclxuXHJcbmRlZiBsYW5nLCBkb2NMYW5nXHJcbmRvY0xhbmcgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGRvY0xhbmd1YWdlKVxyXG5pZihkb2NMYW5nPT1udWxsICYmIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodXNlckxhbmd1YWdlKS50b1N0cmluZygpIT1cIm51bGxcIil7XHJcbiAgICBsYW5nID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1c2VyTGFuZ3VhZ2UpXHJcbn1lbHNle1xyXG4gICAgaWYoZG9jTGFuZyE9bnVsbCl7XHJcbiAgICAgICAgZGVmIHJLZXkgPSBkb2NMYW5nLnRvU3RyaW5nKCkuc3Vic3RyaW5nKGRvY0xhbmcudG9TdHJpbmcoKS5sYXN0SW5kZXhPZignKCcpKzEsZG9jTGFuZy50b1N0cmluZygpLmxhc3RJbmRleE9mKCcpJykpXHJcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihyS2V5KS5nZXRJZCgpLCBcIklTT19DT0RFXCIpKXtcclxuICAgICAgICAgICAgZGVmIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihyS2V5KS5nZXRJZCgpLCBcIklTT19DT0RFXCIpLmNyZWF0ZU11dGFibGUoKVxyXG4gICAgICAgICAgICBsYW5nID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKVxyXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJsYW5nOiBcIiArIGxhbmdcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0gXHJcblxyXG5pZihpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRrdEZyb21Nb2JpbGUpID09IG51bGwgfHwgIWlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGt0RnJvbU1vYmlsZSkuZXF1YWxzKFwiVFJBVkVMX0hPTUVcIikpe1xyXG4gICAgZGVmIG9iamVjdHMgPSBpcWxGYWNhZGUuZmluZE9iamVjdHNCeUlRTEFuZFNjaGVtYShPUEFBLCBcIm9iamVjdFR5cGUgPSBUZWNobmljaWFuIEFORCBURUNITklDSUFOX1JFRi5URUNIX0FDQ09VTlQgPVxcXCJcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VycmVudFVzZXIpLnRvU3RyaW5nKCkgKyBcIlxcXCJcIilcclxuICAgIGxvZy53YXJuIFwiaXFsOiBcIiArIFwib2JqZWN0VHlwZSA9IFRlY2huaWNpYW4gQU5EIFRFQ0hOSUNJQU5fUkVGLlRFQ0hfQUNDT1VOVCA9XFxcIlwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXJyZW50VXNlcikudG9TdHJpbmcoKSArIFwiXFxcIlwiXHJcblxyXG4gICAgZm9yKHRlY2huaWNpYW4gaW4gb2JqZWN0cyl7XHJcbiAgICAgICAgZGVmIHRlY2g9dGVjaG5pY2lhbi50b1N0cmluZygpXHJcbiAgICAgICAgZGVmIHRlY2hLZXkgPSB0ZWNoLnN1YnN0cmluZyh0ZWNoLmxhc3RJbmRleE9mKCcoJykrMSx0ZWNoLmxhc3RJbmRleE9mKCcpJykpXHJcbiAgICAgICAgZGVmIHRlY2hOYW1lID0gdGVjaC5zdWJzdHJpbmcoMCx0ZWNoLmxhc3RJbmRleE9mKCcoJyktMSlcclxuICAgICAgICBkZWYgdGVjaE9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbih0ZWNoS2V5KVxyXG4gICAgICAgIGxvZy5pbmZvIFwidGVjaEtleTogXCIgKyB0ZWNoS2V5XHJcbiAgICAgICAgbG9nLmluZm8gKFwidGVjaE5hbWU6IFwiICsgdGVjaE5hbWUpXHJcbiAgICAgICAgbG9nLmluZm8gKFwidGVjaE9iamVjdDogXCIgKyB0ZWNoT2JqZWN0KVxyXG5cclxuICAgICAgICBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoT1BBQSwgXCJvYmplY3RUeXBlID0gT25TaXRlX1RlY2hfUmVwb3J0IEFORCBvYmplY3QgSEFWSU5HIGNvbm5lY3RlZFRpY2tldHMoa2V5PVwiICsgaXNzdWUua2V5ICsgXCIpIEFORCBURUNITklDSUFOX1JFRi5URUNITklDSUFOX1JFRi5URUNIX0FDQ09VTlQgPVxcXCJcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VycmVudFVzZXIpLnRvU3RyaW5nKCkgKyBcIlxcXCIgQU5EIEpPQl9TVEFSVEVEIElTIE5PVCBFTVBUWSBPUkRFUiBCWSBKT0JfU1RBUlRFRCBERVNDXCIpXHJcbiAgICAgICAgbG9nLndhcm4gXCJpcWw6IFwiICsgXCJvYmplY3RUeXBlID0gT25TaXRlX1RlY2hfUmVwb3J0IEFORCBvYmplY3QgSEFWSU5HIGNvbm5lY3RlZFRpY2tldHMoa2V5PVwiICsgaXNzdWUua2V5ICsgXCIpIEFORCBURUNITklDSUFOX1JFRi5URUNITklDSUFOX1JFRi5URUNIX0FDQ09VTlQgPVxcXCJcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VycmVudFVzZXIpLnRvU3RyaW5nKCkgKyBcIlxcXCIgQU5EIEpPQl9TVEFSVEVEIElTIE5PVCBFTVBUWSBPUkRFUiBCWSBKT0JfU1RBUlRFRCBERVNDXCJcclxuXHJcbiAgICAgICAgaWYob2JqZWN0cy5zaXplPT0wKXtcclxuICAgICAgICAgICAgLypQcmltYSBhdHRpdml0XHUwMGUwIGRlbGxhIGdpb3JuYXRhIC0tPiBKT0JfU1RBUlRFRCA9IHRpbWUgc3RhbXAgcmVhbGUqL1xyXG4gICAgICAgICAgICBsb2cuZGVidWcgXCJlcnJvcmUgLSBpbml6aW8gYXR0aXZpdFx1MDBlMCBub24gdHJvdmF0b1wiXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIC8qVVBEQVRFIEpPQl9DT01QTEVURUQgT04gU0VMRUNURUQgT0JKRUNUKi8gICAgICAgICAgXHJcbiAgICAgICAgICAgIGRlZiBvYmogPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4ob2JqZWN0c1swXS5nZXRJZCgpKTtcclxuICAgICAgICAgICAgYXR0cmliVHlwZSA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX0pPQl9DT01QTEVURUQpOyBcclxuICAgICAgICAgICAgbG9nLmluZm8gXCJhdHRyaWJUeXBlOiBcIiArIGF0dHJpYlR5cGUudG9TdHJpbmcoKVxyXG4gICAgICAgICAgICBuZXdBdHRyaWIgPSBvYmouY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihhdHRyaWJUeXBlKTtcclxuICAgICAgICAgICAgZGVmIG5ld0F0dHJpYlZhbHVlID0gbmV3QXR0cmliLmNyZWF0ZU9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbigpO1xyXG5cclxuICAgICAgICAgICAgam9iQ29tcGxldGVkID0gbG9jYWxEYXRlXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBuZXdBdHRyaWJWYWx1ZS5zZXREYXRlVmFsdWUoam9iQ29tcGxldGVkKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSkge1xyXG4gICAgICAgICAgICAgICAgbG9nLndhcm4oXCJTRVRJTlNJR0hUVkFMVUU6IFVuYWJsZSB0byBzZXQgYXR0cmlidXRlIFwiICsgYXR0cmliVHlwZS50b1N0cmluZygpICsgXCIgdG8gXCIgKyBqb2JDb21wbGV0ZWQudG9TdHJpbmcoKSArIFwiLiBFeGl0aW5nLlwiKTtcclxuICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiU0VUSU5TSUdIVFZBTFVFOiBcIiArIHZpZS5nZXRNZXNzYWdlKCkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGRlZiBhdHRyaWJWYWx1ZXMgPSBuZXdBdHRyaWIuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpO1xyXG4gICAgICAgICAgICBhdHRyaWJWYWx1ZXMuYWRkKG5ld0F0dHJpYlZhbHVlKTtcclxuICAgICAgICAgICAgbmV3QXR0cmliLnNldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoYXR0cmliVmFsdWVzKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBuZXdBdHRyaWIgPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG5ld0F0dHJpYik7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHtcclxuICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiU0VUSU5TSUdIVFZBTFVFOiBVbmFibGUgdG8gc2F2ZSBjaGFuZ2VzLiBFeGl0aW5nLlwiKTtcclxuICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiU0VUSU5TSUdIVFZBTFVFOiBcIiArIHZpZS5nZXRNZXNzYWdlKCkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGRlZiB1c2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXHJcbiAgICAgICAgICAgIE11dGFibGVJc3N1ZSBtaSA9IChNdXRhYmxlSXNzdWUpIGlzc3VlXHJcbiAgICAgICAgICAgIG1pLnNldEN1c3RvbUZpZWxkVmFsdWUodGt0Sm9iQ29tcGxldGVkLCBqb2JDb21wbGV0ZWQudG9UaW1lc3RhbXAoKSk7XHJcbiAgICAgICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKHVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuaXNzdWVJbmRleGluZ1NlcnZpY2UucmVJbmRleChpc3N1ZSlcclxuXHJcbi8qIFJFU1QgQVBJIHBlciBwdWxpemlhIGNhY2hlIGlzc3VlIGxpbmthdGEgKi9cclxucmVxdWVzdE1ldGhvZCA9IFwiR0VUXCI7XHJcbi8qU2NyaXB0IFZhcmlhYmxlcyovXHJcbi8vUGVyIHRlc3QgZGEgY29uc29sZVxyXG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTMyNTM1XCIpXHJcbmJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9hdXRvbWF0aW9uL2NsZWFyQ2FjaGUvdGlja2V0a2V5L1wiICsgaXNzdWUua2V5XHJcblVSTCB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXHJcbkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XHJcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcclxuY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XHJcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xyXG5jb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xyXG5jb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XHJcbmNvbm5lY3Rpb24uY29ubmVjdCgpO1xyXG5sb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXHJcbmlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XHJcbiAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXHJcbiAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXHJcbiAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXHJcbn1cclxuXHJcbnJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcclxuXHJcbmRlZiBib2R5X3JlcSA9IFtdXHJcblxyXG4vKiogU0VSVklDRSBPUkRFUiBDUkVBVElPTiAqKi9cclxuYm9keV9yZXEgPSBbXHJcbiAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleVxyXG5dIFxyXG5iYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS9hZnRlci9zYWxlcy9jcmVhdGUvb3IvdXBkYXRlL3NlcnZpY2Uvb3JkZXI/bGFuZ3VhZ2U9XCIrbGFuZ1xyXG5cclxubG9nLmRlYnVnIFwiYmFzZVVSTCBTTzogXCIgKyBiYXNlVVJMXHJcbmxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNPOiBcIiArIGJvZHlfcmVxXHJcbnVybCA9IG5ldyBVUkwoYmFzZVVSTClcclxuY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcclxuY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xyXG5jb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcclxuY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XHJcbmNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XHJcbmNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcclxuY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cclxuY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxyXG5sb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cclxuY29ubmVjdGlvbi5jb25uZWN0KCk7XHJcblxyXG5kZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXHJcbmRlZiBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxyXG5kZWYgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcclxuZGVmIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxyXG5cclxuaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAxXCIpICYmICFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcclxuICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcclxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcclxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcclxuXHJcbiAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XHJcbiAgICBsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXHJcblxyXG4gICAgZGVmIGpzb25TbHVycGVyID0gbmV3IEpzb25TbHVycGVyKClcclxuICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpXHJcbiAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxyXG4gICAgbG9nLmRlYnVnIFwibWVzc2FnZTogXCIgKyAganNvbl9vYmplY3QubWVzc2FnZVxyXG4gICAgbG9nLmRlYnVnIFwiZXJyb3JzOiBcIiArICBqc29uX29iamVjdC5lcnJvcnMudG9TdHJpbmcoKVxyXG4gICAgXHJcbiAgICBkZWYgcmVzdWx0XHJcbiAgICBpZiAoanNvbl9vYmplY3QubWVzc2FnZSE9bnVsbClcclxuICAgIHtcclxuICAgICAgICByZXN1bHQgPSBqc29uX29iamVjdC5tZXNzYWdlXHJcbiAgICB9XHJcbiAgICBpZihqc29uX29iamVjdC5lcnJvcnMgIT0gbnVsbCl7XHJcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnRvU3RyaW5nKCkgKyBqc29uX29iamVjdC5lcnJvcnMudG9TdHJpbmcoKVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXHJcbiAgICBlTGlzdEVycm9ycy5hZGQoXCJPUC1TQVAtU08tQ1JFQVRFXCIpXHJcbiAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIHJlc3VsdClcclxuICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXHJcbiAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXHJcblxyXG4gICAgb3V0cHV0LmFkZChlTGlzdClcclxuICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxyXG59ZWxzZXtcclxuICAgIGJvZHlfcmVxID0gW1xyXG4gICAgICAgIFwiaXNzdWVLZXlcIjogaXNzdWUua2V5LFxyXG4gICAgXSBcclxuXHJcbiAgICBiYXNlVVJMID0gXCJodHRwOi8vXCIgKyBwcm9wZXJ0aWVzWydhcGkuZW52J10udG9TdHJpbmcoKSArIFwiL29wL3Jlc3QvamlyYS9BQS9hZnRlci9zYWxlcy9jcmVhdGUvc2VydmljZS9vcmRlci9jb25maXJtYXRpb24/bGFuZ3VhZ2U9XCIrbGFuZ1xyXG4gICAgbG9nLmRlYnVnIFwiYm9keV9yZXEgU0M6IFwiICsgYm9keV9yZXFcclxuICAgIGxvZy5kZWJ1ZyBcImJhc2VVUkwgU0M6IFwiICsgYmFzZVVSTFxyXG4gICAgdXJsID0gbmV3IFVSTChiYXNlVVJMKVxyXG4gICAgY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcclxuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcclxuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xyXG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XHJcbiAgICBjb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xyXG4gICAgY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xyXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cclxuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cclxuICAgIGxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxyXG4gICAgY29ubmVjdGlvbi5jb25uZWN0KCk7XHJcblxyXG4gICAgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICBlTGlzdCA9IG5ldyBBcnJheUxpc3QoKVxyXG4gICAgZUxpc3RFcnJvcnMgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgIGVycm9yTXNncyA9IG5ldyBBcnJheUxpc3QoKVxyXG5cclxuICAgIGlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSAmJiAhY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XHJcbiAgICAgICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxyXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcclxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXHJcblxyXG4gICAgICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHRcclxuICAgICAgICBsb2cuZGVidWcgXCIoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHQ6IFwiICsgb3V0cHV0TXNnXHJcblxyXG4gICAgICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXHJcbiAgICAgICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcclxuICAgICAgICBhc3NlcnQganNvbl9vYmplY3QgaW5zdGFuY2VvZiBNYXAgIFxyXG4gICAgICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2UudG9TdHJpbmcoKS5yZXBsYWNlQWxsKFwiL1teYS16QS1aIF0vZ1wiLFwiXCIpLnJlcGxhY2VBbGwoJ1wiJywnJylcclxuICAgICAgICBsb2cuZGVidWcgXCJlcnJvcnM6IFwiICsgIGpzb25fb2JqZWN0LmVycm9ycy50b1N0cmluZygpXHJcblxyXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcclxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJPUC1TQVAtU0MtQ1JFQVRFXCIpXHJcbiAgICAgICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyBqc29uX29iamVjdC5lcnJvcnNbMF0pXHJcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcclxuICAgICAgICBlTGlzdC5hZGQoZUxpc3RFcnJvcnMpXHJcblxyXG4gICAgICAgIG91dHB1dC5hZGQoZUxpc3QpXHJcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXHJcbiAgICB9XHJcbn0iLCJzY3JpcHRQYXRoIjpudWxsLCJwYXJhbWV0ZXJzIjp7fX0=</arg>
              <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
  </global-actions>
  <common-actions>
    <action id="11" name="Stop Working" view="fieldscreen">
      <meta name="jira.description"></meta>
      <meta name="jira.fieldscreen.id">19908</meta>
      <validators>
        <validator name="" type="class">
          <arg name="FIELD_FUNCTION_ID">50ecadd2-211d-42c2-a150-5098f76a0bd8</arg>
          <arg name="FIELD_NOTES">YCFgVXBkYXRlIEpPQl9DT01QTEVURUQgb24gSU5ESVJFQ1QgVEFTSyAmJiBVcGRhdGUgU08=</arg>
          <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XHJcbmltcG9ydCBncm9vdnkuanNvbi5TdHJlYW1pbmdKc29uQnVpbGRlcjtcclxuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxyXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XHJcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5XHJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXHJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxyXG5pbXBvcnQgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQgXHJcbmltcG9ydCBqYXZhLnV0aWwuRGF0ZVxyXG5pbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5ldmVudC50eXBlLkV2ZW50RGlzcGF0Y2hPcHRpb25cclxuXHJcblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcclxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcclxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcclxuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXHJcbn1cclxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcclxuXHJcbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcclxuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xyXG5cclxuZGVmIHNhcFNOID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1NBUF9TRVJWSUNFX05PVElGSUNBVElPTlwiKVswXVxyXG5kZWYgcmVxdWVzdE1ldGhvZFxyXG5kZWYgYmFzZVVSTFxyXG5cclxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xyXG5DbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7IFxyXG5kZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcclxuICBcclxuLyogR2V0IEluc2lnaHQgT2JqZWN0IFR5cGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXHJcbkNsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpOyBcclxuZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcclxuICBcclxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cclxuQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7IFxyXG5kZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xyXG4gIFxyXG5DbGFzcyBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuc2VydmljZXMubW9kZWwuZmFjdG9yeS5PYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeVwiKTsgXHJcbmRlZiBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzKTtcclxuQ2xhc3MgaXFsRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuSVFMRmFjYWRlXCIpOyBcclxuZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XHJcblxyXG5Jc3N1ZUluZGV4aW5nU2VydmljZSBpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSlcclxuLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy01OTUxNFwiKVxyXG5cclxuZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfQ1VSUkVOVF9VU0VSXCIpWzBdXHJcbmRlZiBvblNpdGVUZWNoc1RyYWNlRmllbGQgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9URUNITklDSUFOX0FDVElWSVRJRVNfVFJBQ0VcIilbMF07XHJcbmRlZiBvblNpdGVUZWNoc1RyYXZlbEZpZWxkID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEVDSE5JQ0lBTl9UUkFWRUxcIilbMF07XHJcbmRlZiB0a3RGcm9tTW9iaWxlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEtUX0ZST01fTU9CSUxFXCIpWzBdXHJcbmRlZiB0a3RKb2JTdGFydGVkID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfSU5ESVJFQ1RfSk9CX1NUQVJURURcIilbMF1cclxuZGVmIHRrdEpvYkNvbXBsZXRlZCA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0lORElSRUNUX0pPQl9DT01QTEVURURcIilbMF1cclxuZGVmIHVzZXJMYW5ndWFnZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0NVUlJFTlRVU0VSX0xBTkdVQUdFXCIpXHJcbmRlZiBkb2NMYW5ndWFnZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0RPQ19HRU5FUkFUSU9OX0xBTkdVQUdFXCIpXHJcblxyXG5kZWYgT25TaXRlVGVjaE9iamVjdHMgPSBuZXcgQXJyYXlMaXN0KCk7XHJcbmludCBPUEFBID0gcHJvcGVydGllc1snaXNjaGVtYS5hYS5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuaW50IERCTyA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuZGJvLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG5cclxuLyoyNS4xMS4yMiovXHJcbmRlZiBsb2NhbFRpbWVTdGFtcFxyXG5kZWYgbG9jYWxEYXRlXHJcbi8qMDMuMTAuMjMqL1xyXG5kZWYgREFURVRJTUVfT0ZGU0VUID0gcHJvcGVydGllc1snd2YudHIuZGF0ZXRpbWV3aXRob2Zmc2V0J10udG9TdHJpbmcoKVxyXG5sb2cuZGVidWcgXCJEQVRFVElNRV9PRkZTRVQ6IFwiICsgREFURVRJTUVfT0ZGU0VUXHJcbmlmIChEQVRFVElNRV9PRkZTRVQgIT0gbnVsbCAmJiBEQVRFVElNRV9PRkZTRVQgIT0gJ251bGwnKXtcclxuXHJcbmRlZiBzaXRlQ0YgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9TSVRFXCIpWzBdO1xyXG5kZWYgc2l0ZSwgc2l0ZUtleSwgc2l0ZU9iamVjdCwgdmlzaWJpbGl0eSwgdmlzaWJpbGl0eUtleVxyXG5pZiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzaXRlQ0YpICE9IG51bGwpIHtcclxuICAgIHNpdGUgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNpdGVDRikudG9TdHJpbmcoKVxyXG4gICAgc2l0ZUtleSA9IHNpdGUuc3Vic3RyaW5nKHNpdGUubGFzdEluZGV4T2YoJygnKSArIDEsIHNpdGUubGFzdEluZGV4T2YoJyknKSlcclxuICAgIHNpdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oc2l0ZUtleSlcclxuICAgIHZpc2liaWxpdHkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9US1RfVklTSUJJTElUWV9LRVlcIilbMF1cclxuICAgIHZpc2liaWxpdHlLZXkgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHZpc2liaWxpdHkpWzBdLnRvU3RyaW5nKCkuc3Vic3RyaW5nKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodmlzaWJpbGl0eSlbMF0udG9TdHJpbmcoKS5sYXN0SW5kZXhPZignKCcpICsgMSwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh2aXNpYmlsaXR5KVswXS50b1N0cmluZygpLmxhc3RJbmRleE9mKCcpJykpXHJcbn0gZWxzZSB7XHJcbiAgICB2aXNpYmlsaXR5ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfSU5ESVJFQ1RfSk9CX1RLVF9WSVNJQklMSVRZXCIpWzBdXHJcbiAgICB2aXNpYmlsaXR5S2V5ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh2aXNpYmlsaXR5KVswXS50b1N0cmluZygpLnN1YnN0cmluZyhpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHZpc2liaWxpdHkpWzBdLnRvU3RyaW5nKCkubGFzdEluZGV4T2YoJygnKSArIDEsIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodmlzaWJpbGl0eSlbMF0udG9TdHJpbmcoKS5sYXN0SW5kZXhPZignKScpKVxyXG59XHJcbmRlZiB0aW1lWm9uZVxyXG5kZWYgY29tcGFueVJlZiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4odmlzaWJpbGl0eUtleSkuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai52aXNpYmlsaXR5S2V5LmNvbXBhbnlSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7XHJcbmxvZy5pbmZvIFwiY29tcGFueVJlZjogXCIgKyBjb21wYW55UmVmXHJcbmRlZiBjb21wYW55UmVmSWQgPSBjb21wYW55UmVmWzBdLmdldFJlZmVyZW5jZWRPYmplY3RCZWFuSWQoKVxyXG5sb2cuZGVidWcgXCJjb21wYW55UmVmSWQ6XCIgKyBjb21wYW55UmVmSWRcclxuaWYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2l0ZUNGKSAhPSBudWxsICYmIG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihzaXRlT2JqZWN0LmdldElkKCksIFwiU0lURV9SRUZcIikpIHtcclxuICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHNpdGVPYmplY3QuZ2V0SWQoKSwgXCJTSVRFX1JFRlwiKS5jcmVhdGVNdXRhYmxlKClcclxuICAgIHMgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcclxuICAgIHMgPSBzLnRvU3RyaW5nKClcclxuICAgIHNLZXkgPSBzLnN1YnN0cmluZyhzLmxhc3RJbmRleE9mKCcoJykgKyAxLCBzLmxhc3RJbmRleE9mKCcpJykpXHJcbiAgICBpZiAob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHNLZXkudG9JbnRlZ2VyKCksIFwiVElNRV9aT05FXCIpKSB7XHJcbiAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oc0tleS50b0ludGVnZXIoKSwgXCJUSU1FX1pPTkVcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICAgICAgdGltZVpvbmUgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcclxuICAgICAgICB0aW1lWm9uZSA9IHRpbWVab25lWzBdLmdldFZhbHVlKClcclxuICAgICAgICBsb2cuZGVidWcgXCJUaW1lWm9uZSBkYSBTaXRlOiBcIiArIHRpbWVab25lXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcGFueVJlZklkLnRvSW50ZWdlcigpLCBcIlRJTUVfWk9ORVwiKSkge1xyXG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wYW55UmVmSWQudG9JbnRlZ2VyKCksIFwiVElNRV9aT05FXCIpLmNyZWF0ZU11dGFibGUoKVxyXG4gICAgICAgICAgICB0aW1lWm9uZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxyXG4gICAgICAgICAgICB0aW1lWm9uZSA9IHRpbWVab25lWzBdLmdldFZhbHVlKClcclxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiVGltZVpvbmUgZGEgQ29tcGFueTogXCIgKyB0aW1lWm9uZVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSBlbHNlIHtcclxuICAgIGlmIChvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcGFueVJlZklkLnRvSW50ZWdlcigpLCBcIlRJTUVfWk9ORVwiKSkge1xyXG4gICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBhbnlSZWZJZC50b0ludGVnZXIoKSwgXCJUSU1FX1pPTkVcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICAgICAgdGltZVpvbmUgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcclxuICAgICAgICB0aW1lWm9uZSA9IHRpbWVab25lWzBdLmdldFZhbHVlKClcclxuICAgICAgICBsb2cuZGVidWcgXCJUaW1lWm9uZSBkYSBDb21wYW55OiBcIiArIHRpbWVab25lXHJcbiAgICB9XHJcbn1cclxuaWYgKCF0aW1lWm9uZSkge1xyXG4gICAgdGltZVpvbmUgPSBcIkV1cm9wZS9Sb21lXCJcclxufVxyXG5sb2cuZGVidWcgXCJ0aW1lWm9uZTogXCIgKyB0aW1lWm9uZVxyXG5sb2NhbFRpbWVTdGFtcCA9IChuZXcgVGltZXN0YW1wKChuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIFRpbWVab25lLmdldERlZmF1bHQoKS5nZXRSYXdPZmZzZXQoKSArIFRpbWVab25lLmdldFRpbWVab25lKHRpbWVab25lLnRvU3RyaW5nKCkpLmdldFJhd09mZnNldCgpKSkudGltZSkpLnRvU3RyaW5nKClcclxubG9jYWxEYXRlID0gbmV3IERhdGUobmV3IERhdGUoKS5nZXRUaW1lKCkgLSBUaW1lWm9uZS5nZXREZWZhdWx0KCkuZ2V0UmF3T2Zmc2V0KCkgKyBUaW1lWm9uZS5nZXRUaW1lWm9uZSh0aW1lWm9uZS50b1N0cmluZygpKS5nZXRSYXdPZmZzZXQoKSlcclxuXHJcbn1lbHNle1xyXG5cclxuICAgIGxvY2FsVGltZVN0YW1wID0gIChuZXcgVGltZXN0YW1wKChuZXcgRGF0ZSgpKS50aW1lKSkudG9TdHJpbmcoKVxyXG4gICAgbG9jYWxEYXRlID0gIG5ldyBEYXRlKClcclxuXHJcbn1cclxubG9nLmRlYnVnIGxvY2FsVGltZVN0YW1wXHJcbmxvZy5kZWJ1ZyBsb2NhbERhdGVcclxuLyoyNS4xMS4yMiovXHJcblxyXG4vKiAtLS0tLS0tLS0tLS0gREVGSU5FIEFDVElPTiBUTyBCRSBUUkFDRUQgQU5EIFNFVCBUTyBCRSBET05FIC0tLS0tLS0tLS0tLS0gKi9cclxuZGVmIEFDVElPTiA9IHByb3BlcnRpZXNbJ3dmLnRyLmluZGlyZWN0VGFzay5hY3Rpb24nXS50b1N0cmluZygpXHJcbmRlZiBTRVQgPSBwcm9wZXJ0aWVzWyd3Zi50ci5lbmRJbmRpcmVjdFRhc2suc2V0J10udG9TdHJpbmcoKVxyXG5cclxuZGVmIE9OU0lURV9URUNIX1JFUE9SVF9PQkpfVFlQRT1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVRlY2hSZXBvcnQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXHJcbmRlZiBPTlNJVEVfVEVDSF9SRVBPUlRfQVRUUl9OQU1FPXByb3BlcnRpZXNbJ2lvYmoub25TaXRlVGVjaFJlcG9ydC5uYW1lLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG5kZWYgT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfVEVDSE5JQ0lBTl9SRUY9cHJvcGVydGllc1snaW9iai5vblNpdGVUZWNoUmVwb3J0LnRlY2huaWNpYW5SZWYuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXHJcbmRlZiBPTlNJVEVfVEVDSF9SRVBPUlRfQVRUUl9KT0JfQ09NUExFVEVEPXByb3BlcnRpZXNbJ2lvYmoub25TaXRlVGVjaFJlcG9ydC5qb2JDb21wbGV0ZWQuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXHJcbmRlZiBPTlNJVEVfVEVDSF9SRVBPUlRfQVRUUl9KT0JfU1RBUlRFRD1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVRlY2hSZXBvcnQuam9iU3RhcnRlZC5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuZGVmIE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX1RSQUNFX0FDVElPTj1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVRlY2hSZXBvcnQudHJhY2VBY3Rpb24uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXHJcblxyXG5kZWYgZGF0ZVRvZGF5ID0gbmV3IFNpbXBsZURhdGVGb3JtYXQoXCJNL2RkL3l5eXlcIikuZm9ybWF0KGxvY2FsRGF0ZSkgXHJcbmRlZiBsYXN0QWN0aXZpdHksIGpvYkNvbXBsZXRlZFxyXG5cclxuZGVmIGxhbmcsIGRvY0xhbmdcclxuZG9jTGFuZyA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZG9jTGFuZ3VhZ2UpXHJcbmlmKGRvY0xhbmc9PW51bGwgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1c2VyTGFuZ3VhZ2UpLnRvU3RyaW5nKCkhPVwibnVsbFwiKXtcclxuICAgIGxhbmcgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHVzZXJMYW5ndWFnZSlcclxufWVsc2V7XHJcbiAgICBpZihkb2NMYW5nIT1udWxsKXtcclxuICAgICAgICBkZWYgcktleSA9IGRvY0xhbmcudG9TdHJpbmcoKS5zdWJzdHJpbmcoZG9jTGFuZy50b1N0cmluZygpLmxhc3RJbmRleE9mKCcoJykrMSxkb2NMYW5nLnRvU3RyaW5nKCkubGFzdEluZGV4T2YoJyknKSlcclxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHJLZXkpLmdldElkKCksIFwiSVNPX0NPREVcIikpe1xyXG4gICAgICAgICAgICBkZWYgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHJLZXkpLmdldElkKCksIFwiSVNPX0NPREVcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICAgICAgICAgIGxhbmcgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXHJcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImxhbmc6IFwiICsgbGFuZ1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSBcclxuXHJcbmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGt0RnJvbU1vYmlsZSkgPT0gbnVsbCB8fCAhaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0a3RGcm9tTW9iaWxlKS5lcXVhbHMoXCJUUkFWRUxfSE9NRVwiKSl7XHJcbiAgICBkZWYgb2JqZWN0cyA9IGlxbEZhY2FkZS5maW5kT2JqZWN0c0J5SVFMQW5kU2NoZW1hKE9QQUEsIFwib2JqZWN0VHlwZSA9IFRlY2huaWNpYW4gQU5EIFRFQ0hOSUNJQU5fUkVGLlRFQ0hfQUNDT1VOVCA9XFxcIlwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXJyZW50VXNlcikudG9TdHJpbmcoKSArIFwiXFxcIlwiKVxyXG4gICAgbG9nLndhcm4gXCJpcWw6IFwiICsgXCJvYmplY3RUeXBlID0gVGVjaG5pY2lhbiBBTkQgVEVDSE5JQ0lBTl9SRUYuVEVDSF9BQ0NPVU5UID1cXFwiXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1cnJlbnRVc2VyKS50b1N0cmluZygpICsgXCJcXFwiXCJcclxuXHJcbiAgICBmb3IodGVjaG5pY2lhbiBpbiBvYmplY3RzKXtcclxuICAgICAgICBkZWYgdGVjaD10ZWNobmljaWFuLnRvU3RyaW5nKClcclxuICAgICAgICBkZWYgdGVjaEtleSA9IHRlY2guc3Vic3RyaW5nKHRlY2gubGFzdEluZGV4T2YoJygnKSsxLHRlY2gubGFzdEluZGV4T2YoJyknKSlcclxuICAgICAgICBkZWYgdGVjaE5hbWUgPSB0ZWNoLnN1YnN0cmluZygwLHRlY2gubGFzdEluZGV4T2YoJygnKS0xKVxyXG4gICAgICAgIGRlZiB0ZWNoT2JqZWN0ID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHRlY2hLZXkpXHJcbiAgICAgICAgbG9nLmluZm8gXCJ0ZWNoS2V5OiBcIiArIHRlY2hLZXlcclxuICAgICAgICBsb2cuaW5mbyAoXCJ0ZWNoTmFtZTogXCIgKyB0ZWNoTmFtZSlcclxuICAgICAgICBsb2cuaW5mbyAoXCJ0ZWNoT2JqZWN0OiBcIiArIHRlY2hPYmplY3QpXHJcblxyXG4gICAgICAgIG9iamVjdHMgPSBpcWxGYWNhZGUuZmluZE9iamVjdHNCeUlRTEFuZFNjaGVtYShPUEFBLCBcIm9iamVjdFR5cGUgPSBPblNpdGVfVGVjaF9SZXBvcnQgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXk9XCIgKyBpc3N1ZS5rZXkgKyBcIikgQU5EIFRFQ0hOSUNJQU5fUkVGLlRFQ0hOSUNJQU5fUkVGLlRFQ0hfQUNDT1VOVCA9XFxcIlwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXJyZW50VXNlcikudG9TdHJpbmcoKSArIFwiXFxcIiBBTkQgSk9CX1NUQVJURUQgSVMgTk9UIEVNUFRZIE9SREVSIEJZIEpPQl9TVEFSVEVEIERFU0NcIilcclxuICAgICAgICBsb2cud2FybiBcImlxbDogXCIgKyBcIm9iamVjdFR5cGUgPSBPblNpdGVfVGVjaF9SZXBvcnQgQU5EIG9iamVjdCBIQVZJTkcgY29ubmVjdGVkVGlja2V0cyhrZXk9XCIgKyBpc3N1ZS5rZXkgKyBcIikgQU5EIFRFQ0hOSUNJQU5fUkVGLlRFQ0hOSUNJQU5fUkVGLlRFQ0hfQUNDT1VOVCA9XFxcIlwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXJyZW50VXNlcikudG9TdHJpbmcoKSArIFwiXFxcIiBBTkQgSk9CX1NUQVJURUQgSVMgTk9UIEVNUFRZIE9SREVSIEJZIEpPQl9TVEFSVEVEIERFU0NcIlxyXG5cclxuICAgICAgICBpZihvYmplY3RzLnNpemU9PTApe1xyXG4gICAgICAgICAgICAvKlByaW1hIGF0dGl2aXRcdTAwZTAgZGVsbGEgZ2lvcm5hdGEgLS0+IEpPQl9TVEFSVEVEID0gdGltZSBzdGFtcCByZWFsZSovXHJcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yZSAtIGluaXppbyBhdHRpdml0XHUwMGUwIG5vbiB0cm92YXRvXCJcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgLypVUERBVEUgSk9CX0NPTVBMRVRFRCBPTiBTRUxFQ1RFRCBPQkpFQ1QqLyAgICAgICAgICBcclxuICAgICAgICAgICAgZGVmIG9iaiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihvYmplY3RzWzBdLmdldElkKCkpO1xyXG4gICAgICAgICAgICBhdHRyaWJUeXBlID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfSk9CX0NPTVBMRVRFRCk7IFxyXG4gICAgICAgICAgICBsb2cuaW5mbyBcImF0dHJpYlR5cGU6IFwiICsgYXR0cmliVHlwZS50b1N0cmluZygpXHJcbiAgICAgICAgICAgIG5ld0F0dHJpYiA9IG9iai5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKGF0dHJpYlR5cGUpO1xyXG4gICAgICAgICAgICBkZWYgbmV3QXR0cmliVmFsdWUgPSBuZXdBdHRyaWIuY3JlYXRlT2JqZWN0QXR0cmlidXRlVmFsdWVCZWFuKCk7XHJcblxyXG4gICAgICAgICAgICBqb2JDb21wbGV0ZWQgPSBsb2NhbERhdGVcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIG5ld0F0dHJpYlZhbHVlLnNldERhdGVWYWx1ZShqb2JDb21wbGV0ZWQpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XHJcbiAgICAgICAgICAgICAgICBsb2cud2FybihcIlNFVElOU0lHSFRWQUxVRTogVW5hYmxlIHRvIHNldCBhdHRyaWJ1dGUgXCIgKyBhdHRyaWJUeXBlLnRvU3RyaW5nKCkgKyBcIiB0byBcIiArIGpvYkNvbXBsZXRlZC50b1N0cmluZygpICsgXCIuIEV4aXRpbmcuXCIpO1xyXG4gICAgICAgICAgICAgICAgbG9nLndhcm4oXCJTRVRJTlNJR0hUVkFMVUU6IFwiICsgdmllLmdldE1lc3NhZ2UoKS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZGVmIGF0dHJpYlZhbHVlcyA9IG5ld0F0dHJpYi5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7XHJcbiAgICAgICAgICAgIGF0dHJpYlZhbHVlcy5hZGQobmV3QXR0cmliVmFsdWUpO1xyXG4gICAgICAgICAgICBuZXdBdHRyaWIuc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyhhdHRyaWJWYWx1ZXMpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIG5ld0F0dHJpYiA9IG9iamVjdEZhY2FkZS5zdG9yZU9iamVjdEF0dHJpYnV0ZUJlYW4obmV3QXR0cmliKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSkge1xyXG4gICAgICAgICAgICAgICAgbG9nLndhcm4oXCJTRVRJTlNJR0hUVkFMVUU6IFVuYWJsZSB0byBzYXZlIGNoYW5nZXMuIEV4aXRpbmcuXCIpO1xyXG4gICAgICAgICAgICAgICAgbG9nLndhcm4oXCJTRVRJTlNJR0hUVkFMVUU6IFwiICsgdmllLmdldE1lc3NhZ2UoKS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZGVmIHVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcclxuICAgICAgICAgICAgTXV0YWJsZUlzc3VlIG1pID0gKE11dGFibGVJc3N1ZSkgaXNzdWVcclxuICAgICAgICAgICAgbWkuc2V0Q3VzdG9tRmllbGRWYWx1ZSh0a3RKb2JDb21wbGV0ZWQsIGpvYkNvbXBsZXRlZC50b1RpbWVzdGFtcCgpKTtcclxuICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUodXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5pc3N1ZUluZGV4aW5nU2VydmljZS5yZUluZGV4KGlzc3VlKVxyXG5cclxuLyogUkVTVCBBUEkgcGVyIHB1bGl6aWEgY2FjaGUgaXNzdWUgbGlua2F0YSAqL1xyXG5yZXF1ZXN0TWV0aG9kID0gXCJHRVRcIjtcclxuLypTY3JpcHQgVmFyaWFibGVzKi9cclxuLy9QZXIgdGVzdCBkYSBjb25zb2xlXHJcbi8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMzI1MzVcIilcclxuYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2F1dG9tYXRpb24vY2xlYXJDYWNoZS90aWNrZXRrZXkvXCIgKyBpc3N1ZS5rZXlcclxuVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcclxuSHR0cFVSTENvbm5lY3Rpb24gY29ubmVjdGlvbiA9IChIdHRwVVJMQ29ubmVjdGlvbil1cmwub3BlbkNvbm5lY3Rpb24oKTtcclxuY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xyXG5jb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcclxuY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJBY2NlcHRcIiwgXCIqLypcIik7XHJcbmNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XHJcbmNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcclxuY29ubmVjdGlvbi5jb25uZWN0KCk7XHJcbmxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcclxuaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcclxuICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcclxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlQ29kZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKClcclxuICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcclxufVxyXG5cclxucmVxdWVzdE1ldGhvZCA9IFwiUE9TVFwiO1xyXG5cclxuZGVmIGJvZHlfcmVxID0gW11cclxuXHJcbi8qKiBTRVJWSUNFIE9SREVSIENSRUFUSU9OICoqL1xyXG5ib2R5X3JlcSA9IFtcclxuICAgIFwiaXNzdWVLZXlcIjogaXNzdWUua2V5XHJcbl0gXHJcbmJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL2FmdGVyL3NhbGVzL2NyZWF0ZS9vci91cGRhdGUvc2VydmljZS9vcmRlcj9sYW5ndWFnZT1cIitsYW5nXHJcblxyXG5sb2cuZGVidWcgXCJiYXNlVVJMIFNPOiBcIiArIGJhc2VVUkxcclxubG9nLmRlYnVnIFwiYm9keV9yZXEgU086IFwiICsgYm9keV9yZXFcclxudXJsID0gbmV3IFVSTChiYXNlVVJMKVxyXG5jb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xyXG5jb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XHJcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xyXG5jb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcclxuY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcclxuY29ubmVjdGlvbi5zZXREb0lucHV0KHRydWUpO1xyXG5jb25uZWN0aW9uLm91dHB1dFN0cmVhbVxyXG5jb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XHJcbmxvZy5kZWJ1ZyBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxyXG5jb25uZWN0aW9uLmNvbm5lY3QoKTtcclxuXHJcbmRlZiBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcclxuZGVmIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXHJcbmRlZiBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxyXG5kZWYgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXHJcblxyXG5pZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDFcIikgJiYgIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xyXG4gICAgbG9nLmRlYnVnIFwidXJsOiBcIiArIHVybFxyXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxyXG4gICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxyXG5cclxuICAgIGRlZiBvdXRwdXRNc2cgPSAoKEh0dHBVUkxDb25uZWN0aW9uKWNvbm5lY3Rpb24pLmVycm9yU3RyZWFtLnRleHRcclxuICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcclxuXHJcbiAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxyXG4gICAgZGVmIGpzb25fb2JqZWN0ID0ganNvblNsdXJwZXIucGFyc2VUZXh0KG91dHB1dE1zZylcclxuICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgXHJcbiAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlXHJcbiAgICBsb2cuZGVidWcgXCJlcnJvcnM6IFwiICsgIGpzb25fb2JqZWN0LmVycm9ycy50b1N0cmluZygpXHJcbiAgICBcclxuICAgIGRlZiByZXN1bHRcclxuICAgIGlmIChqc29uX29iamVjdC5tZXNzYWdlIT1udWxsKVxyXG4gICAge1xyXG4gICAgICAgIHJlc3VsdCA9IGpzb25fb2JqZWN0Lm1lc3NhZ2VcclxuICAgIH1cclxuICAgIGlmKGpzb25fb2JqZWN0LmVycm9ycyAhPSBudWxsKXtcclxuICAgICAgICByZXN1bHQgPSByZXN1bHQudG9TdHJpbmcoKSArIGpzb25fb2JqZWN0LmVycm9ycy50b1N0cmluZygpXHJcbiAgICB9XHJcblxyXG5cclxuICAgIGVMaXN0RXJyb3JzLmFkZChcIkVcIilcclxuICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TTy1DUkVBVEVcIilcclxuICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsgcmVzdWx0KVxyXG4gICAgZUxpc3RFcnJvcnMuYWRkKGVycm9yTXNncylcclxuICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcclxuXHJcbiAgICBvdXRwdXQuYWRkKGVMaXN0KVxyXG4gICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXHJcbn1lbHNle1xyXG4gICAgYm9keV9yZXEgPSBbXHJcbiAgICAgICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXksXHJcbiAgICBdIFxyXG5cclxuICAgIGJhc2VVUkwgPSBcImh0dHA6Ly9cIiArIHByb3BlcnRpZXNbJ2FwaS5lbnYnXS50b1N0cmluZygpICsgXCIvb3AvcmVzdC9qaXJhL0FBL2FmdGVyL3NhbGVzL2NyZWF0ZS9zZXJ2aWNlL29yZGVyL2NvbmZpcm1hdGlvbj9sYW5ndWFnZT1cIitsYW5nXHJcbiAgICBsb2cuZGVidWcgXCJib2R5X3JlcSBTQzogXCIgKyBib2R5X3JlcVxyXG4gICAgbG9nLmRlYnVnIFwiYmFzZVVSTCBTQzogXCIgKyBiYXNlVVJMXHJcbiAgICB1cmwgPSBuZXcgVVJMKGJhc2VVUkwpXHJcbiAgICBjb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKXVybC5vcGVuQ29ubmVjdGlvbigpO1xyXG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0TWV0aG9kKHJlcXVlc3RNZXRob2QpO1xyXG4gICAgY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XHJcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkFjY2VwdFwiLCBcIiovKlwiKTtcclxuICAgIGNvbm5lY3Rpb24uc2V0RG9PdXRwdXQodHJ1ZSk7XHJcbiAgICBjb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XHJcbiAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbVxyXG4gICAgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW0ud2l0aFdyaXRlcihcIlVURi04XCIpIHsgbmV3IFN0cmVhbWluZ0pzb25CdWlsZGVyKGl0LCBib2R5X3JlcSkgfVxyXG4gICAgbG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXHJcbiAgICBjb25uZWN0aW9uLmNvbm5lY3QoKTtcclxuXHJcbiAgICBvdXRwdXQgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgIGVMaXN0ID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICBlTGlzdEVycm9ycyA9IG5ldyBBcnJheUxpc3QoKVxyXG4gICAgZXJyb3JNc2dzID0gbmV3IEFycmF5TGlzdCgpXHJcblxyXG4gICAgaWYgKCFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAxXCIpICYmICFjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpLnRvU3RyaW5nKCkuZXF1YWxzKFwiMjAwXCIpKXtcclxuICAgICAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXHJcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VDb2RlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKVxyXG4gICAgICAgIGxvZy5kZWJ1ZyBcIlJlc3BvbnNlTWVzc2FnZTpcIiArIGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VNZXNzYWdlKClcclxuXHJcbiAgICAgICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxyXG4gICAgICAgIGxvZy5kZWJ1ZyBcIigoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dDogXCIgKyBvdXRwdXRNc2dcclxuXHJcbiAgICAgICAgZGVmIGpzb25TbHVycGVyID0gbmV3IEpzb25TbHVycGVyKClcclxuICAgICAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxyXG4gICAgICAgIGFzc2VydCBqc29uX29iamVjdCBpbnN0YW5jZW9mIE1hcCAgXHJcbiAgICAgICAgbG9nLmRlYnVnIFwibWVzc2FnZTogXCIgKyAganNvbl9vYmplY3QubWVzc2FnZS50b1N0cmluZygpLnJlcGxhY2VBbGwoXCIvW15hLXpBLVogXS9nXCIsXCJcIikucmVwbGFjZUFsbCgnXCInLCcnKVxyXG4gICAgICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcclxuXHJcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxyXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChcIk9QLVNBUC1TQy1DUkVBVEVcIilcclxuICAgICAgICBlcnJvck1zZ3MuYWRkKGNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkgKyBcIiBcIiArIGpzb25fb2JqZWN0LmVycm9yc1swXSlcclxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxyXG4gICAgICAgIGVMaXN0LmFkZChlTGlzdEVycm9ycylcclxuXHJcbiAgICAgICAgb3V0cHV0LmFkZChlTGlzdClcclxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcclxuICAgIH1cclxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
          <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
          <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
        </validator>
      </validators>
      <results>
        <unconditional-result old-status="null" status="null" step="2">
          <post-functions>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
            </function>
            <function type="class">
              <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
            </function>
            <function type="class">
              <arg name="eventTypeId">13</arg>
              <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
            </function>
            <function type="class">
              <arg name="conditionList">3</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.33.0</arg>
              <arg name="comparisonType">1</arg>
              <arg name="precondition">true</arg>
              <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
              <arg name="preconditionNegateResult-booleanValue"></arg>
              <arg name="uuid">b7234fb1-a9c4-4ec7-b27d-5bc729e9802d</arg>
              <arg name="fieldValue"></arg>
              <arg name="preconditionMode-textValue">DISCARD</arg>
              <arg name="fieldsList">customfield_22628</arg>
            </function>
            <function type="class">
              <arg name="scopeSource-linkEnd"></arg>
              <arg name="append.value"></arg>
              <arg name="maxAllowed-integerValue"></arg>
              <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
              <arg name="field.value">%%CURRENT_DATETIME%%</arg>
              <arg name="uuid">24e9ce6f-bfb6-4e89-be35-2a93b5e7d6bb</arg>
              <arg name="field.name">customfield_22628</arg>
              <arg name="scopeType">SAME</arg>
              <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
              <arg name="scopeDestination-linkEnd"></arg>
              <arg name="jsuWorkflowParamsVersion-textValue">2.33.0</arg>
              <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
              <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
              <arg name="scopeDestination-jql"></arg>
              <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
              <arg name="scopeSource-jql"></arg>
            </function>
          </post-functions>
        </unconditional-result>
      </results>
    </action>
  </common-actions>
  <steps>
    <step id="1" name="Open">
      <meta name="jira.status.id">1</meta>
      <actions>
<common-action id="11" />
        <action id="31" name="Assign to Technician" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">20117</meta>
          <results>
            <unconditional-result old-status="null" status="null" step="3">
              <post-functions>
                <function type="class">
                  <arg name="conditionList">3</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesvalueField-precondition-function</arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.33.0</arg>
                  <arg name="comparisonType">1</arg>
                  <arg name="precondition">true</arg>
                  <arg name="class.name">ch.beecom.jira.jsu.workflow.function.valuefield.ValueFieldPreconditionFunction</arg>
                  <arg name="preconditionNegateResult-booleanValue"></arg>
                  <arg name="uuid">ae5404dc-89b8-47ff-a3fd-c6eeec5ad699</arg>
                  <arg name="fieldValue"></arg>
                  <arg name="preconditionMode-textValue">DISCARD</arg>
                  <arg name="fieldsList">customfield_23619</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="append.value"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.value">%%CURRENT_DATETIME%%</arg>
                  <arg name="uuid">04b8cc45-0422-40c5-8f5e-eb1363f9cc5d</arg>
                  <arg name="field.name">customfield_23619</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesupdateIssueCustomField-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.33.0</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">TRUE</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.UpdateIssueCustomFieldPostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="uuid">7ed8f248-f9bd-40b5-b04c-c229aaec7f7e</arg>
                  <arg name="field">customfield_23237</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.33.0</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="field.copyFieldSource2"></arg>
                  <arg name="field.copyFieldSource1">customfield_23236</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="field.createTargetValue1"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.copyFieldMode1">OVERWRITE</arg>
                  <arg name="uuid">028c2ca2-35a9-495f-b998-a6bf92dc0722</arg>
                  <arg name="field.copyFieldDestination1">customfield_22653</arg>
                  <arg name="field.copyFieldSeparator1"></arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiescopyValueFromOtherField-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.CopyValueFromOtherFieldPostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="61" name="Stop Working - UK" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">19908</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">67f024c1-3d38-44a7-9231-ba2cd143ae5b</arg>
                <arg name="FIELD_INVERT_CONDITION"></arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.UserCondition</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_USER_IDS">arianna.fabbri|||JIRAUSER58800</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">fbd4cd66-b9a4-46a6-a0df-35f427804e1c</arg>
              <arg name="FIELD_NOTES">YCFgVXBkYXRlIFNP</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XHJcbmltcG9ydCBncm9vdnkuanNvbi5TdHJlYW1pbmdKc29uQnVpbGRlcjtcclxuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxyXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XHJcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5XHJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXHJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxyXG5pbXBvcnQgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQgXHJcbmltcG9ydCBqYXZhLnV0aWwuRGF0ZVxyXG5pbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5ldmVudC50eXBlLkV2ZW50RGlzcGF0Y2hPcHRpb25cclxuXHJcblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcclxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcclxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcclxuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXHJcbn1cclxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcclxuXHJcbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcclxuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xyXG5cclxuZGVmIHNhcFNOID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1NBUF9TRVJWSUNFX05PVElGSUNBVElPTlwiKVswXVxyXG5kZWYgcmVxdWVzdE1ldGhvZFxyXG5kZWYgYmFzZVVSTFxyXG5cclxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xyXG5DbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7IFxyXG5kZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcclxuICBcclxuLyogR2V0IEluc2lnaHQgT2JqZWN0IFR5cGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXHJcbkNsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpOyBcclxuZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcclxuICBcclxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cclxuQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7IFxyXG5kZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xyXG4gIFxyXG5DbGFzcyBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuc2VydmljZXMubW9kZWwuZmFjdG9yeS5PYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeVwiKTsgXHJcbmRlZiBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzKTtcclxuQ2xhc3MgaXFsRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuSVFMRmFjYWRlXCIpOyBcclxuZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XHJcblxyXG5Jc3N1ZUluZGV4aW5nU2VydmljZSBpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSlcclxuLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy01OTUxNFwiKVxyXG5cclxuZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfQ1VSUkVOVF9VU0VSXCIpWzBdXHJcbmRlZiBvblNpdGVUZWNoc1RyYWNlRmllbGQgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9URUNITklDSUFOX0FDVElWSVRJRVNfVFJBQ0VcIilbMF07XHJcbmRlZiBvblNpdGVUZWNoc1RyYXZlbEZpZWxkID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEVDSE5JQ0lBTl9UUkFWRUxcIilbMF07XHJcbmRlZiB0a3RGcm9tTW9iaWxlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEtUX0ZST01fTU9CSUxFXCIpWzBdXHJcbmRlZiB0a3RKb2JTdGFydGVkID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfSU5ESVJFQ1RfSk9CX1NUQVJURURcIilbMF1cclxuZGVmIHRrdEpvYkNvbXBsZXRlZCA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0lORElSRUNUX0pPQl9DT01QTEVURURcIilbMF1cclxuZGVmIHVzZXJMYW5ndWFnZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0NVUlJFTlRVU0VSX0xBTkdVQUdFXCIpXHJcbmRlZiBkb2NMYW5ndWFnZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0RPQ19HRU5FUkFUSU9OX0xBTkdVQUdFXCIpXHJcblxyXG5kZWYgT25TaXRlVGVjaE9iamVjdHMgPSBuZXcgQXJyYXlMaXN0KCk7XHJcbmludCBPUEFBID0gcHJvcGVydGllc1snaXNjaGVtYS5hYS5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuaW50IERCTyA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuZGJvLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG5cclxuLyogLS0tLS0tLS0tLS0tIERFRklORSBBQ1RJT04gVE8gQkUgVFJBQ0VEIEFORCBTRVQgVE8gQkUgRE9ORSAtLS0tLS0tLS0tLS0tICovXHJcbmRlZiBBQ1RJT04gPSBwcm9wZXJ0aWVzWyd3Zi50ci5pbmRpcmVjdFRhc2suYWN0aW9uJ10udG9TdHJpbmcoKVxyXG5kZWYgU0VUID0gcHJvcGVydGllc1snd2YudHIuc3RhcnRJbmRpcmVjdFRhc2suc2V0J10udG9TdHJpbmcoKVxyXG5cclxuZGVmIE9OU0lURV9URUNIX1JFUE9SVF9PQkpfVFlQRT1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVRlY2hSZXBvcnQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXHJcbmRlZiBPTlNJVEVfVEVDSF9SRVBPUlRfQVRUUl9OQU1FPXByb3BlcnRpZXNbJ2lvYmoub25TaXRlVGVjaFJlcG9ydC5uYW1lLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG5kZWYgT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfVEVDSE5JQ0lBTl9SRUY9cHJvcGVydGllc1snaW9iai5vblNpdGVUZWNoUmVwb3J0LnRlY2huaWNpYW5SZWYuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXHJcbmRlZiBPTlNJVEVfVEVDSF9SRVBPUlRfQVRUUl9KT0JfQ09NUExFVEVEPXByb3BlcnRpZXNbJ2lvYmoub25TaXRlVGVjaFJlcG9ydC5qb2JDb21wbGV0ZWQuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXHJcbmRlZiBPTlNJVEVfVEVDSF9SRVBPUlRfQVRUUl9KT0JfU1RBUlRFRD1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVRlY2hSZXBvcnQuam9iU3RhcnRlZC5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuZGVmIE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX1RSQUNFX0FDVElPTj1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVRlY2hSZXBvcnQudHJhY2VBY3Rpb24uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXHJcblxyXG5kZWYgZGF0ZVRvZGF5ID0gbmV3IFNpbXBsZURhdGVGb3JtYXQoXCJNL2RkL3l5eXlcIikuZm9ybWF0KG5ldyBEYXRlKCkpIFxyXG5kZWYgbGFzdEFjdGl2aXR5LCBqb2JDb21wbGV0ZWRcclxuXHJcbmRlZiBsYW5nPSdlbicsIGRvY0xhbmdcclxuZG9jTGFuZyA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZG9jTGFuZ3VhZ2UpXHJcbmlmKGRvY0xhbmc9PW51bGwgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1c2VyTGFuZ3VhZ2UpLnRvU3RyaW5nKCkhPVwibnVsbFwiKXtcclxuICAgIGxhbmcgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHVzZXJMYW5ndWFnZSlcclxufWVsc2V7XHJcbiAgICBpZihkb2NMYW5nIT1udWxsKXtcclxuICAgICAgICBkZWYgcktleSA9IGRvY0xhbmcudG9TdHJpbmcoKS5zdWJzdHJpbmcoZG9jTGFuZy50b1N0cmluZygpLmxhc3RJbmRleE9mKCcoJykrMSxkb2NMYW5nLnRvU3RyaW5nKCkubGFzdEluZGV4T2YoJyknKSlcclxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHJLZXkpLmdldElkKCksIFwiSVNPX0NPREVcIikpe1xyXG4gICAgICAgICAgICBkZWYgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHJLZXkpLmdldElkKCksIFwiSVNPX0NPREVcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICAgICAgICAgIGxhbmcgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXHJcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImxhbmc6IFwiICsgbGFuZ1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSBcclxuXHJcbnJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcclxuXHJcbmRlZiBib2R5X3JlcSA9IFtdXHJcblxyXG5cclxuLyoqIFNFUlZJQ0UgT1JERVIgQ1JFQVRJT04gKiovXHJcbmJvZHlfcmVxID0gW1xyXG4gICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXlcclxuXSBcclxuYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL29yL3VwZGF0ZS9zZXJ2aWNlL29yZGVyP2xhbmd1YWdlPVwiK2xhbmdcclxuVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcclxubG9nLmRlYnVnIFwiYmFzZVVSTCBTTzogXCIgKyBiYXNlVVJMXHJcbmxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNPOiBcIiArIGJvZHlfcmVxXHJcbkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XHJcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcclxuY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XHJcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xyXG5jb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xyXG5jb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XHJcbmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXHJcbmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cclxubG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXHJcbmNvbm5lY3Rpb24uY29ubmVjdCgpO1xyXG5cclxuZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxyXG5kZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcclxuZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXHJcbmRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcclxuXHJcbmlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSAmJiAhY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XHJcbiAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXHJcbiAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXHJcbiAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXHJcblxyXG4gICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxyXG4gICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xyXG5cclxuICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXHJcbiAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxyXG4gICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICBcclxuICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcclxuICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcclxuICAgIFxyXG4gICAgZGVmIHJlc3VsdFxyXG4gICAgaWYgKGpzb25fb2JqZWN0Lm1lc3NhZ2UhPW51bGwpXHJcbiAgICB7XHJcbiAgICAgICAgcmVzdWx0ID0ganNvbl9vYmplY3QubWVzc2FnZVxyXG4gICAgfVxyXG4gICAgaWYoanNvbl9vYmplY3QuZXJyb3JzICE9IG51bGwpe1xyXG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdC50b1N0cmluZygpICsganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcclxuICAgIH1cclxuXHJcblxyXG4gICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxyXG4gICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtU0FQLVNPLUNSRUFURVwiKVxyXG4gICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyByZXN1bHQpXHJcbiAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxyXG4gICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxyXG5cclxuICAgIG91dHB1dC5hZGQoZUxpc3QpXHJcbiAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcclxufWVsc2V7XHJcbiAgICBib2R5X3JlcSA9IFtcclxuICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleSxcclxuICAgIF0gXHJcblxyXG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL3NlcnZpY2Uvb3JkZXIvY29uZmlybWF0aW9uP2xhbmd1YWdlPVwiK2xhbmdcclxuICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNDOiBcIiArIGJvZHlfcmVxXHJcbiAgICBsb2cuZGVidWcgXCJiYXNlVVJMIFNDOiBcIiArIGJhc2VVUkxcclxuICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcclxuICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XHJcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XHJcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcclxuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xyXG4gICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcclxuICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcclxuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXHJcbiAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XHJcbiAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cclxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xyXG5cclxuICAgIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxyXG4gICAgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcclxuXHJcbiAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDFcIikgJiYgIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xyXG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcclxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXHJcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxyXG5cclxuICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XHJcbiAgICAgICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xyXG5cclxuICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxyXG4gICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpXHJcbiAgICAgICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICBcclxuICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlLnRvU3RyaW5nKCkucmVwbGFjZUFsbChcIi9bXmEtekEtWiBdL2dcIixcIlwiKS5yZXBsYWNlQWxsKCdcIicsJycpXHJcbiAgICAgICAgbG9nLmRlYnVnIFwiZXJyb3JzOiBcIiArICBqc29uX29iamVjdC5lcnJvcnMudG9TdHJpbmcoKVxyXG5cclxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXHJcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtU0FQLVNDLUNSRUFURVwiKVxyXG4gICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsganNvbl9vYmplY3QuZXJyb3JzWzBdKVxyXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXHJcbiAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxyXG5cclxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxyXG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxyXG4gICAgfVxyXG59Iiwic2NyaXB0UGF0aCI6bnVsbH0=</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="2">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
        <action id="71" name="Refresh - UK" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">19908</meta>
          <restrict-to>
            <conditions>
              <condition type="class">
                <arg name="FIELD_FUNCTION_ID">67f024c1-3d38-44a7-9231-ba2cd143ae5b</arg>
                <arg name="FIELD_INVERT_CONDITION"></arg>
                <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.conditions.UserCondition</arg>
                <arg name="class.name">com.onresolve.jira.groovy.GroovyCondition</arg>
                <arg name="FIELD_USER_IDS">arianna.fabbri|||JIRAUSER58800</arg>
              </condition>
            </conditions>
          </restrict-to>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">074c68c1-59e7-47b4-bd13-f756a462af64</arg>
              <arg name="FIELD_NOTES">YCFgQ29tcGxldGUgT1BfSU5ESVJFQ1RfSk9CIGZvciBUUkFWRUwgSE9NRSBsb2dzIGFycml2aW5nIGZyb20gbW9iaWxl</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvbjtcclxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouTGV2ZWxcclxuaW1wb3J0IGphdmEuc3FsLlRpbWVzdGFtcFxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxyXG5cclxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxyXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoJy92YXIvYXRsYXNzaWFuL2FwcGxpY2F0aW9uLWRhdGEvc2hhcmVkL3NjcmlwdHMvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxyXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xyXG5cdHByb3BlcnRpZXMubG9hZChpdClcclxufVxyXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXHJcbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTsgXHJcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xyXG4gIFxyXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cclxuQ2xhc3Mgb2JqZWN0VHlwZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVGYWNhZGVcIik7IFxyXG5kZWYgb2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpO1xyXG4gIFxyXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgQXR0cmlidXRlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xyXG5DbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTsgXHJcbmRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XHJcbiAgXHJcbkNsYXNzIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5zZXJ2aWNlcy5tb2RlbC5mYWN0b3J5Lk9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5XCIpOyBcclxuZGVmIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MpO1xyXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxyXG5kZWYgaXFsRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKGlxbEZhY2FkZUNsYXNzKTtcclxuXHJcbmRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0NVUlJFTlRfVVNFUlwiKVswXVxyXG5kZWYgdGt0RnJvbU1vYmlsZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1RLVF9GUk9NX01PQklMRVwiKVswXTtcclxuZGVmIHRrdFZpc0tleSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1RLVF9WSVNJQklMSVRZX0tFWVwiKVswXTtcclxuXHJcbmRlZiBpbmRpcmVjdFRhc2sgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9JTkRJUkVDVF9KT0JcIilbMF07XHJcbmludCBPUEFBID0gcHJvcGVydGllc1snaXNjaGVtYS5hYS5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuaW50IERCTyA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuZGJvLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG5cclxuSXNzdWVNYW5hZ2VyIGlzc3VlTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpXHJcbi8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtNDE5MThcIilcclxuXHJcbmRlZiB1c2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SmlyYUF1dGhlbnRpY2F0aW9uQ29udGV4dCgpLmdldExvZ2dlZEluVXNlcigpXHJcbmRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoREJPLCBcIm9iamVjdFR5cGUgPSBDb21wYW55IEFORCBvYmplY3QgSEFWSU5HIG91dGJvdW5kUmVmZXJlbmNlcyhvYmplY3RUeXBlID0gU3VwcGxpZXIgQU5EIG9iamVjdCBIQVZJTkcgaW5ib3VuZFJlZmVyZW5jZXMob2JqZWN0VHlwZSA9IFN1cHBsaWVyX1RlY2huaWNpYW4gQU5EIFRFQ0hfQUNDT1VOVCA9IFxcXCJcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VycmVudFVzZXIpLnRvU3RyaW5nKCkgKyBcIlxcXCIpKVwiKVxyXG5sb2cuZGVidWcgXCJpcWw6IFwiICsgXCJvYmplY3RUeXBlPUNvbXBhbnkgQU5EIG9iamVjdCBIQVZJTkcgb3V0Ym91bmRSZWZlcmVuY2VzKG9iamVjdFR5cGUgPSBTdXBwbGllciBBTkQgb2JqZWN0IEhBVklORyBpbmJvdW5kUmVmZXJlbmNlcyhvYmplY3RUeXBlID0gU3VwcGxpZXJfVGVjaG5pY2lhbiBBTkQgVEVDSF9BQ0NPVU5UID0gXFxcIlwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXJyZW50VXNlcikudG9TdHJpbmcoKSArIFwiXFxcIikpXCJcclxuXHJcbmlmKG9iamVjdHMgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0a3RGcm9tTW9iaWxlKS50b1N0cmluZygpLmVxdWFscyhcIlRSQVZFTF9IT01FXCIpKXtcclxuICAgIGxvZy5kZWJ1ZyBvYmplY3RzWzBdXHJcbiAgICBcclxuICAgIGRlZiBjb21wYW55PW9iamVjdHNbMF0udG9TdHJpbmcoKVxyXG4gICAgZGVmIGNvbXBhbnlLZXkgPSBjb21wYW55LnN1YnN0cmluZyhjb21wYW55Lmxhc3RJbmRleE9mKCcoJykrMSxjb21wYW55Lmxhc3RJbmRleE9mKCcpJykpXHJcbiAgICBkZWYgY29tcGFueU5hbWUgPSBjb21wYW55LnN1YnN0cmluZygwLGNvbXBhbnkubGFzdEluZGV4T2YoJygnKS0xKVxyXG4gICAgZGVmIGNvbXBhbnlPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oY29tcGFueUtleSlcclxuICAgIGxvZy5pbmZvIFwidGVjaEtleTogXCIgKyBjb21wYW55S2V5XHJcbiAgICBsb2cuaW5mbyAoXCJ0ZWNoTmFtZTogXCIgKyBjb21wYW55TmFtZSlcclxuICAgIGxvZy5pbmZvIChcInRlY2hPYmplY3Q6IFwiICsgY29tcGFueU9iamVjdClcclxuICAgIFxyXG4gICAgb2JqZWN0cyA9IGlxbEZhY2FkZS5maW5kT2JqZWN0c0J5SVFMQW5kU2NoZW1hKERCTywgXCJvYmplY3RUeXBlID0gXFxcIkluZGlyZWN0IFRhc2tcXFwiIEFORCBDT01QQU5ZX1JFRi5LZXkgPSBcIiArIGNvbXBhbnlLZXkudG9TdHJpbmcoKSArIFwiIEFORCBUUkFWRUxfSE9NRSA9IHRydWVcIilcclxuICAgIGxvZy5kZWJ1ZyBcImlxbDogXCIgKyBcIm9iamVjdFR5cGUgPSBcXFwiSW5kaXJlY3QgVGFza1xcXCIgQU5EIENPTVBBTllfUkVGLktleSA9IFwiICsgY29tcGFueUtleS50b1N0cmluZygpICsgXCIgQU5EIFRSQVZFTF9IT01FID0gdHJ1ZVwiXHJcblxyXG4gICAgaWYob2JqZWN0cyl7XHJcbiAgICAgICAgbG9nLmRlYnVnIG9iamVjdHNbMF1cclxuICAgICAgICBkZWYgaW5kVGFza0xpc3QgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgIFx0aW5kVGFza0xpc3QuYWRkKG9iamVjdHNbMF0pXHJcbiAgICAgICAgXHJcbiAgICAgICAgTXV0YWJsZUlzc3VlIG1pID0gKE11dGFibGVJc3N1ZSkgaXNzdWU7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbWkuc2V0Q3VzdG9tRmllbGRWYWx1ZShpbmRpcmVjdFRhc2ssIGluZFRhc2tMaXN0KTtcclxuICAgIFx0Q29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUodXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7XHJcbiAgICB9XHJcbn0iLCJzY3JpcHRQYXRoIjpudWxsfQ==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">1ee27d9e-192f-4cff-8640-7f7f8e369077</arg>
              <arg name="FIELD_NOTES">YCFgSW5oZXJpdCBTQVBfU0VSVklDRV9PUkRFUiBmcm9tIHNlbGVjdGVkICJJbmRpcmVjdCBUYXNrIiArIGNvbXBsZXRlIE9QX1RFQ0hOSUNJQU5TX09OU0lURSArIGNvbXBsZXRlIE9QX0lOVEVSTkFMX1NVUFBMSUVS</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvbjtcclxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouTGV2ZWxcclxuaW1wb3J0IGphdmEuc3FsLlRpbWVzdGFtcFxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxyXG5cclxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxyXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoJy92YXIvYXRsYXNzaWFuL2FwcGxpY2F0aW9uLWRhdGEvc2hhcmVkL3NjcmlwdHMvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxyXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xyXG5cdHByb3BlcnRpZXMubG9hZChpdClcclxufVxyXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXHJcbkNsYXNzIG9iamVjdEZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdEZhY2FkZVwiKTsgXHJcbmRlZiBvYmplY3RGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0RmFjYWRlQ2xhc3MpO1xyXG4gIFxyXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgVHlwZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cclxuQ2xhc3Mgb2JqZWN0VHlwZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVGYWNhZGVcIik7IFxyXG5kZWYgb2JqZWN0VHlwZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlRmFjYWRlQ2xhc3MpO1xyXG4gIFxyXG4vKiBHZXQgSW5zaWdodCBPYmplY3QgQXR0cmlidXRlIEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xyXG5DbGFzcyBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuT2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZVwiKTsgXHJcbmRlZiBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVDbGFzcyk7XHJcbiAgXHJcbkNsYXNzIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5zZXJ2aWNlcy5tb2RlbC5mYWN0b3J5Lk9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5XCIpOyBcclxuZGVmIG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5Q2xhc3MpO1xyXG5DbGFzcyBpcWxGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5JUUxGYWNhZGVcIik7IFxyXG5kZWYgaXFsRmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKGlxbEZhY2FkZUNsYXNzKTtcclxuXHJcbmRlZiBjdXJyZW50VXNlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0NVUlJFTlRfVVNFUlwiKVswXVxyXG5kZWYgc2FwU2VydmljZU9yZGVyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfU0FQX1NFUlZJQ0VfT1JERVJcIilbMF07XHJcbmRlZiBpbnRlcm5hbFN1cHBsaWVyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfSU5URVJOQUxfU1VQUExJRVJcIilbMF07XHJcblxyXG5kZWYgdGt0RnJvbU1vYmlsZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1RLVF9GUk9NX01PQklMRVwiKVswXTtcclxuXHJcbmRlZiBqb2JTdGFydCA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0lORElSRUNUX0pPQl9TVEFSVEVEXCIpWzBdO1xyXG5kZWYgam9iQ29tcGxldGVkID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfSU5ESVJFQ1RfSk9CX0NPTVBMRVRFRFwiKVswXTtcclxuZGVmIHRrdFZpc2liaWxpdHkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9JTkRJUkVDVF9KT0JfVEtUX1ZJU0lCSUxJVFlcIilbMF1cclxuXHJcbmRlZiBvblNpdGVUZWNoc1RyYWNlRmllbGQgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9URUNITklDSUFOX0FDVElWSVRJRVNfVFJBQ0VcIilbMF07XHJcbmRlZiBvblNpdGVUZWNoc1dvcmtUcmFjZUZpZWxkID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEVDSE5JQ0lBTl9BQ1RJVklUSUVTX1RSQUNFX1dPUktcIilbMF07XHJcblxyXG5kZWYgaW5kaXJlY3RUYXNrID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfSU5ESVJFQ1RfSk9CXCIpWzBdO1xyXG5pbnQgT1BBQSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXHJcbmludCBEQk8gPSBwcm9wZXJ0aWVzWydpc2NoZW1hLmRiby5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuXHJcbmRlZiBPTlNJVEVfVEVDSF9SRVBPUlRfT0JKX1RZUEU9cHJvcGVydGllc1snaW9iai5vblNpdGVUZWNoUmVwb3J0J10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG5kZWYgT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfTkFNRT1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVRlY2hSZXBvcnQubmFtZS5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuZGVmIE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX1RFQ0hOSUNJQU5fUkVGPXByb3BlcnRpZXNbJ2lvYmoub25TaXRlVGVjaFJlcG9ydC50ZWNobmljaWFuUmVmLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG5kZWYgT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfU1VQUExJRVJfUkVGPXByb3BlcnRpZXNbJ2lvYmoub25TaXRlVGVjaFJlcG9ydC5zdXBwbGllclJlZi5pZCddID8gcHJvcGVydGllc1snaW9iai5vblNpdGVUZWNoUmVwb3J0LnN1cHBsaWVyUmVmLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKSA6IDMwNzNcclxuZGVmIE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX0pPQl9TVEFSVEVEPXByb3BlcnRpZXNbJ2lvYmoub25TaXRlVGVjaFJlcG9ydC5qb2JTdGFydGVkLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG5kZWYgT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfSk9CX0NPTVBMRVRFRD1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVRlY2hSZXBvcnQuam9iQ29tcGxldGVkLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG5kZWYgT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfVFJBQ0VfQUNUSU9OPXByb3BlcnRpZXNbJ2lvYmoub25TaXRlVGVjaFJlcG9ydC50cmFjZUFjdGlvbi5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuXHJcbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKVxyXG4vL0lzc3VlIGlzc3VlID0gaXNzdWVNYW5hZ2VyLmdldElzc3VlQnlLZXlJZ25vcmVDYXNlKFwiQUFTLTQyMjY1XCIpXHJcbmRlZiBpbmRUYXNrID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShpbmRpcmVjdFRhc2spXHJcbmluZFRhc2sgPSBpbmRUYXNrWzBdLnRvU3RyaW5nKClcclxuaW5kVGFzayA9IGluZFRhc2suc3Vic3RyaW5nKGluZFRhc2suaW5kZXhPZignKCcpKzEsaW5kVGFzay5pbmRleE9mKCcpJykpXHJcblxyXG5kZWYgaW5kVGFza09iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihpbmRUYXNrKVxyXG5sb2cuZGVidWcgaW5kVGFza09iamVjdFxyXG5kZWYgaW5kVGFza1NPID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGluZFRhc2tPYmplY3QuZ2V0SWQoKSwgXCJTQVBfU0VSVklDRV9PUkRFUlwiKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcclxuZGVmIE9uU2l0ZVRlY2hPYmplY3RzID0gbmV3IEFycmF5TGlzdCgpO1xyXG5cclxubG9nLmRlYnVnIFwiU2VydmljZSBPcmRlcjogXCIgKyBpbmRUYXNrU09bMF0uZ2V0VmFsdWUoKVxyXG5cclxuZGVmIHVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcclxuXHJcbk11dGFibGVJc3N1ZSBtaSA9IChNdXRhYmxlSXNzdWUpIGlzc3VlO1xyXG5taS5zZXRDdXN0b21GaWVsZFZhbHVlKHNhcFNlcnZpY2VPcmRlciwgaW5kVGFza1NPWzBdLmdldFZhbHVlKCkpO1xyXG5Db21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZSh1c2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTtcclxuZGVmIG9uU2l0ZVRlY2hzRmllbGQgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUocHJvcGVydGllc1snY2YudGVjaG5pY2lhbnNPbnNpdGUnXS50b1N0cmluZygpKVswXTtcclxuZGVmIG9iamVjdHMgPSBpcWxGYWNhZGUuZmluZE9iamVjdHNCeUlRTEFuZFNjaGVtYShPUEFBLCBcIm9iamVjdFR5cGUgPSBUZWNobmljaWFuIEFORCBURUNITklDSUFOX1JFRi5URUNIX0FDQ09VTlQgPVxcXCJcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VycmVudFVzZXIpLnRvU3RyaW5nKCkgKyBcIlxcXCJcIilcclxubG9nLndhcm4gXCJpcWw6IFwiICsgXCJvYmplY3RUeXBlID0gVGVjaG5pY2lhbiBBTkQgVEVDSE5JQ0lBTl9SRUYuVEVDSF9BQ0NPVU5UID1cXFwiXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1cnJlbnRVc2VyKS50b1N0cmluZygpICsgXCJcXFwiXCJcclxuXHJcbmlmKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGt0RnJvbU1vYmlsZSkudG9TdHJpbmcoKS5lcXVhbHMoXCJUUkFWRUxfSE9NRVwiKSl7XHJcbiAgICBkZWYgaW5kVGFza1Zpc2liaWxpdHkgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oaW5kVGFza09iamVjdC5nZXRJZCgpLCBcIkRFRkFVTFRfVklTSUJJTElUWVwiKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcclxuXHRkZWYgdmlzaWJpbGl0eUtleSA9IG5ldyBBcnJheUxpc3QoKVxyXG5cdHZpc2liaWxpdHlLZXkuYWRkKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihpbmRUYXNrVmlzaWJpbGl0eVswXS5nZXRWYWx1ZSgpKSlcclxuICAgIG1pLnNldEN1c3RvbUZpZWxkVmFsdWUodGt0VmlzaWJpbGl0eSwgdmlzaWJpbGl0eUtleSk7XHJcbiAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZSh1c2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTtcclxufVxyXG5cclxuaWYob2JqZWN0cyAmJiBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHRrdEZyb21Nb2JpbGUpLnRvU3RyaW5nKCkuZXF1YWxzKFwiVFJBVkVMX0hPTUVcIikpe1xyXG4gICAgbG9nLmRlYnVnIG9iamVjdHNbMF1cclxuXHJcbiAgICAvL2V4dHJhY3QgaW5zaWdodCBrZXkgYW5nIGdldCBvYmplY3RcclxuICAgIGRlZiB0ZWNoPW9iamVjdHNbMF0udG9TdHJpbmcoKVxyXG4gICAgZGVmIHRlY2hLZXkgPSB0ZWNoLnN1YnN0cmluZyh0ZWNoLmluZGV4T2YoJygnKSsxLHRlY2guaW5kZXhPZignKScpKVxyXG4gICAgZGVmIHRlY2hOYW1lID0gdGVjaC5zdWJzdHJpbmcoMCx0ZWNoLmluZGV4T2YoJygnKS0xKVxyXG4gICAgZGVmIHRlY2hPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4odGVjaEtleSlcclxuICAgIGxvZy5pbmZvIFwidGVjaEtleTogXCIgKyB0ZWNoS2V5XHJcbiAgICBsb2cuaW5mbyAoXCJ0ZWNoTmFtZTogXCIgKyB0ZWNoTmFtZSlcclxuICAgIGxvZy5pbmZvIChcInRlY2hPYmplY3Q6IFwiICsgdGVjaE9iamVjdClcclxuXHJcbiAgICBkZWYgb2JqZWN0VHlwZU9uU2l0ZVRlY2hSZXBvcnQgPSBvYmplY3RUeXBlRmFjYWRlLmxvYWRPYmplY3RUeXBlQmVhbihPTlNJVEVfVEVDSF9SRVBPUlRfT0JKX1RZUEUpO1xyXG4gICAgZGVmIG5ld09iamVjdEJlYW4gPSBvYmplY3RUeXBlT25TaXRlVGVjaFJlcG9ydC5jcmVhdGVNdXRhYmxlT2JqZWN0QmVhbigpO1xyXG5cclxuICAgIGRlZiBvYmplY3RBdHRyaWJ1dGVCZWFucyA9IG5ldyBBcnJheUxpc3QoKTtcclxuICAgIGRlZiBuYW1lT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihPTlNJVEVfVEVDSF9SRVBPUlRfQVRUUl9OQU1FKTsgXHJcbiAgICBsb2cuZGVidWcgbmFtZU9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuXHJcbiAgICBvYmplY3RBdHRyaWJ1dGVCZWFucy5hZGQob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkuY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbkZvck9iamVjdChuZXdPYmplY3RCZWFuLCBuYW1lT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4sIHRlY2hOYW1lKSk7XHJcblxyXG5cdGRlZiBhY3Rpb25PYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX1RSQUNFX0FDVElPTik7IFxyXG5cdG9iamVjdEF0dHJpYnV0ZUJlYW5zLmFkZChvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeS5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuRm9yT2JqZWN0KG5ld09iamVjdEJlYW4sIGFjdGlvbk9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuLCBcIklORElSRUNUX0pPQlwiKSk7XHJcblxyXG4gICAgbmV3T2JqZWN0QmVhbi5zZXRPYmplY3RBdHRyaWJ1dGVCZWFucyhvYmplY3RBdHRyaWJ1dGVCZWFucyk7XHJcbiAgICAvKiBTdG9yZSB0aGUgb2JqZWN0IGludG8gSW5zaWdodC4gVGhlIG5ldyBPYmplY3RCZWFuIHdpbGwgYmUgdXBkYXRlZCB3aXRoIGFuIHVuaXF1ZSBJRCAqL1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBuZXdPYmplY3RCZWFuID0gb2JqZWN0RmFjYWRlLnN0b3JlT2JqZWN0QmVhbihuZXdPYmplY3RCZWFuKTtcclxuICAgICAgICBsb2cud2FybihcIm5ld09iamVjdEJlYW46IFwiICsgbmV3T2JqZWN0QmVhbik7XHJcbiAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XHJcbiAgICAgICAgbG9nLndhcm4oXCJDb3VsZCBub3QgY3JlYXRlIGlzc3VlIGR1ZSB0byB2YWxpZGF0aW9uIGV4Y2VwdGlvbjpcIiArIHZpZS5nZXRNZXNzYWdlKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qIFVwZGF0ZSBURUNITklDSUFOX1JFRiBvbiB0aGUgbmV3T2JqZWN0ICovXHRcdCAgICAgICAgXHJcbiAgICBkZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihPTlNJVEVfVEVDSF9SRVBPUlRfQVRUUl9URUNITklDSUFOX1JFRikuY3JlYXRlTXV0YWJsZSgpIC8vVGhlIGlkIG9mIHRoZSBhdHRyaWJ1dGVcclxuXHJcbiAgICAvKiBDcmVhdGUgdGhlIG5ldyBhdHRyaWJ1dGUgYmVhbiBiYXNlZCBvbiB0aGUgdmFsdWUgKi9cclxuICAgIGRlZiBuZXdPYmplY3RBdHRyaWJ1dGVCZWFuID0gb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkuY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbkZvck9iamVjdChuZXdPYmplY3RCZWFuLCBvYmplY3RUeXBlQXR0cmlidXRlQmVhbiwgdGVjaEtleSk7XHJcbiAgICAvKiBMb2FkIHRoZSBhdHRyaWJ1dGUgYmVhbiAqL1xyXG4gICAgZGVmIG9iamVjdEF0dHJpYnV0ZUJlYW4gPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obmV3T2JqZWN0QmVhbi5nZXRJZCgpLCB0ZWNoS2V5KTtcclxuICAgIGlmIChvYmplY3RBdHRyaWJ1dGVCZWFuICE9IG51bGwpIHtcclxuICAgICAgICAvKiBJZiBhdHRyaWJ1dGUgZXhpc3QgcmV1c2UgdGhlIG9sZCBpZCBmb3IgdGhlIG5ldyBhdHRyaWJ1dGUgKi9cclxuICAgICAgICBuZXdPYmplY3RBdHRyaWJ1dGVCZWFuLnNldElkKG9iamVjdEF0dHJpYnV0ZUJlYW4uZ2V0SWQoKSk7XHJcbiAgICB9XHJcbiAgICAvKiBTdG9yZSB0aGUgb2JqZWN0IGF0dHJpYnV0ZSBpbnRvIEluc2lnaHQuICovXHJcbiAgICB0cnkge1xyXG4gICAgICAgIG9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0RmFjYWRlLnN0b3JlT2JqZWN0QXR0cmlidXRlQmVhbihuZXdPYmplY3RBdHRyaWJ1dGVCZWFuKTtcclxuICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHtcclxuICAgICAgICBsb2cud2FybihcIkNvdWxkIG5vdCB1cGRhdGUgb2JqZWN0IGF0dHJpYnV0ZSBkdWUgdG8gdmFsaWRhdGlvbiBleGNlcHRpb246XCIgKyB2aWUuZ2V0TWVzc2FnZSgpKTtcclxuICAgIH0gIFxyXG5cclxuICAgIC8qVXBkYXRlIEpPQl9TVEFSVEVEIC0gSk9CX0NPTVBMRVRFRCBvbiB0aGUgbmV3IG9iamVjdCovXHJcbiAgICBkZWYgb2JqID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKG5ld09iamVjdEJlYW4uZ2V0SWQoKSk7XHJcbiAgICBsb2cuZGVidWcgb2JqXHJcbiAgICBcclxuICAgIGRlZiBKb2JTdGFydGVkVHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihPTlNJVEVfVEVDSF9SRVBPUlRfQVRUUl9KT0JfU1RBUlRFRCk7IFxyXG4gICAgZGVmIEpvYkNvbXBsZXRlZFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfSk9CX0NPTVBMRVRFRCk7IFxyXG5cdGRlZiBhY3Rpb25UeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX1RSQUNFX0FDVElPTik7IFxyXG4gICAgICAgIFxyXG4gICAgbG9nLmluZm8gXCJhdHRyaWJUeXBlOiBcIiArIEpvYlN0YXJ0ZWRUeXBlQXR0cmlidXRlQmVhbi50b1N0cmluZygpXHJcbiAgICBkZWYgbmV3QXR0cmliUyA9IG9iai5jcmVhdGVPYmplY3RBdHRyaWJ1dGVCZWFuKEpvYlN0YXJ0ZWRUeXBlQXR0cmlidXRlQmVhbik7XHJcbiAgICBkZWYgbmV3QXR0cmliVmFsdWVTID0gbmV3QXR0cmliUy5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIG5ld0F0dHJpYlZhbHVlUy5zZXREYXRlVmFsdWUoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShqb2JTdGFydCkpO1xyXG4gICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSkge1xyXG4gICAgICAgIGxvZy53YXJuKFwiU0VUSU5TSUdIVFZBTFVFOiBVbmFibGUgdG8gc2V0IGF0dHJpYnV0ZSBcIiArIGF0dHJpYlR5cGUudG9TdHJpbmcoKSArIFwiIHRvIFwiICsgKG5ldyBUaW1lc3RhbXAoKG5ldyBEYXRlKCkpLnRpbWUpKS50b1N0cmluZygpICsgXCIuIEV4aXRpbmcuXCIpO1xyXG4gICAgICAgIGxvZy53YXJuKFwiU0VUSU5TSUdIVFZBTFVFOiBcIiArIHZpZS5nZXRNZXNzYWdlKCkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGRlZiBhdHRyaWJWYWx1ZXNTID0gbmV3QXR0cmliUy5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7XHJcbiAgICBhdHRyaWJWYWx1ZXNTLmFkZChuZXdBdHRyaWJWYWx1ZVMpO1xyXG4gICAgbmV3QXR0cmliUy5zZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKGF0dHJpYlZhbHVlc1MpO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgbmV3QXR0cmliUyA9IG9iamVjdEZhY2FkZS5zdG9yZU9iamVjdEF0dHJpYnV0ZUJlYW4obmV3QXR0cmliUyk7XHJcbiAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XHJcbiAgICAgICAgbG9nLndhcm4oXCJTRVRJTlNJR0hUVkFMVUU6IFVuYWJsZSB0byBzYXZlIGNoYW5nZXMuIEV4aXRpbmcuXCIpO1xyXG4gICAgICAgIGxvZy53YXJuKFwiU0VUSU5TSUdIVFZBTFVFOiBcIiArIHZpZS5nZXRNZXNzYWdlKCkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBsb2cuaW5mbyBcImF0dHJpYlR5cGU6IFwiICsgSm9iQ29tcGxldGVkVHlwZUF0dHJpYnV0ZUJlYW4udG9TdHJpbmcoKVxyXG4gICAgZGVmIG5ld0F0dHJpYkMgPSBvYmouY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbihKb2JDb21wbGV0ZWRUeXBlQXR0cmlidXRlQmVhbik7XHJcbiAgICBkZWYgbmV3QXR0cmliVmFsdWVDID0gbmV3QXR0cmliQy5jcmVhdGVPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW4oKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIG5ld0F0dHJpYlZhbHVlQy5zZXREYXRlVmFsdWUoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShqb2JDb21wbGV0ZWQpKTtcclxuICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiB2aWUpIHtcclxuICAgICAgICBsb2cud2FybihcIlNFVElOU0lHSFRWQUxVRTogVW5hYmxlIHRvIHNldCBhdHRyaWJ1dGUgXCIgKyBhdHRyaWJUeXBlLnRvU3RyaW5nKCkgKyBcIiB0byBcIiArIChuZXcgVGltZXN0YW1wKChuZXcgRGF0ZSgpKS50aW1lKSkudG9TdHJpbmcoKSArIFwiLiBFeGl0aW5nLlwiKTtcclxuICAgICAgICBsb2cud2FybihcIlNFVElOU0lHSFRWQUxVRTogXCIgKyB2aWUuZ2V0TWVzc2FnZSgpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBkZWYgYXR0cmliVmFsdWVzQyA9IG5ld0F0dHJpYkMuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpO1xyXG4gICAgYXR0cmliVmFsdWVzQy5hZGQobmV3QXR0cmliVmFsdWVDKTtcclxuICAgIG5ld0F0dHJpYkMuc2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucyhhdHRyaWJWYWx1ZXNDKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIG5ld0F0dHJpYkMgPSBvYmplY3RGYWNhZGUuc3RvcmVPYmplY3RBdHRyaWJ1dGVCZWFuKG5ld0F0dHJpYkMpO1xyXG4gICAgfSBjYXRjaCAoRXhjZXB0aW9uIHZpZSkge1xyXG4gICAgICAgIGxvZy53YXJuKFwiU0VUSU5TSUdIVFZBTFVFOiBVbmFibGUgdG8gc2F2ZSBjaGFuZ2VzLiBFeGl0aW5nLlwiKTtcclxuICAgICAgICBsb2cud2FybihcIlNFVElOU0lHSFRWQUxVRTogXCIgKyB2aWUuZ2V0TWVzc2FnZSgpLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKiBVcGRhdGUgU1VQUExJRVJfUkVGIG9uIHRoZSBuZXdPYmplY3QgKi9cdFxyXG4gICAgLyogR2V0IFNVUFBMSUVSX1JFRiBmcm9tIFRlY2ggKi9cclxuICAgIGRlZiBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbih0ZWNoT2JqZWN0LmdldElkKCksIChwcm9wZXJ0aWVzWydpb2JqLnRlY2hPbnNpdGUuc3VwcGxpZXJSZWYnXSA/IHByb3BlcnRpZXNbJ2lvYmoudGVjaE9uc2l0ZS5zdXBwbGllclJlZiddLnRvU3RyaW5nKCkgOiBcIlNVUFBMSUVSX1JFRlwiKSkuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICBkZWYgc3VwcFJlZiA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKS50b1N0cmluZygpXHJcbiAgICBkZWYgc3VwcCA9IHN1cHBSZWYudG9TdHJpbmcoKVxyXG4gICAgbG9nLmluZm8gXCJzdXBwOiBcIiArIHN1cHBcclxuICAgIGRlZiBzdXBwUmVmSWQgPSBzdXBwLnN1YnN0cmluZyhzdXBwLmluZGV4T2YoJygnKSsxLHN1cHAuaW5kZXhPZignKScpKVxyXG4gICAgbG9nLmluZm8gXCJzdXBwUmVmSWQ6IFwiICsgc3VwcFJlZklkXHJcbiAgICBkZWYgc3VwcFJlZktleSA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuYWEnXS50b1N0cmluZygpICsgXCItXCIgKyBzdXBwUmVmSWRcclxuICAgIGxvZy5pbmZvIFwic3VwcFJlZktleTogXCIgKyBzdXBwUmVmS2V5XHJcbiAgICBkZWYgc3VwcFJlZk9iaiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbihwcm9wZXJ0aWVzWydpc2NoZW1hLmFhJ10udG9TdHJpbmcoKSArIFwiLVwiICsgc3VwcFJlZklkKVxyXG4gICAgbG9nLmluZm8gXCJzdXBwUmVmT2JqOiBcIiArIHN1cHBSZWZPYmpcclxuICAgIFxyXG4gICAgZGVmIHN1cHBMaXN0ID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICBzdXBwTGlzdC5hZGQoc3VwcFJlZk9iailcclxuXHJcbiAgICBtaS5zZXRDdXN0b21GaWVsZFZhbHVlKGludGVybmFsU3VwcGxpZXIsIHN1cHBMaXN0KTtcclxuICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKHVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xyXG4gICAgXHJcbiAgICBkZWYgc3VwcE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfU1VQUExJRVJfUkVGKS5jcmVhdGVNdXRhYmxlKCkgLy9UaGUgaWQgb2YgdGhlIGF0dHJpYnV0ZVxyXG5cclxuICAgIC8qIENyZWF0ZSB0aGUgbmV3IGF0dHJpYnV0ZSBiZWFuIGJhc2VkIG9uIHRoZSB2YWx1ZSAqL1xyXG4gICAgbmV3T2JqZWN0QXR0cmlidXRlQmVhbiA9IG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5LmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW5Gb3JPYmplY3QobmV3T2JqZWN0QmVhbiwgc3VwcE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuLCBzdXBwUmVmS2V5KTtcclxuICAgIC8qIExvYWQgdGhlIGF0dHJpYnV0ZSBiZWFuICovXHJcbiAgICBvYmplY3RBdHRyaWJ1dGVCZWFuID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKG5ld09iamVjdEJlYW4uZ2V0SWQoKSwgc3VwcFJlZktleSk7XHJcbiAgICBpZiAob2JqZWN0QXR0cmlidXRlQmVhbiAhPSBudWxsKSB7XHJcbiAgICAgICAgLyogSWYgYXR0cmlidXRlIGV4aXN0IHJldXNlIHRoZSBvbGQgaWQgZm9yIHRoZSBuZXcgYXR0cmlidXRlICovXHJcbiAgICAgICAgbmV3T2JqZWN0QXR0cmlidXRlQmVhbi5zZXRJZChvYmplY3RBdHRyaWJ1dGVCZWFuLmdldElkKCkpO1xyXG4gICAgfVxyXG4gICAgLyogU3RvcmUgdGhlIG9iamVjdCBhdHRyaWJ1dGUgaW50byBJbnNpZ2h0LiAqL1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBvYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdEZhY2FkZS5zdG9yZU9iamVjdEF0dHJpYnV0ZUJlYW4obmV3T2JqZWN0QXR0cmlidXRlQmVhbik7XHJcbiAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XHJcbiAgICAgICAgbG9nLndhcm4oXCJDb3VsZCBub3QgdXBkYXRlIG9iamVjdCBhdHRyaWJ1dGUgZHVlIHRvIHZhbGlkYXRpb24gZXhjZXB0aW9uOlwiICsgdmllLmdldE1lc3NhZ2UoKSk7XHJcbiAgICB9ICBcclxuXHJcbiAgICBPblNpdGVUZWNoT2JqZWN0cy5hZGQobmV3T2JqZWN0QmVhbilcclxuXHJcbiAgICBsb2cuaW5mbyAoXCJPblNpdGVUZWNoT2JqZWN0czogXCIgKyBPblNpdGVUZWNoT2JqZWN0cylcclxuICAgIFxyXG4gICAgaWYgKCFPblNpdGVUZWNoT2JqZWN0cy5pc0VtcHR5KCkpIHtcclxuICAgICAgICBtaS5zZXRDdXN0b21GaWVsZFZhbHVlKG9uU2l0ZVRlY2hzRmllbGQsIE9uU2l0ZVRlY2hPYmplY3RzKTtcclxuICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZSh1c2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgLyptaS5zZXRDdXN0b21GaWVsZFZhbHVlKG9uU2l0ZVRlY2hzVHJhY2VGaWVsZCwgT25TaXRlVGVjaE9iamVjdHMpO1xyXG4gICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKHVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpOyovXHJcbiAgICAgICAgXHJcbiAgICAgICAgbWkuc2V0Q3VzdG9tRmllbGRWYWx1ZShvblNpdGVUZWNoc1dvcmtUcmFjZUZpZWxkLCBPblNpdGVUZWNoT2JqZWN0cyk7XHJcbiAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUodXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7XHJcblxyXG4gICAgfSAgXHJcbn1lbHNle1xyXG4gICAgLypUaWNrZXQgY3JlYXRvIGRhIGJhY2tvZmZpY2UqL1xyXG4gICAgLypFc3RyYXJyZSBDb21wYW55IGUgSW50ZXJuYWwgU3VwcGxpZXIgZGFsIE9QX0lORElSRUNUX0pPQl9US1RfVklTSUJJTElUWSovXHJcbiAgICBsb2cuZGVidWcgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh0a3RWaXNpYmlsaXR5KVxyXG4gICAgZGVmIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodGt0VmlzaWJpbGl0eSlbMF0uZ2V0SWQoKSwgXCJDT01QQU5ZX1JFRlwiKS5jcmVhdGVNdXRhYmxlKClcclxuICAgIGRlZiBjb21wYW55UmVmID0gb2JUcmlhZ2UuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKClcclxuXHJcbiAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wYW55UmVmLCBcIlNVUFBMSUVSX1JFRlwiKS5jcmVhdGVNdXRhYmxlKClcclxuICAgIGRlZiBzdXBwUmVmSWQgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXHJcbiAgICBsb2cuaW5mbyBcInN1cHBSZWZJZDogXCIgKyBzdXBwUmVmSWRcclxuICAgIGRlZiBzdXBwUmVmS2V5ID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8nXS50b1N0cmluZygpICsgXCItXCIgKyBzdXBwUmVmSWRcclxuXHJcbiAgICBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoT1BBQSwgXCJvYmplY3RUeXBlID0gU3VwcGxpZXIgQU5EIFNVUFBMSUVSX1JFRiA9XFxcIlwiICsgc3VwcFJlZktleSArIFwiXFxcIlwiKVxyXG4gICAgbG9nLndhcm4gXCJpcWw6IFwiICsgXCJvYmplY3RUeXBlID0gU3VwcGxpZXIgQU5EIFNVUFBMSUVSX1JFRiA9XFxcIlwiICsgc3VwcFJlZktleSArIFwiXFxcIlwiXHJcblxyXG4gICAgaWYob2JqZWN0cyl7XHJcbiAgICAgICAgbG9nLmRlYnVnIG9iamVjdHNbMF1cclxuXHJcbiAgICAgICAgZGVmIHN1cHBMaXN0ID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICAgICAgc3VwcExpc3QuYWRkKG9iamVjdHNbMF0pXHJcblxyXG4gICAgICAgIG1pLnNldEN1c3RvbUZpZWxkVmFsdWUoaW50ZXJuYWxTdXBwbGllciwgc3VwcExpc3QpO1xyXG4gICAgICAgIENvbXBvbmVudEFjY2Vzc29yLmdldElzc3VlTWFuYWdlcigpLnVwZGF0ZUlzc3VlKHVzZXIsIG1pLCBFdmVudERpc3BhdGNoT3B0aW9uLkRPX05PVF9ESVNQQVRDSCwgZmFsc2UpO1xyXG4gICAgfSBcclxufSIsInNjcmlwdFBhdGgiOm51bGwsInBhcmFtZXRlcnMiOnt9fQ==</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">50ecadd2-211d-42c2-a150-5098f76a0bd8</arg>
              <arg name="FIELD_NOTES">YCFgVXBkYXRlIEpPQl9DT01QTEVURUQgb24gSU5ESVJFQ1QgVEFTSyAmJiBVcGRhdGUgU08=</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvblNsdXJwZXI7XHJcbmltcG9ydCBncm9vdnkuanNvbi5TdHJlYW1pbmdKc29uQnVpbGRlcjtcclxuaW1wb3J0IGNvbS5vcGVuc3ltcGhvbnkud29ya2Zsb3cuSW52YWxpZElucHV0RXhjZXB0aW9uXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuQ3VzdG9tRmllbGRNYW5hZ2VyO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLmZpZWxkcy5DdXN0b21GaWVsZDtcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5pc3N1ZS5Jc3N1ZU1hbmFnZXI7XHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuY29tcG9uZW50LkNvbXBvbmVudEFjY2Vzc29yO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLk11dGFibGVJc3N1ZVxyXG5pbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvZGVjLmJpbmFyeS5CYXNlNjQ7XHJcbmltcG9ydCBvcmcuYXBhY2hlLmxvZzRqLkNhdGVnb3J5XHJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVyXHJcbmltcG9ydCBjb20ub25yZXNvbHZlLnNjcmlwdHJ1bm5lci5ydW5uZXIuU2NyaXB0UnVubmVySW1wbFxyXG5pbXBvcnQgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQgXHJcbmltcG9ydCBqYXZhLnV0aWwuRGF0ZVxyXG5pbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuaW5kZXguSXNzdWVJbmRleGluZ1NlcnZpY2VcclxuaW1wb3J0IGNvbS5hdGxhc3NpYW4uamlyYS5ldmVudC50eXBlLkV2ZW50RGlzcGF0Y2hPcHRpb25cclxuXHJcblByb3BlcnRpZXMgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0aWVzKClcclxuRmlsZSBwcm9wZXJ0aWVzRmlsZSA9IG5ldyBGaWxlKFNjcmlwdFJ1bm5lckltcGwuZ2V0UGx1Z2luQ29tcG9uZW50KFNjcmlwdFJ1bm5lcikuZ2V0Um9vdHNGb3JEaXNwbGF5KCkgKyAnL29wcHJvamVjdC5wcm9wZXJ0aWVzJylcclxucHJvcGVydGllc0ZpbGUud2l0aElucHV0U3RyZWFtIHtcclxuXHRwcm9wZXJ0aWVzLmxvYWQoaXQpXHJcbn1cclxubG9nLnNldExldmVsKG9yZy5hcGFjaGUubG9nNGouTGV2ZWwuREVCVUcpXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUubGluay5Jc3N1ZUxpbmtcclxuXHJcbklzc3VlTWFuYWdlciBpc3N1ZU1hbmFnZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKTtcclxuQ3VzdG9tRmllbGRNYW5hZ2VyIGN1c3RvbUZpZWxkTWFuYWdlciA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpO1xyXG5cclxuZGVmIHNhcFNOID0gIENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1NBUF9TRVJWSUNFX05PVElGSUNBVElPTlwiKVswXVxyXG5kZWYgcmVxdWVzdE1ldGhvZFxyXG5kZWYgYmFzZVVSTFxyXG5cclxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xyXG5DbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7IFxyXG5kZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcclxuICBcclxuLyogR2V0IEluc2lnaHQgT2JqZWN0IFR5cGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXHJcbkNsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpOyBcclxuZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcclxuICBcclxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cclxuQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7IFxyXG5kZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xyXG4gIFxyXG5DbGFzcyBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuc2VydmljZXMubW9kZWwuZmFjdG9yeS5PYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeVwiKTsgXHJcbmRlZiBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzKTtcclxuQ2xhc3MgaXFsRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuSVFMRmFjYWRlXCIpOyBcclxuZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XHJcblxyXG5Jc3N1ZUluZGV4aW5nU2VydmljZSBpc3N1ZUluZGV4aW5nU2VydmljZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldENvbXBvbmVudChJc3N1ZUluZGV4aW5nU2VydmljZSlcclxuLy9Jc3N1ZSBpc3N1ZSA9IGlzc3VlTWFuYWdlci5nZXRJc3N1ZUJ5S2V5SWdub3JlQ2FzZShcIkFBUy01OTUxNFwiKVxyXG5cclxuZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfQ1VSUkVOVF9VU0VSXCIpWzBdXHJcbmRlZiBvblNpdGVUZWNoc1RyYWNlRmllbGQgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9URUNITklDSUFOX0FDVElWSVRJRVNfVFJBQ0VcIilbMF07XHJcbmRlZiBvblNpdGVUZWNoc1RyYXZlbEZpZWxkID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEVDSE5JQ0lBTl9UUkFWRUxcIilbMF07XHJcbmRlZiB0a3RGcm9tTW9iaWxlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEtUX0ZST01fTU9CSUxFXCIpWzBdXHJcbmRlZiB0a3RKb2JTdGFydGVkID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfSU5ESVJFQ1RfSk9CX1NUQVJURURcIilbMF1cclxuZGVmIHRrdEpvYkNvbXBsZXRlZCA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0lORElSRUNUX0pPQl9DT01QTEVURURcIilbMF1cclxuZGVmIHVzZXJMYW5ndWFnZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0NVUlJFTlRVU0VSX0xBTkdVQUdFXCIpXHJcbmRlZiBkb2NMYW5ndWFnZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0RPQ19HRU5FUkFUSU9OX0xBTkdVQUdFXCIpXHJcblxyXG5kZWYgT25TaXRlVGVjaE9iamVjdHMgPSBuZXcgQXJyYXlMaXN0KCk7XHJcbmludCBPUEFBID0gcHJvcGVydGllc1snaXNjaGVtYS5hYS5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuaW50IERCTyA9IHByb3BlcnRpZXNbJ2lzY2hlbWEuZGJvLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG5cclxuLyogLS0tLS0tLS0tLS0tIERFRklORSBBQ1RJT04gVE8gQkUgVFJBQ0VEIEFORCBTRVQgVE8gQkUgRE9ORSAtLS0tLS0tLS0tLS0tICovXHJcbmRlZiBBQ1RJT04gPSBwcm9wZXJ0aWVzWyd3Zi50ci5pbmRpcmVjdFRhc2suYWN0aW9uJ10udG9TdHJpbmcoKVxyXG5kZWYgU0VUID0gcHJvcGVydGllc1snd2YudHIuc3RhcnRJbmRpcmVjdFRhc2suc2V0J10udG9TdHJpbmcoKVxyXG5cclxuZGVmIE9OU0lURV9URUNIX1JFUE9SVF9PQkpfVFlQRT1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVRlY2hSZXBvcnQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXHJcbmRlZiBPTlNJVEVfVEVDSF9SRVBPUlRfQVRUUl9OQU1FPXByb3BlcnRpZXNbJ2lvYmoub25TaXRlVGVjaFJlcG9ydC5uYW1lLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG5kZWYgT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfVEVDSE5JQ0lBTl9SRUY9cHJvcGVydGllc1snaW9iai5vblNpdGVUZWNoUmVwb3J0LnRlY2huaWNpYW5SZWYuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXHJcbmRlZiBPTlNJVEVfVEVDSF9SRVBPUlRfQVRUUl9KT0JfQ09NUExFVEVEPXByb3BlcnRpZXNbJ2lvYmoub25TaXRlVGVjaFJlcG9ydC5qb2JDb21wbGV0ZWQuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXHJcbmRlZiBPTlNJVEVfVEVDSF9SRVBPUlRfQVRUUl9KT0JfU1RBUlRFRD1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVRlY2hSZXBvcnQuam9iU3RhcnRlZC5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuZGVmIE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX1RSQUNFX0FDVElPTj1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVRlY2hSZXBvcnQudHJhY2VBY3Rpb24uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXHJcblxyXG5kZWYgZGF0ZVRvZGF5ID0gbmV3IFNpbXBsZURhdGVGb3JtYXQoXCJNL2RkL3l5eXlcIikuZm9ybWF0KG5ldyBEYXRlKCkpIFxyXG5kZWYgbGFzdEFjdGl2aXR5LCBqb2JDb21wbGV0ZWRcclxuXHJcbmRlZiBsYW5nPSdlbicsIGRvY0xhbmdcclxuZG9jTGFuZyA9IGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoZG9jTGFuZ3VhZ2UpXHJcbmlmKGRvY0xhbmc9PW51bGwgJiYgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh1c2VyTGFuZ3VhZ2UpLnRvU3RyaW5nKCkhPVwibnVsbFwiKXtcclxuICAgIGxhbmcgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHVzZXJMYW5ndWFnZSlcclxufWVsc2V7XHJcbiAgICBpZihkb2NMYW5nIT1udWxsKXtcclxuICAgICAgICBkZWYgcktleSA9IGRvY0xhbmcudG9TdHJpbmcoKS5zdWJzdHJpbmcoZG9jTGFuZy50b1N0cmluZygpLmxhc3RJbmRleE9mKCcoJykrMSxkb2NMYW5nLnRvU3RyaW5nKCkubGFzdEluZGV4T2YoJyknKSlcclxuICAgICAgICBpZihvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHJLZXkpLmdldElkKCksIFwiSVNPX0NPREVcIikpe1xyXG4gICAgICAgICAgICBkZWYgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4ob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RCZWFuKHJLZXkpLmdldElkKCksIFwiSVNPX0NPREVcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICAgICAgICAgIGxhbmcgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpXHJcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImxhbmc6IFwiICsgbGFuZ1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSBcclxuXHJcbnJlcXVlc3RNZXRob2QgPSBcIlBPU1RcIjtcclxuXHJcbmRlZiBib2R5X3JlcSA9IFtdXHJcblxyXG5cclxuLyoqIFNFUlZJQ0UgT1JERVIgQ1JFQVRJT04gKiovXHJcbmJvZHlfcmVxID0gW1xyXG4gICAgXCJpc3N1ZUtleVwiOiBpc3N1ZS5rZXlcclxuXSBcclxuYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL29yL3VwZGF0ZS9zZXJ2aWNlL29yZGVyP2xhbmd1YWdlPVwiK2xhbmdcclxuVVJMIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcclxubG9nLmRlYnVnIFwiYmFzZVVSTCBTTzogXCIgKyBiYXNlVVJMXHJcbmxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNPOiBcIiArIGJvZHlfcmVxXHJcbkh0dHBVUkxDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XHJcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdE1ldGhvZChyZXF1ZXN0TWV0aG9kKTtcclxuY29ubmVjdGlvbi5zZXRSZXF1ZXN0UHJvcGVydHkoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XHJcbmNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xyXG5jb25uZWN0aW9uLnNldERvT3V0cHV0KHRydWUpO1xyXG5jb25uZWN0aW9uLnNldERvSW5wdXQodHJ1ZSk7XHJcbmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXHJcbmNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtLndpdGhXcml0ZXIoXCJVVEYtOFwiKSB7IG5ldyBTdHJlYW1pbmdKc29uQnVpbGRlcihpdCwgYm9keV9yZXEpIH1cclxubG9nLmRlYnVnIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXHJcbmNvbm5lY3Rpb24uY29ubmVjdCgpO1xyXG5cclxuZGVmIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxyXG5kZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcclxuZGVmIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXHJcbmRlZiBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcclxuXHJcbmlmICghY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMVwiKSAmJiAhY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKS50b1N0cmluZygpLmVxdWFscyhcIjIwMFwiKSl7XHJcbiAgICBsb2cuZGVidWcgXCJ1cmw6IFwiICsgdXJsXHJcbiAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXHJcbiAgICBsb2cuZGVidWcgXCJSZXNwb25zZU1lc3NhZ2U6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlTWVzc2FnZSgpXHJcblxyXG4gICAgZGVmIG91dHB1dE1zZyA9ICgoSHR0cFVSTENvbm5lY3Rpb24pY29ubmVjdGlvbikuZXJyb3JTdHJlYW0udGV4dFxyXG4gICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xyXG5cclxuICAgIGRlZiBqc29uU2x1cnBlciA9IG5ldyBKc29uU2x1cnBlcigpXHJcbiAgICBkZWYganNvbl9vYmplY3QgPSBqc29uU2x1cnBlci5wYXJzZVRleHQob3V0cHV0TXNnKVxyXG4gICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICBcclxuICAgIGxvZy5kZWJ1ZyBcIm1lc3NhZ2U6IFwiICsgIGpzb25fb2JqZWN0Lm1lc3NhZ2VcclxuICAgIGxvZy5kZWJ1ZyBcImVycm9yczogXCIgKyAganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcclxuICAgIFxyXG4gICAgZGVmIHJlc3VsdFxyXG4gICAgaWYgKGpzb25fb2JqZWN0Lm1lc3NhZ2UhPW51bGwpXHJcbiAgICB7XHJcbiAgICAgICAgcmVzdWx0ID0ganNvbl9vYmplY3QubWVzc2FnZVxyXG4gICAgfVxyXG4gICAgaWYoanNvbl9vYmplY3QuZXJyb3JzICE9IG51bGwpe1xyXG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdC50b1N0cmluZygpICsganNvbl9vYmplY3QuZXJyb3JzLnRvU3RyaW5nKClcclxuICAgIH1cclxuXHJcblxyXG4gICAgZUxpc3RFcnJvcnMuYWRkKFwiRVwiKVxyXG4gICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtU0FQLVNPLUNSRUFURVwiKVxyXG4gICAgZXJyb3JNc2dzLmFkZChjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpICsgXCIgXCIgKyByZXN1bHQpXHJcbiAgICBlTGlzdEVycm9ycy5hZGQoZXJyb3JNc2dzKVxyXG4gICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxyXG5cclxuICAgIG91dHB1dC5hZGQoZUxpc3QpXHJcbiAgICB0aHJvdyBuZXcgSW52YWxpZElucHV0RXhjZXB0aW9uKCd7XCJFXCI6XCInICsgb3V0cHV0LnRvU3RyaW5nKCkgKyAnXCJ9JylcclxufWVsc2V7XHJcbiAgICBib2R5X3JlcSA9IFtcclxuICAgICAgICBcImlzc3VlS2V5XCI6IGlzc3VlLmtleSxcclxuICAgIF0gXHJcblxyXG4gICAgYmFzZVVSTCA9IFwiaHR0cDovL1wiICsgcHJvcGVydGllc1snYXBpLmVudiddLnRvU3RyaW5nKCkgKyBcIi9vcC9yZXN0L2ppcmEvQUEvYWZ0ZXIvc2FsZXMvY3JlYXRlL3NlcnZpY2Uvb3JkZXIvY29uZmlybWF0aW9uP2xhbmd1YWdlPVwiK2xhbmdcclxuICAgIGxvZy5kZWJ1ZyBcImJvZHlfcmVxIFNDOiBcIiArIGJvZHlfcmVxXHJcbiAgICBsb2cuZGVidWcgXCJiYXNlVVJMIFNDOiBcIiArIGJhc2VVUkxcclxuICAgIHVybCA9IG5ldyBVUkwoYmFzZVVSTClcclxuICAgIGNvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pdXJsLm9wZW5Db25uZWN0aW9uKCk7XHJcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RNZXRob2QocmVxdWVzdE1ldGhvZCk7XHJcbiAgICBjb25uZWN0aW9uLnNldFJlcXVlc3RQcm9wZXJ0eShcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcclxuICAgIGNvbm5lY3Rpb24uc2V0UmVxdWVzdFByb3BlcnR5KFwiQWNjZXB0XCIsIFwiKi8qXCIpO1xyXG4gICAgY29ubmVjdGlvbi5zZXREb091dHB1dCh0cnVlKTtcclxuICAgIGNvbm5lY3Rpb24uc2V0RG9JbnB1dCh0cnVlKTtcclxuICAgIGNvbm5lY3Rpb24ub3V0cHV0U3RyZWFtXHJcbiAgICBjb25uZWN0aW9uLm91dHB1dFN0cmVhbS53aXRoV3JpdGVyKFwiVVRGLThcIikgeyBuZXcgU3RyZWFtaW5nSnNvbkJ1aWxkZXIoaXQsIGJvZHlfcmVxKSB9XHJcbiAgICBsb2cuZGVidWcgY29ubmVjdGlvbi5vdXRwdXRTdHJlYW1cclxuICAgIGNvbm5lY3Rpb24uY29ubmVjdCgpO1xyXG5cclxuICAgIG91dHB1dCA9IG5ldyBBcnJheUxpc3QoKVxyXG4gICAgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgIGVMaXN0RXJyb3JzID0gbmV3IEFycmF5TGlzdCgpXHJcbiAgICBlcnJvck1zZ3MgPSBuZXcgQXJyYXlMaXN0KClcclxuXHJcbiAgICBpZiAoIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDFcIikgJiYgIWNvbm5lY3Rpb24uZ2V0UmVzcG9uc2VDb2RlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCIyMDBcIikpe1xyXG4gICAgICAgIGxvZy5kZWJ1ZyBcInVybDogXCIgKyB1cmxcclxuICAgICAgICBsb2cuZGVidWcgXCJSZXNwb25zZUNvZGU6XCIgKyBjb25uZWN0aW9uLmdldFJlc3BvbnNlQ29kZSgpXHJcbiAgICAgICAgbG9nLmRlYnVnIFwiUmVzcG9uc2VNZXNzYWdlOlwiICsgY29ubmVjdGlvbi5nZXRSZXNwb25zZU1lc3NhZ2UoKVxyXG5cclxuICAgICAgICBkZWYgb3V0cHV0TXNnID0gKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0XHJcbiAgICAgICAgbG9nLmRlYnVnIFwiKChIdHRwVVJMQ29ubmVjdGlvbiljb25uZWN0aW9uKS5lcnJvclN0cmVhbS50ZXh0OiBcIiArIG91dHB1dE1zZ1xyXG5cclxuICAgICAgICBkZWYganNvblNsdXJwZXIgPSBuZXcgSnNvblNsdXJwZXIoKVxyXG4gICAgICAgIGRlZiBqc29uX29iamVjdCA9IGpzb25TbHVycGVyLnBhcnNlVGV4dChvdXRwdXRNc2cpXHJcbiAgICAgICAgYXNzZXJ0IGpzb25fb2JqZWN0IGluc3RhbmNlb2YgTWFwICBcclxuICAgICAgICBsb2cuZGVidWcgXCJtZXNzYWdlOiBcIiArICBqc29uX29iamVjdC5tZXNzYWdlLnRvU3RyaW5nKCkucmVwbGFjZUFsbChcIi9bXmEtekEtWiBdL2dcIixcIlwiKS5yZXBsYWNlQWxsKCdcIicsJycpXHJcbiAgICAgICAgbG9nLmRlYnVnIFwiZXJyb3JzOiBcIiArICBqc29uX29iamVjdC5lcnJvcnMudG9TdHJpbmcoKVxyXG5cclxuICAgICAgICBlTGlzdEVycm9ycy5hZGQoXCJFXCIpXHJcbiAgICAgICAgZUxpc3RFcnJvcnMuYWRkKFwiT1AtU0FQLVNDLUNSRUFURVwiKVxyXG4gICAgICAgIGVycm9yTXNncy5hZGQoY29ubmVjdGlvbi5nZXRSZXNwb25zZUNvZGUoKSArIFwiIFwiICsganNvbl9vYmplY3QuZXJyb3JzWzBdKVxyXG4gICAgICAgIGVMaXN0RXJyb3JzLmFkZChlcnJvck1zZ3MpXHJcbiAgICAgICAgZUxpc3QuYWRkKGVMaXN0RXJyb3JzKVxyXG5cclxuICAgICAgICBvdXRwdXQuYWRkKGVMaXN0KVxyXG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oJ3tcIkVcIjpcIicgKyBvdXRwdXQudG9TdHJpbmcoKSArICdcIn0nKVxyXG4gICAgfVxyXG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="disabled">true</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="1">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="2" name="Closed">
      <meta name="jira.status.id">6</meta>
      <actions>
        <action id="21" name="riapri">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id"></meta>
          <results>
            <unconditional-result old-status="null" status="null" step="1">
              <post-functions>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="3" name="Assigned to Technician">
      <meta name="jira.status.id">14927</meta>
      <actions>
        <action id="41" name="Start Working" view="fieldscreen">
          <meta name="jira.description"></meta>
          <meta name="jira.fieldscreen.id">19908</meta>
          <validators>
            <validator name="" type="class">
              <arg name="FIELD_FUNCTION_ID">bd6bec59-bbf2-4faa-9167-ef85631b1c07</arg>
              <arg name="FIELD_NOTES">YCFgQ2hlY2sgYWN0aXZpdGllcyBpbiBwcm9ncmVzcyB0byBhbGxvdyBzdGFydCB3b3JraW5nIG9uIGluZGlyZWN0IHRhc2s=</arg>
              <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXHJcbmltcG9ydCBjb20ub3BlbnN5bXBob255LndvcmtmbG93LkludmFsaWRJbnB1dEV4Y2VwdGlvblxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxyXG5pbXBvcnQgb3JnLmFwYWNoZS5sb2c0ai5DYXRlZ29yeVxyXG5pbXBvcnQgZ3Jvb3Z5Lmpzb24uSnNvbkJ1aWxkZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJcclxuaW1wb3J0IGNvbS5vbnJlc29sdmUuc2NyaXB0cnVubmVyLnJ1bm5lci5TY3JpcHRSdW5uZXJJbXBsXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuSXNzdWVNYW5hZ2VyXHJcbmltcG9ydCBqYXZhLnRleHQuU2ltcGxlRGF0ZUZvcm1hdCBcclxuaW1wb3J0IGphdmEudXRpbC5EYXRlXHJcblxyXG5Qcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydGllcygpXHJcbkZpbGUgcHJvcGVydGllc0ZpbGUgPSBuZXcgRmlsZShTY3JpcHRSdW5uZXJJbXBsLmdldFBsdWdpbkNvbXBvbmVudChTY3JpcHRSdW5uZXIpLmdldFJvb3RzRm9yRGlzcGxheSgpICsgJy9vcHByb2plY3QucHJvcGVydGllcycpXHJcbnByb3BlcnRpZXNGaWxlLndpdGhJbnB1dFN0cmVhbSB7XHJcblx0cHJvcGVydGllcy5sb2FkKGl0KVxyXG59XHJcblxyXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XHJcbi8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtNDE5MTBcIilcclxuXHJcbmRlZiBlcnJvcnMgPSBmYWxzZVxyXG5kZWYgd2FybmluZ3MgPSBmYWxzZVxyXG5cclxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xyXG5DbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7IFxyXG5kZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcclxuICBcclxuLyogR2V0IEluc2lnaHQgT2JqZWN0IFR5cGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXHJcbkNsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpOyBcclxuZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcclxuICBcclxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cclxuQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7IFxyXG5kZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xyXG4gIFxyXG5DbGFzcyBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuc2VydmljZXMubW9kZWwuZmFjdG9yeS5PYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeVwiKTsgXHJcbmRlZiBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzKTtcclxuQ2xhc3MgaXFsRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuSVFMRmFjYWRlXCIpOyBcclxuZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XHJcblxyXG5cclxuZGVmIGN1cnJlbnRVc2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfQ1VSUkVOVF9VU0VSXCIpWzBdXHJcbmRlZiBvblNpdGVUZWNoc1RyYWNlRmllbGQgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9URUNITklDSUFOX0FDVElWSVRJRVNfVFJBQ0VcIilbMF07XHJcbmRlZiBvblNpdGVUZWNoc1RyYXZlbEZpZWxkID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfVEVDSE5JQ0lBTl9UUkFWRUxcIilbMF07XHJcbmRlZiBPblNpdGVUZWNoT2JqZWN0cyA9IG5ldyBBcnJheUxpc3QoKTtcclxuaW50IE9QQUEgPSBwcm9wZXJ0aWVzWydpc2NoZW1hLmFhLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXHJcblxyXG4vKiAtLS0tLS0tLS0tLS0gREVGSU5FIEFDVElPTiBUTyBCRSBUUkFDRUQgQU5EIFNFVCBUTyBCRSBET05FIC0tLS0tLS0tLS0tLS0gKi9cclxuZGVmIEFDVElPTiA9IHByb3BlcnRpZXNbJ3dmLnRyLmluZGlyZWN0VGFzay5hY3Rpb24nXS50b1N0cmluZygpXHJcbmRlZiBTRVQgPSBwcm9wZXJ0aWVzWyd3Zi50ci5zdGFydEluZGlyZWN0VGFzay5zZXQnXS50b1N0cmluZygpXHJcblxyXG5kZWYgT05TSVRFX1RFQ0hfUkVQT1JUX09CSl9UWVBFPXByb3BlcnRpZXNbJ2lvYmoub25TaXRlVGVjaFJlcG9ydCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuZGVmIE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX05BTUU9cHJvcGVydGllc1snaW9iai5vblNpdGVUZWNoUmVwb3J0Lm5hbWUuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXHJcbmRlZiBPTlNJVEVfVEVDSF9SRVBPUlRfQVRUUl9URUNITklDSUFOX1JFRj1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVRlY2hSZXBvcnQudGVjaG5pY2lhblJlZi5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuZGVmIE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX0pPQl9DT01QTEVURUQ9cHJvcGVydGllc1snaW9iai5vblNpdGVUZWNoUmVwb3J0LmpvYkNvbXBsZXRlZC5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuZGVmIE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX0pPQl9TVEFSVEVEPXByb3BlcnRpZXNbJ2lvYmoub25TaXRlVGVjaFJlcG9ydC5qb2JTdGFydGVkLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG5kZWYgT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfVFJBQ0VfQUNUSU9OPXByb3BlcnRpZXNbJ2lvYmoub25TaXRlVGVjaFJlcG9ydC50cmFjZUFjdGlvbi5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuXHJcbmRlZiBkYXRlVG9kYXkgPSBuZXcgU2ltcGxlRGF0ZUZvcm1hdChcIk0vZGQveXl5eVwiKS5mb3JtYXQobmV3IERhdGUoKSkgXHJcbmRlZiBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoT1BBQSwgXCJvYmplY3RUeXBlID0gVGVjaG5pY2lhbiBBTkQgVEVDSE5JQ0lBTl9SRUYuVEVDSF9BQ0NPVU5UID1cXFwiXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1cnJlbnRVc2VyKS50b1N0cmluZygpICsgXCJcXFwiXCIpXHJcbmxvZy53YXJuIFwiaXFsOiBcIiArIFwib2JqZWN0VHlwZSA9IFRlY2huaWNpYW4gQU5EIFRFQ0hOSUNJQU5fUkVGLlRFQ0hfQUNDT1VOVCA9XFxcIlwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXJyZW50VXNlcikudG9TdHJpbmcoKSArIFwiXFxcIlwiXHJcblxyXG5mb3IodGVjaG5pY2lhbiBpbiBvYmplY3RzKXtcclxuICAgIGRlZiB0ZWNoPXRlY2huaWNpYW4udG9TdHJpbmcoKVxyXG4gICAgZGVmIHRlY2hLZXkgPSB0ZWNoLnN1YnN0cmluZyh0ZWNoLmxhc3RJbmRleE9mKCcoJykrMSx0ZWNoLmxhc3RJbmRleE9mKCcpJykpXHJcbiAgICBkZWYgdGVjaE5hbWUgPSB0ZWNoLnN1YnN0cmluZygwLHRlY2gubGFzdEluZGV4T2YoJygnKS0xKVxyXG4gICAgZGVmIHRlY2hPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4odGVjaEtleSlcclxuICAgIGxvZy5pbmZvIFwidGVjaEtleTogXCIgKyB0ZWNoS2V5XHJcbiAgICBsb2cuaW5mbyAoXCJ0ZWNoTmFtZTogXCIgKyB0ZWNoTmFtZSlcclxuICAgIGxvZy5pbmZvIChcInRlY2hPYmplY3Q6IFwiICsgdGVjaE9iamVjdClcclxuXHJcbiAgICBvYmplY3RzID0gaXFsRmFjYWRlLmZpbmRPYmplY3RzQnlJUUxBbmRTY2hlbWEoT1BBQSwgXCJvYmplY3RUeXBlID0gT25TaXRlX1RlY2hfUmVwb3J0IEFORCBURUNITklDSUFOX1JFRi5URUNITklDSUFOX1JFRi5URUNIX0FDQ09VTlQgPVxcXCJcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VycmVudFVzZXIpLnRvU3RyaW5nKCkgKyBcIlxcXCIgQU5EIEpPQl9TVEFSVEVEID49IFwiICsgZGF0ZVRvZGF5LnRvU3RyaW5nKCkgKyBcIiBPUkRFUiBCWSBKT0JfU1RBUlRFRCBERVNDXCIpXHJcbiAgICBsb2cud2FybiBcImlxbDogXCIgKyBcIm9iamVjdFR5cGUgPSBPblNpdGVfVGVjaF9SZXBvcnQgQU5EIFRFQ0hOSUNJQU5fUkVGLlRFQ0hOSUNJQU5fUkVGLlRFQ0hfQUNDT1VOVCA9XFxcIlwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXJyZW50VXNlcikudG9TdHJpbmcoKSArIFwiXFxcIiBBTkQgSk9CX1NUQVJURUQgPj0gXCIgKyBkYXRlVG9kYXkudG9TdHJpbmcoKSArIFwiIE9SREVSIEJZIEpPQl9TVEFSVEVEIERFU0NcIlxyXG5cclxuICAgIGxvZy5kZWJ1ZyBvYmplY3RzXHJcbiAgICBpZihvYmplY3RzLnNpemU9PTApe1xyXG4gICAgICAgIC8qUHJpbWEgYXR0aXZpdFx1MDBlMCBkZWxsYSBnaW9ybmF0YSAtLT4gSk9CX1NUQVJURUQgPSB0aW1lIHN0YW1wIHJlYWxlKi9cclxuICAgIH1lbHNle1xyXG4gICAgICAgIC8qUmVjdXBlcm8gSk9CX0NPTVBMRVRFRCBkZWxsJ3VsdGltYSBhdHRpdml0XHUwMGUwIGZhdHRhKi9cclxuICAgICAgICBsYXN0QWN0aXZpdHkgPSBvYmplY3RzWzBdXHJcbiAgICAgICAgbG9nLndhcm4gbGFzdEFjdGl2aXR5LmdldElkKClcclxuICAgICAgICBsb2cud2FybiBsYXN0QWN0aXZpdHlcclxuICAgICAgICAvKlNlIGwndWx0aW1hIGF0dGl2aXRcdTAwZTAgbm9uIFx1MDBlOCBhbmNvcmEgdGVybWluYXRhLCBub24gcG9zc28gaW5pemlhcmUgdW4gbnVvdm8gaW5kaXJlY3QgdGFzayovXHJcbiAgICAgICAgaWYob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxhc3RBY3Rpdml0eS5nZXRJZCgpLCBcIkpPQl9DT01QTEVURURcIikgPT0gbnVsbCl7XHJcbiAgICAgICAgICAgIGlmKCFvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGFzdEFjdGl2aXR5LmdldElkKCksIFwiVFJBQ0VfQUNUSU9OX1NUQVRVU1wiKS5jcmVhdGVNdXRhYmxlKCkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKS5lcXVhbHMoXCJCUkVBS1wiKSl7XHJcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgXCJhdHRpdml0XHUwMGUwIFwiICsgb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxhc3RBY3Rpdml0eS5nZXRJZCgpLCBcIkpPQl9TVEFSVEVEXCIpLmNyZWF0ZU11dGFibGUoKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpICsgXCIgbm9uIGFuY29yYSB0ZXJtaW5hdGFcIlxyXG4gICAgICAgICAgICAgICAgZXJyb3JzPXRydWVcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBsb2cuZGVidWcgb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxhc3RBY3Rpdml0eS5nZXRJZCgpLCBcIlRSQUNFX0FDVElPTl9TVEFUVVNcIikuY3JlYXRlTXV0YWJsZSgpLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVswXS5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkgKyBcIiBpbiBjb3Jzb1wiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59XHJcblxyXG5kZWYgb3V0cHV0ID0gbmV3IEFycmF5TGlzdCgpXHJcblxyXG5pZiAoIWVycm9ycyl7XHJcbiAgICAgICAgcmV0dXJuIHRydWVcclxufWVsc2V7XHJcbiAgICBkZWYgZUxpc3QgPSBuZXcgQXJyYXlMaXN0KClcclxuXHJcbiAgICBkZWYgZUxpc3RNYW5kYXRvcnkgPSBuZXcgQXJyYXlMaXN0KClcclxuICAgIGVMaXN0TWFuZGF0b3J5LmFkZChcIkVcIilcclxuICAgIGVMaXN0TWFuZGF0b3J5LmFkZChcIkFDVElWSVRZX0lOX1BST0dSRVNTXCIpXHJcbiAgICBlTGlzdE1hbmRhdG9yeS5hZGQobnVsbClcclxuICAgIGVMaXN0LmFkZChlTGlzdE1hbmRhdG9yeSlcclxuXHJcbiAgICBvdXRwdXQuYWRkKGVMaXN0KVxyXG4gICAgdGhyb3cgbmV3IEludmFsaWRJbnB1dEV4Y2VwdGlvbigne1wiRVwiOlwiJyArIG91dHB1dC50b1N0cmluZygpICsgJ1wifScpXHJcbiAgICAvL3Rocm93IG5ldyBJbnZhbGlkSW5wdXRFeGNlcHRpb24oXCJFXCIsIG91dHB1dC50b1N0cmluZygpKSAgIFxyXG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
              <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.validators.CustomScriptValidator</arg>
              <arg name="class.name">com.onresolve.jira.groovy.GroovyValidator</arg>
            </validator>
          </validators>
          <results>
            <unconditional-result old-status="null" status="null" step="4">
              <post-functions>
                <function type="class">
                  <arg name="FIELD_FUNCTION_ID">dd470d58-6b3b-4190-b94b-441a560839dc</arg>
                  <arg name="FIELD_NOTES">YCFgU2V0IEpPQl9TVEFSVEVEIGZvciBJTkRJUkVDVF9UQVNL</arg>
                  <arg name="FIELD_SCRIPT_FILE_OR_SCRIPT">YCFgeyJzY3JpcHQiOiJpbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmNvbXBvbmVudC5Db21wb25lbnRBY2Nlc3NvclxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlXHJcbmltcG9ydCBjb20uYXRsYXNzaWFuLmppcmEuaXNzdWUuTXV0YWJsZUlzc3VlO1xyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmV2ZW50LnR5cGUuRXZlbnREaXNwYXRjaE9wdGlvbjtcclxuaW1wb3J0IG9yZy5hcGFjaGUubG9nNGouTGV2ZWxcclxuaW1wb3J0IGphdmEuc3FsLlRpbWVzdGFtcFxyXG5pbXBvcnQgY29tLmF0bGFzc2lhbi5qaXJhLmlzc3VlLklzc3VlTWFuYWdlclxyXG5pbXBvcnQgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQgXHJcbmltcG9ydCBqYXZhLnV0aWwuRGF0ZVxyXG5cclxuUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnRpZXMoKVxyXG5GaWxlIHByb3BlcnRpZXNGaWxlID0gbmV3IEZpbGUoJy92YXIvYXRsYXNzaWFuL2FwcGxpY2F0aW9uLWRhdGEvc2hhcmVkL3NjcmlwdHMvb3Bwcm9qZWN0LnByb3BlcnRpZXMnKVxyXG5wcm9wZXJ0aWVzRmlsZS53aXRoSW5wdXRTdHJlYW0ge1xyXG5cdHByb3BlcnRpZXMubG9hZChpdClcclxufVxyXG5cclxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEZhY2FkZSBmcm9tIHBsdWdpbiBhY2Nlc3NvciAqL1xyXG5DbGFzcyBvYmplY3RGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RGYWNhZGVcIik7IFxyXG5kZWYgb2JqZWN0RmFjYWRlID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0T1NHaUNvbXBvbmVudEluc3RhbmNlT2ZUeXBlKG9iamVjdEZhY2FkZUNsYXNzKTtcclxuICBcclxuLyogR2V0IEluc2lnaHQgT2JqZWN0IFR5cGUgRmFjYWRlIGZyb20gcGx1Z2luIGFjY2Vzc29yICovXHJcbkNsYXNzIG9iamVjdFR5cGVGYWNhZGVDbGFzcyA9IENvbXBvbmVudEFjY2Vzc29yLmdldFBsdWdpbkFjY2Vzc29yKCkuZ2V0Q2xhc3NMb2FkZXIoKS5maW5kQ2xhc3MoXCJjb20ucmlhZGFsYWJzLmppcmEucGx1Z2lucy5pbnNpZ2h0LmNoYW5uZWwuZXh0ZXJuYWwuYXBpLmZhY2FkZS5PYmplY3RUeXBlRmFjYWRlXCIpOyBcclxuZGVmIG9iamVjdFR5cGVGYWNhZGUgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRPU0dpQ29tcG9uZW50SW5zdGFuY2VPZlR5cGUob2JqZWN0VHlwZUZhY2FkZUNsYXNzKTtcclxuICBcclxuLyogR2V0IEluc2lnaHQgT2JqZWN0IEF0dHJpYnV0ZSBGYWNhZGUgZnJvbSBwbHVnaW4gYWNjZXNzb3IgKi9cclxuQ2xhc3Mgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuY2hhbm5lbC5leHRlcm5hbC5hcGkuZmFjYWRlLk9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGVcIik7IFxyXG5kZWYgb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlQ2xhc3MpO1xyXG4gIFxyXG5DbGFzcyBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0UGx1Z2luQWNjZXNzb3IoKS5nZXRDbGFzc0xvYWRlcigpLmZpbmRDbGFzcyhcImNvbS5yaWFkYWxhYnMuamlyYS5wbHVnaW5zLmluc2lnaHQuc2VydmljZXMubW9kZWwuZmFjdG9yeS5PYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeVwiKTsgXHJcbmRlZiBvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShvYmplY3RBdHRyaWJ1dGVCZWFuRmFjdG9yeUNsYXNzKTtcclxuQ2xhc3MgaXFsRmFjYWRlQ2xhc3MgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRQbHVnaW5BY2Nlc3NvcigpLmdldENsYXNzTG9hZGVyKCkuZmluZENsYXNzKFwiY29tLnJpYWRhbGFicy5qaXJhLnBsdWdpbnMuaW5zaWdodC5jaGFubmVsLmV4dGVybmFsLmFwaS5mYWNhZGUuSVFMRmFjYWRlXCIpOyBcclxuZGVmIGlxbEZhY2FkZSA9IENvbXBvbmVudEFjY2Vzc29yLmdldE9TR2lDb21wb25lbnRJbnN0YW5jZU9mVHlwZShpcWxGYWNhZGVDbGFzcyk7XHJcblxyXG5Jc3N1ZU1hbmFnZXIgaXNzdWVNYW5hZ2VyID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCk7XHJcbi8vSXNzdWUgaXNzdWUgPSBpc3N1ZU1hbmFnZXIuZ2V0SXNzdWVCeUtleUlnbm9yZUNhc2UoXCJBQVMtMTY4MDQzXCIpXHJcblxyXG5kZWYgY3VycmVudFVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9DVVJSRU5UX1VTRVJcIilbMF1cclxuZGVmIG9uU2l0ZVRlY2hzVHJhY2VGaWVsZCA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX1RFQ0hOSUNJQU5fQUNUSVZJVElFU19UUkFDRVwiKVswXTtcclxuZGVmIG9uU2l0ZVRlY2hzV29ya1RyYWNlRmllbGQgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9URUNITklDSUFOX0FDVElWSVRJRVNfVFJBQ0VfV09SS1wiKVswXTtcclxuZGVmIG9uU2l0ZVRlY2hzVHJhdmVsRmllbGQgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9URUNITklDSUFOX1RSQVZFTFwiKVswXTtcclxuXHJcbmRlZiB0a3RKb2JTdGFydGVkID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfSU5ESVJFQ1RfSk9CX1NUQVJURURcIilbMF1cclxuZGVmIHRrdEpvYkNvbXBsZXRlZCA9IENvbXBvbmVudEFjY2Vzc29yLmdldEN1c3RvbUZpZWxkTWFuYWdlcigpLmdldEN1c3RvbUZpZWxkT2JqZWN0c0J5TmFtZShcIk9QX0lORElSRUNUX0pPQl9DT01QTEVURURcIilbMF1cclxuXHJcbmRlZiBPblNpdGVUZWNoT2JqZWN0cyA9IG5ldyBBcnJheUxpc3QoKTtcclxuaW50IE9QQUEgPSBwcm9wZXJ0aWVzWydpc2NoZW1hLmFhLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG5pbnQgREJPID0gcHJvcGVydGllc1snaXNjaGVtYS5kYm8uaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXHJcblxyXG4vKjI1LjExLjIyKi9kZWYgbG9jYWxUaW1lU3RhbXBcclxuZGVmIGxvY2FsRGF0ZVxyXG4vKjAzLjEwLjIzKi9cclxuZGVmIERBVEVUSU1FX09GRlNFVCA9IHByb3BlcnRpZXNbJ3dmLnRyLmRhdGV0aW1ld2l0aG9mZnNldCddLnRvU3RyaW5nKClcclxubG9nLmRlYnVnIFwiREFURVRJTUVfT0ZGU0VUOiBcIiArIERBVEVUSU1FX09GRlNFVFxyXG5pZiAoREFURVRJTUVfT0ZGU0VUICE9IG51bGwgJiYgREFURVRJTUVfT0ZGU0VUICE9ICdudWxsJyl7XHJcbmRlZiBzaXRlQ0YgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9TSVRFXCIpWzBdO1xyXG5kZWYgc2l0ZSwgc2l0ZUtleSwgc2l0ZU9iamVjdCwgdmlzaWJpbGl0eSwgdmlzaWJpbGl0eUtleVxyXG5pZiAoaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShzaXRlQ0YpICE9IG51bGwpIHtcclxuICAgIHNpdGUgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHNpdGVDRikudG9TdHJpbmcoKVxyXG4gICAgc2l0ZUtleSA9IHNpdGUuc3Vic3RyaW5nKHNpdGUubGFzdEluZGV4T2YoJygnKSArIDEsIHNpdGUubGFzdEluZGV4T2YoJyknKSlcclxuICAgIHNpdGVPYmplY3QgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4oc2l0ZUtleSlcclxuICAgIHZpc2liaWxpdHkgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRDdXN0b21GaWVsZE1hbmFnZXIoKS5nZXRDdXN0b21GaWVsZE9iamVjdHNCeU5hbWUoXCJPUF9US1RfVklTSUJJTElUWV9LRVlcIilbMF1cclxuICAgIHZpc2liaWxpdHlLZXkgPSBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHZpc2liaWxpdHkpWzBdLnRvU3RyaW5nKCkuc3Vic3RyaW5nKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodmlzaWJpbGl0eSlbMF0udG9TdHJpbmcoKS5sYXN0SW5kZXhPZignKCcpICsgMSwgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh2aXNpYmlsaXR5KVswXS50b1N0cmluZygpLmxhc3RJbmRleE9mKCcpJykpXHJcbn0gZWxzZSB7XHJcbiAgICB2aXNpYmlsaXR5ID0gQ29tcG9uZW50QWNjZXNzb3IuZ2V0Q3VzdG9tRmllbGRNYW5hZ2VyKCkuZ2V0Q3VzdG9tRmllbGRPYmplY3RzQnlOYW1lKFwiT1BfSU5ESVJFQ1RfSk9CX1RLVF9WSVNJQklMSVRZXCIpWzBdXHJcbiAgICB2aXNpYmlsaXR5S2V5ID0gaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZSh2aXNpYmlsaXR5KVswXS50b1N0cmluZygpLnN1YnN0cmluZyhpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKHZpc2liaWxpdHkpWzBdLnRvU3RyaW5nKCkubGFzdEluZGV4T2YoJygnKSArIDEsIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUodmlzaWJpbGl0eSlbMF0udG9TdHJpbmcoKS5sYXN0SW5kZXhPZignKScpKVxyXG59XHJcbmRlZiB0aW1lWm9uZVxyXG5kZWYgY29tcGFueVJlZiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihvYmplY3RGYWNhZGUubG9hZE9iamVjdEJlYW4odmlzaWJpbGl0eUtleSkuZ2V0SWQoKSwgcHJvcGVydGllc1snaW9iai52aXNpYmlsaXR5S2V5LmNvbXBhbnlSZWYnXS50b1N0cmluZygpKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKCk7XHJcbmxvZy5pbmZvIFwiY29tcGFueVJlZjogXCIgKyBjb21wYW55UmVmXHJcbmRlZiBjb21wYW55UmVmSWQgPSBjb21wYW55UmVmWzBdLmdldFJlZmVyZW5jZWRPYmplY3RCZWFuSWQoKVxyXG5sb2cuZGVidWcgXCJjb21wYW55UmVmSWQ6XCIgKyBjb21wYW55UmVmSWRcclxuaWYgKGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoc2l0ZUNGKSAhPSBudWxsICYmIG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihzaXRlT2JqZWN0LmdldElkKCksIFwiU0lURV9SRUZcIikpIHtcclxuICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHNpdGVPYmplY3QuZ2V0SWQoKSwgXCJTSVRFX1JFRlwiKS5jcmVhdGVNdXRhYmxlKClcclxuICAgIHMgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcclxuICAgIHMgPSBzLnRvU3RyaW5nKClcclxuICAgIHNLZXkgPSBzLnN1YnN0cmluZyhzLmxhc3RJbmRleE9mKCcoJykgKyAxLCBzLmxhc3RJbmRleE9mKCcpJykpXHJcbiAgICBpZiAob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKHNLZXkudG9JbnRlZ2VyKCksIFwiVElNRV9aT05FXCIpKSB7XHJcbiAgICAgICAgb2JUcmlhZ2UgPSBvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oc0tleS50b0ludGVnZXIoKSwgXCJUSU1FX1pPTkVcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICAgICAgdGltZVpvbmUgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcclxuICAgICAgICB0aW1lWm9uZSA9IHRpbWVab25lWzBdLmdldFZhbHVlKClcclxuICAgICAgICBsb2cuZGVidWcgXCJUaW1lWm9uZSBkYSBTaXRlOiBcIiArIHRpbWVab25lXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcGFueVJlZklkLnRvSW50ZWdlcigpLCBcIlRJTUVfWk9ORVwiKSkge1xyXG4gICAgICAgICAgICBvYlRyaWFnZSA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihjb21wYW55UmVmSWQudG9JbnRlZ2VyKCksIFwiVElNRV9aT05FXCIpLmNyZWF0ZU11dGFibGUoKVxyXG4gICAgICAgICAgICB0aW1lWm9uZSA9IG9iVHJpYWdlLmdldE9iamVjdEF0dHJpYnV0ZVZhbHVlQmVhbnMoKVxyXG4gICAgICAgICAgICB0aW1lWm9uZSA9IHRpbWVab25lWzBdLmdldFZhbHVlKClcclxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiVGltZVpvbmUgZGEgQ29tcGFueTogXCIgKyB0aW1lWm9uZVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSBlbHNlIHtcclxuICAgIGlmIChvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4oY29tcGFueVJlZklkLnRvSW50ZWdlcigpLCBcIlRJTUVfWk9ORVwiKSkge1xyXG4gICAgICAgIG9iVHJpYWdlID0gb2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGNvbXBhbnlSZWZJZC50b0ludGVnZXIoKSwgXCJUSU1FX1pPTkVcIikuY3JlYXRlTXV0YWJsZSgpXHJcbiAgICAgICAgdGltZVpvbmUgPSBvYlRyaWFnZS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClcclxuICAgICAgICB0aW1lWm9uZSA9IHRpbWVab25lWzBdLmdldFZhbHVlKClcclxuICAgICAgICBsb2cuZGVidWcgXCJUaW1lWm9uZSBkYSBDb21wYW55OiBcIiArIHRpbWVab25lXHJcbiAgICB9XHJcbn1cclxuaWYgKCF0aW1lWm9uZSkge1xyXG4gICAgdGltZVpvbmUgPSBcIkV1cm9wZS9Sb21lXCJcclxufVxyXG5sb2cuZGVidWcgXCJ0aW1lWm9uZTogXCIgKyB0aW1lWm9uZVxyXG5sb2NhbFRpbWVTdGFtcCA9IChuZXcgVGltZXN0YW1wKChuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIFRpbWVab25lLmdldERlZmF1bHQoKS5nZXRSYXdPZmZzZXQoKSArIFRpbWVab25lLmdldFRpbWVab25lKHRpbWVab25lLnRvU3RyaW5nKCkpLmdldFJhd09mZnNldCgpKSkudGltZSkpXHJcbmxvY2FsRGF0ZSA9IG5ldyBEYXRlKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gVGltZVpvbmUuZ2V0RGVmYXVsdCgpLmdldFJhd09mZnNldCgpICsgVGltZVpvbmUuZ2V0VGltZVpvbmUodGltZVpvbmUudG9TdHJpbmcoKSkuZ2V0UmF3T2Zmc2V0KCkpXHJcblxyXG59ZWxzZXtcclxuXHJcbiAgICBsb2NhbFRpbWVTdGFtcCA9ICAobmV3IFRpbWVzdGFtcCgobmV3IERhdGUoKSkudGltZSkpLnRvU3RyaW5nKClcclxuICAgIGxvY2FsRGF0ZSA9ICBuZXcgRGF0ZSgpXHJcblxyXG59XHJcblxyXG5sb2cuZGVidWcgbG9jYWxUaW1lU3RhbXBcclxubG9nLmRlYnVnIGxvY2FsRGF0ZVxyXG4vKjI1LjExLjIyKi9cclxuXHJcbi8qIC0tLS0tLS0tLS0tLSBERUZJTkUgQUNUSU9OIFRPIEJFIFRSQUNFRCBBTkQgU0VUIFRPIEJFIERPTkUgLS0tLS0tLS0tLS0tLSAqL1xyXG5kZWYgQUNUSU9OID0gcHJvcGVydGllc1snd2YudHIuaW5kaXJlY3RUYXNrLmFjdGlvbiddLnRvU3RyaW5nKClcclxuZGVmIFNFVCA9IHByb3BlcnRpZXNbJ3dmLnRyLnN0YXJ0SW5kaXJlY3RUYXNrLnNldCddLnRvU3RyaW5nKClcclxuXHJcbmRlZiBPTlNJVEVfVEVDSF9SRVBPUlRfT0JKX1RZUEU9cHJvcGVydGllc1snaW9iai5vblNpdGVUZWNoUmVwb3J0J10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG5kZWYgT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfTkFNRT1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVRlY2hSZXBvcnQubmFtZS5pZCddLnRvU3RyaW5nKCkudG9JbnRlZ2VyKClcclxuZGVmIE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX1RFQ0hOSUNJQU5fUkVGPXByb3BlcnRpZXNbJ2lvYmoub25TaXRlVGVjaFJlcG9ydC50ZWNobmljaWFuUmVmLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG5kZWYgT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfSk9CX0NPTVBMRVRFRD1wcm9wZXJ0aWVzWydpb2JqLm9uU2l0ZVRlY2hSZXBvcnQuam9iQ29tcGxldGVkLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG5kZWYgT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfSk9CX1NUQVJURUQ9cHJvcGVydGllc1snaW9iai5vblNpdGVUZWNoUmVwb3J0LmpvYlN0YXJ0ZWQuaWQnXS50b1N0cmluZygpLnRvSW50ZWdlcigpXHJcbmRlZiBPTlNJVEVfVEVDSF9SRVBPUlRfQVRUUl9UUkFDRV9BQ1RJT049cHJvcGVydGllc1snaW9iai5vblNpdGVUZWNoUmVwb3J0LnRyYWNlQWN0aW9uLmlkJ10udG9TdHJpbmcoKS50b0ludGVnZXIoKVxyXG5cclxuZGVmIGRhdGVUb2RheSA9IG5ldyBTaW1wbGVEYXRlRm9ybWF0KFwiTS9kZC95eXl5XCIpLmZvcm1hdChsb2NhbERhdGUpIFxyXG5kZWYgbGFzdEFjdGl2aXR5LCBqb2JTdGFydGVkIFxyXG5cclxuZGVmIG9iamVjdHMgPSBpcWxGYWNhZGUuZmluZE9iamVjdHNCeUlRTEFuZFNjaGVtYShPUEFBLCBcIm9iamVjdFR5cGUgPSBUZWNobmljaWFuIEFORCBURUNITklDSUFOX1JFRi5URUNIX0FDQ09VTlQgPVxcXCJcIiArIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUoY3VycmVudFVzZXIpLnRvU3RyaW5nKCkgKyBcIlxcXCJcIilcclxubG9nLndhcm4gXCJpcWw6IFwiICsgXCJvYmplY3RUeXBlID0gVGVjaG5pY2lhbiBBTkQgVEVDSE5JQ0lBTl9SRUYuVEVDSF9BQ0NPVU5UID1cXFwiXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1cnJlbnRVc2VyKS50b1N0cmluZygpICsgXCJcXFwiXCJcclxuXHJcbmZvcih0ZWNobmljaWFuIGluIG9iamVjdHMpe1xyXG4gICAgZGVmIHRlY2g9dGVjaG5pY2lhbi50b1N0cmluZygpXHJcbiAgICBkZWYgdGVjaEtleSA9IHRlY2guc3Vic3RyaW5nKHRlY2gubGFzdEluZGV4T2YoJygnKSsxLHRlY2gubGFzdEluZGV4T2YoJyknKSlcclxuICAgIGRlZiB0ZWNoTmFtZSA9IHRlY2guc3Vic3RyaW5nKDAsdGVjaC5sYXN0SW5kZXhPZignKCcpLTEpXHJcbiAgICBkZWYgdGVjaE9iamVjdCA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QmVhbih0ZWNoS2V5KVxyXG4gICAgbG9nLmluZm8gXCJ0ZWNoS2V5OiBcIiArIHRlY2hLZXlcclxuICAgIGxvZy5pbmZvIChcInRlY2hOYW1lOiBcIiArIHRlY2hOYW1lKVxyXG4gICAgbG9nLmluZm8gKFwidGVjaE9iamVjdDogXCIgKyB0ZWNoT2JqZWN0KVxyXG5cclxuICAgIG9iamVjdHMgPSBpcWxGYWNhZGUuZmluZE9iamVjdHNCeUlRTEFuZFNjaGVtYShPUEFBLCBcIm9iamVjdFR5cGUgPSBPblNpdGVfVGVjaF9SZXBvcnQgQU5EIFRFQ0hOSUNJQU5fUkVGLlRFQ0hOSUNJQU5fUkVGLlRFQ0hfQUNDT1VOVCA9XFxcIlwiICsgaXNzdWUuZ2V0Q3VzdG9tRmllbGRWYWx1ZShjdXJyZW50VXNlcikudG9TdHJpbmcoKSArIFwiXFxcIiBBTkQgSk9CX1NUQVJURUQgPj0gXCIgKyBkYXRlVG9kYXkudG9TdHJpbmcoKSArIFwiIE9SREVSIEJZIEpPQl9TVEFSVEVEIERFU0NcIilcclxuICAgIGxvZy53YXJuIFwiaXFsOiBcIiArIFwib2JqZWN0VHlwZSA9IE9uU2l0ZV9UZWNoX1JlcG9ydCBBTkQgVEVDSE5JQ0lBTl9SRUYuVEVDSE5JQ0lBTl9SRUYuVEVDSF9BQ0NPVU5UID1cXFwiXCIgKyBpc3N1ZS5nZXRDdXN0b21GaWVsZFZhbHVlKGN1cnJlbnRVc2VyKS50b1N0cmluZygpICsgXCJcXFwiIEFORCBKT0JfU1RBUlRFRCA+PSBcIiArIGRhdGVUb2RheS50b1N0cmluZygpICsgXCIgT1JERVIgQlkgSk9CX1NUQVJURUQgREVTQ1wiXHJcblxyXG4gICAgaWYob2JqZWN0cy5zaXplPT0wKXtcclxuICAgICAgICAvKlByaW1hIGF0dGl2aXRcdTAwZTAgZGVsbGEgZ2lvcm5hdGEgLS0+IEpPQl9TVEFSVEVEID0gdGltZSBzdGFtcCByZWFsZSovXHJcbiAgICAgICAgLy9qb2JTdGFydGVkID0gKG5ldyBUaW1lc3RhbXAoKG5ldyBEYXRlKCkpLnRpbWUpKVxyXG4gICAgICAgIGpvYlN0YXJ0ZWQgPSBsb2NhbFRpbWVTdGFtcFxyXG4gICAgICAgIGxvZy5kZWJ1ZyBcImpvYlN0YXJ0ZWQgMTogXCIgKyBqb2JTdGFydGVkXHJcbiAgICB9ZWxzZXtcclxuICAgICAgICAvKlJlY3VwZXJvIEpPQl9DT01QTEVURUQgZGVsbCd1bHRpbWEgYXR0aXZpdFx1MDBlMCBmYXR0YSovXHJcbiAgICAgICAgbGFzdEFjdGl2aXR5ID0gb2JqZWN0c1swXVxyXG4gICAgICAgIGxvZy5kZWJ1ZyBsYXN0QWN0aXZpdHkuZ2V0SWQoKVxyXG4gICAgICAgIC8qU2UgbCd1bHRpbWEgYXR0aXZpdFx1MDBlMCBub24gXHUwMGU4IHVuYSBwYXVzYSBlIG5vbiBcdTAwZTggYW5jb3JhIHRlcm1pbmF0YSwgbm9uIHBvc3NvIGluaXppYXJlIHVuIG51b3ZvIGluZGlyZWN0IHRhc2sqL1xyXG4gICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYXN0QWN0aXZpdHkuZ2V0SWQoKSwgXCJKT0JfQ09NUExFVEVEXCIpKXtcclxuICAgICAgICAgICAgLy9sb2cuZGVidWcgTG9jYWxlLmdldERlZmF1bHQoKVxyXG4gICAgICAgICAgICBTaW1wbGVEYXRlRm9ybWF0IGZvcm1hdCA9IG5ldyBTaW1wbGVEYXRlRm9ybWF0KFwiRUVFIE1NTSBkZCBISDptbTpzcyB6enogeXl5eVwiLCBMb2NhbGUuVVMpO1xyXG4gICAgICAgICAgICBDYWxlbmRhciBjYWxlbmRhciA9IG5ldyBHcmVnb3JpYW5DYWxlbmRhcigpO1xyXG4gICAgICAgICAgICBEYXRlIGRhdGVUb0Zvcm1hdCA9IGZvcm1hdC5wYXJzZShvYmplY3RGYWNhZGUubG9hZE9iamVjdEF0dHJpYnV0ZUJlYW4obGFzdEFjdGl2aXR5LmdldElkKCksIFwiSk9CX0NPTVBMRVRFRFwiKS5jcmVhdGVNdXRhYmxlKCkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIGNhbGVuZGFyLnNldFRpbWUoZGF0ZVRvRm9ybWF0KTtcclxuICAgICAgICAgICAgY2FsZW5kYXIuYWRkKENhbGVuZGFyLk1JTlVURSwgMSk7XHJcbiAgICAgICAgICAgIFN0cmluZyByZXN1bHQ9IGNhbGVuZGFyLmdldFRpbWUoKTtcclxuXHJcbiAgICAgICAgICAgIGpvYlN0YXJ0ZWQgPSByZXN1bHRcclxuICAgICAgICAgICAgbG9nLmRlYnVnIFwiam9iU3RhcnRlZCAyOiBcIiArIGpvYlN0YXJ0ZWRcclxuXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGlmKG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYXN0QWN0aXZpdHkuZ2V0SWQoKSwgXCJUUkFDRV9BQ1RJT05fU1RBVFVTXCIpLmNyZWF0ZU11dGFibGUoKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpLmVxdWFscyhcIkJSRUFLXCIpKXtcclxuICAgICAgICAgICAgICAgIC8qTCd1bHRpbWEgYXR0aXZpdFx1MDBlMCBpbml6aWF0YSBcdTAwZTggdW5hIHBhdXNhLCBsb2dnbyB1bmEgYXR0aXZpdFx1MDBlMCBpbmRpcmV0dGEgcGVyIGNvcHJpcmUgaWwgdGVtcG8gZGEgaW5pemlvIHBhdXNhIGEgb3JhKi9cclxuICAgICAgICAgICAgICAgIFNpbXBsZURhdGVGb3JtYXQgZm9ybWF0ID0gbmV3IFNpbXBsZURhdGVGb3JtYXQoXCJFRUUgTU1NIGRkIEhIOm1tOnNzIHp6eiB5eXl5XCIsIExvY2FsZS5VUyk7XHJcbiAgICAgICAgICAgICAgICBDYWxlbmRhciBjYWxlbmRhciA9IG5ldyBHcmVnb3JpYW5DYWxlbmRhcigpO1xyXG4gICAgICAgICAgICAgICAgRGF0ZSBkYXRlVG9Gb3JtYXQgPSBmb3JtYXQucGFyc2Uob2JqZWN0RmFjYWRlLmxvYWRPYmplY3RBdHRyaWJ1dGVCZWFuKGxhc3RBY3Rpdml0eS5nZXRJZCgpLCBcIkpPQl9TVEFSVEVEXCIpLmNyZWF0ZU11dGFibGUoKS5nZXRPYmplY3RBdHRyaWJ1dGVWYWx1ZUJlYW5zKClbMF0uZ2V0VmFsdWUoKS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgIGNhbGVuZGFyLnNldFRpbWUoZGF0ZVRvRm9ybWF0KTtcclxuICAgICAgICAgICAgICAgIGNhbGVuZGFyLmFkZChDYWxlbmRhci5NSU5VVEUsIDEpO1xyXG4gICAgICAgICAgICAgICAgU3RyaW5nIHJlc3VsdD0gY2FsZW5kYXIuZ2V0VGltZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGpvYlN0YXJ0ZWQgPSByZXN1bHRcclxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImpvYlN0YXJ0ZWQgMzogXCIgKyBqb2JTdGFydGVkXHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnIFwiYXR0aXZpdFx1MDBlMCBcIiArIG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihsYXN0QWN0aXZpdHkuZ2V0SWQoKSwgXCJKT0JfU1RBUlRFRFwiKS5jcmVhdGVNdXRhYmxlKCkuZ2V0T2JqZWN0QXR0cmlidXRlVmFsdWVCZWFucygpWzBdLmdldFZhbHVlKCkudG9TdHJpbmcoKSArIFwiIG5vbiBhbmNvcmEgdGVybWluYXRhXCJcclxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImF0dGl2aXRcdTAwZTAgXCIgKyBqb2JTdGFydGVkLnRvU3RyaW5nKCkgKyBcIiBub24gYW5jb3JhIHRlcm1pbmF0YVwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGlmKGpvYlN0YXJ0ZWQpe1xyXG4gICAgICAgIC8qQ1JFQVRFIE5FVyBPQkpFQ1Q6IE9OU0lURV9URUNIX1JFUE9SVF9PQkpfVFlQRSovXHJcbiAgICAgICAgZGVmIG9iamVjdFR5cGVPblNpdGVUZWNoUmVwb3J0ID0gb2JqZWN0VHlwZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUJlYW4oT05TSVRFX1RFQ0hfUkVQT1JUX09CSl9UWVBFKTtcclxuICAgICAgICBkZWYgbmV3T2JqZWN0QmVhbiA9IG9iamVjdFR5cGVPblNpdGVUZWNoUmVwb3J0LmNyZWF0ZU11dGFibGVPYmplY3RCZWFuKCk7XHJcblxyXG4gICAgICAgIGRlZiBvYmplY3RBdHRyaWJ1dGVCZWFucyA9IG5ldyBBcnJheUxpc3QoKTtcclxuICAgICAgICBkZWYgbmFtZU9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfTkFNRSk7IFxyXG4gICAgICAgIGRlZiBzdGFydGVkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4gPSBvYmplY3RUeXBlQXR0cmlidXRlRmFjYWRlLmxvYWRPYmplY3RUeXBlQXR0cmlidXRlQmVhbihPTlNJVEVfVEVDSF9SRVBPUlRfQVRUUl9KT0JfU1RBUlRFRCk7IFxyXG4gICAgICAgIGRlZiBhY3Rpb25PYmplY3RUeXBlQXR0cmlidXRlQmVhbiA9IG9iamVjdFR5cGVBdHRyaWJ1dGVGYWNhZGUubG9hZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuKE9OU0lURV9URUNIX1JFUE9SVF9BVFRSX1RSQUNFX0FDVElPTik7IFxyXG5cclxuICAgICAgICBsb2cuZGVidWcgXCJzZXR0byBqb2Igc3RhcnRlZDogXCIgKyBqb2JTdGFydGVkLnRvU3RyaW5nKClcclxuICAgICAgICBvYmplY3RBdHRyaWJ1dGVCZWFucy5hZGQob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkuY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbkZvck9iamVjdChuZXdPYmplY3RCZWFuLCBuYW1lT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4sIHRlY2hOYW1lKSk7XHJcbiAgICAgICAgb2JqZWN0QXR0cmlidXRlQmVhbnMuYWRkKG9iamVjdEF0dHJpYnV0ZUJlYW5GYWN0b3J5LmNyZWF0ZU9iamVjdEF0dHJpYnV0ZUJlYW5Gb3JPYmplY3QobmV3T2JqZWN0QmVhbiwgc3RhcnRlZE9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuLCBqb2JTdGFydGVkLnRvU3RyaW5nKCkpKTtcclxuICAgICAgICBvYmplY3RBdHRyaWJ1dGVCZWFucy5hZGQob2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkuY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbkZvck9iamVjdChuZXdPYmplY3RCZWFuLCBhY3Rpb25PYmplY3RUeXBlQXR0cmlidXRlQmVhbiwgQUNUSU9OKSk7XHJcblxyXG4gICAgICAgIG5ld09iamVjdEJlYW4uc2V0T2JqZWN0QXR0cmlidXRlQmVhbnMob2JqZWN0QXR0cmlidXRlQmVhbnMpO1xyXG4gICAgICAgIC8qIFN0b3JlIHRoZSBvYmplY3QgaW50byBJbnNpZ2h0LiBUaGUgbmV3IE9iamVjdEJlYW4gd2lsbCBiZSB1cGRhdGVkIHdpdGggYW4gdW5pcXVlIElEICovXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbmV3T2JqZWN0QmVhbiA9IG9iamVjdEZhY2FkZS5zdG9yZU9iamVjdEJlYW4obmV3T2JqZWN0QmVhbik7XHJcbiAgICAgICAgICAgIGxvZy53YXJuKFwibmV3T2JqZWN0QmVhbjogXCIgKyBuZXdPYmplY3RCZWFuKTtcclxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XHJcbiAgICAgICAgICAgIGxvZy53YXJuKFwiQ291bGQgbm90IGNyZWF0ZSBpc3N1ZSBkdWUgdG8gdmFsaWRhdGlvbiBleGNlcHRpb246XCIgKyB2aWUuZ2V0TWVzc2FnZSgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIFVwZGF0ZSBURUNITklDSUFOX1JFRiBvbiB0aGUgbmV3T2JqZWN0ICovXHRcdCAgICAgICAgXHJcbiAgICAgICAgZGVmIG9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0VHlwZUF0dHJpYnV0ZUZhY2FkZS5sb2FkT2JqZWN0VHlwZUF0dHJpYnV0ZUJlYW4oT05TSVRFX1RFQ0hfUkVQT1JUX0FUVFJfVEVDSE5JQ0lBTl9SRUYpLmNyZWF0ZU11dGFibGUoKSAvL1RoZSBpZCBvZiB0aGUgYXR0cmlidXRlXHJcblxyXG4gICAgICAgIC8qIENyZWF0ZSB0aGUgbmV3IGF0dHJpYnV0ZSBiZWFuIGJhc2VkIG9uIHRoZSB2YWx1ZSAqL1xyXG4gICAgICAgIGRlZiBuZXdPYmplY3RBdHRyaWJ1dGVCZWFuID0gb2JqZWN0QXR0cmlidXRlQmVhbkZhY3RvcnkuY3JlYXRlT2JqZWN0QXR0cmlidXRlQmVhbkZvck9iamVjdChuZXdPYmplY3RCZWFuLCBvYmplY3RUeXBlQXR0cmlidXRlQmVhbiwgdGVjaEtleSk7XHJcbiAgICAgICAgLyogTG9hZCB0aGUgYXR0cmlidXRlIGJlYW4gKi9cclxuICAgICAgICBkZWYgb2JqZWN0QXR0cmlidXRlQmVhbiA9IG9iamVjdEZhY2FkZS5sb2FkT2JqZWN0QXR0cmlidXRlQmVhbihuZXdPYmplY3RCZWFuLmdldElkKCksIHRlY2hLZXkpO1xyXG4gICAgICAgIGlmIChvYmplY3RBdHRyaWJ1dGVCZWFuICE9IG51bGwpIHtcclxuICAgICAgICAgICAgLyogSWYgYXR0cmlidXRlIGV4aXN0IHJldXNlIHRoZSBvbGQgaWQgZm9yIHRoZSBuZXcgYXR0cmlidXRlICovXHJcbiAgICAgICAgICAgIG5ld09iamVjdEF0dHJpYnV0ZUJlYW4uc2V0SWQob2JqZWN0QXR0cmlidXRlQmVhbi5nZXRJZCgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLyogU3RvcmUgdGhlIG9iamVjdCBhdHRyaWJ1dGUgaW50byBJbnNpZ2h0LiAqL1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIG9iamVjdFR5cGVBdHRyaWJ1dGVCZWFuID0gb2JqZWN0RmFjYWRlLnN0b3JlT2JqZWN0QXR0cmlidXRlQmVhbihuZXdPYmplY3RBdHRyaWJ1dGVCZWFuKTtcclxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gdmllKSB7XHJcbiAgICAgICAgICAgIGxvZy53YXJuKFwiQ291bGQgbm90IHVwZGF0ZSBvYmplY3QgYXR0cmlidXRlIGR1ZSB0byB2YWxpZGF0aW9uIGV4Y2VwdGlvbjpcIiArIHZpZS5nZXRNZXNzYWdlKCkpO1xyXG4gICAgICAgIH0gIFxyXG5cclxuXHJcbiAgICAgICAgT25TaXRlVGVjaE9iamVjdHMuYWRkKG5ld09iamVjdEJlYW4pXHJcblxyXG4gICAgICAgIGZvcih0IGluIGlzc3VlLmdldEN1c3RvbUZpZWxkVmFsdWUob25TaXRlVGVjaHNUcmFjZUZpZWxkKSl7XHJcbiAgICAgICAgICAgIE9uU2l0ZVRlY2hPYmplY3RzLmFkZCh0KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbG9nLmluZm8gKFwiT25TaXRlVGVjaE9iamVjdHM6IFwiICsgT25TaXRlVGVjaE9iamVjdHMpXHJcbiAgICAgICAgZGVmIHVzZXIgPSBDb21wb25lbnRBY2Nlc3Nvci5nZXRKaXJhQXV0aGVudGljYXRpb25Db250ZXh0KCkuZ2V0TG9nZ2VkSW5Vc2VyKClcclxuXHJcbiAgICAgICAgaWYgKCFPblNpdGVUZWNoT2JqZWN0cy5pc0VtcHR5KCkpIHtcclxuICAgICAgICAgICAgTXV0YWJsZUlzc3VlIG1pID0gKE11dGFibGVJc3N1ZSkgaXNzdWU7XHJcbiAgICAgICAgICAgIC8qbWkuc2V0Q3VzdG9tRmllbGRWYWx1ZShvblNpdGVUZWNoc1RyYWNlRmllbGQsIE9uU2l0ZVRlY2hPYmplY3RzKTtcclxuICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUodXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7Ki9cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG1pLnNldEN1c3RvbUZpZWxkVmFsdWUob25TaXRlVGVjaHNXb3JrVHJhY2VGaWVsZCwgT25TaXRlVGVjaE9iamVjdHMpO1xyXG4gICAgICAgICAgICBDb21wb25lbnRBY2Nlc3Nvci5nZXRJc3N1ZU1hbmFnZXIoKS51cGRhdGVJc3N1ZSh1c2VyLCBtaSwgRXZlbnREaXNwYXRjaE9wdGlvbi5ET19OT1RfRElTUEFUQ0gsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgIFNpbXBsZURhdGVGb3JtYXQgc2RmID0gbmV3IFNpbXBsZURhdGVGb3JtYXQoXCJFRUUgTU1NIGRkIEhIOm1tOnNzIHp6eiB5eXl5XCIsIExvY2FsZS5VUyk7XHJcbiAgICAgICAgICAgIC8vRGF0ZSBkYXRlVG9CZVNldCA9IHNkZi5wYXJzZShqb2JTdGFydGVkKVxyXG4gICAgICAgICAgICBEYXRlIGRhdGVUb0JlU2V0ID0gc2RmLnBhcnNlKGpvYlN0YXJ0ZWQudG9TdHJpbmcoKSlcclxuXHJcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyBcImpvYlN0YXJ0ZWQgc3VsIHRpY2tldDogXCIgKyBuZXcgVGltZXN0YW1wKGRhdGVUb0JlU2V0LmdldFRpbWUoKSlcclxuICAgICAgICAgICAgbWkuc2V0Q3VzdG9tRmllbGRWYWx1ZSh0a3RKb2JTdGFydGVkLCAgbmV3IFRpbWVzdGFtcChkYXRlVG9CZVNldC5nZXRUaW1lKCkpKTtcclxuICAgICAgICAgICAgQ29tcG9uZW50QWNjZXNzb3IuZ2V0SXNzdWVNYW5hZ2VyKCkudXBkYXRlSXNzdWUodXNlciwgbWksIEV2ZW50RGlzcGF0Y2hPcHRpb24uRE9fTk9UX0RJU1BBVENILCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59Iiwic2NyaXB0UGF0aCI6bnVsbCwicGFyYW1ldGVycyI6e319</arg>
                  <arg name="full.module.key">com.onresolve.jira.groovy.groovyrunnerscriptrunner-workflow-function-com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="canned-script">com.onresolve.scriptrunner.canned.jira.workflow.postfunctions.CustomScriptFunction</arg>
                  <arg name="class.name">com.onresolve.jira.groovy.GroovyFunctionPlugin</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.UpdateIssueStatusFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.misc.CreateCommentFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.GenerateChangeHistoryFunction</arg>
                </function>
                <function type="class">
                  <arg name="class.name">com.atlassian.jira.workflow.function.issue.IssueReindexFunction</arg>
                </function>
                <function type="class">
                  <arg name="eventTypeId">13</arg>
                  <arg name="class.name">com.atlassian.jira.workflow.function.event.FireIssueEventFunction</arg>
                </function>
                <function type="class">
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="uuid">7ed8f248-f9bd-40b5-b04c-c229aaec7f7e</arg>
                  <arg name="field">customfield_23237</arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiesclearFieldValue-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="jsuWorkflowParamsVersion-textValue">2.33.0</arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.ClearFieldValuePostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
                <function type="class">
                  <arg name="field.copyFieldSource2"></arg>
                  <arg name="field.copyFieldSource1">customfield_23236</arg>
                  <arg name="scopeSource-linkEnd"></arg>
                  <arg name="maxAllowed-integerValue"></arg>
                  <arg name="field.createTargetValue1"></arg>
                  <arg name="runAsUser-user">atlassian_faac_service_desk</arg>
                  <arg name="field.copyFieldMode1">OVERWRITE</arg>
                  <arg name="uuid">e300c52f-15ba-4b63-ad28-3dab156ecfdd</arg>
                  <arg name="field.copyFieldDestination1">customfield_22653</arg>
                  <arg name="field.copyFieldSeparator1"></arg>
                  <arg name="scopeType">SAME</arg>
                  <arg name="destination-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="full.module.key">com.googlecode.jira-suite-utilitiescopyValueFromOtherField-function</arg>
                  <arg name="scopeDestination-linkEnd"></arg>
                  <arg name="preconditionAwareFunctionMode-textValue">ALWAYS</arg>
                  <arg name="source-scopeTarget">ISSUE_IN_TRANSITION</arg>
                  <arg name="scopeDestination-jql"></arg>
                  <arg name="class.name">com.googlecode.jsu.workflow.function.CopyValueFromOtherFieldPostFunction</arg>
                  <arg name="scopeSource-jql"></arg>
                </function>
              </post-functions>
            </unconditional-result>
          </results>
        </action>
      </actions>
    </step>
    <step id="4" name="In Progress">
      <meta name="jira.status.id">3</meta>
      <actions>
<common-action id="11" />
      </actions>
    </step>
    <step id="5" name="Rejected">
      <meta name="jira.status.id">11436</meta>
    </step>
  </steps>
</workflow>
